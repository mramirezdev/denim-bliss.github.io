!function(){var e,t,n,i,s,r,o,a,l={292050:function(e,t,n){"use strict";n.d(t,{Md:function(){return T},yW:function(){return d},aJ:function(){return D},$2:function(){return S},hE:function(){return g},Ne:function(){return I},rc:function(){return f},PV:function(){return i}});var i=(e,t)=>{if(!e||!t)return;let n=e.split(/\s+/)||[],i=n.map(e=>{let n=t.get(e);return n||console.warn(`Invalid class name: ${e}`),n}).filter(e=>!!e).join(" ");return i||void 0},s=n(202784),r=n(198022),o=n(957244);let a=new Map,l=new Map,c=new Map,d={addComponentType:(e,t,n)=>{if(a.get(e)){console.warn(`${e} already exists in the componentManager, nothing was modified.`);return}let i={existingPortals:new Set,ultraWhiteList:n||new Map,maxNumberRendered:t};a.set(e,i)},addGlobalComponent:(e,t)=>{c.set(e,t)},getComponent:(e,t)=>{if(!a.has(e))return;let n=a.get(e);return n.ultraWhiteList.get(t)||c.get(t)},getGlobalComponent:e=>c.get(e),getWhitelist:e=>{let t=a.get(e);return t?t.ultraWhiteList:new Map},hasComponent:(e,t)=>{if(!a.has(e))return!1;let n=a.get(e);return n.ultraWhiteList.has(t)||c.has(t)},hasComponentType:e=>a.has(e)||l.has(e),isValidComponent:e=>{let{componentContext:t,componentName:n,contents:i,integrationId:s}=e,r=t?a.get(t):void 0;if(!r&&t)return console.warn(`${t} has not been registered.`),!1;let o=(null==r?void 0:r.ultraWhiteList.get(n))||c.get(n);if(!o)return console.warn(`The component '${n}' has not been added the '${t}' white list.`),!1;if(!i.tag||i.tag!==n)return console.warn(`Incorrect tag: should be ${n} but received ${i.tag}.`),!1;let l=i.props;return!l&&o.props?(console.warn(`Props are needed for '${n}', but no value for 'props' was given.`),!1):o.isValid(i,s)},overMaxComponents:e=>{let t=a.get(e),n=t?t.existingPortals.size:0,i=t&&t.maxNumberRendered;return!i||n>=i},removeComponentType:e=>{let t=a.get(e);t&&a.delete(e)},removeComponentFromPortal:(e,t)=>{let n=a.get(e);n&&n.existingPortals.delete(t)},removeGlobalComponent:e=>c.delete(e),updateComponentPortalList:(e,t)=>{let n=a.get(e);if(!n){console.warn(`${e} is not a registered component.`);return}n.existingPortals.add(t)},setCustomWhiteList:(e,t,n)=>{let i=l.get(e);i||(i=new Map),i.set(t,n),l.set(e,i)},getCustomWhiteList:(e,t)=>{let n=l.get(e);return null==n?void 0:n.get(t)},removeCustomWhiteList:e=>{l.delete(e)},hasCustomWhiteList:(e,t)=>{let n=l.get(e);return!!(null==n?void 0:n.has(t))}},u=new Set,p={},m=e=>{u.forEach(t=>{try{t(o.DI.FailedValidationPortal,e)}catch(e){console.error("Failed to call validation listener",e)}})};function h(e){let{portalType:t,contents:n,child:i,skipCustomValidation:s,integrationId:r}=e;if("string"==typeof n)return{passed:!0};let o=d.getGlobalComponent(n.tag);if(o&&!d.isValidComponent({componentName:n.tag,contents:n,integrationId:r})&&!s)return{passed:!1,message:`Component validation failed for ${n.tag}`};if(!o&&!t)return{passed:!0};let a=t&&d.getComponent(t,n.tag),l=t&&d.hasCustomWhiteList(t,n.tag);if(!i&&!a&&!o&&!s&&!l)return{passed:!1,message:`Initial tag is incorrect for a ${t} portal.`};if(a&&!d.isValidComponent({componentContext:t,componentName:n.tag,contents:n,integrationId:r})&&!s)return{passed:!1,message:`Component validation failed for ${n.tag} on ${t}`};if(!n.children||"string"==typeof n.children)return{passed:!0};for(let e of n.children){let n=h({portalType:t,skipCustomValidation:s,contents:e,integrationId:r,child:!0});if(!n.passed)return n}return{passed:!0}}let g={addPortal:e=>{p[e.portalId]=e,e.portalType&&d.updateComponentPortalList(e.portalType,e.portalId),u.forEach(t=>{try{t(o.DI.NewPortal,e)}catch(e){console.error("Failed to call new portal listener",e)}})},updatePortal:(e,t)=>{let n=t&&t(e.portalId,e.contents);if(n)return m(n),!1;let i=p[e.portalId],s=h({portalType:null==i?void 0:i.portalType,skipCustomValidation:null==i?void 0:i.skipCustomValidation,contents:e.contents,integrationId:e.requestingIntegrationId});return s.passed?(i&&i.setPortalContents(e.contents),!!i):(m({portalId:e.portalId,error:o.yr.InvalidContents,errorMessage:s.message||"Invalid contents provided on update request",requestingIntegrationId:e.requestingIntegrationId}),!1)},addPortalListener:e=>{u.add(e),Object.values(p).forEach(t=>{e(o.DI.NewPortal,t)})},removePortal:e=>{if(!e.portalId)return;let t=p[e.portalId];if(t){let t=p[e.portalId]&&p[e.portalId].portalType;t&&d.removeComponentFromPortal(t,e.portalId),delete p[e.portalId]}u.forEach(t=>{try{t(o.DI.RemovedPortal,e)}catch(e){console.error("Failed to call remove portal listener",e)}})},getPortalData:e=>p[e],sendPortalCallback:e=>{u.forEach(t=>{try{t(o.DI.CallbackPortal,e)}catch(e){console.error("Failed to call callback listener",e)}})},setPortalOwnership:(e,t)=>{let n=p[e];n&&n.setOwningIntegrationId(t)},sendValidationFailure:m,getUnownedPortals:()=>Object.keys(p).filter(e=>!p[e].getOwningIntegrationId()).map(e=>p[e]),validateContents:h},f=(e,t,n,i)=>()=>{let s={type:o.l4.PortalCallback,portalId:n,callbackId:e,event:t,owningIntegrationId:i};g.sendPortalCallback(s)},b=(e,t,n,i)=>{var s;let r=null===(s=t.props)||void 0===s?void 0:s[e].callbackId;return f(r,e,n,i)},v=(e,t,n,i,s)=>e.reduce((e,r)=>{var a,l,c;if(r in o.dX){if(!(null===(l=null===(a=t.props)||void 0===a?void 0:a[r])||void 0===l?void 0:l.callbackId))return console.warn(`custom onXX handlers for integration components must provide a callback id
           Expect form similar to "onXX: {callbackId: '1'}": ${r}`),e;e[r]=b(r,t,n,i)}else{let o=null===(c=null==t?void 0:t.props)||void 0===c?void 0:c[r];if(s){let e=s.transformers&&s.transformers.get(r.toLowerCase());e&&(o=e(o,n,i))}e[r]=o}return e},{}),y=(e,t,n)=>{if(!e.props)return{};let i=o.R9.get(e.tag);if(!(null==i?void 0:i.attributes))return{};let s=Object.keys(e.props),r=s.filter(e=>i.attributes.includes(e));return v(r,e,t,n,i)},C=e=>{let{contentItem:t,portalType:n,portalId:i,owningIntegration:s}=e;if(!t.props)return{};let r=n?d.getComponent(n,t.tag):d.getGlobalComponent(t.tag);if(!r)return{};let o=Object.keys(t.props),a=o.filter(e=>r.props&&e in r.props);return v(a,t,i,s,{attributes:Object.keys(r.props||{}),transformers:r.transformers})},S=e=>{let{selector:t,selectorData:n,portalId:i,initialOwningIntegrationId:o,initialContents:a,portalType:l,skipCustomValidation:c,onContentsChanged:u,onRegistered:p}=e;if(l&&!d.hasComponentType(l))return console.error(`Portal Type: ${l} is not listed in the componentManager,
      either add it to the ComponentManager along with a whitelist or remove the attribute`),null;let[m,h]=(0,s.useState)(a),[f,b]=(0,s.useState)(o),[v]=(0,s.useState)(i||(0,r.v4)());return(0,s.useEffect)(()=>(g.addPortal({portalId:v,selector:t,selectorData:n,setPortalContents:e=>{h(e),setTimeout(()=>u&&u(e))},setOwningIntegrationId:e=>{b(e)},getOwningIntegrationId:()=>f,portalType:l,skipCustomValidation:!!c}),p&&p(),()=>{g.removePortal({portalId:v,selector:t,selectorData:n})}),[v,t,n,l,f,c,u]),s.createElement(s.Fragment,null,E(m&&[m],f,v,l))},E=(e,t,n,r)=>e?"string"==typeof e?[e]:e.map((e,a)=>{let l;if(!e)return null;if(r){let i=d.getComponent(r,e.tag);if(i){let s=C({contentItem:e,portalType:r,portalId:n,owningIntegration:t});return i.render(n,{key:a,...s},E(e.children,t,n,r))}}let c=d.getGlobalComponent(e.tag);if(c){let i=C({contentItem:e,portalId:n,owningIntegration:t});return c.render(n,{key:a,...i},E(e.children,t,n))}if(r&&(l=d.getCustomWhiteList(r,e.tag)),l||(l=o.R9.get(e.tag)),l){let o=y(e,n,t);return""===o.src||""===o.href?null:(o.href&&(o.target="_blank"),o.key=a,o.className=i(o.className,l.classNameMappings)||l.classNameDefault,s.createElement(e.tag,o,E(e.children,t,n,r)))}return null}):null,I=e=>{let{portals:t,selector:n,portalType:i}=e;return s.createElement(s.Fragment,null,t.map((e,t)=>{let r={...e.selectorData,registrationId:e.registrationRecord.registrationId,registrationName:e.registrationRecord.registrationName};return s.createElement(S,{key:t,selector:n,selectorData:r,initialOwningIntegrationId:e.registrationRecord.integrationId,portalType:i})}))},w=new Map;w.set(o.Oz,o.o4),w.set(o.dq.PanelNew,o.o4),w.set(o.dq.PanelClose,o.o4),w.set(o.Kj.Click,o.cp),w.set(o.Kj.Hover,o.cp),w.set(o.Kj.PortalNew,o.o4),w.set(o.Kj.PortalRemove,o.o4),w.set(o.Kj.Route,o.Tv),w.set(o.Kj.RouteChanging,o.Tv),w.set(o.SC,o.Yy),w.set(o.BG.ModalNew,o.$I),w.set(o.BG.ModalClose,o.$I),w.set(o.Eo.NotificationNew,o.DK),w.set(o.Eo.NotificationClose,o.DK);let A=(e,t)=>{if(!k(t))return!1;let n=w.get(e.type);return!!(t.authScopes.has(o.Rt)||n&&t.authScopes.has(n))||(console.warn(`Invalid auth scope for ${e.type}, ${n} is required.`),!1)};function k(e){return!!e.authScopes&&!(e.authScopes.size<=0)||(console.warn(`Received event without integration (${e&&e.id}) being authenticated.`),!1)}let x=new Map;x.set(o.Oz,A),x.set(o.e0,(e,t)=>!!k(t)&&(!!t.authScopes.has(o.bN)||(console.warn(`The integration ${t.id} does not have the JavaScript injection scope`),!1))),x.set(o.c9,(e,t)=>{if(!k(t))return!1;if(t.authScopes.has(o.Rt))return!0;let n=new Map;e.subscriptions.forEach(e=>{let t=w.get(e);t&&n.set(t,e)});let i=[];return e.subscriptions.forEach(e=>{let s=w.get(e);s&&t.authScopes.has(s)?n.delete(s):i.push(e)}),i.length===n.size||(n.forEach(t=>{let i=n.get(t);if(!i){console.warn(`Unrecognized auth scope ${t}.`);return}console.warn(`Invalid auth scope for ${e.type}, ${t} is required for the ${i} event.`)}),!1)}),x.set(o.dq.PanelNew,A),x.set(o.dq.PanelClose,A),x.set(o.SC,A),x.set(o.BG.ModalNew,A),x.set(o.BG.ModalClose,A),x.set(o.Eo.NotificationNew,A),x.set(o.Eo.NotificationClose,A);let T={authScopes:x},P=new Map,D={addHelpProvider:e=>{P.set(e.providerId,e)},removeHelpProvider:e=>{P.delete(e)},getHelpProvider:e=>P.get(e),getProviderByType:e=>Array.from(P.values()).filter(t=>t.providerType===e),getProviders:()=>Array.from(P.values())}},957244:function(e,t,n){"use strict";var i,s,r,o,a,l,c,d,u,p,m,h,g,f,b,v,y,C,S,E,I,w,A,k,x,T,P,D,G,R,B,L,N,O,M,$,H,F,U,V,_,q,z,W,j,Z,K,X,Y,Q,J,ee,et,en,ei,es,er,eo,ea;n.d(t,{Rt:function(){return eb},cp:function(){return eu},$3:function(){return eK},RC:function(){return ec},ul:function(){return ej},eB:function(){return eZ},l4:function(){return A},IK:function(){return R},OZ:function(){return G},Fm:function(){return eW},qV:function(){return D},Yy:function(){return ep},SC:function(){return eC},A0:function(){return eS},_n:function(){return s},j6:function(){return el},RU:function(){return B},xR:function(){return i},EA:function(){return P},sH:function(){return o},fZ:function(){return a},Jg:function(){return T},D_:function(){return h},ZN:function(){return c},iA:function(){return u},RK:function(){return f},CD:function(){return d},wV:function(){return eI},m1:function(){return ek},gQ:function(){return ex},o4:function(){return em},$I:function(){return eg},DK:function(){return ef},pM:function(){return eM},Oz:function(){return eO},bN:function(){return ey},hq:function(){return ev},PO:function(){return eV},Ul:function(){return e_},yr:function(){return w},dX:function(){return S},BG:function(){return l},X$:function(){return r},B$:function(){return eE},Eo:function(){return g},$n:function(){return p},L4:function(){return ew},LB:function(){return m},AQ:function(){return eA},Hh:function(){return y},dq:function(){return v},Nc:function(){return b},l1:function(){return C},yf:function(){return eN},oi:function(){return k},Tv:function(){return eh},cQ:function(){return eY},e0:function(){return eX},c9:function(){return eq},Mi:function(){return ed},Vd:function(){return ez},DI:function(){return E},Kj:function(){return x},R9:function(){return eU},hj:function(){return e$}});let el="integration:hello",ec="authorization:authorize",ed="authorization:unauthorize";(L=i||(i={})).Failure="failure",L.Success="success";let eu="ultra:analytics-event",ep="ultra:help",em="ultra:portal",eh="ultra:route-event",eg="ultra:modal",ef="ultra:notification",eb="*",ev="bb.premium.uef",ey="bb.premium.uef.injectjs",eC="help:register",eS="help:request";(N=s||(s={})).Auxiliary="auxiliary",N.Primary="primary",(O=r||(r={})).Small="small",O.Medium="medium",O.Large="large";let eE=new Set(Object.values(r));(M=o||(o={})).Modal="Modal",M.ModalHeader="ModalHeader",M.ModalBody="ModalBody",M.ModalFooter="ModalFooter",($=a||(a={}))[$.ModalAlreadyOpenError=1]="ModalAlreadyOpenError",$[$.FailedComponentValidationError=2]="FailedComponentValidationError",$[$.InvalidRequestTypeError=3]="InvalidRequestTypeError",$[$.InvalidIdError=4]="InvalidIdError",$[$.MissingContentsError=5]="MissingContentsError",$[$.WrongOwnerError=6]="WrongOwnerError",$[$.ModalNotFoundError=7]="ModalNotFoundError",(H=l||(l={})).ModalNew="portal:modal",H.ModalResponse="portal:modal:response",H.ModalClose="portal:modal:close",H.ModalCloseResponse="portal:modal:close:response",(F=c||(c={}))[F.InvalidSelectorError=1]="InvalidSelectorError",F[F.InvalidTargetError=2]="InvalidTargetError",F[F.NotificationNotFoundError=3]="NotificationNotFoundError",F[F.NoOwnershipError=4]="NoOwnershipError",F[F.FailedComponentValidationError=5]="FailedComponentValidationError",(U=d||(d={})).Dark="dark",U.Light="light";let eI=new Set(Object.values(d));(V=u||(u={}))[V.Small=12]="Small",V[V.Medium=20]="Medium",V[V.Large=30]="Large",(_=p||(p={})).BottomLeft="bottom:left",_.BottomRight="bottom:right",_.TopLeft="top:left",_.TopRight="top:right";let ew=new Set(Object.values(p));(q=m||(m={})).AnalyticsId="notification:analytics:selector",q.Region="notification:region:selector";let eA=new Set(Object.values(m));(h||(h={})).Notification="Notification",(z=g||(g={})).NotificationNew="portal:notification",z.NotificationResponse="portal:notification:response",z.NotificationStatus="portal:notification:status",z.NotificationClose="portal:notification:close",z.NotificationCloseResponse="portal:notification:close:response",(W=f||(f={})).Queued="queued",W.Visible="visible",W.Failed="failed",W.Removed="removed";let ek="submission-tool:register",ex="submission-tool:settings-saved";(j=b||(b={})).Full="full",j.Small="small",(Z=v||(v={})).PanelNew="portal:panel",Z.PanelResponse="portal:panel:response",Z.PanelClose="portal:panel:close",Z.PanelCallback="portal:callback",(K=y||(y={})).onClose="onClose",K.onBlur="onBlur",K.onScroll="onScroll",K.onClick="onClick";let eT=globalThis.location.origin,eP="^[\\u0000-\\u001F ]*",eD=`${eP}j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*:`,eG=`${eP}d[\\r\\n\\t]*a[\\r\\n\\t]*t[\\r\\n\\t]*a[\\r\\n\\t]*:`,eR=`(${eD})|(^${eT})/|(${eG})`,eB=RegExp(eR,"i"),eL=e=>!e||eB.test(e)?"":e;(X=C||(C={})).Small="small",X.Medium="medium",X.Large="large";let eN=new Set(Object.values(C));(Y=S||(S={})).onFocus="onFocus",Y.onBlur="onBlur",Y.onClick="onClick";let eO="portal:render",eM="portal:render:response";(Q=E||(E={})).NewPortal="new",Q.RemovedPortal="removed",Q.CallbackPortal="callback",Q.FailedValidationPortal="failedValidation";let e$=["className","style","dir",...Object.keys(S),"role","tabindex","id","aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-dropeffect","aria-errormessage","aria-expanded","aria-flowto","aria-grabbed","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],eH=new Map([["src",eL],["href",eL]]),eF=new Map;["div","span","h1","h2","h3","h4","p","ul","ol","li"].forEach(e=>eF.set(e,{attributes:e$})),eF.set("button",{attributes:[...e$,"disabled"],classNameMappings:new Map(Object.entries({"uef--button":"button button--primary","uef--button--secondary":"button button--secondary"})),classNameDefault:"uef--button--classless"}),eF.set("iframe",{attributes:[...e$,"src"],transformers:eH}),eF.set("img",{attributes:[...e$,"src","alt","height","width"],transformers:eH}),eF.set("bdi",{attributes:e$}),eF.set("bdo",{attributes:e$}),eF.set("a",{attributes:[...e$,"href"],transformers:eH});let eU=eF;(I||(I={})).PortalClose="portal:close",(J=w||(w={}))[J.Authorization=1]="Authorization",J[J.InvalidContents=2]="InvalidContents",(A||(A={})).PortalCallback="portal:callback";let eV="proctoring-service:register",e_="proctoring-service:settings-saved";(ee=k||(k={}))[ee.ExistingRegistration=0]="ExistingRegistration",ee[ee.MissingPlacementHandle=1]="MissingPlacementHandle",(et=x||(x={})).Click="click",et.Hover="hover",et.PortalNew="portal:new",et.PortalRemove="portal:remove",et.Route="route",et.RouteChanging="route:changing",et.LtiLaunch="lti:launch";let eq="event:subscribe",ez="event:unsubscribe",eW="event:event",ej="basenav:register";(en=T||(T={}))[en.InvalidRouteName=1]="InvalidRouteName",en[en.ExistingRouteName=2]="ExistingRouteName",(ei=P||(P={})).Link="Link",ei.ButtonLink="ButtonLink",(es=D||(D={})).LtiLaunch="LtiLaunch",es.SvgIcon="SvgIcon",es.ActionMenu="ActionMenu";let eZ="course:detail:register";(er=G||(G={})).Failure="failure",er.Success="success",(eo=R||(R={}))[eo.ExistingRegistration=0]="ExistingRegistration";let eK="analytics:visible";(ea=B||(B={}))[ea.RateLimit=20]="RateLimit",ea[ea.MultipleIntegrationRateLimit=15]="MultipleIntegrationRateLimit";let eX="injectjs:inject",eY="injectjs:inject:response"},564470:function(e,t,n){"use strict";n.d(t,{H1:function(){return i},J9:function(){return l.Z},Wq:function(){return a.Z},XJ:function(){return c},l9:function(){return a.l}});var i,s=n(213980),r=n(202784),o=n(928316),a=n(469996),l=n(955546);(i||(i={})).InstructorFeedback="instructorfeedback";let c=s.shape({getXythosIdFromContentFileUrl:s.func,update:s.func,isAvailable:s.func,getIndexMapFromBbML:s.func,onUpdate:s.func,destroyListeners:s.func});t.ZP={renderContentId:(e,t)=>{o.render(r.createElement(l.Z,{...t}),e)},renderWidget:(e,t)=>{o.render(r.createElement(a.Z,{...t}),e)},destroyComponent:e=>{o.unmountComponentAtNode(e)}}},474115:function(e,t,n){"use strict";function i(e,t){var n;for(let i=t;i<e.length;i++)if("\n"===e[i].insert)return!!(null===(n=e[i].attributes)||void 0===n?void 0:n["code-block"]);return!1}n.d(t,{z:function(){return i}}),t.Z=(()=>{let e={};async function t(t,n,i){let s=t?Object.keys(t):Object.keys(e);s=s.filter(t=>e[t]&&e[t].toBbMLAsync);let r=null!=t?t:{};return await s.reduce((t,n)=>t.then(t=>e[n].toBbMLAsync(t,r[n],i)),Promise.resolve(n||""))}function n(t,n){let i=n||"";return Object.keys(t).forEach(n=>{e[n]&&e[n].toBbML&&(i=e[n].toBbML(i,t[n]))}),i}function s(e,t,n){let i="",s=t+1;for(;s>e.length;)i+=`<${n}>`,e.push(n);for(;s<e.length;){let t=e.pop();i+=`</${t}>`}return 0!==e.length&&n!==e[e.length-1]&&(i+=`</${e.pop()}><${n}>`,e.push(n)),i}function r(e,t,n,i){return`<${e}${t&&` dir="${t}"`}${n&&` style="${n}"`}>${i}</${e}>`}function o(e,t,n,i){if(n)return function(e,t,n,i){let o="p",a="",l="",c="";if(n.header){let e=Math.max(n.header,4);o=`h${e}`}if(n.list){let e=n.indent||0;a+=s(t,e,o="ordered"===n.list?"ol":"ul"),o="li",n["bullet-size"]&&n["custom-indent"]&&(l+=`font-size: ${n["bullet-size"]};
          ${i?"padding-right":"padding-left"}: ${n["custom-indent"]};`)}return n.align&&(l+=`text-align: ${n.align};`),n.lineheight&&(l+=`line-height: ${n.lineheight};`),n.direction&&(c+=n.direction),n.tag&&(o=n.tag),n["code-block"]&&(o="pre"),!n.list&&t.length>0&&(a+=s(t,-1,"")),"p"!==o||e?(null==n?void 0:n.tag)?a+=`<${o}>`:(""===o&&(o="p"),"pre"===o&&""===e&&(e=" "),a+=r(o,c,l,e)):a+="<br>",a}(e,t,n,i);let o="";return t.length>0&&(o+=s(t,-1,"")),e?o+=r("p","","",e):o+="<br>",o}function a(e){var t,n,i,s,r;return(null!==(n=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.td)&&void 0!==n?n:null===(i=null==e?void 0:e.attributes)||void 0===i?void 0:i.th)&&(null===(s=null==e?void 0:e.attributes)||void 0===s?void 0:s.tr)&&(null===(r=null==e?void 0:e.attributes)||void 0===r?void 0:r.table)}return{registerConverter:(t,n)=>{"function"==typeof n&&(e[t]=n)},toBbML:(r,l,c=!1)=>{var d;let u=r[0];if(1===r.length&&"\n"===u.insert&&(!u.attributes||!u.attributes.list))return c?Promise.resolve(""):"";let p=function(e){let t=[];return e.forEach((e,n,i)=>{var s,r;if("string"!=typeof e.insert||!e.insert.includes("\n")||"string"==typeof e.insert&&(null!==(s=e.insert.match(/\s/g))&&void 0!==s?s:[]).length<=1&&n+1<i.length&&a(i[n+1]))((null===(r=e.attributes)||void 0===r?void 0:r.tablebr)||a(e)||0===n||a(i[n-1])||"\n"!==e.insert||n+1>=i.length||!a(i[n+1]))&&("string"==typeof e.insert&&e.insert.trim().length>0&&e.insert.includes("\n")&&(e.insert=e.insert.trim()),t.push(e));else if(e.insert.includes("\n")){let n=e.insert.split("\n");n.forEach(n=>{""!==n&&t.push({insert:n}),t.push({insert:"\n",attributes:e.attributes})}),t.pop()}}),t}(r);return d=p=function(e){var t,n,i;let s,r;if(!e.some(e=>{var t,n,i,s;return(null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.td)||(null===(n=null==e?void 0:e.attributes)||void 0===n?void 0:n.th)||(null===(i=null==e?void 0:e.attributes)||void 0===i?void 0:i.tr)||(null===(s=null==e?void 0:e.attributes)||void 0===s?void 0:s.table)}))return e;let o=[],l=[],c="td";for(let d=e.length-1;d>=0;d--){let u=e[d];a(u)&&(l.includes(u.attributes.table)||(o.push({simpleTag:!0,insert:"\n",attributes:{tag:"/table"}}),l.push(u.attributes.table),s=null),s!==u.attributes.tr&&(s&&(o.push({simpleTag:!0,insert:"\n",attributes:{tag:c}}),o.push({simpleTag:!0,insert:"\n",attributes:{tag:"tr"}}),r=null,c="td"),s=u.attributes.tr,o.push({simpleTag:!0,insert:"\n",attributes:{tag:"/tr"}})),r!==(null!==(t=u.attributes.td)&&void 0!==t?t:u.attributes.th)&&(r&&o.push({simpleTag:!0,insert:"\n",attributes:{tag:c}}),r=null!==(n=u.attributes.td)&&void 0!==n?n:u.attributes.th,c=u.attributes.th?"th":"td",o.push({simpleTag:!0,insert:"\n",attributes:{tag:`/${c}`}}))),(null===(i=u.attributes)||void 0===i?void 0:i.tablebr)&&(o.push({simpleTag:!0,insert:"\n",attributes:{tag:c}}),o.push({simpleTag:!0,insert:"\n",attributes:{tag:"tr"}}),o.push({simpleTag:!0,insert:"\n",attributes:{tag:"table"}}),l=[],r=null,s=null,c="td"),o.push(u)}return o.reverse().filter(e=>{var t;return!(null===(t=e.attributes)||void 0===t?void 0:t.tablebr)})}(p),(p=Object.keys(e).reduce((t,n)=>"function"==typeof e[n].split?e[n].split(t,c):t,d))[p.length-1]&&"\n"!==p[p.length-1].insert&&p.push({insert:"\n"}),function(e,r,a=!1){let l="",c="",d=[],u=!1;function p(e,t,n){var i,s;(null===(i=e.attributes)||void 0===i?void 0:i.tag)==="table"&&(u=!0,""!==c&&(l+=c,c="")),(!u||u&&e.attributes)&&(l+=o(c,d,e.attributes)),(null==e?void 0:e.simpleTag)||(c=""),(null===(s=e.attributes)||void 0===s?void 0:s.tag)==="/table"&&(u=!1)}function m(e,t,n){var i,s;((null===(i=e.attributes)||void 0===i?void 0:i.align)||(null===(s=e.attributes)||void 0===s?void 0:s.direction))&&(l+=o(c,d,e.attributes,r),c="")}function h(e,s,r){let o=n(e.insert);if(a)return t(e.insert,o,{"code-block":i(r,s)}).then(t=>{c+=t,m(e,s,r)});c+=o,m(e,s,r)}function g(e,s,r){var o,l;let d;let u=(o=e.insert||"",l=e.attributes,(d=(d=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/^[ ]/,"&nbsp;").replace(/[ ]$/,"&nbsp;"),l)?(l.subscript&&(d=`<sub>${d}</sub>`),l.superscript&&(d=`<sup>${d}</sup>`),l.underline&&(d=`<span style="text-decoration:underline;">${d}</span>`),l.strike&&(d=`<del>${d}</del>`),l.italic&&(d=`<em>${d}</em>`),l.bold&&(d=`<strong>${d}</strong>`),l.size&&(d=`<span style="font-size: ${l.size};">${d}</span>`),l.font&&(d=`<span style="font-family: ${l.font};">${d}</span>`),l.color&&(d=`<span style="color: ${l.color}">${d}</span>`),d=n(l,d)):d);if(a)return t(e.attributes,u,{"code-block":i(r,s)}).then(e=>{c+=e});c+=u}function f(){l+=s(d,-1,"")}async function b(){for(let t=0;t<e.length;++t){let n=e[t];"\n"===n.insert?p(n,t,e):"object"==typeof n.insert?await h(n,t,e):await g(n,t,e)}}return a?b().then(()=>(f(),l)):(e.forEach((e,t,n)=>{"\n"===e.insert?p(e,t,n):"object"==typeof e.insert?h(e,t,n):g(e,t,n)}),f(),l)}(p,l,c)}}})()},941386:function(e,t,n){"use strict";n.d(t,{$2:function(){return e0},AU:function(){return er},AV:function(){return eR},AW:function(){return eC},Ag:function(){return e8},B2:function(){return eD},BU:function(){return eF},Cg:function(){return ey},DQ:function(){return em},EL:function(){return ec},Fo:function(){return eG},GS:function(){return e3},GY:function(){return eW},IH:function(){return ed},JZ:function(){return e$},K3:function(){return ef},L3:function(){return eS},MO:function(){return es},MP:function(){return eI},Ni:function(){return ea},OR:function(){return e5},Ol:function(){return eM},QA:function(){return eA},QI:function(){return e9},Qi:function(){return eK},Re:function(){return e2},SN:function(){return e4},Tx:function(){return eQ},Un:function(){return el},VV:function(){return ti},WP:function(){return eq},XM:function(){return ez},Zp:function(){return te},_T:function(){return eX},aj:function(){return ew},ar:function(){return e1},c0:function(){return ej},cM:function(){return e7},d8:function(){return eY},dK:function(){return eO},dr:function(){return eg},gO:function(){return en},gu:function(){return eN},jU:function(){return eB},jy:function(){return eU},km:function(){return e6},l2:function(){return eh},nk:function(){return ei},nl:function(){return eT},pn:function(){return ep},rA:function(){return ex},rG:function(){return eV},sc:function(){return e_},sg:function(){return ev},t0:function(){return eZ},tM:function(){return eu},v2:function(){return eo},v6:function(){return eJ},wR:function(){return tt},wj:function(){return tn},wk:function(){return eb},xj:function(){return eP},yH:function(){return ek},yj:function(){return ts},yx:function(){return eH},yz:function(){return eE},zH:function(){return eL}});var i=n(271154),s=n(150465),r=n(204445),o=n(898008),a=n(330217),l=n(577099),c=n(449806),d=n(470276),u=n(814816),p=n(942548),m=n(611997),h=n(383568),g=n(932576),f=n(13417),b=n(743983),v=n(645938),y=n(335886),C=n(242091),S=n(152999),E=n(543596),I=n(416675),w=n(533702),A=n(865913),k=n(881355),x=n(603554),T=n(501016),P=n(622109),D=n(632879),G=n(710048),R=n(765456),B=n(370559),L=n(891418),N=n(555066),O=n(943890),M=n(934693),$=n(545780),H=n(134253),F=n(158239),U=n(637817),V=n(477309),_=n(311438),q=n(935055),z=n(660837),W=n(628040),j=n(238314),Z=n(597993),K=n(932578),X=n(300400),Y=n(961406),Q=n(539976),J=n(902813),ee=n(462966);let et={format:{header:!1,list:!1}},en={toolbarId:"tableFormattingToolbar"},ei={toolbarId:"textStylingToolbar"},es={toolbarId:"textOptionsToolbar"},er={toolbarId:"listFormattingToolbar"},eo={cssClass:"alignment",iconName:"alignment",iconComponent:U.z,id:"alignment",key:"alignment"},ea={cssClass:"alignLeft",iconName:"alignLeft",iconComponent:U.z,id:"align-left",key:"alignLeft",onClick:({applyChange:e})=>e(g.xM.createChange(g.jm)),isActive:e=>e.align===g.jm||!e.align},el={cssClass:"alignCenter",iconName:"alignCenter",iconComponent:V.V,id:"align-center",key:"alignCenter",onClick:({applyChange:e})=>e(g.xM.createChange(g.w3)),isActive:e=>e.align===g.w3},ec={cssClass:"alignRight",iconName:"alignRight",iconComponent:_.Q,id:"align-right",key:"alignRight",onClick:({applyChange:e})=>e(g.xM.createChange(g.gg)),isActive:e=>e.align===g.gg},ed={cssClass:"alignJustify",iconName:"alignJustify",iconComponent:q.l,id:"align-justify",key:"alignJustify",onClick:({applyChange:e})=>e(g.xM.createChange(g.x2)),isActive:e=>e.align===g.x2},eu={cssClass:"text-styling",iconName:"Type",iconComponent:$.D,id:"textStyling",key:"textStyling"},ep={cssClass:"text-style",iconName:"type-size",iconComponent:C.V,id:"textStyle",key:"textStyle"},em={cssClass:"text-font",iconName:"text",iconComponent:M.x,id:"textFont",key:"textFont"},eh={cssClass:"arial text-font",id:"font-arial",key:"fontArial",onClick:({applyChange:e})=>e(p.Zx.createChange(p.MW)),isActive:e=>e.font===p.MW},eg={cssClass:"comic-sans text-font",id:"font-comic-sans",key:"fontComicSans",onClick:({applyChange:e})=>e(p.Zx.createChange(p.eL)),isActive:e=>e.font===p.eL},ef={cssClass:"courier-new text-font",id:"font-courier-new",key:"fontCourierNew",onClick:({applyChange:e})=>e(p.Zx.createChange(p.Ol)),isActive:e=>e.font===p.Ol},eb={cssClass:"noto text-font",id:"font-noto",key:"fontNoto",onClick:({applyChange:e})=>e(p.Zx.createChange(p.z2)),isActive:e=>e.font===p.z2},ev={cssClass:"open-sans text-font",id:"font-open-sans",key:"fontOpenSans",onClick:({applyChange:e})=>e(p.Zx.createChange(p.KZ)),isActive:e=>e.font===p.KZ||!e.font},ey={cssClass:"times-new-roman text-font",id:"font-TNR",key:"fontTNR",onClick:({applyChange:e})=>e(p.Zx.createChange(p.gt)),isActive:e=>e.font===p.gt},eC={cssClass:"verdana text-font",id:"font-verdana",key:"fontVerdana",onClick:({applyChange:e})=>e(p.Zx.createChange(p.VT)),isActive:e=>e.font===p.VT},eS={cssClass:"lineHeight",iconName:"lineHeight",iconComponent:z.L,id:"lineHeight",key:"lineHeight"},eE={cssClass:"lineHeight1",id:"lineHeight-1",key:"lineHeight1",onClick:({applyChange:e})=>e(h.kG.createChange(h.g)),isActive:e=>e.lineheight===h.g},eI={cssClass:"lineHeight115",id:"lineHeight-115",key:"lineHeight115",onClick:({applyChange:e})=>e(h.kG.createChange(h.ee)),isActive:e=>e.lineheight===h.ee},ew={cssClass:"lineHeight150",id:"lineHeight-150",key:"lineHeight150",onClick:({applyChange:e})=>e(h.kG.createChange(h.j4)),isActive:e=>e.lineheight===h.j4||!e.lineheight},eA={cssClass:"lineHeight2",id:"lineHeight-2",key:"lineHeight2",onClick:({applyChange:e})=>e(h.kG.createChange(h.uD)),isActive:e=>e.lineheight===h.uD},ek={cssClass:"text-size",iconName:"type-size",iconComponent:H.H,id:"textSize",key:"textSize"},ex={cssClass:"text-size-num",id:"size-10px",key:"size10px",onClick:({applyChange:e})=>e(m.$u.createChange(m.X4)),isActive:e=>e.size===m.X4},eT={cssClass:"text-size-num",id:"size-12px",key:"size12px",onClick:({applyChange:e})=>e(m.$u.createChange(m.r_)),isActive:e=>e.size===m.r_},eP={cssClass:"text-size-num",id:"size-14px",key:"size14px",onClick:({applyChange:e})=>e(m.$u.createChange(m.SC))},eD={cssClass:"text-size-num",id:"size-18px",key:"size18px",onClick:({applyChange:e})=>e(m.$u.createChange(m.gJ))},eG={cssClass:"text-size-num",id:"size-24px",key:"size24px",onClick:({applyChange:e})=>e(m.$u.createChange(m.Yf)),isActive:e=>e.size===m.Yf},eR={cssClass:"text-size-num",id:"size-36px",key:"size36px",onClick:({applyChange:e})=>e(m.$u.createChange(m.SG)),isActive:e=>e.size===m.SG},eB={cssClass:"text-size-num",id:"size-48px",key:"size48px",onClick:({applyChange:e})=>e(m.$u.createChange(m.B3)),isActive:e=>e.size===m.B3},eL={cssClass:"color-picker",iconName:"paint-bucket",iconComponent:I.m,id:"color-picker",key:"colorPicker"},eN={cssClass:"color-black",iconName:"color-black",id:"color-picker-black",key:"color-black",isColorPicker:!0,color:ee.O9.Black,onClick:({applyChange:e})=>e(J.Z.createChange(ee.O9.Black))},eO={cssClass:"color-grey",iconName:"color-grey",id:"color-picker-grey",key:"color-grey",isColorPicker:!0,color:ee.O9.Grey,onClick:({applyChange:e})=>e(J.Z.createChange(ee.O9.Grey))},eM={cssClass:"color-purple",iconName:"color-purple",id:"color-picker-purple",key:"color-purple",isColorPicker:!0,color:ee.O9.Purple,onClick:({applyChange:e})=>e(J.Z.createChange(ee.O9.Purple))},e$={cssClass:"color-blue",iconName:"color-blue",id:"color-picker-blue",key:"color-blue",isColorPicker:!0,color:ee.O9.Blue,onClick:({applyChange:e})=>e(J.Z.createChange(ee.O9.Blue))},eH={cssClass:"color-green",iconName:"color-green",id:"color-picker-green",key:"color-green",isColorPicker:!0,color:ee.O9.Green,onClick:({applyChange:e})=>e(J.Z.createChange(ee.O9.Green))},eF={cssClass:"color-red",iconName:"color-red",id:"color-picker-red",key:"color-red",isColorPicker:!0,color:ee.O9.Red,onClick:({applyChange:e})=>e(J.Z.createChange(ee.O9.Red))},eU={cssClass:"direction-LTR",id:"direction-LTR",key:"direction-LTR",iconName:"left-to-right",iconComponent:K.A,onClick:({applyChange:e})=>e(f.Nm.createChange(f.TM))},eV={cssClass:"direction-RTL",id:"direction-RTL",key:"direction-RTL",iconName:"right-to-left",iconComponent:X.u,onClick:({applyChange:e})=>e(f.Nm.createChange(f.hn))},e_={cssClass:"list-style",iconName:"bulleted-list",iconComponent:w.n,id:"listStyleMenu",key:"listStyleMenu"},eq={cssClass:"undo-action",iconName:"undo",iconComponent:W.W,id:"undo",key:"undo",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.history",action:"undo"})},ez={cssClass:"clear-format",iconName:"erase",iconComponent:j.e,id:"clearFormat",key:"clearFormat",toggleButton:!1,onClick:({quillModuleAction:e})=>e({action:"clearFormat"})},eW={cssClass:"syntax-action",iconName:"syntax",iconComponent:Z.J,id:"syntax",key:"syntax",toggleButton:!0,onClick:({isActive:e,applyChange:t})=>t(u.Z.createChange(!e)),isActive:e=>e["code-block"]},ej={cssClass:"format-style",iconName:"format-text",iconComponent:Q.Menu,id:"formatStyleMenu",key:"formatStyleMenu"},eZ={cssClass:"insert-content",iconName:"add",iconComponent:b.m,id:"insertContent",key:"insertContent"},eK=[{cssClass:"header-four",id:"title",key:"title",tag:"h4",onClick:({isActive:e,applyChange:t})=>t(e?et:o.Z.createChange(4)),isActive:e=>4===e.header},{cssClass:"header-five",id:"header",key:"header",tag:"h5",onClick:({isActive:e,applyChange:t})=>t(e?et:o.Z.createChange(5)),isActive:e=>5===e.header},{cssClass:"header-six",id:"subheader",key:"subheader",tag:"h6",onClick:({isActive:e,applyChange:t})=>t(e?et:o.Z.createChange(6)),isActive:e=>6===e.header},{cssClass:"unstyled",id:"paragraph",key:"paragraph",tag:"p",onClick:({applyChange:e})=>e(et),isActive:e=>!e.header&&!e.list}],eX=eK.map(({cssClass:e,id:t,tag:n,key:i})=>({cssClass:e,id:t,tag:n,key:i})),eY={cssClass:"bold",iconName:"bold",iconComponent:v.q,id:"bold",key:"bold",onClick:({isActive:e,applyChange:t})=>t(i.Z.createChange(!e)),isActive:e=>e.bold},eQ={cssClass:"italic",iconName:"italicize",iconComponent:S.a,id:"italic",key:"italic",onClick:({isActive:e,applyChange:t})=>t(s.Z.createChange(!e)),isActive:e=>e.italic},eJ={cssClass:"underline",iconName:"underline",iconComponent:F.$,id:"underline",key:"underline",onClick:({isActive:e,applyChange:t})=>t(r.Z.createChange(!e)),isActive:e=>e.underline},e0={cssClass:"superscript",iconName:"superscript",iconComponent:x.i,id:"superscript",key:"superscript",onClick:({isActive:e,applyChange:t})=>t(l.Z.createChange(!e)),isActive:e=>e.superscript},e1={cssClass:"subscript",iconName:"subscript",iconComponent:k.s,id:"subscript",key:"subscript",onClick:({isActive:e,applyChange:t})=>t(c.Z.createChange(!e)),isActive:e=>e.subscript},e2={cssClass:"strike",iconName:"strikethrough",iconComponent:A.n,id:"strike",key:"strike",onClick:({isActive:e,applyChange:t})=>t(d.Z.createChange(!e)),isActive:e=>e.strike},e3={cssClass:"ordered-list-item",iconName:"numbered-list",iconComponent:E.w,id:"orderedList",key:"orderedList",onClick:({isActive:e,applyChange:t})=>t(e?et:a.ZP.createChange(!1)),isActive:e=>"ordered"===e.list},e9={cssClass:"unordered-list-item",iconName:"bulleted-list",iconComponent:y.K,id:"unorderedList",key:"unorderedList",onClick:({isActive:e,applyChange:t})=>t(e?et:a.ZP.createChange(!0)),isActive:e=>"bullet"===e.list},e4={cssClass:"table-creator-style",iconName:"table-creator",iconComponent:T.i,id:"tableCreator",key:"tableCreator"},e7={cssClass:"insert-table-style",iconName:"insert-table",iconComponent:P.F,id:"insertTable",key:"insertTable",isDialog:!0,onClick:({showModal:e,translate:t,quillModuleAction:n,closeAllMenus:i,bbEditorId:s})=>{e(Y.Z,{translate:t,quillModuleAction:n,closeAllMenus:i,bbEditorId:s})}},e5={cssClass:"edit-table-style",iconName:"edit-table",iconComponent:T.i,id:"editTable",key:"editTable",isDialog:!0,onClick:({showModal:e,translate:t,quillModuleAction:n,closeAllMenus:i,bbEditorId:s})=>{let r=n({module:"quill.table",action:"get-table-info"}),o={columns:r.columnCount,rows:r.rowCount,headerRow:r.headerRow,headerColumn:r.headerColumn};e(Y.Z,{translate:t,quillModuleAction:n,isEditingTable:!0,editProps:o,closeAllMenus:i,bbEditorId:s})}},e6={cssClass:"insert-row-above-style",iconName:"insert-row-above",iconComponent:R.j,id:"insertRowAbove",key:"insertRowAbove",toggleButton:!1,onClick:({quillModuleAction:e})=>{let t=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-row-above"}),t.headerColumn&&1===t.rowCount&&(e({module:"quill.table",action:"set-header-col",setHeader:t.headerColumn}),e({module:"quill.table",action:"set-header-row",setHeader:t.headerRow}))}},e8={cssClass:"insert-row-below-style",iconName:"insert-row-below",iconComponent:B.E,id:"insertRowBelow",key:"insertRowBelow",toggleButton:!1,onClick:({quillModuleAction:e})=>{let t=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-row-below"}),t.headerColumn&&1===t.rowCount&&(e({module:"quill.table",action:"set-header-col",setHeader:t.headerColumn}),e({module:"quill.table",action:"set-header-row",setHeader:t.headerRow}))}},te={cssClass:"insert-column-left-style",iconName:"insert-column-left",iconComponent:D.R,id:"insertColumnLeft",key:"insertColumnLeft",toggleButton:!1,onClick:({quillModuleAction:e})=>{let t=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-col-left"}),t.headerRow&&1===t.columnCount&&(e({module:"quill.table",action:"set-header-row",setHeader:t.headerRow}),e({module:"quill.table",action:"set-header-col",setHeader:t.headerColumn}))}},tt={cssClass:"insert-column-right-style",iconName:"insert-column-right",iconComponent:G.Z,id:"insertColumnRight",key:"insertColumnRight",toggleButton:!1,onClick:({quillModuleAction:e,setHeader:t})=>{let n=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-col-right"}),n.headerRow&&1===n.columnCount&&(e({module:"quill.table",action:"set-header-row",setHeader:n.headerRow}),e({module:"quill.table",action:"set-header-col",setHeader:n.headerColumn}))}},tn={cssClass:"delete-table-style",iconName:"delete-table",iconComponent:O.P,id:"deleteTable",key:"deleteTable",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.table",action:"delete-table"})},ti={cssClass:"delete-column-style",iconName:"delete-column",iconComponent:L.V,id:"deleteColumn",key:"deleteColumn",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.table",action:"delete-column"})},ts={cssClass:"delete-row-style",iconName:"delete-row",iconComponent:N.y,id:"deleteRow",key:"deleteRow",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.table",action:"delete-row"})}},219121:function(e,t){"use strict";t.Z={externalLink:"resource/x-bb-externallink",bltiPlacement:"resource/x-bb-bltiplacement"}},83202:function(e,t,n){"use strict";n.r(t),n.d(t,{BbEditor:function(){return d.Z},BbEditorFactory:function(){return G},ModalInsertLocalFile:function(){return u.Ke},ModalMaxFileSizeError:function(){return u.Dy},ShowEditFileAttachmentModal:function(){return E.zU},TextBlockStyles:function(){return k._T},contentCollection:function(){return P.i},contentMarket:function(){return x.ZP},customClass:function(){return f.Z},demoMashup:function(){return w.Z},encodeURIComponentExt:function(){return m.Z},fixDoubleQuotesInJSONValues:function(){return g.A},generateToBbML:function(){return g.r},getFileNameWithTypeExtension:function(){return p.Z},image:function(){return C.ZP},insertCloudStorageIntegrationFile:function(){return S.Z},insertLocalFile:function(){return E.ZP},insertYoutubeVideo:function(){return I.Z},isMessageTooLong:function(){return h.R},latex:function(){return y.ZP},link:function(){return b.Z},math:function(){return v.ZP},optionalPluginConfigPropTypes:function(){return R},uploadWorkflow:function(){return u.ZP},video:function(){return A.Z},videoEverywhere:function(){return T.Z}});var i=n(928316),s=n.n(i),r=n(202784),o=n.n(r),a=n(213980),l=n.n(a),c=n(174897),d=n(739803),u=n(482994),p=n(242454),m=n(409780),h=n(285004),g=n(464357),f=n(183103),b=n(759743),v=n(435107),y=n(415802),C=n(99350),S=n(833854),E=n(396375),I=n(367513),w=n(236034),A=n(648798),k=n(941386),x=n(438172),T=n(950),P=n(291683),D=n(398435);function G(e,t={}){let n=t;!function(e){if(!e)throw Error("bb-editor: DOM element does not exist.")}(e);let i=()=>{let{isRtl:t,locale:i,babelfishInstance:r,babelfishFormatInstance:a,mockLocalize:l,...u}=n;s().render(o().createElement(c.g,{isRtl:t,locale:i,babelfishInstance:r,babelfishFormatInstance:a,mockLocalize:l},o().createElement(D.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:t},o().createElement(d.Z,{...u}))),e)};return i(),{update(e={}){delete n.bbml,n={...n,...e},i()},destroy(){s().unmountComponentAtNode(e)}}}let R=l().shape({insertCloudStorageIntegrationFile:S.b,insertLocalFile:E.bq,math:v.bq,latex:y.bq,contentMarket:x.bq,contentCollection:P.i,insertYoutubeVideo:I.b,videoEverywhere:T.b})},919392:function(e,t,n){"use strict";var i=n(73793),s=n(359895);let r="audio",o=[`[data-bbtype="${r}"][data-bbfile]`],a={type:"embed",tagName:"div",attributes:{"data-bbtype":r,"data-bbfile":null},renderDomNode:(e,t,n,s)=>{let r=JSON.parse(n.bbfile),o=e=>!(!e.isReadOnly||e.isDisabled),a=document.createElement("div");a.classList.add("bb-audio-embed");let l=document.createElement("audio");l.autoplay=!1,l.classList.add("no-select"),l.controls=!0,l.src=r.src;let c=document.createElement("div");c.classList.add("audio-placeholder"),c.classList.add("no-select"),c.innerHTML=`<span class="audio-placeholder-icon"></span><span class="audio-title">${r.alt}</span>`,o(s)||l.classList.add("hidden"),a.appendChild(c),a.appendChild(l);let d=(0,i.Z)(e,t,n);return d.contentEditable=!1,d.classList.add("wants-props-update"),d.formatComponent=e=>{o(e)?l.classList.remove("hidden"):l.classList.add("hidden")},d.appendChild(a),d}};function l(e,t){let n=JSON.parse(t.bbfile);return`<a href="${n.src}" data-bbtype="${r}" data-bbfile="${(0,s.ZP)(t.bbfile)}">${n.alt}</a>`}t.Z=()=>({pluginId:r,matchers:o,formatter:a,toBbML:l})},500707:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(438172),s=n(962682),r=n(359895);function o(e){let t=e.reduce((e,t)=>{let n="string"==typeof t.data?JSON.parse((0,r.qo)(t.data)):t.data;return n.title=t.title.trim(),"embedded-app"!==n.bbtype&&e.push({insert:"\n"}),e.push(..."embedded-app"===n.bbtype?(0,s.J)(n):[{insert:!0,format:{[i.aw]:{href:"#",bbfile:JSON.stringify(n),bbtype:i.aw}}}]),e},[]);return t}},438172:function(e,t,n){"use strict";n.d(t,{aw:function(){return f},bq:function(){return v}});var i=n(202784),s=n.n(i),r=n(213980),o=n.n(r),a=n(413513),l=n(359895),c=n(500707),d=n(137519),u=n(862596),p=n(825501),m=n(424380),h=n(192900),g=n(464357);let f="ltiCard",b=[`[data-bbtype=${f}][data-bbfile]`],v=o().shape({getEmbedSrc:o().func,openContentMarket:o().func,noInsert:o().bool}),y=({showModal:e,applyChange:t,ltiCard:n,bbEditorId:i})=>{let s=JSON.parse(n.bbfile),r=s&&s.title;e(u.Z,{contentMarketObject:{data:s,title:r},applyChange:t,editMode:!0,bbEditorId:i})},C=({showModal:e,applyChange:t,pluginConfig:n,bbEditorId:i})=>{n.openContentMarket(n=>{n&&n.length>0&&(1===n.length?e(u.Z,{contentMarketObject:n[0],applyChange:t,bbEditorId:i}):t((0,c.Z)(n)))})},S=e=>!e.isReadOnly||e.isDisabled?"-1":"0",E=e=>{let{editorProps:t,values:n,pluginConfig:i}=e,r=s().useMemo(()=>JSON.parse((0,g.A)(n.bbfile)),[n.bbfile]),o=r.iconUrl||"";r.linkType===p.EK.bltiPlacement&&r.url&&!r.iconUrl&&(o=r.url);let a={displayName:r.title,iconUrl:o,bbType:f,bbFile:n.bbfile,hasHoverState:t.isReadOnly,tabIndex:S(t),launchLtiLink:i.launchLtiLink};return s().createElement(d.Z,{...a})},I=e=>t=>s().createElement(E,{...t,pluginConfig:e}),w=e=>({type:"embed",blotName:f,tagName:"div",attributes:{"data-bbtype":f,"data-bbfile":null,href:null},renderDomNode:(0,h.H)({processValues:e=>({...e,bbfile:(0,l.qo)(e.bbfile)}),component:I(e)})});function A(e,t){let n=JSON.parse((0,g.A)(t.bbfile));return`<a href="${t.href}" data-bbtype="${f}" data-bbfile="${(0,l.ZP)(t.bbfile)}">${n.title}</a>`}t.ZP=e=>{if(e&&e.openContentMarket&&"function"!=typeof e.openContentMarket)throw Error("`openContentMarket` must be a function");return[(0,a.Z)(e),{pluginId:f,buttonConfig:{id:f,cssClass:"insert_from_content_market",iconName:"content-market",iconComponent:m.r,isDialog:!0,isHideable:e&&e.noInsert,isActive:e=>!!e[f],onClick:({applyChange:t,editorFormat:n,showModal:i,bbEditorId:s})=>{let r=n[f];if(r&&r.bbfile)y({showModal:i,applyChange:t,ltiCard:r,bbEditorId:s});else if(e&&e.openContentMarket)C({showModal:i,applyChange:t,pluginConfig:e,bbEditorId:s});else throw Error("`openContentMarket` function is required to insert a new LTI item")}},matchers:b,formatter:w(e),toBbML:A}]}},137519:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(213980),o=n.n(r),a=n(830858),l=n(825501),c=n(464357);let d=e=>{let t=JSON.parse((0,c.A)(e.bbFile)),n={href:t.linkType===l.EK.externalLink?t.url:"#",className:`lti-placement__root ${e.hasHoverState?"has-hover":""}`,onClick:t=>{e.launchLtiLink&&e.launchLtiLink(e.bbFile,t)},"data-bbtype":e.bbType,"data-bbfile":e.bbFile};return s().createElement("a",{...n,target:"_blank",tabIndex:e.tabIndex},s().createElement("div",{className:"lti-placement__root-wrapper"},s().createElement("div",{className:"lti-placement__container"},e.iconUrl.length>0?s().createElement("img",{src:e.iconUrl,className:"lti-placement__icon",alt:e.displayName,onError:e=>{e.target.style="display: none"}}):s().createElement(a.U,{color:"primary",className:"lti-placement__icon",alt:e.displayName}),s().createElement("span",{className:"lti-placement__title"},e.displayName))))};d.propTypes={displayName:o().string.isRequired,iconUrl:o().string.isRequired,bbType:o().string.isRequired,bbFile:o().string.isRequired,hasHoverState:o().bool.isRequired,tabIndex:o().string.isRequired,launchLtiLink:o().func},d.defaultProps={launchLtiLink:null},t.Z=d},862596:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(50635),o=n(213980),a=n.n(o),l=n(367281),c=n.n(l),d=n(844156),u=n(142895),p=n(292346),m=n(500707),h=n(988860);class g extends s().Component{constructor(e){super(e),this.state={isOpen:!1,title:e.contentMarketObject.title||"",dirty:!e.editMode},this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onCancel=this.onCancel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onSave=this.onSave.bind(this),this.onTitleChange=this.onTitleChange.bind(this),this.getErrorMessage=this.getErrorMessage.bind(this),this.isValid=this.isValid.bind(this)}UNSAFE_componentWillMount(){setTimeout(()=>this.setState(()=>({isOpen:!0})))}onAnimationComplete(){if(this.saveInitiated){let e=this.props.contentMarketObject;e.title=this.state.title,this.props.applyChange((0,m.Z)([e]))}this.props.destroy()}onCancel(){this.setState(()=>({isOpen:!1}))}onKeyDown(e){e.keyCode===c().ENTER&&this.onSave(e)}onSave(e){e.preventDefault(),e.stopPropagation(),!this.saveInitiated&&this.isValid()&&(this.saveInitiated=!0,this.setState(()=>({isOpen:!1})))}onTitleChange(e){this.setState(()=>({title:e,dirty:!0}))}getErrorMessage(e){let{t}=this.props,n="";return e&&e.trim()?e.trim().length>140&&(n=t("bbmlEditor.dialogs.ltiCard.errorMessages.tooLongDisplayName")):n=t("bbmlEditor.dialogs.ltiCard.errorMessages.emptyDisplayName"),(0,h.Z)(n)}isValid(){let e=this.state.title.trim();return this.state.dirty&&e&&e.length<=140}render(){let{editMode:e,t}=this.props;return s().createElement(u.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:t(`bbmlEditor.dialogs.ltiCard.${e?"editMode":"insertMode"}.title`),showCloseButton:!1,type:u.DialogType.fullHeaderFooter},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:`editor.dialogs.ltiCard.${e?"editMode":"insertMode"}.title`},s().createElement(p.TextField,{className:"required",onKeyDown:this.onKeyDown,label:t("bbmlEditor.dialogs.ltiCard.displayNameLabel"),value:this.state.title,onChanged:this.onTitleChange,onGetErrorMessage:this.getErrorMessage,validateOnLoad:!1,analyticsId:"editor.dialogs.ltiCard.displayNameLabel.textField",validateOnFocusOut:!0,required:!0}),s().createElement(u.DialogFooter,null,s().createElement(d.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:`editor.dialogs.ltiCard.${e?"editMode":"insertMode"}.title.cancel`},t("bbmlEditor.buttons.cancel")),s().createElement(d.AnalyticsPrimaryButton,{onClick:this.onSave,disabled:!this.isValid(),analyticsId:`editor.dialogs.ltiCard.buttons.${e?"save":"insert"}`},t(`bbmlEditor.buttons.${e?"save":"insert"}`))))}}g.propTypes={applyChange:a().func.isRequired,contentMarketObject:a().shape().isRequired,editMode:a().bool,destroy:a().func.isRequired},g.defaultProps={editMode:!1},t.Z=(0,r.H)(g)},183103:function(e,t,n){"use strict";var i=n(73793),s=n(359895);let r="customClass",o=[`a[data-bbtype="${r}"][data-bbfile]`],a={type:"inline",blotName:r,tagName:"span",attributes:{"data-bbfile":null,"data-bbtype":null},renderDomNode:(e,t,n)=>{let s=(0,i.Z)(e,t,n),r=JSON.parse(n.bbfile);return s.className=r.className,s}};function l(e,t){return`<a href="#" data-bbtype="${r}" data-bbfile="${(0,s.ZP)(t.bbfile)}">${e}</a>`}t.Z=()=>({pluginId:r,matchers:o,formatter:a,toBbML:l})},236034:function(e,t,n){"use strict";n.d(t,{Z:function(){return f},M:function(){return b}});var i=n(202784),s=n.n(i),r=n(213980),o=n.n(r),a=n(345479),l=n(142895),c=n(962682),d=n(656890),u=n(844156);class p extends s().Component{constructor(){super(),this.postBackMashupInitConfig=e=>{let t={messageType:d.Z.outgoing.initContent,config:{}};e.source.postMessage(t,window.origin)},this.state={isOpen:!1},this.onCancel=this.onCancel.bind(this),this.onInsert=this.onInsert.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.receiveMessage=this.receiveMessage.bind(this)}UNSAFE_componentWillMount(){window.addEventListener("message",this.receiveMessage,!1),setTimeout(()=>this.setState({isOpen:!0}))}componentWillUnmount(){window.removeEventListener("message",this.receiveMessage)}receiveMessage(e){if(window.origin===e.origin)switch(e.data.messageType){case d.Z.incoming.pageLoaded:this.postBackMashupInitConfig(e);break;case d.Z.incoming.canceled:this.onCancel();break;case d.Z.incoming.contentReady:this.onInsert(e.data)}}onCancel(){this.setState({isOpen:!1})}onInsert(e){this.setState({isOpen:!1,content:e})}onAnimationComplete(){this.state.content&&this.props.applyChange((0,c.Z)(this.state.content)),this.props.destroy()}render(){return s().createElement(a.Modal,{containerClassName:"modal-youtube-video-provider",isOpen:this.state.isOpen,onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},s().createElement("div",{className:"iframe-container",ref:e=>{this.iframeContainerEl=e}},s().createElement("iframe",{id:"demo-iframe",title:"Demo Mashup",src:b(),frameBorder:0})),s().createElement(l.DialogFooter,null,s().createElement(u.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.modal.demo.mashup.close"},"Close")))}}p.propTypes={applyChange:o().func.isRequired,destroy:o().func.isRequired};var m=n(245111),h=n(549487);let g="demoMashup";var f=()=>[{pluginId:g,buttonConfig:{id:g,cssClass:g,iconName:"app",iconComponent:h.g,isDialog:!0,isActive:()=>!1,onClick:({showModal:e,...t})=>{e(p,{...t})}}}];let b=()=>{let e=new Blob([(0,m.Z)(window.origin)],{type:"text/html"});return window.URL.createObjectURL(e)}},822382:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var i=n(260510),s=n(725390),r=n(17108);class o extends i.Z{constructor(){super(...arguments),this.editorFormat=null}filterFormat(e){return(0,r.Dw)(e)?e:null}getMediaElement(e){let t=e.querySelector("img");if(t)return t;let n=e.querySelector("video");return n||null}createChange(e){if(!this.editorFormat)return{};let t=JSON.parse(this.editorFormat.attachment.bbfile),n=this.editorFormat.attachment.href,i={...t,width:e.width,height:e.height};return(0,s.Z)(n,i,!0)}}},194210:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(213980),o=n.n(r),a=n(555342),l=n(242454),c=n(725390);let d=e=>t=>{var n,i;let s=null===(n=e.editorFormat.domNode)||void 0===n?void 0:n.getElementsByTagName("img")[0];t.linkName=t.displayName,s&&(t.width=`${s.clientWidth}px`,t.height=`${s.clientHeight}px`),e.applyChange((0,c.Z)(e.href,t,e.isEdit)),e.isEdit||null===(i=e.onNewAttachmentSavePressed)||void 0===i||i.call(e),e.destroy()},u=e=>{let t={alternativeText:e.file.alternativeText||e.file.linkName,displayName:e.file.linkName,fileName:(0,l.Z)(e.file.linkName,e.file.mimeType),fileSize:e.file.fileSize,isDecorative:e.file.isDecorative,mimeType:e.file.mimeType,render:e.file.render,resourceUrl:e.href,viewerUrl:e.file.viewerUrl};return s().createElement(a.lZ,{file:t,hidden:!1,onSave:d(e),onCancel:e.destroy,analyticsId:"editor.modelEditAttachment",supportsInlineDocumentRender:e.supportsInlineDocumentRender,canProvideDescription:!0})};u.propTypes={isEdit:o().bool,applyChange:o().func.isRequired,destroy:o().func.isRequired,onNewAttachmentSavePressed:o().func,file:o().shape({linkName:o().string,alternativeText:o().string,mimeType:o().string,fileSize:o().number,render:o().string,isDecorative:o().bool,viewerUrl:o().string}).isRequired,href:o().string.isRequired,supportsInlineDocumentRender:o().bool,editorFormat:o().shape()},u.defaultProps={editorFormat:{},isEdit:!1},t.Z=u},613360:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(202784),s=n.n(i),r=n(928316),o=n.n(r),a=n(213980),l=n.n(a),c=n(50635),d=n(174897),u=n(732468);class p extends s().Component{constructor(e){super(e),this.state={showLightbox:!1},this.buttonStyle={background:"white",position:"absolute",bottom:"-2rem",left:".5rem",zIndex:"20",padding:".05rem .35rem",borderRadius:"3px"},this.closeLightbox=this.closeLightbox.bind(this),this.showLightbox=this.showLightbox.bind(this)}closeLightbox(){this.setState({showLightbox:!1})}showLightbox(){this.setState({showLightbox:!0})}render(){let{children:e,firstFocusableContentSelector:t,localizedStrings:n}=this.props;return s().createElement("div",null,s().createElement(u.Lightbox,{heading:n.title,isOpen:this.state.showLightbox,onDismiss:this.closeLightbox,containerClassName:"lightboxExample-container",firstFocusableContentSelector:t},e))}}function m(e,t={},n={},i={}){let r=(0,c.H)(e=>s().createElement("iframe",{...e.iframeProps,title:e.iframeProps.title||e.t("bbmlEditor.editor.iFrameDefaultTitle")})),a={locale:t,iFrame:n,lightbox:i},l=()=>{o().render(s().createElement(d.g,{...a.locale},s().createElement(p,{...a.lightbox},s().createElement(r,{iframeProps:a.iFrame}))),e)};return l(),{update(e={},t={},n={}){a.locale={...a.locale,...e},a.iFrame={...a.iFrame,...t},a.lightbox={...a.lightbox,...n},l()},destroy(){o().unmountComponentAtNode(e)}}}p.propTypes={localizedStrings:l().shape({title:l().string,fullScreenButtonDescription:l().string,fullScreenButtonText:l().string}).isRequired,firstFocusableContentSelector:l().string.isRequired}},673252:function(e,t,n){"use strict";var i=n(992442),s=n(797529);t.Z=(e,t,n)=>(0,i.Z)(t,()=>(0,s.Z)(n)).then(t=>t.data.results&&t.data.results.length&&t.data.results.filter(t=>t.id===e)[0])},973441:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var i=n(260510),s=n(486537),r=n(17108);class o extends i.Z{constructor(){super(...arguments),this.editorFormat=null}filterFormat(e){return(0,r.R4)(e)?e:null}getMediaElement(e){let t=e.querySelector("img");return(null==t?void 0:t.classList.contains("broken-image"))?null:t}createChange(e){var t,n,i,o,a;if(!this.editorFormat||!(0,r.R4)(this.editorFormat))return[{}];let l=JSON.parse(this.editorFormat.image.bbfile),c=null!==(t=e.src)&&void 0!==t?t:this.editorFormat.image.href;return l.alt=null!==(i=null!==(n=e.alt)&&void 0!==n?n:l.alt)&&void 0!==i?i:"",l.width=null!==(o=e.width)&&void 0!==o?o:l.width,l.height=null!==(a=e.height)&&void 0!==a?a:l.height,(0,s.Z)(c,l,!0)}}},99350:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(492530),o=n(478225),a=n(749074),l=n(745090),c=n(359895),d=n(192900),u=n(973441);let p="image",m=[`[data-bbtype="${p}"]`],h={type:"embed",blotName:p,tagName:"div",attributes:{"data-bbtype":p,"data-bbfile":null,href:null},renderDomNode:(0,d.H)({additionalRootClasses:["bb-image-container","ql-embed-selected--hidden"],component:e=>{let t,n,i;let{editorProps:o,values:a}=e,l=o.isDisabled||!o.isReadOnly,c=s().useMemo(()=>a.bbfile&&JSON.parse(a.bbfile),[a.bbfile]);c&&c.width&&c.height?(t=c.width,n=c.height,i="image--resize"):i="image--default";let d={alt:c&&c.alt||a.href,className:i?`${i} no-select`:"no-select",onError:e=>e.target.classList.add("broken-image"),src:a.href,width:t,height:n};return s().createElement(r.MediaGallery,{disabled:l},s().createElement("img",{...d}))}})};function g(e,t){return`<a href="${t.href}" data-bbtype="${p}" data-bbfile="${(0,c.ZP)(t.bbfile)}">${t.href}</a>`}t.ZP=e=>[(0,o.Z)(),{pluginId:p,buttonConfig:{id:p,cssClass:p,iconName:"image",iconComponent:l.E,isDialog:!0,isActive:e=>!!e[p]||!!e.inlineImage,onClick:({showModal:t,...n})=>{t(a.Z,{...e,...n})}},matchers:m,module:u.$,formatter:h,toBbML:g}]},749074:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(50635),o=n(213980),a=n.n(o),l=n(367281),c=n.n(l),d=n(844156),u=n(142895),p=n(292346),m=n(486537),h=n(988860);class g extends s().Component{static isValidSrc(e){return"string"==typeof e&&""!==e.trim()}constructor(e){super(e);let t="",n="";if(e.editorFormat.image){let i=JSON.parse(e.editorFormat.image.bbfile);t=i.alt||"",n=e.editorFormat.image.href||""}else e.editorFormat.inlineImage&&(n=e.editorFormat.inlineImage.src,t=e.editorFormat.inlineImage.alt);this.state={alt:t,src:n,isOpen:!1},this.onSrcChange=this.onSrcChange.bind(this),this.onAltChange=this.onAltChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onSave=this.onSave.bind(this),this.getSrcErrorMessage=this.getSrcErrorMessage.bind(this),this.getSrcLabel=this.getSrcLabel.bind(this),this.getAltLabel=this.getAltLabel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this)}UNSAFE_componentWillMount(){setTimeout(()=>this.setState({isOpen:!0}))}onCancel(){this.setState({isOpen:!1})}onAnimationComplete(){var e;if(this.saveInitiated){let t=!1,n={alt:this.state.alt};if(this.props.editorFormat.image){t=!0;let i=null===(e=this.props.editorFormat.domNode)||void 0===e?void 0:e.getElementsByTagName("img")[0];n.width=i?i.clientWidth:void 0,n.height=i?i.clientHeight:void 0}this.props.applyChange((0,m.Z)(this.state.src,n,t))}this.props.destroy()}onSave(){let e=this.state.src.includes("://")?this.state.src:`http://${this.state.src}`;return this.constructor.isValidSrc(e)&&!this.saveInitiated&&(this.saveInitiated=!0,this.setState({isOpen:!1,src:e})),!1}onKeyDown(e){e.keyCode===c().ENTER&&(e.preventDefault(),e.stopPropagation(),this.onSave())}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onSrcChange(e){this.setState({src:e})}onAltChange(e){this.setState({alt:e})}getSrcErrorMessage(e){let{t}=this.props,n=this.constructor.isValidSrc(e)?"":t("bbmlEditor.dialogs.image.errorMessage");return(0,h.Z)(n)}getSrcLabel(){let{t:e}=this.props;return e("bbmlEditor.dialogs.image.srcLabel")}getAltLabel(){let{t:e}=this.props;return e("bbmlEditor.dialogs.image.altLabel")}render(){let{editorFormat:e,t}=this.props,n=t("bbmlEditor.buttons.cancel"),i=t(e.image||e.inlineImage?"bbmlEditor.dialogs.image.titleEdit":"bbmlEditor.dialogs.image.titleInsert"),r=t(e.image||e.inlineImage?"bbmlEditor.buttons.save":"bbmlEditor.buttons.insert");return s().createElement(u.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:i,showCloseButton:!1,type:u.DialogType.fullHeaderFooter},modalProps:{onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:e.image||e.inlineImage?"editor.dialogs.image.titleEdit":"editor.dialogs.image.titleInsert"},s().createElement(p.TextField,{label:this.getSrcLabel(),value:this.state.src,onChanged:this.onSrcChange,onGetErrorMessage:this.getSrcErrorMessage,onKeyDown:this.onKeyDown,validateOnLoad:!1,validateOnFocusOut:!0,analyticsId:"editor.dialogs.image.srcLabel.textField",required:!0,autoFocus:!0}),s().createElement(p.TextField,{label:this.getAltLabel(),value:this.state.alt,onChanged:this.onAltChange,onKeyDown:this.onKeyDown,analyticsId:"editor.dialogs.image.altLabel.textField"}),s().createElement("br",null),s().createElement(u.DialogFooter,null,s().createElement(d.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:`${e.image||e.inlineImage?"editor.dialogs.image.titleEdit":"editor.dialogs.image.titleInsert"}.cancel`},n),s().createElement(d.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:!this.constructor.isValidSrc(this.state.src),analyticsId:`${e.image||e.inlineImage?"editor.dialogs.image.titleEdit":"editor.dialogs.image.titleInsert"}.save.button`},r)))}}g.propTypes={destroy:a().func.isRequired,applyChange:a().func.isRequired,editorFormat:a().shape()},g.defaultProps={editorFormat:{}},t.Z=(0,r.H)(g)},478225:function(e,t,n){"use strict";var i=n(73793);let s="inlineImage",r=["img[src]:not([data-mathml]):not([data-bbtype])"],o={type:"embedInline",blotName:s,tagName:"img",attributes:{src:"",alt:null},renderDomNode:(e,t,n)=>{let s=(0,i.Z)(e,t,n);return s.onerror=()=>{s.classList.add("broken-image")},s}};function a(e,t){let n=t.alt?`alt="${t.alt}"`:"",i=[n].filter(e=>e.length);return`<img src="${t.src}"${i=i.length?["",...i].join(" "):""}/>`}t.Z=()=>({pluginId:s,matchers:r,formatter:o,toBbML:a})},833854:function(e,t,n){"use strict";n.d(t,{b:function(){return u}});var i=n(213980),s=n.n(i),r=n(396375),o=n(725390),a=n(802832),l=n(482994),c=n(323760);let d="insertCloudStorageIntegrationFile",u=s().shape({apiBasePath:s().string.isRequired,xsrfToken:s().string.isRequired,courseId:s().string,fileLocation:s().string,webLocation:s().string,openCloudStorageIntegrationModal:s().func.isRequired});t.Z=e=>[(0,a.ZP)(e),{pluginId:d,buttonConfig:{id:d,cssClass:d,iconName:"upload-cloud",iconComponent:c.W,isDialog:!0,isActive:()=>!1,onClick:({showModal:t,preventBlur:n,...i})=>{n(),(0,l.ZP)({applyChange:i.applyChange,multiple:!0,...e,...i,showModal:t},e.openCloudStorageIntegrationModal,"cloudStorageIntegration").then(n=>{let s=[];n.forEach(({href:a,bbfile:l})=>{var c;n.length>1?(s=s.concat((0,o.Z)(a,l,!0)),null===(c=e.onNewAttachmentSavePressed)||void 0===c||c.call(e)):(0,r.zU)(l,t,e,i,a)}),s.length>0&&i.applyChange(s)})}},onUnload:()=>{window.postMessage({status:"cancel"},window.origin)}}]},992442:function(e,t,n){"use strict";let i;var s=n(789644),r=n.n(s),o=n(236034),a=n(4264);let l=new Map,c=(e,t)=>{if(l.has(e))return l.get(e);let n=r()({method:"get",url:e,headers:{"X-Blackboard-XSRF":t}});return l.set(e,n),n};t.Z=({courseId:e,xsrfToken:t,apiBasePath:n},s)=>{let r=e?(0,a.uI)(`${n}/v1/courses/${e}/mashups`):(0,a.uI)(`${n}/v1/mashups`);return c(r,t).then(e=>{if(e.data.results=e.data.results||[],s&&s()){i&&window.URL.revokeObjectURL(i),i=(0,o.M)();let t={id:"demoMashup",label:"demoMashup",srcURL:i};return{...e,data:{...e.data,results:[...e.data.results,t]}}}return e})}},367513:function(e,t,n){"use strict";n.d(t,{b:function(){return m}});var i=n(213980),s=n.n(i),r=n(919392),o=n(413513),a=n(648798),l=n(981595),c=n(623572),d=n(549487);let u="insertYoutubeVideo",p=e=>({showModal:t,...n})=>new Promise(i=>{t(l.Z,{selectSource:i,...e,...n})}).then(i=>{t(c.Z,{srcURL:i,...e,...n})}),m=s().shape({apiBasePath:s().string,xsrfToken:s().string,courseId:s().string,enableDemoMashup:s().bool});t.Z=e=>[(0,r.Z)(),(0,o.Z)(e),(0,a.Z)(e),{pluginId:u,buttonConfig:{id:u,cssClass:u,iconName:"app",iconComponent:d.g,isDialog:!0,isActive:()=>!1,onClick:p(e)}}]},648153:function(e,t,n){"use strict";n.d(t,{AU:function(){return a},Gu:function(){return o},JG:function(){return r}});var i=n(656890);let s=(e,t,n)=>({messageType:i.Z.outgoing.initContent,config:e,dataToDisplay:{mode:n||"create",content:{dataType:"embedded-app",dataContent:t}}}),r=(e,t)=>s(e,t,"view"),o=(e,t)=>s(e,t,"edit"),a=(e,t)=>s(e,t,"create")},981595:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(50635),o=n(213980),a=n.n(o),l=n(158550),c=n(142895),d=n(992442),u=n(797529),p=n(924980),m=n(844156);class h extends s().Component{constructor(e){super(e),this.state={isOpen:!1,sources:[],selectedSource:null},this.handleSources=this.handleSources.bind(this),this.onCancel=this.onCancel.bind(this),this.onSourceSelect=this.onSourceSelect.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this)}UNSAFE_componentWillMount(){let{courseId:e,xsrfToken:t,apiBasePath:n}=this.props;(0,d.Z)({courseId:e,xsrfToken:t,apiBasePath:n},()=>(0,u.Z)(this.props.buttonNode)).then(e=>{this.handleSources(e.data.results)}).catch(()=>{this.setState({isOpen:!0})})}handleSources(e){e&&1===e.length?(this.props.selectSource(e[0].srcURL),this.props.destroy()):this.setState({isOpen:!0,sources:e})}onCancel(){this.setState({isOpen:!1})}onSourceSelect(e,t){e.preventDefault(),e.stopPropagation(),this.setState({isOpen:!1,selectedSource:t})}onAnimationComplete(){this.state.selectedSource&&this.props.selectSource(this.state.selectedSource.srcURL),this.props.destroy()}render(){let{analyticsEventAugmentor:e,t}=this.props,n=t("bbmlEditor.buttons.cancel");return s().createElement(c.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:t("bbmlEditor.dialogs.insertYoutubeVideo.titleContentSource"),showCloseButton:!1,type:c.DialogType.fullHeaderFooterLarge},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete,containerClassName:"modal-insert-youtube-video"},firstFocusableSelector:"ms-Dialog-title",analyticsId:"editor.dialogs.insertYoutubeVideo.titleContentSource"},s().createElement("div",{className:"content-sources"},this.state.sources.map(t=>s().createElement("button",{"aria-label":t.label,id:t.id,key:t.id,className:"source-container",onClick:e(l.AnalyticsEventTypes.CLICK_EVENT,e=>this.onSourceSelect(e,t),"editor.modal.insert.youtube.video.contentSources.button"),"data-analytics-id":"editor.modal.insert.youtube.video.contentSources.button"},s().createElement("div",{className:"source-icon"},s().createElement("img",{src:t.iconURL,alt:t.label})),s().createElement("div",{className:"source-title"},t.label)))),this.state.sources.length<1&&s().createElement("div",{className:"no-results"},t("bbmlEditor.dialogs.insertYoutubeVideo.noResults")),s().createElement("br",null),s().createElement(c.DialogFooter,null,s().createElement(m.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.dialogs.insertYoutubeVideo.titleContentSource.cancel"},n)))}}h.propTypes={apiBasePath:a().string.isRequired,courseId:a().string,selectSource:a().func.isRequired,destroy:a().func.isRequired,xsrfToken:a().string.isRequired,buttonNode:a().shape(),...p.Z},h.defaultProps={courseId:null,buttonNode:null};let g=(0,r.H)((0,l.withAnalytics)(h));t.Z=g},759743:function(e,t,n){"use strict";var i=n(139742),s=n(73793),r=n(359895),o=n(353408);let a="link",l=["a[href]:not([data-bbtype]):not([data-bbfile])",'a[href][data-bbtype="lti"]'],c={type:"inline",blotName:a,tagName:"a",attributes:{href:"#",target:"_blank","data-bbid":null,"data-bbtype":null,"data-bbfile":null,"data-mce-href":null},renderDomNode:(e,t,n,i)=>{let o={};Object.keys(n).forEach(e=>{(Object.prototype.hasOwnProperty.call(t,e)||Object.prototype.hasOwnProperty.call(t,`data-${e}`))&&(o[e]=(0,r.qo)(n[e]))});let a=(0,s.Z)(e,t,o);return a.classList.add("wants-props-update"),a.tabIndex=!i.isReadOnly||i.isDisabled?"-1":"0",a.formatComponent=e=>{a.tabIndex=!e.isReadOnly||e.isDisabled?"-1":"0"},a}};function d(e,t){let n=[`href="${t.href}"`].concat(["bbid","mce-href","bbtype","bbfile"].filter(e=>t[e]).map(e=>`data-${e}="${(0,r.ZP)(t[e])}"`)).join(" ");return`<a ${n}>${e}</a>`}t.Z=e=>({pluginId:a,buttonConfig:{id:a,cssClass:a,iconName:"link",iconComponent:o.r,isDialog:!0,isActive:e=>!!e[a],onClick:({showModal:t,...n})=>{t(i.C,{...e,...n})}},matchers:l,formatter:c,toBbML:d})},139742:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(692475),o=n(213980),a=n.n(o),l=n(367281),c=n.n(l),d=n(844156),u=n(142895),p=n(292346),m=n(988860),h=n(417357);class g extends s().Component{constructor(e){super(e);let t=e.editorFormat.text,n=e.editorFormat.link&&e.editorFormat.link.href;this.state={displayText:t||"",href:n||"",isOpen:!1,isEditing:e.editorFormat.link},this.isValid=this.isValid.bind(this),this.onHrefChange=this.onHrefChange.bind(this),this.onDisplayTextChange=this.onDisplayTextChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onSave=this.onSave.bind(this),this.getErrorMessage=this.getErrorMessage.bind(this),this.getHrefLabel=this.getHrefLabel.bind(this),this.getDisplayTextLabel=this.getDisplayTextLabel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this)}UNSAFE_componentWillMount(){setTimeout(()=>this.setState({isOpen:!0}))}onCancel(){this.setState({isOpen:!1})}onAnimationComplete(){if(this.saveInitiated){let e=this.props.editorFormat.link&&this.props.editorFormat.link.bbfile,t=this.props.editorFormat.link&&this.props.editorFormat.link.bbtype;this.props.applyChange((0,h.Z)(this.state.href,this.state.displayText,e,t))}this.props.destroy()}onKeyDown(e){e.keyCode===c().ENTER&&(e.preventDefault(),e.stopPropagation(),this.onSave())}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onSave(){return this.isValid()&&!this.saveInitiated&&(this.saveInitiated=!0,this.setState({isOpen:!1})),!1}onHrefChange(e){this.setState({href:e})}onDisplayTextChange(e){this.setState({displayText:e})}getErrorMessage(e){let t=e||this.state.isEditing?"":this.props.localize.translate("bbmlEditor.dialogs.link.errorMessage");return(0,m.Z)(t)}getHrefLabel(){return this.props.localize.translate("bbmlEditor.dialogs.link.hrefLabel")}getDisplayTextLabel(){return this.props.localize.translate("bbmlEditor.dialogs.link.displayTextLabel")}isValid(){return(this.state.isEditing||""!==this.state.href.trim())&&!(""===this.state.href.trim()&&""===this.state.displayText.trim())}render(){let{editorFormat:e,localize:t}=this.props,n=t.translate("bbmlEditor.buttons.cancel"),i=e.link?t.translate("bbmlEditor.buttons.save"):t.translate("bbmlEditor.buttons.insert"),r=e.link&&"lti"===e.link.bbtype;return s().createElement(u.Dialog,{hidden:!this.state.isOpen,onDismiss:this.onDismiss,dialogContentProps:{title:e.link?t.translate("bbmlEditor.dialogs.link.titleEdit"):t.translate("bbmlEditor.dialogs.link.titleInsert"),showCloseButton:!1,type:u.DialogType.fullHeaderFooter},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:`${e.link?t.translate("bbmlEditor.editor.dialogs.link.titleEdit"):t.translate("bbmlEditor.editor.dialogs.link.titleInsert")}`},s().createElement(p.TextField,{className:r?"":"required",onKeyDown:this.onKeyDown,label:this.getHrefLabel(),value:this.state.href,onChanged:this.onHrefChange,onGetErrorMessage:this.getErrorMessage,validateOnLoad:!1,validateOnFocusOut:!0,disabled:r,analyticsId:`editor.modal.link.Lti.${r?"":"required"}.textField`,required:!0,autoFocus:!0}),s().createElement(p.TextField,{onKeyDown:this.onKeyDown,label:this.getDisplayTextLabel(),value:this.state.displayText,onChanged:this.onDisplayTextChange,analyticsId:"editor.modalLink.dialogs.textField"}),s().createElement("br",null),s().createElement(u.DialogFooter,null,s().createElement(d.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:`${e.link?"editor.dialogs.link.titleEdit":"editor.dialogs.link.titleInsert"}.cancel`},n),s().createElement(d.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:!this.isValid(),analyticsId:"editor.modalLink.save.button"},i)))}}g.propTypes={destroy:a().func.isRequired,applyChange:a().func.isRequired,editorFormat:a().shape()},g.defaultProps={editorFormat:{}},t.C=(0,r.h)(g)},415802:function(e,t,n){"use strict";n.d(t,{ZP:function(){return P},bq:function(){return T},aw:function(){return b}});var i=n(213980),s=n.n(i),r=n(574515),o=n.n(r),a=n(397280),l=n(633739),c=n(758546),d=n(545178),u=n(315573),p=n(951248),m=n(474115);class h extends Error{}function g(e){let t={},n=null,i=[],s=e.map(e=>({...e,...e.attributes?{attributes:{...e.attributes}}:{}}));s.reduce((e,t,n)=>("string"==typeof e.insert&&"string"==typeof t.insert&&e.insert.endsWith("$")&&!e.insert.endsWith("$$")&&t.insert.startsWith("$")&&(e.insert+="$",e.from=n,t.insert=t.insert.substring(1)),t),{});let r=s.reduce((e,s)=>{if("string"==typeof t.insert&&"string"==typeof s.insert&&"\n"!==s.insert){null===n&&(n=t);let r=n.insert.split("$$").length-1;if(r%2==1){let t=s.insert.indexOf("$$");t>-1?(n.from=void 0,n.insert+=i.reduce((e,t)=>e+t.insert,""),i=[],n.insert+=s.insert.substring(0,t+2),s.insert=s.insert.substring(t+2),n=null,e.push(s)):i.push(s)}else n=null,r>2&&(s.from=void 0),e.push(s)}else if(i.length>0)n=null,e.push(...i),i=[],e.push(s);else if("string"==typeof s.insert){n=null;let t=s.insert.split("$$").length-1;t>=2&&(s.from=void 0),e.push(s)}else n=null,e.push(s);return t=s,e},[]);i.length>0&&r.push(...i),r.reduce((e,t)=>("string"==typeof e.insert&&"string"==typeof t.insert&&e.insert.endsWith("$$")&&"number"==typeof e.from&&(e.from=void 0,e.insert=e.insert.substring(0,e.insert.length-1),t.insert="$".concat(t.insert)),t),{}),r=r.filter(e=>"string"!=typeof e.insert||e.insert.length>0);let o=[];return r.forEach((e,t)=>{var n,i;let s=-1,a=-1;if("string"!=typeof e.insert||(0,m.z)(r,t)||"\n"===e.insert||(a=(a=(s=e.insert.indexOf("$$"))>-1?e.insert.indexOf("$$",s+2):-1)>-1?a+2:-1),-1===s||-1===a){o.push(e);return}let l=e.insert,c=0;for(;s>-1&&a>-1;){let t=l.substring(c,s);t.length>0&&o.push({...e,insert:t}),o.push({attributes:{latex:null!==(i=null===(n=e.attributes)||void 0===n?void 0:n.latex)&&void 0!==i?i:null},insert:l.substring(s,a)}),c=a,a=(a=(s=l.indexOf("$$",a))>-1?l.indexOf("$$",s+2):-1)>-1?a+2:-1}if(c>0&&c<l.length){let t=l.substring(c);t.length>0&&o.push({...e,insert:t})}}),o}class f extends u.Z{constructor(e,t){super(e,t),this.quill=e,this.options=t,this.deltaPromise=null}onReadOnlyChange(e,t){let n=this.quill.getContents(),i=new c.q7({...p.vc,locale:t});this.deltaPromise&&this.deltaPromise.cancel(),this.deltaPromise=function(e){let t=new AbortController,n=new h("Promise has been cancelled"),i=new Promise((i,s)=>{e.then((...e)=>{t.signal.aborted?s(n):i(...e)}).catch(s),t.signal.addEventListener("abort",()=>s(n))});return i.cancel=()=>{"function"==typeof e.cancel&&e.cancel(),t.abort(n)},i.signal=t.signal,i.abortController=t,i}(this.convertDelta(e,n,i)),this.deltaPromise.then(e=>this.quill.updateContents(e,d.Z.sources.SILENT)).catch(e=>{e instanceof h||console.error(e)})}async convertDelta(e,t,n){let i=new(o()),s=g(t.ops);for(let t=0;t<s.length;++t){let r=s[t];if(e){if(r.attributes&&r.attributes.latex){this.convertLaTeXToMathML(r.insert,r.attributes.latex.mathml,i);continue}if("string"==typeof r.insert&&!(0,m.z)(s,t)&&n.hasLatex(r.insert)){await this.convertMobileLaTeXToMathML(r.insert,i,n);continue}}if(!e&&"object"==typeof r.insert&&r.insert.math){this.convertLaTeXMathMLToPlain(r,i);continue}if("string"==typeof r.insert){i.retain(r.insert.length);continue}"object"==typeof r.insert&&i.retain(1)}return i}async convertMobileLaTeXToMathML(e,t,n){let i=[],s=[],r=0,o=n.getNextLatexPos(0,e);for(;null!=o;){let t=e.substring(o.start+2,o.end);s.push(o),i.push(new Promise(e=>{n.latexToMathml(t).then(e).catch(()=>e(null))})),o=n.getNextLatexPos(o.end+2,e)}let a=await Promise.all(i);if(a.forEach((n,i)=>{let o=e.substring(r,s[i].start);r=s[i].end+2,o.length>0&&t.push({insert:o,attributes:e.attributes}),null===n?t.push({insert:e,attributes:e.attributes}):t.push({insert:{math:{mathml:n}},attributes:{mathml:n}})}),r<e.length){let n=e.substring(r);t.push({insert:n,attributes:e.attributes})}t.delete(e.length)}convertLaTeXToMathML(e,t,n){let i=e.indexOf("$$"),s=e.indexOf("$$",i+2)+2,r=0;for(;i>-1&&s>-1;){if(i>r){let t=e.substring(0,i);n.delete(t.length).insert(t)}n.delete(s-i).insert({math:{mathml:t}},{mathml:t}),r=s,i=e.indexOf("$$",s),s=e.indexOf("$$",i+2)+2}if(r>0&&r<e.length){let t=e.substring(r);n.delete(t.length).insert(t)}}convertLaTeXMathMLToPlain(e,t){let n=e.insert.math.mathml;if(n.indexOf("semantics")>-1&&n.indexOf("annotation")>-1){let e='<annotation encoding="LaTeX">',i=n.substring(n.indexOf(e)+e.length,n.indexOf("</annotation>")).replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");t.delete(1).insert(`$$${i}$$`,{latex:{mathml:n}})}else t.retain(1)}}let b="latex",v=["math"];function y(e){return e.replace(/\s*[\n]\s*/g,"")}function C(e,t){if(e){let n=t.toLowerCase();return Array.prototype.find.call(e.childNodes,e=>e.tagName.toLowerCase()===n)}}let S=(e,t)=>{let n=C(e,"semantics"),i=C(n,"annotation");if(n&&i){let t={insert:`$$${i.textContent}$$`,attributes:{latex:{mathml:y(e.outerHTML)}}};return new(o())([t])}return t},E={type:"inline",blotName:b,tagName:"span",attributes:{"data-mathml":null},renderDomNode:(e,t,n)=>{let i=null;return n.mathml&&(i=(0,a.F)(n.mathml)),(0,l.KT)(e,t,{...n,...i?{mathml:y(i)}:null}),e}};async function I(e,t,n){let i=0,s=g(t);for(let t of s)if("object"==typeof t.insert)i+=1;else{let s=t.insert,r=e.getNextLatexPos(0,s);for(;null!=r;){let o=r.start+i,a=r.end+i+2;if(n>o&&n<a){let n=s.substring(r.start+2,r.end);return{start:o,end:a-o,mathml:await function(e,t,n){var i,s,r;if(null===(s=null===(i=t.attributes)||void 0===i?void 0:i.latex)||void 0===s?void 0:s.mathml){let e=null===(r=t.attributes)||void 0===r?void 0:r.latex.mathml,i='<annotation encoding="LaTeX">',s=e.substring(e.indexOf(i)+i.length,e.indexOf("</annotation>"));if(s===n)return e}return e.latexToMathml(n)}(e,t,n)}}r=e.getNextLatexPos(r.end+2,s)}i+=s.length}return null}function w(e,t){return t?g(e):e}function A(e,t){var n,i;let s=e.indexOf("$$"),r=e.indexOf("$$",s+2);if(-1===s||-1===r)return e;let o=e.substring(s+2,r),a=y((null==t?void 0:t.mathml)||(null===(n=null==t?void 0:t.latex)||void 0===n?void 0:n.mathml)||(null===(i=null==t?void 0:t.math)||void 0===i?void 0:i.mathml)||"");return -1===a.indexOf(`>${o}</annotation>`)?e:e.substring(0,s)+a+e.substring(r+2)}async function k(e,t,n){var i,s;let r=[],o=[],a=y((null==n?void 0:n.mathml)||(null===(i=null==n?void 0:n.latex)||void 0===i?void 0:i.mathml)||(null===(s=null==n?void 0:n.math)||void 0===s?void 0:s.mathml)||""),l=e.getNextLatexPos(0,t);for(;null!==l&&"number"==typeof l.start&&"number"==typeof l.end;){let n=t.substring(l.start+2,l.end).replace(/&amp;/g,"&").replace(/&nbsp;/g," ");r.push(l),a.indexOf(`>${n}</annotation>`)>-1?o.push(a):o.push(new Promise(t=>{e.latexToMathml(n).then(t).catch(()=>t(null))})),l=e.getNextLatexPos(l.end+2,t)}let c=await Promise.all(o);return c.map((e,n)=>null===e?{...r[n],latex:t}:{...r[n],mathml:y(e)})}async function x(e,t,n){let i=e.hasLatex(t);if(!i)return t;let s=await k(e,t,n),r=0,o=[];if(s.forEach(e=>{var n;let i=t.substring(r,e.start);r=e.end+2,i.length>0&&o.push(i),o.push(null!==(n=e.mathml)&&void 0!==n?n:e.latex)}),r<t.length){let e=t.substring(r);o.push(e)}return o.join("")}let T=s().shape({apiBasePath:s().string,xsrfToken:s().string,courseId:s().string,locale:s().string});var P=e=>{let t=new c.q7(e);return{pluginId:b,matchers:v,deltaModifier:S,formatter:E,module:f,onLoad:function(){t.load()},split:w,toBbML:A,toBbMLAsync:async function(e,n,i={}){return i["code-block"]?e:x(t,e,n)},findLatexInSelection:(e,n)=>I(t,e,n)}}},397280:function(e,t,n){"use strict";n.d(t,{F:function(){return l}});let i={tagOpener:"<",tagCloser:">",doubleQuote:'"',ampersand:"&",quote:"'"},s={tagOpener:"\xab",tagCloser:"\xbb",doubleQuote:"\xa8",ampersand:"\xa7",quote:"`",realDoubleQuote:"\xa8"},r={tagOpener:"&laquo;",tagCloser:"&raquo;",doubleQuote:"&uml;",realDoubleQuote:"&quot;"},o={ltElement:"\xabmo\xbb<\xab/mo\xbb",gtElement:"\xabmo\xbb>\xab/mo\xbb",ampElement:"\xabmo\xbb&\xab/mo\xbb"},a={ltElement:"\xabmo\xbb\xa7lt;\xab/mo\xbb",gtElement:"\xabmo\xbb\xa7gt;\xab/mo\xbb",ampElement:"\xabmo\xbb\xa7amp;\xab/mo\xbb"};function l(e){if(!e)return e;let t=e;t=(t=(t=(t=t.split(r.tagOpener).join(s.tagOpener)).split(r.tagCloser).join(s.tagCloser)).split(r.doubleQuote).join(s.doubleQuote)).split(r.realDoubleQuote).join(s.realDoubleQuote),"_wrs_blackboard"in window&&window._wrs_blackboard&&(t=(t=(t=t.split(o.ltElement).join(a.ltElement)).split(o.gtElement).join(a.gtElement)).split(o.ampElement).join(a.ampElement)),t=(t=(t=(t=(t=t.split(s.tagOpener).join(i.tagOpener)).split(s.tagCloser).join(i.tagCloser)).split(s.doubleQuote).join(i.doubleQuote)).split(s.ampersand).join(i.ampersand)).split(s.quote).join(i.quote);let n="",l=null;for(let e=0;e<t.length;e+=1){let i=t.charAt(e);null===l?"$"===i?l="":n+=i:";"===i?(n+=`&${l};`,l=null):i.match(/([a-zA-Z0-9#._-] | '-')/)?l+=i:(n+=`$${l}`,l=null,e-=1)}return n}},275454:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(213980),o=n.n(r),a=n(415802),l=n(50635),c=n(844156),d=n(142895),u=n(19228);class p extends s().Component{constructor(e){super(e),this.state={primaryButtonDisabled:!0,isOpen:!1,isLatexFormula:!1,selectionUpdate:void 0,error:""},this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onCancel=this.onCancel.bind(this),this.onSave=this.onSave.bind(this),this.onClick=this.onClick.bind(this),this.loadWiris=this.loadWiris.bind(this),this.openWiris=this.openWiris.bind(this),this.close=this.close.bind(this),this.getMathMLAndCreateChange=this.getMathMLAndCreateChange.bind(this)}UNSAFE_componentWillMount(){setTimeout(()=>this.setState({isOpen:!0},this.loadWiris))}loadWiris(){var e;let{t,courseId:n,currentLocale:i,apiBasePath:s,xsrfToken:r}=this.props;(null===(e=this.props.editorFormat.math)||void 0===e?void 0:e.mathml)?this.openWiris({mathml:this.props.editorFormat.math.mathml,isLatexFormula:!1}):(this.latex=(0,a.ZP)({courseId:n,locale:i,apiBasePath:s,xsrfToken:r}),this.latex.findLatexInSelection(this.props.editorLastContent,this.props.editorLastRawSelection.index).then(e=>{e?this.openWiris({mathml:e.mathml,isLatexFormula:!0,selectionUpdate:{index:e.start,length:e.end}}):this.openWiris({mathml:null,isLatexFormula:!1})},()=>{this.setState({error:t("bbmlEditor.dialogs.math.latexToMathMLError")})}))}openWiris(e){let{t,courseId:n,currentLocale:i,apiBasePath:s,xsrfToken:r}=this.props;this.wirisService=(0,u.Z)({courseId:n,locale:i,apiBasePath:s,xsrfToken:r}),this.wirisService.newInstance(e.mathml).then(t=>{this.wirisEditor=t,t.insertInto(this.wirisDiv),t.focus(),this.setState({primaryButtonDisabled:!1,isLatexFormula:e.isLatexFormula,selectionUpdate:e.selectionUpdate})},()=>{this.setState({error:t("bbmlEditor.dialogs.math.connectionError")})})}onCancel(){this.setState({isOpen:!1})}onAnimationComplete(){this.change&&this.props.applyChange(this.change,this.state.selectionUpdate),this.props.destroy()}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onSave(){this.saveInitiated||(this.saveInitiated=!0,this.setState({primaryButtonDisabled:!0},this.getMathMLAndCreateChange))}getMathMLAndCreateChange(){if(this.wirisEditor.isFormulaEmpty()){this.change=this.props.createChange("",!0),this.close();return}this.state.isLatexFormula?this.wirisService.getLaTeXFromMathML(this.wirisEditor.getMathML()).then(e=>{let t=e&&200===e.status?e.data.result.text:"";this.change=this.props.createChange(this.wirisEditor.getMathML(),!1,t),this.close()}).catch(this.close):(this.change=this.props.createChange(this.wirisEditor.getMathML()),this.close())}close(){this.setState({isOpen:!1})}render(){let{t:e,isActive:t}=this.props,{error:n}=this.state;return s().createElement(d.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:e(t?"bbmlEditor.dialogs.math.titleEdit":"bbmlEditor.dialogs.math.titleInsert"),showCloseButton:!1,type:d.DialogType.normal},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete,containerClassName:n?"":"modal-math-wiris-editor"},firstFocusableSelector:"ms-Dialog-title",analyticsId:`${t?"editor.modalMath.titleEdit":"editor.modalMath.titleInsert"}`},n?s().createElement("div",{className:"wiris-container"},n):s().createElement("div",{ref:e=>{this.wirisDiv=e},className:"wiris-container"}),s().createElement(d.DialogFooter,null,s().createElement(c.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:`${t?"editor.modal.math.titleEdit":"editor.modal.math.titleInsert"}.cancel`},e("bbmlEditor.dialogs.math.cancel")),s().createElement(c.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:this.state.primaryButtonDisabled,analyticsId:t?"editor.modalMath.save":"editor.modalMath.insert"},e(t?"bbmlEditor.dialogs.math.save":"bbmlEditor.dialogs.math.insert"))))}}p.propTypes={destroy:o().func.isRequired,applyChange:o().func.isRequired,editorFormat:o().shape(),isActive:o().bool.isRequired,apiBasePath:o().string.isRequired,courseId:o().string,xsrfToken:o().string.isRequired,createChange:o().func.isRequired},p.defaultProps={editorFormat:null,courseId:null},t.Z=(0,l.H)(p)},260510:function(e,t,n){"use strict";var i=n(315573),s=n(276635),r=n(593279),o=n(426571),a=n(378780),l=n(729941);let c={ResizeExtension:o.F,OptionsExtension:r.P};class d extends i.Z{constructor(e,t={}){var n;super(e,t),this.initializeExtensions=()=>{this.removeExtensions(),this.extensions=this.extensionClasses.map(e=>new(c[e]||e)(this)),this.extensions.forEach(e=>{e.onCreate()}),this.onUpdate()},this.removeExtensions=()=>{this.extensions.forEach(e=>{e.onDestroy()}),this.extensions=[]},this.show=e=>{this.elem=e;let t=function(e,t){if(!e.contains(t))return null;let n=t,i=t.parentElement;for(;i!==e&&!(0,a.w)(i);)i=(null==(n=i)?void 0:n.parentElement)||null;return n}(this.quill.root,this.elem);this.blotRoot=null!=t?t:this.elem,this.showOverlay(),this.initializeExtensions()},this.showOverlay=()=>{this.overlay&&this.hideOverlay(),this.overlay=document.createElement("div"),this.overlay.classList.add("media-overlay"),this.overlay.addEventListener("mousedown",l.p),this.blotRoot.classList.add("with-overlay"),this.blotRoot.appendChild(this.overlay),this.repositionElements()},this.hide=()=>{this.removeExtensions(),this.hideOverlay(),this.elem=void 0,this.blotRoot=void 0},this.hideOverlay=()=>{this.blotRoot&&this.blotRoot.classList.remove("with-overlay"),this.overlay&&(this.overlay.remove(),this.overlay=void 0)},this.repositionElements=()=>{if(!this.overlay||!this.elem)return;let e=this.elem.getBoundingClientRect();Object.assign(this.overlay.style,{top:"0px",width:`${e.width+2}px`,height:`${e.height+2}px`})},this.quill=e;let i=!1;t.extensions&&(i=t.extensions.slice()),this.options=(0,s.defaultsDeep)({},t),!1!==i&&(this.options.extensions=i),this.onInit=this.onInit.bind(this),this.onReadOnlyChange=this.onReadOnlyChange.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onFormatChange=this.onFormatChange.bind(this),this.applyChange=this.applyChange.bind(this),this.onStartChange=this.onStartChange.bind(this),this.onStopChange=this.onStopChange.bind(this),this.onUpdate=this.onUpdate.bind(this),this.extensionClasses=null!==(n=this.options.extensions)&&void 0!==n?n:[],this.extensions=[]}onInit(e,t){this.localeProps=e,this.applyEditorChange=t}onReadOnlyChange(e){e&&this.hide()}onBreakpointChange(e){this.isSmallBreakpoint=e,e&&this.removeExtensions()}onFormatChange(e){if(!e){this.hide(),this.editorFormat=null;return}if((0,s.isEqual)(this.editorFormat,e)){this.repositionElements();return}this.hide(),this.editorFormat=this.filterFormat(e),this.editorFormat&&(this.elem=this.getMediaElement(this.editorFormat.domNode)),this.elem?this.show(this.elem):this.editorFormat=null}onStartChange(){this.blotRoot.classList.add("with-change")}onStopChange(){this.blotRoot.classList.remove("with-change")}onUpdate(){this.repositionElements(),this.extensions.forEach(e=>{e.onUpdate()})}filterFormat(e){return null}getMediaElement(e){return null}createChange(e){return{}}applyChange(e){if(null===e)this.applyEditorChange({insert:!0});else{let t=this.quill.root.getBoundingClientRect(),n=this.elem.getBoundingClientRect(),i=n.height-e.height,s=`${t.height-i}px`;Object.assign(this.quill.root.style,{minHeight:s}),this.applyEditorChange(this.createChange({...e})),Object.assign(this.quill.root.style,{minHeight:""})}}}d.DEFAULTS={extensions:Object.keys(c)},t.Z=d},367668:function(e,t,n){"use strict";var i=n(73793),s=n(309988);let r="reinsertAttachment",o=[`[data-bbtype=${r}][data-bbfile]`],a={type:"embed",blotName:r,tagName:"div",attributes:{"data-bbtype":r,"data-bbfile":null,href:null},renderDomNode:(e,t,n,o)=>{let{localize:a}=o,l=JSON.parse(n.bbfile),{href:c,metadata:d}=(0,s.Z)(n.href,l);n.href=c,n.bbfile=JSON.stringify(d);let u=(0,i.Z)(e,t,n);u.contentEditable=!1,u.classList.add(r,"wants-props-update");let p=document.createElement("span");p.classList.add(`${r}-icon`),u.appendChild(p);let m=document.createElement("span");return m.classList.add(`${r}-label`,"no-longtext"),m.innerHTML=a.translate(`bbmlEditor.dialogs.${r}.label`,{fileName:d.linkName}),u.appendChild(m),u.formatComponent=e=>{e.isReadOnly?u.classList.add("hidden"):u.classList.remove("hidden")},u}};t.Z=()=>({pluginId:r,matchers:o,formatter:a})},950:function(e,t,n){"use strict";n.d(t,{b:function(){return E}});var i=n(213980),s=n.n(i),r=n(406733),o=n(703747),a=n(391214),l=n(73793),c=n(924347),d=n(359895),u=n(12434),p=n(854666),m=n(260706),h=n(507660),g=n.n(h);let f=n(146723),b=[`img[data-bbtype="${p.Z}"]`];function v(e,t,n){n.isReadOnly||n.isDisabled?(e.classList.add("clickable"),e.addEventListener("click",t)):(e.classList.remove("clickable"),e.removeEventListener("click",t))}function y(e,t,n){let i=n.plugins.find(e=>e.pluginId===p.Z);i&&(e.formatComponent=v.bind(null,e,()=>{(0,u.Z)(r.Z,{videoId:t.video_uuid,service:i.service},n.localize.getLocalePropsForClone())}),e.formatComponent(n))}let C={type:"embed",tagName:"div",attributes:{"data-bbtype":p.Z,"data-bbfile":null,src:"",title:"",alt:"",info:null},renderDomNode(e,t,n){let i=JSON.parse(n.bbfile),s=(0,l.Z)(e,t,n);s.classList.add("bb-video-everywhere-playback"),s.contentEditable=!1;let r=n.info?`<br><span class="ve-info">${n.info}</span>`:"",o=`<div class="ve-inline-block"><img class="icon-video-record" src="${n.src}" alt="${g().HTML(n.alt)}"></div>`,a=`<div class="ve-inline-block">${g().HTML(n.title)}${r}<div>`;return s.innerHTML=`${o}&nbsp;${a}`,s.classList.add("wants-props-update"),s.querySelector("img").onerror=e=>{let t=window.btoa(f);e.target.src=`data:image/svg+xml;base64,${t}`,e.target.onerror=null},s.formatComponent=y.bind(null,s,i),s}};function S(e,t){let n=`src="${t.src}"`,i=`title="${t.title}"`,s=`alt="${t.alt}"`,r=`data-bbtype="${p.Z}"`,o=`data-bbfile="${(0,d.ZP)(t.bbfile)}"`;return`<img ${n} ${i} ${s} ${r} ${o} />`}let E=s().shape({apiBasePath:s().string,xsrfToken:s().string,courseId:s().string});t.Z=e=>{let t=new c.Z(e);return t.getAvailability(),{service:t,pluginId:p.Z,buttonConfig:{id:p.Z,cssClass:p.Z,iconName:"collab",iconComponent:m.X,isDialog:!0,isActive(e){return!!e[p.Z]},onClick({showModal:n,editorFormat:i,...s}){i[p.Z]?n(a.Z,{...e,...s,editorFormat:i}):n(o.C,{...e,...s,service:t})},checkAvailabilityAsPromise:()=>t.getAvailability(),...e.isHidden&&{isHidden:!0}},matchers:b,formatter:C,toBbML:S}}},703747:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(50635),o=n(213980),a=n.n(o),l=n(340757),c=n(816390),d=n(326483);class u extends s().Component{constructor(e){super(e),this.onDismiss=this.onDismiss.bind(this),this.receiveMessage=this.receiveMessage.bind(this),this.state={isOpen:!1}}UNSAFE_componentWillMount(){this.getRecordLinkPromise=(0,c.Z)(this.props.service.getRecordLink()).then(e=>{window.addEventListener("message",this.receiveMessage,!1),this.iFrameURLOrigin=e.data.recordUrl,this.setState({isOpen:!0,src:e.data.recordUrl},l.d)})}componentWillUnmount(){this.getRecordLinkPromise.cancel(),window.removeEventListener("message",this.receiveMessage)}onDismiss(){this.setState({isOpen:!1})}receiveMessage(e){let{applyChange:t,t:n,service:i}=this.props,s=e.data.messageType,r=e.origin,o=e.source;if(this.iFrameURLOrigin&&this.iFrameURLOrigin.startsWith(r))switch(s){case"capture_loaded":o.postMessage({messageType:"capture_loaded_ack"},r);break;case"capture_maximize":o.postMessage({messageType:"capture_maximize_ack"},r);break;case"capture_complete":{let s=n("bbmlEditor.dialogs.collab_video.newRecordingLabel",{date:new Date});i.saveVideo(e.data.uid,s,s).then(i=>{let r=/src="([^"]*)"/.exec(i.data.videoEmbeddedLink),o=r[1];t((0,d.Z)({src:o,title:s,alt:s,uuid:e.data.uid,availabilityMessage:n("bbmlEditor.dialogs.collab_video.availabilityInfo")})),this.onDismiss()}).catch(()=>{this.onDismiss()});break}case"capture_close":o.postMessage({messageType:"capture_close_ack"},r)}}render(){let{destroy:e,t,showCloseButton:n}=this.props;return s().createElement(l.Z,{allowMedia:!0,destroy:e,isOpen:this.state.isOpen,showCloseButton:n,src:this.state.src,title:t("bbmlEditor.dialogs.collab_video.recordingTitle")})}}u.propTypes={applyChange:a().func.isRequired,destroy:a().func.isRequired,service:a().shape({getRecordLink:a().func.isRequired,saveVideo:a().func.isRequired}).isRequired,showCloseButton:a().bool},u.defaultProps={showCloseButton:!0},t.C=(0,r.H)(u)},391214:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(50635),o=n(213980),a=n.n(o),l=n(367281),c=n.n(l),d=n(844156),u=n(142895),p=n(292346),m=n(326483),h=n(854666);function g(e){return""===e.trim()?"bbmlEditor.dialogs.collab_video.errorMessage":null}class f extends s().Component{constructor(e){super(e);let{title:t,alt:n,src:i,bbfile:s}=e.editorFormat[h.Z];this.state={isOpen:!1,src:i,bbfile:s,title:t,alt:n},this.isValid=this.isValid.bind(this),this.onTitleChange=this.onTitleChange.bind(this),this.onAltChange=this.onAltChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onSave=this.onSave.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this),this.getErrorMessage=this.getErrorMessage.bind(this),this.getTitleLabel=this.getTitleLabel.bind(this),this.getAltLabel=this.getAltLabel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this)}UNSAFE_componentWillMount(){setTimeout(()=>this.setState({isOpen:!0}))}onCancel(){this.setState({isOpen:!1})}onSave(){this.isValid()&&!this.saveInitiated&&(this.saveInitiated=!0,this.setState({isOpen:!1}))}onKeyDown(e){e.keyCode===c().ENTER&&(e.preventDefault(),e.stopPropagation(),this.onSave())}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onTitleChange(e){this.setState({title:e,alt:e})}onAltChange(e){this.setState({alt:e})}getErrorMessage(e){let t=g(e);return t?this.props.t(t):""}getTitleLabel(){let{t:e}=this.props;return e("bbmlEditor.dialogs.collab_video.displayNameLabel")}getAltLabel(){let{t:e}=this.props;return e("bbmlEditor.dialogs.collab_video.altLabel")}isValid(){return!g(this.state.title)&&!g(this.state.alt)}onAnimationComplete(){this.saveInitiated&&this.props.applyChange((0,m.Z)({src:this.state.src,title:this.state.title,alt:this.state.alt,bbfile:this.state.bbfile})),this.props.destroy()}render(){let{t:e}=this.props,t=e("bbmlEditor.buttons.cancel"),n=e("bbmlEditor.buttons.save");return s().createElement(u.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:e("bbmlEditor.dialogs.collab_video.editTitle"),type:u.DialogType.fullHeaderFooter,showCloseButton:!1},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:"editor.dialogs.collabVideo.editTitle"},s().createElement(p.TextField,{className:"required",label:this.getTitleLabel(),value:this.state.title,onChanged:this.onTitleChange,onKeyDown:this.onKeyDown,onGetErrorMessage:this.getErrorMessage,validateOnLoad:!1,validateOnFocusOut:!0,analyticsId:"editor.dialogs.collabVideo.displayNameLabel.textField",required:!0}),s().createElement(p.TextField,{className:"required",label:this.getAltLabel(),value:this.state.alt,onChanged:this.onAltChange,onKeyDown:this.onKeyDown,onGetErrorMessage:this.getErrorMessage,validateOnLoad:!1,validateOnFocusOut:!0,analyticsId:"editor.dialogs.collabVideo.altLabel.textField",required:!0}),s().createElement("br",null),s().createElement(u.DialogFooter,null,s().createElement(d.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.dialogs.collabVideo.editTitle.cancel"},t),s().createElement(d.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:!this.isValid(),analyticsId:"editor.dialogs.collabVideo.editTitle.save.button"},n)))}}f.propTypes={destroy:a().func.isRequired,applyChange:a().func.isRequired,editorFormat:a().shape()},f.defaultProps={editorFormat:{}},t.Z=(0,r.H)(f)},924347:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(789644),s=n.n(i),r=n(4264);let o=null;class a{constructor({apiBasePath:e,courseId:t,xsrfToken:n}){this.apiBasePath=e,this.courseId=t,this.xsrfToken=n}getAvailability(){return o||(o=s()({method:"get",url:(0,r.uI)(`${this.apiBasePath}/v1/video-integration/availability`),headers:{"X-Blackboard-XSRF":this.xsrfToken}}).then(e=>e.data.result)),o}getRecordLink(){return s()({method:"get",url:(0,r.uI)(`${this.apiBasePath}/v1/courses/${this.courseId}/video-integration/recordLink`),headers:{"X-Blackboard-XSRF":this.xsrfToken}})}getPlaybackLink(e){return s()({method:"get",url:(0,r.uI)(`${this.apiBasePath}/v1/courses/${this.courseId}/video-integration/playLink/${e}`),headers:{"X-Blackboard-XSRF":this.xsrfToken}})}saveVideo(e,t,n){return s()({method:"post",data:{videoUuid:e,videoTitle:t,videoAltText:n},url:(0,r.uI)(`${this.apiBasePath}/v1/video-integration`),headers:{"X-Blackboard-XSRF":this.xsrfToken}})}}},819549:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(50635),o=n(213980),a=n.n(o),l=n(367281),c=n.n(l),d=n(844156),u=n(142895),p=n(292346),m=n(947413),h=n(4264),g=n(820487),f=n(682267);class b extends s().Component{constructor(e){super(e);let t="",n="";if(e.editorFormat.video){let i=JSON.parse(e.editorFormat.video.bbfile);t=i.alt,n=i.src}this.state={alt:t,src:n,isOpen:!1},this.isValid=this.isValid.bind(this),this.onSrcChange=this.onSrcChange.bind(this),this.onAltChange=this.onAltChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onSave=this.onSave.bind(this),this.getErrorMessage=this.getErrorMessage.bind(this),this.getSrcLabel=this.getSrcLabel.bind(this),this.getAltLabel=this.getAltLabel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this)}UNSAFE_componentWillMount(){setTimeout(()=>this.setState({isOpen:!0}))}onCancel(){this.setState({isOpen:!1})}onAnimationComplete(){var e;if(this.saveInitiated){let t=null===(e=this.props.editorFormat.domNode)||void 0===e?void 0:e.getElementsByTagName("iframe")[0],n={src:this.state.src,alt:this.state.alt&&this.state.alt.length>0?this.state.alt:this.state.src,width:t?t.clientWidth:void 0,height:t?t.clientHeight:void 0};this.props.applyChange((0,m.Z)(n,!!this.props.editorFormat.video))}this.props.destroy()}async onSave(){let e=await (0,h.d0)(this.state.src);this.isValid()&&!this.saveInitiated&&(this.saveInitiated=!0,this.setState({isOpen:!1,src:e}))}onKeyDown(e){e.keyCode===c().ENTER&&(e.preventDefault(),e.stopPropagation(),this.onSave())}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onSrcChange(e){this.setState({src:e})}onAltChange(e){this.setState({alt:e})}getErrorCode(e){if(""===e.trim())return"bbmlEditor.dialogs.media.errorMessage";if(!(0,f.B)(e)){let t=g.Z.some(t=>e.toLowerCase().endsWith(t));return t?null:"bbmlEditor.dialogs.media.errorMessageOrigin"}return!e.toLowerCase().includes("youtube.com")&&e.toLowerCase().includes("feature=youtu.be")?"bbmlEditor.dialogs.media.errorMessageOrigin":null}getErrorMessage(e){let t=this.getErrorCode(e),{t:n}=this.props;return t?n(t):""}getSrcLabel(){let{t:e}=this.props;return e("bbmlEditor.dialogs.media.srcLabel")}getAltLabel(){let{t:e}=this.props;return e("bbmlEditor.dialogs.media.altLabel")}isValid(){return!this.getErrorCode(this.state.src)}render(){let{editorFormat:e,t}=this.props,n=t("bbmlEditor.buttons.cancel"),i=t(e.video?"bbmlEditor.buttons.save":"bbmlEditor.buttons.insert");return s().createElement(u.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:t(e.video?"bbmlEditor.dialogs.media.titleEdit":"bbmlEditor.dialogs.media.titleInsert"),type:u.DialogType.fullHeaderFooter,showCloseButton:!1},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:`editor.${e.video?"dialogs.video.titleEdit":"dialogs.video.titleInsert"}`},s().createElement(p.TextField,{className:"required",label:this.getSrcLabel(),value:this.state.src,onChanged:this.onSrcChange,onKeyDown:this.onKeyDown,onGetErrorMessage:this.getErrorMessage,errorAnchor:this.getErrorCode(this.state.src)&&0===this.getErrorCode(this.state.src).localeCompare("dialogs.media.errorMessageOrigin")?{anchorText:t("bbmlEditor.dialogs.media.supportedSites"),anchorHref:"http://help.blackboard.com/001_621en_US"}:{},validateOnLoad:!1,validateOnFocusOut:!0,analyticsId:"editor.dialogs.video.srcLabel.textField",required:!0,autoFocus:!0}),s().createElement(p.TextField,{label:this.getAltLabel(),value:this.state.alt,onChanged:this.onAltChange,onKeyDown:this.onKeyDown,analyticsId:"editor.dialogs.video.altLabel.textField"}),s().createElement("br",null),s().createElement(u.DialogFooter,null,s().createElement(d.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:`${e.video?"editor.dialogs.video.titleEdit":"editor.dialogs.video.titleInsert"}.cancel`},n),s().createElement(d.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:!this.isValid(),analyticsId:`${e.video?"editor.dialogs.video.titleEdit":"editor.dialogs.video.titleInsert"}.save.button`},i)))}}b.propTypes={destroy:a().func.isRequired,applyChange:a().func.isRequired,editorFormat:a().shape()},b.defaultProps={editorFormat:{}},t.Z=(0,r.H)(b)},485544:function(e,t,n){"use strict";var i=n(260510),s=n(947413),r=n(17108);class o extends i.Z{constructor(){super(...arguments),this.editorFormat=null}filterFormat(e){return(0,r.kG)(e)?e:null}getMediaElement(e){let t=e.querySelector("iframe");if(t)return t;let n=e.querySelector("video");return n||null}createChange(e){var t,n;if(!this.editorFormat)return[{}];let i=JSON.parse(this.editorFormat.video.bbfile);return i.width=null!==(t=e.width)&&void 0!==t?t:i.width,i.height=null!==(n=e.height)&&void 0!==n?n:i.height,(0,s.Z)(i,!!this.editorFormat.video)}}t.Z=o},755657:function(e,t,n){"use strict";var i=n(202784),s=n.n(i),r=n(213980),o=n.n(r),a=n(142895),l=n(844156);class c extends s().Component{constructor(e){super(e),this.state={isOpen:!0},this.getErrorMessage=this.getErrorMessage.bind(this),this.onCancel=this.onCancel.bind(this),this.removeFromDOM=this.removeFromDOM.bind(this)}getErrorMessage(){let{messageType:e,localize:t}=this.props;return"mashupNotAvailable"===e?t.translate("bbmlEditor.errorMessages.mashupNotAvailable"):t.translate("bbmlEditor.errorMessages.defaultError")}onCancel(){this.setState({isOpen:!1})}removeFromDOM(){this.props.destroy()}render(){let{localize:e}=this.props,t=e.translate("bbmlEditor.buttons.close");return s().createElement(a.Dialog,{hidden:!this.state.isOpen,onDismiss:this.onDismiss,dialogContentProps:{title:e.translate("bbmlEditor.errorMessages.modalTitle"),showCloseButton:!1},modalProps:{containerClassName:"modal-error-message",isAlert:!0,isOpen:this.state.isOpen,onDismiss:this.onCancel,onDismissed:this.removeFromDOM},firstFocusableSelector:"ms-Dialog-title",analyticsId:"editor.errorMessages.modalTitle"},s().createElement("div",{className:"error-text"},this.getErrorMessage()),s().createElement(a.DialogFooter,null,s().createElement(l.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.modalErrorMessage.close"},t)))}}c.propTypes={destroy:o().func.isRequired,messageType:o().oneOf(["defaultError","mashupNotAvailable"])},c.defaultProps={messageType:"defaultError"},t.Z=c},482994:function(e,t,n){"use strict";n.d(t,{Dy:function(){return o.Z},Ke:function(){return r.Z},ZP:function(){return g}});var i=n(951248),s=n(555342),r=n(587987),o=n(540535),a=n(322846),l=n(12434),c=n(409780),d=n(148330),u=n(825501);class p extends Error{constructor(e){super("InvalidFileError"),Object.setPrototypeOf(this,new.target.prototype),this.invalidFile=e}}function m(e,t,n,i){return new Promise(s=>{e(r.Z,{createChange:e=>s(e),files:n,fileSource:i,...t},t.localeProps)})}function h(e,t,n,r){e(t.map((e,t)=>{let o=decodeURIComponent(e.fileName),a=(0,c.Z)(e.fileName),l=`${e.webLocation}${a}`,d={alternativeText:o,linkName:o,mimeType:e.mimeType,render:i.I_d.Attachment,fileSize:n[t].size};return((0,s.Q)(d,r)||(0,s.t1)(d,r))&&(d.render=i.I_d.Inline),{href:l,bbfile:d,originalFile:e}}))}function g(e,t=null,n="local"){let i=t||(()=>(0,a.Z)(e.multiple,e.allowedFileTypes)),s=e.showModal||l.Z,r=e.fileUploadSettings?e.fileUploadSettings.maxUploadSizeInBytes:u.aW.maxFileSize,c=new d.p(r),g=e.supportsInlineDocumentRender;return new Promise(t=>{i().then(i=>{let r=[];for(let t=0;t<i.length;t+=1){if(e.allowedFileTypes&&!function(e,t){return e.allowedFileTypes.some(e=>t.name.toLowerCase().endsWith(e))}(e,i[t]))throw new p(i[t].name);r.push(i[t])}c.validate(Array.from(i)),m(s,e,r,n).then(e=>{h(t,e,r,g)})}).catch(i=>{if(i instanceof d.C){var a;(a=i.getErrorFiles(),new Promise(t=>{s(o.Z,{executeCallback:()=>t(),...e,files:a,maxFileSize:r},e.localeProps)})).then(()=>{i.getAllowedFiles().length>0&&m(s,e,i.getAllowedFiles(),n).then(e=>{h(t,e,[...i.getAllowedFiles()],g)})})}else e.applyChange?e.applyChange(i):i instanceof p&&e.onWrongFileType(i)})})}},192900:function(e,t,n){"use strict";n.d(t,{H:function(){return d}});var i=n(398435),s=n(202784),r=n.n(s),o=n(174897),a=n(928316),l=n.n(a),c=n(73793);let d=e=>{let t=e.component;return(n,s,a,d)=>{var u,p;e.processValues&&(a=e.processValues(a));let m=(0,c.Z)(n,s,a);m.contentEditable=!1;let h=e=>{let c=e.localize.getLocalePropsForClone();l().render(r().createElement(i.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:c.isRtl},r().createElement(o.g,{...c},r().createElement(t,{attributes:s,values:a,editorProps:e,node:n}))),m)};h(d);let g=m.childNodes[0]||m.appendChild(document.createElement("div"));g.classList.add("no-longtext"),m.formatComponent=e=>h(e),m.unmountComponent=()=>{e.onUnmountComponent&&e.onUnmountComponent(m),l().unmountComponentAtNode(m)};let f=[...null!==(u=e.additionalRootClasses)&&void 0!==u?u:[],...null!==(p=a.additionalRootClasses)&&void 0!==p?p:[]];return m.classList.add("wants-props-update",...f),m}}},464357:function(e,t,n){"use strict";function i(e){try{JSON.parse(e)}catch(t){return function(e){let t=['{"','["',':"',',"'],n=['"}','"]','":','",'];for(let i=0;i<e.length;i++){let s=e[i];'"'===s&&"\\"!==e[i-1]&&0>t.indexOf(e[i-1]+s)&&0>n.indexOf(s+e[i+1])&&(e=e.substr(0,i)+'\\"'+e.substr(i+1),i+=1)}return e}(e)}return e}function s(e){return function(t){let n="function"==typeof e?e():e;return t?Promise.resolve(n):n}}n.d(t,{A:function(){return i},r:function(){return s}})},285004:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});var i=n(348834).Buffer;let s=e=>i.byteLength(e)>196e3},139867:function(e,t,n){"use strict";function i(e=window.document){e.body.classList.remove("hide-focus-outline")}n.d(t,{g:function(){return i}})},491407:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(281699);let s=(0,i.makeStyles)(e=>(0,i.createStyles)({fileViewerContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%","& img":{maxHeight:"100%",maxWidth:"100%"},"& video":{maxHeight:"100%",maxWidth:"100%",display:"inline-block",marginBottom:"-5px"},"& audio":{width:"100%",display:"inline-block",marginBottom:"-6px"},"& iframe":{width:"100%",height:"100%",minHeight:"500px",[e.breakpoints.up("sm")]:{minHeight:"700px"},[e.breakpoints.up("md")]:{minHeight:"880px"},borderWidth:1,borderStyle:"solid",borderColor:e.palette.border.main}},fileViewerContainerImage:{alignItems:"stretch","& div":{backgroundColor:"unset",display:"flex"}},fileViewerContainerIframe:{alignItems:"stretch"}}))},124860:function(e,t,n){"use strict";n.d(t,{x:function(){return d}});var i=n(281699),s=n(465139),r=n(906277),o=n(202784),a=n.n(o),l=n(516082);let c=(0,i.makeStyles)(()=>(0,i.createStyles)({root:({clamp:e,lines:t})=>({...e?{boxOrient:"vertical",display:"-webkit-box",lineClamp:t,overflow:"hidden",textOverflow:"ellipsis"}:void 0,cursor:"text",margin:0,overflowWrap:"anywhere"})})),d=({clamp:e=!0,onClampChange:t,lines:n,text:i,ContainerProps:d})=>{let u=c({clamp:e,lines:n}),p=(0,o.useRef)(null),[m,h]=(0,o.useState)(),g=(0,s.f0)(t),f=(0,s.zX)(()=>{let e=p.current;if(!e||"number"!=typeof n){h(!1);return}let{lineHeight:t,scrollHeight:i}=(0,l.U)(p.current);return h(i>Math.ceil(t*n))});return(0,o.useEffect)(()=>{if(!g)return;let e=new ResizeObserver(f);return p.current&&e.observe(p.current),()=>e.disconnect()},[f,g]),(0,o.useEffect)(()=>{f()},[f,i]),(0,o.useEffect)(()=>{void 0!==m&&(null==g||g(m))},[m,g]),a().createElement("p",{ref:p,...d,className:(0,r.Z)(u.root,null==d?void 0:d.className)},i)}},516082:function(e,t,n){"use strict";function i(e){return{lineHeight:parseFloat(window.getComputedStyle(e).getPropertyValue("line-height")),scrollHeight:e.scrollHeight}}n.d(t,{U:function(){return i}})},259506:function(e,t,n){"use strict";n.d(t,{G4:function(){return d},W1:function(){return v},lv:function(){return b}});var i=n(202784),s=n(755755),r=n(137444),o=n(337486),a=n(553239),l=n(906277),c=n(346304);let d=16,u=/\D/g,p=e=>e.replace(u,"").length>d,m=(e,t,n,i,s,r,a,l,d)=>{let u;if(!(null==n?void 0:n.number))return null;if(p(t))return t;let m=(0,c.nM)(t),h=m?1:0,g=n.number.getDecimalStringSync(i);t.charAt(h)===g&&(t=m?`-0${t.substring(1)}`:`0${t}`),u=(0,o.Di)(t)?t.substring(h).replace(r,""):s?t.substring(h):e(t.substring(h));let f=m?`-${u}`:u;if(f===t)return f;let b=f.length-t.length,v=f.substring(0,a)!==t.substring(0,a),y=v?a+b:a;return l(y>=0?y:0),d(!0),f},h=(e,t,n,i,s,r,a,l,c,u,m,h)=>{let g=h||e,f=(0,o.UZ)(n,u,i,s),b=(0,o.UZ)(n,c,i,s),v=(0,o.UZ)(n,d,i,s),y=(0,o.UZ)(n,Number.MAX_SAFE_INTEGER-1,i,s),C=(0,o.UZ)(n,Number.MIN_VALUE,i,s),S=(0,o.UZ)(n,Number.MAX_VALUE,i,s),E=Number.isFinite(e)?e:null;return(null==l?void 0:l(E))===!1?(r(""),E):0===e&&m.match(/[1-9]/g)?(r(t("cr.components.localizedNumberInput.validationError.minExponentialNotation",{minExponentialNotationLocalized:C})),null):e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?(r(t("cr.components.localizedNumberInput.validationError.maxExponentialNotation",{maxExponentialNotationLocalized:S})),null):p(m)?(r(t("cr.components.localizedNumberInput.validationError.maxDigits",{maxDigits:v})),null):Number.isInteger(g)&&!Number.isSafeInteger(g)?(r(t("cr.components.localizedNumberInput.validationError.maxSafeInteger",{maxSafeInteger:y})),null):!Number.isFinite(e)&&(a||m.length>0)?(r(t("cr.components.localizedNumberInput.validationError.notNumber")),null):void 0!==u&&void 0!==c&&Number.isFinite(u)&&Number.isFinite(c)&&(e<u||e>c)&&m.length>0?(r(t("cr.components.localizedNumberInput.validationError.outsideRange",{min:f,max:b})),null):void 0!==u&&Number.isFinite(u)&&e<u&&m.length>0?(r(t("cr.components.localizedNumberInput.validationError.outsideMinRange",{min:f})),null):void 0!==c&&Number.isFinite(c)&&e>c&&m.length>0?(r(t("cr.components.localizedNumberInput.validationError.outsideMaxRange",{max:b})),null):(r(""),Number.isFinite(e)?e:null)},g=(e,t,n,i)=>{let{integer:s,exponentialNotation:r}=(0,o.Il)(e),a="-"===r.charAt(1)||"+"===r.charAt(1)?2:1,l=i(s.substring(t,s.length-n)),c=r.length>a?l+r:l,d=Number(c);return 1===t&&(d*=-1),{value:d,integerString:s,parsedInteger:l}},f=(e,t,n,i,s,r,a,l,d,u,p=!1)=>{if(!(null==i?void 0:i.number)||null===n)return null;let m=i.number.getDecimalStringSync(s),f=(0,c.AO)(n),b=(0,c.nM)(f)?1:0,v=(0,c.U_)(f,m)?1:0,y=null;if((0,o.Di)(f)){let n=g(f,b,v,t);y=h(n.value,e,s,p,i,r,a,l,d,u,n.integerString,n.parsedInteger)}else{let n=(0,c.Lk)(f,b,v,t,s,p);y=h(n.value,e,s,p,i,r,a,l,d,u,n.integerString)}return y},b=e=>{var t,n;let{ariaDescribedBy:d,ariaLabel:u,className:p,maintainInputValueOnBlur:h,max:g,min:b,numberFormatOptions:v,onBlur:y,onBlurNative:C,onChange:S,onChangeValidState:E,inputRef:I=null,required:w,validate:A,value:k,displayWesternNumbers:x=!1,hideErrorMessage:T=!1,inlineLabel:P,...D}=e,{locale:G,babelfishFormat:R,regroupNumber:B,translate:L,parseNumber:N}=(0,s.h)(),O=(0,a.y)({displayWesternNumbers:x,locale:G,inlineLabel:P}),{displayValue:M,numericValue:$,setDisplayValue:H,setNumericValue:F}=(0,o.GM)(e),[U,V]=i.useState(""),[_,q]=i.useState(null),z=i.useRef(null),[W,j]=i.useState(null),[Z,K]=i.useState(null),X=""===U&&(null===(t=null==A?void 0:A(k))||void 0===t||t),Y=!T&&""!==U;return i.useEffect(()=>{if(null==R?void 0:R.number){let e=R.number.getGroupingStringSync((0,o.Z3)(G,x)),t=`\\${e}`;q(RegExp(t,"g"))}},[R,G,x]),i.useEffect(()=>{z.current&&Z&&(z.current.setSelectionRange(W,W),K(!1))},[M,W,Z]),i.useEffect(()=>{null==E||E(X,U)},[X,U,E]),i.createElement(r.L,{className:(0,l.Z)(O.localizedNumberInput,p),inputRef:e=>{z.current=e,"function"==typeof I?I(e):null!==I&&(I.current=e)},css:null,error:Y||!(null===(n=null==A?void 0:A(k))||void 0===n||n),inputProps:{"aria-label":u,"aria-describedby":d},onBlur:e=>{let t=Number.isFinite($)?(0,o.UZ)(G,$,x,R,v):M;h&&(t=m(B,e.target.value,R,(0,o.Z3)(G,x),(0,c.sh)(G,x),_,e.target.selectionStart,j,K)),H(t);let n=f(L,N,t,R,G,V,w,A,g,b,x);n!==$&&(F(n),S&&S(n)),null==y||y(n),null==C||C(e,n)},onChange:e=>{let t=m(B,e.target.value,R,(0,o.Z3)(G,x),(0,c.sh)(G,x),_,e.target.selectionStart,j,K),n=f(L,N,t,R,G,V,w,A,g,b,x);H(null===n?e.target.value:t),F(n),S&&S(n)},type:"text",value:M,dir:(0,o.hN)(G,x),required:w,...D,helperText:Y?U:e.helperText})},v=i.forwardRef(({onBlur:e,onBlurNative:t,...n},s)=>i.createElement(b,{...n,onBlurNative:(n,i)=>{null==e||e(n),null==t||t(n,i)},inputRef:s}))},686366:function(e,t,n){"use strict";n.d(t,{KJ:function(){return c},Sg:function(){return u},ew:function(){return d},p4:function(){return a},y1:function(){return o},yi:function(){return l}});let i=/\D/g,s=/[+\s]/,r=(e,t)=>e.replace(i,"").length>t,o=(e,t)=>e.length>0&&r(e,t),a=e=>{let t=Number(e);return!!(e.length>0&&!e.startsWith("-")||e.startsWith("-")&&e.length>1)&&(isNaN(t)||!Number.isFinite(t)||s.test(e))},l=e=>e&&!isNaN(Number(e))&&Number(e)===Number.POSITIVE_INFINITY||Number(e)===Number.NEGATIVE_INFINITY,c=(e,t,n)=>void 0!==t&&void 0!==n&&Number.isFinite(t)&&Number.isFinite(n)&&(e<t||e>n),d=(e,t,n)=>void 0!==t&&void 0===n&&Number.isFinite(t)&&e<t,u=(e,t,n)=>void 0===t&&void 0!==n&&Number.isFinite(n)&&e>n},248994:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});class i{constructor(){this.timedDisplayList=[]}static getInstance(){return i.INSTANCE||(i.INSTANCE=new i),i.INSTANCE}addTimedDisplay(e,t){let n=this.timedDisplayList.find(t=>t.id===e);if(n)throw Error("Instance with unique id already exists. Instances must each have a unique id");return this.timedDisplayList.push({id:e,listener:t,isStarted:!1}),!!this.timedDisplayList.find(e=>e.isStarted)}removeTimedDisplay(e){let t=this.timedDisplayList.find(t=>t.id===e);t&&(t.isStarted&&this.stopTimedDisplay(e),this.timedDisplayList=this.timedDisplayList.filter(e=>e!==t))}startTimedDisplay(e){let t=this.timedDisplayList.find(t=>t.isStarted&&t.id!==e);if(t)return!1;for(let t of this.timedDisplayList)t.id===e&&(t.isStarted=!0),t.listener(e,!0);return!0}stopTimedDisplay(e){for(let t of this.timedDisplayList)t.id===e&&(t.isStarted=!1),t.listener(e,!1)}getInstanceCount(){return this.timedDisplayList.length}resetInstances(){this.timedDisplayList=[]}}},372351:function(e,t,n){"use strict";n.d(t,{Q:function(){return f},t1:function(){return g},ZO:function(){return h},V4:function(){return c},RE:function(){return d},TN:function(){return C},f5:function(){return v},CO:function(){return S},tq:function(){return b},bm:function(){return y},iT:function(){return m},Y1:function(){return p},jN:function(){return u},NU:function(){return E},c1:function(){return s},$8:function(){return o}});var i=n(443400);function s(e,t){var n,s,r,o;return{resourceUrl:(0,i.uI)(null!==(n=e.permanentUrl)&&void 0!==n?n:"/"),viewerUrl:e.viewerUrl?(0,i.uI)(e.viewerUrl):void 0,fileName:null!==(s=e.fileName)&&void 0!==s?s:"",alternativeText:null!=t?t:"",displayName:null!==(r=e.fileName)&&void 0!==r?r:"",mimeType:null!==(o=e.mimeType)&&void 0!==o?o:"application/octet-stream"}}var r=n(951248);let o=104857600,a=["application/pdf","application/msword","application/vnd.oasis.opendocument.text","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/x-mspowerpoint","application/x-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-excel","application/vnd.ms-excel.sheet.binary.macroEnabled.12","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv","text/plain","application/rtf"],l={"application/vnd.ms-excel":10485760,"application/vnd.ms-excel.sheet.binary.macroEnabled.12":10485760,"application/vnd.ms-excel.sheet.macroEnabled.12":10485760,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":10485760,"text/csv":10485760};function c(e){let t="";return e.mimeType&&(t=e.mimeType.substring(0,e.mimeType.indexOf("/"))),t}function d(e){return l[e.mimeType]}function u(e){if(void 0===e.fileSize)return!0;let t=d(e);return!t||e.fileSize<t}function p(e){if(void 0===e.fileSize)return!0;let t=e.fileSize<o,n=u(e);return t&&n}function m(e){return!!e.viewerUrl}function h(e){return -1!==a.indexOf(e)}function g(e,t){return t&&p(e)&&h(e.mimeType)}function f(e,t=!1){if(e.mimeType){let n;let i=c(e),s=(n="",e.mimeType&&(n=e.mimeType.substring(e.mimeType.indexOf("/")+1)),n);switch(i){case"image":return null!==e.resourceUrl&&["jpeg","gif","png"].indexOf(s)>-1;case"audio":return null!==e.resourceUrl&&["mpeg","mp3","mp4","flac","wav","x-wav","ogg"].indexOf(s)>-1;case"video":return null!==e.resourceUrl&&["mp4"].indexOf(s)>-1;default:return void 0!==e.viewerUrl&&g(e,t)}}return!1}function b(e){return e===r.I_d.Inline||e===r.I_d.InlineOnly}function v(e){return void 0===e.render||b(e.render)}function y(e){return["image","video","audio"].indexOf(e)>-1}function C(e){return"audio"===e}function S(e){return"image"===e}function E(e){return"video"===e}},651755:function(e,t,n){"use strict";n.d(t,{Jv:function(){return s},Kx:function(){return r},zL:function(){return o}});var i=n(410628);function s(e){let t=(0,i.q)(),n={announceOptionSelected:e=>t("cr.components.combobox.announceOptionSelected",{optionLabel:e.label}),announceOptionDeselected:e=>t("cr.components.combobox.announceOptionDeselected",{optionLabel:e.label}),announceValueCleared:t("cr.components.combobox.announceValueCleared"),announceSearchResults:(e,n)=>t("cr.components.combobox.announceSearchResults",{count:e,searchString:n}),noResults:e=>t("cr.components.combobox.noResults",{searchString:e}),clearButtonLabel:t("cr.components.combobox.clearButtonLabel"),searchLabel:t("cr.components.combobox.searchLabel")};return{...n,...e}}function r(e){let t=s(),n=(0,i.q)(),r={loadingResults:n("cr.components.combobox.loadingResults")};return{...t,...r,...e}}function o(e){let t=s(),n=(0,i.q)();return{...t,createOptionLabel:e=>n("cr.components.combobox.createOptionLabel",{searchString:e}),...e}}},64130:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var i=n(202784),s=n(398435);let r=e=>i.createElement(s.AnalyticsSvgIcon,{analyticsId:"components-react.icons.filledAdd",...e,fontSize:"small",x:"0px",y:"0px",viewBox:"0 0 16 16"},i.createElement("svg",{id:"icon-color-small-add-circle-press",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("path",{fill:"#A234B5",stroke:"#979797",d:"M15.5 8c0 4.143-3.357 7.5-7.5 7.5A7.5 7.5 0 1 1 15.5 8"}),i.createElement("path",{stroke:"#A234B5",d:"M15.5 8c0 4.143-3.357 7.5-7.5 7.5A7.5 7.5 0 1 1 15.5 8z"}),i.createElement("path",{stroke:"#FFF",strokeLinecap:"round",strokeWidth:"2",d:"M8 4.5v7M11.5 8h-7"}))))},555342:function(e,t,n){"use strict";n.d(t,{gi:function(){return e9},_c:function(){return iO},Tg:function(){return ij},dH:function(){return iV},kq:function(){return nZ},KD:function(){return v},Ht:function(){return b},lr:function(){return U},Q$:function(){return z},W5:function(){return ie},y2:function(){return eq},YF:function(){return t7},rM:function(){return nN},Mt:function(){return n5},uR:function(){return nj},fu:function(){return tv},H4:function(){return np},sB:function(){return tz.s},lZ:function(){return t1},p0:function(){return nw},ht:function(){return t3},$p:function(){return tJ},W1:function(){return C.W1},WG:function(){return nm},Cl:function(){return i2},av:function(){return iY},z$:function(){return e8},H6:function(){return te},P7:function(){return tt},TA:function(){return tH},ox:function(){return nr},CU:function(){return nc},R2:function(){return nG},RK:function(){return u},Mc:function(){return io},x$:function(){return ia.x},cm:function(){return ny},vC:function(){return ts},zi:function(){return eS},G0:function(){return eA},lv:function(){return C.lv},yZ:function(){return eO},Y0:function(){return e$},Vd:function(){return eN},rc:function(){return O},yo:function(){return eF},er:function(){return e6},_W:function(){return ex},q8:function(){return nU},I_:function(){return t4},jH:function(){return tE},rU:function(){return to},hu:function(){return tw},cW:function(){return ee},YI:function(){return tC},GX:function(){return eK},VW:function(){return f},f0:function(){return nA},wT:function(){return nx},jI:function(){return e3},Hb:function(){return t8},Rc:function(){return nt},Q:function(){return t_.Q},t1:function(){return t_.t1},ZO:function(){return t_.ZO},hr:function(){return V.hr},hD:function(){return V.hD},X0:function(){return tQ},fw:function(){return V.fw},V4:function(){return t_.V4},PZ:function(){return V.PZ},f5:function(){return t_.f5},CO:function(){return t_.CO},tq:function(){return t_.tq},iT:function(){return t_.iT},NU:function(){return t_.NU},c1:function(){return t_.c1},sh:function(){return R.sh},Wf:function(){return iB},og:function(){return iP},rv:function(){return ng},Ke:function(){return iQ},pH:function(){return iJ},MQ:function(){return ne},Kx:function(){return nh.Kx},Jv:function(){return nh.Jv},zL:function(){return nh.zL},dd:function(){return nS},Ds:function(){return nT},fp:function(){return iK},xS:function(){return iq},u3:function(){return nf},LU:function(){return nb}});var i,s,r,o,a,l,c,d,u,p,m,h,g,f,b,v,y,C=n(259506),S=n(202784),E=n.n(S),I=n(398435),w=n(438501),A=n(281699);let k="30px",x=(0,A.makeStyles)(e=>{let t="auto",n="38px";return(0,A.createStyles)({root:{display:"flex",position:"relative",width:t,height:n,'& input[type="text"], & input[type="text"]:focus':{width:t,height:n,fontSize:e.typography.fontSizeDefault,paddingRight:k}},input:{width:t,"& > div":{backgroundColor:e.palette.background.default,height:n}},tooltipContainer:{color:e.palette.error.main,display:"flex"},tooltipMessageContainer:{display:"flex",padding:"0px",margin:"0px"},inputContainer:{display:"flex",width:t},inputAdormentContainer:{alignItems:"center",bottom:0,display:"flex",justifyContent:"center",position:"absolute",right:0,top:0,textAlign:"center",width:k,color:e.palette.text.secondary},inputAlertContainer:{color:e.palette.error.main,display:"flex",padding:"0 4px"},inputAdormentIcon:{fontSize:e.typography.fontSizeDefault}})}),T=(0,A.makeStyles)(e=>{let t="90px",n="40px";return(0,A.createStyles)({root:{display:"flex",position:"relative",width:t,height:n,'& input[type="text"], & input[type="text"]:focus':{width:t,height:n,fontSize:e.typography.fontSizeDefault,paddingRight:k}},input:{width:t,"& > div":{borderColor:e.palette.border.main,backgroundColor:e.palette.background.default,height:n}},tooltipContainer:{color:e.palette.error.main,display:"flex"},tooltipMessageContainer:{display:"flex",padding:"0px",margin:"0px"},inputContainer:{display:"flex",width:t},inputAdormentContainer:{alignItems:"center",bottom:0,display:"flex",justifyContent:"center",position:"absolute",right:0,top:0,textAlign:"center",width:k,color:e.palette.text.secondary},inputAlertContainer:{color:e.palette.error.main,display:"flex",padding:"0 4px"},inputAdormentIcon:{fontSize:e.typography.fontSizeDefault}})});var P=n(755755),D=n(686366),G=n(198022),R=n(346304);(i=u||(u={})).PartialCredit="partialCredit",i.Default="default",(s=p||(p={})).MinExceeded="cr.components.localizedPercentageInput.errors.minExceeded",s.MaxExceeded="cr.components.localizedPercentageInput.errors.maxExceeded",s.OutOfRange="cr.components.localizedPercentageInput.errors.outOfRange",s.MaxCharactersAllowed="cr.components.localizedPercentageInput.errors.maxCharactersAllowed",s.InvalidNumericFormat="cr.components.localizedPercentageInput.errors.invalidNumericFormat";let B=(e,t,n,i,s,r)=>e&&(0,D.p4)(e.toString())||!e&&t&&!n&&(0,D.p4)(t.toString())||!e&&n&&t&&(0,D.p4)(n.toString())?{status:!1,errorType:p.InvalidNumericFormat,errorParameters:null}:e&&(0,D.KJ)(e,s,r)||!e&&t&&(0,D.KJ)(Number(t),s,r)||t&&n&&(0,D.KJ)(Number(n),s,r)?{status:!1,errorType:p.OutOfRange,errorParameters:void 0!==s&&void 0!==r?{min:s,max:r}:null}:e&&(0,D.ew)(e,s,r)||!e&&t&&(0,D.ew)(Number(n),s,r)||t&&n&&(0,D.ew)(Number(n),s,r)?{status:!1,errorType:p.MinExceeded,errorParameters:void 0!==s?{min:s}:null}:e&&(0,D.Sg)(e,s,r)||!e&&n&&(0,D.Sg)(Number(n),s,r)?{status:!1,errorType:p.MaxExceeded,errorParameters:void 0!==r?{max:r}:null}:!e&&t&&(0,D.Sg)(Number(t),s,r)?{status:!1,errorType:p.MinExceeded,errorParameters:void 0!==s?{min:s}:null}:e&&(0,D.yi)(e.toString())||!e&&n&&(0,D.yi)(n)?{status:!1,errorType:p.MaxExceeded,errorParameters:void 0!==r?{max:r}:null}:!e&&t&&n&&(0,D.yi)(t)?{status:!1,errorType:p.MinExceeded,errorParameters:void 0!==s?{min:s}:null}:e&&(0,D.y1)(e.toString(),i)?{status:!1,errorType:p.InvalidNumericFormat,errorParameters:null}:!e&&n&&(0,D.y1)(n.toString(),i)?{status:!1,errorType:p.MaxExceeded,errorParameters:void 0!==r?{max:r}:null}:{status:!0,errorType:null,errorParameters:null},L=(e,t,n,i,s)=>{let r=(0,R.AO)(e),o=s.number.getDecimalStringSync(t),a=(0,R.nM)(r)?1:0,l=(0,R.U_)(r,o)?1:0,c=(0,R.Lk)(r,a,l,n,t,i);return c},N=e=>e===u.PartialCredit?T:x,O=({initialValue:e,onChange:t,ariaLabel:n,ariaDescribedBy:i,analyticsIdPrefix:s,disabled:r=!1,placeholder:o,displayWesternNumbers:a=!0,min:l,max:c,customInputProps:d,showInputAsInvalid:u=!1,outOfRangeErrorMessage:m})=>{let{locale:h,babelfishFormat:g,translate:f,parseNumber:b}=(0,P.h)(),[v,y]=(0,S.useState)(!0),[A,k]=(0,S.useState)(!1),[x,T]=(0,S.useState)(""),[D]=(0,S.useState)(()=>(0,G.v4)()),R=(0,S.useRef)(null),O=N(null==d?void 0:d.customTheme),M=O(),$=`${s}.input`,H=`${s}.tooltip`,F=!u&&!v&&A,U=!0===u?u:!v,V=e=>{var t,n;let i=null!==(n=null===(t=null==R?void 0:R.current)||void 0===t?void 0:t.value)&&void 0!==n?n:"",s=L(i,h,b,a,g),r=s&&(null==s?void 0:s.value)!==void 0&&!isNaN(null==s?void 0:s.value)?null==s?void 0:s.value.toString():null;return B(e,i,r,16,l,c)};return E().createElement("div",{className:M.root},E().createElement(I.AnalyticsTooltip,{id:D,analyticsId:H,placement:"bottom",title:E().createElement("div",{role:"tooltip",className:M.tooltipContainer,id:D},E().createElement("p",{className:M.tooltipMessageContainer},x)),open:F,PopperProps:{"aria-live":"polite"}},E().createElement("div",{className:M.inputContainer},E().createElement(C.lv,{className:M.input,ariaLabel:n,analyticsId:$,disabled:r,inputRef:R,placeholder:o,value:void 0===e?null:e,error:U,displayWesternNumbers:a,validate:e=>{let{status:t,errorType:n,errorParameters:i}=V(e);if(y(t),t)return T(""),t;if(n&&!i&&T(f(n)),n&&i){if(n===p.OutOfRange&&m)return T(m(i)),t;T(f(n,i))}return t},onChange:e=>{let{status:n}=V(e);null==t||t(e,n)},title:F?void 0:x,ariaDescribedBy:null!=i?i:F?D:void 0,hideErrorMessage:!0,onFocus:()=>{k(!0)},onBlur:()=>{k(!1)}}))),E().createElement("div",{className:M.inputAdormentContainer},U&&E().createElement("div",{className:M.inputAlertContainer},E().createElement(w.Attention,{"aria-hidden":!0,className:M.inputAdormentIcon})),!U&&E().createElement("div",{"aria-hidden":!0,className:M.inputAdormentIcon},"%")))},M={width:"100%",flex:"1",flexGrow:"1",padding:"8px 24px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},$=(0,A.makeStyles)(e=>(0,A.createStyles)({root:{display:"flex",height:"100%",marginBottom:"10px",boxShadow:`inset 0 -1px 0 0 ${e.palette.border.main}`,"& .backNavButton":{...M,justifyContent:"flex-start"},"& .forwardNavButton":{...M,justifyContent:"flex-end"},"& $currentSlideHeader":{fontSize:e.typography.fontSizeXLarge,margin:0,[e.breakpoints.up("sm")]:{fontWeight:e.typography.fontWeightLight,fontSize:e.typography.fontSizeXXLarge}},"& .adjacentSlideLabel":{fontWeight:e.typography.fontWeightLight,display:"none",[e.breakpoints.up("sm")]:{display:"inline-block"}}},disabledNavButton:{visibility:"hidden"},backIcon:{marginRight:"24px"},forwardIcon:{marginLeft:"24px"},currentSlideHeader:{[e.breakpoints.up("sm")]:{flex:"1"},textAlign:"center",padding:"16px",flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},hiddenLiveRegion:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",border:"0",selectors:{clip:"rect(0,0,0,0)"}},indicator:{height:"8px",width:"8px",borderRadius:"50%",backgroundColor:e.palette.indicatorPrimary.main,display:"inline-block",position:"absolute",top:"calc(50% - 20px)",border:`1px solid ${e.palette.indicatorPrimary.contrastText}`},indicatorForward:{right:"20px"},indicatorBackward:{left:"20px"}}));var H=n(927335),F=n(906277);let U=e=>{var t,n,i;let{slides:s,onSlideChangeMessage:r,analyticsId:o,slideIndex:a=0,onSlideChange:l}=e,c=S.useRef(null);S.useEffect(()=>{var e;null===(e=c.current)||void 0===e||e.focus()},[a]);let d=S.useCallback(()=>{l(-1)},[l]),u=S.useCallback(()=>{l(1)},[l]),p=$(e),m=s[a],h=s[a-1],g=s[a+1],f=!h||!h.name,b=!g||!g.name;return S.createElement("div",{"data-analytics-id":o},S.createElement("div",{className:(0,F.Z)("carousel",p.root)},S.createElement(I.AnalyticsIconButton,{onClick:d,disabled:f,analyticsId:`${o}.backButton`,className:(0,F.Z)("backNavigationButton","backNavButton",{[p.disabledNavButton]:f}),"aria-label":(null==h?void 0:h.name)||"disabled-back-button"},(null==h?void 0:h.indicator)&&S.createElement("span",{className:(0,F.Z)("indicatorBackward",p.indicator,p.indicatorBackward)}),S.createElement(H.BackArrow,{className:p.backIcon}),S.createElement("span",{className:"adjacentSlideLabel"},null!==(t=null==h?void 0:h.name)&&void 0!==t?t:"")),S.createElement("h2",{className:(0,F.Z)("currentSlideHeader",p.currentSlideHeader),ref:c},null!==(n=null==m?void 0:m.name)&&void 0!==n?n:""),S.createElement(I.AnalyticsIconButton,{onClick:u,disabled:b,analyticsId:`${o}.nextButton`,className:(0,F.Z)("forwardNavigationButton","forwardNavButton",{[p.disabledNavButton]:b}),"aria-label":(null==g?void 0:g.name)||"disabled-forward-button"},S.createElement("span",{className:"adjacentSlideLabel"},null!==(i=null==g?void 0:g.name)&&void 0!==i?i:""),S.createElement(H.ForwardArrow,{className:p.forwardIcon}),(null==g?void 0:g.indicator)&&S.createElement("span",{className:(0,F.Z)("indicatorForward",p.indicator,p.indicatorForward)}))),null==m?void 0:m.getContent(),S.createElement(I.AnalyticsOffScreenAnnouncement,{changeTrigger:a,message:r(a),className:`${p.hiddenLiveRegion}`,analyticsId:`${o}.hiddenLiveRegion`}))};var V=n(270850);let _="click-to-invoke-container",q="click-to-invoke-ref",z=e=>{let{className:t,elementToClickRef:n,children:i,...s}=e,r=(0,S.useRef)(null);return E().createElement("div",{className:(0,F.Z)(_,t),onClick:e=>{var t,i,s;null===(t=n.current)||void 0===t||t.classList.add(q);let o=(0,V.hD)(e.target,_,q);o===r.current&&(null===(i=n.current)||void 0===i||i.click()),null===(s=n.current)||void 0===s||s.classList.remove(q)},ref:r,...s},i)};var W=n(120675),j=n(410628),Z=n(31307);let K=(0,A.makeStyles)(()=>(0,A.createStyles)({root:{height:"273px",position:"relative",width:"100%"}})),X=(e,t)=>{switch(t){case Z.s.ArrowLeft:{let t=e.x-25;return{x:t,y:e.y}}case Z.s.ArrowRight:{let t=e.x+25;return{x:t,y:e.y}}case Z.s.ArrowUp:{let t=e.y-25;return{x:e.x,y:t}}case Z.s.ArrowDown:{let t=e.y+25;return{x:e.x,y:t}}default:return e}},Y=e=>e===Z.s.ArrowLeft||e===Z.s.ArrowRight||e===Z.s.ArrowUp||e===Z.s.ArrowDown,Q=({aspect:e,image:t,zoom:n,objectFit:i,onCropComplete:s})=>{let r=(0,j.q)(),o=K(),[a,l]=S.useState({x:0,y:0}),[c,d]=S.useState(!1),u=S.useCallback(e=>{let t=e.nativeEvent.code;Y(t)&&(d(!0),l(e=>X(e,t)))},[d]),p=S.useCallback((e,t)=>{c&&(s(e,t),d(!1))},[c,d,s]);return S.createElement("div",{className:o.root,tabIndex:0,onClick:e=>e.currentTarget.focus(),onKeyDown:u},S.createElement("span",{className:"sr-only"},r("cr.components.imageCrop.moveImageAriaLabel")),S.createElement(W.Z,{crop:a,onCropChange:l,onCropAreaChange:p,onCropComplete:s,aspect:e,image:t,zoom:n,restrictPosition:!0,objectFit:i}))},J=(0,A.makeStyles)(e=>(0,A.createStyles)({root:{display:"flex",backgroundColor:e.palette.background.b2,flexDirection:"column",padding:"0 20px 24px",[e.breakpoints.up("sm")]:{padding:"22px 30px 24px 90px",flexDirection:"row",alignItems:"flex-start"}},stats:{display:"flex"},summaryStat:{flex:"1",margin:"20px 24px",display:"inline-flex",flexDirection:"column",[e.breakpoints.up("sm")]:{flex:"auto",margin:"0 25px"}},number:{fontSize:e.typography.fontSizeDefault,fontWeight:e.typography.fontWeightBold,[e.breakpoints.up("sm")]:{fontSize:e.typography.fontSizeXLarge}},label:{textTransform:"uppercase",fontSize:e.typography.fontSizeSmall,fontWeight:e.typography.fontWeightSemiBold},postButton:{alignSelf:"center",width:"90%",[e.breakpoints.up("sm")]:{marginInlineStart:"auto",width:"fit-content"}}})),ee=e=>{let{participation:t,participationToGrade:n,gradesToPost:i,postButton:s}=e.summary,r=J(e),{formatNumber:o}=(0,P.h)();return S.createElement("div",{className:r.root},S.createElement("div",{className:r.stats},S.createElement("div",{className:(0,F.Z)("summary-statistic",r.summaryStat)},S.createElement("div",null,S.createElement("span",{className:r.number},t.studentsParticipating)),S.createElement("span",{className:r.label},t.key)),n&&S.createElement("div",{className:(0,F.Z)("summary-statistic",r.summaryStat)},S.createElement("span",{className:r.number},o(n.count)),S.createElement("span",{className:r.label},n.key)),i&&S.createElement("div",{className:(0,F.Z)("summary-statistic",r.summaryStat)},S.createElement("span",{className:r.number},o(i.count)),S.createElement("span",{className:r.label},i.key))),i&&i.count>0&&S.createElement(I.AnalyticsDefaultButton,{analyticsId:s.analyticsId,className:(0,F.Z)("post-all-grades",r.postButton),onClick:s.onClick},s.label))},et="38px",en=(0,A.makeStyles)(e=>(0,A.createStyles)({backdrop:{backgroundColor:e.palette.brand.main},source:{position:"relative",mixBlendMode:"screen"},contents:{position:"absolute",top:"0",left:"0",width:"100%",height:et,display:"flex",alignItems:"center",justifyContent:"center",mixBlendMode:"difference","& *":{color:e.palette.common.white}},root:{height:et,borderRadius:"0px",backgroundColor:e.palette.common.white},bar:{border:"none",borderRadius:"0px",backgroundColor:e.palette.common.black}})),ei=e=>{let t=en(),{bar:n,root:i}=t,{children:s,variant:r,...o}=e;return S.createElement("div",{className:t.backdrop},S.createElement("div",{className:t.source},S.createElement(I.AnalyticsLinearProgress,{classes:{bar:n,root:i},variant:"determinate",...o}),S.createElement("div",{className:t.contents},s)))};(r=m||(m={})).Probably="probably",r.Maybe="maybe",r.Empty="";let es=(e="",t=document.createElement("audio"))=>null!=t&&!!t.canPlayType&&t.canPlayType(e)===m.Probably,er=e=>{let[t,n]=S.useState(!1);return S.useEffect(()=>{n(es(e))},[e]),t},eo=e=>{let{analyticsId:t,children:n,mimeType:i,placement:s,title:r}=e;return er(i)?n:S.createElement(I.AnalyticsTooltip,{analyticsId:`${t}.mediaCompatibilityCheck.tooltip`,title:r,placement:s},S.createElement("div",null,n))},ea=(0,A.makeStyles)(e=>(0,A.createStyles)({root:{display:"inherit"}})),el=e=>{var t;let n=ea(),{components:i,onEnd:s}=e,[r,o]=S.useState(0),a=S.useRef(),l=()=>{var e;a.current=setTimeout(()=>{r<i.length-1?o(r+1):s&&s()},null===(e=i[r])||void 0===e?void 0:e.duration)};return S.useEffect(()=>{var e,t,n,s;return(null==i?void 0:i.length)>0&&(null===(t=null===(e=null==i?void 0:i[r-1])||void 0===e?void 0:e.onHide)||void 0===t||t.call(e),null===(s=null===(n=i[r])||void 0===n?void 0:n.onShow)||void 0===s||s.call(n),l()),()=>{a.current&&clearTimeout(a.current)}},[r]),S.createElement("div",{className:n.root,"aria-live":"polite"},null===(t=null==i?void 0:i[r])||void 0===t?void 0:t.component)},ec=(e,t,n=0)=>{let i=[];if(t-n<0)return i;for(let s=t;s>=n;s-=1e3)i.push({component:e(s/1e3),duration:1e3});return i},ed=e=>t=>S.createElement(I.AnalyticsTypography,{component:"span"},e(t)),eu=e=>{let{Progress:t=I.AnalyticsLinearProgress,initialDuration:n,initialTimestep:i=100,children:s,ariaLabel:r}=e,[o,a]=S.useState(0);return S.useEffect(()=>{let e=0,t=setInterval(()=>{(e+=i)>=n&&clearInterval(t),a(Math.min(100,Math.floor(e/n*100)))},i);return()=>{clearInterval(t)}},[]),S.createElement(t,{analyticsId:"components-react.timed-progress",ariaLabel:r,value:o},s)};var ep=n(248994);(o=h||(h={}))[o.ReadyToRecordDisabled=0]="ReadyToRecordDisabled",o[o.ReadyToRecord=1]="ReadyToRecord",o[o.PreRecording=2]="PreRecording",o[o.Recording=3]="Recording",o[o.ReadyToPlay=4]="ReadyToPlay";let em=(e=h.ReadyToRecord)=>{let[t,n]=S.useState(e),[i]=S.useState(()=>G.v4());S.useEffect(()=>{if(!(i.length<=0))return ep.m.getInstance().addTimedDisplay(i,(e,t)=>{i!==e&&n(t?h.ReadyToRecordDisabled:h.ReadyToRecord)}),()=>ep.m.getInstance().removeTimedDisplay(i)},[i]);let s=S.useCallback(()=>{[h.ReadyToRecord,h.Recording].includes(t)||(ep.m.getInstance().stopTimedDisplay(i),n(h.ReadyToRecord))},[t,i]),r=S.useCallback(()=>{if(t===h.ReadyToRecord){let e=ep.m.getInstance().startTimedDisplay(i);e&&n(h.PreRecording)}},[t,i]),o=S.useCallback(()=>{t===h.PreRecording&&n(h.Recording)},[t]),a=S.useCallback(()=>{t===h.Recording&&(ep.m.getInstance().stopTimedDisplay(i),n(h.ReadyToPlay))},[t,i]),l=t===h.Recording;return{state:t,onReadyToRecordShow:s,onPreRecordingShow:r,onRecordingShow:o,onReadyToPlayShow:a,isRecording:l}},eh=(0,A.makeStyles)(e=>(0,A.createStyles)({root:{padding:"10px"},label:{paddingTop:"1px"}})),eg=e=>{let{analyticsId:t,onClick:n,title:i,disabled:s}=e,r=(0,j.q)(),o=eh();return S.createElement(I.AnalyticsIconButton,{className:o.root,analyticsId:`${t}.record.button`,onClick:n,disabled:s},S.createElement(w.AudioOn,null),S.createElement(I.AnalyticsTypography,{className:o.label,component:"span",variant:"inherit"},null!=i?i:r("cr.components.audioRecording.recordButtonLabel")))},ef=(0,A.makeStyles)(e=>(0,A.createStyles)({prerecordingMessage:{backgroundColor:e.palette.brand.main,"& *":{color:e.palette.common.white}},wrapperOuter:{width:"100%",display:"flex",justifyContent:"space-between"},wrapperInner:{display:"flex",alignItems:"center","& > svg":{margin:"0 4px 0 10px"}}}));var eb=n(553493);let ev=(0,A.makeStyles)(e=>(0,A.createStyles)({container:{display:"flex",justifyContent:"space-between",pointerEvents:"auto"},button:{padding:"10px"},icon:{color:e.palette.brand.main}}));(a=g||(g={}))[a.Loading=0]="Loading",a[a.ReadyToPlay=1]="ReadyToPlay",a[a.Playing=2]="Playing";let ey=[g.Loading],eC=(e=g.Loading)=>{let[t,n]=S.useState(e),i=S.useCallback(()=>{t!==g.Loading&&n(g.Loading)},[t]),s=S.useCallback(()=>{t!==g.ReadyToPlay&&n(g.ReadyToPlay)},[t]),r=S.useCallback(()=>{t!==g.Playing&&n(g.Playing)},[t]);return{state:t,onLoadingShow:i,onReadyToPlayShow:s,onPlayingShow:r}},eS=e=>{let{analyticsId:t,ariaLabel:n,children:i,className:s,label:r,src:o,mimeType:a=eb.e$}=e,l=ev(e),c=(0,j.q)(),{state:d,onReadyToPlayShow:u,onPlayingShow:p}=eC(),m=ey.includes(d),h=S.useRef(null),g=er(a),[f,b]=S.useState(!1),v=S.useCallback(e=>{var t;e.preventDefault(),e.stopPropagation(),p(),null===(t=h.current)||void 0===t||t.play()},[p,h]),y=S.useCallback(e=>{console.error(e.type,": Loading audio."),g||b(!0)},[g]);return S.createElement("div",{className:(0,F.Z)(l.container,"bb-audio-player",s)},S.createElement("audio",{ref:h,src:o,onLoadedMetadata:u,onEnded:u,onError:y,preload:"metadata",tabIndex:-1}),S.createElement(eo,{analyticsId:t,title:c("cr.components.audioRecording.playbackUnsupported"),placement:"top",mimeType:a},S.createElement(I.AnalyticsIconButton,{analyticsId:`${t}.audio.play.button`,"aria-label":r?void 0:null!=n?n:c("cr.components.audioPlayer.playLabel"),className:l.button,disabled:m||f,onClick:v},S.createElement(w.Volume,{className:l.icon}),!!r&&S.createElement(I.AnalyticsTypography,{component:"span",variant:"inherit"},r))),i)},eE=(0,A.makeStyles)(e=>(0,A.createStyles)({icon:{color:e.palette.brand.main}})),eI=e=>{let t=eE(),{analyticsId:n,...i}=e;return S.createElement(I.AnalyticsIconButton,{analyticsId:`${n}.clearAudio.button`,...i},S.createElement(w.Clear,{className:t.icon}))};var ew=n(579633);let eA=e=>{var t,n,i;let s=ef(),{translate:r,formatComposedDuration:o}=(0,P.h)(),{onAudioDeleted:a,playLabel:l,progressLabel:c,recordLabel:d,recordingSession:u,src:p}=e,m=null===(t=u.recorderOptions)||void 0===t?void 0:t.mimeType,g=er(m),[f,b]=S.useState(!1),[v,y]=S.useState(!1),C=`${e.analyticsId}.audio.recorder`,E=null!==(i=null===(n=u.recordingOptions)||void 0===n?void 0:n.maxDuration)&&void 0!==i?i:6e5,{state:A,isRecording:k,onReadyToRecordShow:x,onPreRecordingShow:T,onRecordingShow:D,onReadyToPlayShow:G}=em(p?h.ReadyToPlay:h.ReadyToRecord),R=S.useCallback(()=>{b(!1)},[]),B=S.useCallback(async()=>{y(!1);try{await u.onEnableRecording(),T()}catch(e){b(!0)}},[u,b,T]),L=S.useCallback(async()=>{if(k){await u.onRecordStop(),G();return}x()},[u,k,G]),N=S.useCallback(async()=>{x(),a(),y(!0)},[a,x]),O=()=>S.createElement(I.AnalyticsIconButton,{className:"stop-audio-recording","aria-label":r("cr.components.audioRecording.stopInProgressRecording"),analyticsId:`${C}.stop.button`,onClick:L},S.createElement(w.Stop,null)),M=e=>S.createElement("div",{className:s.wrapperInner},S.createElement(w.AudioOn,null),S.createElement(I.AnalyticsTypography,{component:"span"},e));switch(A){case h.PreRecording:return S.createElement("div",{className:s.prerecordingMessage},S.createElement("div",{className:s.wrapperOuter},S.createElement(el,{components:[(()=>{let e=r("cr.components.audioRecording.introMessage",{seconds:E/1e3});return{component:M(e),duration:(0,V.Lt)(e)}})(),...ec(e=>M(r("cr.components.audioRecording.countdown",{seconds:e})),3e3,1e3)],onEnd:()=>{D(),u.onRecordStart()}}),O()));case h.Recording:return S.createElement(eu,{ariaLabel:null!=c?c:r("cr.components.audioRecording.progressBarAriaLabel"),Progress:ei,initialDuration:E},S.createElement("div",{className:s.wrapperOuter},S.createElement("div",{className:s.wrapperInner},S.createElement(w.AudioOn,null),S.createElement(I.AnalyticsTypography,{component:"span","aria-live":"polite"},r("cr.components.audioRecording.recording"))),S.createElement("div",{className:s.wrapperInner},S.createElement(el,{components:ec(ed(e=>r("cr.components.audioRecording.recordingTimer",{timer:o(e,ew.ILocaleComposedDurationFormat.MinutesSeconds)})),E),onEnd:G}),O())));case h.ReadyToPlay:return S.createElement(eS,{analyticsId:C,label:null!=l?l:r("cr.components.audioPlayer.playLabel"),src:p},S.createElement(eI,{analyticsId:C,"aria-label":r("cr.components.audioRecording.clearAudioAriaLabel"),onClick:N}));case h.ReadyToRecord:case h.ReadyToRecordDisabled:default:return S.createElement(S.Fragment,null,S.createElement(eo,{analyticsId:C,title:r("cr.components.audioRecording.recordingUnsupported"),placement:"left",mimeType:m},S.createElement(I.AnalyticsClickAwayListener,{analyticsId:`${C}.record.button.clickAwayListener`,onClickAway:R},S.createElement("div",null,S.createElement(I.AnalyticsTooltip,{analyticsId:`${C}.record.button.blocked.tooltip`,title:r("cr.components.audioRecording.recordingBlocked"),placement:"left",onClose:R,open:f,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0},S.createElement("div",null,S.createElement(eg,{title:d,analyticsId:C,onClick:B,disabled:A===h.ReadyToRecordDisabled||!g})))))),v&&S.createElement(I.AnalyticsOffScreenAnnouncement,{analyticsId:C,type:"polite",message:r("cr.components.audioRecording.recordingDeleted")}))}},ek=(0,A.makeStyles)(()=>(0,A.createStyles)({searchInputControl:{margin:"0 !important",borderStyle:"unset !important",boxShadow:"unset !important",height:"40px !important"}})),ex=e=>{var t;let n=(0,j.q)(),i=ek();return S.createElement(I.AnalyticsISearchBox,{clearButtonAriaLabel:n("cr.components.searchBox.clearButtonAriaLabel"),...e,InputProps:{...null==e?void 0:e.InputProps,inputProps:{className:i.searchInputControl,...null===(t=null==e?void 0:e.InputProps)||void 0===t?void 0:t.inputProps}}})};var eT=n(851493),eP=n(589375);let eD=(0,A.makeStyles)(e=>(0,A.createStyles)({root:{margin:"0",padding:"0",'& div[x-placement="top"]':{borderTop:`1px solid ${e.palette.background.b5}`,borderBottom:"none"},'& div[x-placement="bottom"]':{borderTop:"none",borderBottom:`1px solid ${e.palette.background.b5}`}},pageDropdownButton:{background:e.palette.common.white,borderRadius:"2px",boxShadow:"none",border:`1px solid ${e.palette.border.main}`,margin:"0 8px",padding:"7px 3px",fontWeight:e.typography.fontWeightRegular,minWidth:"10px","&::after":{content:'""',borderTopColor:e.palette.background.b9,width:"0",display:"inline-block",verticalAlign:"middle",height:"12px",borderWidth:"6px 4px 0 4px",border:"7px solid transparent",margin:"0 10px",position:"relative",top:"2px"},"&:hover":{background:"none",border:`1px solid ${e.palette.border.dark}`},"& span":{padding:"0 0 0 10px","&::after":{content:'""',borderRight:`1px solid ${e.palette.background.b5}`,width:"10px",height:"25px"}}},pageDropdownPopper:{zIndex:10,borderLeft:`1px solid ${e.palette.background.b5}`,borderRight:`1px solid ${e.palette.background.b5}`},pageDropdownMenuList:{maxHeight:"216px",width:"62px",overflow:"scroll"}})),eG={flip:{enabled:!0},preventOverflow:{enabled:!0,boundariesElement:"#page-selector-menu"},hide:{enabled:!0}},eR=e=>{let[t,n]=E().useState(!1),i=E().useRef(null),s=E().useRef(null),{items:r,value:o,onChange:a,getOnChangeAnnouncement:l,buttonAriaLabel:c,elementSelectorToFocus:d,analyticsId:u,className:p,disabled:m}=e,h=(0,j.q)(),g=eD(e),f=d?document.querySelector(d):null,b=(0,F.Z)(g.pageDropdownButton,p&&`${p}-button`),v=(0,F.Z)(g.pageDropdownMenuList,p&&`${p}-dropdown-menu-list`),y=(0,S.useCallback)(()=>{n(!1)},[]),C=(0,S.useCallback)(()=>{n(!t)},[t]);function w(e){var t;a(e),y(),f?(0,V.bx)(f):null===(t=i.current)||void 0===t||t.focus({preventScroll:!1})}let A=(e,t)=>{var n;"Escape"===e.key&&(e.stopPropagation(),y(),null===(n=i.current)||void 0===n||n.focus({preventScroll:!0})),("Enter"===e.key||" "===e.key)&&(e.stopPropagation(),w(t))};return E().useEffect(()=>{let e;return t&&(e=setTimeout(()=>{var e;null===(e=s.current)||void 0===e||e.focus({preventScroll:!0})},125)),function(){clearTimeout(e)}},[t]),E().createElement("div",{className:g.root},E().createElement(I.AnalyticsDefaultButton,{ref:i,className:b,"aria-controls":t?"page-selector-menu":void 0,"aria-haspopup":"menu","aria-expanded":t,onClick:C,disabled:m,"aria-label":c||h("cr.components.pagination.pagination.dropdownButtonAriaLabel",{currentPage:o.label,lastPage:r.length}),analyticsId:`${u}.button`},o.label),E().createElement(I.AnalyticsPopper,{anchorEl:i.current,open:t,transition:!0,disablePortal:!0,placement:"bottom",className:g.pageDropdownPopper,id:"page-selector-menu",role:t?void 0:"menu",modifiers:eG,analyticsId:`${u}.popper`},E().createElement(I.AnalyticsPaper,{analyticsId:`${u}.paper`},E().createElement(I.AnalyticsClickAwayListener,{onClickAway:y,analyticsId:`${u}.clickAwayListener`},E().createElement(I.AnalyticsMenuList,{className:v,disableListWrap:!0,analyticsId:`${u}.menuList`},r.map((e,t)=>E().createElement(I.AnalyticsMenuItem,{button:!0,key:e.value,selected:e.value===o.value,"aria-selected":e.value===o.value,onClick:()=>w(e),value:e.value,"data-label":e.label,ref:e=>s.current=0===t?e:s.current,onKeyDown:t=>A(t,e),analyticsId:`${u}.menuItem`},e.label)))))),E().createElement(I.AnalyticsOffScreenAnnouncement,{analyticsId:`${u}.offScreenAnnouncement`,type:"polite",message:l(o.label,r.length),changeTrigger:o.label}))},eB=(0,A.makeStyles)(e=>(0,A.createStyles)({root:{display:"flex",alignItems:"center",justifyContent:"center"},paginationLabel:{margin:"0 8px",display:"flex",alignItems:"center",fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.fontSizeDefault}})),eL=e=>{let t=[];for(let n=0;n<e;n+=1)t.push(n);return t},eN=e=>{let{numberOfPages:t,onPageChange:n,page:i,analyticsId:s,elementSelectorToFocus:r,className:o,compact:a,disabled:l}=e,{translate:c,formatNumber:d}=(0,P.h)(),u=eL(t),p=(0,V.fw)(u,d,1),m=eB(e),h=S.createElement(eR,{onChange:e=>n(Number(e.value)),getOnChangeAnnouncement:(e,t)=>c("cr.components.pagination.pagination.dropdownButtonAriaLabel",{currentPage:e,lastPage:t}),disabled:l,items:p,value:{value:String(i),label:d(i+1)},analyticsId:`${s}.components.common.pagination.pageSelectDropdown`,className:o,elementSelectorToFocus:r}),g=S.createElement(I.AnalyticsIconButton,{disabled:0===i||l,onClick:()=>n(i-1),className:"js-pagination-page-down-button",analyticsId:`${s}.components.common.pagination.pageDownButton`,"aria-label":c("cr.components.pagination.pagination.prevPageButton")},S.createElement(eT.s,null));return S.createElement("div",{className:(0,F.Z)(m.root,"js-pagination-container",o)},a&&g,S.createElement("div",{className:m.paginationLabel,id:"components-common-pagination-page"},c("cr.components.pagination.pagination.pageCount",{paginationDropdownComponent:h,pageCount:u.length})),!a&&g,S.createElement(I.AnalyticsIconButton,{disabled:i===u.length-1||l,onClick:()=>n(i+1),className:"js-pagination-page-up-button",analyticsId:`${s}.components.common.pagination.pageUpButton`,"aria-label":c("cr.components.pagination.pagination.nextPageButton")},S.createElement(eP._,null)))},eO=e=>{let{totalItems:t,rangeStart:n,rangeEnd:i,className:s}=e,r=(0,j.q)();return S.createElement("div",{className:(0,F.Z)(s)},r("cr.components.pagination.pageInformation.information",{totalItems:t,rangeStart:n,rangeEnd:i}))},eM=(0,A.makeStyles)(e=>(0,A.createStyles)({pageSizeContainer:{display:"flex",alignItems:"center"},inputLabel:{display:"inline-block",margin:"0",fontWeight:e.typography.fontWeightRegular}})),e$=e=>{let{pageSizeOptions:t,initialPageSize:n,analyticsId:i,className:s,onPageSizeChange:r,disabled:o}=e,{translate:a,formatNumber:l}=(0,P.h)(),c=(0,V.fw)(t,l),[d,u]=S.useState(()=>{let e=c.map(e=>e.value).indexOf(n);return c[Math.max(0,e)]}),p=eM();return S.createElement("div",{className:"page-size-component"},S.createElement("div",{className:(0,F.Z)(p.pageSizeContainer,s)},S.createElement(eR,{analyticsId:`${i}.components.pagination.pageSizeDropdown`,onChange:e=>{u(e),r(Number(e.value))},getOnChangeAnnouncement:(e,t)=>a("cr.components.pagination.pageSize.itemsPerPageAriaLabel.plural",{currentStudents:e}),disabled:o,value:d,items:c,className:s,buttonAriaLabel:a("cr.components.pagination.pageSize.itemsPerPageAriaLabel.plural",{currentStudents:d.value})}),S.createElement(I.AnalyticsInputLabel,{className:p.inputLabel,analyticsId:`${i}.components.pagination.pageSizeDropdown.label`},a("cr.components.pagination.pageSize.itemsPerPage"))))},eH=(0,A.makeStyles)(e=>(0,A.createStyles)({scrollUpContainer:{margin:"auto",marginRight:0,fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.fontSizeDefault,"& a":{color:"initial",textDecoration:"none",scrollBehavior:"smooth"}},[e.breakpoints.down("sm")]:{scrollUpContainer:{marginRight:"auto",lineHeight:"60px"}}})),eF=e=>{let{elementIdToBeScrolled:t,analyticsId:n}=e,i=(0,j.q)(),s=eH(e),r=S.useCallback(e=>(function(e,t){t.preventDefault();let n=document.querySelector(`#${e}`);(0,V.bx)(n)})(t,e),[t]);return S.createElement("div",{className:s.scrollUpContainer},S.createElement(I.AnalyticsLink,{href:"#",onClick:r,"aria-label":i("cr.components.scrollToElementButton.scrollAriaLabel"),analyticsId:`${n}.button`},S.createElement(w.UpArrow,{"aria-hidden":"true",role:"presentation"})," ",i("cr.components.scrollToElementButton.scrollTopList")))};var eU=n(142895);let eV=(0,A.makeStyles)(()=>(0,A.createStyles)({confirmationCalloutDialog:{"& .ms-Dialog-title":{padding:"0"},"& .ms-Dialog-footer":{paddingTop:"20px"}}}));var e_=n(844156);let eq=({analyticsId:e,calloutProps:t,target:n,onDismiss:i,onSuccess:s,textContent:r,isVisible:o})=>{let a=eV(),l=`${e}.confirmationCalloutDialog`,c=!1;return S.useEffect(()=>{o&&setTimeout(()=>{c=!0},1e3)},[o]),S.createElement(S.Fragment,null,o&&S.createElement(eU.Dialog,{onDismiss:e=>{((null==e?void 0:e.type)!=="scroll"||c)&&(null==i||i())},showAsCallout:!0,target:n,calloutProps:{ariaLabel:(null==t?void 0:t.ariaLabelledBy)?void 0:r.title,setInitialFocus:!0,preventDismissOnResize:!0,...t},dialogContentProps:{type:eU.DialogType.actionConfirmation,title:r.title,subText:r.body,showCloseButton:!1,className:a.confirmationCalloutDialog},analyticsId:l},S.createElement(eU.DialogFooter,null,S.createElement(e_.AnalyticsDefaultButton,{onClick:i,analyticsId:`${l}.secondaryButton`},r.secondaryButtonText),S.createElement(e_.AnalyticsPrimaryButton,{onClick:s,analyticsId:`${l}.primaryButton`}," ",r.primaryButtonText," "))))};var ez=n(797580);let eW=(0,A.makeStyles)(e=>(0,A.createStyles)({skipLink:{...ez.FR,fontSize:e.typography.fontSizeSmall,"&:active, &:focus, &:hover":{left:"0px",top:"0px",height:"auto",margin:"0px",clip:"auto",textAlign:"center",backgroundColor:e.palette.brand.main,color:e.palette.brand.contrastText,display:"block",width:"100%",zIndex:"9999",outline:"medium none"}}}));var ej=n(998426);let eZ=(e,t,n=!1)=>{let[i,s]=S.useState(!1),r=S.useCallback(e=>{let r=!n||!i,o="Tab"===e.code&&!e.shiftKey;if(r&&o&&t){let n=document.querySelector(t);n&&(n.focus(),e.preventDefault(),s(!0))}},[t,i,n]);S.useEffect(()=>{var t;return null===(t=e.current)||void 0===t||t.addEventListener("keydown",r),()=>{var t;null===(t=e.current)||void 0===t||t.removeEventListener("keydown",r)}},[e.current,r])},eK=e=>{let{customClassNames:t,focusNextSelector:n,targetSelector:i,text:s}=e,r=(0,j.q)(),o=eW((0,ej.Fg)()),a=(0,F.Z)(...t||[],o.skipLink),l=S.useRef(null),c=S.useCallback(()=>{var e,t;let n=l.current,s=null!==(t=null!==(e=null==n?void 0:n.closest(".bb-offcanvas-panel"))&&void 0!==e?e:null==n?void 0:n.closest("#site-wrap"))&&void 0!==t?t:document.body,r=null==s?void 0:s.querySelector(i);null==r||r.focus(),r&&!r.contains(document.activeElement)&&null==r.getAttribute("tabindex")&&(r.setAttribute("tabindex","-1"),r.focus())},[i]);return eZ(l,n),S.createElement(I.AnalyticsLink,{ref:l,href:"#",onClick:c,className:a,analyticsId:"components.accessibility.skip-link"},s||r("cr.components.accessibility.skipLink.message"))};var eX=n(609582),eY=n(692475),eQ=n(158550),eJ=n(664071),e0=n(165856),e1=n(958299);class e2 extends S.PureComponent{constructor(e){super(e),this.timePickerRef=null,this.timeInputRef=null,this.hourInputRef=null,this.getFormattedHour=e=>{let{is24HourMode:t}=this.state;return t?e:e%12==0?12:e%12},this.onToggleSpinner=()=>{this.setState(e=>({isDisplaySpinner:!e.isDisplaySpinner}))},this.getValueWithCurrentTime=()=>{let{value:e}=this.props;if(null==e)return new Date;let t=new Date;return e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e},this.onFocusTime=()=>{if(""!==this.state.timeStr)return;let{localize:e,onChangeValue:t}=this.props,n=this.getValueWithCurrentTime(),i=e.formatTime(n,ew.ILocaleTimeFormat.Short);this.updateTimePickerState(n,i),t(n)},this.onChangeTimeInput=e=>{let t=e.target.value;if(this.setState({timeStr:t}),""===t)return;e.persist();let{onValidateCallback:n,localize:i}=this.props;this.timeoutPromiseWrapper(i.parseTime,[t,ew.ILocaleTimeFormat.Short],i).then(e=>{if(e){n(!0);let t=new Date(e);this.updateTimePickerState(t)}else n(!1)})},this.onHandlerBlur=()=>{var e,t;let{is24HourMode:n}=this.state,{hour:i,minute:s,amPm:r}=this.state,{localize:o,onChangeValue:a,onValidateCallback:l}=this.props,{value:c}=this.props;if(""===this.state.timeStr){c=this.getValueWithCurrentTime();let e=c.getHours();if(!n&&this.meridianValues){let t=e<=11?this.meridianValues.am:this.meridianValues.pm;this.setState({amPm:t}),r=t}i=e.toString(),s=c.getMinutes().toString()}let d=new Date(c),u=Number(i),p=!1;if(!u&&0!==u){let e=o.parseNumber(i);p=!e&&0!==e,u=this.getFormattedHour(e||c.getHours())}let m=Number(s),h=!1;if(!m&&0!==m){let e=o.parseNumber(s);h=!e&&0!==e,m=e||c.getMinutes()}let g=0,f=u;if(!n&&this.meridianValues&&(f=u%12,-1===(g=o.getMeridianOffset(r)))){let e=11>=c.getHours()?this.meridianValues.am:this.meridianValues.pm;this.setState({amPm:e}),g=o.getMeridianOffset(e)}f<12&&12===g&&(f+=g),d.setHours(f),d.setMinutes(m);let b=this.timeoutPromiseWrapper(o.formatTime,[d,ew.ILocaleTimeFormat.Short],o).then(e=>{this.setState(t=>({timeStr:""!==t.timeStr?e:"",hour:p?o.formatNumber(u):t.hour,minute:h?o.formatNumber(m,{minimumIntegerDigits:2}):t.minute})),l(!0),a(d)});null===(t=(e=this.props).onDateTimeChanging)||void 0===t||t.call(e,b),setTimeout(()=>{var e;(null===(e=this.timePickerRef)||void 0===e?void 0:e.contains(document.activeElement))||this.closeSpinner()})},this.onTimeInputKeyPress=e=>{e.which===eJ.m.Enter&&this.closeSpinner()},this.timeoutPromiseWrapper=(e,t,n)=>new Promise(i=>{e.apply(this,t),setTimeout(()=>{let s=e.apply(n,t);i(s)})}),this.errorMessage=()=>{let{isValueValid:e,errorEmptyMessage:t,errorFormatMessage:n}=this.props;if(e||!n&&!t)return null;let i=n;if(!this.state.timeStr){if(!t)return null;i=t}return S.createElement("span",{className:"error-message"},S.createElement(w.Attention,null),i)},this.updateTimeInput=e=>{let{hour:t,minute:n,amPm:i}=this.state;this.setState({hour:(null==e?void 0:e.hour)||t,minute:(null==e?void 0:e.minute)||n,amPm:(null==e?void 0:e.amPm)||i})},this.closeSpinner=()=>{this.setState({isDisplaySpinner:!1})},this.state={timeStr:"",hour:"",minute:"",amPm:"",is24HourMode:!1,isDisplaySpinner:!1,tzShort:""}}componentDidMount(){let{localize:e,value:t,onValidateCallback:n}=this.props,i=new Date,s=this.timeoutPromiseWrapper(e.formatTimezone,[i,ew.ILocaleTimezoneFormat.Short],e),r=this.timeoutPromiseWrapper(e.getMeridianValues,[],e);Promise.all([s,r]).then(i=>{let s=i[1];this.meridianValues=s,this.setState({is24HourMode:s.use24Time,tzShort:i[0]}),t&&!this.state.timeStr&&this.timeoutPromiseWrapper(e.formatTime,[t,ew.ILocaleTimeFormat.Short],e).then(e=>{this.updateTimePickerState(t,e),n(!0)})})}componentDidUpdate(e,t){var n;let{localize:i,value:s,onValidateCallback:r}=this.props,o=(null==s?void 0:s.getTime())!==(null===(n=e.value)||void 0===n?void 0:n.getTime());if(s&&o){let e;let t=this.timeoutPromiseWrapper(i.formatTime,[s,ew.ILocaleTimeFormat.Short],i);this.meridianValues||(e=this.timeoutPromiseWrapper(i.getMeridianValues,[],i)),Promise.all([t,e]).then(e=>{let t=e[1];t&&(this.meridianValues=t,this.setState({is24HourMode:t.use24Time})),this.updateTimePickerState(s,e[0]),r(!0)})}s||s===e.value||(this.setState({timeStr:"",hour:"",minute:"",amPm:""}),r(!0));let{isDisplaySpinner:a}=this.state;t.isDisplaySpinner!==a&&a&&this.hourInputRef&&this.hourInputRef.focus()}updateTimePickerState(e,t){let{is24HourMode:n}=this.state,{localize:i}=this.props,s=Number(e.getMinutes()),r=Number(e.getHours()),o="";!n&&this.meridianValues&&(o=r<=11?this.meridianValues.am:this.meridianValues.pm,r=this.getFormattedHour(r)),this.setState(e=>({hour:i.formatNumber(r),minute:i.formatNumber(s,{minimumIntegerDigits:2}),amPm:null==o?void 0:o.toLocaleUpperCase(),timeStr:t||e.timeStr}))}render(){let{timeStr:e,hour:t,minute:n,isDisplaySpinner:i,tzShort:s,amPm:r,is24HourMode:o}=this.state,{disabled:a,localize:l,analyticsId:c,analyticsEventAugmentor:d,placeholder:u,ariaLabel:p,value:m,readonly:h,inputStyles:g}=this.props,f=`spinner-control ${r?"":"no-am-pm"}`,b=d(eQ.AnalyticsEventTypes.CLICK_EVENT,()=>{},c+".input.text"),v=d(eQ.AnalyticsEventTypes.CLICK_EVENT,()=>{},c+".hour.input.text"),y=d(eQ.AnalyticsEventTypes.CLICK_EVENT,()=>{},c+".minute.input.text"),C=d(eQ.AnalyticsEventTypes.CLICK_EVENT,()=>{},c+".amPm.input.text");return S.createElement("div",{className:"time-picker",ref:e=>this.timePickerRef=e,onBlur:this.onHandlerBlur,"data-analytics-id":c},S.createElement("div",{className:"calendar-input-container"},S.createElement("input",{type:"text",className:"time-input",value:e,onChange:this.onChangeTimeInput,ref:e=>this.timeInputRef=e,disabled:a,readOnly:h,style:g,onFocus:this.onFocusTime,onKeyPress:this.onTimeInputKeyPress,onClick:b,"data-analytics-id":`${c}.input.text`,placeholder:u||void 0,"aria-label":p||l.translate("cr.components.timePicker.time")}),S.createElement(e1.AnalyticsIconButton,{"aria-label":l.translate("cr.components.timePicker.toggleTimePicker"),className:"btn-date open-datepicker toggle-btn",disabled:a||h,onClick:this.onToggleSpinner,onFocus:this.onFocusTime,"aria-expanded":this.state.isDisplaySpinner,title:l.translate("cr.components.timePicker.toggleTimePicker"),analyticsId:c+".open.button"},S.createElement(w.Away,null)),this.errorMessage()),i&&S.createElement(eX.Callout,{className:"js-time-picker-callout",target:this.timeInputRef,doNotLayer:!0,directionalHint:5},S.createElement("div",{className:f,"aria-hidden":!i,role:"region","aria-label":l.translate("cr.components.timePicker.timePicker"),tabIndex:-1},S.createElement("div",{className:"spinners-hour-and-minute"},S.createElement(e0.v,{className:"spinner-hour",type:eJ.d.Hour,is24hr:o,onChangeValue:this.props.onChangeValue,closeSpinner:this.closeSpinner,updateTimeInput:this.updateTimeInput,value:t,onInputClick:v,inputRef:e=>this.hourInputRef=e,ariaLabel:{upButton:l.translate("cr.components.timePicker.increaseHour"),input:l.translate("cr.components.timePicker.hour"),downButton:l.translate("cr.components.timePicker.decreaseHour")},analyticsId:{upButton:`${c}.increaseHour.button`,input:`${c}.hour.input.text`,downButton:`${c}.decreaseHour.button`},date:m}),S.createElement("div",{className:"hour-min-separator"},l.translate("cr.components.timePicker.hourMinSeparator")),S.createElement(e0.v,{className:"spinner-min",type:eJ.d.Minute,is24hr:o,onChangeValue:this.props.onChangeValue,closeSpinner:this.closeSpinner,updateTimeInput:this.updateTimeInput,value:n,onInputClick:y,ariaLabel:{upButton:l.translate("cr.components.timePicker.increaseMinute"),input:l.translate("cr.components.timePicker.minute"),downButton:l.translate("cr.components.timePicker.decreaseMinute")},analyticsId:{upButton:`${c}.increaseMinute.button`,input:`${c}.minute.input.text`,downButton:`${c}.decreaseMinute.button`},date:m})),S.createElement(e0.v,{className:"spinner-ampm",type:eJ.d.AmPm,is24hr:o,onChangeValue:this.props.onChangeValue,closeSpinner:this.closeSpinner,updateTimeInput:this.updateTimeInput,value:r,onInputClick:C,ariaLabel:{upButton:l.translate("cr.components.timePicker.changeToAmPm"),input:l.translate("cr.components.timePicker.amPm"),downButton:l.translate("cr.components.timePicker.changeToAmPm")},analyticsId:{upButton:`${c}.changeAmPm.button`,input:`${c}.amPm.input.text`,downButton:`${c}.changeAmPm.button`},date:m})),S.createElement("hr",null),S.createElement("div",{className:"tz-offset"},S.createElement("span",null,s))))}}let e3=(0,eY.h)((0,eQ.withAnalytics)(e2)),e9=e=>S.createElement(I.AnalyticsSvgIcon,{analyticsId:"components-react.icons.accommodationColor",...e,fontSize:"small",x:"0px",y:"0px",viewBox:"0 0 10 10",enableBackground:"new 0 0 10 10"},S.createElement("polygon",{fill:"#C36FD3",stroke:"#822798",strokeLinejoin:"round",strokeMiterlimit:"10",points:"8.5,9.5 5,6.5 1.5,9.5 1.5,0.5  8.5,0.5 "}));n(64130);var e4=n(936961),e7=n(454976);let e5=(0,A.makeStyles)(e=>(0,A.createStyles)({root:{width:"100%"},keywordPickerComponent:{margin:0,width:"100%","& .ms-KeywordPicker-list":{margin:"10px 0 0 0",border:"none",display:"flex",flexDirection:"row","& li":{width:"auto",display:"block",minWidth:"50px","& .ms-TagItem":{backgroundColor:e.palette.background.b5,"& span":{display:"flex",fontSize:"14px",textAlign:"center",alignItems:"center",justifyContent:"center",fontWeight:e.typography.fontWeightRegular,fontFamily:e.typography.fontFamily},"& button":{padding:0,width:"auto",color:e.palette.common.black,paddingRight:"6px"}}}},"& .ms-KeywordPicker-label":{padding:0,color:e.palette.text.hint,fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.fontSizeDefault,fontFamily:e.typography.fontFamily,"&":{flip:!1,marginRight:"14px"}},'& label[class*="floatAbove"]':{color:"initial",fontWeight:e.typography.fontWeightSemiBold,padding:"0 3px"},"& .ms-KeywordPicker-input":{borderRadius:"2px",border:`1px solid ${e.palette.border.dark}`,fontSize:e.typography.fontSizeDefault,fontFamily:e.typography.fontFamily}},keywordPickerClearFiltersWrapper:{width:"100%",display:"flex",justifyContent:"flex-end"},keywordPickerClearFilters:{padding:0,border:"none",cursor:"pointer",color:e.palette.link.selected,backgroundColor:"transparent","&:hover":{textDecoration:"underline",backgroundColor:"transparent"}}})),e6=e=>{let t=S.useRef(null),{onFilterChanged:n,className:i,analyticsId:s}=e,r=(0,j.q)(),[o,a]=S.useState([]),l=S.useCallback(e=>{let t=null!=e?e:[];a(t),n(t)},[n]),c=S.useCallback(()=>{a([]),n([])},[n]),d=S.useCallback(e=>{var n;"Enter"===e.key&&(e.stopPropagation(),null===(n=t.current)||void 0===n||n.focus({preventScroll:!0}),c())},[c]),u=e5(e),p=o.length>0?r("cr.components.searchBar.cleanFiltersButton"):"",m=(0,F.Z)(u.root,i&&`${i}-keyword-picker-wrapper`),h=(0,F.Z)(u.keywordPickerComponent,i&&`${i}-keyword-picker-component`),g=(0,F.Z)(u.keywordPickerClearFiltersWrapper,i&&`${i}-keyword-picker-clear-filters-wrapper`),f=(0,F.Z)(u.keywordPickerClearFilters,i&&`${i}-keyword-picker-clear-filters`);return S.createElement("div",{className:m},S.createElement(e4.KeywordPicker,{ref:t,selectedItems:o,className:h,removeButtonAriaLabel:e=>r("cr.components.searchBar.removeButtonAriaLabel",{name:null==e?void 0:e.name}),inputLabel:r("cr.components.searchBar.label"),onRenderItem:e=>S.createElement(e7.TagItem,{...e},e.item.name),onChange:e=>l(e),getItemAddedStatusMessage:e=>r("cr.components.searchBar.addedToList",{text:e}),analyticsId:s}),o.length>0&&S.createElement("div",{className:g},S.createElement(I.AnalyticsDefaultButton,{className:f,onClick:c,onKeyDown:d,"aria-label":p,analyticsId:`${s}.clearFilters.button`},p)))},e8=e=>S.createElement(I.AnalyticsSvgIcon,{analyticsId:"components-react.icons.helfulLinkLayoutLeft",...e,width:"56",height:"28",viewBox:"0 0 56 28"},S.createElement("g",{fill:"none",fillRule:"evenodd"},S.createElement("g",{stroke:"currentcolor"},S.createElement("path",{d:"M26.498 27.5H1.502A1.002 1.002 0 0 1 .5 26.498V1.502C.5.949.948.5 1.502.5h24.996c.554 0 1.002.449 1.002 1.002v24.996c0 .553-.448 1.002-1.002 1.002z"}),S.createElement("path",{d:"M20.5 14.5a2 2 0 1 1-4.001-.001 2 2 0 0 1 4.001.001z"}),S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M.5 24.5l8-8 8 8 6-5 5 4M34.5 4.5h21M34.5 9.5h21M34.5 14.5h21M34.5 19.5h21M34.5 24.5h21"})))),te=e=>S.createElement(I.AnalyticsSvgIcon,{analyticsId:"components-react.icons.helfulLinkLayoutRight",...e,width:"56",height:"28",viewBox:"0 0 56 28"},S.createElement("g",{fill:"none",fillRule:"evenodd"},S.createElement("g",{stroke:"currentcolor"},S.createElement("path",{d:"M54.498 27.5H29.502a1.002 1.002 0 0 1-1.002-1.002V1.502C28.5.949 28.948.5 29.502.5h24.996c.554 0 1.002.449 1.002 1.002v24.996c0 .553-.448 1.002-1.002 1.002z"}),S.createElement("path",{d:"M48.5 14.5a2 2 0 1 1-4.001-.001 2 2 0 0 1 4.001.001z"}),S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M28.5 24.5l8-8 8 8 6-5 5 4M21.5 4.5H.5M21.5 9.5H.5M21.5 14.5H.5M21.5 19.5H.5M21.5 24.5H.5"})))),tt=e=>S.createElement(I.AnalyticsSvgIcon,{analyticsId:"components-react.icons.helpfulLinksLayoutText",...e,width:"56",height:"28",viewBox:"0 0 56 28"},S.createElement("g",{fill:"none",fillRule:"evenodd"},S.createElement("g",{stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round"},S.createElement("path",{d:"M24.5 4.5h-21M24.5 9.5h-21M24.5 14.5h-21M24.5 19.5h-21M24.5 24.5h-21M52.5 4.5h-21M52.5 9.5h-21M52.5 14.5h-21M52.5 19.5h-21M52.5 24.5h-21"}))));var tn=n(381306);let ti={email:!1,phone:!1,sanitizeHtml:!0,truncate:150},ts=({plainText:e,analyticsIdTagPrefix:t})=>{let n=e=>{let n=e.buildTag();return n.setAttr("analytics-id",`${t}.linkified-text.link`),n},i=S.useMemo(()=>tn.Df.link(e,{...ti,replaceFn:n}),[e]);return S.createElement("span",{dangerouslySetInnerHTML:{__html:i}})};var tr=n(539976);let to=e=>{let{menuOptions:t,optionClicked:n,analyticsIdPrefix:i,ariaLabel:s,isRtl:r,id:o,className:a}=e,[l,c]=S.useState(!1),d=S.useRef(null),u=e=>{n(e),c(!1)};return S.createElement(S.Fragment,null,t.length>0&&S.createElement("div",{id:o,className:a},S.createElement(I.AnalyticsIconButton,{analyticsId:`${i}.button`,key:`${i}.button`,"aria-label":s,ref:d,onClick:()=>c(e=>!e)},S.createElement(tr.Menu,null)),S.createElement(I.AnalyticsJssThemeProvider,{theme:"light",cssReset:"none",isRtl:r},S.createElement(I.AnalyticsMenu,{analyticsId:`${i}.menu`,anchorEl:d.current,open:l,onClose:()=>c(!1)},t.map(e=>S.createElement(I.AnalyticsMenuItem,{analyticsId:e.analyticsId,key:e.analyticsId,"aria-label":e.label,onClick:()=>u(e)},e.label))))))};var ta=n(303109);let tl=(0,A.makeStyles)(e=>(0,A.createStyles)({settingsButton:{[e.breakpoints.up("md")]:{minHeight:"unset",color:e.palette.text.primary},textDecoration:"none",margin:"auto"},settingsLink:{marginLeft:"10px"},iconLink:{verticalAlign:"sub"}})),tc=e=>{let{labelKey:t,analyticsId:n,action:i}=e,s=tl(),r=(0,ej.Fg)(),o=(0,j.q)(),a=(0,ej.ac)(r.breakpoints.up("md"));return S.createElement(S.Fragment,null,a&&S.createElement(I.AnalyticsLink,{className:s.settingsButton,color:"secondary",href:"javascript:void(0)","aria-label":o(t),onClick:i,analyticsId:n},S.createElement(w.Settings,{className:s.iconLink}),S.createElement(I.AnalyticsTypography,{component:"span",variant:"h4",className:s.settingsLink},o(t))),!a&&S.createElement(I.AnalyticsIconButton,{className:s.settingsButton,"aria-label":o(t),onClick:i,analyticsId:n},S.createElement(w.Settings,null)))};var td=n(120079);let tu=(0,A.makeStyles)(e=>(0,A.createStyles)({panelHeaderContainerRoot:t=>({borderBottom:`1px solid ${e.palette.border.main}`,height:"48px",backgroundColor:e.palette.background.b9,[e.breakpoints.up("sm")]:{height:"56px"},[e.breakpoints.up("md")]:{backgroundColor:e.palette.background.default,height:"107px"}}),containerWrapper:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center",margin:"0 5px",[e.breakpoints.up("md")]:{justifyContent:"center",alignItems:"flex-start",flexDirection:"column",margin:"0 30px"}},menuToggle:t=>({color:e.palette.secondary.main,marginRight:`${t.closeButtonWidth}px`,"&:hover":{color:e.palette.primary.contrastText}}),menuToggleWrapper:t=>({minWidth:t.menuToggleMinWidth?`${t.menuToggleMinWidth}px`:"inherit",display:"flex",justifyContent:"flex-start",flex:1,[e.breakpoints.up("md")]:{display:"none"}}),subHeader:{display:"none",[e.breakpoints.up("md")]:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},rightContentContainer:{marginLeft:"auto"},headingWrapperContainer:{width:"100%",display:"flex",overflow:"hidden",whiteSpace:"nowrap","& h1":{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},[e.breakpoints.up("md")]:{justifyContent:"space-between",width:"100%","& h1":{width:"fit-content"}}}})),tp=(e,t=!1)=>{S.useEffect(()=>{t&&e.current&&e.current.focus()},[e,t])},tm=e=>{let{subHeaderText:t,children:n,analyticsIdPrefix:i,showMenuToggleButton:s,menuToggleRef:r,readyToFocus:o,skipLinkClassName:a,skipLinkFocusNext:l,skipLinkTarget:c,settingsButtonProps:d}=e,u=(0,j.q)(),p=S.useRef(null);tp(p,o);let m=(0,ej.Fg)(),h=(0,ej.ac)(m.breakpoints.up("md")),g=tu({...e,closeButtonWidth:40});return S.createElement("div",{className:g.panelHeaderContainerRoot},S.createElement("div",{className:g.containerWrapper},S.createElement("div",{className:g.subHeader},S.createElement("div",null,t),S.createElement("div",{className:g.rightContentContainer},d&&h&&S.createElement(tc,{...d}))),S.createElement("div",{className:g.menuToggleWrapper},s&&S.createElement(I.AnalyticsIconButton,{ref:r,className:(0,F.Z)(g.menuToggle,"left-off-canvas-toggle","menu-toggle"),analyticsId:`${i}.menu-toggle-button`},S.createElement(td.l,null),S.createElement("span",{className:"sr-only"},u("cr.components.panelHeader.menuToggleButtonAriaLabel")))),S.createElement("div",{tabIndex:-1,ref:p,className:g.headingWrapperContainer},n),c&&S.createElement(eK,{targetSelector:c,focusNextSelector:l,customClassNames:["js-panel-header-skip-link",a],text:u("cr.components.accessibility.skipLink.message")})))};var th=n(883608);let tg=S.forwardRef((e,t)=>{let{children:n}=e,{isRtl:i}=(0,P.h)(),s=(0,th.y)(e),r=(0,ej.Fg)(),o=(0,ej.ac)(r.breakpoints.up("md"));return S.createElement(I.AnalyticsJssThemeProvider,{theme:o?"light":"dark",isRtl:i(),cssReset:"none"},S.createElement("div",{className:s.panelHeaderControlsRoot},S.createElement("div",{ref:t,className:s.panelHeaderControlsWrapper},n)))}),tf=(0,A.makeStyles)(e=>(0,A.createStyles)({headerText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.palette.primary.contrastText,backgroundColor:e.palette.background.b9,[e.breakpoints.up("md")]:{margin:0,color:e.palette.text.primary,backgroundColor:e.palette.background.default,textAlign:"unset",width:"auto"}},headerTextEditButtonWrapper:{display:"flex",justifyContent:"initial",alignItems:"center",cursor:"pointer",width:"auto",maxWidth:"100%","&:hover":{textDecoration:"underline","& $editButton":{opacity:1}}},editButton:{[e.breakpoints.up("md")]:{opacity:0,color:e.palette.text.secondary,marginBottom:"-4px","&:hover":{color:e.palette.text.primary},"&:focus":{opacity:1,color:e.palette.text.secondary}}},headerTextFieldRoot:{display:"block",border:"none",borderRadius:0,backgroundColor:"transparent",color:e.palette.primary.contrastText,[e.breakpoints.up("md")]:{color:e.palette.text.primary},"& input":{backgroundColor:"transparent",color:e.palette.primary.contrastText,border:"none",padding:0,margin:0,fontFamily:e.typography.h3.fontFamily,fontSize:e.typography.h3.fontSize,fontWeight:e.typography.h3.fontWeight,lineHeight:e.typography.h3.lineHeight,textAlign:"center",[e.breakpoints.up("md")]:{textAlign:"unset",fontFamily:e.typography.display1.fontFamily,fontSize:e.typography.display1.fontSize,fontWeight:e.typography.display1.fontWeight,lineHeight:e.typography.display1.lineHeight,color:e.palette.text.primary}},"& input:focus":{boxShadow:"none",backgroundColor:"transparent"}},headerTextFieldFocused:{"&&":{boxShadow:"none"},[e.breakpoints.up("md")]:{"&&":{boxShadow:`0 2px 0 0 ${e.palette.focus.main}`}}}})),tb=e=>{let{shouldWrap:t,wrapper:n,children:i}=e;return t?n(i):i},tv=e=>{let{editButtonAriaLabel:t,onHeaderTextChange:n,initialIsEditMode:i,placeholder:s,onEnterEditMode:r,onExitEditMode:o,inputRef:a,...l}=e,{headerText:c,analyticsIdPrefix:d,settingsButtonProps:u}=l,p=(0,ej.Fg)(),m=(0,ej.ac)(p.breakpoints.up("md")),h=tf(e),[g,f]=(0,S.useState)(0),[b,v]=(0,S.useState)(0),y=S.Children.toArray(e.children).length,C=(0,S.useCallback)(e=>f((null==e?void 0:e.clientWidth)||0),[y,m]),E=(0,S.useCallback)(e=>v((null==e?void 0:e.clientWidth)||0),[y,m]),[w,A]=(0,S.useState)(!!i),[k,x]=(0,S.useState)(c),T=S.useRef(k),P=(0,S.useCallback)(()=>{A(!1),null==o||o();let e=k.trim();if(!e||e===c){x(T.current);return}x(e),null==n||n(e)},[k]),D=(0,S.useMemo)(()=>w?Math.max(g+40,b):0,[g,b,w]);return S.createElement(tm,{...l,menuToggleMinWidth:D,menuToggleRef:C},S.createElement(S.Fragment,null,!w&&S.createElement(tb,{shouldWrap:m,wrapper:e=>S.createElement("div",{className:h.headerTextEditButtonWrapper},e)},S.createElement(S.Fragment,null,S.createElement(I.AnalyticsTypography,{onClick:()=>A(!0),className:(0,F.Z)(h.headerText,"js-header-text","js-editable-header-text"),"data-analytics-id":`${d}.enter-edit-mode-header`,component:"h1",variant:m?"display1":"h3"},k),S.createElement(tg,{ref:E},S.createElement(I.AnalyticsIconButton,{className:(0,F.Z)(h.editButton,"js-enter-edit-mode-button"),"aria-label":t,analyticsId:`${d}.enter-edit-mode-button`,onClick:()=>{T.current=k,A(!0),null==r||r()}},S.createElement(ta.I,null)),!m&&e.children,u&&!m&&S.createElement(tc,{...u})))),w&&S.createElement(S.Fragment,null,S.createElement(I.AnalyticsTextField,{className:"js-header-text-input",value:k===s?"":k,autoFocus:!0,fullWidth:!0,InputProps:{classes:{root:h.headerTextFieldRoot,focused:h.headerTextFieldFocused}},ref:a,placeholder:s,onChange:e=>x(e.target.value),onKeyDown:e=>"Enter"===e.nativeEvent.code&&P(),onBlur:P,analyticsId:`${d}.header-text-input`}),S.createElement(tg,{minWidth:D,ref:E},!m&&e.children,u&&!m&&S.createElement(tc,{...u})))))},ty=(0,A.makeStyles)(e=>(0,A.createStyles)({headerText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.palette.primary.contrastText,[e.breakpoints.up("md")]:{margin:0,color:e.palette.text.primary,textAlign:"unset",width:"auto",display:"block",maxWidth:"100%"}}})),tC=e=>{let t=ty(e),n=(0,ej.Fg)(),i=(0,ej.ac)(n.breakpoints.up("md")),{headerText:s,settingsButtonProps:r}=e;return S.createElement(tm,{...e},S.createElement(S.Fragment,null,"string"==typeof s?S.createElement(I.AnalyticsTypography,{className:(0,F.Z)(t.headerText,"js-header-text","js-readonly-header-text"),component:"h1",variant:i?"display1":"h3"},s):s,S.createElement(tg,null,!i&&e.children,r&&!i&&S.createElement(tc,{...r}))))},tS=(0,A.makeStyles)(e=>(0,A.createStyles)({footerRoot:{display:"flex",justifyContent:"flex-end",backgroundColor:e.palette.background.b2,borderTop:`1px solid ${e.palette.border.main}`,padding:"15px",gap:"10px","& > button":{flex:"1 1 0",[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:"170px"}}},peek:{justifyContent:"center"}})),tE=e=>{let{children:t,peek:n}=e,i=tS();return E().createElement("footer",{className:(0,F.Z)(i.footerRoot,n&&i.peek,e.className)},t)};n(587913);let tI=(0,A.makeStyles)(e=>(0,A.createStyles)({panelRoot:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",justifyContent:"stretch"},baseBody:{flex:"1 1",display:"flex",flexDirection:"column",overflowY:"hidden"},bodyWithStandardHeader:{[e.breakpoints.up("sm")]:{display:"block",overflowY:"auto"}},headerRoot:{},contentRoot:{flex:"1 1 auto",overflow:"auto",[e.breakpoints.up("sm")]:{overflowY:"initial"}}})),tw=e=>{let{children:t,header:n,footer:i,fixedHeader:s=!1}=e,r=tI();return E().createElement("div",{className:r.panelRoot},E().createElement("div",{className:(0,F.Z)(r.baseBody,!s&&r.bodyWithStandardHeader)},E().createElement("div",{className:r.headerRoot},n),E().createElement("div",{className:r.contentRoot},t)),i)};var tA=n(450754),tk=n(5722),tx=n(797782);let tT=(0,A.makeStyles)(()=>(0,A.createStyles)({root:{width:"100%"},sliderWrapper:{display:"flex",alignItems:"center",margin:"20px 20px"},slider:{margin:"0 20px"}})),tP=e=>{let{aspect:t,image:n,onCropComplete:i,objectFit:s}=e,r=(0,j.q)(),[o,a]=S.useState(1),l=tT();return S.createElement("div",{className:l.root},S.createElement(Q,{aspect:t,image:n,zoom:o,objectFit:s,onCropComplete:i}),S.createElement("div",{className:l.sliderWrapper},S.createElement(tk.H,null),S.createElement(tA.i,{analyticsId:"image.crop.zoom.slider",className:l.slider,"aria-label":r("cr.components.imageCrop.sliderAriaLabel"),value:o,onChange:(e,t)=>{a(t)},min:1,max:3,step:.05}),S.createElement(tx.D,null)))};var tD=n(311822),tG=n(573127),tR=n(989224),tB=n(144228),tL=n(678373),tN=n(423704),tO=n(745916);let tM=(0,A.makeStyles)(()=>(0,A.createStyles)({contentWrapper:{display:"flex",justifyContent:"center"},content:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",maxWidth:"632px"}}));var t$=n(844449);let tH=e=>{let{aspect:t,image:n,open:i,onCancel:s,onCropSave:r,minHeight:o,minWidth:a}=e,l=tM(),c=(0,j.q)(),[d,u]=S.useState(null),p=S.useCallback(async()=>{if(!d)return;let e=await (0,t$.c)(n,d,o,a);r(e)},[n,r,d]),m=S.useCallback((e,t)=>{u(t)},[]);return S.createElement(tD._X,{open:i,maxWidth:"lg",analyticsId:"image.crop.modal","aria-labelledby":"image-crop-modal-title"},S.createElement(tG.I,{id:"image-crop-modal-title",hideCloseButton:!0,analyticsId:"image.crop.modal.title"},c("cr.components.imageCropModal.title")),S.createElement("div",{className:l.contentWrapper},S.createElement(tR.b,{analyticsId:"image.crop.modal.content",className:l.content},S.createElement(tB.T,{analyticsId:"image.crop.modal.content.text"},c("cr.components.imageCropModal.content")),S.createElement(tP,{aspect:t,image:n,objectFit:"horizontal-cover",onCropComplete:m}))),S.createElement(tL.X,{analyticsId:"image.crop.modal.actions"},S.createElement(tN.x,{analyticsId:"image.crop.modal.cancel.button",onClick:s},c("cr.components.imageCropModal.cancel")),S.createElement(tO.AnalyticsPrimaryButton,{analyticsId:"image.crop.modal.save.button",onClick:p},c("cr.components.imageCropModal.done"))))};var tF=n(443400);let tU="10px",tV=(0,A.makeStyles)(e=>(0,A.createStyles)({root:{color:e.palette.text.primary,display:"flex",flexFlow:"wrap",position:"relative",transform:"translateZ(0)","&:hover $rootControlsInline button":{backgroundColor:e.palette.background.b9,color:e.palette.secondary.light},"&:hover $rootControlsInline button:hover":{color:e.palette.primary.contrastText}},rootControls:{display:"flex",flex:"1 0 100%",order:1,alignItems:"stretch",minHeight:"58px",minWidth:0},rootControlsWidgets:{display:"flex","& button":{color:e.palette.text.secondary,height:"100%",minHeight:"48px",width:"48px",borderRadius:"0"},"& button:hover, & button:focus":{backgroundColor:e.palette.background.b4,color:e.palette.primary.main}},rootControlsInline:{flex:"0 1 auto",position:"absolute",right:0,zIndex:100,minHeight:"auto","& $rootControlsWidgets":{flexDirection:"column-reverse"}},rootBackground:{backgroundColor:e.palette.background.paper},contextMenu:{display:"flex",marginLeft:"auto"},inlineRenderToggle:{display:"flex"},inlineRenderToggleSeparator:{alignSelf:"center",borderLeft:`1px solid ${e.palette.background.b5}`,height:"50%",width:"1px"},mediaRoot:{margin:"0 auto",order:2,textAlign:"center",width:"100%"},documentPreviewHidden:{height:0,display:"none","div& iframe":{height:0,minHeight:0,visibility:"hidden"}},mediaRootInline:{order:0},attachmentMeta:{display:"flex",alignItems:"center",flex:1,height:"100%",minWidth:0,paddingLeft:tU,paddingRight:tU,wordBreak:"break-all"},attachmentMetaClickable:{"&:hover,&:focus":{backgroundColor:e.palette.background.b4,cursor:"pointer",textDecoration:"underline"}},icon:{marginRight:"10px"},fileText:{flexShrink:1,lineHeight:"unset",textAlign:"unset",fontWeight:e.typography.fontWeightBold},contextMenuHovered:{"& svg":{color:e.palette.primary.main},"& button.is-expanded svg":{color:e.palette.brand.main}}}));var t_=n(372351),tq=n(951248),tz=n(247802),tW=n(238136);let tj=e=>{switch(e.name){case"pdf":return S.createElement(tW.Pdf,{className:e.iconClass});case"presentation":return S.createElement(tW.Presentation,{className:e.iconClass});case"spreadsheet":return S.createElement(tW.Spreadsheet,{className:e.iconClass});case"zip":return S.createElement(tW.Zip,{className:e.iconClass});case"audio":return S.createElement(tW.Audio,{className:e.iconClass});case"photo":return S.createElement(tW.Photo,{className:e.iconClass});case"video":return S.createElement(tW.Video,{className:e.iconClass});case"document-text":return S.createElement(tW.DocumentText,{className:e.iconClass})}return S.createElement(tW.DocumentBlank,{className:e.iconClass})};var tZ=n(776517);function tK(e){return(0,t_.Q)(e)&&!e.viewerUrl&&("video"===(0,t_.V4)(e)||"image"===(0,t_.V4)(e)&&(0,t_.f5)(e))}function tX(e,t){return void 0!==t&&!e}function tY(e,t){return e&&t.items.length>0}function tQ(e,t,n,i,s,r,o){let a={directionalHint:7,directionalHintFixed:!1,items:[]};return void 0!==i&&tX(t,i)&&a.items.push({name:n("cr.components.fileViewer.deleteFile"),key:"deleteFile",icon:S.createElement(w.Trash,null),onClick:()=>i()}),function(e,t){let n=(0,t_.Q)(e,t);return!n||n&&e.render!==tq.I_d.InlineOnly}(e,r)&&a.items.push({name:n(o?"cr.components.fileViewer.downloadFile":"cr.components.fileViewer.download"),key:"downloadFile",icon:S.createElement(w.Download,null),additionalAttributes:{"data-key":"downloadFile"},onClick:()=>(function(e){(0,tZ.sA)(tZ.Cs.DownloadLinkClicked);let t=(0,tF.uI)((0,tF.xx)(e.resourceUrl,e.fileName));window.open(t,"_self")})(e)}),void 0!==s&&s.length>0&&a.items.push(...s),a}let tJ=e=>{var t;let{file:n,disableMediaModal:i=!1,readOnly:s=!0,onDelete:r,showContextMenu:o=!0,analyticsId:a="fileViewer",additionalContextualMenuItems:l,isAllyEnabled:c=!1,inlineMediaAdditionalAttributes:d,widgets:u,expandInlineFilesOnLoad:p=!1,supportsInlineDocumentRender:m=!1}=e,[h,g]=S.useState(p),f=tV(),b=(0,j.q)(),[v,y]=S.useState(!1),C=(0,t_.f5)(n)&&(0,t_.iT)(n)&&(s&&m||p),E=S.useCallback(e=>{null==e||e.stopPropagation(),g(e=>(e||v||y(!0),!e))},[v]),A=(0,t_.iT)(n)&&(!s&&!p||!h),k=tQ(n,s,b,r,l,m,c),x={};k.items&&k.items.length>0&&k.items.every(e=>{var t,n;return(null===(t=e.additionalAttributes)||void 0===t?void 0:t["data-ally-show"])!==void 0&&(null===(n=e.additionalAttributes)||void 0===n?void 0:n["data-ally-content-ref"])!==void 0})&&(x["data-ally-show"]="instructorfeedback",x["data-ally-content-ref"]=null===(t=k.items[0].additionalAttributes)||void 0===t?void 0:t["data-ally-content-ref"]);let T=s&&v,P=("audio"===(0,t_.V4)(n)||"video"===(0,t_.V4)(n))&&(0,t_.Q)(n,m)||"image"===(0,t_.V4)(n)&&(0,t_.Q)(n,m)&&(0,t_.f5)(n)&&(0,t_.Q)(n,m)&&"audio"!==(0,t_.V4)(n)&&"video"!==(0,t_.V4)(n)||s&&h&&(0,t_.Q)(n,m)||p&&(0,t_.iT)(n)||T,D=`cr.components.fileViewer.aria.${P?"hideFile":"viewFile"}`,G=`cr.components.fileViewer.${P?"hideFile":"viewFile"}`;return S.createElement("div",{className:(0,F.Z)(f.root,!tK(n)&&f.rootBackground)},S.createElement("div",{className:(0,F.Z)(tK(n)?void 0:f.rootControls,tK(n)?void 0:"js-file-viewer-root-controls",tK(n)?f.rootControlsInline:void 0,tK(n)?"js-file-viewer-controls-inline":void 0)},!tK(n)&&S.createElement("div",{className:(0,F.Z)(f.attachmentMeta,"js-file-viewer-attachment-meta",C?f.attachmentMetaClickable:void 0),onClick:C?E:void 0,"aria-label":C?b(D,{displayName:n.displayName}):void 0,"aria-expanded":C?P&&!A:void 0,"aria-controls":C?`file-preview-${n.resourceUrl}`:void 0,role:C?"button":void 0,tabIndex:C?0:void 0,title:C?b(G):void 0},S.createElement(tj,{name:(0,tq.kfU)(n.mimeType),iconClass:f.icon}),S.createElement("span",{className:f.fileText},n.displayName)),S.createElement("div",{className:(0,F.Z)(f.rootControlsWidgets,"js-file-viewer-attachment-widgets")},u,!tK(n)&&tX(s,r)&&void 0!==r&&S.createElement(I.AnalyticsIconButton,{analyticsId:`${a}.deleteFile`,title:b("cr.components.fileViewer.deleteFile"),"aria-label":b("cr.components.fileViewer.aria.deleteFile",{displayName:n.displayName}),onClick:r},S.createElement(w.Trash,null)),tY(o,k)?S.createElement("div",{className:(0,F.Z)(f.contextMenu,"js-file-viewer-context-menu"),...x},S.createElement(eX.ActionMenu,{title:b("cr.components.fileViewer.menuTitle",{displayName:n.displayName}),ariaLabel:b("cr.components.fileViewer.menuTitle",{displayName:n.displayName}),menuProps:k,analyticsId:`${a}.action.menu`})):void 0,C?S.createElement("div",{className:f.inlineRenderToggle},tY(o,k)||u?S.createElement("div",{className:f.inlineRenderToggleSeparator}):void 0,S.createElement(I.AnalyticsIconButton,{analyticsId:`${a}.inlineRender.toggle`,"aria-expanded":P&&!A,"aria-controls":`file-preview-${n.resourceUrl}`,"aria-label":b(D,{displayName:n.displayName}),title:b(G),onClick:E,className:(0,F.Z)(f.fileText,"js-file-viewer-inline-render-toggle")},P&&!A?S.createElement(w.ChevronUp,null):S.createElement(w.ChevronDown,null))):void 0)),P&&S.createElement("div",{className:(0,F.Z)(f.mediaRoot,"js-file-viewer-inline-preview",A?f.documentPreviewHidden:void 0),id:`file-preview-${n.resourceUrl}`},S.createElement(tz.s,{file:n,disableMediaModal:i,analyticsId:a,inlineMediaAdditionalAttributes:d})))},t0=(0,A.makeStyles)(()=>({root:{'& input[type="text"], & input[type="text"]:focus':{margin:"0",background:"transparent",height:"auto",boxShadow:"none",minHeight:"34px",border:"none",outline:"none"},"& fieldset":{marginBottom:"24px","&:last-of-type":{marginBottom:0}},"& fieldset label":{marginLeft:"0"}},formControl:{marginBottom:"24px"},tooLargeContainer:{display:"flex",flexDirection:"row"},tooLargeInfoIcon:{marginTop:"3px"},tooLargeTextContainer:{margin:"0 9px;","& p:first-of-type":{marginBottom:"9px"}}})),t1=e=>{var t,n,i;let{analyticsId:s,onCancel:r,onSave:o,supportsInlineDocumentRender:a=!1,canProvideDescription:l=!0}=e,[c,d]=S.useState(e.file),u=(0,j.q)(),p=t0(),m=(0,t_.V4)(c),h=(0,t_.TN)(m),g=(0,t_.CO)(m),f=(0,t_.bm)(m),b=(0,t_.NU)(m),{alternativeText:v,displayName:y}=c,C=(!h&&!b||v.length>0)&&y.length>0,E=Math.round(t_.$8/1048576),k=Math.round((null!==(t=(0,t_.RE)(c))&&void 0!==t?t:t_.$8)/1048576);return S.createElement(tD.Dy,{hidden:e.hidden,onDismiss:()=>{d(c),r()},dialogContentProps:{title:u("cr.components.filePropertyDialog.title")},modalProps:{className:p.root},analyticsId:s,"aria-labelledby":"file-properties-dialog-title"},S.createElement(I.AnalyticsTextField,{analyticsId:`${s}.displayName.textfield`,id:"file-property-dialog-displayName",className:p.formControl,label:`${u("cr.components.filePropertyDialog.displayName")}`,fullWidth:!0,onChange:e=>{let t=e.target.value,n=c.alternativeText;c.alternativeText===c.displayName&&(n=t),d({...c,displayName:t,alternativeText:n})},inputProps:{maxLength:200},required:!0,value:c.displayName}),l&&g&&(0,t_.Q)(c)&&S.createElement(A.CheckboxGroup,{className:p.formControl,legendText:u("cr.components.filePropertyDialog.imageType"),legendVariant:"subtitle2"},S.createElement(I.AnalyticsFormControlLabel,{analyticsId:`${s}.isDecorative.label`,label:u("cr.components.filePropertyDialog.makeDecorative"),checked:!0===c.isDecorative,control:S.createElement(I.AnalyticsCheckbox,{analyticsId:`${s}.isDecorative.checkbox`,id:"file-property-dialog-decorative",onChange:(e,t)=>{d({...c,isDecorative:t})}})})),l&&f&&!c.isDecorative&&S.createElement(I.AnalyticsTextField,{analyticsId:`${s}.altText.textfield`,id:"file-property-dialog-alternativeText",className:p.formControl,fullWidth:!0,label:`${u("cr.components.filePropertyDialog.alternativeText")}`,onChange:e=>{d({...c,alternativeText:e.target.value})},required:h||b,value:c.alternativeText}),((0,t_.Q)(c,a)||(0,t_.t1)(c,a))&&!h&&!b&&S.createElement(I.AnalyticsRadioGroup,{analyticsId:`${s}.displayOptions.radioGroup`,name:"display-options",legendText:u("cr.components.filePropertyDialog.displayAs.label"),legendVariant:"subtitle2",value:c.render,onChange:e=>{let t=e.target.value;d({...c,render:t})}},S.createElement(I.AnalyticsFormControlLabel,{analyticsId:`${s}.displayOptions.radioGroup.inline`,htmlFor:"displayAsInline",value:tq.I_d.Inline,control:S.createElement(I.AnalyticsRadio,{id:"displayAsInline",analyticsId:`${s}.displayOptions.radio.inline`}),label:u("cr.components.filePropertyDialog.displayAs.inline")}),S.createElement(I.AnalyticsFormControlLabel,{analyticsId:`${s}.displayOptions.radioGroup.inlineOnly`,htmlFor:"displayAsInlineOnly",value:tq.I_d.InlineOnly,control:S.createElement(I.AnalyticsRadio,{id:"displayAsInlineOnly",analyticsId:`${s}.displayOptions.radio.inlineOnly`}),label:u("cr.components.filePropertyDialog.displayAs.inlineOnly")}),S.createElement(I.AnalyticsFormControlLabel,{analyticsId:`${s}.displayOptions.radioGroup.attachment`,htmlFor:"displayAsAttachment",value:tq.I_d.Attachment,control:S.createElement(I.AnalyticsRadio,{id:"displayAsAttachment",analyticsId:`${s}.displayOptions.radio.attachment`}),label:u("cr.components.filePropertyDialog.displayAs.attached")})),a&&(0,t_.ZO)(c.mimeType)&&!(0,t_.Y1)(c)&&S.createElement("div",{className:p.tooLargeContainer},S.createElement(w.Information,{className:p.tooLargeInfoIcon}),S.createElement("div",{className:p.tooLargeTextContainer},S.createElement("p",null,u("cr.components.filePropertyDialog.displayAs.tooLarge")),S.createElement("p",null,(0,t_.jN)(c)?u("cr.components.filePropertyDialog.displayAs.tip",{maxFilesizeInMB:E}):u("cr.components.filePropertyDialog.displayAs.extensionSpecificTip",{extension:`.${null===(i=null===(n=c.fileName)||void 0===n?void 0:n.split(".").pop())||void 0===i?void 0:i.toLowerCase()}`,maxFilesizeInMB:k})))),S.createElement(eX.DialogFooter,null,S.createElement(I.AnalyticsDefaultButton,{analyticsId:s,onClick:r},u("cr.components.global.close")),S.createElement(I.AnalyticsPrimaryButton,{analyticsId:`${s}.dialogFooter.save.button`,disabled:!C,onClick:()=>o(c)},u("cr.components.filePropertyDialog.save"))))},t2=(0,A.makeStyles)(e=>({container:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 5px 10px 10px",backgroundColor:e.palette.background.b2},progress:{lineHeight:1,maxHeight:"40px",maxWidth:"40px"},title:{flex:"1 1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},cancelButton:{color:e.palette.text.secondary,"&:hover":{color:e.palette.text.primary}}})),t3=e=>{let{className:t,filename:n,processing:i,percentage:s,onCancel:r,displayAsError:o}=e,a=t2(),l=(0,j.q)();return E().createElement("div",{className:(0,F.Z)(a.container,t)},E().createElement(I.AnalyticsCircularProgress,{ariaLabel:l("cr.components.fileUploadProgress.processing"),formatPercentage:e=>"number"==typeof e?l("cr.components.fileUploadProgress.percent",{percentage:e}):"",size:40,value:s,classes:{root:a.progress},variant:i||"number"!=typeof s?"indeterminate":"static",error:o,showPercent:!0}),E().createElement("div",{className:a.title},!!n&&l("cr.components.fileUploadProgress.uploadingFile",{filename:n})),!i&&!!r&&E().createElement(I.AnalyticsIconButton,{"aria-label":l(n?"cr.components.fileUploadProgress.cancelFileUpload":"cr.components.fileUploadProgress.cancelFileUploadWithoutName",{filename:n}),analyticsId:"components.directives.fileUpload.cancelUploadText.button",className:a.cancelButton,onClick:r},E().createElement(w.Clear,null)))};var t9=n(462486);let t4=e=>{let{customBadgeClass:t}=e,n=(0,j.q)();return S.createElement(t9.t,{position:"inline",color:"indicatorPrimary",badgeContent:n("cr.components.newFeatureBadge.content"),offScreenLabel:n("cr.components.newFeatureBadge.ariaLabel"),classes:{badge:t}})},t7=e=>{let{onDismiss:t,analyticsId:n,isVisible:i}=e,s=(0,j.q)();return E().createElement(tD.Dy,{analyticsId:`${n}.connectionLostDialog`,hidden:!i,"aria-labelledby":"connection-lost-dialog",onDismiss:t,dialogContentProps:{type:eU.DialogType.normal,showCloseButton:!0,title:s("components.services.assessment.modal.connection-lost.title"),titleId:`${n}.connectionLostDialog.titleClose.button`,subText:s("components.services.assessment.modal.connection-lost.description"),subTextId:"connection-lost-dialog-description",closeButtonAriaLabel:s("global.close")},modalProps:{isAlert:!0}},E().createElement(eU.DialogFooter,null,E().createElement(I.AnalyticsPrimaryButton,{analyticsId:`${n}.connectionLostDialog.ok.button`,onClick:t},s("global.ok"))))};var t5=n(22361);let t6=(0,A.makeStyles)(e=>(0,A.createStyles)({root:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:e.palette.background.b2,minHeight:"58px",padding:"8px"},progressInfo:{display:"flex",flexDirection:"row",alignItems:"center"},progressLabel:{marginLeft:"8px"}})),t8=e=>{let{analyticsId:t,fileName:n,onCancel:i,isDeterminate:s,progress:r,onComplete:o}=e,a=t6(),[l,c]=(0,S.useState)(0),[d,u]=(0,S.useState)(void 0),p=(0,j.q)(),m=p("cr.components.uploadProgressBanner.label",{fileName:n}),h=p("cr.components.uploadProgressBanner.cancelButton.ariaLabel"),g=(0,S.useRef)();return g.current=o,(0,S.useEffect)(()=>{if(s&&void 0!==r&&l<Math.floor(r)){d&&clearTimeout(d);let e=setTimeout(()=>{c(e=>e+1)},5);u(e)}return g.current&&(s?100===l:100===r)&&g.current(),()=>{d&&clearTimeout(d)}},[s,r,l]),E().createElement("div",{className:a.root},E().createElement("div",{className:a.progressInfo},E().createElement(t5.W,{value:l,showPercent:s,variant:s?"determinate":"indeterminate",size:"medium",ariaLabel:""}),E().createElement("span",{className:a.progressLabel},m)),void 0!==r&&r<100&&E().createElement(e1.AnalyticsIconButton,{className:"js-upload-progres-banner-cancel-button",analyticsId:`${t}.cancelUpload.button`,"aria-label":h,onClick:i},E().createElement(w.Close,null)))};function ne(e,t){let n=(0,S.useRef)(null);return(0,S.useLayoutEffect)(()=>{if(null===n.current)return()=>{};let t=new IntersectionObserver(t=>{if(1!==t.length)return;let{isIntersecting:n}=t[0];n&&e()},{threshold:1});return t.observe(n.current),()=>t.disconnect()},[e]),E().createElement(E().Fragment,null,t&&E().createElement("span",{style:{display:"block"},ref:n}))}let nt=({hasMore:e,loader:t})=>ne(t,e);var nn=n(465139);let ni=(0,A.makeStyles)(e=>({preventScroll:{position:"fixed",top:0},focusVisibleLoadButton:{...ez.FR,"&:active, &:focus":{position:"sticky",bottom:0,padding:"2px 4px",backgroundColor:e.palette.background.default,zIndex:1,clip:"unset",height:"unset",width:"unset",[e.breakpoints.up("md")]:{bottom:"-30px"}}}})),ns=e=>{let{itemLoader:t,unloadedItemsCount:n,analyticsId:i,textKey:s,visibleOnFocus:r}=e,o=(0,j.q)(),a=ni();return E().createElement(I.AnalyticsButtonBase,{className:(0,F.Z)(r?a.focusVisibleLoadButton:["sr-only",a.preventScroll]),onClick:t,disabled:0===n,analyticsId:i},o(s,{loadCount:n}))},nr=e=>{let{afterLoad:t,incomingLoadCount:n,loader:i,axLoadMoreButtonLabelKey:s,showLoadButtonOnFocus:r=!1}=e,[o,a]=(0,S.useState)(!1),l=ne(i,0!==n),c=(0,nn.zX)(()=>{null==t||t(),a(!1)});(0,S.useLayoutEffect)(()=>{o&&c()},[o,c]);let d=async()=>{await i(),a(!0)};return E().createElement(E().Fragment,null,E().createElement(ns,{analyticsId:"components.directives.content.content-outline.infiniteScroll.content.loadMoreButton.label.plural",itemLoader:d,unloadedItemsCount:n,textKey:null!=s?s:"components.directives.content.content-outline.infiniteScroll.content.loadMoreButton.label.plural",visibleOnFocus:r}),l)};var no=n(210653),na=n(42196);let nl=(0,A.makeStyles)(e=>(0,A.createStyles)({banner:{padding:"12px 30px"}})),nc=({message:e,onClose:t,canDismiss:n=!1,actionAnalyticsId:i=""})=>{let s=nl(),r=(0,j.q)(),o={};return n&&i&&(o={actions:[S.createElement(e_.AnalyticsOutlineButton,{analyticsId:`${i}.information.banner.action`,onClick:t,key:"information-banner-dismiss"},r("cr.components.global.dismiss"))]}),S.createElement(no.m,{severity:"info",icon:S.createElement(na.d,null),className:s.banner,onClose:t,closeText:r("global.close"),...o},e)};var nd=n(442781);let nu=(0,A.makeStyles)(e=>(0,A.createStyles)({banner:{padding:"12px 30px"}})),np=e=>{let t=nu(),n=(0,j.q)();return S.createElement(no.m,{severity:"error",icon:S.createElement(nd.n,null),onClose:e.onClose,className:t.banner,closeText:n("global.close")},e.message)},nm=()=>{let[e,t]=S.useState(!0),n=(0,j.q)();return S.createElement(S.Fragment,null,e&&S.createElement(no.m,{severity:"warning",onClose:()=>t(!1),icon:S.createElement(nd.n,{color:"primary"}),closeText:n("course.content.forcedSequenceBannerDismiss")},n("course.content.forcedSequenceBannerText")))};var nh=n(651755);let ng=(0,A.makeStyles)(()=>(0,A.createStyles)({comboboxContainerWidth:{"& > div":{width:"100%"}},comboboxWidth:{width:"100%"},comboboxReset:{"& input":{border:0,margin:"0px",height:"100%"},"& input:focus":{boxShadow:"none"}}}));function nf(e){return function(t){var n,i;let s=n=>{let i=(0,A.useTheme)(),s=(0,A.useMediaQuery)(e.query(i));return E().createElement(t,{...n,mediaQuery:s})},r=null!==(i=null!==(n=t.displayName)&&void 0!==n?n:t.name)&&void 0!==i?i:"Component";return s.displayName=`withMediaQuery(${r})`,s}}function nb(e=()=>({})){return(t,n)=>{let i=i=>{let[s,r]=(0,S.useState)(!1),o=(0,S.useRef)(),a=(0,S.useCallback)(()=>(r(!0),new Promise(e=>{o.current=t=>{r(!1),e(t)}})),[]),l=(0,S.useCallback)((e,t)=>{var n;r(!1),null===(n=o.current)||void 0===n||n.call(o,{confirmed:!!e,results:t})},[]);return E().createElement(E().Fragment,null,E().createElement(t,{...i,openModal:a}),s&&E().createElement(n,{...e(i),exitCallback:l}))};return i.displayName=`withModal(${t.displayName||t.name||"Component"})`,i}}n(83590);let nv=(0,A.makeStyles)(e=>(0,A.createStyles)({linkIcon:{color:e.palette.text.primary,backgroundColor:e.palette.background.b4,left:"4px"}})),ny=e=>{let t=nv(),n=(0,F.Z)(t.linkIcon,e.className);return E().createElement(I.AnalyticsBadge,{anchorOrigin:{horizontal:"left",vertical:"top"},badgeContent:E().createElement(w.Link,null),classes:{badge:n}},e.children)};var nC=n(928316);function nS(e,t){let[n,i]=(0,S.useState)(!1),s=(0,S.useRef)(),r=null!=t?t:{},[o,a]=(0,S.useState)({}),l=(0,S.useCallback)(e=>((0,nC.unstable_batchedUpdates)(()=>{i(!0),e&&a(e)}),new Promise(e=>{s.current=t=>{(0,nC.unstable_batchedUpdates)(()=>{i(!1),a({})}),e(t)}})),[]),c=(0,S.useCallback)((e,t)=>{var n;i(!1),null===(n=s.current)||void 0===n||n.call(s,{confirmed:!!e,results:t})},[]);return{displayModal:l,modal:E().createElement(E().Fragment,null,n?E().createElement(e,{...r,...o,exitCallback:c}):null)}}let nE=(0,A.makeStyles)(e=>({uploadFromDeviceContainer:{margin:"12px 0"},fileSizeText:{display:"flex",flexDirection:"column",fontWeight:e.typography.fontWeightLight,margin:"12px 0"},fileUploadBtn:{width:"100%"},uploadIcon:{marginRight:"5px"},fileInput:{display:"none"},uploadProgressContainer:{display:"flex",flexDirection:"row"},progressBar:{marginRight:"5px"},fileName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"300px"}})),nI=e=>{let{onFileUpload:t,analyticsId:n,validFormats:i,onFileUploadError:s}=e,r=nE(),o=(0,j.q)(),[a]=(0,S.useState)(()=>"supported-format-id"+(0,G.v4)());return E().createElement("div",{className:r.uploadFromDeviceContainer},E().createElement(I.AnalyticsDashedButton,{id:"file-upload-button",className:r.fileUploadBtn,analyticsId:`${n}.upload-from-device.button`,onClick:()=>{(0,tF.s6)(i.join(","),!1).then(e=>{let n=(0,tF.ox)(e,i);n?t(e[0]):s(Error("File invalid"))})},"aria-describedby":a},E().createElement(w.Upload,{className:r.uploadIcon}),o("cr.components.fileUpload.uploadFile")),E().createElement("div",{className:r.fileSizeText},E().createElement("span",{id:a},o("cr.components.fileUpload.fileFormat"))))},nw=e=>{let{onFileUpload:t,analyticsId:n,validFormats:i,onFileUploadError:s}=e,r=(0,j.q)(),o=nE(),[a,l]=(0,S.useState)(!1),[c,d]=(0,S.useState)();return E().createElement(E().Fragment,null,E().createElement(nI,{onFileUpload:e=>{let n={file:e,fileName:e.name,fileType:e.type};d(e.name),l(!0),(0,tq.OmG)(n).then(e=>{l(!1),t(e)}).catch(e=>{l(!1),s(e)})},analyticsId:n,validFormats:i,onFileUploadError:s}),a&&E().createElement("div",{className:o.uploadProgressContainer},E().createElement(I.AnalyticsCircularProgress,{className:o.progressBar,ariaLabel:r("cr.components.fileUpload.uploadInProgress"),size:"small"}),E().createElement("span",{className:o.fileName},c)))};class nA{constructor(){this.providerAdded=!1,this.renderSnackbarCallback=()=>{},this.dismissSnackbarCallback=()=>{},this.snackbarQueue=[],this.currentSnackbar=null}static getInstance(){return nA.INSTANCE||(nA.INSTANCE=new nA),nA.INSTANCE}setProvider(e,t){if(this.providerAdded)throw Error("Only a single provider can be added.");this.renderSnackbarCallback=e,this.dismissSnackbarCallback=t,this.providerAdded=!0}dequeueSnackbar(e){var t;this.snackbarQueue=this.snackbarQueue.filter(t=>t.viewKey!==e),(null===(t=this.currentSnackbar)||void 0===t?void 0:t.viewKey)===e&&this.dismissSnackbarCallback()}renderNextSnackbar(){this.currentSnackbar=null;let e=this.snackbarQueue.shift();e&&(this.currentSnackbar=e,this.renderSnackbarCallback(e.messageProps,e.actionProps))}enqueueSnackbar(e,t,n,i){if(!this.providerAdded)throw Error("Cannot enqueue a snackbar because a provider is not yet registered.");let s={...t};if(i&&(s.icon=S.createElement(i,null)),this.snackbarQueue.push({viewKey:e,messageProps:s,actionProps:n}),null===this.currentSnackbar){let e=this.snackbarQueue.shift();e&&(this.currentSnackbar=e,this.renderSnackbarCallback(e.messageProps,e.actionProps))}}}nA.INSTANCE=null;let nk=()=>{let{enqueueSnackbar:e,closeSnackbar:t}=(0,I.useSnackbar)(),n=(0,j.q)(),i=E().useRef(),s=E().useRef();return E().useEffect(()=>{i.current=(t,i)=>{let s=null!=i?i:{closeButtonAriaLabel:n("cr.components.global.close")},r={isPersistent:!0,...s,...t},{isPersistent:o}=r;e(E().createElement(A.SnackbarMessage,{...r}),{autoHideDuration:o?null:2e4,resumeHideDuration:o?void 0:2e4,persist:o,action:E().createElement(A.SnackbarAction,{...s})})}},[e,n]),E().useEffect(()=>{s.current=t},[t]),E().useEffect(()=>{nA.getInstance().setProvider((...e)=>{var t;return null===(t=i.current)||void 0===t?void 0:t.call(i,...e)},()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.call(s)})},[]),null},nx=()=>E().createElement(I.AnalyticsSnackbarProvider,{onExited:()=>{nA.getInstance().renderNextSnackbar()},variant:"default"},E().createElement(nk,null));function nT(e,t=!0){let n=E().useRef();E().useEffect(()=>{n.current=nA.getInstance()},[]),E().useEffect(()=>()=>{var i;t&&(null===(i=n.current)||void 0===i||i.dequeueSnackbar(e))},[e,t]);let i=E().useCallback((t,i)=>{var s;null===(s=n.current)||void 0===s||s.enqueueSnackbar(e,t,i)},[e]),s=E().useCallback(()=>{var t;null===(t=n.current)||void 0===t||t.dequeueSnackbar(e)},[e]);return{enqueueSnackbar:i,dequeueSnackbar:s}}(l=f||(f={}))[l.AnonymousSendReminders=0]="AnonymousSendReminders",l[l.AssessmentTimerToasts=1]="AssessmentTimerToasts",l[l.AssessmentConnectivity=2]="AssessmentConnectivity",l[l.AssessmentQuestionFetchFailure=3]="AssessmentQuestionFetchFailure",l[l.CourseContentOutlineDragAndDrop=4]="CourseContentOutlineDragAndDrop",l[l.CourseContentReleaseConditionLargeMemberSets=5]="CourseContentReleaseConditionLargeMemberSets",l[l.CourseGroupSetVisibility=6]="CourseGroupSetVisibility",l[l.CourseTasksAndLogsDelete=7]="CourseTasksAndLogsDelete",l[l.GradesDownloadToasts=8]="GradesDownloadToasts",l[l.ContentGenerated=9]="ContentGenerated";var nP=({image:e,className:t,presentationOnly:n})=>E().createElement("div",{className:t,dangerouslySetInnerHTML:{__html:e},"aria-hidden":n});let nD=(0,A.makeStyles)(e=>(0,A.createStyles)({componentContainer:{justifyContent:"center",height:"100%",padding:"30px 0"},container:{display:"flex",flexDirection:"column",alignItems:"center"},horizontalTextContainer:{[e.breakpoints.up("lg")]:{alignItems:"start"}},horizontalContainer:{backgroundColor:e.palette.background.b1,padding:"20px",flexFlow:"column",[e.breakpoints.up("lg")]:{flexFlow:"row"}},illustration:{marginBottom:"20px","& svg":{width:"250px"}},horizontalIllustration:{display:"none",[e.breakpoints.up("lg")]:{display:"block",marginBottom:"0",marginRight:"20px"}},horizontalProminent:{marginBottom:"3px",fontWeight:e.typography.fontWeightBold,[e.breakpoints.up("lg")]:{textAlign:"left"}},horizontalParagraph:{textAlign:"center",marginBottom:"0",[e.breakpoints.up("lg")]:{textAlign:"left"}}})),nG=e=>{let{illustration:t,prominentText:n,subText:i,horizontalDisplay:s}=e,r=nD();return S.createElement("div",{className:(0,F.Z)(r.container,r.componentContainer,{[r.horizontalContainer]:s})},S.createElement(nP,{image:t,className:(0,F.Z)({[r.horizontalIllustration]:s,[r.illustration]:!s}),presentationOnly:!0}),S.createElement("div",{className:(0,F.Z)(r.container,{[r.horizontalTextContainer]:s})},S.createElement(I.AnalyticsTypography,{className:(0,F.Z)({[r.horizontalProminent]:s}),variant:"h2"},n),i&&!s&&S.createElement("span",null,i),i&&s&&S.createElement("p",{className:r.horizontalParagraph},i)))};var nR=n(905452),nB=n(376851);let nL=E().forwardRef((e,t)=>{let{icon:n,text:i,children:s,analyticsId:r,...o}=e;return E().createElement(nB.P,{button:!0,ref:t,analyticsId:r,...o},E().createElement(I.AnalyticsListItemIcon,{analyticsId:`${r}.icon`},n),E().createElement(I.AnalyticsListItemText,{analyticsId:`${r}.text`},i),s)}),nN=e=>{let{items:t,...n}=e;return E().createElement(nR.c,{variant:"menu",className:"react-container",...n},t.map(e=>!e.hidden&&E().createElement(nL,{...e})))};var nO=n(276635),nM=n(854230),n$=n(197236),nH=n(140172),nF=n(729094);let nU=S.memo(({analyticsId:e,items:t,checkboxGroupLegendText:n,headerDescription:i,selectAllItemsLabel:s,onChange:r,onChangeSelectAllItems:o})=>{let a=(0,nM.y)(),l=(0,S.useMemo)(()=>{let e=t.filter(e=>e.checked);return e.length?e.length===t.length?"true":"mixed":"false"},[t]),c=(0,S.useCallback)(e=>{let t=!0,{value:n,checked:i}=e.target;null==r||r(e=>e.map(e=>{let s=e.value===n?{...e,checked:i}:{...e};return s.checked||(t=!1),s})),null==o||o(t)},[r,o]);return S.createElement("div",{className:a.MultiselectCheckbox},S.createElement(n$.c,{legendText:n,legendVariant:"h3"},S.createElement("span",null,i),t.length>0&&S.createElement(I.AnalyticsFormControl,{analyticsId:`${e}.formControl`,fullWidth:!0,className:a.multiselectFormControl},S.createElement("div",{className:a.multiSelectContainer},S.createElement(I.AnalyticsList,{analyticsId:`${e}.list`,className:a.list},S.createElement(I.AnalyticsListItem,{analyticsId:`${e}.listItem`,className:a.listItem,disableGutters:!0,key:"select-all"},S.createElement(I.AnalyticsFormControlLabel,{analyticsId:`${e}.formControlLabel`,label:s,htmlFor:"select-all",control:S.createElement(I.AnalyticsCheckbox,{analyticsId:`${e}.selectAllOption`,id:"select-all",checked:"false"!==l,indeterminate:"mixed"===l,value:"indeterminate-checkbox",onChange:e=>{let t="mixed"===l||e.target.checked;null==r||r(e=>e.map(e=>({...e,checked:t}))),null==o||o(t)},inputProps:{"aria-controls":t.map(e=>`ind-checkbox-${e.value}`).join(" "),"aria-checked":l}})})))),S.createElement(nH.i,{variant:"fullWidth",className:a.divider}),S.createElement("div",{className:`${a.multiSelectContainer} with-scroll`},S.createElement(I.AnalyticsList,{analyticsId:`${e}.list`,className:a.list},t.map(t=>S.createElement(nF.W,{key:t.value,analyticsId:e,item:t,onChange:c})))))))},nO.isEqual);(c=b||(b={})).Change="change",c.Saving="saving",c.Saved="saved",c.SaveFailure="saveFailure",c.ValidationFailure="validationFailure",(v||(v={})).Assessments="assessments";var nV=n(9218),n_=n(378555),nq=n(907207),nz=n(913935);let nW=(0,A.makeStyles)(e=>(0,A.createStyles)({dndUploadArea:{boxSizing:"border-box",border:`2px dashed ${e.palette.border.main}`,backgroundColor:e.palette.background.b2,display:"flex",alignItems:"space-around",flexDirection:"column",marginTop:"8px",padding:"24px"},dndUploadComponent:{display:"flex",flexDirection:"column"},uploadArea:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",marginBottom:"12px"},uploadTitle:{textAlign:"center"},uploadButton:{border:`2px solid ${e.palette.border.dark}`,padding:"10px",fontWeight:e.typography.fontWeightSemiBold,width:"fit-content",margin:"auto"},uploadInstructions:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},uploadIcon:{marginBottom:"8px"},errorMessage:{display:"flex",alignItems:"center",flexDirection:"row",color:e.palette.error.main,margin:"12px 0px"},errorText:{margin:"0px 8px"},errorMessageContainer:{width:"100%"}})),nj=e=>{let{analyticsIdPrefix:t,instructions:n,onUploadFiles:i,errorMessage:s}=e,r=(0,j.q)(),o=nW(),a="upload-desc-text-id",l=e=>{e.preventDefault(),e.stopPropagation()};return E().createElement("div",{"data-analytics-id":`${t}.dragDropArea`,className:o.dndUploadComponent},E().createElement("div",{className:o.dndUploadArea},E().createElement("div",{onDragOver:e=>{l(e)},onDragLeave:e=>{l(e)},onDrop:e=>{l(e),i(()=>Promise.resolve(e.dataTransfer.files))},"data-testid":"dndUploadDropArea",className:o.uploadArea},E().createElement(nq.g,{className:o.uploadIcon}),E().createElement(n_.c,{variant:"h3",component:"div",className:o.uploadTitle},r("assessments.canvas.common.dndUpload.primaryInstructions")),E().createElement("div",{className:o.uploadInstructions,id:a},n)),E().createElement(nV.b,{onClick:()=>{i()},analyticsId:`${t}.dndUploadButton`,className:o.uploadButton,"aria-describedby":a},r("assessments.canvas.common.dndUpload.secondaryInstructions.uploadButtonText"))),E().createElement("div",{className:o.errorMessageContainer},s&&E().createElement("div",{className:o.errorMessage},E().createElement(nz.U,{color:"error"}),E().createElement("p",{className:o.errorText},s))))},nZ=e=>{let{sort:t,sortable:n}=e;if(!n)return null;let i=w.SortArrows;return"ascending"===t?i=w.SortArrowAscending:"descending"===t&&(i=w.SortArrowDescending),S.createElement(i,null)},nK=(0,A.makeStyles)(e=>(0,A.createStyles)({root:{position:"relative"},input:{},searchButton:{height:"40px",width:"40px"},internalInput:{marginBottom:"0 !important",border:"none !important"},inputAdorment:{paddingRight:"0 !important"},popperContainer:{boxSizing:"border-box",borderStyle:"solid",borderWidth:"1px",borderColor:e.palette.border.main,boxShadow:`${e.palette.action.focus} 0px 0px 0px 4px`,borderRadius:"2px",zIndex:1e4}}));var nX=n(441365),nY=n(296755),nQ=n(655642),nJ=n(408687),n0=n(570528);let n1={leftNavigation:"Up",rightNavigation:"Down"},n2=e=>{let t=E().useRef();return E().useEffect(()=>{t.current=e}),t.current},n3={formatMonthDayYear:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]} ${e.getDate()}, ${e.getFullYear()}`,formatMonthYear:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]} ${e.getFullYear()}`,formatMonth:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]}`,formatDay:(e,t)=>t?t(e.getDate()):e.getDate().toString(),formatYear:(e,t)=>t?t(e.getFullYear()):e.getFullYear().toString()},n9=E().forwardRef((e,t)=>{let n=(0,n0.y)(),i=(0,j.q)(),{showMonthPickerAsOverlay:s=!1,today:r=new Date,firstDayOfWeek:o=nX.eO.Sunday,dateRangeType:a=nX.NU.Day,autoNavigateOnSelection:l=!1,showGoToToday:c=!0,highlightCurrentMonth:d=!1,navigationIcons:u=n1,dateTimeFormatter:p=n3,analyticsId:m,isMonthPickerVisible:h=!0,isDayPickerVisible:g=!0}=e,f=E().useRef(null),b=E().useRef(null),v=e.value&&!isNaN(e.value.getTime())?e.value:e.today||new Date,[y,C]=E().useState(v),[S,I]=E().useState(v),[w,A]=E().useState(!1),[k,x]=E().useState(!s&&h),[T,P]=E().useState(!!s||g),D=n2(e);E().useEffect(()=>{w&&(b.current?(b.current.tabIndex=0,b.current.focus()):f.current&&(f.current.tabIndex=0,f.current.focus()),A(!1))},[w,b,f]),E().useEffect(()=>{if(D!==e){let{autoNavigateOnSelection:t,value:n=new Date}=e,i=t&&(0,nJ.aN)(n,(null==D?void 0:D.value)?D.value:n);i&&I(n),C(n||r)}},[e,D,r]),E().useImperativeHandle(t,()=>({calendarFocus:()=>{b.current&&(b.current.tabIndex=0,b.current.focus())}}));let G=e.strings?e.strings:{months:[i("cr.components.calendar.strings.months.january"),i("cr.components.calendar.strings.months.february"),i("cr.components.calendar.strings.months.march"),i("cr.components.calendar.strings.months.april"),i("cr.components.calendar.strings.months.may"),i("cr.components.calendar.strings.months.june"),i("cr.components.calendar.strings.months.july"),i("cr.components.calendar.strings.months.august"),i("cr.components.calendar.strings.months.september"),i("cr.components.calendar.strings.months.october"),i("cr.components.calendar.strings.months.november"),i("cr.components.calendar.strings.months.december")],shortMonths:[i("cr.components.calendar.strings.shortMonths.january"),i("cr.components.calendar.strings.shortMonths.february"),i("cr.components.calendar.strings.shortMonths.march"),i("cr.components.calendar.strings.shortMonths.april"),i("cr.components.calendar.strings.shortMonths.may"),i("cr.components.calendar.strings.shortMonths.june"),i("cr.components.calendar.strings.shortMonths.july"),i("cr.components.calendar.strings.shortMonths.august"),i("cr.components.calendar.strings.shortMonths.september"),i("cr.components.calendar.strings.shortMonths.october"),i("cr.components.calendar.strings.shortMonths.november"),i("cr.components.calendar.strings.shortMonths.december")],days:[i("cr.components.calendar.strings.days.sunday"),i("cr.components.calendar.strings.days.monday"),i("cr.components.calendar.strings.days.tuesday"),i("cr.components.calendar.strings.days.wednesday"),i("cr.components.calendar.strings.days.thursday"),i("cr.components.calendar.strings.days.friday"),i("cr.components.calendar.strings.days.saturday")],shortDays:[i("cr.components.calendar.strings.shortDays.sunday"),i("cr.components.calendar.strings.shortDays.monday"),i("cr.components.calendar.strings.shortDays.tuesday"),i("cr.components.calendar.strings.shortDays.wednesday"),i("cr.components.calendar.strings.shortDays.thursday"),i("cr.components.calendar.strings.shortDays.friday"),i("cr.components.calendar.strings.shortDays.saturday")],goToToday:i("cr.components.calendar.strings.goToToday"),prevMonthAriaLabel:i("cr.components.calendar.strings.prevMonthAriaLabel"),nextMonthAriaLabel:i("cr.components.calendar.strings.nextMonthAriaLabel"),prevYearAriaLabel:i("cr.components.calendar.strings.prevYearAriaLabel"),nextYearAriaLabel:i("cr.components.calendar.strings.nextYearAriaLabel")};function R(e,t){g?(I(e),A(t)):B(e)}function B(t,n){let{onSelectDate:i}=e;C(t),i&&i(t,n)}let L=s?function(e){P(!T),x(!k),e&&A(!0)}:void 0;function N(){let{today:t=new Date}=e,n=(0,nJ.e0)(t,nX.NU.Day,nX.eO.Sunday);B(t,n)}return E().createElement("div",{"data-analytics-id":m,className:(0,F.Z)("ms-DatePicker",n.root),role:"application","aria-label":i("cr.components.calendar.ariaLabelCalendar")},E().createElement("div",{className:(0,F.Z)(n.picker,n.pickerIsOpened,n.pickerIsFocused,k&&n.monthPickerVisible,k&&T&&n.calendarsInline)},E().createElement("div",{className:n.holder,onKeyDown:function(t){switch(t.key){case Z.s.Enter:case Z.s.Backspace:t.preventDefault();break;case Z.s.Escape:e.onDismiss&&e.onDismiss()}}},E().createElement("div",{className:n.frame},E().createElement("div",{className:(0,F.Z)(n.wrap,c&&n.goTodaySpacing)},T&&E().createElement(nY.X,{selectedDate:y,navigatedDate:S,today:r,onSelectDate:B,onNavigateDate:R,onDismiss:e.onDismiss,firstDayOfWeek:o,dateRangeType:a,autoNavigateOnSelection:l,strings:G,onHeaderSelect:L,navigationIcons:u,dateTimeFormatter:p,navigatedDayRef:b,analyticsId:`${m}.dayPicker`}),k&&E().createElement(nQ.C,{navigatedDate:S,strings:G,onNavigateDate:R,today:r,highlightCurrentMonth:d,onHeaderSelect:L,navigationIcons:u,dateTimeFormatter:p,navigatedMonthRef:f,analyticsId:`${m}.monthPicker`}),c&&E().createElement("span",{"data-analytics-id":`${m}.todayButton`,role:"button",className:n.goToday,onClick:N,onKeyDown:function(t){t.key===Z.s.Enter||" "===t.key?(t.preventDefault(),N()):t.key===Z.s.Tab&&!t.shiftKey&&e.onDismiss&&(t.stopPropagation(),t.preventDefault(),e.onDismiss({lostFocus:!0,focusNext:!0}))},tabIndex:0},G.goToToday))))))}),n4=(0,eQ.withAnalytics)(n9),n7=/^([\u0030-\u0039]|0?[1-9]|1[0-2])\/(0?[1-9]|[\u0660-\u0669]|[\u06F0-\u06F9]|[1-9]|[12][0-9]|3[01])\/(\d{2}|\u0660[\u0660-\u0669]|\u06F0[\u06F0-\u06F9])$/,n5=e=>{let{disabled:t,label:n,required:i,styles:s,analyticsId:r,initialDate:o,onDateValidityChanged:a}=e,l=(0,j.q)(),{formatDate:c,parseDate:d,getFirstDayOfTheWeek:u}=(0,P.h)(),p=nK(),m=E().useRef(null),[h,g]=E().useState(null),f=E().useRef(null),[b,v]=E().useState(!1),[y,C]=E().useState(!0),[S,k]=E().useState(""),x=E().useRef(null),T=(0,A.useTheme)(),D=(0,A.useMediaQuery)(T.breakpoints.down("sm")),G=E().useCallback((e,t,n=!1)=>new Promise(i=>{setTimeout(()=>{if(n){let n="string"!=typeof e?c(e,t):"";i(n)}else t===ew.ILocaleDateFormat.Short&&"string"==typeof e&&n7.test(e)||t===ew.ILocaleDateFormat.ISO?i(d(e.toString(),t,void 0)):i("")})}),[c,d]);E().useEffect(()=>{let e=D?ew.ILocaleDateFormat.ISO:ew.ILocaleDateFormat.Short;o&&G(o,e,!0).then(e=>{k("string"==typeof e?e:"")})},[o,D,G]),E().useEffect(()=>{a&&a(y)},[y,a]),E().useEffect(()=>{let e=null;return b&&(e=window.setInterval(()=>{x.current&&x.current.calendarFocus()},300)),()=>{e&&clearInterval(e)}},[b]);let R=l("cr.components.calendar.validate.empty",{labelName:n}),B=l("cr.components.calendar.validate.invalid",{labelName:n});function L(){var e;v(!1),g(null),null===(e=f.current)||void 0===e||e.focus()}let N=""===S?R:B,O=y?"":N,M=S&&n7.test(S)?d(S,ew.ILocaleDateFormat.Short):new Date,$=function(){let e;switch(u()){case"mon":e=nX.eO.Monday;break;case"tue":e=nX.eO.Tuesday;break;case"wed":e=nX.eO.Wednesday;break;case"thu":e=nX.eO.Thursday;break;case"fri":e=nX.eO.Friday;break;case"sat":e=nX.eO.Saturday;break;case"sun":e=nX.eO.Sunday;break;default:e=void 0}return e}();return E().createElement("div",{"data-analytics-id":r,className:(0,F.Z)(p.root,null==s?void 0:s.root),ref:m},E().createElement(I.AnalyticsTextField,{className:(0,F.Z)(p.input,null==s?void 0:s.input),disabled:!!t,label:n,onChange:function(t){let{onChangeDate:n}=e,i=t.target.value;k(i);let s=D?ew.ILocaleDateFormat.ISO:ew.ILocaleDateFormat.Short;G(i,s).then(e=>{e&&"object"==typeof e&&(e.setHours(0,0,0,0),n(e));let t=!!e;C(t)})},helperText:O,error:!y,required:!!i,type:D?"date":"text",value:S,InputProps:D?{}:{endAdornment:E().createElement(I.AnalyticsInputAdornment,{id:"date-picker-action",position:"end",disableTypography:!0,analyticsId:`${r}.input.adornment`},E().createElement(I.AnalyticsIconButton,{"aria-label":l("course.announcements.datePicker.dueDate"),disabled:!!t,onClick:()=>{var e;g(m.current),null===(e=null==f?void 0:f.current)||void 0===e||e.focus(),v(!0)},ref:f,analyticsId:`${r}.open.button`},E().createElement(w.Calendar,null))),"aria-describedby":"date-picker-action",classes:{root:p.inputAdorment}},inputProps:{className:p.internalInput,"aria-label":n},analyticsId:`${r}.textfield`}),(b||"number"==typeof $)&&!D&&E().createElement(I.AnalyticsPopper,{anchorEl:h,className:p.popperContainer,open:b,analyticsId:`${r}.popper`,placement:"top"},E().createElement(I.AnalyticsClickAwayListener,{onClickAway:L,analyticsId:`${r}.clickaway`},E().createElement("div",null,E().createElement(n4,{autoNavigateOnSelection:!0,highlightCurrentMonth:!0,isMonthPickerVisible:!1,onDismiss:L,onSelectDate:function(t){let{onChangeDate:n}=e;G(t,ew.ILocaleDateFormat.Short,!0).then(e=>{n(t),k("string"==typeof e?e:""),C(!0)}),L()},ref:x,showGoToToday:!0,showMonthPickerAsOverlay:!0,value:M,dateTimeFormatter:{formatMonthDayYear:(e,t)=>c(e,ew.ILocaleDateFormat.Full),formatMonthYear:(e,t)=>c(e,ew.ILocaleDateFormat.MonthAndYear),formatMonth:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]}`,formatDay:e=>e.getDate().toString(),formatYear:e=>e.getFullYear().toString()},firstDayOfWeek:$,analyticsId:`${r}.calendar`})))))};var n6=n(998092);let n8=(0,A.makeStyles)(e=>({container:{padding:"0 16px",display:"none",[e.breakpoints.up("sm")]:{display:"flex"}},smallAndMediumOnlyContainer:{display:"flex",[e.breakpoints.up("md")]:{display:"none"}},chevron:{transition:"color 250ms cubic-bezier(0.55, 0, 0.1, 1), transform 250ms cubic-bezier(0.55, 0, 0.1, 1)",color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}},chevronOpen:{transform:"rotate(180deg)"}})),ie=e=>{let{open:t,hideOnDesktop:n}=e,i=n8(e);return E().createElement("div",{className:(0,F.Z)(i.container,n&&i.smallAndMediumOnlyContainer)},E().createElement(n6._,{className:(0,F.Z)(i.chevron,t&&i.chevronOpen)}))};var it=n(49678),ii=n(688580);let is=(e,t,n)=>{let[i,s,r]=e;return E().createElement(E().Fragment,null,i,t,s,n,r)},ir='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';(d=y||(y={}))[d.NextElementInList=0]="NextElementInList",d[d.More=1]="More";let io=(0,S.memo)(({items:e,maxItems:t=e.length,analyticsId:n,canExpand:i=!1,collapseKey:s="global.close",moreKey:r="components.services.localize.items.more.plural"})=>{(t<=0||t>e.length)&&(t=e.length);let o=(0,it.y)(),a=(0,j.q)(),[l,c]=(0,S.useState)(!1),d=l?e.length:t,u=(0,ii.t)(),p=(0,S.useRef)(null),m=(0,S.useRef)(null),[h,g]=(0,S.useState)(void 0),f=(0,S.useRef)(-1);if((0,S.useLayoutEffect)(()=>{var e;if(null===p.current||l||(f.current=p.current.querySelectorAll(ir).length-1),p.current&&h===y.NextElementInList){let t=p.current.querySelectorAll(ir).item(f.current);null==t||t.focus(),t||null===(e=m.current)||void 0===e||e.focus()}},[e,l,h]),0===e.length)return null;if(1===e.length)return E().createElement(E().Fragment,null,e[0]);if(2===e.length&&2===t)return is(u[2],e[0],e[1]);let b=`${n}.items`,v=a(r,{count:e.length-d}),C=i?E().createElement(I.AnalyticsButtonBase,{analyticsId:`${n}.more`,onClick:()=>{c(!0),g(y.NextElementInList)},autoFocus:h===y.More,className:o.button,"aria-expanded":l,"aria-controls":b},v):v;if(1===d)return is(u[2],e[0],C);let w=is(u.start,e[0],e[1]);if(e.length>d){for(let t=2;t<d;t++)w=is(u.middle,w,e[t]);w=is(u.end,w,C)}else for(let t=2;t<e.length;t++)w=is(t===e.length-1?u.end:u.middle,w,e[t]);return E().createElement(E().Fragment,null,E().createElement("span",{id:b,ref:p},w),l?E().createElement(I.AnalyticsButtonBase,{analyticsId:`${n}.close`,"aria-expanded":l,"aria-controls":b,onClick:()=>{c(!1),g(y.More)},ref:m,className:(0,F.Z)(o.button,o.close)},a(s)):void 0)});var ia=n(124860);function il(e){return Object.keys(e).map(e=>parseInt(e,10)).sort()}function ic(e){return Object.entries(e).map(([e,t])=>[parseInt(e,10),t]).sort(([e],[t])=>e-t)}let id=E().createContext({activate:()=>({}),activateRelativeCell:()=>({}),activateRelativeRow:()=>({}),capture:()=>void 0,cells:{},getCell:()=>({active:!1,captured:!1,index:0}),getRow:()=>({active:!1,captured:!1,index:0,selected:void 0}),grid:{captured:!1},rows:{},select:()=>void 0,selected:{}});function iu(e,t,n,i){var s,r,o;if(t)return t;let a=null!=n?n:null==i?void 0:i[0],l=null==i?void 0:i[1],c=il(e),d=void 0!==a?c.indexOf(a):-1,u=-1!==d?c[d]:null!==(s=c[0])&&void 0!==s?s:-1,p=il(null!==(r=e[u])&&void 0!==r?r:{}),m=void 0!==l?p.indexOf(l):-1,h=-1!==m?p[m]:null!==(o=p[0])&&void 0!==o?o:-1;return{row:u,cell:h}}let ip=({children:e})=>{let[t,n]=(0,S.useState)(),[i,s]=(0,S.useState)(),[r,o]=(0,S.useState)(()=>({captured:!1})),[a,l]=(0,S.useState)({}),[c,d]=(0,S.useState)({}),u=(0,S.useRef)(),p=(0,S.useRef)(),m=(0,S.useCallback)((e,{defaultActive:t=!1}={})=>{if(e in a)return a[e];let n={active:!1,captured:!1,index:e,selected:!1};return t&&void 0===u.current&&(u.current=e),l(t=>({...t,[e]:n})),n},[a]),h=(0,S.useCallback)((e,t,{defaultActive:n=!1}={})=>{if(e in c&&t in c[e])return c[e][t];let i={active:!1,captured:!1,index:t};return n&&void 0===p.current&&(p.current=[e,t]),d(n=>({...n,[e]:{...n[e],[t]:i}})),i},[c]),g=(0,nn.zX)(e=>{o(t=>t.captured!==e?{...t,captured:e}:t)}),f=(0,nn.zX)((e,t)=>{s((n={})=>n[e]!==t?{...n,[e]:t}:n)}),b=(0,nn.zX)((e,i,s=!1)=>{var r;let o=t?{row:m(t.row),cell:h(t.row,t.cell)}:void 0;if(!(null===(r=c[e])||void 0===r?void 0:r[i]))return{prev:o,next:o};let a={row:m(e),cell:h(e,i)};return o&&a.row===o.row&&a.cell===o.cell?{prev:o,next:o}:(g(s),n({row:e,cell:i}),{prev:o,next:a})}),v=(0,nn.zX)((e,n)=>{let i=iu(c,t,u.current,p.current),s=il(c[i.row]),r=s.indexOf(i.cell),o=Math.max(0,Math.min(s.length-1,r+e));return b(i.row,s[o],n)}),y=(0,nn.zX)((e,n)=>{var i;let s=iu(c,t,u.current,p.current),r=il(c),o=r.indexOf(s.row),a=Math.max(0,Math.min(r.length,o+e)),l=r[a],d=il(null!==(i=c[l])&&void 0!==i?i:{}).reverse(),m=d.findIndex(e=>e<=s.cell),h=-1===m?d.length-1:m;return b(l,d[h],n)});(0,S.useEffect)(()=>{var e;let{row:n=-1,cell:i=-1}=null!=t?t:{},s=a[n],r=null===(e=c[n])||void 0===e?void 0:e[i];o(e=>{var t,n;return(null===(t=e.active)||void 0===t?void 0:t.row)!==s||(null===(n=e.active)||void 0===n?void 0:n.cell)!==r?{...e,active:s&&r?{cell:r,row:s}:void 0}:e})},[t,c,a]),(0,S.useEffect)(()=>{let{row:e,cell:n}=iu(c,t,u.current,p.current),s=(t,n)=>e>-1?t===e:0===n,o=(e,t)=>n>-1?e===n:0===t;l(e=>{let t=!1,n=ic(e).reduce((e,[n,o],a)=>{let l=s(n,a),c=l&&r.captured,d=void 0===i?void 0:!0===i[n],u=o.active!==l||o.captured!==c||o.selected!==d;return t=t||u,{...e,[n]:u?{...o,active:l,captured:c,selected:d}:o}},{});return t?n:e}),d(e=>{let t=!1,n=ic(e).reduce((e,[n,i],a)=>{let l=!1,c=s(n,a),d=ic(i).reduce((e,[n,i],s)=>{let a=c&&o(n,s),d=a&&r.captured,u=i.active!==a||i.captured!==d;return l=l||u,t=t||u,{...e,[n]:u?{...i,active:a,captured:d}:i}},{});return{...e,[n]:l?d:i}},{});return t?n:e})},[t,c,r.captured,i]);let C=(0,S.useMemo)(()=>({activate:b,activateRelativeCell:v,activateRelativeRow:y,active:t,capture:g,cells:c,getCell:h,getRow:m,grid:r,rows:a,select:f,selected:i}),[b,v,y,t,g,r,c,a,h,m,f,i]);return E().createElement(id.Provider,{value:C},e)};function im(){let{activate:e,activateRelativeCell:t,activateRelativeRow:n,capture:i,grid:s}=(0,S.useContext)(id);return(0,S.useMemo)(()=>({activate:e,activateRelativeCell:t,activateRelativeRow:n,grid:s,uncapture:()=>i(!1)}),[e,t,n,i,s])}function ih(e){let t=(0,S.useRef)(e),n=(0,S.useCallback)(e=>{t.current=e},[]);return[t,n]}function ig(...e){let t=(0,S.useCallback)(t=>{for(let n of e)n(t)},e);return t}var ib=n(139867);function iv(e,t,n){let[i,s]=ih(null),r=(0,nn.zX)(t);return(0,S.useEffect)(()=>{let t=i.current;function s(e){r.call(this,e)}return null==t||t.addEventListener(e,s,n),()=>null==t?void 0:t.removeEventListener(e,s,n)},[e,JSON.stringify(n)]),{targetRefCb:s}}let iy={isActivateCellEvent:()=>!0,isNextCellEvent:e=>"ArrowRight"===e.key,isNextRowEvent:e=>"ArrowDown"===e.key,isPreviousCellEvent:e=>"ArrowLeft"===e.key,isPreviousRowEvent:e=>"ArrowUp"===e.key},iC={isCaptureEvent:e=>"Enter"===e.key,isUncaptureEvent:e=>"Escape"===e.key},iS={isSelectActiveRowEvent:e=>e.shiftKey&&" "===e.key||"Enter"===e.key,isSelectToggleEvent:e=>e.shiftKey},iE=E().createContext({autoFocusRef:{current:!1},capture:iC,focus:()=>void 0,focusSignal:0,navigation:iy,selecting:!1,setSelecting:()=>void 0}),iI=({capture:e=iC,children:t,navigation:n=iy,select:i=!1})=>{var s,r,o,a,l,c,d,u,p;let m=(0,S.useRef)(!1),[h,g]=(0,S.useState)(!1),[f,b]=(0,S.useState)(0),v=(0,nn.zX)(null!==(s=n.isActivateCellEvent)&&void 0!==s?s:iy.isActivateCellEvent),y=(0,nn.zX)(null!==(r=n.isNextCellEvent)&&void 0!==r?r:iy.isNextCellEvent),C=(0,nn.zX)(null!==(o=n.isNextRowEvent)&&void 0!==o?o:iy.isNextRowEvent),I=(0,nn.zX)(null!==(a=n.isPreviousCellEvent)&&void 0!==a?a:iy.isPreviousCellEvent),w=(0,nn.zX)(null!==(l=n.isPreviousRowEvent)&&void 0!==l?l:iy.isPreviousRowEvent),A=(0,S.useMemo)(()=>({isActivateCellEvent:v,isNextCellEvent:y,isNextRowEvent:C,isPreviousCellEvent:I,isPreviousRowEvent:w}),[v,y,C,I,w]),k=(0,nn.zX)(null!==(c=e.isCaptureEvent)&&void 0!==c?c:iC.isCaptureEvent),x=(0,nn.zX)(null!==(d=e.isUncaptureEvent)&&void 0!==d?d:iC.isCaptureEvent),T=(0,S.useMemo)(()=>({isCaptureEvent:k,isUncaptureEvent:x}),[k,x]),P=i?!0===i?iS:i:void 0,D=(0,nn.f0)(P?null!==(u=P.isSelectActiveRowEvent)&&void 0!==u?u:iS.isSelectActiveRowEvent:void 0),G=(0,nn.f0)(P?null!==(p=P.isSelectToggleEvent)&&void 0!==p?p:iS.isSelectToggleEvent:void 0),R=(0,S.useMemo)(()=>{if(D&&G)return{isSelectActiveRowEvent:D,isSelectToggleEvent:G}},[D,G]),B=(0,nn.zX)(()=>b(e=>e+1)),L=(0,S.useMemo)(()=>({autoFocusRef:m,capture:T,focus:B,focusSignal:f,navigation:A,select:R,selecting:h,setSelecting:g}),[T,B,f,A,R,h]);return E().createElement(iE.Provider,{value:L},t)},iw=E().createContext({index:0,row:{active:!1,captured:!1,index:0,selected:void 0}}),iA=({defaultActive:e,index:t,children:n,selected:i})=>{let{getRow:s,select:r}=(0,S.useContext)(id),o=(0,S.useRef)(e),a=(0,S.useMemo)(()=>({index:t,row:s(t,{defaultActive:o.current})}),[t,s]);return(0,S.useEffect)(()=>{"boolean"==typeof i&&r(t,i)},[t,r,i]),E().createElement(iw.Provider,{value:a},n)};function ik(){let{grid:e}=(0,S.useContext)(id),{row:t}=(0,S.useContext)(iw);return(0,S.useMemo)(()=>({grid:e,row:t}),[e,t])}let ix=E().createContext({addSelectListener:()=>void 0,onSelect:()=>void 0,removeSelectListener:()=>void 0,selectListeners:[]}),iT=({children:e})=>{let[t,n]=(0,S.useState)([]),i=(0,S.useCallback)(e=>n(t=>t.concat(e)),[]),s=(0,S.useCallback)(()=>t.forEach(e=>e()),[t]),r=(0,S.useCallback)(e=>n(t=>t.filter(t=>t!==e)),[]),o=(0,S.useMemo)(()=>({addSelectListener:i,onSelect:s,removeSelectListener:r,selectListeners:t}),[i,s,r,t]);return E().createElement(ix.Provider,{value:o},e)};function iP({onSelect:e}){let{addSelectListener:t,removeSelectListener:n}=(0,S.useContext)(ix),i=(0,nn.f0)(e);(0,S.useEffect)(()=>{if(i)return t(i),()=>n(i)},[i,t,n])}let iD=E().createContext({index:0,cell:{active:!1,captured:!1,index:0}}),iG=({defaultActive:e,index:t,children:n})=>{let{getCell:i}=(0,S.useContext)(id),{index:s}=(0,S.useContext)(iw),r=(0,S.useRef)(e),o=(0,S.useMemo)(()=>({index:t,cell:i(s,t,{defaultActive:r.current})}),[t,i,s]);return E().createElement(iD.Provider,{value:o},n)};function iR(){let{activate:e,capture:t,grid:n}=(0,S.useContext)(id),{row:i}=(0,S.useContext)(iw),{cell:s}=(0,S.useContext)(iD),r=(0,nn.zX)((n=!1)=>{e(i.index,s.index),n&&t(!0)}),o=(0,nn.zX)(()=>{s.active&&t(!0)}),a=(0,nn.zX)(()=>{s.active&&t(!1)});return(0,S.useMemo)(()=>({activate:r,capture:o,cell:s,grid:n,row:i,uncapture:a}),[r,o,s,n,i,a])}function iB(){let e=im(),t=function(){let{focus:e,selecting:t}=(0,S.useContext)(iE),{grid:n}=im();return(0,S.useMemo)(()=>({focus:e,selecting:t&&!n.captured}),[e,t,n.captured])}(),n=(0,S.useMemo)(()=>({props:{role:"grid"}}),[]);return(0,S.useMemo)(()=>({...e,...t,...n}),[e,t,n])}let iL=({children:e,...t})=>{let{gridRefCb:n}=function(){let{gridRefCb:e}=function(){let{grid:e}=(0,S.useContext)(id),{navigation:t}=(0,S.useContext)(iE),{activateRelativeCell:n,activateRelativeRow:i}=im(),{targetRefCb:s}=iv("keydown",s=>{let r=e=>{e.prev!==e.next&&s.preventDefault(),(0,ib.g)()};!e.captured&&(t.isNextCellEvent(s)?r(n(1)):t.isPreviousCellEvent(s)?r(n(-1)):t.isNextRowEvent(s)?r(i(1)):t.isPreviousRowEvent(s)&&r(i(-1)))});return(0,S.useMemo)(()=>({gridRefCb:s}),[s])}(),{gridRefCb:t}=function(){let{select:e,setSelecting:t}=(0,S.useContext)(iE),{targetRefCb:n}=iv("keydown",n=>{let i=null==e?void 0:e.isSelectToggleEvent(n);void 0!==i&&t(i)});return(0,S.useMemo)(()=>({gridRefCb:n}),[n])}(),n=ig(e,t);return(0,S.useMemo)(()=>({gridRefCb:n}),[n])}(),{props:i}=iB();return E().createElement("div",{ref:n,...i,...t},e)},iN=({children:e,...t})=>E().createElement(ip,{...t},E().createElement(iI,{...t},e)),iO=({children:e,htmlProps:t,...n})=>E().createElement(iN,{...n},E().createElement(iL,{...t},e)),iM=E().createContext({capture:!1}),i$=({capture:e=!1,children:t})=>{let n=(0,S.useMemo)(()=>({capture:e}),[e]);return E().createElement(iM.Provider,{value:n},t)};function iH({onSelect:e}={}){let t=ik();iP({onSelect:e});let n=function(){let{row:{selected:e,index:t}}=ik();return(0,S.useMemo)(()=>({props:{...void 0!==e?{"aria-selected":e}:void 0,"aria-rowindex":t,role:"row"}}),[t,e])}();return(0,S.useMemo)(()=>({...t,...n}),[t,n])}let iF=({children:e,...t})=>{let{props:n}=iH(),{rowRefCb:i}=function(){let{grid:e}=im(),{row:t}=ik(),{select:n,selecting:i}=(0,S.useContext)(iE),{onSelect:s}=(0,S.useContext)(ix);(0,S.useEffect)(()=>{n&&!e.captured&&t.active&&i&&s()},[t.active]);let{targetRefCb:r}=iv("keydown",t=>{n&&!e.captured&&n.isSelectActiveRowEvent(t)&&(t.preventDefault(),s(),(0,ib.g)())}),o=(0,nn.zX)(e=>n?r(e):r(null));return(0,S.useMemo)(()=>({rowRefCb:o}),[o])}();return E().createElement("div",{ref:i,...n,...t},e)},iU=({children:e,...t})=>E().createElement(iA,{...t},E().createElement(iT,{...t},e)),iV=({children:e,htmlProps:t,...n})=>E().createElement(iU,{...n},E().createElement(iF,{...t},e));function i_(){let e=iR(),t=function(){let{capture:e}=(0,S.useContext)(iM),{activate:t,cell:n,uncapture:i}=iR(),[s,r]=ih(null),{targetRefCb:o}=iv("focusin",()=>{e&&t(!0)}),{targetRefCb:a}=iv("focusout",()=>{i()});(0,S.useEffect)(()=>{var e;n.captured&&(null===(e=s.current)||void 0===e||e.focus())},[s,n.captured]);let l=ig(r,o,a);return(0,S.useMemo)(()=>({controlRefCb:l}),[l])}(),n=function(){let{cell:{active:e,captured:t,index:n},row:{selected:i}}=iR();return(0,S.useMemo)(()=>({props:{...void 0!==i?{"aria-selected":i}:void 0,"aria-colindex":n,role:"gridcell",tabIndex:e&&!t?0:-1}}),[e,t,n,i])}();return(0,S.useMemo)(()=>({...e,...t,...n}),[e,t,n])}function iq(e){return t=>{let n=iB(),i=iH(),s=i_(),r={...t,ariaGrid:n,ariaGridRow:i,ariaGridCell:s};return E().createElement(e,{...r})}}let iz=({children:e,className:t,...n})=>{let{props:i}=i_(),{cellRefCb:s}=function(){let{cellRefCb:e}=function(){let{autoFocusRef:e,focusSignal:t,navigation:n}=(0,S.useContext)(iE),{activate:i,cell:s}=iR(),[r,o]=ih(null),{targetRefCb:a}=iv("mousedown",e=>{n.isActivateCellEvent(e)&&i()}),{targetRefCb:l}=iv("focusin",t=>{t.target===r.current&&(e.current=!0)}),{targetRefCb:c}=iv("focusout",t=>{t.target===r.current&&(e.current=!1)});(0,S.useEffect)(()=>{var e;s.active&&(null===(e=r.current)||void 0===e||e.focus())},[r,t]),(0,S.useEffect)(()=>{var t;e.current&&s.active&&!s.captured&&(null===(t=r.current)||void 0===t||t.focus())},[e,r,s.active,s.captured]);let d=ig(l,c,o,a);return(0,S.useMemo)(()=>({cellRefCb:d}),[d])}(),{cellRefCb:t}=function(){let{capture:e,focus:t}=(0,S.useContext)(iE),{capture:n}=(0,S.useContext)(iM),{capture:i,grid:s,uncapture:r}=iR(),{targetRefCb:o}=iv("keydown",o=>{!s.captured&&n&&e.isCaptureEvent(o)?(i(),(0,ib.g)()):s.captured&&e.isUncaptureEvent(o)&&(r(),t(),(0,ib.g)())});return(0,S.useMemo)(()=>({cellRefCb:o}),[o])}(),n=ig(e,t);return(0,S.useMemo)(()=>({cellRefCb:n}),[n])}();return E().createElement("div",{ref:s,...i,...n},e)},iW=({children:e,...t})=>E().createElement(iG,{...t},E().createElement(i$,{...t},e)),ij=({children:e,htmlProps:t,...n})=>E().createElement(iW,{...n},E().createElement(iz,{...t},e)),iZ=(0,A.createStyles)({checkboxMarginFix:{marginInlineStart:"-4px"},switchMarginFix:{marginInlineStart:"-8px"}}),iK=(0,A.makeStyles)(iZ),iX=(0,A.makeStyles)(()=>(0,A.createStyles)({root:{display:"flex",alignItems:"center"}})),iY=e=>{let{analyticsId:t,label:n,minLabel:i,maxLabel:s,value:r,onValueChange:o}=e,a=iX();return E().createElement("div",{className:e.className},E().createElement(I.AnalyticsTypography,{id:t,component:"label",variant:"h4"},n),E().createElement("div",{className:a.root},E().createElement(I.AnalyticsTypography,{component:"span",variant:"h4"},i),E().createElement(I.Slider,{analyticsId:t,value:r,step:e.step,min:e.min,max:e.max,disabled:e.disabled,defaultValue:e.defaultValue,valueLabelDisplay:e.valueLabelDisplay,"aria-labelledby":t,onChange:(e,t)=>{"number"==typeof t&&o(t)}}),E().createElement(I.AnalyticsTypography,{component:"span",variant:"h4"},s)))},iQ=(0,A.makeStyles)(e=>(0,A.createStyles)({generatedContentLayout:{display:"flex",flexDirection:"column",height:"100%",[e.breakpoints.up("sm")]:{display:"grid",gridTemplateColumns:"360px",gridTemplateRows:"1fr auto",gridTemplateAreas:`
        "inputPanel contentPanel"
        "inputPanel panelFooter"
      `}},inputPanelPosition:{borderBottom:`1px solid ${e.palette.border.main}`,[e.breakpoints.up("sm")]:{borderBottom:0,borderRight:`1px solid ${e.palette.border.main}`,gridArea:"inputPanel"}},generatedContentPanelRoot:{display:"flex",flexDirection:"column"},generatedContentPanelFooter:{[e.breakpoints.up("sm")]:{gridArea:"panelFooter"}},generatedContentPreviewRoot:{flex:"1 1 auto",display:"flex",flexDirection:"column",padding:"32px",paddingRight:"64px",[e.breakpoints.up("sm")]:{gridArea:"contentPanel",minHeight:"100%",height:"0",overflowY:"auto"}},generatingContentProgress:{margin:"auto"},panelFooterWarning:{display:"flex",alignItems:"center",marginRight:"auto",gap:"8px"}})),iJ=(0,A.makeStyles)(()=>(0,A.createStyles)({inputPanelRoot:{display:"flex",flexDirection:"column",padding:"28px"},submitGenerate:{marginRight:"auto"},generateInputRow:{marginTop:"15px"}})),i0=(0,A.makeStyles)(e=>(0,A.createStyles)({generatedContentPreviewList:{"& > $generatedContentPreviewItem + $generatedContentPreviewItem":{borderTop:`1px solid ${e.palette.border.main}`,marginTop:"30px",paddingTop:"30px"}},generatedContentPreviewItem:{display:"flex"},itemSelection:{marginRight:"12px"}}));function i1(e){let t=Array(e.length).fill(!1);return{checkedState:t}}function i2(e){let{analyticsId:t,generatedItems:n,renderItem:i,onSelectionChanged:s}=e,r=i0(),o=iK(),[a,l]=(0,S.useReducer)(function(e,t){let i=e.checkedState.map((e,n)=>t.index===n?!e:e),r=[];return i.forEach((e,t)=>{e&&r.push(n[t])}),s(r),{checkedState:i}},n,i1);return E().createElement("div",{className:r.generatedContentPreviewList},n.map((e,n)=>E().createElement("div",{className:r.generatedContentPreviewItem,key:e.key},E().createElement(I.AnalyticsCheckbox,{inputProps:{"aria-label":e.label},analyticsId:`${t}.${n}.checkbox`,className:(0,F.Z)(o.checkboxMarginFix,r.itemSelection),checked:!!a.checkedState[n],value:n,onChange:()=>l({index:n})}),i(e,n))))}},270850:function(e,t,n){"use strict";function i(e){var t,n;let i=e.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(null!==(t=window.innerHeight)&&void 0!==t?t:document.documentElement.clientHeight)&&i.right<=(null!==(n=window.innerWidth)&&void 0!==n?n:document.documentElement.clientWidth)}function s(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function r(e){let t=e.getAttribute("tabindex");e.setAttribute("tabindex","-1"),e.focus({preventScroll:!0}),t&&e.setAttribute("tabindex",t),i(e)||e.scrollIntoView({behavior:"smooth"})}n.d(t,{Lt:function(){return a},PZ:function(){return i},bx:function(){return r},fw:function(){return o},hD:function(){return l},hr:function(){return s}});let o=(e,t,n=0)=>{let i=e.map(e=>({value:`${e}`,label:t(e+n)}));return i},a=e=>Math.max(4e3,Math.ceil(e.length/20*1e3));function l(e,t,n){return"function"==typeof e.closest?e.closest(`a, button, .${t}, .${n}`):null}},844449:function(e,t,n){"use strict";async function i(e,t,n,i){let s=await new Promise((t,n)=>{let i=new Image,s=()=>{o(),t(i)},r=e=>{o(),n(e)},o=()=>{i.removeEventListener("load",s),i.removeEventListener("error",r)};i.addEventListener("load",s),i.addEventListener("error",r),i.src=`${e}?noSignedURL=true`}),r=document.createElement("canvas");r.width=t.width>i?t.width:i,r.height=t.height>n?t.height:n;let o=r.getContext("2d");return null==o||o.drawImage(s,t.x,t.y,t.width,t.height,0,0,r.width,r.height),new Promise(t=>{r.toBlob(n=>{t(new File([n],function(e){let t=function(e){let t=e.lastIndexOf("/")+1,n=e.lastIndexOf(".");return e.slice(t,n)}(e);return`${t}.png`}(e),{type:"image/png"}))})})}n.d(t,{c:function(){return i}})},722556:function(e,t,n){"use strict";n.d(t,{AT:function(){return r.A},Nz:function(){return s.N},cw:function(){return r.c},g6:function(){return i.g6},jI:function(){return i.jI}});var i=n(239849),s=n(137301),r=n(784019)},298433:function(e,t,n){"use strict";var i,s;n.d(t,{A:function(){return r},c:function(){return i}}),(s=i||(i={})).Aborted="Aborted",s.Unknown="Unknown",s.API="API";class r{constructor(e){this._type=e}get errorType(){return this._type}}},128747:function(e,t){"use strict";t.Z=new class{constructor(){this.baseUrl=""}setBaseUrl(e){this.baseUrl=e}getUrl(e){if(!this.baseUrl)throw Error("UrlManager cannot build a URL without first being initialized with a base URL!");return new URL(null!=e?e:"",this.baseUrl).toString()}}},810309:function(e,t,n){"use strict";n.d(t,{D4:function(){return Y},GJ:function(){return c},Bk:function(){return J},p7:function(){return r},sh:function(){return s},w4:function(){return p},Me:function(){return f},vQ:function(){return g}});let i="ui.course.content.opened";function s(e){return{type:i,content:e}}function r(e){return{type:"ui.course.content.closed",content:e}}var o,a,l,c,d=n(951248),u=n(408027);function p(e){var t,n;let i=null!==(t=e.state)&&void 0!==t?t:u.aql.None;if(!(null===(n=e.permissions)||void 0===n?void 0:n.canHaveReviewState))return null;if(function(e){let t=d.GQk.RusticiScorm.isEqualTo(e.contentHandler);return t?!function(e){var t,n;let i=null===(t=e.contentHandler)||void 0===t?void 0:t.toString(),s=null;if(i){let t=null===(n=e.contentDetail&&e.contentDetail[i])||void 0===n?void 0:n.gradebookItems;t&&(s=t.find(e=>e.root)||t[0])}return!!(s&&s.gradingColumn)}(e):!!e.inSequence}(e)){if(i!==u.aql.Completed)return u.aql.Completed}else if(!(i===u.aql.Started||i===u.aql.Completed))return u.aql.Started;return null}var m=n(714772);function*h(e){var t;let n=e.content,i=null==n?void 0:n.id,s=null==n?void 0:n.courseId;if(!n||!i||!s||!(null===(t=n.permissions)||void 0===t?void 0:t.canHaveReviewState))return;let r=yield(0,m.Ys)(e=>d.Ys.contentReviewState.getContentReviewStateForContextUser(e,i)),o=function(e,t){var n;let i=null!=t?t:u.aql.None;return(null===(n=e.permissions)||void 0===n?void 0:n.canHaveReviewState)&&i===u.aql.None?e.inSequence?function(e){var t;let n=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString(),i=n?d.GQk.parse(n):void 0;switch(i){case null:case void 0:case d.GQk.Unknown:return null;case d.GQk.Folder:return d.AaE.isBbPage(e)?u.aql.Started:u.aql.Completed;case d.GQk.ClassicAssignment:case d.GQk.Discussion:case d.GQk.Journal:case d.GQk.LtiLink:case d.GQk.RusticiScorm:case d.GQk.TestLink:case d.GQk.UltraAssignment:return u.aql.Started;default:return u.aql.Completed}}(e):function(e){let t=null==e?void 0:e.contentHandler;switch(t){case void 0:case d.GQk.Unknown:return null;default:return u.aql.Started}}(e):null}(n,r);if(o){let e=yield(0,m.Ys)(e=>d.Ys.contentReviewState.getLoadingStatusForContentReviewStateForContextUser(e,i));if(e)return;yield(0,m.xN)((0,d._X4)(d.Nwg.contentReviewState.persistContentReviewState(s,i,o)))}}var g={autoContentReviewStateSaga:function*(){yield(0,m.ib)(i,h)}};function f(e){switch(e){case u.aql.Started:return u.aql.Completed;case u.aql.Completed:return u.aql.Started;default:return null}}var b=n(202784),v=n.n(b),y=n(398435),C=n(410628),S=n(906277),E=n(281699);let I=(0,E.makeStyles)(e=>(0,E.createStyles)({root:{backgroundColor:e.palette.background.paper,padding:"28px 32px",borderBottom:`1px solid ${e.palette.border.main}`,margin:"0 -30px"},chart:{height:"25px",display:"grid",margin:"0 -2px 3px"},chartLine:{border:"2px solid #FFF",height:"19px",borderRadius:"10px",gridColumn:1,gridRow:1},chartLineUnopened:{backgroundColor:e.palette.secondary.main,width:"100%"},chartLineStarted:{backgroundColor:e.palette.primary.main},chartLineCompleted:{backgroundColor:e.palette.brand.main},legend:{display:"flex",justifyContent:"space-between"},legendLabels:{display:"flex",listStyle:"none",flexDirection:"column",margin:0,[e.breakpoints.up("sm")]:{flexDirection:"row"}},legendLabel:{margin:"2px 0",display:"inline-flex",alignItems:"center",[e.breakpoints.up("sm")]:{margin:0,padding:"0 10px",borderRight:`1px solid ${e.palette.border.main}`,"&:first-child":{paddingLeft:0},"&:last-child":{borderRight:0}}},legendBubble:{width:"12px",height:"12px",display:"inline-block",borderRadius:"6px",marginRight:"6px"},legendBubbleUnopened:{backgroundColor:e.palette.secondary.main},legendBubbleStarted:{backgroundColor:e.palette.primary.main},legendBubbleCompleted:{backgroundColor:e.palette.brand.main}}));var w=n(273386);let A=e=>{let t=(0,w.pJ)(t=>d.Ys.contentReviewState.getContentReviewStateUsersReportStates(t,e.contentId)),n=(0,w.Lx)();return((0,b.useEffect)(()=>{null!=t&&t.isLoading||null!=t&&t.states||n(d.Nwg.contentReviewState.fetchContentReviewStateUsersReportStates(e))},[n,null==t?void 0:t.isLoading,null==t?void 0:t.states]),null==t?void 0:t.states)?null==t?void 0:t.states:{[u.aql.None]:0,[u.aql.Unlocked]:0,[u.aql.Started]:0,[u.aql.Completed]:0}},k=e=>{let{analyticsId:t,courseId:n,contentId:i,requiresManualMarking:s}=e,r=I(e),o=(0,C.q)(),a=A({courseId:n,contentId:i}),l=(0,w.gH)("courseContent","courseContent.organization"),{completedStyle:c,startedStyle:d,unopenedCount:u,startedCount:p,completedCount:m,totalCount:h}=v().useMemo(()=>{let e=a.Completed,t=a.Started,n=a.Unlocked+a.None,i=e+t+n,s=100*e/i,r={width:`${s}%`},o={width:`${s+100*t/i}%`};return{completedStyle:r,startedStyle:o,unopenedCount:n,startedCount:t,completedCount:e,totalCount:i}},[a]),g=s?"courseContent.contentProgress.breakdown.markedComplete":"courseContent.contentProgress.breakdown.completed";return v().createElement("div",{className:r.root},v().createElement("h2",null,o("courseContent.contentProgress.breakdown.progressSummary")),v().createElement("div",{className:r.chart,"aria-hidden":"true"},v().createElement(y.AnalyticsTooltip,{analyticsId:`${t}.unopened`,title:o("courseContent.contentProgress.breakdown.unopened",{count:u}),placement:"bottom-end"},v().createElement("div",{className:(0,S.Z)(r.chartLine,r.chartLineUnopened),"data-testid":"content-progress-breakdown-unopened"})),p>0?v().createElement(y.AnalyticsTooltip,{analyticsId:`${t}.started`,title:o("courseContent.contentProgress.breakdown.started",{count:p}),placement:"bottom-end"},v().createElement("div",{className:(0,S.Z)(r.chartLine,r.chartLineStarted),style:d,"data-testid":"content-progress-breakdown-started"})):void 0,m>0?v().createElement(y.AnalyticsTooltip,{analyticsId:`${t}.completed`,title:o(g,{count:m}),placement:"bottom-end"},v().createElement("div",{className:(0,S.Z)(r.chartLine,r.chartLineCompleted),style:c,"data-testid":"content-progress-breakdown-completed"})):void 0),v().createElement("div",{className:r.legend},v().createElement("ul",{className:r.legendLabels},v().createElement("li",{className:r.legendLabel},v().createElement("span",{className:(0,S.Z)([r.legendBubble,r.legendBubbleCompleted]),"aria-hidden":"true"}),o(g,{count:m})),v().createElement("li",{className:r.legendLabel},v().createElement("span",{className:(0,S.Z)([r.legendBubble,r.legendBubbleStarted]),"aria-hidden":"true"}),o("courseContent.contentProgress.breakdown.started",{count:p})),v().createElement("li",{className:r.legendLabel},v().createElement("span",{className:(0,S.Z)([r.legendBubble,r.legendBubbleUnopened]),"aria-hidden":"true"}),o("courseContent.contentProgress.breakdown.unopened",{count:u}))),v().createElement("span",null,o(l("courseContent.contentProgress.breakdown.total"),{count:h}))))},x=(0,E.makeStyles)(e=>(0,E.createStyles)({tableHead:{"& th":{backgroundColor:"unset",borderTop:"0"}},tableHeadAllStudents:{width:"48px"},tableHeadStudentName:{fontWeight:e.typography.fontWeightBold,margin:"0 10px"},tableEmptyRow:{borderBottom:"0"},username:{display:"flex",alignContent:"center","& div:nth-child(2)":{justifyContent:"center"}},usernameAvatar:{margin:"0 10px"}}));var T=n(755755),P=n(579633);let D=(0,E.makeStyles)(e=>(0,E.createStyles)({row:{"&:hover":{backgroundColor:e.palette.background.paper}},checkboxCell:{verticalAlign:"top",[e.breakpoints.up("sm")]:{verticalAlign:"middle"}},usernameCell:{display:"flex",flexDirection:"column","& > span > div:last-child":{[e.breakpoints.down("md")]:{maxWidth:"calc(100% - 50px)"}}},username:{display:"inline-flex",alignItems:"center"},usernameAvatar:{marginInlineEnd:"10px"},usernameTextContainer:{display:"flex",flexDirection:"column"},usernameText:e.typography.subtitle2,pronounsText:{fontWeight:e.typography.overline.fontWeight,color:e.palette.text.secondary},inlineStatus:{display:"flex",flexDirection:"column",marginInlineStart:"50px"}}));var G=n(389860);let R=e=>{let t=(0,w.pJ)(t=>d.Ys.contentReviewState.getContentReviewStateUsersPermissions(t,e));return null!=t?t:{viewDueDateException:!1,viewTimeLimitException:!1}};var B=n(470269),L=n(394229);let N=e=>{var t,n,i,s,r,o;let{analyticsId:a,onSelection:l,row:c,selectedItems:u,requiresManualMarking:p}=e,m=(0,C.q)(),{formatDatetime:h}=(0,T.h)(),g=(0,E.useTheme)(),f=(0,E.useMediaQuery)(g.breakpoints.down("xs")),b=D(),S=(0,w.Gd)(null===(t=c.status)||void 0===t?void 0:t.state,p),I=R(c.contentId),A=d.LPT.hasAccommodations(c.courseMembership,I),k=u.isUserSelected(c.courseMembership.userId),x=null!==(i=null===(n=c.status)||void 0===n?void 0:n.reviewedDate)&&void 0!==i?i:null===(s=c.status)||void 0===s?void 0:s.startedDate,N=(0,B.Vl)({userId:c.courseMembership.userId,membershipId:c.courseMembership.id,studentTabId:"progress"}),O=(0,B.Ls)(N);return v().createElement(y.AnalyticsTableRow,{analyticsId:`${a}.row`,key:`progress-student-${c.courseMembership.userId}`,className:b.row},v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell.name`,className:b.checkboxCell},v().createElement(y.AnalyticsCheckbox,{analyticsId:`${a}.row.checkbox`,checked:k,onClick:()=>l({type:"user",userId:c.courseMembership.userId},!k),inputProps:{"aria-labelledby":`row-${c.courseMembership.userId}`}})),v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell.name`,className:b.usernameCell},v().createElement("span",{className:b.username,id:`row-${c.courseMembership.userId}`},v().createElement(L.G,{size:"small",imgProps:{alt:"",src:null===(o=null===(r=c.courseMembership.user)||void 0===r?void 0:r.avatar)||void 0===o?void 0:o.permanentUrl},className:b.usernameAvatar}),v().createElement(G.xu,{analyticsId:`${a}.userNameTextContainer`,user:c.courseMembership.user,format:P.ILocaleUsernameFormat.Short,link:O,ariaHidden:!1,showPronouns:!0,showPronunciation:!0,showAccommodation:A,userNameStyles:b.usernameText,pronounsStyles:b.pronounsText,onClick:()=>{B.Nd.goPeekState(N)}})),f&&v().createElement("span",{className:b.inlineStatus},v().createElement("span",{dangerouslySetInnerHTML:{__html:m("courseContent.contentProgress.progressStatusValue",{statusLabel:S})}}),x&&v().createElement("span",null,m("courseContent.contentProgress.onDatetime",{datetime:x})))),!f&&v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell.name`,tabIndex:-1},v().createElement(y.AnalyticsTypography,null,S),x?v().createElement(y.AnalyticsTypography,{variant:"body2"},h(x,P.ILocaleDatetimeFormat.Short)):void 0))};var O=n(555342),M=n(610710),$=n(570188),H=n.n($);let F=e=>{let{analyticsId:t,onSelection:n,onSortChanged:i,selectedItems:s,data:r,requiresManualMarking:o}=e,a=x(),l=(0,C.q)(),c=(0,w.gH)("courseContent","courseContent.organization"),d=(0,E.useTheme)(),u=(0,E.useMediaQuery)(d.breakpoints.down("xs")),p=s.hasFilterSelection&&!s.hasUserOverrides;return v().createElement(y.AnalyticsSortableTable,{analyticsId:`${t}.table`,getAriaSortMessage:(e,t)=>{let n=l(`courseContent.contentProgress.table.columns.${e}`);return l(`courseContent.contentProgress.table.ariaSortMessage.${t}`,{columnName:n})},id:"content-progress-table",initialSortColumnId:"studentName",initialSortDirection:"asc",onSortChanged:i},v().createElement(y.AnalyticsTableHead,{analyticsId:`${t}.table.head`,className:a.tableHead},v().createElement(y.AnalyticsTableRow,{analyticsId:`${t}.table.row`},v().createElement(y.AnalyticsTableCell,{analyticsId:`${t}.table.cell.status`,id:"content-progress-table-header-checkbox",className:a.tableHeadAllStudents},v().createElement(y.AnalyticsTooltip,{analyticsId:`${t}.tooltip`,title:p?l("courseContent.contentProgress.deselectAll"):l("courseContent.contentProgress.selectAll")},v().createElement(y.AnalyticsCheckbox,{analyticsId:`${t}.header.checkbox`,disabled:!r||0===r.length,checked:p,indeterminate:s.hasUserOverrides,onClick:()=>n({type:"header"},!p),inputProps:{"aria-label":p?l("courseContent.contentProgress.deselectAll"):l("courseContent.contentProgress.selectAll")},"data-analytics-id":`${t}.header.checkbox`}))),v().createElement(M.Y,{analyticsId:`${t}.name.headerCell`,id:"content-progress-table-header-name",columnId:"studentName"},v().createElement("span",{className:a.tableHeadStudentName},l(c("courseContent.contentProgress.studentName")))),!u&&v().createElement(M.Y,{analyticsId:`${t}.progress.headerCell`,id:"content-progress-table-header-progress",columnId:"progress"},l("courseContent.contentProgress.progressStatus")))),v().createElement(y.AnalyticsTableBody,{analyticsId:`${t}.body`},null==r?void 0:r.map(e=>{var i;return v().createElement(N,{row:e,analyticsId:`${t}.row`,key:null===(i=e.courseMembership.user)||void 0===i?void 0:i.id,selectedItems:s,onSelection:n,requiresManualMarking:o})}),null!==r&&0===r.length?v().createElement(y.AnalyticsTableRow,{analyticsId:`${t}.emptyRow`},v().createElement(y.AnalyticsTableCell,{colSpan:3,analyticsId:`${t}.emptyCell`,className:a.tableEmptyRow},v().createElement(O.R2,{illustration:H(),prominentText:l("courseContent.contentProgress.table.noResults.noResultsFound"),subText:l("courseContent.contentProgress.table.noResults.tryAgain")}))):void 0))};var U=n(276635);let V=e=>(0,w.pJ)(t=>d.Ys.contentReviewState.getContentReviewStateUsersStatusByQuery(t,e)),_=e=>(0,w.pJ)(t=>d.Ys.contentReviewState.getContentReviewStateUsersByQuery(t,e)),q=e=>{let t=(0,w.Lx)(),n=V(e);(0,b.useEffect)(()=>{null!=n&&n.isValid||null!=n&&n.isLoading||t(d.Nwg.contentReviewState.fetchContentReviewUserStatesByQuery(e))},[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);let i=_(e);return n&&n.isValid&&!n.isLoading&&n.paging?{results:i,paging:n.paging}:null},z=(0,E.makeStyles)(e=>(0,E.createStyles)({listView:{margin:"0 -30px"},viewFilter:{display:"flex",flexDirection:"column",padding:"15px 30px",[e.breakpoints.up("sm")]:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},viewFilterOptions:{display:"flex",flexDirection:"column",alignItems:"stretch",[e.breakpoints.up("sm")]:{flexDirection:"row",alignItems:"center"}},sendMessageButton:{width:"100%",[e.breakpoints.up("sm")]:{width:"unset"}},searchTextControl:{[e.breakpoints.up("sm")]:{width:"275px"}},stateFilter:{margin:"10px 0",[e.breakpoints.up("sm")]:{margin:"0 10px"}},selectedStudents:{fontWeight:e.typography.fontWeightBold},selectedStudentsContainer:{backgroundColor:e.palette.background.paper,borderBottom:`1px solid ${e.palette.background.b5}`,borderTop:`1px solid ${e.palette.background.b5}`,padding:"8px 0",textAlign:"center"},listContainer:{padding:"0 30px",[e.breakpoints.down("md")]:{"& table":{tableLayout:"fixed"}}},pagingBottom:{display:"flex",justifyContent:"center",margin:"10px 0",[e.breakpoints.up("md")]:{justifyContent:"flex-end"}}}));(o=l||(l={})).All="All",o.Unopened="Unopened",o.Started="Started",o.Completed="Completed";let W=v().memo(e=>{let{analyticsId:t,className:n,onChange:i,selectedState:s,requiresManualMarking:r}=e,o=(0,C.q)(),a=(0,w.Gd)(u.aql.None,r),c=(0,w.Gd)(u.aql.Started,r),d=(0,w.Gd)(u.aql.Completed,r),p=[{value:l.All,label:o("courseContent.contentProgress.status.all")},{value:l.Unopened,label:a},{value:l.Started,label:c},{value:l.Completed,label:d}];return v().createElement(y.AnalyticsTextField,{floatingLabel:!0,style:{minWidth:"160px"},select:!0,className:n,id:"content-progress-view-status-filter",label:o("courseContent.contentProgress.progressStatus"),value:s,onChange:e=>i(e.target.value),analyticsId:`${t}.text`},p.map(e=>v().createElement(y.AnalyticsMenuItem,{button:!0,key:e.value,value:e.value,analyticsId:`${t}.option.${e.value}`,"data-analytics-id":`${t}.option.${e.value}`},e.label)))});class j{constructor(e,t={}){this.selectedFilter=e,this.overrides=t}static none(){return new j}get hasFilterSelection(){return void 0!==this.selectedFilter}get filterSelection(){return this.selectedFilter}get hasUserOverrides(){return this.numberOfUserOverrides>0}get selectedUserOverrides(){return Object.keys(this.overrides).filter(e=>this.overrides[e])}get numberOfUserOverrides(){return Object.keys(this.overrides).length}isUserSelected(e){return this.hasFilterSelection&&!this.hasUserOverrides||this.hasFilterSelection&&!1!==this.overrides[e]||!this.hasFilterSelection&&!0===this.overrides[e]}withUserSelection(e,t){let n={...this.overrides};return this.hasFilterSelection?t?delete n[e]:n[e]=!1:t?n[e]=!0:delete n[e],new j(this.selectedFilter,n)}withFilterSelection(e){return new j(e,{})}hasAnySelectedUsers(e){return this.numberOfSelectedUsers(e)>0}numberOfSelectedUsers(e){return this.hasFilterSelection?e-this.numberOfUserOverrides:this.numberOfUserOverrides}}let Z=()=>{let e=(0,w.Lx)(),t=(0,b.useCallback)((t,n,i,s)=>{if(!i.hasAnySelectedUsers(s))return Promise.resolve({recipientIds:[]});let r=i.filterSelection;if(!r)return Promise.resolve({recipientIds:i.selectedUserOverrides});let o=[];for(let i=0;i<s;i+=5e3)o.push(e(d.Nwg.contentReviewState.fetchContentReviewUserStatesByQuery({courseId:t,contentId:n,filter:r,paging:{offset:i,limit:5e3},fields:["courseMembership.userId"]})));return Promise.all(o).then(e=>{let t=[];return e.forEach(e=>{e.data.results.forEach(e=>{i.isUserSelected(e.courseMembership.userId)&&t.push(e.courseMembership.userId)})}),{recipientIds:t}})},[e]);return{messageContentProgress:t}},K=e=>{var t,n;let{analyticsId:i,courseId:s,contentId:r,requiresManualMarking:o=!0}=e,a=z(),c=(0,C.q)(),p=(0,w.gH)("courseContent","courseContent.organization"),{messageContentProgress:m}=Z(),[h,g]=v().useState(""),[f,b]=v().useState(l.All),[S,E]=v().useState(0),[I,A]=v().useState(j.none()),[x,T]=v().useState([{field:d.ZNX.FamilyName,direction:u.SrV.Ascending}]),P={courseId:s,contentId:r,sort:x,paging:{offset:25*S,limit:25},filter:{searchString:h,state:function(e){switch(e){case l.All:return[];case l.Unopened:return[u.aql.None,u.aql.Unlocked];case l.Started:return[u.aql.Started];case l.Completed:return[u.aql.Completed]}}(f)}},D=q(P),G=(null==D?void 0:D.paging.count)!==void 0?Math.ceil(D.paging.count/25):void 0,R=null!==(t=null==D?void 0:D.paging.count)&&void 0!==t?t:0,L=v().useCallback((0,U.debounce)(e=>{E(0),g(e),A(j.none())},250),[]),N=v().useCallback(e=>{E(0),b(e),A(j.none())},[]),M=e=>{e?A(I.withFilterSelection(P.filter)):A(j.none())},$=(e,t)=>{A(I.withUserSelection(e.userId,t))},H=v().useCallback((e,t)=>{"header"===e.type?M(t):$(e,t)},[I,M,$,A]),V=v().useCallback(e=>e.sortDirection?(T([{direction:"desc"===e.sortDirection?u.SrV.Descending:u.SrV.Ascending,field:"studentName"===e.sortColumnId?d.ZNX.FamilyName:d.ZNX.LastStateChange}]),!0):(T([{direction:u.SrV.Ascending,field:d.ZNX.FamilyName}]),{columnId:"studentName",sortDirection:u.SrV.Ascending}),[T]),_=v().useMemo(()=>({fullWidth:!1,className:a.searchTextControl}),[a]);return v().createElement("div",{className:"react-container"},v().createElement(k,{analyticsId:`${i}.breakdown`,courseId:s,contentId:r,requiresManualMarking:o}),v().createElement("div",{className:a.listView},v().createElement("div",{className:a.viewFilter},v().createElement("div",{className:a.viewFilterOptions},v().createElement(O._W,{inputId:"content-progress-view-name-filter",analyticsId:`${i}.filter.name`,label:c(p("courseContent.contentProgress.searchLabel")),TextFieldProps:_,onChange:L}),v().createElement(W,{onChange:N,selectedState:f,className:a.stateFilter,requiresManualMarking:o,analyticsId:`${i}.filter.state`})),v().createElement("div",null,v().createElement(y.AnalyticsOutlineButton,{analyticsId:`${i}.message`,"aria-label":c("courseContent.contentProgress.message"),className:a.sendMessageButton,onClick:()=>{var e;null===(e=m(s,r,I,R))||void 0===e||e.then(({recipientIds:e})=>{B.Nd.goPeekState((0,B.k9)({courseId:s,recipientIds:e.join(","),conversationPerRecipient:!0}))})}},c("courseContent.contentProgress.message")))),I.hasAnySelectedUsers(R)?v().createElement("div",{className:a.selectedStudentsContainer,dangerouslySetInnerHTML:{__html:c(p("courseContent.contentProgress.selected.count"),{count:I.numberOfSelectedUsers(R)})}}):void 0,v().createElement("div",{className:a.listContainer},v().createElement(F,{analyticsId:`${i}.table`,data:null!==(n=null==D?void 0:D.results)&&void 0!==n?n:null,selectedItems:I,onSelection:H,onSortChanged:V,requiresManualMarking:o}),v().createElement("div",{className:a.pagingBottom},G?v().createElement(O.Vd,{page:S,compact:!0,numberOfPages:G,onPageChange:E,analyticsId:i}):void 0))))},X=(0,E.makeStyles)(()=>(0,E.createStyles)({loading:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}})),Y=e=>{let{courseId:t,contentId:n}=e,i=(0,C.q)(),s=X(),r=(0,w.r0)(t,n),o=r&&d.AaE.requiresManualMarking(r),a=(0,w.nh)({courseId:t}),l=a.gradebookColumns.find(e=>e.contentId===n),c=(null==l?void 0:l.anonymousGrading)===!0;return!r||null===a.view||a.view.isLoading?v().createElement("div",{className:s.loading},v().createElement(y.AnalyticsCircularProgress,{ariaLabel:i("global.loading"),size:"large"})):c?v().createElement(O.R2,{illustration:H(),prominentText:i("courseContent.contentProgress.progressAvailableAfterPostingGrades")}):v().createElement(K,{requiresManualMarking:o,...e})},Q=(0,E.makeStyles)(e=>(0,E.createStyles)({contentTabs:{borderBottom:`1px solid ${e.palette.border.main}`,margin:"0 -30px",padding:"0 30px"}}));(a=c||(c={})).Content="content",a.Progress="progress";let J=e=>{let{onChange:t,value:n,analyticsId:i}=e,s=Q(),r=(0,C.q)(),o=(0,w.gH)("courseContent","courseContent.organization"),a=[{id:c.Content,ariaControls:`content-tab-panel-${c.Content}`,displayKey:"courseContent.contentTabs.content"},{id:c.Progress,ariaControls:`content-tab-panel-${c.Progress}`,displayKey:o("courseContent.contentTabs.progress")}];return v().createElement("div",{className:s.contentTabs},v().createElement(y.AnalyticsTabs,{onChange:(e,n)=>t(n),value:null!=n?n:a[0].id,analyticsId:`${i}.content.contentTabs`},a.map(e=>v().createElement(y.AnalyticsTab,{analyticsId:`${i}.content.contentTabs.${e.id}`,className:`js-content-tab-${e.id}`,key:e.id,value:e.id,id:`content-tab-${e.id}`,label:r(e.displayKey),"aria-controls":e.ariaControls}))))}},458733:function(e,t,n){"use strict";n.d(t,{E_:function(){return s$},YT:function(){return f},uE:function(){return rc},s$:function(){return C},ZH:function(){return c5},zp:function(){return lS},C:function(){return to},Mn:function(){return n9},to:function(){return is},s_:function(){return lY},Dg:function(){return io},Wo:function(){return cr},rj:function(){return tS},N_:function(){return c2},Ws:function(){return sI},Ko:function(){return O},lM:function(){return K},H$:function(){return J},NT:function(){return h},r5:function(){return c6},pW:function(){return t_},Lu:function(){return tt},kQ:function(){return eT},rZ:function(){return dS},bY:function(){return p},Ts:function(){return j},Rx:function(){return dn},vQ:function(){return cn},dZ:function(){return ti},u$:function(){return im},Hv:function(){return eD}});var i,s,r,o,a,l,c,d,u,p,m,h,g,f,b,v,y,C,S=n(202784),E=n.n(S),I=n(906277),w=n(470269),A=n(927335),k=n(398435),x=n(998426),T=n(410628),P=n(951248),D=n(273386),G=n(281699);let R=(0,G.makeStyles)(e=>(0,G.createStyles)({root:{borderBottom:`1px solid ${e.palette.border.main}`},navigationList:{paddingLeft:0,[e.breakpoints.up("md")]:{paddingLeft:"16px"}},studentPreview:{marginLeft:"auto",padding:"0 16px"},studentPreviewLabel:{"& span":{marginLeft:"8px"}}})),B=()=>(0,D.pJ)(e=>P.Ys.app.getRoute(e).name),L=e=>e.indexOf(w.BQ.COURSE_ANALYTICS)>=0?"course.getAnalytics.link":`${e}.link`,N=e=>{let t=(0,D.gH)("cr.components.courseNavigation","cr.components.courseNavigation.organization");return t(e)},O=e=>{let{navigationListItems:t,showStudentPreviewButton:n,studentPreviewOnclick:i}=e,s=(0,T.q)(),r=R(e),o=B(),a=e=>(null==o?void 0:o.indexOf(e))>=0,l=(0,x.Fg)(),c=(0,x.ac)(l.breakpoints.up("md")),d=N("cr.components.courseNavigation.studentPreview"),u=s(d);return S.createElement(k.AnalyticsNavigationListScrollWrapper,{className:(0,I.Z)(r.root,"js-course-navigation"),scrollLeftButtonAriaLabel:s("cr.components.courseNavigation.scrollLeftButtonAriaLabel"),scrollRightButtonAriaLabel:s("cr.components.courseNavigation.scrollRightButtonAriaLabel"),analyticsId:"course.navigation.list.scroll.wrapper"},S.createElement(k.AnalyticsNavigationList,{className:r.navigationList,navTagAriaLabel:s("cr.components.courseNavigation.navTagAriaLabel"),orientation:"horizontal",analyticsId:"course.navigation.list"},t.map(e=>{let t=L(e.route);return S.createElement(k.AnalyticsNavigationListItem,{href:e.href,active:void 0===e.activeTabRoute?a(e.route):a(e.activeTabRoute),analyticsId:t,key:e.route,className:e.className},S.createElement(k.AnalyticsListItemText,{analyticsId:`${t}.text`},S.createElement(k.AnalyticsTypography,{component:"span",variant:"subtitle2"},e.title)))})),n&&S.createElement(k.AnalyticsIconButton,{analyticsId:"course.outline.studentPreview.link",className:(0,I.Z)(r.studentPreview,"js-student-preview"),"aria-label":u,classes:{label:r.studentPreviewLabel},onClick:i},S.createElement(A.StudentPreview,null),c&&S.createElement(k.AnalyticsTypography,{className:"js-student-preview-label",component:"span",variant:"inherit"},u)))};var M=n(438501),$=n(797580);let H={width:"2px"},F=(0,G.makeStyles)(e=>(0,G.createStyles)({autoMarked:{color:$.W1.granite,backgroundColor:$.W1.fog,borderRadius:"50%"},completed:{color:e.palette.success.main},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},iconWrapper:{minWidth:"38px",minHeight:"38px",display:"flex",alignItems:"center",justifyContent:"center",margin:"-8px 0","& > span > span":{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}},offsetIconPositioning:{flex:"0 0 auto",margin:"-8px 0"},centeredIconPositioning:{flex:"0 0 auto",margin:"0"},completionLineBefore:{...H,flex:"0 0 auto",height:"28px",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px"},completionLineAfter:{...H,flex:"1 1 auto",height:"8px",borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},completionLineAutoGrow:{flex:"1 1 auto",height:"unset"},completionComplete:{backgroundColor:e.palette.success.main},completionIncomplete:{backgroundColor:e.palette.secondary.main},completionHidden:{backgroundColor:"transparent"},noNeighborsCompletion:{display:"none"},noIconSpacing:{width:"38px"},completedHovering:{borderRadius:"50%","&:hover":{boxShadow:`0 0 0 8px ${e.palette.success.main}48`}},startedHovering:{borderRadius:"50%","&:hover":{boxShadow:`0 0 0 8px ${e.palette.primary.main}48`}},lockIcon:{cursor:"default"}}));var U=n(408027);(i=p||(p={})).None="none",i.Incomplete="incomplete",i.Completed="completed";let V=(e,t)=>{let n=(0,T.q)(),i={contentItemTitle:e.title},s="false";return(t===U.aql.Completed?s="true":t===U.aql.Started&&(s="mixed"),e.visibility&&e.visibility!==U.hbA.Visible)?{StateIcon:M.LockCircle,ariaLabel:n("courseCore.course.progress.reviewStateIcon.ariaLabel.locked",i),ariaChecked:s}:U.aql.Completed===t?{StateIcon:M.Complete,ariaLabel:n("courseCore.course.progress.reviewStateIcon.ariaLabel.completed",i),ariaChecked:s}:U.aql.Started===t?{StateIcon:M.Started,ariaLabel:n("courseCore.course.progress.reviewStateIcon.ariaLabel.started",i),ariaChecked:s}:U.aql.None===t?{StateIcon:M.Circle,ariaLabel:n("courseCore.course.progress.reviewStateIcon.ariaLabel.none",i),ariaChecked:s}:{StateIcon:M.Circle,ariaLabel:n("courseCore.course.progress.reviewStateIcon.ariaLabel.unlocked",i),ariaChecked:s}},_=e=>!!(P.GQk.Folder.isEqualTo(null==e?void 0:e.contentHandler)&&!P.AaE.isBbPage(e)||P.GQk.LearningModule.isEqualTo(null==e?void 0:e.contentHandler)),q=(e,t,n)=>{let i=(0,T.q)(),s=F();if(e.visibility!==U.hbA.Visible)return U.aql.Completed!==t?{iconStyles:"",tooltipText:""}:{iconStyles:s.completed,tooltipText:"",buttonStyles:""};if(_(e))return U.aql.Completed===t?{iconStyles:s.completed,tooltipText:""}:{iconStyles:s.autoMarked,tooltipText:i("courseCore.course.progress.reviewStateIcon.tooltips.childrenUpdatesWillAutoUpdateFolder")};if(U.aql.None===t)return{iconStyles:s.autoMarked,tooltipText:i("courseCore.course.progress.reviewStateIcon.tooltips.unopened")};if(n){if(U.aql.Started===t)return{iconStyles:s.autoMarked,tooltipText:i("courseCore.course.progress.reviewStateIcon.tooltips.submissionWillAutoUpdate")};if(U.aql.Completed===t)return e.inSequence?{iconStyles:s.completed,tooltipText:""}:{iconStyles:s.completed,tooltipText:i("courseCore.course.progress.reviewStateIcon.tooltips.newAttemptWillAutoUpdate")}}if(!e.inSequence&&e.permissions.canUpdateReviewState){if(U.aql.Started===t)return{iconStyles:s.startedHovering,tooltipText:i("courseCore.course.progress.reviewStateIcon.tooltips.canTransitionToComplete")};if(U.aql.Completed===t)return{iconStyles:`${s.completed} ${s.completedHovering}`,tooltipText:i("courseCore.course.progress.reviewStateIcon.tooltips.canTransitionToStarted")}}return U.aql.Completed===t?{iconStyles:s.completed,tooltipText:""}:{iconStyles:"",tooltipText:""}},z=(e,t,n,i,s)=>{let r=F(),o=r.completionHidden,a=r.completionHidden,l=r.offsetIconPositioning;return P.GQk.LearningModule.isEqualTo(e.contentHandler)?(o=r.noNeighborsCompletion,a=r.noNeighborsCompletion,l=r.centeredIconPositioning):(n!==p.None&&(o=n===p.Completed?r.completionComplete:r.completionIncomplete),i!==p.None&&(a=t===U.aql.Completed?r.completionComplete:r.completionIncomplete)),s&&(o+=` ${r.completionLineAutoGrow}`,a+=` ${r.completionLineAutoGrow}`),{beforeLineStateStyle:o,afterLineStateStyle:a,iconPositioning:l}},W=({content:e,contentState:t,onReviewStateIconClick:n,hasAutomaticReviewStateTransition:i,beforeItemState:s,afterItemState:r,centerButton:o})=>{var a;let l=F(),{StateIcon:c,ariaLabel:d,ariaChecked:u}=V(e,t),{iconStyles:p,tooltipText:m}=q(e,t,i),{beforeLineStateStyle:h,afterLineStateStyle:g,iconPositioning:f}=z(e,t,s,r,null!=o&&o),b=!!(null===(a=e.permissions)||void 0===a?void 0:a.canViewReviewState);return b?S.createElement("div",{className:l.container},S.createElement("div",{className:`${l.completionLineBefore} ${h}`}),e.permissions.canHaveReviewState?S.createElement(k.AnalyticsTooltip,{analyticsId:"course.outline.course-progress.review-state-icon-button.tooltip",title:m,placement:"top",className:f},S.createElement(k.AnalyticsIconButton,{"aria-disabled":e.inSequence||i||t===U.aql.None,"aria-label":d,analyticsId:"course.outline.course-progress.review-state-icon-button.button",className:(0,I.Z)("js-review-state-icon-button",{[l.lockIcon]:e.visibility!==U.hbA.Visible}),onClick:n,role:"checkbox","aria-checked":u},S.createElement("span",{"aria-hidden":"true"},S.createElement(c,{className:p})))):S.createElement("span",{className:l.iconWrapper},S.createElement("span",{className:f},S.createElement("span",{"aria-hidden":"true"},S.createElement(c,{className:p})))),S.createElement("div",{className:`${l.completionLineAfter} ${g}`})):S.createElement("div",{className:l.noIconSpacing})},j=({afterItemState:e,beforeItemState:t,contentId:n,courseId:i,hasAutomaticReviewStateTransition:s,onReviewStateIconClick:r})=>{let o=(0,D.r0)(i,n),a=(0,D.iG)(i,n)||U.aql.None;return o?S.createElement(W,{afterItemState:e,beforeItemState:t,content:o,contentState:a,hasAutomaticReviewStateTransition:s,onReviewStateIconClick:r}):null},Z=(0,G.makeStyles)(e=>(0,G.createStyles)({instructions:{marginBottom:"16px"},instructionBullets:{marginLeft:"8px"},beforeYouSaveHeader:{marginBottom:"16px"},beforeYouSave:{marginTop:"16px",display:"flex",flexDirection:"row"},informationIcon:{verticalAlign:"middle",marginRight:"8px",marginTop:"3px"},delayedChanges:{marginLeft:"42px",color:(0,x.Lq)("text.secondary",e)}})),K=({disabled:e,courseProgressConfiguration:t,onCourseProgressConfigurationChanged:n})=>{let i=(0,D.gH)("courseCore.course","courseCore.organization"),s=(0,T.q)(),r=Z(),o=t.progressTrackingEnabled?"courseCore.course.progress.courseProgressConfiguration.toggleLabelOn":"courseCore.course.progress.courseProgressConfiguration.toggleLabelOff",[a,l]=(0,S.useState)(!1),[c]=(0,S.useState)(t.progressTrackingEnabled),d=S.useCallback(()=>{let e=!t.progressTrackingEnabled;n({...t,progressTrackingEnabled:e}),l(c&&!e)},[t.progressTrackingEnabled,c,n,l]);return S.createElement("div",null,S.createElement("div",{className:(0,I.Z)(r.instructions,"course-progress-configuration-instructions")},s("courseCore.course.progress.courseProgressConfiguration.instructionsHeader")),S.createElement("ul",null,S.createElement("li",{className:r.instructionBullets},s(i("courseCore.course.progress.courseProgressConfiguration.instructionsBulletPoint1"))),S.createElement("li",{className:r.instructionBullets},s(i("courseCore.course.progress.courseProgressConfiguration.instructionsBulletPoint2")))),S.createElement(k.AnalyticsFormControlLabel,{analyticsId:"features.course.oultine.course-progress-configuration.enable.switch.label",checked:t.progressTrackingEnabled,className:"js-enable-progress-tracking",control:S.createElement(k.AnalyticsSwitch,{analyticsId:"features.course.outline.course-progress-configuration.enable.switch",id:"progressTrackingEnable"}),disabled:e,htmlFor:"progressTrackingEnable","aria-label":s("courseCore.course.progress.courseProgressConfiguration.toggleAriaLabel"),label:s(o),onChange:d}),S.createElement("div",{className:r.delayedChanges},s("courseCore.course.progress.courseProgressConfiguration.delayedChanges")),a&&S.createElement("div",{className:r.beforeYouSave},S.createElement("div",{className:(0,I.Z)(r.beforeYouSaveHeader,"course-progress-configuration-before-you-save-header")},S.createElement(M.Information,{className:r.informationIcon})),S.createElement("div",null,s(i("courseCore.course.progress.courseProgressConfiguration.beforeYouSave")))))};var X=n(311822),Y=n(609582),Q=n(844156);let J=({onStay:e,onProceed:t,show:n})=>{let i=(0,T.q)();return S.createElement(X.Dy,{hidden:!n,onDismiss:e,dialogContentProps:{type:Y.DialogType.small,title:i("courseCore.course.progress.courseProgressConfiguration.confirmationModal.title"),showCloseButton:!0,isAlert:!0},analyticsId:"courseProgress.courseProgressConfiguration.saveConfirmation.dialog"},S.createElement("p",null,i("courseCore.course.progress.courseProgressConfiguration.confirmationModal.studentsWontSeeProgressMarks")),S.createElement(Y.DialogFooter,null,S.createElement(Q.AnalyticsDefaultButton,{onClick:e,analyticsId:"courseProgress.courseProgressConfiguration.saveConfirmation.dialog.cancel"},i("courseCore.course.progress.courseProgressConfiguration.confirmationModal.cancel")),S.createElement(Q.AnalyticsPrimaryButton,{onClick:t,analyticsId:"courseProgress.courseProgressConfiguration.saveConfirmation.dialog.close"},i("courseCore.course.progress.courseProgressConfiguration.confirmationModal.confirm"))))};var ee=n(555342);function et(e,t){return!t.inSequence||P.AaE.isFolderContentItem(t)||!e||P.AaE.isFolderContentItem(e)?p.None:e.state===U.aql.Completed?p.Completed:p.Incomplete}var en=n(276635);let ei=[U.hbA.Visible,U.hbA.Restricted],es=[U.hbA.Visible,U.hbA.Restricted,U.hbA.Hidden],er=({courseId:e,userId:t,visibility:n,contentId:i,total:s})=>{let r=(0,D.Lx)(),o=(0,D.ER)({courseId:e,contentId:"ROOT"}),a=null==o?void 0:o.id,l="ROOT"===i&&null!=a?a:i,c=(0,D.pJ)(e=>P.Ys.contentReviewState.getContentReviewStateFirstUserContent(e,{userId:t,contentId:l,visibility:n}),en.isEqual),d=(0,S.useMemo)(()=>({courseId:e,userId:t,contentId:l,limit:20}),[e,t,l]),{isLoading:u,canLoadMore:p,nextOffset:m,count:h}=(0,D.pJ)(e=>P.Ys.contentReviewState.hasMoreContentReviewStateUserContent(e,d),en.isEqual);(0,S.useEffect)(()=>{a&&!u&&p&&!(c.length>=s)&&r(P.Nwg.contentReviewState.fetchMoreContentReviewStateUserContent({courseId:e,userId:t,contentId:l,paging:{offset:m,limit:20}}))},[r,a,u,p,c.length,s,e,t,l,m]);let g=u||p&&c.length<s;return(0,S.useMemo)(()=>({canLoadMore:p,count:h,isLoading:g,items:c}),[c,p,g,h])};var eo=n(579633),ea=n(755755);let el=(0,G.makeStyles)(e=>(0,G.createStyles)({row:{"& td":{padding:0,border:0,borderBottom:`1px solid ${e.palette.border.main}`,height:"100%"}},rowExpandable:{cursor:"pointer","&:hover > td":{backgroundColor:e.palette.background.b3}},rowIsExpanded:{"& td:first-child":{borderLeft:`1px solid ${e.palette.border.main}`},"& td:last-child":{borderRight:`1px solid ${e.palette.border.main}`}},rowLearningModule:{backgroundColor:e.palette.background.paper,"& > td":{borderBottom:`1px solid ${e.palette.border.main}`},"& td:first-child":{borderLeft:`1px solid ${e.palette.border.main}`},"& td:last-child":{borderRight:`1px solid ${e.palette.border.main}`}},rowIsChild:{"& td":{borderBottom:0},"& td:first-child":{borderLeft:`1px solid ${e.palette.border.main}`},"& td:last-child":{borderRight:`1px solid ${e.palette.border.main}`},"& $cellTitleContent, & $cellStatusExpandContainer":{borderBottom:`1px solid ${e.palette.border.main}`}},rowIsLastOnLevel:{"& td":{borderBottom:`1px solid ${e.palette.border.main}`},"& $cellTitleContent, & $cellStatusExpandContainer":{borderBottom:"0"}},rowText:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%",padding:"16px 0"},cellTitleContainer:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",height:"100%"},cellTitleReviewIcon:{height:"100%",position:"absolute",top:"0",bottom:"0"},cellTitleContentIconTitle:{marginLeft:"36px",display:"flex",flexDirection:"row",alignItems:"center",flexGrow:1,height:"100%"},cellTitleContent:{display:"flex",flexDirection:"column",flexGrow:1,justifyContent:"center",padding:"24px 0",height:"100%",minHeight:"70px"},cellStatusExpandContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%"},statusContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",height:"100%",padding:"20px"},expandContainer:{display:"flex",justifyContent:"flex-end",height:"100%",padding:"20px","& > div":{alignItems:"center"}},expandButton:{marginInlineStart:"auto"}}));var ec=n(389860);function ed(e,t){return Math.max(("sm"===t?32:38)*e,0)}let eu=(0,S.createContext)(0),ep=eu.Provider;function em(){return(0,S.useContext)(eu)}let eh=()=>(0,G.useMediaQuery)(e=>e.breakpoints.up("sm"))?"md+":"sm",eg=(0,G.makeStyles)(e=>{let t=`1px solid ${e.palette.secondary.main}`;return{contentItemIcon:{marginRight:"10px",marginLeft:"34px"},contentItemComponent:{position:"relative",flex:"1 1 auto","&::after":{content:'""',position:"absolute",left:0,right:"var(--divider-inline-end, 0)",bottom:"-20px",borderTop:t},".content-list-item.root:last-of-type &":{position:"inherit"},".content-list-item.addable-item &::after":{display:"none"}},contentItemComponentDetails:{display:"flex"},contentVisibility:{display:"flex",flexDirection:"column",width:"fit-content",gap:"4px",marginTop:"3px",[e.breakpoints.up("sm")]:{alignItems:"end",flexDirection:"row",gap:"12px"}},contentItemContentArea:{width:0,flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"38px"},contentItemContextArea:{display:"flex",minHeight:"29px",alignItems:"center",marginTop:"5px"},dragHandle:{display:"flex",flexDirection:"column",justifyContent:"center"},overlaidIcon:({nestingLevel:e,indentationBreakpoint:t})=>({position:"absolute",height:"inherit",top:0,bottom:0,zIndex:1,marginLeft:`${ed(e,t)}px`}),contentItemOverlaidIcon:{left:"-2px"}}}),ef=()=>{let e=em(),t=eh();return eg({nestingLevel:e,indentationBreakpoint:t})},eb=e=>({backgroundColor:e.palette.brand.light,border:`2px solid ${e.palette.brand.main}`,borderLeft:"0",borderRight:"0",content:"''",position:"absolute",height:"13px",left:0,right:0});function ev(e,t){return e<0?0:ed(e,t)+82}let ey=(0,G.makeStyles)(e=>({contentList:({nestingLevel:t})=>({"--divider-inline-start":`${ev(t,"sm")}px`,"--divider-inline-end":`${t>0?12:0}px`,[e.breakpoints.up("sm")]:{"--divider-inline-start":`${ev(t,"md+")}px`}}),topDivider:({nestingLevel:t})=>({"--divider-inline-start":`${ev(t-1,"sm")}px`,"--divider-inline-end":`${t>1?12:0}px`,[e.breakpoints.up("sm")]:{"--divider-inline-start":`${ev(t-1,"md+")}px`}}),centeredDivider:{"--divider-inline-end":"15px","--divider-inline-start":"15px"},divider:({isButtonVisible:e})=>({"--add-button-opacity":e?1:0}),contentListItem:{position:"relative","&.root":{position:"relative"},"&.root:last-of-type":{"--divider-inline-start":0},"&.native-drag-top::before":{...eb(e),top:"-3px"},"&.native-drag-bottom::after":{...eb(e),bottom:"0"}},togglableBottom:{position:"absolute",top:"0"}})),{darken:eC}=G.colorManipulator,eS=(0,G.makeStyles)(e=>({contentItemIcon:{position:"relative"},customIcon:{width:38,minWidth:38},restrictedContentItemIcon:{"&::before":{content:'""',display:"block",position:"absolute",top:"16px",width:"50px",height:"1px",background:eC(e.palette.border.main,.2),boxShadow:`0 0 0 2px ${e.palette.background.default}`,zIndex:1,"&":{flip:!1,left:"-8px",transform:"rotate(-45deg)"}}}})),eE=(0,G.makeStyles)(()=>(0,G.createStyles)({contentIconContainer:{display:"inline-flex",position:"relative",margin:"0 18px 0 5px"},contentIcon:{width:"24px"},restrictedContentIcon:{"&::before":{top:"18px",width:"40px"}}})),eI=e=>{var t,n,i;let{content:s}=e,r=eE(),o=eS(),a=(0,D.r0)(null!==(t=s.courseId)&&void 0!==t?t:"",null===(i=null===(n=s.contentDetail)||void 0===n?void 0:n[U.DXv.CourseLink])||void 0===i?void 0:i.linkSourceId),l=function(e){if(!e)return!1;switch(P.AaE.getContentHandler(e).toString()){case U.DXv.File:case U.DXv.Journal:case U.DXv.LtiLink:case U.DXv.LtiPlacement:case U.DXv.Page:case U.DXv.RusticiScorm:case U.DXv.TestLink:return!0;default:return!1}}(a),c=s.visibility===U.hbA.Hidden,d=E().createElement(ec.HV,{className:r.contentIcon,item:s,withLabel:!1});return E().createElement("span",{className:(0,I.Z)(r.contentIconContainer,c?r.restrictedContentIcon:void 0,c?o.restrictedContentItemIcon:void 0)},l?E().createElement(ee.cm,null,d):d)},ew=(0,G.makeStyles)(e=>(0,G.createStyles)({cellTitleContent:{fontWeight:e.typography.fontWeightSemiBold},cellTitleContentHidden:{color:e.palette.text.secondary},conditionalRelease:{display:"inline-flex",flexDirection:"row","& svg":{marginInlineEnd:"8px"}},conditionalReleaseText:{color:e.palette.text.secondary},statusCompactContainer:{[e.breakpoints.up("sm")]:{display:"none"}},statusCompact:{paddingInlineEnd:"4px"},visibilityHint:{color:e.palette.text.hint}})),eA=(0,G.makeStyles)(e=>(0,G.createStyles)({conditionalRelease:{display:"inline-flex",flexDirection:"row","& svg":{marginInlineEnd:"8px"}},conditionalReleaseText:{color:e.palette.text.secondary},conditionalReleaseButton:{display:"flex",backgroundColor:"unset",border:"none",padding:0,fontWeight:e.typography.fontWeightRegular,minHeight:"unset","&:hover, &:active, &:hover:active":{textDecoration:"underline",backgroundColor:"unset"}},formativeLabel:{fontWeight:e.typography.fontWeightRegular,paddingRight:e.spacing(.5)}}));var ek=n(852512);function ex(){let[e]=(0,S.useState)(()=>(0,ek.ko)(ek.fz.CurrentCourseMembership).isStudentMembership()?"student":"instructor");return e}let eT=(0,S.createContext)(null);var eP=n(99017);function eD(){var e;let t=(0,S.useContext)(eT),n=(0,D.pJ)(e=>eP.Ys.getRoute(e).params.courseId);return null!==(e=null!=t?t:n)&&void 0!==e?e:""}let eG=new Map;function eR(e){let t=function(e){let t=(0,T.q)();if(e)return t("components.directives.content-item-base.conditionalRelease.acl-tooltip")}(P.lzL.getACLCriterion(e)),n=function(e){let t=(0,T.q)(),n=ex(),i="";if((null==e?void 0:e.start)&&(null==e?void 0:e.end))i="both";else if(null==e?void 0:e.start)i="showon";else{if(null==e||!e.end)return;i="hideafter"}return t(`components.directives.content-item-base.conditionalRelease.${n}-${i}-date-tooltip`,{showon:e.start?new Date(e.start):void 0,hideafter:e.end?new Date(e.end):void 0})}(P.lzL.getDateCriterion(e)),i=function(e){let t=(0,T.q)(),n=ex(),i=P.lzL.getForcedSequenceCriterion(e),s=0===e.position;if(i&&"instructor"!==n)return t(`components.directives.content-item-base.conditionalRelease.student-forced-sequence${s?"-first":""}-item-tooltip`)}(e),s=function(e){var t,n,i,s;let r=(0,T.q)(),o=ex(),a=eD(),l=function(e,t=""){let n=(0,D.Lx)(),i=(0,D.pJ)(e=>P.Ys.gradebookColumn.getGradebookColumnById(e,t)),s=(0,D.pJ)(e=>P.Ys.gradebookColumn.isLoading(e)),r=function(e,t=""){var n;return null!==(n=eG.get(`${e}${t}`))&&void 0!==n&&n}(e,t),o=!!i;return(0,S.useEffect)(()=>{!e||!t||o||s||r||(function(e,t=""){eG.set(`${e}${t}`,!0)}(e,t),n(P.Nwg.gradebookColumn.loadGradebookColumn({columnId:t,courseId:e,allowedErrors:[U.oji.Forbidden]})))},[n,e,t,o,s,r]),i}(a,null==e?void 0:e.gradeColumnId),c=(0,D.Yp)(a,null==l?void 0:l.gradingSchemaId);if(!e)return;if(!e.gradeColumnId||!l||!c)return{text:r(`components.directives.content-item-base.conditionalRelease.${o}-missing-column-error`),valid:!1};let d=`components.directives.content-item-base.conditionalRelease.${o}-lock-tooltip`;"number"!=typeof e.maxScore?d+="-common":e.minScore===e.maxScore?d+="-equal":d+="-custom";let u=l.columnName;switch(e.type){case U.faN.Grade:{if(void 0===e.maxScore&&c.scaleType!==U.aQo.Score&&c.scaleType!==U.aQo.Complete)break;let i="components.directives.content-item-base.conditionalRelease.point.plural";return{text:r(d,{title:u,minScore:r(i,{score:null!==(t=e.minScore)&&void 0!==t?t:0}),maxScore:r(i,{score:null!==(n=e.maxScore)&&void 0!==n?n:l.possible})}),valid:!0}}case U.faN.GradePercentage:if(void 0!==e.maxScore||c.scaleType===U.aQo.Percent){let t="components.directives.content-item-base.conditionalRelease.percentage";return{text:r(d,{title:u,minScore:r(t,{score:null!==(i=e.minScore)&&void 0!==i?i:0}),maxScore:r(t,{score:null!==(s=e.maxScore)&&void 0!==s?s:l.possible})}),valid:!0}}if(c.scaleType===U.aQo.Tabular){let t=[...c.symbols].sort((e,t)=>e.absoluteTranslation-t.absoluteTranslation).find(({absoluteTranslation:t})=>{var n;return t>=(null!==(n=e.minScore)&&void 0!==n?n:0)});return{text:r(d,{title:u,minScore:null==t?void 0:t.symbol}),valid:!0}}}return{text:r(d,{title:u,minScore:"",maxScore:""}),valid:!0}}(P.lzL.getPerformanceCriterion(e));return{acl:t,date:n,forcedSequence:i,performance:s}}let eB=(0,G.makeStyles)(()=>({tooltipList:{margin:"0px 0px 0px 12px"}})),eL=e=>{var t,n,i;let s,r;let{item:o}=e,{translate:a,formatItems:l}=(0,ea.h)(),c=eB(),d=eR(o);s=(null===(t=d.performance)||void 0===t?void 0:t.valid)===!1?[d.performance.text]:[d.acl,null===(n=d.performance)||void 0===n?void 0:n.text,d.date,d.forcedSequence].filter(e=>!!e);let u=(r="",d.acl&&d.date&&d.performance?r="courseCore.components.contentItems.conditionalRelease.courseMembersAndDateAndTimeAndPerformance":d.acl&&d.performance?r="courseCore.components.contentItems.conditionalRelease.courseMembersAndPerformance":d.acl&&d.date?r="courseCore.components.contentItems.conditionalRelease.courseMembersAndDateAndTime":d.date&&d.performance?r="courseCore.components.contentItems.conditionalRelease.dateAndTimeAndPerformance":d.acl?r="courseCore.components.contentItems.conditionalRelease.courseMembers":d.date?r="courseCore.components.contentItems.conditionalRelease.dateAndTime":d.performance&&(r="courseCore.components.contentItems.conditionalRelease.performance"),r),p=o.title;return E().createElement(k.AnalyticsTooltip,{analyticsId:"components.common.conditional-release-tooltip","aria-label":`${a(u,{contentItemTitle:p})} ${l(s)}`,title:s.length>1?E().createElement("ul",{className:c.tooltipList},s.map(e=>E().createElement("li",{key:e},e))):E().createElement("div",null,null!==(i=s[0])&&void 0!==i?i:"")},e.children)},eN=e=>{let{isFormative:t,showPipe:n}=e,i=(0,T.q)(),s=eA();return E().createElement(E().Fragment,null,t?E().createElement("div",{className:s.formativeLabel},i("courseCore.course.progress.student.formative"),n?E().createElement("span",{"data-testid":"formative-pipe",className:s.formativeLabel},"|"):null):null)},eO=e=>{let{analyticsId:t,content:n,isFormative:i}=e,s=(0,T.q)(),r=eA(),o=(0,D.gH)("courseCore.course","courseCore.organization");if(n.visibility===U.hbA.Visible)return i?E().createElement(eN,{analyticsId:`${t}.showFormativeLabel`,isFormative:i,showPipe:!1}):null;let a=P.AaE.hasAdaptiveReleaseRules(n);return E().createElement("span",{className:r.conditionalRelease},E().createElement(eN,{analyticsId:`${t}.showFormativeLabel`,isFormative:i,showPipe:!n.inSequence}),n.inSequence?E().createElement(k.AnalyticsTypography,{variant:"caption",className:r.conditionalReleaseText},s(o("courseCore.course.progress.student.studentsNeedToCompletePrevious"))):a?E().createElement(eL,{item:n},E().createElement(k.AnalyticsDefaultButton,{analyticsId:`${t}.releaseButton`,className:r.conditionalReleaseButton},E().createElement(M.Lock,null),E().createElement(k.AnalyticsTypography,{variant:"caption",className:r.conditionalReleaseText},s("components.directives.content-visibility.conditional-availability")))):E().createElement(k.AnalyticsTypography,{variant:"caption",className:r.conditionalReleaseText},s(o("courseCore.course.progress.student.hiddenForThisStudent"))))},eM=(0,G.makeStyles)(e=>(0,G.createStyles)({statusLine:{textDecoration:"underline",backgroundColor:"unset",border:"none",padding:0,fontWeight:e.typography.fontWeightRegular,"&:hover, &:active, &:hover:active":{textDecoration:"underline",backgroundColor:"unset"}}})),e$=({analyticsId:e,children:t,isAnonymousTest:n,result:i})=>{let s=eM(),r=(0,T.q)(),[o,a]=E().useState(!1);if(i.status||!n)return E().createElement(E().Fragment,null,t);let l=r("courseContent.contentProgress.progressAvailableAfterPostingGrades");return E().createElement(k.AnalyticsTooltip,{analyticsId:`${e}.notAvailableTooltip`,title:l,open:o,onOpen:()=>a(!0),onClose:()=>a(!1)},E().createElement(k.AnalyticsDefaultButton,{className:s.statusLine,onClick:()=>a(e=>!e),analyticsId:`${e}.notAvailableButton`},t))},eH=e=>{let{analyticsId:t,className:n,isAnonymousTest:i,result:s,statusLabel:r,statusDate:o,isFormative:a}=e,{translate:l,formatDatetime:c}=(0,ea.h)(),d=ew(),u=E().createElement(e$,{analyticsId:t,isAnonymousTest:i,result:s},E().createElement("span",{className:"js-progress-status-label"},r)),p=s.content.visibility===U.hbA.Hidden;return E().createElement("div",{className:n},E().createElement("span",{className:(0,I.Z)(d.cellTitleContent,p?d.cellTitleContentHidden:void 0)},s.content.title),E().createElement(eO,{analyticsId:`${t}.release`,content:s.content,isFormative:a}),E().createElement("span",{className:d.statusCompactContainer},E().createElement("span",{className:d.statusCompact},l("courseCore.course.progress.student.statusColonLabel",{status:E().createElement("strong",null,l("courseCore.course.progress.student.status")),statusLabel:u})),o?E().createElement("span",null,c(o,eo.ILocaleDatetimeFormat.Short)):void 0))},eF=e=>{let t=(0,G.useTheme)(),n=(0,G.useMediaQuery)(t.breakpoints.down("xs"));return{paddingInlineStart:e*(n?20:32)+"px"}},eU=E().memo(function({analyticsId:e,courseId:t,userId:n,result:i,level:s,indexOnLevel:r,numberOfItemsOnlevel:o,lastItemOnLevel:a,beforeItemState:l,afterItemState:c,contentLoader:d,visibility:u}){var p,m,h,g,f,b,v,y;let C;let S=el(),{formatDatetime:w}=(0,ea.h)(),A=eF(s),x=(0,G.useTheme)(),T=(0,G.useMediaQuery)(x.breakpoints.down("xs")),[R,B]=E().useState(!1),L=P.AaE.getContentHandler(i.content),N=(0,D.nh)({courseId:t}),O=N.gradebookColumns.find(e=>e.contentId===i.contentId),M=(null==O?void 0:O.anonymousGrading)===!0,$=!!(null==O?void 0:O.isFormative),H=P.AaE.requiresManualMarking(i.content),F=(0,D.Gd)(null===(p=i.status)||void 0===p?void 0:p.state,H),V=null!==(f=null!==(h=null===(m=i.status)||void 0===m?void 0:m.reviewedDate)&&void 0!==h?h:null===(g=i.status)||void 0===g?void 0:g.startedDate)&&void 0!==f?f:null,_=s>0,q=P.Xgx.isLearningModule(i.content),z=P.AaE.isFolderContentItem(i.content),j=z||q,Z=E().useCallback(e=>{B(e=>!e),e.stopPropagation()},[B]),K=(0,ec.FO)(t,i.content),X=0===s&&0===r?0:-1;return(j&&(C=R?"true":"false"),!N.view||N.view.isLoading)?E().createElement(E().Fragment,null):E().createElement(E().Fragment,null,E().createElement(k.AnalyticsTableRow,{analyticsId:e,"aria-level":s+1,"aria-expanded":C,"aria-posinset":r+1,"aria-setsize":o,role:"row",tabIndex:X,onClick:j?Z:void 0,className:(0,I.Z)({[S.row]:!0,[S.rowExpandable]:j,[S.rowIsExpanded]:R,[S.rowLearningModule]:q,[S.rowIsChild]:_,[S.rowIsLastOnLevel]:!R&&a})},E().createElement(k.AnalyticsTableCell,{analyticsId:`${e}.name`,role:"gridcell"},E().createElement("div",{className:S.cellTitleContainer,style:A},E().createElement("div",{className:S.cellTitleReviewIcon},E().createElement(W,{content:i.content,contentState:null!==(v=null===(b=i.status)||void 0===b?void 0:b.state)&&void 0!==v?v:U.aql.None,hasAutomaticReviewStateTransition:null!==(y=i.content.inSequence)&&void 0!==y&&y,beforeItemState:l,afterItemState:c,centerButton:!0})),E().createElement("div",{className:S.cellTitleContentIconTitle},!q&&E().createElement(eI,{content:i.content}),E().createElement("span",{className:"sr-only"},K),E().createElement(eH,{analyticsId:`${e}.title`,result:i,isAnonymousTest:M,statusLabel:F,statusDate:V,isFormative:$,className:S.cellTitleContent}),d))),!T&&E().createElement(k.AnalyticsTableCell,{analyticsId:`${e}.status`,role:"gridcell"},E().createElement("div",{className:S.cellStatusExpandContainer},E().createElement("div",{className:S.statusContainer},E().createElement(e$,{analyticsId:e,isAnonymousTest:M,result:i},E().createElement("span",{className:"js-progress-status-label"},F)),V?E().createElement(k.AnalyticsTypography,{variant:"body2"},w(V,eo.ILocaleDatetimeFormat.Short)):void 0),E().createElement("div",{className:S.expandContainer},j?E().createElement(ee.W5,{open:R}):void 0)))),R?E().createElement(ej,{key:`row-container-${i.contentId}-children`,courseId:t,userId:n,level:s+1,lastItemOnLevel:a,parentContentId:i.contentId,parentContentHandler:L,analyticsId:e,visibility:u}):void 0)}),eV=(0,G.makeStyles)(e=>(0,G.createStyles)({empty:{textAlign:"center",borderLeft:`1px solid ${e.palette.border.main}`,borderRight:`1px solid ${e.palette.border.main}`,padding:"20px"},emptyRootLevel:{border:0}}));var e_=n(659170),eq=n.n(e_);let ez=({analyticsId:e,contentHandler:t,level:n,courseId:i,userId:s,parentContentId:r})=>{let o=(0,T.q)(),a=eV(),l=(0,G.useTheme)(),c=(0,G.useMediaQuery)(l.breakpoints.down("xs")),d=(0,D.gH)("courseCore.course","courseCore.organization"),{items:u}=er({courseId:i,userId:s,visibility:es,contentId:r,total:1}),p=0===n,m=o(u.length>0?d(t.isEqualTo(P.GQk.LearningModule)?"courseCore.course.progress.student.emptyLearningModuleWithNotVisibleItems":"courseCore.course.progress.student.emptyFolderWithNotVisibleItems"):t.isEqualTo(P.GQk.LearningModule)?"components.directives.learning-module.empty":"components.directives.folder.empty");return E().createElement(k.AnalyticsTableRow,{analyticsId:`${e}.empty.row`},E().createElement(k.AnalyticsTableCell,{analyticsId:`${e}.empty.row.cell`,colSpan:c?1:2,className:(0,I.Z)({[a.empty]:!0,[a.emptyRootLevel]:p})},p?E().createElement(ee.R2,{illustration:eq(),prominentText:o(d("courseCore.course.progress.student.thisIsWhereYouViewProgress"))}):m))},eW=(0,G.makeStyles)(e=>(0,G.createStyles)({loading:{padding:"20px"},loadingSpinner:{display:"flex",justifyContent:"center"},loadingBorder:{border:`1px solid ${e.palette.border.main}`,borderTop:0}})),ej=(0,S.memo)(function({analyticsId:e,courseId:t,userId:n,visibility:i,level:s,lastItemOnLevel:r,parentContentId:o,parentContentHandler:a}){let l=(0,T.q)(),c=(0,G.useTheme)(),d=(0,G.useMediaQuery)(c.breakpoints.down("xs")),u=eW(),[p,m]=(0,S.useState)(20),{items:h,canLoadMore:g,isLoading:f,count:b}=er({courseId:t,userId:n,visibility:i,contentId:o,total:p}),v=Math.min(20,b?b-h.length:20),y=E().useCallback(async()=>{m(e=>e+20)},[m]);return E().createElement(E().Fragment,null,!f&&0===h.length&&!g&&E().createElement(ez,{courseId:t,userId:n,parentContentId:o,analyticsId:e,contentHandler:a,level:s}),f&&E().createElement("tr",null,E().createElement("td",{colSpan:d?1:2,className:(0,I.Z)(u.loading,s>0?u.loadingBorder:void 0)},E().createElement("div",{className:u.loadingSpinner},E().createElement(k.AnalyticsCircularProgress,{ariaLabel:l("global.loading"),size:"medium"})))),h.map((o,a)=>{var l,c;let d=null===(l=h[a-1])||void 0===l?void 0:l.content,u=null===(c=h[a+1])||void 0===c?void 0:c.content,p=et(d,o.content),m=et(u,o.content),g=(r||1===s)&&a===h.length-1;return E().createElement(eU,{courseId:t,userId:n,result:o,level:s,key:`student-progress-item-${o.content.id}`,analyticsId:`${e}.row`,beforeItemState:p,afterItemState:m,numberOfItemsOnlevel:null!=b?b:h.length,indexOnLevel:a,lastItemOnLevel:g,visibility:i,contentLoader:a===h.length-1?E().createElement(ee.ox,{loader:y,incomingLoadCount:f||void 0!==b&&b<h.length?0:v}):void 0})}))}),eZ=(0,G.makeStyles)(e=>(0,G.createStyles)({table:{tableLayout:"fixed",height:"1px"},tableHeaderCell:{width:"100%"},tableHeaderStatus:{width:"300px",[e.breakpoints.up("lg")]:{width:"500px"}},tableHeaderExpand:{width:"64px"}}));var eK=n(31307);let eX='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';function eY(e){let t=e.nextElementSibling;for(;null!==t&&"row"!==t.getAttribute("role");)t=t.nextElementSibling;return t instanceof HTMLElement?t:null}function eQ(e){let t=e.previousElementSibling;for(;null!==t&&"row"!==t.getAttribute("role");)t=t.previousElementSibling;return t instanceof HTMLElement?t:null}function eJ(e,t){let n=Array.from(t.querySelectorAll('[role="gridcell"]'));return n.indexOf(e)}function e0(e,t){let n=e.querySelectorAll('[role="gridcell"]');return n.item(t)}function e1(e,t){let n=e.parentElement;if(!n||!t)return null;let i=eJ(e,n);return e0(t,i)}function e2(e){let t=e;for(;null!==t&&"row"!==t.getAttribute("role");)t=t.parentElement;return t}function e3(e){let t=e.querySelectorAll(`[role="row"], [role="gridcell"], ${eX}`);null==t||t.forEach(e=>e.setAttribute("tabindex","-1"))}function e9(e,t){if(t){e3(e),t.setAttribute("tabindex","0"),t.focus();let n=e2(t);n&&(n.setAttribute("tabindex","0"),n.querySelectorAll(eX).forEach(e=>e.setAttribute("tabindex","0")))}}let e4=({analyticsId:e,courseId:t,userId:n,visibility:i})=>{let s=(0,T.q)(),r=eZ(),o=(0,G.useTheme)(),a=(0,G.useMediaQuery)(o.breakpoints.down("xs")),l=E().useRef(null),{onKeyDown:c}=function(e){let t=E().useCallback(t=>{var n;let i=e.current;if(!i)return;let s=document.activeElement,r=(null==s?void 0:s.getAttribute("role"))==="row",o=(null==s?void 0:s.getAttribute("role"))==="gridcell",a=null!==(n=null==i?void 0:i.querySelectorAll('[role="row"]'))&&void 0!==n?n:[],l=a[0],c=a[a.length-1],d=e2(s);switch(t.key){case eK.s.ArrowDown:r?e9(i,eY(s)):o&&e9(i,function(e){let t=e.parentElement;return t?e1(e,eY(t)):null}(s));return;case eK.s.ArrowUp:r?e9(i,eQ(s)):o&&e9(i,function(e){let t=e.parentElement;return t?e1(e,eQ(t)):null}(s));return;case eK.s.ArrowRight:if(r)"false"===s.getAttribute("aria-expanded")?s.click():e9(i,null==s?void 0:s.querySelector('[role="gridcell"]'));else if(o&&d){let e=eJ(s,d);e9(i,e0(d,e+1))}return;case eK.s.ArrowLeft:if(r){if("true"===s.getAttribute("aria-expanded"))s.click();else{let e=s.getAttribute("aria-level"),t=null!==e?parseInt(e,10):NaN;if(!Number.isNaN(t)&&t>1){let t=s.previousElementSibling;for(;null!==t&&t.getAttribute("aria-level")===e;)t=t.previousElementSibling;e9(i,t instanceof HTMLElement?t:null)}}}else if(o&&d){let e=eJ(s,d);0===e?e9(i,s.parentElement):e9(i,e0(d,e-1))}return;case eK.s.Home:if(r)e9(i,l),t.preventDefault();else if(o&&d){if(t.ctrlKey){let e=eJ(s,d);e9(i,e0(l,e)),t.preventDefault()}else e9(i,null==d?void 0:d.querySelector('[role="gridcell"]')),t.preventDefault()}return;case eK.s.End:if(r)e9(i,c),t.preventDefault();else if(o){let e=s.parentElement;if(e){if(t.ctrlKey){let n=eJ(s,e);e9(i,e0(c,n)),t.preventDefault()}else{let n=e.querySelectorAll('[role="gridcell"]'),s=n[n.length-1];e9(i,s),t.preventDefault()}}}return;case eK.s.Tab:e3(i),d&&(d.setAttribute("tabindex","0"),d.querySelectorAll(eX).forEach(e=>e.setAttribute("tabindex","0")))}},[e]);return{onKeyDown:t}}(l);return E().createElement("div",{ref:l,onKeyDown:c},E().createElement(k.AnalyticsTable,{analyticsId:`${e}.table`,className:r.table,role:"treegrid","aria-label":s("courseCore.course.progress.student.tableAriaLabel")},E().createElement(k.AnalyticsTableHead,{analyticsId:`${e}.table.head`},E().createElement(k.AnalyticsTableRow,{analyticsId:`${e}.table.head.row`},E().createElement(k.AnalyticsTableCell,{analyticsId:`${e}.table.head.row.name`,className:r.tableHeaderCell},s("courseCore.course.progress.student.itemName")),!a&&E().createElement(k.AnalyticsTableCell,{analyticsId:`${e}.table.head.row.status`,className:(0,I.Z)(r.tableHeaderCell,r.tableHeaderStatus)},s("courseCore.course.progress.student.status")))),E().createElement(k.AnalyticsTableBody,{analyticsId:`${e}.table.body`},E().createElement(ej,{courseId:t,userId:n,visibility:i,level:0,lastItemOnLevel:!1,parentContentId:"ROOT",parentContentHandler:P.GQk.Folder,analyticsId:`${e}.table.body`}))))},e7=(0,G.makeStyles)(()=>(0,G.createStyles)({studentProgress:{paddingTop:"18px"},filters:{marginBottom:"20px"}})),e5=(0,G.makeStyles)(e=>(0,G.createStyles)({filter:{width:"100%",[e.breakpoints.up("sm")]:{minWidth:"250px",width:"unset"}}}));(s=m||(m={})).StudentVisible="StudentVisible",s.All="All";let e6=(0,S.memo)(function({analyticsId:e,visibility:t,onVisibilityChange:n}){let i=e5(),s=(0,T.q)(),r=(0,D.gH)("courseCore.course","courseCore.organization"),o=[{value:m.StudentVisible,label:s(r("courseCore.course.progress.student.availability.visible"))},{value:m.All,label:s("courseCore.course.progress.student.availability.all")}];return E().createElement(k.AnalyticsTextField,{analyticsId:e,select:!0,id:"course-student-progress-filter-availability",label:s("courseCore.course.progress.student.availability.content"),floatingLabel:!0,className:i.filter,value:t,onChange:e=>n(e.target.value)},o.map(t=>E().createElement(k.AnalyticsMenuItem,{button:!0,key:t.value,value:t.value,analyticsId:`${e}.menu.${t.value}`},t.label)))}),e8=(0,S.memo)(function({analyticsId:e,visibility:t,onVisibilityChange:n}){return E().createElement(e6,{visibility:t,onVisibilityChange:n,analyticsId:`${e}.filters.visibility`})});var te=n(443400);let tt=({courseId:e,userId:t,analyticsId:n})=>{let i=e7(),s=(0,T.q)(),[r,o]=(0,S.useState)(m.StudentVisible),a=r===m.StudentVisible?ei:es;return E().createElement("div",{className:i.studentProgress},E().createElement("div",{className:i.filters},E().createElement(e8,{analyticsId:n,visibility:r,onVisibilityChange:e=>{switch(o(e),e){case m.StudentVisible:(0,te.hm)(s("courseCore.course.progress.student.availability.ariaLiveVisibleToStudents"));break;case m.All:(0,te.hm)(s("courseCore.course.progress.student.availability.ariaLiveAll"))}}})),E().createElement(e4,{analyticsId:n,courseId:e,userId:t,visibility:a}))};(r=h||(h={})).ModifyConfiguration="course.progress.settings.MODIFY",r.ViewConfiguration="course.progress.settings.VIEW",r.ViewProgressInformation="course.progress.information.VIEW";var tn=n(810309);function ti(e){let t=(0,tn.w4)(e);t&&e.updateState(t,!0)}var ts=n(958299);let tr=(0,G.makeStyles)(e=>(0,G.createStyles)({courseBannerWrapper:{position:"relative",width:"100%",maxHeight:"240px",height:"calc((100vw - 16px) / 4)",[e.breakpoints.up("md")]:{height:"calc((100vw - 34px) / 5)"},display:"flex",justifyContent:"flex-end",alignContent:"center"},courseBanner:e=>({position:"absolute",top:0,left:0,bottom:0,right:0,backgroundImage:`url("${e.bannerUrl}")`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"100%"}),editBannerButton:{backgroundColor:e.palette.background.default,color:e.palette.text.secondary,height:"max-content",borderRadius:36,"&:active, &:focus, &:hover":{color:e.palette.text.primary},margin:"10px",[e.breakpoints.up("sm")]:{margin:"20px"}}})),to=e=>{let{bannerUrl:t,onEditBanner:n,bannerAltText:i}=e,s=(0,T.q)(),r=tr(e);return S.createElement(S.Fragment,null,!!t&&S.createElement("div",{className:r.courseBannerWrapper},S.createElement("div",{role:i?"img":void 0,"aria-label":i||void 0,className:(0,I.Z)("js-course-banner",r.courseBanner)}),!!n&&S.createElement(ts.AnalyticsIconButton,{analyticsId:"course.course-overview.course-banner.edit.banner.button",className:r.editBannerButton,"aria-label":s("course.course-overview.banner.edit-banner-button"),onClick:n},S.createElement(M.Edit,null))))},ta=(0,G.makeStyles)(e=>(0,G.createStyles)({mainContainer:{display:"flex",height:"36px",alignItems:"center",borderBottom:`1px solid ${e.palette.secondary.main}`,marginBottom:"12px",paddingBottom:"16px",[e.breakpoints.up("sm")]:{marginBottom:"15px"}},headerWrapper:{flex:"1",maxWidth:"none",display:"flex",alignItems:"center"}})),tl=(0,G.makeStyles)(e=>(0,G.createStyles)({courseOverviewInfoHeaderControls:{display:"flex"}})),tc=e=>{let{children:t}=e,n=tl();return S.createElement("div",{className:(0,I.Z)("js-course-overview-info-header-controls",n.courseOverviewInfoHeaderControls)},t)},td=(0,G.makeStyles)(e=>(0,G.createStyles)({headerInfoToggle:{display:"flex",[e.breakpoints.up("md")]:{display:"none"}}})),tu=e=>{let{id:t,analyticsId:n,panelControlId:i,isExpanded:s,preferenceKey:r,title:o,setIsExpanded:a}=e,l=td(),c=(0,D.Iw)(r),d=(0,D.SS)(),[u,p]=(0,S.useState)(!1);return(0,S.useEffect)(()=>{c&&!u&&a("true"===c.value)},[c,u,a]),E().createElement(k.AnalyticsIconButton,{id:t,analyticsId:n,onClick:()=>{p(!0),a(!s),d({key:r,value:s?"false":"true"})},className:l.headerInfoToggle,"aria-label":o,"aria-expanded":s,"aria-controls":s?i:void 0},E().createElement(ee.W5,{open:s,hideOnDesktop:!0}))},tp=(e,t)=>{let n=`${e}${t}`;return n.replace(/_/g,".")},tm=e=>{let{analyticsId:t,courseId:n,children:i,className:s,headerControls:r,title:o,expansionButtonId:a,isStudentPreview:l,preferenceKey:c,panelControlId:d}=e,u=ta(),[p,m]=(0,S.useState)(!0),h=tp(l?c+".student.preview":c,n),g=(0,G.useMediaQuery)(e=>e.breakpoints.up("md"));return E().createElement(E().Fragment,null,E().createElement("div",{className:(0,I.Z)("js-course-overview-info-header",s,u.mainContainer)},E().createElement("div",{className:u.headerWrapper},E().createElement(k.AnalyticsTypography,{component:"h2",variant:"h2"},o)),E().createElement(tc,null,r,E().createElement(tu,{id:a,analyticsId:t,isExpanded:p,preferenceKey:h,setIsExpanded:m,title:o,panelControlId:d}))),(p||g)&&i)};var th=n(346522);let tg=(0,G.makeStyles)(e=>(0,G.createStyles)({courseInstructorsRoot:{marginBottom:"36px"},fullListContainer:{zIndex:10,width:"300px"},fullListContent:{padding:"8px 16px 0 16px"},viewAllButton:{color:e.palette.link.active,backgroundColor:"transparent",textDecoration:"underline",marginTop:"4px",display:"block",lineHeight:"21px"},closeButton:{position:"absolute",top:"9px",right:"9px"},fullListWrapper:{paddingTop:"12px"},listRoot:{paddingTop:0},emptyState:{backgroundColor:e.palette.background.b3,color:e.palette.text.primary,display:"flex",justifyContent:"center",alignItems:"center",height:"50px",fontStyle:"italic"},listItemAvatar:{minWidth:"unset"},listItemRoot:{padding:"4px 0px","&:first-child":{paddingTop:"1px"}},listItemWithMessageLinkRoot:{cursor:"pointer"},instructorAvatar:{display:"flex",marginLeft:"-4px"},username:{whiteSpace:"nowrap",marginRight:"9px",textOverflow:"ellipsis",overflow:"hidden",color:e.palette.text.primary,backgroundColor:e.palette.background.default},messageLinkRoot:{display:"flex","&, &:focus, &:hover, &:active, &:active:hover":{color:e.palette.primary.main}},roleBadge:{textTransform:"uppercase",fontSize:e.typography.fontSizeXSmall,fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary,backgroundColor:e.palette.background.b3,padding:"0px 10px"}})),tf=e=>{let{id:t,currentUserId:n,courseId:i,instructorListMemberships:s,canCurrentUserSendMessage:r,ariaLabelledBy:o}=e,a=(0,T.q)(),[l,c]=(0,S.useState)(!1),d=tg(),[u,p]=(0,S.useMemo)(()=>{let e=[],t=[];return s.forEach(n=>{1===n.displayOrder?e.push(n):t.push(n)}),[e,t]},[s]),m=u.length&&u.length<2?u.length:2,h=u.length?u:p,g=l?"courseCore.components.courseInstructors.showLess":"courseCore.components.courseInstructors.showMore",f=(0,D.gH)("courseCore.components.courseInstructors","courseCore.components.courseInstructors.organization"),b=f(l?"courseCore.components.courseInstructors.showLessAriaLabel":"courseCore.components.courseInstructors.showMoreAriaLabel"),v=(0,S.useCallback)((e,t)=>{var n;e.stopPropagation(),i&&(null===(n=null==t?void 0:t.user)||void 0===n?void 0:n.id)&&w.Nd.goPeekState((0,w.k9)({courseId:i,recipientIds:t.user.id}))},[i]);return s?S.createElement("div",{id:t,role:"region","aria-labelledby":o,className:(0,I.Z)(d.courseInstructorsRoot,"js-course-instructors-root")},0===s.length&&S.createElement("div",{className:(0,I.Z)(d.emptyState,"js-empty-state")},a(f("courseCore.components.courseInstructors.emptyStateText"))),s.length>0&&S.createElement(k.AnalyticsList,{analyticsId:"courseCore.components.courseInstructors.list",classes:{root:d.listRoot}},(l?[...u,...p]:h.slice(0,m)).map(e=>{var t,i,s;let o=r&&(null===(t=null==e?void 0:e.user)||void 0===t?void 0:t.id)!==n;return S.createElement(k.AnalyticsListItem,{analyticsId:"courseCore.components.courseInstructors.listItem",key:e.id,classes:{root:(0,I.Z)(d.listItemRoot,o?d.listItemWithMessageLinkRoot:"","js-instructor-list-item")},onClick:o?t=>v(t,e):void 0},S.createElement(k.AnalyticsListItemAvatar,{className:d.listItemAvatar,analyticsId:"courseCore.components.courseInstructors.listItemAvatar"},S.createElement(k.AnalyticsAvatar,{className:(0,I.Z)(d.instructorAvatar,"js-instructor-avatar"),size:"medium",src:null===(s=null===(i=e.user)||void 0===i?void 0:i.avatar)||void 0===s?void 0:s.permanentUrl,alt:a("courseCore.components.courseInstructors.avatarAltText",{user:e.user})})),S.createElement(k.AnalyticsListItemText,{analyticsId:"courseCore.components.courseInstructors.listItemText",primary:S.createElement("div",{className:(0,I.Z)(d.username,"js-instructor-username")},S.createElement(ec.K6,{ariaHidden:!0,format:eo.ILocaleUsernameFormat.Short,user:e.user})),secondary:e.roleBadgeText&&S.createElement(k.AnalyticsBadge,{classes:{badge:(0,I.Z)(d.roleBadge,"js-role-badge")},position:"inline",badgeContent:e.roleBadgeText})}),o&&S.createElement(k.AnalyticsLink,{analyticsId:"courseCore.components.courseInstructors.link",href:"#",onClick:o?t=>v(t,e):void 0,classes:{root:(0,I.Z)(d.messageLinkRoot,"js-send-message-link")},"aria-label":a("courseCore.components.courseInstructors.sendMessageAriaLabel",{instructor:e.user})},S.createElement(th.V,null)))})),s&&s.length>m&&S.createElement("button",{"data-analytics-id":"courseOverviewInstructorListComponent.toggleFullListButton",className:(0,I.Z)(d.viewAllButton,"js-toggle-full-list-button"),id:"view-all-button",onClick:()=>c(!l),"aria-expanded":l,"aria-label":a(b)},a(g))):null},tb="course-instructors-panel",tv="course-instructors-expansion-button",ty=e=>({courseId:e,sort:[{field:U.PJt.Role,direction:U.SrV.Ascending},{field:U.PJt.DisplayOrder,direction:U.SrV.Ascending},{field:U.PJt.FamilyName,direction:U.SrV.Ascending},{field:U.PJt.GivenName,direction:U.SrV.Ascending}],filter:{roleBucket:[U.O8v.Teaching],membershipAvailable:!0}}),tC=(e,t,n)=>{if(t){if(t.identifier.toString() in P.M4H){let i=P.M4H[t.identifier.toString()];return n&&(i=i.replace("global.course","global.organization")),e(i)}return n?t.orgName.rawValue:t.courseName.rawValue}},tS=e=>{let{courseId:t,isOrganization:n,isStudentPreview:i}=e,s=(0,T.q)(),{memberships:r,users:o}=(0,D.d$)(ty(t)),a=(0,D.gH)("courseCore.components.courseInstructors","courseCore.components.courseInstructors.organization"),l=(0,S.useMemo)(()=>r&&o?r.map(e=>({...e,user:o[e.userId],roleBadgeText:tC(s,e.courseRole,n)})):[],[r,o,n,s]);return E().createElement(tm,{analyticsId:"courseOverview.courseInstructors.expandOrCollapse",courseId:t,title:s(a("courseCore.components.courseInstructors.headerText")),isStudentPreview:i,expansionButtonId:tv,panelControlId:tb,preferenceKey:"course.outline.faculty.expanded",className:"js-course-skip-link-target"},E().createElement(tf,{id:tb,ariaLabelledBy:tv,instructorListMemberships:l,...e}))},tE=(0,G.makeStyles)(e=>(0,G.createStyles)({root:{marginBottom:"36px"},addCourseScheduleButtonWrapper:{display:"flex",flexDirection:"column"},addCourseScheduleButton:{width:"100%","&, &:focus, &:hover, &:active, &:active:hover":{color:e.palette.primary.main,textDecoration:"none"}},skipLink:{marginTop:"8px"},editButton:{marginLeft:"auto",height:"38px",width:"38px",display:"flex",alignItems:"center",justifyContent:"center"}}));var tI=n(619034),tw=n.n(tI),tA=n(884391),tk=n(789180),tx=n(392935),tT=n(526196),tP=n(378228),tD=n(378555),tG=n(349267),tR=n(276184);let tB=(0,G.makeStyles)(e=>(0,G.createStyles)({scheduleList:{color:e.palette.text.primary},scheduleItem:{flexWrap:"wrap",paddingTop:"0",paddingBottom:"16px",marginBottom:"16px",borderBottom:`1px solid ${e.palette.border.main}`,"&:last-of-type":{paddingBottom:"0",marginBottom:"0",borderBottom:"none"}},scheduleItemSection:{width:"100%",display:"flex"},alignItemsFlexStart:{marginTop:"4px"},otherMeetingTimesLink:{display:"block",marginTop:"16px"}})),tL=(e,t,n)=>{var i,s;return null===(s=null===(i=e.recurRules)||void 0===i?void 0:i.byWeekDay)||void 0===s?void 0:s.map(e=>tw()(e,"dd").format()).sort((e,t)=>e>t?1:-1).map(e=>n(new Date(e),eo.ILocaleDateFormat.LongWeekday)).join(t("courseCore.components.courseSchedule.weekdayDelimiter",{},{noWrap:!0}))},tN=(e,t)=>{let n=tw()(e),i=tw()(t);return 1439===i.diff(n,"minutes")},tO=(e,t,n)=>tN(e,t)?n("courseCore.components.courseSchedule.allDayEvent"):n("courseCore.components.courseSchedule.eventTime",{startTime:e,endTime:t}),tM=(e,t,n,i)=>{let{recurRules:s}=e,r=new Date;if(s)switch(s.freq){case"DAILY":return t(s,r);case"MONTHLY":return n(s,r);default:return i(s,r)}return e.startDate},t$=(e,t,n,i)=>{let s=e=>tM(e,t,n,i);return e.length>1&&e.sort((e,t)=>s(e)>s(t)?1:-1),e},tH=e=>{let{id:t,courseSchedule:n,courseSchedulePanelHref:i,ariaLabelledBy:s,getNextEventForMonthlyRepeat:r,getNextEventForDailyRepeat:o,getNextEventForWeeklyRepeat:a}=e,{translate:l,formatDate:c}=(0,ea.h)(),d=tB(),u=e=>{let{recurRules:t}=e;if(!(null==t?void 0:t.freq))return null;if(t.freq===U.hTM.Weekly)return tL(e,l,c);let n=new Date;return t.freq===U.hTM.Monthly?l("courseCore.components.courseSchedule.nextMonthlyEvent",{nextMonthlyEventDate:r(t,n)}):t.freq===U.hTM.Daily?l("courseCore.components.courseSchedule.nextDailyEvent",{nextDailyEventDate:o(t,n)}):void 0};return S.createElement("div",{className:d.scheduleList,id:t,role:"region","aria-labelledby":s},S.createElement(tk.U,{analyticsId:"courseOverview.courseSchedule.list"},(()=>{let e=t$(n,o,r,a);return e.length>2?e.slice(0,2):e})().map(e=>{var t;return S.createElement(tx.o,{className:d.scheduleItem,alignItems:"flex-start",analyticsId:"courseOverview.courseSchedule.listItem",key:null===(t=e.recurRules)||void 0===t?void 0:t.repeatRuleId},S.createElement("div",{className:d.scheduleItemSection},S.createElement(tT.m,{analyticsId:"courseOverview.courseSchedule.listItem.time.icon",classes:{alignItemsFlexStart:d.alignItemsFlexStart}},S.createElement(tG.g,{"aria-label":l("courseCore.components.courseSchedule.time")})),S.createElement(tP.X,{primary:u(e),secondary:S.createElement(tD.c,{component:"span",color:"textPrimary"},tO(e.startDate,e.endDate,l)),analyticsId:"courseOverview.courseSchedule.listItem.time.text"})),e.location?S.createElement("div",{className:d.scheduleItemSection},S.createElement(tT.m,{analyticsId:"courseOverview.courseSchedule.listItem.location.icon",classes:{alignItemsFlexStart:d.alignItemsFlexStart}},S.createElement(tR.Y,{role:"presentation"})),S.createElement(tP.X,{primary:l("courseCore.components.courseSchedule.location"),secondary:S.createElement(ee.vC,{plainText:e.location,analyticsIdTagPrefix:"courseCore.components.courseSchedule.location.text"}),analyticsId:"courseOverview.courseSchedule.listItem.location.text"})):null)})),n.length<=2?null:S.createElement(tA.m,{className:(0,I.Z)(d.otherMeetingTimesLink,"js-other-meeting-times-link"),analyticsId:"courseCode.components.courseSchedule.view.link",href:i},l("courseCore.components.courseSchedule.otherMeetingTimesLink",{number:n.length-2})))},tF=e=>{let{courseId:t,courseSchedulePanelHref:n,canCreateCourseSchedule:i}=e,s=(0,T.q)(),r=tE(),o=tp("hide.add.courseSchedule.button.course",t),a=(0,D.Iw)(o),l=(null==a?void 0:a.value)==="true",c=(0,D.SS)(),d=(0,D.gH)("courseCore.components.courseSchedule","courseCore.components.courseSchedule.organization");return l||!i?null:E().createElement("div",{className:(0,I.Z)(r.addCourseScheduleButtonWrapper,"button-wrap")},E().createElement(k.AnalyticsDashedButton,{className:(0,I.Z)(r.addCourseScheduleButton,"js-add-course-schedule-button"),analyticsId:"courseCore.components.courseSchedule.add.link",href:n},s(d("courseCore.components.courseSchedule.addCourseScheduleButton"))),E().createElement(k.AnalyticsLink,{className:(0,I.Z)(r.skipLink,"js-skip-link"),analyticsId:"courseCore.components.courseSchedule.skip.link",component:"button",onClick:()=>{c({key:o,value:"true"})}},s("courseCore.components.courseSchedule.skipLink")))},tU="course-schedule-panel",tV="course-schedule-expansion-button",t_=e=>{let{courseId:t,courseSchedule:n,isStudentPreview:i}=e,s=(0,T.q)(),r=tE(),o=(0,D.vD)(t,["course.calendar-entry.course-schedule.CREATE"]),a=(0,w.Ls)(w.nb.CourseSchedule({courseId:t})),l=(0,D.gH)("courseCore.components.courseSchedule","courseCore.components.courseSchedule.organization");return n?E().createElement("div",{className:r.root},n.length?E().createElement(tm,{analyticsId:"courseOverview.courseSchedule.expandOrCollapse",courseId:t,title:s(l("courseCore.components.courseSchedule.headerText")),isStudentPreview:i,expansionButtonId:tV,panelControlId:tU,preferenceKey:"course.outline.schedule.expanded",headerControls:E().createElement(E().Fragment,null,o&&E().createElement(k.AnalyticsLink,{className:(0,I.Z)(r.editButton,"js-edit-course-schedule-button"),analyticsId:"courseOverview.courseSchedule.edit.link","aria-label":s(l("courseCore.components.courseSchedule.editCourseScheduleButton")),href:a,color:"secondary"},E().createElement(M.Edit,null)))},E().createElement(tH,{id:tU,ariaLabelledBy:tV,courseSchedulePanelHref:a,...e})):E().createElement(tF,{courseId:t,courseSchedulePanelHref:a,canCreateCourseSchedule:!!o})):null};var tq=n(397236);let tz=e=>{let t=(0,T.q)();return E().createElement(tq.nh,{buttonAriaLabel:t("components.directives.content-visibility.usersAndGroupsAnnouncement.buttonAriaLabel"),announcementTitle:t("components.directives.content-visibility.usersAndGroupsAnnouncement.title"),content:t("components.directives.content-visibility.usersAndGroupsAnnouncement.content"),componentKey:"contentVisibility.membersAndGroups",doneButtonText:t("components.directives.content-visibility.usersAndGroupsAnnouncement.doneButtonText"),linkHref:t("components.directives.content-visibility.usersAndGroupsAnnouncement.moreInfoLinkUrl"),linkText:t("components.directives.content-visibility.usersAndGroupsAnnouncement.moreInfoLinkText"),closeLabel:t("global.close")})},tW=(0,G.makeStyles)(()=>({searchContainer:{display:"flex",flexDirection:"column",position:"relative"},searchTextContainer:{width:"100%",margin:"0 0 10px"},popper:{width:"25vw"}}));var tj=n(465139);let tZ="search-dropdown-list-item",tK=(0,G.makeStyles)(e=>({loading:{justifyContent:"center"},link:{color:e.palette.link.active,cursor:"default","&:hover":{textDecoration:"underline"}},withLeftSpace:{marginLeft:e.spacing(1)},menuItemShowAll:{"&:hover":{cursor:"pointer"}},showAllTitle:{paddingLeft:e.spacing(3),color:e.palette.link.active,textDecoration:"underline",cursor:"pointer"}})),tX=({itemsCount:e,onShowAll:t,children:n})=>{let i=(0,T.q)(),s=tK();return 0===e?E().createElement(k.AnalyticsListSubheader,{analyticsId:"courseCore.components.contentSearch.error.noResultsFound",className:s.menuItem,role:"option"},E().createElement("span",null,i("courseCore.components.contentSearch.error.noResultsFound"))):E().createElement(E().Fragment,null,E().createElement(k.AnalyticsListSubheader,{analyticsId:"content.search.dropdown.subHeader",className:s.menuItem,role:"option",disableSticky:!0},E().createElement(k.AnalyticsTypography,{variant:"h6",component:"h3",id:"results-container-heading"},i("courseCore.components.contentSearch.dropdown.title"))),n,E().createElement(k.AnalyticsListItem,{analyticsId:"content.search.dropdown.showAll",className:(0,I.Z)("show-all-results-option",s.menuItemShowAll),onClick:t,role:"option",button:!0},E().createElement(k.AnalyticsListItemText,{analyticsId:"content.search.dropdown.showAll.text",className:s.showAllTitle},i("courseCore.components.contentSearch.dropdown.showAllItemsLink",{number:e}))))},tY=({onTryAgain:e})=>{let t=(0,T.q)(),n=tK();return E().createElement(k.AnalyticsListItem,{analyticsId:"content.search.dropdown.networkError",className:n.menuItem,onClick:()=>e(),role:"option",autoFocus:!0},E().createElement(k.AnalyticsTypography,{variant:"body1",id:"results-container-heading"},t("courseCore.components.contentSearch.error.networkError")),E().createElement(k.AnalyticsTypography,{variant:"body1",className:(0,I.Z)(n.link,n.withLeftSpace)},t("courseCore.components.contentSearch.error.tryAgain")))},tQ=()=>{let e=tK();return E().createElement(k.AnalyticsListItem,{analyticsId:"content.search.dropdown.spinner",className:e.loading},E().createElement(k.AnalyticsCircularProgress,{id:"content.search.dropdown.loader",ariaLabel:"content.search.dropdown.loader",size:"medium"}))},tJ=({itemsCount:e,isLoading:t,isError:n,onShowAll:i,onTryAgain:s,children:r})=>{let o;return o=t?E().createElement(tQ,null):n?E().createElement(tY,{onTryAgain:s}):E().createElement(tX,{itemsCount:e,onShowAll:i},r),E().createElement(k.AnalyticsList,{analyticsId:"content.search.dropdown.list",role:t?void 0:"listbox","aria-labelledby":t?void 0:"results-container-heading","aria-label":t?void 0:"search-listbox",id:"search-listbox-id",tabIndex:-1,disablePadding:!0},o)};function t0(e){var t,n,i;let s=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();return!!s&&P.fq8.CloudDocument===(null===(i=null===(n=null==e?void 0:e.contentDetail)||void 0===n?void 0:n[s])||void 0===i?void 0:i.itemOrigin)}let t1=(e,t)=>e.id?t?(0,w.sn)({courseId:e.courseId,contentId:e.id,gradeitemView:"details",assessmentType:"test"}):P.AaE.isExternalSubmissionsAssessment(e)?(0,w.tk)({contentId:e.id}):(0,w.el)({contentId:e.id}):void 0,t2=({text:e,textToFind:t,ignoreCase:n})=>(0,S.useMemo)(()=>{if(0===t.length)return[{text:e,doesMatch:!1}];let i=t;n&&(i=RegExp((0,ee.hr)(t),"i"));let s=0;return e.split(i).reduce((i,r,o)=>{if(o>0){let r={text:n?e.substring(s,s+t.length):t,doesMatch:!0};i.push(r),s+=t.length}return r.length>0&&(i.push({text:r,doesMatch:!1}),s+=r.length),i},[])},[e,t,n]);(o=g||(g={}))[o.SemiBold=0]="SemiBold",o[o.Bold=1]="Bold";let t3=(0,G.makeStyles)(e=>({highlight:({weight:t})=>({color:e.palette.brand.main,fontWeight:t===g.SemiBold?e.typography.fontWeightSemiBold:e.typography.fontWeightBold})})),t9=E().memo(e=>{let{children:t,highlight:n,weight:i}=e,s=t3({weight:null!=i?i:g.SemiBold}),r=t2({text:null!=t?t:"",textToFind:n,ignoreCase:!0});return E().createElement(E().Fragment,null,r.map((e,t)=>E().createElement("span",{key:t,className:(0,I.Z)({[s.highlight]:e.doesMatch})},e.text)))}),t4=(0,G.makeStyles)(e=>({link:{color:e.palette.text.primary,textDecoration:"none","&:hover, &:active:hover, &:focus":{color:e.palette.text.primary,textDecoration:"none"},overflow:"hidden"}})),t7=E().forwardRef(function(e,t){let{analyticsId:n,children:i,...s}=e,r=t4(),o="span";return e.href?o="a":e.onClick&&(o="button"),E().createElement(k.AnalyticsLink,{className:r.link,component:o,ref:t,tabIndex:0,analyticsId:`${n}.link`,...s},i)}),t5=(0,G.makeStyles)(e=>({menuItem:{padding:e.spacing(1.5),"&:hover":{backgroundColor:e.palette.background.paper,cursor:"pointer"},"&:focus":{boxShadow:`0 0 0 1px ${e.palette.focus.main}`}},contentType:{color:e.palette.text.secondary,marginLeft:"auto",whiteSpace:"nowrap"},itemIcon:{alignItems:"center"},text:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},textContent:{display:"inline"}}));function t6(e){var t,n,i;if(e.contentHandler){let s=e.contentHandler.toString();if(s===U.DXv.File){let s=null===(i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t["resource/x-bb-file"])||void 0===n?void 0:n.file)||void 0===i?void 0:i.mimeType;if(s)return(0,P.RMg)(s)}if(s===U.DXv.Folder&&P.AaE.isBbPage(e))return P.GQk.Document.iconClass;if(s===U.DXv.CourseLink){let t=P.AaE.getContentHandlerByIconUrl(e);return t===U.DXv.Discussion?P.GQk.parse(t).iconClass:P.GQk.ExternalLink.iconClass}if(s===U.DXv.TestLink){let t=e.gradingColumn;if(t&&t.gradebookCategory){let e=t.gradebookCategory.title;if(e===U.bu3.Assignment)return P.GQk.UltraAssignment.iconClass}return P.GQk.TestLink.iconClass}return P.AaE.getContentHandler(e).iconClass}return""}var t8=n(23938);let ne=(e,t)=>{var n,i;let s=t6(e);return e.visibility!==U.hbA.Restricted||(null===(n=e.permissions)||void 0===n?void 0:n.edit)?s?(null===(i=e.contentHandler)||void 0===i?void 0:i.toString())!==U.DXv.Folder||(0,t8.rD)(e)?{Icon:(0,ec.iw)(s),ariaLabelKey:(0,ec.O1)(s)}:{Icon:(0,ec.iw)("folder-open"),ariaLabelKey:(0,ec.O1)(s)}:t||{Icon:(0,ec.iw)("document-blank"),ariaLabelKey:(0,ec.O1)("document-blank")}:{Icon:M.LockCircle,ariaLabelKey:(0,ec.O1)(s)}},nt="click-to-forward-ref",nn=e=>{let{item:t,linkProps:n,searchTerm:i}=e,s=(0,T.q)(),r=t5(),o=(0,S.useRef)(null),a=(0,S.useRef)(null),{Icon:l,ariaLabelKey:c}=ne(t),d=s(c);return E().createElement(k.AnalyticsListItem,{analyticsId:n.analyticsId,className:(0,I.Z)(tZ,r.menuItem),ref:o,onClick:e=>{!function(e,t,n,i){var s,r,o;null===(s=n.current)||void 0===s||s.classList.add(nt);let a=(0,ee.hD)(e.target,i,nt);a===t.current&&(null===(r=n.current)||void 0===r||r.click()),null===(o=n.current)||void 0===o||o.classList.remove(i)}(e,o,a,tZ)},onKeyPress:e=>{var t;"Enter"===e.key&&(null===(t=o.current)||void 0===t||t.click())},role:"option",tabIndex:-1},E().createElement(k.AnalyticsListItemIcon,{analyticsId:"icon",className:r.itemIcon},E().createElement(l,{titleAccess:d})),E().createElement(t7,{tabIndex:-1,...n,ref:a},E().createElement(k.AnalyticsListItemText,{analyticsId:"item-text",className:r.text,primaryTypographyProps:{className:r.textContent}},E().createElement(t9,{highlight:i},t.title))),E().createElement("span",{"aria-hidden":"true",className:r.contentType},d))},ni=e=>{let t=(0,D.J1)(e,["course.assessment.MODIFY","course.assessment.VIEW"]);return!!t},ns=e=>{let{item:t,linkedItem:n,searchTerm:i}=e,s=null!=n?n:t,r=ni(s.courseId),o=t1(s,r),a=(0,w.Ls)(o);return E().createElement(nn,{item:t,searchTerm:i,linkProps:{analyticsId:"content.search.dropdown.item.test",href:a}})},nr=e=>{if(e.id&&!P.AaE.isConditionalReleaseLocked(e))return w.yf.DiscussionWithGrading({contentId:e.id,view:"discussions"})},no=e=>{let{item:t,linkedItem:n,searchTerm:i}=e,s=null!=n?n:t,r=nr(s),o=(0,w.Ls)(r);return E().createElement(nn,{item:s,searchTerm:i,linkProps:{analyticsId:"content.search.dropdown.item.discussion",href:o}})},na=e=>{if(e.id)return w.SS.Document({id:e.id})},nl=e=>{let{item:t,linkedItem:n,searchTerm:i}=e,s=na(null!=n?n:t),r=(0,w.Ls)(s);return E().createElement(nn,{item:t,searchTerm:i,linkProps:{analyticsId:"content.search.dropdown.item.document",href:r}})},nc=e=>{if(e.id&&!P.AaE.isConditionalReleaseLocked(e))return w.OH.JournalWithParticipation({contentId:e.id})},nd=e=>{let{item:t,linkedItem:n,searchTerm:i}=e,s=nc(null!=n?n:t),r=(0,w.Ls)(s);return E().createElement(nn,{item:t,searchTerm:i,linkProps:{analyticsId:"content.search.dropdown.item.journal",href:r}})};var nu=n(393950);let np=()=>{let e=(0,D.Lx)(),t=(0,S.useCallback)((t,n,i)=>e(P.Nwg.contentReviewState.persistContentReviewState(t,n,i)),[e]);return t},nm=e=>{var t;let n=null!==(t=e.contentHandler)&&void 0!==t?t:"",i=e.contentDetail&&e.contentDetail[n.toString()];return i&&i.launchUrl||null},nh=(e,t,n)=>{var i,s;let r=null!==(i=e.id)&&void 0!==i?i:"",o=null!==(s=e.courseId)&&void 0!==s?s:"",a=(0,tn.w4)(e);a&&(t(o,r,a),e.inSequence&&n(r,a))},ng=async(e,t,n)=>{let{isGradable:i,isStudentInCourse:s,updateContentReviewState:r}=t,{courseId:o,id:a}=e;if(i){if(P.AaE.canEdit(e))return w.Nd.goPeekState(w.lF.GradebookItemScormSubmissions({courseId:o,contentId:a,gradeitemView:"students"}));if(s)return w.Nd.goPeekState(w.lF.ScormOverviewStudent({courseId:o,contentId:a}))}else{let t=nm(e);if(!t)return Promise.reject(Error("Attempted to launch a SCORM link without a valid launchLink."));let i=(0,te.uI)(t);return(i=(0,te.Ou)(i,"from_ultra","true"),e.launchInNewWindow)?((0,te.Yo)(i),nh(e,r,n),Promise.resolve()):w.Nd.goPeekState(w.lF.ScormLaunchFrame({courseId:o,contentId:a,toolHref:i})).then(t=>(nh(e,r,n),t))}return Promise.resolve()},nf=(0,S.createContext)(()=>{}),nb=nf.Provider;function nv(){return(0,S.useContext)(nf)}let ny=e=>{let{item:t,linkedItem:n,searchTerm:i}=e,s=null!=n?n:t,r=function(e){let t=eD(),n=np(),i=function(e){var t;let n=e.contentHandler&&(null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()]);return!!(n&&n.gradebookItems||[]).length}(e),s=(0,D.aq)(t),r=!!s&&(0,nu.Xc)(s);return{isGradable:i,isStudentInCourse:r,updateContentReviewState:n}}(s),o=nv();return E().createElement(nn,{item:t,searchTerm:i,linkProps:{analyticsId:"content.search.dropdown.item.scormlaunch",onClick:()=>ng(s,r,o).catch(console.error)}})},nC=e=>{var t,n,i;let s=null===(i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[U.DXv.File])||void 0===n?void 0:n.file)||void 0===i?void 0:i.permanentUrl;if(s)return(0,te.uI)(s)};function nS(e,t){var n;if(!e.id)return{downloadUrl:void 0,route:void 0};let i=nC(e),s=null===(n=e.contentDetail)||void 0===n?void 0:n[U.DXv.File],r=null==s?void 0:s.fileAssociationMode,o=(null==s?void 0:s.file)?(0,ee.c1)(s.file):void 0,a=r!==U.nEm.Link&&o&&(0,ee.Q)(o,t);return t&&a?{downloadUrl:i,route:w.xN.PreviewFile({id:e.id})}:{downloadUrl:i,route:void 0}}let nE=e=>{var t;let n=(0,D.ye)("feature.course.content.inline-render"),{downloadUrl:i,route:s}=nS(e,n),r=null!==(t=(0,w.Ls)(s))&&void 0!==t?t:i,o=!!s;return{hasFilePreview:o,href:r}};var nI=n(776517);let nw=(e,t,{id:n,title:i})=>{(0,nI.Db)({type:e,status:nI.rJ.Success,contentId:n,contentTitle:i,contentType:t})},nA=e=>{nw(nI.Cs.FileOpened,nI.Pl.Document,e)},nk=e=>{nw(nI.Cs.LinkOpened,nI.Pl.Link,e)},nx=e=>{(0,nI.Db)({type:nI.Cs.LearningModuleOpened,status:nI.rJ.Success,contentId:e.id})},nT=e=>{let{item:t,linkedItem:n,searchTerm:i}=e,s=null!=n?n:t,r=nE(s),o=np(),a=nv(),l=e=>{var t,n;let i=(0,tn.w4)(e),s=null!==(t=e.id)&&void 0!==t?t:"",r=null!==(n=e.courseId)&&void 0!==n?n:"";nA(e),i&&o(r,s,i).then(()=>{a(s,i)})};return E().createElement(nn,{item:t,searchTerm:i,linkProps:{analyticsId:"content.search.dropdown.item.file",href:r.href,onClick:()=>l(s),target:r.hasFilePreview?void 0:"_blank",rel:r.hasFilePreview?void 0:"noopener noreferrer"}})};var nP=n(144958);let nD=async(e,t,n,i,s)=>{let r=(0,te.uI)(e);return(r=(0,te.Ou)(r,"from_ultra","true"),t)?((0,te.Yo)(r),Promise.resolve()):s?w.Nd.goPeekState(w.MS.LaunchLtiPeek({toolHref:r,courseId:n,contentId:i})):w.Nd.goPeekState(w.MS.LaunchLtiFrame({toolHref:r}))},nG=(e,t,n)=>{var i,s;let r=null!==(i=e.id)&&void 0!==i?i:"",o=null!==(s=e.courseId)&&void 0!==s?s:"",a=(0,tn.w4)(e);a&&(n&&n(o,r,a),e.inSequence&&t(r,a))},nR=async(e,t,n)=>{var i;let s=e.contentHandler;if(!s)return Promise.reject(Error("Attempted to launch an LTI link without a valid contentHandler."));let{courseId:r,id:o,contentDetail:a}=e;if(P.GQk.LtiPlacement.startsWith(s)||P.GQk.LtiLink.isEqualTo(s)){let e=P.fq8.CloudDocument===(null===(i=null==a?void 0:a[s.toString()])||void 0===i?void 0:i.itemOrigin);return nD(t,n,r,o,e)}return P.GQk.PartnerCloud.isEqualTo(s)?nD(t,n,r,o,!1):Promise.reject(Error("Attempted to launch an LTI link without a valid contentHandler."))},nB=async(e,t,n,i)=>{let s=(0,nP.Qk)(e);if(!s)return Promise.reject(Error("Attempted to launch an LTI link without a valid launchLink."));let{isEntitled:r,isGradable:o,isStudentInCourse:a,updateContentReviewState:l}=n||{},{launchNewWindow:c}=i||{},d=void 0!==c?c:!!s.launchNewWindow;if(r&&l)return nR(e,s.link,d).then(n=>(nG(e,t,l),n));if(o&&a){let{courseId:n,id:i}=e;return w.Nd.goPeekState(w.MS.LaunchLti({courseId:n,contentId:i})).then(n=>(nG(e,t,l),n))}return nR(e,s.link,d).then(n=>(nG(e,t,l),n))},nL=({item:e,linkedItem:t,analyticsId:n,launchNewWindow:i,searchTerm:s})=>{var r,o,a,l,c;let d=null!=t?t:e,u=function(e){var t,n;let i=eD(),s=(0,D.bW)(i,"system.admin.VIEW"),r=np(),o=!!(e.contentHandler&&(null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()])||void 0===n?void 0:n.gradingColumn)),a=(0,D.aq)(i),l=!!a&&(0,nu.Xc)(a);return{isEntitled:s,isGradable:o,isStudentInCourse:l,updateContentReviewState:r}}(d),p=nv(),m=d.contentHandler&&(null===(a=null===(o=null===(r=d.contentDetail)||void 0===r?void 0:r[d.contentHandler.toString()])||void 0===o?void 0:o.domainConfig)||void 0===a?void 0:a.statusType),h=d.contentHandler&&(null===(c=null===(l=d.contentDetail)||void 0===l?void 0:l[d.contentHandler.toString()])||void 0===c?void 0:c.supportEmail),g=!!(0,nP.Qk)(d),{displayModal:f,modal:b}=(0,ee.dd)(nP.PH,{email:h});return E().createElement(E().Fragment,null,E().createElement(nn,{item:e,searchTerm:s,linkProps:{analyticsId:n,onClick:()=>{g?nB(d,p,u,{launchNewWindow:i}).catch(console.error):m&&ek.Z.NeedsApproval===m&&f()}}}),b)},nN=e=>{let{item:t,linkedItem:n,searchTerm:i}=e;return E().createElement(nL,{item:t,searchTerm:i,linkedItem:n,analyticsId:"content.search.dropdown.item.lti-placement"})},nO=e=>{let{item:t,linkedItem:n,searchTerm:i}=e;return E().createElement(nL,{item:t,searchTerm:i,linkedItem:n,analyticsId:"content.search.dropdown.item.lti-link"})},nM=e=>{let{item:t,searchTerm:n}=e;return E().createElement(nn,{item:t,searchTerm:n,linkProps:{analyticsId:"content.search.dropdown.item.default"}})};function n$(e){if(!e||!e.contentHandler)return;let t=e.contentHandler.toString();return t.startsWith(U.DXv.LtiPlacement)?U.DXv.LtiPlacement:P.AaE.isBbPage(e)?U.DXv.Document:t}let nH=e=>{let{item:t,linkedItem:n,searchTerm:i,setDropdownVisibility:s,searchCourseContent:r,setSearchMessage:o}=e,a=null!=n?n:t,l=t6(t),c=(0,T.q)();return E().createElement(nn,{item:a,searchTerm:i,linkProps:{analyticsId:`content.search.dropdown.item.${l}`,href:"#",onClick:()=>{let e=t.id;if(s&&s(!1),t.inSequence&&(e=t.parentId),null==r||r(void 0,U.Ius.courseContent,void 0,!0,e),o){let e=(0,ec.O1)(l),n=`${c(e)}: "${t.title}"`;o(n)}w.Nd.search({search:a.title})}}})},nF=e=>{var t;let{item:n,searchCourseContent:i,setSearchMessage:s,searchTerm:r,setDropdownVisibility:o}=e,a=function(e){var t,n;let i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[U.DXv.CourseLink])||void 0===n?void 0:n.linkSourceId,s=eD();return(0,D.r0)(s,i)}(n),l=n$(a);if(n.visibility===U.hbA.Restricted&&!(null===(t=n.permissions)||void 0===t?void 0:t.edit)){let e=l===U.DXv.Discussion;return E().createElement(nH,{item:n,linkedItem:e?a:void 0,searchTerm:r,setDropdownVisibility:o,searchCourseContent:i,setSearchMessage:s})}switch(l){case U.DXv.TestLink:return E().createElement(ns,{item:n,linkedItem:a,searchTerm:r});case U.DXv.Discussion:return E().createElement(no,{item:n,linkedItem:a,searchTerm:r});case U.DXv.Document:return E().createElement(nl,{item:n,linkedItem:a,searchTerm:r});case U.DXv.Journal:return E().createElement(nd,{item:n,linkedItem:a,searchTerm:r});case U.DXv.RusticiScorm:return E().createElement(ny,{item:n,linkedItem:a,searchTerm:r});case U.DXv.File:return E().createElement(nT,{item:n,linkedItem:a,searchTerm:r});case U.DXv.LtiPlacement:return E().createElement(nN,{item:n,linkedItem:a,searchTerm:r});case U.DXv.LtiLink:return E().createElement(nO,{item:n,linkedItem:a,searchTerm:r});default:return E().createElement(nM,{item:n,linkedItem:a,searchTerm:r})}},nU=e=>{let{item:t,searchCourseContent:n,setSearchMessage:i,searchTerm:s,setDropdownVisibility:r}=e,o=(0,T.q)();return E().createElement(nn,{item:t,searchTerm:s,linkProps:{analyticsId:"content.search.dropdown.item.folder",href:"#",onClick:()=>{if(r&&r(!1),null==n||n(void 0,U.Ius.courseContent,void 0,!0,t.id),i){let e=t6(t),n=(0,ec.O1)(e),s=`${o(n)}: "${t.title}"`;i(s)}w.Nd.search({search:t.title})}}})},nV=e=>{let{item:t,searchCourseContent:n,setSearchMessage:i,searchTerm:s,setDropdownVisibility:r}=e,o=(0,T.q)();return E().createElement(nn,{item:t,searchTerm:s,linkProps:{analyticsId:"content.search.dropdown.item.learning-module",href:"#",onClick:()=>{if(r&&r(!1),null==n||n(void 0,U.Ius.courseContent,void 0,!0,t.id),i){let e=t6(t),n=(0,ec.O1)(e),s=`${o(n)}: "${t.title}"`;i(s)}w.Nd.search({search:t.title})}}})},n_=e=>{let{item:t,linkedItem:n,searchTerm:i}=e;return E().createElement(nL,{item:t,searchTerm:i,linkedItem:n,analyticsId:"content.search.dropdown.item.onedrive-lti"})},nq=e=>!!P.AaE.canEdit(e)||!P.AaE.isRestricted(e),nz=(e,t)=>{if(e.id&&nq(e))return w.SS.Document({id:e.id,view:t})},nW=e=>{let{item:t,searchTerm:n}=e,i=nz(t,"content"),s=(0,w.Ls)(i);return E().createElement(nn,{item:t,searchTerm:n,linkProps:{analyticsId:"content.search.dropdown.item.document-text",href:s}})},nj=e=>{var t,n;let{item:i,linkedItem:s,searchTerm:r}=e,o=null===(n=null===(t=(null!=s?s:i).contentDetail)||void 0===t?void 0:t[P.GQk.PartnerCloud.toString()])||void 0===n?void 0:n.providerId,a=(0,D.Cf)(o),l=!(null==a?void 0:a.responsive);return E().createElement(nL,{item:i,searchTerm:r,linkedItem:s,analyticsId:"content.search.dropdown.item.partner-cloud-lti",launchNewWindow:l})};var nZ=n(853510),nK=n.n(nZ);let nX=e=>{var t,n;let i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[U.DXv.ExternalLink])||void 0===n?void 0:n.url;if(i)return i=nK()(i),(0,te.qR)(i)},nY=e=>{let{item:t,searchTerm:n}=e,i=nX(t);return E().createElement(nn,{item:t,searchTerm:n,linkProps:{analyticsId:"content.search.dropdown.item.url",href:i,target:"_blank",rel:"noopener noreferrer"}})};function nQ(e){return e?e.startsWith(U.DXv.LtiPlacement)?U.DXv.LtiPlacement:e:void 0}let nJ=({item:e,searchTerm:t,setDropdownVisibility:n,searchCourseContent:i,setSearchMessage:s})=>{var r,o;let a=nQ(null===(r=e.contentHandler)||void 0===r?void 0:r.toString());if(a===U.DXv.CourseLink)return E().createElement(nF,{item:e,searchTerm:t,setDropdownVisibility:n,searchCourseContent:i,setSearchMessage:s});if(e.visibility===U.hbA.Restricted&&!(null===(o=e.permissions)||void 0===o?void 0:o.edit))return E().createElement(nH,{item:e,searchTerm:t,setDropdownVisibility:n,searchCourseContent:i,setSearchMessage:s});switch(a){case U.DXv.TestLink:return E().createElement(ns,{searchTerm:t,item:e});case U.DXv.Discussion:return E().createElement(no,{searchTerm:t,item:e});case U.DXv.Document:case U.DXv.Page:return E().createElement(nl,{searchTerm:t,item:e});case U.DXv.Folder:if(P.AaE.isBbPage(e))return E().createElement(nW,{searchTerm:t,item:e});return E().createElement(nU,{item:e,searchTerm:t,setDropdownVisibility:n,searchCourseContent:i,setSearchMessage:s});case U.DXv.Journal:return E().createElement(nd,{searchTerm:t,item:e});case U.DXv.LearningModule:return E().createElement(nV,{item:e,searchTerm:t,setDropdownVisibility:n,searchCourseContent:i,setSearchMessage:s});case U.DXv.RusticiScorm:return E().createElement(ny,{searchTerm:t,item:e});case U.DXv.File:return E().createElement(nT,{searchTerm:t,item:e});case U.DXv.ExternalLink:return E().createElement(nY,{searchTerm:t,item:e});case U.DXv.PartnerCloud:return E().createElement(nj,{searchTerm:t,item:e});case U.DXv.LtiPlacement:return E().createElement(nN,{searchTerm:t,item:e});case U.DXv.LtiLink:if(t0(e))return E().createElement(n_,{searchTerm:t,item:e});return E().createElement(nO,{searchTerm:t,item:e});default:return E().createElement(nM,{searchTerm:t,item:e})}},n0=(0,G.makeStyles)(e=>({paper:{boxShadow:e.shadows[0]}})),n1=({className:e,isOpen:t,anchorEl:n,isFloating:i,onKeyDown:s,children:r})=>{let o=n0();return t?i||null==r?E().createElement(k.AnalyticsPopper,{analyticsId:"content.search.dropdown",role:"presentation",anchorEl:n,open:t,onKeyDown:s,className:e,disablePortal:!0,id:"results-container",modifiers:{flip:{enabled:!1},preventOverflow:{enabled:!1,boundariesElement:"view"},hide:{enabled:!1}}},E().createElement(G.Paper,{variant:"dropdown",className:o.paper},r)):r:null},n2=e=>{let{clearSearchCallback:t,isShownInPanel:n,message:i}=e,s=(0,T.q)(),r=(0,G.useTheme)(),o=(0,S.useRef)(null);return(0,S.useEffect)(()=>{var e;null===(e=o.current)||void 0===e||e.focus()},[i]),E().createElement(G.Box,{display:"flex",flexDirection:n?"column":"row",alignItems:n?"flex-start":"normal",gridGap:r.spacing(1)},E().createElement(k.AnalyticsTypography,{ref:o,tabIndex:0,component:"h3",variant:"h4"},s("courseCore.components.contentSearch.allItemsSearch.showingResultsFor"),"\xa0",E().createElement(t9,{highlight:i},i)),E().createElement(k.AnalyticsLink,{component:"button",tabIndex:0,onClick:()=>{w.Nd.search({search:void 0}),t()},analyticsId:"content.search.clear-search.button"},E().createElement(k.AnalyticsTypography,{variant:"body2"},s("courseCore.components.contentSearch.allItemsSearch.clearSearch"))))};function n3(){var e;let t=null!==(e=(0,D.Kx)("search"))&&void 0!==e?e:"";return{search:t}}let n9=e=>{let{hideFilter:t,className:n,isShownInPanel:i,searchCourseContent:s,setHeaderMessage:r}=e,{search:o}=n3(),a=i&&""!==o,[l,c]=(0,S.useState)(o),[d,u]=(0,S.useState)(!1),[p,m]=(0,S.useState)(""),[h,g]=(0,S.useState)(null),f=eD(),{contents:b,count:v,isLoading:y,isError:C,search:I}=(0,D.zk)(f),A=(0,S.useRef)(null),x=(0,T.q)(),P=tW(),G=(0,tj.y1)(e=>{I(e,4),u(!0)},250),R=()=>{t&&(u(!1),""===l&&t(!0))},B=e=>{var n;if("Tab"===e.key)setTimeout(()=>{var e;t&&""===l&&t(!0),(null===(e=A.current)||void 0===e?void 0:e.contains(document.activeElement))||u(!1)},0);else if("ArrowDown"===e.key||"ArrowUp"===e.key){let t=document.querySelectorAll("#search-listbox-id > li")[1];if((null===(n=document.activeElement)||void 0===n?void 0:n.tagName)!=="LI")null==t||t.focus();else{let t="ArrowDown"===e.key?document.activeElement.nextSibling:document.activeElement.previousSibling;t&&t.focus()}e.preventDefault()}else"Escape"===e.key&&R()},L=()=>{""!==l&&(i?m(`"${l}"`):r&&r(`"${l}"`),u(!1),w.Nd.search({search:l}).then(()=>{s(l,U.Ius.courseContent,U.$qS.MODIFIED_DATE_DESC,!0)}))};return(0,S.useEffect)(()=>{""===o&&c(o)},[o]),E().createElement(w.f8,null,E().createElement(k.AnalyticsClickAwayListener,{onClickAway:R,analyticsId:"course-outline.filter.clickAwayListener"},E().createElement("div",{className:P.searchContainer,ref:A},E().createElement("div",{className:null!=n?n:P.searchTextContainer,ref:g},E().createElement(ee._W,{inputId:"course-content-filter-input",analyticsId:"course.outline.filter.searchBox",label:x("courseCore.components.contentSearch.searchBox.searchBoxPlaceholder"),clearButtonAriaLabel:x("courseCore.components.contentSearch.searchBox.searchBoxClearButton"),TextFieldProps:{fullWidth:!0},InputProps:{autoFocus:!0,inputProps:{"aria-invalid":"false",role:"combobox","aria-autocomplete":"list","aria-expanded":d,"aria-controls":"search-listbox-id"}},onKeyDown:B,onSearch:L,onChange:e=>{c(e),""!==e?G(e):u(!1)},value:l})),E().createElement(n1,{className:P.popper,isOpen:d,anchorEl:h,isFloating:!i,onKeyDown:B},E().createElement(tJ,{itemsCount:null!=v?v:0,isLoading:y,isError:C,onShowAll:L,onTryAgain:()=>{I(l,4)}},b.map(e=>E().createElement(nJ,{key:e.id,item:e,searchTerm:l,setDropdownVisibility:u,searchCourseContent:s,setSearchMessage:null!=r?r:m})))))),a&&E().createElement(n2,{clearSearchCallback:s,isShownInPanel:!0,message:p}))};var n4=n(466471);let n7=(0,G.makeStyles)(e=>({searchAction:{display:"inline-flex",alignItems:"center",justifyContent:"center",color:e.palette.primary.main,minWidth:40,minHeight:40,textAlign:"center","&:visited":{color:e.palette.primary.main},"&:hover":{color:e.palette.primary.main},"&:active":{color:e.palette.primary.main}},searchButton:{height:"40px",width:"40px"},searchTextContainerInline:{width:"25vw",boxSizing:"border-box"}})),n5=e=>{let{searchCourseContent:t,setSearchMessage:n}=e,[i,s]=(0,S.useState)(!0),{search:r}=n3(),o=(0,T.q)(),a=n7(),l=(0,x.Fg)(),c=(0,x.ac)(l.breakpoints.down("sm")),d=(0,w.Ls)(w.SS.ContentSearch());(0,S.useEffect)(()=>{let e=()=>{var e;let n=null!==(e=new URL(window.location.href).searchParams.get("search"))&&void 0!==e?e:"";s(""===n),n?t(n,U.Ius.courseContent,U.$qS.MODIFIED_DATE_DESC,!0):t()};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[t]),(0,S.useEffect)(()=>{""!==r&&s(!1)},[r]);let u=c?E().createElement(k.AnalyticsLink,{analyticsId:"course-outline.filter.search.button","aria-label":o("courseCore.components.contentSearch.searchBox.searchButtonAriaLabel"),href:d,className:a.searchAction},E().createElement(n4.o,{"aria-hidden":"true",role:"presentation"})):E().createElement(k.AnalyticsIconButton,{analyticsId:"course-outline.filter.search.button","aria-label":o("courseCore.components.contentSearch.searchBox.searchButtonAriaLabel"),onClick:()=>{s(!1)},className:a.searchButton},E().createElement(n4.o,{"aria-hidden":"true",role:"presentation"})),p=i||c;return E().createElement(E().Fragment,null,p?u:E().createElement(n9,{hideFilter:s,className:a.searchTextContainerInline,isShownInPanel:!1,searchCourseContent:t,setHeaderMessage:n}))},n6=(0,G.makeStyles)(e=>({header:{paddingTop:"6px",marginBottom:"2px",position:"sticky",top:0,zIndex:e.zIndex.appBar,transition:e.transitions.create("box-shadow",{duration:e.transitions.duration.standard,easing:e.transitions.easing.easeInOut}),[e.breakpoints.up("md")]:{top:e.spacing(2)},"&::before":{content:'""',position:"absolute",inset:0,zIndex:-1}},headerBordered:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.palette.border.main,backgroundColor:e.palette.background.default},headerDetached:{paddingTop:e.spacing(2),"&::after":{content:'""',position:"absolute",inset:0,boxShadow:"0px 5px 0px rgba(0, 0, 0, 0.04)",zIndex:-1}},headerWithoutOverflow:{paddingTop:"4px",paddingBottom:"5px"},content:{display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative"}}));function n8(e){return`course.outline.copyDetails.overflowMenu.menu.${e}.link`}let ie=(0,G.makeStyles)(e=>({menu:{marginRight:e.spacing(4),[e.breakpoints.up("sm")]:{marginRight:0}},paper:{width:"95%",[e.breakpoints.up("sm")]:{width:"280px"}}})),it=e=>{let t=(0,T.q)(),n=(0,D.gH)("course.outline","organization.outline"),i=ie(),s=(0,G.useTheme)(),r=(0,G.useMediaQuery)(s.breakpoints.up("sm")),[o,a]=E().useState(null),l=null!==o,c="course.outline.copyDetails.overflowMenu.showMenu.button",d=()=>{a(null)},u=function({canAccessBatchEdit:e,hasCurrentCopyDetailsErrors:t,openExportModal:n,openCopyDetailsPanel:i,onClose:s}){let r=(0,T.q)(),o=(0,D.gH)("course.outline","organization.outline"),a=eD(),l=(0,D.Tn)(a),c=(0,D.ER)({courseId:a,contentId:U.x1x.Root}),d={isComplete:!!l&&(0,P.Ybd)(l),canExport:!!l&&(0,P.MAI)(l),canArchive:!!l&&(0,P.aBo)(l),canImport:!!l&&(0,P.l_$)(l),canCopy:!!l&&(0,P.I7o)(l),canConvert:!!l&&(0,P.N1L)(l)},u=function({t:e,courseFlags:t,canAccessBatchEdit:n,onClose:i}){let{isComplete:s}=t;return{key:"bulkEditItemKey",analyticsId:n8("course.outline.bulkEditLink"),icon:E().createElement(M.BulkEdit,{color:"action"}),text:e("course.outline.bulkEditLink"),hidden:!(!s&&n),onClick(){w.Nd.goPeekState(w.SS.BulkEditContent()),i()}}}({t:r,courseFlags:d,canAccessBatchEdit:e,onClose:s}),p=function({t:e,root:t,courseFlags:n,onClose:i}){let{canImport:s}=n;return{key:"importItemKey",analyticsId:n8("course.outline.operation.importContent"),icon:E().createElement(M.Import,{color:"action"}),text:e("course.outline.operation.importContent"),hidden:!s,onClick(){t&&t.id&&w.Nd.goPeekState(w.SS.ImportContent({parentId:t.id})),i()}}}({t:r,root:c,courseFlags:d,onClose:s}),m=function({t:e,resolve:t,courseFlags:n,onClose:i}){let{canCopy:s}=n;return{key:"copyContentItemKey",analyticsId:n8(t("course.outline.operation.granularCopy")),icon:E().createElement(M.Duplicate,{color:"action"}),text:e(t("course.outline.operation.granularCopy")),hidden:!s,onClick(){w.Nd.goPeekState(w.SS.CopyContent({positionAfter:"end",depth:1})),i()}}}({t:r,resolve:o,courseFlags:d,onClose:s}),h=function({t:e,resolve:t,courseFlags:n,openExportModal:i,onClose:s}){let{canArchive:r,canExport:o}=n;return{key:"exportItemKey",analyticsId:n8(t("course.outline.operation.export")),icon:E().createElement(M.Export,{color:"action"}),text:e(t("course.outline.operation.export")),hidden:!(r||o),onClick:()=>{i(),s()}}}({t:r,resolve:o,courseFlags:d,openExportModal:n,onClose:s}),g=function({t:e,resolve:t,courseFlags:n,onClose:i}){let{canCopy:s,canConvert:r,canExport:o,canArchive:a,canImport:l}=n;return{key:"viewCourseTasksKey",analyticsId:n8(t("course.outline.operation.viewCourseTasks")),icon:E().createElement(M.Attention,{color:"action"}),text:e(t("course.outline.operation.viewCourseTasks")),hidden:!(s||r||o||a||l),onClick(){w.Nd.goPeekState(w.Ty.Tasks()),i()}}}({t:r,resolve:o,courseFlags:d,onClose:s}),f=function({t:e,courseFlags:t,hasCurrentCopyDetailsErrors:n,openCopyDetailsPanel:i,onClose:s}){let{canCopy:r}=t;return{key:"copyDetailsItemKey",analyticsId:n8("course.outline.operation.copyDetails"),icon:E().createElement(M.Attention,{color:"error"}),text:e("course.outline.operation.copyDetails"),hidden:!(r&&n),onClick:()=>{i(),s()}}}({t:r,courseFlags:d,hasCurrentCopyDetailsErrors:t,openCopyDetailsPanel:i,onClose:s});return[u,p,m,h,g,f]}({...e,onClose:d}),p=t("components.directives.overflow-menu.menu-button.aria-label",{elementName:t(n("course.outline.courseContent"))});return E().createElement(E().Fragment,null,E().createElement(k.AnalyticsIconButton,{analyticsId:"course.outline.copyDetails.overflowMenu.showMenu.button",className:(0,I.Z)("overflow-menu-button",{open:l}),title:p,"aria-controls":o?c:void 0,"aria-expanded":l,"aria-haspopup":"true","aria-label":p,onClick:e=>{a(e.currentTarget)}},E().createElement(M.Menu,null)),E().createElement(ee.rM,{id:c,analyticsId:"course.outline.copyDetails.overflowMenu.menu",className:(0,I.Z)("react-container",i.menu),classes:{paper:i.paper},anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:r?"right":"left"},transformOrigin:{vertical:"top",horizontal:"right"},open:l,items:u,onClick:d,onClose:d}))},ii=()=>(0,D.pJ)(e=>!!P.Ys.app.getQueryParams(e).search),is=e=>{let{searchCourseContent:t,courseOutlineIsEmpty:n,shouldShowOverflowMenu:i,canAccessBatchEdit:s,hasCurrentCopyDetailsErrors:r,openExportModal:o,openCopyDetailsPanel:a,childrenRefresher:l,isLoading:c}=e,{search:d}=n3(),[u,p]=(0,S.useState)(`"${d}"`),m=ii(),h=eD(),g=(0,D.Tn)(h),f=(0,D.aq)(h),b=g&&(0,P.GKE)(g),v=f&&P.Fce.isStudentMembership(f),y=(0,S.useRef)(null),[C,w]=(0,S.useState)(!1),A=C||!c&&(n||m||!!v),x=n6(),R=(0,T.q)();return(0,S.useEffect)(()=>{let e=new IntersectionObserver(e=>{w(!e[0].isIntersecting)},{rootMargin:"-48px 0px 0px 0px",threshold:[0]});return y.current&&e.observe(y.current),()=>e.disconnect()},[]),E().createElement(nb,{value:l},E().createElement("span",{ref:y}),E().createElement(G.Box,{component:"header",className:(0,I.Z)("outline-header react-container",x.header,{[x.headerDetached]:C,[x.headerBordered]:A})},E().createElement(G.Box,{className:(0,I.Z)(x.content,{[x.headerWithoutOverflow]:!i})},E().createElement(G.Box,{display:"flex",alignItems:"center"},E().createElement(G.Box,{flexGrow:1,display:"flex",alignItems:"center"},E().createElement(k.AnalyticsTypography,{variant:"h2"},R("course.outline.contentHeaderLabel")),b&&E().createElement(tz,null)),E().createElement(n5,{searchCourseContent:t,setSearchMessage:p}),i&&E().createElement(it,{canAccessBatchEdit:s,hasCurrentCopyDetailsErrors:r,openExportModal:o,openCopyDetailsPanel:a})),m&&E().createElement(G.Box,{mt:1,mb:.5},E().createElement(n2,{clearSearchCallback:t,isShownInPanel:!1,message:u})))))},ir=(0,G.makeStyles)(e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(2)},withTopSpace:{marginTop:e.spacing(8),[e.breakpoints.up("sm")]:{marginTop:e.spacing(20)},[e.breakpoints.up("md")]:{marginTop:e.spacing(30)}}})),io=({hasNetworkError:e,retryLastLoad:t,courseOutlineIsEmpty:n,searchCourseContent:i,contentLoadInProgress:s})=>{let r=ir(),o=(0,T.q)(),a=(0,G.useTheme)(),l=(0,G.useMediaQuery)(a.breakpoints.down("sm")),c=ii();return s?null:E().createElement(G.Box,{display:"flex",justifyContent:"center"},e&&E().createElement(G.Box,{className:(0,I.Z)(r.container,r.withTopSpace)},E().createElement(k.AnalyticsTypography,{variant:"h2"},o("courseCore.components.contentSearch.error.networkErrorOutline")),E().createElement(k.AnalyticsPrimaryButton,{analyticsId:"content.search.state.networkError.button",onClick:()=>{t(!0)}},o("courseCore.components.contentSearch.error.tryAgain"))),c&&n&&!e&&E().createElement(G.Box,{className:(0,I.Z)(r.container,r.withTopSpace)},E().createElement(k.AnalyticsTypography,{variant:"h2"},o("courseCore.components.contentSearch.error.noResultsFound")),E().createElement(k.AnalyticsPrimaryButton,{analyticsId:"course-outline.filter.search.button",onClick:()=>{w.Nd.search({search:void 0}).then(()=>{l&&w.Nd.leavePeekState()}),i()}},o("courseCore.components.contentSearch.error.goBackToCourseContent")),E().createElement("div",{className:"sr-only",role:"status","aria-live":"assertive"},o("courseCore.components.contentSearch.error.noResultsFound"))))};function ia(e){var t;return!!(null===(t=e.permissions)||void 0===t?void 0:t.create)}function il(e){return P.AaE.canEdit(e)||!P.AaE.isRestricted(e)}var ic=n(482113);let id=e=>{let{id:t,open:n,children:i,...s}=e,r=em();return E().createElement("div",{id:t},E().createElement(ep,{value:r+1},E().createElement(ic.Z,{in:n,unmountOnExit:!0,timeout:"auto",...s},i)))};function iu(e){return!P.AaE.isUnknownContentItem(e)}function ip(e){var t,n;let i=null===(t=null==e?void 0:e.children)||void 0===t?void 0:t.length;return"number"!=typeof i?f.Unopened:0===i||(null!==(n=null==e?void 0:e.children)&&void 0!==n?n:[]).every(e=>!iu(e))?f.Empty:f.HasChildren}function im(e){return(0,ek.JE)(()=>ip(e),[null==e?void 0:e.children]),ip(e)}(a=f||(f={}))[a.Unopened=0]="Unopened",a[a.Empty=1]="Empty",a[a.HasChildren=2]="HasChildren";let ih=(0,S.createContext)(void 0);var ig=n(553476);let ib=(0,ig.cn)({key:"contentOutline/highlightedContentIdState",default:void 0}),iv=(0,ig.CG)({key:"contentOutline/isHighlightedState",get:e=>({get:t})=>!!e&&t(ib)===e}),iy=(0,ig.cn)({key:"contentOutline/togglablesOpenState",default:{}}),iC=(0,ig.CG)({key:"contentOutline/isTogglableOpen",get:e=>({get:t})=>{var n;return!!e&&null!==(n=t(iy)[e])&&void 0!==n&&n},set:e=>({get:t,set:n},i)=>{e&&n(iy,{...t(iy),[e]:!(i instanceof ig.nY)&&i})}});function iS(e,t,n){var i,s,r;let o=null!=n?n:e.id,[a,l]=(0,ig.FV)(iC(o)),c="number"==typeof(null===(i=e.children)||void 0===i?void 0:i.length),[d,u]=(0,S.useState)(c),{targetId:p}=null!==(s=(0,S.useContext)(ih))&&void 0!==s?s:{};(0,S.useEffect)(()=>()=>{e.id&&l(!1)},[e.id,l]),(0,S.useEffect)(()=>{var t;(null===(t=e.ui)||void 0===t?void 0:t.linkSource)&&a&&o===p&&l(!1)},[a,p,l,null===(r=e.ui)||void 0===r?void 0:r.linkSource,o]),(0,ek.wI)(ek.i7.CloseFolderById,(e,t)=>{t&&t===o&&(u(!1),l(!1))}),(0,S.useEffect)(()=>{(async function(){try{if(a&&!d&&t){var n;await t(e,!1),u(!0),e.children&&0===e.children.length&&(null===(n=e.permissions)||void 0===n?void 0:n.canHaveReviewState)&&e.state!==U.aql.Completed&&e.updateState(U.aql.Completed,!0)}}catch(e){console.error(e)}})()},[a,d,t,e]),(0,S.useEffect)(()=>{d&&!c&&(l(!1),u(!1))},[c,d,l]);let m=(0,S.useCallback)(()=>{l(e=>!e)},[l]),h=a&&d;return[h,m]}let iE=(0,G.makeStyles)(e=>({emptyListMessage:{display:"flex",justifyContent:"center",color:e.palette.text.secondary},emptyContainer:{"& .native-drag-top::after, & .native-drag-bottom::after":{...eb(e),top:"0",bottom:"1px",height:void 0}}}));var iI=n(198022);let iw=new WeakMap;function iA(e,t){if((null==t?void 0:t.stable)&&iw.has(e))return iw.get(e);if(e.id)return e.id;let n=iw.get(e);return n||(n=(0,iI.v4)()),iw.set(e,n),n}let ik="data-content-id";function ix(e,t){let n=null!=t?t:document,i=iA(e);return n.querySelector(`[${ik}="${i}"]`)}function iT(e){return(null==e?void 0:e.matches(`[${ik}]`))?e:null}function iP(e){let t=e.nextElementSibling;return iT(t)}function iD(e){let t=e.previousElementSibling;return iT(t)}function iG(e){var t;let n=null===(t=e.parentElement)||void 0===t?void 0:t.closest(`[${ik}]`);return iT(n)}function iR(e){let t=null==e?void 0:e.querySelector(".ax-focusable-title");null==t||t.focus()}var iB=n(866548),iL=n(482851);function iN(e){var t;return!!(null===(t=e.ui)||void 0===t?void 0:t.isUploading)}let iO=e=>{var t,n,i;let s=null!==(i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[U.DXv.CourseLink])||void 0===n?void 0:n.linkSourceId)&&void 0!==i?i:"",r=(0,ek.cm)();return(0,S.useEffect)(()=>{s&&r(()=>e.getLinkContentSource())},[r,s,e]),e.ui.linkSource};function iM(e){return!!P.AaE.canViewAsInstructor(e)&&!e.isAvailable}function i$(e){return P.AaE.isConditionalReleaseLocked(e)||P.AaE.isRestricted(e)&&!P.AaE.canViewAsInstructor(e)}let iH=(e,t)=>{e&&(t.children=e)},iF=e=>{let{item:t,loadMoreContent:n,collapsibleCourseLinkId:i}=e,s=iO(t),r=s&&iM(s),o=s&&i$(s);im(null!=s?s:t),iH(null==s?void 0:s.children,t);let a=(0,S.useCallback)((e,t)=>n?P.GQk.CourseLink.isEqualTo(e.contentHandler)?n(null!=s?s:e,t):n(e,t):Promise.resolve(),[s,n]);switch((0,ek.wI)(ek.i7.ContentUpdate,(e,n)=>{var i;n.id&&(null===(i=t.ui.linkSource)||void 0===i?void 0:i.id)===n.id&&(t.ui.linkSource=n)}),(0,ek.wI)(ek.i7.UpdateReviewState,(e,n)=>{let i=(0,ek.ko)(ek.fz.CurrentCourseMembership),r=i.isStudentMembership(),o=(0,ek.ko)(ek.fz.LearningModuleRefreshChildrenOperations);o.refreshCourseLinksWhichTargetIsInLearningModule(t,r,s)}),n$(s)){case U.DXv.TestLink:return E().createElement(oP,{item:t,linkedItem:s,isRestricted:r,readOnly:o,collapsibleCourseLinkId:i});case U.DXv.Discussion:return E().createElement(rV,{item:t,linkedItem:s,isRestricted:r,readOnly:o,collapsibleCourseLinkId:i});case U.DXv.Document:return E().createElement(rW,{item:t,linkedItem:s,isRestricted:r,readOnly:o,collapsibleCourseLinkId:i});case U.DXv.Journal:return E().createElement(r6,{item:t,linkedItem:s,isRestricted:r,readOnly:o,collapsibleCourseLinkId:i});case U.DXv.RusticiScorm:return E().createElement(ox,{item:t,linkedItem:s,isRestricted:r,readOnly:o,collapsibleCourseLinkId:i});case U.DXv.File:return E().createElement(rX,{item:t,linkedItem:s,isRestricted:r,readOnly:o,collapsibleCourseLinkId:i});case U.DXv.Folder:if(P.AaE.isBbPage(t))return E().createElement(oE,{item:t,linkedItem:s,collapsibleCourseLinkId:i});return E().createElement(r7,{item:t,linkedItem:s,loadMoreContent:a,collapsibleCourseLinkId:i});case U.DXv.LtiPlacement:return E().createElement(oV,{item:t,linkedItem:s,collapsibleCourseLinkId:i});case U.DXv.LtiLink:return E().createElement(oF,{item:t,linkedItem:s,collapsibleCourseLinkId:i});case U.DXv.LearningModule:return E().createElement(oS,{item:t,linkedItem:s,loadMoreContent:a,collapsibleCourseLinkId:i});default:return E().createElement(rH,{item:t,collapsibleCourseLinkId:i})}};var iU=n(345349),iV=n(836571);let i_=(0,G.makeStyles)(e=>({icon:{verticalAlign:"text-top",color:e.palette.indicatorPrimary.main}})),iq=e=>{let{id:t}=e,n=i_(),i=(0,T.q)();return E().createElement(iV.P,{id:t,className:n.icon,titleAccess:i("components.directives.content-item-base.aria-label.indicator")})},iz=(0,G.makeStyles)(e=>({container:{display:"flex",alignItems:"baseline",gap:"8px"},contentItemTitle:{maxWidth:"100%",width:"fit-content",color:e.palette.text.primary,fontWeight:e.typography.fontWeightSemiBold,fontSize:e.typography.fontSizeMedium,lineHeight:"1.4",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",textDecoration:"inherit","&:hover, &:focus, &:active:hover":{color:"inherit",textDecoration:"inherit"}},hoverable:{"&:hover, &:active:hover":{textDecoration:"underline"}},isRestricted:{color:e.palette.text.secondary,cursor:"pointer","&:hover, &:focus, &:active:hover":{color:e.palette.text.secondary}},readOnly:{cursor:"default","&:hover, &:active:hover":{textDecoration:"none",cursor:"default"}}})),iW=E().forwardRef(function(e,t){let{analyticsId:n,"aria-describedby":i,children:s,className:r,isRestricted:o=!1,notAccessible:a=!1,hasActivityIndicator:l=!1,readOnly:c,...d}=e,[u]=(0,S.useState)(()=>(0,iI.v4)()),p=iz(),m=c?void 0:n,{href:h,onClick:g,"aria-expanded":f,"aria-controls":b,...v}=d,y="span";c?y="div":e.href?y="a":e.onClick&&(y="button");let C=(0,I.Z)(i,l&&u);return E().createElement("div",{className:p.container},E().createElement(k.AnalyticsLink,{className:(0,I.Z)(p.contentItemTitle,c?p.readOnly:p.hoverable,o&&p.isRestricted,r,"ax-focusable-title"),"aria-describedby":C||void 0,"aria-expanded":c?void 0:f,"aria-controls":c?void 0:b,component:y,analyticsId:m,ref:t,"aria-hidden":a,tabIndex:a?-1:0,...c?v:d,"data-ax-service-tab-capture-hack":a?-1:0},s),l&&E().createElement(iq,{id:u}))}),ij=(0,G.makeStyles)(e=>{var t;let n=(0,x.m4)(null!==(t=e.palette.brand.light)&&void 0!==t?t:e.palette.brand.main,.3);return{contentItem:{width:"100%",height:"100%",display:"flex",padding:"20px 0px","&:hover":{backgroundColor:e.palette.background.b3},position:"relative","@media (hover: none) and (pointer: coarse)":{userSelect:"none","-webkit-user-select":"none","-webkit-touch-callout":"none"}},clickable:{cursor:"pointer"},draggable:{cursor:"grab"},dragOverlayOuter:{backgroundColor:e.palette.background.b3,outline:`${e.palette.brand.main} solid 2px`,boxShadow:e.shadows[10],cursor:"grabbing",opacity:.9},dragOverlay:{pointerEvents:"none"},draggingOuter:{backgroundColor:e.palette.brand.light},dragging:{opacity:0},highlighted:{"&&":{outline:`${e.palette.brand.main} solid 1px`,backgroundColor:n,"&:hover":{backgroundColor:n}}},nesting:({nestingLevel:e,indentationBreakpoint:t})=>({paddingLeft:`${ed(e,t)}px`})}}),iZ=({nestingLevel:e})=>{let t=eh();return ij({nestingLevel:e,indentationBreakpoint:t})},iK=(0,S.createContext)({isSorting:!1}),iX=e=>{let{className:t,contentId:n,readOnly:i,draggable:s,...r}=e,{isDragOverlay:o,isDragging:a,listeners:l,isSorting:c}=(0,S.useContext)(iK),d=(0,ig.sJ)(iv(n)),u=em(),p=iZ({nestingLevel:u}),m=(0,I.Z)(p.contentItem,p.nesting,{[p.clickable]:!i,[p.dragOverlay]:o,[p.dragging]:a,[p.draggable]:s&&!c,[p.highlighted]:d},t);return E().createElement("div",{className:(0,I.Z)(o&&[p.dragOverlayOuter,"dragOverlay"],a&&p.draggingOuter,"itemContainer")},E().createElement(ee.Q$,{className:m,...l,...r}))},iY=e=>{let{Icon:t,className:n,showAlertIcon:i,isRestricted:s,titleAccess:r,showLinkBadge:o,customIconUrl:a}=e,l=eS(e),c=a?E().createElement("img",{src:(0,te.uI)(a),className:l.customIcon,alt:r}):E().createElement(t,{color:i?"error":"primary",titleAccess:r});return E().createElement("div",{className:(0,I.Z)(l.contentItemIcon,s&&l.restrictedContentItemIcon,n)},o?E().createElement(ee.cm,null,c):c)};function iQ(e){var t;let n=(0,T.q)();return(null===(t=e.systemGeneratedLocalizableDescription)||void 0===t?void 0:t.languageKey)?n(e.systemGeneratedLocalizableDescription.languageKey):e.description}let iJ=(0,S.createContext)({});function i0(){return(0,S.useContext)(iJ)}let i1=e=>{let{previousNeighborId:t,nextNeighborId:n}=e,i=(0,S.useMemo)(()=>({neighborBefore:{contentId:t},neighborAfter:{contentId:n}}),[t,n]),s=iJ.Provider;return E().createElement(s,{value:i},e.children)},i2=e=>{var t;let{item:n,supportsManualTransition:i}=e,s=null!==(t=n.id)&&void 0!==t?t:"",r=eD(),o=(0,D.iG)(r,s),a=function(){let e=(0,D.Lx)();return(t,n,i)=>{var s;let r=null!==(s=n.id)&&void 0!==s?s:"",o=null!=i?i:U.aql.None,a=(0,tn.Me)(o);P.AaE.canUpdateReviewState(n)&&a&&r&&t&&!n.inSequence&&e(P.Nwg.contentReviewState.persistContentReviewState(t,r,a))}}(),l=i?()=>a(r,n,o):()=>{},{beforeItemState:c,afterItemState:d}=function(e,t){let{neighborBefore:n,neighborAfter:i}=i0(),s=(0,D.r0)(e,null==n?void 0:n.contentId),r=(0,D.r0)(e,null==i?void 0:i.contentId);return{beforeItemState:et(s,t),afterItemState:et(r,t)}}(r,n);return E().createElement(W,{beforeItemState:c,afterItemState:d,content:n,contentState:o||U.aql.None,hasAutomaticReviewStateTransition:!P.AaE.canUpdateReviewState(n),onReviewStateIconClick:l})};function i3(e){return!!e.id&&P.AaE.canHaveReviewState(e)&&P.AaE.canViewReviewState(e)}let i9=(0,G.makeStyles)(()=>(0,G.createStyles)({visibilityIcon:{marginRight:"8px"},root:{display:"flex",alignItems:"center",lineHeight:1.4}}));var i4=n(521383),i7=n(310010);let i5=e=>{let{variant:t}=e,n=i9(),i=(0,T.q)(),s=(0,D.gH)("components.directives.content-visibility","components.directives.content-visibility.organization");return E().createElement("div",{className:n.root},"medium"===t?E().createElement(i4.z,{className:n.visibilityIcon}):E().createElement(i7.z,{className:n.visibilityIcon}),E().createElement("span",null,i(s("components.directives.content-visibility.visible"))))};var i6=n(847667),i8=n(367522);let se=e=>{let{variant:t}=e,n=i9(),i=(0,T.q)(),s=(0,D.gH)("components.directives.content-visibility","components.directives.content-visibility.organization");return E().createElement("div",{className:n.root},"medium"===t?E().createElement(i6.u,{className:n.visibilityIcon}):E().createElement(i8.u,{className:n.visibilityIcon}),E().createElement("span",null,i(s("components.directives.content-visibility.hidden"))))};var st=n(405308),sn=n(256335);let si=e=>{let{variant:t}=e,n=(0,T.q)(),i=i9();return E().createElement("div",{className:i.root},"medium"===t?E().createElement(st.H,{className:i.visibilityIcon}):E().createElement(sn.H,{className:i.visibilityIcon}),E().createElement("span",null,n("components.directives.content-visibility.conditional-availability")))};function ss(e){return e.isAvailable?U.hbA.Visible:U.hbA.Hidden}function sr(e){return P.lzL.hasOnlyForcedSequenceConditionalReleaseCriteria(e)?!!e.isAvailable:P.AaE.isVisibleToStudents(e)}function so(e){return P.lzL.hasOnlyForcedSequenceConditionalReleaseCriteria(e)?!e.isAvailable:P.AaE.isHiddenFromStudents(e)}function sa(e){return!(sr(e)||so(e))&&P.lzL.isConditionalRelease(e)}let sl=e=>{let{item:t,variant:n="small"}=e;return sr(t)?E().createElement(i5,{variant:n}):so(t)?E().createElement(se,{variant:n}):sa(t)?E().createElement(si,{variant:n}):E().createElement(E().Fragment,null)};var sc=n(137444),sd=n(376851),su=n(865182);let sp=(0,G.makeStyles)(()=>(0,G.createStyles)({visibilityIcon:{marginRight:"8px"},visibilityText:{overflow:"hidden",textOverflow:"ellipsis"},root:{marginTop:"2px",marginLeft:"1px",alignSelf:"start",maxWidth:"100%"},inputRoot:{border:0,backgroundColor:"transparent"},inputFocused:{"&&":{boxShadow:"none"}},selectRoot:{paddingLeft:0,minHeight:"inherit"}}));async function sm(e,t){var n,i;let s=(0,ek.ko)(ek.fz.ConditionalReleaseCourseModelOperations);(null===(i=null===(n=t.adaptiveReleaseRules)||void 0===n?void 0:n.rules)||void 0===i?void 0:i.every(e=>{var t;return null===(t=e.criteria)||void 0===t?void 0:t.length}))&&s.conditionalReleaseAsync(t,"DELETE"),function(e,t){switch(e.adaptiveReleaseRules={startDate:null,endDate:null},t){case U.hbA.Visible:e.isAvailable=!0,e.isPartiallyVisible=!1;break;case U.hbA.Hidden:e.isAvailable=!1,e.isPartiallyVisible=!1;break;case U.hbA.Restricted:e.isAvailable=!0,e.isPartiallyVisible=!0}}(t,e),await function(e){let t=(0,ek.ko)(ek.fz.ConditionalReleaseCourseModelOperations);e.visibility=ss(e);let n=["isAvailable","isPartiallyVisible","adaptiveReleaseRules"],i=e.getAssociatedGradingColumn();return i&&(i.visible=e.isAvailable,n.push("contentDetail")),t.save(e,n,["assignedGroups,selfEnrollmentGroups.group"])}(t)}async function sh(e,t,n){let{confirmed:i}=await (P.lzL.isConditionalRelease(t)&&!P.lzL.hasOnlyForcedSequenceConditionalReleaseCriteria(t)?n():Promise.resolve({confirmed:!0}));i&&await sm(e,t)}function sg(e,t){let n=P.lzL.isConditionalRelease(e);return!n||function(e,t){let n=function(e){if(null==e?void 0:e.rules){let t=e.rules.map(e=>e.criteria),n=t.filter(e=>void 0!==e),i=n.reduce((e,t)=>t.concat(e),[]);return i}return null}(e.adaptiveReleaseRules);return t.entitledToDeleteConditionalRelease||!n||P.lzL.canDeleteAllCriteria(e,n)}(e,t)}function sf(e,t,n){return!n&&!!e.id&&!!t.entitledToViewConditionalRelease}let sb={visibilityType:U.hbA.Visible,textKey:"components.directives.content-visibility.visible",resolveKey:!0,analyticsId:"components.directives.content-visibility.visible.link",mediumIcon:i4.z,smallIcon:i7.z,displayPredicate:sg},sv={visibilityType:U.hbA.Hidden,textKey:"components.directives.content-visibility.hidden",resolveKey:!0,analyticsId:"components.directives.content-visibility.hidden.link",mediumIcon:i6.u,smallIcon:i8.u,displayPredicate:sg},sy={visibilityType:U.hbA.Restricted,textKey:"components.directives.content-visibility.conditional-availability",resolveKey:!1,analyticsId:"components.directives.content-visibility.conditional-availability.link",mediumIcon:st.H,smallIcon:sn.H,displayPredicate:sf},sC=e=>{let{exitCallback:t}=e,[n,i]=(0,S.useState)(!1),[s,r]=(0,S.useState)(!1),o=(0,T.q)(),a=(e=!1)=>{r(e),i(!0)};return E().createElement(X._X,{analyticsId:"course.conditionalRelease.removeConditionalAvailability",open:!n,TransitionProps:{onExited:()=>{t(s),i(!1)}}},E().createElement(k.AnalyticsDialogTitle,{analyticsId:"course.conditionalRelease.removeConditionalAvailability.dialogTitle",onClose:()=>a()},o("course.conditionalRelease.removeConditionalAvailability.title")),E().createElement(k.AnalyticsDialogContent,{analyticsId:"course.conditionalRelease.removeConditionalAvailability.dialogContent"},E().createElement(k.AnalyticsDialogContentText,{analyticsId:"course.conditionalRelease.removeConditionalAvailability.dialogContentText"},o("course.conditionalRelease.removeConditionalAvailability.instructions"))),E().createElement(k.AnalyticsDialogActions,{analyticsId:"course.conditionalRelease.removeConditionalAvailability.dialogactions"},E().createElement(k.AnalyticsDefaultButton,{analyticsId:"course.conditionalRelease.removeConditionalAvailability.global.cancel",onClick:()=>a()},o("global.cancel")),E().createElement(k.AnalyticsPrimaryButton,{analyticsId:"course.conditionalRelease.removeConditionalAvailability.global.continue",onClick:()=>a(!0)},o("global.continue"))))},sS=(0,G.makeStyles)(e=>(0,G.createStyles)({courseLinkVisibilityWarningBanner:{padding:"12px"},fixedMaxWidth:{maxWidth:"200px"}}));var sE=n(664626);let sI=({fixedMaxWidth:e})=>{let t=sS(),n=(0,T.q)(),i=(0,D.gH)("components.directives.content-visibility","components.directives.content-visibility.organization");return E().createElement(sE.m,{severity:"info",className:t.courseLinkVisibilityWarningBanner},E().createElement("div",{className:(0,I.Z)({[t.fixedMaxWidth]:e})},n(i("components.directives.content-visibility.courseLinkInfo"))))},sw=e=>{var t,n;let i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[U.DXv.CourseLink])||void 0===n?void 0:n.linkSourceId,s=null!=i?i:e.id,r=(0,D.pJ)(e=>P.Ys.content.getContentById(e,s)),o=(0,D.pJ)(e=>P.Ys.content.getAdaptiveReleaseCriteriaByContentId(e,s)),a=(0,S.useMemo)(()=>{let e=function(e){var t;if(e&&e.length>0){let n=[],i=[];e.forEach(e=>{n.push({...e.criteria})});let s=null===(t=e[0])||void 0===t?void 0:t.criteria.ruleId;return i.push({criteria:n,id:s}),{rules:i}}}(o);return{...r,adaptiveReleaseRules:e}},[r,o]);return a};function sA(e){return sr(e)?U.hbA.Visible:so(e)?U.hbA.Hidden:sa(e)||e.isPartiallyVisible?U.hbA.Restricted:ss(e)}async function sk(e,t,n){var i;if(e===U.hbA.Restricted){w.Nd.goPeekState(w.SS.EditConditionalRelease({contentId:null!==(i=t.id)&&void 0!==i?i:""}));return}return sh(e,t,n)}let sx=e=>{var t,n;let{item:i,variant:s,entitlements:r,disableRestricted:o,showCourseLinkWarning:a}=e,{displayModal:l,modal:c}=(0,ee.dd)(sC),d=(0,T.q)(),u=(0,D.Lx)(),p=sp(),m=null!==(t=iO(i))&&void 0!==t?t:i,h=null!==(n=sw(i))&&void 0!==n?n:i,[g,f]=(0,S.useState)(()=>sA(h)),[b,v]=(0,S.useState)(a),y=(0,D.gH)("components.directives.content-visibility","components.directives.content-visibility.organization"),C=(0,S.useCallback)(e=>{let t=e.target.value;sk(t,m,l).then(()=>{m.courseId&&u(P.Nwg.content.loadContents({courseId:m.courseId,contentId:m.id,fetchAssociatedCourseLinks:!0}))})},[m,l,u]),I=sA(h);function w(e){let t="medium"===s?e.mediumIcon:e.smallIcon,n=e.resolveKey?y(e.textKey):e.textKey,a=e.displayPredicate(i,r,o);return a?E().createElement(sd.P,{button:!0,value:e.visibilityType,analyticsId:e.analyticsId},E().createElement(t,{className:p.visibilityIcon}),E().createElement("span",{className:p.visibilityText},d(n))):null}return(0,S.useEffect)(()=>{f(I)},[I]),E().createElement(E().Fragment,null,c,E().createElement(sc.L,{select:!0,value:g,className:p.root,onChange:C,InputProps:{classes:{root:p.inputRoot,focused:p.inputFocused}},SelectProps:{MenuProps:su.w8,classes:{root:p.selectRoot},onOpen:()=>{a||P.AaE.isDiscussion(i)||P.AaE.isLink(i)||!i.courseId||(0,P.gUR)(i.courseId,i.id).then(e=>v(e))}},analyticsId:"course.content.visibility.button"},w(sb),w(sv),w(sy),b&&E().createElement(sI,{fixedMaxWidth:!0})))},sT=e=>{var t,n,i,s;let{item:r,variant:o,disableRestricted:a=!1,showCourseLinkWarning:l,modifyLocked:c=!1}=e,d=null!==(t=r.courseId)&&void 0!==t?t:"",u=(0,D.J1)(d,["course.content.designer.VIEW"]),p=(0,D.J1)(d,["course.adaptiverelease.VIEW"]),m=(0,D.J1)(d,["course.adaptiverelease.DELETE"]);r.permissions&&(u=P.AaE.canViewAsInstructor(r),r.permissions.adaptiveRelease&&(p=r.permissions.adaptiveRelease.view,m=r.permissions.adaptiveRelease.delete));let h={entitledToViewDesigner:u,entitledToViewConditionalRelease:p,entitledToDeleteConditionalRelease:m};return(n=r,i=h,s=a,!c&&(sg(n,i)||sf(n,i,s))&&(P.AaE.canEdit(n)||P.AaE.canEditAvailability(n)||!n.id))?E().createElement(sx,{item:r,variant:o,disableRestricted:a,entitlements:h,showCourseLinkWarning:l}):h.entitledToViewDesigner?E().createElement(sl,{item:r,variant:o}):E().createElement(E().Fragment,null)};async function sP(e){let t=(0,ek.ko)(ek.fz.ContentIcon);return await t.getIconClass(e)}async function sD(e){var t,n;let i=await sP(e);return t=e,(n=i)===P.GQk.Unknown.iconClass&&P.GQk.CourseLink.isEqualTo(t.contentHandler)?function(e){let t=(0,t8.xP)(e);return P.GQk.parse(t).iconClass}(t):n}let sG=(e,t)=>{let[n,i]=(0,S.useState)(),s=iO(e),r=(0,S.useRef)(!0),o=e;s&&P.GQk.CourseLink.isEqualTo(e.contentHandler)&&(o=s);let a=sD(o);return((0,S.useEffect)(()=>()=>{r.current=!1},[]),(0,S.useEffect)(()=>{a.then(e=>{r.current&&i(e)})},[a]),n)?{Icon:(0,ec.dJ)(n),ariaLabelKey:(0,ec.O1)(n)}:t||{Icon:(0,ec.dJ)("document-blank"),ariaLabelKey:(0,ec.O1)("document-blank")}};var sR=n(539976);let sB=(0,G.makeStyles)(e=>({overflowMenu:{padding:"0 16px",color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}}})),sL=e=>e.composedPath().filter(e=>e instanceof HTMLElement),sN=e=>{let{nativeEvent:t}=e;return sL(t).some(e=>"allyContentRef"in e.dataset)},sO=(0,G.makeStyles)(()=>({overflowMenuList:{width:"280px"}})),sM=e=>{let{id:t,onCloseMenu:n,anchorEl:i,overflowMenuItems:s}=e,r=sO(),o=(0,T.q)(),a=s.map(({subAnalyticsId:e,translationKey:t,onClick:i,...s})=>({...s,analyticsId:`components.directives.content-item-base.overflowMenu.${e}.link`,text:o(t),onClick:e=>{null==i||i(e),n()}}));return i?E().createElement(ee.rM,{id:t,analyticsId:"components.directives.content-item-base.overflowMenu",open:!0,onClose:n,onClick:n,onMouseUp:e=>{sN(e)&&setTimeout(n)},onKeyDown:e=>{("Escape"===e.key||"Enter"===e.key||" "===e.key)&&(sN(e)?setTimeout(n):"Escape"===e.key&&n())},anchorEl:i,classes:{list:r.overflowMenuList},transformOrigin:{vertical:12,horizontal:278},items:a}):null},s$=(0,S.createContext)({AddContentButton:()=>null,fileUploads:!1});function sH(){let{fileUploads:e}=(0,S.useContext)(s$);if(!e)throw Error("ContentOutline is trying to upload files without the context to do so!");return e}let sF=e=>{let{item:t,exitCallback:n}=e,[i,s]=(0,S.useState)(!1),[r,o]=(0,S.useState)(!1),a=function(e){let[t,n]=(0,S.useState)(),i=(0,D.Tn)(e.courseId),{textOnPage:s}=(0,S.useContext)(s$);return(0,S.useEffect)(()=>{var t;let r=(0,ek.ko)(ek.fz.Content);r.generateDeleteConfirmationKey(e,null!==(t=null==s?void 0:s.deleteConfirmationKeyVariant)&&void 0!==t?t:"course-outline",null==i?void 0:i.isOrganization).then(t=>{var i;let s=t.ui.deleteConfirmationKey;n(null!=s?s:null===(i=e.contentHandler)||void 0===i?void 0:i.toString())})},[e,null==i?void 0:i.isOrganization,null==s?void 0:s.deleteConfirmationKeyVariant]),t}(t),l=null==a?void 0:a.replace(/^resource\//,""),c=`components.directives.confirmation-needed.title-${l}`,d=`components.directives.confirmation-needed.instructions-${l}`,u=(0,T.q)(),p=(e=!1)=>{o(e),s(!0)};return E().createElement(E().Fragment,null,!!a&&E().createElement(X._X,{analyticsId:"components.directives.content-item-base.overflowMenu.dialog","aria-labelledby":"delete-content-confirmation-dialog-heading-id",open:!i,TransitionProps:{onExited:()=>{n(r),s(!1)}},isAlert:!0},E().createElement(k.AnalyticsDialogTitle,{analyticsId:"components.directives.content-item-base.overflowMenu.dialogTitle",onClose:()=>p(),id:"delete-content-confirmation-dialog-heading-id",ariaDescribedby:"delete-content-confirmation-dialog-message-id"},u(c)),E().createElement(k.AnalyticsDialogContent,{analyticsId:"components.directives.content-item-base.overflowMenu.dialogContent"},E().createElement(k.AnalyticsDialogContentText,{id:"delete-content-confirmation-dialog-message-id",analyticsId:"components.directives.content-item-base.overflowMenu.dialogContentText"},u(d))),E().createElement(k.AnalyticsDialogActions,{analyticsId:"components.directives.content-item-base.overflowMenu.dialogActions"},E().createElement(k.AnalyticsDefaultButton,{analyticsId:"components.directives.content-item-base.overflowMenu.cancel.button",onClick:()=>p()},u("global.cancel")),E().createElement(k.AnalyticsPrimaryButton,{analyticsId:"components.directives.content-item-base.overflowMenu.confirm.button",onClick:()=>p(!0)},u("global.delete")))))},sU=e=>{let{children:t}=e,n=e=>e.stopPropagation();return E().createElement("div",{onMouseDown:n,onTouchStart:n},t)},sV=e=>{var t;let n;let{item:i,overflowMenuItems:s,onOpenMenu:r}=e,[o,a]=(0,S.useState)(void 0),l=!!o,{displayModal:c,modal:d}=(0,ee.dd)(sF,{item:i}),u=e=>async()=>{let{confirmed:t}=await c();t&&e()};s.forEach(e=>{void 0!==e.confirmableAction&&(e.onClick=u(e.confirmableAction))});let p=(0,T.q)();n=null!==i.title&&void 0!==i.title?p("components.directives.overflow-menu.menu-button.aria-label",{elementName:i.title}):p("components.directives.overflow-menu.menu-button.title");let m=`content-item-overflow-menu-${i.id}`,h=sB(),g=s.filter(e=>!e.hidden),f=g.length>0&&g.every(e=>void 0!==e["data-ally-show"]),b=f&&(null===(t=g[0])||void 0===t?void 0:t["data-ally-content-ref"]);return E().createElement(E().Fragment,null,E().createElement(k.AnalyticsIconButton,{analyticsId:"components.directives.content-item-base.overflowMenu.showMenu.button",className:h.overflowMenu,onClick:e=>{null==r||r(e),a(e.currentTarget)},id:`content-item-overflow-menu-button-${i.id}`,title:n,"aria-expanded":l,"aria-label":n,"aria-haspopup":"true","aria-controls":o?m:void 0,"data-ally-show":f?"instructorfeedback":void 0,"data-ally-content-ref":f?b:void 0},E().createElement(sR.Menu,null)),!!o&&E().createElement(sU,null,E().createElement(sM,{id:m,item:i,onCloseMenu:()=>{a(void 0)},anchorEl:o,overflowMenuItems:s})),d)};var s_=n(766101);let sq=(0,G.makeStyles)(e=>(0,G.createStyles)({groupIcon:{marginRight:"8px",alignSelf:"baseline",height:e.typography.body1.lineHeight+"rem"},root:{marginLeft:"1px",marginTop:"4px",display:"flex"}})),sz=e=>{var t;let{item:n}=e,i=(0,T.q)(),s=!!n.selfEnrollmentGroups&&n.selfEnrollmentGroups.length>0&&n.selfEnrollmentGroups.some(e=>e.group&&!e.group.groupSetId);return E().createElement("span",null,i(s?"components.directives.group-count.groups.selfEnroll.plural":"components.directives.group-count.groups.plural",{number:null===(t=null==n?void 0:n.assignedGroups)||void 0===t?void 0:t.length}))},sW=e=>{let t;let n=iO(e),i=eD(),s=e.id;if(P.GQk.UltraAssignment.isEqualTo(e.contentHandler)||P.GQk.TestLink.isEqualTo(e.contentHandler)){let n=e.getDeployedAssessment();t=null==n?void 0:n.gradingColumn.id}else P.GQk.CourseLink.isEqualTo(e.contentHandler)&&e.contentDetail&&(null==n?void 0:n.id)&&(s=n.id);let r=(0,S.useMemo)(()=>{if(s)return w.nb.CourseGroup({groupCourseId:i,groupColumnId:t,groupContentId:s})},[i,t,s]);return(0,w.Ls)(r)},sj=e=>{var t;let{item:n}=e,{analyticsIds:i}=(0,S.useContext)(s$),s=sW(n);return E().createElement(k.AnalyticsLink,{analyticsId:null!==(t=null==i?void 0:i.editableGroupCount)&&void 0!==t?t:"content.outline.item.editGroups.link",href:s},E().createElement(sz,{item:n}))};var sZ=n(903054);function sK(e){return(null==e?void 0:e.enrollmentDateState)===sZ.qz.OPEN}let sX=(0,G.makeStyles)(e=>(0,G.createStyles)({groupNameTitle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordWrap:"normal",display:"block"},selfEnrollDate:{fontWeight:e.typography.fontWeightBold},deadlineSoon:{color:e.palette.error.main},groupInfoDisplay:{display:"block"}})),sY=e=>{var t,n,i,s;let{item:r,selfEnrollGroupInfo:o}=e,a=sX(),l=null!==(n=null===(t=r.assignedGroups)||void 0===t?void 0:t[0].groupTitle)&&void 0!==n?n:"",c=(0,w.Ls)((0,w.YO)({courseId:null!==(i=r.courseId)&&void 0!==i?i:"",contentId:null!==(s=r.id)&&void 0!==s?s:""}));return sK(o)?(null==o?void 0:o.isSelfEnrollment)?E().createElement(k.AnalyticsLink,{href:c,analyticsId:"components.directives.group-student-enrollment.groupTitle.link"},l):null:E().createElement("div",{className:a.groupNameTitle},l)},sQ=e=>{let{babelfishFormat:t,locale:n}=(0,ea.h)(),[i,s]=(0,S.useState)();return(0,S.useEffect)(()=>{let i=[];e.forEach(e=>{e.group&&i.push(e.group)}),(0,sZ.pL)(i,n,t).then(e=>{s(e)})},[e,t,n]),i},sJ=e=>(null==e?void 0:e.enrollmentDateState)===sZ.qz.BEFORE?"components.directives.group-student-enrollment.enrollment-starts":(null==e?void 0:e.enrollmentDateState)===sZ.qz.OPEN&&e.relativeDate?"components.directives.group-student-enrollment.enrollment-closes":(null==e?void 0:e.enrollmentDateState)===sZ.qz.AFTER?"components.directives.group-student-enrollment.enrollment-closed":"",s0=e=>{var t,n;let{item:i,selfEnrollGroupInfo:s}=e,r=(0,T.q)(),o=sX(),a=(0,w.Ls)((0,w.YO)({courseId:null!==(t=i.courseId)&&void 0!==t?t:"",contentId:null!==(n=i.id)&&void 0!==n?n:""}));if(!i.selfEnrollmentGroups||!(i.selfEnrollmentGroups.length>0)||null==s||!s.isSelfEnrollment)return E().createElement("div",{className:o.groupNameTitle},r("components.directives.group-student-enrollment.unknown"));let l="components.directives.group-student-enrollment.self-enroll-to-participate";return E().createElement("div",{className:o.groupInfoDisplay},sK(s)&&E().createElement(k.AnalyticsLink,{href:a,analyticsId:l},r(l)),!((null==s?void 0:s.enrollmentDateState)===sZ.qz.OPEN&&!s.relativeDate)&&E().createElement("div",{className:(0,I.Z)(o.selfEnrollDate,(null==s?void 0:s.isEnrollmentDateImportant)&&o.deadlineSoon)},r(sJ(s),{time:null==s?void 0:s.relativeDate})))},s1=e=>{var t,n;let{item:i}=e,s=null!==(t=i.selfEnrollmentGroups)&&void 0!==t?t:[],r=sQ(s),o=null!==(n=i.assignedGroups)&&void 0!==n?n:[];return o.length>0?E().createElement(sY,{item:i,selfEnrollGroupInfo:r}):E().createElement(s0,{item:i,selfEnrollGroupInfo:r})},s2=e=>{let{item:t}=e,n=eD(),i=(0,D.J1)(n,["course.groups.admin.VIEW"]),s=(0,D.J1)(n,["course.groups.VIEW"]),r=sq();return P.AaE.canHaveAttempts(t)&&t.isGroupContent&&t.assignedGroups?E().createElement("div",{className:r.root},E().createElement(s_.F,{className:r.groupIcon}),i?E().createElement(sj,{item:t}):s?E().createElement(sz,{item:t}):E().createElement(s1,{item:t})):null};var s3=n(942026);let s9=(0,G.makeStyles)({proctorContainer:{display:"inline-flex",alignItems:"center"},proctorIcon:{marginRight:"6px"}}),s4=e=>{let t=(0,T.q)(),n=s9();return E().createElement("div",{className:(0,I.Z)(n.proctorContainer,e.className)},E().createElement(s3.x,{className:n.proctorIcon}),t("components.services.proctoring.outline.proctored"))},s7=(0,G.makeStyles)({gradeInfo:{display:"flex",flexWrap:"wrap",overflow:"hidden"},gradeDetail:{marginRight:"16px","& + &":{position:"relative","&:before":{position:"absolute",content:'"|"',left:"-11px",top:"-1px"}}}}),s5=e=>{let{dueDate:t,timeLimitMinutes:n,isProctored:i,isFormative:s}=e,r=(0,T.q)(),o=s7(),a=(0,D.ye)(P.x40.FormativeAssessment);return E().createElement("div",{className:o.gradeInfo},E().createElement("div",{className:o.gradeDetail},r(`courseCore.components.contentItems.${t?"dueDate":"noDueDate"}`,{date:t})),a&&s&&E().createElement("div",{className:o.gradeDetail},r("courseCore.components.contentItems.formative")),"number"==typeof n&&E().createElement("div",{className:o.gradeDetail},r("courseCore.components.contentItems.timeLimit",{timeLimit:n})),i&&E().createElement(s4,{className:o.gradeDetail}))};var s6=n(558740),s8=n(42196),re=n(188505);let rt=(0,G.makeStyles)({container:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"}}),rn="components.directives.content-item-base.content-item-peer-assessment.peer-review-information-tooltip",ri=e=>{var t;let{item:n}=e,[i]=(0,S.useState)(()=>(0,ek.ko)(ek.fz.CurrentCourseMembership).isStudentMembership()),s=function(e){let[t,n]=(0,S.useState)(void 0);return(0,S.useEffect)(()=>{let t=(0,ek.ko)(ek.fz.PeerReview);t.getOrCreatePeerContentFromContent(e).then(n)},[e]),t}(n),r=(0,T.q)(),o=rt();return(null==s?void 0:s.peerGrading)&&s.isPeerGradingConfigured?E().createElement("div",{className:o.container},E().createElement(s6.x,null),E().createElement(k.AnalyticsTypography,null,r("components.directives.content-item-base.peer-review-due-date",{peerReviewsNumber:null!==(t=s.numOfPeerReviewsToComplete)&&void 0!==t?t:0,datetime:s.peerReviewDueDate})),i&&E().createElement(re.AnalyticsTooltip,{analyticsId:"components.directives.content-item-base.content-item-peer-assessment.tooltip.button",placement:"top",title:r(rn),"aria-label":r(rn)},E().createElement(k.AnalyticsButtonBase,{analyticsId:"components.directives.content-item-base.content-item-peer-assessment.tooltip.buttonBase"},E().createElement(s8.d,null)))):null};var rs=n(564470);let rr=(0,G.makeStyles)(()=>({allyWidget:{width:"auto","& > [data-ally-show]":{margin:"9px 16px","& > svg":{fontSize:"20px"}}}}));function ro(e,t,n){let i=(0,ek.ko)(ek.fz.Ally);i.update(e,t,n)}let ra=e=>{var t;let{contentId:n,fileId:i,...s}=e,r=eD(),o=null!==(t=(0,D.J1)(r,["course.content.MODIFY"]))&&void 0!==t&&t,{translate:a,locale:l}=(0,ea.h)(),c=rr();return(0,S.useEffect)(()=>{ro(l,n,i)},[l,n,i]),E().createElement(E().Fragment,null,E().createElement(rs.J9,{contentId:n,fileId:i,...s}),!!o&&E().createElement("div",{"data-testid":"score_indicator",className:c.allyWidget},E().createElement(rs.Wq,{contentRef:n,widgetType:rs.l9.ScoreIndicator})),E().createElement("div",{className:c.allyWidget},E().createElement(rs.Wq,{contentRef:n,widgetType:rs.l9.AlternativeFormats,ariaLabel:a("ally.download_alternative_formats")})))},rl=(0,G.makeStyles)(()=>({contentItemDescriptionContainer:{marginTop:"10px",paddingRight:"33px",wordBreak:"break-word",overflowWrap:"anywhere"}})),rc=e=>{let{description:t}=e,n=rl();return E().createElement("div",{className:(0,I.Z)(n.contentItemDescriptionContainer,"js-description")},t)};var rd=n(303109);let ru=e=>{if(e)return()=>{w.Nd.goPeekState(e)}};function rp(e,t,n){let i=!!e&&t;return{subAnalyticsId:"global.edit",translationKey:null!=n?n:"global.edit",icon:E().createElement(rd.I,null),onClick:ru(e),key:"components.directives.content-item-base.overflowMenu.edit",hidden:!i}}var rm=n(847637),rh=n(687521);let rg=e=>{if(e.id)return w.yf.Conversation({contentId:e.id,courseId:e.courseId})},rf=e=>{var t;let n=(0,ek.ko)(ek.fz.Context),[i,s]=(0,S.useState)(void 0),[r,o]=(0,S.useState)(!1),a=(0,D.J1)(null!==(t=e.courseId)&&void 0!==t?t:"",["course.gradebook-grades.VIEW"]);return(0,S.useEffect)(()=>{n.isTelemetryEnabled().then(o)},[n]),(0,S.useEffect)(()=>{var t,n;let i=(t=e,n=a,!P.AaE.isExternalSubmissionsAssessment(t)&&!!((P.GQk.TestLink.isEqualTo(t.contentHandler)||P.GQk.UltraAssignment.isEqualTo(t.contentHandler))&&t.hasGradingColumn())&&null!=n&&n),o=function(e,t,n){var i;let s=(0,ek.ko)(ek.fz.CurrentCourseMembership);return n&&t&&!s.isStudentMembership()&&!(null===(i=e.getAssociatedGradingColumn())||void 0===i?void 0:i.anonymousGrading)}(e,i,r);e.id&&o?s(w.Gv.ContentActivityInDetail({contentId:e.id})):s(void 0)},[e,a,r]),i};var rb=n(925332);let rv=e=>{if(e.id)return w.Hx.QuestionAnalysis({qaContentId:e.id})};var ry=n(67219),rC=n(693130),rS=n(824506);function rE(e,t){let n={hidden:!P.AaE.canDelete(e),subAnalyticsId:"global.delete",translationKey:null!=t?t:"global.delete",icon:E().createElement(rS.Trash,null),key:"delete"};return Object.defineProperty(n,"confirmableAction",{value:()=>{let t=(0,ek.ko)(ek.fz.DeleteContentCourseModelOperations);t.deleteContent(e),function(e){let t=ix(e),n=function(e){if(e)for(let t of[iP,iD,iG]){let n=t(e);if(n)return n}}(t);if(!n){let e=document.querySelector('[id^="add-content-menu-button-start-"]');null==e||e.focus();return}iR(n)}(e)},enumerable:!1}),n}var rI=n(541346);function rw(e){let[t,n]=(0,S.useState)(!1),i=(0,ek.ko)(ek.fz.Ally),s=i.isAllySupportedContentItem(e);return(0,S.useEffect)(()=>{i.isAvailable().then(n)},[i]),t&&s}function rA(e,t){let n;let i=eD(),s=(0,D.J1)(i,[h.ViewProgressInformation]),r=(0,D.to)(),o=(0,ek.ko)(ek.fz.CurrentCourseMembership),a=(0,D.fU)(i,o.isStudentMembership()),l=!!(null==a?void 0:a.progressTrackingEnabled);return l&&s&&(n=t),{subAnalyticsId:"components.directives.content-item-base.overflow-menu.content-progress",translationKey:r?"components.directives.content-item-base.overflow-menu.content-progress-org":"components.directives.content-item-base.overflow-menu.content-progress",icon:E().createElement(M.ClassPulseFuture,null),onClick:ru(n),key:"components.directives.content-item-base.overflowMenu.contentProgress",hidden:!n}}function rk(e,t,n){let i=!!e&&t;return{subAnalyticsId:`courseCore.components.contentItems.editLinked.${null!=n?n:"default"}`,translationKey:`courseCore.components.contentItems.editLinked.${null!=n?n:"default"}`,icon:E().createElement(rd.I,null),onClick:ru(e),key:"components.directives.content-item-base.overflowMenu.editLinkedItem",hidden:!i}}function rx(e){var t,n;return!!((null===(t=e.ui)||void 0===t?void 0:t.linkSource)&&(P.AaE.isFolderContentItem(e.ui.linkSource)||P.Xgx.isLearningModule(null===(n=e.ui)||void 0===n?void 0:n.linkSource)))}let rT=E().forwardRef((e,t)=>{let{conditions:n,contentId:i,entitled:s,...r}=e,{translate:o,formatItems:a}=(0,ea.h)(),l=(0,D.to)(),c=(0,w.Ls)(w.SS.EditConditionalRelease({contentId:null!=i?i:""})),d=[[n.acl,`${l?"organization":"course"}-membership`],[n.date,"date"],[n.performance,"performance"]].filter(([e])=>!!e).map(([,e],t)=>o(`components.directives.content-item-base.conditionalRelease.conditionDescriptions.${e}${0===t?"-capitalized":""}`));return E().createElement(k.AnalyticsLink,{analyticsId:"components.directives.content-item-base.conditionalRelease.link",href:s?c:void 0,ref:t,...r},a(d))}),rP=(0,G.makeStyles)(e=>({linkTarget:{width:"fit-content"},readonlyTarget:{width:"fit-content",color:e.palette.text.secondary,lineHeight:"inherit","&:hover":{textDecoration:"underline"}}})),rD=e=>{var t,n;let{item:i}=e,s=(0,T.q)(),r=rP(),o=eR(i),a=null!==(t=e.visibleAsInstructor)&&void 0!==t?t:P.AaE.canViewAsInstructor(i),l=null!==(n=e.tabbableByStudents)&&void 0!==n?n:!P.AaE.isNotAccessibleButVisibleForcedSequenceItem(i);return P.AaE.isConditionalReleaseLocked(i)||P.lzL.isConditionalRelease(i)&&a?E().createElement(eL,{item:i},a?E().createElement(rT,{className:r.linkTarget,conditions:o,contentId:i.id,entitled:P.AaE.canOpenConditionalRelease(i)}):E().createElement(k.AnalyticsButtonBase,{analyticsId:"components.common.conditional-release-info.buttonBase",className:(0,I.Z)(r.readonlyTarget),"aria-hidden":!l,tabIndex:l?0:-1},s("components.directives.content-item-base.conditionalRelease.lock-info"))):null},rG=e=>{let t=eD();e||(e=t);let n=(0,D.pJ)(t=>{let n=e?P.Ys.course.getCourseById(t,e):void 0;return!!n&&(0,P.Ybd)(n)});return n},rR=(e,t)=>{let n=rG(null==e?void 0:e.courseId),i=(0,D.J1)(null==e?void 0:e.courseId,["course.content.MODIFY"]),s=ii();return!t&&!!e&&P.AaE.canEdit(e)&&!n&&!!i&&!s},rB=(0,S.createContext)({dragHandleRef:()=>{}}),rL=(0,G.makeStyles)(()=>({dragHandle:{pointerEvents:"none",height:"38px",width:38,opacity:0,"&:focus":{opacity:1},".dragOverlay &":{opacity:1,outline:"none"},"@media (hover)":{".itemContainer:hover &":{opacity:1,"&.otherItemDragging":{opacity:0}}},"@media (hover: none)":{opacity:1}}})),rN=e=>{let{itemTitle:t}=e,n=(0,T.q)(),i=rL(),s=(0,S.useRef)(null),{isSorting:r,isDragging:o,isDragOverlay:a}=(0,S.useContext)(iK),{attributes:l,activationEvent:c,dragHandleRef:d}=(0,S.useContext)(rB),u=o&&"keyboard"===c;(0,S.useEffect)(()=>{u&&requestAnimationFrame(()=>{var e;null===(e=s.current)||void 0===e||e.focus()})},[u]);let{"aria-roledescription":p,"aria-describedby":m,...h}=null!=l?l:{},g=n("courseCore.course.dragAndDrop.announcements.dragHandleFocus",{contentItemTitle:t}),f=u?{}:{"aria-label":g,"aria-describedby":m};return E().createElement("div",{role:"application"},E().createElement(k.AnalyticsIconButton,{analyticsId:"content.item.base.move.button",ref:e=>{d(e),s.current=e},className:(0,I.Z)(i.dragHandle,{dragOverlay:a,otherItemDragging:!a&&r}),...f,...h},E().createElement(M.DragDrop,{color:a?"action":"disabled"})))},rO=e=>{var t,n,i,s;let{additionalControls:r,children:o,item:a,overflowMenuProps:l,showAlertIcon:c,showContentVisibility:d=!0,defaultIconDetails:u,overrideIconDetails:p,allyContentProps:m,showLinkBadge:h=!1,onOpenOverflowMenu:g,authorship:f,modifyLocked:b}=e,v=ef(),y=(0,T.q)(),C=null!==(t=sw(a))&&void 0!==t?t:a,{Icon:S,ariaLabelKey:w}=sG(a,u),A=iM(C),k=iQ(a),x=function(e){var t;let n=function(e){let t=e.getTimedTestDetail();return t.hasTimeLimit?Math.floor(t.displayedTimeLimitSeconds/60):void 0}(e);if(!e.hasDueDate()&&"number"!=typeof n)return;let i=function(e){let t=e.getDueDate();return t instanceof Date?t:"string"==typeof t?new Date(t):void 0}(e),s=function(e){let t=(0,P.uVn)(e),n=(0,P.B22)(e),i=!!(n&&n!==P.jrO);return t||i}(e),r=!!(null===(t=e.getAssociatedGradingColumn())||void 0===t?void 0:t.isFormative);return{dueDate:i,timeLimitMinutes:n,isProctored:s,isFormative:r}}(a),G=P.GQk.TestLink.isEqualTo(a.contentHandler),R=i3(a),B=rR(a,b),L=rw(a),N=!b&&(P.AaE.canDelete(a)||P.AaE.canViewAsInstructor(a)||(null==l?void 0:l.usesEditButton)||!!(null==l?void 0:l.downloadUrl)||(P.AaE.hasConversation(a)||L)&&!P.AaE.isConditionalReleaseLocked(a)),O=function(e,t={},n){let{editContentRoute:i,contentProgressRoute:s,usesEditButton:r,supportsConversations:o,analyticsRoute:a,editLinkedContentRoute:l,discussionStudentActivityRoute:c,downloadUrl:d,linkedItemContentHandler:u}=t,p=rx(e),m=(0,D.tx)(),h="global.edit",g="global.delete";p&&(h=m("courseCore.components.contentItems.editLink"),g=m("courseCore.components.contentItems.deleteLink"));let f=rp(i,r,h),b=function(e,t){let n=P.AaE.hasConversation(e)&&t,i=rg(e);return{subAnalyticsId:"components.directives.content-item-base.overflow-menu.open-conversation",translationKey:"components.directives.content-item-base.overflow-menu.open-conversation",icon:E().createElement(rh.r,null),onClick:ru(i),key:"components.directives.content-item-base.overflowMenu.conversation",hidden:!n}}(e,o),v=function(e){let t=rf(e);return{subAnalyticsId:"components.directives.content-item-base.overflow-menu.student-activity",translationKey:"components.directives.content-item-base.overflow-menu.student-activity",icon:E().createElement(rm.c,null),onClick:ru(t),key:"components.directives.content-item-base.overflowMenu.studentActivity",hidden:!t}}(e),y={subAnalyticsId:"components.directives.content-item-base.overflow-menu.view-analytics",translationKey:"components.directives.content-item-base.overflow-menu.view-analytics",icon:E().createElement(rm.c,null),onClick:ru(a),key:"components.directives.content-item-base.overflowMenu.analytics",hidden:!a},C={subAnalyticsId:"components.directives.content-item-base.overflow-menu.student-activity",translationKey:"components.directives.content-item-base.overflow-menu.student-activity",icon:E().createElement(rm.c,null),onClick:ru(c),key:"components.directives.content-item-base.overflowMenu.student-activity",hidden:!c},S=function(e){var t;let n=null!==(t=e.courseId)&&void 0!==t?t:"",i=(0,D.J1)(n,["course.gradebook-grades.VIEW"]),s=i&&P.AaE.isQuestionAnalysisAvailable(e),r=rv(e);return{subAnalyticsId:"components.directives.content-item-base.overflow-menu.question-analysis",translationKey:"components.directives.content-item-base.overflow-menu.question-analysis",icon:E().createElement(rb.n,null),onClick:ru(r),key:"components.directives.content-item-base.overflowMenu.questionAnalysis",hidden:!s}}(e),I=rk(l,r,u),w=rA(e,s),A=rE(e,g),k=function(e,t){var n;let i=[],s=null!==(n=(0,D.J1)(null==e?void 0:e.courseId,["course.content.MODIFY"]))&&void 0!==n&&n,r=e=>{if("Enter"===e.key||" "===e.key){let t=new MouseEvent("click",{cancelable:!0,bubbles:!0});e.currentTarget.dispatchEvent(t)}};return s&&i.push({subAnalyticsId:"ally.context_menu.view_accessibility_score",key:"ally-view-accessibility-score",translationKey:"ally.context_menu.view_accessibility_score",icon:E().createElement(rC.U,null),hidden:!t,"data-ally-show":"instructorfeedback","data-ally-show-display":"flex","data-ally-content-ref":e.id,"data-ally-invoke":"instructorfeedback",style:{display:"none"},onKeyDown:r}),i.push({subAnalyticsId:"ally.context_menu.download_alternative_formats",key:"ally-download-alternative-formats",icon:E().createElement(ry.q,null),translationKey:"ally.context_menu.download_alternative_formats",hidden:!t,"data-ally-show":"alternativeformats","data-ally-show-display":"flex","data-ally-content-ref":e.id,"data-ally-invoke":"alternativeformats",style:{display:"none"},onKeyDown:r}),i}(e,n),x=function(e,t){let n=rw(e);return{subAnalyticsId:"global.download",key:"download",icon:E().createElement(rI.U,null),translationKey:n?"ally.context_menu.download_original_file":"global.download",hidden:!t,onClick:()=>{if(t){(0,nI.sA)(nI.Cs.DownloadLinkClicked);let n=new URL(t);n.searchParams.has("xythos-download")||n.searchParams.set("xythos-download","true"),window.open(n,"_blank"),ti(e)}}}}(e,d);return[f,I,b,v,y,C,S,w,A,x,...k]}(a,l,L);return E().createElement(E().Fragment,null,B&&E().createElement("div",{className:(0,I.Z)(v.dragHandle,v.overlaidIcon,v.contentItemOverlaidIcon)},E().createElement(rN,{itemTitle:null!==(n=a.title)&&void 0!==n?n:""})),R&&E().createElement("div",{className:(0,I.Z)(v.overlaidIcon,v.contentItemOverlaidIcon)},E().createElement(i2,{item:a,supportsManualTransition:!0})),E().createElement(iY,{className:v.contentItemIcon,Icon:null!==(i=null==p?void 0:p.Icon)&&void 0!==i?i:S,showLinkBadge:h,titleAccess:y(null!==(s=null==p?void 0:p.ariaLabelKey)&&void 0!==s?s:w),isRestricted:A,showAlertIcon:c,customIconUrl:null==u?void 0:u.customIconUrl}),E().createElement("div",{className:v.contentItemComponent},E().createElement("div",{className:v.contentItemComponentDetails},E().createElement("div",{className:v.contentItemContentArea},o,!!x&&E().createElement(s5,{...x}),G&&E().createElement(ri,{item:a}),E().createElement(s2,{item:a}),f,d&&E().createElement("div",{className:v.contentVisibility},E().createElement(sU,null,E().createElement(sT,{item:a,showCourseLinkWarning:h,modifyLocked:b})),P.AaE.hasAdaptiveReleaseRules(C)&&E().createElement(rD,{item:C}))),E().createElement("div",{className:v.contentItemContextArea},!!m&&E().createElement(ra,{...m}),N&&E().createElement(sV,{item:a,overflowMenuItems:O,onOpenMenu:g}),r)),k&&E().createElement(rc,{description:k})))},rM=({children:e})=>{let{search:t}=n3();return e?""===t?E().createElement(E().Fragment,null,e):E().createElement(t9,{weight:g.Bold,highlight:t},e):null},r$=e=>{var t;let{children:n,item:i,linkProps:s,isRestricted:r,readOnly:o,modifyLocked:a,...l}=e,c=null!==(t=sw(i))&&void 0!==t?t:i,d=iM(c),u=null!=o?o:i$(i)||!s.onClick&&!s.href,p=(0,S.useRef)(null),m=rR(i,a);return E().createElement(iX,{elementToClickRef:p,readOnly:u,draggable:m,contentId:i.id},E().createElement(rO,{item:i,modifyLocked:a,...l},E().createElement(iW,{...s,isRestricted:d,readOnly:u,hasActivityIndicator:i.ui.hasIndicator,ref:p,notAccessible:P.AaE.isNotAccessibleButVisibleForcedSequenceItem(i)},E().createElement(rM,null,i.title)),n))},rH=e=>{let{item:t,collapsibleCourseLinkId:n}=e;return E().createElement(r$,{linkProps:{analyticsId:"content.item.courses.outline.default.link"},item:t,defaultIconDetails:{Icon:iU.E,ariaLabelKey:(0,ec.O1)("document-blank")},modifyLocked:!!n})};var rF=n(768722);let rU=(e,t)=>{let[n,i]=(0,S.useState)(!1),{id:s}=e,{id:r}=null!=t?t:{},o=P.GQk.CourseLink.isEqualTo(e.contentHandler)&&P.GQk.Discussion.isEqualTo(null==t?void 0:t.contentHandler)||P.GQk.Discussion.isEqualTo(e.contentHandler);(0,S.useEffect)(()=>{let e=(0,ek.ko)(ek.fz.Context);e.isTelemetryEnabled().then(i)},[]);let a=(0,S.useMemo)(()=>{let e=(0,ek.ko)(ek.fz.CurrentCourseMembership);if(s&&r&&n&&o&&!e.isStudentMembership())return w.yf.DiscussionWithGrading({contentId:r,view:"studentActivity"})},[s,o,r,n]);return a},rV=e=>{var t;let{item:n,linkedItem:i,isRestricted:s,readOnly:r,showStudentAuthorship:o,collapsibleCourseLinkId:a}=e,{analyticsIds:l}=(0,S.useContext)(s$),c=nr(null!=i?i:n),d=(0,w.Ls)(c),u=rU(n,null!=i?i:n),p=(0,T.q)(),m=o&&P.TRC.isCreatedByStudent(n),h={analyticsId:i?"course.link.item.forumLink.link":null!==(t=null==l?void 0:l.discussionTitle)&&void 0!==t?t:"content.outline.forumLink.link",href:d},g={editContentRoute:c,usesEditButton:P.AaE.canEditAvailability(n)&&!!c,discussionStudentActivityRoute:u,supportsConversations:!1};return E().createElement(r$,{linkProps:h,item:n,isRestricted:s,readOnly:r,overflowMenuProps:g,defaultIconDetails:{Icon:rF.$,ariaLabelKey:(0,ec.O1)("discussion")},authorship:m&&E().createElement("span",null,p("components.directives.content-item-base.content.discussionAuthorship.student")),modifyLocked:!!a})};var r_=n(520091);let rq=e=>{if(e.id&&P.AaE.canEdit(e))return w.Be.EditExternalLink({id:e.id})},rz=(e,t)=>P.GQk.CourseLink.isEqualTo(t.contentHandler)?rq(t):e,rW=e=>{let{item:t,linkedItem:n,isRestricted:i,readOnly:s,collapsibleCourseLinkId:r}=e,o=na(null!=n?n:t),a=rz(o,t),l=(0,w.Ls)(o),c={editContentRoute:a,usesEditButton:P.AaE.canEditAvailability(t)&&!!o,supportsConversations:!0};return E().createElement(r$,{linkProps:{analyticsId:"content.item.coures.outline.document.link",href:l},item:t,isRestricted:i,readOnly:s,showLinkBadge:!!n,defaultIconDetails:{Icon:r_.s,ariaLabelKey:(0,ec.O1)("document-text")},overflowMenuProps:c,modifyLocked:!!r})},rj=e=>{var t,n,i;let s=null===(i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[U.DXv.File])||void 0===n?void 0:n.file)||void 0===i?void 0:i.mimeType,r=(0,P.kfU)(s);return{Icon:(0,ec.Wj)(s),ariaLabelKey:(0,ec.O1)(r)}},rZ=e=>{if(e.id&&P.AaE.canEdit(e))return w.xN.EditFile({id:e.id})},rK=e=>{if(e.id)return w.xN.PreviewFile({id:e.id,view:"progress"})},rX=e=>{let t;let{item:n,linkedItem:i,isRestricted:s,readOnly:r,collapsibleCourseLinkId:o}=e,a=null!=i?i:n,{locale:l}=(0,ea.h)(),c=rZ(a),d=rz(c,n),u=rw(a),p=nE(a),m=nC(a),h=function(e){let t=(0,ek.ko)(ek.fz.Ally);return t.getXythosIdFromContentItem(e)}(a),g=function(e,t){var n,i;if(i$(e))return;let s=null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[U.DXv.File])||void 0===i?void 0:i.fileAssociationMode,r=s&&(0,U.lMq)(s);return r?t:void 0}(a,m),f=rK(n),b=e=>{nA(e),ti(e)};u&&a.id&&m&&h&&(t={contentId:a.id,fileId:h,filePreviewUrl:m});let v={editContentRoute:d,usesEditButton:P.AaE.canEditAvailability(a)&&!!c,supportsConversations:!1,downloadUrl:g,contentProgressRoute:f};return E().createElement(r$,{linkProps:{analyticsId:"content.item.course.outline.courseContent.link",href:p.href,onClick:()=>b(a),target:p.hasFilePreview?void 0:"_blank",rel:p.hasFilePreview?void 0:"noopener noreferrer"},item:n,isRestricted:s,readOnly:r,showLinkBadge:!!i,overflowMenuProps:v,defaultIconDetails:rj(n),allyContentProps:t,onOpenOverflowMenu:()=>{u&&function(e,t){let n=(0,ek.ko)(ek.fz.Ally);if(!n.isAllySupportedContentItem(e))return;let i=e.id,s=n.getXythosIdFromContentItem(e);ro(t,i,s)}(a,l)},modifyLocked:!!o})};var rY=n(852632);let rQ=(0,G.makeStyles)(e=>({chevronContainer:{position:"relative",display:"none","&::before":{content:'""',position:"absolute",borderLeft:`1px solid ${e.palette.border.main}`,top:"-13px",height:"40px"},[e.breakpoints.up("sm")]:{display:"flex"}}})),rJ=(0,G.makeStyles)(e=>{let t=e.palette.background.b4;return{folderContents:{position:"relative",backgroundColor:e.palette.background.b2,boxShadow:`inset 0px -5px 0px 0px ${t}, inset 0px 5px 0px 0px ${t}`,padding:"0 0 20px","& .content-list-item:first-child":{marginTop:"5px"}},emptyFolderContents:{padding:"25px 0"},emptyReadOnlyFolderContents:{padding:"30px 0"}}}),r0=()=>{let e=rQ(),t=rJ();return{...e,...t}},r1=(0,G.makeStyles)(e=>({highlighted:{position:"relative",outline:`${e.palette.brand.main} solid 1px`,"&:before":{content:'""',position:"absolute",left:0,right:0,top:"-1px",zIndex:1,borderTop:`1px solid ${e.palette.brand.main}`}}})),r2=e=>{var t;let{children:n,className:i,togglableId:s}=e,r=r1(),{folderId:o,item:a}=null!==(t=(0,S.useContext)(ih))&&void 0!==t?t:{},l=o===s&&(null==a?void 0:a.parentId)!==s;return E().createElement("div",{className:(0,I.Z)(l&&r.highlighted,i)},n)},r3=e=>{if(e.id)return w.SS.EditFolder({id:e.id})},r9=e=>{if(e.id)return w.SS.GenericStudentProgress({id:e.id})};function r4(e){var t;let n=(0,S.useContext)(ih),i=im(e);if(n&&i!==f.Unopened){let s=n.item.parentId!==e.id&&n.folderId===e.id,r=n.item.parentId===e.id&&n.folderId!==e.id&&(null===(t=e.children)||void 0===t?void 0:t.length)===1;switch(i){case f.Empty:if(s)return f.HasChildren;break;case f.HasChildren:if(r)return f.Empty}}return i}let r7=e=>{var t;let{item:n,linkedItem:i,loadMoreContent:s,collapsibleCourseLinkId:r}=e,{analyticsIds:o}=(0,S.useContext)(s$),a=(0,T.q)(),l=r?`${n.id}+${r}`:n.id,[c,d]=iS(n,s,l),u=r4(n),p=!!n.children&&ia(n.children),m=r0(),h=r3(n),g=rz(h,n),b=r9(null!=i?i:n),v={editContentRoute:g,usesEditButton:P.AaE.canEditAvailability(n)&&!!h,editLinkedContentRoute:i?r3(i):void 0,linkedItemContentHandler:null==i?void 0:i.contentHandler,contentProgressRoute:b},y=il(n),C=`folder-contents-${n.id}`,w=`components.directives.element-image.element-image-accessibility.img-icon-${c?"folder-open":"folder"}`,A=u!==f.HasChildren,k=(0,I.Z)(m.folderContents,{[m.emptyFolderContents]:A,[m.emptyReadOnlyFolderContents]:A&&!p});return E().createElement(r2,{togglableId:l},E().createElement(r$,{item:n,showLinkBadge:!!i,overrideIconDetails:{Icon:rY.g,ariaLabelKey:w},linkProps:{analyticsId:null!==(t=null==o?void 0:o.folderTitle)&&void 0!==t?t:"content.outline.folder.toggleFolder.button","aria-controls":C,"aria-expanded":c,onClick:y?d:void 0},overflowMenuProps:v,additionalControls:y&&E().createElement("div",{className:m.chevronContainer},E().createElement(ee.W5,{open:c})),modifyLocked:!!r}),E().createElement(aS,{item:n,isOpen:c,loadMoreContent:s,containerId:C,emptyMessage:a("components.directives.folder.empty"),centerDivider:u!==f.HasChildren,classes:{wrapperInner:k},collapsibleCourseLinkId:r}))};var r5=n(904749);let r6=e=>{let{item:t,linkedItem:n,isRestricted:i,readOnly:s,collapsibleCourseLinkId:r}=e,o=null!=n?n:t,a=nc(o),l=rz(a,t),c=(0,w.Ls)(a),d={editContentRoute:l,usesEditButton:P.AaE.canEditAvailability(o)&&!!c,supportsConversations:!1};return E().createElement(r$,{linkProps:{analyticsId:"content.item.courses.outline.journal.link",href:c},item:t,isRestricted:i,readOnly:s,overflowMenuProps:d,showLinkBadge:!!n,defaultIconDetails:{Icon:r5.t,ariaLabelKey:(0,ec.O1)("journal")},modifyLocked:!!r})},r8=(0,G.makeStyles)(e=>({region:{border:`solid 1px ${e.palette.border.main}`,borderRadius:"4px",position:"relative","&:hover":{backgroundColor:e.palette.background.b3}},openedRegion:{borderRadius:"4px 4px 0 0"},completionContainer:{cursor:"pointer",display:"flex",justifyContent:"flex-start",padding:"10px 24px",paddingInlineEnd:0,borderTop:`solid 1px ${e.palette.border.main}`},completionToggle:{marginLeft:"auto",padding:"10px 0"},containerWithDragHandle:{paddingLeft:"33px",borderRadius:"4px","&:hover":{backgroundColor:({readOnly:t})=>t?e.palette.background.paper:void 0}},openedContainerWithDragHandle:{borderRadius:"4px 4px 0 0"},learningModuleContainer:{display:"flex",position:"relative",flex:"1 1 auto"},learningModuleComponent:{flex:"1 1 auto",display:"flex",flexDirection:"column"},learningModuleComponentDetails:{position:"relative",display:"flex"},learningModuleDragHandle:{left:"-3px"},title:{"&:hover, &:active:hover":{textDecoration:"none"}},contentItemIcon:{marginRight:"10px"},completionBanner:{borderTop:`1px solid ${e.palette.border.main}`}})),oe=e=>{if(e.id)return w.SS.EditLearningModule({id:e.id})},ot=(0,G.makeStyles)(e=>(0,G.createStyles)({container:{display:"flex",alignItems:"center",gap:"24px"},nextButton:{paddingInlineEnd:"24px",display:"flex",alignItems:"center",borderInlineEnd:`1px solid ${e.palette.border.main}`},statusContainer:{display:"inline-flex",gap:"24px"},statusMessageNotStarted:{color:e.palette.text.secondary},statusMessageStarted:{color:e.palette.indicatorPrimary.main},statusMessageCompleted:{color:e.palette.text.primary}}));function on(e,t){return t?e/t*100:0}function oi(e,t){let n=on(e,t),i="width 0.5s ease-in-out";return{borderWidth:e>0?"1px":0,transition:0===e?`${i}, border-width 0s ease-in-out 0.5s`:i,width:`${n}%`}}let os=(0,G.makeStyles)(e=>(0,G.createStyles)({chart:{display:"grid",margin:"0",width:"141px",alignItems:"center",[e.breakpoints.up("sm")]:{width:"150px"}},chartLine:{border:`1px solid ${e.palette.background.default}`,height:"10px",borderRadius:"8px",gridColumn:1,gridRow:1},chartLineUnopened:{backgroundColor:e.palette.background.b6,width:"100%"},chartLineStarted:({stateCompletion:t})=>({backgroundColor:e.palette.background.b10,...oi(t.started+t.completed,t.total)}),chartLineCompleted:({stateCompletion:t})=>({backgroundColor:e.palette.indicatorPrimary.main,...oi(t.completed,t.total)}),chartLineStartedTooltipWrap:({stateCompletion:e})=>{let t=on(e.started,e.total),n=on(e.completed,e.total);return{width:`${t}%`,marginLeft:`${n}%`,border:"0"}}})),or=e=>{let{analyticsId:t,stateCompletion:n}=e,i=os(e),s=(0,T.q)();return E().createElement("div",{className:(0,I.Z)("js-completion-chart",i.chart),"aria-hidden":"true"},E().createElement("div",{className:(0,I.Z)(i.chartLine,i.chartLineUnopened),"data-testid":"content-progress-breakdown-unopened"}),E().createElement("div",{className:(0,I.Z)(i.chartLine,i.chartLineStarted),"data-testid":"content-progress-breakdown-started"}),E().createElement(k.AnalyticsTooltip,{analyticsId:`${t}.started`,title:s("courseCore.course.progress.student.completion.startedTooltip",n),placement:"bottom-end"},E().createElement("div",{className:(0,I.Z)(i.chartLine,i.chartLineStartedTooltipWrap)})),E().createElement(k.AnalyticsTooltip,{analyticsId:`${t}.completed`,title:s("courseCore.course.progress.student.completion.completedTooltip",n),placement:"bottom-end"},E().createElement("div",{className:(0,I.Z)(i.chartLine,i.chartLineCompleted),"data-testid":"content-progress-breakdown-completed"})))},oo=(0,G.makeStyles)(e=>(0,G.createStyles)({baseButton:{fontSize:e.typography.fontSizeDefault,fontWeight:e.typography.fontWeightSemiBold,display:"inline-flex",alignItems:"center","& svg":{marginInlineEnd:"1ch"}},startDot:{color:e.palette.success.main},continue:{color:e.palette.indicatorPrimary.main,"&:hover, &:focus":{textDecoration:"underline"}},completed:{color:e.palette.success.main}}));async function oa(e,t,n,i){var s,r;let o=null===(r=null===(s=t.contentDetail)||void 0===s?void 0:s[U.DXv.CourseLink])||void 0===r?void 0:r.linkSourceId;if(!o)return Promise.resolve(t);let a=P.Ys.content.getContentById(n,o);if(a)return Promise.resolve(a);let l=await i(P.Nwg.content.loadContents({courseId:e,contentId:o}));return l.contents[o]}async function ol(e,t,n,i){var s;let r=await i(P.Nwg.contentReviewState.getContentReviewState(e,t,!0,!0)),o=null===(s=r.contentStates.find(e=>e.contentId===t))||void 0===s?void 0:s.nextIncompleteChild;if(o)return await oa(e,o,n,i)}let oc=(e,t)=>w.Nd.goPeekState(w.Be.WebLinkLaunchFrame({contentId:e,toolHref:t}));async function od(e,t,n){let i=await ol(e,t,n.store,n.dispatch);if(i){if(P.AaE.isConditionalReleaseLocked(i))return Promise.resolve({nextContent:i,onOpen:()=>(n.expandLearningModule(b.Unavailable),Promise.resolve(!1))});switch(P.AaE.getContentHandler(i).handle){case U.DXv.TestLink:return{nextContent:i,route:t1(i,!1)};case U.DXv.CourseLink:throw Error("Course links should have been resolved earlier");case U.DXv.Discussion:return{nextContent:i,route:nr(i)};case U.DXv.Document:case U.DXv.Page:return{nextContent:i,route:nz(i)};case U.DXv.Folder:if(P.AaE.isBbPage(i))return{nextContent:i,route:nz(i)};throw Error("Folders are not supported next items");case U.DXv.Journal:return{nextContent:i,route:nc(i)};case U.DXv.LearningModule:throw Error("Learning Modules are not supported next items");case U.DXv.RusticiScorm:return function(e){let{id:t,courseId:n}=e;if(!n||!t)return;let i=(0,ek.ko)(ek.fz.Scorm);return{nextContent:e,onOpen:async()=>(await i.scormLaunch({courseId:n,contentId:t,content:void 0,showPreLaunchPanel:!0}),!0)}}(i);case U.DXv.File:return function(e,t){let{downloadUrl:n,route:i}=nS(e,t.supportsInlineRender);return i?{nextContent:e,route:i}:n?{nextContent:e,onOpen:()=>{nA(e);let i=(0,te.Yo)(n);return i?Promise.resolve(!0):(t.expandLearningModule(b.PopupBlocked),Promise.resolve(!1))},updateReviewState:!0}:void 0}(i,n);case U.DXv.ExternalLink:return function(e,t){let n=P.AaE.getLaunchInNewWindow(e),i=nX(e);if(i)return{nextContent:e,onOpen:async()=>{if(n){let e=(0,te.Yo)(i);return e?Promise.resolve(!0):(t.expandLearningModule(b.PopupBlocked),Promise.resolve(!1))}return await oc(e.id,i),!0},updateReviewState:!0}}(i,n);case U.DXv.PartnerCloud:case U.DXv.LtiPlacement:case U.DXv.LtiLink:return function(e){let{id:t,courseId:n}=e;if(!n||!t)return;let i=(0,ek.ko)(ek.fz.Lti);return{nextContent:e,onOpen:async()=>(await i.ltiLaunch({courseId:n,contentId:t,content:void 0,showPreLaunchPanel:!0}),!0)}}(i);default:return}}}(l=b||(b={}))[l.Unavailable=0]="Unavailable",l[l.PopupBlocked=1]="PopupBlocked";let ou=(0,S.memo)(function({analyticsId:e,className:t,contentId:n,expandLearningModule:i,learningModuleName:s,completionStatusMessageId:r}){let o=oo(),a=(0,T.q)(),l=(0,D.jp)(n),{open:c}=function(e,t){let n=(0,D.ye)("feature.course.content.inline-render"),i=(0,D.Lx)(),s=(0,D.WT)().getState(),r=(0,S.useCallback)(async()=>{let r=null==e?void 0:e.courseId,o=null==e?void 0:e.id;if(!r||!o)return Promise.resolve();let a=await od(r,o,{supportsInlineRender:n,store:s,dispatch:i,expandLearningModule:t});if(!a)return t(void 0);let{nextContent:l,route:c,onOpen:d,updateReviewState:u}=a;if(c)return w.Nd.goPeekState(c);if(d){let e=!1;try{e=await d()}catch(t){e=!1}if(u&&e){let e=(0,tn.w4)(l);e&&l.id&&await i(P.Nwg.contentReviewState.persistContentReviewState(r,l.id,e))}}},[null==e?void 0:e.courseId,null==e?void 0:e.id,i,s,n,t]);return{open:r}}(l,i),d=!!l&&P.Xgx.isForcedSequenceModule(l);if(!(null==l?void 0:l.state))return null;switch(l.state){case U.aql.Completed:return E().createElement("span",{className:(0,I.Z)(o.baseButton,o.completed,t)},E().createElement(M.Check,null)," ",a("courseCore.course.progress.student.completion.next.completed",{learningModuleName:s}));case U.aql.Started:if(!d)return null;return E().createElement(k.AnalyticsButtonBase,{analyticsId:e,className:(0,I.Z)(o.baseButton,o.continue,t),onClick:c,"aria-describedby":r,"aria-label":a("courseCore.course.progress.student.completion.next.continueLabel",{learningModuleName:s})},a("courseCore.course.progress.student.completion.next.continue"));case U.aql.None:case U.aql.Unlocked:if(!d)return null;return E().createElement("span",{className:t},E().createElement(k.AnalyticsOutlineButton,{analyticsId:e,className:o.baseButton,onClick:c,"aria-describedby":r,"aria-label":a("courseCore.course.progress.student.completion.next.startLabel",{learningModuleName:s})},E().createElement(M.Dot,{className:o.startDot}),a("courseCore.course.progress.student.completion.next.start")))}}),op=({analyticsId:e,contentId:t,expandLearningModule:n})=>{var i,s;let r=ot(),o=(0,G.useTheme)(),a=(0,G.useMediaQuery)(o.breakpoints.down("xs")),l=(0,D.jp)(t),c=function(e,t){let n=(0,T.q)();switch(e){case U.aql.None:case U.aql.Unlocked:return n("courseCore.course.progress.student.completion.notStarted");case U.aql.Started:if(t&&t.completed>0)return n("courseCore.course.progress.student.completion.completed",t);if(t)return n("courseCore.course.progress.student.completion.started",t);return"";case U.aql.Completed:if(t)return n("courseCore.course.progress.student.completion.completed",t);return""}}(null!==(i=null==l?void 0:l.state)&&void 0!==i?i:U.aql.None,null==l?void 0:l.stateCompletion),d=(0,tj.Me)();if(!(null==l?void 0:l.state))return null;let u=`completion-status-message-${d}`;return E().createElement("div",{className:r.container},E().createElement(ou,{analyticsId:`${e}.next`,contentId:t,expandLearningModule:n,learningModuleName:null!==(s=l.title)&&void 0!==s?s:"",completionStatusMessageId:u,className:r.nextButton}),E().createElement("div",{className:r.statusContainer},E().createElement(k.AnalyticsTypography,{variant:"subtitle2",id:u,className:(0,I.Z)("js-completion-status-message",{[r.statusMessageNotStarted]:l.state===U.aql.None||l.state===U.aql.Unlocked,[r.statusMessageStarted]:l.state===U.aql.Started,[r.statusMessageCompleted]:l.state===U.aql.Completed})},c),(null==l?void 0:l.stateCompletion)&&l.state===U.aql.Started&&!a&&E().createElement(or,{analyticsId:"course.learning.module.completion.chart",stateCompletion:l.stateCompletion})))},om=({className:e})=>{let[t,n]=(0,S.useState)(!0),i=(0,T.q)();return E().createElement(E().Fragment,null,t&&E().createElement(sE.m,{severity:"warning",onClose:()=>n(!1),icon:E().createElement(A.AlertError,{color:"primary"}),closeText:i("course.content.forcedSequenceBannerDismiss"),className:e},i("courseCore.course.progress.student.completion.next.banners.unavailable")))},oh=({className:e})=>{let[t,n]=(0,S.useState)(!0),i=(0,T.q)();return E().createElement(E().Fragment,null,t&&E().createElement(sE.m,{severity:"warning",onClose:()=>n(!1),icon:E().createElement(A.AlertError,{color:"primary"}),closeText:i("course.content.forcedSequenceBannerDismiss"),className:e},i("courseCore.course.progress.student.completion.next.banners.popupBlocked")))},og=(0,G.makeStyles)(e=>(0,G.createStyles)({instructorNote:{color:e.palette.text.secondary,marginTop:"5px"}})),of=e=>{let{item:t}=e,n=(0,T.q)(),i=og();return P.Xgx.isForcedSequenceModule(t)&&P.AaE.canEdit(t)?E().createElement("div",{className:i.instructorNote},n("components.directives.learning-module.base-item.forced-sequence.instructor-note")):null},ob=(e,t)=>{let[n,i]=(0,S.useState)(),s=(0,S.useCallback)(n=>{i(n),e||t()},[e,t]);return(0,S.useMemo)(()=>({completionNote:n,expandLearningModule:s}),[n,s])};var ov=n(718359);let oy=e=>{var t,n,i;let{contentsContainerId:s,item:r,linkedItem:o,open:a,toggleContents:l,collapsibleCourseLinkId:c}=e,[d,u]=function(e){let t=(0,D.Lx)(),n=eD(),i=(0,D.pJ)(t=>{var n,i;return null!==(i=null===(n=t.content.contents[null!=e?e:""])||void 0===n?void 0:n.hasProgressed)&&void 0!==i&&i}),s=(0,S.useCallback)(()=>{e&&t(P.Nwg.content.loadContents({contentId:e,courseId:n,hasProgressed:!0}))},[t,n,e]);return[i,s]}(r.id),p=(0,D.J1)(r.courseId,["course.content.MODIFY"]),m=(0,T.q)(),h=(0,S.useRef)(null),g=iQ(r),f=!il(r),v=function(e){let t=ef(),n=rQ(),i=r8(e);return{...t,...n,...i}}({readOnly:f});(0,S.useEffect)(()=>{a&&(nx(r),u())},[a,r,u]);let y=i3(r),C=P.AaE.canEdit(r),A=a&&(i=null!=o?o:r,P.AaE.canEdit(i)&&P.Xgx.isForcedSequenceModule(i)&&!P.AaE.isHiddenFromStudents(i)&&d),k=null!==(t=sw(r))&&void 0!==t?t:r,x=`learning-module-title-${r.id}`,G=iM(k),R=oe(r),B=rz(R,r),L=r9(null!=o?o:r),N={editContentRoute:B,usesEditButton:C&&!!R,editLinkedContentRoute:(null==o?void 0:o.id)?w.SS.EditLearningModule({id:null==o?void 0:o.id}):void 0,contentProgressRoute:L},O=!c&&(P.AaE.canDelete(r)||P.AaE.canEdit(r)),M=function(e,t={}){let{editContentRoute:n,editLinkedContentRoute:i,usesEditButton:s,contentProgressRoute:r}=t,o=rx(e),a=(0,D.tx)(),l="global.edit",c="global.delete";o&&(l=a("courseCore.components.contentItems.editLink"),c=a("courseCore.components.contentItems.deleteLink"));let d=rp(n,s,l),u=rk(i,s,P.GQk.LearningModule),p=rA(e,r),m=rE(e,c);return[d,p,u,m]}(r,N),$=rR(r,!!c),{completionNote:H,expandLearningModule:F}=ob(a,l);return E().createElement("div",{role:"region","aria-labelledby":x,className:(0,I.Z)(v.region,a&&v.openedRegion)},E().createElement(iX,{className:(0,I.Z)(v.containerWithDragHandle,a&&v.openedContainerWithDragHandle),elementToClickRef:h,readOnly:f,draggable:$,contentId:r.id},$&&E().createElement("div",{className:(0,I.Z)(v.dragHandle,v.overlaidIcon,v.learningModuleDragHandle)},E().createElement(rN,{itemTitle:null!==(n=r.title)&&void 0!==n?n:""})),E().createElement("div",{className:v.learningModuleContainer},E().createElement(iY,{className:v.contentItemIcon,Icon:ov.W,titleAccess:m((0,ec.O1)("learning-module")),showLinkBadge:!!o,isRestricted:G}),E().createElement("div",{className:v.learningModuleComponent},E().createElement("div",{className:v.learningModuleComponentDetails},E().createElement("div",{className:v.contentItemContentArea},E().createElement(iW,{id:x,analyticsId:"course.learning.module.base.item.toggleLm.button","aria-controls":s,"aria-expanded":a,"aria-label":m("components.directives.learning-module.aria-label.toggleLM",{learningModuleName:r.title}),className:v.title,readOnly:f,onClick:l,ref:h},E().createElement(rM,null,r.title)),E().createElement("div",{className:v.contentVisibility},C&&E().createElement(sU,null,E().createElement(sT,{item:r,showCourseLinkWarning:!!o,modifyLocked:!!c})),P.AaE.hasAdaptiveReleaseRules(k)&&E().createElement(rD,{item:k,tabbableByStudents:!0,visibleAsInstructor:C||p})),E().createElement(of,{item:r})),O&&E().createElement("div",{className:v.contentItemContextArea},E().createElement(sV,{item:r,overflowMenuItems:M}),!f&&E().createElement("div",{className:v.chevronContainer},E().createElement(ee.W5,{open:a})))),g&&E().createElement(rc,{description:g})))),y&&E().createElement(ee.Q$,{elementToClickRef:h},E().createElement("div",{className:v.completionContainer},E().createElement(op,{analyticsId:"course.learning.module.stateCompletion",contentId:k.id,expandLearningModule:F}),E().createElement("div",{className:v.completionToggle},E().createElement(ee.W5,{open:a})))),A&&E().createElement(ee.WG,null),a&&H===b.Unavailable&&E().createElement(om,{className:v.completionBanner}),a&&H===b.PopupBlocked&&E().createElement(oh,{className:v.completionBanner}))},oC=(0,G.makeStyles)(e=>({container:{padding:"20px 0"},learningModuleContents:{position:"relative",border:`solid 1px ${e.palette.border.main}`,borderRadius:"0 0 4px 4px",borderTop:"0",padding:"25px 0",boxShadow:`inset 0px 3px ${e.palette.background.paper},
       inset 0px -3px ${e.palette.background.paper}`},emptyReadOnlyLearningModuleContents:{padding:"5px 0"}})),oS=e=>{let{item:t,linkedItem:n,loadMoreContent:i,collapsibleCourseLinkId:s}=e,r=(0,T.q)(),[o,a]=iS(t,i,s),l=oC();(0,ek.wI)(ek.i7.UpdateReviewState,(e,n)=>{let i=(0,ek.ko)(ek.fz.CurrentCourseMembership),s=i.isStudentMembership(),r=(0,ek.ko)(ek.fz.LearningModuleRefreshChildrenOperations);r.refreshChildren(n,t,s)});let c=`learning-module-contents-${t.id}`;return E().createElement("div",{className:l.container},E().createElement(r2,{togglableId:t.id},E().createElement(oy,{contentsContainerId:c,item:t,open:o,linkedItem:n,toggleContents:a,collapsibleCourseLinkId:s}),E().createElement(aS,{item:t,isOpen:o,loadMoreContent:i,containerId:c,emptyMessage:r("components.directives.learning-module.empty"),classes:{emptyMessage:l.emptyReadOnlyLearningModuleContents,wrapperInner:l.learningModuleContents},collapsibleCourseLinkId:s})))},oE=e=>{let{item:t,linkedItem:n,collapsibleCourseLinkId:i}=e,s=nz(t,"content"),r=nz(t,"progress"),o=(0,w.Ls)(s),a={editContentRoute:s,contentProgressRoute:r,usesEditButton:P.AaE.canEditAvailability(t)&&!!s,supportsConversations:!0};return E().createElement(r$,{linkProps:{analyticsId:"content.item.coures.outline.document.link",href:o},item:t,overflowMenuProps:a,defaultIconDetails:{Icon:r_.s,ariaLabelKey:(0,ec.O1)("document-text")},showLinkBadge:!!n,modifyLocked:!!i})};var oI=n(747216);let ow=async e=>{let t=(0,ek.ko)(ek.fz.Scorm);e.id&&e.courseId&&await t.scormLaunch({contentId:e.id,courseId:e.courseId,content:e,showPreLaunchPanel:!0})},oA=e=>{if(e.id&&P.AaE.canEdit(e))return w.lF.EditScorm({contentId:e.id})},ok=e=>{var t,n;let[i,s]=(0,S.useState)(void 0),r=eD(),o=(0,D.J1)(r,["course.gradebook.MODIFY"]),a=null!==(n=o&&(null===(t=e.hasReport)||void 0===t?void 0:t.call(e)))&&void 0!==n&&n,{id:l}=e;return(0,S.useEffect)(()=>{let e=(0,ek.ko)(ek.fz.CurrentCourseMembership),t=a&&!e.isStudentMembership();l&&t?s(w.lF.ScormAnalyticsReport({contentId:l,courseId:r})):s(void 0)},[l,r,a]),i},ox=e=>{let{item:t,linkedItem:n,isRestricted:i,readOnly:s,collapsibleCourseLinkId:r}=e,o=null!=n?n:t,a=oA(o),l=rz(a,t),c=ok(t),d=r9(t),u={editContentRoute:l,usesEditButton:P.AaE.canEditAvailability(o)&&!!l,analyticsRoute:c,supportsConversations:!0,contentProgressRoute:d};return E().createElement(r$,{linkProps:{analyticsId:"content.item.scormlaunch.link",href:"#",onClick:()=>ow(o)},item:t,isRestricted:i,readOnly:s,showLinkBadge:!!n,overflowMenuProps:u,defaultIconDetails:{Icon:oI.C,ariaLabelKey:(0,ec.O1)("scormengine")},modifyLocked:!!r})};var oT=n(124057);let oP=e=>{var t;let{item:n,linkedItem:i,isRestricted:s,readOnly:r,collapsibleCourseLinkId:o}=e,a=null!=i?i:n,l=ni(a.courseId),c=t1(a,l),d=rz(c,n),u=(0,w.Ls)(c),p=null===(t=a.getDeployedAssessment())||void 0===t?void 0:t.permissions,m=!!(p&&(p.modify||p.view));return E().createElement(r$,{linkProps:{analyticsId:l?"content.item.courses.outline.gradebook.item.assessment.link":"content.item.courses.outline.gradebook.item.assessment.readOnly.link",href:u},item:n,isRestricted:s,readOnly:r,showLinkBadge:!!i,overflowMenuProps:{editContentRoute:d,usesEditButton:m,supportsConversations:!0},defaultIconDetails:{Icon:oT.e,ariaLabelKey:(0,ec.O1)("test")},modifyLocked:!!o})};var oD=n(892208);let oG=e=>{let{item:t,collapsibleCourseLinkId:n}=e,i=nX(t),s=rq(t),r=r9(t),o=P.AaE.getLaunchInNewWindow(t),a={editContentRoute:s,usesEditButton:P.AaE.canEditAvailability(t)&&!!s,supportsConversations:!1,contentProgressRoute:r},l=e=>{nk(e),ti(e),o||oc(e.id,i)};return E().createElement(r$,{linkProps:{analyticsId:"content.item.course.outline.courseContent.link",href:o?i:"",onClick:()=>l(t),target:o?"_blank":"",rel:"noopener noreferrer"},item:t,overflowMenuProps:a,defaultIconDetails:{Icon:oD.r,ariaLabelKey:(0,ec.O1)("link")},modifyLocked:!!n})};var oR=n(830858);let oB=async e=>{let t=(0,ek.ko)(ek.fz.Lti);return t.ltiLaunch({courseId:e.courseId,contentId:e.id,content:e,showPreLaunchPanel:!0})},oL=e=>{let t=(0,ek.ko)(ek.fz.Lti),n=t.getDomainConfigStatusType(e),i=!!e.id&&P.ddT.isLtiLink(e),s=n===ek.Z.Excluded,r=!1===P.ddT.ltiToolProviderExists(e);return i&&(r||s)},oN=e=>{let[t,n]=(0,S.useState)(!1);return(0,S.useEffect)(()=>{let t=(0,ek.ko)(ek.fz.Entitlement);t.hasSystemEntitlement(e).then(n)},[e]),t},oO=(0,G.makeStyles)(e=>({alertLtiLink:{fontSize:e.typography.fontSizeSmall,fontWeight:e.typography.fontWeightSemiBold,color:e.palette.error.main}})),oM=e=>{let{item:t}=e,n=oN("system.buildingblocks.VIEW"),i=(0,T.q)(),s=oO(e);return E().createElement("span",{className:s.alertLtiLink,dangerouslySetInnerHTML:{__html:i(function(e,t){let n=function(e){let t=(0,ek.ko)(ek.fz.Lti),n=t.getDomainConfigStatusType(e);return n===ek.Z.NeedsApproval}(e),i=oL(e),s=P.ddT.isUnlaunchableLtiLink(e),r=t?"admin":"instructor";return i&&!n?`courseCore.components.contentItems.ltiExcludedProvider.${r}`:s&&!n?`courseCore.components.contentItems.ltiDeletedPlacement.${r}`:s&&n?"courseCore.components.contentItems.ltiApprovalRequired":"courseCore.components.contentItems.ltiBrokenLink"}(t,n))}})},o$=e=>{let{item:t,children:n,editRoute:i,usesEditButton:s,supportsConversations:r,iconDetails:o,linkedItem:a,collapsibleCourseLinkId:l}=e,c=null!=a?a:t,d=rz(i,t),u=(oL(c)||P.ddT.isUnlaunchableLtiLink(c))&&P.AaE.canViewAsInstructor(c),p=r9(t),m={analyticsId:"content.item.course.outline.courseContent.link",href:"#",onClick:()=>oB(c).catch(e=>{console.error(e)})};return u&&(m.href=void 0,m.onClick=void 0),E().createElement(r$,{linkProps:m,overflowMenuProps:{editContentRoute:d,usesEditButton:s,supportsConversations:r,contentProgressRoute:p},item:t,showLinkBadge:null!=a,defaultIconDetails:o,showAlertIcon:P.ddT.isUnlaunchableLtiLink(c),showContentVisibility:!P.ddT.isUnlaunchableLtiLink(c),modifyLocked:!!l},u&&E().createElement(oM,{item:c}),n)},oH=e=>{if(e.id)return w.MS.EditLti({id:e.id})},oF=e=>{var t,n;let{item:i,linkedItem:s}=e,r=null!=s?s:i,o=oH(r),a=P.AaE.canEditAvailability(r)&&!!o;return E().createElement(o$,{...e,iconDetails:{Icon:oR.U,ariaLabelKey:(0,ec.O1)("lti"),customIconUrl:null===(n=null===(t=i.contentDetail)||void 0===t?void 0:t["resource/x-bb-blti-link"])||void 0===n?void 0:n.customIconUrl},editRoute:o,usesEditButton:a,supportsConversations:!0})},oU=e=>{var t;if(e.id&&e.contentHandler&&(null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()].placement))return w.MS.EditLtiPlacement({id:e.id})},oV=e=>{let{item:t,linkedItem:n}=e,i=null!=n?n:t,s=oU(i),r=P.AaE.canEditAvailability(i)&&!!s;return E().createElement(o$,{...e,iconDetails:{Icon:oR.U,ariaLabelKey:(0,ec.O1)("lti"),customIconUrl:function(e){var t,n;let i=null==e?void 0:e.contentHandler;if(i)return null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[`${i}`].placement)||void 0===n?void 0:n.iconUrl}(t)},editRoute:s,usesEditButton:r,supportsConversations:!0})},o_=e=>E().createElement(o$,{...e,iconDetails:{Icon:oR.U,ariaLabelKey:(0,ec.O1)("lti")},editRoute:void 0,usesEditButton:!1,supportsConversations:!1});var oq=n(361333);let oz=e=>{var t,n,i;if(!e.id)return;let s=null!==(t=e.contentHandler)&&void 0!==t?t:"",r=null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[s.toString()])||void 0===i?void 0:i.launchLink;if(!r)return;let o=(0,te.uI)(r),a=(0,te.Ou)(o,"from_ultra","true");return w.MS.EditLtiCloudDocument({courseId:e.courseId,contentId:e.id,toolHref:a})},oW=e=>{let{item:t}=e,n=oz(t),i=function(e){var t;let n=null!==(t=(0,D.J1)(null==e?void 0:e.courseId,["course.content.MODIFY"]))&&void 0!==t&&t;return n&&!oL(e)&&!!P.ddT.ltiPlacementExists(e)}(t);return E().createElement(o$,{...e,iconDetails:{Icon:oq.g,ariaLabelKey:(0,ec.O1)("onedrive")},editRoute:n,usesEditButton:i,supportsConversations:!0})},oj=(0,G.makeStyles)(e=>({container:({nestingLevel:t})=>({margin:"20px 0",marginLeft:`${ed(t,"sm")}px`,[e.breakpoints.up("sm")]:{marginLeft:`${ed(t,"md+")}px`}})})),oZ=()=>{let e=em();return oj({nestingLevel:e})},oK=(e,t)=>{var n,i,s,r,o,a,l,c,d;let u=null!==(r=null===(s=null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n["resource/x-bb-file"])||void 0===i?void 0:i.file)||void 0===s?void 0:s.fileName)&&void 0!==r?r:"",p={resourceUrl:null!==(o=e.ui.webLocation)&&void 0!==o?o:"",viewerUrl:void 0,fileName:u,alternativeText:u,displayName:u,mimeType:null!==(d=null===(c=null===(l=null===(a=e.contentDetail)||void 0===a?void 0:a["resource/x-bb-file"])||void 0===l?void 0:l.file)||void 0===c?void 0:c.mimeType)&&void 0!==d?d:"",render:P.I_d.Inline,fileSize:null==t?void 0:t.filesize};return p},oX=(e,t)=>{var n;t.title=e.displayName,(null===(n=t.contentDetail)||void 0===n?void 0:n["resource/x-bb-file"])&&e.render&&(t.contentDetail["resource/x-bb-file"].fileAssociationMode=(0,t8.Qi)(e.render))},oY=(e,t)=>n=>{oX(n,e),t()},oQ=(e,t)=>()=>{e(),t()},oJ=e=>{let{item:t}=e,n=oZ(),i=(0,D.Lx)(),{deleteContent:s}=sH(),[r,o]=(0,S.useState)(!1),a=t.ui.uploadCorrelationId,l=(0,D.pJ)(e=>P.Ys.fileUpload.getFileUploadById(e,a)),{filename:c,uploadProgress:d,uploadDetails:u,isCloudUpload:p,error:m,groupId:h}=null!=l?l:{},g=null==d?void 0:d.progress,{errorType:f,errorCode:b}=null!=m?m:{},v=null==u?void 0:u.canUpdateFileDetails;if((0,S.useEffect)(()=>{"number"==typeof(null==g?void 0:g.total)&&(null==g?void 0:g.loaded)===g.total&&o(!0)},[null==g?void 0:g.loaded,null==g?void 0:g.total]),!l)return null;function y(){a&&i(P.Nwg.fileUpload.abortUpload({correlationId:a,groupId:h})),s(t)}function C(e=!1){a&&i(P.Nwg.fileUpload.fileDetailsUpdated({correlationId:a},e))}let I=g?function(e){if(e.lengthComputable)return Math.round(e.loaded/e.total*100)}(g):0,w=t?oK(t,l):void 0,A=f&&f!==P.TeC.Oversized;return E().createElement(E().Fragment,null,E().createElement(ee.ht,{className:n.container,filename:c,onCancel:y,percentage:I,processing:r,displayAsError:void 0!==f}),v&&w&&E().createElement(ee.lZ,{file:w,onCancel:oQ(y,()=>C(!0)),onSave:oY(t,C),hidden:!1,supportsInlineDocumentRender:!0,canProvideDescription:!1,analyticsId:"course-outline.upload-file"}),A&&E().createElement(ec.VH,{isCloudUpload:p,errorCode:b,processError:function(){s(t)},filename:c}))},o0=e=>{let{item:t}=e,n=oZ(),i=(0,ek.cm)(),s=(0,D.Lx)(),[r,o]=(0,S.useState)(!1),a=(0,D.pJ)(e=>{var n,i;return null!==(i=null===(n=P.Ys.fileUpload.getGroupStatusById(e,t.ui.uploadGroupId))||void 0===n?void 0:n.status)&&void 0!==i?i:P.XXy.Complete});return(0,S.useEffect)(()=>{a!==P.XXy.InProgress&&i(()=>t.ui={...t.ui,isUploading:!1,isUploadCanceled:a===P.XXy.Canceled})},[i,t,a]),(0,S.useEffect)(()=>{var e;if(r&&(null===(e=t.ui)||void 0===e?void 0:e.uploadGroupId)&&(s(P.Nwg.fileUpload.abortGroupUploads(t.ui.uploadGroupId)),o(!1)),a===P.XXy.Canceled&&(null==t?void 0:t.id)){let e=(0,ek.ko)(ek.fz.DeleteContentCourseModelOperations);e.deleteContent(t)}},[r,t,s,a]),E().createElement(ee.ht,{className:n.container,filename:t.title,processing:!1,displayAsError:!1,onCancel:()=>o(!0)})};function o1(e){var t;return!!(null===(t=e.ui)||void 0===t?void 0:t.isUploadCanceled)}let o2=(e,t)=>{e.visibility=t.visibility,e.adaptiveReleaseRules=t.adaptiveReleaseRules,e.isAvailable=t.isAvailable,e.isPartiallyVisible=t.isPartiallyVisible,e.permissions=t.permissions,e.inSequence=t.inSequence,e.launchInNewWindow=t.launchInNewWindow,e.contentDetail||(e.contentDetail=t.contentDetail)},o3=(e,t)=>{let n=(0,D.Lx)(),i=eD(),{neighborBefore:s}=i0(),r=sw(e),o=(0,D.r0)(i,null==s?void 0:s.contentId),a=r&&sa(r);return(0,S.useEffect)(()=>{t&&r&&o2(e,r)},[t,r,e]),(0,S.useEffect)(()=>{t&&i&&(null==o?void 0:o.state)===U.aql.Completed&&(null==r?void 0:r.visibility)===U.hbA.Restricted&&!a&&n(P.Nwg.content.loadContents({courseId:i,contentId:r.id}))},[null==o?void 0:o.state,null==r?void 0:r.id,null==r?void 0:r.visibility,i,n,t,a]),e},o9=e=>{var t;let{item:n,loadMoreContent:i,showStudentAuthorship:s,collapsibleCourseLinkId:r}=e,o=o3(n,!!r);switch(nQ(null===(t=n.contentHandler)||void 0===t?void 0:t.toString())){case U.DXv.TestLink:return E().createElement(oP,{item:o,collapsibleCourseLinkId:r});case U.DXv.CourseLink:return E().createElement(iF,{item:o,loadMoreContent:i,collapsibleCourseLinkId:r});case U.DXv.Discussion:return E().createElement(rV,{item:o,showStudentAuthorship:s,collapsibleCourseLinkId:r});case U.DXv.Document:case U.DXv.Page:return E().createElement(rW,{item:o,collapsibleCourseLinkId:r});case U.DXv.Folder:if((0,t8.rD)(n))return E().createElement(oE,{item:o,collapsibleCourseLinkId:r});if(iN(n))return E().createElement(o0,{item:o});if(!o1(n))return E().createElement(r7,{item:o,loadMoreContent:i,collapsibleCourseLinkId:r});return null;case U.DXv.Journal:return E().createElement(r6,{item:o,collapsibleCourseLinkId:r});case U.DXv.LearningModule:return E().createElement(oS,{item:o,loadMoreContent:i,collapsibleCourseLinkId:r});case U.DXv.RusticiScorm:return E().createElement(ox,{item:o,collapsibleCourseLinkId:r});case U.DXv.File:if(iN(n))return E().createElement(oJ,{item:o});return E().createElement(rX,{item:o,collapsibleCourseLinkId:r});case U.DXv.ExternalLink:return E().createElement(oG,{item:o,collapsibleCourseLinkId:r});case U.DXv.PartnerCloud:return E().createElement(o_,{item:o,collapsibleCourseLinkId:r});case U.DXv.LtiPlacement:return E().createElement(oV,{item:o,collapsibleCourseLinkId:r});case U.DXv.LtiLink:if(t0(n))return E().createElement(oW,{item:o,collapsibleCourseLinkId:r});return E().createElement(oF,{item:o,collapsibleCourseLinkId:r});default:return E().createElement(rH,{item:o,collapsibleCourseLinkId:r})}},o4=(0,S.createContext)({dndRef:()=>{}}),o7=(0,S.createContext)({onDrop:void 0,onDragOver:void 0,onDragEnter:void 0,onDragLeave:void 0,registerNode:void 0});function o5(e){return{x:e.clientX,y:e.clientY}}function o6(e,t){var n;let{currentTarget:i}=e,{top:s,right:r,bottom:o,left:a,width:l,height:c}=i.getBoundingClientRect(),{id:d,data:u}=null!==(n=t.get(i))&&void 0!==n?n:{};return{id:d,element:i,rect:{top:s,right:r,bottom:o,left:a,width:l,height:c},data:u}}let o8=e=>{let{onDrop:t,onDragOver:n,onDragEnter:i,onDragLeave:s,children:r}=e,o=(0,S.useRef)(new WeakMap),a=(0,S.useMemo)(()=>({registerNode(e,t){o.current.set(e,t)},onDragOver(e){e.preventDefault(),e.stopPropagation(),null==n||n(e,o6(e,o.current),o5(e))},onDragEnter(e){e.preventDefault(),e.stopPropagation(),null==i||i(e,o6(e,o.current),o5(e))},onDragLeave(e){e.preventDefault(),e.stopPropagation(),null==s||s(e,o6(e,o.current),o5(e))},onDrop(e){e.preventDefault(),e.stopPropagation(),t(e,o6(e,o.current),o5(e))}}),[t,n,i,s]);return E().createElement(o7.Provider,{value:a},r)},ae=e=>{let{id:t,disabled:n=!1,data:i}=e,s=(0,S.useRef)(null),{onDrop:r,onDragOver:o,onDragEnter:a,onDragLeave:l,registerNode:c}=(0,S.useContext)(o7),d={};return n||(d={onDrop:r,onDragOver:o,onDragEnter:a,onDragLeave:l}),{setNodeRef:e=>{s.current=e,e&&(null==c||c(e,{id:t,data:i}))},listeners:d}},at=e=>{let{id:t,item:n,collapsibleCourseLinkId:i,children:s,...r}=e,{style:o,dndRef:a}=(0,S.useContext)(o4),l=rR(n,!!i),c=em(),{setNodeRef:d,listeners:u}=ae({id:t,disabled:!l,data:{item:n,nestingLevel:c}}),p=function(...e){return t=>{t&&e.forEach(e=>e(t))}}(a,d);return E().createElement("div",{"data-content-id":t,...r,...u,style:o,ref:p},s)},an=E().memo(e=>{let{item:t,parentId:n,loadMoreContent:i,showAddButton:s,neighborBeforeId:r,neighborAfterId:o,className:a,showStudentAuthorship:l,collapsibleCourseLinkId:c}=e,{AddContentButton:d}=(0,S.useContext)(s$);(0,ek.JE)(()=>(function e(t){let n={...t,$scope:void 0,$_ultra_previous_version:void 0,$last:void 0,children:void 0};return n.ui.file=void 0,n.ui.linkSource&&(n.ui={...t.ui,linkSource:e(n.ui.linkSource)}),n})(t),[t]);let u=iu(t);if(!u)return null;let p=iA(t);return E().createElement(at,{id:p,item:t,collapsibleCourseLinkId:c,className:a},E().createElement(i1,{previousNeighborId:r,nextNeighborId:o},E().createElement(o9,{item:t,loadMoreContent:i,showStudentAuthorship:l,collapsibleCourseLinkId:c}),s&&!iN(t)&&!o1(t)&&E().createElement(d,{id:p,parentId:n,item:t})))});var ai=n(623094);function as(e){return!!e&&(P.AaE.isFolderContentItem(e)||P.GQk.LearningModule.isEqualTo(e.contentHandler))}function ar(){return(0,ig._8)(({set:e})=>(t,n)=>{e(iC(t),n)},[])}function ao(){return(0,ig._8)(({snapshot:e})=>t=>!e.getLoadable(iC(t)).getValue(),[])}function aa(){return(0,ig._8)(({snapshot:e})=>t=>e.getLoadable(iC(t)).getValue(),[])}function al({active:e,over:t}){if(!t||!e)return"neither";let n=e.top+e.height/2,i=t.top+t.height/2;return n<=i?"top":"bottom"}(c=v||(v={})).Container="container",c.Item="item",c.EndOfList="endOfList";let ac=({active:e,itemParentId:t})=>!(0,iB.zw)(e)||e.data.current.sortable.containerId!==t,ad=e=>e-1,au=E().memo(function(e){let{sortableProps:t,dragHandleProps:n,dndContainerProps:i,...s}=e;return E().createElement(iK.Provider,{value:t},E().createElement(o4.Provider,{value:i},E().createElement(rB.Provider,{value:n},E().createElement(an,{...s}))))}),ap=(0,S.memo)(function(e){let t;let{item:n,parentId:i,collapsibleCourseLinkId:s}=e,r=em(),o=function(){let{active:e,over:t}=(0,ai.Cj)(),n=aa();return i=>{var s,r;let{activeIndex:o,index:a,rects:l,overIndex:c}=i,d=null!==(s=l[o])&&void 0!==s?s:i.activeNodeRect,u=null===(r=null==t?void 0:t.data.current)||void 0===r?void 0:r.item,p=o===a,m=c===a;if(!d||!as(u)||!p&&!m)return(0,iB.qw)(i);let h=al({active:null==e?void 0:e.rect.current.translated,over:l[c]}),g=n(u.id)||o<c&&"top"===h||o>c&&"bottom"===h;if(p&&g){let e=l[c-1];if(e&&o<c)return{x:0,y:e.top+e.height-(d.top+d.height),scaleX:1,scaleY:1};let t=l[c+1];if(t&&o>c)return{x:0,y:t.top-d.top,scaleX:1,scaleY:1}}return m&&g?{x:0,y:0,scaleX:1,scaleY:1}:(0,iB.qw)(i)}}(),a=rR(n,!!s),{activatorEvent:l}=(0,ai.Cj)(),{attributes:c,listeners:d,setNodeRef:u,setActivatorNodeRef:p,transform:m,transition:h,isDragging:g,isSorting:f,active:b}=(0,iB.nB)({id:s?`${n.id}+${s}`:iA(n),strategy:o,data:{type:v.Item,item:n,parentId:i,nestingLevel:r,isParentCourseLink:!!s},disabled:!a}),y=(0,S.useMemo)(()=>({listeners:d,isDragging:g,isSorting:f}),[d,g,f]);l&&(t=l instanceof KeyboardEvent?"keyboard":"pointer");let C=(0,S.useMemo)(()=>({attributes:c,dragHandleRef:p,activationEvent:t}),[c,t,p]),I=iL.ux.Transform.toString(m),w=ac({active:b,itemParentId:n.parentId})?void 0:h,A=(0,S.useMemo)(()=>({style:{transform:I,transition:w,touchAction:"manipulation"},dndRef:u}),[I,u,w]);return E().createElement(au,{sortableProps:y,dragHandleProps:C,dndContainerProps:A,...e})}),am=(e,t)=>{let n=e[t];if(n)return{contentId:n.id}},ah=(0,S.createContext)(()=>{}),ag=e=>`${e}-end-of-list`,af=e=>{let{parentId:t,lastContentIdInList:n,isInCollapsibleCourseLinkId:i}=e,s=em(),r=(0,ig.sJ)(iC(n)),{setNodeRef:o}=(0,iB.nB)({id:ag(t),disabled:!r||i,data:{type:v.EndOfList,parentId:t,nestingLevel:s,lastContentIdInList:n,disabled:i}});return E().createElement("div",{ref:o})},ab=e=>{let{id:t,items:n,isInCollapsibleCourseLinkId:i,children:s}=e,{measureDroppableContainers:r}=(0,ai.Cj)(),o=(0,ek.dn)(()=>{let e=(null!=n?n:[]).map(e=>iA(e));return e.concat(ag(t))},[n]),a=(0,S.useCallback)(e=>{let t=o.findIndex(t=>t===e)+1,n=o[t];n&&r([n])},[r,o]);return E().createElement(ah.Provider,{value:a},E().createElement(iB.Fo,{id:t,items:o,strategy:iB.qw},s,E().createElement(af,{parentId:t,lastContentIdInList:null==o?void 0:o[o.length-2],isInCollapsibleCourseLinkId:i})))},av="start",ay=E().memo(e=>{var t;let{parentFolder:n,loadMoreContent:i,showTopAddButton:s=!1,root:r=!1,centeredDivider:o=!1,showStudentAuthorship:a,collapsibleCourseLinkId:l}=e,{AddContentButton:c,textOnPage:d}=(0,S.useContext)(s$),u=em(),p=function(e,t){let n=(0,ek.dn)(()=>e,[e]);return(0,ek.wI)(ek.i7.ContentUpdate,(e,i)=>{!function(e,t,n){var i;let{parentId:s,id:r}=n,{position:o}=n;if(s&&t&&s!==t)return;let a="number"==typeof o&&(null===(i=null==e?void 0:e[o])||void 0===i?void 0:i.id)!==r;a&&(o=void 0),s&&"number"==typeof o||(o=null==e?void 0:e.findIndex(e=>e.id===r)),"number"==typeof o&&(null==e?void 0:e[o])&&(e[o]=n)}(n,t,i)}),n}(e.contents,null==n?void 0:n.id),m=function(e,t){var n,i;let s=(0,S.useContext)(ih);if(!e)return t;let r=null!==(n=null==t?void 0:t.concat())&&void 0!==n?n:[];return e===(null==s?void 0:s.item.parentId)&&(r=r.filter(e=>e!==s.item)),e===(null==s?void 0:s.folderId)&&r.splice(null!==(i=s.insertPosition)&&void 0!==i?i:0,0,s.item),r}(null==n?void 0:n.id,p),h=ey({nestingLevel:u,isButtonVisible:r||s}),g=(0,S.useRef)(null),f=function(e){if(!e||0===e.length||e.paging.count<e.length)return 0;let t=e.paging.count-e.length;return Math.min(t,e.paging.limit)}(p),b=(0,S.useRef)(),v=ii(),y=rR(n,!!l),{setNodeRef:C,listeners:w}=ae({id:`${null==n?void 0:n.id}-contents-external-file-droppable`,data:{parentId:null==n?void 0:n.id,nestingLevel:u},disabled:!y});(0,S.useEffect)(()=>()=>{b.current=f});let A=!!p&&ia(p),k=A&&!v&&!l;return E().createElement(ab,{id:n?iA(n):void 0,items:m,isInCollapsibleCourseLinkId:!!l},E().createElement("div",{ref:C,...w},k&&E().createElement(c,{id:`start-${null!==(t=null==n?void 0:n.id)&&void 0!==t?t:(0,iI.v4)()}`,parentId:null==n?void 0:n.id,positionBefore:av,item:null==p?void 0:p[0],classes:{divider:(0,I.Z)(h.divider,o?h.centeredDivider:h.topDivider)}}),E().createElement("div",{"data-togglable-bottom":n?iA(n):"",className:o?h.togglableBottom:""}),E().createElement("div",{ref:g,className:h.contentList},null==m?void 0:m.map((e,t,s)=>{let o=(0,I.Z)({root:r,"addable-item":A},"content-list-item",h.contentListItem),{neighborBefore:c,neighborAfter:d}={neighborBefore:am(s,t-1),neighborAfter:am(s,t+1)},u=!r&&P.Xgx.isInForcedSequenceLearningModule(e);return E().createElement(ap,{key:iA(e,{stable:!0}),item:e,parentId:null==n?void 0:n.id,loadMoreContent:i,showAddButton:k,neighborBeforeId:u?null==c?void 0:c.contentId:void 0,neighborAfterId:u?null==d?void 0:d.contentId:void 0,className:o,showStudentAuthorship:a,collapsibleCourseLinkId:l})}),E().createElement(ee.ox,{afterLoad:()=>{var e,t;let n=(t=null!==(e=b.current)&&void 0!==e?e:f,null==p?void 0:p[p.length-t]);n&&function(e,t){let n=ix(e,t.current);iR(n)}(n,g)},loader:()=>n&&i?i(n,!0):Promise.resolve(),incomingLoadCount:f,axLoadMoreButtonLabelKey:null==d?void 0:d.axLoadMoreButtonLabelKey,showLoadButtonOnFocus:!0}))))}),aC=e=>{let{parentId:t,disabled:n=!1,children:i}=e,s=em(),{setNodeRef:r}=(0,ai.Zj)({id:`${t}-contents`,disabled:n,data:{type:v.Container,parentId:t,nestingLevel:s,disabled:n}});return E().createElement("div",{ref:r},i)},aS=e=>{let{item:t,isOpen:n,loadMoreContent:i,containerId:s,emptyMessage:r,centerDivider:o=!0,classes:a,collapsibleCourseLinkId:l}=e,c=iE(),d=(0,S.useContext)(ah),u=em(),{shouldShowEmptyListMessage:p=()=>!0}=(0,S.useContext)(s$),m=r4(t),h=l;if(0===u){let e=P.GQk.CourseLink.isEqualTo(null==t?void 0:t.contentHandler);h=e?t.id:void 0}return E().createElement(id,{id:s,open:n,className:m===f.Empty?c.emptyContainer:void 0,classes:{wrapperInner:null==a?void 0:a.wrapperInner},onEntered:()=>{d(iA(t))}},E().createElement(aC,{parentId:t.id,disabled:!!h},m===f.Empty&&p(t)?E().createElement("div",{className:(0,I.Z)(c.emptyListMessage,null==a?void 0:a.emptyMessage)},E().createElement("span",null,r)):E().createElement(ay,{parentFolder:t,contents:t.children,loadMoreContent:i,showTopAddButton:m===f.Empty,centeredDivider:o,collapsibleCourseLinkId:h})))},aE=(0,G.makeStyles)(e=>({placeholderContainer:{backgroundColor:e.palette.background.b5,margin:"10px 0",padding:"20px"},placeholderText:{fontWeight:e.typography.fontWeightBold,textAlign:"center"}})),aI=()=>{let e=(0,T.q)(),t=aE(),n=(0,S.useRef)(null);return(0,S.useEffect)(()=>{var e;null===(e=n.current)||void 0===e||e.focus()},[]),E().createElement("div",{className:t.placeholderContainer,ref:n,tabIndex:-1},E().createElement("div",{className:t.placeholderText},e("components.directives.content-item-base.copy-placeholder")),E().createElement("div",{className:"sr-only"},e("components.directives.content-item-base.please-wait")))};var aw=n(928316);let aA=E().memo(o9),ak=e=>{let{item:t,nestingLevel:n=0,showStudentAuthorship:i}=e,s=(0,S.useMemo)(()=>({isDragOverlay:!0,isSorting:!0}),[]);return E().createElement(iK.Provider,{value:s},E().createElement(ep,{value:n},(0,aw.createPortal)(E().createElement(ai.y9,{zIndex:1011},t&&E().createElement(aA,{item:t,showStudentAuthorship:i})),document.body)))},ax=e=>{let t=e.getLinkContentSource();return!!t&&P.GQk.Discussion.isEqualTo(t.contentHandler)},aT=e=>{let t=e.getLinkContentSource();return!!t&&P.AaE.isFolderContentItem(t)},aP=e=>{let t=e.getLinkContentSource();return!!t&&P.Xgx.isLearningModule(t)},aD=(e,t)=>{var n,i;return!!(e&&t&&as(t))&&(e===(null==t?void 0:t.id)||e===(null===(i=null===(n=null==t?void 0:t.children)||void 0===n?void 0:n[0])||void 0===i?void 0:i.id))},aG=(e,t)=>!!t&&P.GQk.CourseLink.isEqualTo(e.contentHandler)&&(P.Xgx.isForcedSequenceModule(t)||P.Xgx.isInForcedSequenceLearningModule(t)),aR=(e,t)=>!!t&&P.AaE.isFolderContentItem(e)&&(P.Xgx.isForcedSequenceModule(t)||P.Xgx.isInForcedSequenceLearningModule(t)),aB=(e,t)=>!!t&&aT(e)&&P.AaE.isFolderContentItem(t)&&!P.AaE.isRootFolder(t),aL=(e,t)=>!!t&&aT(e)&&P.Xgx.isLearningModule(t),aN=(e,t)=>!!t&&aP(e)&&P.Xgx.isLearningModule(t),aO=(e,t)=>!!t&&aP(e)&&P.AaE.isFolderContentItem(t)&&!P.AaE.isRootFolder(t),aM=async(e,t,n)=>{if(P.GQk.CourseLink.isEqualTo(e.contentHandler)){if(aG(e,t)&&!ax(e))return"courseCore.course.dragAndDrop.courseLinkMoveError";if(aB(e,t))return"courseCore.course.dragAndDrop.folderCourseLinkMoveError.folderDestination";if(aL(e,t))return"courseCore.course.dragAndDrop.folderCourseLinkMoveError.learningModuleDestination";if(aO(e,t))return"courseCore.course.dragAndDrop.learningModuleCourseLinkMoveError.folderDestination";if(aN(e,t))return"courseCore.course.dragAndDrop.learningModuleCourseLinkMoveError.learningModuleDestination"}if(aR(e,t)){let e=await n;if(!e)return"courseCore.course.dragAndDrop.courseLinkMoveError"}return null};function a$(e,t,n){n(n=>{var i,s;let r=null===(i=e.data.current)||void 0===i?void 0:i.item,o=null==t?void 0:t.data.current,a=null==o?void 0:o.item;if(!r||(null==n?void 0:n.item)&&n.item===a||aD(null==o?void 0:o.parentId,r))return n;if((null==o?void 0:o.type)===v.Container)return{item:r,folderId:null==o?void 0:o.parentId,targetId:void 0,insertPosition:0};if((null==o?void 0:o.type)===v.EndOfList&&!o.disabled)return{item:r,folderId:null==o?void 0:o.parentId,targetId:o.lastContentIdInList,insertPosition:null===(s=null==o?void 0:o.sortable)||void 0===s?void 0:s.items.length};if(!a)return n;if(null==o?void 0:o.isParentCourseLink)return{item:r,folderId:null==n?void 0:n.folderId,targetId:o.parentId,insertPosition:null==n?void 0:n.insertPosition};if(P.GQk.CourseLink.isEqualTo(null==a?void 0:a.contentHandler))return{item:r,folderId:null==n?void 0:n.folderId,targetId:a.id,insertPosition:null==n?void 0:n.insertPosition};if(!n&&r.parentId!==a.parentId||n&&n.folderId!==a.parentId){let t=null==o?void 0:o.sortable.index,n=e.data.current,i=(null==o?void 0:o.parentId)&&(null==n?void 0:n.parentId)&&(null==o?void 0:o.parentId)!==(null==n?void 0:n.parentId)&&o.sortable.index+1===o.sortable.items.length&&!as(a);return i&&(t+=1),{item:r,folderId:a.parentId,targetId:a.id,insertPosition:t}}return n})}let aH=(e,t,n)=>{var i;let s=null===(i=null==t?void 0:t.data.current)||void 0===i?void 0:i.sortable;switch(e){case ai.g4.Down:return s.index!==ad(s.items.length)-1;case ai.g4.Up:return n!==v.EndOfList&&n!==v.Container;default:return!0}};function aF(e,t){return{top:t.y,height:e.height,bottom:t.y+e.height,left:t.x,width:e.width,right:t.x+e.width}}let aU=e=>{var t,n,i,s,r;let{active:o}=e,a=(0,ai.ey)(e),l=null===(s=null===(i=null===(n=null===(t=a[0])||void 0===t?void 0:t.data)||void 0===n?void 0:n.droppableContainer)||void 0===i?void 0:i.data)||void 0===s?void 0:s.current;return(null==l?void 0:l.type)===v.EndOfList&&(null==l?void 0:l.parentId)===(null===(r=o.data.current)||void 0===r?void 0:r.parentId)?a.slice(1):a};function aV(e){let{collisionRect:t,over:n,draggingFrom:i,distance:s=20}=e;return n.bottom-n.height/2-t.height/2+("above"===i?-1:1)*s}function a_(e,t){if(!(0,iB.zw)(e)||!(0,iB.zw)(t))return!1;let n=e.data.current.sortable.index<t.data.current.sortable.index,i=al({active:e.rect.current.translated,over:t.rect});return n&&"top"===i||!n&&"bottom"===i}let aq=[ai.g4.Down,ai.g4.Right,ai.g4.Up,ai.g4.Left],az=(0,ig.cn)({key:"contentOutline/dnd/refresher",default:()=>{}}),aW=()=>{let{measureDroppableContainers:e}=(0,ai.Cj)(),t=(0,ig.Zl)(az),n=(0,S.useRef)();return(0,S.useEffect)(()=>()=>{clearTimeout(n.current)},[]),(0,S.useEffect)(()=>{t(()=>()=>{n.current=setTimeout(()=>{e([]),n.current=void 0},30)})},[e,t]),null},aj={start:[ai.g4.Space,ai.g4.Enter],cancel:[ai.g4.Esc,"Tab"],end:[ai.g4.Space,ai.g4.Enter]};async function aZ(e,t,n,i,s){var r,o,a,l,c;let d=null===(r=null==e?void 0:e.data.current)||void 0===r?void 0:r.item,u=null==t?void 0:t.data.current,p=null==u?void 0:u.item;if((null==u?void 0:u.isParentCourseLink)||P.GQk.CourseLink.isEqualTo(null==p?void 0:p.contentHandler)&&s(null==p?void 0:p.id)||!(0,iB.zw)(e)||!(null==d?void 0:d.id)||((null===(o=null==t?void 0:t.data.current)||void 0===o?void 0:o.type)===v.Container&&(null==n?void 0:n.folderId)&&await i({dragContentId:d.id,parentFolderId:n.folderId,positionBeforeId:n.targetId}),!(0,iB.zw)(t)||!(null==p?void 0:p.parentId)))return;if((null==n?void 0:n.folderId)&&t.id===e.id&&n.insertPosition===e.data.current.sortable.items.length-1){await i({dragContentId:d.id,parentFolderId:n.folderId,positionAfterId:n.targetId});return}(null==n?void 0:n.folderId)&&p.id===n.item.id&&await i({dragContentId:d.id,parentFolderId:n.folderId,positionBeforeId:null!==(a=n.targetId)&&void 0!==a?a:"start"});let m=null===(l=e.data)||void 0===l?void 0:l.current.sortable.index,h=null===(c=t.data)||void 0===c?void 0:c.current.sortable.index,g=m>h;if(m!==h){if(as(p)){let n=null==e?void 0:e.rect.current.translated,i=null==t?void 0:t.rect,r="top"===al({active:n,over:i});g=s(p.id)||m<h&&r||m>h&&r}g?await i({dragContentId:d.id,parentFolderId:p.parentId,positionBeforeId:p.id}):await i({dragContentId:d.id,parentFolderId:p.parentId,positionAfterId:p.id})}}let aK=()=>{let e=(0,T.q)(),t=(0,S.useRef)(null),n=(0,S.useMemo)(()=>({onDragStart({active:n}){if(!(0,iB.zw)(n))return;let i=n.data.current.item,{index:s,containerId:r,items:o}=n.data.current.sortable;return t.current={containerId:r,index:s},e("courseCore.course.dragAndDrop.announcements.dragStart",{contentItemTitle:null==i?void 0:i.title,currentPosition:s+1,contentItemsCount:ad(o.length)})},onDragCancel({active:n}){if(t.current=null,!(0,iB.zw)(n))return;let i=n.data.current.item;return e("courseCore.course.dragAndDrop.announcements.dragCancel",{contentItemTitle:null==i?void 0:i.title})},onDragEnd({active:n,over:i}){if(!(0,iB.zw)(n)||!(0,iB.zw)(i))return;let s=n.data.current.item,{index:r,containerId:o,items:a}=i.data.current.sortable,l=null==t?void 0:t.current;if(t.current=null,o===(null==l?void 0:l.containerId)&&r===(null==l?void 0:l.index)){if(n.data.current.sortable.containerId===l.containerId)return e("courseCore.course.dragAndDrop.announcements.dragEndPositionRetained",{contentItemTitle:null==s?void 0:s.title});let{index:t,items:i}=n.data.current.sortable;return e("courseCore.course.dragAndDrop.announcements.dragEnd",{contentItemTitle:null==s?void 0:s.title,finalPosition:t+1,contentItemsCount:ad(i.length)})}return e("courseCore.course.dragAndDrop.announcements.dragEnd",{contentItemTitle:null==s?void 0:s.title,finalPosition:r+1,contentItemsCount:ad(a.length)})}}),[e]);return n},aX={onDragStart:()=>void 0,onDragMove:()=>void 0,onDragOver:()=>void 0,onDragEnd:()=>void 0,onDragCancel:()=>void 0},aY=()=>{let e=aK();return(0,ai.IJ)((0,S.useMemo)(()=>({onDragStart({active:t}){let n=e.onDragStart({active:t});n&&(0,te.ul)(n)},onDragEnd({active:t,over:n}){let i=e.onDragEnd({active:t,over:n});i&&(0,te.ul)(i)},onDragCancel({active:t,over:n}){let i=e.onDragCancel({active:t,over:n});i&&(0,te.ul)(i)}}),[e])),null};function aQ(e){let t=document.querySelector('[data-base-state-name="base.courses.peek"]'),n=null==t?void 0:t.style;n&&(n.position="enable"===e?"fixed":"",n.top="enable"===e?"0":"")}function aJ(e){if(e.dataset.contentId){let t=e.querySelector(`[data-togglable-bottom="${e.dataset.contentId}"]`);if(t){let n=(0,ai.VK)(e,{ignoreTransform:!0}),i=(0,ai.VK)(t,{ignoreTransform:!0});return{...n,height:i.bottom-n.top,bottom:i.bottom}}}return(0,ai.VK)(e,{ignoreTransform:!0})}let a0=(e={highlight:!0})=>{let t=(0,S.useRef)(null),n=(0,ig.Zl)(ib),i=ar();function s(){t.current&&(clearTimeout(t.current.timeoutId),n(void 0),t.current=null)}return{cancelOpenTogglableTimer:s,startOpenTogglableTimer(r){var o;(null==r?void 0:r.id)&&r.id!==(null===(o=null==t?void 0:t.current)||void 0===o?void 0:o.togglableId)&&(s(),e.highlight&&n(r.id),t.current={togglableId:r.id,timeoutId:setTimeout(()=>{i(r.id,!0),s()},750)})}}},a1=()=>{let e=(0,T.q)(),t=(0,D.tx)(),{enqueueSnackbar:n,dequeueSnackbar:i}=(0,ee.Ds)(ee.VW.CourseContentOutlineDragAndDrop,!0),s=(0,D.WT)(),r=e=>{i(),n({snackbarMessage:e,isErrorOrWarning:!0,icon:E().createElement(M.AlertError,null)})};return async(n,i,o,a,l)=>{var c,d,u;if(!(0,iB.zw)(n))return!0;let p=n.data.current.item,m=null===(c=null==i?void 0:i.data.current)||void 0===c?void 0:c.parentId;if(!p||aD(m,p))return!0;let h=function(e,t,n){var i,s,r,o;let a=null!==(s=null===(i=e.data.current)||void 0===i?void 0:i.nestingLevel)&&void 0!==s?s:0;return(0,iB.zw)(t)&&(0,iB.zw)(e)&&e.data.current.sortable.containerId!==t.data.current.sortable.containerId&&n instanceof KeyboardEvent?a:null!==(o=null===(r=null==t?void 0:t.data.current)||void 0===r?void 0:r.nestingLevel)&&void 0!==o?o:a}(n,i,l),g=function(e,t){if(void 0===e)return!0;let n=e&&P.AaE.isFolderContentItem(e),i=te.cY.getMaxCourseFolderDepth();return n?function e(t){var n;if(!P.AaE.isFolderContentItem(t))return 0;let i=0;for(let s of null!==(n=t.children)&&void 0!==n?n:[]){if(!P.AaE.isFolderContentItem(s))continue;let t=1+e(s);t>i&&(i=t)}return i}(e)+t<i:t<=i}(p,h);if(!g)return r(e("course.outline.folderMaxDepthError.text")),!0;if(null==o?void 0:o.folderId){let e=P.Ys.content.getContentById(s.getState(),null!==(u=null===(d=null==i?void 0:i.data.current)||void 0===d?void 0:d.parentId)&&void 0!==u?u:o.folderId),n=await aM(p,e,a);if(null!==n)return r(t(n)),!0}return!1}};var a2=n(158550);let a3=(e,t,n,i)=>{var s,r,o,a,l;if(!(0,iB.zw)(e)||!(0,iB.zw)(t))return null!==(o=null===(r=null===(s=null==t?void 0:t.data.current)||void 0===s?void 0:s.sortable)||void 0===r?void 0:r.index)&&void 0!==o?o:null===(l=null===(a=e.data.current)||void 0===a?void 0:a.sortable)||void 0===l?void 0:l.index;let c=e.data.current,d=t.data.current,u=e.data.current.sortable.index,p=t.data.current.sortable.index;if(-1===u&&-1===p)return;if(-1===p)return u;let m=null==t?void 0:t.rect,h=null==e?void 0:e.rect.current.translated;if(!h)return p;let g=al({active:h,over:m});if(c.sortable.containerId!==d.sortable.containerId||-1===u)return"keyboard"===i&&u>=0?u:"bottom"!==g||as(d.item)&&n(d.item.id)?p:p+1;let f=as(d.item)&&function(e,t){if(!e||!t)return!1;let n=e.top+e.height/2;return t.top<=n&&n<=t.bottom}(h,m)&&c.item.id!==d.item.id;return f?n(d.item.id)&&u<p?p-1:!n(d.item.id)&&(u<p&&"top"===g||u>p&&"bottom"===g)?p+("top"===g?-1:1):p:as(d.item)&&n(d.item.id)?u:p},a9=(e,t,n,i)=>{var s,r,o,a,l,c;return(0,iB.zw)(e)&&(null===(r=null===(s=null==e?void 0:e.data.current)||void 0===s?void 0:s.sortable)||void 0===r?void 0:r.containerId)!==(null===(a=null===(o=null==t?void 0:t.data.current)||void 0===o?void 0:o.sortable)||void 0===a?void 0:a.containerId)&&"keyboard"===i?null===(l=null==e?void 0:e.data.current)||void 0===l?void 0:l.sortable.containerId:(0,iB.zw)(t)?null===(c=null==t?void 0:t.data.current)||void 0===c?void 0:c.sortable.containerId:n.folderId},a4=(0,en.throttle)((e,t,n)=>{a$(e,t,n)},100),a7=e=>{let{children:t,moveContent:n,showStudentAuthorship:i=!1}=e,[s,r]=(0,S.useState)(),[o,a]=(0,S.useState)(0),l=(0,ig._8)(({set:e})=>t=>{as(t)&&e(iC(t.id),!1)},[]),{startOpenTogglableTimer:c,cancelOpenTogglableTimer:d}=a0(),u=function(){let e=ao();return(t,n,i)=>{var s,r;let o=null===(s=n.data.current)||void 0===s?void 0:s.item,a=null===(r=null==i?void 0:i.data.current)||void 0===r?void 0:r.item;if(t instanceof KeyboardEvent||!(0,iB.zw)(n)||!(0,iB.zw)(i)||!o||!(null==a?void 0:a.id))return!1;let l=n.data.current.sortable.index<i.data.current.sortable.index,c=al({active:n.rect.current.translated,over:i.rect});return as(a)&&a.id!==(null==o?void 0:o.id)&&(l&&"top"===c||!l&&"bottom"===c)&&e(a.id)}}(),p=function(e){let t=function(e){var t,n;let i=(0,S.useRef)(),s=aa();(0,S.useEffect)(()=>()=>{clearTimeout(i.current)},[]);let r=(t=ar(),n=(...t)=>{i.current=setTimeout(()=>{e(...t),i.current=void 0},30)},(i,r)=>{var o,a,l,c,d,u,p,m,h,g,f,b,y,C,S,E,I,w,A,k,x,T,D,G,R,B,L,N,O,M,$,H,F;if(H=i.code,!aq.includes(H))return;i.preventDefault();let{active:U,collisionRect:V,droppableRects:_,droppableContainers:q,over:z}=r.context,W=null===(a=null===(o=null==U?void 0:U.data.current)||void 0===o?void 0:o.item)||void 0===a?void 0:a.id;if(!U||!W||!V||!z)return;if([ai.g4.Left,ai.g4.Right].includes(i.code))return function(e){var t,n,i,s;let{active:r,activeId:o,code:a,collisionRect:l,over:c,isOpen:d,setTogglableOpenState:u,setDndActionState:p}=e,m=null===(t=c.data.current)||void 0===t?void 0:t.item,h=null==m?void 0:m.id;if(as(m)&&h&&o!==h){if(a===ai.g4.Right&&!d(h)&&a_(r,c)){let e="bottom"===al({active:l,over:c.rect});if(u(h,!0),e){let e=null!==(n=r.rect.current.initial)&&void 0!==n?n:l,t=aF(c.rect,{x:c.rect.left,y:c.rect.top+e.height});return p({folderId:m.parentId,item:null===(i=r.data.current)||void 0===i?void 0:i.item,targetId:m.id,insertPosition:null===(s=c.data.current)||void 0===s?void 0:s.sortable.index}),{x:c.rect.left+30,y:aV({collisionRect:l,over:t,draggingFrom:"above"})}}}else if(a===ai.g4.Left&&d(h))return u(h,!1),{x:c.rect.left+30,y:aV({collisionRect:l,over:c.rect,draggingFrom:"above"})}}}({active:U,activeId:W,code:i.code,collisionRect:V,over:z,isOpen:s,setTogglableOpenState:t,setDndActionState:n});let j=null===(l=z.data.current)||void 0===l?void 0:l.item,Z=as(j)&&!s(j.id)&&W!==j.id;if(Z){let e=al({active:V,over:z.rect});if(i.code===ai.g4.Down&&"top"===e)return a_(U,z)?{x:z.rect.left,y:Math.max(z.rect.bottom-V.height,aV({collisionRect:V,over:z.rect,draggingFrom:"below",distance:1})),announcement:{type:"move"}}:{x:z.rect.left+30,y:aV({collisionRect:V,over:z.rect,draggingFrom:"below"}),announcement:{type:"moveOnTogglable"}};if(i.code===ai.g4.Up&&"bottom"===e)return a_(U,z)?{x:z.rect.left,y:Math.min(z.rect.top,aV({collisionRect:V,over:z.rect,draggingFrom:"above",distance:1})),announcement:{type:"move"}}:{x:z.rect.left+30,y:aV({collisionRect:V,over:z.rect,draggingFrom:"above"}),announcement:{type:"moveOnTogglable"}}}let K=function(e){var t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f,b;let{active:y,over:C,code:S,collisionRect:E,droppableContainers:I,droppableRects:w}=e,A=[];I.getEnabled().forEach(e=>{if(!e||e.disabled)return;let t=w.get(e.id);t&&(S===ai.g4.Down&&E.top<t.top||S===ai.g4.Up&&E.top>t.top)&&A.push(e)});let k=aU({active:y,collisionRect:E,droppableRects:w,droppableContainers:A,pointerCoordinates:null}),x=null===(t=k.shift())||void 0===t?void 0:t.id;x===(null==C?void 0:C.id)&&(x=null!==(i=null===(n=k.shift())||void 0===n?void 0:n.id)&&void 0!==i?i:x);{let e=I.get(x);(null===(s=null==e?void 0:e.data.current)||void 0===s?void 0:s.type)===v.Container&&e.data.current.parentId===(null===(r=y.data.current)||void 0===r?void 0:r.parentId)&&(x=null!==(a=null===(o=k.shift())||void 0===o?void 0:o.id)&&void 0!==a?a:x)}return(null===(l=C.data.current)||void 0===l?void 0:l.type)===v.Container&&C.data.current.parentId===(null===(d=null===(c=I.get(x))||void 0===c?void 0:c.data.current)||void 0===d?void 0:d.parentId)&&(x=null!==(p=null===(u=k.shift())||void 0===u?void 0:u.id)&&void 0!==p?p:x),x===ag(null===(m=C.data.current)||void 0===m?void 0:m.parentId)&&(null===(h=y.data.current)||void 0===h?void 0:h.parentId)===(null===(g=C.data.current)||void 0===g?void 0:g.parentId)&&(x=null!==(b=null===(f=k.shift())||void 0===f?void 0:f.id)&&void 0!==b?b:x),{rect:x?w.get(x):void 0,container:x?I.get(x):void 0}}({active:U,over:z,code:i.code,collisionRect:V,droppableContainers:q,droppableRects:_}),X=null===(d=null===(c=K.container)||void 0===c?void 0:c.data.current)||void 0===d?void 0:d.item;if(!K.rect||!K.container||z.id===K.container.id)return;if((null===(u=null==U?void 0:U.data.current)||void 0===u?void 0:u.parentId)!==(null===(m=null===(p=K.container)||void 0===p?void 0:p.data.current)||void 0===m?void 0:m.parentId)){if(aH(i.code,U,null===(h=K.container.data.current)||void 0===h?void 0:h.type)?a$(U,{...K.container,rect:K.rect},n):a$(U,{...K.container,rect:K.rect},e),i.code===ai.g4.Down){let e=q.get(null===(f=null===(g=U.data)||void 0===g?void 0:g.current)||void 0===f?void 0:f.parentId);if(e){let t=null===(b=e.data.current)||void 0===b?void 0:b.item,n=null!==(S=null===(C=null===(y=U.data.current)||void 0===y?void 0:y.sortable)||void 0===C?void 0:C.index)&&void 0!==S?S:0,i=null===(w=null===(I=null===(E=U.data.current)||void 0===E?void 0:E.sortable)||void 0===I?void 0:I.items)||void 0===w?void 0:w.length;if(t&&P.AaE.isFolderContentItem(t)&&0===n&&2===i)return{x:K.rect.left,y:K.rect.top-V.height+30,announcement:{type:"moveToDifferentContainer",nextOver:K.container}}}return{x:K.rect.left,y:K.rect.top-V.height,announcement:{type:"moveToDifferentContainer",nextOver:K.container}}}let t=null!==(A=U.rect.current.initial)&&void 0!==A?A:V;if((null==X?void 0:X.id)===(null===(k=U.data.current)||void 0===k?void 0:k.parentId))return{x:K.rect.left+30,y:aV({collisionRect:V,over:aF(K.rect,{x:K.rect.left,y:K.rect.top+t.height}),draggingFrom:"above"}),announcement:{type:"moveOnTogglable",nextOver:K.container}};if((null===(T=null===(x=K.container)||void 0===x?void 0:x.data.current)||void 0===T?void 0:T.type)===v.Container)return{x:K.rect.left+30,y:K.rect.top+t.height,announcement:{type:"moveToDifferentContainer",nextOver:K.container}};let s=q.get(null===(R=null===(G=null===(D=K.container)||void 0===D?void 0:D.data)||void 0===G?void 0:G.current)||void 0===R?void 0:R.parentId);if(s){let e=null===(L=null===(B=s.data)||void 0===B?void 0:B.current)||void 0===L?void 0:L.item,t=null!==(M=null===(O=null===(N=K.container.data.current)||void 0===N?void 0:N.sortable)||void 0===O?void 0:O.index)&&void 0!==M?M:0;if(e&&P.AaE.isFolderContentItem(e)&&0===t)return{x:K.rect.left,y:K.rect.bottom-25,announcement:{type:"moveToDifferentContainer",nextOver:K.container}}}return{x:K.rect.left,y:K.rect.bottom,announcement:{type:"moveToDifferentContainer",nextOver:K.container}}}if((0,iB.zw)(U)&&(0,iB.zw)(K.container)&&as(X)){let e=U.data.current.sortable.index,t=K.container.data.current.sortable.index;if(i.code===ai.g4.Down&&e<t)return{x:K.rect.left+30,y:aV({collisionRect:V,over:K.rect,draggingFrom:"above"}),announcement:{type:"moveOnTogglable",nextOver:K.container}};if(i.code===ai.g4.Up&&e>t)return{x:K.rect.left+30,y:aV({collisionRect:V,over:K.rect,draggingFrom:"below"}),announcement:{type:"moveOnTogglable",nextOver:K.container}}}let Y=null===($=U.rect.current.initial)||void 0===$?void 0:$.height;if(Y&&Y>180&&i.code===ai.g4.Down&&U.id!==z.id&&X&&!(as(j)&&a_(U,z)))return{x:K.rect.left,y:K.rect.bottom-K.rect.height/2-V.height/2,announcement:{type:"move",nextOver:K.container}};let Q=(F=K.container,!!((0,iB.zw)(U)&&(0,iB.zw)(F))&&U.data.current.sortable.containerId===F.data.current.sortable.containerId&&U.data.current.sortable.index<F.data.current.sortable.index),J=Q?V.height-K.rect.height:1;return{x:K.rect.left,y:K.rect.top-J,announcement:{type:"move",nextOver:K.container}}}),o=function(e,t){let n=(0,T.q)();return(i,s)=>{var r,o,a,l,c,d,u,p,m,h;let g=e(i,s),{active:f,over:b}=s.context;if((0,iB.zw)(f)&&(0,iB.zw)(b)&&g&&"announcement"in g){let e=g.announcement,i=null===(r=f.data.current)||void 0===r?void 0:r.item,s=(null==e?void 0:e.nextOver)?null===(o=e.nextOver.data.current)||void 0===o?void 0:o.item:null===(a=b.data.current)||void 0===a?void 0:a.item,y=(null==e?void 0:e.nextOver)&&(0,iB.zw)(null==e?void 0:e.nextOver)?e.nextOver.data.current:b.data.current;switch(null==e?void 0:e.type){case"move":(0,te.ul)(n("courseCore.course.dragAndDrop.announcements.dragMove",{contentItemTitle:i.title,currentPosition:(null!==(l=null==y?void 0:y.sortable.index)&&void 0!==l?l:0)+1,contentItemsCount:ad(null==y?void 0:y.sortable.items.length)}));break;case"moveToDifferentContainer":{let t=(null===(d=null===(c=null==e?void 0:e.nextOver)||void 0===c?void 0:c.data.current)||void 0===d?void 0:d.type)===v.Container,s=(null!==(m=null===(p=null===(u=b.data.current)||void 0===u?void 0:u.item.children)||void 0===p?void 0:p.length)&&void 0!==m?m:0)+1;(0,te.ul)(n("courseCore.course.dragAndDrop.announcements.dragMove",{contentItemTitle:i.title,currentPosition:t?1:(null!==(h=null==y?void 0:y.sortable.index)&&void 0!==h?h:0)+1,contentItemsCount:t?s:ad(null==y?void 0:y.sortable.items.length)+1}));break}case"moveOnTogglable":(0,te.ul)(n(`courseCore.course.dragAndDrop.announcements.dragMoveOn${t(null==s?void 0:s.id)?"Open":"Closed"}Togglable`,{contentItemTitle:null==i?void 0:i.title,togglableTitle:null==s?void 0:s.title,type:n(`courseCore.course.dragAndDrop.announcements.${s&&P.AaE.isFolderContentItem(s)?"folder":"learningModule"}`)}))}}if(g&&"x"in g&&"y"in g)return{x:g.x,y:g.y}}}(r,s);return function(e){let t=(0,ig.sJ)(az);return(n,i)=>{let s=e(n,i);return s&&t(),s}}(o)}(e);return(0,ai.Dy)((0,ai.VT)(ai.MA,{activationConstraint:{distance:15}}),(0,ai.VT)(ai.LO,{activationConstraint:{delay:400,tolerance:5}}),(0,ai.VT)(ai.Lg,{coordinateGetter:t,keyboardCodes:aj}))}(r),m=(0,T.q)(),h=aa(),g=a1(),f=(0,S.useRef)();function b(){f.current=void 0,a4.cancel(),d(),aQ("disable"),(0,aw.unstable_batchedUpdates)(()=>{r(void 0)}),a4.cancel()}let y=async({active:e,over:t,activatorEvent:i})=>{var o;if(null==s?void 0:s.item){let n=i instanceof KeyboardEvent?"keyboard":"pointer",a=a9(e,t,s,n);r({...s,folderId:"string"==typeof a?a:void 0,insertPosition:null!==(o=a3(e,t,h,n))&&void 0!==o?o:s.insertPosition})}await aZ(e,t,s,n,h),b()},C=(0,a2.useAnalyticsAugmentEventOnElement)(a2.AnalyticsEventTypes.CHANGE_EVENT,e=>{var t,n;let i=null===(t=e.active.data.current)||void 0===t?void 0:t.item,s=null===(n=e.active.data.current)||void 0===n?void 0:n.nestingLevel;(0,ek.ko)(ek.fz.AngularMenuCloserService).closeAnyOpenAngularMenus(),aQ("enable"),(null==i?void 0:i.id)&&i.courseId&&P.AaE.isFolderContentItem(i)&&(f.current=(0,P.bbE)(i.courseId,i.id)),i&&(0,iB.zw)(e.active)&&(l(i),r({item:i,folderId:null==i?void 0:i.parentId,targetId:null==i?void 0:i.id,insertPosition:e.active.data.current.sortable.index})),"number"==typeof s&&a(s)},"content.outline.content.item.drag.start"),I=(0,a2.useAnalyticsAugmentEventOnElement)(a2.AnalyticsEventTypes.CHANGE_EVENT,y,"content.outline.content.item.drag.end");return E().createElement(ih.Provider,{value:s},E().createElement(ai.LB,{accessibility:{announcements:aX,screenReaderInstructions:{draggable:m("courseCore.course.dragAndDrop.announcements.draggableScreenReaderInstructions")}},measuring:{droppable:{measure:aJ}},collisionDetection:aU,sensors:p,onDragStart:C,onDragMove:({activatorEvent:e,active:t,over:n})=>{var i;u(e,t,n)?c(null===(i=null==n?void 0:n.data.current)||void 0===i?void 0:i.item):d()},onDragOver:({active:e,over:t,activatorEvent:n})=>{var i;let s=null===(i=null==t?void 0:t.data.current)||void 0===i?void 0:i.nestingLevel;"number"==typeof s&&a(s),n instanceof KeyboardEvent||a4(e,t,r)},onDragEnd:I,onDragCancel:b,cancelDrop:({active:e,over:t,activatorEvent:n})=>g(e,t,s,f.current,n)},E().createElement(aY,null),E().createElement(aW,null),t,E().createElement(ak,{item:null==s?void 0:s.item,nestingLevel:o,showStudentAuthorship:i})))},a5="course.file.content.upload",a6="course.file.content.upload.uploadSucceeded",a8="course.file.content.upload.uploadSucceeded.cancelRemaining",le="course.cloud.file.content.upload";function lt(e,t,n){return{type:a5,payload:n,meta:{groupUploadId:e,isInsideFolder:t}}}async function ln(e){let{createFileContent:t,locationData:n,file:i,isInsideFolder:s}=e,r=(0,iI.v4)(),o=await t(void 0,i,r,s,n);if(o)return{content:o,correlationId:r,file:i}}async function li(e){let{files:t,...n}=e,i=await Promise.all(t.map(e=>ln({...n,file:e})));return i.filter(e=>void 0!==e)}async function ls(e){let{dispatch:t,trackUpload:n,isInsideFolder:i,...s}=e,r=(0,iI.v4)();n({type:"trackGroup",payload:{groupId:r}});let o=await li({...s,isInsideFolder:i});if(o.length>0){let e=o.map(({correlationId:e})=>e);n({type:"uploadStarted",payload:{groupId:r,uploadIds:e}}),t(lt(r,i,o))}else n({type:"untrackGroup",payload:{groupId:r}})}async function lr(e){let{directory:t,createEmptyFolder:n,createFileContent:i,locationData:s,groupId:r}=e,o=await n(t.name,s,r),a={parentId:null==o?void 0:o.id},l=await Promise.all(t.children.map(t=>"file"===t.type?ln({createFileContent:i,file:t.file,isInsideFolder:!0,locationData:a}):lr({...e,directory:t,locationData:a,groupId:""})));return l.reduce((e,t)=>(Array.isArray(t)?e.push(...t):t&&e.push(t),e),[])}async function lo(e){let{dispatch:t,trackUpload:n,...i}=e,s=(0,iI.v4)();t(P.Nwg.fileUpload.updateDirectoryUploadStatus(s,P.XXy.InProgress)),n({type:"trackGroup",payload:{groupId:s}});let r=await lr({...i,groupId:s});if(r.length>0){let e=r.map(({correlationId:e})=>e);n({type:"uploadStarted",payload:{groupId:s,uploadIds:e}}),t(lt(s,!0,r))}else t(P.Nwg.fileUpload.updateDirectoryUploadStatus(s,P.XXy.Complete)),n({type:"untrackGroup",payload:{groupId:s}})}async function la(e){let t=[],n=[];e.data.forEach(i=>{"file"===i.type?n.push(i.file):t.push(lo({...e,directory:i}))}),n.length>0&&t.push(ls({...e,files:n,isInsideFolder:!1})),await Promise.all(t)}async function ll(e,t,n,i){try{let s=await (0,te.rB)({multiple:!0});ls({files:s,dispatch:e,trackUpload:t,createFileContent:n,locationData:i,isInsideFolder:!1})}catch(e){}}let lc=()=>{let e=(0,D.Lx)(),{trackUpload:t,createFileContent:n,createEmptyFolder:i}=sH();return(0,S.useCallback)(({data:s,locationData:r})=>la({createEmptyFolder:i,createFileContent:n,data:s,dispatch:e,locationData:r,trackUpload:t}),[e,t,n,i])};function ld(e,t){let n=t.top+t.height/2;return e.y<=n?"top":"bottom"}let lu=(e,t)=>{var n,i,s;let r={positionBefore:"start"};if(null===(n=e.data)||void 0===n?void 0:n.item){let n=e.data.item,i=ld(t,e.rect);r=function(e,t,n){var i;let s={parentId:e};return"bottom"===n?(s.positionAfter=null!==(i=t.id)&&void 0!==i?i:t.positionAfter,s.positionBefore=s.positionAfter?void 0:t.positionBefore,t&&void 0!==t.position&&(s.position=t.position+1)):(s.positionAfter=t.positionAfter,s.positionBefore=s.positionAfter?void 0:t.id,t&&void 0!==t.position&&(s.position=t.position-1)),s}(null==n?void 0:n.parentId,n,i)}else(null===(i=e.data)||void 0===i?void 0:i.parentId)&&(r={parentId:null===(s=e.data)||void 0===s?void 0:s.parentId,positionBefore:"start"});return r},lp="native-drag-top",lm="native-drag-bottom";function lh(e,t,n){e.classList.remove(t),e.classList.add(n)}function lg(e){e.classList.remove(lp,lm)}function lf(e,t,n){var i,s;let r;let o=null===(i=e.data)||void 0===i?void 0:i.item;if(as(o)&&!n(null==o?void 0:o.id)){let n=aJ(e.element),i=t.y>n.top&&t.y<n.bottom;r=i?"top":"bottom"}else r=ld(t,e.rect);s=e.element,"bottom"===r?lh(s,lp,lm):lh(s,lm,lp)}let lb=(e,t)=>{if(!t)return{filteredChildren:[],isMaxDepthExceeded:!0};let n=[],i=!1;return e.children.forEach(e=>{if("file"===e.type&&t>=1)n.push(e);else if("directory"===e.type){if(t>1){let s=lb(e,t-1);n.push({...e,children:s.filteredChildren}),i=i||s.isMaxDepthExceeded}else i=!0}}),{filteredChildren:n,isMaxDepthExceeded:i}},lv=(e,t)=>{let n=te.cY.getMaxCourseFolderDepth()-t,i=[],s=!1;return e.forEach(e=>{if("directory"===e.type){if(n>0){let t=lb(e,n);i.push({...e,children:t.filteredChildren}),s=s||t.isMaxDepthExceeded}else s=!0}else"file"===e.type&&i.push(e)}),{filteredFiles:i,isMaxDepthExceeded:s}},ly=e=>{let{children:t}=e,{enqueueSnackbar:n,dequeueSnackbar:i}=(0,ee.Ds)(ee.VW.CourseContentOutlineDragAndDrop,!0),s=lc(),{cancelOpenTogglableTimer:r,startOpenTogglableTimer:o}=a0({highlight:!1}),a=ao(),l=(0,T.q)(),{displayModal:c,modal:d}=(0,ee.dd)(ec.BH,{fileCount:0}),u={snackbarMessage:l("course.outline.externalFolderMaxDepthError.text"),isErrorOrWarning:!0,icon:E().createElement(M.AlertError,null)};return E().createElement(o8,{onDragOver:(e,t,n)=>{var i;let s=null===(i=t.data)||void 0===i?void 0:i.item;lf(t,n,a),function(e,t,n){var i;let s=null===(i=e.data)||void 0===i?void 0:i.item;if(as(s)&&n(null==s?void 0:s.id)){let n=function(e,t){let n=t.height/3,i=t.top+n,s=t.top+2*n;return e.y<=i?"top":e.y<=s?"center":"bottom"}(t,e.rect);return"center"===n}return!1}(t,n,a)?o(s):r()},onDragEnter:(e,t,n)=>{lf(t,n,a)},onDragLeave:(e,t)=>{lg(t.element),r()},onDrop:async(e,t,o)=>{var a,l;lg(t.element),r();let d=await (0,te.L2)(e.nativeEvent),p=null!==(l=null===(a=t.data)||void 0===a?void 0:a.nestingLevel)&&void 0!==l?l:0,{filteredFiles:m,isMaxDepthExceeded:h}=lv(d,p),g=(0,te.fQ)(m),f=(0,te.yZ)(g);if(f>te.Gg){let{confirmed:e}=await c({fileCount:f});if(!e)return}h&&(i(),n(u));let b=lu(t,o);s({data:g,locationData:b})}},t,d)},lC=(0,G.makeStyles)(e=>({root:{position:"relative","& > .native-drag-top::after, & > .native-drag-bottom::after":{...eb(e),top:"-5px",bottom:"-5px",left:"-5px",right:"-5px",height:void 0}}})),lS=e=>{var t;let{contents:n,parentFolder:i,loadMoreContent:s,moveContent:r,showStudentAuthorship:o}=e,a=lC(),{fileUploads:l}=(0,S.useContext)(s$),c=E().createElement(ay,{contents:n,loadMoreContent:s,parentFolder:i,root:!0,showStudentAuthorship:o});return l&&(c=E().createElement(ly,null,c)),E().createElement(ig.Wh,null,E().createElement(ep,{value:0},E().createElement(w.f8,null,E().createElement("div",{className:(null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0)>0?void 0:a.root},E().createElement(a7,{moveContent:r,showStudentAuthorship:o},c)))))};var lE=n(376782),lI=n.n(lE);let lw=e=>{let{isCourseComplete:t}=e,n=(0,T.q)(),i=(0,D.tx)(),s=n("courseCore.course.emptyOutline.student.header"),r=i("courseCore.course.emptyOutline.student.message");return t&&(s=i("courseCore.course.emptyOutline.student.complete.header"),r=void 0),E().createElement(ee.R2,{illustration:lI(),prominentText:s,subText:r})};var lA=n(128895),lk=n.n(lA),lx=n(9218),lT=n(743983);let lP=(0,G.makeStyles)(e=>{let t=`1px solid ${e.palette.secondary.main}`,n=`2px solid ${e.palette.brandAlt.main}`;return{divider:{position:"relative",zIndex:1,"&::before":{content:'""',position:"absolute",top:"45%",left:0,right:0,borderTop:t}},addButton:{width:"100%",margin:"-10px 0",padding:"2px 0",display:"flex",justifyContent:"center",alignContent:"center",lineHeight:0,transition:"opacity .25s linear","&:hover":{"& $addButtonIcon":{color:e.palette.brand.main},"&::after":{borderTop:n}},"&::after":{content:'""',position:"absolute",top:"45%",left:0,right:0,borderTop:t,transition:"all .25s linear",transitionProperty:"border-top-color, border-top-width, left, right"},'&[aria-expanded="true"]':{opacity:1,"& $addButtonIcon":{transform:"rotate(-45deg)",color:e.palette.brand.main},"&::after":{borderTop:n,left:0,right:0}}},focusVisibleAddButton:{"&&":{opacity:1},"& $addButtonIcon":{color:e.palette.brand.main},"&$addButton::after":{borderTop:n,left:0,right:0}},addButtonIcon:{background:e.palette.background.default,borderRadius:"50%",transition:"all .25s linear",transitionProperty:"color, transform",color:e.palette.text.secondary,zIndex:1}}}),lD=E().forwardRef((e,t)=>{let{className:n,...i}=e,s=lP(e);return E().createElement("div",{className:s.divider},E().createElement(lx.b,{...i,ref:t,classes:{focusVisible:s.focusVisibleAddButton},className:(0,I.Z)(n,s.addButton)},E().createElement(lT.m,{className:s.addButtonIcon})))}),lG=e=>{let{id:t,buttonAriaLabel:n,buttonAnalyticsId:i,ButtonComponent:s=lD,menuAnalyticsId:r,items:o,classes:a}=e,[l,c]=(0,S.useState)(void 0),[d,u]=(0,S.useState)(!1),p=!!l,m=`add-content-menu-${t}`,h=`add-content-menu-button-${t}`,g=(0,S.useCallback)(()=>{c(void 0),u(!0)},[]),f=(0,S.useCallback)(e=>{c(e.currentTarget)},[]),b=(0,S.useMemo)(()=>o.map(e=>({...e,onClick:t=>{var n;try{null===(n=e.onClick)||void 0===n||n.call(e,t)}finally{g()}}})),[o,g]);return E().createElement(E().Fragment,null,E().createElement(s,{analyticsId:i,id:h,"aria-controls":l?m:void 0,"aria-haspopup":"menu","aria-label":n,"aria-expanded":p||d,onClick:f,classes:a}),E().createElement(ee.rM,{id:m,anchorEl:l,open:p,onClose:g,MenuListProps:{"aria-labelledby":h},TransitionProps:{onExited:()=>u(!1)},items:b,analyticsId:r}))};async function lR(e,t,n){let i=(0,iI.v4)(),s=await e(void 0,null,i,!1,t);if(s)return{content:s,correlationId:i,file:n}}async function lB(e,t,n){let i=[];for(let s of e)i.push(lR(t,n,s));let s=await Promise.all(i);return s.filter(e=>void 0!==e)}async function lL(e,t,n,i,s){let r=(0,ek.ko)(ek.fz.CloudDriveService),o=await r.cloudDriveStorage.openFilePicker(i,!0);if(!(null==o?void 0:o.length))return;let a=(0,iI.v4)(),l=await lB(o,n,s);if(l.length>0){let n=l.map(({correlationId:e})=>e);t({type:"uploadStarted",payload:{groupId:a,uploadIds:n}}),e({type:le,payload:l,meta:{groupUploadId:a}})}}let lN=e=>{let{id:t,buttonAriaLabel:n,ButtonComponent:i,locationData:s,isEmptyOutline:r=!1,classes:o}=e,a=(0,T.q)(),l=function(e,t){let n=(0,T.q)(),{trackUpload:i,createFileContent:s}=sH(),r=function(e){let{createFileContent:t,trackUpload:n}=sH(),{locale:i}=(0,ea.h)(),s=(0,D.Lx)(),r=(0,T.q)(),o=function(){let[e,t]=(0,S.useState)(!1);return(0,S.useEffect)(()=>{let e=(0,ek.ko)(ek.fz.CloudDriveService);e.isCloudServiceAvailable().then(e=>t(!!e))},[]),e}();return{hidden:!o,key:"cloud-storage",analyticsId:"components.directives.add-content-button.course-outline.importContentFromCloudStorage.button",click:()=>{lL(s,n,t,i,e)},text:r("components.directives.add-content-button.importContentFromCloudStorage.title"),icon:E().createElement(M.UploadCloud,null)}}(e),o=(0,D.Lx)(),a=eD(),l=(0,D.$M)(a),c=[{key:"create",analyticsId:"components.directives.add-content-button.contextualMenu.menuItem",text:n("components.directives.add-content-button.create"),icon:E().createElement(M.Add,null),route:w.SS.CreateContent(e)},{key:"generate-structure",analyticsId:"components.directives.generate-structure-button.contextualMenu.menuItem",text:n("courseCore.generate.beginGenerate"),icon:E().createElement(M.AutoGenerate,null),hidden:!l.canGenerateOutlines||t.isEmptyOutline||!!(e.depth&&e.depth>1),route:w.SS.GenerateStructure({positionBefore:e.positionBefore,positionAfter:e.positionAfter})},{key:"copy",analyticsId:"components.directives.add-content-button.course-outline.import.link",text:n("components.directives.add-content-button.copy"),icon:E().createElement(M.Duplicate,null),route:w.SS.CopyContent(e)},{key:"upload",analyticsId:"components.directives.add-content-button.course-outline.upload.button",text:n("components.directives.add-content-button.upload"),icon:E().createElement(M.UploadFile,null),click:()=>{ll(o,i,s,e)}},r,{key:"content-market",analyticsId:"components.directives.add-content-button.course-outline.openContentMarket.link",text:n("components.directives.add-content-button.contentMarket"),icon:E().createElement(M.ContentMarket,null),route:w.SS.ContentMarket(e)},{key:"content-collection",analyticsId:"components.directives.add-content-button.course-outline.contentCollection.link",text:n("components.directives.add-content-button.contentCollection"),icon:E().createElement(M.ContentCollection,null),route:w.zo.ContentCollection(e)}];return c}(s,{isEmptyOutline:r}),c=l.map(({route:e,click:t,...n})=>(e?n.onClick=()=>{w.Nd.goPeekState(e)}:t&&(n.onClick=()=>t()),n));return E().createElement(lG,{id:t,buttonAriaLabel:null!=n?n:a("components.directives.add-content-button.aria-label.content.add-button-label"),buttonAnalyticsId:"components.directives.add-content-button.course-outline.addContentMenu.button",menuAnalyticsId:"components.directives.add-content-button.contextualMenu",classes:o,items:c,ButtonComponent:i})},lO=(0,G.makeStyles)(()=>(0,G.createStyles)({container:{marginTop:"30px",position:"relative",display:"flex",flexDirection:"column","&.native-drag-top, &.native-drag-bottom":{"& $dndOverlay":{visibility:"revert"}}},dndOverlay:{visibility:"hidden"},buttonRow:{marginTop:"4px",display:"flex",justifyContent:"center",gap:"8px"}})),lM=e=>{let t=(0,T.q)();return E().createElement(k.AnalyticsOutlineButton,{startIcon:E().createElement(M.Add,null),...e},t("courseCore.course.emptyOutline.addButton"))},l$=(0,G.makeStyles)(e=>(0,G.createStyles)({container:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.background.paper,border:`2px dashed ${e.palette.background.b5}`}})),lH=e=>{var t;let n=(0,T.q)(),i=l$();return E().createElement("div",{className:(0,I.Z)(null===(t=e.classes)||void 0===t?void 0:t.root,i.container)},E().createElement(A.UploadFile,null),n("courseCore.course.emptyOutline.dropTargetLabel"))},lF=e=>{let{id:t,disabled:n,data:i,children:s,...r}=e,{setNodeRef:o,listeners:a}=ae({id:t,data:i,disabled:n}),{onDragLeave:l,...c}=a,d=(0,S.useCallback)(e=>{let t=e.currentTarget;if(!(t instanceof Node))return;let n=e.relatedTarget;n instanceof Node&&t.contains(n)||null==l||l(e)},[l]);return E().createElement("div",{ref:o,...r,...c,onDragLeave:d},s)},lU=e=>{let{parentFolder:t}=e,n=eD(),i=(0,D.$M)(n),s=(0,T.q)(),r=(0,D.tx)(),o=lO(),a=(0,tj.Me)(),l=rR(t);return E().createElement(lF,{className:o.container,id:`${null==t?void 0:t.id}-empty-outline-droppable`,disabled:!l,data:{parentId:null==t?void 0:t.id}},E().createElement(ee.R2,{illustration:lk(),prominentText:r("courseCore.course.emptyOutline.header"),subText:r("courseCore.course.emptyOutline.zeroStateDesc")}),E().createElement("div",{className:o.buttonRow},E().createElement(lN,{id:a,locationData:{positionBefore:"start",parentId:null==t?void 0:t.id},isEmptyOutline:!0,ButtonComponent:lM}),i.canGenerateOutlines&&E().createElement(k.AnalyticsOutlineButton,{analyticsId:"course.emptyOutline.generateStructure.button",startIcon:E().createElement(M.AutoGenerate,null),onClick:()=>w.Nd.goPeekState(w.SS.GenerateStructure({positionAfter:"end"}))},s("courseCore.course.emptyOutline.generateButton"))),E().createElement(lH,{classes:{root:o.dndOverlay}}))},lV=e=>{let{canEdit:t,isCourseComplete:n,parentFolder:i}=e,{fileUploads:s}=(0,S.useContext)(s$),r=ii();if(r)return null;if(!t)return E().createElement(lw,{isCourseComplete:n});let o=E().createElement(lU,{parentFolder:i});return s?E().createElement(ly,null,o):o},l_=(0,G.makeStyles)(e=>({divider:{"&::before":{left:"var(--divider-inline-start)",right:"var(--divider-inline-end)"}},addButton:{opacity:1,"&:hover, &:active":{opacity:1},"&::after":{left:"var(--divider-inline-start)",right:"var(--divider-inline-end)"},[e.breakpoints.up("sm")]:{opacity:"var(--add-button-opacity, 0)"}}})),lq=e=>{let t,n;let{classes:i,parentId:s,item:r,id:o}=e;"positionBefore"in e?t=e.positionBefore:"positionAfter"in e&&(n=e.positionAfter);let a=em(),l=l_(),c=function(e,t,n,i,s){let r=function(e,t){var n;let i={parentId:e};return i.positionAfter=null!==(n=null==t?void 0:t.id)&&void 0!==n?n:null==t?void 0:t.positionAfter,i.positionBefore=i.positionAfter?void 0:null==t?void 0:t.positionBefore,t&&void 0!==t.position&&(i.position=t.position+1),i}(e,t);return r.depth=s,function(e,t,n){let i={...e};return t?(i.positionAfter=t,delete i.positionBefore):n&&(delete i.positionAfter,i.positionBefore=n,n===av&&(i.position=0)),i}(r,n,i)}(s,r,n,t,a+1),d=function(e,t){let n=(0,T.q)();if(!t)return;let i=e.positionAfter?"after":"before";return n(`components.directives.add-content-button.aria-label.content.add-button-label-item-name-${i}`,{itemName:t.title})}(c,r);return E().createElement(lN,{id:o,locationData:c,classes:{divider:(0,I.Z)(null==i?void 0:i.divider,l.divider),addButton:(0,I.Z)(null==i?void 0:i.addButton,l.addButton)},buttonAriaLabel:d})},lz=(e,t,n)=>{if(t)for(let i of function* e(t){if(yield t,t.children)for(let n=0;n<t.children.length;n++)yield*e(t.children[n])}(t)){let{uploadCorrelationId:t}=i.ui;t&&e.includes(t)&&n(i)}};function lW(e){let t=[];return e.forEach(({oversizedFiles:e})=>{t=t.concat(e)}),t}let lj=e=>{let t=(0,ec.Xd)(e),[n,i]=(0,S.useState)(()=>lW(t));(0,S.useEffect)(()=>{let e=lW(t);i(t=>{let n=e.filter(e=>!t.includes(e));return 0===n.length?t:[...t,...n]})},[t]);let s=(0,S.useCallback)(e=>{i(t=>t.filter(t=>!e.includes(t)))},[]);return{oversizedUploadIds:n,untrackUploadIds:s}},lZ=(e,t,n)=>{let{oversizedUploadIds:i,untrackUploadIds:s}=lj(e.current),{displayModal:r,modal:o}=(0,ee.dd)(ec.w,{uploadIds:i});return(0,S.useEffect)(()=>{async function e(e){try{await r()}finally{s(e),lz(e,t,n)}}0!==i.length&&e(i)},[i,r,s,t,n]),o},lK=e=>{let{exitCallback:t}=e,[n,i]=(0,S.useState)(!1),[s,r]=(0,S.useState)(!1),o=(0,T.q)(),a=(e=!1)=>{r(e),i(!0)};return E().createElement(X._X,{analyticsId:"components.directives.fileUpload.confirmLeave.dialog","aria-labelledby":"confirm-leave-page-dialog-heading-id",open:!n,TransitionProps:{onExited:()=>{t(s),i(!1)}}},E().createElement(k.AnalyticsDialogTitle,{analyticsId:"components.directives.fileUpload.closeDuringUploadTitle",onClose:()=>a(),id:"confirm-leave-page-dialog-heading-id","aria-describedby":"confirm-leave-page-dialog-message-id"},o("components.directives.fileUpload.closeDuringUploadTitle")),E().createElement(k.AnalyticsDialogContent,{analyticsId:"components.directives.fileUpload.closeDuringUpload"},E().createElement(k.AnalyticsDialogContentText,{id:"confirm-leave-page-dialog-message-id",analyticsId:"components.directives.fileUpload.closeDuringUploadInstructions"},o("components.directives.fileUpload.closeDuringUploadInstructions"))),E().createElement(k.AnalyticsDialogActions,{analyticsId:"components.directives.fileUpload.closeDuringUploadActions"},E().createElement(k.AnalyticsDefaultButton,{analyticsId:"components.directives.fileUpload.closeDuringUploadGoBack",onClick:()=>a()},o("components.directives.fileUpload.closeDuringUploadGoBack")),E().createElement(k.AnalyticsPrimaryButton,{analyticsId:"components.directives.fileUpload.closeDuringUploadClose",onClick:()=>a(!0)},o("components.directives.fileUpload.closeDuringUploadClose"))))};function lX(e){return!e.children||!ia(e.children)}let lY=e=>{var t;let{showContentImportProgress:n,createFileContent:i,createEmptyFolder:s,deleteContentItem:r,canEdit:o,isCourseComplete:a,...l}=e,c=(0,D.ye)(P.x40.AiFeatures);(0,D.av)(null===(t=l.parentFolder)||void 0===t?void 0:t.courseId);let{modals:d,trackUpload:u}=function(e,t){let n=(0,S.useRef)(new Set),i=(0,ec.st)(n),s=function(e){let t=(0,D.Lx)(),{displayModal:n,modal:i}=(0,ee.dd)(lK,{});async function s(i,s,r){if(e.current.size<=0)return;i.preventDefault();let o=await n();o.confirmed&&(e.current.forEach(e=>{t(P.Nwg.fileUpload.abortGroupUploads(e))}),t({type:a8}),e.current.clear(),w.Nd.goRoute(s.name,r))}return(0,ek.wI)(ek.i7.RouterStateChangeStart,async(e,t,n,i)=>{i.name!==t.name&&await s(e,t,n)}),i}(n),r=lZ(n,e,t),o=(0,S.useCallback)(e=>{switch(e.type){case"trackGroup":n.current.add(e.payload.groupId);break;case"uploadStarted":n.current.add(e.payload.groupId),i(e.payload.groupId,e.payload.uploadIds);break;case"untrackGroup":n.current.delete(e.payload.groupId)}},[i]),a=E().createElement(E().Fragment,null,s,r);return{modals:a,trackUpload:o}}(l.parentFolder,r),p=im(l.parentFolder),m=(0,S.useMemo)(()=>({AddContentButton:lq,shouldShowEmptyListMessage:lX,fileUploads:{createFileContent:i,deleteContent:r,createEmptyFolder:s,trackUpload:u},textOnPage:{axLoadMoreButtonLabelKey:"components.directives.content.content-outline.infiniteScroll.content.loadMoreButton.label.plural",deleteConfirmationKeyVariant:"course-outline"},analyticsIds:{folderTitle:"content.item.folder.toggleFolder.button",discussionTitle:"content.item.courses.outline.gradebook.item.forum.link",editableGroupCount:"content.item.course.outline.contentItemBase.editGroups.link"}}),[i,r,s,u]);return E().createElement(E().Fragment,null,d,n&&E().createElement(aI,null),E().createElement(s$.Provider,{value:m},c&&p===f.Empty?E().createElement(lV,{canEdit:o,isCourseComplete:a,parentFolder:l.parentFolder}):E().createElement(lS,{...l})))};var lQ=n(714772);function lJ(e){return async function(){let t=(0,ek.ko)(ek.fz.CreateContentCourseModelOperations);try{await t.createContent(e)}catch(e){}}}function l0(e,t){var n;e.title=decodeURIComponent(null!==(n=t.fileName)&&void 0!==n?n:""),e.contentDetail={"resource/x-bb-file":{file:{fileName:t.fileName,fileLocation:t.fileLocation,mimeType:t.mimeType},fileAssociationMode:U.nEm.Embed}},t.webLocation&&(e.ui.webLocation=t.webLocation)}function*l1(e){var t,n;let{uploadedFile:i,content:s,isInsideFolder:r}=e.payload,{correlationId:o}=e.meta;l0(s,i);let a=yield(0,lQ.Ys)(P.Ys.fileUpload.getFileUploadById,o),l=yield(0,lQ.Ys)(null===(t=P.Ys.fileUpload)||void 0===t?void 0:t.getGroupStatusById,null!==(n=a.groupId)&&void 0!==n?n:""),c=(null==l?void 0:l.uploads.length)>1;if(!c&&!r){yield(0,lQ.gz)(P.Nwg.fileUpload.canUpdateFileDetails({correlationId:o}));let e=yield(0,lQ.qn)(e=>e.type===P.OYP.UPDATED_FILE_DETAILS&&e.meta.uploadId.correlationId===o);if(e.payload.cancelled)return}let d=lJ(s);yield(0,lQ.RE)(d)}function*l2(e){let t=e.payload,{groupUploadId:n,isInsideFolder:i}=e.meta,s=new Map(t.map(e=>[e.correlationId,e.content]));yield(0,lQ.gz)((0,P._X4)(P.Nwg.fileUpload.filesUploadRequest(t,n))),yield(0,lQ.ib)(e=>e.type===`${P.OYP.FILE_UPLOAD}.ok`,function*(e){let t=s.get(e.meta.uploadId.correlationId);t&&(yield(0,lQ.gz)(function(e){let{correlationId:t,...n}=e;return{type:a6,meta:{correlationId:t},payload:n}}({content:t,correlationId:e.meta.uploadId.correlationId,isInsideFolder:i,uploadedFile:e.payload.file})))})}function*l3(){let e=yield(0,lQ.ZO)(a6);for(yield(0,lQ.ib)(a8,()=>{e.flush(()=>{})});;){let t=yield(0,lQ.qn)(e);yield(0,lQ.RE)(l1,t)}}function*l9(e){var t;let n=e.payload,{groupUploadId:i}=e.meta,s=n.reduce((e,{correlationId:t,content:n})=>(e[t]=n,e),{}),r=Object.keys(s),o=[];for(let{correlationId:e,file:t}of n){let n;let s=t.bearer_token.key,r=(0,P.nMx)(t);try{n=yield(0,lQ.RE)(P.Tj0,"CloudStorageIntegration",r,s)}catch(n){yield(0,lQ.gz)(P.Nwg.fileUpload.invalidFileUpload(t,{correlationId:e,groupId:i},!0));continue}o.push({correlationId:e,accessToken:s,file:n})}yield(0,lQ.gz)((0,P._X4)(P.Nwg.fileUpload.cloudFilesUploadRequest(o,i))),yield(0,lQ.ib)(e=>e.type===`${P.OYP.FILE_UPLOAD}.ok`&&r.includes(e.meta.uploadId.correlationId),(t=({meta:e})=>s[e.uploadId.correlationId],async function(e){let{file:n}=e.payload,i=t(e);l0(i,n);let s=lJ(i);await s()}))}var l4=n(103528);async function l7(e){return new Promise(t=>{setTimeout(t,e)})}function l5(e,t,n){return n.status===U.LVO.Complete?(e(P.Nwg.fileUpload.fileUploadSuccess(t,function(e){let t={fileName:void 0,fileLocation:void 0};return e&&(t.fileName=e.fileName,t.fileLocation=e.fileLocation,t.webLocation=e.webLocation,t.mimeType=e.mimeType,t.isMedia=e.isMedia),t}(n))),e(l4.uR),!0):(n.status===U.LVO.Incomplete||n.status===U.LVO.CompleteErrors)&&(e(P.Nwg.fileUpload.fileUploadFailure(t,P.TeC.Api)),e(l4.uR),!0)}function l6(e,t,n){let i={lengthComputable:!1,loaded:n.completePercentage,total:100};e(P.Nwg.fileUpload.updateFileUploadProgress(t,i))}async function l8(e,t,n,i,s){var r;let o;let a=t=>{let n;t instanceof U.Hy0&&(n=t.body.status),e(P.Nwg.fileUpload.fileUploadFailure(i,P.TeC.Api,n))};try{o=await (0,P.W8C)("CloudStorageIntegration",t.id,n)}catch(e){a(e);return}l6(e,i,o);let l=l5(e,i,o);for(;!l;){let t;if(await l7(2e3),s.signal){l=!0,e(P.Nwg.fileUpload.fileUploadAborted(i)),e(l4.uR);return}try{t=await (r=o.taskId,(0,P.uZ9)(r,n))}catch(e){a(e);return}l6(e,i,t),l=l5(e,i,t)}}class ce{constructor(){this._signal=!1}abort(){this._signal=!0}get signal(){return this._signal}}function*ct(e,t,n){let i=new ce;yield(0,lQ.gz)(P.Nwg.fileUpload.startFileUpload(n,i));let s=(0,l4.GG)(s=>(l8(s,e,t,n,i),()=>{}));for(;;){let e=yield(0,lQ.qn)(s);yield(0,lQ.gz)(e)}}var cn={uploadFileContentItemSaga:function*(){yield(0,lQ.$6)([(0,lQ.ib)(a5,l2),(0,lQ.RE)(l3)])},cloudUploadFileContentItemSaga:function*(){yield(0,lQ.ib)(le,l9)},cloudUploadRequestWatcherSaga:function*(){yield(0,lQ.ib)(P.OYP.CLOUD_FILE_UPLOAD_REQUEST,function*(e){let{file:t,accessToken:n}=e.payload,{uploadId:i}=e.meta;yield(0,lQ.RE)(ct,t,n,i)})}};let ci=(0,G.makeStyles)(e=>(0,G.createStyles)({mainContainer:{display:"flex",height:"36px",alignItems:"center"},headerWrapper:{flex:"1",maxWidth:"none",display:"flex",alignItems:"center"}})),cs="course.outline.details.and.action.expanded",cr=e=>{let{isStudentPreview:t,courseId:n,isExpanded:i,setIsExpanded:s}=e,r=tp(t?cs+".student.preview":cs,n),o=(0,T.q)(),a=ci();return E().createElement("div",{className:(0,I.Z)("js-course-skip-link-target","js-details-header",a.mainContainer)},E().createElement("div",{className:a.headerWrapper},E().createElement(k.AnalyticsTypography,{component:"h2",variant:"h2"},o("course.outline.detailsActionsLabel"))),E().createElement(tc,null,E().createElement(tu,{id:"details-actions-expansion-button",analyticsId:'"courseOverview.detailsAndActions.expandOrCollapse"',isExpanded:i,preferenceKey:r,setIsExpanded:s,title:o("course.outline.detailsActionsLabel"),panelControlId:"details-and-actions-panel"})))},co="keyword",ca="category",cl=[{id:"DOCUMENT",name:"document-text",isCategoryMatch:e=>(P.GQk.Document.isEqualTo(e.contentHandler)||P.GQk.Folder.isEqualTo(e.contentHandler))&&U.zcD.Document===e.type},{id:"ASSESSMENTS",name:"assessments",isCategoryMatch:e=>P.GQk.TestLink.isEqualTo(e.contentHandler)},{id:"SCORM",name:"scormengine",isCategoryMatch:e=>P.GQk.RusticiScorm.isEqualTo(e.contentHandler)},{id:"FILE",name:"file",isCategoryMatch:e=>P.GQk.File.isEqualTo(e.contentHandler)},{id:"LTI",name:"lti",isCategoryMatch:e=>P.GQk.LtiLink.isEqualTo(e.contentHandler)},{id:"JOURNAL",name:"journal",isCategoryMatch:e=>P.GQk.Journal.isEqualTo(e.contentHandler)},{id:"FOLDER",name:"folder",isCategoryMatch:e=>P.AaE.isFolderContentItem(e)},{id:"LEARNING_MODULE",name:"learning-module",isCategoryMatch:e=>P.Xgx.isLearningModule(e)}],cc=e=>{let t=e?cl:cl.slice(0,cl.length-2);return{filters:t.map(({id:e,name:t,isCategoryMatch:n})=>({id:e,name:t,selected:!1,length:0,isCategoryMatch:n})),[co]:""}},cd=()=>({[co]:{expanded:!0},[ca]:{expanded:!0}}),cu=e=>{let{keyword:t,filters:n}=e,i=n.some(e=>e.selected);return!(i||t.trim())},cp=()=>{let e=(0,G.useTheme)(),t=(0,G.useMediaQuery)(e.breakpoints.down("sm")),[n,i]=(0,S.useState)(!t);return[n,i]},cm=(0,G.makeStyles)(e=>({container:{padding:e.spacing(0),display:"flex",height:"calc(100dvh - 226px)",[e.breakpoints.up("sm")]:{height:"calc(100dvh - 232px)"}}})),{fade:ch}=G.colorManipulator,cg=(0,G.makeStyles)(e=>({container:{width:"100%",minWidth:"170px",display:"flex",flexDirection:"column",[e.breakpoints.up("sm")]:{width:"360px",minWidth:"225px",boxShadow:`5px 0 0 0 ${ch(e.palette.border.main,.1)}`}},clearAll:{color:e.palette.link.disabled,"&:enabled":{color:e.palette.link.active,textDecoration:"underline"}},searchItemsContainer:{overflow:"auto",display:"flex",flexDirection:"column",flexGrow:1,[e.breakpoints.up("sm")]:{padding:e.spacing(0,3,0,0)}},header:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${e.palette.border.main}`,whiteSpace:"nowrap",minHeight:"76px",[e.breakpoints.up("sm")]:{marginRight:e.spacing(3)}},headerText:{"&&":{marginBottom:"0px"}},icon:{transition:"transform 200ms"},iconClose:{transform:"rotate(-180deg)"},blocksContainer:{overflow:"auto"},keywordSearch:{paddingTop:e.spacing(1.25)},keywordInputField:{marginBottom:e.spacing(2),"& fieldset":{border:0},"& input":{margin:0},"& label":{color:e.palette.text.hint}},blockHeader:{display:"flex",justifyContent:"space-between",alignItems:"center"},blockHeaderTitle:{fontWeight:e.typography.fontWeightBold},block:{borderBottom:`1px solid ${e.palette.border.main}`,padding:e.spacing(1,0,1,0),display:"inline-block",width:"100%","&:last-child":{borderBottom:"none"}},itemContainer:{paddingLeft:e.spacing(1.5),paddingTop:e.spacing(.625),whiteSpace:"nowrap",overflowX:"hidden"},footer:{borderTop:`1px solid ${e.palette.border.main}`,padding:e.spacing(1,1.5),display:"flex",justifyContent:"end",[e.breakpoints.up("sm")]:{marginRight:e.spacing(3)},[e.breakpoints.down("xs")]:{position:"sticky",bottom:0,backgroundColor:e.palette.background.default}}})),cf=({criteriaConfig:e,createInRoot:t,onPanelClose:n,isOpen:i,setFocusOnCloseButton:s})=>{let r=cc(t),{onSearchClick:o,currentFilterState:a}=e,[l,c]=(0,S.useState)(cd()),d=(0,T.q)(),u=cg(),p=(0,G.useMediaQuery)(e=>e.breakpoints.down("xs")),[m,h]=(0,S.useState)(a),g=(0,S.useRef)(null);(0,S.useEffect)(()=>{var e;i&&s&&(null===(e=g.current)||void 0===e||e.focus())},[i,s]),(0,S.useEffect)(()=>{h(a)},[a]);let f=e=>{c({...l,[e]:{expanded:!l[e].expanded}})},b=(e,t)=>{let n=m.filters.map(n=>n.id===e?{...n,selected:t}:n);h(e=>({...e,filters:n}))},v=e=>{h(t=>({...t,[co]:e}))};if(!i)return null;let y=d("courseLink.searchPanel.keywordSearch.header"),C=d("courseLink.searchPanel.linkableItems.label"),w=l[co].expanded,A=l[ca].expanded,x=cu(m);return E().createElement("div",{role:"search",className:u.container},E().createElement("div",{className:u.header},E().createElement("div",null,E().createElement(k.AnalyticsTypography,{variant:"h2",className:u.headerText},d("courseLink.searchPanel.header")),E().createElement(lx.b,{analyticsId:d("courseLink.searchPanel.clearAll"),className:u.clearAll,onClick:()=>{h(r)},disabled:x,"aria-label":d("courseLink.searchPanel.clearAll")},d("courseLink.searchPanel.clearAll"))),E().createElement(k.AnalyticsIconButton,{analyticsId:"courseLink.searchPanel.iconButton",onClick:n,"aria-label":d("courseLink.searchPanel.closeLabel"),"aria-expanded":"true",ref:g},E().createElement(M.Close,null))),E().createElement("div",{className:u.searchItemsContainer},E().createElement("div",{className:u.block},E().createElement("div",{className:u.blockHeader},E().createElement(k.AnalyticsTypography,{variant:"h4",component:"h3",className:u.blockHeaderTitle},y),E().createElement(k.AnalyticsIconButton,{analyticsId:"courseLink.searchPanel.iconButton",id:"button-keyword-search-input-field",className:(0,I.Z)(u.icon,{[u.iconClose]:!w}),onClick:()=>f(co),"aria-label":d("courseLink.searchPanel.keywordSearch.ariaLabel"),"aria-expanded":l[co].expanded,"aria-controls":"keyword-region"},E().createElement(M.ChevronUp,null))),w&&E().createElement(k.AnalyticsFormControl,{analyticsId:"courseLink.searchPanel.formControl",fullWidth:!0,className:u.keywordSearch,id:"keyword-region",role:"region","aria-labelledby":"button-keyword-search-input-field"},E().createElement(k.AnalyticsTextField,{analyticsId:"courseLink.searchPanel.textField",id:"keyword-input-field",type:"text",className:u.keywordInputField,label:d("courseLink.searchPanel.keywordSearch.placeholder"),floatingLabel:!0,value:m[co],onChange:e=>v(e.target.value),inputProps:{"aria-label":d("courseLink.searchPanel.keywordSearch.placeholder")}}))),E().createElement("div",{className:u.block},E().createElement("div",{className:u.blockHeader},E().createElement(k.AnalyticsTypography,{variant:"h4",component:"h3",className:u.blockHeaderTitle},C),E().createElement(k.AnalyticsIconButton,{analyticsId:"courseLink.searchPanel.iconButton",id:"button-category-search-checkboxes",className:(0,I.Z)(u.icon,{[u.iconClose]:!A}),onClick:()=>f(ca),"aria-expanded":A,"aria-label":d("courseLink.searchPanel.linkableItems.ariaLabel"),"aria-controls":"categories-region"},E().createElement(M.ChevronUp,null))),E().createElement("div",{id:"categories-region",role:"region","aria-labelledby":"button-category-search-checkboxes"},A&&m.filters.map(e=>E().createElement("div",{key:e.id,className:u.itemContainer},E().createElement(k.AnalyticsFormControlLabel,{analyticsId:"courseLink.searchPanel.formControlLabel",label:d(`courseLink.searchPanel.linkableItems.types.${e.name}`,{totalResults:e.length}),htmlFor:e.id,control:E().createElement(k.AnalyticsCheckbox,{analyticsId:"courseLink.searchPanel.checkbox",id:e.id,checked:e.selected,onChange:t=>b(e.id,t.target.checked)})})))))),E().createElement("div",{className:u.footer},E().createElement(k.AnalyticsPrimaryButton,{analyticsId:"courseLink.searchPanel.primaryButton",onClick:()=>{let{filters:e,keyword:t}=m;o({filters:e.map(e=>({...e,length:0})),keyword:t.trim()}),p&&n()},disabled:x,id:"button-courselink-panel-search"},d("courseLink.searchPanel.buttonText"))))},cb=({criteriaConfig:e,createInRoot:t,children:n})=>{let[i,s]=cp(),[r,o]=(0,S.useState)(!1),a=cm(),l=()=>{s(e=>!e),r||o(!0)};return E().createElement("div",{className:a.container},E().createElement(cf,{criteriaConfig:e,createInRoot:t,isOpen:i,onPanelClose:l,setFocusOnCloseButton:r}),n(l,i))},cv=(0,G.makeStyles)(e=>({header:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"min-content",padding:e.spacing(1.25,0),[e.breakpoints.up("sm")]:{minHeight:"76px",padding:e.spacing(.5,0)}},headerButton:{marginRight:e.spacing(1.875),[e.breakpoints.up("sm")]:{marginRight:e.spacing(1)}},results:{"&&":{marginBottom:"0px"},[e.breakpoints.up("sm")]:{whiteSpace:"nowrap"}},emptyDiv:{display:"none",[e.breakpoints.up("sm")]:{display:"flex",width:"50px"}}})),cy=({isSearchPanelOpen:e,openSearchPanel:t,totalResults:n,loadedResults:i,initialState:s})=>{let r=(0,T.q)(),o=(0,D.gH)("courseLink.contentPanel.header.helper.course","courseLink.contentPanel.header.helper.organization"),a=cv(),l=(0,S.useRef)(null);return(0,S.useEffect)(()=>{var t;e||null===(t=l.current)||void 0===t||t.focus()},[e]),E().createElement(G.Box,{className:a.header},!e&&E().createElement(G.Box,{className:a.headerButton,role:"search"},E().createElement(k.AnalyticsPrimaryButton,{onClick:t,analyticsId:"courseLink.containerPanel.openSearchPanelButton","aria-expanded":"false",ref:l},r("courseLink.contentPanel.header.searchButton"))),!!n&&!s&&E().createElement(G.Box,null,E().createElement(k.AnalyticsTypography,{variant:"h2",className:a.results},r("courseLink.contentPanel.header.searchResults",{loadedResults:i,totalResults:n})),E().createElement(k.AnalyticsTypography,{variant:"body1"},r(o("courseLink.contentPanel.header.helper.course")))),!e&&E().createElement(G.Box,{className:a.emptyDiv}))};var cC=n(38050),cS=n.n(cC);let cE=(0,G.makeStyles)(()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",margin:"30px auto 0 auto"},image:{display:"inline-block",lineHeight:1,strokeWidth:1.1,stroke:"transparent",fill:"none",verticalAlign:"inherit",width:"200px",height:"200px",marginBottom:"10px"},title:{fontSize:"20px !important",marginBottom:"10px !important",marginTop:0,textAlign:"center"},message:{textAlign:"center",marginBottom:"28px",whiteSpace:"pre-wrap"}})),cI=e=>{let{headerKey:t,messageKey:n}=e,i=(0,T.q)(),s=(0,D.gH)("courseLink.emptyState.initialHeader.course","courseLink.emptyState.initialHeader.organization"),r=(0,D.gH)("courseLink.emptyState.initialMessage.course","courseLink.emptyState.initialMessage.organization"),o=cE();return E().createElement("div",{className:o.container},E().createElement("div",{className:o.image,dangerouslySetInnerHTML:{__html:cS()}}),E().createElement(k.AnalyticsTypography,{variant:"h2",className:o.title},i(s(t))),E().createElement("div",{className:o.message},i(r(n),{keyword:E().createElement("strong",null,i("courseLink.searchPanel.keywordSearch.header")),linkableItems:E().createElement("strong",null,i("courseLink.searchPanel.linkableItems.label"))})))},cw=(e,t,n,i)=>({display:"flex",flexDirection:"column",paddingLeft:25*t,"&::after":{content:'""',background:e.palette.border.main,marginLeft:e.spacing(12.25),marginTop:i,display:"flex",height:"1px"},"&:last-child:after":{content:'""',background:e.palette.border.main,display:"flex",height:"1px",marginBottom:e.spacing(2),marginTop:i,marginLeft:n}}),cA=(e,t=0,n=0)=>({height:"100%",display:"flex",alignItems:"center",justifyContent:"center",paddingTop:t,paddingBottom:n,[e.breakpoints.down("xs")]:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),ck=(0,G.makeStyles)(e=>({container:{display:"flex",flexDirection:"column",flexGrow:1,width:"100%"},loadingContainer:{...cA(e)},containerOff:{paddingLeft:e.spacing(4),width:"67vw",[e.breakpoints.down("xs")]:{display:"none"}}})),cx=({isSearchPanelOpen:e,openSearchPanel:t,totalResults:n,children:i,initialState:s,isLoading:r,loadedResults:o})=>{let a=ck(),l=(0,T.q)();return E().createElement("div",{className:(0,I.Z)(a.container,{[a.containerOff]:e})},!r&&E().createElement(cy,{isSearchPanelOpen:e,openSearchPanel:t,totalResults:n,loadedResults:o,initialState:s}),r?E().createElement("div",{className:a.loadingContainer},E().createElement(k.AnalyticsCircularProgress,{id:"courseLink.contentPanel.loader",ariaLabel:l("courseLink.contentPanel.loader")})):s||!n?E().createElement(cI,{headerKey:s?"courseLink.emptyState.initialHeader.course":"courseLink.emptyState.zeroResultsHeader",messageKey:s?"courseLink.emptyState.initialMessage.course":"courseLink.emptyState.zeroResultsMessage"}):i)},cT=(0,G.makeStyles)(e=>({content:{overflow:"hidden",display:"flex",flexDirection:"column"},radioGroup:{flexWrap:"nowrap"},onRecordsContent:{padding:e.spacing(2,3),display:"flex",justifyContent:"center"},subHeader:{height:"40px",display:"flex",alignItems:"center",borderBottom:`1px solid ${e.palette.border.main}`,borderTop:`1px solid ${e.palette.border.main}`},subHeaderName:{padding:e.spacing(.125,5),display:"flex",height:"40px",alignItems:"center",flex:2},categoryName:{display:"flex",flexDirection:"row",gap:"34px",alignItems:"center",flex:1,paddingRight:e.spacing(11.5),[e.breakpoints.down("xs")]:{display:"none"}},collapse:{width:"40px"},itemsContent:{display:"flex",flexDirection:"column",overflowY:"auto",overflowX:"clip",flex:2},divider:{height:"25px"},title:{paddingRight:e.spacing(1)}}));(d=y||(y={})).Name="name",d.Category="categoryType";let cP=e=>{let[t,n]=(0,S.useState)({}),i=(0,S.useMemo)(()=>{let{type:n,isAsc:i}=t;if(!n)return e;let s=[...e].sort((e,t)=>n===y.Category?e[n].localeCompare(t[n])||e[y.Name].localeCompare(t[y.Name]):e[n].localeCompare(t[n]));return i?s:s.reverse()},[e,t]);return{sortOrder:t,sortBySubHeader:e=>{if(t.type!==e){n({type:e,isAsc:!0});return}n(t=>({type:e,isAsc:!t.isAsc}))},sortedRecords:i}},cD="courseLink.searchPanel.linkableItems.types",cG=(e,t,n,i)=>P.GQk.TestLink.isEqualTo(i)?(null==n?void 0:n.isUserDefined)?`${t(`${cD}.assessment`,{totalResults:0})} (${null==n?void 0:n.title})`:`${t(`${cD}.assessment`,{totalResults:0})} (${t(`course.content.assessment.test.settings.grading.category.${null==n?void 0:n.title}`)})`:(null==i?void 0:i.toString())===P.GQk.File.handle?`${t(`${cD}.file`,{totalResults:0})}`:(null==i?void 0:i.toString())===P.GQk.LtiLink.handle||(null==i?void 0:i.toString())===P.GQk.LtiPlacement.handle||"document-blank"===e?`${t(`${cD}.singlelti`,{totalResults:0})}`:t(`${cD}.${e}`,{totalResults:0}),cR={offset:0,limit:10},cB=e=>{if(e){let{offset:t,limit:n}=e;return{offset:t+n,limit:n}}return cR},cL=e=>{var t;return!!e&&(null!==(t=null==e?void 0:e.count)&&void 0!==t?t:0)>e.limit+e.offset},cN=(e,t)=>t?e:`_root_${e}`,cO=e=>(null==e?void 0:e.length)?e.filter(e=>e.selected).map(e=>e.id).join(", "):"",cM=(e,t)=>{let{keyword:n,filters:i}=t,s=i.some(e=>e.selected);return{filters:i.map(t=>(e.forEach(e=>{(!s||t.selected)&&t.isCategoryMatch(e)&&(t.length+=1)}),t)),keyword:n}},c$=(e,t)=>{let[n,i]=(0,S.useState)(!1),[s,r]=(0,S.useState)({items:[]}),o=(0,T.q)(),a=(0,S.useCallback)(async(n,s)=>{i(!0);let a=cB(),{filters:l,keyword:c=""}=null!=n?n:{},d=cO(l);try{let{items:i,paging:l}=await e(!1,a,d,c,s,t),u=i.map(e=>({...e,tempId:cN(e.id,s),categoryType:cG(e.type,o,e.gradebookType,e.contentHandler)}));return r({items:u,paging:l}),n&&cM(u,n)}finally{i(!1)}},[e,t,o]),l=(0,S.useCallback)(async(t,n)=>{let i=cB(s.paging),{filters:a,keyword:l=""}=null!=t?t:{},c=cO(a);try{let{items:a,paging:d}=await e(!0,i,c,l,n),u=a.map(e=>({...e,tempId:cN(e.id,n),categoryType:cG(e.type,o,e.gradebookType,e.contentHandler)}));return r({items:s.items.concat(u),paging:d}),t&&cM(u,t)}catch(e){}},[s.items,s.paging,e,o]);return{isLoading:n,data:s,loadContents:a,loadMoreContents:l}},cH=()=>{let[e,t]=(0,S.useState)(!1);return[e,()=>{t(e=>!e)}]};var cF=n(388221);let cU=(0,G.makeStyles)(e=>({iconDisabled:{marginRight:"-40px"},visibilityText:{paddingLeft:e.spacing(.75)}})),cV=({type:e,visible:t})=>{let n=cU(),i=(0,ec.dJ)(e);return i?t?E().createElement(i,{"data-testid":e}):E().createElement(E().Fragment,null,E().createElement(cF.x,{"data-testid":"disabled",className:n.iconDisabled}),E().createElement(i,{"data-testid":e})):null},c_=(0,G.makeStyles)(e=>({content:{padding:e.spacing(2.5,0),display:"flex"},checkbox:{paddingLeft:e.spacing(1.5)},icon:{paddingRight:e.spacing(1.5),alignSelf:"center"},itemNameColumn:{display:"flex",flex:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0},itemInfo:{display:"grid",gap:"4px",whiteSpace:"nowrap"},itemCategoryColumnVisible:{display:"none",[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(4.5),paddingRight:e.spacing(2),display:"flex",flex:1}},itemCategoryColumnHidden:{display:"none"},collapse:{width:"40px",paddingRight:({nestingLevel:e})=>12.5*e},visibilityContentPanelOff:{"&& div":{lineHeight:"unset"},display:"flex",flexDirection:"column",gap:"4px",[e.breakpoints.up("sm")]:{flexDirection:"row",gap:"12px",alignItems:"center"}},visibilityContentPanelOn:{"&& div":{lineHeight:"unset"},display:"flex",flexDirection:"column",gap:"4px",[e.breakpoints.up("md")]:{flexDirection:"row",gap:"12px",alignItems:"center"}},toggleIcon:{transition:"transform 200ms"},toggleIconClose:{transform:"rotate(-180deg)"}})),cq=({record:e,selectedItem:t,setSelectedItem:n,isSearchPanelOpen:i,hideCategoryColumn:s,isOpen:r,toggleContent:o})=>{let{type:a,categoryType:l,name:c,isAvailable:d,tempId:u}=e,p=!!u&&u===(null==t?void 0:t.tempId),m=em(),h=c_({nestingLevel:m}),g=()=>{let t={...e,displayName:e.name};n(t)},f=a===U.zcD.LearningModule,b="h6";return 0===m?b="h3":1===m?b="h4":2===m?b="h5":3===m&&(b="h6"),E().createElement("div",{className:h.content},E().createElement("div",{className:h.itemNameColumn},E().createElement(k.AnalyticsFormControlLabel,{analyticsId:"courseLink.item.info.select",label:"",htmlFor:u,className:h.checkbox,control:E().createElement(k.AnalyticsRadio,{analyticsId:"courseLink.item.info.select.radio",id:u,"aria-label":c,checked:p,value:u,onClick:()=>g()})}),!f&&E().createElement("div",{className:h.icon},E().createElement(cV,{visible:d,type:a})),E().createElement("div",{className:h.itemInfo},E().createElement(k.AnalyticsTypography,{variant:"h4",component:b},c),E().createElement("div",{className:i?h.visibilityContentPanelOn:h.visibilityContentPanelOff},E().createElement(sl,{item:e}),sa(e)&&E().createElement(rD,{item:e})),f&&E().createElement(of,{item:e}))),E().createElement("div",{className:(0,I.Z)(s?h.itemCategoryColumnHidden:h.itemCategoryColumnVisible)},E().createElement(k.AnalyticsTypography,{className:h.itemText,variant:"body1"},l)),E().createElement("div",{className:h.collapse},o&&E().createElement(k.AnalyticsIconButton,{analyticsId:"courseLink.item.info.toggleContent.iconButton","aria-label":c,onClick:()=>o(),className:(0,I.Z)(h.toggleIcon,{[h.toggleIconClose]:r})},E().createElement(M.ChevronDown,null))))},cz=(0,G.makeStyles)(e=>({checkedContent:{display:"flex",flexDirection:"column",paddingBottom:e.spacing(2.5),marginLeft:e.spacing(12.25)},displayName:{paddingRight:e.spacing(1),marginBottom:e.spacing(2),width:"260px","& div":{border:0},"& input":{margin:0},[e.breakpoints.down("xs")]:{width:"100%"}},description:{paddingRight:e.spacing(1),"& div, div:hover":{border:`1px solid ${e.palette.background.b5}`,backgroundColor:e.palette.background.default}}})),cW=({record:e,setSelectedItem:t,selectedItem:n})=>{let i=cz(),s=(0,T.q)(),{tempId:r}=e,o=!!r&&r===(null==n?void 0:n.tempId),a=e=>{n&&t({...n,displayName:e})},l=e=>{n&&t({...n,description:e})};return o?E().createElement("div",{className:i.checkedContent},E().createElement(k.AnalyticsTextField,{analyticsId:"item-display-name",id:"item-display-name",type:"text",className:i.displayName,label:s("courseLink.contentPanel.item.displayName"),placeholder:s("courseLink.contentPanel.item.displayNamePlaceholder"),onChange:e=>a(e.target.value),value:n.displayName,required:!0,error:!n.displayName,helperText:n.displayName?"":s("courseLink.contentPanel.item.displayNameHelperText"),inputProps:{maxLength:333}}),E().createElement(k.AnalyticsTextField,{analyticsId:"item-description",id:"item-description",type:"text",className:i.description,label:s("courseLink.contentPanel.item.description"),placeholder:s("courseLink.contentPanel.item.descriptionPlaceholder"),onChange:e=>l(e.target.value),value:n.description,inputProps:{maxLength:750},fullWidth:!0,multiline:!0,rows:5,helperText:s("course.content.descriptionMaxCharactersLabel")})):null},cj=(0,G.makeStyles)(e=>{let t=e.palette.background.b4;return{contentFromRoot:{...cw(e,0,0,0)},content:{...cw(e,1,e.spacing(12.25),0)},expandableContent:({nestingLevel:n})=>({backgroundColor:e.palette.background.b2,boxShadow:`inset 0px -5px 0px 0px ${t}, inset 0px 5px 0px 0px ${t}`,marginLeft:-25*n,paddingLeft:25*n,"&::before":{content:'""',height:"1px",display:"flex",background:e.palette.border.main,marginLeft:e.spacing(12.25)}}),loadingContainer:{...cA(e,e.spacing(2),e.spacing(2))}}}),cZ=({loadCourseContents:e,record:t,setSelectedItem:n,selectedItem:i,isSearchPanelOpen:s,hideCategoryColumn:r,isFromRoot:o})=>{let[a,l]=cH(),{isLoading:c,data:d,loadContents:u,loadMoreContents:p}=c$(e),m=(0,T.q)(),h=em(),{items:g,paging:f}=d;(0,S.useEffect)(()=>{a&&!g.length&&u(void 0,t)},[a,g.length,t,u]);let b=(0,S.useCallback)(()=>{p(void 0,t)},[p,t]),v=cj({nestingLevel:h}),y=(0,S.useMemo)(()=>cL(f),[f]);return E().createElement("div",{className:(0,I.Z)(o?v.contentFromRoot:v.content)},E().createElement(cq,{record:t,setSelectedItem:n,selectedItem:i,isOpen:a,toggleContent:l,hideCategoryColumn:r,isSearchPanelOpen:s}),E().createElement(cW,{record:t,selectedItem:i,setSelectedItem:n}),E().createElement(ic.Z,{in:a},c?E().createElement("div",{className:v.loadingContainer},E().createElement(k.AnalyticsCircularProgress,{id:`courseLink.folder.${t.id}.loader`,ariaLabel:m("courseLink.contentPanel.loader")})):E().createElement("div",{className:v.expandableContent},E().createElement(ep,{value:h+1},E().createElement(c0,{loadCourseContents:e,records:d.items,setSelectedItem:n,selectedItem:i,loadMoreData:b,hasMore:y,isSearchPanelOpen:s})))))},cK=(0,G.makeStyles)(e=>{let t=e.palette.background.b2;return{contentFromRoot:{...cw(e,0,0,e.spacing(2)),paddingTop:e.spacing(2)},contentInfo:{background:t,border:`1px solid ${e.palette.border.main}`},expandableContent:{border:`1px solid ${e.palette.border.main}`,borderTop:0,boxShadow:`inset 0px -5px 0px 0px ${t}, inset 0px 5px 0px 0px ${t}`},loadingContainer:{...cA(e,e.spacing(2))}}}),cX=({loadCourseContents:e,record:t,setSelectedItem:n,selectedItem:i,isSearchPanelOpen:s,hideCategoryColumn:r})=>{let[o,a]=cH(),{isLoading:l,data:c,loadContents:d,loadMoreContents:u}=c$(e),{items:p,paging:m}=c,h=(0,T.q)();(0,S.useEffect)(()=>{o&&!p.length&&d(void 0,t)},[o,p.length,t,d]);let g=(0,S.useCallback)(()=>{u(void 0,t)},[u,t]),f=em(),b=(0,S.useMemo)(()=>cL(m),[m]),v=cK();return E().createElement("div",{className:v.contentFromRoot},E().createElement("div",{className:v.contentInfo},E().createElement(cq,{record:t,setSelectedItem:n,selectedItem:i,isOpen:o,toggleContent:a,hideCategoryColumn:r,isSearchPanelOpen:s}),E().createElement(cW,{record:t,selectedItem:i,setSelectedItem:n})),E().createElement(ic.Z,{in:o},l?E().createElement("div",{className:v.loadingContainer},E().createElement(k.AnalyticsCircularProgress,{id:`courseLink.folder.${t.id}.loader`,ariaLabel:h("courseLink.contentPanel.loader")})):E().createElement("div",{className:v.expandableContent},E().createElement(ep,{value:f+1},E().createElement(c0,{loadCourseContents:e,records:c.items,setSelectedItem:n,selectedItem:i,loadMoreData:g,hasMore:b,isSearchPanelOpen:s})))))},cY=(0,G.makeStyles)(e=>({contentFromRoot:{...cw(e,0,0,0)},content:{...cw(e,1,e.spacing(12.25),0)}})),cQ=({record:e,selectedItem:t,setSelectedItem:n,isSearchPanelOpen:i,hideCategoryColumn:s,isFromRoot:r})=>{let o=cY();return E().createElement("div",{className:r?o.contentFromRoot:o.content},E().createElement(cq,{record:e,setSelectedItem:n,selectedItem:t,isSearchPanelOpen:i,hideCategoryColumn:s}),E().createElement(cW,{record:e,setSelectedItem:n,selectedItem:t}))},cJ=(0,S.memo)(({record:e,selectedItem:t,setSelectedItem:n,loadCourseContents:i,isSearchPanelOpen:s,hideCategoryColumn:r,isRoot:o})=>P.AaE.isFolderContentItem(e)?E().createElement(cZ,{record:e,selectedItem:t,key:e.tempId,setSelectedItem:n,loadCourseContents:i,isSearchPanelOpen:s,hideCategoryColumn:r,isFromRoot:o}):P.Xgx.isLearningModule(e)?E().createElement(cX,{record:e,selectedItem:t,key:e.tempId,setSelectedItem:n,loadCourseContents:i,isSearchPanelOpen:s,hideCategoryColumn:r}):E().createElement(cQ,{record:e,selectedItem:t,key:e.tempId,setSelectedItem:n,isSearchPanelOpen:s,hideCategoryColumn:r,isFromRoot:o})),c0=(0,S.memo)(({records:e,selectedItem:t,setSelectedItem:n,loadCourseContents:i,loadMoreData:s,hasMore:r,isSearchPanelOpen:o,isRoot:a})=>{let l=(0,T.q)(),{sortBySubHeader:c,sortOrder:d,sortedRecords:u}=cP(e),{isAsc:p,type:m}=d,h=cT(),g=(0,ee.MQ)(s,r),f=(0,G.useMediaQuery)(e=>e.breakpoints.down("xs")),b=(0,G.useMediaQuery)(e=>e.breakpoints.down("sm")),v=b&&o||f,C=e=>m===e?p?E().createElement(M.SortArrowAscending,null):E().createElement(M.SortArrowDescending,null):E().createElement(M.SortArrows,null),I=(0,S.useMemo)(()=>[{id:"courseLink.contentPanel.subHeader.name",title:l("courseLink.contentPanel.subHeader.name"),onClick:()=>c(y.Name),ariaLabel:l(`courseLink.contentPanel.subHeader.name.${p?"ascending":"descending"}`),icon:C(y.Name),className:h.subHeaderName,hasDivider:!1},{id:"courseLink.content.panel.subHeader.category",title:l("courseLink.contentPanel.subHeader.category"),onClick:()=>c(y.Category),ariaLabel:l(`courseLink.contentPanel.subHeader.category.${p?"ascending":"descending"}`),icon:C(y.Category),className:h.categoryName,hasDivider:!0}],[d]),w=(0,S.useCallback)(()=>{let e=v?[I[0]]:I;return[...e.map(({id:e,title:t,onClick:n,ariaLabel:i,icon:s,className:o,hasDivider:a})=>r?E().createElement("div",{className:o,key:e},a&&E().createElement(G.Divider,{orientation:"vertical",className:h.divider}),E().createElement(k.AnalyticsTypography,{variant:"h4",component:"p"},t)):E().createElement("div",{className:o,key:e},a&&E().createElement(G.Divider,{orientation:"vertical",className:h.divider}),E().createElement(k.AnalyticsIconButton,{analyticsId:"courseLink.content.panel.subHeader.iconButton",onClick:()=>n(),"aria-label":i},E().createElement(k.AnalyticsTypography,{variant:"h4",component:"p",className:h.title},t),s))),E().createElement("div",{className:h.collapse,key:"collapse"})]},[r,d,v]);return e.length?E().createElement("div",{className:h.content},a&&E().createElement("div",{className:h.subHeader},w()),E().createElement("div",{className:h.itemsContent},E().createElement(k.AnalyticsRadioGroup,{analyticsId:"courseLink.content.panel.subHeader.radioGroup",hasCustomLegend:!0,className:h.radioGroup},u.map(e=>E().createElement(cJ,{key:e.id,record:e,setSelectedItem:n,selectedItem:t,isSearchPanelOpen:o,hideCategoryColumn:v,isRoot:a,loadCourseContents:i})),g))):E().createElement(k.AnalyticsTypography,{variant:"h4",component:"p",className:h.onRecordsContent},l("courseLink.contentPanel.emptyItemsState"))}),c1=(e,t,n)=>{let i=(0,T.q)(),s="";return e||(s=t?i("courseLink.contentPanel.header.searchResults",{loadedResults:n,totalResults:t}):`${i("courseLink.emptyState.zeroResultsHeader")}. ${i("courseLink.emptyState.zeroResultsMessage")}`),s},c2=({getCourseContentChildren:e,setSelectedCourseItem:t,selectedCourseItem:n,createInRoot:i})=>{var s;let r=cc(i),[o,a]=(0,S.useState)(r),{isLoading:l,data:c,loadContents:d,loadMoreContents:u}=c$(e,!0),p=()=>{u(o).then(e=>e&&a(e))},{items:m,paging:h}=c,g=(0,S.useMemo)(()=>cL(h),[h]),f=c1(!h,null!==(s=null==h?void 0:h.count)&&void 0!==s?s:0,m.length);return E().createElement(E().Fragment,null,E().createElement(cb,{criteriaConfig:{currentFilterState:o,onSearchClick:e=>{d(e).then(e=>e&&a(e))}},createInRoot:i},(i,s)=>{var r;return E().createElement(cx,{isSearchPanelOpen:s,openSearchPanel:i,totalResults:null!==(r=null==h?void 0:h.count)&&void 0!==r?r:0,loadedResults:m.length,initialState:!h,isLoading:l},E().createElement(ep,{value:0},E().createElement(c0,{loadCourseContents:e,records:m,setSelectedItem:t,selectedItem:n,loadMoreData:p,hasMore:g,isSearchPanelOpen:s,isRoot:!0})))}),E().createElement(k.AnalyticsOffScreenAnnouncement,{type:"polite",analyticsId:"courseLink.contentPanel.header.offScreenAnnouncement",message:f,changeTrigger:1}))},c3=(0,G.makeStyles)(e=>({contentLinkTabs:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.palette.border.main}}));(u=C||(C={})).WebLink="webLink",u.CourseLink="courseLink";let c9={id:C.WebLink,displayKey:"courseCore.course.courseLinks.webLinkTabLabel"},c4={id:C.CourseLink,displayKey:"courseCore.course.courseLinks.courseLinkTabLabel"},c7=[c9,c4],c5=e=>{let{onChange:t,value:n}=e,i=c3(),s=(0,T.q)(),r=(0,D.gH)("courseCore.course","courseCore.organization");return E().createElement("div",{className:i.contentLinkTabs},E().createElement(k.AnalyticsTabs,{onChange:(e,n)=>t(n),value:n,analyticsId:"contentlink.tabs"},c7.map(e=>E().createElement(k.AnalyticsTab,{analyticsId:`contentlink.tab.${e.id}`,key:e.id,value:e.id,label:s(r(e.displayKey)),id:`tab-${e.id}`,"aria-controls":`tabpanel-${e.id}`}))))},c6=e=>{var t,n,i;let{courseId:s}=e,r=(0,D.nW)(s,U.XF0.CourseRoster),o=null!==(t=null==r?void 0:r.toolEnabledSetting.isAvailable)&&void 0!==t&&t,a=null!==(n=null==r?void 0:r.toolEnabledSetting.isLocked)&&void 0!==n&&n,l=(0,D.oz)(s,U.XF0.CourseRoster),c=null!==(i=(0,D.J1)(s,["course.configure-tools.EXECUTE"]))&&void 0!==i&&i,d=(0,D.J1)(s,["course.user.VIEW"]);return d&&r?S.createElement(sZ.Fq,{groupSetVisibility:o,onVisibilityChanged:l,disabled:!(!a&&c),analyticsId:"course.roster.visibility.button",borderless:!0}):null},c8=(0,G.makeStyles)(()=>(0,G.createStyles)({modalContent:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},iframeContainer:{display:"flex",height:"100vh"},loadingIframeContainer:{display:"none"},warningBanner:{position:"relative",top:0,left:0,right:0}}));var de=n(133814),dt=n(210653);let dn=e=>{let[t,n]=(0,S.useState)(!1),[i,s]=(0,S.useState)(!1),r=(0,T.q)(),o=c8();return(0,S.useEffect)(()=>{let e=setTimeout(()=>{s(!0)},3e3);return()=>{clearTimeout(e)}},[]),E().createElement(E().Fragment,null,i&&E().createElement(dt.m,{key:`${e.title}-banner`,className:o.warningBanner,severity:"info",icon:E().createElement(M.Information,null),actions:[E().createElement(de.i,{key:`${e.title}-openInNewWindow-button`,onClick:()=>{window.open(e.initialIframeSrc,"_blank"),w.Nd.leavePeekState()},analyticsId:"courseCore.course.webLinkLaunchFrame.openInNewWindow"},r("courseCore.course.webLinkLaunchFrame.openInNewWindow")),E().createElement(ts.AnalyticsIconButton,{key:`${e.title}-close-button`,onClick:()=>{s(!1)},analyticsId:"course.launch.frame.close.button"},E().createElement(M.Close,null))]},r("courseCore.course.webLinkLaunchFrame.warning")),E().createElement("div",{className:o.modalContent},!t&&E().createElement("div",null,E().createElement(k.AnalyticsCircularProgress,{id:"url.launchFrame.loading",label:r("courseCore.course.webLinkLaunchFrame.loading"),ariaLabel:"url.launchFrame.loading",size:"small"}),E().createElement("div",{className:"sr-only",role:"status","aria-live":"polite"},r("courseCore.course.webLinkLaunchFrame.loading"))),E().createElement("iframe",{onLoad:()=>{n(!0)},id:"url-launch-iframe",name:"url-launch-iframe",allow:"geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *",src:e.initialIframeSrc,title:e.title,className:(0,I.Z)(e.className,o.iframeContainer,{[o.loadingIframeContainer]:!t})})))};function di(e){return"none"===e?"courseCore.generate.modulePrefix.none":`courseCore.generate.modulePrefix.${e.toLowerCase()}`}function ds(e){return"none"===e?null:di(e)}function dr(e,t,n,i){if(null===t)return i;let s=e(t);return e("courseCore.generate.moduleName",{prefix:s,number:n,title:function(e,t){let n=Object.values(U.Vie).map(t=>e(ds(t))),i=function(e){let t=e.join("|");return RegExp(`^(${t})\\s+\\d+\\s*[-:]?\\s*`,"i")}(n);return t.replace(i,"")}(e,i)})}let da=["none",...Object.values(U.Vie)],dl=({analyticsId:e,className:t,onGenerate:n})=>{let[i,s]=(0,S.useState)(""),[r,o]=(0,S.useState)("none"),[a,l]=(0,S.useState)(!0),[c,d]=(0,S.useState)(10),[u,p]=(0,S.useState)(4),m=(0,ee.pH)(),h=(0,ee.fp)(),{formatNumber:g,translate:f}=(0,ea.h)(),b=(0,D.tx)(),v=eD(),y=(0,D.$M)(v),C=(0,tj.zX)(()=>{n({count:u,type:"none"===r?void 0:r,academicLevel:c,createImages:y.canGenerateThumbnails&&a,description:i})});return(0,S.useEffect)(()=>{C()},[C]),E().createElement("div",{className:(0,I.Z)(m.inputPanelRoot,t)},E().createElement(k.AnalyticsTypography,{variant:"h2"},f("courseCore.generate.form.header")),E().createElement(k.AnalyticsTextField,{analyticsId:`${e}.description`,label:f("courseCore.generate.form.description"),placeholder:b("courseCore.generate.form.descriptionPlaceholder"),onChange:e=>s(e.target.value),multiline:!0,rows:6,value:i}),E().createElement(k.AnalyticsTextField,{analyticsId:`${e}.type`,className:m.generateInputRow,select:!0,label:f("courseCore.generate.form.title"),value:r,onChange:e=>{o(e.target.value)}},da.map(t=>E().createElement(k.AnalyticsMenuItem,{analyticsId:`${e}.type.item`,button:!0,key:t,value:t},f(di(t))))),y.canGenerateThumbnails&&E().createElement(k.AnalyticsFormControlLabel,{analyticsId:`${e}.images.label`,label:f("courseCore.generate.form.includeImages"),htmlFor:"generate-modules-create-images",className:(0,I.Z)(h.checkboxMarginFix,m.generateInputRow),checked:a,control:E().createElement(k.AnalyticsCheckbox,{analyticsId:`${e}.images.checkbox`,value:"checkbox",id:"generate-modules-create-images",onChange:e=>l(e.target.checked)})}),E().createElement(ee.av,{analyticsId:`${e}.complexity`,className:m.generateInputRow,label:f("courseCore.generate.form.complexity"),minLabel:f("courseCore.generate.form.complexityLow"),maxLabel:f("courseCore.generate.form.complexityHigh"),step:1,min:1,max:10,valueLabelDisplay:"off",value:c,onValueChange:e=>d(e)}),E().createElement(ee.av,{className:m.generateInputRow,analyticsId:`${e}.moduleCount`,label:f("courseCore.generate.form.moduleCount"),minLabel:g(1),maxLabel:g(20),step:1,min:1,max:20,valueLabelDisplay:"auto",value:u,onValueChange:e=>p(e)}),E().createElement(k.AnalyticsPrimaryButton,{analyticsId:`${e}.generate`,className:(0,I.Z)(m.submitGenerate,m.generateInputRow),startIcon:E().createElement(M.Refresh,null),onClick:C},f("courseCore.generate.form.generateButton")))},dc=(0,G.makeStyles)(e=>(0,G.createStyles)({generatedLearningModule:{display:"flex"},thumbnailContainer:{marginRight:"10px",[e.breakpoints.up("sm")]:{marginRight:"20px"}},thumbnailSkeleton:{borderRadius:"3px",flexShrink:0},contentItemTitle:{whiteSpace:"normal"},moduleDescription:{marginTop:"10px"},learningModuleDetails:{display:"flex",flexDirection:"column"}})),dd=(0,G.makeStyles)(e=>({thumbnail:{borderRadius:"3px",width:"44px",aspectRatio:"auto 256 / 256",maxWidth:"none",[e.breakpoints.up("sm")]:{width:"150px"}},thumbnailSkeleton:{width:"44px",height:"44px",borderRadius:"3px",[e.breakpoints.up("sm")]:{width:"150px",height:"150px"}},hideImage:{display:"none"}})),du=e=>{let{item:t,classes:n,showSkeleton:i=!1}=e,s=dd(),[r,o]=(0,S.useState)(!1),a=t.thumbnailImage,l=!r||i;return a||i?E().createElement("div",{className:null==n?void 0:n.container},l&&E().createElement(G.Skeleton,{className:s.thumbnailSkeleton,variant:"rect"}),E().createElement("img",{role:"presentation",className:(0,I.Z)({[s.hideImage]:l},s.thumbnail,null==n?void 0:n.image),src:a,onLoad:()=>{o(!0)}})):null},dp=e=>{let{item:t,index:n}=e,{thumbnail:i}=t,s=dc(),r=(0,T.q)(),[o,a]=(0,S.useState)(),[l,c]=(0,S.useState)(!1);(0,S.useEffect)(()=>{async function e(){try{let e=await i;a(e)}catch(e){c(!0)}}i&&e()},[i]);let d=i&&!o&&!l;return E().createElement("div",{className:s.generatedLearningModule},E().createElement(du,{item:{thumbnailImage:o},classes:{container:s.thumbnailContainer},showSkeleton:d}),E().createElement("div",{className:s.learningModuleDetails},E().createElement(iW,{className:s.contentItemTitle,id:`generated-learning-module-preview-title-${n}`,analyticsId:`generated.learning.module.preview.item.${n}`,readOnly:!0},dr(r,t.titlePrefixKey,n+1,t.title)),E().createElement("div",{className:s.moduleDescription},t.description)))},dm=e=>{let{showConfirmationModal:t,onCancel:n,onConfirmation:i}=e,s=(0,T.q)(),r=(0,D.tx)(),o=`${e.analyticsId}.cancel-unsaved.dialog`,a="cancel-unsaved.dialog-title";return S.createElement(X._X,{analyticsId:o,open:t,onClose:n,"aria-labelledby":a},S.createElement(k.AnalyticsDialogTitle,{analyticsId:`${o}.title`,id:a,onClose:n},s("courseCore.generate.discardModal.title")),S.createElement(k.AnalyticsDialogContent,{analyticsId:`${o}.content`},S.createElement(k.AnalyticsDialogContentText,{analyticsId:`${o}.body`},r("courseCore.generate.discardModal.description"))),S.createElement(k.AnalyticsDialogActions,{analyticsId:`${o}.actions`},S.createElement(k.AnalyticsDefaultButton,{analyticsId:`${o}.cancel.button`,onClick:n},s("courseCore.generate.discardModal.cancel")),S.createElement(k.AnalyticsPrimaryButton,{analyticsId:`${o}.confirmation.button`,onClick:i},s("courseCore.generate.discardModal.confirm"))))},dh=async(e,t,n,i)=>{var s;let{images:r}=await (0,P.W3l)(n,{name:e,description:t,count:1},i);return null===(s=r[0])||void 0===s?void 0:s.url};async function dg(e,t,n){let{createImages:i,...s}=n,r=await (0,P.cUf)(t,s,e.signal),o=function(e,t){var n;let i=ds(null!==(n=t.type)&&void 0!==n?n:"none");return e.map(({thumbnail:e,...t})=>{let n={...t,thumbnail:void 0,titlePrefixKey:i,key:t.title,label:t.title};return n})}(r.outline,n);return n.createImages?o.map(n=>({...n,thumbnail:dh(n.title,n.description,t,e.signal)})):o}let df=e=>{let{courseId:t,parentId:n,module:i,positionBefore:s,positionAfter:r}=e,o={contentDetail:{[P.GQk.LearningModule.toString()]:{isLesson:!0,isSequential:!1}},contentHandler:P.GQk.LearningModule,courseId:t,parentId:n,title:i.title,description:i.description,isAvailable:!1,aiState:U.RbW.Yes,positionBefore:s,positionAfter:r};return o};async function db(e){try{return await e}catch(e){return}}async function dv(e){let t;let{createLearningModule:n,selectedModules:i,courseId:s,parentId:r,positionBefore:o,positionAfter:a}=e,l=a,c="start"===o;for(let{thumbnail:e,...a}of i){c?(t=df({courseId:s,parentId:r,module:a,positionBefore:o,positionAfter:void 0}),c=!1):t=df({courseId:s,parentId:r,module:a,positionBefore:void 0,positionAfter:l}),e&&(t.thumbnailImage=await db(e));let i=await n(t);l=Object.keys(i.contents)[0]}}let dy=e=>{let{courseId:t,parentId:n,positionBefore:i,positionAfter:s}=e,r=(0,T.q)(),o=(0,D.Lx)(),a=(0,S.useCallback)(async e=>o(P.Nwg.content.createContent(e)),[o]),l=(0,S.useCallback)(async e=>{let o=e.map((e,t)=>({...e,title:dr(r,e.titlePrefixKey,t+1,e.title)}));await dv({createLearningModule:a,selectedModules:o,courseId:t,parentId:n,positionBefore:i,positionAfter:s})},[a,t,n,i,s,r]);return l},dC=async e=>{let t=e.map(async e=>{try{return await e.thumbnail}catch(e){return e}}),n=await Promise.all(t);return n.some(e=>e instanceof P._LW)},dS=({courseId:e,parentId:t,courseName:n,onOutlineGenerated:i})=>{var s,r;let o=null!==(s=(0,D.Kx)("positionBefore"))&&void 0!==s?s:"",a=null!==(r=(0,D.Kx)("positionAfter"))&&void 0!==r?r:"",l="outline.generate",c=(0,T.q)(),d=(0,D.tx)(),u=(0,ee.Ke)(),{enqueueSnackbar:p}=(0,ee.Ds)(ee.VW.ContentGenerated,!1),{status:m,fetch:h}=(0,ec.UY)((t,n)=>dg(t,e,n)),[g,f]=(0,S.useState)(null),[b,v]=(0,S.useState)([]),[y,C]=(0,S.useState)(!0),I=dy({courseId:e,parentId:t,positionBefore:o,positionAfter:a}),A=(0,S.useCallback)(e=>{v(e)},[]),x=m===ec.Gu.Completed&&null!==g,[P,G]=(0,S.useState)(!1),{isCloseInterrupted:R,cancelClose:B,doClose:L}=(0,w.YK)(!P&&m!==ec.Gu.Errored),N=async()=>{if(!P)try{G(!0),await I(b),i(),w.Nd.leavePeekState()}catch(e){p({snackbarMessage:c("courseCore.generate.saveFailed"),icon:E().createElement(M.AlertError,null)}),G(!1)}},O=async e=>{v([]),f(null),C(!0);let t=await h(e);t&&f(t)};return(0,S.useEffect)(()=>{(async function(){if(g){let e=await dC(g);e||C(!1)}})()},[g]),E().createElement(E().Fragment,null,E().createElement(ee.hu,{fixedHeader:!0,header:E().createElement(ee.YI,{headerText:c("courseCore.generate.header"),subHeaderText:n,analyticsIdPrefix:`${l}.header`,showMenuToggleButton:!0,readyToFocus:!1})},E().createElement("div",{className:u.generatedContentLayout},E().createElement(dl,{analyticsId:`${l}.form`,className:u.inputPanelPosition,onGenerate:O}),E().createElement("div",{className:u.generatedContentPreviewRoot},m===ec.Gu.Errored?E().createElement(sE.m,{severity:"error",icon:E().createElement(M.Attention,null)},c("courseCore.generate.error")):null,m===ec.Gu.Loading?E().createElement("div",{className:u.generatingContentProgress},E().createElement(k.AnalyticsCircularProgress,{id:"course-structure-loading",label:c("courseCore.generate.loading")})):null,x?E().createElement(ee.Cl,{analyticsId:`${l}.preview`,generatedItems:g,onSelectionChanged:A,renderItem:(e,t)=>E().createElement(dp,{item:e,index:t})}):null),E().createElement(ee.jH,{className:u.generatedContentPanelFooter},g&&E().createElement("div",{className:u.panelFooterWarning},E().createElement(M.Warning,null),c("courseCore.generate.warning")),E().createElement(k.AnalyticsDefaultButton,{analyticsId:`${l}.cancel`,onClick:()=>{w.Nd.leavePeekState()}},c("global.cancel")),E().createElement(k.AnalyticsPrimaryButton,{analyticsId:`${l}.add.button`,disabled:0===b.length||P||y,onClick:N},d("courseCore.generate.save",{count:b.length}))))),R?E().createElement(dm,{showConfirmationModal:R,onCancel:B,onConfirmation:L,analyticsId:`${l}.discard-dialog`}):null)}},517216:function(e,t,n){"use strict";n.d(t,{FX:function(){return s},T$:function(){return l},X6:function(){return c},dW:function(){return a},eu:function(){return d}});var i=n(523984);let s="bb-embedded-html",r={autoResize:!0},o={autoResize:i.i},a=e=>new DOMParser().parseFromString(e,"text/html"),l=(e,t=r)=>{let n="";for(let[e,i]of Object.entries(t))i&&e in o&&(n+=o[e].html().trim());return n+e},c=e=>{let t=a(e);if("bb-no-alternate-domain"===t.body.id)throw Error("No alternate domain is configured.");let n=t.getElementsByClassName(s),i=e;for(let e=0;e<n.length;e++)i=i.replace(n[e].outerHTML,"");return i},d=(e,t=r)=>{let n=[];for(let[i,s]of Object.entries(t)){let t=!!s&&i in o&&o[i].listener;t&&n.push(t(e))}return n}},780687:function(e,t,n){"use strict";n.d(t,{X6:function(){return i.X6},T$:function(){return i.T$},eu:function(){return i.eu},qC:function(){return d}});var i=n(517216),s=n(530361);let r=["action","background","cite","classid","codebase","data","formaction","longdesc","href","icon","manifest","poster","profile","src","usemap"],o=r.map(e=>`*[${e}]`).join(","),a=e=>{if(null===e)return null;try{return new URL(e)}catch(e){return null}},l=e=>r.some(t=>e.hasAttribute(t)&&!a(e.getAttribute(t))),c=e=>`<pre>${(0,s.encode)(e)}</pre>`,d=e=>{let t=(0,i.dW)(e),n=t.querySelectorAll(o),s=e;for(let e=0;e<n.length;e++){let t=n[e];if(l(t)){let e=t.outerHTML;s=s.replace(e,c(e))}}return s}},877017:function(e,t,n){"use strict";n.d(t,{Of:function(){return es},Ak:function(){return ep},yJ:function(){return j},X6:function(){return r},fC:function(){return eu},HY:function(){return o},eZ:function(){return ec}});var i,s,r,o,a=n(202784),l=n.n(a),c=n(906277),d=n(410628),u=n(755755),p=n(958299),m=n(394229),h=n(188505),g=n(579633),f=n(83202),b=n(281699);let v=(0,b.makeStyles)(()=>(0,b.createStyles)({editor:()=>({"& .bb-editor":{padding:0}}),actions:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingTop:"5px"},placeholder:{fontStyle:"italic"}})),y=l().forwardRef((e,t)=>{let{ariaLabelledBy:n,isReadOnly:i,placeholder:s,pluginsConfig:r,rawTextFeedback:o,onChange:a}=e,{getEmbedSrc:d,openCloudStorageIntegrationModal:u}=r,p=v(e),m=[(0,f.link)(),(0,f.image)(),(0,f.video)(),(0,f.math)({...r}),(0,f.insertLocalFile)({...r}),(0,f.videoEverywhere)({...r}),(0,f.insertYoutubeVideo)({getEmbedSrc:d,...r})];return u&&m.push((0,f.insertCloudStorageIntegrationFile)({openCloudStorageIntegrationModal:u,...r})),l().createElement("div",{ref:t,className:(0,c.Z)({[p.editor]:e.isReadOnly},e.className)},i&&!o?l().createElement("div",{className:p.placeholder,id:"feedback-placeholder"},s):l().createElement(f.BbEditor,{bbml:o,isReadOnly:i,placeholder:s,ariaLabelledBy:n,plugins:m,onChange:a}))});var C=n(398435);let S=(0,b.makeStyles)(()=>(0,b.createStyles)({collapsed:{overflow:"hidden",height:"136px",whiteSpace:"nowrap"},link:{padding:"10px 0px",display:"inline-block"},lineHeight:{lineHeight:1.6}})),E=e=>{let[t,n]=l().useState(!0),[i,s]=l().useState(!1),r=l().createRef(),o=e.isFeedbackEditable&&!e.isReadOnly,a=S(),u=(0,d.q)();l().useEffect(()=>{var e;s(!o&&(null===(e=null==r?void 0:r.current)||void 0===e?void 0:e.clientHeight)>136)},[e.isFeedbackEditable,e.isReadOnly,e.rawTextFeedback]);let p={showLessContentText:u("feedbackAuthoring.body.content.graderFeedback.showLessContent"),showMoreContentText:u("feedbackAuthoring.body.content.graderFeedback.showMoreContent")},m=l().useCallback(()=>n(!t),[t]),h=t?`${e.analyticsId}.showMoreContent`:`${e.analyticsId}.showLessContent`;return l().createElement(l().Fragment,null,l().createElement(y,{className:(0,c.Z)({[a.collapsed]:i&&t},a.lineHeight),ref:r,...e}),i&&l().createElement(C.AnalyticsLink,{className:a.link,onClick:m,analyticsId:h},t?p.showMoreContentText:p.showLessContentText))};var I=e=>{let{collapsible:t,...n}=e;return t?l().createElement(E,{...n}):l().createElement(y,{...n})};let w=(0,b.makeStyles)(()=>(0,b.createStyles)({actions:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingTop:"5px"},action:{margin:"3px"}})),A=e=>{let t=w(),{primary:n,className:i,...s}=e;return n?a.createElement(C.AnalyticsPrimaryButton,{className:(0,c.Z)("primary-action-button",t.action,i),...s}):a.createElement(C.AnalyticsDefaultButton,{className:(0,c.Z)("default-action-button",t.action,i),...s})},k=e=>{let t=w();return e.children?a.createElement("div",{className:(0,c.Z)("feedback-editor-action-buttons",t.actions,e.className)},e.children):null},x=e=>{let t;let{analyticsId:n,onChange:i,peerReviewer:s,...r}=e,{rawTextFeedback:o,pluginsConfig:{onClickCancel:a,onClickSave:c}}=e,u=(0,d.q)(),p=!e.isReadOnly&&e.isFeedbackEditable,m=l().useCallback(()=>{!s&&t&&t(o),a()},[a]),h=l().useCallback(()=>{c()},[c]),g=l().useCallback(e=>{t=e.setPristine,i(e)},[i]),f=`${n}.feedbackEditor`,b={defaultButton:s?`${f}.saveDraft`:`${f}.cancel`,primaryButton:s?`${f}.submit`:`${f}.save`},v="feedbackAuthoring.body.content.graderFeedback.feedbackEditor",y={defaultButton:u(s?`${v}.draftLabel`:`${v}.cancelLabel`),primaryButton:u(s?`${v}.submitLabel`:`${v}.saveLabel`)};return l().createElement(l().Fragment,null,l().createElement(I,{analyticsId:f,...r,onChange:g}),p&&l().createElement(k,null,l().createElement(A,{analyticsId:b.defaultButton,onClick:m},y.defaultButton),l().createElement(A,{analyticsId:b.primaryButton,onClick:h,primary:!0},y.primaryButton)))};var T=n(438501);let P=(0,b.makeStyles)(e=>(0,b.createStyles)({graderDetails:{display:"flex",flexDirection:"row",marginBottom:"20px"},avatarWrapper:{marginRight:"10px"},nameAndDate:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",overflow:"hidden"},graderAttrs:{display:"flex",flexDirection:"column"},personalizationAndDate:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-between"},pronunciation:{display:"inline-flex",alignItems:"center",margin:"0 -5px","& > span":{padding:"0 5px",fontWeight:e.typography.fontWeightRegular},"& $pronunciationAudio":{"& > button":{minWidth:0,minHeight:0,padding:"2px 5px 0"}}},pronunciationAudio:{},name:{color:e.palette.text.primary,fontWeight:e.typography.fontWeightSemiBold},date:{color:e.palette.text.hint,"&$dateLate":{color:e.palette.error.main}},dateLate:{},dateWrapper:{display:"flex",justifyContent:"flex-end"},fromCurrentStudentNameAndDate:{[e.breakpoints.up("sm")]:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},visibilityIcons:{height:"16px",width:"16px"}})),D=(0,b.makeStyles)(e=>(0,b.createStyles)({fromCurrentStudentName:{minWidth:"fit-content",[e.breakpoints.up("sm")]:{flex:1}}}));var G=n(470269);let R=e=>{let[t,n]=(0,a.useState)("#");return(0,a.useEffect)(()=>{G.Nd.getPeekHref((0,G.IN)(e)).then(e=>{n(e)})},[e]),t},B=e=>{let{attemptId:t,isAnonymous:n,reviewee:i,reviewer:s}=e,r=(0,d.q)(),o=R({deepLinkAttemptId:t,...n?{peerIndex:i}:null}),a=l().createElement(C.AnalyticsLink,{className:(0,c.Z)("js-submission-deep-link",{"js-anonymous-deep-link":n}),href:o,analyticsId:"course.grades.submissions-deep-link"},r(n?"feedbackAuthoring.body.content.graderFeedback.anonymousRevieweesSubmission":"feedbackAuthoring.body.content.graderFeedback.revieweesSubmission",{reviewee:i})),u=D();return l().createElement("span",{className:(0,c.Z)(u.fromCurrentStudentName,"js-grader-title")},r("feedbackAuthoring.body.content.graderFeedback.reviewerReviewedRevieweeDeepLink",{reviewer:s,revieweesSubmission:a}))},L=(0,b.makeStyles)(e=>(0,b.createStyles)({editIcon:{color:e.palette.text.secondary,minHeight:"16px",minWidth:"16px","&:hover":{color:e.palette.text.primary}}})),N=l().forwardRef((e,t)=>{let{analyticsId:n,editFeedbackCallback:i,ariaLabel:s}=e,r=(0,d.q)(),o=null!=s?s:r("feedbackAuthoring.body.content.editAriaLabel"),a=L();return l().createElement(p.AnalyticsIconButton,{analyticsId:`${n}.content.edit`,className:(0,c.Z)("js-edit-feedback-icon",a.editIcon),onClick:i,"aria-label":o,ref:t},l().createElement(T.Edit,null))});var O=n(555342);let M=e=>{var t;let n;let{attemptId:i,analyticsId:s,grader:r,userBeingGraded:o,ariaLabelledBy:a,rawTextFeedback:d,editorIsReadOnly:f,editorPlaceholder:b,attemptLastGradedDate:v,late:y,isFeedbackEditable:C,editorConfigProps:S,onFeedbackChange:E,isFeedbackFromCurrentStudent:I,showFeedbackVisibilityToggle:w,isFeedbackVisible:A,onClickChangeVisibility:k,onClickEdit:D,listIndex:G,isPeerGrading:R,showAnonymousWhenNoUserData:L,currentUserHasEnterFeedbackEntitlement:M}=e,$=P(),{formatUsername:H,formatDatetime:F,translate:U}=(0,u.h)(),V=d&&""!==d,_=r||o,q=v&&V,z=(_||L)&&V&&f,W=z&&!I&&(null==r?void 0:r.pronouns),j=z&&!I&&(null==r?void 0:r.pronunciation),Z=C&&f&&S.peerReviewer,K=l().useMemo(()=>A?U("feedbackAuthoring.body.content.graderFeedback.feedbackVisibleToStudent"):U("feedbackAuthoring.body.content.graderFeedback.feedbackHiddenFromStudent"),[A,U]),X=l().useMemo(()=>{if(!r)return"";let e=H(r,g.ILocaleUsernameFormat.Short);return U("feedbackAuthoring.body.content.graderFeedback.hideFeedbackFromStudentWithName",{grader:e})},[r,H,U]),Y=(e,t,n=!1)=>l().createElement(B,{attemptId:i,isAnonymous:n,reviewee:t,reviewer:e});return l().createElement("div",{className:"js-grader-feedback"},l().createElement("div",{className:$.graderDetails},z&&l().createElement("div",{className:$.avatarWrapper},((e,t)=>{let n=I?t:e;return(null==n?void 0:n.avatarUrl)?l().createElement(m.G,{size:"medium",src:n.avatarUrl,"aria-hidden":!0,className:"non-anonymous-avatar"}):l().createElement(m.G,{size:"medium","aria-hidden":!0,className:"anonymous-avatar"})})(r,o)),(z||q)&&l().createElement("div",{className:I?(0,c.Z)($.nameAndDate,$.fromCurrentStudentNameAndDate):$.nameAndDate},z&&(()=>{if(R){if(I){let e=U("feedbackAuthoring.body.content.graderFeedback.droppedStudent"),t=M&&!r?e:H(r,g.ILocaleUsernameFormat.Short);if(M){let n=o?H(o,g.ILocaleUsernameFormat.Short):e;return Y(t,n)}return Y(t,G,!0)}if(!r)return M?l().createElement("div",{className:(0,c.Z)($.name,"js-grader-title","js-dropped-student-peer-number")},U("feedbackAuthoring.body.content.graderFeedback.droppedStudentWithNumber",{number:G})):l().createElement("div",{className:(0,c.Z)($.name,"js-grader-title","js-name-peer-number")},U("feedbackAuthoring.body.content.graderFeedback.peerReviewWithNumber",{number:G}))}return l().createElement("div",{className:(0,c.Z)($.name,"js-grader-title")},H(r,g.ILocaleUsernameFormat.Short))})(),l().createElement("div",{className:$.personalizationAndDate},l().createElement("div",{className:(0,c.Z)($.graderAttrs)},j&&l().createElement("span",{className:$.pronunciation},l().createElement("span",null,r.pronunciation),(null===(t=r.pronunciationAudio)||void 0===t?void 0:t.permanentUrl)&&l().createElement(O.zi,{className:$.pronunciationAudio,src:r.pronunciationAudio.permanentUrl,analyticsId:"graderFeedback.pronunciation"})),W&&l().createElement("span",null,r.pronouns)),q&&(n=F(new Date(v),g.ILocaleDatetimeFormat.Short),y&&(n=U("feedbackAuthoring.body.content.graderFeedback.lastGradedLate",{dateGraded:n})),l().createElement("div",{className:$.dateWrapper},l().createElement("div",{className:(0,c.Z)($.date,{[$.dateLate]:y})},n))))),Z&&l().createElement(N,{editFeedbackCallback:D,analyticsId:s}),w&&l().createElement(h.AnalyticsTooltip,{title:K,className:"js-visibility-tooltip",analyticsId:`${s}.graderFeedback.visibilityTooltip`,placement:"top-end"},l().createElement(p.AnalyticsIconButton,{analyticsId:`${s}.graderFeedback.visibilityIcon`,"aria-pressed":!A,"aria-label":X,className:(0,c.Z)($.visibilityIcons,A?"visible-icon":"invisible-icon"),onClick:()=>null==k?void 0:k()},A?l().createElement(T.Visible,null):l().createElement(T.Invisible,null)))),l().createElement(x,{analyticsId:`${s}.graderFeedback`,rawTextFeedback:d,ariaLabelledBy:a,isReadOnly:f,placeholder:b,onChange:E,pluginsConfig:S,isFeedbackEditable:C,peerReviewer:S.peerReviewer,collapsible:!0}))};var $=n(998426);let H=(0,$.ZL)(e=>(0,$.kc)({list:{listStyle:"none",margin:0},listItem:{paddingBottom:"12px",borderBottom:`1px solid ${e.palette.border.main}`,marginBottom:"12px"}})),F=e=>{let{analyticsId:t,configProps:n,secondaryGradersFeedback:i,showFeedbackVisibilityToggle:s}=e,r=H(),{isPeerGrading:o,currentUserHasEnterFeedbackEntitlement:a,editorConfigProps:c}=n,d=i.map(e=>l().createElement("li",{className:r.listItem,key:e.id},l().createElement(M,{analyticsId:t,...e,editorIsReadOnly:!0,ariaLabelledBy:"secondary-feedback-title",editorConfigProps:c,showFeedbackVisibilityToggle:s,isPeerGrading:o,currentUserHasEnterFeedbackEntitlement:a})));return l().createElement("ul",{className:r.list},d)},U=(0,b.makeStyles)(e=>(0,b.createStyles)({container:{marginTop:"28px"},primaryContainer:{display:"flex",justifyContent:"space-between",marginBottom:"14px"},primaryTitle:{fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightSemiBold,margin:0},secondaryContainer:{marginTop:"37px"},secondaryTitle:{fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightSemiBold}})),V=e=>{let t,n;let{analyticsId:i,feedbackContentType:s,primaryGraderFeedback:r,secondaryGradersFeedback:o,configProps:{isPeerGrading:a,currentUserHasEnterFeedbackEntitlement:u,primaryFeedbackConfigProps:p,isOrganization:m,editorConfigProps:h,showFeedbackVisibilityToggle:g}}=e,f=(0,d.q)(),b=U(),{editorPlaceholder:v,onClickEdit:y,editorIsReadOnly:C,showPeerReviewerSpecificText:S}=p,E=null==r?void 0:r.isFeedbackEditable,I=o&&o.length>0,w=m?"organization":"course",A=E?"feedbackEditable":"feedbackNotEditable",k=a?"feedbackAuthoring.body.content.peerGraders.secondaryGradersTitle":"feedbackAuthoring.body.content.secondaryGradersTitle",x="organization"===w?`${w}`:`${w}.${s}`,T=h.peerReviewer,P=I&&!T,D=!I&&a&&!T,G=E&&C&&!T,R=f("feedbackAuthoring.body.content.noReviewsByOthers"),B=f("feedbackAuthoring.body.content.primaryGraderTitle.course.peerReviewerSubtitle"),L=f(k);return r&&(t=f(S&&!T?"feedbackAuthoring.body.content.primaryGraderTitle.student":`feedbackAuthoring.body.content.primaryGraderTitle.${x}`),n=v||f(S&&T?"feedbackAuthoring.body.content.editorPlaceholder.reviewer":`feedbackAuthoring.body.content.editorPlaceholder.${A}.${w}`)),l().createElement("div",{className:(0,c.Z)("js-feedback-content-container",b.container)},r&&l().createElement("div",{className:(0,c.Z)("js-feedback-content-primary-container",b.primaryContainer)},l().createElement("h3",{id:"primary-feedback-title",className:b.primaryTitle},t),G&&l().createElement(N,{editFeedbackCallback:y,analyticsId:i})),T&&l().createElement("p",{className:"js-peer-reviewer-subtitle"},B),r&&l().createElement(M,{...r,...p,analyticsId:`${i}.content.primaryFeedback`,ariaLabelledBy:"primary-feedback-title",editorPlaceholder:n,editorConfigProps:h,isPeerGrading:a}),P&&l().createElement("div",{className:b.secondaryContainer},l().createElement("h3",{className:b.secondaryTitle},L),l().createElement(F,{analyticsId:`${i}.content.secondaryFeedback`,secondaryGradersFeedback:o,configProps:{isOrganization:m,isPeerGrading:a,currentUserHasEnterFeedbackEntitlement:u,editorConfigProps:h,secondaryFeedbackConfigProps:{title:L}},showFeedbackVisibilityToggle:g})),D&&l().createElement("div",{className:(0,c.Z)("js-empty-secondary-feedback-section",b.secondaryContainer)},l().createElement("h3",{className:b.secondaryTitle},L),R))};var _=n(146115);let q=(0,b.makeStyles)(e=>(0,b.createStyles)({feedbackBody:{paddingLeft:"16px",paddingRight:"16px",paddingBottom:"0 !important",paddingTop:0,[e.breakpoints.up("sm")]:{paddingLeft:0,paddingRight:0}},feedbackTabs:{margin:"0 -30px",display:"flex",backgroundColor:e.palette.background.b2,borderBottom:`1px solid ${e.palette.border.main}`,"& $tabButton":{flex:1,margin:0,padding:0,height:"45px",transition:"background-color 200ms ease-out","&:before":{borderBottom:"none"},"&:hover":{backgroundColor:e.palette.background.b3},'&[aria-selected="true"]':{backgroundColor:e.palette.background.default,"&:before":{left:0,right:0,borderBottom:`4px solid ${e.palette.brand.main}`}},"&:first-child":{borderRight:`1px solid ${e.palette.border.main}`},"&:only-child":{borderRight:"0"}}},tabButton:{}}));(i=r||(r={})).General="GENERAL",i.Individual="INDIVIDUAL";let z=e=>{let{analyticsId:t,configProps:{initialSelectedTabKey:n,isFeedbackForGroupSubmission:i,...s},...o}=e,a=(0,d.q)(),u=q(),p=n||r.General,m=l().createElement(V,{analyticsId:`${t}.feedbackBody`,configProps:{...s},feedbackContentType:n===r.General?"group":"individual",...o}),h=t=>{let{configProps:{onGroupTabChange:n}}=e;n&&n(t)};return l().createElement("div",{className:u.feedbackBody},i?l().createElement(l().Fragment,null,l().createElement(C.AnalyticsTabs,{value:p,className:(0,c.Z)("js-feedback-tabs",u.feedbackTabs),analyticsId:`${t}.feedbackBody.tabs`},l().createElement(C.AnalyticsTab,{label:a("feedbackAuthoring.body.groupTab"),value:r.General,className:u.tabButton,analyticsId:`${t}.feedbackBody.group`,onClick:()=>h(r.General)}),l().createElement(C.AnalyticsTab,{label:a("feedbackAuthoring.body.individualTab"),value:r.Individual,className:u.tabButton,analyticsId:`${t}.feedbackBody.individual`,onClick:()=>h(r.Individual)})),l().createElement(_.x,{panelId:p,ariaLabelledby:p},m)):m)};var W=n(228357);let j=e=>{let{analyticsId:t,configProps:n,secondaryGradersFeedback:i}=e,s=(0,d.q)(),r={noReviewsForStudent:s("feedbackAuthoring.body.content.noReviewsForStudent")};return l().createElement(W.Q,{theme:"light"},i.length>0&&l().createElement(F,{configProps:n,secondaryGradersFeedback:i,analyticsId:`${t}.feedbackList.secondaryFeedback`}),0===i.length&&n.isPeerGrading&&l().createElement("div",{className:"js-feedback-list-no-reviews-for-student"},r.noReviewsForStudent))};var Z=n(927335);let K=e=>{let{analyticsId:t,onNavigateToNextFeedback:n,onNavigateToPreviousFeedback:i}=e,s=(0,d.q)();return l().createElement(l().Fragment,null,l().createElement(p.AnalyticsIconButton,{onClick:i,disabled:!i,"aria-label":s("feedbackAuthoring.header.previous"),analyticsId:`${t}.navigator.previous`},l().createElement(Z.ArrowLeft,null)),l().createElement(p.AnalyticsIconButton,{onClick:n,disabled:!n,"aria-label":s("feedbackAuthoring.header.next"),analyticsId:`${t}.navigator.next`},l().createElement(Z.ArrowRight,null)))},X=(0,$.ZL)(e=>(0,$.kc)({inlineNavigation:{height:"40px",marginTop:"28px",display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"15px",borderBottom:`1px solid ${e.palette.secondary.light}`,marginLeft:"-16px",marginRight:"-16px",[e.breakpoints.up("sm")]:{marginLeft:"-30px",marginRight:"-30px"}},inlineNavigationTitle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightSemiBold,fontSize:e.typography.fontSizeMedium,marginLeft:"18px"},inlineNavigationArrows:{whiteSpace:"nowrap",marginRight:"18px"}})),Y=e=>{let t=X(),{analyticsId:n,inlineConfigProps:i,primaryGraderFeedback:s,secondaryGradersFeedback:r}=e,o=`${n}.feedbackAuthoring.components`;return l().createElement("div",null,i.showNavigator&&l().createElement("div",{className:t.inlineNavigation},l().createElement("div",{className:t.inlineNavigationTitle,id:"inline-feedback-navigation-title"},i.navigationTitle),l().createElement("div",{className:t.inlineNavigationArrows},l().createElement(K,{onNavigateToNextFeedback:i.onNavigateToNextFeedback,onNavigateToPreviousFeedback:i.onNavigateToPreviousFeedback,analyticsId:o}))),l().createElement(z,{analyticsId:o,configProps:i,primaryGraderFeedback:s,secondaryGradersFeedback:r}))};var Q=n(608555);let J=()=>(0,b.createStyles)({overflowEllipsis:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),ee=(0,b.makeStyles)(e=>(0,b.createStyles)({feedbackHeader:t=>({"& .ms-Panel-header":{boxShadow:"none",[e.breakpoints.up("sm")]:{alignItems:"flex-end",minHeight:0,".header-actions":{margin:0,flex:0}},".ms-Panel-titles-container":{maxWidth:"100%",[e.breakpoints.up("sm")]:{position:"static"},".ms-Panel-subTitle":{...J().overflowEllipsis},".ms-Panel-headerText":{...J().overflowEllipsis,textAlign:"center",[e.breakpoints.up("sm")]:{textAlign:"start",fontSize:e.typography.fontSizeXXLarge,fontFamily:e.typography.fontFamilySerif,color:e.palette.primary.main}},".ms-Panel-content-right":{".is-disabled":{color:e.palette.secondary.light}}}},[e.breakpoints.up("sm")]:{"& .ms-Panel-commands":{backgroundColor:e.palette.background.default}}}),navigator:{"& .ms-Panel-header":{"& .ms-Panel-content-right":{"& .ms-Button":{color:e.palette.secondary.light,[e.breakpoints.up("sm")]:{color:"inherit"}},"& .is-disabled":{color:e.palette.text.disabled,[e.breakpoints.up("sm")]:{color:"inherit"}}},"& .ms-Panel-titles-container":{[e.breakpoints.only("xs")]:{position:"static",left:"90px",minWidth:"calc(100% - 180px)"},[e.breakpoints.up("sm")]:{maxWidth:"calc(100% - 76px)"}}}}})),et=e=>{let t=ee(e),n=(0,d.q)(),{configProps:{onNavigateToNextFeedback:i,onNavigateToPreviousFeedback:s,showNavigator:r},analyticsId:o,headerSubtitle:a,headerTitle:u}=e,p=`${o}.feedbackHeader`,m={title:u,smallHeaderTitle:a||n("feedbackAuthoring.header.smallTitle"),type:Q.BbPanelType.full,analyticsId:p,navMenuAriaLabel:n("global.navigationMenu")};return r&&(m.panelContentRight=l().createElement(K,{onNavigateToNextFeedback:i,onNavigateToPreviousFeedback:s,analyticsId:p})),l().createElement("header",{className:(0,c.Z)("panel-header","simple-header",t.feedbackHeader,{[t.navigator]:r})},l().createElement(Q.BbPanelHeader,{...m}))},en=(0,b.makeStyles)(e=>(0,b.createStyles)({container:{"&:before":{content:"",display:"block",height:"5px",left:"-1px",position:"absolute",right:"-1px",top:"-1px"}}})),ei=e=>{let t=en(),{analyticsId:n,panelConfigProps:i,primaryGraderFeedback:s,secondaryGradersFeedback:r,panelSubtitle:o,panelTitle:a}=e,d={showNavigator:i.showNavigator,onNavigateToNextFeedback:i.onNavigateToNextFeedback,onNavigateToPreviousFeedback:i.onNavigateToPreviousFeedback},u={isOrganization:i.isOrganization,initialSelectedTabKey:i.initialSelectedTabKey,isFeedbackForGroupSubmission:i.isFeedbackForGroupSubmission,primaryFeedbackConfigProps:i.primaryFeedbackConfigProps,onGroupTabChange:i.onGroupTabChange,editorConfigProps:i.editorConfigProps},p=`${n}.feedbackAuthoring.components`;return l().createElement("div",{className:(0,c.Z)("panel-wrap","course-color","js-feedback-panel-container",t.container,i.courseColorClass)},l().createElement(et,{analyticsId:p,configProps:d,headerTitle:a,headerSubtitle:o}),l().createElement(z,{analyticsId:p,configProps:u,primaryGraderFeedback:s,secondaryGradersFeedback:r}))},es=e=>{let{isInlineMode:t,configProps:n,...i}=e,{allowMultipleFeedbackNavigation:s,...r}=n,o={showNavigator:s,...r};return t&&(o.navigationTitle=i.panelTitle),l().createElement(l().Fragment,null,t?l().createElement(Y,{...i,inlineConfigProps:o}):l().createElement(ei,{...i,panelConfigProps:o}))},er=(0,b.makeStyles)(()=>(0,b.createStyles)({overallFeedbackEditor:{}})),eo=(0,b.makeStyles)(()=>(0,b.createStyles)({buttonsContainer:{display:"flex",justifyContent:"flex-end",marginTop:"11px"},saveChangesButton:{marginLeft:"10px"}})),ea="feedbackAuthoring.body.content.graderFeedback.feedbackEditor",el=e=>{let{isReadOnly:t,isSaveButtonDisabled:n,analyticsId:i,onCancel:s,onSave:r}=e,o=eo(),a=(0,d.q)();return l().createElement(l().Fragment,null,e.children,!t&&l().createElement("div",{className:o.buttonsContainer},l().createElement(C.AnalyticsDefaultButton,{onClick:s,analyticsId:`${i}.cancelButton`},a(`${ea}.cancelLabel`)),l().createElement(C.AnalyticsPrimaryButton,{onClick:r,analyticsId:`${i}.saveButton`,disabled:n,className:o.saveChangesButton},a(`${ea}.saveChangesLabel`))))},ec=e=>{let{rawTextFeedback:t,titleId:n,isReadOnly:i,isSaveButtonDisabled:s,pluginsConfig:r,analyticsId:o,onFeedbackTextChange:c}=e,{onClickCancel:u,onClickSave:p}=r,m=er(),h=(0,d.q)(),[g,f]=(0,a.useState)(t);return(0,a.useEffect)(()=>{i?f(t):f(void 0)},[i,t]),l().createElement(el,{isReadOnly:i,isSaveButtonDisabled:s,analyticsId:o,onCancel:u,onSave:p},l().createElement(y,{isReadOnly:i,pluginsConfig:r,placeholder:h("feedbackAuthoring.body.content.editorPlaceholder.overallFeedback"),ariaLabelledBy:n,rawTextFeedback:g,onChange:e=>{i||c(e)},className:m.overallFeedbackEditor}))};var ed=n(311822);(s=o||(o={})).UnsavedChanges="contentUnsavedChanges",s.SwitchView="contentSwitchView";let eu=e=>{let{contentType:t,exitCallback:n}=e,[i,s]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),c="feedbackAuthoring.body.content.overallFeedbackDialogModal",u="feedbackAuthoring.overallFeedbackConfirmationDialog",p=`${c}.header`,m=`${c}.${t}`,h=(0,d.q)(),g=(e=!1)=>{o(e),s(!0)};return l().createElement(ed._X,{analyticsId:u,"aria-labelledby":"overall-feedback-confirmation-dialog-heading-id",open:!i,TransitionProps:{onExited:()=>{n(r),s(!1)}},isAlert:!0},l().createElement(C.AnalyticsDialogTitle,{analyticsId:`${u}.title`,onClose:()=>g(),id:"overall-feedback-confirmation-dialog-heading-id",ariaDescribedby:"overall-feedback-confirmation-dialog-message-id"},h(p)),l().createElement(C.AnalyticsDialogContent,{analyticsId:`${u}.context`},l().createElement(C.AnalyticsDialogContentText,{analyticsId:`${u}.contextText`,id:"overall-feedback-confirmation-dialog-message-id"},h(m))),l().createElement(C.AnalyticsDialogActions,{analyticsId:`${u}.dialogAction`},l().createElement(C.AnalyticsDefaultButton,{analyticsId:`${u}.continueWorkingButton`,onClick:()=>g()},h(`${c}.continueWorkingButtonLabel`)),l().createElement(C.AnalyticsPrimaryButton,{analyticsId:`${u}.discardButton`,onClick:()=>g(!0)},h(`${c}.discardButtonLabel`))))},ep=({color:e="brand",isFeedbackAvailable:t,isDisabled:n=!1,iconProps:i,size:s="medium"})=>{let r=(0,b.useTheme)(),o={htmlColor:n||"brand"!==e?void 0:r.palette.brand.main,...i,color:n?"disabled":"brand"===e?void 0:e};if(t)switch(s){case"small":return l().createElement(T.Feedback,{"data-testid":"feedback-icon",...o});case"medium":return l().createElement(Z.Feedback,{"data-testid":"feedback-icon",...o})}switch(s){case"small":return l().createElement(T.AddFeedback,{"data-testid":"add-feedback-icon",...o});case"medium":return l().createElement(Z.AddFeedback,{"data-testid":"add-feedback-icon",...o})}},em=l().forwardRef((e,t)=>{let{onClickFeedbackToggle:n,isFeedbackExpanded:i,isOverallFeedbackDirty:s,isDisabled:r,isFeedbackAvailable:a,ariaControls:c,buttonId:u}=e,p=(0,d.q)(),m=p("feedbackAuthoring.header.overallFeedback"),{displayModal:h,modal:g}=(0,O.dd)(eu,{contentType:o.UnsavedChanges}),f=async()=>{if(s&&i){let{confirmed:e}=await h();e&&n(!1)}else n(!i)};return l().createElement(l().Fragment,null,l().createElement(C.AnalyticsTooltip,{analyticsId:"feedbackAuthoring.overallFeedbackView.attemptFeedbackToggle.tooltip",title:m,placement:"bottom"},l().createElement("div",null,l().createElement(C.AnalyticsIconButton,{disabled:r,id:u,analyticsId:"feedbackAuthoring.overallFeedbackView.attemptFeedbackToggle","aria-label":m,"aria-expanded":i,"aria-controls":i?c:void 0,onClick:f,ref:t},l().createElement(ep,{isDisabled:r,isFeedbackAvailable:a})))),g)});l().memo(em)},539210:function(e,t,n){"use strict";n.d(t,{bG:function(){return sJ},IQ:function(){return $},VG:function(){return s2},if:function(){return sG},Nh:function(){return F},XW:function(){return th},S_:function(){return sf},AZ:function(){return W},iY:function(){return t3},Qj:function(){return s6},SY:function(){return ah},uD:function(){return ra},z8:function(){return rc},Y3:function(){return rl},BH:function(){return r7},dJ:function(){return V},b$:function(){return U},Vn:function(){return aU},Bq:function(){return tg},vY:function(){return D},Dz:function(){return tC},SE:function(){return R},Ep:function(){return i6},bO:function(){return oZ},Gq:function(){return G},lS:function(){return iv},sb:function(){return oQ},vO:function(){return o2},kT:function(){return ab},nl:function(){return o6},CA:function(){return au},WJ:function(){return rN},k0:function(){return rx},t$:function(){return rD},dX:function(){return ne},r$:function(){return r_},Tj:function(){return rX},qZ:function(){return T},Lx:function(){return r9},z_:function(){return tS},sZ:function(){return t9},Jg:function(){return tv},cC:function(){return tu},jK:function(){return sZ},nv:function(){return t8},r:function(){return aF},Qn:function(){return a_},Sp:function(){return n9},ir:function(){return aO},$O:function(){return _},A0:function(){return r8},ZG:function(){return aM},aX:function(){return rU},cQ:function(){return az},vn:function(){return sY},TD:function(){return eY},M_:function(){return rr},b:function(){return rs},vG:function(){return eX},il:function(){return eq},pT:function(){return ez},$K:function(){return sM},xZ:function(){return sB},xB:function(){return aq},f_:function(){return s8},cK:function(){return s_},HM:function(){return sq},MK:function(){return s0},l:function(){return re},le:function(){return sD}});var i,s,r,o,a,l,c,d,u,p,m,h,g,f,b,v,y,C,S,E,I,w,A,k,x,T,P,D,G,R,B,L,N,O,M,$,H,F,U,V,_,q,z,W,j={};n.r(j),n.d(j,{GRADE_DEFAULT_POINTS:function(){return tP},GRADE_MAX_POINTS:function(){return tx},GRADE_MIN_POINTS:function(){return tT},GRADE_PILL_DEFAULT_BG_CLASS:function(){return tG},GRADE_POINTS_DECIMALS_RULE_1:function(){return tE},GRADE_POINTS_DECIMALS_RULE_2:function(){return tI},GRADE_POINTS_DECIMALS_RULE_3:function(){return tw},GRADE_POINTS_MAX_EDIT_DECIMALS:function(){return tA},GRADE_POINTS_MAX_EDIT_INTEGRALS:function(){return tk},GradeNumberDisplayRule1Format:function(){return tB},GradeNumberDisplayRule2Format:function(){return tL},GradeNumberDisplayRule3Format:function(){return tN},GradeNumberEditFormat:function(){return tO},GradePercentileColor:function(){return N},GradePillSizes:function(){return L},GradeUnits:function(){return B},REDUCE_ERR_MARGIN_VALUE:function(){return tD},determineDisplayRuleFromDigitCount:function(){return tM},determineDisplayRuleFromNumber:function(){return tH},getGradeInputAriaLabelKey:function(){return tz},getGradePillType:function(){return t_},getPercentileColor:function(){return tF},gradeNeedsPosting:function(){return tU},hasGradesToPost:function(){return tV},isGradeOverridden:function(){return tZ},isGradePosted:function(){return tj},isGraded:function(){return tW},parseGradeValue:function(){return tR},shouldShowPastDueZeroIndicator:function(){return tq},sumFloatValues:function(){return t$}});var Z=n(202784),K=n.n(Z),X=n(928316),Y=n(44432),Q=n(174897),J=n(142895),ee=n(844156),et=n(410628),en=n(311822);let ei=e=>{let{downloadErrorDialogHidden:t,onCloseDialog:n}=e,i=(0,et.q)();return Z.createElement("div",null,Z.createElement(en.Dy,{hidden:t,onDismiss:n,dialogContentProps:{type:J.DialogType.normal,title:i("gradebook.download-submissions.noneSelectedDialog.title"),subText:i("gradebook.download-submissions.noneSelectedDialog.body")},modalProps:{isAlert:!0},analyticsId:"download-submissions-error-dialog"},Z.createElement(J.DialogFooter,null,Z.createElement(ee.AnalyticsDefaultButton,{onClick:()=>n(),analyticsId:"download-submissions-error-dialog-dialog-footer-primary-button"},i("gradebook.download-submissions.noneSelectedDialog.close")))))};var es=n(608555),er=n(50635);class eo extends Z.PureComponent{constructor(){super(...arguments),this.cancel=()=>{this.props.onLeaveAction()},this.download=()=>{this.props.onDownloadAction()}}render(){let{t:e}=this.props;return Z.createElement(es.BbPanelFooter,{primaryButtonProps:{text:e("gradebook.download-submissions.footer.submitButton"),onClick:this.download,id:"button-download"},secondaryButtonProps:{text:e("gradebook.download-submissions.footer.cancelButton"),onClick:this.cancel,id:"button-cancel"},analyticsId:"gradebook.downloadSubmissions.footer"})}}let ea=(0,er.H)(eo);var el=n(398435);class ec extends Z.PureComponent{constructor(){super(...arguments),this.onToggleSelected=()=>{this.props.onToggleSelected(this.props.contentItem)}}render(){let{contentItem:e,isSelected:t,rowIndex:n}=this.props,{date:i,name:s}=e;return Z.createElement("tr",{className:`download-submissions-table__row js-item-id-${e.studentId}`,role:"row","aria-rowindex":n},Z.createElement("td",{className:"download-submissions-content-table__cell -fixed-checkbox",role:"gridcell","aria-colindex":1,"aria-describedby":"download-submissions-content-table__cell__header--id-checkbox"},Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper"},Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},Z.createElement(el.AnalyticsFormControlLabel,{label:"",htmlFor:`download-submissions.content-table-cell-checkbox-${n}`,className:"download-submissions-content-table__cell__checkbox",control:Z.createElement(el.AnalyticsCheckbox,{id:`download-submissions.content-table-cell-checkbox-${n}`,onChange:this.onToggleSelected,checked:t,"aria-label":s,analyticsId:"downloadSubmissions.contentTable.cell.checkbox"}),analyticsId:"downloadSubmissions.contentTable.cell.label"})))),Z.createElement("td",{className:"download-submissions-content-table__cell--title -column-name",role:"gridcell",tabIndex:-1,"aria-colindex":2,"aria-describedby":"download-submissions-content-table__cell__header--id-name"},Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper"},Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},s))),Z.createElement("td",{className:"download-submissions-content-table__cell -column-date",role:"gridcell",tabIndex:-1,"aria-colindex":3,"aria-describedby":"download-submissions-content-table__cell__header--id-date"},Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper"},Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},this.formatDateString(i)))),Z.createElement("td",{className:"download-submissions-content-table__cell -padder -padder-cell","aria-hidden":!0}))}formatDateString(e){let{t}=this.props;return e?Z.createElement("div",null,t("gradebook.download-submissions.table.submissionDatetime",{datetime:e})):t("gradebook.download-submissions.table.submissionNoDatetime")}}let ed=(0,er.H)(ec);var eu=n(701182),ep=n(315109),em=n(438501),eh=n(158550);(i=A||(A={}))[i.name=0]="name",i[i.date=1]="date",(s=k||(k={}))[s.ascending=0]="ascending",s[s.descending=1]="descending";class eg extends Z.PureComponent{constructor(e){super(e),this.onNameHeaderClick=()=>{this.handleSort(A.name,eb,ev)},this.onDateHeaderClick=()=>{this.handleSort(A.date,eC,eS)},this.getColumnSortInformation=e=>{if(this.state.sortColumn===e){if(this.state.sortDirection===k.ascending)return{icon:Z.createElement(em.SortArrowAscending,null),sorted:"sortedAscending"};if(this.state.sortDirection===k.descending)return{icon:Z.createElement(em.SortArrowDescending,null),sorted:"sortedDescending"}}return{icon:null,sorted:"unsorted"}},this.onSelectAllToggle=()=>{this.props.onSelectAllToggle()},this.state={sortColumn:A.name,sortDirection:k.ascending}}displaySpinnerOrChildren(){let{children:e,errorLoading:t,loadingContent:n,t:i}=this.props;return t?Z.createElement("div",{className:"error-message","data-testid":"error-message"},Z.createElement("div",{className:"download-submissions-content-table__error_message"},i("gradebook.download-submissions.table.errorLoading"))):n?Z.createElement(ep.Spinner,{className:"download-submissions-content-table__table__spinner",size:ep.SpinnerSize.xLarge,"aria-label":i("gradebook.download-submissions.table.loadContent")}):Z.createElement("table",{className:"download-submissions-content-table__table",role:"grid","aria-readonly":"true"},Z.createElement("thead",null,this.renderHeader()),Z.createElement("tbody",null,e))}handleSort(e,t,n){if(e===this.state.sortColumn)switch(this.state.sortDirection){case k.ascending:this.setState({sortDirection:k.descending}),this.props.onSortColumn(n);break;case k.descending:this.setState({sortDirection:k.ascending}),this.props.onSortColumn(t)}else this.setState({sortColumn:e,sortDirection:k.ascending}),this.props.onSortColumn(t)}render(){return Z.createElement("div",{className:"download-submissions-content-table"},Z.createElement("div",null,this.displaySpinnerOrChildren()))}renderHeader(){let{t:e,selectAllStatus:t}=this.props,n=this.renderSortButton(this.getColumnSortInformation(A.name)),i=this.renderSortButton(this.getColumnSortInformation(A.date)),s="gradebook.downloadSubmissions.column.name.header",r="gradebook.downloadSubmissions.column.date.header",o=this.props.analyticsEventAugmentor(eh.AnalyticsEventTypes.CLICK_EVENT,this.onNameHeaderClick,s),a=this.props.analyticsEventAugmentor(eh.AnalyticsEventTypes.CLICK_EVENT,this.onDateHeaderClick,r);return Z.createElement("tr",{className:"download-submissions-content-table__row -header",role:"row"},Z.createElement("th",{className:"download-submissions-content-table__cell--header -fixed-checkbox",role:"columnheader",id:"download-submissions-content-table__cell__header--id-checkbox","aria-label":e("gradebook.download-submissions.header.selectColumn")},Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper"},Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},Z.createElement(el.AnalyticsFormControlLabel,{label:"",className:"download-submissions-content-table__cell__checkbox","aria-label":e("gradebook.download-submissions.header.selectAll"),htmlFor:"gradebook.downloadSubmissions.header.selectAll.triStateCheckbox",control:Z.createElement(el.AnalyticsCheckbox,{id:"gradebook.downloadSubmissions.header.selectAll.triStateCheckbox",checked:t===eu.CheckStateTypesEnum.CHECKED,indeterminate:t===eu.CheckStateTypesEnum.PARTIAL,onChange:this.onSelectAllToggle,analyticsId:"gradebook.downloadSubmissions.header.selectAll.triStateCheckbox"}),analyticsId:"gradebook.downloadSubmissions.header.selectAll.label"})))),Z.createElement("th",{className:"download-submissions-content-table__cell--header -column-name",role:"columnheader","aria-sort":this.getAriaSortState(A.name),id:"download-submissions-content-table__cell__header--id-name",tabIndex:-1,onClick:o,"data-analytics-id":s},Z.createElement("span",{className:"download-submissions-content-table__cell__data-wrapper",role:"button",tabIndex:0},Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},e("gradebook.download-submissions.table.nameColumn")),n)),Z.createElement("th",{className:"download-submissions-content-table__cell--header -column-date",role:"columnheader","aria-sort":this.getAriaSortState(A.date),id:"download-submissions-content-table__cell__header--id-date",tabIndex:-1,onClick:a,"data-analytics-id":r},Z.createElement("span",{className:"download-submissions-content-table__cell__data-wrapper",role:"button",tabIndex:0},Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},e("gradebook.download-submissions.table.dateColumn")),i)),Z.createElement("td",{className:"download-submissions-content-table__cell--header -padder","aria-hidden":!0}))}renderSortButton(e){let{t}=this.props;return e.icon?Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper--icon",title:t(`gradebook.download-submissions.screenReaderSortUpdates.${e.sorted}`)},e.icon):Z.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper--arrow-container",title:t(`gradebook.download-submissions.screenReaderSortUpdates.${e.sorted}`)},Z.createElement(em.SortArrows,null))}getAriaSortState(e){if(this.state.sortColumn===e){if(this.state.sortDirection===k.ascending)return"ascending";if(this.state.sortDirection===k.descending)return"descending"}return"none"}}let ef=(0,eh.withAnalytics)((0,er.H)(eg)),eb=(e,t)=>ey(e.name.toLowerCase(),t.name.toLowerCase()),ev=(e,t)=>eb(t,e),ey=(e,t)=>e.localeCompare(t),eC=(e,t)=>eE(e.date,t.date),eS=(e,t)=>eE(t.date,e.date),eE=(e,t)=>e>t||!e&&t?1:e<t||e&&!t?-1:0;class eI extends Z.PureComponent{constructor(e){super(e),this.handleColumnSort=e=>{this.setState({sortRule:e})},this.renderErrorDialog=()=>Z.createElement(ei,{onCloseDialog:this.closeErrorDialog,downloadErrorDialogHidden:this.state.downloadErrorDialogHidden}),this.renderDownloadDialog=()=>Z.createElement(eR,{hidden:this.state.downloadDialogHidden,onCloseDialog:this.closeDownloadDialog,onDownload:this.onDownload,selectedItems:this.state.selectedItems}),this.toggleSelectedItem=e=>{this.setState(t=>{let n=t.selectedItems.findIndex(t=>t.studentId===e.studentId);return n>=0?{selectedItems:[...t.selectedItems.slice(0,n),...t.selectedItems.slice(n+1)]}:{selectedItems:[...t.selectedItems,e]}})},this.getSelectAllStatus=()=>{let{contentItems:e}=this.props;return e&&void 0!==e.length&&0===e.length?eu.CheckStateTypesEnum.UNCHECKED:e.every(e=>this.state.selectedItems.some(t=>e.studentId===t.studentId))?eu.CheckStateTypesEnum.CHECKED:this.state.selectedItems.length>0?eu.CheckStateTypesEnum.PARTIAL:eu.CheckStateTypesEnum.UNCHECKED},this.onSelectAllToggle=()=>{this.selectAllToggle()},this.downloadSubmissions=()=>{0===this.state.selectedItems.length?this.setState({downloadErrorDialogHidden:!1}):this.setState({downloadDialogHidden:!1})},this.onDownload=e=>{this.props.downloadSubmissions(e),this.closeDownloadDialog()},this.closeErrorDialog=()=>{this.setState({downloadErrorDialogHidden:!0})},this.closeDownloadDialog=()=>{this.setState({downloadDialogHidden:!0})},this.state={selectedItems:[],sortRule:eb,downloadErrorDialogHidden:!0,downloadDialogHidden:!0}}render(){let{contentItems:e,courseName:t,loadingContent:n,errorLoading:i,t:s}=this.props,{sortRule:r}=this.state,o=this.getSelectAllStatus(),a=e.sort(r);return Z.createElement("div",{className:"download-submissions-panel panel-wrap"},this.renderErrorDialog(),this.renderDownloadDialog(),Z.createElement("div",{className:"download-submissions-panel__content"},Z.createElement("div",{className:"download-submissions-panel__header"},Z.createElement(es.BbPanelHeader,{title:s("gradebook.download-submissions.header.title"),smallHeaderTitle:t,type:es.BbPanelType.full,analyticsId:"gradebook.downloadSubmissions.header.title",navMenuAriaLabel:s("global.navigationMenu")})),Z.createElement("div",{className:"download-submissions-panel__content__header"},s("gradebook.download-submissions.header.contents")),Z.createElement("div",{className:"download-submissions-panel__content__table"},Z.createElement(ef,{loadingContent:n,errorLoading:i,selectAllStatus:o,onSelectAllToggle:this.onSelectAllToggle,onSortColumn:this.handleColumnSort,analyticsId:"gradebook.downloadSubmissions.panel.contentTable",t:s},a.map((e,t)=>Z.createElement(ed,{key:e.studentId,contentItem:e,isSelected:!!this.state.selectedItems.find(t=>e.studentId===t.studentId),rowIndex:t+1,onToggleSelected:this.toggleSelectedItem})))),Z.createElement("div",{className:"download-submissions-panel__footer"},Z.createElement(ea,{onDownloadAction:this.downloadSubmissions,onLeaveAction:this.props.onLeaveAction}))))}selectAllToggle(){let{contentItems:e}=this.props;this.setState(t=>{let n=this.getSelectAllStatus(),i=n===eu.CheckStateTypesEnum.CHECKED?[]:e.slice(0);return{selectedItems:i}})}}let ew=(0,er.H)(eI);var eA=n(408027),ek=n(951248),ex=n(118717);class eT extends K().PureComponent{constructor(e){super(e),this.downloadSubmissions=e=>{let{courseId:t,columnId:n,onLeaveAction:i}=this.props,s=e.map(e=>e.studentId);(0,ek.GjL)({course:t,column:n,studentIds:{students:s}}).then(()=>{i()})},this.state={loadingContent:!0,errorLoading:!1}}componentWillUnmount(){this.setState({loadingContent:!0})}render(){let{contentItems:e,courseName:t,onLeaveAction:n}=this.props,{loadingContent:i,errorLoading:s}=this.state;return K().createElement(ew,{courseName:t,contentItems:e,onLeaveAction:n,loadingContent:i,errorLoading:s,downloadSubmissions:this.downloadSubmissions})}async componentDidMount(){let{courseId:e,columnId:t,loadCourseMembershipsByCourseId:n,loadGradebookAttemptsByColumnId:i}=this.props;try{let s=[],r=n({courseId:e,roleBucket:eA.O8v.Taking});s.push(r);let o=i({courseId:e,columnId:t});s.push(o),await Promise.all(s).then(async()=>{await this.setState({loadingContent:!1,errorLoading:!1})})}catch(e){await this.setState({loadingContent:!1,errorLoading:!0})}}}let eP=e=>{if(e.length>0){let t=e.reduce((e,t)=>e&&e.attemptDate>t.attemptDate?e:t);return new Date(t.attemptDate)}return null},eD=(0,Y.$j)((e,t)=>{let{courseId:n,columnId:i,t:s}=t,r=[],o=ek.Ys.courseMembership.getCourseMembershipsByCourseId(e,n,eA.O8v.Taking);return o.forEach(t=>{let o=ek.Ys.user.getUserById(e,t.userId),a=ek.Ys.gradebookAttempt.getGradebookAttemptsByUserId(e,n,i,t.userId),l=eP(a),c={name:s("gradebook.download-submissions.table.name",{user:o}),studentId:t.userId,date:l};r.push(c)}),{courseMembers:o,contentItems:r}},e=>(0,ex.DE)({loadCourseMembershipsByCourseId:ek.Nwg.courseMembership.loadCourseMembershipsByCourseId,loadGradebookAttemptsByColumnId:ek.Nwg.gradebookAttempt.loadGradebookAttemptsByColumnId},e))(eT),eG=(0,er.H)(eD),eR=e=>{let{hidden:t,onCloseDialog:n,onDownload:i,selectedItems:s}=e,r=(0,et.q)(),o=Z.createElement(el.AnalyticsLink,{href:r("gradebook.download-submissions.downloadDialog.helpLink"),target:"_blank",analyticsId:"download-submissions-dialog-help-link"},r("gradebook.download-submissions.downloadDialog.help"));return Z.createElement("div",null,Z.createElement(en.Dy,{hidden:t,onDismiss:n,dialogContentProps:{type:J.DialogType.normal,title:r("gradebook.download-submissions.downloadDialog.title"),subText:r("gradebook.download-submissions.downloadDialog.body")},modalProps:{isAlert:!0},analyticsId:"download-submissions-dialog"},Z.createElement(J.DialogFooter,{helpLink:o},Z.createElement(el.AnalyticsDefaultButton,{onClick:()=>n(),analyticsId:"download-submissions-dialog-dialog-footer-primary-button"},r("gradebook.download-submissions.downloadDialog.cancelButton")),Z.createElement(el.AnalyticsPrimaryButton,{onClick:()=>i(s),analyticsId:"download-submissions-dialog-dialog-footer-primary-button"},r("gradebook.download-submissions.downloadDialog.downloadButton")))))};var eB=n(755755),eL=n(276635),eN=n(906277);(r=x||(x={})).Default="default",r.Mini="mini",r.Large="large",(o=T||(T={})).Grey="grey",o.Black="black",o.Green="green",o.YellowGreen="yellow-green",o.Yellow="yellow",o.Orange="orange",o.Red="red",(a=P||(P={})).MaxExceeded="maxExceeded",a.WrongFormat="wrongFormat",(l=D||(D={})).Points="points",l.Percentage="percentage",l.Tabular="tabular",l.Complete="complete",l.UnitBased="unitBased",(c=G||(G={})).Points="points",c.PointsEach="points.each";var eO=n(281699),eM=n(797580);let{fade:e$}=eO.colorManipulator,eH=(0,eO.makeStyles)(e=>{let t="120px",n="140px",i="max-content",s=eM.fx.greenHover,r=eM.fx.yellowGreenHover,o=eM.fx.yellowHover,a=eM.fx.brightOrangeHover,l=eM.fx.redHover,c=eM.fx.disabledHover,d=e.palette.background.b9,u=eM.fx.green,p=eM.fx.yellowGreen,m=eM.fx.yellow,h=eM.fx.brightOrange,g=eM.fx.red,f=e.palette.background.b5,b=e.palette.background.b9,v=e.palette.background.b3,y=e.palette.focus.main,C=e.palette.error.main,S={fontFamily:e.typography.fontFamily,lineHeight:"normal",overflow:"hidden",padding:"0 8px",borderRadius:"30px",display:"inline-flex",justifyContent:"center",alignItems:"center","box-sizing":"border-box",fontWeight:eM.vC.fontWeightSemiBold,"&.default":{"&.big-pill":{maxWidth:i},height:"30px",minWidth:"70px",maxWidth:t,fontSize:e.typography.fontSizeDefault},"&.mini":{"&.big-pill":{maxWidth:i},height:"26px",minWidth:"50px",maxWidth:t,fontSize:e.typography.fontSizeDefault},"&.large":{"&.big-pill":{maxWidth:i},height:"36px",minWidth:"90px",maxWidth:"150px",fontSize:e.typography.fontSizeLarge,padding:"0 12px"},"&.green, &.yellow-green, &.yellow, &.orange, &.red, &.grey":{border:"0",color:eM.DF.primary},"&.black":{border:"0",background:d,color:e.palette.common.white},"&.grey":{background:f},"&.green":{background:u},"&.yellow-green":{background:p},"&.yellow":{background:m},"&.orange":{background:h},"&.red":{background:g},"&.icon-pill":{justifyContent:"left","&.default":{maxWidth:n},"&.mini":{maxWidth:n},"&.large":{maxWidth:"160px"}}};return(0,eO.createStyles)({pill:{...S,border:`1px solid ${b}`,background:"white",transition:"background-color 0.2s cubic-bezier(0.55, 0, 0.1, 1)","&:hover":{background:v,cursor:"pointer"},"&:hover .hyphens-hover":{color:e.palette.grey[800]},"&.focus":{border:`1px solid ${y}`,boxShadow:`inset 0 0 0 1px ${y}`},"&.active":{background:"white",border:`1px solid ${y}`,boxShadow:`inset 0 0 0 4px ${e$(y,.1)}`},"&.error":{background:"white",border:`1px solid ${C}`,boxShadow:`inset 0 0 0 4px ${e$(C,.1)}`},"&.black:hover":{background:c},"&.green:hover":{background:s},"&.yellow-green:hover":{background:r},"&.yellow:hover":{background:o},"&.orange:hover":{background:a},"&.red:hover":{background:l},"&.disabled-max-width":{maxWidth:"inherit"}},readonlyPill:{"&&":{...S}},containerCallOut:{color:C,display:"flex","& div":{paddingRight:"12px"}},containerPill:{display:"inline-flex",alignItems:"center"},iconAlertCallOut:{paddingTop:"4px",paddingRight:"4px"}})}),eF=e=>{let{hasFocus:t,hasError:n,pillSize:i,pillColor:s,errorKey:r,showIconButton:o,maxWidthDisabled:a}=e,l=(0,et.q)(),{errorId:c,analyticsId:d,onClick:u,onPointerDown:p,onPointerUp:m}=e,h=eH(e),g=(0,Z.useRef)(null),[f,b]=(0,Z.useState)(!1),[v,y]=(0,Z.useState)(!1),C=(0,eN.Z)(h.pill,"pill",s,{"icon-pill":o,focus:t,active:f,[i||"default"]:!0,error:n,"disabled-max-width":a}),S=()=>{f&&(null==m||m(),b(!1))};return(0,Z.useEffect)(()=>(document.addEventListener("pointerup",S),()=>{document.removeEventListener("pointerup",S)})),(0,Z.useEffect)(()=>{y(!!n)},[n]),Z.createElement(el.AnalyticsTooltip,{placement:"bottom-start",title:Z.createElement("div",{role:"alert",className:h.containerCallOut,id:c},Z.createElement("div",{className:h.iconAlertCallOut},Z.createElement(em.Attention,null)),l(`gradePill.errors.${r}`,{maxDigits:5,maxDecimalDigits:2})),analyticsId:`${d}.tooltip`,open:v},Z.createElement("div",{className:h.containerPill},Z.createElement("div",{className:C,ref:g,onClick:o?()=>{}:()=>{n&&y(!0),null==u||u()},onPointerDown:o?()=>{}:()=>{null==p||p(),b(!0)},onPointerUp:o?()=>{}:S},e.children)))},eU=()=>Z.createElement("span",{className:"pill-hyphens"},"--");(0,eO.makeStyles)(()=>(0,eO.createStyles)({pillHyphens:{marginRight:"2px"},pillPercentage:{marginLeft:"2px"}})),(0,eO.makeStyles)(()=>(0,eO.createStyles)({pillPointsSeparator:{margin:"0 3px"}}));let eV=(0,eO.makeStyles)(()=>(0,eO.createStyles)({pillSeparator:{margin:"0px 3px"}})),e_=e=>{let{grade:t,pointsPossible:n}=e,i=eV(e),{formatNumber:s}=(0,eB.h)();return Z.createElement(Z.Fragment,null,Z.createElement("span",{className:"js-pill-grade"},s(t,tH(t))),Z.createElement("span",{className:i.pillSeparator},"/"),Z.createElement("span",{className:"pill-points-possible"},s(n,tB)))},eq=e=>{var t;return(null==e?void 0:e.manualStatus)===eA.WTZ.IsPosted&&null!==(t=null==e?void 0:e.displayGrade)&&void 0!==t&&!!t.isOverride&&null!=e.displayGrade.score||(null==e?void 0:e.status)===eA.EyR.Graded&&null!=e&&!!e.displayGrade&&!e.displayGrade.isOverride&&null!=e.displayGrade.score},ez=e=>{var t;return(null==e?void 0:e.manualStatus)===eA.WTZ.NoOverride&&(null==e?void 0:e.status)===eA.EyR.NeedsGrading&&(null===(t=null==e?void 0:e.displayGrade)||void 0===t?void 0:t.score)!=null||(null==e?void 0:e.manualStatus)===eA.WTZ.ReadyToPost},eW=(e,t,n=!1)=>{if(n)return T.Black;if("number"!=typeof e||"number"!=typeof t||0===t||0===e&&0===t)return T.Grey;let i=100*e/t;return i>=90?T.Green:i>=80&&i<90?T.YellowGreen:i>=70&&i<80?T.Yellow:i>=60&&i<70?T.Orange:T.Red},ej=e=>{if(null==e)return!0;let t=Math.abs(Math.trunc(e)).toString().length,n=e===Math.trunc(e)?0:e.toString().split(".")[1].length;return!(t>5)&&!(n>2)},eZ=(e,t,n)=>{if(void 0===e||void 0===t||void 0===n)return"";let i=100*t/n,s=(0,eL.orderBy)(e,["lowerBound"],["desc"]);for(let e of s)if(i>=e.lowerBound)return e.symbol;return""},eK=(e,t,n,i,s,r)=>{if(null==t)return null;if(e===D.Points||e===D.UnitBased)return s(t,tH(t));if(e===D.Percentage){let e=100*t/n,r=s(e,tH(e));return i("gradePill.percentageGrade",{displayGrade:r})}return e===D.Tabular&&r?eZ(r,t,n):null},eX=e=>e===eA.aQo.Percent?D.Percentage:e===eA.aQo.Tabular?D.Tabular:e===eA.aQo.Complete?D.Complete:D.Points,eY=(e,t,n)=>n===D.Percentage&&void 0!==e?e*t/100:e,eQ=e=>{var t;return(null==e?void 0:e.grade)&&null!==(t=e.score)&&void 0!==t?t:void 0},eJ=(e,t)=>0===e&&!t||!!e,e0=(e,t,n)=>t.length>e.length?n+1:t.length<e.length?n-1:n,e1=(e,t,n,i)=>{let s;let r=e.target.value,o=t(r)||r,a=n(o.trim()),l=e.target.selectionStart;if(s={value:void 0,regrouped:r,cursorPosition:0,hasError:!0,errorKey:void 0},r){if(Number.isNaN(a))s={value:void 0,regrouped:r,cursorPosition:null!=l?l:0,hasError:!0,errorKey:P.WrongFormat};else{let e=ej(a);s={value:a,regrouped:r,cursorPosition:e0(r,o,null!=l?l:0),hasError:!e,errorKey:e?void 0:P.MaxExceeded}}}else Number.isNaN(a)&&(s={value:void 0,regrouped:o,cursorPosition:0,hasError:!1,errorKey:void 0},s=i?{...s,hasError:!0,errorKey:P.WrongFormat}:{...s,hasError:!1,errorKey:void 0});return s},e2=e=>{let{grade:t,pointsPossible:n}=e,{translate:i,formatNumber:s}=(0,eB.h)();return Z.createElement("div",null,eK(D.Percentage,t,n,i,s))},e3=(0,eO.makeStyles)(()=>(0,eO.createStyles)({gradedTabularContent:{overflow:"hidden",textOverflow:"ellipsis","& span":{whiteSpace:"nowrap"}}})),e9=e=>{let{symbolGrade:t}=e,n=e3(e);return Z.createElement("div",{className:n.gradedTabularContent},Z.createElement("span",null,t))},e4=(0,eO.makeStyles)(()=>(0,eO.createStyles)({unitBasedContent:{margin:"0 3px","& span":{whiteSpace:"nowrap"}}})),e7=e=>{let{unit:t}=e,n=e4(e),i=(0,et.q)();return Z.createElement("div",{className:n.unitBasedContent},Z.createElement("span",null,i(`gradebook.grade.${t}`)))},e5=e=>{let{grade:t,unit:n}=e,{formatNumber:i}=(0,eB.h)();return Z.createElement(Z.Fragment,null,Z.createElement("span",null,null==t?"--":i(t,tH(t))),Z.createElement(e7,{unit:n}))},e6=(0,eO.makeStyles)(e=>(0,eO.createStyles)({pillInput:{overflow:"hidden",textOverflow:"ellipsis",background:"none",border:"none",textAlign:"center",fontWeight:"inherit",margin:"0px",padding:"0px",fontSize:"inherit",color:"inherit",outline:"none",cursor:"pointer","&:focus":{border:"none",fontWeight:e.typography.fontWeightRegular},"&::placeholder":{color:"inherit"}},pillInputContainer:{overflow:"hidden"},contentRef:{width:"auto",visibility:"hidden",position:"absolute"}})),e8=e=>{let{regroupNumber:t,parseNumber:n,formatNumber:i}=(0,eB.h)(),{grade:s,displayGrade:r,hasFocus:o}=e,{analyticsId:a,id:l,showRegroupedGrade:c,onFocus:d,onBlur:u,onError:p,onErrorSolved:m}=e,{ariaLabel:h,ariaDescribedBy:g,ariaHidden:f,emptyGradeNotAllowed:b}=e,[v,y]=(0,Z.useState)(!1),[C,S]=(0,Z.useState)(void 0),[E,I]=(0,Z.useState)(0),[w,A]=(0,Z.useState)({value:s,regrouped:null!=s?t(i(s,{round:"truncate",maximumFractionDigits:2})):"",cursorPosition:0}),k=e6(e),x=(0,Z.useRef)(null),T=(0,Z.useRef)(null),P=(0,Z.useRef)(null);return(0,Z.useEffect)(()=>{var e;o&&(null===(e=x.current)||void 0===e||e.focus())},[o]),(0,Z.useLayoutEffect)(()=>{var e,t;I((null!==(t=null===(e=P.current)||void 0===e?void 0:e.offsetWidth)&&void 0!==t?t:0)+2)},[w,o]),(0,Z.useLayoutEffect)(()=>{var e;let t=null===(e=T.current)||void 0===e?void 0:e.offsetWidth;o||E===t||I(null!=t?t:0)},[E]),(0,Z.useEffect)(()=>{v||null==m||m()},[v]),(0,Z.useEffect)(()=>{let e=null!=s?t(i(s,{round:"truncate",maximumFractionDigits:2})):"",n=e.length;A({value:s,regrouped:e,cursorPosition:n})},[s,i,t]),(0,Z.useEffect)(()=>{var e;let{cursorPosition:t}=w;null===(e=x.current)||void 0===e||e.setSelectionRange(t,t)},[w]),Z.createElement("div",{className:k.pillInputContainer,ref:T},Z.createElement("input",{id:l,className:k.pillInput,value:o||c||!r?w.regrouped:r,ref:x,onBlur:()=>{v&&(null==p||p(C)),!v&&u&&u(w.value)},onChange:e=>{let{value:i,regrouped:s,cursorPosition:r,hasError:o,errorKey:a}=e1(e,t,n,b);A({value:i,regrouped:s,cursorPosition:r}),y(o),S(a)},onKeyDown:e=>{var t;13===e.keyCode&&(v?null==p||p(C):null===(t=x.current)||void 0===t||t.blur())},style:{width:`${E}px`},maxLength:11,"analytics-id":`${a}.input`,"aria-label":h,"aria-describedby":g,"aria-hidden":f,tabIndex:f?-1:0,"aria-invalid":!!v,placeholder:"--",onFocus:d,readOnly:!o}),Z.createElement("div",{className:k.contentRef,ref:P},o||c||!r?w.regrouped||"--":r))},te=(0,eO.makeStyles)(()=>(0,eO.createStyles)({pendingContent:{fontStyle:"italic"}})),tt=e=>{let t=te(e),n=(0,et.q)();return Z.createElement("div",{className:t.pendingContent},Z.createElement("span",null,n("gradePill.pendingState")))},tn=(0,eO.makeStyles)(()=>(0,eO.createStyles)({pillPointsSeparator:{margin:"0 3px"}})),ti=e=>{let{pointsPossible:t}=e,n=tn(e),{formatNumber:i}=(0,eB.h)();return Z.createElement(Z.Fragment,null,Z.createElement("span",{className:n.pillPointsSeparator},"/"),Z.createElement("span",{className:"pill-points-possible"},i(t,tH(t))))};var ts=n(273386);let tr=e=>(0,ts.pJ)(t=>ek.Ys.systemPreference.getSystemPreferenceByKey(t,e)),to="gradepill.color.preference.settings",ta=()=>{let e=(0,ts.Lx)();(0,Z.useEffect)(()=>{e(ek.Nwg.systemPreference.loadSystemPreference({key:to}))},[e]);let t=tr(to);return!!t&&!!t.value&&!JSON.parse(t.value).isColorEnabled};var tl=n(998426);let tc=(0,eO.makeStyles)(e=>(0,eO.createStyles)({container:{display:"flex",alignItems:"center"},pill:{"&&":{display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",padding:"0 8px",height:"30px",minWidth:"80px",maxWidth:"120px",transition:"background-color 0.2s cubic-bezier(0.55, 0, 0.1, 1)",borderRadius:"20px",color:e.palette.background.b1}},bgSuccess:{"&&":{background:e.palette.success.main}},bgDisabled:{"&&":{background:e.palette.background.b8}},bgBlack:{"&&":{background:e.palette.background.b9}},bgHasError:{background:e.palette.background.default,border:`1px solid ${e.palette.border.main}`,boxShadow:`inset 0 0 0 1px ${e.palette.error.main}, inset 0 0 0 4px ${tl.r8.fade(e.palette.error.main,.1)}`},readOnlyPill:{pointerEvents:"none"},pillInputContainer:{display:"flex",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},pillInput:t=>({background:"inherit",border:0,outline:0,minWidth:"2ch",paddingLeft:"4px",fontSize:e.typography.fontSizeDefault,fontWeight:e.typography.fontWeightSemiBold,"&::placeholder":{color:e.palette.primary.contrastText},width:`${t.currentGradeLength+.8}ch`}),pillInputHasError:{color:e.palette.action.active,marginLeft:0},pillInputIsValid:{color:e.palette.primary.contrastText},totalPoints:{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightSemiBold},totalPointsHasError:{color:e.palette.action.active},containerCallOut:{color:e.palette.error.main,display:"flex","& div":{paddingRight:"12px"}},iconAlertCallOut:{padding:"4px 4px 0 0"},attentionIcon:{color:e.palette.error.main,marginLeft:"5px"}})),td=(0,eO.makeStyles)(e=>(0,eO.createStyles)({iconButton:{minWidth:0,padding:0,"&.default":{marginRight:"9px"},"&.mini":{marginRight:"4px"},"&.large":{marginRight:"10px"},"&:hover":{color:"inherit"}},rubricIcon:{fontSize:e.typography.fontSizeMedium}})),tu=e=>{let{analyticsId:t,ariaLabel:n,onClick:i,size:s}=e,r=td(e),o=(0,eN.Z)(r.iconButton,s||"default"),a=(0,eN.Z)(r.rubricIcon,s||"default");return Z.createElement(el.AnalyticsIconButton,{className:o,"aria-label":n,color:"inherit",onClick:i,analyticsId:`${t}.iconButton`},Z.createElement(em.Rubric,{className:a}))},tp=(0,eO.makeStyles)(e=>(0,eO.createStyles)({pillIcon:{color:e.palette.background.default},pillIconHasError:{color:e.palette.action.active}})),tm=({isComplete:e,hasError:t})=>{let n=tp();return e?K().createElement(em.CheckCircle,{className:(0,eN.Z)({[n.pillIcon]:!0,[n.pillIconHasError]:t,"js-complete-pill-icon":!0})}):K().createElement(em.Minus,{className:(0,eN.Z)({[n.pillIcon]:!0,[n.pillIconHasError]:t,"js-incomplete-pill-icon":!0})})},th=({isComplete:e,totalPoints:t,onBlur:n,gradeValue:i,initialHasFocus:s,isEditable:r,ariaCompleteIncompleteLabel:o,isRubricEnabled:a,canOpenRubricEval:l,analyticsId:c,children:d})=>{var u;let[p,m]=(0,Z.useState)(s),[h,g]=(0,Z.useState)(s),[f,b]=(0,Z.useState)(!1),[v,y]=(0,Z.useState)(void 0),{regroupNumber:C,parseNumber:S,formatNumber:E,translate:I}=(0,eB.h)(),w=S(i),[A,k]=(0,Z.useState)({value:w,regrouped:i?E(w,{round:"truncate",maximumFractionDigits:2}):""}),x=tc({currentGradeLength:null===(u=A.regrouped)||void 0===u?void 0:u.length}),T=ta();(0,Z.useEffect)(()=>{k({value:w,regrouped:i?E(w,{round:"truncate",maximumFractionDigits:2}):""})},[w,i,E]);let P=(0,Z.useCallback)(()=>{r&&m(!0)},[r]),D=(0,Z.useCallback)(e=>{g(!1);let t=null!==A.value&&void 0!==A.value?A.value.toString():"";f||(n(e,t,t!==(null==w?void 0:w.toString())),m(!1))},[A.value,w,n,f]),G=(0,Z.useCallback)(()=>{g(!0)},[]);return K().createElement(el.AnalyticsTooltip,{placement:"bottom-start",title:K().createElement("div",{role:"alert",className:x.containerCallOut},K().createElement("div",{className:x.iconAlertCallOut},K().createElement(em.Attention,null)),I(`gradePill.errors.${v}`,{maxDigits:5,maxDecimalDigits:2})),open:f&&h,analyticsId:`${c}`},K().createElement("div",{className:x.container},K().createElement(el.AnalyticsButtonBase,{onClick:P,analyticsId:`${c}.button`,className:(0,eN.Z)({[x.pill]:!0,[x.bgSuccess]:e,[x.bgDisabled]:!e,[x.bgHasError]:f,[x.bgBlack]:T,[x.readOnlyPill]:!r})},K().createElement("p",{className:"sr-only"},I(e?"gradebook.grade.grade-input.aria.complete":"gradebook.grade.grade-input.aria.incomplete")),p?K().createElement("div",{className:x.pillInputContainer},!f&&K().createElement(tm,{isComplete:e,hasError:!1}),K().createElement("input",{autoFocus:!0,placeholder:"--",value:A.regrouped,className:(0,eN.Z)({[x.pillInput]:!0,[x.pillInputHasError]:f,[x.pillInputIsValid]:!f}),"aria-label":o,onFocus:G,onBlur:D,onChange:e=>{let{value:t,regrouped:n,hasError:i,errorKey:s}=e1(e,C,S,!1);k({value:t,regrouped:n}),b(i),y(s)},onKeyDown:e=>{"Enter"===e.key&&(f?e.preventDefault():D(e))},"data-analytics-id":c}),K().createElement(el.AnalyticsTypography,{className:(0,eN.Z)({[x.totalPoints]:!0,[x.totalPointsHasError]:f})},I("components.directives.grade.grade-input.points",{total:t}))):K().createElement(K().Fragment,null,d," ",a?r?K().createElement(tu,{analyticsId:`${c}.rubricIcon`}):K().createElement(tu,{analyticsId:`${c}.rubricIcon`,onClick:l}):null,K().createElement(tm,{isComplete:e,hasError:f}))),f&&K().createElement(em.Attention,{className:x.attentionIcon})))},tg=e=>{var t;let n,i;let{translate:s,formatNumber:r,parseNumber:o}=(0,eB.h)(),{grade:a,pointsPossible:l,hasFocus:c,variant:d,symbolsMap:u,unit:p,emptyGradeNotAllowed:m}=e,{pillSize:h,colorOverride:g,analyticsId:f,id:b,onBlur:v,scoredByAutomaticZero:y}=e,{ariaLabel:C,ariaHidden:S,ariaDescribedBy:E}=e,[I,w]=(0,Z.useState)(a),[A,k]=(0,Z.useState)(eK(d,a,null!=l?l:0,s,r,u)),[x,T]=(0,Z.useState)(!1),[P,G]=(0,Z.useState)(c||!1),[R,B]=(0,Z.useState)(!1),[L,N]=(0,Z.useState)(void 0),O=(0,eL.uniqueId)("errorMessageId"),M=(0,eL.uniqueId)("complementId"),$=Z.createElement(ti,{pointsPossible:null!=l?l:0}),H=ta();(0,Z.useEffect)(()=>{w(a),k(eK(d,a,null!=l?l:0,s,r,u))},[a,d]);let F=e=>{w(e),k(eK(d,e,null!=l?l:0,s,r,u)),G(!1),v&&v(e)};if((P&&d!==D.UnitBased||x&&d===D.Points)&&(n=$),d===D.UnitBased){if(!p)throw Error("BaseGradePill requires a GradingUnit when variant is UnitBased");n=Z.createElement(e7,{unit:p})}x||P||null==I||d===D.UnitBased||(i=null!=g?g:eW(I,l,H),d!==D.Points||(n=$));let U=R?`${E} ${M} ${O}`:`${E} ${M}`,V={isComplete:eJ(a,y),totalPoints:l,onBlur:(e,t,n)=>{let i=o(t);F(isNaN(i)?void 0:i)},gradeValue:null!==(t=null==a?void 0:a.toString())&&void 0!==t?t:"",initialHasFocus:!1,isEditable:!0,ariaLabel:C,analyticsId:`${f}.input`};return Z.createElement(Z.Fragment,null,d===D.Complete?Z.createElement(th,{...V},e.children):Z.createElement(eF,{pillSize:h,pillColor:i,hasFocus:P,hasError:R,errorKey:L,errorId:O,showIconButton:!!e.children,analyticsId:f,maxWidthDisabled:d===D.UnitBased,onClick:()=>{G(!0)},onPointerDown:()=>{T(!0)},onPointerUp:()=>{T(!1)}},e.children,Z.createElement(e8,{grade:I,displayGrade:null!=A?A:"",emptyGradeNotAllowed:m,analyticsId:`${f}.gradableContent`,ariaLabel:C,hasFocus:P,onFocus:()=>{G(!0)},onBlur:F,onError:e=>{B(!0),N(e)},ariaDescribedBy:U,ariaHidden:S,id:b,showRegroupedGrade:e.showRegroupedGrade,onErrorSolved:()=>{B(!1),N(void 0)}}),n&&Z.createElement("div",{id:M},n)))};(d=R||(R={})).AllGrading="course.gradebook-grades.EXECUTE",d.DeanonymizeGrades="course.gradebook-deanonymize.EXECUTE",d.EnterFeedback="course.gradebook-grades.feedback.EXECUTE",d.EnterItemGrades="course.gradebook-grades.attempt.EXECUTE",d.ExportGradebookData="course.gradebook-data.export.EXECUTE",d.FullGradebookAccess="course.gradebook.MODIFY",d.ModifyGradebook="course.gradebook.MODIFY",d.ModifyItemDueDate="course.gradebook-item.duedate.MODIFY",d.Observe="observer.gradebook.VIEW",d.OverrideItemGrades="course.gradebook-grades.override.EXECUTE",d.ProvideGradingFeedback="course.gradebook-grades.feedback.EXECUTE",d.PublishGrades="course.gradebook-grades.publish.EXECUTE",d.ViewAttempts="course.gradebook.attempts.VIEW",d.ViewGradebook="course.gradebook.VIEW",d.ViewGradebookMetaData="course.gradebook-metadata.VIEW",d.OverrideGrade="course.gradebook-grades.override.EXECUTE",d.ViewException="course.gradebook-item.exceptions.VIEW",d.AssessmentViewException="course.assessment.exceptions.VIEW",d.ViewGrades="course.gradebook-grades.VIEW",d.ViewUserGrades="course.user.grades.VIEW",d.PostGrades="course.gradebook-grades.publish.EXECUTE";let tf=e=>{var t;let{pillSize:n,pillColor:i,showIconButton:s,pointsPossible:r}=e,o=eH(e),a=(0,eN.Z)(o.readonlyPill,"readonly-pill",{"big-pill":null!==(t=null==r?void 0:r.toString().length)&&void 0!==t&&t},i,n||"default",{"icon-pill":s});return Z.createElement("div",{className:a},e.children)},tb=e=>{let{variant:t,grade:n,pointsPossible:i,isPending:s,symbolGrade:r,unit:o}=e;if(s)return Z.createElement(tt,null);switch(t){case D.Percentage:return null!=n&&null!=i?Z.createElement(e2,{grade:n,pointsPossible:i}):Z.createElement(eU,null);case D.Tabular:return null!=r?Z.createElement(e9,{symbolGrade:r}):Z.createElement(eU,null);case D.UnitBased:return null!=o?Z.createElement(e5,{grade:n,unit:o}):Z.createElement(eU,null);default:if(null!=i)return null!=n?Z.createElement(e_,{grade:n,pointsPossible:i}):Z.createElement(eU,null);return Z.createElement(eU,null)}},tv=e=>{let{grade:t,symbolGrade:n,pointsPossible:i,isPending:s,variant:r,pillSize:o,colorOverride:a,unit:l,scoredByAutomaticZero:c}=e,d=ta(),u=null!=a?a:eW(t,i,d),p={isComplete:eJ(t,c),initialHasFocus:!1,isEditable:!1,totalPoints:i,onBlur:(e,t,n)=>{},gradeValue:t?t.toString():""};return Z.createElement(Z.Fragment,null,r===D.Complete?Z.createElement(th,{...p},e.children):Z.createElement(tf,{pillSize:o,pillColor:u,showIconButton:!!e.children,pointsPossible:i},e.children,Z.createElement(tb,{grade:t,symbolGrade:n,pointsPossible:i,isPending:s,variant:r,unit:l})))},ty=e=>{let{analyticsId:t,ariaLabel:n,currentScore:i,canGradeWithRubric:s,showRubricIcon:r,handleOnBlur:o,handleOnRubricIconClick:a,isEditable:l,pointsPossible:c,symbolGrade:d,symbolsMap:u,variant:p,scoredByAutomaticZero:m}=e,h=!1,g=(0,ts.Sp)("gradepill.color.preference.settings");if(g){let e=JSON.parse(g);h=!e.isColorEnabled}let f=(0,et.q)(),b={grade:i,pointsPossible:c,variant:p,gradeColorVariant:h?T.Black:void 0,scoredByAutomaticZero:m},v=()=>s?K().createElement(tu,{onClick:a,ariaLabel:f("gradePill.gradebookAttemptGradePill.rubricIconAriaLabel"),analyticsId:`${t}.gradepill.rubricIcon`}):K().createElement(tu,{ariaLabel:f("gradePill.gradebookAttemptGradePill.rubricIconAriaLabelDisabled")});return l?(()=>{let e={...b,symbolsMap:u,onBlur:o,ariaLabel:n,analyticsId:`${t}.gradePill`};return K().createElement(tg,{...e},r&&v())})():(()=>{let e={...b,symbolGrade:d};return K().createElement(tv,{...e},r&&v())})()},tC=e=>{var t,n,i,s,r,o,a,l;let{userId:c,isForAttempt:d,assessmentId:u,courseId:p,columnId:m,ariaLabel:h,analyticsId:g,canShowRubricIcon:f,canGradeWithRubric:b,readonly:v,onGradeUpdate:y,handleOnRubricIconClick:C,affectsAttemptGradeWhenCleared:S}=e,E=(0,ts.IP)(p,m),I=null!==(t=null==E?void 0:E.gradingSchemaId)&&void 0!==t?t:"",w=(0,ts.Yp)(p,I),A=(0,ts.$m)(m,c),k=null!==(i=null!==(n=e.attemptId)&&void 0!==n?n:null==A?void 0:A.lastAttemptId)&&void 0!==i?i:"",x=(0,ts.or)({courseId:p,columnId:m,attemptId:d?k:""}),T=(0,ts.qi)(p,u),P=(0,ts.vD)(p,[R.EnterItemGrades]),D=(0,ts.vD)(p,[R.OverrideItemGrades]),G=null==E?void 0:E.possible,B=eX(null==w?void 0:w.scaleType),L=!e.attemptId,N=tZ(A),O=d&&k&&!(L&&N),M=O?eQ(x):eY(null==A?void 0:A.displayGrade.score,null!=G?G:0,B),$=null==w?void 0:w.symbols,H=O?eZ($,M,G):null==A?void 0:A.displayGrade.grade,F=null!==(s=null==A?void 0:A.id)&&void 0!==s?s:"",U=(null!==(o=null===(r=null==E?void 0:E.rubricAssociations)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>0,V=null==A?void 0:A.isExempt,_=(0,ts.qI)(),q=(0,ts.Hr)(),z=(0,ts.cH)(k),W=(0,ts.UF)(),j=(0,ts.u3)(F),X=(0,ts.XY)(),[Y,Q]=(0,Z.useState)(!1),[J,ee]=(0,Z.useState)(M);(0,Z.useEffect)(()=>{Y&&_&&Q(!1)},[Y,_]),(0,Z.useEffect)(()=>{Y||_||z||j||J===M||(ee(M),null==y||y(null!=M?M:null))},[Y,_,z,j,J,M,y]);let et=(0,Z.useCallback)(()=>{q({courseId:p,columnId:m,attemptId:k,payload:{score:null,grade:"-",status:eA.I$9.NeedsGrading,rubricEvaluation:null}})},[k,m,p,q]),en=f&&U&&b,ei=(0,Z.useCallback)(e=>{e!==M&&(ee(e),null==y||y(null!=e?e:null),d&&k&&!en?(void 0===e?et():q({courseId:p,columnId:m,attemptId:k,payload:{score:e,readyToPost:!0}}),L&&W({courseId:p,columnId:m,gradeId:F,payload:{manualScore:null}})):F?void 0===e&&k&&!N&&S?(et(),Q(!0)):W({courseId:p,columnId:m,gradeId:F,payload:{manualScore:null!=e?e:null}}):X({courseId:p,columnId:m,userId:c,payload:{manualScore:e}}))},[S,k,et,m,p,X,M,F,d,N,L,y,en,q,W,c]),es=!(null!==(a=null==T?void 0:T.hasAnswerableQuestions)&&void 0!==a&&a)&&P,er=d?es:D;return K().createElement(ty,{analyticsId:g,ariaLabel:h,canGradeWithRubric:!!k&&er&&b,showRubricIcon:f&&U,currentScore:J,handleOnBlur:ei,handleOnRubricIconClick:C,isEditable:!v&&!V&&er,pointsPossible:G,symbolGrade:H,symbolsMap:$,variant:B,scoredByAutomaticZero:null===(l=null==A?void 0:A.displayGrade)||void 0===l?void 0:l.scoredByAutomaticZero})},tS=e=>{let{analyticsId:t,courseId:n,onGradeUpdate:i,gradeChangeModalHandler:s,questionAttemptId:r}=e,o=(0,ts.O$)(r),a=(0,ts.of)(n,r),l=(0,ts.UQ)(),c=(0,ts.vD)(n,[R.ModifyGradebook]),[d,u]=(0,Z.useState)(0),p=(0,Z.useCallback)(async e=>{if((null==o?void 0:o.points)!==e){let t={points:e,questionAttempt:a};if(s){let{confirmed:o}=await s();o?(l(n,r,t),null==i||i(e)):u(d+1)}else l(n,r,t),null==i||i(e)}},[n,a,l,o,r,d,s,i]);if(!o||!a)return null;let{question:m}=a;if(!m)throw Error("No `question` field found in the question attempt object");return K().createElement(ty,{key:d,currentScore:o.points,pointsPossible:m.points,variant:D.Points,handleOnRubricIconClick:()=>{},handleOnBlur:p,analyticsId:t,canGradeWithRubric:!1,isEditable:c,showRubricIcon:!1})},tE=2,tI=1,tw=0,tA=2,tk=5,tx=99999,tT=0,tP=100,tD=1e3;(u=B||(B={})).Points="points",u.Percent="percent",u.PointsPerQuestion="points.each",(p=L||(L={})).Default="default",p.Mini="mini",p.Large="large",(m=N||(N={})).Green="green",m.Yellowgreen="yellowgreen",m.Yellow="yellow",m.Orange="orange",m.Red="red",m.Disabled="color-disabled",m.Ungraded="white",m.Override="grey";let tG=N.Ungraded;function tR(e,t=!1){var n,i,s,r;let o=RegExp(`^-?\\d+(?:\\.\\d{0,${e<999||!t?tE:e<9999?tI:tw}})?`);return"number"==typeof e?null!==(i=null===(n=e.toString().match(o))||void 0===n?void 0:n[0])&&void 0!==i?i:"":"string"==typeof e&&null!==(r=null===(s=e.match(o))||void 0===s?void 0:s[0])&&void 0!==r?r:""}let tB={minimumFractionDigits:0,maximumFractionDigits:tE,useGrouping:!0,minimumIntegerDigits:1,round:"truncate"},tL={minimumFractionDigits:0,maximumFractionDigits:tI,useGrouping:!0,minimumIntegerDigits:1,round:"truncate"},tN={minimumFractionDigits:0,maximumFractionDigits:tw,useGrouping:!0,minimumIntegerDigits:1,round:"truncate"},tO={minimumFractionDigits:0,maximumFractionDigits:tA,useGrouping:!0,minimumIntegerDigits:1,style:"decimal",round:"truncate"};function tM(e){return e.integerCount>=0&&e.integerCount<4?tB:4===e.integerCount?tL:tN}function t$(e){let t=e.reduce((e,t)=>(e?e+=t*tD:e=t*tD,e),null);return null===t?t:t/tD}function tH(e){let t={integerCount:0,fractionalCount:0};if(!Number.isNaN(Number(e)))for(;Math.abs(e)>10**t.integerCount;)t.integerCount=t.integerCount+1;return tM(t)}function tF(e,t){return t?e>=90?N.Green:e>=80&&e<90?N.Yellowgreen:e>=70&&e<80?N.Yellow:e>=60&&e<70?N.Orange:N.Red:N.Disabled}let tU=e=>{var t;return e.manualStatus===eA.WTZ.NoOverride&&e.status===eA.EyR.NeedsGrading&&(null===(t=e.displayGrade)||void 0===t?void 0:t.score)!=null||e.manualStatus===eA.WTZ.ReadyToPost},tV=e=>{var t,n;return null!==(n=e&&(e.numStudentsSubmissionGradedNeedsPosting>0?e.numStudentsSubmissionGradedNeedsPosting>0:(null!==(t=e.numStudentsGradedNeedsPosting)&&void 0!==t?t:0)>0||e.numberOfOverriddenGradesToPost>0))&&void 0!==n&&n},t_=e=>e===eA.aQo.Percent?D.Percentage:e===eA.aQo.Tabular?D.Tabular:e===eA.aQo.Complete?D.Complete:D.Points,tq=e=>!!(null==e?void 0:e.scoredByAutomaticZero),tz=e=>{let t="gradebook.grade.grade-input.aria.scoreInputEmpty";return tq(e)?t="gradebook.grade.grade-input.aria.pastDueZeroScoreInputGraded":(null==e?void 0:e.score)!==void 0&&(t="gradebook.grade.grade-input.aria.scoreInputGraded"),t},tW=e=>null!=e.displayGrade&&(null!=e.displayGrade.score||null!=e.displayGrade.grade&&""!==e.displayGrade.grade),tj=e=>{let t=e.isCalculatedColumnGrade&&null!=e.manualGrade,n=!t&&(eA.WTZ.NoOverride===e.manualStatus&&(e.hasGradeBeenPosted||!eL.has(e,"hasGradeBeenPosted")&&tW(e))||eA.WTZ.IsPosted===e.manualStatus);return tW(e)&&n},tZ=e=>{var t,n;return(null===(t=null==e?void 0:e.displayGrade)||void 0===t?void 0:t.isOverride)&&!(null===(n=null==e?void 0:e.displayGrade)||void 0===n?void 0:n.scoredByAutomaticZero)||!1};var tK=n(609582);let tX=(0,eO.makeStyles)(e=>({downloadTestResultsPanelHeader:{height:"auto","& .ms-Panel-header":{boxShadow:"none"}},downloadTestResultsPanelBody:{top:0,overflow:"auto",height:"auto",position:"relative",marginBottom:"48px",[e.breakpoints.up("sm")]:{marginTop:"24px"}},errorMessage:{backgroundColor:"#F9DBD7",display:"flex",padding:"1rem",[e.breakpoints.up("sm")]:{margin:"0 -1.875rem"}},downloadTestResultsPanelFooter:{position:"absolute",bottom:0,left:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}},panelSection:{padding:"14px 10px",borderBottom:`1px solid ${e.palette.border.main}`,"&:last-child":{borderBottom:"none",paddingBottom:0},"&:first-child":{paddingTop:0},"& fieldset":{border:0,margin:0,padding:0},"& h2":{fontWeight:"bold",marginBottom:"8px"}}}));(h=O||(O={})).Delimiter="delimiter-type",h.Format="format-of-results",h.Attempts="attempts";let tY=e=>`id-${e.toLowerCase()}-radio`,tQ=e=>Z.createElement(el.AnalyticsRadioGroup,{analyticsId:e.analyticsId,id:e.radioGroupId,legendVariant:"h2",legendText:e.legendText,name:e.name,value:e.selectedValue,onChange:e.onChangeHandler},e.groupDescription&&Z.createElement("div",null,Z.createElement("p",null,e.groupDescription)),e.radioProps.map(t=>Z.createElement("div",{key:t.value},Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:t.labelAnalyticsId,htmlFor:tY(t.value),value:t.value,control:Z.createElement(el.AnalyticsRadio,{analyticsId:t.radioAnalyticsId,checked:t.value===e.selectedValue,onChange:e.onChangeHandler,id:tY(t.value)}),label:t.label}))));var tJ=n(646782),t0=n(470269),t1=n(177622),t2=n(175644);let t3=e=>{let{courseName:t,isOrganization:n}=e,i=(0,et.q)(),[s,r]=Z.useState(eA.dZq.Tab),[o,a]=Z.useState(eA.Wvp.User),[l,c]=Z.useState(eA.uzw.AllAttempts),[d,u]=Z.useState(!1),[p,m]=Z.useState(!1),h=n?"organization.":"",g=()=>{t0.Nd.leavePeekState()},f=async()=>{let t;m(!0);try{t=await (0,ek.FaB)(e.courseId,e.columnId,{delimiter:s,resultFormat:o,attempts:l}),(0,tJ.saveAs)(t.blob,t.filename),g()}catch(e){console.error(e),u(!0)}},b="course.grades.download-test-results",v=tX();return Z.createElement("div",{id:"download-test-results-panel"},Z.createElement("div",{className:"panel-wrap"},Z.createElement("header",{className:`panel-header simple-header ${v.downloadTestResultsPanelHeader}`},Z.createElement(tK.BbPanelHeader,{smallHeaderTitle:t,type:tK.BbPanelType.peek,analyticsId:`${b}.header`,title:i("course.grades.download-test-results.pageTitle"),navMenuAriaLabel:i("global.navigationMenu")})),d&&Z.createElement("div",{className:v.errorMessage,id:"error-block"},Z.createElement(el.AnalyticsIconButton,{analyticsId:`${b}.error.attention`},Z.createElement(t2.l,null)),Z.createElement("span",null,i("course.grades.download-test-results.errorMessage")),Z.createElement(el.AnalyticsIconButton,{id:"close-error",analyticsId:`${b}.error.close`,onClick:()=>{u(!1)}},Z.createElement(t1.Close,null))),Z.createElement("div",{className:`panel-body panel-content ${v.downloadTestResultsPanelBody}`},Z.createElement("div",{className:v.panelSection},Z.createElement(tQ,{analyticsId:`${b}.delimiter.radiogroup`,radioGroupId:"delimiter-radio-group",name:O.Delimiter,legendText:i("course.grades.download-test-results.fileType"),selectedValue:s,onChangeHandler:e=>{r(e.target.value)},radioProps:[{labelAnalyticsId:`${b}.delimiter.excel.label`,radioAnalyticsId:`${b}.delimiter.excel.radio`,value:eA.dZq.Tab,label:i("course.grades.download-test-results.excel")},{labelAnalyticsId:`${b}.delimiter.comma.label`,radioAnalyticsId:`${b}.delimiter.comma.radio`,value:eA.dZq.Comma,label:i("course.grades.download-test-results.comma")}]})),Z.createElement("div",{className:v.panelSection},Z.createElement(tQ,{analyticsId:`${b}.results-format.radiogroup`,radioGroupId:"results-format-radio-group",name:O.Format,legendText:i("course.grades.download-test-results.formatOfResults"),groupDescription:i(`${h}course.grades.download-test-results.formatDescription`),selectedValue:o,onChangeHandler:e=>{a(e.target.value)},radioProps:[{labelAnalyticsId:`${b}.format.student.label`,radioAnalyticsId:`${b}.format.student.radio`,value:eA.Wvp.User,label:i(`${h}course.grades.download-test-results.student`)},{labelAnalyticsId:`${b}.format.question-and-student.label`,radioAnalyticsId:`${b}.format.question-and-student.radio`,value:eA.Wvp.QuestionAndUser,label:i(`${h}course.grades.download-test-results.questionAndStudent`)}]})),Z.createElement("div",{className:v.panelSection},Z.createElement(tQ,{analyticsId:`${b}.attempts.radiogroup`,radioGroupId:"attempts-radio-group",name:O.Attempts,legendText:i("course.grades.download-test-results.attemptsToDownload"),groupDescription:i(`${h}course.grades.download-test-results.attemptsDescription`),selectedValue:l,onChangeHandler:e=>{c(e.target.value)},radioProps:[{labelAnalyticsId:`${b}.attempts.all-attempts.label`,radioAnalyticsId:`${b}.attempts.all-attempts.radio`,value:eA.uzw.AllAttempts,label:i("course.grades.download-test-results.allAttempts")},{labelAnalyticsId:`${b}.attempts.valid-attempts.label`,radioAnalyticsId:`${b}.attempts.valid-attempts.radio`,value:eA.uzw.ValidAttempts,label:i("course.grades.download-test-results.validAttempts")}]})))),Z.createElement("div",{className:v.downloadTestResultsPanelFooter},Z.createElement(tK.BbPanelFooter,{primaryButtonProps:{onClick:f,disabled:p,text:i("course.grades.download-test-results.download"),id:"button-download"},secondaryButtonProps:{onClick:g,text:i("course.grades.download-test-results.cancel"),id:"button-cancel"},analyticsId:`${b}.footer`})))},t9=e=>e.isDisabled?Z.createElement(tv,{grade:e.grade,variant:D.Points,pointsPossible:e.pointsPossible}):Z.createElement(tg,{grade:e.grade,pointsPossible:e.pointsPossible,variant:D.Points,onBlur:e.save,showRegroupedGrade:!0,analyticsId:"ultra.components.directives.assessment.gradePill"}),t4=(0,eO.makeStyles)(e=>(0,eO.createStyles)({overallGradeWrapper:{justifyContent:"center",alignContent:"center","& $overallGradeSetupContent":{[e.breakpoints.up("sm")]:{textAlign:"left"}},"& $row":{[e.breakpoints.up("md")]:{flexDirection:"row"}},"& $overallBorder":{[e.breakpoints.up("sm")]:{display:"block",paddingRight:"16px",maxWidth:"575px"},"& $overallGradeImgWrapper":{[e.breakpoints.up("sm")]:{float:"left"},"& $overallGradeImage":{[e.breakpoints.up("sm")]:{marginBottom:"0",marginTop:"16px",marginRight:"7px",marginLeft:"initial"}}},"& $overallGradeSetupHeading":{[e.breakpoints.up("sm")]:{marginTop:"16px",fontSize:e.typography.fontSizeLarge}},"& $overallGradeSetupText":{[e.breakpoints.up("sm")]:{marginBottom:"0px",textAlign:"left"}}},"& $setupOverallBtn":{[e.breakpoints.up("sm")]:{width:"100%",marginTop:"20px",marginLeft:"0"}}},buttonWrapper:{display:"flex",flexDirection:"column"},overallGradeWrapperFixed:{justifyContent:"center",alignContent:"center"},overallGradeSetupContent:{padding:"8px",border:"none",marginTop:"30px",textAlign:"center"},row:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},overallGradeImgWrapper:{minHeight:"inherit"},overallGradeImage:{height:"70px",width:"70px",marginBottom:"14px"},overallSetupContent:{},overallGradeSetupHeading:{"&&":{display:"block",fontSize:e.typography.fontSizeMedium,fontWeight:e.typography.fontWeightSemiBold,marginBottom:"4px"}},overallGradeSetupText:{lineHeight:"1.4",textAlign:"center",color:e.palette.text.secondary,marginBottom:"10px"},setupOverallBtn:{width:"auto",marginBottom:"10px",display:"inline-block"},hideThisMessageLinkOverride:{marginTop:"10px",fontSize:e.typography.fontSizeSmall},overallBorder:{display:"flex",flexDirection:"column",alignItems:"center"}})),t7=({onClose:e,onHideMessage:t,hidden:n})=>{let i=(0,et.q)();return Z.createElement(en.Dy,{analyticsId:"hideOverallGrade.dialog",dialogContentProps:{type:tK.DialogType.normal,title:i("components.common.hideOverallGradeDialog.title"),subText:i("components.common.hideOverallGradeDialog.text"),showCloseButton:!0,className:"js-hide-overall-grade-component-dialog"},hidden:n,onDismiss:e},Z.createElement(tK.DialogFooter,null,Z.createElement(ee.AnalyticsDefaultButton,{analyticsId:"components.common.hideOverallGradeDialog.cancel.button",onClick:e},i("components.common.hideOverallGradeDialog.cancel")),Z.createElement(ee.AnalyticsPrimaryButton,{analyticsId:"components.common.hideOverallGradeDialog.hide.button",className:"js-hide-overall-grade-component-dialog-hide-button",onClick:t},i("components.common.hideOverallGradeDialog.hideButton"))))};var t5=n(871111),t6=n.n(t5);let t8={key:"setupOverallGradeMessageIsHidden",value:"true",visibleToStudents:!1},ne=e=>{let t=(0,ts.Lx)(),n=(0,et.q)(),{analyticsId:i,showFixedView:s,courseId:r,setupOverallGradeHideMessageCallback:o}=e,[a,l]=Z.useState(!0),c=(0,tl.Fg)(),d=t4(c),u=s?d.overallGradeWrapperFixed:d.overallGradeWrapper,p=Z.useCallback(()=>{l(!0)},[]),m=Z.useCallback(()=>{t(ek.Nwg.coursePreference.persistCoursePreference(t8,r)).then(()=>{o&&o()})},[r,o,t]),h=`${i}.setup-button`,g=`${i}.hide-message-button`,f=(0,eh.useAnalyticsAugmentEventOnElement)(eh.AnalyticsEventTypes.CLICK_EVENT,()=>t0.Nd.goPeekState((0,t0.ee)()),h);return Z.createElement("div",{className:`${u} js-overall-grade-setup${s?"-fixed":""}`},Z.createElement(t7,{hidden:a,onClose:p,onHideMessage:m}),Z.createElement("div",{className:d.overallGradeSetupContent},Z.createElement("div",{className:`${d.row}`},Z.createElement("div",{className:d.overallBorder},Z.createElement("div",{className:d.overallGradeImgWrapper},Z.createElement("div",{className:d.overallGradeImage,dangerouslySetInnerHTML:{__html:t6()},"aria-hidden":!0})),Z.createElement("div",null,Z.createElement("h2",{className:`heading ${d.overallGradeSetupHeading}`},n("components.common.overallPanel.title")),Z.createElement("p",{className:d.overallGradeSetupText},n("components.common.overallPanel.text")))),Z.createElement("div",{className:d.buttonWrapper},Z.createElement("button",{onClick:f,type:"button",className:`button ${d.setupOverallBtn} js-overall-grade-setup-button`,"data-analytics-id":h},n("components.common.overallPanel.setupButton")),Z.createElement("button",{className:`button-anchor ${d.hideThisMessageLinkOverride} js-hide-this-message-button`,onClick:()=>l(!1),"data-analytics-id":g,"aria-haspopup":"dialog"},n("components.common.overallPanel.hideThisMessage"))))))};var nt=n(555342);let nn=(0,tl.ZL)(()=>(0,tl.kc)({loadingIcon:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}}));var ni=n(188505);let ns=({row:e,isOverallGradeConfigured:t,gradingSchema:n,className:i,overallGradeColumn:s,pillSize:r})=>{let o,a,l,c,d;(null==s?void 0:s.possible)&&((null==n?void 0:n.scaleType)===eA.aQo.Score||(null==n?void 0:n.scaleType)===eA.aQo.Tabular)&&(l=s.possible);let u=()=>{switch(null==n?void 0:n.scaleType){case eA.aQo.Tabular:break;case eA.aQo.Percent:return D.Percentage;case eA.aQo.Score:return D.Points;case eA.aQo.Complete:return D.Complete}return D.Tabular},p=e.overallGrade,m=Z.useRef(null),h=(0,et.q)();if(!t)return Z.createElement(ni.AnalyticsTooltip,{title:h("gradebook.studentList.table.overallGradeNotSetUpTooltip"),placement:"left-end",analyticsId:"gradebook.student-list.overall-grade-column"},Z.createElement("div",{ref:m},Z.createElement(tv,{variant:D.Tabular,pillSize:r})));if(!p||!n)return n&&n.scaleType===eA.aQo.Score?Z.createElement(tv,{variant:D.Points,pointsPossible:s&&s.possible,pillSize:r}):Z.createElement(tv,{variant:u(),pillSize:r});let g=null==p?void 0:p.displayGrade;if(g){null!==p.manualGrade&&(l=p.pointsPossible);let e=p.displayGrade,t=e.isOverride;t&&(d=T.Grey),t&&e.perfCode?(o=e.perfCode.code,c=D.Tabular):(null==n?void 0:n.scaleType)===eA.aQo.Complete?(c=D.Complete,o=e.grade,a=e.score):e.grade&&void 0!==e.score?(c=D.Tabular,o=e.grade,a=e.score):void 0!==e.score?e.requiresSchemaKnowledgeToDisplay?(c=D.Percentage,a=e.score,l=100):(c=D.Points,a=parseFloat(e.score.toFixed(2))):c=u()}let f=Z.createElement("div",{className:i},Z.createElement(tv,{grade:a,symbolGrade:o,variant:c,pointsPossible:l,colorOverride:d,pillSize:r}));return f};var nr=n(579633);let no=(0,eO.makeStyles)({anchor:{color:"inherit",textDecoration:"inherit",display:"inline-block","&:hover, &:focus, &:active":{color:"inherit",textDecoration:"inherit"}}}),na=(0,eO.makeStyles)({accommodations:{display:"inline",marginRight:"4px",verticalAlign:"middle","& svg":{height:"16px",width:"16px"}}}),nl=e=>(0,ts.pJ)(t=>e?ek.Ys.courseMembership.getMembershipPermissions(t,e):void 0),nc=e=>{let t=nl(null==e?void 0:e.courseId);return!!e&&!!t&&ek.LPT.hasAccommodations(e,t)};var nd=n(389860);let nu=()=>{let e=na(),t=(0,et.q)();return Z.createElement(nt.gi,{className:e.accommodations,titleAccess:t("gradebook.studentList.fullNameComponent.aria.accommodations")})},np=({row:e,isLink:t})=>{let n=Z.createElement(nd.K6,{user:e.user,format:nr.ILocaleUsernameFormat.Short,ariaHidden:!1}),i=no(),s=nc(e.membership),r="gradebook.studentListView.fullNameColumn.link",o=(0,eh.useAnalyticsAugmentEventOnElement)(eh.AnalyticsEventTypes.CLICK_EVENT,eh.defaultOnClick,r);return t?Z.createElement("a",{href:"#",className:i.anchor,"data-analytics-id":r,onClick:o},s?Z.createElement(nu,null):null,n):Z.createElement(Z.Fragment,null,s?Z.createElement(nu,null):null,n)},nm=({row:e})=>{let{formatDatetime:t}=(0,eB.h)();return e.membership.lastAccessDate?Z.createElement(Z.Fragment,null,t(e.membership.lastAccessDate,nr.ILocaleDatetimeFormat.Short)):Z.createElement(Z.Fragment,null,"—")};var nh=n(414294),ng=n(346522);let nf=e=>{let{row:t,className:n,courseId:i}=e,{translate:s,formatUsername:r}=(0,eB.h)(),o=t.membership.permissions.editDueDateException||t.membership.permissions.editTimeLimitException,a=t.membership.isAvailable||void 0===t.membership.isAvailable,l=Z.useCallback(()=>{t0.Nd.goPeekState((0,t0.k9)({courseId:i,recipientIds:t.user.id}))},[t.user.id,i]),c=Z.useCallback(()=>{t0.Nd.goPeekState((0,t0.xB)({membershipId:t.membership.id}))},[t.membership.id]),d={items:[...o?[{icon:Z.createElement(nh.e,null),key:"accomodations",name:s("gradebook.studentList.table.actionsMenu.accommodations"),onClick:c}]:[],...a?[{icon:Z.createElement(ng.V,null),key:"messageStudent",name:s("gradebook.studentList.table.actionsMenu.messageStudent"),onClick:l}]:[]]};return o||a?Z.createElement(tK.ActionMenu,{analyticsId:"gradebook.studentListView.studentList",ariaLabel:s("gradebook.studentList.table.actionsMenu.moreOptions",{fullName:r(t.user,nr.ILocaleUsernameFormat.Short)}),menuProps:d,className:n}):null},nb=(0,eO.makeStyles)(e=>(0,eO.createStyles)({cell:{backgroundColor:e.palette.common.white,borderTop:"none",paddingTop:"0",paddingBottom:"0"},headerTitle:{display:"inline-flex"},invisibleIcon:{height:"8px",verticalAlign:"middle",color:e.palette.common.black},tooltip:{maxWidth:"175px"},nowrap:{whiteSpace:"nowrap"}})),nv=({analyticsId:e})=>{let t=(0,et.q)(),n=nb();return Z.createElement(el.AnalyticsTooltip,{analyticsId:`${e}.tableCell.overallGrade.visibilityInformationTooltip`,classes:{tooltip:n.tooltip},title:t("course.grades.gradeVisibilityTooltip"),placement:"top"},Z.createElement(el.AnalyticsIconButton,{className:n.invisibleIcon,analyticsId:`${e}.tableCell.overallGrade.visibilityInformationTooltip.button`,"aria-label":t("course.grades.gradeVisibilityIcon")},Z.createElement(em.Invisible,null)))};(g=M||(M={})).fullName="fullName",g.lastAccessDate="lastAccessDate",g.overallGrade="overallGrade",g.studentId="studentId",g.username="username",g.actionMenu="actionMenu";let ny=M.fullName,nC=(e,t)=>e===M.lastAccessDate?[{field:eA.PJt.LastAccessDate,direction:t}]:e===M.studentId?[{field:eA.PJt.StudentId,direction:t}]:e===M.username?[{field:eA.PJt.Username,direction:t}]:e===M.overallGrade?[{field:eA.PJt.Grade,direction:t}]:[{field:eA.PJt.FamilyName,direction:e===M.fullName?t:eA.SrV.Ascending},{field:eA.PJt.GivenName,direction:e===M.fullName?t:eA.SrV.Ascending}],nS=e=>({row:t})=>{let n=e(t);return n?Z.createElement(Z.Fragment,null,n):Z.createElement(Z.Fragment,null,"—")},nE={[M.fullName]:{largeBreakpointSize:3,key:M.fullName,renderContent:e=>Z.createElement(np,{...e,isLink:!0}),renderHeader:e=>Z.createElement(Z.Fragment,null,e.t("gradebook.studentList.table.fullName")),sortable:!0},[M.studentId]:{largeBreakpointSize:1,key:M.studentId,renderContent:nS(e=>e.user.studentId),renderHeader:e=>Z.createElement(Z.Fragment,null,e.t("gradebook.studentList.table.studentId")),sortable:!0},[M.username]:{largeBreakpointSize:2,key:M.username,renderContent:nS(e=>e.user.userName),renderHeader:e=>Z.createElement(Z.Fragment,null,e.t("gradebook.studentList.table.username")),sortable:!0},[M.lastAccessDate]:{largeBreakpointSize:4,key:M.lastAccessDate,renderContent:nm,renderHeader:e=>Z.createElement(Z.Fragment,null,e.t("gradebook.studentList.table.lastAccessDate")),sortable:!0},[M.overallGrade]:{largeBreakpointSize:2,key:M.overallGrade,renderContent:ns,renderHeader:e=>Z.createElement(Z.Fragment,null,e.isOverallGradeHidden&&Z.createElement(nv,{analyticsId:e.analyticsId}),e.t("gradebook.studentList.table.overallGrade")),sortable:!1},[M.actionMenu]:{largeBreakpointSize:1,key:M.actionMenu,renderContent:e=>Z.createElement("div",{onClick:e=>e.stopPropagation()},Z.createElement(nf,{row:e.row,courseId:e.courseId})),renderHeader:()=>Z.createElement("span",null),hideHeaderText:!0,sortable:!1}},nI=[M.fullName,M.studentId,M.username,M.lastAccessDate,M.overallGrade,M.actionMenu],nw=(e,t)=>e.map(e=>(nE[e].key===M.overallGrade&&(nE[e].sortable=t),nE[e])),nA=(e,t)=>e.filter(e=>e.key!==M.overallGrade||t),nk=[{label:"25",value:"25"},{label:"50",value:"50"},{label:"100",value:"100"}],nx=nk.map(e=>Number(e.value)),nT=e=>0>nx.indexOf(Number(e))?{value:"25",label:"25"}:{value:`${e}`,label:`${e}`},nP=(0,eO.makeStyles)(e=>(0,eO.createStyles)({fullNameCell:{fontWeight:e.typography.fontWeightSemiBold}})),nD=(e,t,n)=>e===M.fullName?`${t.fullNameCell} ${n}`:"",nG=({analyticsId:e,column:t,colIndex:n,data:i,isOverallGradeConfigured:s,hoverClass:r,courseId:o,gradingSchema:a,overallGradeColumn:l})=>{let c=nP(),d=nD(t.key,c,r);return Z.createElement(el.AnalyticsTableCell,{"aria-colindex":n,"aria-describedby":`studentListTable_header_${t.key}`,analyticsId:`${e}.tableCell.${t.key}`,className:`js-student-list-view-table-body-cell ${d}`,tabIndex:-1},Z.createElement(t.renderContent,{row:i,isOverallGradeConfigured:s,courseId:o,gradingSchema:a,overallGradeColumn:l}))},nR=(0,eO.makeStyles)(e=>(0,eO.createStyles)({hoverTarget:{},tableRow:{"&:hover":{backgroundColor:e.palette.background.b3,cursor:"pointer","& $hoverTarget":{textDecoration:"underline"}}},disabled:{cursor:"default","&:hover":{textDecoration:"none",cursor:"default"},"& a:hover":{cursor:"default"}}})),nB=({data:e,courseId:t,analyticsId:n,isOverallGradeConfigured:i,columns:s,rowIndex:r,gradingSchema:o,overallGradeColumn:a,isDisabled:l})=>{var c,d,u;let p=nR(),m=Z.useCallback(()=>{var n,i;t0.Nd.goPeekState((0,t0.gO)({courseId:t,userId:null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.id,membershipId:null===(i=null==e?void 0:e.membership)||void 0===i?void 0:i.id}))},[t,null===(c=null==e?void 0:e.user)||void 0===c?void 0:c.id,null===(d=null==e?void 0:e.membership)||void 0===d?void 0:d.id]),h=Z.useMemo(()=>nA(s,i),[s,i]);return Z.createElement(el.AnalyticsTableRow,{"aria-rowindex":r,analyticsId:`${n}.tableRow`,className:(0,eN.Z)("js-student-list-view-body-row",p.tableRow,l?p.disabled:""),key:null===(u=null==e?void 0:e.user)||void 0===u?void 0:u.id,onClick:l?void 0:m},h.map((s,r)=>Z.createElement(nG,{colIndex:r+1,analyticsId:n,data:e,column:s,key:s.key,isOverallGradeConfigured:i,hoverClass:p.hoverTarget,courseId:t,gradingSchema:o,overallGradeColumn:a})))},nL=({analyticsId:e,bodyData:t,columns:n,isDataLoading:i,courseId:s,isOverallGradeConfigured:r,gradingSchema:o,overallGradeColumn:a,isDisabled:l})=>{let c=nn(),d=(0,et.q)();return Z.createElement(el.AnalyticsTableBody,{analyticsId:`${e}.tableBody`,className:"js-student-list-view-body"},i?Z.createElement(el.AnalyticsTableRow,{analyticsId:`${e}.loadingIcon.tableRow.container`},Z.createElement(el.AnalyticsTableCell,{analyticsId:`${e}.loadingIcon.tableCell.container`,colSpan:n.length},Z.createElement("div",{className:c.loadingIcon},Z.createElement(el.AnalyticsCircularProgress,{ariaLabel:d("components.studentListView.loadingIconAriaLabel"),size:"large"})))):t.map((t,i)=>{var c;return Z.createElement(nB,{rowIndex:i+1,data:t,key:null===(c=t.user)||void 0===c?void 0:c.id,courseId:s,isOverallGradeConfigured:r,analyticsId:e,columns:n,gradingSchema:o,overallGradeColumn:a,isDisabled:l})}))},nN=({analyticsId:e,column:t,isOverallGradeHidden:n})=>{let i=(0,et.q)(),s=nb(),r=t.key===M.studentId,o=`${e}.tableCell.${t.key}`;return t.sortable?Z.createElement(el.AnalyticsSortableTableHeaderCell,{id:`studentListTable_header_${t.key}`,analyticsId:o,columnId:t.key,tableCellProps:{className:`js-student-list-view-table-header-cell js-student-list-view-table-header-cell-${t.key} large-${t.largeBreakpointSize} ${s.cell}${r?` ${s.nowrap}`:""}`}},Z.createElement(t.renderHeader,{t:i,analyticsId:e,isOverallGradeHidden:n})):Z.createElement(el.AnalyticsTableCell,{analyticsId:o,className:`js-student-list-view-table-header-cell js-student-list-view-table-header-cell-${t.key} large-${t.largeBreakpointSize} ${s.cell}${r?` ${s.nowrap}`:""}`,tabIndex:-1},Z.createElement(t.renderHeader,{t:i,analyticsId:e,isOverallGradeHidden:n}))},nO=(0,eO.makeStyles)({row:{height:"40px"}}),nM=({analyticsId:e,columns:t,isOverallGradeHidden:n,isOverallGradeConfigured:i})=>{let s=nO(),r=Z.useMemo(()=>nA(t,i),[t,i]);return Z.createElement(el.AnalyticsTableHead,{analyticsId:`${e}.tableHead`,className:"js-student-list-view-header"},Z.createElement(el.AnalyticsTableRow,{analyticsId:`${e}.tableRow`,className:`js-student-list-view-header-row ${s.row}`},r.map(t=>Z.createElement(nN,{analyticsId:e,column:t,key:`studentListView.tableHeaderCell.${t.key}`,isOverallGradeHidden:n}))))},n$=e=>{let{analyticsId:t,isLoading:n,bodyData:i,columnData:s,courseId:r,isOverallGradeConfigured:o,isOverallGradeHidden:a,gradingSchema:l,onSortChanged:c,overallGradeColumn:d}=e,u=(0,et.q)(),p=Z.useCallback(e=>(c&&c(e.sortColumnId,e.sortDirection),!0),[c]),m=Z.useCallback((e,t)=>{let n=u(`gradebook.studentList.table.${e}`);return u(`components.studentListTable.ariaSortMessage.${t}`,{columnName:n})},[u]),h=(0,ts.pJ)(e=>ek.Ys.courseEntitlements.userHasCourseEntitlement(e,r,R.ViewException)),g=(0,ts.pJ)(e=>ek.Ys.courseEntitlements.userHasCourseEntitlement(e,r,R.AssessmentViewException));return Z.createElement(el.AnalyticsTableContainer,{analyticsId:`${t}.container`},Z.createElement(el.AnalyticsSortableTable,{id:"student-list-view_table",analyticsId:`${t}.table`,tableProps:{className:"js-student-list-view-table"},getAriaSortMessage:m,onSortChanged:p,initialSortColumnId:ny,initialSortDirection:"asc"},Z.createElement(nM,{analyticsId:`${t}.table`,columns:s,isOverallGradeHidden:a,isOverallGradeConfigured:o}),Z.createElement(nL,{analyticsId:`${t}.table`,bodyData:i,columns:s,isDataLoading:n,courseId:r,isOverallGradeConfigured:o,gradingSchema:l,overallGradeColumn:d,isDisabled:!(h&&g)})))},nH=e=>(0,ts.pJ)(t=>ek.Ys.gradebookColumn.getGradebookColumnsByCourseId(t,e)),nF=e=>{let t=(0,ts.Lx)();return(0,Z.useEffect)(()=>{t(ek.Nwg.gradebookColumn.loadGradebookColumnsByCourseId(e))},[t,e]),nH(e).filter(e=>e.externalGrade)[0]},nU=(0,eO.makeStyles)(e=>(0,eO.createStyles)({loadingIcon:{display:"inline-flex",width:"100%",alignItems:"center",justifyContent:"center"},firstStudentCard:{borderTop:`1px solid ${e.palette.border.main}`},overallGradeInfo:{paddingBottom:"16px",fontStyle:"italic"},infoIcon:{verticalAlign:"middle",marginRight:"8px"}}));var nV=n(173475),n_=n(456412);let nq=(0,eO.makeStyles)(e=>(0,eO.createStyles)({smallBreakpointGradePill:{marginTop:"14px"},cardRoot:{"&:hover":{backgroundColor:e.palette.background.b3},"&:hover a $smallBreakpointUserName":{textDecoration:"underline"},borderStyle:"none none solid none",borderBottom:`1px solid ${e.palette.border.main}`},cardContent:{display:"flex"},smallBreakpointUserName:{fontWeight:e.typography.fontWeightSemiBold},smallBreakpointStudentId:{marginBottom:"8px"},cardLink:{"&:hover, &:active, &:focus":{color:"inherit",textDecoration:"inherit"},color:"inherit",textDecoration:"inherit",width:"100%"},smallBreakpointActionMenu:{alignSelf:"flex-end",position:"absolute",right:"0px"}})),nz=e=>{let[t,n]=(0,Z.useState)("#");return(0,Z.useEffect)(()=>{t0.Nd.getPeekHref((0,t0.gO)(e)).then(e=>{n(e)})},[e]),t};var nW=n(810920);let nj=e=>{var t;let{data:n,isOverallGradeConfigured:i,gradingSchema:s,classes:r,overallGradeColumn:o}=e,a=(0,et.q)();return Z.createElement(Z.Fragment,null,Z.createElement("div",{className:`${r.smallBreakpointUserName}`},Z.createElement(np,{row:n})),(null===(t=n.user)||void 0===t?void 0:t.studentId)&&Z.createElement("div",{className:r.smallBreakpointStudentId},n.user.studentId),n.membership.lastAccessDate&&Z.createElement("div",null,a("gradebook.studentList.card.lastAccessedOn",{lastAccessDateControl:Z.createElement(nm,{row:n})})),i&&Z.createElement(ns,{row:n,className:r.smallBreakpointGradePill,isOverallGradeConfigured:i,gradingSchema:s,overallGradeColumn:o}))},nZ=(0,eh.withAnalytics)(e=>{var t,n;let{analyticsId:i,data:s,courseId:r,isOverallGradeConfigured:o,gradingSchema:a,analyticsEventAugmentor:l,overallGradeColumn:c}=e,d=nq(),u=nz({courseId:r,userId:null===(t=null==s?void 0:s.user)||void 0===t?void 0:t.id,membershipId:null===(n=null==s?void 0:s.membership)||void 0===n?void 0:n.id}),p="gradebook.studentListView.studentCard.link";return Z.createElement(nV.B,{analyticsId:`${i}.card`,className:d.cardRoot},Z.createElement(n_.P,{analyticsId:`${i}.cardContent`,className:d.cardContent},Z.createElement("a",{className:d.cardLink,href:u,"data-analytics-id":p,onClick:l(nW.U.CLICK_EVENT,eh.defaultOnClick,p)},Z.createElement(nj,{data:s,isOverallGradeConfigured:o,gradingSchema:a,classes:d,overallGradeColumn:c})),Z.createElement(nf,{row:s,className:d.smallBreakpointActionMenu,courseId:r})))}),nK=e=>{let{analyticsId:t,bodyData:n,isLoading:i,courseId:s,isOverallGradeConfigured:r,isOverallGradeHidden:o,gradingSchema:a,overallGradeColumn:l}=e,c=nU(),d=(0,et.q)();return i?Z.createElement("div",{className:c.loadingIcon},Z.createElement(el.AnalyticsCircularProgress,{ariaLabel:d("components.studentListView.loadingIconAriaLabel"),size:"large"})):Z.createElement(Z.Fragment,null,o&&Z.createElement("div",{className:c.overallGradeInfo},Z.createElement(em.Information,{className:c.infoIcon}),Z.createElement("span",null,d("course.grades.gradeVisibilityTooltip"))),n.map((e,n)=>Z.createElement("div",{className:0===n?c.firstStudentCard:"",key:n},Z.createElement(nZ,{key:e.user.userName,analyticsId:t,data:e,courseId:s,isOverallGradeConfigured:r,gradingSchema:a,overallGradeColumn:l}))))},nX=(0,eO.makeStyles)(e=>(0,eO.createStyles)({pageInfo:{display:"inline-flex",margin:"14px 16px 13px 0",alignItems:"center",fontWeight:e.typography.fontWeightBold},pageInfoSmall:{textAlign:"center",marginTop:"8px",fontWeight:e.typography.fontWeightBold},pageSize:{display:"inline-flex",margin:"14px 0 13px 0",alignItems:"center"},searchTextControl:{[e.breakpoints.up("md")]:{width:"340px"},width:"100%",margin:"14px 0 13px 0"},smallIconButton:{minWidth:"26px",maxHeight:"40px"},tableHeader:{display:"inline-flex",justifyContent:"space-between",width:"100%",flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row"}},searchTooltipWrapper:{display:"flex",alignItems:"center"},pagingOptions:{display:"inline-flex",flexDirection:"row",marginBottom:"13px",justifyContent:"center",[e.breakpoints.up("md")]:{justifyContent:"flex-start",marginBottom:"0px"},"& .paging-component-button":{boxSizing:"border-box"}},pagingControl:{paddingTop:"35px","& .paging-component":{[e.breakpoints.up("sm")]:{justifyContent:"flex-end"},"& .paging-component-button":{boxSizing:"border-box"}}}})),nY=e=>{let t=(0,ts.Lx)();return(0,Z.useEffect)(()=>{t(ek.Nwg.course.fetchCourse(e))},[t,e]),(0,ts.pJ)(t=>ek.Ys.course.getCourseById(t,e))},nQ=e=>{let t=nY(e),n=(null==t?void 0:t.isAvailable)===!0&&(null==t?void 0:t.isClosed)===!0,i=(0,ts.bW)(e,"course.gradebook.MODIFY");return i&&t&&!n},nJ=e=>{let t=(0,ts.Lx)();return(0,Z.useEffect)(()=>{t(ek.Nwg.gradebookColumn.loadGradebookColumnsByCourseId(e))},[t,e]),nH(e).length>0},n0=(e,t)=>{let[n,i]=(0,Z.useState)(window.localStorage.getItem(e)||t);return(0,Z.useEffect)(()=>{i(window.localStorage.getItem(e)||t)},[e]),[n,t=>{window.localStorage.setItem(e,t),i(t)}]},n1=(e,t)=>{let[n,i]=Z.useState(0),[s,r]=n0(`${e}.studentListViewPageSize`,nk[0].value),o=t?25:Number(s),a=Z.useRef(t);return Z.useEffect(()=>{if(a.current===t)return;a.current=t;let e=t?Number(s):25,r=Math.floor(e*n/o);i(r)},[t,s,n,o]),{effectiveItemsPerPage:o,page:n,setPage:i,itemsPerPage:s,setItemsPerPage:r}},n2=(e,t)=>{let n=(0,ts.Lx)(),i=(0,ts.pJ)(e=>ek.Ys.gradebookSchema.areGradebookSchemasLoading(e)),s=(0,ts.pJ)(e=>ek.Ys.gradebookSchema.getGradebookSchemaById(e,t));return(0,Z.useEffect)(()=>{e&&t&&!s&&!i&&n(ek.Nwg.gradebookSchema.loadGradebookSchema({courseId:e,schemaId:t}))},[n,e,t,s,i]),s},n3=(e,t)=>Math.max(1,Math.ceil(e/t)),n9=e=>{var t,n,i,s,r,o,a;let l;let{analyticsId:c,courseId:d,currentUserId:u}=e,p=(0,et.q)(),m=nX((0,tl.Fg)()),h=(0,tl.Fg)(),g=(0,tl.ac)(h.breakpoints.down("xs")),{page:f,setPage:b,itemsPerPage:v,setItemsPerPage:y,effectiveItemsPerPage:C}=n1(u,g),[S,E]=Z.useState(""),[I,w]=Z.useState(),[A,k]=Z.useState(),[x,T]=Z.useState(!1),P=Z.useRef(),D=nC(I,A),G=nF(d),R=(0,ts.ye)(ek.x40.OverallGradeSorting),{memberships:B,users:L,view:N}=(0,ts.d$)({courseId:d,filter:{searchString:S,roleBucket:[eA.O8v.Taking]},paging:{limit:C,offset:f*C},sort:D,columnId:I===M.overallGrade?null==G?void 0:G.id:void 0}),O=(0,ts.yH)(t8.key,d),$=nJ(d),H=(0,ts.vr)(d,null==G?void 0:G.id,B),F=nQ(d),U=F&&$&&!G&&(null==O?void 0:O.value)!=="true",V=n2(d,null==G?void 0:G.gradingSchemaId),_=Z.useCallback((0,eL.debounce)(e=>{b(0),E(e)},250),[]),q=Z.useCallback(e=>{b(0),y(e.toString())},[b,y]),z=B.map(e=>{let t=L[e.userId];return{user:t,membership:e,overallGrade:H&&H[e.userId]}}),W=Z.useCallback((e,t)=>{w(e),k(t)},[]),j=nw(nI,R),K=!(null===(t=null==G?void 0:G.visible)||void 0===t||t),X=p(`gradebook.studentList.common.search.${g?"short":"long"}`),Y=null!==(i=null===(n=null==N?void 0:N.paging)||void 0===n?void 0:n.count)&&void 0!==i?i:0,Q=Number.isInteger(null===(s=null==N?void 0:N.paging)||void 0===s?void 0:s.offset)?N.paging.offset+1:0,J=Number.isInteger(null===(r=null==N?void 0:N.paging)||void 0===r?void 0:r.offset)?N.paging.offset+z.length:0,ee="student-list-filter-tooltip";l=G?(null==N?void 0:N.isLoading)||!K&&!V:null==N?void 0:N.isLoading;let en=Z.useCallback(()=>{T(!0)},[]),ei=Z.useCallback(()=>{T(!1)},[]);return Z.useEffect(()=>{let e=P.current;return e&&(e.addEventListener("focus",en),e.addEventListener("blur",ei)),()=>{e&&(e.removeEventListener("focus",en),e.removeEventListener("blur",ei))}},[en,ei]),Z.createElement(Z.Fragment,null,Z.createElement("div",{className:m.tableHeader},Z.createElement("div",{className:m.searchTooltipWrapper},Z.createElement(nt._W,{inputId:"student-list-filter-input",analyticsId:`${c}.filter.input`,inputRef:P,label:p("gradebook.studentList.common.search.abbreviated"),InputProps:{inputProps:{"aria-describedby":ee}},TextFieldProps:{fullWidth:!1,className:m.searchTextControl},onChange:_}),Z.createElement(el.AnalyticsTooltip,{id:ee,analyticsId:`${c}.filter.tooltip`,open:x,placement:"top-start",onOpen:en,onClose:ei,title:X},Z.createElement(el.AnalyticsIconButton,{id:"student-list-filter-tooltip-iconButton",analyticsId:`${c}.filter.tooltip.iconButton`,className:m.smallIconButton,"aria-label":p("gradebook.studentList.common.search.tooltipAriaLabel")},Z.createElement(em.Information,null)))),Z.createElement("div",{className:m.pagingOptions},!g&&Z.createElement(Z.Fragment,null,!l&&Z.createElement(nt.yZ,{className:m.pageInfo,totalItems:Y,rangeStart:Q,rangeEnd:J}),Z.createElement(nt.Y0,{className:m.pageSize,pageSizeOptions:nk.map(({value:e})=>Number(e)),initialPageSize:nT(v).value,onPageSizeChange:q,analyticsId:c})),(null==N?void 0:N.paging)&&Z.createElement(nt.Vd,{page:f,className:"paging-component",compact:g,numberOfPages:n3(null===(o=null==N?void 0:N.paging)||void 0===o?void 0:o.count,C),onPageChange:b,analyticsId:c}))),g&&Z.createElement(nK,{analyticsId:c,bodyData:z,isLoading:l,isOverallGradeConfigured:!!G,isOverallGradeHidden:K,courseId:d,gradingSchema:V,overallGradeColumn:G}),!g&&Z.createElement(n$,{analyticsId:c,columnData:j,bodyData:z,isLoading:l,isOverallGradeConfigured:!!G,isOverallGradeHidden:K,courseId:d,onSortChanged:W,gradingSchema:V,overallGradeColumn:G}),(null==N?void 0:N.paging)&&Z.createElement("div",{className:m.pagingControl},Z.createElement(nt.Vd,{className:"paging-component",compact:g,page:f,numberOfPages:n3(null===(a=null==N?void 0:N.paging)||void 0===a?void 0:a.count,C),onPageChange:b,analyticsId:c}),g&&!l&&Z.createElement(nt.yZ,{className:m.pageInfoSmall,totalItems:Y,rangeStart:Q,rangeEnd:J})),U&&Z.createElement(ne,{analyticsId:`${c}.overallGradeSetup`,showFixedView:!1,courseId:d}))},n4=(0,eO.makeStyles)(()=>(0,eO.createStyles)({panelFooter:{position:"absolute",bottom:0,left:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}}})),n7=e=>{let{analyticsId:t,onClickApply:n,onClickCancel:i,isFiltersPanelDirty:s}=e,r=n4(),o=(0,et.q)();return Z.createElement("div",{className:r.panelFooter},Z.createElement(es.BbPanelFooter,{primaryButtonProps:{text:o("gradebook.gridFiltersPanel.footer.apply"),onClick:n,disabled:!s},secondaryButtonProps:{text:o("gradebook.gridFiltersPanel.footer.cancel"),onClick:i},analyticsId:t}))},n5=(0,eO.makeStyles)(()=>(0,eO.createStyles)({header:{"& .ms-Panel-header":{boxShadow:"none"}},body:{marginTop:"24px",marginBottom:"48px"},clearFilters:{marginBottom:"8px",height:"29px"},filter:{marginBottom:"16px"}})),n6=e=>{let{inputId:t,analyticsId:n,courseId:i,onSelectionChange:s}=e,r=(0,et.q)(),o=e.selectedMembershipIds||[],a=o.join(""),l=(0,ts.pJ)(e=>ek.Ys.courseMembership.getUsersFromMembershipIds(e,o).map(e=>null==e?void 0:e.id)),[c,d]=(0,Z.useState)(l),u=(0,ts.pJ)(e=>ek.Ys.courseMembership.getCourseMembershipsByUserIds(e,i,c).map(e=>null==e?void 0:e.id)),p=u.join(""),m=(0,ts.pJ)(e=>ek.Ys.courseMembership.getUsersFromMembershipIds(e,u)),[h,g]=(0,Z.useState)(!1),f=(0,Z.useCallback)(e=>{g(!0),d(e.map(e=>null==e?void 0:e.id))},[d]);(0,Z.useEffect)(()=>{h&&p!==a&&s(u),g(!1)},[p,a,h]),(0,Z.useEffect)(()=>{d(l)},[l.join(""),c.join("")]);let b={inputId:t,analyticsId:n,courseId:i,placeholder:r("gradebook.gridFiltersPanel.memberships.placeholder"),selectedUsers:m,onMemberSelectionChanged:f,selectionLimit:100,label:r("gradebook.gridFiltersPanel.memberships.label"),roleBuckets:[eA.O8v.Taking]},v=!c.some(e=>!e);return v?Z.createElement(nd.JD,{...b}):Z.createElement(el.AnalyticsCircularProgress,{ariaLabel:r("gradebook.gridFiltersPanel.memberships.loading"),size:"small"})},n8=e=>{let{inputId:t,courseId:n,analyticsId:i,onSelectionChange:s,selectedGroupIds:r}=e,o=(0,et.q)(),a=(0,Z.useCallback)(e=>{s(e.map(e=>e.id))},[s]),l=(0,ts.pJ)(e=>ek.Ys.group.getCourseGroupsByIds(e,r)),c=!l.some(e=>!e);return c?Z.createElement(nd.j4,{inputId:t,label:o("gradebook.gridFiltersPanel.groups.label"),courseId:n,analyticsId:i,placeholder:o("gradebook.gridFiltersPanel.groups.placeholder"),selectionLimit:100,selectedGroups:l,onSelectedGroupsChanged:a}):Z.createElement(el.AnalyticsCircularProgress,{ariaLabel:o("gradebook.gridFiltersPanel.groups.loading"),size:"small"})};var ie=n(197236);(f=$||($={})).Formative="formative",f.Summative="summative";let it=(e,t)=>{let n=[...e],i=n.indexOf(t);return -1!==i?n.splice(i,1):n.push(t),n},ii=e=>{let t=(0,nt.fp)(),{selectedAssessmentTypes:n,onSelectionChange:i,analyticsId:s}=e,r=(0,et.q)(),o=(0,Z.useCallback)((e,t)=>{let s=e.target.value;i(it(n,s))},[n,i]);return Z.createElement(ie.c,{legendText:r("gradebook.gridFiltersPanel.assessmentTypes.title"),legendVariant:"h4"},Object.values($).map(e=>Z.createElement(el.AnalyticsFormControlLabel,{label:r(`gradebook.gridFiltersPanel.assessmentTypes.types.${e}`),className:t.checkboxMarginFix,htmlFor:e,control:Z.createElement(el.AnalyticsCheckbox,{id:e,value:e,checked:n.includes(e),analyticsId:`${s}.pickAssessmentTypeCheckbox.${e}`,onChange:o}),analyticsId:`${s}.pickAssessmentTypeLabel.${e}`,key:e})))},is=(e,t)=>{if(e.localizableTitle){let n=e.localizableTitle.languageKey.toLowerCase();return t(`categories.${n}`)}return e.title},ir=/-/g,io=(e,t,n)=>e&&e.sort((e,i)=>{var s;let r=is(e,t),o=is(i,t),a=(null===(s=null==n?void 0:n.match(ir))||void 0===s?void 0:s.length)>1?n.split("-",2).join("-"):n;return r.localeCompare(o,a)}),ia=e=>{let t=(0,nt.fp)(),{categories:n,selectedCategoryIds:i,onSelectionChange:s,analyticsId:r}=e,{translate:o,locale:a}=(0,eB.h)(),l=io(n,o,a),c=(e,t)=>{let n=[...e],i=n.indexOf(t);return -1!==i?n.splice(i,1):n.push(t),n},d=(0,Z.useCallback)(e=>{let t=e.target.value;s(c(i,t))},[i,s]);return Z.createElement(ie.c,{legendText:o("gradebook.gridFiltersPanel.categoriesTitle"),legendVariant:"h4"},l.map(e=>Z.createElement(el.AnalyticsFormControlLabel,{label:is(e,o),className:t.checkboxMarginFix,htmlFor:e.id,control:Z.createElement(el.AnalyticsCheckbox,{id:e.id,value:e.id,checked:i.includes(e.id),analyticsId:`${r}.pickCategoryCheckbox.${e.id}`}),analyticsId:`${r}.pickCategoryLabel.${e.id}`,key:e.id,onChange:d})))},il=e=>{let t=(0,ts.Lx)(),n=(0,ts.pJ)(t=>ek.Ys.gradebookCategory.getGradebookCategoriesByCourseId(t,e));return(0,Z.useEffect)(()=>{n||t(ek.Nwg.gradebookCategory.loadGradebookCategoriesByCourseId(e))},[t,e,n]),n},ic=e=>{let[t,n]=(0,Z.useState)(!1),i=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params);return(0,Z.useEffect)(()=>{var t;let{selectedMembershipIds:s,selectedGroupIds:r,selectedCourses:o,selectedAssessmentTypes:a,selectedCategoryIds:l,selectedColumnIds:c}=e,d=i.memberId?i.memberId!==(null==s?void 0:s.join(",")):(null==s?void 0:s.length)>0,u=i.courseGroupId?i.courseGroupId!==(null==r?void 0:r.join(",")):(null==r?void 0:r.length)>0,p=i.childCourseId?i.childCourseId!==(null==o?void 0:o.join(",")):(null==o?void 0:o.length)>0,m=i.gradebookAssessmentType?i.gradebookAssessmentType!==(null==a?void 0:a.join(",")):(null==a?void 0:a.length)>0,h=i.gradebookCategoryId?i.gradebookCategoryId!==(null==l?void 0:l.join(",")):(null==l?void 0:l.length)>0,g=i.gradebookColumnId?i.gradebookColumnId!==(null==c?void 0:c.join(",")):(null!==(t=null==c?void 0:c.length)&&void 0!==t?t:0)>0,f=d||u||p||m||h||g;n(f)},[i.memberId,i.courseGroupId,i.childCourseId,i.gradebookAssessmentType,i.gradebookCategoryId,i.gradebookColumnId,e,e.selectedMembershipIds,e.selectedGroupIds,e.selectedCourses,e.selectedAssessmentTypes,e.selectedCategoryIds,e.selectedColumnIds]),t},id=(0,eO.makeStyles)(e=>(0,eO.createStyles)({dialogTitle:{"& h1":{fontFamily:e.typography.fontFamily}}})),iu=e=>{let{showConfirmationModal:t,analyticsId:n,handleOnClose:i,handleOnConfirmation:s}=e,r=(0,et.q)(),o="cancel-grid-advanced-filters",a=id(e);return Z.createElement(en._X,{analyticsId:n,open:t,maxWidth:"md",onClose:i,"aria-labelledby":`${o}-dialog-title`},Z.createElement(el.AnalyticsDialogTitle,{analyticsId:`${n}.titleClose.button`,id:`${o}-dialog-title`,onClick:i,className:a.dialogTitle},r("gradebook.gridFiltersPanel.confirmationDialog.title")),Z.createElement(el.AnalyticsDialogContent,{analyticsId:`${n}.content`},Z.createElement(el.AnalyticsDialogContentText,{analyticsId:"",id:`${o}-dialog-description`},r("gradebook.gridFiltersPanel.confirmationDialog.content"))),Z.createElement(el.AnalyticsDialogActions,{analyticsId:`${n}.actions`},Z.createElement(el.AnalyticsDefaultButton,{analyticsId:`${n}.close.button`,onClick:i},r("gradebook.gridFiltersPanel.confirmationDialog.cancel")),Z.createElement(el.AnalyticsPrimaryButton,{analyticsId:`${n}.confirmation.button`,onClick:s},r("gradebook.gridFiltersPanel.confirmationDialog.confirmation"))))},ip=e=>{let{inputId:t,analyticsId:n,courseId:i,onSelectionChange:s,selectedColumnsIds:r}=e,o=(0,et.q)(),a=(0,ts.pJ)(e=>{let t=ek.Ys.gradebookColumn.getGradebookColumnsByIds(e,r);return Object.keys(t).map(e=>t[e])}),l=(0,Z.useCallback)(e=>{s(e.map(e=>e.id))},[s]),c=!a.some(e=>!e);return c?Z.createElement(nd.Ad,{inputId:t,analyticsId:`${n}.pickColumns`,courseId:i,onColumnSelectionChanged:l,selectedColumns:a,selectionLimit:100,label:o("gradebook.gridFiltersPanel.gradebookColumns.label"),placeholder:o("gradebook.gridFiltersPanel.gradebookColumns.placeholder")}):Z.createElement(el.AnalyticsCircularProgress,{ariaLabel:o("gradebook.gridFiltersPanel.gradebookColumns.loading"),size:"small"})},im=(0,eO.makeStyles)(e=>(0,eO.createStyles)({choiceLabel:{marginLeft:"-8px"},paragraph:{color:e.palette.text.secondary,marginBottom:"12px",fontStyle:"italic",fontWeight:e.typography.fontWeightRegular},divider:{border:"1px solid",borderColor:e.palette.secondary.main,margin:"16px 0px 0px 0px",height:"0px"}}));var ih=n(140172);let ig=e=>{let t=(0,ts.pJ)(t=>ek.Ys.courseChildren.byParentCourseId(t,e)),n=(0,ts.Lx)();return Z.useEffect(()=>{t||n(ek.Nwg.courseChildren.loadChildCourses(e))},[n,e,t]),t},ib=e=>{let t=im(),{childCourses:n,selectedChildCourseIds:i,onSelectionChanged:s,analyticsId:r}=e,o=(0,et.q)(),a=(0,Z.useCallback)(e=>{let t=e.target.value;s(function(e,t){let n=[...e],i=n.indexOf(t);return -1!==i?n.splice(i,1):n.push(t),n}(i,t))},[i,s]);return Z.createElement(eO.CheckboxGroup,{legendText:o("gradebook.gridFiltersPanel.mergedCourses.label"),legendVariant:"h4"},Z.createElement(el.AnalyticsTypography,{className:t.paragraph,variant:"subtitle2"},o("gradebook.gridFiltersPanel.mergedCourses.guide")),n.map((e,n)=>Z.createElement(el.AnalyticsFormControlLabel,{label:e.childCourse.name,className:t.choiceLabel,htmlFor:`standard-checkbox-${e.childCourse.id}`,control:Z.createElement(el.AnalyticsCheckbox,{id:`standard-checkbox-${e.childCourse.id}`,checked:i.includes(e.childCourse.id),value:e.childCourse.id,onChange:a,analyticsId:`${r}.pickMergedCourse.Checkbox.${e.childCourse.id}`}),analyticsId:`${r}.pickMergedCourse.${n}`,key:e.childCourse.id})),Z.createElement(ih.i,{className:`${t.divider}`,variant:"middle"}))},iv=e=>{var t,n,i,s,r,o,a,l,c,d,u,p;let{courseId:m,onFiltersChanged:h,analyticsId:g}=e,f=n5(),b=(0,et.q)(),v=(0,ts.ye)(ek.x40.FormativeAssessment),[y,C]=Z.useState(!1),S=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams),E=null!==(n=null===(t=null==S?void 0:S.memberId)||void 0===t?void 0:t.split(","))&&void 0!==n?n:[],I=null!==(s=null===(i=null==S?void 0:S.courseGroupId)||void 0===i?void 0:i.split(","))&&void 0!==s?s:[],w=null!==(o=null===(r=null==S?void 0:S.gradebookColumnId)||void 0===r?void 0:r.split(","))&&void 0!==o?o:[],A=null!==(l=null===(a=null==S?void 0:S.gradebookAssessmentType)||void 0===a?void 0:a.split(","))&&void 0!==l?l:[],k=null!==(d=null===(c=null==S?void 0:S.gradebookCategoryId)||void 0===c?void 0:c.split(","))&&void 0!==d?d:[],x=null!==(p=null===(u=null==S?void 0:S.childCourseId)||void 0===u?void 0:u.split(","))&&void 0!==p?p:[],[T,P]=(0,Z.useState)(E),[D,G]=(0,Z.useState)(x),[R,B]=(0,Z.useState)(w),[L,N]=(0,Z.useState)(A),[O,M]=(0,Z.useState)(k),[$,H]=(0,Z.useState)(I),[F,U]=(0,Z.useState)(!1),V=il(m),_=ig(m),q=ic({selectedMembershipIds:T,selectedGroupIds:$,selectedCourses:D,selectedAssessmentTypes:L,selectedCategoryIds:O,selectedColumnIds:R});(0,Z.useEffect)(()=>{h(q)},[q]);let z=(0,Z.useCallback)(()=>{let e={...S,memberId:void 0,childCourseId:void 0,gradebookAssessmentType:void 0,gradebookCategoryId:void 0,gradebookColumnId:void 0,courseGroupId:void 0};T.length>0&&(e.memberId=T.join(",")),D.length>0&&(e.childCourseId=D.join(",")),L.length>0&&(e.gradebookAssessmentType=L.join(",")),O.length>0&&(e.gradebookCategoryId=O.join(",")),R.length>0&&(e.gradebookColumnId=R.join(",")),$.length>0&&(e.courseGroupId=$.join(",")),t0.Nd.search(e),h(!1),t0.Nd.leavePeekState()},[L,O,$,T,D,R]),W=(0,Z.useCallback)(()=>{T.length>0&&P([]),D.length>0&&G([]),L.length>0&&N([]),O.length>0&&M([]),R.length>0&&B([]),$.length>0&&H([]),U(!1),h(!0)},[h,L,O,$,T,D,R]),j=(0,Z.useCallback)(()=>{h(!1),C(!1),t0.Nd.leavePeekState()},[h]),K=(0,Z.useCallback)(()=>{q?C(!0):(h(!1),t0.Nd.leavePeekState())},[q,h]);(0,Z.useEffect)(()=>{U(T.length>0||D.length>0||R.length>0||L.length>0||O.length>0||$.length>0)},[L,O,$,T,D,R]);let X=b("gradebook.gridFiltersPanel.header.clearAll");return Z.createElement("div",{className:"grid-filters-panel"},y&&Z.createElement(iu,{analyticsId:`${g}.cancel`,showConfirmationModal:y,handleOnClose:()=>C(!1),handleOnConfirmation:j}),Z.createElement("div",{className:"panel-wrap"},Z.createElement("div",{className:`panel-header simple-header ${f.header}`},Z.createElement(es.BbPanelHeader,{title:b("gradebook.gridFiltersPanel.header.title"),smallHeaderTitle:b("gradebook.gridFiltersPanel.header.smallTitle"),type:es.BbPanelType.peek,analyticsId:`${g}.header`,hideNavMenu:!0,panelContentRight:F?Z.createElement(el.AnalyticsLink,{className:f.clearFilters,"aria-label":X,variant:"button",tabIndex:0,href:"#",analyticsId:`${g}.clearAllFilters`,onClick:W},X):null})),Z.createElement("div",{className:`panel-body panel-content ${f.body}`},(null==_?void 0:_.length)>0?Z.createElement("div",{className:`${f.filter}`},Z.createElement(ib,{childCourses:_,analyticsId:`${g}.mergedCoursesPicker`,selectedChildCourseIds:D,onSelectionChanged:G})):null,Z.createElement("div",{className:`${f.filter}`},Z.createElement(n6,{inputId:"student-picker",courseId:m,selectedMembershipIds:T,onSelectionChange:P,analyticsId:`${g}.membershipsPicker`})),Z.createElement("div",{className:`${f.filter}`},Z.createElement(n8,{inputId:"groups-picker",courseId:m,selectedGroupIds:$,analyticsId:`${g}.groupsPicker`,onSelectionChange:H})),Z.createElement("div",{className:`${f.filter}`},Z.createElement(ip,{inputId:"gradable-items-picker",courseId:m,analyticsId:`${g}.gradebookColumnsPicker`,selectedColumnsIds:R,onSelectionChange:B})),v&&Z.createElement("div",{className:`${f.filter}`},Z.createElement(ii,{analyticsId:`${g}.assessmentTypesPicker`,selectedAssessmentTypes:L,onSelectionChange:N})),(null==V?void 0:V.length)&&Z.createElement("div",{className:`${f.filter}`},Z.createElement(ia,{analyticsId:`${g}.categoriesPicker`,categories:V,selectedCategoryIds:O,onSelectionChange:M})))),Z.createElement(n7,{onClickApply:z,onClickCancel:K,isFiltersPanelDirty:q,analyticsId:`${g}.footer`}))},iy=(0,eO.makeStyles)(e=>(0,eO.createStyles)({gradeOptionDescription:{color:e.palette.text.secondary,marginLeft:"20px"}}));(b=H||(H={})).Gradebook="gradebook",b.GradeHistory="gradeHistory";let iC=[H.Gradebook,H.GradeHistory],iS=[eA.nMe.Tab,eA.nMe.Comma],iE=[{id:"_All",value:eA.RjJ.AllTime},{id:"_6Months",value:eA.RjJ.SixMonths},{id:"_30Days",value:eA.RjJ.ThirtyDays},{id:"_14Days",value:eA.RjJ.FourteenDays},{id:"_7Days",value:eA.RjJ.SevenDays},{id:"_1Day",value:eA.RjJ.OneDay}],iI=[eA.JdL.MyDevice,eA.JdL.ContentCollection],iw=Z.memo(e=>{let{analyticsId:t,gradeOption:n,onChangeGradeOption:i}=e,s=(0,et.q)(),r=iy(),o="gradebook.grades-download";return Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsTypography,{variant:"h2",gutterBottom:!0},s(`${o}.downloadOptions`)),Z.createElement(el.AnalyticsRadioGroup,{analyticsId:`${t}.grade-options`,hasCustomLegend:!1,legendVariant:"h3",legendText:s(`${o}.gradeRecords.title`),value:n,onChange:e=>i(e.target.value)},iC.map(e=>Z.createElement(Z.Fragment,{key:e},Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:`${o}.gradeRecords.${e}.description`,value:e,htmlFor:`radio-${e}-id`,control:Z.createElement(el.AnalyticsRadio,{id:`radio-${e}-id`,analyticsId:`${t}.${e}.input.radio`,inputProps:{"aria-describedby":`${e}-record-id`}}),label:s(`${o}.gradeRecords.${e}.title`)}),Z.createElement(el.AnalyticsTypography,{id:`${e}-record-id`,component:"span",className:r.gradeOptionDescription},s(`${o}.gradeRecords.${e}.description`))))))}),iA=(0,eO.makeStyles)(()=>(0,eO.createStyles)({showMoreButton:{marginTop:"8px"}}));var ik=n(443400);let ix=e=>e.filter(e=>e.checked).map(e=>e.value),iT=e=>!!e.id&&!!e.columnName,iP=e=>({value:e.id||"-",label:e.columnName||"-",checked:!1}),iD=e=>e.filter(iT).map(iP),iG=e=>e.filter(e=>e.calculationType===eA.eNW.NonCalculated&&iT(e)).map(iP),iR=(e,t,n)=>e.map(e=>({...e,checked:!!n||t.includes(e.value)})),iB=e=>{let t=(0,ik.mg)();window.location.href=t+e},iL=(e,t,n)=>{if(!e)return!1;let i=0;for(let s=0;s<e.length;s++)if(t(e[s])&&n(i+=1))return!0;return!1},iN=(e,t,n)=>{var i,s;let{gradebookColumns:r,view:o}=(0,ts.nh)({courseId:e,paging:{limit:n}}),a=t(r);return{columns:a,totalColumns:null!==(s=null===(i=null==o?void 0:o.paging)||void 0===i?void 0:i.count)&&void 0!==s?s:0,view:o}},iO=e=>{var t;let{courseId:n,onChange:i,analyticsId:s,converter:r,selectedColumnIds:o,onChangeSelectAllItems:a,selectAllItems:l,children:c}=e,d=(0,et.q)(),u=iA(),p="gradebook.grades-download.grade-history.RecordDetails",[m,h]=(0,Z.useState)(50),[g,f]=(0,Z.useState)([]),{columns:b,view:v,totalColumns:y}=iN(n,r,m);(0,Z.useEffect)(()=>{if(null==v?void 0:v.isLoading)return;let e=iR(b,o,l);f(e)},[null==v?void 0:v.isLoading,null===(t=null==v?void 0:v.paging)||void 0===t?void 0:t.limit]);let C=(0,Z.useCallback)(e=>{f(t=>{let n=e(t);return null==i||i(n),n})},[f,i]);return(null==v?void 0:v.isLoading)?Z.createElement(el.AnalyticsCircularProgress,{ariaLabel:d(`${p}.MultiselectCheckbox.loading`),size:"small"}):Z.createElement(Z.Fragment,null,Z.createElement(nt.q8,{analyticsId:s,items:g,checkboxGroupLegendText:d(`${p}.header.title`),headerDescription:d(`${p}.header.description`),selectAllItemsLabel:d(`${p}.MultiselectCheckbox.selectAll.Label`),onChange:C,onChangeSelectAllItems:a}),y>50&&m!==y&&Z.createElement(el.AnalyticsLink,{analyticsId:"course.grades.grades-download-settings.showMore",className:u.showMoreButton,component:"button",onClick:()=>{h(y)}},d("gradebook.grades-download.common.showMore")),c)},iM=(0,eO.makeStyles)(e=>(0,eO.createStyles)({fileTypeDescription:{color:e.palette.text.secondary,marginBottom:"13px"}})),i$=Z.memo(e=>{let{analyticsId:t,delimiterType:n,onChangeDelimiterType:i}=e,s=(0,et.q)(),r=iM(),o="gradebook.grades-download";return Z.createElement(el.AnalyticsRadioGroup,{id:"gradesDownload.delimiterType.RadioGroup",analyticsId:`${t}.delimiterType.RadioGroup`,hasCustomLegend:!1,legendVariant:"h3",legendText:s(`${o}.delimiterType.LegendText`),value:n,onChange:e=>i(e.target.value)},Z.createElement("span",{className:r.fileTypeDescription},s(`${o}.delimiterType.description`)),iS.map(e=>Z.createElement(el.AnalyticsFormControlLabel,{key:e,value:e,htmlFor:`radio-${e}-id`,control:Z.createElement(el.AnalyticsRadio,{analyticsId:`${t}.delimiterType.${e}.Radio`,id:`radio-${e}-id`}),label:s(`${o}.delimiterType.${e}.Label`),analyticsId:`course.grades.grades-download-settings.${e}.input.radio`})))}),iH=(0,eO.makeStyles)(e=>(0,eO.createStyles)({switchControlRoot:{marginLeft:"auto"},switchFormControlLabelPlacementStart:{marginRight:"0"},switchFormControlLabel:{display:"flex",justifyContent:"space-between",marginLeft:"0"},switchFormControlLabelDisabled:{color:`${e.palette.primary.light}`},switchFormControlRoot:{width:"100%"}})),iF=e=>{let{enableFlag:t,flagValue:n,setFlagValue:i,flagControlId:s,i18nFlagLabelKey:r,analyticsId:o,disabled:a}=e,l=(0,et.q)(),c=iH();return t?Z.createElement("div",{className:"bottom-option stretch-message"},Z.createElement(el.AnalyticsFormControl,{analyticsId:"record.details.extra.check.formControl",className:c.switchFormControlRoot},Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:"record.details.extra.check.formControlLabel",label:l(r),htmlFor:s,control:Z.createElement(el.AnalyticsSwitch,{analyticsId:`${o}.switchExtraCheck`,id:s,checked:n,onChange:e=>{i(e.target.checked)},disabled:!!a,classes:{root:c.switchControlRoot}}),labelPlacement:"start",className:c.switchFormControlLabel,classes:{labelPlacementStart:c.switchFormControlLabelPlacementStart,label:c.switchFormControlLabelDisabled}}))):null},iU=(0,eO.makeStyles)(e=>(0,eO.createStyles)({contentCollection:{display:"flex",marginTop:"10px","& input":{border:"0",marginBottom:"0"},[e.breakpoints.down("xs")]:{flexDirection:"column"}},contentCollectionFormControl:{flex:"1",[e.breakpoints.down("xs")]:{marginBottom:"16px"}}})),iV=Z.memo(e=>{let{analyticsId:t,saveLocation:n,contentCollectionUrl:i,onChangeSaveLocation:s,onChangeContentCollectionUrl:r}=e,o=(0,et.q)(),a=iU(),l="gradebook.grades-download",c=n===eA.JdL.ContentCollection;return Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsRadioGroup,{id:"gradesDownload.saveLocation.RadioGroup",analyticsId:`${t}.saveLocation.RadioGroup`,hasCustomLegend:!1,legendVariant:"h3",legendText:o(`${l}.saveLocation.LegendText`),value:n,onChange:e=>s(e.target.value)},iI.map(e=>Z.createElement(el.AnalyticsFormControlLabel,{key:e,value:e,htmlFor:`radio-${e}-id`,control:Z.createElement(el.AnalyticsRadio,{analyticsId:`course.grades.grades-download-settings.${e}.input.radio`,id:`radio-${e}-id`}),label:o(`${l}.saveLocation.${e}.Label`),analyticsId:`${t}.saveLocation.${e}.Label`}))),c&&Z.createElement("div",{className:a.contentCollection},Z.createElement(el.AnalyticsTextField,{analyticsId:"course.grades.grades-download-settings.content.collection.input.text",id:"content-collection-url-input",className:a.contentCollectionFormControl,value:i,onChange:e=>r(e.target.value)}),Z.createElement(el.AnalyticsPrimaryButton,{analyticsId:"course.grades.grades-download-settings.browse",onClick:()=>{t0.Nd.goPeekState({routeName:"content-collection-picker",getArgs:()=>({pickerType:"Folder",multi:"false"})})}},o(`${l}.saveLocation.browse`))))}),i_=(0,eO.makeStyles)(e=>(0,eO.createStyles)({messageFeedback:{color:e.palette.text.secondary}})),iq=({enableFlag:e,messageKey:t})=>{let n=(0,et.q)(),i=i_();return e?Z.createElement("div",{className:"bottom-option stretch"},Z.createElement("span",{className:i.messageFeedback},n(t))):null},iz=(e,t,n)=>{iL(e,e=>e.checked,e=>e>1)?(t(!0),n(!1)):t(!1)},iW=(e,t)=>{let n=(0,Z.useCallback)(n=>{iz(n,e,t)},[e,t]);return n},ij=e=>(0,tl.kc)({styles:{backgroundColor:e.palette.border.main,margin:"20px 0"}}),iZ=({courseId:e,analyticsId:t,delimiterType:n,saveLocation:i,contentCollectionUrl:s,onChangeSaveLocation:r,onChangeContentCollectionUrl:o,onChangeDelimiterType:a,includeFeedbackFlag:l,setIncludeFeedbackFlag:c,includeFeedbackControlId:d,onChangeSelectedColumnItems:u,selectedColumnIds:p,onChangeSelectAllItems:m,selectAllItems:h})=>{let g=(0,eO.makeStyles)(ij)(),[f,b]=(0,Z.useState)(!1),v="gradebook.grades-download.grade-history.RecordDetails",y=iW(b,c),C=(0,Z.useCallback)(e=>{y(e),u(e)},[y,u]);return Z.createElement(Z.Fragment,null,Z.createElement(iO,{courseId:e,analyticsId:t,selectedColumnIds:p,selectAllItems:h,onChange:C,converter:iD,onChangeSelectAllItems:m},Z.createElement(iF,{analyticsId:t,enableFlag:!0,flagControlId:d,flagValue:l,setFlagValue:c,disabled:f,i18nFlagLabelKey:`${v}.MultiselectCheckbox.includeFeedback.Label`}),Z.createElement(iq,{messageKey:`${v}.MultiselectCheckbox.includeFeedback.FeedbackDescription`,enableFlag:f})),Z.createElement(ih.i,{className:g.styles}),Z.createElement(i$,{analyticsId:t,delimiterType:n,onChangeDelimiterType:a}),Z.createElement(ih.i,{className:g.styles}),Z.createElement(iV,{analyticsId:t,saveLocation:i,contentCollectionUrl:s,onChangeSaveLocation:r,onChangeContentCollectionUrl:o}))},iK=Z.memo(({options:e,analyticsId:t,defaultSelectedValue:n,onChange:i})=>{let s=(0,et.q)(),r="gradebook.grades-download.grade-history",[o,a]=(0,Z.useState)(n);return Z.createElement(el.AnalyticsTextField,{fullWidth:!0,className:"lastmodifiedDatePicker_Container",analyticsId:`${t}.lastmodifiedDatePicker`,id:"lastmodifiedDatePicker",select:!0,label:s(`${r}.lastmodifiedDatePicker.Label`),"aria-label":s(`${r}.lastmodifiedDatePicker.AriaLabel`),value:o,onChange:e=>{let t=e.target.value;a(t),i(t)}},e.map(e=>Z.createElement(el.AnalyticsMenuItem,{button:!0,key:e.id,value:e.value,analyticsId:`${t}.lastmodifiedDatePicker.${e.value}`},s(`${r}.lastmodifiedDatePicker.${e.id}.Label`))))}),iX=({courseId:e,analyticsId:t,delimiterType:n,lastModifiedDate:i,onChangeDelimiterType:s,onChangeLastModifiedDate:r,includeDeletedItemsFlag:o,setIncludeDeletedItemsFlag:a,includeDeletedItemsControlId:l,saveLocation:c,contentCollectionUrl:d,onChangeSaveLocation:u,onChangeContentCollectionUrl:p,onChangeSelectedColumnItems:m,selectedColumnIds:h,onChangeSelectAllItems:g,selectAllItems:f})=>{let b=(0,eO.makeStyles)(ij)();return Z.createElement(Z.Fragment,null,Z.createElement(iO,{courseId:e,analyticsId:t,selectedColumnIds:h,selectAllItems:f,converter:iG,onChangeSelectAllItems:g,onChange:m},Z.createElement(iF,{analyticsId:t,enableFlag:!0,flagControlId:l,flagValue:o,setFlagValue:a,i18nFlagLabelKey:"gradebook.grades-download.grade-history.RecordDetails.MultiselectCheckbox.includeDeletedItems.Label"})),Z.createElement(ih.i,{className:b.styles}),Z.createElement(iK,{analyticsId:t,defaultSelectedValue:i,options:iE,onChange:r}),Z.createElement(ih.i,{className:b.styles}),Z.createElement(i$,{analyticsId:t,delimiterType:n,onChangeDelimiterType:s}),Z.createElement(ih.i,{className:b.styles}),Z.createElement(iV,{analyticsId:t,saveLocation:c,contentCollectionUrl:d,onChangeSaveLocation:u,onChangeContentCollectionUrl:p}))},iY=(0,eO.makeStyles)(e=>(0,eO.createStyles)({body:{marginTop:"22px",marginBottom:"48px",[e.breakpoints.down("xs")]:{marginTop:"0"}},divider:{...ij(e).styles}})),iQ=(0,eO.makeStyles)(()=>(0,eO.createStyles)({panelFooter:{position:"absolute",bottom:0,left:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}}})),iJ=e=>{let{onClickDownload:t,onClickCancel:n,isDownloadDisabled:i,isGradeHistory:s}=e,r=(0,et.q)(),o=iQ();return Z.createElement("div",{className:o.panelFooter},Z.createElement(es.BbPanelFooter,{primaryButtonProps:{text:r("gradebook.grades-download.footer.download"),onClick:t,disabled:i},secondaryButtonProps:{text:r("gradebook.grades-download.common.cancel"),onClick:n},analyticsId:s?"course.grades.grades-download.settings.gradeHistoryDownloadAction":"course.grades.grades-download.settings.downloadAction"}))},i0="course.grade.gradesDownloadSettings.download",i1="gradebook.grades-download.download",i2=e=>{let{isOpen:t,isGradeHistory:n,onClose:i,onTryAgain:s}=e,r=(0,et.q)(),o=r(n?`${i1}.gradeHistoryFailed`:`${i1}.gradebookFailed`);return Z.createElement(en._X,{open:t,onClose:i,"aria-labelledby":"download-grades-error-title","aria-describedby":"download-grades-error-modal",analyticsId:`${i0}.error.modal`},Z.createElement(el.AnalyticsDialogTitle,{analyticsId:`${i0}.error.title`,onClose:i,id:"download-grades-error-title"},r(`${i1}.failedTitle`)),Z.createElement(el.AnalyticsDialogContent,{analyticsId:`${i0}.error.content`},Z.createElement(el.AnalyticsDialogContentText,{analyticsId:`${i0}.error.text`,id:"download-grades-error-modal"},o)),Z.createElement(el.AnalyticsDialogActions,{analyticsId:`${i0}.error.actions`},Z.createElement(el.AnalyticsDefaultButton,{analyticsId:`${i0}.cancel.button`,onClick:i},r("gradebook.grades-download.common.cancel")),Z.createElement(el.AnalyticsPrimaryButton,{analyticsId:`${i0}.tryAgain.button`,onClick:s},r(`${i1}.tryAgain`))))},i3=e=>{let t=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).name),n=(0,Z.useCallback)(n=>{if("classic-picker-submit"===n.data.messageId&&(t.endsWith("peek.content-collection-picker")&&t0.Nd.leavePeekState(t),n.data.items.length)){let t=n.data.items[0];e(t.filePath)}"classic-picker-cancel"===n.data.messageId&&t.endsWith("peek.content-collection-picker")&&t0.Nd.leavePeekState(t)},[t]);(0,Z.useEffect)(()=>(window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}),[n])},i9=(e,t)=>e&&t?eA.cc9.HistoryLogAll:e&&!t?eA.cc9.HistoryLog:t?eA.cc9.All:eA.cc9.ByColumns,i4=(e,t)=>{switch(e){case eA.RjJ.AllTime:t.setTime(0);break;case eA.RjJ.FourteenDays:t.setDate(t.getDate()-14);break;case eA.RjJ.OneDay:t.setDate(t.getDate()-1);break;case eA.RjJ.SevenDays:t.setDate(t.getDate()-7);break;case eA.RjJ.SixMonths:t.setDate(t.getDate()-180);break;case eA.RjJ.ThirtyDays:t.setDate(t.getDate()-30)}return t};var i7=n(263407),i5=n(776517);let i6=e=>{let{courseId:t,analyticsId:n}=e,i=iY(),s=(0,et.q)(),[r,o]=(0,Z.useState)(H.Gradebook),[a,l]=(0,Z.useState)(eA.RjJ.AllTime),[c,d]=(0,Z.useState)(!1),[u,p]=(0,Z.useState)(!1),[m,h]=(0,Z.useState)([]),[g,f]=(0,Z.useState)(eA.nMe.Tab),[b,v]=(0,Z.useState)(eA.JdL.MyDevice),[y,C]=(0,Z.useState)(""),[S,E]=(0,Z.useState)(!1),[I,w]=(0,Z.useState)(!1),[A,k]=(0,Z.useState)(!1),x=nY(t),T=r===H.GradeHistory;i3(C);let{enqueueSnackbar:P}=(0,nt.Ds)(nt.VW.GradesDownloadToasts,!1),D=()=>{h([]),d(!1),p(!1),w(!1)},G=(0,Z.useCallback)(e=>{o(e),D()},[]),R=(0,Z.useCallback)(e=>{f(e)},[f]),B=(0,Z.useCallback)(e=>{v(e)},[v]),L=(0,Z.useCallback)(e=>{C(e)},[C]),N=(0,Z.useCallback)(e=>{l(e)},[l]),O=(0,Z.useCallback)(e=>{h(ix(e))},[h]),M=(0,Z.useCallback)(e=>{w(e)},[w]),$=async()=>{(0,i5.sA)(i5.Cs.GradeBookDownloadButtonClicked);let e={icon:Z.createElement(i7.f,null),snackbarMessage:s("gradebook.grades-download.download.successful"),isPersistent:!1},n={closeButtonAriaLabel:s("gradebook.grades-download.download.closeSnackbarAriaLabel")},i={delimiterType:g,downloadTo:b,dataScopeType:i9(T,I),contentCollectionUrl:y,columnIds:I?void 0:m,isShowComments:!!T||u,lastModifiedDate:T?i4(a,new Date):void 0,isDeletedItemsIncluded:!!T&&c};k(!0);try{let s=await (0,ek.I5k)(t,i);"SUCCESS"===s.responseCode?(P(e,n),b===eA.JdL.MyDevice&&s.downloadUrl&&iB(s.downloadUrl),t0.Nd.leavePeekState()):E(!0)}catch(e){E(!0)}finally{k(!1)}};return Z.createElement(Z.Fragment,null,Z.createElement("div",{className:"panel-wrap"},Z.createElement("div",{className:"panel-header simple-header"},Z.createElement(es.BbPanelHeader,{title:s("gradebook.grades-download.header.title"),smallHeaderTitle:null==x?void 0:x.displayName,type:es.BbPanelType.peek,analyticsId:`${n}.header`,hideNavMenu:!0})),Z.createElement("div",{className:`panel-body panel-content ${i.body}`},Z.createElement(iw,{analyticsId:n,gradeOption:r,onChangeGradeOption:G}),Z.createElement(ih.i,{className:i.divider}),!T&&Z.createElement(iZ,{courseId:t,analyticsId:n,delimiterType:g,saveLocation:b,selectedColumnIds:m,contentCollectionUrl:y,selectAllItems:I,onChangeDelimiterType:R,includeFeedbackFlag:u,setIncludeFeedbackFlag:p,includeFeedbackControlId:"include-feedback",onChangeSaveLocation:B,onChangeContentCollectionUrl:L,onChangeSelectedColumnItems:O,onChangeSelectAllItems:M}),T&&Z.createElement(iX,{courseId:t,analyticsId:n,delimiterType:g,lastModifiedDate:a,selectAllItems:I,onChangeDelimiterType:R,onChangeLastModifiedDate:N,includeDeletedItemsFlag:c,setIncludeDeletedItemsFlag:d,includeDeletedItemsControlId:"include-deleteditems",saveLocation:b,contentCollectionUrl:y,selectedColumnIds:m,onChangeSaveLocation:B,onChangeContentCollectionUrl:L,onChangeSelectedColumnItems:O,onChangeSelectAllItems:M}))),Z.createElement(iJ,{onClickCancel:()=>{t0.Nd.leavePeekState()},onClickDownload:()=>$(),isDownloadDisabled:(()=>{let e=m.length;return!!A||0===e&&!c||b===eA.JdL.ContentCollection&&""===y})(),isGradeHistory:T}),Z.createElement(i2,{isOpen:S,isGradeHistory:T,onClose:()=>E(!1),onTryAgain:()=>{E(!1),$()}}))},i8={marginRight:"8px",marginBottom:"8px",height:"29px"},se=(0,eO.makeStyles)(()=>(0,eO.createStyles)({skeletonChip:{...i8,backgroundColor:"rgba(0, 0, 0, 0.3 )",display:"inline-flex",width:"80px",borderRadius:"16px",transform:"initial"}})),st=()=>{let e=se();return Z.createElement(eO.Skeleton,{className:e.skeletonChip})},sn=(e,t)=>{let n=(0,ts.Lx)(),i=(0,ts.pJ)(e=>ek.Ys.courseMembership.getCourseMembershipByMembershipId(e,t));(0,Z.useEffect)(()=>{i&&i.userId||n(ek.Nwg.courseMembership.loadCourseMembershipByMemberId(e,t))},[n,t,e,i]);let s=(0,ts.pJ)(e=>{let t=null==i?void 0:i.user;return t||(t=ek.Ys.user.getUserById(e,null==i?void 0:i.userId)),t}),r=null==i?void 0:i.userId;return(0,Z.useEffect)(()=>{r&&!s&&n(ek.Nwg.user.loadUser(r))},[n,s,r]),s},si=e=>{let{formatUsername:t}=(0,eB.h)(),{userNameFormat:n,analyticsId:i,membershipId:s,courseId:r,onDelete:o,className:a}=e,l=(0,Z.useCallback)(()=>o(s),[o,s]),c=sn(r,s);return c?Z.createElement(el.AnalyticsChip,{analyticsId:i,disabled:!c,className:a,label:t(c,n||nr.ILocaleUsernameFormat.Short),onDelete:l}):Z.createElement(st,null)},ss=(e,t)=>{let n=(0,ts.Lx)(),i=(0,ts.pJ)(e=>ek.Ys.group.getGroupByGroupId(e,t));return(0,Z.useEffect)(()=>{i||n(ek.Nwg.group.loadGroupById(e,t))},[n,i,t,e]),i},sr=e=>{let{analyticsId:t,courseId:n,groupId:i,onDelete:s,className:r}=e,o=(0,Z.useCallback)(()=>s(i),[s,i]),a=ss(n,i);return a?Z.createElement(el.AnalyticsChip,{analyticsId:t,disabled:!a,label:a.title,onDelete:o,className:r}):Z.createElement(st,null)},so=(e,t)=>{let n=(0,ts.Lx)(),i=(0,ts.pJ)(e=>ek.Ys.gradebookColumn.getGradebookColumnById(e,t));return(0,Z.useEffect)(()=>{i||n(ek.Nwg.gradebookColumn.loadGradebookColumn({courseId:e,columnId:t}))},[n,i,t,e]),i},sa=e=>{let{analyticsId:t,courseId:n,columnId:i,onDelete:s,className:r}=e,o=(0,Z.useCallback)(()=>s(i),[s,i]),a=so(n,i);return a?Z.createElement(el.AnalyticsChip,{analyticsId:t,disabled:!a,className:r,label:a.columnName,onDelete:o}):Z.createElement(st,null)},sl=e=>{let{analyticsId:t,assessmentType:n,onDelete:i,className:s}=e,r=(0,et.q)(),o=(0,Z.useCallback)(()=>i(n),[i,n]);return Object.values($).includes(n)?Z.createElement(el.AnalyticsChip,{analyticsId:t,disabled:!n,className:s,label:r(`gradebook.gridFiltersPanel.assessmentTypes.types.${n}`),onDelete:o}):Z.createElement(st,null)},sc=e=>{let{analyticsId:t,categoryId:n,onDelete:i,className:s}=e,r=(0,et.q)(),o=(0,Z.useCallback)(()=>i(n),[i,n]),a=(0,ts.pJ)(e=>ek.Ys.gradebookCategory.getGradebookCategoryById(e,n));return a?Z.createElement(el.AnalyticsChip,{analyticsId:t,disabled:!a,className:s,label:is(a,r),onDelete:o}):Z.createElement(st,null)},sd=(e,t)=>{let n=(0,ts.Lx)(),i=(0,ts.pJ)(e=>ek.Ys.courseChildren.byChildCourseId(e,t));return(0,Z.useEffect)(()=>{i||n(ek.Nwg.courseChildren.loadChildCourse(e,t))},[n,e,t,i]),i},su=e=>{let{analyticsId:t,parentCourseId:n,childCourseId:i,onDelete:s,className:r}=e,o=(0,Z.useCallback)(()=>s(i),[s,i]),a=sd(n,i);return(null==a?void 0:a.childCourse)?Z.createElement(el.AnalyticsChip,{analyticsId:t,disabled:!a,label:a.childCourse.name,onDelete:o,className:r}):Z.createElement(st,null)},sp={marginRight:"8px",marginBottom:"8px",height:"29px"},sm=(0,eO.makeStyles)(e=>(0,eO.createStyles)({filterChips:{display:"flex",flexWrap:"wrap",marginTop:"8px"},filtersApplied:{...sp,fontWeight:e.typography.fontWeightSemiBold},clearFilters:{...sp},chip:{paddingTop:"7px",backgroundColor:"rgba(0, 0, 0, 0.3 )",...sp},chipButton:{marginBottom:"-4px"}}));function sh(e,t){return e.filter(e=>e!==t)}let sg=e=>{let{courseId:t,analyticsId:n,membershipIds:i,onMembershipIdsChanged:s,groupIds:r,onGroupIdsChanged:o,gradeColumnIds:a,onGradeColumnIdsChanged:l,gradeAssessmentTypes:c,onGradeAssessmentTypesChanged:d,gradeCategoryIds:u,onGradeCategoryIdsChanged:p,childCourseIds:m,onChildCourseIdsChanged:h,onClearAllFilters:g}=e,f=sm(),b=(0,et.q)(),v=(0,Z.useCallback)(e=>s(sh(i,e)),[s,i]),y=i.map((e,i)=>Z.createElement(si,{analyticsId:`${n}.courseMember.chip.${i}`,courseId:t,membershipId:e,onDelete:v,key:e,className:f.chip})),C=(0,Z.useCallback)(e=>o(sh(r,e)),[o,r]),S=r.map((e,i)=>Z.createElement(sr,{analyticsId:`${n}.group.chip.${i}`,courseId:t,groupId:e,onDelete:C,key:e,className:f.chip})),E=(0,Z.useCallback)(e=>{l(sh(a,e))},[a,l]),I=a.map((e,i)=>Z.createElement(sa,{key:e,columnId:e,courseId:t,analyticsId:`${n}.gradeColumn.chip.${i}`,onDelete:E,className:f.chip})),w=(0,Z.useCallback)(e=>{d(sh(c,e))},[c,d]),A=c.map((e,i)=>Z.createElement(sl,{key:e,assessmentType:e,courseId:t,analyticsId:`${n}.assessmentType.chip.${i}`,onDelete:w,className:f.chip})),k=(0,Z.useCallback)(e=>{p(sh(u,e))},[u,p]),x=u.map((e,i)=>Z.createElement(sc,{key:i,analyticsId:`${n}.gradeColumn.chip.${i}`,onDelete:k,courseId:t,categoryId:e,className:f.chip})),T=(0,Z.useCallback)(e=>{h(sh(m,e))},[m,sh]),P=m.map((e,i)=>Z.createElement(su,{key:i,analyticsId:`${n}.gradeColumn.chip.${i}`,onDelete:T,parentCourseId:t,childCourseId:e,className:f.chip})),D=b("gradebook.filterChips.filtersApplied"),G=b("gradebook.filterChips.clearAll");return Z.createElement("div",{className:f.filterChips},Z.createElement("span",{className:f.filtersApplied},D),y,S,I,A,x,P,Z.createElement(el.AnalyticsLink,{className:f.clearFilters,variant:"button",analyticsId:`${n}.clearAllFilters`,onClick:g,tabIndex:0,"aria-label":G,href:"#"},G))},sf=e=>{var t,n,i,s,r,o;let a=(0,ts.pJ)(e=>{var t;return null===(t=ek.Ys.app.getRoute(e).params)||void 0===t?void 0:t.courseId}),l=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams),c=[null==l?void 0:l.gradebookView,null==l?void 0:l.memberId,null==l?void 0:l.courseGroupId,null==l?void 0:l.gradebookColumnId,null==l?void 0:l.gradebookAssessmentType,null==l?void 0:l.gradebookCategoryId,null==l?void 0:l.childCourseId],d=(null===(t=null==l?void 0:l.memberId)||void 0===t?void 0:t.split(","))||[],u=(null===(n=null==l?void 0:l.courseGroupId)||void 0===n?void 0:n.split(","))||[],p=(null===(i=null==l?void 0:l.gradebookColumnId)||void 0===i?void 0:i.split(","))||[],m=(null===(s=null==l?void 0:l.gradebookAssessmentType)||void 0===s?void 0:s.split(","))||[],h=(null===(r=null==l?void 0:l.gradebookCategoryId)||void 0===r?void 0:r.split(","))||[],g=(null===(o=null==l?void 0:l.childCourseId)||void 0===o?void 0:o.split(","))||[];il(a);let f=(0,Z.useCallback)(e=>{let t={...l,memberId:e.length>0?e.join(","):void 0};t0.Nd.search(t)},c),b=(0,Z.useCallback)(e=>{let t={...l,courseGroupId:e.length>0?e.join(","):void 0};t0.Nd.search(t)},c),v=(0,Z.useCallback)(e=>{let t={...l,gradebookColumnId:e.length>0?e.join(","):void 0};t0.Nd.search(t)},c),y=(0,Z.useCallback)(e=>{let t={...l,gradebookCategoryId:e.length>0?e.join(","):void 0};t0.Nd.search(t)},c),C=(0,Z.useCallback)(e=>{let t={...l,gradebookAssessmentType:e.length>0?e.join(","):void 0};t0.Nd.search(t)},[l]),S=(0,Z.useCallback)(e=>{let t={...l,childCourseId:e.length>0?e.join(","):void 0};t0.Nd.search(t)},c),E=(0,Z.useCallback)(()=>{let e={...l,memberId:void 0,courseGroupId:void 0,gradebookColumnId:void 0,gradebookAssessmentType:void 0,gradebookCategoryId:void 0,childCourseId:void 0};t0.Nd.search(e)},c);return Z.createElement(sg,{courseId:a,membershipIds:d,groupIds:u,gradeColumnIds:p,gradeAssessmentTypes:m,gradeCategoryIds:h,childCourseIds:g,analyticsId:e.analyticsId,onMembershipIdsChanged:f,onGroupIdsChanged:b,onGradeColumnIdsChanged:v,onGradeAssessmentTypesChanged:C,onGradeCategoryIdsChanged:y,onChildCourseIdsChanged:S,onClearAllFilters:E})},sb=(0,eO.makeStyles)(e=>(0,eO.createStyles)({categoryRuleHeader:{display:"block",fontSize:e.typography.fontSizeLarge,fontWeight:e.typography.fontWeightSemiBold,marginBottom:"16px"},categoryRuleDescription:{display:"block",fontSize:e.typography.fontSizeSmall,marginTop:"8px"},dropLabel:{display:"flex",alignItems:"center",marginLeft:"20px",flexWrap:"wrap",marginTop:"15px",fontWeight:e.typography.fontWeightRegular},dropScoreInformation:{color:e.palette.text.hint,fontSize:e.typography.fontSizeSmall,fontStyle:"italic",marginLeft:"20px"},dropScoresErrorMessage:{fontSize:e.typography.fontSizeSmall,color:e.palette.error.main},minOrMaxRadio:{display:"block",marginLeft:"20px"},numberInput:{width:"50px",margin:"0 10px"},radio:{marginTop:"16px",display:"block"},radioDescription:{marginLeft:"20px",fontSize:e.typography.fontSizeSmall,marginBottom:"6px"},radioLabel:{fontWeight:e.typography.fontWeightSemiBold},tooManyItemsDroppedErrorMessage:{color:e.palette.error.main,fontSize:e.typography.fontSizeSmall,marginLeft:"20px"}}));var sv=n(715729);(v=F||(F={})).DropScores="DROP_SCORES",v.GradeCalculationUseOnlyOption="USE_ONLY";let sy=(e,t)=>{var n,i,s;let r=(null==e?void 0:e.dropLow)||(null==e?void 0:e.dropHigh)?F.DropScores:null;null===r&&(r=(null==e?void 0:e.useOnly)?F.GradeCalculationUseOnlyOption:null);let o={dropLow:null!==(n=null==e?void 0:e.dropLow)&&void 0!==n?n:0,dropHigh:null!==(i=null==e?void 0:e.dropHigh)&&void 0!==i?i:0,useOnly:null!==(s=null==e?void 0:e.useOnly)&&void 0!==s?s:null};return{enabled:!!r,selectedRuleType:r,rules:{...o},numGradableItems:null!=t?t:0,initialState:{enabled:!!r,selectedRuleType:r,rules:{...o}}}},sC="TOGGLE_ENABLED",sS="SELECT_RULE",sE="SET_DROP_LOW",sI="SET_DROP_HIGH",sw="SET_USE_ONLY",sA="INITIALIZE_STATE",sk="ROLLBACK_INITIAL_STATE",sx={dropHigh:0,dropLow:0,useOnly:null},sT=(e,t)=>{if(t.type===sC)return(0,sv.Uy)(e,t=>{t.enabled=!e.enabled,t.selectedRuleType=null,t.rules=sx});if(t.type===sS)return(0,sv.Uy)(e,e=>{e.selectedRuleType=t.payload.ruleType,e.rules=sx});if(t.type===sE)return(0,sv.Uy)(e,e=>{e.rules.dropLow=t.payload.dropLow});if(t.type===sI)return(0,sv.Uy)(e,e=>{e.rules.dropHigh=t.payload.dropHigh});if(t.type===sw)return(0,sv.Uy)(e,e=>{e.rules.useOnly=t.payload.useOnly});if(t.type===sA)return sy(t.payload.rules,t.payload.numGradableItems);if(t.type===sk){let t=e.initialState;return(0,sv.Uy)(e,e=>{e.enabled=t.enabled,e.rules=t.rules,e.selectedRuleType=t.selectedRuleType})}return e},sP=Z.createContext({calculationRule:sy(void 0,0),dispatch:e=>{}}),sD=()=>Z.useContext(sP),sG=({calculationRule:e,numGradableItems:t,children:n})=>{let[i,s]=Z.useReducer(sT,sy(e,t));return Z.useEffect(()=>{s(s_(e,t))},[e,t]),Z.createElement(sP.Provider,{value:{calculationRule:i,dispatch:s}},n)},sR=e=>{var t,n;if(null===e.rules.dropLow||null===e.rules.dropHigh)return!1;let i=null!==(t=e.rules.dropHigh)&&void 0!==t?t:0,s=null!==(n=e.rules.dropLow)&&void 0!==n?n:0;return!!Number.isInteger(i)&&!!Number.isInteger(s)&&!(i<0)&&!(s<0)&&(0!==s||0!==i)},sB=e=>!e.enabled||(e.selectedRuleType===F.DropScores?sR(e):e.selectedRuleType===F.GradeCalculationUseOnlyOption&&!!e.rules.useOnly),sL=e=>{var t,n;let i=null!==(t=e.rules.dropHigh)&&void 0!==t?t:0,s=null!==(n=e.rules.dropLow)&&void 0!==n?n:0;return i+s+1},sN=()=>e=>!!(null!=e&&Number.isInteger(e)),sO=e=>!!e.rules.dropLow&&e.rules.dropLow>0||!!e.rules.dropHigh&&e.rules.dropHigh>0,sM=e=>{let t=e.initialState;return e.enabled!==t.enabled||e.selectedRuleType!==t.selectedRuleType||e.rules.dropHigh!==t.rules.dropHigh||e.rules.dropLow!==t.rules.dropLow||e.rules.useOnly!==t.rules.useOnly},s$=()=>({type:sC}),sH=e=>({type:sS,payload:{ruleType:e}}),sF=e=>({type:sE,payload:{dropLow:e}}),sU=e=>({type:sI,payload:{dropHigh:e}}),sV=e=>({type:sw,payload:{useOnly:e}}),s_=(e,t)=>({type:sA,payload:{rules:e,numGradableItems:t}}),sq=()=>({type:sk}),sz=()=>{var e,t;let n=sb(),{calculationRule:i,dispatch:s}=sD(),r=(0,et.q)(),o=Z.useCallback(()=>i.selectedRuleType===F.DropScores,[i]),a=o()&&Z.createElement(nt.lv,{ariaDescribedBy:"drop-scores-message",ariaLabel:r("gradebook.overallGradeCalculationPanel.dropLowestScores"),analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.dropLow.number.input",className:(0,eN.Z)(n.numberInput,"js-drop-low-scores-input"),min:0,onChange:e=>s(sF(e)),value:null!==(e=i.rules.dropLow)&&void 0!==e?e:null,validate:sN(),required:!1,hideErrorMessage:!0}),l=o()&&Z.createElement(nt.lv,{ariaDescribedBy:"drop-scores-message",ariaLabel:r("gradebook.overallGradeCalculationPanel.dropHighestScores"),analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.dropHigh.number.input",className:(0,eN.Z)(n.numberInput,"js-drop-high-scores-input"),min:0,onChange:e=>s(sU(e)),value:null!==(t=i.rules.dropHigh)&&void 0!==t?t:null,validate:sN(),required:!1,hideErrorMessage:!0});return Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.dropScores.radio.label",checked:o(),className:(0,eN.Z)(n.radio,"js-drop-scores-radio"),control:Z.createElement(el.AnalyticsRadio,{analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.dropScores.radio",id:F.DropScores}),disabled:!i.enabled,htmlFor:F.DropScores,label:Z.createElement("span",{className:n.radioLabel},r("gradebook.overallGradeCalculationPanel.dropScoresTitle")),onChange:e=>s(sH(e.target.value)),value:F.DropScores}),Z.createElement("p",{className:n.radioDescription},r("gradebook.overallGradeCalculationPanel.dropScoresDescription")),o()&&Z.createElement(Z.Fragment,null,sO(i)&&i.numGradableItems<sL(i)&&Z.createElement("p",{className:(0,eN.Z)(n.tooManyItemsDroppedErrorMessage,"js-too-many-items-message"),id:"drop-scores-message"},r("gradebook.overallGradeCalculationPanel.tooManyItemsDroppedWarning",{minGradableItems:sL(i)})),Z.createElement(el.AnalyticsInputLabel,{className:n.dropLabel,analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.dropLow.number.input.label"},r("gradebook.overallGradeCalculationPanel.dropLowestScores",{numberInput_LOCALIZED:a})),Z.createElement(el.AnalyticsInputLabel,{className:n.dropLabel,analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.dropHigh.number.input.label","aria-describedby":"drop-scores-message"},r("gradebook.overallGradeCalculationPanel.dropHighestScores",{numberInput_LOCALIZED:l}))))};class sW{constructor(e){this.exclude_alias=e}}class sj{constructor(){this.type="item",this.alias=""}}(y=U||(U={})).UseMinScore="min",y.UseMaxScore="max";let sZ="X_Running_Total";(C=V||(V={})).UseLowestScore="LOWEST",C.UseHighestScore="HIGHEST",C.Default="DEFAULT";class sK{constructor(){this.element=new sj,this.weight=0}}let sX=(e=[],{average:t=!1}={})=>({average:t,elements:e});class sY{constructor(e=[],{running:t=!0}={}){this.weights=e,this.running=t}static is(e){return!!e&&(e instanceof sY||"weights"in e)}}class sQ{constructor(e=sX(),{running:t=!0}={}){this.selected=e,this.running=t}static is(e){return!!e&&(e instanceof sQ||"selected"in e)}}class sJ{constructor({aliases:e,formula:t},n){var i,s;if(this.aliases=e,this.formula=t,-1!==t.indexOf(sZ))this.running=-1!==t.indexOf(`${sZ}=true`);else{let e=[];for(let t=0;t<=n.length;t++){let r=n.item(t);if(r)switch(r.nodeName){case"ci":case"mi":{let[,t]=null!==(s=/^@X@BBCalColElem\([^:]+:(.*)\)@X@$/.exec(null!==(i=r.textContent)&&void 0!==i?i:""))&&void 0!==s?s:[];try{let n=JSON.parse(t);"running"in n&&e.push(n.running)}catch(e){console.warn("Invalid non-JSON function body",t)}}}}this.running=0===e.length||e.some(e=>!1!==e)}}static is(e){return!!e&&(e instanceof sJ||"formula"in e)}}function s0(e,t){return sY.is(e)?t.weighted(e):sQ.is(e)?t.sumSelected(e):t.advanced(e)}let s1=()=>{let e=(0,et.q)(),t=sb(),{calculationRule:n,dispatch:i}=sD(),s=e=>{i(sV(e.target.value))};return Z.createElement("div",null,Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.useOnly.radio.label",checked:n.selectedRuleType===F.GradeCalculationUseOnlyOption,className:(0,eN.Z)(t.radio,"js-overall-grade-use-only-radio"),control:Z.createElement(el.AnalyticsRadio,{analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.useOnly.radio",id:F.GradeCalculationUseOnlyOption}),disabled:!n.enabled,htmlFor:F.GradeCalculationUseOnlyOption,label:Z.createElement("span",{className:t.radioLabel},e("gradebook.overallGradeCalculationPanel.useOnlyTitle")),onChange:e=>i(sH(e.target.value)),value:F.GradeCalculationUseOnlyOption}),Z.createElement("p",{className:t.radioDescription},e("gradebook.overallGradeCalculationPanel.useOnlyDescription")),n.selectedRuleType===F.GradeCalculationUseOnlyOption&&Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.min.radio.label",checked:n.rules.useOnly===U.UseMinScore,className:(0,eN.Z)(t.minOrMaxRadio,"js-use-only-lowest-grade"),control:Z.createElement(el.AnalyticsRadio,{analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.min.radio",id:U.UseMinScore}),htmlFor:U.UseMinScore,label:e("gradebook.overallGradeCalculationPanel.useOnlyLowest"),onChange:s,value:U.UseMinScore}),Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.max.radio.label",checked:n.rules.useOnly===U.UseMaxScore,className:(0,eN.Z)(t.minOrMaxRadio,"js-use-only-highest-grade"),control:Z.createElement(el.AnalyticsRadio,{analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.max.radio",id:U.UseMaxScore}),htmlFor:U.UseMaxScore,label:e("gradebook.overallGradeCalculationPanel.useOnlyHighest"),onChange:s,value:U.UseMaxScore})))},s2=()=>{let e=sb(),{calculationRule:t,dispatch:n}=sD(),i=(0,et.q)();return Z.createElement("div",null,Z.createElement("span",{className:e.categoryRuleHeader},i("gradebook.overallGradeCalculationPanel.categoryCalculationRuleTitle")),Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.enable.switch.label",checked:!!t.enabled,className:"js-enable-calculation-rule",control:Z.createElement(el.AnalyticsSwitch,{analyticsId:"features.course.grades.overall-grade.calculation-rule-panel.enable.switch",id:"enable"}),htmlFor:"enable",label:i("gradebook.overallGradeCalculationPanel.enableCalculationRule"),onChange:()=>n(s$())}),Z.createElement("span",{className:e.categoryRuleDescription},i("gradebook.overallGradeCalculationPanel.categoryCalculationRuleDescription")),Z.createElement("span",{className:e.categoryRuleDescription},i("gradebook.overallGradeCalculationPanel.categoryCalculationRuleDescriptionXPlus1Rule")),Z.createElement(sz,null),Z.createElement(s1,null))},s3=(0,eO.makeStyles)(e=>(0,eO.createStyles)({ruleButton:{fontSize:"12px",minHeight:"unset"},ruleText:{flexShrink:0},warning:{color:e.palette.error.main,"&:hover, &:focus, &:active":{color:e.palette.error.main}}})),s9=e=>{var t,n;if(!e)return!1;let i=null!==(t=e.dropLow)&&void 0!==t?t:0,s=null!==(n=e.dropHigh)&&void 0!==n?n:0;return i>0||s>0||!!e.useOnly},s4=(e,t)=>{var n,i;if(!s9(t))return!1;let s=null!==(n=t.dropLow)&&void 0!==n?n:0,r=null!==(i=t.dropHigh)&&void 0!==i?i:0;return s>0||r>0?s+r>=e:!t.useOnly},s7=(e,t)=>s4(e,t)?em.AlertError:s9(t)?em.Edit:em.Add,s5=(e,t)=>{var n,i;if((null==e?void 0:e.dropLow)||(null==e?void 0:e.dropHigh)){let s=Number(null!==(n=e.dropLow)&&void 0!==n?n:0)+Number(null!==(i=e.dropHigh)&&void 0!==i?i:0);return t("course.grades.overallGrade.editDropScores.plural",{numOfDrops:s})}return t((null==e?void 0:e.useOnly)?e.useOnly===U.UseMaxScore?"course.grades.overallGrade.useOnlyHighest":"course.grades.overallGrade.useOnlyLowest":"course.grades.overallGrade.editCalculationRules")},s6=({ButtonProps:e,calculationRule:t,numGradableItemsInCategory:n})=>{let i=(0,et.q)(),s=s3(),r=s7(n,t),o=s5(t,i),a=s4(n,t);return Z.createElement(el.AnalyticsIconButton,{...e,className:(0,eN.Z)(s.ruleButton,{[s.warning]:a},null==e?void 0:e.className),analyticsId:"course.grades.overallGrade.editCalculationRule"},Z.createElement(r,null),Z.createElement(el.AnalyticsTypography,{className:s.ruleText,component:"span",variant:"inherit"},o))};function s8(e){let t;if(!e.formula||""===e.formula)return null;if(-1!==e.formula.indexOf(sZ)){if(!e.formula.trim().endsWith("X_Running_Total=true")&&!e.formula.trim().endsWith("X_Running_Total=false"))return null;t=e.formula.substring(0,e.formula.indexOf(sZ))}else t=e.formula;let n=new DOMParser,i=n.parseFromString(t,"text/xml"),s=i.children[0];if("math"!==s.nodeName)return null;let r=s.childNodes;if(0===r.length)return null;if(r.length>1||-1===["ci","mi"].indexOf(r[0].nodeName))return new sJ(e,r);let o=r[0];switch(o.nodeName){case"ci":case"mi":{if(null===o.textContent)return null;let t=/^@X@BBCalColElem\(([^:]+):(.*)\)@X@$/.exec(o.textContent);if(null===t)return null;let[,n,i]=t;try{let t=JSON.parse(i);if("sum"===n){let n=t.selected.elements.some(e=>"equal"===e.mode);if(n)return new sJ(e,r);return new sQ(t.selected,{running:t.running})}if("wgt"===n)return new sY(t.weights,{running:t.running});return new sJ(e,r)}catch(e){console.error(e)}}}return null}function re(e,t,n=Object.keys(t.reduce((e,t)=>t.gradebookCategoryId?{...e,[t.gradebookCategoryId]:null}:e,{}))){var i;let s=null!==(i=null==e?void 0:e.aliases)&&void 0!==i?i:{},r=e?s8(e):null,o=r?s0(r,{weighted:e=>e.weights.map(e=>e.element),sumSelected:e=>e.selected.elements,advanced:()=>[]}):[],a=o.reduce((e,t)=>"cat"===t.type?{...e,[s[t.alias]]:t}:e,{}),l=o.reduce((e,t)=>"item"===t.type?{...e,[s[t.alias]]:t}:e,{}),c=sY.is(r)?r.weights.reduce((e,t)=>({...e,[t.element.alias]:t.weight}),{}):{},d=t.filter(e=>!l[e.id]),u=(e,t,{isExempted:n}={})=>{var i,s,r;let o=e.id;if(!o)return null;let a=null!==(s=null===(i=null==t?void 0:t.exclude_list)||void 0===i?void 0:i.map(e=>e.exclude_alias))&&void 0!==s?s:[];return{column:e,el:t,id:o,isCalculation:e.calculationType!==eA.eNW.NonCalculated,isUncategorizedItem:void 0===e.gradebookCategoryId,isCategory:!1,isExempted:null!=n?n:!!t&&!!a.includes(t.alias),weight:t&&null!==(r=c[t.alias])&&void 0!==r?r:0}},p=(e,t)=>{var n,i,o,a,l,p;let m=null!==(i=null===(n=null==t?void 0:t.exclude_list)||void 0===n?void 0:n.map(e=>e.exclude_alias))&&void 0!==i?i:[],h=m.filter(e=>e!==(null==t?void 0:t.alias)).map(e=>s[e]);return{calculationRule:{dropLow:Number(null!==(o=null==t?void 0:t.drop_low)&&void 0!==o?o:0),dropHigh:Number(null!==(a=null==t?void 0:t.drop_high)&&void 0!==a?a:0),useOnly:null!==(l=null==t?void 0:t.maxmin)&&void 0!==l?l:null},el:t,id:e,isCalculation:!1,isCategory:!0,isUncategorizedItem:!1,isExempted:t&&!!m.includes(t.alias)||sQ.is(r)&&void 0===t,weight:t&&null!==(p=c[t.alias])&&void 0!==p?p:0,childGradeItems:d.filter(t=>t.gradebookCategoryId===e).map(e=>u(e,void 0,{isExempted:!!h.find(t=>t===e.id)})).filter(e=>null!==e)}},m=n.map(e=>e?p(e,a[e]):null),h=Object.values(l).map(e=>({el:e,column:t.find(t=>t.id===s[e.alias])})).map(({column:e,el:t})=>void 0!==e?u(e,t):null),g=t.filter(e=>e.calculationType!==eA.eNW.NonCalculated&&!e.externalGrade&&!l[e.id]).map(e=>u(e)),f=t.filter(e=>!e.gradebookCategoryId&&e.calculationType===eA.eNW.NonCalculated&&!e.externalGrade&&!l[e.id]).map(e=>u(e)),b=m.concat(h).concat(g).concat(f).filter(e=>!!e);return{items:b,formula:r}}function rt(e,t,n){return{formula:`<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>@X@BBCalColElem(${e}:${JSON.stringify(t)})@X@</mi></math>`,aliases:n}}function rn(e){let t=e.id.split("_")[1];return e.isCategory?`c_${t}`:`i_${t}`}function ri(e){return e.reduce(({aliases:t,elements:n},i)=>{var s,r,o,a,l;let c=new sj;if(c.alias=rn(i),c.exclude_list=[],t[c.alias]=i.id,i.isExempted&&(null===(s=c.exclude_list)||void 0===s||s.push(new sW(c.alias))),i.isCategory){c.type="cat";let n=i.calculationRule;if(n&&((null!==(r=n.dropLow)&&void 0!==r?r:0)>0&&(c.drop_low=String(null==n?void 0:n.dropLow)),(null!==(o=n.dropHigh)&&void 0!==o?o:0)>0&&(c.drop_high=String(null==n?void 0:n.dropHigh)),n.useOnly&&(c.maxmin=n.useOnly)),!i.isExempted){let n=e.filter(e=>!e.isCategory).filter(e=>{var t;return(null===(t=e.column)||void 0===t?void 0:t.gradebookCategoryId)===i.id});(null!==(a=i.childGradeItems)&&void 0!==a?a:[]).filter(e=>e.isExempted).concat(n).forEach(e=>{var n;let i=rn(e);t[i]=e.id,null===(n=c.exclude_list)||void 0===n||n.push(new sW(i))})}}else c.type="item";return(null===(l=c.exclude_list)||void 0===l?void 0:l.length)||(c.exclude_list=void 0),{aliases:t,elements:[...n,c]}},{aliases:{},elements:[]})}function rs(e,t){let n=new sY;n.running=t;let{aliases:i,elements:s}=ri(e),r=e.reduce((e,t)=>({...e,[rn(t)]:t.isExempted?0:t.weight}),{});return n.weights=s.map(e=>{let t=new sK;return t.element=e,t.weight=r[e.alias],t}),rt("wgt",n,i)}function rr(e,t){let{aliases:n,elements:i}=ri(e),s=sX(i),r=new sQ(s,{running:t});return rt("sum",r,n)}let ro=(0,eO.makeStyles)(e=>(0,eO.createStyles)({usersGroups:{textOverflow:"ellipsis",overflow:"hidden"},groupTitle:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightMedium,color:e.palette.text.secondary}})),ra=e=>{let{userId:t,filteredGroupIds:n=[]}=e,{formatItems:i}=(0,eB.h)(),s=ro(),r=(0,ts.pJ)(e=>{let i=n.map(t=>ek.Ys.group.getGroupByGroupId(e,t));return i.filter(e=>{var n;return null===(n=null==e?void 0:e.memberships)||void 0===n?void 0:n.some(e=>e.userId===t)})}),o=i(r.map(e=>e.title));return Z.createElement("div",{className:s.usersGroups},Z.createElement(el.AnalyticsTooltip,{analyticsId:"filtered.users.groups.tooltip",title:o,placement:"top"},Z.createElement("span",{className:s.groupTitle}," ",o," ")))},rl=[{field:eA.PJt.IsPreviewStudent,direction:eA.SrV.Ascending},{field:eA.PJt.FamilyName,direction:eA.SrV.Ascending},{field:eA.PJt.GivenName,direction:eA.SrV.Ascending}],rc={roleBucket:[eA.O8v.Taking]};var rd=n(743983),ru=n(998092),rp=n(985949),rm=n(879121),rh=n(256335),rg=n(539976),rf=n(741615),rb=n(823009),rv=n(598368);let ry=(0,eO.makeStyles)(e=>(0,eO.createStyles)({actionContainer:{alignItems:"center",display:"flex",flex:0,"&::before":{backgroundColor:e.palette.border.main,content:'" "',height:"50%",left:0,position:"absolute",width:"2px"}},contentContainer:{alignItems:"flex-start",display:"flex",flexDirection:"column",flex:1,justifyContent:"center","& h4":{display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word",WebkitBoxOrient:"vertical",WebkitLineClamp:2}},controlsContainer:{alignItems:"center",display:"flex",flex:0},iconContainer:{alignItems:"center",display:"flex",flex:0,justifyContent:"center"},itemContainer:{alignItems:"stretch",borderColor:e.palette.border.main,borderStyle:"solid",borderWidth:0,display:"flex",flexDirection:"row",padding:e.spacing(.5),"& > div":{position:"relative"}},rootContainer:{backgroundColor:e.palette.background.default,borderColor:e.palette.border.main,borderWidth:"1px"}})),rC=({Action:e,ActionProps:t,ContainerProps:n,Content:i,ContentProps:s,Controls:r,Icon:o,RootProps:a,children:l,testId:c})=>{let d=ry();return Z.createElement(eO.Box,{"data-testid":c,...a,className:(0,eN.Z)(d.rootContainer,null==a?void 0:a.className)},Z.createElement(eO.Box,{...n,className:(0,eN.Z)(d.itemContainer,null==n?void 0:n.className)},void 0!==o?Z.createElement(eO.Box,{className:d.iconContainer},o):void 0,Z.createElement(eO.Box,{...s,className:(0,eN.Z)(d.contentContainer,null==s?void 0:s.className)},i),Z.createElement(eO.Box,{className:d.controlsContainer},r),void 0!==e?Z.createElement(eO.Box,{...t,className:(0,eN.Z)(d.actionContainer,null==t?void 0:t.className)},e):void 0),l)},rS=(0,eO.makeStyles)(e=>(0,eO.createStyles)({input:{"& > div":{paddingRight:({unitHint:e=""})=>""!==e?"10px":void 0}},root:{display:"inline-block",position:"relative",width:"4.5rem"},unitHint:{alignItems:"center",bottom:0,display:"flex",justifyContent:"center",position:"absolute",right:0,top:0,textAlign:"center",width:"1.5rem"},weightNotApplicable:{textAlign:"center",color:e.palette.text.disabled}})),rE=({alias:e,analyticsId:t="course.grades.overallGrade.weight.input.text",disabled:n=!1,isNotApplicable:i=!1,onBlur:s,onFocus:r,unitHint:o="",value:a,...l})=>{let c=rS({unitHint:o}),d=(0,et.q)(),u=`overall-grade-weight-validation-${e}`,[p,m]=Z.useState(a),[h,g]=Z.useState(!1),[f,b]=Z.useState(""),v=Z.useCallback((e,t)=>{null==s||s(t,p)},[s,p]),y=Z.useCallback((...e)=>{m(a),null==r||r(...e)},[r,a]);return Z.useEffect(()=>{n&&(g(!0),b(""))},[n]),Z.createElement(eO.Box,{className:c.root},i?Z.createElement(el.AnalyticsTypography,{className:c.weightNotApplicable,variant:"body1"},d("course.grades.overallGrade.NA")):Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsTooltip,{id:u,analyticsId:`${t}.tooltip`,open:""!==f,placement:"top",title:f},Z.createElement(nt.W1,{analyticsId:t,ariaDescribedBy:""!==f?u:void 0,disabled:n,className:c.input,error:!h,helperText:void 0,hideErrorMessage:!0,onChangeValidState:(e,t)=>{g(e),b(e?"":t.trim())},max:100,min:0,onBlurNative:v,onFocus:y,value:a,...l})),""!==o?Z.createElement(eO.Box,{"aria-hidden":!0,className:c.unitHint},Z.createElement(el.AnalyticsTypography,null,o)):void 0))};var rI=n(860246);let rw=(0,eO.makeStyles)(e=>(0,eO.createStyles)({actionPropsUnavailable:{visibility:"hidden"},contentEditCalculationRuleButton:{paddingBottom:e.spacing(.5),paddingRight:e.spacing(1),paddingTop:e.spacing(.5)},controlButton:{padding:e.spacing(1)},controlButtonUnavailable:{visibility:"hidden"},controlButtonLockedActive:{color:e.palette.brand.main},icon:{visibility:"hidden"},itemContainer:{backgroundColor:({isExempted:t})=>t?e.palette.background.b2:"initial","& > div":{padding:e.spacing(1)}},itemRoot:{background:"none",borderBottomStyle:"solid","&:last-child":{borderBottomStyle:"none"}},pointsPossibleContainer:{color:e.palette.text.hint,margin:"0 10px",textAlign:"right",width:"80px"}})),rA=({alias:e,categoryName:t,icon:n,isExempted:i,isReadOnly:s,onClickExempt:r,onClickLink:o,pointsPossible:a,subTitle:l,title:c,valueType:d})=>{let u=`child-item-${e}-overflow-menu`,p=(0,eO.useTheme)(),m=(0,eO.useMediaQuery)(p.breakpoints.down("sm")),h=rw({isExempted:i}),{translate:g,formatNumber:f}=(0,eB.h)(),b="points"===d,v=!r,y=Z.useMemo(()=>(0,nd.dJ)(n),[n]),[C,S]=Z.useState(null),E=Z.useCallback(e=>{e.stopPropagation(),S(e.currentTarget)},[]);return Z.createElement(rC,{RootProps:{className:h.itemRoot},ContainerProps:{className:h.itemContainer},Icon:Z.createElement(y,{className:h.icon}),Content:Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsTypography,{component:"div",variant:"h4"},g(c)),void 0!==l?Z.createElement(el.AnalyticsTypography,{variant:"body2"},g(l)):void 0),Controls:Z.createElement(Z.Fragment,null,b?Z.createElement(eO.Box,{"data-test-id":"points-possible",className:h.pointsPossibleContainer},f(a,{maximumFractionDigits:2})):void 0,m&&b&&!s?void 0:Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.toggleExempt.button","aria-label":g(i?"course.grades.overallGrade.unexemptItem":"course.grades.overallGrade.exemptItem",{title:c}),"aria-pressed":i,className:(0,eN.Z)(h.controlButton,{[h.controlButtonUnavailable]:v}),disabled:s||v,onClick:r},Z.createElement(rm.d,{className:i?h.controlButtonLockedActive:void 0})),s||!m||b?void 0:Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.unlink.button","aria-label":g("course.grades.overallGrade.unlinkFromCategoryName",{title:t}),onClick:o},Z.createElement(rI.h,null)),!s&&b&&m?Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.toggleItemMobileOverflowMenu.toggle","aria-controls":C?u:void 0,"aria-expanded":null!==C,"aria-haspopup":"menu",className:(0,eN.Z)(h.controlButton),onClick:E},Z.createElement(rg.Menu,null)),Z.createElement(el.AnalyticsMenu,{analyticsId:"course.grades.overallGrade.toggleItemMobileOverflowMenu.menu",anchorEl:C,id:u,onClose:e=>{var t;null===(t=e.stopPropagation)||void 0===t||t.call(e),S(null)},open:null!==C,MenuListProps:{"aria-label":g("course.grades.overallGrade.overflowActions")}},v?void 0:Z.createElement(el.AnalyticsMenuItem,{"data-analytics-id":"course.grades.overallGrade.toggleExempt.button",analyticsId:"course.grades.overallGrade.toggleExempt.button",button:!0,"aria-label":g(i?"course.grades.overallGrade.unexemptCategory":"course.grades.overallGrade.exemptCategory",{title:c}),"aria-pressed":i,onClick:r},Z.createElement(el.AnalyticsListItemIcon,{analyticsId:"courses.grades.overallGrade.listItemIcon"},Z.createElement(rm.d,{className:i?h.controlButtonLockedActive:void 0})),Z.createElement(el.AnalyticsListItemText,{analyticsId:"courses.grades.overallGrades.listItemText"},Z.createElement(el.AnalyticsTypography,null,g("course.grades.overallGrade.exempt")))),Z.createElement(el.AnalyticsMenuItem,{"data-analytics-id":"course.grades.overallGrade.unlink.button",analyticsId:"course.grades.overallGrade.unlink.button","aria-label":g("course.grades.overallGrade.unlinkFromCategoryName",{title:t}),button:!0,onClick:o},Z.createElement(el.AnalyticsListItemIcon,{analyticsId:"courses.grades.overallGrade.listItemIcon"},Z.createElement(rI.h,null)),Z.createElement(el.AnalyticsListItemText,{analyticsId:"courses.grades.overallGrade.listItemText"},Z.createElement(el.AnalyticsTypography,null,g("course.grades.overallGrade.unlinkFromCategory")))))):void 0),Action:m?void 0:Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.unlink.button","aria-label":g("course.grades.overallGrade.unlinkFromCategoryName",{title:t}),className:s?h.controlButtonUnavailable:void 0,disabled:s,onClick:o},Z.createElement(rI.h,null)),ActionProps:{className:s?h.actionPropsUnavailable:void 0},testId:c})},rk=(0,eO.makeStyles)(e=>(0,eO.createStyles)({contentEditCalculationRuleButton:{paddingBottom:e.spacing(.5),paddingRight:e.spacing(1),paddingTop:e.spacing(.5)},contentSubTextContainer:{display:"flex",flexDirection:"row","& > *":{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),position:"relative"},"& > *:not(:first-child):before":{borderLeft:`solid 1px ${e.palette.border.dark}`,content:'""',display:"inline-block",height:"18px",left:0,position:"absolute"},"& > *:first-child":{paddingLeft:0}},contentSubTextItems:{color:e.palette.text.hint},controlButton:{padding:e.spacing(1)},controlButtonUnavailable:{visibility:"hidden"},controlButtonLockedActive:{color:e.palette.brand.main},itemContainer:{backgroundColor:({isExempted:t})=>t?e.palette.background.b2:"initial",borderBottomWidth:({isExpanded:e})=>e?"1px":"0",boxShadow:({isExpanded:t})=>t?`${e.palette.border.dark} 0px 4px 5px -3px`:"none","& > div":{padding:e.spacing(1)}},itemRoot:{borderStyle:"solid",marginBottom:e.spacing(.25),marginTop:e.spacing(.25)},childrenContainer:{display:({isExpanded:e})=>e?"block":"none"},noChildrenContainer:{color:e.palette.text.secondary,padding:"20px",textAlign:"center"},pointsPossibleContainer:{color:e.palette.text.hint,margin:"0 10px",textAlign:"right",width:"80px"}})),rx=({alias:e,calculationRule:t,childItems:n=[],icon:i,isExempted:s,isLocked:r,isReadOnly:o,numGradableItemsInCategory:a,onBlurWeight:l,onChangeWeight:c,onClickEditCalculationRule:d,onClickExempt:u,onClickLock:p,pointsPossible:m,title:h,valueType:g,weight:f})=>{let b=(0,eO.useTheme)(),v=(0,eO.useMediaQuery)(b.breakpoints.down("sm")),{translate:y,formatNumber:C}=(0,eB.h)(),S="points"===g,[E,I]=Z.useState(!1),w=!d,A=!u,k=!p,x=A&&w,T=Z.useMemo(()=>({isCompact:v,isExempted:s,isExpanded:E}),[v,s,E]),P=rk(T),D=`item-${e}-overflow-menu`,G=`category-children-${e}`,R=`${G}-toggle`,[B,L]=Z.useState(null),N=Z.useCallback(e=>{e.stopPropagation(),L(e.currentTarget)},[]),O=Z.useCallback(e=>{e.stopPropagation(),I(e=>!e)},[]),M=Z.useMemo(()=>(0,nd.dJ)(i),[i]);return Z.createElement(rC,{RootProps:{className:P.itemRoot},ContainerProps:{className:P.itemContainer},Icon:Z.createElement(M,null),Content:Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsTypography,{component:"div",variant:"h4"},y(h)),Z.createElement(eO.Box,{className:P.contentSubTextContainer},Z.createElement(el.AnalyticsTypography,{className:P.contentSubTextItems},y("course.grades.overallGrade.nItems.plural",{n:n.length})),o||v||w?void 0:Z.createElement(s6,{calculationRule:t,numGradableItemsInCategory:a,ButtonProps:{"aria-label":y("course.grades.overallGrade.editCalculationRulesForCategory",{title:h}),className:P.contentEditCalculationRuleButton,disabled:s,onClick:d}}))),ContentProps:{onClick:e=>{v&&null===B&&O(e)}},Controls:Z.createElement(Z.Fragment,null,v?Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.overallGradeController.collapse","aria-controls":E?G:void 0,"aria-expanded":E,"aria-label":y(E?"course.grades.overallGrade.collapseItemsForCategory":"course.grades.overallGrade.expandItemsForCategory",{title:h}),id:R,onClick:O},E?Z.createElement(rb.C,null):Z.createElement(rf.I,null)):void 0,o||v||S?void 0:Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.toggleLocked.button","aria-label":y(r?"course.grades.overallGrade.unlockWeightForCategory":"course.grades.overallGrade.lockWeightForCategory",{title:h}),"aria-pressed":r,className:(0,eN.Z)(P.controlButton,{[P.controlButtonUnavailable]:k}),disabled:k||s,onClick:p},!r||s?Z.createElement(rv.d,null):Z.createElement(rh.H,null)),S&&void 0!==m?Z.createElement(eO.Box,{"data-test-id":"points-possible",className:P.pointsPossibleContainer},C(m,{maximumFractionDigits:2})):Z.createElement(rE,{alias:e,analyticsId:"course.grades.overallGrade.updateTotalWeight.input.text",ariaLabel:y("course.grades.overallGrade.weightForCategory",{title:h}),disabled:o||r||s,isNotApplicable:!c,onBlur:l,onChange:c,unitHint:"%",value:f}),o||!v||S?void 0:Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.toggleLocked.button","aria-label":y(!r||s?"course.grades.overallGrade.lockWeightForCategory":"course.grades.overallGrade.unlockWeightForCategory",{title:h}),"aria-pressed":r,className:(0,eN.Z)(P.controlButton,{[P.controlButtonUnavailable]:k}),disabled:k||s,onClick:p},!r||s?Z.createElement(rv.d,null):Z.createElement(rh.H,null)),o||!v?Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.toggleExempt.button","aria-label":y(s?"course.grades.overallGrade.unexemptCategory":"course.grades.overallGrade.exemptCategory",{title:h}),"aria-pressed":s,className:(0,eN.Z)(P.controlButton,{[P.controlButtonUnavailable]:A}),disabled:o||A,onClick:u},Z.createElement(rm.d,{className:s?P.controlButtonLockedActive:void 0})):void 0,!o&&v?Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.toggleItemMobileOverflowMenu.toggle","aria-controls":B?D:void 0,"aria-expanded":null!==B,"aria-haspopup":"menu",className:(0,eN.Z)(P.controlButton,{[P.controlButtonUnavailable]:x}),disabled:x,onClick:N},Z.createElement(rg.Menu,null)),Z.createElement(el.AnalyticsMenu,{analyticsId:"course.grades.overallGrade.toggleItemMobileOverflowMenu.menu",anchorEl:B,id:D,onClose:e=>{var t;null===(t=e.stopPropagation)||void 0===t||t.call(e),L(null)},open:null!==B,MenuListProps:{"aria-label":y("course.grades.overallGrade.overflowActions")}},Z.createElement(el.AnalyticsMenuItem,{"data-analytics-id":"course.grades.overallGrade.toggleExempt.button",analyticsId:"course.grades.overallGrade.toggleExempt.button","aria-label":y(s?"course.grades.overallGrade.unexemptCategory":"course.grades.overallGrade.exemptCategory",{title:h}),"aria-pressed":s,button:!0,onClick:u},Z.createElement(el.AnalyticsListItemIcon,{analyticsId:"course.grades.overallGrade.listItemicon"},Z.createElement(rm.d,{className:s?P.controlButtonLockedActive:void 0})),Z.createElement(el.AnalyticsListItemText,{analyticsId:"course.grades.overallGrade.listItemText"},Z.createElement(el.AnalyticsTypography,null,y("course.grades.overallGrade.exempt")))),Z.createElement(el.AnalyticsMenuItem,{"data-analytics-id":"course.grades.overallGrade.editCalculationRule",analyticsId:"course.grades.overallGrade.editCalculationRule","aria-label":y("course.grades.overallGrade.editCalculationRulesForCategory",{title:h}),button:!0,disabled:s,onClick:d},Z.createElement(el.AnalyticsListItemIcon,{analyticsId:"course.grades.overallGrade.listItemIcon"},Z.createElement(rd.m,null)),Z.createElement(el.AnalyticsListItemText,{analyticsId:"course.grades.overallGrade.listItemText"},Z.createElement(el.AnalyticsTypography,null,y("course.grades.overallGrade.editCalculationRules")))))):void 0),Action:v?void 0:Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.overallGradeController.collapse","aria-controls":E?G:void 0,"aria-label":y(E?"course.grades.overallGrade.collapseItemsForCategory":"course.grades.overallGrade.expandItemsForCategory",{title:h}),"aria-expanded":E,id:R,onClick:O},E?Z.createElement(rp.K,null):Z.createElement(ru._,null))},Z.createElement(eO.Box,{id:G,role:"region","aria-labelledby":R,className:(0,eN.Z)(P.childrenContainer,0===n.length?P.noChildrenContainer:null)},n.length>0?n.map(e=>Z.createElement(rA,{key:e.alias,...e,categoryName:h,isReadOnly:o,valueType:g})):Z.createElement(el.AnalyticsTypography,null,y("course.grades.overallGrade.noItemsInThisCategory"))))};var rT=n(862482);let rP=(0,eO.makeStyles)(e=>(0,eO.createStyles)({actionPropsUnavailable:{visibility:"hidden"},controlButton:{padding:e.spacing(1)},controlButtonUnavailable:{visibility:"hidden"},controlButtonLockedActive:{color:e.palette.brand.main},itemContainer:{backgroundColor:({isExempted:t})=>t?e.palette.background.b2:"initial","& > div":{padding:e.spacing(1)}},itemRoot:{borderStyle:"solid",marginBottom:e.spacing(.25),marginTop:e.spacing(.25)},pointsPossibleContainer:{color:e.palette.text.hint,margin:"0 10px",textAlign:"right",width:"80px"}})),rD=({alias:e,isExempted:t,isLocked:n,isReadOnly:i,onBlurWeight:s,onChangeWeight:r,onClickExempt:o,onClickLink:a,onClickLock:l,pointsPossible:c=0,subTitle:d,title:u,valueType:p,weight:m})=>{let h=(0,eO.useTheme)(),g=(0,eO.useMediaQuery)(h.breakpoints.down("sm")),f=rP({isExempted:t}),{translate:b,formatNumber:v}=(0,eB.h)(),y="points"===p,C=Z.useMemo(()=>`item-${e}-overflow-menu`,[e]),[S,E]=Z.useState(null),I=Z.useCallback(e=>{e.stopPropagation(),E(e.currentTarget)},[]);return Z.createElement(rC,{RootProps:{className:f.itemRoot},ContainerProps:{className:f.itemContainer},Content:Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsTypography,{component:"div",variant:"h4"},b(u)),g?void 0:Z.createElement(el.AnalyticsTypography,{variant:"body2"},b(d))),Controls:Z.createElement(Z.Fragment,null,i||g||y?void 0:Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.toggleLocked.button","aria-label":b(!n||t?"course.grades.overallGrade.lockWeightForItem":"course.grades.overallGrade.unlockWeightForItem",{title:u}),"aria-pressed":n,className:f.controlButton,onClick:l,disabled:t},!n||t?Z.createElement(rv.d,null):Z.createElement(rh.H,null)),y?Z.createElement(eO.Box,{"data-test-id":"points-possible",className:f.pointsPossibleContainer},v(c,{maximumFractionDigits:2})):Z.createElement(rE,{alias:e,analyticsId:"course.grades.overallGrade.updateTotalWeight.input.text",ariaLabel:b("course.grades.overallGrade.weightForItem",{title:u}),disabled:i||n||t,onBlur:s,onChange:r,value:m,unitHint:"%"}),i||!g||y?void 0:Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.toggleLocked.button","aria-label":b(!n||t?"course.grades.overallGrade.lockWeightForItem":"course.grades.overallGrade.unlockWeightForItem",{title:u}),"aria-pressed":n,className:f.controlButton,disabled:t,onClick:l},!n||t?Z.createElement(rv.d,null):Z.createElement(rh.H,null)),i||!g?Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.toggleExempt.button","aria-label":b(t?"course.grades.overallGrade.unexemptItem":"course.grades.overallGrade.exemptItem",{title:u}),"aria-pressed":t,className:f.controlButton,disabled:i,onClick:o},Z.createElement(rm.d,{className:t?f.controlButtonLockedActive:void 0})):void 0,!i&&g?Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.toggleItemMobileOverflowMenu.toggle","aria-controls":S?C:void 0,"aria-expanded":null!==S,"aria-haspopup":"menu",onClick:I},Z.createElement(rg.Menu,null)),Z.createElement(el.AnalyticsMenu,{analyticsId:"course.grades.overallGrade.toggleItemMobileOverflowMenu.menu",anchorEl:S,id:C,onClose:()=>E(null),open:null!==S,MenuListProps:{"aria-label":b("course.grades.overallGrade.overflowActions")}},Z.createElement(el.AnalyticsMenuItem,{"data-analytics-id":"course.grades.overallGrade.toggleExempt.button",analyticsId:"course.grades.overallGrade.toggleExempt.button","aria-label":b(t?"course.grades.overallGrade.unexemptItem":"course.grades.overallGrade.exemptItem",{title:u}),"aria-pressed":t,button:!0,onClick:o},Z.createElement(el.AnalyticsListItemIcon,{analyticsId:"courses.grades.overallGrade.listItemIcon"},Z.createElement(rm.d,{className:t?f.controlButtonLockedActive:void 0})),Z.createElement(el.AnalyticsListItemText,{analyticsId:"courses.grades.overallGrade.listItemText"},Z.createElement(el.AnalyticsTypography,null,b("course.grades.overallGrade.exempt")))),Z.createElement(el.AnalyticsMenuItem,{"data-analytics-id":"course.grades.overallGrade.link.button",analyticsId:"course.grades.overallGrade.link.button","aria-label":b("course.grades.overallGrade.linkToCategoryName",{title:d}),button:!0,onClick:a},Z.createElement(el.AnalyticsListItemIcon,{analyticsId:"courses.grades.overallGrade.listItemIcon"},Z.createElement(rT.r,null)),Z.createElement(el.AnalyticsListItemText,{analyticsId:"courses.grades.overallGrade.listItemText"},Z.createElement(el.AnalyticsTypography,null,b("course.grades.overallGrade.linkToCategory")))))):void 0),Action:g?void 0:Z.createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.overallGrade.link.button","aria-label":b("course.grades.overallGrade.linkToCategoryName",{title:d}),className:i?f.controlButtonUnavailable:void 0,disabled:i,onClick:a},Z.createElement(rT.r,null)),ActionProps:{className:i?f.actionPropsUnavailable:void 0}})};var rG=n(914271),rR=n(444424);let rB=(0,eO.makeStyles)(e=>(0,eO.createStyles)({showMore:{"&, &:active, &:focus, &:hover":{color:e.palette.text.primary},marginLeft:"8px"},details:{display:({expandDetails:e})=>e?"block":"none","& svg":{verticalAlign:"middle"}}})),rL={excludeIcon:Z.createElement(rm.d,null),lockIcon:Z.createElement(rG.S,null),unlinkIcon:Z.createElement(rR.x,null)},rN=({calculationType:e})=>{let t=(0,eO.useTheme)(),n=(0,eO.useMediaQuery)(t.breakpoints.down("sm")),i=(0,et.q)(),[s,r]=Z.useState(),o=null!=s?s:!n,a=rB({expandDetails:o}),l=Z.useMemo(()=>{switch(e){case"weighted":return Z.createElement(Z.Fragment,null,Z.createElement("li",null,i("course.grades.overallGrade.calculationDetail.li0",rL)),Z.createElement("li",null,i("course.grades.overallGrade.calculationDetail.li3",rL)),Z.createElement("li",null,i("course.grades.overallGrade.calculationDetail.li2",rL)));case"points":return Z.createElement(Z.Fragment,null,Z.createElement("li",null,i("course.grades.overallGrade.calculationDetail.li4",rL)),Z.createElement("li",null,i("course.grades.overallGrade.calculationDetail.li2",rL)));case"advanced":return}},[e,i]);return Z.createElement(Z.Fragment,null,Z.createElement("span",null,i(function(){switch(e){case"weighted":return"course.grades.overallGrade.calculationDetail.p0";case"points":return"course.grades.overallGrade.calculationDetail.p1";case"advanced":return"course.grades.overallGrade.calculationDetail.p2"}}())),l?Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsLink,{"aria-controls":o?"overall-grade-detail-expand":void 0,"aria-expanded":o,analyticsId:"course.grades.overallGrade.calculationDetail.showMore",className:a.showMore,component:"button",id:"overall-grade-detail-expand-toggle",onClick:function(e){e.preventDefault(),e.stopPropagation(),r(!o)}},Z.createElement(el.AnalyticsTypography,{component:"span"},o?i("course.grades.overallGrade.calculationDetail.showLess"):i("course.grades.overallGrade.calculationDetail.showMore"))),Z.createElement("div",{id:"overall-grade-detail-expand",role:"region","aria-labelledby":"overall-grade-detail-expand-toggle",className:a.details},Z.createElement("ul",null,l))):void 0)},rO=(0,eO.makeStyles)(e=>(0,eO.createStyles)({filterWrapper:{display:"flex",flex:1,flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row",flexWrap:"wrap",alignContent:"center",gap:"12px"}},textFieldFilter:{display:"flex",margin:"8px 0px",flexGrow:1,[e.breakpoints.up("sm")]:{minWidth:"240px"},[e.breakpoints.up("lg")]:{flexGrow:0}}})),rM=e=>{let t=(0,ts.pJ)(e=>{var t,n;return null===(n=null===(t=ek.Ys.app.getLocation(e))||void 0===t?void 0:t.queryParams)||void 0===n?void 0:n.gradingStatus});return(0,Z.useEffect)(()=>{t0.Nd.search({gradingStatus:t},{location:"replace"}),e((0,eA.LAV)(t))},[e,t]),e=>{t0.Nd.search({gradingStatus:e,page:"1"})}},r$=e=>{let t=(0,ts.pJ)(e=>{var t,n;return null===(n=null===(t=ek.Ys.app.getLocation(e))||void 0===t?void 0:t.queryParams)||void 0===n?void 0:n.submissionStatus});return(0,Z.useEffect)(()=>{t0.Nd.search({submissionStatus:t},{location:"replace"}),e((0,eA.Aev)(t))},[t,e]),e=>{t0.Nd.search({submissionStatus:e,page:"1"})}},rH=(e,t)=>{let n=(0,et.q)(),i=(0,ts.gH)("course.grades.gradebook-item.filters","organization.grades.gradebook-item.filters");return(0,Z.useMemo)(()=>{let s=new Map;switch(t?s.set(eA.nXr.AllStatuses,n("course.grades.gradebook-item.filters.studentStatus.allGroupStatuses")):s.set(eA.nXr.AllStatuses,n(i("course.grades.gradebook-item.filters.studentStatus.allStatuses"))),e.toString()){case ek.u$1.UltraAssignment.toString():case ek.u$1.ClassicAssignment.toString():case ek.u$1.Test.toString():s.set(eA.nXr.NoAttempt,n("course.grades.gradebook-item.filters.studentStatus.noSubmission")),s.set(eA.nXr.AttemptInProgress,n("course.grades.gradebook-item.filters.studentStatus.draftSaved")),s.set(eA.nXr.AttemptSubmitted,n("course.grades.gradebook-item.filters.studentStatus.submitted"));break;case ek.u$1.Journal.toString():s.set(eA.nXr.NoEntry,n("course.grades.gradebook-item.filters.studentStatus.noEntry")),s.set(eA.nXr.EntryMade,n("course.grades.gradebook-item.filters.studentStatus.entryMade"));break;case ek.u$1.Discussion.toString():s.set(eA.nXr.NoAttempt,n("course.grades.gradebook-item.filters.studentStatus.noEntry")),s.set(eA.nXr.AttemptSubmitted,n("course.grades.gradebook-item.filters.studentStatus.entryMade"));break;case ek.u$1.Scorm.toString():s.set(eA.nXr.NoAttempt,n("course.grades.gradebook-item.filters.studentStatus.noSubmission")),s.set(eA.nXr.AttemptInProgress,n("course.grades.gradebook-item.filters.studentStatus.draftSaved")),s.set(eA.nXr.AttemptSubmitted,n("course.grades.gradebook-item.filters.studentStatus.submitted"))}return s},[e,t,n,i])},rF=(e,t,n,i)=>{let s=(0,et.q)();return(0,Z.useMemo)(()=>{let r=new Map;if(!i)return r;switch(r.set(eA.qr.AllStatuses,s("course.grades.gradebook-item.filters.gradingStatus.allStatuses")),e.toString()){case ek.u$1.UltraAssignment.toString():case ek.u$1.ClassicAssignment.toString():case ek.u$1.Test.toString():t?n?(r.set(eA.qr.NeedsGrading,s("course.grades.gradebook-item.filters.gradingStatus.needsToReconcile")),r.set(eA.qr.GradeNeedsPosting,s("course.grades.gradebook-item.filters.gradingStatus.needsPosting")),r.set(eA.qr.NothingToGrade,s("course.grades.gradebook-item.filters.gradingStatus.nothingToReconcile")),r.set(eA.qr.Completed,s("course.grades.gradebook-item.filters.gradingStatus.completed"))):(r.set(eA.qr.NeedsGrading,s("course.grades.gradebook-item.filters.gradingStatus.needsGrading")),r.set(eA.qr.Completed,s("course.grades.gradebook-item.filters.gradingStatus.completed"))):(r.set(eA.qr.NeedsGrading,s("course.grades.gradebook-item.filters.gradingStatus.needsGrading")),r.set(eA.qr.GradeNeedsPosting,s("course.grades.gradebook-item.filters.gradingStatus.needsPosting")),r.set(eA.qr.Completed,s("course.grades.gradebook-item.filters.gradingStatus.completed"))),r.get(eA.qr.NothingToGrade)||r.set(eA.qr.NothingToGrade,s("course.grades.gradebook-item.filters.gradingStatus.nothingToGrade"));break;case ek.u$1.Journal.toString():case ek.u$1.Discussion.toString():case ek.u$1.Scorm.toString():r.set(eA.qr.NeedsGrading,s("course.grades.gradebook-item.filters.gradingStatus.needsGrading")),r.set(eA.qr.GradeNeedsPosting,s("course.grades.gradebook-item.filters.gradingStatus.needsPosting")),r.set(eA.qr.Completed,s("course.grades.gradebook-item.filters.gradingStatus.completed")),r.set(eA.qr.NothingToGrade,s("course.grades.gradebook-item.filters.gradingStatus.nothingToGrade"))}return r},[e,t,n,s,i])},rU=e=>{let{analyticsId:t,gradingFilterSelected:n,scoreProviderHandler:i,studentFilterSelected:s,isDelegated:r,isUserReconciler:o,isGraded:a=!0,isGroupContent:l}=e,c=(0,et.q)(),d=(0,ts.gH)("course.grades.gradebook-item.filters","organization.grades.gradebook-item.filters"),u=rH(i,l),p=rF(i,r,o,a),m=rO(),[h,g]=Z.useState(eA.nXr.AllStatuses),[f,b]=Z.useState(eA.qr.AllStatuses),v=Z.useCallback(e=>{f!==e&&(b(e),n(e))},[f,b,n]),y=rM(v),C=e=>{f!==e&&y(e)},S=Z.useCallback(e=>{h!==e&&(g(e),s(e))},[h,g,s]),E=r$(S),I=e=>{h!==e&&E(e)},w=c(l?"course.grades.gradebook-item.filters.groupStatusFilterLabel":d("course.grades.gradebook-item.filters.studentStatusFilterLabel"));return Z.createElement("div",{className:m.filterWrapper},Z.createElement(el.AnalyticsTextField,{analyticsId:`${t}.student-status`,select:!0,id:"submission-list-dropdown-filters-student-status",label:w,floatingLabel:!0,value:u.get(h),className:m.textFieldFilter},[...u.keys()].map(e=>Z.createElement(el.AnalyticsMenuItem,{analyticsId:`${t}.student-status.${e}.list-item`,button:!0,onClick:()=>I(e),key:e,value:u.get(e)},u.get(e)))),p.size>0&&Z.createElement(el.AnalyticsTextField,{analyticsId:`${t}.grading-status`,select:!0,id:"submission-list-dropdown-filters-grading-status",label:c("course.grades.gradebook-item.filters.gradingStatusFilterLabel"),floatingLabel:!0,value:p.get(f),className:m.textFieldFilter},[...p.keys()].map(e=>Z.createElement(el.AnalyticsMenuItem,{analyticsId:`${t}.grading-status.${e}.list-item`,button:!0,onClick:()=>C(e),key:e,value:p.get(e)},p.get(e)))))},rV=(0,eO.makeStyles)(e=>{let t=e.spacing(2.5),n=e.spacing(1);return(0,eO.createStyles)({root:{display:"inline-flex",flexDirection:"row"},buttonBase:{backgroundColor:e.palette.background.default,border:`solid 1px ${e.palette.border.main}`,borderRightWidth:0,color:"#666",margin:0,paddingBottom:n,paddingLeft:t,paddingRight:t,paddingTop:n,"&:first-child":{borderBottomLeftRadius:4,borderTopLeftRadius:4},"&:last-child":{borderBottomRightRadius:4,borderRightWidth:1,borderTopRightRadius:4},".side-panel-content &":{cursor:"pointer"}},buttonSelected:{backgroundColor:e.palette.common.black,borderColor:e.palette.common.black,color:e.palette.common.white}})}),r_=({isReadOnly:e=!1,onClick:t,selected:n})=>{let i=rV(),s=(0,et.q)(),r="overall-grade-tab-calculation-type";function o(e,n){e.stopPropagation(),t(n)}return Z.createElement(eO.Box,{className:i.root},Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:"course.grades.overallGrade.formControlLabel",className:(0,eN.Z)(i.buttonBase,"points"===n?i.buttonSelected:null),control:Z.createElement(eO.HideOffScreen,{component:"span"},Z.createElement("input",{checked:"points"===n,"data-analytics-id":"course.grades.overallGrade.tab.points.radio",disabled:e,id:"overall-grade-tab-points",name:r,onChange:e=>o(e,"points"),tabIndex:-1,type:"radio",value:"points"})),label:s("course.grades.overallGrade.points"),tabIndex:0}),Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:"course.grades.overallGrade.formControlLabel",className:(0,eN.Z)(i.buttonBase,"weighted"===n?i.buttonSelected:null),control:Z.createElement(eO.HideOffScreen,{component:"span"},Z.createElement("input",{checked:"weighted"===n,"data-analytics-id":"course.grades.overallGrade.tab.weighted.radio",disabled:e,id:"overall-grade-tab-weighted",name:r,onChange:e=>o(e,"weighted"),tabIndex:-1,type:"radio",value:"weighted"})),disabled:e,label:s("course.grades.overallGrade.weighted"),tabIndex:0}),Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:"course.grades.overallGrade.formControlLabel",className:(0,eN.Z)(i.buttonBase,"advanced"===n?i.buttonSelected:null),control:Z.createElement(eO.HideOffScreen,{component:"span"},Z.createElement("input",{checked:"advanced"===n,"data-analytics-id":"course.grades.overallGrade.tab.advanced.radio",disabled:e,id:"overall-grade-tab-advanced",name:r,onChange:e=>o(e,"advanced"),tabIndex:-1,type:"radio",value:"advanced"})),label:s("course.grades.overallGrade.advanced"),tabIndex:0}))};var rq=n(342494),rz=n(784899),rW=n(989571),rj=n(715584);let rZ=(0,eO.makeStyles)(e=>(0,eO.createStyles)({root:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"},calculationTypeButtonsContainer:{paddingLeft:"60px","& button":{marginRight:"16px"}},calculationTypeContainer:{maxWidth:"650px",minWidth:"350px",width:"50%","& ul":{listStyleType:"none"}},calculationTypeOptionContainer:{marginTop:e.spacing(3),"&:last-of-type":{marginBottom:e.spacing(6)}},calculationTypeOptionDetailsContainer:{marginLeft:"20px"},calculationTypeOptionTitle:{lineHeight:"32px"},calculationTypeOptionsContainer:{paddingLeft:"60px"},description:{color:e.palette.text.secondary},exampleRowChild:{},exampleTable:{minWidth:"350px","& tr":{height:"24px"},"& tr.example-row-child th, & tr.example-row-child td":{paddingTop:0},"& th, & td":{border:"none",padding:0,paddingTop:"16px"}}})),rK=({description:e,example:t,isSelected:n,value:i})=>{let s=rZ(),r=(0,et.q)(),o=`overall-grade-wizard-option-${i}`,a=`${o}-description`,[l,c]=Z.useState(!1);return Z.createElement(eO.Box,{className:s.calculationTypeOptionContainer},Z.createElement(el.AnalyticsFormControlLabel,{analyticsId:"course.grades.overallGrade.formControlLabel",control:Z.createElement(el.AnalyticsRadio,{analyticsId:`course.grades.overallGrade.wizard.${i}.radio`,id:o,inputProps:{"aria-checked":n,"aria-describedby":e?a:void 0},value:i}),htmlFor:o,label:Z.createElement(el.AnalyticsTypography,{className:s.calculationTypeOptionTitle},r(`course.grades.overallGrade.wizard.options.${i}.name`))}),Z.createElement(eO.Box,{className:s.calculationTypeOptionDetailsContainer},void 0!==e?Z.createElement(eO.Box,{id:a,className:s.description},e):void 0,void 0!==t?Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsLink,{"aria-controls":`overall-grade-wizard-${i}-example`,"aria-expanded":l,"aria-label":r(l?`course.grades.overallGrade.wizard.options.${i}.hideExampleUnique`:`course.grades.overallGrade.wizard.options.${i}.showExampleUnique`),analyticsId:`course.grades.overallGrade.wizard.${i}.example.button`,component:"button",id:`overall-grade-wizard-${i}-example-toggle`,onClick:function(e){e.stopPropagation(),c(e=>!e)}},Z.createElement(el.AnalyticsTypography,{component:"span"},r(l?"course.grades.overallGrade.wizard.hideExample":"course.grades.overallGrade.wizard.showExample"))),l?Z.createElement(eO.Box,{id:`overall-grade-wizard-${i}-example`},t):void 0):void 0))},rX=({onCancel:e,onComplete:t})=>{let n=rZ(),{translate:i,formatNumber:s}=(0,eB.h)(),[r,o]=Z.useState("points");return Z.createElement(eO.Box,{className:n.root},Z.createElement(eO.Box,{className:n.calculationTypeContainer},Z.createElement(rq.Z,{component:"fieldset"},Z.createElement(rz.Z,{component:"legend"},Z.createElement(el.AnalyticsTypography,{variant:"h2"},i("course.grades.overallGrade.wizard.header")),Z.createElement(el.AnalyticsTypography,null,i("course.grades.overallGrade.wizard.description"))),Z.createElement(eO.Box,{className:n.calculationTypeOptionsContainer},Z.createElement(el.AnalyticsRadioGroup,{analyticsId:"course.grades.overallGrade.RadioGroup",hasCustomLegend:!0,defaultValue:"points",onChange:function(e,t){o(t)}},Z.createElement(rK,{example:Z.createElement(el.AnalyticsTable,{analyticsId:"course.grades.overallGrade.table",className:n.exampleTable},Z.createElement(el.AnalyticsTableBody,{analyticsId:"course.grades.overallGrade.tableBody"},Z.createElement(rW.Z,null,Z.createElement(rj.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignmentsCategory")),Z.createElement(rj.Z,null,i("course.grades.overallGrade.wizard.options.points.example.nPoints",{points:s(200)}))),Z.createElement(rW.Z,{className:"example-row-child"},Z.createElement(rj.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignment1")),Z.createElement(rj.Z,null,i("course.grades.overallGrade.wizard.options.points.example.nPoints",{points:s(100)}))),Z.createElement(rW.Z,{className:"example-row-child"},Z.createElement(rj.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignment2")),Z.createElement(rj.Z,null,i("course.grades.overallGrade.wizard.options.points.example.nPoints",{points:s(100)}))),Z.createElement(rW.Z,null,Z.createElement(rj.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.finalExam")),Z.createElement(rj.Z,null,i("course.grades.overallGrade.wizard.options.points.example.nPoints",{points:s(300)}))),Z.createElement(rW.Z,null,Z.createElement(rj.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.overallGrade")),Z.createElement(rj.Z,null,i("course.grades.overallGrade.wizard.options.points.example.outOfPoints",{points:s(500)}))))),isSelected:"points"===r,value:"points"}),Z.createElement(rK,{example:Z.createElement(el.AnalyticsTable,{analyticsId:"course.grades.overallGrade.table",className:n.exampleTable},Z.createElement(el.AnalyticsTableBody,{analyticsId:"course.grades.overallGrade.tableBody"},Z.createElement(rW.Z,null,Z.createElement(rj.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignmentsCategory")),Z.createElement(rj.Z,null,i("course.grades.overallGrade.wizard.options.weighted.example.nPercent",{percent:s(40)}))),Z.createElement(rW.Z,{className:"example-row-child"},Z.createElement(rj.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignment1")),Z.createElement(rj.Z,null)),Z.createElement(rW.Z,{className:"example-row-child"},Z.createElement(rj.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignment2")),Z.createElement(rj.Z,null)),Z.createElement(rW.Z,null,Z.createElement(rj.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.finalExam")),Z.createElement(rj.Z,null,i("course.grades.overallGrade.wizard.options.weighted.example.nPercent",{percent:s(60)}))),Z.createElement(rW.Z,null,Z.createElement(rj.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.overallGrade")),Z.createElement(rj.Z,null,i("course.grades.overallGrade.wizard.options.weighted.example.outOfPercent",{percent:s(100)}))))),isSelected:"weighted"===r,value:"weighted"}),Z.createElement(rK,{description:Z.createElement(el.AnalyticsTypography,null,i("course.grades.overallGrade.wizard.options.advanced.description")),isSelected:"advanced"===r,value:"advanced"})))),Z.createElement(eO.Box,{className:n.calculationTypeButtonsContainer},Z.createElement(el.AnalyticsDefaultButton,{analyticsId:"course.grades.overallGrade.wizard.cancel.button",onClick:function(t){t.stopPropagation(),e()}},i("course.grades.overallGrade.wizard.cancel")),Z.createElement(el.AnalyticsPrimaryButton,{analyticsId:"course.grades.overallGrade.wizard.next.button",disabled:void 0===r,onClick:function(e){e.stopPropagation(),void 0!==r&&t({calculationType:r})}},i("course.grades.overallGrade.wizard.next")))))},rY=(0,eO.makeStyles)(()=>(0,eO.createStyles)({gradableItemExempt:{position:"absolute",inset:0,display:"flex",flexDirection:"column",justifyContent:"flex-start"},panelContent:{padding:"0 30px",flexGrow:1},panelContentRow:{marginTop:"24px"},panelFooter:{width:"100%",bottom:0,"& > div":{padding:"0 30px"},"& button":{margin:0,"&:first-child":{marginRight:"8px"}}},footerButton:{height:"38px",alignSelf:"center"}})),rQ=e=>{let{showConfirmationModal:t,onCancel:n,onConfirmation:i}=e,s=(0,et.q)(),r=`${e.analyticsId}.cancel-unsaved.dialog`,o="cancel-unsaved.dialog-title";return Z.createElement(en._X,{className:"cancel-unsaved-confirmation-dialog",analyticsId:r,open:t,onClose:n,maxWidth:"md","aria-labelledby":o},Z.createElement(el.AnalyticsDialogTitle,{analyticsId:`${r}.title`,id:o,onClose:n},s("gradebook.closeExemptionPanelConfirmationModal.title")),Z.createElement(el.AnalyticsDialogContent,{analyticsId:`${r}.content`},Z.createElement(el.AnalyticsDialogContentText,{analyticsId:`${r}.body`},s("gradebook.closeExemptionPanelConfirmationModal.content"))),Z.createElement(el.AnalyticsDialogActions,{analyticsId:`${r}.actions`},Z.createElement(el.AnalyticsDefaultButton,{analyticsId:`${r}.cancel.button`,onClick:n},s("gradebook.closeExemptionPanelConfirmationModal.cancel")),Z.createElement(el.AnalyticsPrimaryButton,{analyticsId:`${r}.confirmation.button`,onClick:i},s("gradebook.closeExemptionPanelConfirmationModal.close"))))},rJ="save-feedback-confirmation",r0="offline-items.save-feedback-confirmation",r1=e=>{let{exitCallback:t}=e,n=(0,et.q)(),[i,s]=Z.useState(!1),[r,o]=Z.useState(!1),[a,l]=Z.useState(!1),c=(e=!1,t=!1)=>{o(e),s(!0),l(t)};return Z.createElement(en._X,{analyticsId:r0,open:!i,maxWidth:"md",onClose:()=>c(),"aria-labelledby":`${rJ}-dialog-title`,TransitionProps:{onExited:()=>{t(r,a),s(!1)}}},Z.createElement(el.AnalyticsDialogTitle,{analyticsId:`${r0}.titleClose.button`,id:`${rJ}-dialog-title`,onClose:()=>c()},n("gradebook.gradeFeedback.confirmation.title-x-bb-save-feedback")),Z.createElement(el.AnalyticsDialogContent,{analyticsId:`${r0}.content`},Z.createElement(el.AnalyticsDialogContentText,{analyticsId:`${r0}.contentText`,id:`${rJ}-dialog-description`},n("gradebook.gradeFeedback.confirmation.instructions-x-bb-save-feedback"))),Z.createElement(el.AnalyticsDialogActions,{analyticsId:`${r0}.actions`},Z.createElement(el.AnalyticsDefaultButton,{analyticsId:`${r0}.close.button`,onClick:()=>c(!1,!0)},n("gradebook.gradeFeedback.confirmation.cancel-x-bb-save-and-close")),Z.createElement(el.AnalyticsPrimaryButton,{analyticsId:`${r0}.save-feedback.button`,onClick:()=>c(!0,!0)},n("gradebook.gradeFeedback.confirmation.ok-x-bb-save-feedback"))))},r2="post-grade-confirmation",r3="offline-items.post-grade-confirmation",r9=e=>{let{exitCallback:t}=e,n=(0,et.q)(),i=(0,ts.gH)("gradebook.","organization.gradebook."),[s,r]=Z.useState(!1),[o,a]=Z.useState(!1),l=(e=!1)=>{a(e),r(!0)};return Z.createElement(en._X,{analyticsId:`${r3}`,open:!s,maxWidth:"md",onClose:()=>l(),"aria-labelledby":`${r2}-dialog-title`,TransitionProps:{onExited:()=>{t(o),r(!1)}}},Z.createElement(el.AnalyticsDialogTitle,{analyticsId:`${r3}.titleClose.button`,id:`${r2}-dialog-title`,onClick:()=>l()},n("gradebook.gradeFeedback.confirmation.title-x-bb-grade-options")),Z.createElement(el.AnalyticsDialogContent,{analyticsId:`${r3}.content`},Z.createElement(el.AnalyticsDialogContentText,{analyticsId:`${r3}.contentText`,id:`${r2}-dialog-description`},n(i("gradebook.gradeFeedback.confirmation.instructions-x-bb-grade-column-post-grades")))),Z.createElement(el.AnalyticsDialogActions,{analyticsId:`${r3}.actions`},Z.createElement(el.AnalyticsDefaultButton,{analyticsId:`${r3}.cancel.button`,onClick:()=>l()},n("global.cancel")),Z.createElement(el.AnalyticsPrimaryButton,{analyticsId:`${r3}.post-grade.button`,onClick:()=>l(!0)},n("gradebook.gradeFeedback.offlineGradesAndFeedback.overflowMenu.postGrade"))))},r4="gradebook.gradableItem.ExemptPanel",r7=()=>{var e;let t=rY(),n=(0,et.q)(),i=(0,ts.Lx)(),{userId:s,columnId:r,courseId:o}=function(e){let t=new URLSearchParams(window.location.search);return e.reduce((e,n)=>{let i=t.get(n);return i&&(e[n]=i),e},{})}(["userId","columnId","courseId"]),a=null===(e=(0,ts.pJ)(e=>ek.Ys.gradebookGrade.getGradebookGradesByColumnIdAndUserId(e,r,s),Y.wU))||void 0===e?void 0:e[0],l=(0,ts.pJ)(e=>ek.Ys.user.getUserById(e,s)),c=(0,ts.pJ)(e=>ek.Ys.gradebookColumn.getGradebookColumnById(e,r)),[d,u]=(0,Z.useState)(!!(null==a?void 0:a.isExempt)),[p,m]=(0,Z.useState)(!1),[h,g]=(0,Z.useState)(!1),[f,b]=(0,Z.useState)(!1),v=eL.memoize(()=>{g(!0)}),y=!!(null==a?void 0:a.isExempt)!==d,C=y&&!f;(0,t0.OO)(C,v);let S=(0,Z.useCallback)(()=>{i(ek.Nwg.gradebookGrade.loadAnonymousGradeExemption(a,{courseId:o,columnId:r,userId:s}))},[i,a,o,r,s]);(0,Z.useEffect)(()=>{!a&&(null==c?void 0:c.anonymousGrading)&&S(),a&&u(!!(null==a?void 0:a.isExempt))},[c,a,S]),(0,Z.useEffect)(()=>{p&&!y&&t0.Nd.leavePeekState()},[d,p,y]);let E=()=>{(null==c?void 0:c.anonymousGrading)?i(ek.Nwg.gradebookGrade.updateAnonymousGradeExemption(a,{courseId:o,columnId:r,userId:s,isExempt:d})):a?i(ek.Nwg.gradebookGrade.updateGradeByGradeId(a,{...a,isExempt:d})):i(ek.Nwg.gradebookGrade.createGradeByUserId({courseId:o,columnId:r,userId:s,isExempt:d})),m(!0)},I={headerText:n("components.directives.grade.submission-list-row.per-gradable-item.title"),subHeaderText:(null==c?void 0:c.columnName)||"",analyticsIdPrefix:`${r4} `,showMenuToggleButton:!0,readyToFocus:!1};return Z.createElement("div",{className:t.gradableItemExempt},Z.createElement(nt.YI,{...I}),Z.createElement("div",{className:t.panelContent},Z.createElement("div",{className:t.panelContentRow},Z.createElement(tK.TextField,{value:`${(null==l?void 0:l.givenName)||""} ${(null==l?void 0:l.familyName)||""}`,isReadOnly:!0,label:n("components.directives.grade.submission-list-row.per-gradable-item.selectedStudentLabel")})),Z.createElement("div",{className:t.panelContentRow},Z.createElement(tK.Checkbox,{checked:d,disabled:(null==c?void 0:c.anonymousGrading)&&!a,label:n("components.directives.grade.submission-list-row.per-gradable-item.checkboxExemptLabel"),onChange:(e,t)=>u(!!t),analyticsId:`${r4}.checkbox`}))),Z.createElement("div",{className:t.panelFooter},Z.createElement(tK.BbPanelFooter,{primaryButtonProps:{text:n("components.directives.save-buttons.notSaved"),disabled:!y,onClick:()=>E(),className:t.footerButton},secondaryButtonProps:{text:n("components.directives.save-buttons.cancel"),onClick:()=>t0.Nd.leavePeekState(),className:t.footerButton},analyticsId:`${r4}.footer`})),Z.createElement(rQ,{showConfirmationModal:h,onCancel:()=>g(!1),onConfirmation:()=>{g(!1),b(!0),t0.Nd.leavePeekState()},analyticsId:r4}))},r5=(0,eO.makeStyles)(e=>(0,eO.createStyles)({studentTabs:{borderBottom:`1px solid ${e.palette.border.main}`,margin:"0 -30px",padding:"0 30px"}}));(S=_||(_={})).Grades="grades",S.Progress="progress",S.Notes="notes";let r6=[{id:_.Grades,ariaControls:`student-tab-panel-${_.Grades}`,displayKey:"gradebook.studentTabs.grades"},{id:_.Progress,ariaControls:`student-tab-panel-${_.Progress}`,displayKey:"gradebook.studentTabs.progress"},{id:_.Notes,ariaControls:`student-tab-panel-${_.Notes}`,displayKey:"gradebook.studentTabs.notes"}],r8=e=>{let{tabIds:t,onChange:n,value:i,analyticsId:s}=e,r=r5(),o=(0,et.q)(),a=t.map(e=>r6.find(t=>t.id===e)).filter(e=>!!e);return Z.createElement("div",{className:r.studentTabs},Z.createElement(el.AnalyticsTabs,{onChange:(e,t)=>n(t),value:null!=i?i:r6[0].id,analyticsId:`${s}.grade.studentTabs`},a.map(e=>Z.createElement(el.AnalyticsTab,{analyticsId:`${s}.grade.studentTabs.${e.id}`,className:`js-student-tab-${e.id}`,key:`student-tab-${e.id}`,value:e.id,id:`student-tab-${e.id}`,label:o(e.displayKey),"aria-controls":e.ariaControls}))))};var oe=n(137444),ot=n(423704),on=n(745916);let oi=(0,tl.ZL)(()=>(0,tl.kc)({schemaDialog:{"& div":{border:"none"},"& input":{margin:"0px",border:"none"},"& .bb-dialog-content":{minHeight:"85px"}},warningMessage:{margin:"0"},helperTxtMsg:{margin:"0px",marginTop:"5px"}}));var os=n(219217);function or(){return{isValid:!0,symbols:{}}}let oo={NOT_A_NUMBER:"components.directives.validation.messages.errors.number_invalid",SHOULD_BE_ZERO:"components.directives.validation.messages.errors.number_be_zero",SHOULD_BE_GREATER_THAN:"components.directives.validation.messages.errors.number_small",SHOULD_BE_GREATER_THAN_OR_EQUAL_TO_HUNDRED:"components.directives.validation.messages.errors.number_small",NO_EMPTY:"components.directives.validation.messages.errors.required",NO_DUPLICATE:"components.directives.validation.messages.errors.schema_symbol_string",NOT_MORE_THAN_32_CHARACTERS:"components.directives.validation.messages.errors.max_chars"},oa=e=>{let{formatNumber:t}=(0,eB.h)(),n=(0,et.q)(),[i,s]=(0,Z.useState)(or()),r=(0,Z.useCallback)(t=>{var n;let i=e[t].lowerBound,s=null===(n=e[t+1])||void 0===n?void 0:n.lowerBound;return void 0!==s&&i<=s},[e]),o=(0,Z.useCallback)((i,s)=>{var o;let a=s.lowerBound,l="";return("string"==typeof a?a:"")?l=n(oo.NOT_A_NUMBER):i===e.length-1&&0!==a?l=n(oo.SHOULD_BE_ZERO):r(i)&&(l=n(oo.SHOULD_BE_GREATER_THAN,{value_LOCALIZED:t((null===(o=e[i+1])||void 0===o?void 0:o.lowerBound)+.1,{style:"decimal",maximumFractionDigits:5})})),{isValid:!l,errorMessage:l}},[t,r,e,n]),a=(0,Z.useCallback)((e,i)=>{if(0===e){let e=i.upperBound,s="";return("string"==typeof e?e:"")?s=n(oo.NOT_A_NUMBER):e<100?s=n(oo.SHOULD_BE_GREATER_THAN_OR_EQUAL_TO_HUNDRED,{value_LOCALIZED:t(100)}):!isNaN(i.lowerBound)&&i.upperBound<=i.lowerBound&&(s=n(oo.SHOULD_BE_GREATER_THAN,{value_LOCALIZED:t(i.lowerBound+.1,{style:"decimal",maximumFractionDigits:5})})),{isValid:!s,errorMessage:s}}return{isValid:!0,errorMessage:""}},[t,n]),l=(0,Z.useCallback)((i,s)=>{let r=s.symbol,o="";return r.trim()?r.length>32?o=n(oo.NOT_MORE_THAN_32_CHARACTERS,{limit:t(32)}):e.find((e,t)=>t!==i&&e.symbol===r)&&(o=n(oo.NO_DUPLICATE)):o=n(oo.NO_EMPTY),{isValid:!o,errorMessage:o}},[e,n,t]),c=(0,Z.useCallback)(()=>{s(e&&0!==e.length?e.reduce((e,t,n)=>{let i=o(n,t),s=a(n,t),r=l(n,t);return e.symbols[t.id]={lowerBound:i,upperBound:s,gradeName:r},e.isValid&&(i.errorMessage||s.errorMessage||r.errorMessage)&&(e.isValid=!1),e},{symbols:{},isValid:!0}):or())},[e,l,o,a]);return(0,Z.useEffect)(()=>{c()},[c,e]),i},ol="add-schema";var oc=({schemas:e,exitCallback:t})=>{let[n,i]=(0,Z.useState)(!1),[s,r]=(0,Z.useState)(!1),[o,a]=(0,Z.useState)(""),l=(0,Z.useRef)(null),c=oi(),d=(0,et.q)(),u="add-schema-name-field",p=(e=!1)=>{r(e),i(!0)},m=(0,os.y1)(()=>{var e,t;l&&l.current&&(null===(t=null===(e=l.current.getElementsByTagName("input"))||void 0===e?void 0:e.item(0))||void 0===t||t.focus())},1);(0,Z.useEffect)(()=>{n||m()},[n,m]);let h=e.some(e=>e.ui.displayTitle.toLocaleLowerCase()===o.toLocaleLowerCase());return K().createElement(en._X,{open:!n,maxWidth:"md",disableBackdropClick:!0,className:(0,eN.Z)(c.schemaDialog,"js-add-schema-dialog"),onClose:()=>p(),TransitionProps:{onExited:()=>{t(s,o),i(!1)}},"aria-labelledby":`${ol}-dialog-title`,analyticsId:"course.grades.settings.schema.add.dialog"},K().createElement(el.AnalyticsDialogTitle,{analyticsId:`${ol}-dialog-title`,onClose:()=>p(),id:`${ol}-dialog-title`,closeButtonProps:{"aria-label":d("gradingSchema.aria.addSchemaCloseBtn")}},d("gradingSchema.addGradingSchemaModal.title")),K().createElement(el.AnalyticsDialogContent,{analyticsId:`${ol}-dialog-content`},K().createElement(oe.L,{ref:l,analyticsId:"course.grades.settings.schema.add.title.input",floatingLabel:!0,label:d("gradingSchema.addGradingSchemaModal.textInputLabel"),value:o,error:h,helperText:h&&K().createElement(el.AnalyticsTypography,{component:"span",className:c.warningMessage},d("gradingSchema.schemaDetail.duplicateGradingSchemaModal.warning")),InputProps:{id:u},InputLabelProps:{htmlFor:u},FormHelperTextProps:{classes:{root:c.helperTxtMsg}},onChange:e=>{let t=e.target.value.substring(0,64);a(t)},fullWidth:!0})),K().createElement(el.AnalyticsDialogActions,{analyticsId:`${ol}-dialog-actions`},K().createElement(ot.x,{onClick:()=>p(!1),analyticsId:"course.grades.settings.schema.add.cancel.button","aria-label":d("global.cancel")},d("global.cancel")),K().createElement(on.AnalyticsPrimaryButton,{analyticsId:"course.grades.settings.schema.add.save.button",disabled:""===o||h,onClick:()=>p(!0),"aria-label":d("global.save")},d("gradingSchema.addGradingSchemaModal.add"))))};let od=(0,tl.ZL)(e=>(0,tl.kc)({sideBarContainer:{height:"100%",borderRight:`1px solid ${e.palette.border.main}`,overflowY:"auto",width:"20%",[e.breakpoints.down("sm")]:{width:"50%"},[e.breakpoints.down("xs")]:{width:"100%"}},schemaTopBar:{display:"flex",padding:"15px 10px 15px 15px",justifyContent:"space-between",alignItems:"center"},sideBarTitle:{margin:"0 !important",fontSize:"16px !important",fontWeight:e.typography.fontWeightBold},openSchemaDialogBtn:{background:e.palette.background.default,color:e.palette.text.secondary,"&:hover":{borderColor:e.palette.background.default,background:e.palette.background.default,color:e.palette.action.active}},warningBanner:{padding:"12px 16px"},warningIconContainer:{display:"flex",justifyContent:"center",alignItems:"center"},warningIcon:{marginRight:"10px"}}));var ou=n(465139),op=n(664626);let om=(0,tl.ZL)(e=>(0,tl.kc)({gradingSchemaListItem:{padding:0},gradingSchemaListItemButton:{width:"100%",justifyContent:"flex-start",padding:"12px",color:e.palette.action.active,fontWeight:e.typography.fontWeightMedium,borderRadius:0,borderBottom:`1px solid ${e.palette.border.main}`,wordBreak:"break-word",textAlign:"start",background:e.palette.background.default,"&:hover":{background:e.palette.background.default}},gradingSchemaListItemButtonActive:{color:e.palette.background.default,background:e.palette.action.selected,textDecoration:"underline","&:hover":{textDecoration:"underline",background:e.palette.action.selected}}}));var oh=n(392935);let og=({schema:e,selectedSchema:t,setSelectedSchema:n,listItemRef:i,setDrawerOpen:s,discardToggleOpen:r,isFooterOpen:o})=>{var a,l;let c=(0,eO.useTheme)(),d=(0,eO.useMediaQuery)(c.breakpoints.down("xs")),u=om();return Z.createElement(oh.o,{analyticsId:"course.grades.settings.schema.select",onClick:()=>{o?t.id!==e.id&&r(!0):(n(e),d&&s(!0))},ref:t.id===e.id?i:null,className:u.gradingSchemaListItem,title:null===(a=null==e?void 0:e.ui)||void 0===a?void 0:a.displayTitle},Z.createElement(el.AnalyticsDefaultButton,{analyticsId:"course.grades.settings.schema.button",className:(0,eN.Z)({[u.gradingSchemaListItemButton]:!0,"js-listitem-btn-active":t.id===e.id,[u.gradingSchemaListItemButtonActive]:t.id===e.id})},null===(l=null==e?void 0:e.ui)||void 0===l?void 0:l.displayTitle))},of=e=>{let t=(0,ts.Lx)(),n=(0,ts.pJ)(e=>ek.Ys.gradebookSchema.areGradebookSchemasLoading(e)),i=(0,ts.pJ)(e=>ek.Ys.gradebookSchema.isGradebookSchemaDataValid(e));return(0,Z.useEffect)(()=>{!e||n||i||t(ek.Nwg.gradebookSchema.loadGradebookSchemasByCourseId({courseId:e}))},[e,t,n,i]),{gradingSchemas:(0,ts.pJ)(t=>ek.Ys.gradebookSchema.getGradebookSchemasByCourseId(t,e)),isLoading:n,isValid:i}},ob=e=>{let t=(0,et.q)();return(0,Z.useMemo)(()=>e.filter(e=>e.scaleType===eA.aQo.Tabular).map(e=>({...e,ui:{...e.ui,displayTitle:e.ui.displayTitleKey?t(e.ui.displayTitleKey):e.ui.displayTitle}})),[e,t])},ov=({courseId:e,schemas:t,setSelectedSchema:n,selectedSchema:i,setDrawerOpen:s,drawerOpen:r,discardToggleOpen:o,isFooterOpen:a,focusAndScrollAddedSchema:l,setFocusAndScrollAddedSchema:c,openAddSchemaDialog:d})=>{let u=od(),p=(0,et.q)(),m=(0,Z.useRef)(null),h=of(e).gradingSchemas,g=h.length>=100,f=(0,ts.gH)("gradingSchema","gradingSchema.organization"),b=(0,ou.y1)(e=>{var t,n;m&&m.current&&(m.current.scrollIntoView({behavior:"smooth",block:"center"}),e&&(null===(n=null===(t=m.current.getElementsByTagName("button"))||void 0===t?void 0:t.item(0))||void 0===n||n.focus(),c(!1)))},350);return(0,Z.useEffect)(()=>{b(l)},[h.length,r,l,b]),K().createElement("div",{className:u.sideBarContainer},K().createElement("div",{className:u.schemaTopBar},K().createElement(el.AnalyticsTypography,{variant:"h2",className:u.sideBarTitle},p("gradingSchema.sideBar.title")),K().createElement(el.AnalyticsDefaultButton,{analyticsId:"course.grades.settings.schema.add.button",className:u.openSchemaDialogBtn,disabled:g,startIcon:K().createElement(em.Add,null),onClick:d,"aria-label":p("gradingSchema.addGradingSchemaModal.title")},p("gradingSchema.sideBar.add"))),g&&K().createElement(op.m,{severity:"warning",classes:{root:u.warningBanner}},K().createElement("div",{className:u.warningIconContainer},K().createElement(em.Warning,{className:u.warningIcon}),K().createElement(el.AnalyticsTypography,null,p(f("gradingSchema.sideBar.maximumLimitWarning"))))),i&&K().createElement(el.AnalyticsList,{analyticsId:"gradebook.schema.side-bar.list",className:"grading-schema-list"},t.map(e=>K().createElement(og,{key:e.id,setDrawerOpen:s,selectedSchema:i,schema:e,listItemRef:m,setSelectedSchema:n,isFooterOpen:a,discardToggleOpen:o}))))},oy=(0,tl.ZL)(e=>(0,tl.kc)({gradingSchemaContainer:{display:"flex",height:"100%"},peekPanel:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",height:"100%"},peekPanelHeader:{"& .ms-Panel-subTitle, .ms-Panel-headerText":{paddingLeft:"16px",maxWidth:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",[e.breakpoints.up("sm")]:{maxWidth:"400px"}}},peekPanelContainer:{height:"100%",padding:0,overflowY:"auto"},schemaDrawer:{top:"3rem"},spinner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"}})),oC=(0,tl.ZL)(()=>(0,tl.kc)({schemaDialog:{"& div":{border:"none"},"& input":{margin:"0px",border:"none"},"& .bb-dialog-content":{minHeight:"85px"}},warningMessage:{margin:"0"},helperTxtMsg:{margin:"0px",marginTop:"5px"}}));(E=q||(q={})).Discard="discard",E.Duplicate="duplicate",E.Delete="delete";let oS=({dialogHandler:e,handleOnClose:t,title:n,description:i,isDialogOpen:s,dialogId:r,actionBtnName:o,schemas:a,selectedSchemaName:l})=>{let c=(0,et.q)(),d=oC(),u=r===q.Duplicate,[p,m]=(0,Z.useState)(""),h=(0,Z.useRef)(null),g="dialog-text-field";(0,Z.useEffect)(()=>{let e=c("gradingSchema.schemaDetail.duplicateGradingSchemaModal.duplicatedName",{value:""}).length,t=c("gradingSchema.schemaDetail.duplicateGradingSchemaModal.duplicatedName",{value:l.substring(0,64-e)});m(t)},[c,l]);let f=(0,ou.y1)(()=>{var e,t,n;null===(n=null===(t=null===(e=null==h?void 0:h.current)||void 0===e?void 0:e.getElementsByTagName("input"))||void 0===t?void 0:t.item(0))||void 0===n||n.focus()},1);(0,Z.useEffect)(()=>{s&&f()},[s,f]);let b=a.some(e=>e.ui.displayTitle.toLocaleLowerCase()===p.toLocaleLowerCase());return K().createElement(el.AnalyticsDialog,{analyticsId:`${r}-dialog`,id:`${r}-dialog`,className:(0,eN.Z)({[d.schemaDialog]:u,"js-duplicate-schema-dialog":u,"gradingSchema-dicard-dialog":!u}),open:s,maxWidth:"md",disableBackdropClick:!0,onClose:t,"aria-labelledby":`${r}-dialog-title`},K().createElement(el.AnalyticsDialogTitle,{analyticsId:`${r}-dialog-title`,onClose:t,id:`${r}-dialog-title`},n),K().createElement(el.AnalyticsDialogContent,{analyticsId:`${r}-dialog-content`},u?K().createElement(el.AnalyticsTextField,{ref:h,analyticsId:"course.grades.settings.schema.duplicate.title.input",floatingLabel:!0,label:c("gradingSchema.addGradingSchemaModal.textInputLabel"),value:p,error:b,helperText:b&&K().createElement(el.AnalyticsTypography,{component:"span",className:d.warningMessage},c("gradingSchema.schemaDetail.duplicateGradingSchemaModal.warning")),FormHelperTextProps:{classes:{root:d.helperTxtMsg}},InputProps:{id:g},InputLabelProps:{htmlFor:g},onChange:e=>{let t=e.target.value.substring(0,64);m(t)},fullWidth:!0}):K().createElement(el.AnalyticsDialogContentText,{analyticsId:`${r}-dialog-description`,id:`${r}-dialog-description`},i,K().createElement("div",null),c("gradingSchema.schemaDetail.discardGradingSchemaModal.warning"))),K().createElement(el.AnalyticsDialogActions,{analyticsId:`${r}-dialog-actions`},K().createElement(el.AnalyticsDefaultButton,{onClick:t,analyticsId:`course.grades.settings.schema.${r}.cancel.button`,"aria-label":c("global.cancel")},c("global.cancel")),K().createElement(el.AnalyticsPrimaryButton,{analyticsId:`course.grades.settings.schema.${r}.button`,disabled:!!u&&(""===p||b),onClick:()=>e(p),"aria-label":u?c("gradingSchema.aria.copySchemaSave"):c("gradingSchema.aria.discardSchemaButton")},o)))},oE=(0,tl.ZL)(e=>(0,tl.kc)({footerContainer:{width:"80%",position:"absolute",bottom:0,right:0,zIndex:3,[e.breakpoints.down("sm")]:{width:"50%"},[e.breakpoints.down("xs")]:{width:"100%"}}})),oI=(0,tl.ZL)(e=>(0,tl.kc)({menuIconBtn:{minHeight:"auto",zIndex:1},detailsMenuIcon:{cursor:"pointer",color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}},menuItem:{transition:"all .2s","& span":{marginLeft:"10px"},"&:hover":{transition:"all .2s",background:e.palette.background.b9,color:e.palette.background.default}}}));var ow=({symbol:e,rowDeleteHandler:t,setEditableHandler:n,numberOfSchemaRows:i,currentSymbolIndex:s})=>{let r=oI(),o=(0,et.q)(),[a,l]=(0,Z.useState)(null),c=(0,Z.useCallback)(()=>{l(null)},[]),d=(0,Z.useCallback)(e=>{l(e.currentTarget)},[]);return K().createElement(K().Fragment,null,K().createElement(el.AnalyticsIconButton,{analyticsId:"gradebook.schema.read-only-symbol-menu.iconButton",className:r.menuIconBtn,onClick:d,"aria-label":o("gradingSchema.aria.optionsButton",{NAME:e.symbol})},K().createElement(rg.Menu,{"aria-expanded":null!==a,"aria-haspopup":"menu",className:(0,eN.Z)(r.detailsMenuIcon,`menu-icon-${e.symbol}`)})),K().createElement(el.AnalyticsMenu,{analyticsId:"gradebook.schema.read-only-symbol-menu.menu",anchorEl:a,open:null!==a,onClose:c},K().createElement(el.AnalyticsMenuItem,{analyticsId:"gradebook.schema.read-only-symbol-menu.menuItem",className:(0,eN.Z)(r.menuItem,`js-edit-menu-${e.symbol}`),button:!0,onClick:()=>{c(),n(z.SYMBOL)},"aria-label":o("gradingSchema.schemaDetail.edit")},K().createElement(em.Edit,{className:"menu-icon"}),K().createElement(el.AnalyticsTypography,{component:"span"},o("gradingSchema.schemaDetail.edit"))),i-1!==s&&i>2&&K().createElement(el.AnalyticsMenuItem,{analyticsId:"gradebook.schema.read-only-symbol-menu.menuItem",className:(0,eN.Z)(r.menuItem,`js-delete-menu-${e.symbol}`),button:!0,onClick:()=>{c(),t(s)},"aria-label":o("gradingSchema.schemaDetail.delete")},K().createElement(em.Trash,{className:"menu-icon"}),K().createElement(el.AnalyticsTypography,{component:"span"},o("gradingSchema.schemaDetail.delete")))))};let oA=(0,tl.ZL)(e=>(0,tl.kc)({gradeText:{width:"70%",'& input[type="text"]':{border:"none"},[e.breakpoints.up("sm")]:{width:"100%"},[e.breakpoints.up("xs")]:{'& input[type="text"]':{margin:"0px"}}},gradeTextErrorMsg:{marginBottom:"5px"},gradeSymbol:{display:"inline-block",width:"70%",margin:"0",zIndex:1,cursor:"pointer"},helperTxtMsg:{margin:"0px",marginTop:"5px"}}));var ok=({symbol:e,isEditable:t,gradeSymbolOnChangeHandler:n,gradeSymbolOnClickHandler:i,currentEditableRow:s,currentIndex:r,clickedTextField:o,validation:a})=>{let l=(0,et.q)(),c=oA(),d=`grade-symbol-text-field-${r}`,u=`grade-symbol-error-msg-${r}`;return K().createElement(K().Fragment,null,t?K().createElement(el.AnalyticsTextField,{className:c.gradeText,floatingLabel:!0,label:l("gradingSchema.schemaDetail.symbolLabel"),value:null==e?void 0:e.symbol,onChange:n,onClick:i,InputLabelProps:{shrink:!0,htmlFor:d},autoFocus:s===r&&o===z.SYMBOL,error:!a.isValid,helperText:K().createElement(K().Fragment,null,!a.isValid&&K().createElement(el.AnalyticsTypography,{component:"span",className:c.gradeTextErrorMsg,id:u},a.errorMessage)),InputProps:{id:d,"aria-label":l("gradingSchema.aria.gradeName"),"aria-describedby":a.isValid?void 0:u},FormHelperTextProps:{classes:{root:c.helperTxtMsg}},analyticsId:"course.grades.settings.schemaEdit.updateSymbolString.input.text",required:!0}):K().createElement(el.AnalyticsTypography,{component:"span",onClick:i,className:(0,eN.Z)(c.gradeSymbol,`symbol-${e.symbol}grade-symbol`),"aria-label":l("gradingSchema.aria.gradeName",{NAME:e.symbol})},e.symbol))},ox=({validation:e,currentIndex:t})=>{let n=(0,tl.ZL)(()=>(0,tl.kc)({warningMessage:{margin:"0"}})),i=n();return K().createElement(K().Fragment,null,!e.lowerBound.isValid&&K().createElement(el.AnalyticsTypography,{component:"span",className:i.warningMessage,id:`lower-bound-error-msg-${t}`},e.lowerBound.errorMessage),!e.upperBound.isValid&&K().createElement(el.AnalyticsTypography,{component:"span",className:i.warningMessage,id:`upper-bound-error-msg-${t}`},e.upperBound.errorMessage))};let oT=(0,tl.ZL)(e=>(0,tl.kc)({rangeText:{width:"60px",'& input[type="text"],input[type="text"][disabled]':{margin:"0",textAlign:"left",backgroundColor:e.palette.background.default,border:"none",color:e.palette.action.selected}},nonEditableBound:{margin:"0",cursor:"pointer"},boundHelperTxtMsg:{display:"flex",flexDirection:"column",margin:"0",marginTop:"5px",whiteSpace:"nowrap",color:e.palette.error.main,width:"250px",overflowWrap:"break-word",wordBreak:"break-word",[e.breakpoints.down("sm")]:{whiteSpace:"pre-wrap"}}})),oP=(e,t)=>{let{formatNumber:n,countDigits:i}=(0,eB.h)();if("string"==typeof e)return t;let s=i(t).fractionalCount;return n(e,{maximumFractionDigits:5,useGrouping:!1,minimumFractionDigits:s>0&&s<=5?s:void 0})};var oD=({isEditable:e,symbol:t,lowerBoundOnClickHandler:n,lowerBoundOnChangeHandler:i,isCurrentRowEditable:s,clickedTextField:r,validation:o,HelperText:a,currentIndex:l})=>{let c=oT(),d=(0,et.q)(),[u,p]=(0,Z.useState)(t.lowerBound||0===t.lowerBound?t.lowerBound.toString():""),m=`lower-bound-field-${l}`,h=(0,Z.useCallback)(e=>{let{value:t}=e.target;p(t),i(t)},[i]),g=(0,Z.useCallback)(()=>{p(t.lowerBound||0===t.lowerBound?t.lowerBound.toString():"")},[t.lowerBound]),f=oP(t.lowerBound,u);return K().createElement(K().Fragment,null,e?K().createElement(oe.L,{analyticsId:"course.grades.settings.schemaEdit.first.lowerBound.input.text",className:c.rangeText,floatingLabel:!0,label:d("gradingSchema.schemaDetail.lowerBoundLabel"),value:f,onClick:n,onChange:h,onBlur:g,autoFocus:s&&r===z.LOWER_BOUND,InputProps:{id:m,"aria-label":d("gradingSchema.aria.lowerBound"),"aria-describedby":o.isValid?void 0:`lower-bound-error-msg-${l}`},InputLabelProps:{shrink:!0,htmlFor:m},error:!o.isValid,helperText:a,FormHelperTextProps:{classes:{root:c.boundHelperTxtMsg}},required:!0}):K().createElement(el.AnalyticsTypography,{component:"span",className:(0,eN.Z)(c.nonEditableBound,`js-lowerBound-${t.symbol}`),onClick:n,"aria-label":d("gradingSchema.aria.lowerBound",{NAME:t.symbol,VALUE:u})},d("gradingSchema.schemaDetail.boundValues",{value:f})))},oG=({isDisabled:e,isEditable:t,symbol:n,upperBoundOnClickHandler:i,upperBoundOnChangeHandler:s,currentEditableRow:r,currentIndex:o,clickedTextField:a,validation:l})=>{let c=(0,et.q)(),d=oT(),[u,p]=(0,Z.useState)(n.upperBound||0===n.upperBound?n.upperBound.toString():""),m=`upper-bound-field-${o}`,h=(0,Z.useCallback)(e=>{let{value:t}=e.target;p(t),s(t)},[s]),g=(0,Z.useCallback)(()=>{p(n.upperBound||0===n.upperBound?n.upperBound.toString():"")},[n.upperBound]),f=oP(n.upperBound,u);return K().createElement(K().Fragment,null,!e&&t?K().createElement(oe.L,{analyticsId:"course.grades.settings.schemaEdit.first.upperBound.input.text",className:d.rangeText,value:f,disabled:e,onClick:i,onChange:h,onBlur:g,autoFocus:r===o&&a===z.UPPER_BOUND,error:!l.isValid,InputProps:{id:m,"aria-label":c("gradingSchema.aria.upperBound"),"aria-describedby":l.isValid?void 0:`upper-bound-error-msg-${o}`},InputLabelProps:{htmlFor:m},required:!0}):K().createElement(el.AnalyticsTypography,{component:"span",className:(0,eN.Z)(d.nonEditableBound,`js-upperBound-${n.symbol}`),onClick:i},c("gradingSchema.schemaDetail.boundValues",{value:f})))};let oR=(0,tl.ZL)(()=>(0,tl.kc)({deleteIcon:{transition:"0.2s linear",cursor:"pointer"},deleteIconBtn:{minHeight:"auto",zIndex:1},deleteIconHidden:{visibility:"hidden"}}));var oB=({rowDeleteHandler:e,numberOfSchemaRows:t,currentSymbolIndex:n,deleteMenuVisibilityIndex:i})=>{let s=(0,et.q)(),r=oR();return K().createElement(K().Fragment,null,t>2&&K().createElement(el.AnalyticsIconButton,{analyticsId:"gradingSchema.schemaDetail.delete",className:r.deleteIconBtn,onClick:()=>e(n),"aria-label":s("gradingSchema.schemaDetail.delete")},K().createElement(em.Trash,{className:(0,eN.Z)({[r.deleteIcon]:!0,"js-delete-icon":!0,[r.deleteIconHidden]:!(i===n&&t-1!==n)})})))};let oL=(0,tl.ZL)(e=>(0,tl.kc)({gradeDetailsContainer:{position:"relative",padding:0,borderBottom:`1px solid ${e.palette.border.main}`,"&:last-child":{borderBottom:`1px solid ${e.palette.border.main}`}},gradeList:{display:"inline-flex",justifyContent:"space-between",width:"40%",alignItems:"baseline","& span":{width:"100%"},[e.breakpoints.down("sm")]:{display:"flex",width:"100%"}},gradeListRange:{display:"inline-flex",justifyContent:"space-between",width:"60%",alignItems:"baseline",[e.breakpoints.down("sm")]:{display:"flex",width:"100%"}},leftCellBorder:{borderRight:`1px solid ${e.palette.border.main}`},cellContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",[e.breakpoints.down("sm")]:{alignItems:"flex-start"}},gradeLeftContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},textBoxContainer:{width:"70%"},gradeRightContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",[e.breakpoints.down("sm")]:{marginTop:"24px"}},gradeListRangeLeft:{display:"inline-flex",alignItems:"baseline",justifyContent:"space-between",zIndex:1},textBetween:{margin:"0px 5px",whiteSpace:"nowrap"},middleAddIconList:{position:"absolute",width:"100%",padding:"0",left:0,height:"16px",bottom:2},middleAddIcon:{width:"100%",position:"relative",padding:"12px 0",left:0,transition:"all 0.2s","& span":{height:"16px",zIndex:2}},iconLine:{position:"absolute",bottom:"0",width:"100%",border:`1px solid ${e.palette.brand.main}`},iconLineDisabled:{border:`1px solid ${e.palette.action.disabled}`},addIcon:{color:e.palette.brand.main,fill:e.palette.common.white,position:"absolute",bottom:"30%",zIndex:1},addIconDisabled:{color:e.palette.action.disabled}}));var oN=({symbol:e,index:t,id:n,symbolChangeHandler:i,lowerBoundChangeHandler:s,upperBoundChangeHandler:r,editedSchemaSymbols:o,addRowHandler:a,deleteRowHandler:l,validation:c,isUpperBoundDisabled:d,numberOfSchemaRows:u,setEditableRow:p,editableRow:m,clickedTextField:h,setClickedTextField:g})=>{let[f,b]=(0,Z.useState)(-1),[v,y]=(0,Z.useState)(-1),[C,S]=(0,Z.useState)(!1),E=(0,eO.useTheme)(),I=(0,et.q)(),w=oL(),A=(0,eO.useMediaQuery)(E.breakpoints.down("sm")),k=m===t||!c.upperBound.isValid||!c.lowerBound.isValid||!c.gradeName.isValid,x=(0,Z.useCallback)(e=>{g(e),p(t)},[t,g,p]),T=(0,Z.useCallback)(()=>{x(z.SYMBOL)},[x]),P=(0,Z.useCallback)(()=>{x(z.LOWER_BOUND)},[x]),D=(0,Z.useCallback)(()=>{x(z.UPPER_BOUND)},[x]),G=(0,Z.useCallback)(e=>{i(t,e.target.value)},[t,i]),R=(0,Z.useCallback)(e=>{s(t,e)},[t,s]),B=(0,Z.useCallback)(e=>{r(t,e)},[t,r]);(0,Z.useEffect)(()=>{u-1!==t&&S("number"!=typeof o[t+1].lowerBound)},[o,t,u]);let L=()=>{b(t)},N=()=>{b(-1)},O=()=>K().createElement("div",{className:w.gradeRightContainer},K().createElement(eO.Box,{className:w.gradeListRangeLeft},K().createElement(oD,{isEditable:k,symbol:e,currentIndex:t,lowerBoundOnClickHandler:P,lowerBoundOnChangeHandler:R,isCurrentRowEditable:m===t,clickedTextField:h,validation:c.lowerBound,HelperText:K().createElement(ox,{validation:c,currentIndex:t})}),K().createElement(el.AnalyticsTypography,{component:"span",className:w.textBetween,"aria-label":I("gradingSchema.schemaDetail.textBetween")},0!==t?I("gradingSchema.schemaDetail.textBetween"):I("gradingSchema.schemaDetail.textBetweenLastRow")),K().createElement(oG,{isDisabled:d,isEditable:k,symbol:e,upperBoundOnClickHandler:D,upperBoundOnChangeHandler:B,currentEditableRow:m,currentIndex:t,clickedTextField:h,validation:c.upperBound}))),M=()=>K().createElement("div",null,k?K().createElement(oB,{rowDeleteHandler:l,numberOfSchemaRows:u,currentSymbolIndex:t,deleteMenuVisibilityIndex:v}):K().createElement(ow,{symbol:e,rowDeleteHandler:l,setEditableHandler:x,numberOfSchemaRows:u,currentSymbolIndex:t}),u-1!==t&&K().createElement("div",{className:w.middleAddIconList,onMouseEnter:L,onMouseLeave:N,onFocus:L,onBlur:N},K().createElement(el.AnalyticsTooltip,{analyticsId:"",title:I("gradingSchema.schemaDetail.addIcon",{value:e.symbol}),className:w.middleAddIcon},K().createElement(el.AnalyticsIconButton,{analyticsId:"gradebook.schema.details.iconButton",disabled:C,className:`js-middleAdd-con-${e.symbol}`,onClick:()=>a(t),"aria-label":I("gradingSchema.schemaDetail.addIcon",{value:e.symbol})},f===t&&K().createElement(K().Fragment,null,K().createElement(em.Add,{className:(0,eN.Z)({[w.addIcon]:!0,"js-add-Icon":!0,[w.addIconDisabled]:C})}),K().createElement("hr",{className:(0,eN.Z)({[w.iconLine]:!0,[w.iconLineDisabled]:C})}))))));return K().createElement(el.AnalyticsTableRow,{analyticsId:"gradebook.schema.details.tableRow",className:(0,eN.Z)(w.gradeDetailsContainer,"js-grade-deatails-container"),key:n,onMouseOver:()=>{y(t)},onMouseOut:()=>{y(-1)},onFocus:()=>{y(t)},onBlur:()=>{y(-1)}},K().createElement(el.AnalyticsTableCell,{analyticsId:"gradebook.schema.details.tableCell",className:w.leftCellBorder},K().createElement("div",{className:w.cellContainer},K().createElement("div",{className:w.textBoxContainer},K().createElement(ok,{symbol:e,isEditable:k,gradeSymbolOnChangeHandler:G,gradeSymbolOnClickHandler:T,currentEditableRow:m,currentIndex:t,clickedTextField:h,validation:c.gradeName}),A&&O()),A&&M())),!A&&K().createElement(el.AnalyticsTableCell,{analyticsId:"gradebook.schema.details.tableCell"},K().createElement("div",{className:w.cellContainer},O(),M())))},oO=n(198022);(I=z||(z={}))[I.SYMBOL=0]="SYMBOL",I[I.LOWER_BOUND=1]="LOWER_BOUND",I[I.UPPER_BOUND=2]="UPPER_BOUND",I[I.NONE=3]="NONE";var oM=({editedSchemaSymbols:e,setSymbolsInCurrentSchema:t,setFooterOpen:n,setIsDirty:i,editableRow:s,setEditableRow:r,validation:o})=>{let{parseNumber:a,formatNumber:l}=(0,eB.h)(),[c,d]=(0,Z.useState)(z.NONE),u=(0,Z.useCallback)(s=>{var o;let c=[...e];if(s<c.length-1){let u=c[s+1],p=a(l((u.lowerBound+u.upperBound)/2,{style:"decimal",maximumFractionDigits:5}));c.splice(s+1,0,{schemaId:null===(o=e[s])||void 0===o?void 0:o.schemaId,lowerBound:p,upperBound:u.upperBound,absoluteTranslation:(p+u.upperBound)/2,symbol:"",id:(0,oO.v4)()}),u.upperBound=p,u.absoluteTranslation=(u.lowerBound+u.upperBound)/2,c[s+2]=u,t(c),n(!0),i(!1),r(s+1),d(z.SYMBOL)}},[e,a,l,t,n,i,r]),p=(0,Z.useCallback)(s=>{let r=[...e];if(s!==r.length-1&&r.length>2){let e=r[s+1];e.upperBound=r[s].upperBound,e.absoluteTranslation=(e.lowerBound+e.upperBound)/2,r.splice(s,1),t(r),i(!0),n(!0)}},[e,n,i,t]),m=(0,Z.useCallback)(n=>{let i=[...e];n!==e.length-1&&(i[n+1].upperBound=i[n].lowerBound,i[n+1].absoluteTranslation=(i[n+1].lowerBound+i[n+1].upperBound)/2,t(i))},[e,t]),h=(0,Z.useCallback)((s,r,o)=>{let c=[...e];if("symbol"===o)c[s][o]=r;else if(r.length<=21){let e=a(r),t=!isNaN(e);t?(c[s][o]=a(l(e,{style:"decimal",maximumFractionDigits:5})),c[s].absoluteTranslation=(c[s].lowerBound+c[s].upperBound)/2,"lowerBound"===o&&m(s)):c[s][o]=r}t(c),n(!0),i(!0)},[e,t,n,i,a,l,m]),g=(0,Z.useCallback)((e,t)=>{h(e,t,"symbol")},[h]),f=(0,Z.useCallback)((e,t)=>{h(e,t,"lowerBound")},[h]),b=(0,Z.useCallback)((e,t)=>{h(e,t,"upperBound")},[h]);return K().createElement(K().Fragment,null,e.filter(e=>!!e).map((t,n)=>K().createElement(oN,{numberOfSchemaRows:e.length,editedSchemaSymbols:e,symbol:t,key:t.id,id:t.id,index:n,symbolChangeHandler:g,lowerBoundChangeHandler:f,upperBoundChangeHandler:b,addRowHandler:u,deleteRowHandler:p,setEditableRow:r,editableRow:s,isUpperBoundDisabled:0!==n,validation:o.symbols[t.id]||function(){let e={isValid:!0,errorMessage:""};return{lowerBound:e,upperBound:e,gradeName:e}}(),clickedTextField:c,setClickedTextField:d})))};let o$=(0,tl.ZL)(e=>(0,tl.kc)({bodyContainer:{height:"100%",overflowY:"auto",padding:"20px",width:"80%",[e.breakpoints.down("sm")]:{width:"50%"},[e.breakpoints.down("xs")]:{width:"100%"}},backButton:{marginBottom:"10px"},backIcon:{fontSize:e.typography.fontSizeMedium,marginRight:"10px"},detailsHeader:{width:"70%",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${e.palette.border.main}`,"& :hover":{cursor:"pointer"},'& input[type="text"],input[type="text"]:focus':{margin:"0",textAlign:"left",backgroundColor:e.palette.background.default,border:"none",color:e.palette.action.selected,boxShadow:"none"},[e.breakpoints.down("md")]:{width:"70%"},[e.breakpoints.down("sm")]:{width:"100%"}},schemaTitle:{wordBreak:"break-all",margin:"0 !important"},detailsMenuIcon:{position:"relative",cursor:"pointer",color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}},editableTitle:{border:"none",fontSize:e.typography.fontSizeLarge},duplicateNameWarning:{margin:"8px 0 0 0",color:e.palette.error.main},inUseMessage:{margin:"8px 0 0 0"},listContainer:{width:"70%",border:`1px solid ${e.palette.border.main}`,borderBottom:0,marginTop:"16px",marginBottom:"50px",padding:"0px","& th":{width:"60%",background:e.palette.background.default,borderTop:0},[e.breakpoints.down("md")]:{width:"70%"},[e.breakpoints.down("sm")]:{width:"100%"}},leftCellBorder:{width:"40% !important",borderRight:`1px solid ${e.palette.border.main}`},listHeaderContainer:{padding:0},listHeader:{borderBottom:`1px solid ${e.palette.border.main}`},middleBorder:{position:"absolute",height:"100%",width:"60%",borderLeft:`1px solid ${e.palette.border.main}`,left:"40%"},gradeRangeBox:{marginLeft:0}})),oH=({isValid:e,numberOfSchemas:t,canDeleteGradingSchema:n,onDuplicateIconClick:i,onDeleteIconClick:s})=>{let r=oI(),o=(0,et.q)(),[a,l]=(0,Z.useState)(null),c=(0,Z.useCallback)(e=>{l(e.currentTarget)},[]),d=(0,Z.useCallback)(()=>{l(null)},[]),u=(0,Z.useCallback)(()=>{d(),i()},[d,i]),p=(0,Z.useCallback)(()=>{d(),s()},[d,s]);return n?K().createElement(K().Fragment,null,K().createElement(el.AnalyticsIconButton,{analyticsId:"gradebook.schema.options.menu.iconButton",className:r.menuIconBtn,onClick:c,"aria-label":o("gradingSchema.aria.schemaMenuOption")},K().createElement(rg.Menu,{"aria-expanded":null!==a,"aria-haspopup":"menu",className:r.detailsMenuIcon})),K().createElement(el.AnalyticsMenu,{className:"react-container",analyticsId:"gradebook.schema.options.menu",anchorEl:a,open:null!==a,onClose:d},K().createElement(el.AnalyticsMenuItem,{analyticsId:"course.grades.settings.duplicate.button",className:r.menuItem,button:!0,onClick:u,"aria-label":o("gradingSchema.aria.copySchemaButton"),disabled:!e||t>=100},K().createElement(em.Duplicate,null),K().createElement(el.AnalyticsTypography,{component:"span"},o("gradingSchema.schemaDetail.duplicate"))),K().createElement(el.AnalyticsMenuItem,{analyticsId:"course.grades.settings.delete.button",className:r.menuItem,button:!0,onClick:p,"aria-label":o("gradingSchema.schemaDetail.delete")},K().createElement(em.Trash,null),K().createElement(el.AnalyticsTypography,{component:"span"},o("gradingSchema.schemaDetail.delete"))))):K().createElement(el.AnalyticsTooltip,{analyticsId:"course.grades.settings.duplicate.tooltip",title:o("gradingSchema.schemaDetail.duplicate"),placement:"right"},K().createElement(el.AnalyticsIconButton,{id:"copy-schema-btn",analyticsId:"course.grades.settings.duplicate.button",disabled:!e||t>=100,onClick:i,"aria-label":o("gradingSchema.aria.copySchemaButton")},K().createElement(em.Duplicate,{className:r.detailsMenuIcon})))},oF=({schemaName:e,isDirty:t,courseId:n,hasDuplicateName:i,editedSchemaSymbols:s,isFooterOpen:r,editableRow:o,setEditedSchemaSymbols:a,setDrawerOpen:l,setFooterOpen:c,setIsDirty:d,setEditableRow:u,discardToggleOpen:p,setIsDuplicateDialogOpen:m,setSchemaName:h,validation:g,selectedSchema:f,setIsNameEditable:b,isNameEditable:v,deleteSelectedGradingSchema:y})=>{let C=(0,et.q)(),S=(0,eO.useTheme)(),E=o$(),I=(0,eO.useMediaQuery)(S.breakpoints.down("xs")),w=(0,eO.useMediaQuery)(S.breakpoints.down("sm")),A=of(n).gradingSchemas,k=(0,Z.useRef)(null),x=(0,Z.useCallback)(e=>{a([...e])},[a]);(0,Z.useEffect)(()=>{t||b(!0)},[f.id,t,b]),(0,Z.useEffect)(()=>{v||f.ui.displayTitle===e||(c(!0),d(!0))},[v,c,d,e,f.ui.displayTitle]),(0,Z.useEffect)(()=>{c(!1),d(!1)},[f,c,d]),(0,Z.useEffect)(()=>{let e=e=>{var t;!k.current||(null===(t=k.current)||void 0===t?void 0:t.contains(e.target))||u(-1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[g.isValid,u]);let T=(0,Z.useCallback)(e=>{"Enter"===e.key&&b(!i)},[b,i]);return K().createElement(eO.Box,{className:E.bodyContainer},I&&K().createElement(el.AnalyticsIconButton,{className:E.backButton,onClick:()=>{r?p(!0):l(!1)},analyticsId:"course.grades.settings.back.button"},K().createElement(em.ChevronLeft,{className:E.backIcon}),C("gradingSchema.schemaDetail.back")),K().createElement(eO.Box,{className:E.detailsHeader},v?K().createElement(el.AnalyticsTypography,{className:E.schemaTitle,variant:"h2",onClick:()=>{b(!1)}},e,K().createElement(el.AnalyticsIconButton,{analyticsId:"course.grades.settings.edit.title.button","aria-label":C("gradingSchema.aria.editSchemaNameButton")},K().createElement(em.Edit,{className:E.detailsMenuIcon}))):K().createElement(el.AnalyticsTextField,{analyticsId:"course.grades.settings.schema.add.title.input",autoFocus:!0,InputProps:{classes:{root:E.editableTitle}},value:e,onChange:e=>h(e.target.value.substring(0,64)),onKeyDown:T,onBlur:()=>b(!i)}),K().createElement(oH,{isValid:g.isValid,numberOfSchemas:A.length,onDuplicateIconClick:()=>t?p(!0):m(!0),onDeleteIconClick:t?()=>p(!0):()=>y(f.id),canDeleteGradingSchema:!f.isInUse})),i&&K().createElement(el.AnalyticsTypography,{className:E.duplicateNameWarning},C("gradingSchema.schemaDetail.duplicateGradingSchemaModal.warning")),f.isInUse&&K().createElement(el.AnalyticsTypography,{className:(0,eN.Z)(E.inUseMessage,"js-in-use-message")},C("gradingSchema.schemaDetail.inUseMessage")),K().createElement("div",{className:(0,eN.Z)(E.listContainer,"js-list-Container"),ref:k},K().createElement(el.AnalyticsTable,{analyticsId:"gradingSchema.schemeMappingTable","aria-label":C("gradingSchema.aria.schemaMappingTable")},K().createElement(el.AnalyticsTableHead,{analyticsId:"gradingSchema.schemeMappingTableHead"},K().createElement(el.AnalyticsTableRow,{analyticsId:"gradingSchema.schemeMappingTableRow"},K().createElement(el.AnalyticsTableCell,{analyticsId:"gradingSchema.schemeMappingTableCell",className:E.leftCellBorder},K().createElement(el.AnalyticsTypography,{variant:"h3"},C("gradingSchema.schemaDetail.gradeName"))),!w&&K().createElement(el.AnalyticsTableCell,{analyticsId:"gradingSchema.schemeMappingTableCell"},K().createElement(el.AnalyticsTypography,{variant:"h3"},C("gradingSchema.schemaDetail.gradeRange"))))),K().createElement(el.AnalyticsTableBody,{analyticsId:"gradingSchema.schemeMappingTableBody"},s&&s.length&&K().createElement(oM,{editedSchemaSymbols:s,setSymbolsInCurrentSchema:x,setFooterOpen:c,setIsDirty:d,editableRow:o,setEditableRow:u,validation:g})))))},oU=({selectedSchema:e,setDrawerOpen:t,courseId:n,schemas:i,setSelectedSchema:s,setFooterOpen:r,isFooterOpen:o,discardToggleOpen:a,isDiscardOpen:l,setFocusAndScrollAddedSchema:c,deleteSelectedGradingSchema:d})=>{var u;let[p,m]=(0,Z.useState)(e.symbols),h=oa(p),[g,f]=(0,Z.useState)(!1),[b,v]=(0,Z.useState)(null===(u=null==e?void 0:e.ui)||void 0===u?void 0:u.displayTitle),[y,C]=(0,Z.useState)(-1),[S,E]=(0,Z.useState)(!1),[I,w]=(0,Z.useState)(!1),[A,k]=(0,Z.useState)(!0),x=(0,ts.Lx)(),T=(0,et.q)(),P=oE(),D=eL.cloneDeep((0,ts.pJ)(t=>ek.Ys.gradebookSchema.getGradebookSchemaById(t,e.id)));(0,Z.useEffect)(()=>{m(e.symbols),v(e.ui.displayTitle),C(-1)},[e.symbols,e.ui.displayTitle]);let G=()=>{w(!1)},R=async()=>{let e=(null==D?void 0:D.ui.displayTitleKey)?T(null==D?void 0:D.ui.displayTitleKey):null==D?void 0:D.ui.displayTitle;s({...D,ui:{displayTitle:e}}),v(e),m(eL.cloneDeep(null==D?void 0:D.symbols)),r(!1),f(!1),a(!1),k(!0)},B=async t=>{if(g)return;let i=await x(ek.Nwg.gradebookSchema.persistGradebookSchema({courseId:n,schema:{...e,symbols:p,id:void 0,title:t,ui:{displayTitle:t}}})),r=eL.cloneDeep(null==i?void 0:i.schema);s(r),c(!0),G()},L=(0,Z.useCallback)(()=>{a(!0)},[a]),N=(0,Z.useCallback)(e=>{"Escape"===e.key&&o&&!l&&L()},[L,l,o]);(0,Z.useEffect)(()=>(document.addEventListener("keydown",N,!1),()=>{document.removeEventListener("keydown",N,!1)}),[N]),(0,Z.useEffect)(()=>{E(i.some(t=>t.id!==(null==e?void 0:e.id)&&t.ui.displayTitle.toLocaleLowerCase()===b.toLocaleLowerCase()))},[e.id,b,i]);let O=(0,Z.useCallback)(e=>{e&&d(e)},[d]);return Z.createElement(Z.Fragment,null,p.length>0&&Z.createElement(Z.Fragment,null,Z.createElement(oF,{schemaName:b,isDirty:g,editableRow:y,courseId:n,hasDuplicateName:S,editedSchemaSymbols:p,isFooterOpen:o,setEditedSchemaSymbols:m,setDrawerOpen:t,setFooterOpen:r,setIsDirty:f,setEditableRow:C,discardToggleOpen:a,setIsDuplicateDialogOpen:w,setSchemaName:v,validation:h,selectedSchema:e,setIsNameEditable:k,isNameEditable:A,deleteSelectedGradingSchema:O}),o&&Z.createElement(el.AnalyticsDialogActions,{analyticsId:"gradebook.schema.view.actions",className:P.footerContainer},Z.createElement(el.AnalyticsDefaultButton,{analyticsId:"course.grades.settings.schema.cancel.button",className:"js-footer-cancel-btn",onClick:L,"aria-haspopup":"dialog","aria-label":T("global.cancel")},T("global.cancel")),Z.createElement(el.AnalyticsPrimaryButton,{id:"footer-save-btn",onClick:()=>{x(ek.Nwg.gradebookSchema.updateGradebookSchema({courseId:n,schema:{...e,title:b,ui:{displayTitle:b},symbols:p}})),f(!1),r(!1),C(-1)},disabled:!g||!h.isValid||S||b.trim().length<=0,analyticsId:"course.grades.settings.schema.save.button","aria-label":T("global.save")},T("gradingSchema.save")))),Z.createElement(oS,{title:T("gradingSchema.schemaDetail.discardGradingSchemaModal.title"),description:T("gradingSchema.schemaDetail.discardGradingSchemaModal.description"),dialogId:q.Discard,handleOnClose:()=>{a(!1)},dialogHandler:R,isDialogOpen:l,actionBtnName:T("gradingSchema.schemaDetail.discardGradingSchemaModal.discard"),selectedSchemaName:b,schemas:i}),Z.createElement(oS,{title:T("gradingSchema.schemaDetail.duplicateGradingSchemaModal.title"),description:"",dialogId:q.Duplicate,handleOnClose:G,dialogHandler:B,isDialogOpen:I,actionBtnName:T("gradingSchema.schemaDetail.duplicateGradingSchemaModal.duplicate"),selectedSchemaName:b,schemas:i}))},oV=(0,tl.ZL)(()=>(0,tl.kc)({emptyPage:{textAlign:"center"}}));var o_=n(508349);let oq=({openAddSchemaDialog:e})=>{let t=(0,et.q)(),n=oV();return K().createElement("div",{className:n.emptyPage},K().createElement(nt.R2,{illustration:o_,prominentText:t("gradingSchema.empty.title"),subText:t("gradingSchema.empty.description")}),K().createElement(el.AnalyticsPrimaryButton,{onClick:e,analyticsId:"course.grades.settings.schema.add.button","aria-label":t("gradingSchema.empty.setup")},t("gradingSchema.empty.setup")))},oz=e=>{let t=(0,ts.Lx)(),n=ob(of(e).gradingSchemas),i=(0,Z.useCallback)(i=>{let s;let r=n.find(e=>e.id===i);if(!r)return;let o=n.indexOf(r);return n.length>1&&(s=o===n.length-1?n[o-1]:n[o+1]),t(ek.Nwg.gradebookSchema.deleteGradebookSchema({courseId:e,schemaId:i})),s},[e,t,n]);return{deleteGradingSchema:i}},oW=q.Delete,oj=({exitCallback:e})=>{let t=(0,et.q)(),n=oi(),[i,s]=(0,Z.useState)(!1),r=(0,Z.useCallback)((t=!1)=>{s(!0),e(t)},[e]);return K().createElement(en._X,{open:!i,maxWidth:"md",disableBackdropClick:!0,className:(0,eN.Z)(n.schemaDialog),onClose:()=>r(),analyticsId:`${oW}-dialog`},K().createElement(el.AnalyticsDialogTitle,{analyticsId:`${oW}-dialog-title`,onClose:()=>r(),id:`${oW}-dialog-title`,closeButtonProps:{"aria-label":t("gradingSchema.aria.deleteSchemaCloseBtn")}},t("gradingSchema.schemaDetail.deleteGradingSchemaModel.title")),K().createElement(el.AnalyticsDialogContent,{analyticsId:`${oW}-dialog-content`},K().createElement(el.AnalyticsDialogContentText,{analyticsId:`${oW}-dialog-description`,id:`${oW}-dialog-description`,"aria-live":"assertive",role:"alert"},t("gradingSchema.schemaDetail.deleteGradingSchemaModel.confirmation"),K().createElement("div",null),t("gradingSchema.schemaDetail.deleteGradingSchemaModel.warning"))),K().createElement(el.AnalyticsDialogActions,{analyticsId:`${oW}-dialog-actions`},K().createElement(el.AnalyticsDefaultButton,{onClick:()=>r(),analyticsId:`course.grades.settings.schema.${oW}.cancel.button`,"aria-label":t("global.cancel")},t("global.cancel")),K().createElement(el.AnalyticsPrimaryButton,{analyticsId:`course.grades.settings.schema.${oW}.button`,onClick:()=>r(!0),"aria-label":t("gradingSchema.aria.deleteSchema")},t("gradingSchema.schemaDetail.delete"))))},oZ=({courseId:e,setIsDirty:t})=>{let n=nY(e),i=(0,eO.useTheme)(),s=(0,et.q)(),r=oy(),o=(0,eO.useMediaQuery)(i.breakpoints.down("xs")),{deleteGradingSchema:a}=oz(e),l=(0,ts.Lx)(),[c,d]=(0,Z.useState)(),[u,p]=(0,Z.useState)(!1),[m,h]=(0,Z.useState)(!1),[g,f]=(0,Z.useState)(!1),[b,v]=(0,Z.useState)(!1),[y,C]=(0,Z.useState)(!1),{gradingSchemas:S,isValid:E,isLoading:I}=of(e),w=ob(S),{displayModal:A,modal:k}=(0,nt.dd)(oc,{schemas:w}),{displayModal:x,modal:T}=(0,nt.dd)(oj),P=(0,Z.useCallback)(e=>{d(e?eL.cloneDeep(e):void 0)},[]),D=(0,ou.y1)(()=>{C(!1)},5e3),G=(0,Z.useCallback)(async t=>{let n=[{id:(0,oO.v4)(),schemaId:"",symbol:"A",lowerBound:50,upperBound:100,absoluteTranslation:75},{id:(0,oO.v4)(),schemaId:"",symbol:"F",lowerBound:0,upperBound:50,absoluteTranslation:25}],i={courseId:e,scaleType:eA.aQo.Tabular,symbols:n,title:t,userDefined:!1,version:0,isInUse:!1},s=await l(ek.Nwg.gradebookSchema.persistGradebookSchema({courseId:e,schema:i})),r=eL.cloneDeep(s.schema);d(r),v(!0)},[e,l,v,d]),R=(0,Z.useCallback)(async()=>{if(m)f(!0);else{let{confirmed:e,results:t}=await A();e&&t&&await G(t)}},[G,A,m]),B=(0,Z.useCallback)(()=>{p(!1)},[]),L=(0,Z.useCallback)(async e=>{let{confirmed:t}=await x();if(t){let t=a(e);P(t),C(!0),D()}},[a,x,P,D]);return((0,Z.useEffect)(()=>()=>{l(ek.Nwg.gradebookSchema.invalidateData())},[l]),(0,Z.useEffect)(()=>{if(w&&w.length>0&&E){if(c){let e=w.find(e=>e.id===c.id);e&&e.isInUse!==c.isInUse&&P({...c,isInUse:e.isInUse})}else P(w[0])}},[c,w,P,E]),(0,Z.useEffect)(()=>{t(m)},[m,t]),I)?Z.createElement("div",{"data-testid":"spinner",className:r.spinner},Z.createElement(el.AnalyticsCircularProgress,{ariaLabel:s("global.loading"),size:"large"})):Z.createElement("div",{className:`react-container ${r.peekPanel}`},Z.createElement("header",{className:r.peekPanelHeader},Z.createElement(nt.YI,{headerText:s("course.grades.grading-schema.title"),subHeaderText:(null==n?void 0:n.displayName)?null==n?void 0:n.displayName:"",analyticsIdPrefix:"gradebook.components.grading-schema-header",showMenuToggleButton:!0,readyToFocus:!0})),Z.createElement("div",{className:r.peekPanelContainer},E&&(w.length>0?Z.createElement("div",{className:r.gradingSchemaContainer},y&&Z.createElement(el.AnalyticsOffScreenAnnouncement,{analyticsId:"gradebook.components.grading-schema.deletion.offScreenAnnouncement",type:"polite",message:s("gradingSchema.aria.deleteSchemaLive"),changeTrigger:1}),Z.createElement(ov,{courseId:e,schemas:w,setDrawerOpen:p,drawerOpen:u,setSelectedSchema:P,selectedSchema:c,isFooterOpen:m,discardToggleOpen:f,focusAndScrollAddedSchema:b,setFocusAndScrollAddedSchema:v,openAddSchemaDialog:R}),c&&c.symbols&&w.length>0&&Z.createElement(Z.Fragment,null,o?Z.createElement(el.AnalyticsDrawer,{analyticsId:"gradebook.schema.drawer",anchor:"bottom",variant:"persistent",PaperProps:{className:r.schemaDrawer},hideBackdrop:!0,disableEnforceFocus:!0,open:u,onClose:B},Z.createElement(oU,{schemas:w,selectedSchema:c,setSelectedSchema:P,setDrawerOpen:p,courseId:e,setFooterOpen:h,isFooterOpen:m,discardToggleOpen:f,isDiscardOpen:g,setFocusAndScrollAddedSchema:v,deleteSelectedGradingSchema:L})):Z.createElement(oU,{schemas:w,selectedSchema:c,setSelectedSchema:P,setDrawerOpen:p,courseId:e,setFooterOpen:h,isFooterOpen:m,discardToggleOpen:f,isDiscardOpen:g,setFocusAndScrollAddedSchema:v,deleteSelectedGradingSchema:L}))):Z.createElement(oq,{openAddSchemaDialog:R}))),k,T)},oK=(0,eO.makeStyles)(e=>(0,eO.createStyles)({container:{display:"flex",flexDirection:"row",paddingLeft:"10px",paddingRight:"10px",[e.breakpoints.up("sm")]:{paddingRight:"0px"},[e.breakpoints.up("md")]:{paddingLeft:"0px"}},userDetailContainer:{flex:1},userFieldContainer:{display:"flex",flexDirection:"row",padding:"2px 5px","& button":{minWidth:0,minHeight:0,padding:"0 5px"}},nameIdContainer:{display:"flex",flexDirection:"column",flexFlow:"row wrap",[e.breakpoints.up("sm")]:{flexDirection:"row"}},username:{paddingRight:"0px",[e.breakpoints.up("sm")]:{paddingRight:"10px"}},userLabel:{fontWeight:e.typography.fontWeightSemiBold,paddingRight:"5px"},noWrap:{whiteSpace:"nowrap"},userValues:{wordBreak:"break-all"},pipeSymbol:{display:"none",[e.breakpoints.up("sm")]:{display:"block",margin:"0px 5px"}},pronounceContainer:{display:"flex",flexDirection:"column",[e.breakpoints.up("sm")]:{flexDirection:"row"}}})),oX=(0,eO.makeStyles)(()=>({studentMenuItem:{minWidth:"200px"},studentMenuIcon:{marginRight:"11px",marginLeft:"6px",display:"flex",alignItems:"center"},container:{display:"flex",height:"fit-content"},iconButton:{margin:"0px 10px"}})),oY=e=>{let{displayName:t,membership:n}=e,i=(0,et.q)(),s=oX(),r=(0,tl.Fg)(),o=(0,tl.ac)(r.breakpoints.up("md")),[a,l]=Z.useState(void 0),c=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams),d=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params),u=null==n?void 0:n.id,p=null==c?void 0:c.userId,m=null==d?void 0:d.courseId,h=Z.useCallback(()=>{l(void 0),t0.Nd.goPeekState((0,t0.k9)({courseId:m,recipientIds:p}))},[p,m]),g=Z.useCallback(()=>{l(void 0),t0.Nd.goPeekState((0,t0.xB)({membershipId:u}))},[u]),f=Z.useCallback(()=>{l(void 0),t0.Nd.goPeekState((0,t0._Y)({userId:p}))},[p]),b=[{id:"student-activity",analyticsId:"gradebook.components.student-action-menu.student-activity",text:i("gradebook.individualStudentDetails.studentActivity"),icon:Z.createElement(em.BeastAnalytics,null),onClick:f,show:!0},{id:"accommodations",analyticsId:"gradebook.components.student-action-menu.accommodations",text:i("gradebook.studentList.table.actionsMenu.accommodations"),icon:Z.createElement(em.Accommodations,null),onClick:g,show:(null==n?void 0:n.permissions.editDueDateException)||(null==n?void 0:n.permissions.editTimeLimitException)},{id:"send-message",analyticsId:"gradebook.components.student-action-menu.send-message",text:i("gradebook.individualStudentDetails.sendMessage"),icon:Z.createElement(em.Messages,null),onClick:h,show:null==n?void 0:n.isAvailable}];return Z.createElement("div",{className:s.container},o?b.map(e=>e.show&&Z.createElement(el.AnalyticsIconButton,{analyticsId:e.analyticsId,id:e.id,key:e.id,onClick:e.onClick,className:s.iconButton},e.icon,Z.createElement(el.AnalyticsTypography,{component:"span",variant:"inherit"},e.text))):Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsIconButton,{analyticsId:"gradebook.components.common.student-action-menu.moreOptions",id:"student-action-menu-button","aria-controls":a?"student-action-menu":void 0,"aria-haspopup":"menu","aria-label":i("gradebook.studentList.table.actionsMenu.moreOptions",{fullName:t}),"aria-expanded":!!a,onClick:e=>{l(e.currentTarget)}},Z.createElement(em.Menu,null)),Z.createElement(el.AnalyticsMenu,{variant:"menu",id:"student-action-menu",anchorEl:a,open:!!a,onClose:()=>{l(void 0)},MenuListProps:{"aria-labelledby":"student-action-menu-button"},analyticsId:"gradebook.components.student-action-menu.menu"},b.map(e=>e.show&&Z.createElement(el.AnalyticsMenuItem,{analyticsId:e.analyticsId,id:e.id,key:e.id,className:s.studentMenuItem,button:!0,onClick:e.onClick},Z.createElement("span",{className:s.studentMenuIcon},e.icon),Z.createElement("span",null,e.text))))))},oQ=e=>{var t,n,i;let{user:s,membership:r}=e,{translate:o,formatDatetime:a,formatUsername:l}=(0,eB.h)(),c=oK(),d=l(s,nr.ILocaleUsernameFormat.Short,{noWrap:!0});return Z.createElement("div",{className:c.container},Z.createElement("div",{className:c.userDetailContainer},Z.createElement("div",{className:c.userFieldContainer},Z.createElement("div",{className:c.userLabel},o("gradebook.individualStudentDetails.lastAccess")),Z.createElement("div",{className:c.userValues},r.lastAccessDate?a(r.lastAccessDate,nr.ILocaleDatetimeFormat.Short):o("gradebook.individualStudentDetails.noActivity"))),Z.createElement("div",{className:c.nameIdContainer},s.userName&&Z.createElement("div",{className:c.userFieldContainer},Z.createElement("div",{className:c.userLabel},o("gradebook.individualStudentDetails.userName")),Z.createElement("div",{className:(0,eN.Z)(c.userValues,c.username)},s.userName)),s.studentId&&Z.createElement("div",{className:c.userFieldContainer},Z.createElement("div",{className:c.userLabel},o("gradebook.individualStudentDetails.studentId")),Z.createElement("div",{className:c.userValues},s.studentId))),Z.createElement("div",{className:c.pronounceContainer},s.pronouns&&Z.createElement("div",{className:c.userFieldContainer},Z.createElement("div",{className:c.userLabel},o("gradebook.individualStudentDetails.pronouns")),Z.createElement("div",{className:c.noWrap},s.pronouns)),s.pronouns&&(s.pronunciation||(null===(t=s.pronunciationAudio)||void 0===t?void 0:t.permanentUrl))&&Z.createElement("span",{className:c.pipeSymbol},"|"),(s.pronunciation||(null===(n=s.pronunciationAudio)||void 0===n?void 0:n.permanentUrl))&&Z.createElement("div",{className:c.userFieldContainer},Z.createElement("div",{className:(0,eN.Z)(c.userLabel,c.noWrap)},o("gradebook.individualStudentDetails.pronounceAs")),s.pronunciation&&Z.createElement("div",{className:c.userValues},s.pronunciation),(null===(i=s.pronunciationAudio)||void 0===i?void 0:i.permanentUrl)&&Z.createElement(nt.zi,{analyticsId:"gradebook.individual-student-grades-info.user.pronunciation",src:s.pronunciationAudio.permanentUrl,ariaLabel:o("gradebook.individualStudentDetails.pronunciationAriaLabel")})))),Z.createElement(oY,{displayName:d,membership:r}))},oJ=(0,eO.makeStyles)(e=>(0,eO.createStyles)({container:{width:"100%",display:"flex",justifyContent:"center",overflow:"hidden",whiteSpace:"nowrap",[e.breakpoints.up("md")]:{justifyContent:"space-between"}},headerContainer:{display:"flex",maxWidth:"100%",[e.breakpoints.up("md")]:{flex:1,minWidth:0}},iconContainer:{display:"flex",margin:"0px 4px",alignItems:"center"},accommodationsIcon:{color:e.palette.brand.main,marginRight:"10px"},headerText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.palette.primary.contrastText,[e.breakpoints.up("md")]:{color:e.palette.text.primary}}})),o0=(0,eO.makeStyles)(e=>(0,eO.createStyles)({container:{display:"flex",alignItems:"center"},currentGrade:{display:"none",[e.breakpoints.up("md")]:{display:"flex",marginRight:"8px",alignItems:"center"}}})),o1=e=>{let{courseId:t,membership:n,user:i}=e,s=(0,et.q)(),r=o0(),o=(0,tl.Fg)(),a=(0,tl.ac)(o.breakpoints.up("md")),l=nF(t),c=n2(t,null==l?void 0:l.gradingSchemaId),d=(0,ts.vr)(t,(null==l?void 0:l.id)||null,[n]),u=(null==l?void 0:l.visible)===!1,p={user:i,membership:n,overallGrade:d&&d[n.userId],overallGradeColumn:l},m=a?x.Large:x.Default;return Z.createElement(Z.Fragment,null,p.overallGrade&&Z.createElement("div",{className:r.container,"data-testid":"test-grade-pill-container"},u&&Z.createElement(el.AnalyticsTooltip,{analyticsId:"gradebook.individualStudentOverallGradePill.visibilityInformationTooltip",title:s("gradebook.grade.tooltip.gradeVisibility")},Z.createElement(el.AnalyticsIconButton,{analyticsId:"gradebook.individualStudentOverallGradePill.visibilityInformationTooltip.button","aria-label":s("gradebook.grade.gradeVisibilityIcon")},Z.createElement(em.Invisible,null))),Z.createElement(el.AnalyticsTypography,{component:"span",variant:"h3",className:r.currentGrade},s("gradebook.grade.currentGrade")),Z.createElement(ns,{row:p,isOverallGradeConfigured:!!l,gradingSchema:c,overallGradeColumn:l,pillSize:m})))},o2=()=>{var e;let{translate:t,formatUsername:n}=(0,eB.h)(),i=oJ(),s=(0,tl.Fg)(),r=(0,tl.ac)(s.breakpoints.up("md")),o=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams),a=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params),l=null==o?void 0:o.userId,c=null==o?void 0:o.membershipId,d=null==a?void 0:a.courseId,u=(0,ts.PU)(l),p=(0,ts.pJ)(e=>ek.Ys.courseMembership.getCourseMembershipByMembershipId(e,c)),m=(0,ts.Tn)(d),h=Z.createElement(nd.K6,{user:u,format:nr.ILocaleUsernameFormat.Short,ariaHidden:!1}),g=nc(p),f=u&&n(u,nr.ILocaleUsernameFormat.Short,{noWrap:!0}),b=Z.createElement("div",{className:i.container},Z.createElement("div",{className:i.headerContainer},r&&Z.createElement("div",null,Z.createElement(el.AnalyticsAvatar,{size:"medium",src:null===(e=null==u?void 0:u.avatar)||void 0===e?void 0:e.permanentUrl,alt:f})),Z.createElement(el.AnalyticsTypography,{component:"h1",variant:r?"display1":"h3",className:i.headerText},h),g&&Z.createElement("div",{className:i.iconContainer},Z.createElement(em.Accommodations,{className:i.accommodationsIcon,titleAccess:t("gradebook.studentList.fullNameComponent.aria.accommodations")}))),r&&p&&Z.createElement(o1,{courseId:d,user:u,membership:p}));return Z.createElement(nt.YI,{headerText:b,subHeaderText:(null==m?void 0:m.displayName)||"",analyticsIdPrefix:"gradebook.components.individual-student-grades-panel-header",showMenuToggleButton:!0,readyToFocus:!0},p&&Z.createElement(o1,{courseId:d,user:u,membership:p}))};var o3=n(877017),o9=n(83202);let o4=(0,eO.makeStyles)(e=>({userCardContainer:{display:"flex",width:"100%",alignItems:"center"},avatar:{minWidth:"unset",display:"flex"},userContainer:{marginLeft:"12px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},userDetails:{display:"flex"},iconContainer:{display:"flex",alignItems:"center"},accommodationIcon:{color:e.palette.brand.main,marginRight:"10px"},userName:{fontWeight:e.typography.fontWeightSemiBold},roleBadge:{textTransform:"uppercase",fontSize:e.typography.fontSizeXSmall,fontWeight:e.typography.fontWeightBold,backgroundColor:e.palette.background.b10,padding:"0px 10px"},courseRole:{color:e.palette.text.secondary}})),o7=e=>{var t;let{avatarSize:n,showRoleInBadge:i,role:s,user:r,showAccommodation:o}=e,a=o4(),{translate:l,formatUsername:c}=(0,eB.h)(),d=c(r,nr.ILocaleUsernameFormat.Short),u=(0,ts.gH)("global.course.","global.organization.");return Z.createElement("div",{className:a.userCardContainer},Z.createElement("div",{className:a.avatar},Z.createElement(el.AnalyticsAvatar,{size:n,alt:d,"aria-hidden":!0,src:null===(t=null==r?void 0:r.avatar)||void 0===t?void 0:t.permanentUrl})),Z.createElement("div",{className:a.userContainer},Z.createElement("div",{className:a.userDetails},o&&Z.createElement("div",{className:a.iconContainer},Z.createElement(em.Accommodations,{className:a.accommodationIcon,titleAccess:l("gradebook.studentList.fullNameComponent.aria.accommodations")})),Z.createElement(nd.K6,{userNameStyles:a.userName,format:nr.ILocaleUsernameFormat.Short,ariaHidden:!0,user:r})),s&&(i?Z.createElement(el.AnalyticsBadge,{classes:{badge:a.roleBadge},position:"inline",badgeContent:l(u(`global.course.role.${s}`)),offScreenLabel:l(u(`global.course.role.${s}`))}):Z.createElement("div",{className:a.courseRole},l(u(`global.course.role.${s}`))))))},o5=(0,eO.makeStyles)(()=>({graderInfo:{paddingLeft:"4px"},feedBackPanel:{height:"50%",position:"relative",overflowY:"auto"}})),o6=e=>{var t,n;let{feedback:i,onFeedbackSave:s,openCloudStorageIntegrationModal:r,lastFeedbackAuthor:o,feedbackIsDirty:a,cancelFuncRef:l}=e,[c,d]=Z.useState(!0),[u,p]=Z.useState(!1),[m,h]=Z.useState(null!==(t=null==i?void 0:i.rawText)&&void 0!==t?t:""),g=Z.useRef(null==i?void 0:i.rawText),f=Z.useRef((0,o9.generateToBbML)(m)),b=o5(),{translate:v,locale:y}=(0,eB.h)(),C=(0,ts.c2)(),S=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params.courseId),E=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams.userId),I=(0,ts.bW)(S,R.EnterFeedback),w=(0,ts.pJ)(e=>ek.Ys.course.getCourseById(e,S)),A=(0,ts.PU)(null==o?void 0:o.userId),k=(0,ts.pJ)(e=>ek.Ys.courseMembership.getCourseMembershipsByUserIds(e,S,[null==o?void 0:o.userId])[0]),x=null==k?void 0:k.role,T=Z.useCallback(()=>{a&&a(!(0,ik.vZ)(g.current,m),g.current,c)},[a,i,g.current,c,m]);Z.useEffect(()=>{var e;let t=null!==(e=null==i?void 0:i.rawText)&&void 0!==e?e:"";h(t),g.current=t,f.current=(0,o9.generateToBbML)(t),d(!!t||!I),l&&(l.current=D),T()},[i,I,E]);let P=async()=>{if(!(!m&&(0,ik.vZ)(g.current,m))){p(!0),d(!0);try{let e=await f.current(!0);await s(e)}finally{p(!1)}}},D=Z.useCallback(()=>{g.current=m,m&&(T(),d(!0))},[T,m]);return Z.createElement(Z.Fragment,null,Z.createElement(o3.Of,{analyticsId:"gradebook.grade-and-feedback.offline-items.feedback",panelTitle:v("gradebook.gradeFeedback.offlineGradesAndFeedback.pageTitle"),configProps:{isOrganization:w.isOrganization,courseColorClass:"",editorConfigProps:{apiBasePath:ek.vc.apiBasePath,courseId:S,onClickCancel:D,onClickSave:P,xsrfToken:ek.vc.xsrf,locale:y,fileUploadSettings:C,openCloudStorageIntegrationModal:r},primaryFeedbackConfigProps:{onFeedbackChange:e=>{f.current=e.toBbML;let t=e.toBbML();g.current=t,T()},onClickEdit:()=>{d(!1)},editorIsReadOnly:c}},primaryGraderFeedback:{isFeedbackEditable:!u&&I,rawTextFeedback:null!==(n=g.current)&&void 0!==n?n:""},isInlineMode:!0}),c&&m&&A&&Z.createElement("div",{className:b.graderInfo},Z.createElement(o7,{avatarSize:"small",role:x,showRoleInBadge:!0,user:A,showAccommodation:!1})))},o8=e=>{let[t,n]=(0,Z.useState)([]),{memberships:i,users:s,view:r}=e;return(0,Z.useEffect)(()=>{if(i&&i.length&&!(null==r?void 0:r.isLoading)){let e=[];i.forEach(t=>{t.userId&&e.push(s[t.userId])}),n(e)}},[null==r?void 0:r.isLoading,JSON.stringify(i)]),{users:t}};var ae=n(958299);let at=(0,eO.makeStyles)(()=>({navigationLabel:{padding:"0 10px"},navigationContainer:{display:"flex",justifyContent:"space-between",padding:"16px 30px",width:"100%"}})),an=e=>{let{onNavigateToNextFeedback:t,onNavigateToPreviousFeedback:n,shouldDisableNextFeedback:i,shouldDisablePreviousFeedback:s}=e,{translate:r,isRtl:o}=(0,eB.h)(),a=at(),l=(0,ts.gH)("gradebook.","organization.gradebook.");return Z.createElement("div",{className:a.navigationContainer},o()?Z.createElement(Z.Fragment,null,Z.createElement(ae.AnalyticsIconButton,{onClick:t,disabled:i,analyticsId:"offline-feedback.feedback-navigator.next","aria-label":r(l("gradebook.gradeFeedback.offlineGradesAndFeedback.nextStudent"))},Z.createElement(em.ArrowLeft,null),Z.createElement("span",{className:a.navigationLabel},r(l("gradebook.gradeFeedback.offlineGradesAndFeedback.nextStudent")))),Z.createElement(ae.AnalyticsIconButton,{onClick:n,disabled:s,analyticsId:"offline-feedback.feedback-navigator.previous","aria-label":r(l("gradebook.gradeFeedback.offlineGradesAndFeedback.previousStudent"))},Z.createElement("span",{className:a.navigationLabel},r(l("gradebook.gradeFeedback.offlineGradesAndFeedback.previousStudent"))),Z.createElement(em.ArrowRight,null))):Z.createElement(Z.Fragment,null,Z.createElement(ae.AnalyticsIconButton,{onClick:n,disabled:s,analyticsId:"offline-feedback.feedback-navigator.previous","aria-label":r(l("gradebook.gradeFeedback.offlineGradesAndFeedback.previousStudent"))},Z.createElement(em.ArrowLeft,null),Z.createElement("span",{className:a.navigationLabel},r(l("gradebook.gradeFeedback.offlineGradesAndFeedback.previousStudent")))),Z.createElement(ae.AnalyticsIconButton,{onClick:t,disabled:i,analyticsId:"offline-feedback.feedback-navigator.next","aria-label":r(l("gradebook.gradeFeedback.offlineGradesAndFeedback.nextStudent"))},Z.createElement("span",{className:a.navigationLabel},r(l("gradebook.gradeFeedback.offlineGradesAndFeedback.nextStudent"))),Z.createElement(em.ArrowRight,null))))},ai=(0,eO.makeStyles)(()=>({gradeMenuItem:{minWidth:"278px"},gradeMenuIcon:{marginRight:"5px",marginLeft:"6px"}})),as=e=>{let{gradeDetail:t,onGradeUpdate:n}=e,i=(0,et.q)(),s=(0,ts.Lx)(),r=ai(),o=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params.courseId),a=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params.columnId),[l,c]=Z.useState(void 0),d=async()=>{if(await s(ek.Nwg.gradebookGrade.postGradeByGradeId({courseId:o,columnId:a,id:t.id})),n){let e={...t};e.manualStatus=eA.WTZ.IsPosted,e.status=eA.EyR.Graded,n(e)}s(ek.Nwg.gradebookGrade.loadBulkView(o,[a],[t.memberId],{expand:["grade.instructorFeedback","grade.lastFeedbackAuthor"]})),s(ek.Nwg.columnSummary.loadColumnSummary({courseId:o,columnId:a}))},u=Z.useCallback(()=>{c(void 0)},[]),p=Z.useCallback(e=>{c(e.currentTarget)},[]),{displayModal:m,modal:h}=(0,nt.dd)(r9),g=async()=>{u();let{confirmed:e}=await m();e&&d()},f=[{key:i("gradebook.gradeFeedback.offlineGradesAndFeedback.overflowMenu.postGrade"),analyticsId:"gradebook.components.common.grade-submission.grade-action-menu.postGrade",text:i("gradebook.gradeFeedback.offlineGradesAndFeedback.overflowMenu.postGrade"),icon:Z.createElement(em.Post,{className:r.gradeMenuIcon}),onClick:g}];return Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsIconButton,{analyticsId:"gradebook.components.common.grade-submission.grade-action-menu.trigger",id:"grade-action-menu-button","aria-controls":l?"grade-action-menu":void 0,"aria-haspopup":"menu","aria-label":i("gradebook.gradeFeedback.offlineGradesAndFeedback.overflowMenu.aria"),"aria-expanded":!!l,onClick:p},Z.createElement(em.Menu,null)),Z.createElement(el.AnalyticsMenu,{variant:"menu",id:"grade-action-menu",anchorEl:l,open:!!l,onClose:u,MenuListProps:{"aria-labelledby":"grade-action-menu-button"},transformOrigin:{vertical:0,horizontal:"right"},analyticsId:"gradebook.components.common.grade-submission.grade-action-menu"},f.map(e=>Z.createElement(el.AnalyticsMenuItem,{analyticsId:e.analyticsId,key:e.key,className:r.gradeMenuItem,button:!0,onClick:e.onClick},Z.createElement(el.AnalyticsListItemIcon,{analyticsId:"gradebook.components.common.grade-submissions.listItemIcon"},e.icon),Z.createElement(el.AnalyticsListItemText,{analyticsId:"gradebook.components.common.grade-submissions.listItemIcon"},e.text)))),h)},ar=(0,eO.makeStyles)(e=>({postGrades:{display:"flex",float:"right"},gradeSubmissionCard:{display:"flex",width:"100%"},gradeAdditionalInfo:{fontWeight:e.typography.fontWeightRegular,color:e.palette.text.hint,right:"0px",float:"right"},gradingSection:{position:"relative",width:"35%"},profileCard:{width:"65%"}})),ao=e=>{let{analyticsId:t,student:n,role:i,onGradeInputBlur:s,gradeDetail:r,onGradeUpdate:o,membership:a}=e,l=(0,et.q)(),c=ar(),d=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params.courseId),u=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params.columnId),p=(0,ts.pJ)(e=>ek.Ys.gradebookColumn.getGradebookColumnById(e,u)),m=null==p?void 0:p.gradingSchemaId,h=n2(d,m),g=(0,ts.pJ)(e=>ek.Ys.courseEntitlements.userHasCourseEntitlement(e,d,R.PublishGrades)),f=nc(a);return Z.createElement("div",{className:c.gradeSubmissionCard},Z.createElement("div",{className:c.profileCard},Z.createElement(o7,{avatarSize:"medium",user:n,role:i,showAccommodation:f})),Z.createElement("div",{className:c.gradingSection},Z.createElement("div",{className:c.postGrades},h&&Z.createElement(tg,{grade:null==r?void 0:r.manualScore,variant:t_(h.scaleType),analyticsId:t,pointsPossible:p.possible,ariaLabel:l(tz(null==r?void 0:r.displayGrade),{user:n,grade:null==r?void 0:r.manualScore,total:p.possible}),onBlur:s,symbolsMap:h.symbols}),r&&g&&tU(r)&&Z.createElement(as,{gradeDetail:r,onGradeUpdate:o})),tq(null==r?void 0:r.displayGrade)&&Z.createElement("div",{className:c.gradeAdditionalInfo},l("gradebook.grade.grade-input.pastDueZero"))))},aa=e=>{let{gradeDetail:t,onGradeUpdate:n,student:i,role:s,membership:r}=e,[o,a]=Z.useState(null),l=(0,ts.Lx)(),c=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params.courseId),d=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params.columnId),u=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams.userId),p=(0,ts.pJ)(e=>ek.Ys.gradebookGrade.getGradebookGradesByColumnIdAndUserId(e,d,u)[0]),m=async e=>{void 0!==e&&e!==o&&(a(e),t&&(null==t?void 0:t.id)?await l(ek.Nwg.gradebookGrade.updateGradeByGradeId(t,{...t,manualScore:e})):await l(ek.Nwg.gradebookGrade.createGradeByUserId({courseId:c,columnId:d,userId:u,manualScore:e})),l(ek.Nwg.gradebookGrade.loadBulkView(c,[d],[r.id],{expand:["grade.instructorFeedback","grade.lastFeedbackAuthor"]})),l(ek.Nwg.columnSummary.loadColumnSummary({courseId:c,columnId:d})))};return Z.useEffect(()=>{var e;(null===(e=null==t?void 0:t.displayGrade)||void 0===e?void 0:e.score)?a(t.displayGrade.score):a(null)},[t]),Z.useEffect(()=>{n&&p&&n(p)},[p,n]),Z.createElement(ao,{analyticsId:"offline-grades.gradePill",onGradeInputBlur:m,student:i,membership:r,role:s,gradeDetail:t,onGradeUpdate:n})},al=(0,eO.makeStyles)(e=>({peekPanel:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column"},peekPanelHeader:{"& .ms-Panel-subTitle, .ms-Panel-headerText":{paddingLeft:"16px",maxWidth:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",[e.breakpoints.up("sm")]:{maxWidth:"400px"}}},hideHeader:{display:"none"},peekPanelBody:{padding:"16px",overflowY:"auto",flex:1,[e.breakpoints.up("sm")]:{padding:"30px"},"& h3":{fontSize:e.typography.fontSizeDefault}}})),ac=ek.Nwg.gradebookGrade.createGradeByUserId,ad=ek.Nwg.gradebookGrade.updateGradeByGradeId,au=e=>{var t,n,i;let{courseName:s,onGradeUpdate:r,onFeedbackUpdate:o,openCloudStorageIntegrationModal:a,onFeedbackDirty:l}=e,c=(0,et.q)(),d=(0,ts.Lx)(),u=al(),p=Z.useRef(!1),m=Z.useRef(!0),[h,g]=Z.useState(0),f=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams.userId),b=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams.page),v=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams.limit),y=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams.q),C=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params.courseId),S=(0,ts.pJ)(e=>ek.Ys.app.getRoute(e).params.columnId),E=Z.useRef(),I=function(e,t=""){let n=(0,ts.Lx)();return(0,Z.useEffect)(()=>{e&&t&&n(ek.Nwg.gradebookColumn.loadGradebookColumn({columnId:t,courseId:e,allowedErrors:[eA.oji.Forbidden]}))},[n,e,t]),(0,ts.pJ)(e=>ek.Ys.gradebookColumn.getGradebookColumnById(e,t))}(C,S),w=(0,ts.bW)(C,R.ViewGradebookMetaData),A=(0,ts.d$)({courseId:C,filter:{searchString:y,roleBucket:[eA.O8v.Taking]},sort:[{field:eA.PJt.IsPreviewStudent,direction:eA.SrV.Ascending},{field:eA.PJt.FamilyName,direction:eA.SrV.Ascending},{field:eA.PJt.GivenName,direction:eA.SrV.Ascending}]}),{memberships:k}=A,{users:x}=o8(A),T=(0,ts.pJ)(e=>ek.Ys.gradebookGrade.getGradebookGradesByColumnIdAndUserId(e,S,f)[0]),P=Z.useRef((null===(t=null==T?void 0:T.instructorFeedback)||void 0===t?void 0:t.rawText)||""),D=()=>Number(v||25),G=()=>{let e=x.findIndex(e=>e.id===f),t=D(),n=Math.ceil((e+1)/t).toString();return -1!==e&&b!==n&&t0.Nd.search({page:n}),e};Z.useEffect(()=>{x&&x.length&&f&&g(G())},[x,f]),Z.useEffect(()=>{o&&T&&o(T)},[T,o]);let B=()=>{p.current=!1,d(ek.Nwg.gradebookGrade.loadBulkView(C,[S],[k[h].id],{expand:["grade.instructorFeedback","grade.lastFeedbackAuthor"]}))},L=async e=>{await d(ac({columnId:S,courseId:C,userId:f,instructorFeedback:{rawText:e}})),B()},N=async(e,t)=>{await d(ad(e,{...e,instructorFeedback:{...e.instructorFeedback,rawText:t}})),B()},O=Z.useCallback((e=P.current)=>{var t;(0,ik.vZ)(e,null===(t=null==T?void 0:T.instructorFeedback)||void 0===t?void 0:t.rawText)||(T?N(T,e):L(e),l(!1,!0))},[T,k,S,C,d,f]),{displayModal:M,modal:$}=(0,nt.dd)(r1),H=async()=>{let{confirmed:e,results:t}=await M();return e&&await O(),E.current(),t},F=()=>{var e;let t=D();t0.Nd.search({userId:null===(e=x[h+1])||void 0===e?void 0:e.id,page:Math.ceil((h+2)/t).toString()}),g(e=>e+1)},U=()=>{var e;let t=D();t0.Nd.search({userId:null===(e=x[h-1])||void 0===e?void 0:e.id,page:Math.ceil(h/t).toString()}),g(e=>e-1)},V=async()=>{if(h+1!==x.length){if(!p.current||m.current)F();else{let e=await H();e&&F()}}},_=async()=>{if(!(h<1)){if(!p.current||m.current)U();else{let e=await H();e&&U()}}};return Z.useEffect(()=>{let e={type:i5.Cs.OfflineGradesAndFeedbacksPanelOpened,status:i5.rJ.Success,pageTitle:c("gradebook.gradeFeedback.offlineGradesAndFeedback.pageTitle")};(0,i5.Db)(e)},[]),Z.createElement("div",{id:"offline-grades-and-feedback-panel"},Z.createElement("div",{className:u.peekPanel},Z.createElement("header",{className:(0,eN.Z)(u.peekPanelHeader,(0,i5.Dd)()&&u.hideHeader)},Z.createElement(tK.BbPanelHeader,{smallHeaderTitle:s,type:tK.BbPanelType.peek,analyticsId:"gradebook.grade-and-feedback.offline-items-feedback-panel-header",title:null!==(n=null==I?void 0:I.columnName)&&void 0!==n?n:"",navMenuAriaLabel:c("global.navigationMenu")})),0!==x.length&&w&&-1!==h&&Z.createElement(Z.Fragment,null,Z.createElement("div",{className:u.peekPanelBody},Z.createElement("h2",null,c("gradebook.gradeFeedback.offlineGradesAndFeedback.gradesAndFeedbackTitle")),Z.createElement(aa,{gradeDetail:T,student:x[h],role:null===(i=k[h])||void 0===i?void 0:i.role,membership:k[h],onGradeUpdate:r}),Z.createElement(o6,{cancelFuncRef:E,feedback:null==T?void 0:T.instructorFeedback,feedbackIsDirty:(e,t,n)=>{p.current=e,P.current=t,m.current=n,l(e,n)},onFeedbackSave:O,lastFeedbackAuthor:null==T?void 0:T.lastFeedbackAuthor,openCloudStorageIntegrationModal:a})),Z.createElement(an,{onNavigateToNextFeedback:V,onNavigateToPreviousFeedback:_,shouldDisableNextFeedback:h===x.length-1,shouldDisablePreviousFeedback:0===h}))),$)};var ap=n(927335);let am=(0,eO.makeStyles)(e=>(0,eO.createStyles)({feedbackIcon:{color:e.palette.brand.main}})),ah=e=>{let{student:t}=e,n=am(e),i=(0,et.q)();return Z.createElement(el.AnalyticsTooltip,{placement:"bottom-start",title:i("gradebook.gradeFeedback.offlineGradesAndFeedback.viewFeedback"),analyticsId:"gradebook.components.common.edit-feedback-tooltip.title"},Z.createElement(el.AnalyticsIconButton,{analyticsId:"gradebook.components.common.edit-feedback-tooltip.icon-button",onClick:()=>{t.id&&t0.Nd.goPeekState((0,t0.p$)({userId:t.id}))},"aria-label":i("gradebook.gradeFeedback.offlineGradesAndFeedback.viewFeedbackAriaLabel",{student:t})},Z.createElement(ap.Feedback,{className:n.feedbackIcon})))},ag=(0,eO.makeStyles)(e=>(0,eO.createStyles)({offlineListFilters:{display:"flex",flexDirection:"column",minWidth:0,margin:"0px",[e.breakpoints.up("sm")]:{flexDirection:"row",justifyContent:"space-between",minWidth:"500px",height:"auto"}},offlineListSearchBox:{[e.breakpoints.up("sm")]:{maxWidth:"290px",margin:0,width:"100%"}},pageSizeContainer:{display:"inline-flex",alignItems:"center",borderBottom:`1px solid ${e.palette.secondary.main}`,padding:"20px 17px",[e.breakpoints.up("sm")]:{padding:0,borderBottom:"none"}},itemsPerPage:{padding:0,"& button":{border:`1px solid ${e.palette.text.hint}`,marginLeft:0,"&:hover":{border:`1px solid ${e.palette.text.hint}`}}}})),af=[25,50,100],ab=e=>{let{onSearchBoxTextChange:t,onPageSizeChange:n,initialPageSize:i}=e,s=ag(),r=(0,et.q)(),o=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams.name),[a,l]=Z.useState(o||""),c=Z.useCallback(e=>{l(e),t(e)},[t]);return Z.useEffect(()=>{c(o||"")},[o]),Z.createElement("div",{className:s.offlineListFilters},Z.createElement(nt._W,{value:a,inputId:"offline-items-list-search-input",label:r("gradebook.gridFiltersPanel.memberships.placeholder"),analyticsId:"gradebook.offline-grades-list.search",onChange:c,onClear:()=>c(""),className:s.offlineListSearchBox}),Z.createElement("div",{className:s.pageSizeContainer},Z.createElement(nt.Y0,{className:s.itemsPerPage,pageSizeOptions:af,initialPageSize:i,onPageSizeChange:n,analyticsId:"gradebook.offline-grades-list.onPageSizeChange.selector"})))},av=(e,t)=>{let n=(0,ts.Lx)(),i=(0,Z.useCallback)(i=>n(ek.Nwg.courseUserNotes.createNote(e,t,{body:{rawText:i}})),[n,e,t]);return{onCreateNote:i}},ay=(0,eO.makeStyles)(()=>({readOnlyMode:{"& .bb-editor":{maxHeight:"unset",minHeight:0,padding:0}}})),aC=(0,Z.memo)((0,Z.forwardRef)(function(e,t){return K().createElement(o9.BbEditor,{...e,ref:t})})),aS=(0,Z.memo)(function({analyticsId:e,bbml:t,editorId:n,isDisabled:i,isReadOnly:s,isToolbarHidden:r=!0,focusOnRender:o,onBlur:a,onChange:l,onFocus:c,size:d,ariaLabelledBy:u}){let p=(0,et.q)(),m=ay(),[h,g]=(0,Z.useState)(!1),f=(0,Z.useRef)(null);(0,Z.useEffect)(()=>g(!1),[t]),(0,Z.useEffect)(()=>{var e;o&&!s&&(null===(e=f.current)||void 0===e||e.focusEditor())},[o,s]);let b=(0,Z.useCallback)(e=>{let t=e.toBbML();g(e.isDirty),l({rawText:t,asyncRawText:()=>e.toBbML(!0)})},[l]),{isCloseInterrupted:v,cancelClose:y,doClose:C}=(0,t0.YK)(h);return K().createElement("div",{className:s?m.readOnlyMode:void 0},K().createElement(aC,{ariaLabelledBy:u,ariaRequired:!0,bbml:t,editorId:n,isToolbarHidden:r,isDisabled:i,isReadOnly:s,onChange:b,onFocus:c,onBlur:a,placeholder:p("notes.note.body.placeholder"),size:d,showWordCount:!1,ref:f}),v?K().createElement(rQ,{showConfirmationModal:v,onCancel:()=>y(),onConfirmation:()=>C(),analyticsId:`${e}.unsaved-dialog`}):void 0)}),aE=(0,eO.makeStyles)(e=>({form:{paddingBottom:"20px",borderBottom:`1px solid ${e.palette.border.main}`},editor:{flexGrow:1},editorLabel:{marginBottom:"4px"},buttonRow:{display:"flex",flexDirection:"row",justifyContent:"flex-end",margin:"14px 0"},btnCancel:{marginInlineEnd:"10px"}})),aI=e=>{let{analyticsId:t,courseId:n,userId:i,activeNoteEditor:s,onNoteEditorActive:r}=e,o=aE(),a=(0,et.q)(),[l,c]=(0,Z.useState)(!1),[d,u]=(0,Z.useState)(!1),[p,m]=(0,Z.useState)({rawText:"",asyncRawText:()=>Promise.resolve("")}),h=(0,Z.useCallback)(e=>m(e),[m]),g=(0,Z.useCallback)(e=>{e?(c(!0),r("add")):(m(null),c(!1),r(void 0),u(!1))},[r]),f=(0,Z.useCallback)(()=>g(!0),[g]),{onCreateNote:b}=av(n,i),v=(0,Z.useCallback)(async e=>{if(e.preventDefault(),null!==p){u(!0);try{let e=await p.asyncRawText();await b(e),g(!1)}catch(e){u(!1)}}},[b,p,g]),y=null!==p&&""!==p.rawText&&!d;return K().createElement("div",{className:o.form},K().createElement("div",{className:o.editor},K().createElement(el.AnalyticsFormLabel,{id:"studentNoteAddBodyLabel",analyticsId:`${t}.label`},a("notes.addANote")),K().createElement(aS,{analyticsId:`${t}.editor`,ariaLabelledBy:"studentNoteAddBodyLabel",bbml:" ",editorId:"student-note-add-editor",isDisabled:void 0!==s&&"add"!==s,isReadOnly:!1,isToolbarHidden:!l,onChange:h,onFocus:f,size:l?"medium":"small"})),l?K().createElement("div",{className:o.buttonRow},K().createElement(el.AnalyticsDefaultButton,{analyticsId:`${t}.cancel`,className:o.btnCancel,onClick:()=>g(!1)},a("global.cancel")),K().createElement(el.AnalyticsPrimaryButton,{analyticsId:`${t}.save`,disabled:!y,onClick:v,type:"submit"},a("global.save"))):void 0)},aw=(0,eO.makeStyles)(()=>({buttonRow:{display:"flex",flexDirection:"row",justifyContent:"flex-end",margin:"12px 0"},btnCancel:{marginInlineEnd:"10px"}})),aA=({analyticsId:e,edit:t,note:n,onCancel:i,onUpdateBody:s})=>{let r=(0,et.q)(),o=aw(),[a,l]=(0,Z.useState)(null),c=(0,Z.useCallback)(e=>l(e),[l]),[d,u]=(0,Z.useState)(!1),p=K().createElement(aS,{analyticsId:`${e}.editor`,ariaLabelledBy:"studentNoteEditBodyLabel",editorId:`student-note-${n.id}-editor`,isDisabled:!1,isReadOnly:!t,bbml:n.body.rawText,isToolbarHidden:!1,onChange:c,size:t?"medium":void 0,focusOnRender:!0});return t?K().createElement(K().Fragment,null,p,K().createElement(eO.HideOffScreen,{id:"studentNoteEditBodyLabel"},r("notes.note.body.editAriaLabel")),K().createElement("div",null,K().createElement("div",{className:o.buttonRow},K().createElement(el.AnalyticsDefaultButton,{analyticsId:`${e}.cancel`,className:o.btnCancel,onClick:()=>{l(null),i()}},r("global.cancel")),K().createElement(el.AnalyticsPrimaryButton,{analyticsId:`${e}.save`,disabled:d||null===a||(null==a?void 0:a.rawText)===""||(null==a?void 0:a.rawText)===n.body.rawText,onClick:async()=>{u(!0);let e=await (null==a?void 0:a.asyncRawText());if(e)try{await s(e).catch(()=>({}))}finally{u(!1)}}},r("global.save"))))):p},ak=({exitCallback:e})=>{let t=(0,et.q)(),n="student-note-delete-dialog",[i,s]=(0,Z.useState)(!1),[r,o]=(0,Z.useState)(!1),a=e=>{o(e),s(!0)};return K().createElement(en._X,{isAlert:!0,analyticsId:`${n}.content`,open:!i,TransitionProps:{onExited:()=>{e(r),s(!1)}},maxWidth:"sm","aria-labelledby":`${n}-dialog-title`},K().createElement(el.AnalyticsDialogTitle,{analyticsId:`${n}.title`,onClose:()=>a(!1),id:`${n}-dialog-title`},t("notes.note.dialog.deleteNote")),K().createElement(el.AnalyticsDialogContent,{analyticsId:`${n}.content`},K().createElement(el.AnalyticsDialogContentText,{analyticsId:`${n}.content.text`,id:`${n}-dialog-description`},t("notes.note.dialog.doYouWantToDelete"))),K().createElement(el.AnalyticsDialogActions,{analyticsId:`${n}.actions`},K().createElement(el.AnalyticsDefaultButton,{analyticsId:`${n}.actions.cancel`,onClick:()=>a(!1)},t("global.cancel")),K().createElement(el.AnalyticsPrimaryButton,{analyticsId:`${n}.actions.delete`,onClick:()=>a(!0)},t("global.delete"))))},ax=({analyticsId:e,note:t,onDelete:n,onEdit:i})=>{let{formatUsername:s,translate:r}=(0,eB.h)(),[o,a]=(0,Z.useState)(!1),[l,c]=K().useState(null),{displayModal:d,modal:u}=(0,nt.dd)(ak),p=(0,Z.useMemo)(()=>{let s=[];return t.permissions.modify&&s.push({analyticsId:`${e}.menu.edit`,icon:K().createElement(em.Edit,null),key:"edit",onClick:()=>{a(!1),c(null),i()},text:r("global.edit")}),t.permissions.delete&&s.push({analyticsId:`${e}.menu.delete`,icon:K().createElement(em.Trash,null),key:"delete",onClick:async()=>{a(!1),c(null);let{confirmed:e}=await d();e&&n()},text:r("global.delete")}),s},[t.permissions.modify,t.permissions.delete,e,r,i,n,d]),m=`student-note-menu-${t.id}`;return p.length>0?K().createElement(K().Fragment,null,u,K().createElement(el.AnalyticsIconButton,{"aria-controls":o?m:void 0,"aria-expanded":o,"aria-haspopup":"menu","aria-label":r("notes.note.contextMenu.open",{name:s(t.author,nr.ILocaleUsernameFormat.Short),datetime:t.createdDate}),onClick:e=>{c(e.currentTarget),a(e=>!e)},analyticsId:`${e}.showMenu`},K().createElement(em.Menu,null)),K().createElement(nt.rM,{id:m,analyticsId:`${e}.menu`,onClose:()=>a(!1),open:o,anchorEl:l,items:p})):null},aT=(0,eO.makeStyles)(e=>({note:{padding:"16px 12px",borderBottom:`1px solid ${e.palette.border.main}`},noteHeader:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:"unset",fontWeight:"unset"},noteHeaderInfo:{display:"flex",flexDirection:"column",[e.breakpoints.up("sm")]:{flexDirection:"row"}},usernameStyles:{fontWeight:e.typography.fontWeightBold,marginInlineEnd:"5px"},noteDatetime:{color:e.palette.text.hint},lastEditedOn:{color:e.palette.text.hint}})),aP=e=>{let t=(0,ts.Lx)(),n=(0,Z.useCallback)(()=>t(ek.Nwg.courseUserNotes.deleteNote(e.courseId,e.userId,e.id)),[t,e.courseId,e.userId,e.id]);return{onDeleteNote:n}},aD=e=>{let t=(0,ts.Lx)(),n=(0,Z.useCallback)(n=>t(ek.Nwg.courseUserNotes.updateNote(e.courseId,e.userId,e.id,{body:{...e.body,rawText:n}})),[t,e.courseId,e.userId,e.id,e.body]);return{onUpdateNote:n}},aG=(0,Z.memo)(({analyticsId:e,note:t,activeNoteEditor:n,onNoteEditorActive:i})=>{let{formatDatetime:s,formatUsername:r,translate:o}=(0,eB.h)(),[a,l]=(0,Z.useState)(!1),c=aT(),d=(0,Z.useCallback)(e=>{l(e),i(e?t.id:void 0)},[t.id,i]),{onDeleteNote:u}=aP(t),{onUpdateNote:p}=aD(t),m=(0,Z.useCallback)(e=>p(e).then(()=>d(!1)),[p,d]);return K().createElement("div",{className:(0,eN.Z)(c.note,"js-course-user-note")},K().createElement(el.AnalyticsTypography,{variant:"h3",className:c.noteHeader},K().createElement("div",{className:c.noteHeaderInfo},K().createElement("span",{className:c.usernameStyles},r(t.author,nr.ILocaleUsernameFormat.Short)),K().createElement("span",{className:c.noteDatetime},s(t.createdDate,nr.ILocaleDatetimeFormat.Short))),void 0===n?K().createElement(ax,{analyticsId:`${e}.context`,note:t,onEdit:()=>d(!0),onDelete:u}):null),K().createElement(aA,{note:t,edit:a,onCancel:()=>d(!1),onUpdateBody:m,analyticsId:`${e}.body`}),t.lastModifiedDate&&K().createElement("span",{className:c.lastEditedOn},o("notes.note.lastEditedOn",{datetime:t.lastModifiedDate})))}),aR=(e,t,n,i)=>{let s=(0,ts.Lx)(),r=(0,ts.pJ)(n=>ek.Ys.courseUserNotes.getNotes(n,e,t)),o=(0,Z.useCallback)(async()=>{null==n||n(),await s(ek.Nwg.courseUserNotes.fetchNotes({courseId:e,userId:t,limit:20})),null==i||i()},[s,e,t,n,i]);(0,Z.useEffect)(()=>{(null==r?void 0:r.totalNotes)!==void 0||(null==r?void 0:r.isLoading)||(null==r?void 0:r.hasError)||o()},[null==r?void 0:r.totalNotes,null==r?void 0:r.isLoading,null==r?void 0:r.hasError,o]);let a=(null==r?void 0:r.totalNotes)===void 0||r.totalNotes>r.notes.length,l=(0,Z.useMemo)(()=>[...r.notes].sort((e,t)=>t.createdDate.getTime()-e.createdDate.getTime()),[r.notes]);return{...r,notes:l,hasMore:a,limit:20,loadMore:o}},aB=(0,eO.makeStyles)(()=>({progressLoader:{display:"flex",justifyContent:"center",margin:"20px"},notesList:{listStyle:"none",margin:0}})),aL=e=>{let{analyticsId:t,courseId:n,userId:i,activeNoteEditor:s,onNoteEditorActive:r}=e,o=aB(),a=(0,et.q)(),[l,c]=(0,Z.useState)(void 0),d=(0,Z.useCallback)(()=>{c(a("notes.loader.done"))},[a]),u=(0,Z.useCallback)(()=>{c(a("notes.loader.loading"))},[a]),{hasMore:p,isLoading:m,limit:h,loadMore:g,notes:f}=aR(n,i,u,d);return K().createElement(K().Fragment,null,K().createElement("ul",{className:o.notesList},f.map(e=>K().createElement("li",{key:`note-${e.id}`},K().createElement(aG,{analyticsId:`${t}.note`,note:e,activeNoteEditor:s,onNoteEditorActive:r})))),K().createElement(nt.ox,{loader:g,incomingLoadCount:p?h:0,axLoadMoreButtonLabelKey:"notes.loader.loadMore",showLoadButtonOnFocus:!0}),m&&K().createElement("div",{className:o.progressLoader,"aria-hidden":!0},K().createElement(el.AnalyticsCircularProgress,{ariaLabel:a("notes.loader.loading"),size:"medium"})),K().createElement(el.AnalyticsOffScreenAnnouncement,{analyticsId:`${t}.liveMessage`,type:"polite",message:l}))},aN=(0,eO.makeStyles)(e=>({container:{margin:"0 auto",maxWidth:"800px"},heading:{padding:"12px 0",marginBottom:"33px",borderBottom:`1px solid ${e.palette.border.main}`}})),aO=e=>{let{analyticsId:t,courseId:n,studentUserId:i}=e,s=(0,et.q)(),r=aN(),{permissions:o,totalNotes:a}=aR(n,i),[l,c]=(0,Z.useState)();return K().createElement("div",{className:r.container},K().createElement(el.AnalyticsTypography,{className:r.heading,variant:"h2"},"number"==typeof a?s("notes.internalNotesWithTotal",{total:a}):s("notes.internalNotes")),(null==o?void 0:o.create)&&K().createElement(aI,{analyticsId:`${t}.add`,courseId:n,userId:i,activeNoteEditor:l,onNoteEditorActive:c}),K().createElement(aL,{analyticsId:`${t}.list`,courseId:n,userId:i,activeNoteEditor:l,onNoteEditorActive:c}))};(w=W||(W={})).ViewNotes="course.user.notes.VIEW",w.ModifyNotes="course.user.notes.MODIFY",w.AdminDeleteNotes="course.user.notes.admin.DELETE";let aM=e=>{let{analyticsId:t,onClick:n,indeterminate:i,isDisabled:s,checked:r}=e,o=(0,et.q)(),a=o("global.selectAll"),l=o("global.deselectAll");return K().createElement(el.AnalyticsTooltip,{analyticsId:`${t}.tooltip`,title:r?l:a},K().createElement(el.AnalyticsCheckbox,{analyticsId:t,onClick:n,indeterminate:i,disabled:s,checked:r,inputProps:{"aria-label":r?l:a}}))},a$=(0,eO.makeStyles)(e=>(0,eO.createStyles)({sendMessageButton:{width:"100%",[e.breakpoints.up("md")]:{width:"unset"}}})),aH=(e,t)=>{let n=Array.from(t).join(",");t0.Nd.goPeekState((0,t0.k9)({courseId:e,recipientIds:n,conversationPerRecipient:!0}))},aF=e=>{let{courseId:t,recipientUserIds:n,analyticsId:i}=e,s=a$(),r=(0,et.q)();return Z.createElement(el.AnalyticsOutlineButton,{startIcon:Z.createElement(em.Messages,null),analyticsId:i,onClick:()=>aH(t,n),className:s.sendMessageButton},r("global.sendMessage"))},aU=e=>{let{columnId:t,columnName:n,courseId:i,isGroupContent:s,isExceptionApplicable:r,isExemptApplicable:o,contentId:a,groupId:l}=e,c=(0,et.q)(),[d,u]=Z.useState(void 0),p=(0,ts.pJ)(e=>ek.Ys.app.getLocation(e).queryParams),m=null==p?void 0:p.userId,h=()=>{u(void 0)},g=Z.useCallback(()=>{u(void 0),t0.Nd.goPeekState((0,t0.Rj)({courseId:i,columnId:t,userId:m}))},[m,i,t]),f=Z.useCallback(()=>{u(void 0),t0.Nd.goPeekState((0,t0.Vp)({courseId:i,columnId:t,userId:m,contentId:a}))},[m,i,t,a]),b=Z.useCallback(()=>{u(void 0),t0.Nd.goPeekState((0,t0.jZ)({courseId:i,columnId:t,userId:m,contentId:a,groupId:l}))},[m,i,t,a,l]),v=[];return r&&v.push({key:`exceptionGradableItem_${t}`,analyticsId:"gradebook.components.grade-item-action-menu.exception-gradable-item",icon:Z.createElement(em.TimeExtra,null),text:c("components.directives.grade.submission-list-row.per-assessment.exceptions"),onClick:s?b:f}),o&&v.push({key:`exemptGradableItem_${t}`,analyticsId:"gradebook.components.grade-item-action-menu.exempt-gradable-item",icon:Z.createElement(em.Exempt,null),text:c("gradebook.individualStudentGradeList.actionMenu.exemptGradableItem"),onClick:g}),Z.createElement(Z.Fragment,null,Z.createElement(el.AnalyticsIconButton,{analyticsId:"gradebook.components.common.grade-item-action-menu.moreOptions",id:`grade-item-action-menu-button-${t}`,"aria-controls":d?"grade-item-action-menu":void 0,"aria-haspopup":"menu","aria-label":c("gradebook.individualStudentGradeList.actionMenu.moreOptions",{gradeItemName:n}),"aria-expanded":!!d,onClick:e=>{u(e.currentTarget)}},Z.createElement(em.Menu,null)),Z.createElement(nt.rM,{id:`grade-item-action-menu-${t}`,analyticsId:"gradebook.components.grade-item-action-menu.menu",anchorEl:d,open:!!d,onClick:h,onClose:h,items:v}))},aV=({numStudentsNotSubmitted:e,exitCallback:t})=>{let n=e>0,[i,s]=(0,Z.useState)(!1),[r,o]=(0,Z.useState)(!1),a=(0,et.q)(),l=(0,ts.gH)("course.","organization."),c=n?a(l("course.grades.gradebook-item.anonymousGrading.sendReminder.confirmationMessage"),{count:e}):a(l("course.grades.gradebook-item.anonymousGrading.sendReminder.noReminderMessage")),d=(e=!1)=>{o(e),s(!0)};return K().createElement(en._X,{analyticsId:"anonymous.sendReminders","aria-labelledby":"anonymous-send-reminder-dialog-heading-id",open:!i,className:"ms-modal",TransitionProps:{onExited:()=>{t(r),s(!1)}}},K().createElement(el.AnalyticsDialogTitle,{analyticsId:"anonymous.sendReminders.title",onClose:()=>d(),id:"anonymous-send-reminder-dialog-heading-id","aria-describedby":"anonymous-send-reminder-dialog-message-id"},a("global.sendReminder")),K().createElement(el.AnalyticsDialogContent,{analyticsId:"anonymous.sendReminders.content",tabIndex:0},K().createElement(el.AnalyticsDialogContentText,{analyticsId:"anonymous.sendReminders.text",id:"anonymous-send-reminder-dialog-message-id"},c)),K().createElement(el.AnalyticsDialogActions,{analyticsId:"anonymous.sendReminders.actions"},n?K().createElement(K().Fragment,null,K().createElement(el.AnalyticsDefaultButton,{analyticsId:"anonymous.sendReminders.cancel.button",onClick:()=>d()},a("global.cancel")),K().createElement(el.AnalyticsPrimaryButton,{analyticsId:"anonymous.sendReminders.send.button",onClick:()=>d(!0),className:"js-ok-button"},a("global.send"))):K().createElement(el.AnalyticsPrimaryButton,{analyticsId:"anonymous.sendReminders.ok.button",onClick:()=>d()},a("global.ok"))))},a_=e=>{let{analyticsId:t,courseId:n,columnId:i,numStudentsNotSubmitted:s}=e,{displayModal:r,modal:o}=(0,nt.dd)(aV,{numStudentsNotSubmitted:s}),[a,l]=(0,Z.useState)(!1),{enqueueSnackbar:c,dequeueSnackbar:d}=(0,nt.Ds)(nt.VW.AnonymousSendReminders,!0),u=(0,et.q)(),p=(0,ts.gH)("course.","organization."),m=()=>{d();let e={icon:K().createElement(em.Attention,null),snackbarMessage:u(p("course.grades.gradebook-item.anonymousGrading.sendReminder.successMessage"),{count:s})};c(e)},h=async()=>{l(!0);let{confirmed:e}=await r();if(!e){l(!1);return}try{await (0,ek.$_n)(n,i),m()}finally{l(!1)}};return K().createElement(K().Fragment,null,K().createElement(el.AnalyticsOutlineButton,{analyticsId:t,startIcon:K().createElement(em.Messages,null),disabled:a,onClick:h},u("global.sendReminder")),o)},aq={renderDownloadSubmissionsPanel:(e,t,n)=>{X.render(Z.createElement(Q.g,{locale:n.locale,babelfishInstance:n.babelfishInstance,babelfishFormatInstance:n.babelfishFormatInstance,bundlesToLoad:["gradebook/locales/[locale]/gradebook.json"],isRtl:n.isRtl},Z.createElement(el.AnalyticsJssThemeProvider,{isRtl:n.isRtl},Z.createElement(Y.zt,{store:t},Z.createElement(eG,{...n.componentProps})))),e)},destroyComponent:e=>{X.unmountComponentAtNode(e)}},az=j},903054:function(e,t,n){"use strict";n.d(t,{bg:function(){return a},rZ:function(){return ts},qz:function(){return R.qz},KZ:function(){return e2},jg:function(){return tn},Fq:function(){return U},xf:function(){return eW},AT:function(){return eV},LI:function(){return eL},P3:function(){return h},Lf:function(){return ti},ZP:function(){return tc},Qn:function(){return tl},pL:function(){return R.pL},Rk:function(){return to},nx:function(){return ta}});var i,s,r,o,a,l,c=n(202784),d=n.n(c),u=n(928316),p=n(44432),m=n(174897);(i=o||(o={})).View="view",i.Create="create",i.Edit="edit",i.Export="export",i.Delete="delete";var h=o,g=n(276635),f=n(438802),b=n.n(f),v=n(50635),y=n(158550),C=n(958299),S=n(927335),E=n(438501),I=n(470269),w=n(118717),A=n(692475),k=n(951248),x=n(609582),T=n(844156),P=n(311822),D=n(410628),G=n(398435),R=n(352685),B=n(906277);let L=e=>{let{group:t,analyticsId:n}=e,i=(0,I.Ls)((0,I.oc)({groupId:t.id})),s=(0,D.q)();return c.createElement("div",{className:"show-members-link"},c.createElement(G.AnalyticsLink,{analyticsId:`${n}.group.showMembers.link`,"aria-label":s("course.groupWorkspace.selfEnroll.showMembersLinkAriaLabel",{groupName:t.title}),href:i},s("course.groupWorkspace.selfEnroll.showMembers")))};var N=e=>{let{data:t,ariaLabelledBy:n,expand:i,courseMemberCount:s,isNew:r,analyticsId:o}=e,a=(0,D.q)();if(!t.length)return null;let l=t.map((e,l)=>{var d,u;let p=null!==(d=e.studentCount)&&void 0!==d?d:0,m=null!==(u=e.maximumEnrollment||s)&&void 0!==u?u:0,h=(0,B.Z)("item-row","sub-row",{expand:i},{"last-group":l===t.length-1},{"first-group":0===l},{isNew:r});return c.createElement("tr",{id:(0,R.kA)(e.id),role:"row",key:e.id,className:h},c.createElement("td",{role:"gridcell",className:"sub-column first-column header-column group-cell","aria-labelledby":`${n} col-name`,tabIndex:-1},c.createElement("div",{className:"group-workspace-sub-header group-workspace-header group-cell-content"},c.createElement("div",{className:"icon"},c.createElement(S.Groups,{className:"element-image"})),c.createElement("div",{className:"sub-name click-message-detail"},c.createElement("div",{className:"title-detail-row"},c.createElement("span",{id:`span-cell-${e.id}`,className:"list-item-title","aria-describedby":`${n} col-name`},e.title)),p>0&&c.createElement(L,{group:e,analyticsId:o}),c.createElement("div",{className:"group-member-count"},c.createElement("span",{className:"list-item-member-count"},a("course.groupWorkspace.courseGroup.max",{groupCount:p,groupTotal:m})))))),c.createElement("td",{role:"gridcell",className:"sub-column other-column count-column group-cell",tabIndex:-1,"aria-labelledby":"col-count",colSpan:2},c.createElement("div",{className:"group-member-count group-cell-content"},c.createElement("span",{className:"list-item-member-count"},a("course.groupWorkspace.courseGroup.max",{groupCount:p,groupTotal:m})))),c.createElement("td",{role:"gridcell",className:"sub-column other-column controls-column group-cell"}))});return c.createElement(c.Fragment,null,l)},O=n(646462),M=n(273386),$=n(281699);let H=(0,$.makeStyles)(e=>(0,$.createStyles)({textField:{[e.breakpoints.up("sm")]:{width:"auto"},[e.breakpoints.down("xs")]:{border:"none"}},disabled:{border:"none"},borderless:{"&&":{[e.breakpoints.down("sm")]:{border:"none"}}},selectedLabel:{[e.breakpoints.down("xs")]:{display:"none"}},icon:{display:"inline-flex",verticalAlign:"middle",marginRight:10},customIcon:{},overallContainer:{display:"inline-flex",width:"auto",[e.breakpoints.up("sm")]:{width:"auto"}},inputDisabled:{backgroundColor:e.palette.background.default,color:e.palette.text.hint},selectDisabled:{visibility:"hidden"},disabledInformationButton:{marginTop:"-5px !important",[e.breakpoints.down("xs")]:{marginLeft:"-20px !important"}},alignDropdown:{marginLeft:"-10px"}})),F=(0,$.makeStyles)(e=>(0,$.createStyles)({textField:{border:"none","&:hover $customIcon":{color:e.palette.action.hover}},selectedLabel:{display:"inline",fontSize:e.typography.fontSizeDefault},icon:{display:"inline-flex",verticalAlign:"middle",marginRight:9,width:14},customIcon:{color:e.palette.background.default},overallContainer:{display:"inline-flex"},disabledInformationButton:{marginLeft:"-20px",marginTop:"-5px"},inputDisabled:{backgroundColor:e.palette.background.default,color:e.palette.text.hint},selectDisabled:{visibility:"hidden"},alignDropdown:{marginLeft:"-10px"}}));(s=a||(a={})).HAS_ASSOCIATED_CONTENT="hasAssociatedContent",s.SELF_ENROLLMENT_ALLOWED="selfEnrollmentAllowed";let U=e=>{var t;let{groupSetVisibility:n,onVisibilityChanged:i,analyticsId:s,variant:r="large",disabled:o=!1,disabledReason:l,inListItem:d=!1,borderless:u=!1}=e,p=(0,M.gH)("course.groupWorkspace","organization.groupWorkspace"),m=(0,D.q)(),h=(0,c.useCallback)(e=>{i("visible"===e.target.value)},[i]),g=H(),f=F(),b="small"===r?f:g,v=["visible","hidden"],y={visible:m(p("course.groupWorkspace.groupVisibility.visible")),hidden:m(p("course.groupWorkspace.groupVisibility.hidden"))},C={[a.HAS_ASSOCIATED_CONTENT]:m(p("course.groupWorkspace.groupVisibility.disabledMessage.hasAssociatedContent")),[a.SELF_ENROLLMENT_ALLOWED]:m(p("course.groupWorkspace.groupVisibility.disabledMessage.selfEnrollmentAllowed"))},S=v.map(e=>c.createElement(G.AnalyticsMenuItem,{button:!0,analyticsId:`${s}.${e}`,value:e,key:e},c.createElement("span",{className:b.icon},"visible"===e?c.createElement(E.Visible,null):c.createElement(E.Invisible,null)),c.createElement("span",null,y[e])));return c.createElement("div",null,c.createElement("div",{className:(0,B.Z)(b.overallContainer,{[`${b.alignDropdown}`]:d})},c.createElement(G.AnalyticsTextField,{analyticsId:s,select:!0,fullWidth:!0,disabled:o,value:n?v[0]:v[1],onChange:h,InputProps:{classes:{root:(0,B.Z)(b.textField,{[b.borderless]:u}),disabled:(0,B.Z)(b.inputDisabled,{[b.disabled]:u})}},SelectProps:{renderValue:function(e){return c.createElement(c.Fragment,null,c.createElement("span",{className:b.icon},"visible"===e?c.createElement(E.Visible,null):c.createElement(E.Invisible,null)),c.createElement("span",{className:b.selectedLabel},y[e]))},classes:{icon:(0,B.Z)({[`${b.selectDisabled}`]:o},{[`${b.customIcon}`]:!o})}}},S)),o&&l&&c.createElement(G.AnalyticsTooltip,{analyticsId:`${s}.tooltip`,title:null!==(t=C[l])&&void 0!==t?t:""},c.createElement(G.AnalyticsIconButton,{analyticsId:`${s}.informationButton`,"aria-label":m("course.groupWorkspace.groupVisibility.disabledMessage.informationButtonAriaLabel"),className:b.disabledInformationButton},c.createElement(E.Information,null))))};var V=n(236351),_=n(555342);let q=(0,V.X)(e=>{var t;let{groupSetId:n,analyticsId:i,localize:s}=e,[r,o]=c.useState(!1),[l,d]=c.useState(void 0),u=(0,M.Lx)(),p=(0,M.gH)("course.groupWorkspace","organization.groupWorkspace"),m=(0,M.pJ)(e=>k.Ys.app.getRoute(e).params.courseId),h=(0,M.pJ)(e=>k.Ys.groupWorkspace.getGroupSetById(e,n)),{enqueueSnackbar:g,dequeueSnackbar:f}=(0,_.Ds)(_.VW.CourseGroupSetVisibility),b=(0,c.useCallback)(()=>{let e={...h,isAvailable:!1};u(k.Nwg.groupWorkspace.saveGroupSet(m,e)),f()},[u,h,f,m]),v={snackbarMessage:s.translate(p("course.groupWorkspace.groupVisibility.snackbar.message"))},y={closeButtonAriaLabel:s.translate("course.groupWorkspace.groupVisibility.snackbar.closeButtonAriaLabel"),actionMessage:s.translate("course.groupWorkspace.groupVisibility.snackbar.actionMessage"),onActionClick:b};c.useEffect(()=>{let e=(null==h?void 0:h.hasAssociatedContent)||(null==h?void 0:h.isSelfEnrolledAllowed);o(e),(null==h?void 0:h.hasAssociatedContent)?d(a.HAS_ASSOCIATED_CONTENT):(null==h?void 0:h.isSelfEnrolledAllowed)&&d(a.SELF_ENROLLMENT_ALLOWED)},[h]);let C=(0,c.useCallback)(e=>{var t;if(h.isAvailable===e||(null===(t=h.api)||void 0===t?void 0:t.isUpdating))return;let n={...h,isAvailable:e};u(k.Nwg.groupWorkspace.saveGroupSet(m,n)),e?g(v,y):f()},[u,n,m,null==h?void 0:h.isAvailable,null===(t=null==h?void 0:h.api)||void 0===t?void 0:t.isUpdating,g,f]);return c.createElement(U,{groupSetVisibility:null==h?void 0:h.isAvailable,analyticsId:`${i}.groupSetVisibility`,onVisibilityChanged:C,variant:"small",disabled:r,disabledReason:l,inListItem:!0})});var z=n(397236);let W=e=>{let t=(0,D.q)(),n=(0,M.gH)("course.groupWorkspace","organization.groupWorkspace");return c.createElement(z.nh,{componentKey:"course.groupWorkspace.groupVisibility",announcementTitle:t("course.groupWorkspace.groupVisibility.ftue.title"),content:t(n("course.groupWorkspace.groupVisibility.ftue.content")),buttonAriaLabel:t("course.groupWorkspace.groupVisibility.ftue.buttonAriaLabel"),doneButtonText:t("course.groupWorkspace.groupVisibility.ftue.doneButtonText"),linkHref:t("course.groupWorkspace.groupVisibility.ftue.moreInfoLinkUrl"),linkText:t("course.groupWorkspace.groupVisibility.ftue.moreInfoLinkText"),closeLabel:t("global.close")})};class j extends c.PureComponent{constructor(e){super(e),this.timerHandler=null,this.getActionOptions=(e,t,n)=>{let i={items:[]};return e&&e.viewGroupMembers&&i.items.push({key:h.Edit,name:t.translate(e.modify?"course.groupWorkspace.button.edit":"course.groupWorkspace.button.view"),icon:e.modify?c.createElement(E.Edit,null):c.createElement(E.Visible,null),onClick:this.onEditGroupSet}),e&&e.modify&&this.props.rowData.groupCount>0&&i.items.push({key:h.Export,name:t.translate("global.export"),icon:c.createElement(E.Download,null),onClick:this.onExportGroupSet}),e&&e.delete&&i.items.push({key:h.Delete,name:t.translate("course.groupWorkspace.button.delete"),icon:c.createElement(E.Trash,null),onClick:this.onOpenDeleteConfirmDialog}),i},this.toggleRow=()=>{this.props.onExpand(!this.props.expand)},this.dismissDialog=()=>{let{isMounted:e}=this.state;e&&this.setState({hideDialog:!0})},this.onOpenDeleteConfirmDialog=()=>{this.setState({hideDialog:!1})},this.clickGroupSetTitle=e=>{this.onEditGroupSet(),e.stopPropagation()},this.onEditGroupSet=()=>{let{openGroupSetDetailPanel:e,courseId:t,rowData:n}=this.props;this.actionMenu.focus(),e(t,n.id,h.Edit)},this.onExportGroupSet=()=>{let{rowData:e}=this.props;I.Nd.goPeekState((0,I.BF)({groupSetId:e.id}))},this.onDeleteGroupSet=()=>{let{onDelete:e,courseId:t,rowData:n}=this.props;e(t,n.id).then(()=>{this.dismissDialog()})},this.renderDialog=e=>{let{localize:t,analyticsId:n}=this.props;return c.createElement(P.Dy,{analyticsId:`${n}.dialog`,onDismiss:this.dismissDialog,hidden:this.state.hideDialog,modalProps:{isAlert:!0},dialogContentProps:{type:x.DialogType.close,title:t.translate("course.groupWorkspace.dialogText.deleteGroupSet"),subText:t.translate(e?"course.groupWorkspace.dialogText.confirmDeleteEmptyGroupSet":"course.groupWorkspace.dialogText.confirmDeleteGroupSet"),showCloseButton:!1}},c.createElement(x.DialogFooter,null,c.createElement(T.AnalyticsDefaultButton,{analyticsId:`${n}.dialog.cancel.button`,onClick:this.dismissDialog},t.translate("course.groupWorkspace.button.cancel")),c.createElement(T.AnalyticsPrimaryButton,{analyticsId:`${n}.dialog.delete.confirm.button`,onClick:this.onDeleteGroupSet,className:"deleteConfirmBtn"},t.translate("course.groupWorkspace.button.delete"))))},this.registerTimeoutEvent=()=>{let{debounceTime:e,onExpire:t,rowData:n}=this.props;this.timerHandler=setTimeout(()=>{t(n.id)},e)},this.state={hideDialog:!0,isMounted:!1}}componentDidMount(){this.setState({isMounted:!0}),this.props.isNew&&this.registerTimeoutEvent()}componentDidUpdate(e){this.props.expand&&!this.props.isLoading&&this.props.subRowsCount&&0===this.props.subRowsData.length&&this.props.onLoadSubRowsData(this.props.courseId,this.props.rowData.id,{sort:this.props.sortCriteria}),!e.isNew&&this.props.isNew&&this.registerTimeoutEvent(),e.rowData&&this.props.rowData&&(e.rowData.title!==this.props.rowData.title||e.rowData.studentCount!==this.props.rowData.studentCount)&&this.props.onChangeOffset()}componentWillUnmount(){this.setState({isMounted:!1}),this.setState({hideDialog:!1}),this.timerHandler&&clearTimeout(this.timerHandler)}render(){var e;let{raised:t,expand:n,featuresConfig:i,subRowsData:s,rowData:r,isLoading:o,localize:a,subRowsCount:l,courseMemberCount:d,isOrganization:u,isNew:p,analyticsEventAugmentor:m,analyticsId:h}=this.props,g=null===(e=r.permissions)||void 0===e?void 0:e.viewGroupMembers,f=n?"hide":"show",b=`${this.props.analyticsId}.list.toggleRow.${f}.button`,v=a.translate(`course.groupWorkspace.groupList.${f}`,{groupSet:r.title}),S=(0,B.Z)("item-row","expandable",{expand:n},{isNew:p},{raised:t});return c.createElement(c.Fragment,null,c.createElement("tr",{id:`row-${r.id}`,className:S,role:"row"},c.createElement("td",{className:"header-column group-set-cell group-set-first-column",role:"gridcell",tabIndex:-1,"aria-labelledby":"col-name"},c.createElement("div",{className:"group-workspace-header"},c.createElement("div",{className:"icon"},c.createElement(O.F,{color:"primary",className:"element-image"})),c.createElement("div",{className:"click-message-detail"},c.createElement("div",{className:"title-detail"},c.createElement("a",{className:"list-item-title",href:"#",onClick:m(y.AnalyticsEventTypes.CLICK_EVENT,this.clickGroupSetTitle,`${h}.list.itemTitle.link`),"data-analytics-id":`${h}.list.itemTitle.link`,id:`title-${r.id}`},r.title),c.createElement("span",{className:"title-count-separator"},"|"),c.createElement("span",{className:"group-count"},a.translate("course.groupWorkspace.guidance.groupCount.plural",{groupCount:l||0}))),c.createElement("div",{className:"group-set-visibility"},c.createElement(q,{analyticsId:`${h}.itemVisibility`,groupSetId:this.props.groupSet.id}),0===this.props.index&&c.createElement(W,null))))),c.createElement("td",{className:"count-column group-set-cell group-set-other-column",role:"gridcell",tabIndex:-1,"aria-labelledby":"col-count"},c.createElement("div",{className:"member-count"},c.createElement("span",{className:"list-item-student-count"},c.createElement("span",{className:"list-item-member-count"},a.translate("course.groupWorkspace.courseGroup.memberAndStudentCount",{memberCount:d||0,studentCount:r.studentCount||0}))))),c.createElement("td",{className:"controls-column group-set-cell group-set-other-column",role:"grid-cell",tabIndex:-1},c.createElement("div",{className:"menu-and-chevron"},c.createElement(x.ActionMenu,{analyticsId:`${h}.actionMenu`,className:"action-menu",componentRef:e=>{this.actionMenu=e},disabled:!this.state.hideDialog||!g,menuProps:this.getActionOptions(r.permissions,a,i),maintainExpandedProperties:!this.state.hideDialog,ariaLabel:a.translate("course.groupWorkspace.button.title.moreOptionsAx",{rowTitle:r.title})}),this.renderDialog(!l),c.createElement(C.AnalyticsIconButton,{analyticsId:b,"aria-label":v,"aria-expanded":this.props.expand,onClick:this.toggleRow,className:"chevron"},this.props.expand?c.createElement(E.ChevronUp,null):c.createElement(E.ChevronDown,null))))),o?c.createElement("tr",null,c.createElement("td",{colSpan:2,className:"isLoading"},c.createElement(x.Spinner,{size:x.SpinnerSize.large}))):c.createElement(N,{data:s,ariaLabelledBy:`title-${r.id}`,expand:this.props.expand,courseMemberCount:d,isNew:p,analyticsId:`${h}.groupContent`}))}}var Z=(0,y.withAnalytics)((0,p.$j)((e,t)=>({index:t.index,courseId:t.courseId,debounceTime:2e3,rowData:t.groupSet,isLoading:k.Ys.groupWorkspace.isLoading(e,t.groupSet.id),isNew:k.Ys.groupWorkspace.isNew(e,t.groupSet.id),subRowsData:k.Ys.group.getGroupsByGroupSetId(e,t.groupSet.id),subRowsCount:k.Ys.groupWorkspace.getGroupsCountByGroupSetId(e,t.groupSet.id),sortCriteria:t.sortCriteria,courseMemberCount:t.courseMemberCount,isOrganization:!!k.Ys.course.getCourseById(e,t.courseId).isOrganization,featuresConfig:t.featuresConfig}),e=>(0,w.DE)({onLoadSubRowsData:k.Nwg.group.loadByGroupSetId,onDelete:k.Nwg.groupWorkspace.removeGroupSet,onExpire:k.Nwg.groupWorkspace.markAsOld},e))((0,A.h)(j))),K=n(408027);let X="arrow-up";class Y extends c.PureComponent{constructor(){super(...arguments),this.getArrowDirection=()=>{let{currentSort:e,sortCriteria:t}=this.props;return t&&t.includes(e)?(this.localSort=e,this.isDescendingSort(e)?"arrow-down":X):""},this.updateSortCriteria=()=>{if(!this.props.isLoading){let{sortCriteria:e,onSwitchSortCriteria:t}=this.props;this.localSort?this.localSort=e[0===e.indexOf(this.localSort)?e.length-1:0]:this.localSort=e[0],t(this.localSort)}},this.isDescendingSort=e=>e===K.$qS.STUDENT_COUNT_DESC||e===K.$qS.MODIFIED_DATE_DESC||e===K.$qS.TITLE_DESC}render(){let{t:e,sortCriteria:t,viewText:n,analyticsEventAugmentor:i,analyticsId:s}=this.props,r=`${s}.sortBy.button`,o="";if(this.getArrowDirection()){let t=this.getArrowDirection()===X?"asc":"desc";o=e(`course.groupWorkspace.sort.${n}.${t}`)}return c.createElement(c.Fragment,null,c.createElement("button",{id:`sort-by-${n}-button`,className:"active clear ellipse","aria-describedby":`sort-by-${n}`,onClick:i(y.AnalyticsEventTypes.CLICK_EVENT,this.updateSortCriteria,r),"data-analytics-id":r},e(`course.groupWorkspace.sort.${n}.description`),c.createElement("div",{className:"sort-list-arrows "+this.getArrowDirection(),role:"presentation"},t&&t.length>0&&t.map((e,t)=>c.createElement("div",{className:this.isDescendingSort(e)?"sort-list-arrow-down":"sort-list-arrow-up",key:t})))),c.createElement("span",{id:`sort-by-${n}`,className:"sr-only","aria-live":"assertive"},o))}}var Q=(0,y.withAnalytics)((0,v.H)(Y)),J=e=>{let{imageSrc:t,title:n,caption:i,children:s}=e;return c.createElement("div",{className:"group-empty-state"},c.createElement("img",{src:t,role:"presentation"}),c.createElement("p",{className:"group-empty-state-main"},n),c.createElement("p",{className:"group-empty-state-caption"},i),s)};let ee=e=>{let t=document.activeElement;if("TH"!==t.tagName&&"TD"!==t.tagName)return!0;{let n=document.getElementById("expandGrid").querySelectorAll(".list-item-row.group-set-sort-row, .item-row.expandable, .item-row.sub-row.expand"),i=e.key,s=t.parentElement,r=g.indexOf(n,s),o=g.indexOf(s.cells,t);switch(i){case"ArrowRight":return e.preventDefault(),(0,R.nI)(s.cells[o+1]),!1;case"ArrowLeft":return e.preventDefault(),(0,R.nI)(s.cells[o-1]),!1;case"ArrowUp":{e.preventDefault();let t=n[r-1];return(0,R.nI)(t&&t.cells[o]),!1}case"ArrowDown":{e.preventDefault();let t=n[r+1];return(0,R.nI)(t&&t.cells[o]),!1}default:return!0}}};var et=n(389860);class en extends c.PureComponent{constructor(e){super(e),this.offset=0,this.showSuccessBanner=e=>{this.setState({showBanner:"success",bannerMessage:e.message})},this.showErrorBanner=e=>{this.setState({showBanner:"error",bannerMessage:e.message})},this.hideBanner=()=>{var e,t,n,i;((null===(e=this.props.importGroupSetStatus)||void 0===e?void 0:e.responseStatus)==="SUCCESS"||(null===(t=this.props.importGroupSetStatus)||void 0===t?void 0:t.responseStatus)==="ERROR")&&this.props.clearImportGroupSetStatus(this.props.courseId),((null===(n=this.props.exportGroupSetStatus)||void 0===n?void 0:n.responseStatus)==="SUCCESS"||(null===(i=this.props.exportGroupSetStatus)||void 0===i?void 0:i.responseStatus)==="ERROR")&&this.props.clearExportGroupSetStatus(this.props.courseId),this.setState({showBanner:"none"})},this.openImportGroupSetPanel=()=>{I.Nd.goPeekState((0,I.em)())},this.onCreateGroupSet=()=>{let{courseId:e,openGroupSetDetailPanel:t}=this.props;t(e,void 0,h.Create)},this.shouldStartInfiniteScroll=()=>{let{groupSets:e,totalSetCount:t,isLoading:n}=this.props,[,i]=this.list.getVisibleRange();return!n&&i>=e.length-1&&e.length<t},this.loadMore=e=>{let{onLoadGroupSets:t,groupSets:n}=this.props,{sortCriteria:i}=this.state;this.offset=Math.min(this.offset+k.W6_,n&&n.length||0),t(e,{offset:this.offset,sort:i},!0)},this.onScroll=()=>{this.list&&this.shouldStartInfiniteScroll()&&this.loadMore(this.props.courseId)},this.reduceOffset=()=>{this.offset>-k.W6_&&this.props.groupSets.length<this.props.totalSetCount&&(this.offset-=1)},this.onSwitchSortCriteria=e=>{this.setState({sortCriteria:e})},this.renderGroupSetListItem=e=>{var t;let{courseId:n,featuresConfig:i,groupSets:s,courseMemberCount:r,openGroupSetDetailPanel:o,analyticsId:a}=this.props,l=s[e],d=null===(t=s[e-1])||void 0===t?void 0:t.id,u=this.state.expandedGroupSetIds.has(d);return l?c.createElement(Z,{index:e,key:l.id,courseId:n,groupSet:l,courseMemberCount:r,openGroupSetDetailPanel:o,onChangeOffset:this.reduceOffset,featuresConfig:i,sortCriteria:this.state.sortCriteria,analyticsId:`${a}.groupItem`,expand:this.state.expandedGroupSetIds.has(l.id),raised:u,onExpand:e=>{this.setState(t=>{let n=new Set(t.expandedGroupSetIds);return e?n.add(l.id):n.delete(l.id),{expandedGroupSetIds:n}})}}):null},this.renderGroupSetListView=e=>{let{courseId:t,isLoading:n,isOrganization:i,t:s,totalSetCount:r,analyticsId:o}=this.props,{sortCriteria:a}=this.state;return e>0?c.createElement("div",{className:"tabular-list-container"},c.createElement("div",{className:"tabular-list"},c.createElement("table",{id:"expandGrid",className:"table-content sortable-table",role:"grid","aria-readonly":!0,"aria-labelledby":"group-set-table-caption",tabIndex:-1,onKeyDown:ee},c.createElement("caption",{id:"group-set-table-caption",className:"sr-only"},s("course.groupWorkspace.pageTitle")),c.createElement("thead",{className:"list-item-columns group-set-sort-header"},c.createElement("tr",{className:"list-item-row group-set-sort-row",role:"row",id:"table-header-row"},c.createElement("th",{className:"column-title sort",role:"columnheader",id:"col-name",tabIndex:0},c.createElement(Q,{courseId:t,currentSort:a,isLoading:n,onSwitchSortCriteria:this.onSwitchSortCriteria,sortCriteria:[K.$qS.TITLE_ASC,K.$qS.TITLE_DESC],viewText:"title",analyticsId:`${o}.sortControl.group`})),c.createElement("th",{className:"column-student-count sort count",role:"columnheader",id:"col-count",tabIndex:-1},c.createElement(Q,{courseId:t,currentSort:a,isLoading:n,onSwitchSortCriteria:this.onSwitchSortCriteria,sortCriteria:[K.$qS.STUDENT_COUNT_ASC,K.$qS.STUDENT_COUNT_DESC],viewText:"studentCount",analyticsId:`${o}.sortControl.count`})),c.createElement("th",{className:"column-group-set-controls"}))),c.createElement(b(),{itemsRenderer:(e,t)=>c.createElement("tbody",{ref:t},e),length:e,itemRenderer:this.renderGroupSetListItem,ref:e=>this.list=e})))):0===r?c.createElement(J,{imageSrc:"./static/images/ftue/empty-course-group.svg",title:s("course.groupWorkspace.emptyState.title"),caption:s((0,et.qq)("groupWorkspace.emptyState.caption.part1",i))},c.createElement("p",{className:"group-empty-state-caption"},s("course.groupWorkspace.emptyState.caption.part2"))):""},this.state={sortCriteria:K.$qS.TITLE_ASC,expandedGroupSetIds:new Set,showBanner:"none",bannerMessage:""}}componentDidMount(){var e,t,n,i;let{courseId:s,onLoadGroupSets:r,root:o,onGetCourseContext:a}=this.props,{sortCriteria:l}=this.state;r(s,{sort:l}),a(s),(o&&o.querySelector(".panel-wrap")||window).addEventListener("scroll",g.throttle(this.onScroll,100),{capture:!0}),(o&&o.querySelector(".panel-wrap")||window).addEventListener("touchmove",g.throttle(this.onScroll,100),{capture:!0,passive:!0}),((null===(e=this.props.importGroupSetStatus)||void 0===e?void 0:e.responseStatus)==="SUCCESS"||(null===(t=this.props.importGroupSetStatus)||void 0===t?void 0:t.responseStatus)==="ERROR")&&this.props.clearImportGroupSetStatus(this.props.courseId),((null===(n=this.props.exportGroupSetStatus)||void 0===n?void 0:n.responseStatus)==="SUCCESS"||(null===(i=this.props.exportGroupSetStatus)||void 0===i?void 0:i.responseStatus)==="ERROR")&&this.props.clearExportGroupSetStatus(this.props.courseId)}componentDidUpdate(e,t){var n,i,s,r,o,a,l,c,d,u,p,m,h,g,f,b;let{t:v}=this.props;if(t.sortCriteria!==this.state.sortCriteria){let e=this.props.groupSets&&this.props.groupSets.length||0,t=Math.max(e,k.W6_);this.props.onLoadGroupSets(this.props.courseId,{sort:this.state.sortCriteria,limit:t})}if(e.totalSetCount>this.props.totalSetCount&&this.list&&this.shouldStartInfiniteScroll()&&this.loadMore(this.props.courseId),(null===(n=e.importGroupSetStatus)||void 0===n?void 0:n.responseStatus)!==(null===(i=this.props.importGroupSetStatus)||void 0===i?void 0:i.responseStatus)&&(null===(s=this.props.importGroupSetStatus)||void 0===s?void 0:s.responseStatus)==="SUCCESS"&&this.showSuccessBanner({message:v("course.groupWorkspace.importGroupSet.fileImportSuccess")}),(null===(r=e.importGroupSetStatus)||void 0===r?void 0:r.responseStatus)!==(null===(o=this.props.importGroupSetStatus)||void 0===o?void 0:o.responseStatus)&&(null===(a=this.props.importGroupSetStatus)||void 0===a?void 0:a.responseStatus)==="ERROR"){let e=this.getImportGroupSetErrorMessage(this.props.importGroupSetStatus.responseCode);this.showErrorBanner({message:e})}(null===(l=e.exportGroupSetStatus)||void 0===l?void 0:l.responseStatus)!==(null===(c=this.props.exportGroupSetStatus)||void 0===c?void 0:c.responseStatus)&&(null===(d=this.props.exportGroupSetStatus)||void 0===d?void 0:d.responseStatus)==="SUCCESS"&&(null===(p=null===(u=this.props.exportGroupSetStatus)||void 0===u?void 0:u.ui)||void 0===p?void 0:p.source)==="GROUPS_LIST_VIEW"&&this.showSuccessBanner({message:v("course.groupWorkspace.exportGroupSet.fileExportSuccess")}),(null===(m=e.exportGroupSetStatus)||void 0===m?void 0:m.responseStatus)!==(null===(h=this.props.exportGroupSetStatus)||void 0===h?void 0:h.responseStatus)&&(null===(g=this.props.exportGroupSetStatus)||void 0===g?void 0:g.responseStatus)==="ERROR"&&(null===(b=null===(f=this.props.exportGroupSetStatus)||void 0===f?void 0:f.ui)||void 0===b?void 0:b.source)==="GROUPS_LIST_VIEW"&&this.showErrorBanner({message:this.props.t("course.groupWorkspace.exportGroupSet.fileExportError")})}componentWillUnmount(){let{root:e}=this.props;(e&&e.querySelector(".panel-wrap")||window).removeEventListener("scroll",this.onScroll),(e&&e.querySelector(".panel-wrap")||window).removeEventListener("touchmove",this.onScroll)}getImportGroupSetErrorMessage(e){let t;let{t:n}=this.props;switch(e){case K.ILv.InvalidFileFormat:t="course.groupWorkspace.importGroupSet.fileFormatError";break;case K.ILv.EmptyFile:t="course.groupWorkspace.importGroupSet.fileEmptyError";break;case K.ILv.FileNotFound:t="course.groupWorkspace.importGroupSet.fileNotUploadedError";break;default:t="course.groupWorkspace.importGroupSet.fileImportError"}return n(t)}render(){let{canCreate:e,groupSets:t,totalGroupCount:n,totalSetCount:i,t:s,analyticsEventAugmentor:r,analyticsId:o,isOrganization:a}=this.props,l=t&&t.length||0;return c.createElement("div",{className:"page-group-set course-group-set-layer"},c.createElement("div",{className:"panel-wrap"},c.createElement("header",{className:"panel-header simple-header"},c.createElement("div",{className:"panel-titles-container"},c.createElement("span",{className:"panel-sub-title"},s("course.groupWorkspace.subTitle")),c.createElement("div",{className:"editable-title-container black-header-contents"},c.createElement(C.AnalyticsIconButton,{"aria-label":s("base.menu"),className:"left-off-canvas-toggle menu-toggle  standard-button dark-background",title:s("base.menu"),analyticsId:`${o}.menuToggle.button`},c.createElement(E.MainMenu,null)),c.createElement("h1",{className:"panel-title",tabIndex:-1},s((0,et.qq)("groupWorkspace.pageTitle",a)))))),c.createElement("div",{className:"guidance-wrapper"},c.createElement("span",{className:"set-group-count"},s("course.groupWorkspace.guidance.groupSetCount.plural",{groupSetCount:i||0})+s("course.groupWorkspace.guidance.groupCount.plural",{groupCount:n||0})),e&&c.createElement(c.Fragment,null,c.createElement("button",{className:"import-group-set",onClick:r(y.AnalyticsEventTypes.CLICK_EVENT,this.openImportGroupSetPanel,`${o}.importGroupSet.button`),"data-analytics-id":`${o}.importGroupSet.button`},c.createElement(E.Upload,null),c.createElement("span",{className:"import-button"},s("course.groupWorkspace.importGroupSet.buttonLabel"))),c.createElement("button",{className:"create-group-set",onClick:r(y.AnalyticsEventTypes.CLICK_EVENT,this.onCreateGroupSet,`${o}.createNewSet.button`),"data-analytics-id":`${o}.createNewSet.button`},c.createElement(S.AddCircle,null),c.createElement("span",{className:"create-button"},s("course.groupWorkspace.guidance.createNewSet"))))),c.createElement("div",{className:"panel-content"},c.createElement("div",{className:"row collapse"},"success"===this.state.showBanner&&c.createElement("div",{className:"message-banner"},c.createElement(_.CU,{message:this.state.bannerMessage,onClose:this.hideBanner})),"error"===this.state.showBanner&&c.createElement("div",{className:"message-banner"},c.createElement(_.H4,{message:this.state.bannerMessage,onClose:this.hideBanner})),this.renderGroupSetListView(l),this.props.isLoading?c.createElement("div",{className:"spinner bb-secondary-color-2"}):""))))}}var ei=(0,y.withAnalytics)((0,p.$j)((e,t)=>({groupSets:k.OgF.groupSet.getRenderedGroupSets(e,t.courseId),isLoading:k.Ys.groupWorkspace.isLoading(e),totalSetCount:k.Ys.groupWorkspace.getTotalGroupSetCount(e),totalGroupCount:k.Ys.groupWorkspace.getTotalGroupCount(e),isOrganization:!!k.Ys.course.getCourseById(e,t.courseId).isOrganization,canCreate:k.Ys.groupWorkspace.canCreate(e),courseMemberCount:k.Ys.course.getCourseStudentCount(e,t.courseId),importGroupSetStatus:k.Ys.groupSetImport.getImportGroupSetStatus(e,t.courseId),exportGroupSetStatus:k.Ys.groupSetExport.getExportGroupSet(e,t.courseId)}),e=>(0,w.DE)({onLoadGroupSets:k.Nwg.groupWorkspace.loadGroupSets,onGetCourseContext:k.Nwg.course.fetchCourseStudentCount,clearImportGroupSetStatus:k.Nwg.groupSetImport.clearImportGroupSetStatus,clearExportGroupSetStatus:k.Nwg.groupSetExport.clearExportGroupSetStatus},e))((0,v.H)(en)));(r=l||(l={})).GroupEnrollmentExpiredErrorCode="enrollmentExpiredError",r.GroupIsFullErrorCode="groupIsFullError",r.SourceGroupSubmittedAttemptErrorCode="hasEnrolledGroupSubmittedAttemptError",r.TargetGroupSubmittedAttemptErrorCode="hasSubmittedGroupAttemptError",r.SourceGroupGradeErrorCode="hasSourceEnrollmentGroupGradesError",r.TargetGroupGradeErrorCode="hasTargetEnrollmentGroupGradesError";var es=n(83202),er=n(142895);let eo=e=>{let{analyticsId:t,dismissContentStartedDialog:n,groupTitle:i,moveToGroup:s}=e,r=(0,D.q)();return d().createElement(P._X,{analyticsId:t,open:!0,onClose:()=>n(),"aria-labelledby":"dialog.enroll.content.started.title"},d().createElement(G.AnalyticsDialogTitle,{onClose:()=>n(),id:"dialog.enroll.content.started.title",analyticsId:`${t}.dialog-content-started.title`},r("course.groupWorkspace.selfEnroll.dialog.titleGroup",{groupName:i})),d().createElement(G.AnalyticsDialogContent,{analyticsId:`${t}.dialog-content-started.content`},d().createElement(G.AnalyticsDialogContentText,{id:"dialog.enroll.content.started.description",analyticsId:`${t}.dialog-content-started.description`},r("course.groupWorkspace.selfEnroll.dialog.contentStarted"))),d().createElement(G.AnalyticsDialogActions,{analyticsId:`${t}.dialog-content-started.actions`},d().createElement(T.AnalyticsDefaultButton,{analyticsId:`${t}.dialog.enroll.content.started.cancel.button`,onClick:()=>n()},r("course.groupWorkspace.button.cancel")),d().createElement(T.AnalyticsPrimaryButton,{analyticsId:`${t}.dialog.enroll.content.started.confirm.button`,onClick:()=>s()},r("course.groupWorkspace.button.confirm"))))};class ea extends c.PureComponent{constructor(e){super(e),this.getMaxEnrollment=()=>{let{group:e,courseMemberCount:t}=this.props;return e&&e.maximumEnrollment&&e.maximumEnrollment>0?e.maximumEnrollment:t},this.isUserEnrolledInGroup=()=>{let{group:e,userId:t}=this.props,n=e&&e.memberships||[];return!!n.find(e=>e.userId===t)},this.joinGroup=()=>{let{group:e}=this.props;e.groupContentStarted?this.setState({hideContentStartedDialog:!1}):this.onJoinClick()},this.getFlexboxActionCell=()=>{let{group:e,canCreateGroups:t,t:n,isAnyGroupMember:i,analyticsId:s,userHasGrade:r,userHasSubmission:o,userStartedContentInThisGroup:a}=this.props,l=this.getSelfEnrollmentDateStateInfo(),d="After"===l.enrollmentDateState,u="Before"===l.enrollmentDateState,p=this.isUserEnrolledInGroup(),m=this.getMaxEnrollment();return e.isSelfEnrolledAllowed?d?c.createElement("div",{className:"join-column read-only enrollment-closed"},n("course.groupWorkspace.selfEnroll.closed")):u?c.createElement("div",{className:"join-column read-only enrollment-pending"},n("course.groupWorkspace.selfEnroll.pending")):p&&!t?c.createElement("div",{className:"join-column read-only enrollment-joined"},c.createElement("div",{className:"join-success-container"},c.createElement(E.Complete,{className:"join-icon"}),c.createElement("span",{className:"join-icon-text"},n("course.groupWorkspace.selfEnroll.joined")))):a?c.createElement("div",{className:"join-column read-only enrollment-disabled"}):e&&e.studentCount>=m&&!p&&!d?c.createElement("div",{className:"join-column read-only enrollment-full"},n("course.groupWorkspace.selfEnroll.groupFull")):o||e&&e.hasSubmittedGroupAttempt?c.createElement("div",{className:"join-column read-only attempt-submitted"},n("course.groupWorkspace.selfEnroll.attemptSubmitted")):r||e&&e.hasGrades?c.createElement("div",{className:"join-column read-only enrollment-grade"},n("course.groupWorkspace.selfEnroll.gradeAssigned")):i||t?!i||p||t?void 0:c.createElement("div",{className:"join-column enrollment-move"},c.createElement("div",null,c.createElement(G.AnalyticsLink,{onClick:()=>this.moveToThisGroup(),analyticsId:(0,y.getNewAnalyticsId)(s,`group.${e.id}.move.link`),component:"button"},n("course.groupWorkspace.selfEnroll.moveToGroup")),this.renderDialog())):c.createElement("div",{className:"join-column enrollment-join"},c.createElement(G.AnalyticsPrimaryButton,{type:"button",className:"join-button",onClick:this.joinGroup,analyticsId:`${s}group.${e.id}.join.button`},n("course.groupWorkspace.selfEnroll.join")),!this.state.hideContentStartedDialog&&c.createElement(eo,{analyticsId:(0,y.getNewAnalyticsId)(s,"dialog.enroll.content.started"),groupTitle:e.title,dismissContentStartedDialog:this.dismissContentStartedDialog,moveToGroup:this.onMoveToGroup})):c.createElement("div",{className:"join-column read-only enrollment-disabled"})},this.getTableActionCell=()=>{let{group:e,canCreateGroups:t,t:n,isAnyGroupMember:i,analyticsId:s,userHasGrade:r,userHasSubmission:o,userStartedContentInThisGroup:a}=this.props,l=this.getSelfEnrollmentDateStateInfo(),d="After"===l.enrollmentDateState,u="Before"===l.enrollmentDateState,p=this.isUserEnrolledInGroup(),m=this.getMaxEnrollment();return e.isSelfEnrolledAllowed?d?c.createElement("div",{className:"join-column read-only enrollment-closed"},n("course.groupWorkspace.selfEnroll.closed")):u?c.createElement("div",{className:"join-column read-only enrollment-pending"},n("course.groupWorkspace.selfEnroll.pending")):p&&!t?c.createElement("div",{className:"join-column read-only enrollment-joined"},c.createElement(E.Complete,{className:"joined-icon"}),c.createElement("span",{className:"join-icon-text"},n("course.groupWorkspace.selfEnroll.joined"))):e&&e.studentCount>=m&&!p&&!d?c.createElement("div",{className:"join-column read-only enrollment-full"},n("course.groupWorkspace.selfEnroll.groupFull")):o||e&&e.hasSubmittedGroupAttempt?c.createElement("div",{className:"join-column read-only attempt-submitted"},n("course.groupWorkspace.selfEnroll.attemptSubmitted")):r||e&&e.hasGrades?c.createElement("div",{className:"join-column read-only enrollment-grade"},n("course.groupWorkspace.selfEnroll.gradeAssigned")):a?c.createElement("div",{className:"enrollment-disabled"}):i||t?!i||p||t?void 0:c.createElement("div",{className:"join-column enrollment-move"},c.createElement(G.AnalyticsLink,{onClick:()=>this.moveToThisGroup(),analyticsId:(0,y.getNewAnalyticsId)(s,`group.${e.id}.move.link`),component:"button"},n("course.groupWorkspace.selfEnroll.moveToGroup")),this.renderDialog()):c.createElement("div",{className:"join-column enrollment-join"},c.createElement(G.AnalyticsPrimaryButton,{type:"button",className:"join-button",onClick:this.joinGroup,analyticsId:`${s}group.${e.id}.join.button`},n("course.groupWorkspace.selfEnroll.join")),!this.state.hideContentStartedDialog&&c.createElement(eo,{analyticsId:(0,y.getNewAnalyticsId)(s,"dialog.enroll.content.started"),groupTitle:e.title,dismissContentStartedDialog:this.dismissContentStartedDialog,moveToGroup:this.onMoveToGroup})):c.createElement("div",{className:"join-column read-only enrollment-disabled"})},this.onJoinClick=async()=>{let{group:e,userId:t,courseId:n,enrolledGroupId:i,onJoinGroup:s,onGroupJoined:r,onLoadContent:o}=this.props,a=e.id;try{await s({courseId:n,groupId:a,userId:t,enrolledGroupId:i}),e.contentId&&await o({courseId:n,contentId:e.contentId}),this.dismissDialog(),this.dismissContentStartedDialog(),r&&r()}catch(e){e instanceof k.hqK&&this.loadGroupsAndDisplayWarning(l.GroupIsFullErrorCode),e instanceof k.S6o&&this.loadGroupsAndDisplayWarning(l.GroupEnrollmentExpiredErrorCode),e instanceof k.hm3&&this.loadGroupsAndDisplayWarning(l.TargetGroupSubmittedAttemptErrorCode),e instanceof k.e9A&&this.loadGroupsAndDisplayWarning(l.SourceGroupSubmittedAttemptErrorCode),e instanceof k.PG6&&this.loadGroupsAndDisplayWarning(l.SourceGroupGradeErrorCode),e instanceof k.UP6&&this.loadGroupsAndDisplayWarning(l.TargetGroupGradeErrorCode)}},this.loadGroupsAndDisplayWarning=e=>{let{group:t,courseId:n,onLoadGroups:i,hideOrDisplayWarning:s}=this.props,r=t.contentId;r?i({courseId:n,contentId:r,expand:R.Lh},!0).then(()=>{this.dismissDialog(),s(e,!1)}):(this.dismissDialog(),s(e,!1))},this.isShowGroupMembers=()=>{let e=this.getSignUpSheet();return!!(e&&e.isShowGroupMembers)},this.renderHasMembers=()=>{let{t:e}=this.props;if(this.isNonSelfEnrollmentGroupOrInstructorHidMembers())return c.createElement("div",{className:"group-members-disabled"},e("course.groupWorkspace.membersHidden"))},this.renderMemberList=()=>{let{group:e,analyticsId:t,t:n}=this.props;return c.createElement("div",{className:"show-members-link"},c.createElement(G.AnalyticsLink,{onClick:()=>this.onShowGroupMembersList(e.id),analyticsId:`${t}.group.showMembers.link`,"aria-label":n("course.groupWorkspace.selfEnroll.showMembersLinkAriaLabel",{groupName:e.title}),href:"#"},n("course.groupWorkspace.selfEnroll.showMembers")))},this.moveToThisGroup=()=>{this.setState({hideDialog:!1})},this.dismissDialog=()=>{this.setState({hideDialog:!0})},this.dismissContentStartedDialog=()=>{this.setState({hideContentStartedDialog:!0})},this.onMoveToGroup=()=>{this.onJoinClick()},this.renderDialog=()=>{let{t:e,analyticsId:t}=this.props,n=this.getDialogContent();return c.createElement(P.Dy,{onDismiss:this.dismissDialog,analyticsId:(0,y.getNewAnalyticsId)(t,"dialog.enroll"),hidden:this.state.hideDialog,modalProps:{isAlert:!0,className:"self-enroll-dialog"},dialogContentProps:{type:er.DialogType.close,title:n.title,subText:n.body,showCloseButton:!0}},c.createElement(er.DialogFooter,null,c.createElement(G.AnalyticsDefaultButton,{onClick:this.dismissDialog,analyticsId:(0,y.getNewAnalyticsId)(t,"dialog.enroll.defaultButton")},e("course.groupWorkspace.button.cancel")),c.createElement(G.AnalyticsPrimaryButton,{onClick:this.onMoveToGroup,analyticsId:(0,y.getNewAnalyticsId)(t,"dialog.enroll.primaryButton"),className:"moveConfirmBtn"},n.actionText)))},this.state={hideDialog:!0,hideContentStartedDialog:!0}}getSelfEnrollmentDateStateInfo(){let{groupSet:e,group:t}=this.props;return e?(0,R.fg)([e]):(0,R.fg)([t])}isNonSelfEnrollmentGroupOrInstructorHidMembers(){let e=this.getSignUpSheet();return!e||!e.isShowGroupMembers}onShowGroupMembersList(e){I.Nd.goPeekState((0,I.oc)({groupId:e}))}getDialogContent(){let{t:e,group:t}=this.props;return t.groupContentStarted?{title:e("course.groupWorkspace.selfEnroll.dialog.titleMoveGroup"),body:e("course.groupWorkspace.selfEnroll.dialog.canMoveContentStarted"),actionText:e("course.groupWorkspace.button.move")}:{title:e("course.groupWorkspace.selfEnroll.dialog.titleCanMove"),body:e("course.groupWorkspace.selfEnroll.dialog.canMove"),actionText:e("course.groupWorkspace.button.move")}}getSignUpSheet(){let{groupSet:e}=this.props;return e&&e.signUpSheet?e.signUpSheet:this.props.group.signUpSheet}shouldShowGroupMemberships(){let{group:e}=this.props,t=this.getSignUpSheet();return e.memberships&&e.memberships.length>0&&(t&&t.isShowGroupMembers||this.isNotSelfEnrollmentGroup())}isNotSelfEnrollmentGroup(){let e=this.getSignUpSheet();return void 0===e}renderFlexboxContents(){var e;let{group:t,ariaLabelledBy:n,className:i,t:s}=this.props;return c.createElement("li",{id:(0,R.kA)(t.id),key:t.id,className:`flexbox-group-row ${i||""}`},c.createElement("div",{className:"description-column"},c.createElement("div",{className:"groups-icon"},c.createElement(S.Groups,{className:"element-image"})),c.createElement("div",{className:"description-data"},c.createElement("div",{className:"group-data"},c.createElement("div",{id:`span-cell-${t.id}`,className:"group-title","aria-describedby":`${n} student-groups-group-sets`},t.title),this.shouldShowGroupMemberships()?this.renderMemberList():this.renderHasMembers(),c.createElement("span",{className:"list-item-member-count"},s("course.groupWorkspace.selfEnroll.max",{groupCount:null!==(e=t.studentCount)&&void 0!==e?e:0,groupTotal:this.getMaxEnrollment()})),t.description&&""!==t.description.displayText?c.createElement("div",{className:"group-description"},c.createElement(es.BbEditor,{isToolbarHidden:!0,isDisabled:!0,isReadOnly:!0,bbml:t.description.rawText,ariaRequired:!1})):""),c.createElement("div",{className:"flexbox-action-cell"},this.getFlexboxActionCell()))))}renderTableContents(){var e;let{rowId:t,className:n,group:i,ariaLabelledBy:s,t:r}=this.props;return c.createElement("tr",{id:t||(0,R.kA)(i.id),key:i.id,className:`self-enroll-group-row table-group-row ${n||""}`},c.createElement("td",{className:"groups-icon-column","aria-labelledby":`${s} col-name`,tabIndex:-1},c.createElement("div",{className:"title-column-data-wrapper"},c.createElement("div",{className:"icon-wrapper"},c.createElement("div",{className:"icon groups-icon"},c.createElement(S.Groups,{className:"element-image"}))),c.createElement("div",{className:"title-description-wrapper"},c.createElement("div",{id:`span-cell-${i.id}`,className:"group-title","aria-describedby":`${s} col-name`},i.title),this.shouldShowGroupMemberships()?this.renderMemberList():this.renderHasMembers(),i.description&&""!==i.description.displayText?c.createElement("div",{className:"group-description"},c.createElement(es.BbEditor,{isToolbarHidden:!0,isDisabled:!0,isReadOnly:!0,bbml:i.description.displayText,ariaRequired:!1})):""))),c.createElement("td",{className:"count-column",tabIndex:-1,"aria-labelledby":"col-count"},c.createElement("div",{className:"count-column-data-wrapper"},c.createElement("div",{className:"member-count-and-menu"},c.createElement("span",{className:"list-item-member-count"},r("course.groupWorkspace.selfEnroll.max",{groupCount:null!==(e=i.studentCount)&&void 0!==e?e:0,groupTotal:this.getMaxEnrollment()}))),this.getTableActionCell())))}render(){let{useFlexbox:e}=this.props;return e?this.renderFlexboxContents():this.renderTableContents()}}var el=(0,p.$j)((e,t)=>{let n=t.group.memberships?t.group.memberships.map(e=>e.userId):[],i=k.Ys.user.getUsersByIds(e,n);return{group:t.group,groupUsers:i,canCreateGroups:!!k.Ys.groupWorkspace.canCreate(e)&&k.Ys.groupWorkspace.canCreate(e),isAnyGroupMember:k.Ys.group.hasJoined(e,{contentId:t.group.contentId,groupSetId:t.group.groupSetId,userId:t.userId})}},e=>(0,w.DE)({onLoadGroups:k.Nwg.group.loadByContentId,onJoinGroup:k.Nwg.group.addGroupMembership,onLoadContent:k.Nwg.content.loadContents},e))((0,v.H)(ea));class ec extends c.PureComponent{componentDidUpdate(e){e.group&&this.props.group&&(e.group.title!==this.props.group.title||e.group.studentCount!==this.props.group.studentCount)&&this.props.onChangeOffset()}render(){let{group:e,userId:t,courseId:n,enrolledGroupId:i,isLoading:s,courseMemberCount:r,hideOrDisplayWarning:o,analyticsId:a,groupSet:l,userHasGrade:d,userHasSubmission:u,userStartedContentInThisGroup:p,useFlexbox:m}=this.props,h=s?c.createElement("tr",null,c.createElement("td",{colSpan:2,className:"isLoading"},c.createElement(x.Spinner,{size:x.SpinnerSize.large}))):c.createElement(el,{group:e,userId:t,enrolledGroupId:i,courseId:n,userHasGrade:d,userHasSubmission:u,userStartedContentInThisGroup:p,ariaLabelledBy:`title-${e.id}`,courseMemberCount:r,hideOrDisplayWarning:o,onGroupJoined:this.props.onGroupJoined,analyticsId:`${a}.groupContent`,groupSet:l,useFlexbox:m});return h}}var ed=(0,p.$j)((e,t)=>({debounceTime:2e3,userId:t.userId,courseId:t.courseId,userHasGrade:t.userHasGrade,userHasSubmission:t.userHasSubmission,userStartedContentInThisGroup:t.userStartedContentInThisGroup,group:t.group,isLoading:k.Ys.groupWorkspace.isLoading(e,t.group.id),courseMemberCount:t.courseMemberCount,hideOrDisplayWarning:t.hideOrDisplayWarning,groupSet:t.groupSet,useFlexbox:t.useFlexbox}))(ec),eu=n(91020);class ep extends c.PureComponent{constructor(e){super(e),this.hideOrDisplayWarning=(e,t)=>{let n={};switch(e){case l.GroupIsFullErrorCode:n={groupFull:t};break;case l.GroupEnrollmentExpiredErrorCode:n={enrollmentExpired:t};break;case l.TargetGroupSubmittedAttemptErrorCode:n={hasSubmittedGroupAttempt:t};break;case l.SourceGroupSubmittedAttemptErrorCode:n={hasEnrolledGroupSubmittedAttempt:t};break;case l.SourceGroupGradeErrorCode:n={hasSourceEnrollmentGroupGrades:t};break;case l.TargetGroupGradeErrorCode:n={hasTargetEnrollmentGroupGrades:t}}this.setState(n)},this.renderGroupSelfEnrollItem=(e,t)=>{let{groups:n,userId:i,courseId:s,analyticsId:r,isLoading:o,groupSetById:a}=this.props,l=n[e],d=(0,R.YW)(n),u=o?null:a(d);return c.createElement(ed,{debounceTime:2e3,isLoading:this.props.isLoading,key:l.id,group:l,groupSet:u,enrolledGroupId:this.getEnrolledGroupId(),userId:i,courseId:s,userHasGrade:this.isUserInGroupWithGrade(),userHasSubmission:this.isUserInGroupWithSubmission(),userStartedContentInThisGroup:this.isUserInGroupWithContentStarted(),onChangeOffset:()=>{},courseMemberCount:this.props.courseMemberCount,hideOrDisplayWarning:this.hideOrDisplayWarning,onGroupJoined:this.props.onGroupJoined,analyticsId:`${r}.groupItem`,useFlexbox:t})},this.renderWarnings=()=>{let e=[{code:l.GroupEnrollmentExpiredErrorCode,state:this.state.enrollmentExpired,isDifferentInOrg:!0},{code:l.GroupIsFullErrorCode,state:this.state.groupFull},{code:l.SourceGroupSubmittedAttemptErrorCode,state:this.state.hasEnrolledGroupSubmittedAttempt},{code:l.TargetGroupSubmittedAttemptErrorCode,state:this.state.hasSubmittedGroupAttempt},{code:l.SourceGroupGradeErrorCode,state:this.state.hasSourceEnrollmentGroupGrades},{code:l.TargetGroupGradeErrorCode,state:this.state.hasTargetEnrollmentGroupGrades}];return e.map(e=>this.renderWarning(e))},this.renderWarning=e=>{let{isOrganization:t,localize:{translate:n},analyticsId:i}=this.props;return c.createElement("div",{key:e.code},!e.state&&c.createElement(x.Notification,{type:x.NotificationType.Failure,message:n((0,et.qq)(`groupWorkspace.selfEnroll.${e.code}`,e.isDifferentInOrg&&t)),analyticsId:`${i}.${e.code}.warning.close.button`,onClose:()=>this.hideOrDisplayWarning(e.code,!0),disableAutoDismiss:!0}))},this.renderGroupSelfEnrollListView=e=>{let{UltraWindowSize:t}=this.props;return t.isSmallBreakpoint()?this.renderFlexboxGroupSelfEnrollListView(e):this.renderTableGroupSelfEnrollListView(e)},this.renderFlexboxGroupSelfEnrollListView=e=>{let{localize:{translate:t}}=this.props;return c.createElement("ul",{id:"expandGrid",className:"flex-content",tabIndex:-1},c.createElement("li",{id:"table-header-row"},c.createElement("div",{className:"description-header column-title"},t("course.groupWorkspace.selfEnroll.groups"))),this.renderSubItems())},this.renderTableGroupSelfEnrollListView=e=>{let{isOrganization:t,localize:{translate:n}}=this.props;return c.createElement("div",{className:"tabular-list-container"},c.createElement("div",{className:"tabular-list"},c.createElement("table",{id:"expandGrid",className:"table-content","aria-label":n("course.groupWorkspace.pageTitle"),tabIndex:-1},c.createElement("thead",{className:"list-item-column-header"},c.createElement("tr",{id:"table-header-row"},c.createElement("th",{className:"column-title",id:"col-name"},n("course.groupWorkspace.selfEnroll.groups")),c.createElement("th",{className:"column-student-count count",id:"col-count",tabIndex:-1},n((0,et.qq)("groupWorkspace.selfEnroll.numberOfStudents",t))))),c.createElement(b(),{itemsRenderer:(e,t)=>c.createElement("tbody",{ref:t},e),length:e,itemRenderer:e=>this.renderGroupSelfEnrollItem(e,!1),ref:e=>this.list=e}))))},this.renderContentTitle=()=>{let{contentName:e}=this.props;return c.createElement("span",{className:"panel-sub-title"},e)},this.renderContentGroupTitle=()=>{let{localize:{translate:e},contentName:t,analyticsId:n}=this.props;return c.createElement("div",{className:"black-header-contents"},c.createElement(C.AnalyticsIconButton,{"aria-label":e("base.menu"),className:"left-off-canvas-toggle menu-toggle  standard-button dark-background",title:e("base.menu"),analyticsId:`${n}.toggle.menu.button`},c.createElement(E.MainMenu,null)),c.createElement("h1",{className:"panel-title"},e("course.groupWorkspace.selfEnroll.groupTitle",{contentName:t})))},this.renderEnrollmentWarning=()=>{let{localize:{translate:e}}=this.props,{isEnrollmentDateImportant:t,relativeDate:n,enrollmentDateState:i}=this.state,s=null;switch(i){case"Before":s=c.createElement("div",null,e("course.groupWorkspace.selfEnroll.enrollment-starts",{time:n}));break;case"Open":n&&(s=c.createElement("div",{className:t?"enrollment-warning":null},e("course.groupWorkspace.selfEnroll.enrollment-closes",{time:n})));break;case"After":s=c.createElement("div",null,e("course.groupWorkspace.selfEnroll.enrollment-closed"))}return s},this.state={groupFull:!0,enrollmentExpired:!0,hasSubmittedGroupAttempt:!0,hasEnrolledGroupSubmittedAttempt:!0,hasSourceEnrollmentGroupGrades:!0,hasTargetEnrollmentGroupGrades:!0}}componentDidMount(){let{courseId:e,contentId:t,onLoadGroups:n,onGetCourseContext:i}=this.props;n({courseId:e,contentId:t,expand:R.Lh},!0),i(e)}componentDidUpdate(e,t){this.onLoadSelfEnrollmentGroupInfo(t)}onLoadSelfEnrollmentGroupInfo(e){let{groups:t,localize:{locale:n,babelfishFormat:i}}=this.props;(0,R.pL)(t,n,i).then(t=>{let{relativeDate:n,isEnrollmentDateImportant:i,enrollmentDateState:s}=t;(e.relativeDate!==n||e.isEnrollmentDateImportant!==i||e.enrollmentDateState!==s)&&this.updateSelfEnrollmentGroupInfo(t)})}getEnrolledGroup(){let{groups:e,userId:t}=this.props;return g.find(e,e=>g.some(e.memberships,e=>e.userId===t))}getEnrolledGroupId(){let{groups:e,userId:t}=this.props,n=g.find(e,e=>g.some(e.memberships,e=>e.userId===t));return n?n.id:void 0}isUserInGroupWithSubmission(){let e=this.getEnrolledGroup();return e&&e.hasSubmittedGroupAttempt}isUserInGroupWithContentStarted(){let e=this.getEnrolledGroup();return!!(null==e?void 0:e.groupContentStarted)}isUserInGroupWithGrade(){let e=this.getEnrolledGroup();return e&&e.hasGrades}updateSelfEnrollmentGroupInfo(e){let{relativeDate:t,isEnrollmentDateImportant:n,enrollmentDateState:i}=e;this.setState({relativeDate:t,isEnrollmentDateImportant:n,enrollmentDateState:i})}renderSubItems(){let{analyticsId:e,courseId:t,courseMemberCount:n,groups:i,userId:s}=this.props,r=i?i.map(i=>c.createElement(el,{key:i.id,group:i,userId:s,enrolledGroupId:this.getEnrolledGroupId(),courseId:t,hideOrDisplayWarning:this.hideOrDisplayWarning,ariaLabelledBy:`title-${i.id}`,courseMemberCount:n,userHasGrade:this.isUserInGroupWithGrade(),userHasSubmission:this.isUserInGroupWithSubmission(),userStartedContentInThisGroup:this.isUserInGroupWithContentStarted(),onGroupJoined:this.props.onGroupJoined,analyticsId:`${e}.groupContent`,useFlexbox:!0})):null;return r}render(){let{groups:e,localize:{translate:t}}=this.props,n=e&&e.length||0,i=this.renderEnrollmentWarning();return c.createElement("div",{className:"page-group-set content-group-self-enroll-layer"},c.createElement("div",{className:"panel-wrap"},c.createElement("header",{className:"panel-header simple-header"},c.createElement("div",{className:"panel-titles-container"},this.renderContentTitle(),this.renderContentGroupTitle())),c.createElement("div",{className:"guidance-wrapper"},c.createElement("div",{className:"guidance-title"},t("course.groupWorkspace.selfEnroll.groupDetails")),i),c.createElement("div",{className:null!==i?"panel-content enrollment-expires":"panel-content"},c.createElement("div",{className:"row collapse"},this.renderWarnings(),this.renderGroupSelfEnrollListView(n),this.props.isLoading?c.createElement("div",{className:"spinner bb-secondary-color-2"}):""))))}}var em=(0,p.$j)((e,t)=>({groups:(0,R.m7)(k.Ys.group.getGroupsByContentId(e,t.contentId)),isLoading:k.Ys.group.isLoading(e)||k.Ys.groupWorkspace.isLoading(e),isOrganization:!!k.Ys.course.getCourseById(e,t.courseId).isOrganization,courseMemberCount:k.Ys.course.getCourseStudentCount(e,t.courseId),groupSetById:t=>k.Ys.groupWorkspace.getGroupSetById(e,t)}),e=>(0,w.DE)({onLoadGroups:k.Nwg.group.loadByContentId,onGetCourseContext:k.Nwg.course.fetchCourseStudentCount},e))((0,eu.windowResizingResponsiveComponentWrapper)((0,A.h)(ep))),eh=n(619034),eg=n.n(eh);function ef(e){return e.signUpSheet.enrollmentEndDate}function eb(e){if(!e.isSelfEnrolledAllowed||!(e&&e.signUpSheet))return!1;let t=ef(e);return void 0===t||eg()(t).isSameOrAfter(eg()())}function ev(e,t){return e.isSameOrAfter(t.signUpSheet.enrollmentStartDate)}let ey=/^_([0-9]+)_([0-9]+)$/;function eC(e){let[,t,n]=e.match(ey);return[parseInt(t,10),parseInt(n,10)]}class eS extends c.PureComponent{constructor(e){super(e),this.toggleRow=()=>{this.setState(e=>({expand:!e.expand}))},this.renderEnrollmentWarning=()=>{let{localize:{translate:e}}=this.props,{isEnrollmentDateImportant:t,relativeDate:n,enrollmentDateState:i}=this.state,s=null;switch(i){case"Before":s=c.createElement("div",null,e("course.groupWorkspace.selfEnroll.enrollment-starts",{time:n}));break;case"Open":n&&(s=c.createElement("div",{className:t?"enrollment-warning":null},e("course.groupWorkspace.selfEnroll.enrollment-closes",{time:n})));break;case"After":s=c.createElement("div",null,e("course.groupWorkspace.selfEnroll.enrollment-closed"))}return s},this.state={expand:eb(e.groupSet)}}componentDidUpdate(e,t){this.onLoadSelfEnrollmentGroupInfo(t)}componentDidMount(){this.onLoadSelfEnrollmentGroupInfo(this.state)}onLoadSelfEnrollmentGroupInfo(e){let{groupSet:t,localize:{locale:n,babelfishFormat:i}}=this.props;t.isSelfEnrolledAllowed&&(0,R.pL)([t],n,i).then(t=>{let{relativeDate:n,isEnrollmentDateImportant:i,enrollmentDateState:s}=t;(e.relativeDate!==n||e.isEnrollmentDateImportant!==i||e.enrollmentDateState!==s)&&this.updateSelfEnrollmentGroupInfo(t)})}getEnrolledGroup(){let{groups:e,userId:t}=this.props;return g.find(e,e=>g.some(e.memberships,e=>e.userId===t))}getEnrolledGroupId(){let{groups:e,userId:t}=this.props,n=g.find(e,e=>g.some(e.memberships,e=>e.userId===t));return n?n.id:void 0}isUserInGroupWithSubmission(){let e=this.getEnrolledGroup();return e&&e.hasSubmittedGroupAttempt}isUserInGroupWithGrade(){let e=this.getEnrolledGroup();return e&&e.hasGrades}updateSelfEnrollmentGroupInfo(e){let{relativeDate:t,isEnrollmentDateImportant:n,enrollmentDateState:i}=e;this.setState({relativeDate:t,isEnrollmentDateImportant:n,enrollmentDateState:i})}renderSubItems(){let{analyticsId:e,courseId:t,courseMemberCount:n,groups:i,groupSet:s,hideOrDisplayWarning:r,userId:o}=this.props,{expand:a}=this.state,l=i?i.map((l,d)=>{let u=`${a?"expand":""} ${d===i.length-1?"last-child":""}`,p=(0,R.kA)(l.id);return c.createElement(el,{rowId:p,className:u,key:l.id,group:l,groupSet:s,enrolledGroupId:this.getEnrolledGroupId(),userId:o,courseId:t,ariaLabelledBy:`title-${l.id}`,userHasGrade:this.isUserInGroupWithGrade(),userHasSubmission:this.isUserInGroupWithSubmission(),useFlexbox:!0,courseMemberCount:n,hideOrDisplayWarning:r,onGroupJoined:this.props.onGroupJoined,analyticsId:`${e}.groupItem`})}):null;return l}renderIcon(){return c.createElement("div",{className:"group-set-icon-container"},c.createElement("div",{className:"group-set-icon"},c.createElement(O.F,{color:"primary",className:"element-image"})))}render(){let{groups:e,groupSet:t,isLoading:n,analyticsId:i}=this.props,{expand:s}=this.state,r=!!(t.description&&t.description.rawText),o=`${e&&e.map(e=>(0,R.kA)(e.id)).join(" ")}`;return c.createElement(c.Fragment,null,c.createElement("li",{key:t.id,id:`row-${t.id}`,className:`group-set-row expandable ${s?"expand":""}`,"aria-expanded":s},this.renderIcon(),c.createElement("div",{className:"group-set-row-data"},c.createElement("div",{className:"group-set-header description-column"},c.createElement("div",{className:"group-set-title"},t.title),this.renderEnrollmentWarning(),r&&c.createElement("div",{className:"group-set-description-text"},c.createElement(es.BbEditor,{isToolbarHidden:!0,isDisabled:!0,isReadOnly:!0,bbml:t.description.rawText,ariaRequired:!1})))),c.createElement("div",{className:"item-expand"},c.createElement(C.AnalyticsIconButton,{analyticsId:i,onClick:this.toggleRow,"aria-controls":o},s?c.createElement(E.ArrowUp,null):c.createElement(E.ArrowDown,null)))),n?c.createElement("li",{className:"isLoading"},c.createElement(x.Spinner,{size:x.SpinnerSize.large})):this.renderSubItems())}}var eE=(0,p.$j)((e,t)=>({groups:(0,R.m7)(k.Ys.group.getGroupsByGroupSetId(e,t.groupSet.id)),isLoading:k.Ys.group.isLoading(e)||k.Ys.groupWorkspace.isLoading(e,t.groupSet.id),courseMemberCount:k.Ys.course.getCourseStudentCount(e,t.courseId)}),e=>(0,w.DE)({},e))((0,A.h)(eS));class eI extends c.PureComponent{constructor(){super(...arguments),this.renderGroupSetList=(e,t)=>{let{t:n}=this.props;return c.createElement("div",{className:"group-set-list-container",ref:t},c.createElement("div",{className:"list-header"},c.createElement("div",{className:"description-header column-title",id:"student-groups-group-sets"},n("course.groupWorkspace.selfEnroll.groupSets"))),c.createElement("ul",{className:"group-set-list"},e))},this.renderGroupSetListItem=(e,t)=>{let{groupSetList:n,userId:i,courseId:s,analyticsId:r,onGroupJoined:o}=this.props,a=n[e];return c.createElement(eE,{courseId:s,groupSet:a,userId:i,onGroupJoined:o,hideOrDisplayWarning:this.props.hideOrDisplayWarning,analyticsId:`${r}.groupItem`,key:t})}}getGroupSetCount(){return(this.props.groupSetList||[]).length}render(){return c.createElement(b(),{itemsRenderer:this.renderGroupSetList,length:this.getGroupSetCount(),itemRenderer:this.renderGroupSetListItem,ref:e=>this.list=e})}}var ew=(0,v.H)(eI);class eA extends c.PureComponent{constructor(e){super(e),this.toggleRow=()=>{this.setState(e=>({expand:!e.expand}))},this.renderEnrollmentWarning=()=>{let{localize:{translate:e}}=this.props,{isEnrollmentDateImportant:t,relativeDate:n,enrollmentDateState:i}=this.state,s=null;switch(i){case R.qz.BEFORE:s=c.createElement("div",null,e("course.groupWorkspace.selfEnroll.enrollment-starts",{time:n}));break;case R.qz.OPEN:n&&(s=c.createElement("div",{className:t?"enrollment-warning":null},e("course.groupWorkspace.selfEnroll.enrollment-closes",{time:n})));break;case R.qz.AFTER:s=c.createElement("div",null,e("course.groupWorkspace.selfEnroll.enrollment-closed"))}return s},this.state={expand:eb(e.groupSet)}}componentDidUpdate(e,t){this.onLoadSelfEnrollmentGroupInfo(t)}componentDidMount(){this.onLoadSelfEnrollmentGroupInfo(this.state)}onLoadSelfEnrollmentGroupInfo(e){let{groupSet:t,localize:{locale:n,babelfishFormat:i}}=this.props;t.isSelfEnrolledAllowed&&(0,R.pL)([t],n,i).then(t=>{let{relativeDate:n,isEnrollmentDateImportant:i,enrollmentDateState:s}=t;(e.relativeDate!==n||e.isEnrollmentDateImportant!==i||e.enrollmentDateState!==s)&&this.updateSelfEnrollmentGroupInfo(t)})}getEnrolledGroupId(){let{groups:e,userId:t}=this.props,n=g.find(e,e=>g.some(e.memberships,e=>e.userId===t));return n?n.id:void 0}getEnrolledGroup(){let{groups:e,userId:t}=this.props;return g.find(e,e=>g.some(e.memberships,e=>e.userId===t))}isUserInGroupWithSubmission(){let e=this.getEnrolledGroup();return e&&e.hasSubmittedGroupAttempt}isUserInGroupWithGrade(){let e=this.getEnrolledGroup();return e&&e.hasGrades}updateSelfEnrollmentGroupInfo(e){let{relativeDate:t,isEnrollmentDateImportant:n,enrollmentDateState:i}=e;this.setState({relativeDate:t,isEnrollmentDateImportant:n,enrollmentDateState:i})}renderSubItems(){let{analyticsId:e,courseId:t,courseMemberCount:n,groups:i,groupSet:s,hideOrDisplayWarning:r,userId:o}=this.props,{expand:a}=this.state,l=i?i.map((l,d)=>{let u=(0,B.Z)({expand:a},{"last-group":d===i.length-1},{"first-group":0===d}),p=(0,R.kA)(l.id);return c.createElement(el,{key:l.id,rowId:p,className:u,group:l,userId:o,enrolledGroupId:this.getEnrolledGroupId(),courseId:t,ariaLabelledBy:`title-${l.id}`,courseMemberCount:n,userHasGrade:this.isUserInGroupWithGrade(),userHasSubmission:this.isUserInGroupWithSubmission(),hideOrDisplayWarning:r,onGroupJoined:this.props.onGroupJoined,analyticsId:`${e}.groupContent`,groupSet:s,useFlexbox:!1})}):null;return l}render(){let{groups:e,groupSet:t,isLoading:n,courseMemberCount:i,analyticsId:s}=this.props,{expand:r}=this.state,o=!!(t.description&&t.description.rawText),a=`${e&&e.map(e=>(0,R.kA)(e.id)).join(" ")}`;return c.createElement(c.Fragment,null,c.createElement("tr",{key:t.id,id:`row-${t.id}`,className:`group-set-item item-row expandable ${r?"expand":""}`,"aria-expanded":r},c.createElement("td",{className:"header-column",tabIndex:-1},c.createElement("div",{className:"group-workspace-header"},c.createElement("div",{className:"icon"},c.createElement(O.F,{color:"primary",className:"element-image"})),c.createElement("div",{className:"group-set-header description-column"},c.createElement("div",{className:"group-set-title"},t.title),this.renderEnrollmentWarning(),o&&c.createElement("div",{className:"group-set-description-text"},c.createElement(es.BbEditor,{isToolbarHidden:!0,isReadOnly:!0,bbml:t.description.rawText,ariaRequired:!1}))))),c.createElement("td",{className:"count-column",tabIndex:-1,"aria-labelledby":"col-count"},c.createElement("div",{className:"count-column-data-wrapper"},c.createElement("div",{className:"member-count"},c.createElement("span",{className:"list-item-member-count"},c.createElement("span",{className:"list-item-member-count-current"},`${t.studentCount||0}`),` / ${i||0}`)),c.createElement("div",{className:"item-expand"},c.createElement(C.AnalyticsIconButton,{analyticsId:s,onClick:this.toggleRow,"aria-controls":a},r?c.createElement(E.ChevronUp,null):c.createElement(E.ChevronDown,null)))))),n?c.createElement("tr",null,c.createElement("td",{colSpan:2,className:"isLoading"},c.createElement(x.Spinner,{size:x.SpinnerSize.large}))):this.renderSubItems())}}var ek=(0,p.$j)((e,t)=>({groups:(0,R.m7)(k.Ys.group.getGroupsByGroupSetId(e,t.groupSet.id)),isLoading:k.Ys.group.isLoading(e)||k.Ys.groupWorkspace.isLoading(e,t.groupSet.id),courseMemberCount:k.Ys.course.getCourseStudentCount(e,t.courseId)}),e=>(0,w.DE)({},e))((0,A.h)(eA));class ex extends c.PureComponent{constructor(){super(...arguments),this.renderGroupSetListItem=(e,t)=>{let{groupSetList:n,userId:i,courseId:s,analyticsId:r,onGroupJoined:o}=this.props,a=n[e];return c.createElement(ek,{courseId:s,groupSet:a,userId:i,onGroupJoined:o,hideOrDisplayWarning:this.props.hideOrDisplayWarning,analyticsId:`${r}.groupItem`,key:t})}}getGroupSetCount(){return(this.props.groupSetList||[]).length}render(){let{isOrganization:e,t}=this.props;return c.createElement("div",{className:"tabular-list-container"},c.createElement("div",{className:"tabular-list"},c.createElement("table",{className:"course-group-set-table","aria-label":t("course.groupWorkspace.pageTitle"),tabIndex:-1},c.createElement("thead",{className:"group-set-sort-header"},c.createElement("tr",{className:"group-set-sort-row",id:"table-header-row"},c.createElement("th",{className:"column-title",id:"col-name"},t("course.groupWorkspace.selfEnroll.groupSets")),c.createElement("th",{className:"column-student-count count",id:"col-count",tabIndex:-1},t((0,et.qq)("groupWorkspace.selfEnroll.numberOfStudents",e))))),c.createElement(b(),{itemsRenderer:(e,t)=>c.createElement("tbody",{ref:t},e),length:this.getGroupSetCount(),itemRenderer:this.renderGroupSetListItem,ref:e=>this.list=e}))))}}var eT=(0,v.H)(ex);class eP extends c.PureComponent{constructor(e){super(e),this.renderContentTitle=()=>{let{contentName:e}=this.props;return c.createElement("span",{className:"panel-sub-title"},e)},this.renderContentGroupTitle=()=>{let{t:e,contentName:t,analyticsId:n}=this.props;return c.createElement("div",{className:"black-header-contents"},c.createElement(C.AnalyticsIconButton,{"aria-label":e("base.menu"),className:"left-off-canvas-toggle menu-toggle  standard-button dark-background",analyticsId:`${n}.toggle.menu.button`},c.createElement(E.MainMenu,null)),c.createElement("h1",{className:"panel-title"},e("course.groupWorkspace.selfEnroll.groupTitle",{contentName:t})))},this.hideOrDisplayWarning=(e,t)=>{let n={};switch(e){case l.GroupIsFullErrorCode:n={groupFull:t};break;case l.GroupEnrollmentExpiredErrorCode:n={enrollmentExpired:t};break;case l.TargetGroupSubmittedAttemptErrorCode:n={hasSubmittedGroupAttempt:t};break;case l.SourceGroupSubmittedAttemptErrorCode:n={hasEnrolledGroupSubmittedAttempt:t};break;case l.SourceGroupGradeErrorCode:n={hasSourceEnrollmentGroupGrades:t};break;case l.TargetGroupGradeErrorCode:n={hasTargetEnrollmentGroupGrades:t}}this.setState(n)},this.renderWarning=e=>{let{isOrganization:t,t:n,analyticsId:i}=this.props;return c.createElement("div",{key:e.code},!e.state&&c.createElement(x.Notification,{type:x.NotificationType.Failure,message:n((0,et.qq)(`groupWorkspace.selfEnroll.${e.code}`,e.isDifferentInOrg&&t)),analyticsId:`${i}.${e.code}.warning.close.button`,onClose:()=>this.hideOrDisplayWarning(e.code,!0),disableAutoDismiss:!0}))},this.renderWarnings=()=>{let e=[{code:l.GroupEnrollmentExpiredErrorCode,state:this.state.enrollmentExpired,isDifferentInOrg:!0},{code:l.GroupIsFullErrorCode,state:this.state.groupFull},{code:l.SourceGroupSubmittedAttemptErrorCode,state:this.state.hasEnrolledGroupSubmittedAttempt},{code:l.TargetGroupSubmittedAttemptErrorCode,state:this.state.hasSubmittedGroupAttempt},{code:l.SourceGroupGradeErrorCode,state:this.state.hasSourceEnrollmentGroupGrades},{code:l.TargetGroupGradeErrorCode,state:this.state.hasTargetEnrollmentGroupGrades}];return e.map(e=>this.renderWarning(e))},this.state={groupFull:!0,enrollmentExpired:!0,hasSubmittedGroupAttempt:!0,hasEnrolledGroupSubmittedAttempt:!0,hasSourceEnrollmentGroupGrades:!0,hasTargetEnrollmentGroupGrades:!0}}componentDidMount(){let{courseId:e,onLoadGroupSets:t,onLoadGroups:n,onGetCourseContext:i}=this.props;t(e),n(e),i(e)}getGroupSetCount(){return this.getGroupSetsToRender().length}getGroupsCount(){return(this.props.groupSets||[]).reduce((e,{assignedGroups:t=[]})=>e+t.length,0)}renderLoadingIndicator(){return c.createElement("div",{className:"spinner-container"},c.createElement(x.Spinner,{size:x.SpinnerSize.xLarge}))}renderGroupSets(){let{analyticsId:e,userId:t,t:n,onGroupJoined:i,courseId:s,UltraWindowSize:r,isOrganization:o}=this.props,a=this.getGroupSetCount();return 0===a?c.createElement(J,{imageSrc:"./static/images/ftue/empty-course-group.svg",title:n((0,et.qq)("groupWorkspace.selfEnroll.emptyState.title",o)),caption:n((0,et.qq)("groupWorkspace.selfEnroll.emptyState.caption",o))}):r.isSmallBreakpoint()?c.createElement(ew,{groupSetList:this.getGroupSetsToRender(),analyticsId:e,userId:t,courseId:s,onGroupJoined:i,hideOrDisplayWarning:this.hideOrDisplayWarning}):c.createElement(eT,{groupSetList:this.getGroupSetsToRender(),analyticsId:e,userId:t,courseId:s,onGroupJoined:i,hideOrDisplayWarning:this.hideOrDisplayWarning,isOrganization:o})}getNonEmptyGroupSets(){return(this.props.groupSets||[]).filter(({groupCount:e,assignedGroups:t})=>e&&t&&t.length)}getGroupSetsToRender(){return Array.from(this.getNonEmptyGroupSets()).sort((e,t)=>(function(e,t){let n=eb(e),i=eb(t);return n&&!i?-1:i&&!n?1:0})(e,t)||function(e,t){if(eb(e)&&eb(t)){let n=eg()(),i=ev(n,e),s=ev(n,t);if(i&&!s)return -1;if(s&&!i)return 1}return 0}(e,t)||function(e,t){if(eb(e)&&eb(t)){let n=ef(e),i=ef(t);return n&&!i?-1:i&&!n?1:eg()(ef(e)).diff(eg()(ef(t)))}return 0}(e,t)||function(e,t){let[n]=eC(e.id),[i]=eC(t.id);return i-n}(e,t))}render(){let{t:e,isLoading:t}=this.props;return c.createElement("div",{className:"page-group-set course-group-self-enroll-layer"},c.createElement("div",{className:"panel-wrap"},c.createElement("header",{className:"panel-header simple-header"},c.createElement("div",{className:"panel-titles-container"},this.renderContentTitle(),this.renderContentGroupTitle())),c.createElement("div",{className:"guidance-wrapper"},c.createElement("span",{className:"set-group-count"},e("course.groupWorkspace.guidance.groupAndGroupSetCount.plural",{groupSetCount:this.getGroupSetCount(),groupCount:this.getGroupsCount()}))),c.createElement("div",{className:"panel-content"},c.createElement("div",{className:"row collapse"},this.renderWarnings(),t?this.renderLoadingIndicator():this.renderGroupSets()))))}}var eD=(0,p.$j)((e,t)=>{let n=k.OgF.groupSet.getRenderedGroupSets(e,t.courseId);return{groupSets:n,isLoading:k.Ys.groupWorkspace.isLoading(e)||k.Ys.group.isLoading(e),courseMemberCount:k.Ys.course.getCourseStudentCount(e,t.courseId),isOrganization:!!k.Ys.course.getCourseById(e,t.courseId).isOrganization}},e=>(0,w.DE)({onLoadGroupSets:k.Nwg.groupWorkspace.loadGroupSets,onLoadGroups:k.Nwg.group.loadGroupsByCourse,onGetCourseContext:k.Nwg.course.fetchCourseStudentCount},e))((0,x.windowResizingResponsiveComponentWrapper)((0,v.H)(eP))),eG=n(210653),eR=n(175644);let eB=(0,$.makeStyles)(e=>(0,$.createStyles)({banner:{padding:"12px 30px"}}));var eL=()=>{let[e,t]=c.useState(!0),n=eB(),i=(0,D.q)();return e?(()=>{let e=c.createElement(eR.l,null),s=i("course.groupWorkspace.movingMembersBanner.closeText"),r=i("course.groupWorkspace.movingMembersBanner.bannerMessage");return c.createElement(eG.m,{severity:"warning",icon:e,onClose:()=>t(!1),closeText:s,className:n.banner},c.createElement("span",{className:"js-banner-contents"},r))})():null};let eN=(0,$.makeStyles)(e=>({peekPanel:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto"},peekPanelHeader:{"& .ms-Panel-subTitle, .ms-Panel-headerText":{paddingLeft:"16px",[e.breakpoints.up("xl")]:{paddingLeft:"30px"}}},hideHeader:{display:"none"},peekPanelBody:{padding:"30px",position:"relative",marginBottom:"48px"},peekPanelTabsContainer:{padding:"0 30px",position:"relative",marginBottom:"48px"},importPeekPanelTabsContainer:{padding:"0 30px",position:"relative",marginBottom:"68px"},peekPanelFooter:{position:"absolute",bottom:0,left:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}},peekPanelTabs:{borderBottom:`1px solid ${e.palette.border.main}`},tabButton:{minWidth:"50%"},tabPanelBody:{marginTop:"24px"}})),eO=(0,$.makeStyles)(e=>({helpContainer:{display:"flex"},uploadFileText:{flex:1,fontWeight:e.typography.fontWeightSemiBold},fileIcon:{marginRight:"5px"},fileListContainer:{display:"flex",flexDirection:"row",marginTop:"15px",height:"50px",alignItems:"center",backgroundColor:e.palette.background.b2,padding:"5px"},trashIcon:{marginLeft:"5px"},fileName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"auto",flex:1}})),eM=e=>{let{description:t,analyticsId:n,helpLink:i,templateLink:s,templateText:r,validFileFormats:o}=e,{file:a,onFileUpload:l,onRemoveFile:d,onFileUploadError:u}=e,p=(0,D.q)(),m=eO();return c.createElement(c.Fragment,null,c.createElement("p",null,t),c.createElement("div",{className:m.helpContainer},c.createElement("span",{className:m.uploadFileText},p("course.groupWorkspace.importGroupSet.uploadFile")),c.createElement(G.AnalyticsLink,{analyticsId:`${n}.help.link`,href:i,target:"_blank"},p("global.help"))),c.createElement(_.p0,{analyticsId:`${n}.file-upload`,validFormats:o,onFileUpload:l,onFileUploadError:u}),c.createElement("div",null,c.createElement(G.AnalyticsLink,{analyticsId:`${n}.template.link`,href:s},r)),a&&c.createElement("div",{className:(0,B.Z)("js-file-container",m.fileListContainer)},c.createElement(S.Reports,{className:m.fileIcon}),c.createElement("span",{className:m.fileName},a.fileName),c.createElement(G.AnalyticsIconButton,{analyticsId:`${n}.trash.icon`,onClick:d,className:m.trashIcon,"aria-label":p("global.delete")},c.createElement(S.Trash,null))))},e$=(e,t,n=K.raB.Groups)=>{let i=(0,M.Lx)(),[s,r]=(0,c.useState)(!0),[o,a]=(0,c.useState)(),l=(0,c.useCallback)(()=>{I.Nd.leavePeekState()},[]),d=(0,c.useCallback)(()=>{if(r(!0),(null==o?void 0:o.fileName)&&(null==o?void 0:o.fileLocation)){let s={fileName:o.fileName,fileLocation:o.fileLocation,scope:n};i(t?k.Nwg.groupSetImport.importGroupSet(e,s):k.Nwg.groupMembersImport.importGroupMembers(e,s))}l()},[e,o,n,t,l,i]);return{isPrimaryButtonDisabled:s,file:o,dismissPanel:l,onImportClick:d,onFileUpload:e=>{a(e),r(!1)},onFileUploadError:n=>{console.error(n.message),i(t?k.Nwg.groupSetImport.setFileUploadGroupSetError(e,n):k.Nwg.groupMembersImport.setFileUploadGroupMembersError(e,n)),l()},onRemoveFile:()=>{a(void 0),r(!0)}}};var eH=n(776517);let eF=[".csv"],eU="course.groups.import-group-set",eV=e=>{let{courseId:t,courseName:n}=e,i=(0,D.q)(),s=eN(),r=(0,M.gH)("course.","organization."),{isPrimaryButtonDisabled:o,file:a,dismissPanel:l,onImportClick:u,onFileUpload:p,onFileUploadError:m,onRemoveFile:h}=e$(t,!0);return(0,c.useEffect)(()=>{let e={type:eH.Cs.ImportGroupSetPanelOpened,status:eH.rJ.Success,pageTitle:i("course.groupWorkspace.importGroupSet.pageTitle")};(0,eH.Db)(e)},[i]),d().createElement("div",{id:"import-group-set-panel"},d().createElement("div",{className:s.peekPanel},d().createElement("header",{className:(0,B.Z)(s.peekPanelHeader,(0,eH.Dd)()&&s.hideHeader)},d().createElement(x.BbPanelHeader,{smallHeaderTitle:n,type:x.BbPanelType.peek,analyticsId:`${eU}.header`,title:i("course.groupWorkspace.importGroupSet.pageTitle"),navMenuAriaLabel:i("global.navigationMenu")})),d().createElement("div",{className:s.peekPanelBody},d().createElement(eM,{analyticsId:eU,description:i(r("course.groupWorkspace.importGroupSet.description")),helpLink:i("course.groupWorkspace.importGroupSet.helpLink"),templateLink:(0,k.uIm)("/webapps/bb-group-mgmt-LEARN/help/ultra/sample_groups.csv"),templateText:i("course.groupWorkspace.importGroupSet.downloadGroupSetsTemplate"),onFileUpload:p,onRemoveFile:h,onFileUploadError:m,validFileFormats:eF,file:a}))),d().createElement("footer",{className:s.peekPanelFooter},d().createElement(x.BbPanelFooter,{primaryButtonProps:{onClick:u,disabled:o,text:i("global.import"),id:"js-button-import"},secondaryButtonProps:{onClick:l,text:i("global.cancel")},analyticsId:`${eU}.footer`})))};var e_=n(146115);let eq=[".csv"],ez="course.groups.import-group-members",eW=e=>{let{courseId:t,courseName:n}=e,i=eN(),s=(0,D.q)(),[r,o]=(0,c.useState)("create"),a=(0,M.gH)("course.","organization."),{isPrimaryButtonDisabled:l,file:u,dismissPanel:p,onImportClick:m,onFileUpload:h,onFileUploadError:g,onRemoveFile:f}=e$(t,!1,"create"===r?K.raB.Groups:K.raB.Members),b="create"===r?"/webapps/bb-group-mgmt-LEARN/help/ultra/sample_groups.csv":"/webapps/bb-group-mgmt-LEARN/help/ultra/sample_groupmembers.csv";return(0,c.useEffect)(()=>{let e={type:eH.Cs.ImportGroupMembersPanelOpened,status:eH.rJ.Success,pageTitle:s("course.content.courseGroup.importGroups")};(0,eH.Db)(e)},[s]),d().createElement("div",{id:"import-group-members-panel"},d().createElement("div",{className:i.peekPanel},d().createElement("header",{className:(0,B.Z)(i.peekPanelHeader,(0,eH.Dd)()&&i.hideHeader)},d().createElement(x.BbPanelHeader,{smallHeaderTitle:n,type:x.BbPanelType.peek,analyticsId:`${ez}.header`,title:s("course.content.courseGroup.importGroups"),navMenuAriaLabel:s("global.navigationMenu")})),d().createElement("div",{className:i.importPeekPanelTabsContainer},d().createElement(G.AnalyticsTabs,{value:r,className:i.peekPanelTabs,analyticsId:`${ez}.tabs`,onChange:()=>{u&&f()}},d().createElement(G.AnalyticsTab,{label:s("course.groupWorkspace.importGroupMembers.createGroupsTab"),value:"create",className:i.tabButton,analyticsId:`${ez}.tabs.create`,onClick:()=>o("create"),id:"id-create-groups-tab","aria-controls":"id-create-groups-tab-panel"}),d().createElement(G.AnalyticsTab,{label:s("course.groupWorkspace.importGroupMembers.assignMembersTab"),value:"assign",className:i.tabButton,analyticsId:`${ez}.tabs.assign`,onClick:()=>o("assign"),id:"id-assign-members-tab","aria-controls":"id-assign-members-tab-panel"})),d().createElement(e_.x,{panelId:"create"===r?"id-create-groups-tab-panel":"id-assign-members-tab-panel",ariaLabelledby:"create"===r?"id-create-groups-tab":"id-assign-members-tab"},d().createElement("div",{className:i.tabPanelBody},"create"===r?d().createElement(eM,{analyticsId:`${ez}.createTab`,description:s(a("course.groupWorkspace.importGroupSet.description")),helpLink:s("course.groupWorkspace.importGroupSet.helpLink"),templateLink:(0,k.uIm)(b),templateText:s("course.groupWorkspace.importGroupMembers.downloadGroupsTemplate"),onFileUpload:h,onRemoveFile:f,onFileUploadError:g,validFileFormats:eq,file:u}):d().createElement(eM,{analyticsId:`${ez}.assignTab`,description:s(a("course.groupWorkspace.importGroupMembers.assignDescription")),helpLink:s("course.groupWorkspace.importGroupSet.helpLink"),templateLink:(0,k.uIm)(b),templateText:s("course.groupWorkspace.importGroupMembers.downloadMembersTemplate"),onFileUpload:h,onRemoveFile:f,onFileUploadError:g,validFileFormats:eq,file:u}))))),d().createElement("div",{className:i.peekPanelFooter},d().createElement(x.BbPanelFooter,{primaryButtonProps:{onClick:m,disabled:l,text:s("global.import"),id:"js-button-import"},secondaryButtonProps:{onClick:p,text:s("global.cancel")},analyticsId:`${ez}.footer`})))},ej=(0,$.makeStyles)(e=>({radioGroup:{padding:"24px 0",borderBottom:`1px solid ${e.palette.border.main}`},fileContainer:{padding:"24px 0",borderBottom:`1px solid ${e.palette.border.main}`,"& svg":{cursor:"pointer",marginRight:"10px"}},trashIconButton:{alignItems:"start"},fileLink:{display:"flex",flex:1,color:e.palette.text.primary,textDecoration:"none","&:hover,&:focus":{color:e.palette.text.primary,textDecoration:"none"}},fileDetail:{display:"flex","& span":{width:"200px",overflow:"hidden",textOverflow:"ellipsis",textAlign:"left",[e.breakpoints.up("sm")]:{width:"250px"}},"& p":{textAlign:"left"}},noFileText:{padding:"24px 0",textAlign:"center"},pagination:{margin:"12px 0"},paginationFooter:{position:"absolute",bottom:0,left:0,right:0,backgroundColor:`${e.palette.background.default}`}})),eZ=e=>{let{analyticsId:t,setSelectedFieldsToInclude:n,setIsPrimaryButtonDisabled:i}=e,s=(0,D.q)(),r=ej(),[o,a]=(0,c.useState)({groupSetOnly:!1,membersOnly:!1}),l=()=>{o.groupSetOnly&&o.membersOnly?(i(!1),n(K.raB.GroupsAndMembers)):o.groupSetOnly?(i(!1),n(K.raB.Groups)):o.membersOnly?(i(!1),n(K.raB.Members)):i(!0)};return(0,c.useEffect)(()=>{l()},[o]),d().createElement(d().Fragment,null,d().createElement("div",{className:r.radioGroup},d().createElement($.CheckboxGroup,{id:"id_fields_to_include",legendVariant:"h2",legendText:s("course.groupWorkspace.exportGroupSet.fieldsToInclude"),name:"Fields_To_Include"},d().createElement(G.AnalyticsFormControlLabel,{analyticsId:`${t}.label.group-only`,htmlFor:"group_set_only_id",value:K.raB.Groups,control:d().createElement(G.AnalyticsCheckbox,{analyticsId:`${t}.checkbox.group-only`,onChange:(e,t)=>{a(e=>({...e,groupSetOnly:t}))},id:"group_set_only_id",name:"groupSetOnly"}),label:s("course.groupWorkspace.exportGroupSet.groupSetOnly")}),d().createElement(G.AnalyticsFormControlLabel,{analyticsId:`${t}.label.members-only`,htmlFor:"members_only_id",value:K.raB.Members,control:d().createElement(G.AnalyticsCheckbox,{analyticsId:`${t}.checkbox.members-only`,onChange:(e,t)=>{a(e=>({...e,membersOnly:t}))},id:"members_only_id",name:"membersOnly"}),label:s("course.groupWorkspace.exportGroupSet.membersOnly")}))),d().createElement("div",{className:r.radioGroup},d().createElement(G.AnalyticsRadioGroup,{analyticsId:t,id:"id_file_type",legendVariant:"h2",legendText:s("course.groupWorkspace.exportGroupSet.fileType"),name:"File_Type",value:"CSV"},d().createElement(G.AnalyticsFormControlLabel,{analyticsId:`${t}.label.csv`,htmlFor:"csv_id",value:"csv",control:d().createElement(G.AnalyticsRadio,{analyticsId:`${t}.radio.csv`,checked:!0,id:"csv_id",readOnly:!0}),label:s("course.groupWorkspace.exportGroupSet.csv")}))))};var eK=n(579633),eX=n(755755),eY=n(238136);let eQ=e=>{let{analyticsId:t,file:n,files:i,courseId:s,groupSetId:r,page:o,setPage:a,refreshFileList:l}=e,d=ej(),{translate:u,formatDate:p}=(0,eX.h)(),m=(0,M.Lx)();return c.createElement(G.AnalyticsListItem,{analyticsId:`${t}.listItem`,key:n.fileName,className:d.fileContainer},c.createElement(G.AnalyticsLink,{analyticsId:`${t}.download-file`,href:n.downloadUrl,className:d.fileLink},c.createElement(eY.DownloadFile,null),c.createElement("span",{className:d.fileDetail},c.createElement(G.AnalyticsListItemText,{analyticsId:`${t}.listItem`,primary:n.fileName,secondary:u("course.groupWorkspace.exportGroupSet.createdDate",{date:p(n.dateCreated,eK.ILocaleDateFormat.Short)})}))),c.createElement(G.AnalyticsIconButton,{analyticsId:`${t}.delete.icon`,onClick:()=>{try{m(k.Nwg.groupSetExport.deleteFile(s,r,{fileName:n.fileName})).then(()=>{1===i.length&&0!==o?a(e=>e-1):l()})}catch(e){console.error(e)}},className:d.trashIconButton,"aria-label":u("components.directives.file-viewer.aria.deleteFile",{fileName:n.fileName})},c.createElement(E.Trash,null)))},eJ=[{field:"fileName",direction:K.SrV.Descending}],e0=e=>{var t;let{analyticsId:n,courseId:i,groupSetId:s,page:r,setPage:o,pageSize:a}=e,l=ej(),u=(0,D.q)(),p=(0,M.Lx)(),m=(0,M.pJ)(e=>k.Ys.groupSetExport.getExportGroupSet(e,i)),h=null===(t=null==m?void 0:m.byGroupSetId[s])||void 0===t?void 0:t.files,g=()=>{p(k.Nwg.groupSetExport.getExportedFiles(i,s,{paging:{limit:a,offset:r*a},sort:eJ}))};return(0,c.useEffect)(()=>{g()},[r,i,s,eJ]),d().createElement(d().Fragment,null,(null==h?void 0:h.length)>0?d().createElement(G.AnalyticsList,{analyticsId:`${n}.list`},h.map(e=>d().createElement(eQ,{key:e.fileName,file:e,analyticsId:n,files:h,courseId:i,groupSetId:s,page:r,setPage:o,refreshFileList:g}))):d().createElement("div",{className:l.noFileText},d().createElement("span",null,u("course.groupWorkspace.exportGroupSet.noFilesText"))))},e1="course.groups.export-group-set",e2=e=>{var t,n,i,s;let{courseId:r,groupSetId:o,courseName:a,isGroupSetDetailView:l}=e,u=(0,D.q)(),p=eN(),m=ej(),h=(0,M.Lx)(),[g,f]=(0,c.useState)(!0),[b,v]=(0,c.useState)("create"),[y,C]=(0,c.useState)(K.raB.GroupsAndMembers),[S,E]=(0,c.useState)(0),w=u("create"===b?"course.groupWorkspace.exportGroupSet.exportFromGroups":"course.groupWorkspace.exportGroupSet.exportFile"),A=(0,M.pJ)(e=>k.Ys.groupSetExport.getExportGroupSet(e,r)),T=null!==(n=null===(t=null==A?void 0:A.byGroupSetId[o])||void 0===t?void 0:t.paging)&&void 0!==n&&!!n.count&&A.byGroupSetId[o].paging.count>7,P=(null===(s=null===(i=null==A?void 0:A.byGroupSetId[o])||void 0===i?void 0:i.paging)||void 0===s?void 0:s.count)?A.byGroupSetId[o].paging.count/7:1;(0,c.useEffect)(()=>{let e={type:eH.Cs.ExportGroupSetPanelOpened,status:eH.rJ.Success,pageTitle:w};(0,eH.Db)(e)},[w]);let R=(0,c.useCallback)(()=>{I.Nd.leavePeekState()},[]),L=(0,c.useCallback)(()=>{f(!0),h(k.Nwg.groupSetExport.exportGroupSet(r,o,{scope:y},l?"GROUP_SET_DETAIL_VIEW":"GROUPS_LIST_VIEW")),R()},[y,r,o,l,R,h]);return d().createElement("div",{id:"export-group-set-panel"},d().createElement("div",{className:p.peekPanel},d().createElement("header",{className:(0,B.Z)(p.peekPanelHeader,(0,eH.Dd)()&&p.hideHeader)},d().createElement(x.BbPanelHeader,{smallHeaderTitle:a,type:x.BbPanelType.peek,analyticsId:`${e1}.header`,title:w,navMenuAriaLabel:u("global.navigationMenu")})),d().createElement("div",{className:p.peekPanelTabsContainer},d().createElement(G.AnalyticsTabs,{value:b,className:p.peekPanelTabs,analyticsId:`${e1}.tabs`},d().createElement(G.AnalyticsTab,{label:u("course.groupWorkspace.exportGroupSet.createTab"),value:"create",className:p.tabButton,analyticsId:`${e1}.tabs.create`,onClick:()=>v("create"),"aria-controls":"id-create-tab-panel",id:"id-create-tab"}),d().createElement(G.AnalyticsTab,{label:u("global.export"),value:"export",className:p.tabButton,analyticsId:`${e1}.tabs.export`,onClick:()=>v("export"),"aria-controls":"id-export-tab-panel",id:"id-export-tab"})),d().createElement(e_.x,{panelId:"create"===b?"id-create-tab-panel":"id-export-tab-panel",ariaLabelledby:"create"===b?"id-create-tab":"id-export-tab"},"create"===b?d().createElement(eZ,{analyticsId:`${e1}.createTab`,setSelectedFieldsToInclude:C,setIsPrimaryButtonDisabled:f}):d().createElement(e0,{analyticsId:`${e1}.fileList`,courseId:r,groupSetId:o,page:S,setPage:E,pageSize:7})))),"create"===b&&d().createElement("footer",{className:p.peekPanelFooter},d().createElement(x.BbPanelFooter,{primaryButtonProps:{onClick:L,disabled:g,text:u("course.groupWorkspace.exportGroupSet.exportFile"),id:"js-button-export"},secondaryButtonProps:{onClick:R,text:u("global.cancel")},analyticsId:`${e1}.footer`})),"export"===b&&T&&d().createElement("footer",{className:m.paginationFooter},d().createElement(_.Vd,{className:m.pagination,analyticsId:`${e1}.fileList`,page:S,numberOfPages:P,onPageChange:e=>{E(e)}})))},e3=(0,$.makeStyles)(e=>(0,$.createStyles)({groupMembersListPanel:{position:"absolute",top:0,left:0,right:0,bottom:0},panel:{display:"flex",flexDirection:"column",alignItems:"stretch",height:"100vh"},header:{flex:"0 1 auto","& .ms-Panel-titles-container":{[e.breakpoints.up("sm")]:{position:"relative",left:e.spacing(3)}}},content:{flex:"1 1 auto",overflowY:"auto",padding:e.spacing(2),[e.breakpoints.up("sm")]:{padding:e.spacing(3)}},footer:{backgroundColor:`${e.palette.background.default}`},groupMemberListItem:{borderBottom:`1px solid ${e.palette.border.main}`,borderRight:"0px",borderLeft:"0px",borderTop:"0px"},spinnerContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},pagination:{margin:"12px 0"},userNameStyles:{fontWeight:e.typography.fontWeightBold},membersSearchBoxContainer:{borderBottom:`1px solid ${e.palette.border.main}`,padding:"12px 0"},membersSearchBox:{[e.breakpoints.up("sm")]:{margin:0,width:"100%"}},noResultsMessage:{marginTop:"5px"}})),e9=e=>{let{memberships:t,users:n,courseId:i}=e,s=(0,D.q)(),r=e3(),o=(0,M.gH)("global.course","global.organization"),a=(0,M.pJ)(e=>k.Ys.courseMembership.getMembershipPermissions(e,i)),l=t.map(e=>{var t;let{role:i,userId:l}=e;if(!l)return null;let c=n[l],u=k.LPT.hasAccommodations(e,a);return d().createElement(G.AnalyticsListItem,{key:l,className:r.groupMemberListItem,analyticsId:"courseCore.components.courseInstructors.listItem"},d().createElement(G.AnalyticsListItemAvatar,{analyticsId:"courseCore.components.courseInstructors.listItemAvatar"},d().createElement(G.AnalyticsAvatar,{size:"medium",src:null===(t=c.avatar)||void 0===t?void 0:t.permanentUrl,alt:s("courseCore.components.courseInstructors.avatarAltText",{user:c})})),d().createElement(G.AnalyticsListItemText,{analyticsId:"courseCore.components.courseInstructors.listItemText",primary:d().createElement(et.K6,{ariaHidden:!0,format:eK.ILocaleUsernameFormat.Short,user:c,subtext:s(o(`global.course.role.${i}`)),showPronunciation:!0,showPronouns:!0,showAccommodation:u,userNameStyles:r.userNameStyles})}))});return d().createElement(G.AnalyticsList,{analyticsId:"courseCore.components.courseInstructors.groupMembers.list"},l)};var e4=n(715729);let e7=(e,t)=>(0,e4.Uy)(e,e=>{switch(e.paging||(e.paging={}),t.type){case"change.page":e.paging.offset=t.offset;break;case"search.text":e.filter={...e.filter,searchString:t.searchString},e.paging.offset=0}}),e5=e=>{var t;let{viewPaging:n,page:i,onPageChange:s,analyticsId:r,pageSize:o}=e,a=n?Math.max(1,Math.ceil((null!==(t=n.count)&&void 0!==t?t:1)/o)):1,l=(0,$.useMediaQuery)(e=>e.breakpoints.down("xs")),c=e3();return d().createElement("div",{className:c.footer},d().createElement(_.Vd,{className:c.pagination,analyticsId:r,page:i,numberOfPages:a,onPageChange:s,compact:l}))},e6=e=>{let{onSearchBoxTextChange:t,analyticsId:n,membershipsCount:i,isLoading:s}=e,r=(0,D.q)(),o=e3(),[a,l]=(0,c.useState)(),u=e=>{l(e),t(e)};return d().createElement("div",{className:o.membersSearchBoxContainer},d().createElement(_._W,{"aria-describedby":"noResultsMessage",inputId:"group-members-list-search-input",analyticsId:n,className:o.membersSearchBox,label:r("course.groupWorkspace.groupMembers.search"),onChange:u,onClear:()=>{u("")},value:a}),0===i&&!s&&d().createElement(G.AnalyticsTypography,{variant:"body1",id:"noResultsMessage",role:"alert",className:o.noResultsMessage},r("course.groupWorkspace.groupMembers.noSearchResult")),!!i&&!s&&d().createElement(G.AnalyticsOffScreenAnnouncement,{type:"polite",role:"status",changeTrigger:1,message:s?null:(null==a?void 0:a.length)===0?r("course.groupWorkspace.groupMembers.searchCleared",{oldResultsCount:i}):0===i?r("course.groupWorkspace.groupMembers.noSearchResult"):i&&i>0?r("course.groupWorkspace.groupMembers.resultsFound",{resultsCount:i}):null,analyticsId:n}))};var e8=n(465139),te=n(815532);let tt="course.groups.group-members-list",tn=e=>{var t,n,i;let{courseId:s}=e,r=(0,M.pJ)(e=>k.Ys.app.getLocation(e).queryParams.groupId),o=(0,M.pJ)(e=>k.Ys.app.getLocation(e).queryParams.contentId),a=!!o,{group:l,groupSet:u,loadingStatus:p}=(0,M.Te)(s,r,a);if((a&&!(null==l?void 0:l.id)||!a&&!(null==l?void 0:l.groupSetId))&&p===te.S.Loaded)throw I.Nd.leavePeekState(),Error(`Group ${r} not found.`);let m=null===(t=(0,M.pJ)(e=>k.Ys.content.getContentById(e,o)))||void 0===t?void 0:t.title,h=a?m:null==u?void 0:u.title,g={courseId:s,filter:{searchString:"",roleBucket:[K.O8v.Taking],groupId:[r]},paging:{limit:20,offset:0},sort:[{field:K.PJt.GivenName,direction:K.SrV.Ascending},{field:K.PJt.FamilyName,direction:K.SrV.Ascending}]},[f,b]=(0,c.useReducer)(e7,g),{memberships:v,users:y,view:C}=(0,M.d$)(f),S=e3(),E=(0,D.q)(),w=(0,e8.y1)(e=>{b({type:"search.text",searchString:e})},500);return d().createElement("div",{className:S.groupMembersListPanel},d().createElement("div",{className:S.panel},d().createElement("header",{className:S.header},d().createElement(x.BbPanelHeader,{smallHeaderTitle:h,type:x.BbPanelType.peek,analyticsId:`${tt}.header`,title:null==l?void 0:l.title,navMenuAriaLabel:E("global.navigationMenu")})),d().createElement("div",{className:S.content},d().createElement(e6,{onSearchBoxTextChange:w,analyticsId:tt,membershipsCount:v.length,isLoading:!C||C.isLoading}),(!C||C.isLoading)&&d().createElement("div",{className:S.spinnerContainer},d().createElement(G.AnalyticsCircularProgress,{ariaLabel:E("global.loading"),size:"medium"})),d().createElement(e9,{memberships:v,users:y,courseId:s})),d().createElement(e5,{viewPaging:null==C?void 0:C.paging,page:(null!==(i=null===(n=f.paging)||void 0===n?void 0:n.offset)&&void 0!==i?i:0)/20,onPageChange:e=>{b({type:"change.page",offset:20*e})},analyticsId:tt,pageSize:20})))},ti=e=>{let{tooltipTitle:t,tooltipAnalyticsId:n}=e;return c.createElement(G.AnalyticsTooltip,{placement:"top",title:t,"aria-label":t,analyticsId:n},c.createElement(E.Upload,null))},ts=e=>{let{tooltipTitle:t,tooltipAnalyticsId:n}=e;return c.createElement(G.AnalyticsTooltip,{placement:"top",title:t,"aria-label":t,analyticsId:n},c.createElement(E.Download,null))},tr=(e,t,n,i,s,r)=>{let o=n;null==n&&"undefined"!=typeof window&&window.location.search.match("setLang=")&&(o=window.location.search.match(/setLang=([^$&]+)/)[1]),u.render(c.createElement(G.AnalyticsJssThemeProvider,{isRtl:r},c.createElement(m.g,{locale:o,babelfishInstance:i,babelfishFormatInstance:s,bundlesToLoad:["group-workspace/locales/[locale]/group-workspace.json"],isRtl:r},c.createElement("div",null,e))),t)},to=(e,t,n)=>{tr(c.createElement(p.zt,{store:t},c.createElement(em,{courseId:n.courseId,contentId:n.contentId,contentName:n.contentName,userId:n.userId,root:e,onGroupJoined:n.onGroupJoined,analyticsId:"selfEnrollList"})),e,n.locale,n.babelfishInstance,n.babelfishFormatInstance,n.isRtl)},ta=(e,t,n)=>{tr(c.createElement(p.zt,{store:t},c.createElement(eD,{courseId:n.courseId,contentName:n.contentName,userId:n.userId,root:e,onGroupJoined:n.onGroupJoined,analyticsId:"selfEnrollList"})),e,n.locale,n.babelfishInstance,n.babelfishFormatInstance,n.isRtl)},tl=e=>{u.unmountComponentAtNode(e)};var tc={renderGroupSetListPanelComponent:(e,t,n,i,s,r,o,a,l)=>{tr(c.createElement(p.zt,{store:t},c.createElement(ei,{courseId:o,root:e,openGroupSetDetailPanel:l,featuresConfig:a,analyticsId:"groupSetList"})),e,n,i,s,r)},renderContentGroupSelfEnrollmentPanelComponent:to,renderCourseGroupSelfEnrollmentPanelComponent:ta,destroyComponent:tl}},352685:function(e,t,n){"use strict";n.d(t,{Lh:function(){return o},YW:function(){return m},fg:function(){return d},kA:function(){return l},m7:function(){return p},nI:function(){return c},pL:function(){return u},qz:function(){return s}});var i,s,r=n(276635);let o="memberships.user,studentCount,signUpSheet,hasSubmittedGroupAttempt,hasGrades",a=()=>new Date;function l(e){return"item-sub-row-"+e}function c(e){if(e){let t=document.activeElement;t.blur(),e.focus()}}function d(e){let t=!!e&&r.some(e,["isSelfEnrolledAllowed",!0]),n=a();if(t){let t=e.map(e=>r.get(e,"signUpSheet.enrollmentStartDate",null)).reduce((e,t)=>{let n=e?new Date(e):null,i=t?new Date(t):null;return i&&(!n||n>i)?i:n},null),i=e.map(e=>r.get(e,"signUpSheet.enrollmentEndDate",null)).reduce((e,t)=>{let n=e?new Date(e):null,i=t?new Date(t):null;return i&&(!n||n<i)?i:n},null),o=s.OPEN;return t&&n<t?o=s.BEFORE:i&&n>i&&(o=s.AFTER),{now:n,firstStartDate:t,lastEndDate:i,enrollmentDateState:o,isSelfEnrollment:!0}}return{now:n,isSelfEnrollment:!1}}async function u(e,t,n){let i=d(e);if(i.isSelfEnrollment){let e=null;return"Before"===i.enrollmentDateState?e=await n.datetime.formatRelativeTimestamp(i.firstStartDate,t):"Open"===i.enrollmentDateState&&i.lastEndDate&&(e=await n.datetime.formatRelativeTimestamp(i.lastEndDate,t)),{relativeDate:e,isEnrollmentDateImportant:!!(i.lastEndDate&&"Open"===i.enrollmentDateState&&i.lastEndDate.getTime()-i.now.getTime()<2592e5),enrollmentDateState:i.enrollmentDateState,isSelfEnrollment:!0}}return{isSelfEnrollment:!1}}function p(e){return r.sortBy(e,"title")}function m(e){return e&&e[0]&&e[0].groupSetId?e[0].groupSetId:null}document.createElement("textarea"),(i=s||(s={})).OPEN="Open",i.BEFORE="Before",i.AFTER="After"},785268:function(e,t,n){"use strict";n.d(t,{n:function(){return y},I:function(){return C}});var i=n(202784),s=n(394167),r=n(958299),o=n(845627),a=n(906277),l=n(379614),c=n(16015),d=n(281699);let{fade:u}=d.colorManipulator,p=(0,d.makeStyles)(e=>(0,d.createStyles)({icon:{zIndex:1},animatedIconButton:{position:"relative","&:focus:before":{boxShadow:"none"},"&:before":{animation:"$pulsate infinite linear 1.25s",animationIterationCount:4,borderRadius:"50%",content:'""',display:"block",height:"32px",marginTop:"-16px",position:"absolute",top:"50%",width:"32px",left:"50%",marginLeft:"-16px"},"&:after":{animation:"$circle 1 linear 5s forwards",borderRadius:"50%",content:'""',display:"block",height:"24px",marginTop:"-12px",position:"absolute",top:"50%",width:"24px",zIndex:0,left:"50%",marginLeft:"-12px"}},"@keyframes pulsate":{"0%":{border:`4px solid ${u(e.palette.indicatorPrimary.main,.3)}`,transform:"scale(1, 1)"},"100%":{border:`4px solid ${u(e.palette.indicatorPrimary.main,0)}`,transform:"scale(1.4, 1.4)"}},"@keyframes circle":{"0%":{background:u(e.palette.indicatorPrimary.main,.3)},"90%":{background:u(e.palette.indicatorPrimary.main,.3)},"100%":{background:u(e.palette.indicatorPrimary.main,0)}}})),m=1,h=()=>{let e=m;return m+=1,e},g="guidance.featureAnnouncement",f=(e,t)=>{l.uS.stopQueue(),e(!0),t()},b=e=>{e(!1),l.uS.startQueue()},v="guidance-react_feature-announcement_",y=e=>{let{announcementTitle:t,content:n,componentKey:l,linkHref:d,linkText:u,buttonAriaLabel:m,doneButtonText:y,onCloseAnnouncement:C,closeLabel:S}=e,[E]=i.useState(h),I=`feature-announcement__icon-button__${E}`,w=p(),[A,k]=i.useState(!1),[x,T]=(0,c.c)(`${g}.${l}`);if(!x&&!A)return null;let P={id:`${v}${l}`,selector:`.${I}`,title:t,content:n};return d&&u&&(P.link=i.createElement(s.T,{analyticsId:`${g}.link`,href:d,target:"_blank"},u)),i.createElement("div",null,i.createElement(r.AnalyticsIconButton,{analyticsId:`${g}.icon-button`,"aria-label":m,className:(0,a.Z)(I,!A&&w.animatedIconButton),onClick:()=>f(k,T),onFocus:e=>e.stopPropagation()},i.createElement(o.v,{className:w.icon})),i.createElement(s.e,{analyticsId:`${g}.tour`,open:A,steps:[P],onClose:()=>{C&&C(),b(k)},showHighlight:!1,showBackdrop:!1,strings:{doneSingleText:y,closeLabel:S}}))},C=()=>{let e=document.querySelector(`*[id^="${v}"]`);return!!e}},397236:function(e,t,n){"use strict";n.d(t,{nh:function(){return u.n},Am:function(){return d},cS:function(){return p.c}});var i=n(202784),s=n(609582),r=n(379614);class o{constructor(e,t){this.shownStateChanged=e,this.shown=!1,this.viewed=!1,this.onShown=()=>{this.setShown(!0)},this.onHidden=e=>{this.setShown(!1),e||this.markViewed()},this.markViewed=()=>{this.viewed=!0},this.componentType="",this.componentKey=t}shouldShow(){return Promise.resolve(!this.viewed)}setShown(e){this.shown=e,this.shownStateChanged(e)}}let a=!1,l=()=>{a||(a=!0,(0,r.BT)({name:r.ZH,priority:r.lX}))};var c=(e,t,n)=>{l();let[s,r]=i.useState(!1),[a,c]=i.useState(()=>()=>{});return i.useEffect(()=>{let i=new o(r,n);return e.registerComponent(i),t.sendStart(),c(()=>()=>{r(!1),i.markViewed(),e.hideComponent(i.componentKey)}),()=>{e.deregisterComponent(i)}},[n,t,e]),[s,a]},d=e=>{let{componentKey:t}=e,[n,o]=c(r.uS,r._k,t);return n?i.createElement(s.TeachingBubble,{onDismiss:o,...e}):null},u=n(785268),p=n(16015)},16015:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var i=n(202784),s=n(951248),r=n(273386);let o=e=>{let t=(0,r.Lx)();(0,i.useEffect)(()=>{t(s.Nwg.userPreference.loadUserPreference({key:e}))},[e,t]);let n=(0,r.pJ)(e=>s.Ys.userPreference.isUserPreferenceLoading(e)),o=(0,r.pJ)(t=>{let n=s.Ys.userPreference.getUserPreferenceByKey(t,e);return n?Number.parseInt(n.value,10):0}),a=(0,i.useCallback)(()=>{t(s.Nwg.userPreference.persistUserPreference({key:e,value:(o+1).toString()}))},[e,o,t]);return[!o&&!n,a]}},379614:function(e,t,n){"use strict";n.d(t,{ZH:function(){return d},lX:function(){return c},Di:function(){return i},DO:function(){return o},_k:function(){return l},uS:function(){return a},BT:function(){return r}});let i=50,s={};function r(e){let t=e.priority||i;t<0&&(t=i),s[e.name]=t}class o{constructor(e,t,n,i,s,r,o,a){this.element=e,this.componentType=t,this.componentKey=n,this.manager=i,this.helper=s,this.connector=r,this.priority=o,this.isInitialHide=a,this.display=window.getComputedStyle(e,null).display,e.style.display="none",this.isShown=!1}get shown(){return this.isShown}set shown(e){this.isShown=e,this.shownChangedCallback&&this.shownChangedCallback(e)}onShownChanged(e){this.shownChangedCallback=e}registerToManager(){this.shown=!1,this.manager.registerComponent(this)}deregisterFromManager(){this.manager.deregisterComponent(this)}hide(){this.hideImpl(),this.manager.hideComponent(this.componentKey)}onShown(){this.element.style.display=this.display,this.shown=!0}onHidden(e){this.hideImpl(e)}hideImpl(e){this.shown=!1,e||this.helper.hide(this.componentKey)}showComponent(){this.connector.sendStart()}setShouldShow(e){this.shouldShowGuidance=e}shouldShow(){return this.shouldShowGuidance?this.shouldShowGuidance():Promise.resolve(!0)}}let a=new class{constructor(){this.components=[],this.guidanceTargets={},this.hasStartedShowing=!1,this.currentShownComponent=null,this.getFirstComponentToShowPromise=null}isComponentRegistered(e){return this.components.indexOf(e)>=0}registerComponent(e){if(this.components.length){var t;let n,r;if(this.isComponentRegistered(e))return;let o=this.components.length-1;for(;0>(t=this.components[o],(n=e.priority||s[e.componentType]||i)<0&&(n=i),(r=t.priority||s[t.componentType]||i)<0&&(r=i),n-r)&&!((o-=1)<0););this.components.splice(o+1,0,e)}else this.components.push(e);let n=this.hasStartedShowing&&!e.isInitialHide,r=this.currentShownComponent||this.getFirstComponentToShowPromise;n&&!r&&this.showGuidanceComponentAsync()}deregisterComponent(e){if(this.getFirstComponentToShowPromise){this.getFirstComponentToShowPromise.then(()=>this.deregisterComponent(e));return}if(!this.isComponentRegistered(e))return;let t=this.components.indexOf(e);this.components.splice(t,1),this.currentShownComponent&&this.currentShownComponent.componentKey===e.componentKey&&(this.currentShownComponent.onHidden(!0),this.onComponentHidden(this.currentShownComponent))}registerTarget(e){let t=this.guidanceTargets[e.componentKey]||[];if(this.guidanceTargets[e.componentKey]=t,(0===t.length||e.multiTargetSupport)&&t.push(e),this.hasStartedShowing&&this.currentShownComponent){let t=this.currentShownComponent.componentKey;e.componentKey===t&&e.onShown()}}deregisterTarget(e){this.guidanceTargets[e.componentKey]=null}startQueue(){this.hasStartedShowing||(this.hasStartedShowing=!0,this.showGuidanceComponentAsync())}stopQueue(){this.hasStartedShowing&&(this.hasStartedShowing=!1,this.currentShownComponent&&(this.currentShownComponent.onHidden(!0),this.hideTargetsForComponent(this.currentShownComponent),this.currentShownComponent=null))}hideComponent(e){this.getFirstComponentToShowPromise?this.getFirstComponentToShowPromise.then(()=>{this.hideComponent(e)}):this.currentShownComponent&&this.currentShownComponent.componentKey===e&&(this.currentShownComponent.onHidden(!1),this.onComponentHidden(this.currentShownComponent))}hideTargetsForComponent(e){let t=this.guidanceTargets[e.componentKey];t&&t.forEach(e=>{e.onHidden()})}showTargetsForComponent(e){let t=this.guidanceTargets[e.componentKey];t&&t.forEach(e=>{e.onShown()})}onComponentHidden(e){this.currentShownComponent===e&&(this.currentShownComponent=null,this.hideTargetsForComponent(e),this.showGuidanceComponentAsync())}showGuidanceComponentAsync(){0!==this.components.length&&(this.getFirstComponentToShowPromise=this.getFirstComponentToShowAsync(0).then(e=>(e&&this.hasStartedShowing&&(this.currentShownComponent=e,e.onShown(),this.showTargetsForComponent(e)),this.getFirstComponentToShowPromise=null,e)))}getFirstComponentToShowAsync(e){let t=this.components[e];return t.shouldShow().then(t=>t?this.components[e]:e<this.components.length-1?this.getFirstComponentToShowAsync(e+1):null)}},l=new class{constructor(e){this.guidanceManager=e,this.watchers=[],this.addWatcher=e=>{this.watchers.push(e),this.handleStateChange(e.started),e.onStateChanged(this.handleStateChange)},this.removeWatcher=e=>{let t=this.watchers.indexOf(e);-1!==t&&(e.onStateChanged(void 0),this.watchers.splice(t,1))},this.sendStart=()=>{this.handleStateChange(!0)},this.handleStateChange=e=>{if(!e){this.updateGuidanceState(e);return}this.updateGuidanceState(!this.watchers.some(e=>!e.started))},this.updateGuidanceState=e=>{e!==this.startState&&(this.startState=e,e?this.guidanceManager.startQueue():this.guidanceManager.stopQueue())}}}(a),c=35,d="guidance"},961702:function(e,t,n){"use strict";n.d(t,{a8:function(){return o},BQ:function(){return s},RF:function(){return j.RF},Im:function(){return W},ZK:function(){return T},i8:function(){return c},Fe:function(){return $},ZY:function(){return M},YC:function(){return _},zp:function(){return V},YH:function(){return A},pj:function(){return I},v7:function(){return k},DN:function(){return w},wJ:function(){return E},Bi:function(){return X},_x:function(){return K},dY:function(){return q},w9:function(){return J},GR:function(){return Y},wZ:function(){return Z},sP:function(){return en},xT:function(){return et},$_:function(){return F},Q5:function(){return H},N0:function(){return z}});var i,s,r=n(753031);class o extends r.SB{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/results/export",e)}}var a=n(447006),l=n(744819);function c(e,t,n){let i=new l.f(t).withQueryParams(n).withSession(e);return(0,a.jI)(i)}let d="/v1/courses/%courseId%",u=`${d}/gradebook/columns`,p=`${u}/%columnId%`,m=`${p}/exceptions`,h=`${m}/count`,g=`${d}/gradebook/memberships/%membershipId%/exceptions`,f=`${m}/memberships/%membershipId%`;(i=s||(s={})).Unlimited="UNLIMITED",i.Fixed="FIXED",i.Relative="RELATIVE";class b extends r.wx{constructor(e){super(f,e)}}class v extends r.$v{constructor(e){super(f,e)}}class y extends r.SB{constructor(e){super(m,e)}}class C extends r.SB{constructor(e){super(h,e)}}class S extends r.SB{constructor(e){super(g,e)}}async function E(e,t,n){let i=new b(t).withSession(e).withBody(n);return(0,a.jI)(i)}async function I(e,t){let n=new v(t).withSession(e);await (0,a.g6)(n)}async function w(e,t,n){let i=new y(t).withQueryParams(n).withSession(e);return(0,a.jI)(i)}async function A(e,t){let n=new C(t).withSession(e);return(0,a.jI)(n)}async function k(e,t,n){let i=new S(t).withQueryParams(n).withSession(e);return(0,a.jI)(i)}let x=e=>{var t;let n;return e.headers.raw||""===(n=null!==(t=e.headers.get("Content-Disposition"))&&void 0!==t?t:"")||(n=null==(n=n.indexOf("filename*")>=0?decodeURIComponent(n.split("filename*=")[1].split("UTF-8")[1]):n.split("filename=")[1].split(";")[0])?void 0:n.replace(/['"]/g,"")),n};async function T(e,t,n,i){let s=new o({courseId:t,columnId:n}).withQueryParams(i).withSession(e),r=await (0,a.g6)(s),l=x(r),c=await r.blob();return{filename:l,blob:c}}n(596130);let P="/v1/courses/%courseId%/gradebook/columns/%columnId%",D=`${P}/groupAssociations/%groupId%/grades`,G=`${P}/users/%userId%`,R=`${P}/attempts/reminders`;class B extends r.SB{constructor(e){super(D,e)}}class L extends r.t9{constructor(e){super(G,e)}}class N extends r.SB{constructor(e){super(G,e)}}class O extends r.B_{constructor(e){super(R,e)}}function M(e,t){let n=new B(t).withSession(e);return(0,a.jI)(n)}async function $(e,t){let n=new N(t).withSession(e);return(0,a.jI)(n)}async function H(e,t,n){let i=new L(t).withSession(e).withBody(n);return(0,a.jI)(i)}async function F(e,t){let n=new O(t).withSession(e).withBody({});return(0,a.jI)(n)}var U=n(299541);function V(e,t,n){let i=new U.AD(t).withSession(e);return n&&i.withQueryParams(n),(0,a.jI)(i)}function _(e,t){let n=new U._2(t).withSession(e);return(0,a.jI)(n)}function q(e,t,n){let i=new U.j7(t).withSession(e).withBody(n);return(0,a.jI)(i)}function z(e,t,n){let i=new U.YW(t).withSession(e).withBody(n);return(0,a.jI)(i)}function W(e,t){let n=new U.r(t).withSession(e);return(0,a.jI)(n)}var j=n(709663);async function Z(e,t){let n=new j.Pe(t).withSession(e);return(0,a.jI)(n)}async function K(e,t,n=[]){let i=new j.jd(t).withSession(e);return n&&n.length>0&&(i=i.withExpand(...n)),(0,a.jI)(i)}async function X(e,t,n){let i={manualPoints:null!==n.points&&void 0!==n.points?n.points:"",manualFeedback:n.manualFeedback,autoPoints:n.autoPoints,questionAttempt:{}},s=new j.W8(t).withSession(e).withBody(i);return(0,a.jI)(s)}async function Y(e,t,n={},i=[]){let s=new j.ZD(t).withSession(e).withPaging(n);return i&&i.length>0&&(s=s.withExpand(...i)),(0,a.jI)(s)}class Q extends r.B_{constructor(e){super("v1/courses/%courseId%/gradebook/prepareDownload",e)}}let J=async(e,{courseId:t},n)=>{let i=new Q({courseId:t}).withBody(n).withSession(e),s=await (0,a.jI)(i);return s};n(567053),n(70854),n(219604),n(802077),n(871750),n(249873),n(876558),n(995867);var ee=n(150223);async function et(e,t){let n=new ee.L(t).withSession(e);return(0,a.jI)(n)}async function en(e,t){let n=new ee.U(t).withSession(e);return(0,a.jI)(n)}},268295:function(e,t,n){"use strict";n.d(t,{BnC:function(){return J},TqX:function(){return p},h0v:function(){return ee},SNh:function(){return u},McV:function(){return eu},iRb:function(){return ed},kcX:function(){return b},PJt:function(){return h},gQZ:function(){return g},VG2:function(){return f},ngf:function(){return ts},BQp:function(){return eW.BQ},SJR:function(){return F},O98:function(){return et},pHC:function(){return eP},FNw:function(){return eG},R37:function(){return eD},Z7d:function(){return eM},wGc:function(){return e$},AzN:function(){return ej},Hsj:function(){return eH},Vie:function(){return d},srx:function(){return tu},tq_:function(){return k},MGk:function(){return G},Hnt:function(){return B},CGz:function(){return w},bEJ:function(){return S},kw8:function(){return eS},acm:function(){return $},Ysd:function(){return M},T0n:function(){return H},y2J:function(){return Y},Vwz:function(){return j},WVZ:function(){return Z},ECF:function(){return K},L$6:function(){return X},D0l:function(){return W},S9W:function(){return el},A1x:function(){return ea},pzW:function(){return eo},Ug8:function(){return ec},WnB:function(){return ew},lzM:function(){return e1},E8D:function(){return e0},g7B:function(){return eL},p8Q:function(){return eR},oIX:function(){return eV},w6S:function(){return e_},sAK:function(){return eq},yYO:function(){return eY},J_U:function(){return eX},TZe:function(){return eA},JXy:function(){return te},fyg:function(){return ti},hIc:function(){return tt},klr:function(){return tn},LU0:function(){return eI},MQp:function(){return eT.MQ},Im$:function(){return eW.Im},ZKY:function(){return eW.ZK},i8y:function(){return eW.i8},uVV:function(){return eT.uV},HQE:function(){return ta},CV7:function(){return tl},j2:function(){return to},FeW:function(){return eW.Fe},ZYv:function(){return eW.ZY},YCr:function(){return eW.YC},zpx:function(){return eW.zp},WiT:function(){return th},ZX5:function(){return tg},Yx$:function(){return ty},yzO:function(){return tb},lLb:function(){return tv},HU8:function(){return e3},C0A:function(){return eT.C0},OrM:function(){return ex},jdu:function(){return tx},SlR:function(){return eC},ziu:function(){return tD},YHn:function(){return eW.YH},pjy:function(){return eW.pj},v7Q:function(){return eW.v7},DN0:function(){return eW.DN},wJ:function(){return eW.wJ},Bi2:function(){return eW.Bi},_xN:function(){return eW._x},cqI:function(){return ey},lZD:function(){return eT.lZ},A8I:function(){return tG},hVK:function(){return tC.h},w64:function(){return tE},dYx:function(){return eW.dY},w9:function(){return eW.w9},GRx:function(){return eW.GR},wZ_:function(){return eW.wZ},sPL:function(){return eW.sP},xTX:function(){return eW.xT},$_n:function(){return eW.$_},sUQ:function(){return e9},R5$:function(){return tA},FP8:function(){return e5},ZII:function(){return e7},awk:function(){return e6},Q5g:function(){return eW.Q5},N02:function(){return eW.N0},xJl:function(){return tw}});var i,s,r,o,a,l,c,d,u,p,m,h,g,f,b,v=n(447006),y=n(753031);class C extends y.SB{constructor(e){super("/v1/ai/tasks/%taskId%",e)}}async function S(e,t){let n=new C({taskId:t}).withSession(e);return(0,v.jI)(n)}var E=n(372730);class I extends E.SB{constructor(e){super("/v1/courses/%courseId%/ai/settings",e)}}async function w(e,t){let n=new I({courseId:t}).withSession(e);return(0,v.jI)(n)}class A extends y.SB{constructor(e){super("/v1/courses/%courseId%/ai/bannerKeywords",e)}}function k(e,t){let n=new A({courseId:t}).withSession(e);return(0,v.jI)(n)}(i=d||(d={})).Topics="Topics",i.Units="Units",i.Weeks="Weeks",i.Chapters="Chapters",i.Modules="Modules";class x extends y.SB{constructor(e){super("/v1/courses/%courseId%/ai/outline",e)}}var T=n(310242);function P(e){return{...e,async:!0}}async function D(e){let t=await (0,v.g6)(e),n=t.headers.get("Location");if(!n)throw Error("Unable to find task ID in location");return(0,T.S)(n,"tasks")}async function G(e,t,n){let i=P(n),s=new x({courseId:t}).withSession(e).withQueryParams(i);return D(s)}class R extends E.SB{constructor(e){super("/v1/courses/%courseId%/ai/thumbnails",e)}}function B(e,t,n){let i=P(n),s=new R({courseId:t}).withSession(e).withQueryParams(i);return D(s)}n(911209),n(485293);class L extends y.SB{constructor(e){super("/v1/cloudstorages/%serviceId%/contents/%contentId%",e)}}class N extends y.we{constructor(e){super("/v1/cloudstorages/%serviceId%/contents/%contentId%/download",e)}}class O extends y.we{constructor(e){super("/v1/cloudstorages/tasks/%taskId%",e)}}async function M(e,t,n,i){let s=new L({serviceId:t,contentId:n}).withSession(e).withQueryParams({accessToken:i});return(0,v.jI)(s)}async function $(e,t,n,i){let s=new N({serviceId:t,contentId:n}).withSession(e).withQueryParams({accessToken:i}).withExpand("isMedia","mimeType");return(0,v.jI)(s)}async function H(e,t,n){let i=new O({taskId:t}).withSession(e).withQueryParams({accessToken:n}).withExpand("isMedia","mimeType");return(0,v.jI)(i)}(s=u||(u={})).Title="title",s.StartDateRestriction="startDateRestriction",s.ModifiedDate="modifiedDate",s.Status="status",s.ReadCount="readCount";class F extends y.Ds{constructor(e){super("/v1/courses/%courseId%/announcements",e)}}class U extends y.B_{constructor(e){super("/v1/courses/%courseId%/announcements",e)}}class V extends y.$v{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}class _ extends y.SB{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}class q extends y.t9{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}class z extends y.SB{constructor(e){super("/v1/courses/%courseId%/announcements/counts",e)}}async function W(e,t,n,i){let s=new F({courseId:t}).withSession(e).withPaging(n);return i&&s.withSort(...i),(0,v.jI)(s)}async function j(e,t,n){let i=new U({courseId:t}).withSession(e).withBody(n);return(0,v.jI)(i)}async function Z(e,t,n){let i=new V({courseId:t,announcementId:n}).withSession(e);await (0,v.g6)(i)}async function K(e,t,n){let i=new _({courseId:t,announcementId:n}).withSession(e);return(0,v.jI)(i)}async function X(e,t,n,i){let s=new q({courseId:t,announcementId:n}).withSession(e).withBody(i);return(0,v.jI)(s)}async function Y(e,t){let n=new z({courseId:t}).withSession(e);return(0,v.jI)(n)}var Q=n(791855);let J="bb-assessment-conflict-external-referenced-questions";class ee extends Q.VL{constructor(e){super(J,v.oj.Conflict,e)}}(p||(p={})).ExternalQuestions="hasExternallyReferencedQuestions";class et extends y.Ds{constructor(e){super("/v1/courses/%courseId%/assessments",e)}}class en extends y.SB{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%",e)}}class ei extends y.$v{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%",e)}async failed(e){let t=await e.json();if(e.status===v.oj.Conflict&&t.code===J)throw new ee(this.path);await super.failed(e)}}class es extends y.B_{constructor(e){super("v1/courses/%courseId%/assessments",e)}}class er extends y.t9{constructor(e){super("v1/courses/%courseId%/assessments/%assessmentId%",e)}}async function eo(e,t,n){let i=new en({courseId:t,assessmentId:n}).withSession(e);return(0,v.jI)(i)}async function ea(e,t,n){let i=new ei({courseId:t,assessmentId:n}).withSession(e);await (0,v.g6)(i)}async function el(e,t,n){let i=new es({courseId:t}).withSession(e).withBody(n);return(0,v.jI)(i)}async function ec(e,t,n,i){let s=new er({courseId:t,assessmentId:n}).withSession(e).withBody(i);return(0,v.jI)(s)}n(364854),n(211010);class ed extends y.Ds{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/users",e)}}class eu extends y.SB{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/users/reports/states",e)}}n(71888),n(552766),n(56084),n(546242);let ep="/v1/courses/%courseId%/contents",em=ep+"/%contentId%/hasCourseLinks",eh=ep+"/%contentId%/softLinks",eg=ep+"/%contentId%/canForcedSequenceBeEnabled";class ef extends y.SB{constructor(e){super(em,e)}}class eb extends y.SB{constructor(e){super(eh,e)}}class ev extends y.SB{constructor(e){super(eg,e)}}function ey(e,t){let n=new ef(t).withSession(e);return(0,v.jI)(n)}function eC(e,t){let n=new eb(t).withSession(e);return(0,v.jI)(n)}function eS(e,t){let n=new ev(t).withSession(e);return(0,v.jI)(n)}var eE=n(648191);async function eI(e,t){let n=new eE.vk().withSession(e);return(null==t?void 0:t.paging)&&n.withPaging(t.paging),(null==t?void 0:t.sort)&&(Array.isArray(t.sort)?n.withSort(...t.sort):n.withSort(t.sort)),(0,v.jI)(n)}async function ew(e,t){let n=new eE.dv({courseId:t}).withSession(e);return(0,v.jI)(n)}async function eA(e,t,n){let i=new eE.B3({courseId:t}).withSession(e).withBody(n);return(0,v.jI)(i)}n(906743);var ek=n(989014);async function ex(e,t){var n,i,s;let r=new ek.$p({courseId:t.courseId,contentId:t.contentId}).withSession(e),o=t.paging?{limit:null!==(n=t.paging.limit)&&void 0!==n?n:1e3,offset:t.paging.offset}:{limit:1e3};return r.withPaging(o),t.expand&&r.withExpand(t.expand),r.withQueryParams({submissionStatus:null===(i=t.filter)||void 0===i?void 0:i.submissionStatus,gradingStatus:null===(s=t.filter)||void 0===s?void 0:s.gradingStatus,includeCount:!0}),(0,v.jI)(r)}var eT=n(375571);n(14796),n(431190),n(848245),n(276314),(r=m||(m={})).FamilyName="familyName",r.GivenName="givenName",r.UserName="userName",(o=h||(h={})).CourseId="course.courseId",o.DisplayOrder="displayOrder",o.EnrollmentDate="enrollmentDate",o.FamilyName="user.familyName",o.GivenName="user.givenName",o.Id="id",o.LastAccessDate="lastAccessDate",o.Role="role",o.Username="user.userName",o.StudentId="user.studentId",o.IsPreviewStudent="isPreviewStudent",o.Grade="grade";class eP extends y.SB{constructor(e){super("/v1/courses/%courseId%/memberships/counts",e)}}class eD extends y.Ds{constructor(e){super("/v1/courses/%courseId%/memberships",e)}}class eG extends y.SB{constructor(e){super("/v1/courses/%courseId%/memberships/%membershipId%",e)}}async function eR(e,t){let n=new eP({courseId:t}).withSession(e);return(0,v.jI)(n)}var eB=n(111519);async function eL(e,t,n){let i=new eB.F({courseId:t,userId:n}).withSession(e).withExpand(...["courseRole","user"]);return(0,v.jI)(i)}let eN="/v1/courses/%courseId%/assessments/%assessmentId%/questions";class eO extends y.Ds{constructor(e){super(`${eN}/%questionId%`,e)}}class eM extends y.Ds{constructor(e){super(eN,e)}}class e$ extends y.Ds{constructor(e){super("/v1/courses/%courseId%/questions",e)}}class eH extends y.B_{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%/questions/uploadQuestions",e)}}class eF extends y.Ds{constructor(e){super("/v1/courses/%courseId%/questions/tags",e)}}class eU extends y.Ds{constructor(e){super("/v1/courses/%courseId%/questions/types",e)}}function eV(e,t,n,i){let s=new eO({assessmentId:t,courseId:n,questionId:i}).withSession(e);return(0,v.jI)(s)}function e_(e,t,n){let i=new eF({courseId:t}).withSession(e).withPaging(n);return(0,v.jI)(i)}function eq(e,t,n){let i=new eU({courseId:t}).withSession(e).withPaging(n);return(0,v.jI)(i)}var ez=n(448999),eW=n(961702);function ej(e,t,n){let i=n.map(e=>(function(e,t){if(!(null==t?void 0:t.id)||!t.attemptId)throw Error("No attempt id or question attempt id available.");let{id:n,attemptId:i}=t;return new eW.RF({courseId:e,attemptId:i,questionAttemptId:n})})(t,e).withBody(e));return(0,ez.p)(e,i).then(e=>{let t=Object.values(e);return t.map(e=>{var t;if(200===e.statusCode){let n=null!==(t=e.body.id)&&void 0!==t?t:"";return{isOk:!0,id:n,result:e.body}}let n=(0,T.S)(e.relativeUrl,"answers");return{isOk:!1,id:n,error:{status:e.statusCode}}})})}n(554141),(a=g||(g={})).AllTasks="allTasks",a.CxTasks="cxTasks",a.CopyTasks="courseCopyTasks",a.ConvertToUltra="ultraCourseConversionTasks",a.CxImport="CXIMPORT",a.CxExport="CXEXPORT",a.CxArchive="CXARCHIVE",a.CxRestore="CXRESTORE",(l=f||(f={})).AllStatus="All",l.Waiting="WAITING",l.Assigned="ASSIGNED",l.Running="RUNNING",l.Complete="COMPLETE",l.CompleteErrors="COMPLETE_ERRORS",l.Incomplete="INCOMPLETE";class eZ extends y.Ds{constructor(e){super("/v1/courses/%courseId%/tasks",e)}}class eK extends y.$v{constructor(e){super("/v1/courses/%courseId%/tasks/%taskId%",e)}}async function eX(e,t,n,i){let s=new eZ({courseId:t}).withSession(e).withQueryParams(n).withPaging(i);return(0,v.jI)(s)}function eY(e,t,n){let i=new eK({courseId:t,taskId:n}).withSession(e);return(0,v.g6)(i)}(c=b||(b={})).AllLogs="allLogs",c.CopyLogs="courseCopyLogs",c.ImportLogs="importLogs",c.RestoreLogs="restoreLogs";class eQ extends y.Ds{constructor(e){super("/v1/courses/%courseId%/tasks/logs",e)}}class eJ extends y.$v{constructor(e){super("/v1/courses/%courseId%/tasks/logs/%logId%",e)}}async function e0(e,t,n,i){let s=new eQ({courseId:t}).withSession(e).withQueryParams(n).withPaging(i);return(0,v.jI)(s)}function e1(e,t,n){let i=new eJ({courseId:n,logId:t}).withSession(e);return(0,v.g6)(i)}var e2=n(805801);function e3(e,t){let n=new e2.K(e).withSession(t);return(0,v.jI)(n)}function e9(e,t,n){let i=new e2.l(e).withSession(t).withBody(n);return(0,v.jI)(i)}var e4=n(367991);function e7(e,t,n){let i=new e4.NR({courseId:t}).withSession(e).withQueryParams(n);return(0,v.jI)(i)}async function e5(e,t,n){let i=new e4.LQ({courseId:t}).withSession(e).withQueryParams(n).withBody({});await (0,v.jI)(i)}function e6(e,t){let n=new e4.Wx({courseId:t}).withSession(e);return(0,v.jI)(n)}var e8=n(96823);function te(e,t,n){let i=new e8.Y0(t).withSession(e).withBody(n);return(0,v.jI)(i)}function tt(e,t,n,i){let s=new e8.i7(t).withSession(e).withQueryParams({includeCount:!0,...n}).withExpand("author");return i&&(s=s.withSort(...i)),(0,v.jI)(s)}function tn(e,t,n){let i=new e8.In(t).withSession(e).withBody(n);return(0,v.jI)(i)}function ti(e,t){let n=new e8.LX(t).withSession(e);return(0,v.g6)(n)}class ts extends E.Ds{constructor(e){super("/v1/courses/%courseId%/users/%userId%/contents/%contentId%/children",e)}}n(60519);var tr=n(148591);async function to(e){let t=new tr.mH().withSession(e);return(0,v.jI)(t)}async function ta(e,t){let n=new tr.qh({flagKey:t}).withSession(e);return(0,v.jI)(n)}async function tl(e,t,n){let i=new tr.ab({flagKey:t}).withSession(e).withBody(n);return(0,v.jI)(i)}var tc=n(627482);class td extends y.n6{constructor(){super("/v1/files")}}class tu extends v.AT{constructor(e){super(v.cw.API),this._apiError=e}get apiError(){return this._apiError}get status(){return this._apiError.body.status}}class tp extends v.AT{constructor(){super(v.cw.API)}}class tm extends td{xhrFailed(e){if(!e)return new tp;let t=JSON.parse(e);return new tu(new tc.H(t))}xhrBody(){return this.getBodyInit()}toXhr(e){let t=new XMLHttpRequest;return t.open(this.method,null!=e?e:this.getUrl()),this.headers.forEach((e,n)=>{t.setRequestHeader(n,e)}),t}}function th(e,t,n,i){let s=new td().withSession(e).withBody(t).withQueryParams(n);return i&&i.length>0&&(s=s.withExpand(...i)),(0,v.jI)(s)}function tg(e,t,n,i){let s=new tm().withSession(e).withBody(t).withQueryParams(n);return i&&i.length>0&&(s=s.withExpand(...i)),(0,v.Nz)(s)}var tf=n(756344);async function tb(e){let t=new tf.v$().withSession(e).withBody({});return(0,v.jI)(t)}async function tv(e,t){let n=new tf.uM().withSession(e).withBody(t);return(0,v.jI)(n)}async function ty(e){let t=new tf.aV().withSession(e);return(0,v.jI)(t)}n(163273),n(625506),n(56164),n(721966),n(163273),n(625506),n(56164),n(721966);var tC=n(407619);class tS extends y.SB{constructor(){super("/v1/passwordSettings")}}function tE(e){let t=new tS().withSession(e);return(0,v.jI)(t)}var tI=n(178829);async function tw(e,t){let n=new tI.ke({userId:t}).withSession(e);return(0,v.jI)(n)}async function tA(e,t){let n=new tI.h3({courseId:t}).withSession(e);return(0,v.jI)(n)}var tk=n(961338);async function tx(e,t){let n=new tk.x({taskId:t}).withSession(e);return(0,v.jI)(n)}class tT extends y.SB{constructor(){super("/v1/utilities/timeUntilBbSessionInactive"),this.headers.set("Suppress-Session-Timestamp-Update","true"),this.headers.set("Include-Session-Last-Access-Time","true")}}class tP extends y.B_{constructor(){super("/v1/utilities/keepBbSessionActive")}async failed(e){if(e.status===v.oj.Unauthorized)throw new Q.VL(e.statusText,e.status,e.url)}}async function tD(e){let t=new tT().withSession(e);return await (0,v.jI)(t)}async function tG(e){let t=new tP().withSession(e).withBody({});await (0,v.g6)(t)}},826423:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});var i=n(675663),s=n(447006);async function r(e,t){let n=new i.d({receiptId:t}).withSession(e);return await (0,s.jI)(n)}},851890:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});var i=n(238479),s=n(447006);async function r(e){let t=new i.v().withSession(e);return(0,s.jI)(t)}},655294:function(e,t,n){"use strict";n.d(t,{Z:function(){return s},q:function(){return r}});var i=n(753031);class s extends i.Ds{constructor(e){super("/public/v1/lti/domains",e)}}class r extends i.B_{constructor(){super("/public/v1/lti/domains")}}},753031:function(e,t,n){"use strict";n.d(t,{$v:function(){return i.$v},B_:function(){return i.B_},Ds:function(){return i.Ds},SB:function(){return i.SB},n6:function(){return i.n6},t9:function(){return i.t9},we:function(){return i.we},wx:function(){return i.wx}});var i=n(372730);n(671071)},372730:function(e,t,n){"use strict";n.d(t,{$v:function(){return h},B_:function(){return b},Ds:function(){return d},SB:function(){return l},n6:function(){return v},t9:function(){return g},we:function(){return c},wx:function(){return f}});var i=n(791855),s=n(671071),r=n(447006);class o extends s.Gr{getUrl(){let e=super.getRelativeUrl();return e&&(e=e.startsWith("/")?e:`/${e}`),r.qU.getUrl("/learn/api"+e)}requiresSession(){return!0}toString(){return`[LearnApiRequest: ${this.method} ${this.getUrl()}]`}async failed(e){throw new i.Hy(await e.json())}}class a extends o{withFields(...e){return this.withQuery({fields:e})}}class l extends o{constructor(e,t){super(r.w$.Get,e,t)}}class c extends a{constructor(e,t){super(r.w$.Get,e,t)}}class d extends l{withPaging(e){return this.withQuery({limit:e.limit,offset:e.offset})}withSort(...e){return this.withQuery({sort:(null!=e?e:[]).map(e=>`${e.field}(${e.direction})`)})}async validate(){await super.validate(),this.query.has("limit")||this.query.has("offset")||console.warn(`Attempting to get paged collection at ${this.path} without a filter, this might be a performance issue.`)}}class u extends o{constructor(e,t,n){super(e,t,n),this.getContentType()&&this.headers.set(s.Qh,this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then(()=>{if(void 0===this.body)throw new i.jf("Request requires a body but none was provided")})}getBody(){return this.body}}class p extends u{getContentType(){return"application/json"}getBodyInit(){return JSON.stringify(this.body)}}class m extends u{getContentType(){return null}getBodyInit(){var e;let t=new FormData;return Object.keys(null!==(e=this.body)&&void 0!==e?e:{}).forEach(e=>{var n,i;t.append(e,null!==(i=null===(n=this.body)||void 0===n?void 0:n[e])&&void 0!==i?i:"")}),t}}class h extends o{constructor(e,t){super(r.w$.Delete,e,t)}}class g extends p{constructor(e,t){super(r.w$.Patch,e,t)}}class f extends p{constructor(e,t){super(r.w$.Put,e,t)}}class b extends p{constructor(e,t){super(r.w$.Post,e,t)}}class v extends m{constructor(e,t){super(r.w$.Post,e,t)}}},627482:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});class i extends Error{constructor(e){super(e.message),this.responseBody=e,Object.setPrototypeOf(this,new.target.prototype)}get body(){return this.responseBody}}},408027:function(e,t,n){"use strict";n.d(t,{Hy0:function(){return nc.Hy},BnC:function(){return na.BnC},h9E:function(){return eX},Crd:function(){return ni},TqX:function(){return na.TqX},M6Z:function(){return e0},lrm:function(){return e1},h0v:function(){return na.h0v},IQK:function(){return eJ},O9C:function(){return tE},MlJ:function(){return eQ},c4$:function(){return tm},kH0:function(){return tg},I$9:function(){return tp},JX7:function(){return nE.JX},CalculatedFormulaAnswerFormatType:function(){return e2},CalculatedFormulaAnswerPrecisionType:function(){return e9},cJw:function(){return e3},eNW:function(){return tf},LbX:function(){return tW},hTM:function(){return tZ},LVO:function(){return nn},DXv:function(){return nu.D},aql:function(){return to},zcD:function(){return ta},hbA:function(){return ts},aOr:function(){return tc},O8v:function(){return tJ},S2N:function(){return td},bSh:function(){return nv.b},aRc:function(){return nt},Ueh:function(){return eY},AVG:function(){return ej},nMD:function(){return nE.nM},L03:function(){return e4},nEm:function(){return ti},r5d:function(){return eU},R7X:function(){return tS},Y0t:function(){return t7},EyR:function(){return tw},cc9:function(){return tP},RjJ:function(){return tT},nMe:function(){return tk},JdL:function(){return tx},qr:function(){return tR},ILv:function(){return tL},e4A:function(){return e7},w$A:function(){return nT.w$},oji:function(){return nT.oj},WYQ:function(){return nI.W},J6F:function(){return tj},TsU:function(){return tY},bu3:function(){return tC},LJK:function(){return t1},XF0:function(){return tU},faN:function(){return tn},RbW:function(){return tr},Vse:function(){return tz},NAA:function(){return t_},Ius:function(){return e_},SNh:function(){return na.SNh},McV:function(){return na.McV},iRb:function(){return na.iRb},xaz:function(){return tH},kcX:function(){return na.kcX},PJt:function(){return na.PJt},hrY:function(){return t$},gQZ:function(){return na.gQZ},VG2:function(){return na.VG2},ngf:function(){return na.ngf},uzw:function(){return ty},dZq:function(){return tb},Wvp:function(){return tv},BQp:function(){return na.BQp},SJR:function(){return na.SJR},O98:function(){return na.O98},pHC:function(){return na.pHC},FNw:function(){return na.FNw},R37:function(){return na.R37},Z7d:function(){return na.Z7d},wGc:function(){return na.wGc},raB:function(){return tB},AzN:function(){return na.AzN},Hsj:function(){return na.Hsj},rz_:function(){return no},kjH:function(){return nb},i6k:function(){return nd},K0h:function(){return nE.K0},WTZ:function(){return tI},$eE:function(){return e5},rh5:function(){return nS},afs:function(){return t8},Vie:function(){return na.Vie},MMO:function(){return nw},xB0:function(){return nA},TK1:function(){return nr},xN_:function(){return ns},y67:function(){return nx.y},dPk:function(){return tN},rn$:function(){return e6},QuestionType:function(){return e8},hRl:function(){return t2},XmS:function(){return t3},uRv:function(){return nE.uR},HXF:function(){return nE.HX},UBQ:function(){return nE.UB},bS9:function(){return nE.bS},OqY:function(){return nE.Oq},Z3R:function(){return eK},Kp$:function(){return th},VLC:function(){return nc.VL},x1x:function(){return tl},Tgr:function(){return tM},aQo:function(){return tD},$qS:function(){return eq},SrV:function(){return ez},nXr:function(){return tG},duL:function(){return ne},uYC:function(){return tV},rWm:function(){return eZ},sez:function(){return tt},eWt:function(){return te},Vez:function(){return nk},XVx:function(){return t5},VRt:function(){return tK},srx:function(){return na.srx},cwi:function(){return nT.cw},tq_:function(){return na.tq_},MGk:function(){return na.MGk},Hnt:function(){return na.Hnt},CGz:function(){return na.CGz},bEJ:function(){return na.bEJ},Bjc:function(){return nm},kw8:function(){return na.kw8},acm:function(){return na.acm},Ysd:function(){return na.Ysd},T0n:function(){return na.T0n},LAV:function(){return nC},Aev:function(){return ny},y2J:function(){return na.y2J},Vwz:function(){return na.Vwz},WVZ:function(){return na.WVZ},ECF:function(){return na.ECF},L$6:function(){return na.L$6},D0l:function(){return na.D0l},S9W:function(){return na.S9W},A1x:function(){return na.A1x},pzW:function(){return na.pzW},Ug8:function(){return na.Ug8},WnB:function(){return na.WnB},lzM:function(){return na.lzM},E8D:function(){return na.E8D},g7B:function(){return na.g7B},p8Q:function(){return na.p8Q},oIX:function(){return na.oIX},w6S:function(){return na.w6S},sAK:function(){return na.sAK},yYO:function(){return na.yYO},J_U:function(){return na.J_U},TZe:function(){return na.TZe},JXy:function(){return na.JXy},fyg:function(){return na.fyg},hIc:function(){return na.hIc},klr:function(){return na.klr},LU0:function(){return na.LU0},MQp:function(){return na.MQp},Im$:function(){return na.Im$},ZKY:function(){return na.ZKY},i8y:function(){return na.i8y},uVV:function(){return na.uVV},HQE:function(){return na.HQE},CV7:function(){return na.CV7},j2:function(){return na.j2},FeW:function(){return na.FeW},ZYv:function(){return na.ZYv},YCr:function(){return na.YCr},zpx:function(){return na.zpx},jIs:function(){return nT.jI},lMq:function(){return nf},WiT:function(){return na.WiT},GSC:function(){return nl.GS},ZX5:function(){return na.ZX5},Yx$:function(){return na.Yx$},yzO:function(){return na.yzO},lLb:function(){return na.lLb},r9o:function(){return nh},C9P:function(){return nl.C9},HU8:function(){return na.HU8},S9c:function(){return np},C0A:function(){return na.C0A},OrM:function(){return na.OrM},QK1:function(){return nl.QK},yZB:function(){return nl.yZ},jdu:function(){return na.jdu},SlR:function(){return na.SlR},ziu:function(){return na.ziu},YHn:function(){return na.YHn},pjy:function(){return na.pjy},v7Q:function(){return na.v7Q},DN0:function(){return na.DN0},wJ:function(){return na.wJ},Bi2:function(){return na.Bi2},_xN:function(){return na._xN},cqI:function(){return na.cqI},lZD:function(){return na.lZD},A8I:function(){return na.A8I},hVK:function(){return na.hVK},w64:function(){return na.w64},dYx:function(){return na.dYx},rjU:function(){return nl.rj},_Bo:function(){return nl._B},w9:function(){return na.w9},GRx:function(){return na.GRx},wZ_:function(){return na.wZ_},sPL:function(){return na.sPL},xTX:function(){return na.xTX},_Nl:function(){return ng._},$_n:function(){return na.$_n},sUQ:function(){return na.sUQ},R5$:function(){return na.R5$},FP8:function(){return na.FP8},ZII:function(){return na.ZII},awk:function(){return na.awk},Q5g:function(){return na.Q5g},N02:function(){return na.N02},qUl:function(){return nT.qU},xJl:function(){return na.xJl}});var i,s,r,o,a,l,c,d,u,p,m,h,g,f,b,v,y,C,S,E,I,w,A,k,x,T,P,D,G,R,B,L,N,O,M,$,H,F,U,V,_,q,z,W,j,Z,K,X,Y,Q,J,ee,et,en,ei,es,er,eo,ea,el,ec,ed,eu,ep,em,eh,eg,ef,eb,ev,ey,eC,eS,eE,eI,ew,eA,ek,ex,eT,eP,eD,eG,eR,eB,eL,eN,eO,eM,e$,eH,eF,eU,eV,e_,eq,ez,eW,ej,eZ,eK,eX,eY,eQ,eJ,e0,e1,e2,e3,e9,e4,e7,e5,e6,e8,te,tt,tn,ti,ts,tr,to,ta,tl,tc,td,tu,tp,tm,th,tg,tf,tb,tv,ty,tC,tS,tE,tI,tw,tA,tk,tx,tT,tP,tD,tG,tR,tB,tL,tN,tO,tM,t$,tH,tF,tU,tV,t_,tq,tz,tW,tj,tZ,tK,tX,tY,tQ,tJ,t0,t1,t2,t3,t9,t4,t7,t5,t6,t8,ne,nt,nn,ni,ns,nr,no,na=n(268295),nl=n(998863);n(753031);var nc=n(791855);(i=eU||(eU={}))[i.Sunday=0]="Sunday",i[i.Monday=1]="Monday",i[i.Tuesday=2]="Tuesday",i[i.Wednesday=3]="Wednesday",i[i.Thursday=4]="Thursday",i[i.Friday=5]="Friday",i[i.Saturday=6]="Saturday",n(513855),(s=eV||(eV={})).Contains="contains",s.Equals="equals",s.NotBlank="notBlank",s.StartsWith="starts",(r=e_||(e_={})).courseContent="courseContentPicker",r.courseLink="courseLinkPicker",(o=eq||(eq={})).TITLE_ASC="title(asc)",o.TITLE_DESC="title(desc)",o.CREATED_DATE_ASC="createdDate(asc)",o.CREATED_DATE_DESC="createdDate(desc)",o.MODIFIED_DATE_ASC="modifiedDate(asc)",o.MODIFIED_DATE_DESC="modifiedDate(desc)",o.STUDENT_COUNT_ASC="studentCount(asc)",o.STUDENT_COUNT_DESC="studentCount(desc)",(a=ez||(ez={})).Ascending="asc",a.Descending="desc",(l=eW||(eW={})).SubmissionStatus="submissionStatus",l.GradingStatus="gradingStatus",(c=ej||(ej={})).Normal="Normal",c.Limited="Limited",c.Unlimited="Unlimited",(d=eZ||(eZ={})).Custom="Custom",d.Unlimited="Unlimited",d.NoAccommodation="Default";let nd=44e5;var nu=n(988747);function np(e){switch(e){case nu.D.UltraAssignment:return eY.Assignment;case nu.D.TestLink:return eY.Test;case nu.D.SurveyLink:return eY.Survey;case nu.D.Discussion:return eY.Discussion;case nu.D.ClassicAssignment:return eY.ClassicAssignment;case nu.D.RusticiScorm:return eY.Scorm}}(u=eK||(eK={})).Always="ALWAYS",u.Never="NEVER",u.PerQuestion="PER_QUESTION",(p=eX||(eX={})).Assessment="Assessment",p.Section="Section",p.Item="Item",(m=eY||(eY={})).Assignment="assignment",m.Survey="survey",m.Test="test",m.Discussion="discussion",m.ClassicAssignment="classicAssignment",m.Scorm="scorm";let nm=["bb-assessment-conflict-between-group-and-timelimit","bb-assessment-conflict-between-group-and-multiple-attempts","bb-assessment-conflict-between-group-and-secure","bb-assessment-conflict-between-group-and-enforce-due-date","bb-assessment-conflict-between-due-date-and-enforce-due-date","bb-assessment-randomize-answers-cannot-change","bb-assessment-timelimit-cannot-change"];function nh(e){switch(e){case nu.D.ClassicAssignment:return eJ.Assignment;case nu.D.TestLink:return eJ.Test;case nu.D.UltraAssignment:return eJ.UltraAssignment;case nu.D.SurveyLink:return eJ.Survey}}(h=eQ||(eQ={})).AttemptCompletedOrForceCompletion="bb-rest-attempt-completed-or-force-completion",h.AttemptPastDue="bb-rest-attempt-past-due-exception",n(810910),(g=eJ||(eJ={})).Test="Test",g.Quiz="Quiz",g.Survey="Survey",g.Assignment="Assignment",g.UltraAssignment="UltraAssignment",g.Pool="Pool",(f=e0||(e0={})).NoneSpecified="ns",f.AfterSubmission="as",f.AfterSubmissionHideResults="ashr",f.OnSpecifiedDate="osd",f.AfterDueDate="add",f.AfterAvailEndDate="aaed",f.AfterAttemptGraded="aag",f.AfterIndividualGradeIsPosted="aiag",(b=e1||(e1={})).IncorrectAnswers="INCORRECT_ANSWERS",b.InstructorFeedback="INSTRUCTOR_FEEDBACK",b.AllAnswers="ALL_ANSWERS",b.CorrectAnswers="CORRECT_ANSWERS",b.UserAnswers="USER_ANSWERS",b.Score="SCORE",n(328694),(v=e2||(e2={})).Normal="Normal",v.Exponential="Exponential",(y=e3||(e3={})).Numeric="numeric",y.Percent="percent",(C=e9||(e9={})).Decimal="Decimal",C.SignificantFigures="SigFig",(S=e4||(e4={})).Contains="CONTAINS",S.Exact="EXACT",S.Matches="MATCHES",(E=e7||(e7={})).Rectangle="Rectangle",E.Polygon="Polygon",E.Circle="Circle",(I=e5||(e5={})).None="none",I.Arabic="arabic",I.Roman="roman",I.LetterUpper="letter_upper",I.LetterLower="letter_lower",(w=e6||(e6={})).CloudFile="CLOUD_FILE",w.Embedded="EMBEDDED",w.File="FILE",w.Text="TEXT",w.Unknown="UNKNOWN",(A=e8||(e8={})).CalculatedFormula="calculated",A.CalculatedNumeric="numeric",A.Either="eitherOr",A.Essay="essay",A.FIMB="fimb",A.Hotspot="hotspot",A.Matching="matching",A.Multiple="multipleanswer",A.PageBreak="pageBreak",A.PresentationOnly="presentation",A.QuestionBlock="questionBlock",(k=te||(te={})).TrueFalse="true_false",k.AgreeDisagree="agree_disagree",k.RightWrong="right_wrong",k.YesNo="yes_no",k.UserEnteredLabels="user_entered_labels";var ng=n(580940);function nf(e){return e!==ti.EmbedOnly}(x=tt||(tt={})).Continual="CONTINUAL",x.HardStop="HARDSTOP",(T=tn||(tn={})).ACL="ACL",T.Date="Date_Range",T.ForcedSequence="Pre_Content",T.Grade="Grade_Range",T.GradePercentage="Grade_Range_Percentage",(P=ti||(ti={})).Embed="EMBED",P.EmbedOnly="EMBED_ONLY",P.Link="LINK",(D=ts||(ts={})).Visible="VISIBLE",D.Hidden="HIDDEN",D.Restricted="PARTIALLY_VISIBLE",(G=tr||(tr={})).Yes="Yes",G.No="No",G.Originally="Originally",(R=to||(to={})).None="None",R.Started="Started",R.Completed="Completed",R.Unlocked="Unlocked",(B=ta||(ta={})).Assignment="assignment",B.Attendance="attendance",B.Audio="audio",B.Blog="blog",B.CollaborativeCloud="collaborative-cloud",B.Course="course",B.Calculation="calculation",B.Discussion="discussion",B.DocumentBlank="document-blank",B.DocumentCloud="document-cloud",B.Document="document-text",B.Exam="exam",B.Folder="folder",B.FolderOpen="folder-open",B.Homework="homework",B.Journal="journal",B.LearningModule="learning-module",B.Link="link",B.LTI="lti",B.OverallGrade="overall-grade",B.Pdf="pdf",B.Photo="photo",B.Presentation="presentation",B.Quiz="quiz",B.Root="ROOT",B.Scorm="scormengine",B.Spreadsheet="spreadsheet",B.Survey="survey",B.Test="test",B.Textbook="textbook",B.Video="video",B.Zip="zip",(L=tl||(tl={})).Root="ROOT",L.Interactive="INTERACTIVE",L.Indirect="INDIRECT",n(123314);let nb=100;(N=tc||(tc={})).Continuous="CONTINUOUS",N.DateRange="DATE_RANGE",N.FixedNumDays="FIXED_NUM_DAYS",N.UseTerm="USE_TERM",(O=td||(td={})).Undecided="UNDECIDED",O.Classic="CLASSIC",O.Ultra="ULTRA",O.UltraPreview="ULTRAPREVIEW",(M=tu||(tu={})).Instructor_choice="INSTRUCTOR_CHOICE",M.Choose_ultra="CHOOSE_ULTRA",M.Choose_classic="CHOOSE_CLASSIC";var nv=n(234967);function ny(e){var t;return null!==(t=Object.values(tG).find(t=>t===e))&&void 0!==t?t:tG.AllStatuses}function nC(e){var t;return null!==(t=Object.values(tR).find(t=>t===e))&&void 0!==t?t:tR.AllStatuses}($=tp||(tp={})).NotAttempted="NOT_ATTEMPTED",$.Abandoned="ABANDONED",$.InProgress="IN_PROGRESS",$.Suspended="SUSPENDED",$.Canceled="CANCELED",$.NeedsGrading="NEEDS_GRADING",$.Completed="COMPLETED",$.InMoreProgress="IN_MORE_PROGRESS",$.NeedsMoreGrading="NEEDS_MORE_GRADING",$.Saved="SAVED",(H=tm||(tm={})).NoOverride="NO_OVERRIDE",H.FeedbackOverride="FEEDBACK_OVERRIDE",H.GradeFeedbackOverride="GRADE_FEEDBACK_OVERRIDE",(th||(th={})).Custom="CUSTOM",(F=tg||(tg={})).ReceiptAndAttemptExist="ReceiptAndAttemptExist",F.ReceiptExistsButAttemptDoesNot="ReceiptExistsButAttemptDoesNot",F.ReceiptExistsNoAccessToAttempt="ReceiptExistsNoAccessToAttempt",F.ReceiptExistsColumnSoftDeleted="ReceiptExistsColumnSoftDeleted",(U=tf||(tf={})).NonCalculated="NON_CALCULATED",U.Total="TOTAL",U.Average="AVERAGE",U.WeightedTotal="WEIGHTED_TOTAL",U.MinMax="MINMAX",U.Custom="CUSTOM",(V=tb||(tb={})).Comma="COMMA",V.Tab="TAB",(_=tv||(tv={})).User="USER",_.QuestionAndUser="QUESTION_AND_USER",(q=ty||(ty={})).AllAttempts="ALL",q.ValidAttempts="VALID",(z=tC||(tC={})).Assignment="Assignment.name",z.Attendance="Attendance.name",z.Blog="Blog.name",z.Calculation="Calculation.name",z.Discussion="Discussion.name",z.Exam="Exam.name",z.Homework="Homework.name",z.Journal="Journal.name",z.LTI="Lti.name",z.Presentation="Presentation.name",z.Quiz="Quiz.name",z.ScormEngine="Scormengine.name",z.Survey="Survey.name",z.Test="Test.name",(W=tS||(tS={})).NonFormative="NOT_FORMATIVE",W.NotVisibleToStudents="FORMATIVE_NOT_VISIBLE_TO_STUDENTS",W.VisibleToStudents="FORMATIVE_VISIBLE_TO_STUDENTS",(j=tE||(tE={})).Average="AVERAGE",j.First="FIRST",j.Highest="HIGHEST",j.Last="LAST",j.Lowest="LOWEST",(Z=tI||(tI={})).GradingInProgress="GRADING_IN_PROGRESS",Z.IsPosted="IS_POSTED",Z.ReadyToPost="READY_TO_POST",Z.NoOverride="NO_OVERRIDE",(K=tw||(tw={})).Graded="GRADED",K.NeedsGrading="NEEDS_GRADING",(X=tA||(tA={})).AttemptScore="a",X.None="-",X.OverrideScore="m",(Y=tk||(tk={})).Tab="TAB",Y.Comma="COMMA",(Q=tx||(tx={})).MyDevice="MYDEVICE",Q.ContentCollection="CONTENTCOLLECTION",(J=tT||(tT={})).AllTime="ALLTIME",J.SixMonths="SIXMONTHS",J.ThirtyDays="THIRTYDAYS",J.FourteenDays="FOURTEENDAYS",J.SevenDays="SEVENDAYS",J.OneDay="ONEDAY",(ee=tP||(tP={})).All="ALL",ee.ByColumns="BYCOLUMNS",ee.HistoryLog="HISTORYLOG",ee.HistoryLogAll="HISTORYLOGALL",(et=tD||(tD={})).Tabular="TABULAR",et.Score="SCORE",et.Text="TEXT",et.Percent="PERCENT",et.Complete="COMPLETE",(en=tG||(tG={})).AllStatuses="allStatuses",en.NoAttempt="noAttempt",en.AttemptInProgress="attemptInProgress",en.AttemptSubmitted="attemptSubmitted",en.NoEntry="noEntry",en.EntryMade="entryMade",en.AnyAttemptsSubmitted="anyAttemptsSubmitted",(ei=tR||(tR={})).AllStatuses="allStatuses",ei.NeedsGrading="needsGrading",ei.GradeNeedsPosting="gradeNeedsPosting",ei.NothingToGrade="nothingToGrade",ei.Completed="completedAttempt",(es=tB||(tB={})).Groups="groups",es.Members="members",es.GroupsAndMembers="groupsandmembers",(er=tL||(tL={})).InvalidFileFormat="bb-group-import-file-is-not-csv",er.EmptyFile="bb-group-import-file-is-empty",er.FileNotFound="bb-group-import-file-not-found-in-given-location",(eo=tN||(tN={})).Complete="Complete",eo.Delete="Delete",eo.Error="Error",eo.InProgress="InProgress",eo.Unknown="Unknown",(ea=tO||(tO={})).First="First",ea.Last="Last",(el=tM||(tM={})).PERCENTAGE="PERCENTAGE",el.PERCENTAGE_RANGE="PERCENTAGE_RANGE",el.POINTS="NUMERIC",el.POINTS_RANGE="NUMERIC_RANGE",(ec=t$||(t$={})).CourseCopy="CourseCopy",ec.Import="Import",ec.Restore="Restore",(ed=tH||(tH={})).Import="IMPORT",ed.Export="EXPORT",ed.Archive="ARCHIVE",ed.Restore="RESTORE",(eu=tF||(tF={}))[eu.System=0]="System",eu[eu.Course=1]="Course",eu[eu.Organization=2]="Organization",eu[eu.ContentHander=3]="ContentHander",(ep=tU||(tU={})).CourseRoster="course_roster",ep.Announcements="announcements",ep.Messages="messages",(em=tV||(tV={})).Continuous="CONTINUOUS",em.DateRange="DATE_RANGE",em.FixedNumDays="FIXED_NUM_DAYS",(eh=t_||(t_={})).Course="COURSE",eh.System="SYSTEM",(eg=tq||(tq={})).Draft="DRAFT",eg.Posted="POSTED",eg.Scheduled="SCHEDULED",(ef=tz||(tz={})).Standard="STANDARD",ef.Important="IMPORTANT",ef.Urgent="URGENT",n(22156),(eb=tW||(tW={})).ClassSchedule="C",eb.ExternalCourseSchedule="E",eb.OfficeHours="O";let nS="BYMONTHDAY";(ev=tj||(tj={})).Institution="INSTITUTION",ev.Personal="PERSONAL",(ey=tZ||(tZ={})).Monthly="MONTHLY",ey.Weekly="WEEKLY",ey.Daily="DAILY",(eC=tK||(tK={})).Sunday="SU",eC.Monday="MO",eC.Tuesday="TU",eC.Wednesday="WE",eC.Thursday="TH",eC.Friday="FR",eC.Saturday="SA",(tX||(tX={})).Gregorian="GREGORIAN";var nE=n(753463);(eS=tY||(tY={})).Student="S",eS.Instructor="P",eS.TeachingAssistant="T",eS.CourseBuilder="B",eS.Grader="G",eS.Guest="U",eS.Facilitator="BB_FACILITATOR",(eE=tQ||(tQ={})).Course="C",eE.Organization="O",eE.CourseAndOrganization="B",eE.None="N",(eI=tJ||(tJ={})).Teaching="TEACHING",eI.Supporting="SUPPORTING",eI.Taking="TAKING",eI.Visiting="VISITING",(ew=t0||(t0={})).AccountAdmin="A",ew.CourseCreator="C",ew.CourseSupport="R",ew.Guest="U",ew.Integration="X",ew.Observer="O",ew.Portal="Y",ew.SystemAdmin="Z",ew.SystemSupport="H",ew.User="N",(eA=t1||(t1={})).AccountAdmin="ACCOUNT_ADMIN",eA.CourseCreator="COURSE_CREATOR",eA.CourseSupport="COURSE_SUPPORT",eA.Guest="GUEST",eA.Integration="INTEGRATION",eA.Observer="OBSERVER",eA.Portal="PORTAL",eA.SystemAdmin="SYSTEM_ADMIN",eA.SystemSupport="SYSTEM_SUPPORT",eA.User="USER",eA.Default="USER",eA.None="USER",(ek=t2||(t2={})).Waiting="WAITING",ek.Assigned="ASSIGNED",ek.Running="RUNNING",ek.Complete="COMPLETE",ek.CompleteErrors="COMPLETE_ERRORS",ek.Incomplete="INCOMPLETE",(ex=t3||(t3={})).Copy="C",ex.ContentExchange="X",ex.ConvertToUltra="convertTOUltraQueuedOperation",ex.AssessmentRegrade="ASSESSMENT_REGRADE",ex.QuestionCopy="CopyQuestion",ex.ProgressUpdateContent="courseProgressUpdateContent",ex.Recycle="RecycleTask",ex.DelegatedGraderDistribution="delegatedGraderDistribution",ex.CloudStorageIntegrationDownload="downloadQueuedOperation",ex.AssignmentExport="ExportAssignments",ex.CalendarImport="calendar_import",ex.BulkCopyAndConvertOperation="BulkCopyAndConvertOperation",ex.BulkConvertOperation="BulkConvertOperation",(eT=t9||(t9={})).Given="GIVEN_NAME",eT.Other="OTHER_NAME",eT.Both="BOTH",(eP=t4||(t4={})).K8="K_8",eP.HighSchool="HIGH_SCHOOL",eP.Freshman="FRESHMAN",eP.Sophomore="SOPHOMORE",eP.Junior="JUNIOR",eP.Senior="SENIOR",eP.GraduateSchool="GRADUATE_SCHOOL",eP.PostGraduateSchool="POST_GRADUATE_SCHOOL",eP.Unknown="UNKNOWN",(eD=t7||(t7={})).Female="FEMALE",eD.Male="MALE",eD.Other="OTHER",eD.Unknown="UNKNOWN",(eG=t5||(t5={})).Nobody="NOBODY",eG.Classmates="CLASSMATES",eG.Everyone="EVERYONE",(eR=t6||(t6={})).ActivityStream="ActivityStream",eR.CourseList="CourseList",eR.InstitutionPage="InstitutionPage",(eB=t8||(t8={})).Course="COURSE",eB.Org="ORG",(eL=ne||(ne={})).Yes="Y",eL.No="N",(eN=nt||(nt={})).ActivityStream="ActivityStream",eN.CourseList="CourseList",eN.InstitutionPage="InstitutionPage",(eO=nn||(nn={})).Waiting="WAITING",eO.Assigned="ASSIGNED",eO.Running="RUNNING",eO.Complete="COMPLETE",eO.CompleteErrors="COMPLETE_ERRORS",eO.Incomplete="INCOMPLETE";var nI=n(954580);n(725409),(eM=ni||(ni={})).Group="GROUP",eM.User="USER";let nw=",",nA=100,nk="pronounNameXssViolation";(e$=ns||(ns={})).Approved="APPROVED",e$.Pending="PENDING",n(562111),(eH=nr||(nr={})).Application="Application",eH.ContentHandler="ContentHandler",eH.ContentItemMessage="ContentItemMessage",eH.System="System",eH.Administrator="Administrator",eH.UltraUI="UltraUI",eH.BaseNavigation="BaseNavigation",eH.Proctoring="Proctoring",eH.CloudDocument="CloudDocument",(eF=no||(no={})).Embedded="EmbeddedCD",eF.CloudCollaboration="CloudCollaborationCD";var nx=n(478220),nT=n(447006)},234967:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});let i="dueDateHasPassed"},954580:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});let i="bb-rest-input-too-long"},753463:function(e,t,n){"use strict";n.d(t,{HX:function(){return d},JX:function(){return r},K0:function(){return s},Oq:function(){return i},UB:function(){return l},bS:function(){return a},nM:function(){return o},uR:function(){return c}});let i="reusePolicyViolation",s="minimumAgePolicyViolation",r="contentPolicyViolation",o="exposedPasswordProtectionViolation",a="bb-blackboard-core-reuse-policy-violated",l="bb-blackboard-core-min-age-violated",c="bb-blackboard-core-content-policy-violated",d="bb-blackboard-core-exposed-password-protection-violated"},389860:function(e,t,n){"use strict";n.d(t,{HV:function(){return tv},j4:function(){return en},JD:function(){return M},Ad:function(){return eE},xu:function(){return eP},Gu:function(){return o},K6:function(){return eT},O4:function(){return eD},w:function(){return eW},N0:function(){return ek},VH:function(){return e_},BH:function(){return tX},rO:function(){return eR},O1:function(){return tg},KM:function(){return tm},Kb:function(){return th},Wj:function(){return ty},dJ:function(){return tp},iw:function(){return tZ},qq:function(){return eB},FO:function(){return tK},st:function(){return eH},Xd:function(){return eU},UY:function(){return tY}});var i,s,r,o,a=n(202784),l=n.n(a),c=n(906277),d=n(755755),u=n(555342),p=n(398435),m=n(273386),h=n(408027),g=n(579633),f=n(303210),b=n(281699),v=n(797580);let y=(0,b.makeStyles)(e=>({wrapper:{display:"flex",width:"100%"},avatar:{borderRadius:"50%",height:"24px",marginRight:"10px",marginTop:"8px",width:"24px"},names:{display:"inline-block",width:"90%"},givenName:{display:"block",marginRight:"10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},username:{color:e.palette.text.secondary,display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},highlight:{fontWeight:v.vC.fontWeightBold}})),C=e=>{var t;let n=y(e);return a.createElement(f.sN,{...e},a.createElement("div",{className:n.wrapper},a.createElement("img",{className:n.avatar,src:null===(t=e.option.user.avatar)||void 0===t?void 0:t.permanentUrl,alt:e.option.value}),a.createElement("span",{className:n.names},a.createElement("span",{className:n.givenName},e.option.label),a.createElement("span",{className:n.username},e.option.user.userName))))};var S=n(951248);let E=(e,t)=>S.Ys.courseMembership.getCourseMembershipViewStatusByQuery(e,t),I=(e,t)=>{let n=e.getState(),i=E(n,t),s=S.Ys.courseMembership.getCourseMembershipsByQuery(n,t),r=S.Ys.user.getUsersByIds(n,s.reduce((e,t)=>(t.userId&&e.push(t.userId),e),[]));return{memberships:s,users:r,view:i}},w=async(e,t)=>{let n=e.getState(),i=E(n,t);if(i&&i.isValid&&!i.isLoading)return I(e,t);let s=e.dispatch;return s(S.Nwg.courseMembership.loadCourseMembershipsByQuery(t)).then(()=>I(e,t))};var A=n(999058),k=n.n(A);let x=(e,t,n)=>{let[i,s]=a.useState(e+t+n),r=t+e;return r>i&&s(r+n),i},T=e=>l().createElement(p.AnalyticsCombobox,{...e}),P=e=>l().createElement(p.AnalyticsAsyncCombobox,{...e}),D=[{field:h.PJt.Role,direction:h.SrV.Descending},{field:h.PJt.FamilyName,direction:h.SrV.Ascending},{field:h.PJt.GivenName,direction:h.SrV.Ascending}],G={membershipAvailable:!0,includeMe:!1},R=(e,t,n,i,s)=>(null==e?void 0:e.length)>=s?[]:t.reduce((e,t)=>{var s;if(!t.userId)return e;let r=n[t.userId];return r.id&&e.push({value:r.id,user:r,label:null!==(s=i(r,g.ILocaleUsernameFormat.Short))&&void 0!==s?s:""}),e},[]),B=(e=[],t)=>e.reduce((e,n)=>{var i;return n.id&&e.push({value:n.id,user:n,label:null!==(i=t(n,g.ILocaleUsernameFormat.Short))&&void 0!==i?i:""}),e},[]),L=(e,t)=>({users:e=(t=t.slice(0,50)).reduce((t,n)=>(n.userId&&(t[n.userId]=e[n.userId]),t),{}),memberships:t}),N=(e,t,n,i,s)=>{let r=(0,m.WT)(),o=(0,a.useCallback)(k()(async i=>{let o=await w(r,{courseId:e,paging:{limit:t},filter:{...G,roleBucket:n,searchString:i},sort:D});return s(o.users,o.memberships)},500),[e,s,t]),l=(0,a.useCallback)((e,t)=>{let n=o(e);n.then(e=>{t(e)})},[o]);return l},O=(e,t,n,i)=>{var s,r;let o=x(50,n.length,10),a=N(e,o,t,n,i),{memberships:l,users:c,view:d}=(0,m.d$)({courseId:e,paging:{limit:o},filter:{...G,roleBucket:t,searchString:""},sort:D}),u=L(c,l);return{...u,totalUsers:null!==(r=null===(s=null==d?void 0:d.paging)||void 0===s?void 0:s.count)&&void 0!==r?r:0,loadPickerUsersCallback:a}},M=({inputId:e,analyticsId:t,courseId:n,placeholder:i,onMemberSelectionChanged:s,disabled:r,selectedUsers:o,selectionLimit:p,label:m,roleBuckets:g})=>{let{translate:f,formatUsername:b}=(0,d.h)(),v=(0,a.useCallback)((e,t)=>R(o,t,e,b,p),[b,o,p]),y=null!=g?g:[h.O8v.Taking,h.O8v.Supporting],{users:S,memberships:E,totalUsers:I,loadPickerUsersCallback:w}=O(n,y,o,v),A={noResults(){return(null==o?void 0:o.length)>=p?f("course.learn-data-components.course-members-picker.noResultsMax"):f("course.learn-data-components.course-members-picker.noResults")}},k=(0,u.Jv)(A),x=(0,u.Kx)(A),D=(0,u.rv)(),G=R(o,E,S,b,p),L=B(o,b),N={id:null!=e?e:"course-memberships-combobox",analyticsId:`${t}.userPicker}`,classes:{root:(0,c.Z)(D.comboboxReset,D.comboboxWidth,"js-individual-members-combobox")},isClearable:!0,label:m,disabled:r,components:{MenuItem:C},value:L,placeholder:i,onChange:e=>{var t;s(null!==(t=null==e?void 0:e.map(e=>e.user))&&void 0!==t?t:[])}};return I>50?l().createElement("div",{className:D.comboboxContainerWidth},l().createElement(P,{isMulti:!0,loadOptions:w,defaultOptions:G,strings:x,...N})):l().createElement("div",{className:D.comboboxContainerWidth},l().createElement(T,{isMulti:!0,options:G,strings:k,...N}))};var $=n(410628);let H=(0,b.makeStyles)(e=>(0,b.createStyles)({groupSize:{background:v.Oq.b9,color:v.yV.primary,borderRadius:"50%",width:"24px",height:"24px",display:"inline-block",marginRight:"10px",textAlign:"center",fontWeight:e.typography.fontWeightBold,lineHeight:"24px"},maxUser:{fontSize:e.typography.fontSizeSmall},highlight:{fontWeight:e.typography.fontWeightBold}})),F=e=>{var t;let{option:n}=e,i=H(e),s=null!==(t=n.group.studentCount)&&void 0!==t?t:100,r=(0,$.q)();return l().createElement(f.sN,{...e},l().createElement("span",{className:(0,c.Z)("js-group-size",i.groupSize,s>99&&i.maxUser)},s>99?r("course.learn-data-components.course-groups-picker.maxUsers"):s),l().createElement("span",null,n.label))};var U=n(438501);let V=(0,b.makeStyles)(e=>(0,b.createStyles)({groupSet:{display:"flex",width:"100%"},label:{flex:1,overflow:"hidden",textOverflow:"ellipsis",paddingRight:"10px"},visibility:{fontWeight:e.typography.fontWeightRegular,color:e.palette.text.hint,display:"flex"},visibilityIcon:{marginRight:"5px",alignSelf:"center"}})),_=e=>{let{group:t}=e,n=(0,$.q)(),i=V(e),s=n(t.groupSet.isAvailable?"course.learn-data-components.course-groups-picker.visible":"course.learn-data-components.course-groups-picker.hidden");return a.createElement(f.lX,{...e},a.createElement("span",{className:i.groupSet},a.createElement("span",{className:i.label},e.children),a.createElement("span",{className:i.visibility},t.groupSet.isAvailable?a.createElement(U.Visible,{className:i.visibilityIcon}):a.createElement(U.Invisible,{className:i.visibilityIcon}),a.createElement("span",null,s))))},q=(e,t)=>S.Ys.group.getCourseGroupViewStatusByQuery(e,t),z=(e,t)=>{let n=e.getState(),i=q(n,t),s=S.Ys.group.getGroupsByQuery(n,t);return{groups:s,view:i}},W=async(e,t)=>{let n=e.getState(),i=q(n,t);if(i&&i.isValid&&!i.isLoading)return z(e,t);let s=e.dispatch;return s(S.Nwg.group.loadGroupsByQuery(t)).then(()=>z(e,t))},j=e=>l().createElement(p.AnalyticsCombobox,{...e}),Z=e=>l().createElement(p.AnalyticsAsyncCombobox,{...e}),K=e=>{var t,n;return{group:e,label:null!==(t=e.title)&&void 0!==t?t:"",value:null!==(n=e.id)&&void 0!==n?n:""}},X=(e,t,n)=>{let i=new Map;return!((null==e?void 0:e.length)>=n)&&(null==t?void 0:t.length)?(t.forEach(e=>{var t;if(!(null==e?void 0:e.groupSet)||!(null==e?void 0:e.groupSetId))return;let n=e.groupSet,s=K(e);if(!n.id)return;let r=i.get(n.id);if(r)r.options.push(s);else{let r={label:null!==(t=n.title)&&void 0!==t?t:"",groupSet:n,options:[]};r.options.push(s),i.set(e.groupSetId,r)}}),Array.from(i.values())):[]},Y=(e=[])=>e.map(e=>K(e)),Q=e=>e.slice(0,50),J=(e,t,n,i)=>{let s=(0,m.WT)(),[r,o]=(0,a.useState)([]),l=(0,a.useMemo)(()=>k()(async n=>{let{groups:r}=await W(s,{courseId:e,filter:{nameOrGroupSetName:n,inGroupSet:!0,groupNameCompare:S.a6B.contains},paging:{limit:t}}),a=i(Q(r));return o(a),a},500),[s,e,t,i]),c=(0,a.useCallback)((e,t)=>{let n=l(e);n.then(e=>{t(e)})},[l]);return{memoizedLoadOptionsCallback:c,optionData:r}},ee=(e,t,n)=>{var i,s;let r=x(50,t.length,10),{memoizedLoadOptionsCallback:o,optionData:a}=J(e,r,t,n),{groups:l,view:c}=(0,m.tp)({courseId:e,filter:{nameOrGroupSetName:"",inGroupSet:!0},paging:{limit:r}});return{groups:Q(l),totalGroups:null!==(s=null===(i=null==c?void 0:c.paging)||void 0===i?void 0:i.count)&&void 0!==s?s:0,optionData:a.length>0?a:n(Q(l)),loadPickerGroupsCallback:o}},et=(e,t)=>{var n,i;return!!(e.label.toLocaleLowerCase().includes(t.toLocaleLowerCase())||(null===(i=null===(n=e.group.groupSet)||void 0===n?void 0:n.title)||void 0===i?void 0:i.toLocaleLowerCase().includes(t.toLocaleLowerCase())))},en=({inputId:e,analyticsId:t,courseId:n,onSelectedGroupsChanged:i,disabled:s,placeholder:r,selectedGroups:o=[],selectionLimit:d,label:p})=>{let m=(0,$.q)(),h=(0,a.useCallback)(e=>X(o,e,d),[o,d]),{groups:g,totalGroups:f,optionData:b,loadPickerGroupsCallback:v}=ee(n,o,h),y=(0,a.useCallback)(e=>Array.isArray(e)?{visibleGroupCount:e.reduce((e,t)=>{var n;return(null===(n=t.group)||void 0===n?void 0:n.isAvailable)?e+1:e},0),totalGroupCount:e.length}:{visibleGroupCount:e.group.isAvailable?1:0,totalGroupCount:1},[]),C={noResults(){return(null==o?void 0:o.length)>=d?m("course.learn-data-components.course-groups-picker.noResultsMax"):m("course.learn-data-components.course-groups-picker.noResults")}},S=(0,u.Jv)(C),E=(0,u.Kx)(C),I=(0,u.rv)(),w=X(o,g,d),A=Y(o),k={id:null!=e?e:"course-groups-combobox",analyticsId:`${t}.groupsPicker`,classes:{root:(0,c.Z)(I.comboboxReset,I.comboboxWidth,"js-groups-combobox")},isClearable:!0,label:p,searchFilter:et,disabled:s,getOnChangeAnalyticsData:y,components:{MenuItem:F,MenuListSubheader:_},value:A,placeholder:r,onChange:e=>{var t;i(null!==(t=null==e?void 0:e.map(e=>e.group))&&void 0!==t?t:[])}};return f>50?l().createElement("div",{className:I.comboboxContainerWidth},l().createElement(Z,{isMulti:!0,loadOptions:v,defaultOptions:w,strings:E,...k})):l().createElement("div",{className:I.comboboxContainerWidth},l().createElement(j,{isMulti:!0,options:w,strings:S,...k}))};var ei=n(927335),es=n(238136);let er=new Map,eo=new Map,ea=new Map;eo.set(h.bu3.Assignment,ei.Assignment),eo.set(h.bu3.Attendance,ei.Attendance),eo.set(h.bu3.Calculation,ei.Calculation),eo.set(h.bu3.Discussion,ei.Discussion),eo.set(h.bu3.Exam,ei.Test),eo.set(h.bu3.Homework,ei.Home),eo.set(h.bu3.Journal,ei.Grades),eo.set(h.bu3.LTI,es.Lti),eo.set(h.bu3.Presentation,ei.PresentationMenu),eo.set(h.bu3.Quiz,ei.Test),eo.set(h.bu3.ScormEngine,es.Scormengine),eo.set(h.bu3.Test,ei.Test),(i=r||(r={})).Small="small",i.Medium="medium",i.Large="large";let el=e=>{let{category:t,size:n}=e,i=eo;if(n===r.Small?i=er:n===r.Large&&(i=ea),(null==t?void 0:t.isUserDefined)||!(null==t?void 0:t.title))return a.createElement(ei.DocumentBlank,null);let s=null==t?void 0:t.title,o=i.get(s);return o?a.createElement(o,null):a.createElement(ei.DocumentBlank,null)},ec=(0,b.makeStyles)(e=>({wrapper:{display:"flex",alignItems:"center",width:"100%"},iconWrapper:{display:"flex",alignItems:"center",marginRight:"10px",width:"24px"},columnName:{width:"90%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},highlight:{fontWeight:e.typography.fontWeightBold}})),ed=e=>{let t=ec(e);return a.createElement(f.sN,{...e},a.createElement("div",{className:t.wrapper},a.createElement("div",{className:t.iconWrapper},a.createElement(el,{category:e.option.column.gradebookCategory,size:r.Medium})),a.createElement("span",{className:t.columnName},e.option.label)))},eu=(e,t)=>S.Ys.gradebookColumn.getGradebookColumnViewStatusByQuery(e,t),ep=(e,t)=>{let n=e.getState(),i=eu(n,t),s=S.Ys.gradebookColumn.getGradebookColumnsByQuery(n,t);return{columns:s,view:i}},em=async(e,t)=>{let n=e.getState(),i=eu(n,t);if(i&&i.isValid&&!i.isLoading)return ep(e,t);let s=e.dispatch;return s(S.Nwg.gradebookColumn.loadGradebookColumnsByQuery(t)).then(()=>ep(e,t))},eh=e=>l().createElement(p.AnalyticsCombobox,{...e}),eg=e=>l().createElement(p.AnalyticsAsyncCombobox,{...e}),ef=[{field:S.zg8.ColumnName,direction:h.SrV.Ascending}],eb=(e,t,n=!1,i)=>(null==e?void 0:e.length)>=i?[]:t.reduce((e,t)=>{if(!t.id||!t.columnName)return e;let i=t.externalGrade&&n||!t.externalGrade;return i&&e.push({value:t.id,column:t,label:t.columnName}),e},[]),ev=(e=[],t=!1)=>e.reduce((e,n)=>(n.id&&n.columnName&&(!n.externalGrade||t)&&e.push({value:n.id,column:n,label:n.columnName}),e),[]),ey=e=>e.slice(0,50),eC=(e,t,n,i)=>{let s=(0,m.WT)(),r=(0,a.useCallback)(k()(async n=>{let{columns:r}=await em(s,{courseId:e,filter:{name:n},paging:{limit:t},sort:ef});return i(r)},500),[e,t,i]),o=(0,a.useCallback)((e,t)=>{let n=r(e);n.then(e=>{t(e)})},[r]);return o},eS=(e,t,n)=>{var i,s;let r=x(50,t.length,10),o=eC(e,r,t,n),{gradebookColumns:a,view:l}=(0,m.nh)({courseId:e,paging:{limit:r},sort:ef}),c=ey(a);return{columns:c,totalColumns:null!==(s=null===(i=null==l?void 0:l.paging)||void 0===i?void 0:i.count)&&void 0!==s?s:0,loadPickerColumnsCallback:o}},eE=({inputId:e,analyticsId:t,courseId:n,placeholder:i,onColumnSelectionChanged:s,disabled:r,allowExternalGradeColumns:o,selectedColumns:d,selectionLimit:p,label:m})=>{let h=(0,$.q)(),g=(0,a.useCallback)(e=>eb(d,e,o,p),[o,d,p]),{columns:f,totalColumns:b,loadPickerColumnsCallback:v}=eS(n,d,g),y={noResults(){return(null==d?void 0:d.length)>=p?h("course.learn-data-components.course-columns-picker.noResultsMax"):h("course.learn-data-components.course-columns-picker.noResults")}},C=(0,u.Jv)(y),S=(0,u.Kx)(y),E=(0,u.rv)(),I=eb(d,f,o,p),w=ev(d,o),A={id:null!=e?e:"course-columns-combobox",analyticsId:`${t}.columnsPicker}`,classes:{root:(0,c.Z)(E.comboboxReset,E.comboboxWidth,"js-columns-combobox")},isClearable:!0,label:m,disabled:r,components:{MenuItem:ed},value:w,placeholder:i,onChange:e=>{var t;s(null!==(t=null==e?void 0:e.map(e=>e.column))&&void 0!==t?t:[])}};return b>50?l().createElement("div",{className:E.comboboxContainerWidth},l().createElement(eg,{isMulti:!0,loadOptions:v,defaultOptions:I,strings:S,...A})):l().createElement("div",{className:E.comboboxContainerWidth},l().createElement(eh,{isMulti:!0,options:I,strings:C,...A}))},eI=(0,b.makeStyles)(e=>(0,b.createStyles)({root:{display:"flex",flexDirection:"column",width:"100%"},baseText:{flip:!1,overflow:"hidden",direction:e.direction,textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},userFlex:{display:"flex",alignItems:"center"},userAccommodation:{color:e.palette.brand.main,marginInlineEnd:"5px"},userName:{color:"inherit",textDecoration:"none","&:hover, &:focus, &:active":{color:"inherit",textDecoration:"underline"}},userPronunciation:{display:"flex",width:"100%"},userPronunciationAudio:{flexDirection:"row","& $pronunciationAudio":{"& button":{minWidth:0,minHeight:0,padding:"0 5px"}}},pronouns:{"&$pronouns$pronouns":{display:"block",fontWeight:e.typography.fontWeightRegular}},pronunciation:{"&$pronunciation$pronunciation":{display:"flex",alignItems:"center",margin:"0 -5px","& > span":{padding:"0 5px",fontWeight:e.typography.fontWeightRegular}}},pronunciationAudio:{},subtext:{color:e.palette.text.secondary,lineHeight:"18px",fontSize:e.typography.fontSizeSmall,fontWeight:e.typography.fontWeightRegular}})),ew=e=>{var t,n,i;let{user:s,username:r,ariaHidden:o,showPronouns:l,subtext:d,showPronunciation:p,showAccommodation:m,userNameBdiStyles:h,userNameStyles:g,rootStyles:f}=e,b=(0,$.q)(),v=eI();if(!s)return a.createElement(a.Fragment,null);let y={[v.userFlex]:m||p&&(null===(t=s.pronunciationAudio)||void 0===t?void 0:t.permanentUrl),[v.userPronunciationAudio]:p&&(null===(n=s.pronunciationAudio)||void 0===n?void 0:n.permanentUrl)};return a.createElement("div",{className:(0,c.Z)(v.root,f)},a.createElement("div",{className:(0,c.Z)(v.userPronunciation,y,g)},m&&a.createElement(U.Accommodations,{className:v.userAccommodation,titleAccess:b("cr.components.username.accommodationAriaLabel")}),a.createElement("bdi",{"aria-hidden":o,className:(0,c.Z)(v.baseText,h)},r),p&&(null===(i=s.pronunciationAudio)||void 0===i?void 0:i.permanentUrl)&&a.createElement(u.zi,{className:(0,c.Z)(v.pronunciationAudio),analyticsId:"username.pronunciation",src:s.pronunciationAudio.permanentUrl,ariaLabel:b("cr.components.username.pronunciationAriaLabel")})),p&&s.pronunciation&&a.createElement("bdi",{className:(0,c.Z)(v.baseText,v.pronunciation,e.pronunciationStyles)},a.createElement("span",{"aria-hidden":o},s.pronunciation)),l&&s.pronouns&&a.createElement("bdi",{"aria-hidden":o,className:(0,c.Z)(v.baseText,v.pronouns,e.pronounsStyles)},s.pronouns),d&&a.createElement("span",{"aria-hidden":o,className:(0,c.Z)(v.baseText,v.subtext,"username-subtext")},d))};var eA=n(443400);let ek="othername_as_display_name_option",ex=(e,t)=>{var n,i;let{formatUsername:s}=(0,d.h)(),r=(0,m.Sp)(ek),o=t&&r?(0,eA.dT)(t,r):void 0,l=!!t,c=(0,a.useMemo)(()=>{var n,i;if(!l)return"";let r={familyName:t.familyName,givenName:t.givenName,email:t.email,id:t.id,otherName:t.otherName,title:t.title,ui:{anonymousStudent:null===(n=t.ui)||void 0===n?void 0:n.anonymousStudent,anonymousStudentId:null===(i=t.ui)||void 0===i?void 0:i.anonymousStudentId},preferredDisplayName:o};return s(r,e,{noWrap:!0})},[e,s,l,o,null==t?void 0:t.email,null==t?void 0:t.familyName,null==t?void 0:t.givenName,null==t?void 0:t.id,null==t?void 0:t.otherName,null==t?void 0:t.title,null===(n=null==t?void 0:t.ui)||void 0===n?void 0:n.anonymousStudent,null===(i=null==t?void 0:t.ui)||void 0===i?void 0:i.anonymousStudentId]);return c},eT=e=>{let{user:t,format:n}=e,i=ex(n,t);return l().createElement(ew,{...e,username:i})},eP=e=>{let{analyticsId:t,user:n,format:i,onClick:s,link:r}=e,o=eI(),a=ex(i,n),d=n&&s?l().createElement(p.AnalyticsLink,{className:(0,c.Z)(o.userName),analyticsId:`${t}.link`,href:null!=r?r:"#",onClick:()=>s(n)},a):a;return l().createElement(ew,{...e,username:d})},eD=e=>{let{users:t,format:n=g.ILocaleUsernameFormat.Short,maxUsers:i,canExpand:s=!1,moreKey:r,collapseKey:o}=e,{formatUsername:c}=(0,d.h)(),p=(0,a.useMemo)(()=>t.map(e=>({user:e,username:c(e,n)})).map(({user:e,username:t})=>{var n,i;if(null===(n=e.ui)||void 0===n?void 0:n.onClick){let n=null===(i=e.ui)||void 0===i?void 0:i.onClick;return l().createElement("a",{href:"#",onClick:()=>n(e)},t)}return t}),[t,n,c]);return l().createElement(u.Mc,{analyticsId:"localized-usernames",items:p,maxItems:i,canExpand:s,moreKey:r,collapseKey:o})},eG=(0,b.makeStyles)(e=>(0,b.createStyles)({userCardPreview:{display:"flex",border:`1px solid ${e.palette.border.main}`,borderRadius:"2px",padding:"13px 19px"},avatar:{width:"20%"},userInfo:{width:"80%"},userName:{fontSize:"16px",fontWeight:e.typography.fontWeightSemiBold,"& bdi":{whiteSpace:"initial"}}})),eR=e=>{let{givenName:t,familyName:n,otherName:i,pronunciation:s,pronunciationAudioUrl:r,preferredDisplayName:o,pronouns:l}=e,c=eG(),{formatUsername:u}=(0,d.h)(),m={givenName:t,familyName:n,otherName:i,pronunciation:s,pronunciationAudio:{permanentUrl:r},preferredDisplayName:o,pronouns:l},h=u(m,g.ILocaleUsernameFormat.Short);return a.createElement("div",{className:c.userCardPreview},a.createElement("div",{className:c.avatar},a.createElement(p.AnalyticsAvatar,{size:"medium",alt:h})),a.createElement("div",{className:c.userInfo},a.createElement(eT,{userNameStyles:c.userName,format:g.ILocaleUsernameFormat.Short,ariaHidden:!0,user:m,showPronouns:!0,showPronunciation:!0})))};function eB(e,t){return`${t?"organization.":"course."}${e}`}let eL=(e,t)=>{let n=[];return t.forEach(t=>{let i=S.Ys.fileUpload.getGroupStatusById(e,t);i&&n.push(i)}),n};var eN=n(44432);function eO(e,t){return e===t||e.length===t.length&&e.every((e,n)=>(0,eN.wU)(t[n],e))}function eM(e,t){return e===t||e.length===t.length&&e.every((e,n)=>{var i;return(i=t[n])===e||i.groupId===e.groupId&&eO(i.pendingUploads,e.pendingUploads)&&eO(i.uploads,e.uploads)})}let e$=e=>(0,m.pJ)(t=>{let n=eL(t,e),i=n.map(({groupId:e,pendingUploads:n,uploads:i})=>{let s={groupId:e,pendingUploads:n,uploads:[]};return s.uploads=i.reduce((e,n)=>{var i;let s=S.Ys.fileUpload.getFileUploadById(t,n);return s&&e.push({correlationId:n,filename:null!==(i=s.filename)&&void 0!==i?i:"",status:s.status,error:s.error}),e},[]),s});return i},eM),eH=e=>{let t=e$(e.current),n=function(){let{translate:e,formatItems:t}=(0,d.h)(),n=(0,a.useCallback)(t=>{let n;n=t.length>1?e("components.directives.fileUpload.aria.multipleFiles.uploadStarted.plural",{filesCount:t.length}):e("components.directives.fileUpload.aria.singleFile.uploadStarted"),(0,eA.ul)(n)},[e]),i=(0,a.useCallback)(n=>{let i;if(1===n.length){var s,r;i=(s=n[0]).status===S.XXy.Complete?e("components.directives.fileUpload.aria.singleFile.uploadSuccessful"):s.status!==S.XXy.Failed||(null===(r=s.error)||void 0===r?void 0:r.errorType)?void 0:e("components.directives.fileUpload.aria.singleFile.uploadFailed")}else i=function(e,t,n){let i=[],s=[];n.forEach(e=>{e.status===S.XXy.Failed?i.push(e.filename):e.status===S.XXy.Canceled&&s.push(e.filename)});let r=n.length-s.length;return r<=0?void 0:i.length===r?e("components.directives.fileUpload.aria.multipleFiles.uploadFailed"):0===i.length?e("components.directives.fileUpload.aria.multipleFiles.uploadSuccessful.plural",{filesCount:r}):`${e("components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",{successfulFilesCount:r-i.length,filesCount:r})} ${e("components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",{filesCount:i.length,filenameList:t(i,i.length,void 0)})}`}(e,t,n);i&&(0,eA.ul)(i)},[e,t]);return{readUploadStarted:n,readUploadFinished:i}}();return(0,a.useEffect)(()=>{if(0===t.length)return;let i=[];t.forEach(e=>{0===e.pendingUploads.length&&i.push(e)}),i.forEach(e=>{n.readUploadFinished(e.uploads)}),i.forEach(t=>{e.current.delete(t.groupId)})},[t,n.readUploadFinished,n.readUploadStarted]),(0,a.useCallback)((t,i)=>{e.current.add(t),n.readUploadStarted(i)},[n.readUploadStarted])};function eF(e,t){return e===t||e.length===t.length&&e.every((e,n)=>{var i;return(i=t[n])===e||i.groupId===e.groupId&&eO(i.oversizedFiles,e.oversizedFiles)})}let eU=e=>(0,m.pJ)(t=>{let n=eL(t,e);return n.reduce((e,{groupId:t,oversizedFiles:n})=>(n.length>0&&e.push({groupId:t,oversizedFiles:n}),e),[])},eF);var eV=n(311822);let e_=e=>{let{processError:t,isCloudUpload:n,errorCode:i,filename:s}=e,[r,o]=(0,a.useState)(!1),c=(0,$.q)(),d=()=>{o(!1),t()},u=n?s?"components.directives.cloudStorageIntegration.modal.generalError":"components.directives.cloudStorageIntegration.modal.generalErrorWithoutName":s?422===i?"components.directives.fileUpload.securityError":"components.directives.fileUpload.generalError":422===i?"components.directives.fileUpload.securityErrorWithoutName":"components.directives.fileUpload.generalErrorWithoutName";return l().createElement(eV._X,{analyticsId:u,"aria-labelledby":"upload-error-dialog-heading-id",onClose:()=>d(),open:!r,TransitionProps:{onExited:d}},l().createElement(p.AnalyticsDialogTitle,{analyticsId:"upload.error.dialog.title",id:"upload-error-dialog-heading-id","aria-describedby":"upload-error-dialog-message-id",onClose:()=>d()},c("components.directives.fileUpload.errorTitle")),l().createElement(p.AnalyticsDialogContent,{analyticsId:"upload.error.dialog.content"},l().createElement(p.AnalyticsDialogContentText,{analyticsId:"upload.error.dialog.content.text",id:"upload-error-dialog-message-id"},c(u,{filename:s}))),l().createElement(p.AnalyticsDialogActions,{analyticsId:"upload.error.dialog.actions"},l().createElement(p.AnalyticsPrimaryButton,{analyticsId:"components.directives.fileUpload.cancelUploadText.button",onClick:()=>d()},c("components.directives.fileUpload.cancelUploadText"))))},eq=(0,b.makeStyles)(()=>({oversizedFileList:{maxHeight:"140px",overflowY:"auto"}})),ez=e=>e/1048576,eW=e=>{let t;let{uploadIds:n,exitCallback:i}=e,[s,r]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),c=(0,$.q)(),d=eq(),u=(0,m.c2)(),h=(0,m.pJ)(e=>n.map(t=>S.Ys.fileUpload.getFileUploadById(e,t)),eN.wU),g=(e=!1)=>{l(e),r(!0)};return 0===h.length?null:(t=(null==u?void 0:u.displayRecommendedAlternatives)?c("components.directives.fileUpload.maxSizeWarningAlternateStorage",{alternateStorage:null==u?void 0:u.recommendedAlternatives}):c("components.directives.fileUpload.maxSizeWarningNoAlternateStorage"),a.createElement(eV._X,{isAlert:!0,analyticsId:"components.directives.fileUpload.maxSizeWarningPrimary","aria-labelledby":"max-file-size-dialog-heading-id",open:!s,TransitionProps:{onExited:()=>{i(o)}},onClose:()=>g(!0)},a.createElement(p.AnalyticsDialogTitle,{analyticsId:"components.directives.fileUpload.title",onClose:()=>g(!0),id:"max-file-size-dialog-heading-id","aria-describedby":"max-file-size-dialog-message-id"},c("components.directives.fileUpload.maxSizeWarningTitle")),a.createElement(p.AnalyticsDialogContent,{analyticsId:"components.directives.fileUpload.content"},a.createElement(p.AnalyticsDialogContentText,{analyticsId:"components.directives.fileUpload.text",id:"max-file-size-dialog-message-id"},c("components.directives.fileUpload.maxSizeWarningMessage",{maxFileSize:ez(null==u?void 0:u.maxUploadSizeInBytes)})),a.createElement("div",{className:d.oversizedFileList},a.createElement("ul",null,h.map((e,t)=>a.createElement("li",{key:n[t]},c("components.directives.fileUpload.maxSizeWarningFiles",{fileName:e.filename,fileSize:ez(e.filesize)}))))),a.createElement(p.AnalyticsDialogContentText,{analyticsId:"components.directives.fileUpload.text"},t,(null==u?void 0:u.displaySupportLink)&&a.createElement(a.Fragment,null,"\xa0",a.createElement("span",{dangerouslySetInnerHTML:{__html:c("components.directives.fileUpload.maxSizeWarningSupportLinkText",{supportLink:null==u?void 0:u.supportLink})}})))),a.createElement(p.AnalyticsDialogActions,{analyticsId:"components.directives.fileUpload.actions"},a.createElement(p.AnalyticsPrimaryButton,{analyticsId:"components.directives.fileUpload.maxSizeWarningPrimary",onClick:()=>g(!0)},c("components.directives.fileUpload.maxSizeWarningPrimary")))))};var ej=n(115296),eZ=n(477115),eK=n(610455),eX=n(20856),eY=n(768722),eQ=n(345349),eJ=n(361333),e0=n(741343),e1=n(520091),e2=n(852632),e3=n(623402),e9=n(139936),e4=n(904749),e7=n(718359),e5=n(892208),e6=n(830858),e8=n(303103),te=n(708339),tt=n(773331),tn=n(747216),ti=n(120560),ts=n(543375),tr=n(124057),to=n(864094),ta=n(720847),tl=n(13480),tc=n(420628),td=n(374991);function tu(e){return e.replace(/^img-icon-/,"")}function tp(e){let t=tu(e);switch(t){case h.zcD.Assignment:return ej.M;case h.zcD.Attendance:return eZ.u;case h.zcD.Audio:return tl.B;case h.zcD.Blog:return eK.l;case h.zcD.Course:return td.T;case h.zcD.Calculation:return eX.E;case h.zcD.Discussion:return eY.$;case h.zcD.DocumentBlank:return eQ.E;case h.zcD.DocumentCloud:return eJ.g;case h.zcD.CollaborativeCloud:return e0.u;case h.zcD.Document:return e1.s;case h.zcD.Folder:case h.zcD.FolderOpen:return e2.g;case h.zcD.Homework:return e3.A;case h.zcD.Journal:return e4.t;case h.zcD.LearningModule:return e7.W;case h.zcD.Link:return e5.r;case h.zcD.LTI:return e6.U;case h.zcD.OverallGrade:return e8.b;case h.zcD.Pdf:return te.Q;case h.zcD.Photo:return e9.P;case h.zcD.Presentation:return tt.A;case h.zcD.Scorm:return tn.C;case h.zcD.Spreadsheet:return ti.Y;case h.zcD.Survey:return ts.m;case h.zcD.Test:case h.zcD.Quiz:case h.zcD.Exam:return tr.e;case h.zcD.Textbook:return to.w;case h.zcD.Video:return ta.n;case h.zcD.Zip:return tc.s;default:return eQ.E}}function tm(e,t){var n,i,s,r,o,a,l,c,d;let u=S.AaE.getContentHandler(e);if(S.GQk.File.isEqualTo(u)){let t=null===(s=null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[h.DXv.File])||void 0===i?void 0:i.file)||void 0===s?void 0:s.mimeType;if(t)return tp((0,S.RMg)(t))}if(S.AaE.isFolderContentItem(e)&&"ROOT"===e.title&&null==e.parentId)return tp(h.zcD.Course);if(S.GQk.LtiLink.isEqualTo(u)&&(null===(o=null===(r=e.contentDetail)||void 0===r?void 0:r[h.DXv.LtiLink])||void 0===o?void 0:o.itemOrigin)==="CloudDocument"){let t=S.ddT.getCloudDocumentType(e);return t===h.rz_.CloudCollaboration?tp(h.zcD.CollaborativeCloud):tp(h.zcD.DocumentCloud)}if(void 0!==t.gradebookColumn&&(u.isEqualTo(S.GQk.TestLink.handle)||u.isEqualTo(S.GQk.Unknown.handle)||u.isEqualTo(S.GQk.RusticiScorm.handle)||u.isEqualTo(S.GQk.LtiLink.handle)||u.isEqualTo(S.GQk.PartnerCloud.handle)||u.startsWith(S.GQk.LtiPlacement.handle))){if(null===(a=t.gradebookColumn.gradebookCategory)||void 0===a?void 0:a.isUserDefined)return tp("custom-item");let e=null===(c=null===(l=t.gradebookColumn.gradebookCategory)||void 0===l?void 0:l.title)||void 0===c?void 0:c.substring(0,null===(d=t.gradebookColumn.gradebookCategory)||void 0===d?void 0:d.title.lastIndexOf(".name")).toLowerCase();if(e)return tp(e)}let p=u.iconClass.replace(/^img-icon-/,"");return tp(p)}function th(e,t){var n,i,s,r,o,a;let l=S.AaE.getContentHandler(e);if(null===(n=t.gradebookColumn)||void 0===n||!n.gradebookCategory){if(l.startsWith(S.GQk.LtiPlacement.handle)){let t=null===(r=null===(s=null===(i=e.contentDetail)||void 0===i?void 0:i[`${e.contentHandler}`])||void 0===s?void 0:s.placement)||void 0===r?void 0:r.iconUrl;if(t)return(0,eA.uI)(t)}if(S.GQk.LtiLink.isEqualTo(l)){let t=null===(a=null===(o=e.contentDetail)||void 0===o?void 0:o[h.DXv.LtiLink])||void 0===a?void 0:a.customIconUrl;if(t)return(0,eA.uI)(t)}}}function tg(e){let t=tu(e);return`components.directives.element-image.element-image-accessibility.img-icon-${t}`}function tf(e){var t,n,i,s;let r=S.AaE.getContentHandler(e),o=r.iconClass;return S.GQk.File.isEqualTo(null===(t=e.contentHandler)||void 0===t?void 0:t.toString())&&(o=(0,S.kfU)(null===(s=null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[h.DXv.File])||void 0===i?void 0:i.file)||void 0===s?void 0:s.mimeType)),tg(o)}let tb=(0,b.makeStyles)(e=>({brokenLtiLink:{color:e.palette.error.main},customIcon:{width:"24px",minWidth:"24px"}})),tv=({className:e,item:t,withLabel:n=!0})=>{var i,s,r,o,a;let d=(0,$.q)(),u=tb(),p=(0,m.pJ)(e=>{if(t.id)return S.Ys.gradebookColumn.getGradebookColumnByContentId(e,t.id)}),g=(0,m.r0)(null!==(i=t.courseId)&&void 0!==i?i:"",null===(r=null===(s=t.contentDetail)||void 0===s?void 0:s[h.DXv.CourseLink])||void 0===r?void 0:r.linkSourceId),f=S.AaE.canViewAsInstructor(t)&&S.ddT.isUnlaunchableLtiLink(t),b=null===(a=null===(o=t.contentDetail)||void 0===o?void 0:o[h.DXv.LtiLink])||void 0===a?void 0:a.customIconUrl;if(b)return l().createElement("img",{src:(0,eA.uI)(b),alt:"",className:u.customIcon});let v=tm(null!=g?g:t,{gradebookColumn:p}),y=d(tf(null!=g?g:t));return l().createElement(v,{className:(0,c.Z)(e,{[u.brokenLtiLink]:f}),titleAccess:n?y:void 0})};function ty(e){let t=(0,S.kfU)(e);return tp(t)}var tC=n(271050),tS=n(666230),tE=n(315707),tI=n(828135),tw=n(140366),tA=n(377022),tk=n(450581),tx=n(450323),tT=n(827232),tP=n(527975),tD=n(887065),tG=n(745090),tR=n(657095),tB=n(576281),tL=n(353408),tN=n(955996),tO=n(35840),tM=n(590526),t$=n(380419),tH=n(716360),tF=n(501016),tU=n(10855),tV=n(944816),t_=n(332327),tq=n(645885),tz=n(97141),tW=n(194534),tj=n(609526);function tZ(e){let t=tu(e);switch(t){case h.zcD.Assignment:return tC.o;case h.zcD.Attendance:return tS.u;case h.zcD.Audio:return tz.B;case h.zcD.Blog:return tE.l;case h.zcD.Course:return tj.T;case h.zcD.Calculation:return tI.E;case h.zcD.Discussion:return tw.$;case h.zcD.DocumentBlank:return tA.E;case h.zcD.DocumentCloud:return tk.g;case h.zcD.Document:return tx.J;case h.zcD.Folder:return tT.V;case h.zcD.FolderOpen:return tP.P;case h.zcD.Homework:return tD.A;case h.zcD.Journal:return tR.t;case h.zcD.LearningModule:return tB.W;case h.zcD.Link:return tL.r;case h.zcD.LTI:return tN.U;case h.zcD.OverallGrade:return tO.b;case h.zcD.Pdf:return tM.Q;case h.zcD.Photo:return tG.E;case h.zcD.Presentation:return t$.A;case h.zcD.Scorm:return tH.C;case h.zcD.Spreadsheet:return tF.i;case h.zcD.Survey:return tU.m;case h.zcD.Test:case h.zcD.Quiz:case h.zcD.Exam:return tV.e;case h.zcD.Textbook:return t_._;case h.zcD.Video:return tq.n;case h.zcD.Zip:return tW.s;default:return tA.E}}let tK=(e,t)=>{var n,i;let s=(0,$.q)(),r=(0,m.r0)(e,null===(i=null===(n=t.contentDetail)||void 0===n?void 0:n[h.DXv.CourseLink])||void 0===i?void 0:i.linkSourceId);return s(tf(null!=r?r:t))},tX=e=>{let{fileCount:t,exitCallback:n}=e,[i,s]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),c=(0,$.q)(),d=(e=!1)=>{o(e),s(!0)};return l().createElement(eV._X,{isAlert:!0,analyticsId:"fileUpload.sizeWarningPrimary","aria-labelledby":"upload-size-warning-dialog-heading-id",open:!i,TransitionProps:{onExited:()=>{n(r),s(!1)}}},l().createElement(p.AnalyticsDialogTitle,{analyticsId:"fileUpload.sizeWarning.title",onClose:()=>d(),id:"upload-size-warning-dialog-heading-id","aria-describedby":"upload-size-warning-dialog-message-id"},c("course.learn-data-components.uploadSizeWarning.title",{fileCount:t})),l().createElement(p.AnalyticsDialogContent,{analyticsId:"fileUpload.sizeWarning.content"},l().createElement(p.AnalyticsDialogContentText,{analyticsId:"fileUpload.sizeWarning.text",id:"upload-size-warning-dialog-message-id"},c("course.learn-data-components.uploadSizeWarning.text"))),l().createElement(p.AnalyticsDialogActions,{analyticsId:"fileUpload.sizeWarning.actions"},l().createElement(p.AnalyticsDefaultButton,{analyticsId:"fileUpload.sizeWarning.cancel.button",onClick:()=>d()},c("global.cancel")),l().createElement(p.AnalyticsPrimaryButton,{analyticsId:"fileUpload.sizeWarning.continue.button",onClick:()=>d(!0)},c("global.continue"))))};n(465139),(s=o||(o={})).Uninitialized="uninitialized",s.Loading="loading",s.Completed="completed",s.Errored="errored";let tY=e=>{let[t,n]=(0,a.useState)({status:o.Uninitialized}),i=(0,a.useRef)(),s=(0,a.useCallback)(async(...t)=>{i.current&&i.current.abort(),n({status:o.Loading});try{let s=new AbortController;i.current=s;let r=await e(s,...t),a={status:o.Completed,data:r};return n(a),r}catch(e){if(e instanceof S._LW)return null;return n({status:o.Errored,error:e}),null}},[e]);return(0,a.useEffect)(()=>()=>{var e;null===(e=null==i?void 0:i.current)||void 0===e||e.abort()},[]),{...t,fetch:s}};n(163273),n(625506),n(56164),n(721966)},273386:function(e,t,n){"use strict";n.d(t,{$M:function(){return a.$},$f:function(){return Q.$},$m:function(){return Z.$},BA:function(){return ef.B},Cf:function(){return ei.C},Cp:function(){return L.C},ER:function(){return ev.E},Ej:function(){return eg.E},GD:function(){return ec.G},Gd:function(){return P.G},Hr:function(){return U.H},IP:function(){return _.I},Iw:function(){return ew.I},J1:function(){return C.J},Kx:function(){return l.K},Lx:function(){return i.L},O$:function(){return em.O},PU:function(){return eE.P},PV:function(){return N.PV},SJ:function(){return eu.S},SS:function(){return eA.S},Sp:function(){return ey.S},Te:function(){return en.T},Tn:function(){return g.T},U8:function(){return er.U},UF:function(){return J.U},UI:function(){return eh.U},UQ:function(){return eb.U},VI:function(){return H.V},WT:function(){return r.W},XY:function(){return j.X},YO:function(){return eS.Y},Yp:function(){return et.Y},Ys:function(){return d.Y},Ze:function(){return ea.Z},a6:function(){return es.a},aq:function(){return w.a},av:function(){return S.a},bW:function(){return v.b},c2:function(){return O.c},c5:function(){return G.c},cH:function(){return F.c},c_:function(){return eC.c},d$:function(){return I.d},fU:function(){return T.f},gH:function(){return A.g},hV:function(){return $.h},h_:function(){return eo.h},iG:function(){return p.i},j9:function(){return K.j},jN:function(){return el.j},jU:function(){return D.j},jp:function(){return m.j},ke:function(){return X.k},nW:function(){return B.n},nh:function(){return V.n},of:function(){return ep.o},or:function(){return M.o},oz:function(){return R.o},p6:function(){return b.p},pJ:function(){return s.a},qI:function(){return W.q},qJ:function(){return ed.q},qi:function(){return c.q},r0:function(){return u.r},sY:function(){return eI.s},so:function(){return q.s},to:function(){return f.t},tp:function(){return E.t},tx:function(){return k.t},u3:function(){return Y.u},vD:function(){return y.v},vr:function(){return z.v},xR:function(){return ee.x},yF:function(){return o.y},yH:function(){return x.y},ye:function(){return N.ye},zk:function(){return h.z}});var i=n(662594),s=n(11931),r=n(892165),o=n(151630),a=n(531093),l=n(397603),c=n(237380),d=n(282764);n(102381);var u=n(473321),p=n(554983),m=n(533532),h=n(609114),g=n(440943),f=n(748793),b=n(603655),v=n(13654),y=n(615177),C=n(656170),S=n(398257),E=n(775359),I=n(761500),w=n(298080);n(453219);var A=n(182596),k=n(388632);n(66127);var x=n(310193),T=n(805322),P=n(276393),D=n(96944),G=n(745119),R=n(74888),B=n(579698),L=n(96099),N=n(835668),O=n(12144),M=n(751073),$=n(373624),H=n(634647),F=n(17470),U=n(491970),V=n(193257),_=n(327687),q=n(698090),z=n(455777),W=n(820960),j=n(219237),Z=n(731436),K=n(28566),X=n(354114),Y=n(963687),Q=n(750900),J=n(990160),ee=n(263673),et=n(307051),en=n(545821),ei=n(432946),es=n(419336),er=n(568780),eo=n(917200),ea=n(393299);n(183168);var el=n(996448),ec=n(505546),ed=n(383242),eu=n(608690),ep=n(253477);n(662976);var em=n(170518),eh=n(512137);n(503140);var eg=n(209470),ef=n(72917);n(31402);var eb=n(539938),ev=n(261136),ey=n(401328),eC=n(328966),eS=n(737979);n(890529),n(771367),n(8865);var eE=n(435649),eI=n(948582),ew=n(683864),eA=n(804573)},892165:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var i=n(44432);let s=i.oR},531093:function(e,t,n){"use strict";n.d(t,{$:function(){return a}});var i=n(951248),s=n(202784),r=n(662594),o=n(11931);let a=e=>{let t=(0,r.L)(),n=(0,o.a)(t=>i.Ys.ai.getAiSettings(t,e));return(0,s.useEffect)(()=>{t(i.Nwg.ai.getAiSettings(e))},[t,e]),n}},151630:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(i.Ys.app.getQueryParameterValue(e))},397603:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.app.getQueryParams(t)[e])},993707:function(e,t,n){"use strict";n.d(t,{Q:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>{if(e)return i.Ys.assessment.getAssessmentById(t,e)})},171604:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});var i=n(951248),s=n(11931);let r=(e,t)=>(0,s.a)(n=>{var s,r;return!!e&&!!t&&null!==(r=null===(s=i.Ys.assessment.getAssessmentViewStateByQuery(n,{courseId:e,assessmentId:t}))||void 0===s?void 0:s.isLoading)&&void 0!==r&&r})},237380:function(e,t,n){"use strict";n.d(t,{q:function(){return l}});var i=n(202784),s=n(993707),r=n(171604),o=n(951248),a=n(662594);let l=(e,t,{detail:n=!1}={})=>{let l=(0,a.L)(),c=(0,r.D)(e,t),d=(0,s.Q)(t),u=(0,i.useMemo)(()=>{if(!c&&d&&(!n||"boolean"==typeof d.hasAnswerableQuestions))return d},[c,d,n]);return(0,i.useEffect)(()=>{e&&t&&!c&&!u&&l(o.Nwg.assessment.loadAssessmentById({courseId:e,assessmentId:t}))},[l,e,t,c,u]),u}},977459:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>{if(e)return i.Ys.columnSummary.getColumnSummaryByColumnId(t,e)})},282764:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var i=n(951248),s=n(202784),r=n(662594),o=n(977459);let a=(e,t)=>{let n=(0,r.L)(),a=(0,o.o)(t);return(0,s.useEffect)(()=>{var s;(!a||(null===(s=null==a?void 0:a.api)||void 0===s?void 0:s.isInvalidated))&&e&&t&&n(i.Nwg.columnSummary.loadColumnSummary({courseId:e,columnId:t}))},[e,t,a,n]),a}},543696:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.content.getContentsBySearchCriteria(t,e))},654972:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.content.getCountBySearchCriteria(t,e))},672017:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var i=n(11931);let s=()=>(0,i.a)(e=>{var t,n;return(null===(n=null===(t=e.app.error)||void 0===t?void 0:t.originalException)||void 0===n?void 0:n.type)==="network"})},639897:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.content.isLoading(t,e))},609114:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var i=n(408027),s=n(951248),r=n(202784),o=n(662594),a=n(543696),l=n(654972),c=n(672017),d=n(639897);let u=e=>{let[t,n]=(0,r.useState)({filter:{courseId:e}}),u=(0,a.J)(t),p=(0,l.l)(t),m=(0,d.O)(t),h=(0,c.m)(),g=(0,o.L)(),f=(0,r.useCallback)((t,r)=>{let o={paging:{limit:r},sort:[{field:"modifiedDate",direction:i.SrV.Descending}]},a={filter:{courseId:e,title:t},params:o};g(s.Nwg.app.clearError()),g(s.Nwg.content.loadContentsByQuery(a)),n(a)},[e,g]);return{contents:u,count:p,isLoading:m,isError:h,search:f}}},697859:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.contentReviewState.getContentReviewStateForContextUser(t,e))},554983:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var i=n(951248),s=n(697859),r=n(202784),o=n(662594);let a=(e,t)=>{let n=(0,o.L)(),a=(0,s.K)(t);return(0,r.useEffect)(()=>{e&&!a&&t&&n(i.Nwg.contentReviewState.getContentReviewState(e,t,!1))},[n,a,e,t]),a}},533532:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var i=n(610171);let s=e=>(0,i.N)(e)},897044:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.assessment.getAssessmentViewStatusByQueries(t,e))},27009:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.assessment.getAssessmentsByQueries(t,e))},603655:function(e,t,n){"use strict";n.d(t,{p:function(){return l}});var i=n(202784),s=n(951248),r=n(662594),o=n(897044),a=n(27009);let l=e=>{let t=(0,r.L)(),n=(0,a.l)(e),l=(0,o.S)(e);return(0,i.useEffect)(()=>{l.forEach(e=>{var n,i,r;null!==e&&(null===(n=e.query)||void 0===n?void 0:n.courseId)&&(null===(i=e.view)||void 0===i||!i.isLoading)&&(null===(r=e.view)||void 0===r||!r.isValid)&&t(s.Nwg.assessment.loadAssessmentsByQuery(e.query))})},[t,l]),{assessments:n,viewData:l}}},102429:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>!!e&&i.Ys.courseEntitlements.hasLoadedCourseEntitlements(t,e))},615177:function(e,t,n){"use strict";n.d(t,{v:function(){return l}});var i=n(202784),s=n(951248),r=n(656170),o=n(662594),a=n(11931);let l=(e,t)=>{let n=(0,o.L)(),l=(0,a.a)(e=>s.Ys.courseEntitlements.isLoadingEntitlements(e)),c=(0,r.J)(e,t);return(0,i.useEffect)(()=>{e&&!l&&void 0===c&&n(s.Nwg.courseEntitlements.loadUserCourseEntitlements(e))},[n,e,l,c]),c}},656170:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});var i=n(951248),s=n(11931);let r=(e,t)=>(0,s.a)(n=>i.Ys.courseEntitlements.hasAnyCourseEntitlement(n,e,t))},13654:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var i=n(202784),s=n(951248),r=n(662594),o=n(11931);let a=(e,t)=>{let n=(0,r.L)();return(0,i.useEffect)(()=>{n(s.Nwg.courseEntitlements.loadUserCourseEntitlements(e))},[n,e]),(0,o.a)(n=>s.Ys.courseEntitlements.userHasCourseEntitlement(n,e,t))}},398257:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});var i=n(202784),s=n(951248),r=n(102429),o=n(662594);let a=e=>{let t=(0,o.L)(),n=(0,r.n)(e);(0,i.useEffect)(()=>{e&&!n&&t(s.Nwg.courseEntitlements.loadUserCourseEntitlements(e))},[t,e,n])}},68981:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.group.getCourseGroupViewStatusByQuery(t,e))},970430:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.group.getGroupsByQuery(t,e))},775359:function(e,t,n){"use strict";n.d(t,{t:function(){return l}});var i=n(202784),s=n(951248),r=n(68981),o=n(970430),a=n(662594);let l=e=>{let t=(0,a.L)(),n=(0,r.U)(e);(0,i.useEffect)(()=>{n&&(n.isValid||n.isLoading)||t(s.Nwg.group.loadGroupsByQuery(e))},[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);let l=(0,o.j)(e);return{groups:l,view:n}}},663435:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var i=n(44432),s=n(951248),r=n(11931);let o=e=>(0,r.a)(t=>s.Ys.courseMembership.getCourseMembershipsByQuery(t,e),i.wU)},186388:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(951248),s=n(11931);function r(e,t){return(0,s.a)(n=>i.Ys.courseMembership.getCourseMembershipByUserId(n,e,t))}},935930:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var i=n(44432),s=n(951248),r=n(11931);let o=e=>(0,r.a)(t=>s.Ys.courseMembership.getCourseMembershipViewStatusByQuery(t,e),i.wU)},35826:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var i=n(44432),s=n(951248),r=n(11931);let o=e=>(0,r.a)(t=>s.Ys.user.getUsersByIds(t,e),i.wU)},761500:function(e,t,n){"use strict";n.d(t,{d:function(){return c}});var i=n(202784),s=n(951248),r=n(935930),o=n(663435),a=n(35826),l=n(662594);let c=e=>{let t=(0,l.L)(),n=(0,r.t)(e);(0,i.useEffect)(()=>{n&&(n.isValid||n.isLoading)||t(s.Nwg.courseMembership.loadCourseMembershipsByQuery(e))},[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);let c=(0,o.m)(e),d=c.reduce((e,t)=>(t.userId&&e.push(t.userId),e),[]),u=(0,a.R)(d);return{memberships:c,users:u,view:n}}},298080:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var i=n(8865),s=n(453219);function r(e){var t;let n=(0,i.x)(e),r=(0,s.E)(e,null!==(t=null==n?void 0:n.id)&&void 0!==t?t:"");return r}},453219:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});var i=n(951248),s=n(202784),r=n(662594),o=n(186388);function a(e,t){let n=(0,r.L)(),a=(0,o.Z)(e,t);return(0,s.useEffect)(()=>{e&&t&&n(i.Nwg.courseMembership.loadCourseMembershipByUserId(e,t))},[n,e,t]),a}},388632:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var i=n(410628),s=n(748793),r=n(443400),o=n(202784);function a(e=r.r9.AppendSection,t){let n=(0,s.t)();return function(e,t=r.r9.AppendSection,n){let s=(0,i.q)(),a=(0,r.Df)(null!=e&&e,t,n);return(0,o.useCallback)((e,t,n)=>s(a(e),t,n),[s,a])}(n,e,t)}},445420:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var i=n(951248),s=n(11931);let r=(e,t)=>(0,s.a)(n=>i.Ys.coursePreference.getCoursePreferenceByKeyAndCourseId(n,e,t))},310193:function(e,t,n){"use strict";n.d(t,{y:function(){return a}});var i=n(202784),s=n(951248),r=n(445420),o=n(662594);let a=(e,t)=>{let n=(0,o.L)(),a=(0,r.v)(e,t);return(0,i.useEffect)(()=>{a||n(s.Nwg.coursePreference.loadCoursePreference({key:e,courseId:t}))},[n,e,t,a]),a}},69027:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.courseProgress.getCourseProgressConfigurationView(t,e))},276393:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});var i=n(410628),s=n(408027);function r(e,t){let n=(0,i.q)();if(!e)return n("courseContent.contentProgress.status.notAvailable");switch(e){case s.aql.Completed:return n(t?"courseContent.contentProgress.status.markedComplete":"courseContent.contentProgress.status.completed");case s.aql.Started:return n("courseContent.contentProgress.status.started");case s.aql.Unlocked:case s.aql.None:return n("courseContent.contentProgress.status.unopened")}}},805322:function(e,t,n){"use strict";n.d(t,{f:function(){return d}});var i,s=n(202784),r=n(69027),o=n(951248),a=n(656170),l=n(662594),c=n(11931);(i||(i={})).ViewConfiguration="course.progress.settings.VIEW";let d=(e,t=!1)=>{let n=(0,l.L)(),d=(0,r.g)(e),u=!!(null==d?void 0:d.isLoading),p=!!(null==d?void 0:d.isValid),m=!!(null==d?void 0:d.hasError),h=(0,a.J)(e,[i.ViewConfiguration])||t;return(0,s.useEffect)(()=>{m||u||p||!h||n(o.Nwg.courseProgress.loadCourseProgressConfiguration({courseId:e}))},[e,u,n,h,m,p]),(0,c.a)(t=>o.Ys.courseProgress.getCourseProgressConfiguration(t,e))}},378083:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.courseLogs.getCourseLogViewStatusByQuery(t,e))},437041:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.courseLogs.getCourseLogsByQuery(t,e))},428075:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.courseTasks.getCourseTaskViewStatusByQuery(t,e))},279139:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.courseTasks.getCourseTasksByQuery(t,e))},96944:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var i=n(202784),s=n(951248),r=n(378083),o=n(437041),a=n(662594);let l=e=>{let t=(0,a.L)(),n=(0,r.M)(e);(0,i.useEffect)(()=>{n&&(n.isValid||n.isLoading)||t(s.Nwg.courseLogs.loadCourseLogsByQuery(e))},[t,e,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);let l=(0,o.b)(e);return{logs:l,view:n}}},745119:function(e,t,n){"use strict";n.d(t,{c:function(){return l}});var i=n(202784),s=n(951248),r=n(428075),o=n(279139),a=n(662594);let l=e=>{let t=(0,a.L)(),n=(0,r.M)(e);(0,i.useEffect)(()=>{n&&(n.isValid||n.isLoading)||t(s.Nwg.courseTasks.loadCourseTasksByQuery(e))},[t,e,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);let l=(0,o.x)(e);return{tasks:l,view:n}}},579698:function(e,t,n){"use strict";n.d(t,{n:function(){return l}});var i=n(202784),s=n(87647),r=n(951248),o=n(662594),a=n(11931);let l=(e,t)=>{let n=(0,a.a)(n=>s.Ys.getCourseTool(n,e,t)),l=(0,o.L)();return(0,i.useEffect)(()=>{n||l(r.Nwg.courseTools.loadCourseToolConfiguration(e,t))},[l,e,n,t]),n}},74888:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var i=n(202784),s=n(951248),r=n(662594);let o=(e,t)=>{let n=(0,r.L)(),o=(0,i.useCallback)(i=>{n(s.Nwg.courseTools.setCourseToolConfiguration(e,t,{toolEnabledSetting:{isAvailable:i}}))},[e,n,t]);return o}},748793:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var i=n(951248),s=n(11931);function r(){let e=(0,s.a)(e=>i.Ys.app.getRoute(e).params.coursesOrOrganizations);return"organizations"===e}},96099:function(e,t,n){"use strict";n.d(t,{C:function(){return a}});var i=n(951248),s=n(202784),r=n(662594),o=n(11931);function a(e){let t=(0,r.L)(),n=(0,o.a)(e=>i.Ys.discussionBoardSettings.isSettingLoading(e)),a=(0,o.a)(t=>e?i.Ys.discussionBoardSettings.getDiscussionboardSettings(t,e):void 0),l=!!a;return(0,s.useEffect)(()=>{!e||n||l||t(i.Nwg.discussionBoardSettings.loadDiscussionboardSetting({courseId:e}))},[e,t,l,n]),a}},835668:function(e,t,n){"use strict";n.d(t,{PV:function(){return c},ye:function(){return l}});var i=n(202784),s=n(951248),r=n(236932),o=n(662594);let a=e=>{let t=(0,o.L)(),n=(0,r.X)(e);return(0,i.useEffect)(()=>{n||t(s.Nwg.featureFlags.loadFeatureFlagValueByKey({flagKey:e}))},[t,e,n]),n},l=e=>{var t;return(null===(t=a(e))||void 0===t?void 0:t.flagValue)==="true"},c=e=>{var t;let n=null!==(t=a(e))&&void 0!==t?t:{isLoading:!0};if(!n.isLoading&&void 0!==n.flagValue)return"true"===n.flagValue}},620460:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(951248),s=n(11931);let r=()=>(0,s.a)(e=>i.Ys.fileUploadSettings.getFileUploadSettings(e))},12144:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var i=n(951248),s=n(202784),r=n(620460),o=n(662594);let a=()=>{let e=(0,o.L)(),t=(0,r.V)();return(0,s.useEffect)(()=>{t||e(i.Nwg.fileUploadSettings.loadFileUploadSettings())},[e,t]),t}},304250:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.gradebookAttempt.getGradebookAttemptByAttemptId(t,e))},601669:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});var i=n(951248),s=n(11931);let r=(e,t)=>(0,s.a)(n=>i.Ys.gradebookAttempt.getGradebookAttemptViewStateByQuery(n,{columnId:e,attemptId:t}))},919315:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var i=n(11931),s=n(951248);let r=(e,t)=>(0,i.a)(n=>s.Ys.gradebookAttempt.getGradebookAttemptsByColumnId(n,e,t))},688007:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var i=n(951248),s=n(11931);let r=(e,t,n)=>(0,s.a)(s=>i.Ys.gradebookAttempt.getGradebookAttemptsByUserId(s,e,t,n))},215538:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});var i=n(11931),s=n(951248);let r=()=>(0,i.a)(e=>s.Ys.gradebookAttempt.isLoading(e))},751073:function(e,t,n){"use strict";n.d(t,{o:function(){return c}});var i=n(951248),s=n(202784),r=n(662594),o=n(554553),a=n(304250),l=n(601669);let c=(e,t)=>{var n;let c=(0,r.L)(),d=(0,o.l)(e),{courseId:u,columnId:p,attemptId:m}=d,h=(0,a.U)(m),{lastFetched:g,isValid:f,isLoading:b}=null!==(n=(0,l.T)(p,m))&&void 0!==n?n:{},v=void 0!==t&&void 0!==g&&new Date().getTime()-g>t;return(0,s.useEffect)(()=>{!b&&(!h||v||!f)&&m&&p&&u&&c(i.Nwg.gradebookAttempt.loadGradebookAttemptByAttemptId(d))},[c,h,d,v,f,b,m,p,u]),h}},373624:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var i=n(202784),s=n(951248),r=n(919315),o=n(215538),a=n(662594);let l=(e,t)=>{let n=(0,a.L)(),l=(0,o.c)(),c=(0,r.A)(e,t);return(0,i.useEffect)(()=>{e&&t&&(l||(null==c?void 0:c.length)||n(s.Nwg.gradebookAttempt.loadGradebookAttemptsByColumnId({courseId:e,columnId:t})))},[n,c,e,t,l]),c}},634647:function(e,t,n){"use strict";n.d(t,{V:function(){return l}});var i=n(202784),s=n(662594),r=n(951248),o=n(688007),a=n(215538);let l=(e,t,n,l)=>{let c=(0,s.L)(),d=(0,a.c)(),u=(0,o.h)(e,t,n);return(0,i.useEffect)(()=>{!d&&e&&t&&n&&(u&&0!==u.length||c(r.Nwg.gradebookAttempt.loadGradebookAttemptsByColumnId({courseId:e,columnId:t,expand:l})))},[c,u,e,t,n,d,l]),u}},17470:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>{var n,s,r;return!!e&&null!==(r=null===(s=null===(n=i.Ys.gradebookAttempt.getGradebookAttemptByAttemptId(t,e))||void 0===n?void 0:n.api)||void 0===s?void 0:s.isUpdating)&&void 0!==r&&r})},491970:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var i=n(951248),s=n(202784),r=n(662594);let o=()=>{let e=(0,r.L)();return(0,s.useCallback)(t=>{t.courseId&&t.attemptId&&e(i.Nwg.gradebookAttempt.updateAttemptById(t))},[e])}},912841:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var i=n(11931),s=n(951248);let r=e=>(0,i.a)(t=>s.Ys.gradebookColumn.getGradebookColumnByContentId(t,e))},6855:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var i=n(11931),s=n(951248);let r=e=>(0,i.a)(t=>s.Ys.gradebookColumn.getGradebookColumnById(t,e))},728892:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.gradebookColumn.getGradebookColumnViewStatusByQuery(t,e))},635207:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.gradebookColumn.getGradebookColumnsByQuery(t,e))},254871:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var i=n(951248),s=n(273386);let r=e=>(0,s.pJ)(t=>i.Ys.gradebookGrade.getGradebookGradesByColumnId(t,e))},698090:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var i=n(202784),s=n(662594),r=n(951248),o=n(912841);let a=(e,t)=>{let n=(0,s.L)(),a=(0,o.I)(t);return(0,i.useEffect)(()=>{e&&t&&(a||n(r.Nwg.gradebookColumn.loadGradebookColumnByContentId({courseId:e,contentId:t})))},[n,a,e,t]),a}},327687:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(202784),s=n(662594),r=n(951248),o=n(6855);let a=(e,t)=>{let n=(0,s.L)(),a=(0,o.P)(t);return(0,i.useEffect)(()=>{e&&t&&!a&&n(r.Nwg.gradebookColumn.loadGradebookColumn({courseId:e,columnId:t}))},[n,a,e,t]),a}},193257:function(e,t,n){"use strict";n.d(t,{n:function(){return l}});var i=n(202784),s=n(951248),r=n(728892),o=n(635207),a=n(662594);let l=e=>{let t=(0,a.L)(),n=(0,r.o)(e);(0,i.useEffect)(()=>{null!=n&&n.isValid||null!=n&&n.isLoading||t(s.Nwg.gradebookColumn.loadGradebookColumnsByQuery(e))},[t,e,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);let l=(0,o.U)(e),c=(null==n?void 0:n.isValid)&&!(null==n?void 0:n.isLoading)?l:[];return{gradebookColumns:c,view:n}}},455777:function(e,t,n){"use strict";n.d(t,{v:function(){return l}});var i=n(202784),s=n(951248),r=n(254871),o=n(662594);let a=e=>e.filter(e=>{var t;return!(null===(t=null==e?void 0:e.api)||void 0===t?void 0:t.isInvalidated)}),l=(e,t,n,l)=>{let c=(0,o.L)(),d=(0,r.U)(null!=t?t:""),u={};(d||[]).forEach(e=>{u[e.userId]=e});let p=n.filter(e=>{var t,n;return!u[String(null==e?void 0:e.userId)]||(null===(n=null===(t=u[String(null==e?void 0:e.userId)])||void 0===t?void 0:t.api)||void 0===n?void 0:n.isInvalidated)}).map(e=>String(null==e?void 0:e.id));if((0,i.useEffect)(()=>{e&&p.length&&t&&c(s.Nwg.gradebookGrade.loadBulkView(e,[t],p,l))},[c,e,t,p.join(",")]),d){let e=a(d);e.forEach(e=>{e.userId&&(u[e.userId]=e)})}return u}},599912:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(11931),s=n(951248);let r=(e,t)=>(0,i.a)(n=>s.Ys.gradebookGrade.getGradebookGradesByColumnIdAndMemberIds(n,e,t))},20113:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var i=n(11931),s=n(951248);let r=(e,t)=>(0,i.a)(n=>s.Ys.gradebookGrade.getMemberIdsWithMissingOrInvalidatedGradesInColumn(n,e,t))},820960:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var i=n(951248),s=n(11931);let r=()=>(0,s.a)(i.Ys.gradebookGrade.areGradebookGradesLoading)},219237:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var i=n(951248),s=n(202784),r=n(662594);let o=()=>{let e=(0,r.L)();return(0,s.useCallback)(t=>{let{courseId:n,columnId:s,userId:r,payload:o}=t;n&&s&&r&&e(i.Nwg.gradebookGrade.createGradeByUserId({...o,courseId:n,columnId:s,userId:r}))},[e])}},731436:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var i=n(11931),s=n(951248);let r=(e,t)=>(0,i.a)(n=>{var i;return null===(i=s.Ys.gradebookGrade.getGradebookGradesByColumnIdAndUserId(n,e,t))||void 0===i?void 0:i[0]})},354114:function(e,t,n){"use strict";n.d(t,{k:function(){return l}});var i=n(202784),s=n(662594),r=n(951248),o=n(731436),a=n(820960);let l=(e,t,n,l)=>{let c=(0,s.L)(),d=(0,a.q)(),u=(0,o.$)(t,n);return(0,i.useEffect)(()=>{var i,s;!d&&(!u||null!==(s=null===(i=null==u?void 0:u.api)||void 0===i?void 0:i.isInvalidated)&&void 0!==s&&s)&&e&&t&&n&&c(r.Nwg.gradebookGrade.loadGradebookGradesByColumnId({columnId:t,courseId:e,userId:n,includeUnpostedGrade:l}))},[c,d,u,e,t,n,l]),u}},28566:function(e,t,n){"use strict";n.d(t,{j:function(){return c}});var i=n(951248),s=n(202784),r=n(662594),o=n(820960),a=n(599912),l=n(20113);let c=(e,t,n,c)=>{let d=(0,r.L)(),u=(0,o.q)(),p=(0,a.V)(t,n),m=(0,l.h)(t,n),h=JSON.stringify(n),g=JSON.stringify(c),f=JSON.stringify(p),b=JSON.stringify(m);return(0,s.useEffect)(()=>{e&&t&&!u&&0!==n.length&&m.length>0&&d(i.Nwg.gradebookGrade.loadBulkView(e,[t],m,c))},[d,u,e,t,h,g,f,b]),p}},963687:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>{var n,s,r,o;return!!e&&null!==(o=null===(r=null===(s=null===(n=i.Ys.gradebookGrade.getGradebookGradeById(t,e))||void 0===n?void 0:n[0])||void 0===s?void 0:s.api)||void 0===r?void 0:r.isUpdating)&&void 0!==o&&o})},263673:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var i=n(202784),s=n(951248),r=n(662594);let o=(e,t)=>{let n=(0,r.L)(),o=(0,i.useCallback)(()=>{e&&t&&n(s.Nwg.gradebookColumn.postReadyGradesByColumnId(e,t))},[t,e,n]);return{postAllGrades:o}}},750900:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var i=n(202784),s=n(662594),r=n(951248);let o=()=>{let e=(0,s.L)(),t=(0,i.useCallback)((t,n,i)=>{t&&n&&i&&e(r.Nwg.gradebookGrade.postGradeByGradeId({columnId:n,courseId:t,id:i}))},[e]);return{postGrade:t}}},990160:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var i=n(951248),s=n(202784),r=n(662594);let o=()=>{let e=(0,r.L)();return(0,s.useCallback)(t=>{let{courseId:n,columnId:s,gradeId:r,payload:o}=t;n&&s&&r&&e(i.Nwg.gradebookGrade.updateGradeByGradeId({courseId:n,columnId:s,id:r},{...o,courseId:n,columnId:s,id:r}))},[e])}},317013:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.gradebookSchema.getGradebookSchemaById(t,e))},307051:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var i=n(202784),s=n(951248),r=n(317013),o=n(662594);let a=(e,t)=>{let n=(0,o.L)(),a=(0,r.l)(t);return(0,i.useEffect)(()=>{!a&&e&&t&&n(s.Nwg.gradebookSchema.loadGradebookSchema({courseId:e,schemaId:t}))},[a,e,t,n]),a}},545821:function(e,t,n){"use strict";n.d(t,{T:function(){return l}});var i=n(951248),s=n(815532),r=n(202784),o=n(662594),a=n(11931);function l(e,t,n){let l=(0,o.L)(),c=(0,a.a)(e=>i.Ys.group.getGroupsLoadingStatus(e)),d=(0,a.a)(e=>i.Ys.group.getGroupByGroupId(e,t));(0,r.useEffect)(()=>{(!n||(null==d?void 0:d.id))&&(n||(null==d?void 0:d.groupSetId))||c!==s.S.HasNotStarted||l(i.Nwg.group.loadGroupsByCourse(e))},[e,l,null==d?void 0:d.groupSetId,null==d?void 0:d.id,n,c]);let u=(0,a.a)(e=>!n&&(null==d?void 0:d.groupSetId)?i.Ys.groupWorkspace.getGroupSetById(e,d.groupSetId):null);return{group:d,groupSet:u,loadingStatus:c}}},432946:function(e,t,n){"use strict";n.d(t,{C:function(){return a}});var i=n(202784),s=n(951248),r=n(662594),o=n(11931);let a=e=>{let t=(0,r.L)(),n=(0,o.a)(t=>s.Ys.partnerCloud.getProviderSettingsById(t,e));return(0,i.useEffect)(()=>{e&&!n&&t(s.Nwg.partnerCloud.loadProviderSettings(e))},[t,e,n]),n}},941248:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});var i=n(11931),s=n(951248);let r=e=>(0,i.a)(s.Ys.questionAttemptGrade.getQuestionAttemptGradesByAttemptId(e))},740605:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var i=n(11931),s=n(951248);let r=(...e)=>(0,i.a)(t=>s.Ys.questionAttemptGrade.getQuestionAttemptGradesByQuestionIdQuery(...e)(t))},170518:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var i=n(11931),s=n(951248);let r=e=>(0,i.a)(s.Ys.questionAttemptGrade.getQuestionAttemptGradeById(e))},209470:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});var i=n(276635),s=n.n(i),r=n(202784),o=n(503140);let a=(e,t,n,i=50)=>{let[a,l]=(0,r.useState)(1);(0,r.useEffect)(()=>{l(1)},[e,t,n,i]);let c=(0,r.useMemo)(()=>{if(!e||!t||!n)return[];let s=[];for(let r=0;r<a;r++)s.push({courseId:e,assessmentId:t,questionId:n,paging:{offset:r*i,limit:i}});return s},[t,n,a,e,i]),d=(0,o.S)(...c),u=(0,r.useMemo)(()=>d.slice().sort((e,t)=>{var n,i,s,r;return(null!==(i=null===(n=null==e?void 0:e.paging)||void 0===n?void 0:n.offset)&&void 0!==i?i:0)-(null!==(r=null===(s=null==t?void 0:t.paging)||void 0===s?void 0:s.offset)&&void 0!==r?r:0)}),[d]),p=c.length!==a||u.length!==a||!!c.find((e,t)=>{var n;return!u[t]||(null===(n=u[t])||void 0===n?void 0:n.isLoading)}),m=!p&&!!u.find(e=>{var t;return!(null===(t=null==e?void 0:e.paging)||void 0===t?void 0:t.nextPage)}),h=(0,r.useCallback)(()=>l(e=>e+1),[]),g=(0,r.useMemo)(()=>s().flatMap(u,e=>{var t;return null!==(t=null==e?void 0:e.values)&&void 0!==t?t:[]}),[u]);return{isComplete:m,isLoading:p,loadNextPage:p||m?void 0:h,results:g}}},512137:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var i=n(202784),s=n(662594),r=n(951248),o=n(941248);let a=(e,t,n)=>{let a=(0,s.L)(),l=(0,o.u)(t);return(0,i.useEffect)(()=>{e&&t&&(l||a(r.Nwg.questionAttemptGrade.loadGradedQuestionAttemptsByAttemptId(e,t,n)))},[a,l,e,t,JSON.stringify(n)]),l}},503140:function(e,t,n){"use strict";n.d(t,{S:function(){return l}});var i=n(202784),s=n(951248),r=n(740605),o=n(554553),a=n(662594);let l=(...e)=>{let t=(0,a.L)(),n=(0,o.l)(e),l=(0,r.N)(...n);return(0,i.useEffect)(()=>{l.forEach((e,i)=>{let r=n[i];!e&&r&&r.courseId&&r.assessmentId&&r.questionId&&t(s.Nwg.questionAttemptGrade.loadGradedQuestionAttemptsByQuestionIdQuery(r))})},[t,n,l]),l}},539938:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var i=n(662594),s=n(951248);let r=()=>{let e=(0,i.L)();return(t,n,i)=>e(s.Nwg.questionAttemptGrade.updateGradedQuestionAttempt(t,n,i))}},946891:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i=n(11931),s=n(951248);let r=e=>(0,i.a)(t=>s.Ys.questionAttempt.getQuestionAttemptById(t,e))},383242:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.questionAttempt.getQuestionAttemptsByAttemptId(t,e))},608690:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var i=n(951248),s=n(337767),r=n(11931);let o=e=>(0,r.a)(t=>e.reduce((e,n)=>({...e,[n]:i.Ys.questionAttempt.getQuestionAttemptById(t,n)}),{}),s.yZ)},253477:function(e,t,n){"use strict";n.d(t,{o:function(){return a}});var i=n(202784),s=n(662594),r=n(951248),o=n(946891);let a=(e,t)=>{let n=(0,s.L)(),a=(0,o.j)(t);return(0,i.useEffect)(()=>{e&&t&&(a||n(r.Nwg.questionAttempt.loadQuestionAttemptsByAttemptId(t,e)))},[n,a,e,t]),a}},334681:function(e,t,n){"use strict";n.d(t,{k:function(){return r},l:function(){return o}});var i=n(11931),s=n(951248);let r=e=>(0,i.a)(s.Ys.questionGradeStatus.isQuestionGradeStatusesLoadingByAssessmentId(e)),o=e=>(0,i.a)(s.Ys.questionGradeStatus.getQuestionGradeStatusesByAssessmentId(e))},440682:function(e,t,n){"use strict";n.d(t,{L:function(){return r},Z:function(){return o}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(i.Ys.questionGradeStatus.isQuestionGradeStatusesLoadingByQuestionBlockIds(e)),o=e=>(0,s.a)(i.Ys.questionGradeStatus.getQuestionGradeStatusesByQuestionBlockIds(e))},72917:function(e,t,n){"use strict";n.d(t,{B:function(){return u}});var i=n(202784),s=n(276635),r=n.n(s),o=n(951248),a=n(334681),l=n(31402),c=n(554553),d=n(662594);let u=(e,t)=>{let n=(0,d.L)(),s=(0,a.k)(t),u=(0,a.l)(t),p=(0,c.l)((0,i.useMemo)(()=>u?r().flatMap(u,e=>{var t;return e.isQuestionSet?[null!==(t=e.id)&&void 0!==t?t:""]:[]}):void 0,[u])),m=(0,l.y)(e,t,p);(0,i.useEffect)(()=>{e&&t&&(u||s||n(o.Nwg.questionGradeStatus.loadQuestionGradeStatusesByAssessmentId(e,t)))},[n,e,t,s,u]);let h=(0,i.useMemo)(()=>({questionGradeStatuses:u,questionGradeStatusesByQuestionBlockId:m}),[u,m]);return h}},31402:function(e,t,n){"use strict";n.d(t,{y:function(){return a}});var i=n(202784),s=n(951248),r=n(440682),o=n(662594);let a=(e,t,n)=>{let a=(0,o.L)(),l=(0,r.L)(null!=n?n:[]),c=(0,r.Z)(null!=n?n:[]);(0,i.useEffect)(()=>{if(e&&t&&n)for(let i of n)!i||(null==c?void 0:c[i])||l[i]||a(s.Nwg.questionGradeStatus.loadQuestionGradingStatusesByQuestionBlockId(e,t,i))},[a,e,t,n,l,c]);let d=(0,i.useMemo)(()=>{if(!n)return;let e={};for(let[t,n]of Object.entries(c)){if(!n)return;e[t]=n}return e},[n,c]);return d}},807632:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});var i=n(11931),s=n(951248);let r=e=>(0,i.a)(t=>s.Ys.question.getByQuestionId(t,e))},419336:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});var i=n(951248),s=n(202784),r=n(662594),o=n(807632);let a=(e,t,n)=>{let a=(0,r.L)(),l=(0,o.S)(n);return(0,s.useEffect)(()=>{n&&!l&&e&&t&&n&&a(i.Nwg.question.loadQuestionById({courseId:e,assessmentId:t,questionId:n}))}),l}},740907:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.questionType.getQuestionTypesByCourseId(t,{courseId:e}))},711004:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.questionTag.getQuestionTagViewStatusByQueries(t,e))},284901:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.questionTag.getQuestionTagsByQueries(t,e))},383507:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var i=n(951248),s=n(11931),r=n(276635),o=n.n(r);let a=e=>(0,s.a)(t=>i.Ys.question.getQuestionViewStatusByQueries(t,e),o().isEqual)},30381:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.question.getQuestionsByQueries(t,e))},568780:function(e,t,n){"use strict";n.d(t,{U:function(){return d}});var i=n(202784),s=n(408027),r=n(951248),o=n(443400),a=n(662594),l=n(11931);let c=(e,t)=>{let n=(0,a.L)();(0,i.useDebugValue)(`Pending Copy Task: ${t}`),(0,o.U0)(()=>{t&&n(r.Nwg.question.updateCopyTaskStatus(e,t))},5e3,!!t)},d=e=>{let t=(0,l.a)(t=>r.Ys.question.getCopyQuestionsTask(t,e)),n=null;return t&&(n=Object.values(t).filter(e=>e.queueTask.taskStatus!==s.hRl.Complete&&e.queueTask.taskStatus!==s.hRl.CompleteErrors).map(e=>e.queueTask.taskId)[0]),c(e,n),null!=t?t:null}},917200:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var i=n(202784),s=n(951248),r=n(662594),o=n(383507),a=n(30381);let l=e=>{let t=(0,r.L)(),n=(0,a.s)(e),l=(0,o.U)(e);return(0,i.useEffect)(()=>{l.forEach(e=>{var n,i,r;null!==e&&(null===(n=e.query)||void 0===n?void 0:n.courseId)&&(null===(i=e.view)||void 0===i||!i.isLoading)&&(null===(r=e.view)||void 0===r||!r.isValid)&&t(s.Nwg.question.loadQuestionsByQuery(e.query))})},[t,l]),{questions:n,viewData:l}}},393299:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(202784),s=n(951248),r=n(662594),o=n(711004),a=n(284901);let l=e=>{let t=(0,r.L)(),n=(0,a._)(e),l=(0,o.$)(e);return(0,i.useEffect)(()=>{l.forEach(e=>{var n,i,r;null!==e&&(null===(n=e.query)||void 0===n?void 0:n.courseId)&&(null===(i=e.view)||void 0===i||!i.isLoading)&&(null===(r=e.view)||void 0===r||!r.isValid)&&t(s.Nwg.questionTag.loadQuestionTags(e.query))})},[t,l]),{tags:n,viewData:l}}},996448:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var i=n(202784),s=n(951248),r=n(662594),o=n(740907);let a=e=>{var t;let n=(0,r.L)(),a=(0,o.D)(e);return(0,i.useEffect)(()=>{!e||null!=a&&a.isLoading||null!=a&&a.isValid||n(s.Nwg.questionType.loadQuestionTypes({courseId:e}))},[e,n,null==a?void 0:a.isLoading,null==a?void 0:a.isValid]),null!==(t=null==a?void 0:a.values)&&void 0!==t?t:[]}},505546:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var i=n(202784),s=n(951248),r=n(662594);let o=e=>{let t=(0,r.L)();return(0,i.useCallback)(n=>{e&&t(s.Nwg.question.removeCopyQuestionsTask(e,n))},[t,e])}},554553:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var i=n(276635),s=n.n(i),r=n(202784),o=n(465139);function a(e){return function(e,t){let[n,i]=(0,r.useState)(e),s=(0,o.zX)(t),a=(0,r.useRef)(e);return(0,r.useEffect)(()=>{e!==a.current&&(s(e,a.current)||i(e),a.current=e)},[e,s]),n}(e,s().isEqual)}},261136:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});var i=n(202784),s=n(951248),r=n(662594),o=n(11931);let a=e=>{let t=(0,r.L)(),n=(0,o.a)(t=>s.Ys.content.getRootFolderByCourseId(t,e.courseId)),a=(0,o.a)(e=>e.content.isLoading);return(0,i.useEffect)(()=>{a||n||t(s.Nwg.content.loadContents(e))},[t,n,a,e]),n}},609936:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});var i=n(202784),s=n(951248),r=n(662594),o=n(11931);let a=e=>{let t=(0,r.L)();return(0,i.useEffect)(()=>{t(s.Nwg.studentPreview.loadStudentPreviewUser(e))},[t,e]),(0,o.a)(e=>s.Ys.studentPreview.getStudentPreviewUserInfo(e))}},328966:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var i=n(408027),s=n(951248),r=n(202784),o=n(662594),a=n(11931);let l="allow_user_pronoun_request";function c(){var e;let t=(0,a.a)(e=>s.Ys.systemPreference.getSystemPreferenceByKey(e,l)),[n,c]=(0,r.useState)((null!==(e=null==t?void 0:t.value)&&void 0!==e?e:i.duL.Yes)===i.duL.Yes),[d,u]=(0,r.useState)(!1),p=(0,o.L)(),m=e=>{e&&e===i.duL.Yes?c(!0):c(!1)};(0,r.useEffect)(()=>{u(!0),p(s.Nwg.systemPreference.loadSystemPreference({key:l})).then(({systemPreference:e})=>{m(e.value),u(!1)})},[p]);let h=(0,r.useCallback)(e=>{let t=e?i.duL.Yes:i.duL.No;return m(t),p(s.Nwg.systemPreference.persistSystemPreference({key:l,value:t}))},[p]);return{enabled:n,loading:d,onToggleChange:h}}},401328:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});var i=n(951248),s=n(202784),r=n(662594),o=n(11931);function a(e){let t=(0,r.L)(),n=(0,o.a)(t=>i.Ys.systemPreference.getSystemPreferenceByKey(t,e)),a=(0,o.a)(t=>i.Ys.systemPreference.isSystemPreferenceLoading(t,e));return(0,s.useEffect)(()=>{a||(null==n?void 0:n.value)||t(i.Nwg.systemPreference.loadSystemPreference({key:e}))},[t,e,a,null==n?void 0:n.value]),null==n?void 0:n.value}},737979:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var i=n(951248),s=n(202784),r=n(662594),o=n(11931);let a=async(e,t)=>{let n=await e(i.Nwg.userPronouns.loadSystemPronouns(t)),s=n.paging;(null==s?void 0:s.nextPage)&&await a(e,s)},l=()=>{let e=(0,r.L)(),[t,n]=(0,s.useState)(!0);(0,s.useEffect)(()=>{a(e).then(()=>{n(!1)})},[e]);let l=(0,o.a)(e=>i.Ys.userPronouns.getApprovedPronouns(e)),c=(0,s.useCallback)(t=>e(i.Nwg.userPronouns.addSystemPronoun(t)),[e]),d=(0,s.useCallback)(t=>e(i.Nwg.userPronouns.deleteSystemPronoun(t.id)),[e]);return{list:l,onAddPronoun:c,onRemovePronoun:d,loading:t}}},981327:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var i=n(951248),s=n(11931);let r=e=>(0,s.a)(t=>i.Ys.userPreference.getUserPreferenceByKey(t,e))},804573:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var i=n(951248),s=n(202784),r=n(662594);let o=()=>{let e=(0,r.L)();return(0,s.useCallback)(t=>e(i.Nwg.userPreference.persistUserPreference(t)),[e])}},683864:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(202784),s=n(981327),r=n(951248),o=n(662594);let a=e=>{let t=(0,o.L)(),n=(0,s.f)(e);return(0,i.useEffect)(()=>{n||t(r.Nwg.userPreference.loadUserPreference({key:e}))},[t,e,n]),n}},302017:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var i=n(11931),s=n(951248);let r=e=>{let t=(0,i.a)(t=>{if(e)return s.Ys.user.getUserById(t,e)});return t}},8865:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var i=n(771367),s=n(609936);let r=e=>{let t=(0,i.q)(),n=(0,s.B)(e);return n&&n.previewing?n.user:t}},435649:function(e,t,n){"use strict";n.d(t,{P:function(){return a}});var i=n(202784),s=n(951248),r=n(662594),o=n(11931);let a=e=>{let t=(0,r.L)();return(0,i.useEffect)(()=>{e&&t(s.Nwg.user.loadUser(e))},[t,e]),(0,o.a)(t=>s.Ys.user.getUserById(t,e))}},771367:function(e,t,n){"use strict";n.d(t,{q:function(){return a}});var i=n(202784),s=n(951248),r=n(662594),o=n(11931);let a=()=>{let e=(0,r.L)();return(0,i.useEffect)(()=>{e(s.Nwg.user.loadCurrentUser())},[e]),(0,o.a)(e=>s.Ys.user.getCurrentUser(e))}},948582:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var i=n(202784),s=n(662594),r=n(951248),o=n(302017);let a=e=>{let t=(0,s.L)(),n=(0,o.P)(e);return(0,i.useEffect)(()=>{e&&(n||t(r.Nwg.user.loadUser(e)))},[t,n,e]),n}},99017:function(e,t,n){"use strict";n.d(t,{I6:function(){return l},Nw:function(){return c},Ys:function(){return d}});var i=n(715729),s=n(276635),r=n(179155),o=n(550161),a=n(830095);let l=(0,o.Lq)({location:{},route:{},error:null},{[(0,o.ok)(a.Z.ROUTER_STATE_CHANGE_SUCCESS)]:(e,t)=>(0,i.ZP)(e,e=>{e.route=t.route}),[(0,o.ok)(a.Z.ROUTER_LOCATION_CHANGE_SUCCESS)]:(e,t)=>{let{queryParams:n}=t;return(0,i.ZP)(e,e=>{e.location.queryParams=n})},[(0,o.ok)(a.Z.APP_ERROR)]:(e,t)=>{let{error:n}=t,s=(0,r.Gt)(n);return console.error("Encountered application error",JSON.stringify(s)),(0,i.ZP)(e,e=>{e.error=s})},[(0,o.ok)(a.Z.APP_ERROR_CLEAR)]:e=>(0,i.ZP)(e,e=>{e.error=null})}),c={handleStateChangeSuccess:e=>(0,o.PH)(a.Z.ROUTER_STATE_CHANGE_SUCCESS,()=>{var t;let n=e||{},i=s.pick(n.toState,"name","panelClass","pageTitle"),r=Object.keys(null!==(t=n.toParams)&&void 0!==t?t:{}).filter(e=>"object"!=typeof n.toParams[e]&&"function"!=typeof n.toParams[e]).reduce((e,t)=>({...e,[t]:n.toParams[t]}),{});return Promise.resolve({route:{...i,params:r}})}),handleLocationChangeSuccess:e=>(0,o.PH)(a.Z.ROUTER_LOCATION_CHANGE_SUCCESS,()=>{let t=e.queryParams||{};return Promise.resolve({queryParams:t})}),setError:e=>(0,o.c3)(t=>{t((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e}))}),clearError:()=>(0,o.c3)(e=>{e((0,o.aU)((0,o.ok)(a.Z.APP_ERROR_CLEAR)))})},d={getRoute:e=>e.app.route,getLocation:e=>e.app.location,getQueryParams:e=>e.app.location.queryParams,getQueryParameterValue:e=>t=>t.app.location.queryParams[e],getAppError:e=>e.app.error}},1617:function(e,t,n){"use strict";n.d(t,{I6:function(){return a},Nw:function(){return l},Ys:function(){return c}});var i=n(715729),s=n(550161),r=n(664045),o=n(835098);let a=(0,s.Lq)({byCourseId:{},isLoading:!1},{[o.V.COURSE_ENTITLEMENTS_LOAD]:s.K4,[(0,s.ok)(o.V.COURSE_ENTITLEMENTS_LOAD)]:(e,t)=>{let n=t.entitlements,r=e;if(n){let s=n.reduce((e,t)=>(e[t.uid]=t,e),{});r=(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]=s})}return(0,s.f2)(r,t)},[(0,s.bG)(o.V.COURSE_ENTITLEMENTS_LOAD)]:s.sT}),l={loadUserCourseEntitlements:e=>(0,s.PH)(o.V.COURSE_ENTITLEMENTS_LOAD,()=>(0,r.l)(e).catch(e=>{throw{err:e}}))},c={userHasCourseEntitlement:(e,t,n)=>{let i=e.courseEntitlements.byCourseId[t];return!!i&&!!i[n]},hasAnyCourseEntitlement:(e,t,n)=>{let i=e.courseEntitlements.byCourseId[t];if(i)return n.some(e=>!!i[e])},hasLoadedCourseEntitlements:(e,t)=>!!t&&!!e.courseEntitlements.byCourseId[t],isLoadingEntitlements:e=>e.courseEntitlements.isLoading}},613077:function(e,t,n){"use strict";n.d(t,{I6:function(){return v},Nw:function(){return y},Ys:function(){return x}});var i=n(715729),s=n(560985),r=n(550161),o=n(276635),a=n(739982),l=n(408027),c=n(391819),d=n(846935),u=n(53925),p=n(71841),m=n(86604);function h(e){return e.id?e.id:`${e.userId}${e.columnId}`}function g(){return{byUserId:{},byMemberId:{},grades:{}}}function f(e,t,n){b(e,t),e.permissions=n||e.permissions}function b(e,t,n){var i;let s=e.byColumnId;for(let e of t){let t=h(e),r=s[e.columnId]||(s[e.columnId]=g());e.userId&&(r.byUserId[e.userId]=t),e.memberId&&(r.byMemberId[e.memberId]=t);let o=r.grades[t];if(!n&&o&&o.version>e.version)return;r.grades[t]={...e,api:{isInvalidated:function(e,t){var i;return!!n&&(!e||(null===(i=null==e?void 0:e.displayGrade)||void 0===i?void 0:i.isOverride)||e.isCalculatedColumnGrade||(null==e?void 0:e.id)===t)}(o,t),isUpdating:!1,isDeleting:!1},ui:null!==(i=null==o?void 0:o.ui)&&void 0!==i?i:{}}}}let v=(0,r.Lq)({byColumnId:{},isLoading:!1,paging:null,permissions:{}},{[u.V.GRADEBOOK_GRADE_LOAD_BY_COLUMN]:r.K4,[(0,r.ok)(u.V.GRADEBOOK_GRADE_LOAD_BY_COLUMN)]:(e,t)=>{let{grades:n,paging:s,permissions:o}=t;return e=(0,i.ZP)(e,e=>{f(e,n,o),s&&(e.paging=s)}),(0,r.f2)(e,t)},[(0,r.bG)(u.V.GRADEBOOK_GRADE_LOAD_BY_COLUMN)]:r.sT,[u.V.GRADEBOOK_BULKVIEW_LOAD]:r.K4,[(0,r.ok)(u.V.GRADEBOOK_BULKVIEW_LOAD)]:(e,t)=>{let{columnIds:n,memberIds:s,grades:o,permissions:a}=t;return e=(0,i.ZP)(e,e=>{(function(e,t,n){t.forEach(t=>{e.byColumnId[t]||(e.byColumnId[t]=g());let i=e.byColumnId[t];n.forEach(e=>i.byMemberId[e]=null)})})(e,n,s),f(e,o,a)}),(0,r.f2)(e,t)},[(0,r.bG)(u.V.GRADEBOOK_BULKVIEW_LOAD)]:r.sT,[(0,r.ok)(d.V.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{var n;return(null===(n=t.gradebookColumn)||void 0===n?void 0:n.id)&&(e=(0,i.ZP)(e,e=>{delete e.byColumnId[t.gradebookColumn.id]})),(0,r.f2)(e,t)},[(0,r.ok)(u.V.GRADEBOOK_GRADES_LOAD)]:(e,t)=>{let{grades:n}=t;if(!n)return(0,r.f2)(e,t);let s=(0,i.ZP)(e,e=>{let t=new Set(n.map(e=>e.userId).filter(e=>!!e));!function(e,t){Object.keys(e.byColumnId).forEach(n=>{t.forEach(t=>{var i,s,r;let o=null===(s=null===(i=e.byColumnId[n])||void 0===i?void 0:i.byUserId)||void 0===s?void 0:s[t];if(!o)return;let a=e.byColumnId[n].grades[o];if(!a.isCalculatedColumnGrade&&!(null===(r=null==a?void 0:a.displayGrade)||void 0===r?void 0:r.isOverride))return;let l=h(a);e.byColumnId[a.columnId].grades[l]&&(e.byColumnId[a.columnId].grades[l].api={...e.byColumnId[a.columnId].grades[l].api,isInvalidated:!0})})})}(e,t),f(e,n)});return(0,r.f2)(s,t)},[(0,r.ok)(u.V.GRADEBOOK_GRADES_INVALIDATE)]:(e,t)=>{let{grades:n}=t;if(!n)return(0,r.f2)(e,t);let s=(0,i.ZP)(e,e=>{b(e,n,!0)});return(0,r.f2)(s,t)},[u.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID]:(e,t)=>{let{columnId:n,id:s}=t;return(0,i.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=g()),e.byColumnId[n].grades[s]={...e.byColumnId[n].grades[s],api:{isUpdating:!0}}})},[(0,r.ok)(u.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{let{grade:n}=t;return e=(0,i.ZP)(e,e=>{f(e,[n])}),(0,r.f2)(e,t)},[(0,r.bG)(u.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{let{columnId:n,id:s}=t;return(0,i.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=g()),e.byColumnId[n].grades[s]={...e.byColumnId[n].grades[s],api:{isUpdating:!1}}})},[u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID]:(e,t)=>{let{columnId:n,userId:s}=t;return(0,i.ZP)(e,e=>{let t=`${s}${n}`;e.byColumnId[n]||(e.byColumnId[n]=g()),e.byColumnId[n].grades[t]={...e.byColumnId[n].grades[t],api:{isUpdating:!0}}})},[(0,r.ok)(u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{let{grade:n}=t;return e=(0,i.ZP)(e,e=>{f(e,[n]),e.byColumnId[n.columnId].grades[h(n)].ui={isGradePersistByUserId:!0}}),(0,r.f2)(e,t)},[(0,r.bG)(u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{let{columnId:n,userId:s}=t;return(0,i.ZP)(e,e=>{let t=`${s}${n}`;e.byColumnId[n]||(e.byColumnId[n]=g()),e.byColumnId[n].grades[t]={...e.byColumnId[n].grades[t],api:{isUpdating:!1}}})},[u.V.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID]:(e,t)=>{let{columnId:n,id:s}=t;return(0,i.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=g()),e.byColumnId[n].grades[s]={...e.byColumnId[n].grades[s],api:{isUpdating:!0}}})},[(0,r.ok)(u.V.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID)]:(e,t)=>{let{columnId:n,gradeId:s}=t.grade;return e=(0,i.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=g());let t=e.byColumnId[n].grades[s],i={...t,manualStatus:l.WTZ.IsPosted,hasGradeBeenPosted:!0};f(e,[i])}),(0,r.f2)(e,t)},[(0,r.bG)(u.V.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID)]:(e,t)=>{let{columnId:n,gradeId:s}=t.grade;return(0,i.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=g()),e.byColumnId[n].grades[s]={...e.byColumnId[n].grades[s],api:{isUpdating:!1}}})},[(0,r.ok)(d.V.GRADEBOOK_COLUMN_POST_READY_GRADES)]:(e,t)=>{let{columnId:n}=t;if(n){let t=E(e.byColumnId,n);return C(e,t)}return e},[(0,r.ok)(c.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{attempt:n}=t,{gradeId:i}=null!=n?n:{};if(i){let t=S(e.byColumnId).filter(e=>(null==e?void 0:e.id)===i);return C(e,t)}return e},[(0,r.ok)(m.V.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{columnId:n,gradeId:s}=t.data;return n&&s?(0,i.ZP)(e,e=>{var t;let i=null===(t=e.byColumnId[n])||void 0===t?void 0:t.grades[s];i&&(i.api={...i.api,isInvalidated:!0})}):e}}),y={loadGradebookGradesByColumnId:({columnId:e,courseId:t,userId:n,includeUnpostedGrade:i})=>(0,r.PH)(u.V.GRADEBOOK_GRADE_LOAD_BY_COLUMN,async()=>{try{let s=await a.XO(t,e,n,null!=i&&i);return s}catch(e){throw{err:e}}},null,[l.oji.NotFound]),loadBulkView:(e,t,n,i)=>(0,r.PH)(u.V.GRADEBOOK_BULKVIEW_LOAD,async()=>{try{let s=await a.nT(e,t,n,i);return{columnIds:t,memberIds:n,...s}}catch(e){throw{err:e}}}),setGradesInStore:e=>(0,r.aU)((0,r.ok)(u.V.GRADEBOOK_GRADES_LOAD),{grades:e}),setInvalidatedGradesInStore:e=>(0,r.aU)((0,r.ok)(u.V.GRADEBOOK_GRADES_INVALIDATE),{grades:e}),loadAnonymousGradeExemption:(e,t)=>{let{courseId:n,columnId:i,userId:s}=t;return(0,r.PH)(u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID,async()=>{try{let r=await a.Fe(t);if(r.isExempt===(null==e?void 0:e.isExempt))return{grade:e};return{grade:{...r,courseId:n,columnId:i,userId:s}}}catch(t){throw{err:t,grade:e}}},{courseId:n,columnId:i,userId:s})},updateAnonymousGradeExemption:(e,t)=>(0,r.PH)(u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID,async()=>{try{let n=await a.Q5(t);return{grade:{...e,...n}}}catch(t){throw{err:t,grade:e}}},e),updateGradeByGradeId:(e,t)=>(0,r.PH)(u.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID,async()=>{try{let n=await a.GI(e,t);return n}catch(e){throw{err:e,nextGrade:t}}},t),createGradeByUserId:e=>(0,r.PH)(u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID,async()=>{try{let t=await a.mE(e);return t}catch(t){throw{err:t,grade:e}}},e),postGradeByGradeId:e=>(0,r.PH)(u.V.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID,async()=>{try{let t=await a.VH(e);return t}catch(t){throw{err:t,grade:e}}},e)};function C(e,t){return(0,i.ZP)(e,e=>{b(e,t,!0)})}function S(e={}){let t=[];return Object.keys(e).forEach(n=>{var i;Object.keys((null===(i=e[n])||void 0===i?void 0:i.grades)||{}).forEach(i=>{t.push(e[n].grades[i])})}),t}function E(e,t){return S(e).filter(e=>(null==e?void 0:e.columnId)===t)}let I=e=>e.gradebookGrade.byColumnId,w=(0,s.P1)([I,(e,t)=>t],E),A=(0,s.P1)([I,(e,t)=>t],function(e,t){return S(e).filter(e=>e.courseId===t)}),k=(0,s.P1)([I,(e,t)=>t],function(e,t){return S(e).filter(e=>e.userId===t)}),x={getGradebookGradeById:(e,t)=>(0,o.filter)(S(e.gradebookGrade.byColumnId),{id:t}),getGradebookGradesByColumnId:w,getGradebookGradesByCourseId:A,getGradebookGradesByUserId:k,getGradebookGradesByColumnIdAndUserId:(e,t,n)=>(0,o.filter)(E(I(e),t),{userId:n}),areGradebookGradesLoading:e=>e.gradebookGrade.isLoading,getMemberIdsWithMissingOrInvalidatedGradesInColumn:p.Q,getGradebookGradesByColumnIdAndMemberIds:p.y}},550161:function(e,t,n){"use strict";n.d(t,{HT:function(){return A},K4:function(){return E},LW:function(){return I},Li:function(){return w},Lq:function(){return g},NV:function(){return k},PH:function(){return v},PM:function(){return x},UY:function(){return f},_X:function(){return p},aU:function(){return m},bG:function(){return u},c3:function(){return h},cI:function(){return c},f2:function(){return S},o_:function(){return y},ok:function(){return d},sT:function(){return C},vn:function(){return b}});var i=n(276635),s=n(198022),r=n(830095),o=n(715729),a=n(179155),l=n(702028);let c=e=>`${e}.allow`,d=e=>`${e}.ok`,u=e=>`${e}.fail`;function p(e){return e.type=`thunkToSaga[${"type"in e?e.type:""}]`,e}function m(e,t){return{type:e,...t}}function h(e){return e}function g(e,...t){return(n=e,i)=>{let s=i&&i.type;if(!s)return n;let r=t.map(e=>e[s]).filter(e=>!!e);return r.length>0&&r.forEach(e=>{n=e(n,i)}),n}}function f(e){let t=Object.keys(e);return function(n,i){let s=arguments.length<=0||void 0===n?{}:n;return(0,o.ZP)(s,n=>{t.forEach(t=>{let r=e[t],o=s[t];n[t]=r(o,i)})})}}function b(...e){let t="function"!=typeof e[e.length-1]&&e.pop();return function(n,i){let s=arguments.length<=0||void 0===n?t||{}:n;return e.reduce((e,t)=>t(e,i),s)}}function v(e,t,n,i){return(s,o)=>(s(m(e,n)),t(o,s).then(t=>s(m(d(e),t))).catch(t=>{let o=(0,a.Gt)(t),p=(0,l.K)(o,null!=i?i:[]);if(p)return s(m(c(e),n)),null;if(s(m(u(e),t)),s(m(d(r.Z.APP_ERROR),{error:o})),(0,l.n)(o))return null;let h=t&&"object"==typeof t&&"err"in t?t.err:t;throw h}))}function y(e,t){Object.keys(t).forEach(n=>{e[n]=t[n]})}function C(e,t,n={}){return(0,o.ZP)(e,e=>{e.isLoading=!1,y(e,n)})}function S(e,t,n={}){return(0,o.ZP)(e,e=>{e.isLoading=!1,y(e,n)})}function E(e,t,n={}){return(0,o.ZP)(e,e=>{e.isLoading=!0,y(e,n)})}let I={id:null,view:null};function w(e,t){return(n,r)=>{var a;let{query:l}=r,c=null!==(a=e(n,l).id)&&void 0!==a?a:(0,s.v4)(),d=t(l);return E(n=(0,o.ZP)(n,e=>{(0,i.set)(e,[...d,c,"isLoading"],!0),(0,i.set)(e,[...d,c,"isValid"],!0),(0,i.set)(e,[...d,c,"query"],l)}),r)}}function A(e,t){return(n,r)=>{var a;let{query:l}=r,c=null!==(a=e(n,l).id)&&void 0!==a?a:(0,s.v4)(),d=t(l);return C(n=(0,o.ZP)(n,e=>{(0,i.set)(e,[...d,c,"isLoading"],!1),(0,i.set)(e,[...d,c,"query"],l)}),r)}}function k(e,t,n){var r;let{viewResolver:a,viewsPathResolver:l,values:c,paging:d,permissions:u}=n,{query:p}=t,m=null!==(r=a(e,p).id)&&void 0!==r?r:(0,s.v4)(),h=l(p);return S(e=(0,o.ZP)(e,e=>{(0,i.set)(e,[...h,m,"isLoading"],!1),(0,i.set)(e,[...h,m,"isValid"],!0),(0,i.set)(e,[...h,m,"query"],p),c&&((0,i.set)(e,[...h,m,"values"],c),(0,i.set)(e,[...h,m,"lastFetched"],Date.now())),d&&(0,i.set)(e,[...h,m,"paging"],d),u&&(0,i.set)(e,[...h,m,"permissions"],u)}),t)}function x(e,t){return{...e,...t}}},762765:function(e,t,n){"use strict";n.d(t,{I6:function(){return p},Nw:function(){return m},Ys:function(){return h}});var i=n(715729),s=n(54971),r=n(592771),o=n(550161),a=n(789061),l=n(186093),c=n(670663),d=n(14857);let u=(e,t)=>{let n=(0,i.ZP)(e,n=>{for(let[i,s]of Object.entries(t.users))n.byId[i]={...e.byId[i],...s}});return n},p=(0,o.Lq)({byId:{},isLoading:!1},{[d.V.USER_LOAD]:o.K4,[(0,o.ok)(d.V.USER_LOAD)]:(e,t)=>{let{user:n}=t,s=e;return n&&(s=(0,i.ZP)(e,e=>{e.byId[n.id]=n})),(0,o.f2)(s,t)},[(0,o.ok)(l.V.COURSE_MEMBERSHIP_LOAD)]:(e,t)=>{let{data:n}=t;if(!n.user)return e;let{user:s}=n;return(0,i.ZP)(e,e=>{e.byId[s.id]=s})},[(0,o.ok)(l.V.COURSE_MEMBERSHIPS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n.users)return e;let{users:s}=n;return(0,i.ZP)(e,e=>{Object.keys(s).forEach(t=>{e.byId[t]=s[t]})})},[(0,o.bG)(d.V.USER_LOAD)]:o.sT,[(0,o.ok)(s.Z.GROUPS_LOAD_BY_CONTENT_ID)]:(e,t)=>{let{groups:n}=t,s=e;return n&&Object.values(n).forEach(e=>{let{memberships:t}=e;t&&t.forEach(e=>{let{user:t}=e;t&&(s=(0,i.ZP)(s,e=>{e.byId[t.id]=t}))})}),s},[(0,o.ok)(r.V.BLOG_PARTICIPANTS_LOAD)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{let{byCourseMembershipId:n}=t.data;n&&Object.keys(n||{}).forEach(t=>{let i=n[t].user;i&&(e.byId[i.id]=i)})});return(0,o.f2)(n,t)},[(0,o.ok)(c.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD)]:u,[(0,o.ok)(c.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD)]:u,[d.V.USER_LOAD_ME]:o.K4,[(0,o.ok)(d.V.USER_LOAD_ME)]:(e,t)=>{let{user:n}=t,s=e;return n&&(s=(0,i.ZP)(e,e=>{e.current=n,e.byId[n.id]=n})),(0,o.f2)(s,t)},[(0,o.bG)(d.V.USER_LOAD_ME)]:o.sT}),m={loadUser:e=>(0,o.PH)(d.V.USER_LOAD,t=>{var n;return(n=t(),h.getUserById(n,e))?Promise.resolve(null):(0,a.B)(e).then(e=>({user:e}))}),loadCurrentUser:()=>(0,o.PH)(d.V.USER_LOAD_ME,e=>{var t;return(t=e(),h.getCurrentUser(t))?Promise.resolve(null):(0,a.B)("me").then(e=>({user:e}))})},h={getUserById:(e,t)=>e.user.byId[t],getUsersByIds:(e,t)=>{let n={};return t.forEach(t=>{e.user.byId[t]&&(n[t]=e.user.byId[t])}),n},getCurrentUser:e=>e.user.current}},771300:function(e,t,n){"use strict";n.d(t,{jM:function(){return i.jM},S6:function(){return o.S6},hq:function(){return o.hq},F7:function(){return p.F},PG:function(){return o.PG},e9:function(){return o.e9},UP:function(){return o.UP},hm:function(){return o.hm},IK:function(){return h.I},Gt:function(){return s.Gt},RF:function(){return i.RF},QK:function(){return o.QK},WE:function(){return u},xh:function(){return m.xh},A1:function(){return h.A},Kn:function(){return r.K}});var i=n(785613),s=n(179155),r=n(702028),o=n(839248),a=n(230267);class l extends a.Y{constructor(e,t,n){super(n,e),this.ident=t}}class c extends l{constructor(e,t){super("InvalidMathMLError",e,t),this.error=t}}class d extends l{constructor(e,t){super("MissingVariableError",e,t),this.error=t}}function u(e,t){let n=e.error.message;switch(n){case"Invalid MathML":return new c(t,e.error);case"Invalid Variable":return new d(t,e.error);default:return e}}var p=n(426368),m=n(828270),h=n(954135)},951248:function(e,t,n){"use strict";n.d(t,{_LW:function(){return e$._},LPT:function(){return eB.LP},VfA:function(){return eN.VfA},Wb7:function(){return eN.Wb7},jMP:function(){return eR.jM},PQc:function(){return eN.PQc},oVk:function(){return eN.oVk},lzL:function(){return eB.lz},GQk:function(){return eB.GQ},AaE:function(){return eB.A},a6B:function(){return eN.a6B},VIO:function(){return eN.VIO},wnm:function(){return eN.wnm},Fce:function(){return eB.Fc},yY6:function(){return eN.yY6},tiF:function(){return eN.tiF},TRC:function(){return eB.TR},x40:function(){return s},eu1:function(){return eB.eu},I_d:function(){return eB.I_},XXy:function(){return ek.XX},UAK:function(){return eB.UA},HTE:function(){return eN.HTE},W6_:function(){return eN.W6_},zg8:function(){return eN.zg8},S6o:function(){return eR.S6},hqK:function(){return eR.hq},ZNX:function(){return eN.ZNX},Xgx:function(){return eB.Xg},ddT:function(){return eB.dd},fq8:function(){return eB.fq},$Gc:function(){return eN.$Gc},eQC:function(){return eN.eQC},FSJ:function(){return eN.FSJ},t9O:function(){return eN.t9O},RoV:function(){return eN.RoV},dcz:function(){return eB.dc},Q0L:function(){return eN.Q0L},a4B:function(){return eN.a4B},lJA:function(){return eB.lJ},GwB:function(){return eB.Gw},jrO:function(){return eB.jr},u$1:function(){return eB.u$},PG6:function(){return eR.PG},e9A:function(){return eR.e9},UP6:function(){return eR.UP},hm3:function(){return eR.hm},TeC:function(){return ek.Te},IK:function(){return eR.IK},Nwg:function(){return eP},api:function(){return eN.api},C4U:function(){return eN.C4U},Q2d:function(){return eN.Q2d},aBo:function(){return eB.aB},N1L:function(){return eB.N1},I7o:function(){return eB.I7},GKE:function(){return eB.GK},bbE:function(){return eN.bbE},MAI:function(){return eB.MA},l_$:function(){return eB.l_},gUR:function(){return eN.gUR},oHG:function(){return eN.oHG},s9I:function(){return eN.s9I},us4:function(){return eN.us4},vc:function(){return r.vc},jQV:function(){return r.jQ},uIm:function(){return eN.uIm},_v9:function(){return eN._v9},Vbk:function(){return eN.Vbk},GNH:function(){return eN.GNH},YUt:function(){return eN.YUt},iBu:function(){return eN.iBu},_Ae:function(){return eN._Ae},JYP:function(){return eN.JYP},FAX:function(){return eN.FAX},cUf:function(){return eN.cUf},TS8:function(){return eN.TS8},uHV:function(){return eN.uHV},V$w:function(){return eN.V$w},jC5:function(){return eN.jC5},G3z:function(){return eN.G3z},VFg:function(){return eN.VFg},Fix:function(){return eN.Fix},OYP:function(){return ek.V5},PZi:function(){return eN.PZi},W3l:function(){return eN.W3l},Y$o:function(){return eN.Y$o},uZ9:function(){return eN.uZ9},Tj0:function(){return eN.Tj0},nMx:function(){return eN.nMx},RMg:function(){return eB.RM},kfU:function(){return eB.kf},Uc6:function(){return eN.Uc6},_pB:function(){return eN._pB},B22:function(){return eB.B2},jdu:function(){return eN.jdu},C8y:function(){return eB.C8},Roc:function(){return eN.Roc},Si$:function(){return eB.Si},Ybd:function(){return eB.Yb},uVn:function(){return eB.uV},M5E:function(){return eN.M5E},MOU:function(){return eB.MO},Csr:function(){return eN.Csr},azG:function(){return eN.azG},RAR:function(){return eN.RAR},dep:function(){return eN.dep},qDZ:function(){return eN.qDZ},OuV:function(){return eN.OuV},PR8:function(){return eN.PR8},fBj:function(){return eN.fBj},ltB:function(){return eN.ltB},I5k:function(){return eN.I5k},GjL:function(){return eN.GjL},FaB:function(){return eN.FaB},QWy:function(){return eG},vQg:function(){return eL},Ys:function(){return eD},$_n:function(){return eN.$_n},nPi:function(){return r.nP},W8C:function(){return eN.W8C},_X4:function(){return ex._X},M4H:function(){return eB.M4},Hfm:function(){return eN.Hfm},yLp:function(){return eN.yLp},OmG:function(){return eN.OmG},OgF:function(){return eM}});var i,s,r=n(491288),o=n(276635),a=n(715729),l=n(809347),c=n(283531),d=n(99017),u=n(16529),p=n(232154),m=n(491791),h=n(961978),g=n(989609),f=n(505548),b=n(552728),v=n(137841),y=n(517721),C=n(940612),S=n(41205),E=n(613573),I=n(422890),w=n(64818),A=n(1617),k=n(279020),x=n(732305),T=n(598547),P=n(257724),D=n(654448),G=n(87647),R=n(591526),B=n(251291),L=n(105232),N=n(54225),O=n(45216),M=n(960369),$=n(933410),H=n(156765),F=n(438202),U=n(847880),V=n(502448),_=n(444112),q=n(613077),z=n(36011),W=n(76701),j=n(585999),Z=n(610239),K=n(303062),X=n(796143),Y=n(928659),Q=n(586750),J=n(149631),ee=n(611734),et=n(220854),en=n(788652),ei=n(237368),es=n(955370),er=n(843376),eo=n(127613),ea=n(676285),el=n(677105),ec=n(489785),ed=n(58405),eu=n(60049),ep=n(620698),em=n(225707),eh=n(967589),eg=n(333734),ef=n(816785),eb=n(749505),ev=n(316279),ey=n(762765),eC=n(653729),eS=n(685573),eE=n(546514),eI=n(843979),ew=n(619281),eA=n(333189);n(417548);var ek=n(125107),ex=n(550161);let eT={ai:l.I6,announcement:c.I6,assessment:u.I6,attemptReceipt:p.I6,blog:{blogs:m.I6,comments:h.I6,entries:g.I6,participants:f.I6,summary:b.I6},calendar:y.I6,columnSummary:C.I6,contentReviewState:I.I6,course:S.I6,courseChildren:ew.I6,courseConversion:w.I6,courseEntitlements:A.I6,courseTasks:k.I6,courseLogs:x.I6,courseMembership:v.I6,courseMessage:T.I6,coursePreference:P.I6,courseProgress:D.I6,courseTools:G.I6,courseUserNotes:R.I6,content:E.I6,delegatedAttemptGrade:B.I6,discussionBoardSettings:L.I6,exceptionDetails:N.I6,featureFlags:O.I6,fileUploadSettings:M.I6,fileUpload:$.I6,ftue:H.I6,gradableItemUserOption:F.I6,gradebookAttempt:U.I6,gradebookCategory:V.I6,gradebookColumn:_.I6,gradebookGrade:q.I6,gradebookSchema:z.I6,group:X.I6,groupSetImport:j.I6,groupMembersImport:Z.I6,groupSetExport:K.I6,groupWorkspace:Y.I6,institutionBrand:Q.I6,institutionRole:J.I6,locale:ee.I6,ltiDomain:et.I6,ltiPlacement:en.I6,notificationMethodSetting:ei.I6,partnerCloud:es.I6,proctoringServices:er.I6,question:el.I6,questionAnalysis:{questionDetails:ea.I6,reports:eo.I6},questionAttempt:ec.I6,questionAttemptGrade:ed.I6,questionGradeStatus:eu.I6,questionTag:ep.I6,questionType:em.I6,sessionDebug:eh.I6,submissionServices:ef.I6,studentPreview:eg.I6,systemPreference:eb.I6,theme:ev.I6,user:ey.I6,userPreference:eC.I6,userPronouns:eS.I6,app:d.I6,contentIndicators:eE.I6,ultraSettings:eI.I6,unsplash:eA.I6},eP={ai:l.Nw,announcement:c.Nw,assessment:u.Nw,attemptReceipt:p.Nw,blog:{blogs:m.Nw,comments:h.Nw,entries:g.Nw,participants:f.Nw,summary:b.Nw},calendar:y.Nw,columnSummary:C.Nw,contentReviewState:I.Nw,course:S.Nw,courseChildren:ew.Nw,courseConversion:w.Nw,courseEntitlements:A.Nw,courseTasks:k.Nw,courseLogs:x.Nw,courseMembership:v.Nw,courseMessage:T.Nw,coursePreference:P.Nw,courseProgress:D.Nw,courseTools:G.Nw,courseUserNotes:R.Nw,content:E.Nw,delegatedAttemptGrade:B.Nw,discussionBoardSettings:L.Nw,exceptionDetails:N.Nw,featureFlags:O.Nw,fileUpload:$.Nw,fileUploadSettings:M.Nw,ftue:H.Nw,gradableItemUserOption:F.Nw,gradebookAttempt:U.Nw,gradebookCategory:V.Nw,gradebookColumn:_.Nw,gradebookGrade:q.Nw,gradebookSchema:z.Nw,granularContentCopy:W.N,group:X.Nw,groupSetImport:j.Nw,groupMembersImport:Z.Nw,groupSetExport:K.Nw,groupWorkspace:Y.Nw,institutionBrand:Q.Nw,institutionRole:J.Nw,locale:ee.Nw,ltiDomain:et.Nw,ltiPlacement:en.Nw,notificationMethodSetting:ei.Nw,partnerCloud:es.Nw,proctoringServices:er.Nw,question:el.Nw,questionAnalysis:{questionDetails:ea.Nw,reports:eo.Nw},questionAttempt:ec.Nw,questionAttemptGrade:ed.Nw,questionGradeStatus:eu.Nw,questionTag:ep.Nw,questionType:em.Nw,sessionDebug:eh.Nw,studentPreview:eg.Nw,submissionServices:ef.Nw,systemPreference:eb.Nw,theme:ev.Nw,user:ey.Nw,userPreference:eC.Nw,userPronouns:eS.Nw,app:d.Nw,contentIndicators:eE.Nw,ultraSettings:eI.Nw,unsplash:eA.Nw},eD={ai:l.Ys,assessment:u.Ys,attemptReceipt:p.Ys,blog:{blogs:m.Ys,comments:h.Ys,entries:g.Ys,participants:f.Ys,summary:b.Ys},calendar:y.Ys,columnSummary:C.Ys,contentReviewState:I.Ys,course:S.Ys,courseChildren:ew.Ys,courseConversion:w.Ys,courseEntitlements:A.Ys,courseTasks:k.Ys,courseLogs:x.Ys,courseMembership:v.Ys,courseMessage:T.Ys,coursePreference:P.Ys,courseProgress:D.Ys,courseTools:G.Ys,courseUserNotes:R.Ys,content:E.Ys,delegatedAttemptGrade:B.Ys,discussionBoardSettings:L.Ys,exceptionDetails:N.Ys,featureFlags:O.Ys,fileUploadSettings:M.Ys,fileUpload:$.Ys,ftue:H.Ys,gradableItemUserOption:F.Ys,gradebookAttempt:U.Ys,gradebookCategory:V.Ys,gradebookColumn:_.Ys,gradebookGrade:q.Ys,gradebookSchema:z.Ys,group:X.Ys,groupSetImport:j.Ys,groupMembersImport:Z.Ys,groupSetExport:K.Ys,groupWorkspace:Y.Ys,institutionBrand:Q.Ys,institutionRole:J.Ys,locale:ee.Ys,ltiDomain:et.Ys,ltiPlacement:en.Ys,notificationMethodSetting:ei.Ys,partnerCloud:es.Ys,proctoringServices:er.Ys,question:el.Ys,questionAnalysis:{questionDetails:ea.Ys,reports:eo.Ys},questionAttempt:ec.Ys,questionAttemptGrade:ed.Ys,questionGradeStatus:eu.Ys,questionTag:ep.Ys,questionType:em.Ys,sessionDebug:eh.Ys,submissionServices:ef.Ys,studentPreview:eg.Ys,systemPreference:eb.Ys,user:ey.Ys,userPreference:eC.Ys,userPronouns:eS.Ys,app:d.Ys,contentIndicators:eE.Ys,ultraSettings:eI.Ys,unsplash:eA.Ys};function eG(e,t){return function e(t,n,i){let s=Object.keys(i),r=arguments.length<=0||void 0===t?{}:t,l=r;return s.forEach(t=>{let s=o.get(i,t),c=o.get(r,t);"object"==typeof s?l=(0,a.ZP)(l,i=>{o.set(i,t,e(c,n,s))}):"function"==typeof s&&(l=(0,a.ZP)(l,e=>{o.set(e,t,s(c,n))}))}),l}(e,t,eT)}var eR=n(771300),eB=n(112027),eL={uploadRequestWatcherSaga:$.LD},eN=n(12402),eO=n(788098);let eM={groupSet:eO.O};(i=s||(s={})).MultipleAttemptsAndGroups="feature.course.content.assessments.multipleAttemptsAndGroupsFeatureFlag",i.FlexibleAttemptGradingM1="feature.content.course.grading.flexible.ui",i.FlexibleAttemptGradingByQuestion="feature.content.course.grading.flexible.ui.grade-by-question",i.GradingBarAttemptNavigation="feature.content.course.grading.bar.attempt.navigation",i.OverallGradeSorting="feature.course.gradebook.overall.grade.sorting",i.AnonymousGrading="feature.course.content.assessment.test.anonymous.grading",i.HowAmIDoingReport="feature.telemetry.student.progress",i.ProhibitBacktrackingWithPageBreaks="feature.course.content.assessment.prohibit.backtrack.custom.paging",i.SubmissionSendMessaging="feature.course.grade.submission.messaging",i.FormativeAssessment="feature.course.content.formative.assessments",i.AnonymousException="feature.course.gradebook.anonymous.exception",i.AiFeatures="feature.ai",i.CourseSettingsConsole="feature.course.settings.console";var e$=n(914471)},26451:function(e,t,n){"use strict";n.d(t,{V1:function(){return l}});var i=n(408027),s=n(276635),r=n(406392);function o(e,t){var n,i,s,r;return null===(r=null===(s=null===(i=null===(n=e.adaptiveReleaseRules)||void 0===n?void 0:n.rules)||void 0===i?void 0:i[0])||void 0===s?void 0:s.criteria)||void 0===r?void 0:r.find(e=>t.includes(e.type))}function a(e){return o(e,[i.faN.Date])}let l=e=>{var t,n;return!!(e.isAvailable&&(null===(n=null===(t=e.adaptiveReleaseRules)||void 0===t?void 0:t.rules)||void 0===n?void 0:n.every(e=>{var t;return null===(t=e.criteria)||void 0===t?void 0:t.length})))},c=e=>{var t,n,s,r;return!!(null===(r=null===(s=null===(n=null===(t=e.adaptiveReleaseRules)||void 0===t?void 0:t.rules)||void 0===n?void 0:n[0])||void 0===s?void 0:s.criteria)||void 0===r?void 0:r.some(e=>e.type===i.faN.ForcedSequence))},d=e=>(0,s.isDate)(e)?e:null==e||""===e?null:new Date(e);t.ZP={canDeleteAllCriteria:function(e,t){return t.every(t=>(function(e,t){switch(t.type){case i.faN.Grade:case i.faN.GradePercentage:return e.permissions.adaptiveRelease.criteria.performance.delete;case i.faN.Date:return e.permissions.adaptiveRelease.criteria.dates.delete;default:return e.permissions.adaptiveRelease.delete}})(e,t))},getACLCriterion:function(e){return o(e,[i.faN.ACL])},getDateCriterion:a,getForcedSequenceCriterion:function(e){return o(e,[i.faN.ForcedSequence])},getPerformanceCriterion:function(e){return o(e,[i.faN.Grade,i.faN.GradePercentage])},isConditionalRelease:l,isForcedSequenceItem:c,hasOnlyForcedSequenceConditionalReleaseCriteria:e=>{var t,n,i,s;return!!(!e.adaptiveReleaseRules&&(0,r.ab)(e))||!!c(e)&&(null===(s=null===(i=null===(n=null===(t=e.adaptiveReleaseRules)||void 0===t?void 0:t.rules)||void 0===n?void 0:n[0])||void 0===i?void 0:i.criteria)||void 0===s?void 0:s.length)===1},isDueDateWithinReleaseConditionRange:(e,t)=>{var n;let i=!0;if(t&&e.adaptiveReleaseRules){let s=e.adaptiveReleaseRules;if(null===(n=null==s?void 0:s.rules)||void 0===n?void 0:n.length){let n=a(e);if(n){let e=d(n.start),s=d(n.end);e&&s?i=t>e&&t<s:e&&!s?i=t>e:!e&&s&&(i=t<s)}}}return i}}},23938:function(e,t,n){"use strict";n.d(t,{Qi:function(){return b},iA:function(){return f},rD:function(){return h},xP:function(){return c}});var i=n(5196),s=n(26451),r=n(408027),o=n(406392);let a=e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.edit},l=/\/([^\/]*)_.*\..*$/,c=e=>{var t;let n=null===(t=e.iconUrl)||void 0===t?void 0:t.match(l);if(!n)return r.DXv.Unknown;switch(n[1]){case"assignment":return r.DXv.UltraAssignment;case"discussion":return r.DXv.Discussion;case"file":return r.DXv.File;case"folder":return r.DXv.Folder;case"link":return r.DXv.ExternalLink;case"test":return r.DXv.TestLink;default:return r.DXv.Unknown}},d=e=>{var t,n,i;return(null!==(i=null===(n=null===(t=e.adaptiveReleaseRules)||void 0===t?void 0:t.rules)||void 0===n?void 0:n.length)&&void 0!==i?i:0)>0},u=e=>!e.isAvailable&&!e.isPartiallyVisible,p=e=>e.visibility===r.hbA.Restricted,m=e=>d(e)&&p(e),h=e=>{if(!e.contentDetail)return!1;let t=e.contentDetail[i.GQ.Folder.toString()];return!!i.GQ.Folder.isEqualTo(e.contentHandler)&&null!=t&&!!t.isBbPage||!!i.GQ.Unknown.isEqualTo(e.contentHandler)&&void 0},g=e=>i.GQ.Folder.isEqualTo(e.contentHandler)&&!h(e);function f(e){switch(e){case r.nEm.Embed:return i.I_.Inline;case r.nEm.EmbedOnly:return i.I_.InlineOnly;case r.nEm.Link:return i.I_.Attachment}}function b(e){switch(e){case i.I_.Inline:return r.nEm.Embed;case i.I_.InlineOnly:return r.nEm.EmbedOnly;case i.I_.Attachment:return r.nEm.Link}}t.ZP={canCreate:e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.create},canDelete:e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.delete},canEdit:a,canEditAvailability:e=>{var t;return a(e)||(null===(t=e.permissions)||void 0===t?void 0:t.modifyAvailability)},canHaveAttempts:function(e){return i.GQ.UltraAssignment.isEqualTo(e.contentHandler)||i.GQ.TestLink.isEqualTo(e.contentHandler)||i.GQ.LtiLink.isEqualTo(e.contentHandler)||i.GQ.LtiPlacement.startsWith(e.contentHandler)||i.GQ.PartnerCloud.isEqualTo(e.contentHandler)||i.GQ.Discussion.isEqualTo(e.contentHandler)||i.GQ.CourseLink.isEqualTo(e.contentHandler)||i.GQ.Journal.isEqualTo(e.contentHandler)||i.GQ.RusticiScorm.isEqualTo(e.contentHandler)},canOpenConditionalRelease:e=>{var t,n;return null===(n=null===(t=null==e?void 0:e.permissions)||void 0===t?void 0:t.adaptiveRelease)||void 0===n?void 0:n.view},canUpdateReviewState:e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.canUpdateReviewState},canHaveReviewState:function(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.canHaveReviewState},canViewReviewState:function(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.canViewReviewState},canViewAsInstructor:e=>{var t;return a(e)||(null===(t=e.permissions)||void 0===t?void 0:t.viewDesigner)},fileAssociationModeToFileRenderType:f,fileRenderTypeToFileAssociationMode:b,getContentHandlerByIconUrl:c,getLaunchInNewWindow:function(e){return!!e.launchInNewWindow},hasAdaptiveReleaseRules:d,hasConversation:e=>!!e.attachedForumLink,isBbPage:h,isFolderContentItem:g,isRootFolder:e=>g(e)&&e.title===r.x1x.Root&&null==e.parentId,isDiscussion:e=>!!i.GQ.Discussion.isEqualTo(e.contentHandler)||i.GQ.CourseLink.isEqualTo(e.contentHandler)&&i.GQ.Discussion.isEqualTo(c(e)),isLink:e=>i.GQ.ExternalLink.isEqualTo(e.contentHandler),isUnknownContentItem:e=>i.GQ.Unknown.isEqualTo(e.contentHandler),isConditionalReleaseLocked:m,isExternalSubmissionsAssessment:function(e){var t,n;if(!e)return!1;if(i.GQ.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail){let s=e.contentDetail[i.GQ.TestLink.handle];return!!(null===(n=null===(t=null==s?void 0:s.test)||void 0===t?void 0:t.deploymentSettings)||void 0===n?void 0:n.isCollectExternalSubmissions)}return!1},isHiddenFromStudents:u,isVisibleToStudents:e=>!!e.isAvailable&&!e.isPartiallyVisible&&!(0,s.V1)(e),isRestricted:p,isReviewableItemLocked:e=>p(e),isNotAccessibleButVisibleForcedSequenceItem:e=>m(e)||!u(e)&&!a(e),isQuestionAnalysisAvailable:function(e){return!!i.GQ.UltraAssignment.isEqualTo(e.contentHandler)||i.GQ.TestLink.isEqualTo(e.contentHandler)},getContentHandler:function(e){if(!e.contentHandler)return i.GQ.Unknown;let t=i.GQ.parse(e.contentHandler.toString());return e.contentHandler.toString().indexOf(i.GQ.LtiPlacement.handle)>=0&&(t=i.GQ.LtiPlacement),h(e)&&(t=i.GQ.Page),t},requiresManualMarking:function(e){var t,n,s,r;return!((0,o.ab)(e)||(0,o.lG)(e)||i.GQ.UltraAssignment.isEqualTo(null===(t=e.contentHandler)||void 0===t?void 0:t.toString())||i.GQ.ClassicAssignment.isEqualTo(null===(n=e.contentHandler)||void 0===n?void 0:n.toString())||i.GQ.TestLink.isEqualTo(null===(s=e.contentHandler)||void 0===s?void 0:s.toString())||i.GQ.SurveyLink.isEqualTo(null===(r=e.contentHandler)||void 0===r?void 0:r.toString()))}}},5196:function(e,t,n){"use strict";n.d(t,{GQ:function(){return l},I_:function(){return r},UA:function(){return o}});var i,s,r,o,a=n(408027);(i=r||(r={})).Inline="inline",i.InlineOnly="inlineOnly",i.Attachment="attachment";class l{constructor(e,t){this.handle=e,this.iconClass=t}static parse(e){if(!e)return null;let t=Object.values(l);for(let n=0;n<t.length;n++)if(t[n].toString().toLowerCase()===e.toLowerCase())return t[n]}isEqualTo(e){return this.handle===(e||"").toString()}startsWith(e){return 0===(e||"").toString().indexOf(this.toString())}toString(){return this.handle}toJSON(){return this.handle}}l.ClassicAssignment=new l(a.DXv.ClassicAssignment,"img-icon-assignment"),l.UltraAssignment=new l(a.DXv.UltraAssignment,"img-icon-assignment"),l.Attendance=new l(a.DXv.Attendance,"img-icon-attendance"),l.Audio=new l(a.DXv.Audio,"img-icon-audio"),l.Blog=new l(a.DXv.Blog,"img-icon-blog"),l.Discussion=new l(a.DXv.Discussion,"img-icon-discussion"),l.Document=new l(a.DXv.Document,"img-icon-document-text"),l.ExternalLink=new l(a.DXv.ExternalLink,"img-icon-link"),l.LtiLink=new l(a.DXv.LtiLink,"img-icon-lti"),l.PartnerCloud=new l(a.DXv.PartnerCloud,"img-icon-link"),l.LtiPlacement=new l(a.DXv.LtiPlacement,"img-icon-lti"),l.CloudDocumentPlacement=new l(a.DXv.LtiLink,"img-icon-document-cloud"),l.CollaborativeCloudDocumentPlacement=new l(a.DXv.LtiLink,"img-icon-collaborative-cloud"),l.File=new l(a.DXv.File,"img-icon-document-blank"),l.Folder=new l(a.DXv.Folder,"img-icon-folder"),l.LearningModule=new l(a.DXv.LearningModule,"img-icon-learning-module"),l.Image=new l(a.DXv.Image,"img-icon-photo"),l.Journal=new l(a.DXv.Journal,"img-icon-journal"),l.Kaltura=new l(a.DXv.Kaltura,"img-icon-video"),l.Page=new l(a.DXv.Page,"img-icon-document-text"),l.RusticiScorm=new l(a.DXv.RusticiScorm,"img-icon-scormengine"),l.SurveyLink=new l(a.DXv.SurveyLink,"img-icon-survey"),l.TestLink=new l(a.DXv.TestLink,"img-icon-test"),l.Video=new l(a.DXv.Video,"img-icon-video"),l.Wiki=new l(a.DXv.Wiki,"img-icon-wiki"),l.CourseLink=new l(a.DXv.CourseLink,"img-icon-document-blank"),l.Unknown=new l(a.DXv.Unknown,"img-icon-document-blank"),(s=o||(o={})).Add="ADD",s.Delete="DELETE"},393950:function(e,t,n){"use strict";n.d(t,{Sh:function(){return o},Xc:function(){return s},zE:function(){return r}});var i=n(408027);function s(e){return!!((null==e?void 0:e.isPreviewStudent)||(null==e?void 0:e.role)===i.TsU.Student)}let r=e=>!!e&&["excludePreviewUser","hasDueDateExceptionOnly","hasTimeLimitExceptionOnly","includeMe","membershipAvailable","roleBucket","groupId","childCourseId","membershipId","isExcludedFromCourseUserActivity"].reduce((t,n)=>t||n in e,!1),o=e=>!!e&&"statusFilter"in e;t.ZP={isStudentMembership:s,isCourseMembershipFilter:r,isCourseMembershipFilterWithStatus:o}},112027:function(e,t,n){"use strict";n.d(t,{LP:function(){return p},lz:function(){return f.ZP},GQ:function(){return a.GQ},A:function(){return g.ZP},Fc:function(){return b.ZP},TR:function(){return v},eu:function(){return h},I_:function(){return a.I_},UA:function(){return a.UA},Xg:function(){return w.ZP},dd:function(){return I},fq:function(){return r},dc:function(){return u.dc},lJ:function(){return m.lJ},Gw:function(){return m.ZP},jr:function(){return $},u$:function(){return d},aB:function(){return P},N1:function(){return B},I7:function(){return R},GK:function(){return D},MA:function(){return T},l_:function(){return G},RM:function(){return M},kf:function(){return O},B2:function(){return F},C8:function(){return m.C8},Si:function(){return k},Yb:function(){return A},uV:function(){return U},MO:function(){return u.MO},M4:function(){return l}});var i,s,r,o,a=n(5196);let l={S:"global.course.role.S",P:"global.course.role.P",BB_FACILITATOR:"global.course.role.BB_FACILITATOR",T:"global.course.role.T",B:"global.course.role.B",G:"global.course.role.G",U:"global.course.role.U"};var c=n(408027);class d{constructor(e,t,n,i="grades",s="grades"){this.name=e,this.iconClass=t,this.contentHandlers=n,this.needsGradingIcon=i,this.needsReconcilingIcon=s}getContentHandlers(){return this.contentHandlers.map(e=>a.GQ.parse(e))}toString(){return this.name}isEqualTo(e){return this.name===(null==e?void 0:e.toString())}static parse(e){let t=d.ScoreProviderList;return t.find(t=>e===t.toString())}static parseByContentHandler(e){if(e===d.Test.contentHandlers[0])return d.Test;let t=d.ScoreProviderList;return t.find(t=>t.contentHandlers.some(t=>t===e))}}d.UltraAssignment=new d("resource/x-bb-assessment-ultraassignment","assignment",[c.DXv.UltraAssignment.toString()]),d.ClassicAssignment=new d("resource/x-bb-assignment","assignment",[c.DXv.ClassicAssignment.toString()]),d.Attendance=new d("resource/x-bb-attendance","attendance",[c.DXv.Attendance.toString()]),d.Blog=new d("resource/x-bb-bloglink","blog",[c.DXv.Blog.toString()]),d.Discussion=new d("resource/x-bb-forumlink","discussion",[c.DXv.Discussion.toString()]),d.Wiki=new d("resource/x-bb-wiki","wiki",[c.DXv.Wiki.toString()]),d.Survey=new d("resource/x-bb-assessment-survey","survey",[c.DXv.SurveyLink.toString()]),d.Test=new d("resource/x-bb-assessment","test",[c.DXv.TestLink.toString()]),d.PeerSubmissionsTest=new d("resource/x-bb-peer-submission","test",[c.DXv.TestLink.toString()]),d.PeerEvaluationTest=new d("resource/x-bb-peer-eval","test",[c.DXv.TestLink.toString()]),d.LTILink=new d("resource/x-bb-blti-link","lti",[c.DXv.LtiLink.toString(),c.DXv.LtiPlacement.toString()]),d.PartnerCloud=new d("resource/x-bbgs-partner-cloud","link",[c.DXv.PartnerCloud.toString()]),d.Scorm=new d("resource/x-plugin-scormengine","scormengine",[c.DXv.RusticiScorm.toString()]),d.Journal=new d("resource/x-bb-journallink","journal",[c.DXv.Journal.toString()]),d.ScoreProviderList=[d.UltraAssignment,d.ClassicAssignment,d.Attendance,d.Blog,d.Discussion,d.Wiki,d.Survey,d.Test,d.PeerSubmissionsTest,d.PeerEvaluationTest,d.LTILink,d.PartnerCloud,d.Scorm,d.Journal];var u=n(758219),p={hasAccommodations:(e,t)=>{let{viewDueDateException:n,viewTimeLimitException:i}=t,{isAvailable:s,dueDateExceptionType:r,timeLimitExceptionType:o}=e;if(!s||!n&&!i)return!1;let a=!!(r&&r!==c.AVG.Normal),l=!!(o&&o!==c.rWm.NoAccommodation);return a&&n||l&&i}},m=n(304415),h={getFeedbackModeByOption:(e,t)=>{let n=null,i=null;if(t){let s=Object.keys(t);for(let r=0;r<s.length;r++){let o=s[r],a=t[o],l=null==a?void 0:a.options.some(t=>e.toString()===t);if(l){n=o,(null==a?void 0:a.associatedDate)&&(i=new Date(a.associatedDate));break}}}return{mode:n,associatedDate:i}}},g=n(23938),f=n(26451),b=n(393950),v={isCreatedByStudent:e=>{var t;let n=null===(t=e.contentDetail)||void 0===t?void 0:t[c.DXv.Discussion];return!!n&&!!n.isDiscussionCreatedByStudent}};function y(e){return e.startsWith(c.DXv.LtiPlacement)}function C(e){var t;let n=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();return!!n&&(a.GQ.LtiLink.isEqualTo(n)||y(n)||a.GQ.PartnerCloud.isEqualTo(n))}function S(e){var t,n;if(!a.GQ.LtiLink.isEqualTo(e.contentHandler)||!e.contentHandler)return!1;let i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()])||void 0===n?void 0:n.url;return!!(null==i?void 0:i.includes("://xplor"))}function E(e){var t,n,i;let s=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();if(s)return null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[s])||void 0===i?void 0:i.existsPlacement}n(455217),(i=r||(r={})).CloudDocument="CloudDocument",i.ContentItemMessage="CIM";var I={isLtiPlacement:y,isLtiLink:C,isXplorLtiLink:S,ltiPlacementExists:E,ltiToolProviderExists:function(e){var t,n,i;let s=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();if(s)return null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[s])||void 0===i?void 0:i.existsLTIProvider},isGroupLaunchAllowed:function(e){var t,n,i;let s=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();return!!s&&!!(null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[s])||void 0===i?void 0:i.allowGroupLaunch)},isUnlaunchableLtiLink:function(e){let t=!!e.id&&C(e),n=S(e),i=!!function(e){var t,n,i;let s=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();if(s)return null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[s])||void 0===i?void 0:i.launchLink}(e),s=!1===E(e);return t&&(!n&&!i||s)},getCloudDocumentType:function(e){var t,n,i;let s=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();if(s)return null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[s])||void 0===i?void 0:i.cloudDocumentType},isCloudDocument:function(e){var t,n,i;let s=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();return!!s&&(null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[s])||void 0===i?void 0:i.itemOrigin)===r.CloudDocument},getCloudDocumentAttrsByType:function(e,t){let n=e.filter(e=>e.customParameters.typeCloudDocument===t)[0];return{showButton:!!n,...(null==n?void 0:n.id)&&{placementId:n.id}}}},w=n(406392);let A=e=>!0===e.isAvailable&&!0===e.isClosed,k=e=>c.S2N.Undecided===e.ultraStatus||c.S2N.Classic===e.ultraStatus,x=e=>c.S2N.UltraPreview===e.ultraStatus,T=e=>e.permissions.export&&!x(e),P=e=>e.permissions.archive&&!x(e),D=e=>e.permissions.edit,G=e=>e.permissions.import,R=e=>e.permissions.copy,B=e=>e.permissions.convert;(s=o||(o={})).Pdf="pdf",s.Presentation="presentation",s.Spreadsheet="spreadsheet",s.Zip="zip",s.Audio="audio",s.Photo="photo",s.Video="video",s.DocumentText="document-text",s.DocumentBlank="document-blank";let L=new Map([["pdf",o.Pdf],["powerpoint",o.Presentation],["presentation",o.Presentation],["excel",o.Spreadsheet],["spreadsheet",o.Spreadsheet],["zip",o.Zip],["audio",o.Audio],["image",o.Photo],["video",o.Video],["word",o.DocumentText],["document",o.DocumentText],["text",o.DocumentText],["rtf",o.DocumentText]]),N=e=>{for(let[t,n]of L)if(e.includes(t))return n},O=e=>{var t;if(!e)return o.DocumentBlank;let n=e.toLowerCase();return null!==(t=N(n))&&void 0!==t?t:o.DocumentBlank},M=e=>{let t=O(e);return`img-icon-${t}`},$="rs-lockdown";function H(e){var t,n,i,s;let r=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();return a.GQ.TestLink.isEqualTo(e.contentHandler)&&r&&(null===(s=null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[r])||void 0===i?void 0:i.test)||void 0===s?void 0:s.deploymentSettings)?e.contentDetail[r].test.deploymentSettings:null}function F(e){var t;let n=H(e);return null!==(t=null==n?void 0:n.proctoringServiceHandle)&&void 0!==t?t:null}function U(e){let t=H(e);return null!==t&&t.proctoringServiceHandle===$&&!!t.isSecureBrowserRequiredToTake}},406392:function(e,t,n){"use strict";n.d(t,{ab:function(){return a},lG:function(){return o}});var i=n(5196),s=n(408027);let r=e=>i.GQ.LearningModule.isEqualTo(e.contentHandler),o=e=>{var t,n;return r(e)&&!!(null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[s.DXv.LearningModule])||void 0===n?void 0:n.isSequential)};function a(e){return!0===e.inSequence}t.ZP={isLearningModule:r,isForcedSequenceModule:o,isInForcedSequenceLearningModule:a}},304415:function(e,t,n){"use strict";n.d(t,{C8:function(){return d},O5:function(){return c},lJ:function(){return l}});var i=n(198022),s=n(408027),r=n(758219);let o=e=>void 0!==e.subType&&s.QuestionType.PresentationOnly===e.questionType;t.ZP={isPresentationOnly:o,isPageBreak:e=>s.QuestionType.PageBreak===e.questionType,isFileAttachment:e=>o(e)&&s.rn$.File===e.subType,isQuestionBlock:e=>s.QuestionType.QuestionBlock===e.questionType,createMatchingPrompt:e=>{let t={id:r.dc+i.v4(),matchingAnswerIndex:e,promptText:{rawText:"",displayText:""},reusesAnswer:!1,partialCredit:0};return t},createMatchingAnswer:(e=!1)=>{let t={answerText:{rawText:"",displayText:""},isDistractor:e,ui:{id:i.v4()}};return t},createMultipleAnswerAnswer:e=>{let t={id:r.dc+i.v4(),answerText:{rawText:"",displayText:""},correctAnswer:e};return t}};let a=[s.QuestionType.PresentationOnly,s.QuestionType.QuestionBlock,s.QuestionType.PageBreak],l=Object.values(s.QuestionType).filter(e=>!a.includes(e)),c=l.map(e=>e.toString()),d=e=>e.filter(e=>c.includes(e))},777339:function(e,t,n){"use strict";n.d(t,{I8:function(){return o},cU:function(){return l},fX:function(){return a}});var i=n(408027),s=n(491288),r=n(507659);let o=e=>(0,i.CGz)(s.nP,e);function a(e){return(0,i.bEJ)(s.nP,e)}let l=async(e,t,n)=>{let o=await (0,i.MGk)(s.nP,e,t);return new r.b(o,a,n).promise}},879844:function(e,t,n){"use strict";n.d(t,{Be:function(){return u},DA:function(){return c},nO:function(){return p},oH:function(){return g},s9:function(){return m},sn:function(){return d},us:function(){return h}});var i=n(112027),s=n(408027),r=n(846409),o=n(491288);let a="/v1/courses/%courseId%/assessments",l=`${a}/%assessmentId%`;async function c(e){let t=new s.O98({courseId:e.courseId}).withSession(o.nP);e.paging&&t.withPaging(e.paging),e.sort&&t.withSort(...e.sort),e.filter&&t.withQueryParams({types:e.filter.types,textSearch:e.filter.textSearch||void 0}),e.expand&&t.withExpand(e.expand);let{results:n,paging:r,permissions:a}=await (0,s.jIs)(t);return{assessmentIds:n.map(e=>e.id),byAssessmentId:(0,i.MO)(n.map(t=>({...t,courseId:e.courseId}))),paging:r,permissions:a}}async function d({courseId:e,assessmentId:t}){return{...await (0,s.pzW)(o.nP,e,t),courseId:e}}async function u({courseId:e,title:t,type:n}){return{...await (0,s.S9W)(o.nP,e,{title:t,type:n}),courseId:e}}async function p(e,{assessmentId:t,courseId:n}){return{...await (0,s.Ug8)(o.nP,n,t,e),courseId:n}}function m(e,t,n){let i=(0,r.Q2)(`${a}/%assessmentId%/checkPattern`,{courseId:e,assessmentId:t});return(0,r.v_)(i,{strPattern:n})}function h(e,t,n,i){let s=(0,r.Q2)(`${a}/%assessmentId%/checkPattern/isCorrect`,{courseId:e,assessmentId:t});return(0,r.v_)(s,{strPattern:n,answerText:i})}function g(e,t,n){let i=(0,r.Q2)(`${l}/checkpassword`,{courseId:e,assessmentId:t});return(0,r.v_)(i,{password:n})}},332011:function(e,t,n){"use strict";n.d(t,{NE:function(){return a},PZ:function(){return d},Ro:function(){return c},_F:function(){return l},jX:function(){return o}});var i=n(846409),s=n(758219);let r="/v1/calendars";async function o(e=1e3){let{results:t}=await (0,i.U2)((0,i.Q2)(r,{limit:e}));return{byId:(0,s.MO)(t)}}async function a(e,t){let n=await (0,i.r$)(`${r}/${e}`,{...t});return n}async function l(e){(0,i.Zt)();let t=await Promise.all(e.map(e=>(0,i.r$)(`${r}/${e.id}`,e)));return{byId:(0,s.MO)(t)}}function c(e,t){return(0,i.v_)(`${r}/importIcs`,{fileLocation:e,fileName:t})}function d(e=!1){return e?(0,i.v_)(`${r}/prepareExport`,{}):(0,i.U2)(`${r}/prepareExport`)}},463380:function(e,t,n){"use strict";n.d(t,{BE:function(){return R},FA:function(){return N},Hl:function(){return G},ID:function(){return L},JY:function(){return O},K1:function(){return x},Vf:function(){return o},Wb:function(){return r},YU:function(){return T},_b:function(){return P},bb:function(){return $},dU:function(){return w},d_:function(){return E},dc:function(){return U},gU:function(){return M}});var i,s,r,o,a=n(276635),l=n(715729),c=n(846409),d=n(5196),u=n(758219),p=n(408027),m=n(253275),h=n(491288);let g="/v1/courses/%courseId%/contents",f=g+"/%contentId%",b=g+"/%contentId%/children",v=g+"/%contentId%/adaptiveReleaseRules",y=v+"/rules/%ruleId%/conditions/%criteriaId%",C=y+"/acl/users",S=y+"/acl/groups";async function E(e){(0,c.Zt)();let{courseId:t,contentId:n}=e,i=e.eagerFetchChildren?w({filter:{courseId:t,contentId:n,resolveLinks:!1,fetchDiscussionGradeColumn:!1,contentSearchMode:e.contentSearchMode,title:e.title}}):Promise.resolve({}),s=["assignedGroups,selfEnrollmentGroups.group"];e.expandGradebookCategory&&s.push("gradebookCategory"),e.hasProgressed&&s.push("hasProgressed");let r=(0,c.U2)((0,c.Q2)(f,{courseId:t,contentId:n,expand:s})).then(e=>U([e])),o=!!e.fetchAssociatedCourseLinks&&await M(e.courseId,e.contentId),a=o?k({courseId:t,contentId:n}):Promise.resolve({}),[l,d,u]=await Promise.all([r,i,a]),p=await A(e,{...l.contents,...d.contents,...u.contents}),m={...l.contents,...d.contents,...u.contents,...p.contents},h={};return(e.fetchDiscussionGradeColumn||e.fetchJournalGradeColumn)&&(h=await I(e.courseId,m)),{contents:m,assessments:{...l.assessments,...d.assessments,...u.assessments,...p.assessments},groups:{...l.groups,...d.groups,...u.groups,...p.groups},columns:{...l.columns,...d.columns,...u.columns,...p.columns,...h},adaptiveRelease:{...l.adaptiveRelease,...d.adaptiveRelease,...u.adaptiveRelease,...p.adaptiveRelease},blogs:{...l.blogs,...d.blogs,...u.blogs,...p.blogs},paging:{...l.paging,...d.paging,...u.paging},permissions:{...l.permissions,...d.permissions,...u.permissions}}}async function I(e,t){(0,c.Zt)();let n=Object.keys(t).map(e=>t[e]).filter(e=>{var t;return e&&e.contentHandler&&(d.GQ.Discussion.isEqualTo(e.contentHandler)||z(e))&&(null===(t=e.genericReadOnlyData)||void 0===t?void 0:t.hasGradeColumn)}).filter(u.QN).map(t=>(0,m.Vh)({courseId:e,contentId:t.id}).then(e=>e&&e.results[0])).filter(e=>!!e);return(0,u.MO)(await Promise.all(n))}async function w({filter:e,params:t}){let n=["assignedGroups,selfEnrollmentGroups.group"];e.expandGradebookCategory&&n.push("gradebookCategory");let{courseId:i,contentId:s,contentSearchMode:r,title:o}=e,l=(0,c.C4)(null==t?void 0:t.sort),d=null==t?void 0:t.paging,p=await (0,c.U2)((0,c.Q2)(b,{courseId:i,contentId:s,expand:n,...r?{contentSearchMode:r,title:o}:{},...d,sort:l})).then(e=>{let{paging:t,permissions:n,results:i}=e,s=V(i),r=Z(i),o=_(i),l=a.map(i,e=>({...j(e)})),c=q(i),d=W(i);return{contents:{...(0,u.MO)(l)},assessments:{...(0,u.MO)(s)},groups:{...(0,u.MO)(r)},columns:{...(0,u.MO)(o)},adaptiveRelease:{...(0,u.MO)(c)},blogs:{...(0,u.MO)(d)},paging:t,permissions:n}}),m=await A(e,{...p.contents});return{contents:{...p.contents,...m.contents},assessments:{...p.assessments,...m.assessments},groups:{...p.groups,...m.groups},columns:{...p.columns,...m.columns},adaptiveRelease:{...p.adaptiveRelease,...m.adaptiveRelease},blogs:{...p.blogs,...m.blogs},paging:{...p.paging},permissions:{...p.permissions}}}async function A(e,t){if(!e.resolveLinks)return{contents:{},assessments:{},groups:{},columns:{},adaptiveRelease:{},blogs:{}};(0,c.Zt)();let n=await Promise.all(Object.keys(t).map(e=>t[e]).map(e=>e&&e.contentDetail&&e.contentDetail["resource/x-bb-courselink"]&&e.contentDetail["resource/x-bb-courselink"].linkSourceId).filter(e=>"string"==typeof e).filter(e=>!t.hasOwnProperty(e)).map(t=>E({...e,contentId:t,eagerFetchChildren:!1})));return{contents:Object.assign({},...n.map(e=>e.contents)),assessments:Object.assign({},...n.map(e=>e.assessments)),groups:Object.assign({},...n.map(e=>e.groups)),columns:Object.assign({},...n.map(e=>e.columns)),adaptiveRelease:Object.assign({},...n.map(e=>e.adaptiveRelease)),blogs:Object.assign({},...n.map(e=>e.blogs))}}async function k(e){let{courseId:t,contentId:n}=e;if(!n)return{contents:{},assessments:{},groups:{},columns:{},adaptiveRelease:{},blogs:{}};(0,c.Zt)();let i=await (0,p.SlR)(h.nP,{courseId:t,contentId:n}),s=await Promise.all(i.results.filter(e=>e.courseContent).map(t=>E({...e,contentId:t.courseContent,eagerFetchChildren:!1})));return{contents:Object.assign({},...s.map(e=>e.contents)),assessments:Object.assign({},...s.map(e=>e.assessments)),groups:Object.assign({},...s.map(e=>e.groups)),columns:Object.assign({},...s.map(e=>e.columns)),adaptiveRelease:Object.assign({},...s.map(e=>e.adaptiveRelease)),blogs:Object.assign({},...s.map(e=>e.blogs))}}async function x(e){let t=(0,c.Q2)(g,{courseId:e.courseId}),n=await (0,c.v_)(t,e);return U([n])}async function T(e,t){let n;let i=(0,c.Q2)(f,{contentId:t.id,courseId:t.courseId});if(null==e||null==e.id||0===e.id.indexOf(u.dc))n=await (0,c.gz)(i,t);else{let s=(0,c.T8)(F(e)?H(e):e,F(t)?H(t):t);n=a.isEmpty(s)?e:await (0,c.r$)(i,{...s,id:t.id})}return U([n])}async function P(e){(0,c.Zt)();let t={contents:{},assessments:{},groups:{},blogs:{},columns:{}};for(let n of e){let e=n.content.id;try{let e=await T(n.previousContent,n.content);a.assignWith(t,e,(e,t,n)=>{if("contents"===n){let n={};return Object.keys(t).map(e=>n[e]={isOk:!0,id:e,result:t[e]}),{...e,...n}}return{...e,...t}})}catch(n){if(e){let i={isOk:!1,id:e,error:n};t.contents[e]=i}}}return t}async function D(e,t){let n=!t||t.shouldDeleteGrades?"true":"false",i=(0,c.Q2)(f,{contentId:e.id,courseId:e.courseId,deleteGrades:n,deleteGroups:!0});return(0,c.Od)(i)}async function G(e,t){let n=[];return(0,c.Zt)(),a.forEach(e,e=>{let i=D(e,t).then(()=>({isOk:!0,id:e.id})).catch(t=>({isOk:!1,id:e.id,...t}));n.push(i)}),{results:(0,u.MO)(await Promise.all(n))}}async function R(e){(0,c.Zt)();let t=e.map(e=>B(e).then(t=>({isOk:!0,id:e.id,contentId:e.contentId,result:t})).catch(t=>({isOk:!1,id:e.id,contentId:e.contentId,...t})));return{results:(0,u.MO)(await Promise.all(t))}}async function B(e){return(0,c.r$)((0,c.Q2)(y,{contentId:e.contentId,courseId:e.courseId,ruleId:e.ruleId,criteriaId:e.id}),e)}async function L(e){let t=[];return(0,c.Zt)(),a.forEach(e,e=>{let n=(0,c.Od)((0,c.Q2)(v,{contentId:e.id,courseId:e.courseId})).then(()=>({isOk:!0,id:e.id})).catch(t=>({isOk:!1,id:e.id,...t}));t.push(n)}),{results:(0,u.MO)(await Promise.all(t))}}async function N(e){let{sort:t,...n}=e,i=(0,c.Q2)(C,{...n,sort:(0,c.C4)(t)}),{paging:s,permissions:r,results:o}=await (0,c.U2)(i);return{paging:s,permissions:r,userPredicates:o}}async function O(e){let{sort:t,...n}=e,i=(0,c.Q2)(S,{...n,sort:(0,c.C4)(t)}),{paging:s,permissions:r,results:o}=await (0,c.U2)(i);return{paging:s,permissions:r,groupPredicates:o}}async function M(e,t){if(!e||!t)return Promise.resolve(!1);let n=await (0,p.cqI)(h.nP,{courseId:e,contentId:t});return n.result}async function $(e,t){let n=await (0,p.kw8)(h.nP,{courseId:e,contentId:t});return n.result}function H(e){let{deploymentSettings:t}=e,n=(0,l.ZP)(e,e=>{delete e.deploymentSettings});if(e.contentDetail)return n;let i={deploymentSettings:t,deployedAssessmentType:p.Ueh.Test},s={[d.GQ.TestLink.toString()]:{test:i}};return{...n,contentDetail:s}}function F(e){return d.GQ.TestLink.isEqualTo(e.contentHandler)}function U(e){return{contents:(0,u.MO)(e.map(j)),assessments:(0,u.MO)(V(e)),groups:(0,u.MO)(Z(e)),columns:(0,u.MO)(_(e)),adaptiveRelease:(0,u.MO)(q(e)),blogs:(0,u.MO)(W(e))}}function V(e){let t=e.filter(e=>{var t;return F(e)&&(null===(t=e.contentDetail)||void 0===t?void 0:t[d.GQ.TestLink.toString()].test.assessment)});return t.map(e=>{var t,n;let i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[d.GQ.TestLink.toString()])||void 0===n?void 0:n.test;if(!i)return;let s={...i.assessment,permissions:i.permissions,courseId:e.courseId,contentId:e.id};return s}).filter(e=>!!e)}function _(e){return e.reduce((e,t)=>[...e,...function(e){if(!e||!e.contentDetail)return[];let t=e.contentDetail[d.GQ.TestLink.handle];if(t&&t.test)return[t.test.gradingColumn];let n=e.contentDetail[d.GQ.LtiLink.handle];if(n&&n.gradingColumn)return[n.gradingColumn];let i=e.contentDetail[d.GQ.PartnerCloud.handle];if(i&&i.gradingColumn)return i.gradingColumn.contentId=e.id,[i.gradingColumn];let s=e.contentHandler,r=s&&e.contentDetail[s.toString()];if(r&&r.gradingColumn&&s.toString().includes(d.GQ.LtiPlacement.handle))return[r.gradingColumn];let o=e.contentDetail[d.GQ.RusticiScorm.handle];return o&&o.gradebookItems&&o.gradebookItems.length>0?o.gradebookItems.map(e=>e.gradingColumn):[]}(t)],[]).filter(e=>!!e)}function q(e){return e.reduce((e,t)=>{if(!t||!t.adaptiveReleaseRules||!t.adaptiveReleaseRules.rules)return e;let n=t.adaptiveReleaseRules.rules.reduce((e,n)=>{var i,s,r;let o=null===(s=null===(i=t.contentDetail)||void 0===i?void 0:i[p.DXv.CourseLink])||void 0===s?void 0:s.linkSourceId,a=null===(r=n.criteria)||void 0===r?void 0:r.map(e=>({...e,contentId:null!=o?o:t.id,courseId:t.courseId,ruleId:n.id}));return a?[...e,...a]:e},[]);return[...e,...n]},[])}function z(e){return d.GQ.Journal.isEqualTo(e.contentHandler)}function W(e){return e.filter(e=>z(e)&&e.contentDetail).map(e=>{var t,n;let i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[d.GQ.Journal.toString()])||void 0===n?void 0:n.blog;return i}).filter(e=>!!e)}function j(e){var t,n,i,s;let r={...e,adaptiveReleaseRules:void 0};if(F(e)){let o=null===(t=e.contentDetail)||void 0===t?void 0:t[d.GQ.TestLink.toString()].test,a=null===(i=null===(n=null==e?void 0:e.contentDetail)||void 0===n?void 0:n[d.GQ.TestLink.toString()])||void 0===i?void 0:i.safeAssignOptions;r={...r,assessmentId:null===(s=null==o?void 0:o.assessment)||void 0===s?void 0:s.id,deploymentSettings:null==o?void 0:o.deploymentSettings,peerSettings:null==o?void 0:o.peerSettings,safeAssignOptions:a,gradingColumn:null==o?void 0:o.gradingColumn,contentDetail:void 0}}return r}function Z(e){return a.flatten(a.map(e,e=>a.map(e.assignedGroups,t=>({id:t.groupId,courseId:e.courseId,contentId:e.id,title:t.groupTitle}))))}(i=r||(r={})).FamilyName="user.familyName",i.GivenName="user.givenName",i.Username="user.userName",i.UserId="user.id",(s=o||(o={})).Title="group.title",s.GroupId="group.id"},207490:function(e,t,n){"use strict";n.d(t,{Cv:function(){return m},Ep:function(){return l},Gs:function(){return p},MG:function(){return c},Pb:function(){return d},Wm:function(){return u},ZN:function(){return s}});var i,s,r=n(846409),o=n(408027),a=n(491288);let l="me";async function c(e){let t={courseId:e.courseId,contentId:e.contentId,userId:e.userId},n=await (0,r.r$)((0,r.Q2)("/v1/courses/%courseId%/contents/%contentId%/states/%userId%",t),{state:e.state});return{contentStates:n}}async function d(e){let t={...e,userId:l},{results:n}=await (0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/contents/%contentId%/states/%userId%?includeRelated=%includeRelated%",t));return{contentStates:n}}async function u(e){let t;let{paging:n,sort:i}=e;void 0!==e.fields&&e.fields.length>0&&(t=e.fields);let s={includeCount:!0,fields:t};e.filter&&(s.q=e.filter.searchString,s.state=e.filter.state);let r=new o.iRb({courseId:e.courseId,contentId:e.contentId}).withExpand("courseMembership.user","status").withSession(a.nP).withQueryParams(s);n&&r.withPaging(n),i&&r.withSort(...i);let l=await (0,o.jIs)(r);return l}async function p(e){let t=new o.McV({courseId:e.courseId,contentId:e.contentId}).withSession(a.nP);return await (0,o.jIs)(t)}async function m(e){var t;let{paging:n}=e,i={includeCount:!0};(null===(t=e.filter)||void 0===t?void 0:t.searchString)&&(i.q=e.filter.searchString);let s=new o.ngf({courseId:e.courseId,contentId:e.contentId,userId:e.userId}).withExpand("content","status").withSession(a.nP).withQueryParams(i);n&&s.withPaging(n);let r=await (0,o.jIs)(s);return r}(i=s||(s={})).FamilyName="courseMembership.user.familyName",i.LastStateChange="contentStatusLastStateChange"},304239:function(e,t,n){"use strict";n.d(t,{DV:function(){return S},EL:function(){return I},G3:function(){return v},TS:function(){return w},Y:function(){return b},a6:function(){return s},d3:function(){return y},iJ:function(){return C},zW:function(){return A}});var i,s,r,o=n(276635),a=n(846409),l=n(771300),c=n(112027),d=n(408027),u=n(491288);let p="/v1/courses/%courseId%/groups",m=`${p}/batchUpdate`,h=`${p}?limit=%limit%&expand=studentCount,memberships,permissions,signUpSheet,hasSubmittedGroupAttempt,hasGrades`,g=`${p}?limit=%limit%&expand=studentCount,permissions,groupSet,memberships,assignedContents`,f=`${p}/%groupId%?expand=memberships`;async function b(e,t){let n=(0,a.Q2)(m,{courseId:e}),i=o.map(t,e=>({method:a.yY,relativeUrl:e.id}));return(0,a.gz)(n,i)}async function v(e){let t=(0,a.Q2)("/v1/courses/%courseId%/contents/%contentId%/assignedGroups",e),n=await (0,a.U2)(t),i=n.results;return{contentId:e.contentId,groups:(0,c.MO)(i)}}async function y(e){let{results:t,paging:n,permissions:i}=await (0,d.OrM)(u.nP,e);return{groups:(0,c.MO)(t),groupIds:t.map(e=>e.id).filter(e=>!!e),paging:n,permissions:i}}async function C(e){try{let t=(0,a.Q2)("/public/v2/courses/%courseId%/groups/%groupId%/users/%userId%",{courseId:e.courseId,groupId:e.groupId,userId:e.userId});await (0,a.gz)(t,{})}catch(e){throw(0,l.QK)(e)}return{userId:e.userId,groupId:e.groupId}}async function S(e,t=1e3){let{results:n,paging:i,permissions:s}=await (0,a.U2)((0,a.Q2)(h,{courseId:e,limit:t}));return{groups:(0,c.MO)(n),paging:i,permissions:s}}function E(e){var t;let{courseId:n,paging:i,filter:s,sort:r}=e,o=i?{limit:null!==(t=i.limit)&&void 0!==t?t:1e3,offset:i.offset}:{limit:1e3},l=s?{...s.groupName?{name:s.groupName}:{},...s.nameOrGroupSetName?{nameOrGroupSetName:s.nameOrGroupSetName}:{},...s.groupNameCompare?{nameCompare:s.groupNameCompare}:{},...null!=s.inGroupSet?{inGroupSet:s.inGroupSet.toString()}:{}}:{},c=r&&r.length?{sort:(0,a.C4)(r)}:{};return{...o,...l,...c,courseId:n,includeCount:"true"}}async function I(e){let t=E(e),{results:n,paging:i,permissions:s}=await (0,a.U2)((0,a.Q2)(g,t));return{groups:(0,c.MO)(n),groupIds:n.map(e=>e.id),paging:i,permissions:s}}async function w(e){var t,n;let i;let s=[],r=0;do{let o=E({...e,paging:{limit:1e3,offset:r}}),{results:l,paging:c}=await (0,a.U2)((0,a.Q2)(g,o));s=s.concat(l),i=null!==(t=null==c?void 0:c.nextPage)&&void 0!==t?t:"",r=(null!==(n=null==c?void 0:c.offset)&&void 0!==n?n:0)+1e3}while(i);let o=[];return s.forEach(e=>{e.id&&o.push(e.id)}),{groups:(0,c.MO)(s),groupIds:o}}function A(e,t){return(0,a.U2)((0,a.Q2)(f,{courseId:e,groupId:t}))}(i=s||(s={})).equals="equals",i.notEquals="notEquals",i.contains="contains",i.notContains="notContains",i.startsWith="startsWith",(r||(r={})).Title="title"},139366:function(e,t,n){"use strict";n.d(t,{AG:function(){return E},Fh:function(){return k},K0:function(){return S},RD:function(){return C},VF:function(){return b},W$:function(){return A},W6:function(){return f},at:function(){return w},fG:function(){return v},jC:function(){return y},wI:function(){return I}});var i,s=n(846409),r=n(758219),o=n(408027);let a="/v1/courses/%courseId%/groupsets",l=`${a}?expand=studentCount,groupCount,permissions,signUpSheet,hasAssociatedContent&sort=%sort%,id(desc)&limit=%limit%&offset=%offset%`,c=`${a}?expand=groupCount&fields=groupCount&limit=%limit%`,d=`${a}/%groupSetId%`,u=`${d}?expand=permissions,signUpSheet,hasAssociatedContent`,p=`${d}/groups?sort=%sort%&limit=%limit%`,m=`${d}/groups?expand=memberships&fields=memberships,id&limit=%limit%`,h=`${a}?fields=id,title,isAvailable&limit=%limit%`,g=`${d}/groups?expand=studentCount&fields=id,studentCount&limit=%limit%`,f=1e3;async function b(e,t=1e3){let{results:n,paging:i,permissions:o}=await (0,s.U2)((0,s.Q2)(h,{courseId:e,limit:t}));return{groupSets:(0,r.MO)(n),paging:i,permissions:o}}async function v(e){let t=function(e){var t;let{courseId:n,paging:i}=e,s=i?{limit:null!==(t=i.limit)&&void 0!==t?t:1e3,offset:0}:{limit:1e3,offset:0};return{sort:o.$qS.TITLE_ASC,...s,courseId:n,includeCount:"true"}}(e),{results:n,paging:i,permissions:a}=await (0,s.U2)((0,s.Q2)(l,t));return{groupSets:{byId:(0,r.MO)(n)},paging:i,permissions:a}}async function y(e,t={}){let{sort:n=o.$qS.TITLE_ASC,limit:i=f,offset:a=0}=t,{results:c,paging:d,permissions:u}=await (0,s.U2)((0,s.Q2)(l,{courseId:e,sort:n,limit:i,offset:a}));return{groupSets:{byId:(0,r.MO)(c)},paging:d,permissions:u}}async function C(e,t){let n=await (0,s.U2)((0,s.Q2)(u,{courseId:e,groupSetId:t}));return{groupSet:n}}async function S(e,t,n={}){let{sort:i=o.$qS.MODIFIED_DATE_DESC,limit:a=1e3,expand:l="studentCount,permissions"}=n||{},{results:c,paging:d,permissions:u}=await (0,s.U2)((0,s.Q2)(p,{courseId:e,groupSetId:t,sort:i,limit:a,expand:l}));return{groups:(0,r.MO)(c),paging:d,permissions:u}}async function E(e,t,n="permissions"){let i=t.id?await (0,s.r$)((0,s.Q2)(`${d}?expand=%expand%`,{courseId:e,groupSetId:t.id,expand:n}),t):await (0,s.v_)((0,s.Q2)(`${a}?expand=%expand%`,{courseId:e,expand:n}),t);return i}(i||(i={})).Title="title";let I=(e,t)=>(0,s.Od)((0,s.Q2)(d,{courseId:e,groupSetId:t}));async function w(e,t=1e3){let{results:n,paging:i,permissions:r}=await (0,s.U2)((0,s.Q2)(c,{courseId:e,limit:t}));return{results:n,paging:i,permissions:r}}async function A(e,t,n=1e3){let{results:i,paging:o,permissions:a}=await (0,s.U2)((0,s.Q2)(m,{courseId:e,groupSetId:t,limit:n}));return{memberships:(0,r.MO)(i),paging:o,permissions:a}}async function k(e,t,n=1e3){let{results:i}=await (0,s.U2)((0,s.Q2)(g,{courseId:e,groupSetId:t,limit:n}));return{groups:(0,r.MO)(i)}}},843730:function(e,t,n){"use strict";n.d(t,{D8:function(){return C},Dv:function(){return S},Nv:function(){return v},RA:function(){return m},Rc:function(){return f},VI:function(){return s},ZJ:function(){return h},jQ:function(){return b},qD:function(){return u},wn:function(){return i},zJ:function(){return g}});var i,s,r=n(491288),o=n(758219),a=n(408027);(i||(i={})).PotentialGraders="potentialGraders",(s||(s={})).DefaultReconciler="defaultReconciler";let l=/[()]/;function c(e){return!e||""===e||"true"===e.toLowerCase()}let d=/\/v1\/users\/(_\d+_\d+)\/memberships/;function u(e){let t=(d.exec(e)||[])[1];return t?{userId:t}:null}let p=/\/v1\/courses\/(_\d+_\d+)\/memberships/;function m(e){let t=(p.exec(e)||[])[1];if(!t)return null;let n={courseId:t},i={},s={},r=new URL(e,"https://foo.bar");return r.searchParams.forEach((e,t)=>{switch(t){case"excludePreviewUser":i.excludePreviewUser=c(e);break;case"hasDueDateExceptionOnly":i.hasDueDateExceptionOnly=c(e);break;case"hasTimeLimitExceptionOnly":i.hasTimeLimitExceptionOnly=c(e);break;case"includeMe":i.includeMe=c(e);break;case"membershipAvailable":i.membershipAvailable=c(e);break;case"roleBucket":i.roleBucket=e.split(",").map(e=>e.toUpperCase());break;case"groupId":i.groupId=e.split(",");break;case"membershipId":i.membershipId=e.split(",");break;case"childCourseId":i.childCourseId=e.split(",");break;case"limit":s.limit=parseInt(e,10);break;case"offset":s.offset=parseInt(e,10);break;case"sort":n.sort=function(e){let t=[];return e.split(",").forEach(e=>{let n=e.split(l);t.push({field:n[0],direction:n[1]})}),t}(e);break;case"isExcludedFromCourseUserActivity":i.isExcludedFromCourseUserActivity=c(e);break;case"expand":case"includeCount":case"fields":break;default:console.warn(`unhandeled query parameter ${t}`)}}),Object.keys(i).length>0&&(n.filter=i),"limit"in s&&(n.paging={limit:s.limit,offset:s.offset}),n}async function h(e,t,n=!0){let i=["courseRole"];n&&i.push("user");let s=new a.FNw({courseId:e,membershipId:t}).withSession(r.nP).withExpand(...i);return(0,a.jIs)(s)}async function g(e,t){return(0,a.g7B)(r.nP,e,t)}function f(e,t){let{results:n,paging:i}=e,s=n.map(e=>e.user).filter(e=>!!e),r=n.map(e=>e.course).filter(e=>!!e),a=n.map(e=>{let{user:t,...n}=e;return{...n}}),l=n.map(e=>e.id);return{users:(null==s?void 0:s.length)?(0,o.MO)(s):void 0,courses:(null==r?void 0:r.length)?(0,o.MO)(r):void 0,byMembershipId:(0,o.MO)(a),membershipIds:l,paging:i,userId:t.userId}}function b(e,t){let{results:n,paging:i,permissions:s}=e,r=n.map(e=>e.user).filter(e=>!!e),a=n.map(e=>{let{user:n,...i}=e;return{...i,courseId:t.courseId}}),l=n.map(e=>e.id);return{users:(null==r?void 0:r.length)?(0,o.MO)(r):void 0,byCourseMembershipId:(0,o.MO)(a),membershipIds:l,paging:i,permissions:s,courseId:t.courseId}}function v(e,t){let n=[];return e.forEach(e=>{e.results.forEach(e=>{(null==e?void 0:e.userId)&&n.push(e.userId)})}),{byCourseMembershipId:{},membershipIds:[],paging:void 0,permissions:void 0,users:{},courseId:t.courseId,userIds:n}}function y(e,t){var n,i,s,r;let{paging:o,sort:a}=e,l=e.filter,c=e.filter,d=e.filter;o&&t.withPaging({limit:o.limit,offset:o.offset});let u=null!==(n=null==l?void 0:l.groupId)&&void 0!==n?n:[],p=null!==(i=null==l?void 0:l.membershipId)&&void 0!==i?i:[],m=null!==(s=null==l?void 0:l.childCourseId)&&void 0!==s?s:[],h=null!==(r=null==l?void 0:l.roleBucket)&&void 0!==r?r:[],g={hasDueDateExceptionOnly:null==l?void 0:l.hasDueDateExceptionOnly,hasTimeLimitExceptionOnly:null==l?void 0:l.hasTimeLimitExceptionOnly,excludePreviewUser:null==l?void 0:l.excludePreviewUser,groupId:u.length>0?u.join(","):void 0,membershipId:p.length>0?p.join(","):void 0,childCourseId:m.length>0?m.join(","):void 0,classicSearchCompare:(null==c?void 0:c.searchField)&&(null==c?void 0:c.searchComparison)?c.searchComparison:void 0,classicSearchField:(null==c?void 0:c.searchField)?c.searchField:void 0,classicSearchText:(null==c?void 0:c.searchField)&&(null==c?void 0:c.searchString)?c.searchString:void 0,includeCount:!0,includeMe:null==l?void 0:l.includeMe,membershipAvailable:null==l?void 0:l.membershipAvailable,roleBucket:h.length>0?h.join(","):void 0,q:!(null==c?void 0:c.searchField)&&(null==c?void 0:c.searchString)?c.searchString:void 0,columnId:e.columnId,fields:null==d?void 0:d.fields,filter:null==d?void 0:d.statusFilter};t.withQueryParams(g),a&&t.withSort(...a)}async function C(e){let t=new a.R37({courseId:e.courseId}).withSession(r.nP).withExpand("user","courseRole");y(e,t);let n=await (0,a.jIs)(t);return b(n,e)}function S(e){let t=new a.R37({courseId:e.courseId}).withSession(r.nP);return y(e,t),(0,a.jIs)(t)}},253275:function(e,t,n){"use strict";n.d(t,{$J:function(){return P},HA:function(){return C},Mq:function(){return w},PQ:function(){return r},QI:function(){return x},Rc:function(){return I},Vh:function(){return E},XS:function(){return T},YM:function(){return S},gI:function(){return v},lt:function(){return A},mo:function(){return k},zg:function(){return o}});var i,s,r,o,a=n(276635),l=n(846409),c=n(758219);let d="/v1/courses/%courseId%/gradebook/columns",u=`${d}?expand=gradebookCategory`,p=`${d}/%columnId%`,m=`${p}?expand=gradebookCategory,associatedRubrics`,h=`${p}?expand=externalGrade,gradebookCategory,columnSummary`,g=`${d}?contentId=%contentId%`,f=`${p}/reconcileRemainingAttempts`,b=`${p}/postReadyGrades`;async function v(e,t,n){let i=(0,l.Q2)(m,{courseId:e,columnId:t});return(0,l.U2)(i,n)}(i=r||(r={})).HIGHEST="HIGHEST",i.LOWEST="LOWEST",i.AVERAGE="AVERAGE",(s=o||(o={})).ColumnName="columnName",s.DueDate="dueDate";let y="fetchColumns";async function C(e,t){(0,l.Zt)(y);let n=[];for(let i of t)n.push(v(e,i,{batchKey:y}));return{gradebookColumns:(0,c.MO)(await Promise.all(n))}}async function S(e){let{results:t}=await (0,l.U2)((0,l.Q2)(d,{courseId:e}));return{gradebookColumns:(0,c.MO)(t)}}function E(e){let{courseId:t,contentId:n}=e,i=(0,l.Q2)(g,{courseId:t,contentId:n});return(0,l.U2)(i)}async function I(e,t,n={}){let i=(0,l.Q2)(m,{courseId:t.courseId,columnId:t.id,...n}),s=(0,l.T8)(e,t);return a.isEmpty(s)?e:(0,l.r$)(i,s)}async function w(e,t){(0,l.Zt)();let n=e.map(e=>I(e.prevColumn,e.nextColumn,t).then(e=>({isOk:!0,id:null==e?void 0:e.id,result:e}),t=>{var n;return{isOk:!1,id:null===(n=e.prevColumn)||void 0===n?void 0:n.id,error:t,previous:e.prevColumn}}));return{columns:(0,c.MO)(await Promise.all(n))}}function A(e,t,n){let i=(0,l.Q2)(f,{courseId:e,columnId:t});return(0,l.v_)(i,{reconciliationMode:n})}async function k(e,t){let n=await (0,l.v_)((0,l.Q2)(b,{courseId:e,columnId:t}),{});return{postedCount:n,columnId:t}}function x(e,t){let n=(0,l.Q2)(h,{courseId:e,columnId:t});return(0,l.r$)(n,{rubricAssociations:[]})}function T(e,t){let n=(0,l.Q2)(p,{courseId:e,columnId:t,onlyIfEmpty:"false"});return(0,l.Od)(n)}async function P(e){let t=function(e){let{courseId:t,paging:n,sort:i,filter:s}=e,r=n?{limit:n.limit,offset:n.offset}:{},o=i&&i.length?{sort:(0,l.C4)(i)}:{};return{...r,...o,...s,courseId:t}}(e);return(0,l.U2)((0,l.Q2)(u,t))}},739982:function(e,t,n){"use strict";n.d(t,{$_:function(){return b},Fe:function(){return h},GI:function(){return f},Q5:function(){return g},VH:function(){return p},XO:function(){return d},mE:function(){return m},nT:function(){return u}});var i=n(846409),s=n(276635),r=n(408027),o=n(491288);let a="/v1/courses/%courseId%/gradebook/columns/%columnId%/grades",l=`${a}/%gradeId%/postReadyGrades`,c=`${a}/%gradeId%`;async function d(e,t,n,s){let r=(0,i.Q2)(a,{courseId:e,columnId:t,userId:n,includeUnpostedGrade:s}),{paging:o,permissions:l,results:c}=await (0,i.U2)(r);return{grades:c,paging:o,permissions:l}}async function u(e,t,n,s={}){var r;let o=null===(r=s.expand)||void 0===r?void 0:r.join(),a=s.includeInProgress,{permissions:l,bulkViewUsers:c}=await (0,i.v_)((0,i.Q2)("/v1/courses/%courseId%/gradebook/grades/bulkView",{courseId:e,expand:o,includeInProgress:a}),{columnIds:t,membershipIds:n}),d=[];return c.forEach(e=>{d.push(...e.grades.map(e=>{var t;let n=null===(t=e.attempts)||void 0===t?void 0:t.find(t=>(null==t?void 0:t.attemptDate)&&new Date(t.attemptDate).getTime()===new Date(e.lastAttemptDate).getTime()),i=e.lastAttemptDate;return{...e.grade,lastAttemptId:null==n?void 0:n.id,lastAttemptDate:i}}))}),{grades:d,permissions:l}}async function p(e){let{columnId:t,courseId:n,id:s}=e,r=await (0,i.v_)((0,i.Q2)(l,{columnId:t,courseId:n,gradeId:s}),{});return{count:r,grade:e}}async function m(e){let{courseId:t,columnId:n,userId:s}=e,r=await (0,i.v_)((0,i.Q2)(a,{clearCommentsIfRevertOverrides:"false",courseId:t,columnId:n,userId:s}),e);return{grade:r}}async function h(e){var t;let n=await (0,r.FeW)(o.nP,e);return{isExempt:null!==(t=null==n?void 0:n.isExempt)&&void 0!==t&&t}}async function g(e){let{courseId:t,columnId:n,userId:i,isExempt:s}=e,a=await (0,r.Q5g)(o.nP,{courseId:t,columnId:n,userId:i},{isExempt:s});return{...e,isExempt:!!(null==a?void 0:a.isExempt)}}async function f(e,t){let{courseId:n,columnId:r,id:o}=t,a=(0,i.T8)(e,t);if((0,s.isEmpty)(a))return{grade:e};let l=(0,i.Q2)(c,{clearCommentsIfRevertOverrides:"false",includeUnpostedGrade:"true",courseId:n,columnId:r,gradeId:o}),d=await (0,i.r$)(l,a);return{grade:d}}async function b(e,t){return await (0,r.$_n)(o.nP,{courseId:e,columnId:t})}},846409:function(e,t,n){"use strict";let i;n.d(t,{C4:function(){return x},HT:function(){return l},M5:function(){return R},Od:function(){return C},Q0:function(){return c},Q2:function(){return k},SV:function(){return G},T8:function(){return A},U2:function(){return f},Y$:function(){return T},YU:function(){return I},Zt:function(){return g},a4:function(){return d},gz:function(){return b},mg:function(){return D},r$:function(){return y},uI:function(){return P},v_:function(){return v},yY:function(){return a}});var s=n(276635),r=n(491288),o=n(758219);let a="DELETE",l="GET",c="PATCH",d="POST",u=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{3})?Z$/,p={},m="defaultBatch";async function h(e){if(!p[e])return;let t=p[e];if(delete p[e],!t.operations.length)return;let n=t.operations.map((e,t)=>({method:e.method,body:e.body,relativeUrl:k(e.relativeUrl,{"bbds-xb":t})}));try{let e=await b("/v1/utilities/batch",n,{noBatch:!0,method:"PUT"});e.forEach(e=>{let n=e.relativeUrl.match(/bbds-xb=(\d+)/);if(!n||n.length<2)throw Error("Did not find correlation ID in response URL");let i=+n[1],s=t.operations[i];if(!s)throw Error("Did not find operation specified by response");let{statusCode:r,body:o}=e,a=new Headers;Object.keys(e.headers).forEach(t=>{a.append(t,e.headers[t][0])});let l=new Response(o,{status:r,headers:a});l.ok?s.resolve(o):s.reject({error:{...o,url:e.relativeUrl}})})}catch(e){t.operations.forEach(t=>{t.reject(e)})}}function g(e=m){p[e]||(p[e]={operations:[],immediateId:setTimeout(()=>h(e),0)})}function f(e,t,n){return E(l,e,null,t,n)}function b(e,t,n,i){return E("PUT",e,t,n,i)}function v(e,t,n,i){return E(d,e,t,n,i)}function y(e,t,n,i){return E(c,e,t,n,i)}function C(e,t,n){return E(a,e,null,t,n)}function S(e){let t=s.cloneDeep(e);return delete t.api,delete t.ui,t.id&&t.id.includes(o.dc)&&delete t.id,t}function E(e,t,n,i,o){let a=i&&i.batchKey||m;if(p[a]&&(!i||!i.noBatch)){let s={method:e,...i};return n&&(s.body=S(n)),new Promise((e,n)=>{p[a].operations.push({method:s&&s.method||l,relativeUrl:t,body:s&&s.body,resolve:e,reject:n})})}return function(e,t,n,i,o=!0){let a=r.vc.apiBasePath+t;a=P(a);let l={credentials:"same-origin",method:e},c={"X-Blackboard-XSRF":r.vc.xsrf};(null==i?void 0:i.suppressTimestampUpdate)&&(c["Suppress-Session-Timestamp-Update"]="true",delete i.suppressTimestampUpdate);let d=null;return n&&(n instanceof FormData?d=n:(c["Content-Type"]="application/json;charset=UTF-8",d=JSON.stringify(S(n)))),l.headers=c,d&&(l.body=d),s.merge(l,i),new Promise((e,t)=>{fetch(a,l).then(n=>n.ok?!1!==o?e(204===n.status?null:w(n)):e(n):n.json().then(e=>{t({error:{...e,url:n.url}})}),t)})}(e,t,n,i,o)}function I(e){return"string"==typeof e&&u.test(e)?new Date(e):e}async function w(e){let t=await e.text();return JSON.parse(t,(e,t)=>I(t))}function A(e,t){return s.transform(t,function(t,n,i){s.isEqual(n,e[i])||(t[i]=n)})}function k(e,t){return Object.keys(t).sort().forEach(n=>{let i=t[n];if(s.isArray(i)&&(i=i.join(",")),e.indexOf(`%${n}%`)>0)e=e.replace("%"+n+"%",i);else if(s.isNumber(i)||s.isBoolean(i)||!s.isEmpty(i)){let t=0>e.indexOf("?")?"?":"&";e+=`${t}${n}=${encodeURIComponent(i)}`}}),e}function x(e){return e?e.map(e=>`${e.field}(${e.direction})`).join(","):""}function T(){return P(r.vc.apiBasePath)}function P(e,t){return e&&0>e.indexOf("://")&&0!==e.indexOf("//")&&("/"!==e[0]&&(e="/"+e),e=t?t+e:D()+e),e}function D(){return i||void 0===globalThis.location||(i=G(globalThis.location.href)),i}function G(e){let t=/^[^\/]*\/\/[^\/]+/.exec(e);return t&&t[0]||e}function R(e){return e.startsWith("https://")}},12402:function(e,t,n){"use strict";n.d(t,{VfA:function(){return f.Vf},Wb7:function(){return f.Wb},PQc:function(){return w.PQ},oVk:function(){return Y.oV},a6B:function(){return C.a6},VIO:function(){return y.VI},wnm:function(){return y.wn},yY6:function(){return c.yY},tiF:function(){return I.ti},HTE:function(){return c.HT},W6_:function(){return T.W6},zg8:function(){return w.zg},ZNX:function(){return b.ZN},$Gc:function(){return Y.$G},eQC:function(){return Y.eQ},FSJ:function(){return Y.FS},t9O:function(){return Y.t9},RoV:function(){return Y.Ro},Q0L:function(){return c.Q0},a4B:function(){return c.a4},api:function(){return B},C4U:function(){return c.C4},Q2d:function(){return c.Q2},bbE:function(){return f.bb},gUR:function(){return f.gU},oHG:function(){return l.oH},s9I:function(){return l.s9},us4:function(){return l.us},uIm:function(){return c.uI},_v9:function(){return Y._v},Vbk:function(){return P.Vb},GNH:function(){return P.GN},YUt:function(){return c.YU},iBu:function(){return R},_Ae:function(){return L},JYP:function(){return f.JY},FAX:function(){return f.FA},cUf:function(){return i.cU},TS8:function(){return C.TS},uHV:function(){return v.uH},V$w:function(){return j},jC5:function(){return T.jC},G3z:function(){return C.G3},KFz:function(){return W},iyb:function(){return N.i},OH6:function(){return q},RC3:function(){return _},VFg:function(){return T.VF},Fix:function(){return eo},PZi:function(){return u.PZ},W3l:function(){return a},OEz:function(){return Z},Y$o:function(){return c.Y$},uZ9:function(){return h},Tj0:function(){return p},nMx:function(){return g},Uc6:function(){return Y.Uc},_pB:function(){return O},jdu:function(){return ea.j},Roc:function(){return u.Ro},M5E:function(){return c.M5},Csr:function(){return M},azG:function(){return J},RAR:function(){return y.RA},dep:function(){return Y.de},qDZ:function(){return y.qD},OuV:function(){return ee},PR8:function(){return Y.PR},fBj:function(){return er},ltB:function(){return w.lt},I5k:function(){return k},GjL:function(){return d},vWI:function(){return x.vW},FaB:function(){return S},siz:function(){return x.si},GTb:function(){return x.GT},i7$:function(){return x.i7},$_n:function(){return A.$_},W8C:function(){return m},mTj:function(){return Q.m},Hfm:function(){return v.Hf},yLp:function(){return P.yL},OmG:function(){return E.O}}),n(623776);var i=n(777339),s=n(408027),r=n(491288),o=n(507659);let a=async(e,t,n)=>{let a=await (0,s.Hnt)(r.nP,e,t);return new o.b(a,i.fX,n).promise};var l=n(879844),c=n(846409);async function d(e){let t=(0,c.Q2)("/v1/courses/%course%/gradebook/columns/%column%/export",{course:e.course,column:e.column});return(0,c.v_)(t,e.studentIds,void 0,!1)}n(348231),n(972519);var u=n(332011);function p(e,t,n){return(0,s.Ysd)(r.nP,e,t,n)}function m(e,t,n){return(0,s.acm)(r.nP,e,t,n)}function h(e,t){return(0,s.T0n)(r.nP,e,t)}function g(e){return`${e.account}|${e.id}`}n(822907);var f=n(463380);n(227982);var b=n(207490),v=n(438929);n(939737),n(989399);var y=n(843730),C=n(304239);async function S(e,t,n){return(0,s.ZKY)(r.nP,e,t,n)}n(768033),n(25439),n(553387),n(305641),n(830288);var E=n(624859),I=n(334538);n(765371),n(150713),n(413952);var w=n(253275),A=n(739982);n(201600);let k=async(e,t)=>(0,s.w9)(r.nP,{courseId:e},t);var x=n(742165),T=n(139366),P=n(916225);n(425750);var D=n(771300);let G="evaluateMathML";async function R(e,t,n,i){try{return await (0,c.v_)((0,c.Q2)("/v1/courses/%courseId%/mathEditor/v3/evaluateMathML",{courseId:e}),{mathML:t,variables:n,ident:i},{batchKey:G})}catch(e){throw(0,D.WE)(e,i)}}async function B(e,t){(0,c.Zt)(G);let n=t.map(({mathML:t,variables:n,ident:i})=>R(e,t,n,i));return(await Promise.allSettled(n)).map(e=>"rejected"===e.status?e.reason:e.value)}async function L(e){let t=await (0,c.U2)((0,c.Q2)("/public/v1/oauth2/tokeninfo",{access_token:e}));return{userId:t.user_id,applicationId:t.application_id,scope:t.scope}}var N=n(325570);function O(){return(0,s.w64)(r.nP)}async function M(e){return(0,E.O)({fileType:"audio",fileName:"audio_file",file:e})}var $=n(112027);let H="/v1/courses/%courseId%/questionAnalysis",F=H+"/assessments/%assessmentId%",U=H+"/assessments/%assessmentId%",V=H+"/%analysisId%/prepareDownload";function _(e,t){let n={courseId:e,...t};return(0,c.U2)((0,c.Q2)(H,n)).then(t=>{var n;let i=[],s=[];for(let r of t.results)null!=r.analysisReportDetails&&s.push(K(r,e)),null!=r.questionDetailsList&&i.push(...null!==(n=X(r))&&void 0!==n?n:[]);return{reports:(0,$.MO)(s),questionDetails:(0,$.MO)(i)}})}function q(e,t,n){return(0,c.U2)((0,c.Q2)(U,{courseId:e,assessmentId:t}),n).then(t=>{if(null==t.analysisReportDetails)return null;let n=K(t,e),i=null!=t.questionDetailsList?X(t):[];return{reports:(0,$.MO)([n]),questionDetails:(0,$.MO)(null!=i?i:[])}})}let z="fetchMultipleReports";async function W(e,t){(0,c.Zt)(z);let n=[];for(let i of t)n.push(q(e,i,{batchKey:z}));let i=await Promise.all(n);return i.reduce((e,t)=>null!=t?{reports:{...e.reports,...t.reports},questionDetails:{...e.questionDetails,...t.questionDetails}}:e,{reports:{},questionDetails:{}})}let j=(e,t)=>(0,c.v_)((0,c.Q2)(V,{courseId:e,analysisId:t}),{});async function Z(e,t){let n=await (0,c.v_)((0,c.Q2)(F,{courseId:e,assessmentId:t}),{});return{report:{id:n.analysisId,assessmentId:t,analysisReportDetails:n,courseId:e}}}function K(e,t){var n,i;return{analysisReportDetails:e.analysisReportDetails,assessmentId:null===(n=e.analysisReportDetails)||void 0===n?void 0:n.assessmentId,courseId:t,id:null===(i=e.analysisReportDetails)||void 0===i?void 0:i.analysisId,summaryStatsDetails:e.summaryStatsDetails}}function X(e){var t;return null===(t=e.questionDetailsList)||void 0===t?void 0:t.map(e=>({...e,id:e.questionId}))}n(642768);var Y=n(474755);n(424851),n(900860);var Q=n(258032);let J=()=>(0,s.ziu)(r.nP),ee=()=>(0,s.A8I)(r.nP);var et=n(619034),en=n.n(et),ei=n(780687);let es=/bbcswebdav/;async function er(e="<body></body>",t,n={}){let i=new FormData,s=(0,ei.T$)((0,ei.qC)(e)),r=new Blob([s],{type:"text/html"});return i.append("file",r,t||`UNSAFE_HTML_${en()().utc().format("YYYYMMDDHHmmss")}.html`),(0,c.v_)((0,c.Q2)("/v1/files?expand=mimeType",n),i)}async function eo(e){let t;if(!((0,c.SV)(e)===(0,c.mg)()&&es.test(e)))throw Error(`Unsafe HTML URL ${e} is invalid.`);try{t=await fetch(e,{credentials:"include",method:"GET"})}catch(t){throw Error(`Failed to get unsafe HTML at ${e} with error: ${t}`)}if(t.status!==s.oji.Ok)throw Error(`Failed to get unsafe HTML at ${e} with status ${t.status}.`);return(0,ei.X6)(await t.text())}var ea=n(299380);n(347229),n(277313),n(4281),n(815006),n(789061),n(801674)},474755:function(e,t,n){"use strict";n.d(t,{$G:function(){return S},CB:function(){return F},DF:function(){return O},EX:function(){return q},FS:function(){return y},HC:function(){return A},Hy:function(){return k},Km:function(){return R},PR:function(){return T},Ri:function(){return L},Ro:function(){return E},Uc:function(){return H},_v:function(){return M},ad:function(){return x},de:function(){return _},eQ:function(){return C},jG:function(){return D},jh:function(){return N},oV:function(){return b},qE:function(){return P},t9:function(){return v}});var i=n(276635),s=n(198022),r=n(846409),o=n(758219),a=n(408027),l=n(304415),c=n(491288);let d="/v1/courses/%courseId%/assessments/%assessmentId%/questions",u=d+"/%questionId%",p="sourceInfo,usageCount",m=d+"/%questionBlockId%/questions",h=m+"/%questionId%",g=`${d}/copy`,f=`${g}/queued`,b=1,v=1,y=2,C=100,S=10,E=2;async function I(e,t){let{paging:n,permissions:i,results:s}=await (0,a.jIs)(e),r=(0,o.MO)(s.map(e=>({...e,assessmentId:t.assessmentId,courseId:t.courseId})));return{paging:n,permissions:i,questions:r,results:s}}async function w(e,t){if(t.paging&&e.withPaging(t.paging),t.filter){let n={},{assessmentIds:i,categoryIds:s,excludeAssessmentIds:r,keywords:o,questionTypes:a}=t.filter;i&&i.length>0&&(n.assessmentIds=i),s&&s.length>0&&(n.categoryIds=s),r&&r.length>0&&(n.excludeAssessmentIds=r),o&&o.length>0&&(n.q=H(o)),a&&a.length>0&&(n.questionTypes=a),Object.keys(n).length>0&&e.withQueryParams(n)}let{paging:n,permissions:i,results:s}=await (0,a.jIs)(e),r=(0,o.MO)(s.map(e=>({...e.question,assessmentId:e.assessmentId,courseId:t.courseId})));return{paging:n,permissions:i,questions:r,results:s}}async function A(e){let t;let n={};return e.useSearch?(t=new a.wGc({courseId:e.courseId}).withExpand("question.alignedGoals","question.usageCount").withSession(c.nP),await w(t,e).then(e=>n={...e})):e.assessmentId&&(t=new a.Z7d({assessmentId:e.assessmentId,courseId:e.courseId}).withSession(c.nP),await I(t,e).then(e=>n={...e})),{paging:n.paging,permissions:n.permissions,questionIds:Object.keys(n.questions),questions:n.questions}}async function k({assessmentId:e,courseId:t,questionId:n}){return{...await (0,a.oIX)(c.nP,e,t,n),assessmentId:e,courseId:t}}function x(e){let t=(0,r.Q2)(m,{...e,expand:p,sort:"id(ASC)"});return(0,r.U2)(t).then(t=>{let{results:n,paging:i,permissions:s}=t;return{questions:function(e,t,n){let i=e.map(e=>V(e,t,void 0));return(0,o.MO)(i)}(n,e.courseId),paging:i,permissions:s,questionBlockId:e.questionBlockId}})}async function T(e,t,n){let s=(0,r.Q2)(u,{...n,questionId:t.id});if(null==e||null==e.id||0===e.id.indexOf(o.dc)){s=(0,r.Q2)(d,n),delete t.position;let e=await (0,r.v_)(s,t);return e}let a=(0,r.T8)(e,t);if(i.isEmpty(a))return e;let l=await (0,r.r$)(s,{...a,id:t.id,questionType:t.questionType});return l}async function P(e,t){let n=[];return(0,r.Zt)(),e.forEach(e=>{let i=(function(e,t){let n=(0,r.Q2)(h,{...t,questionId:e,expand:p});return(0,r.gz)(n,{}).then(e=>V(e,t.courseId))})(e,t).then(t=>({isOk:!0,id:e,result:t})).catch(t=>({isOk:!1,id:e,error:{status:t.status}}));n.push(i)}),{results:await Promise.all(n),questionBlockId:t.questionBlockId}}function D(e,t,n,s){let o=(0,r.Q2)(m,{courseId:e,assessmentId:t,questionBlockId:n,expand:p});return(0,r.v_)(o,function(e,t){let n=G(null==t?void 0:t.searchCriteria,e);return{...!i.isEmpty(t.questionIds)&&{questionIds:t.questionIds},...!i.isEmpty(t.excludeIds)&&{excludeIds:t.excludeIds},...null!=t.selectAll&&{selectAll:t.selectAll},searchCriteria:n}}(t,s))}function G(e,t){let n=!e||i.isEmpty(e.questionTypes);return{...e,excludeAssessmentIds:[t],...n?{questionTypes:l.O5}:{}}}async function R(e,t){var n;let i=(0,r.Q2)(u,{...t,questionId:e.id});return(null===(n=null==e?void 0:e.id)||void 0===n?void 0:n.indexOf(o.dc))===0?e:(0,r.Od)(i)}let B=async(e,t)=>R(e,t).then(()=>({isOk:!0,id:e.id})).catch(t=>({isOk:!1,id:e.id,...t}));async function L(e,t){(0,r.Zt)();let n=e.map(async e=>await B(e,t));return{results:(0,o.MO)(await Promise.all(n))}}async function N(e,t){let n=(0,r.Q2)(h,{...t,questionId:e.id});return(0,r.Od)(n)}function O(e){let t=(0,r.Q2)(g,{courseId:e.courseId,assessmentId:e.assessmentId});return(0,r.v_)(t,$(e))}function M(e){let t=(0,r.Q2)(f,{courseId:e.courseId,assessmentId:e.assessmentId});return(0,r.v_)(t,$(e))}function $(e){return{questionSelectionDetails:{...!i.isEmpty(e.questionIds)&&{questionIds:e.questionIds},...!i.isEmpty(e.excludeIds)&&{excludeIds:e.excludeIds},...null!=e.selectAll&&{selectAll:e.selectAll},...e.searchCriteria&&{searchCriteria:[{field:"assessmentIds",value:e.searchCriteria.assessmentIds},{field:"excludeAssessmentIds",value:e.searchCriteria.excludeAssessmentIds},{field:"questionTypes",value:e.searchCriteria.questionTypes},{field:"categoryIds",value:e.searchCriteria.categoryIds},...e.searchCriteria.keywords?[{field:"q",value:H(e.searchCriteria.keywords)}]:[]].reduce((e,{field:t,value:n})=>i.isEmpty(n)?e:{...e,[t]:n},{})}},positionAfter:e.positionAfter,usePointsFromSource:!0,defaultPointValue:10}}let H=e=>e.map(e=>`"${e}"`).join(" OR ");function F(e,t,n,i,s){let r={courseId:t};switch(i){case a.QuestionType.Either:r={...r,...function(e,t,n){let i=U(e,t,n);return{...i,answer:!0,answerType:a.eWt.TrueFalse}}(e,n,i),...s,isAutoGraded:!0};break;case a.QuestionType.Essay:r={...r,...U(e,n,i),...s,isAutoGraded:!1};break;case a.QuestionType.FIMB:r={...r,...function(e,t,n){let i=U(e,t,n);return{...i,answers:[],setPointsOnAnswers:!1}}(e,n,i),...s,isAutoGraded:!0};break;case a.QuestionType.Matching:r={...r,...function(e,t,n){let i=U(e,t,n),{answers:s,prompts:r}=function(){let e=[l.ZP.createMatchingAnswer(),l.ZP.createMatchingAnswer(!0)],t=[l.ZP.createMatchingPrompt(0)];return{prompts:t,answers:e}}();return{...i,answers:s,numberType:a.$eE.LetterUpper,prompts:r,showAnswersInRandomOrder:!0}}(e,n,i),...s,allowPartialCredit:!0,allowNegativeScoreForIncorrectAnswers:!1,allowNegativeOverallScore:!1,isAutoGraded:!0};break;case a.QuestionType.Multiple:r={...r,...function(e,t,n){let i=U(e,t,n),s=function(){let e=[l.ZP.createMultipleAnswerAnswer(!1),l.ZP.createMultipleAnswerAnswer(!1),l.ZP.createMultipleAnswerAnswer(!1)];return e}();return{...i,answers:s,answersCount:s.length,singleCorrectAnswer:!0}}(e,n,i),...s,isAutoGraded:!0};break;case a.QuestionType.PresentationOnly:r={...r,...U(e,n,i,0),...s,isAutoGraded:!0};break;case a.QuestionType.CalculatedFormula:r={...r,...function(e,t,n){let i=U(e,t,n);return{...i,answerFormula:"",answerScale:0,correctAnswerFormat:a.CalculatedFormulaAnswerFormatType.Normal,correctAnswerTolerance:{type:a.cJw.Numeric,value:0},correctAnswerPrecision:a.CalculatedFormulaAnswerPrecisionType.Decimal,displayFormulaToStudent:!1,displayRoundingSettingsToStudent:!1,mathMLImageAltText:"",mathMLImageURL:"",partialCreditPointsPercent:0,partialCreditTolerance:{type:a.cJw.Numeric,value:0},units:{unitPointsPercent:0,unitsCaseSensitive:!1,unitsRequired:!1,unitValue:""},variableDefinitions:[],variableSets:[],variableSetCount:10}}(e,n,i),allowPartialCredit:!1,isAutoGraded:!0};break;case a.QuestionType.CalculatedNumeric:r={...r,...function(e,t,n){let i=U(e,t,n);return{...i,answerValue:0,toleranceValue:0}}(e,n,i),isAutoGraded:!0};break;case a.QuestionType.Hotspot:r={...U(e,n,i),...s};break;case a.QuestionType.QuestionBlock:r={...r,...function(e,t,n,i){let s=U(e,t,n),r=i&&i.questionIds?i.questionIds:void 0,o=i&&i.questionCount,a=i&&i.selectAll,l=i&&i.searchCriteria,c=i&&i.excludeIds?i.excludeIds:void 0;return{...s,numOfAvailableQuestions:o,numOfQuestionsToChoose:o,pointsPerQuestion:10,questionSelectionDetails:{questionIds:r,selectAll:a,searchCriteria:G(l,e),excludeIds:c}}}(e,n,i,s)};break;case a.QuestionType.PageBreak:r={...r,...U(e,n,i),...s,questionText:{rawText:"pageBreak"}};break;default:throw Error(`Unsupported questionType: ${i}`)}return Promise.resolve(r)}function U(e,t,n,i=10){let r={id:o.dc+s.v4(),assessmentId:e,questionType:n,position:1,positionAfter:t,api:{isUpdating:!1,isDeleting:!1}};return n!==a.QuestionType.QuestionBlock?{...r,correctResponseFeedback:{rawText:""},incorrectResponseFeedback:{rawText:""},points:i,questionText:{rawText:""}}:r}function V(e,t,n){var i;return e.assessmentId=n||(null===(i=e.sourceInfo)||void 0===i?void 0:i.id),e.courseId=t,e}async function _(e,t){let n=(0,r.Q2)(`${d}/parseFIBQuestion`,t);return(0,r.v_)(n,{questionText:e})}async function q(e){let{fileDir:t,overridePointValue:n,positionAfter:i,courseId:s,assessmentId:r}=e;if(!t.fileLocation||!t.fileName)throw Error("File upload data is corrupted or has no values.");let o=new a.Hsj({courseId:s,assessmentId:r}).withBody({overridePointValue:n,positionAfter:i}).withQueryParams({fileName:t.fileName,fileLocation:t.fileLocation}).withSession(c.nP);return(0,a.jIs)(o)}},914471:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});class i extends Error{constructor(e){let t;e instanceof AbortSignal&&"string"==typeof e.reason&&(t=e.reason),"string"==typeof e&&(t=e),super(t),this.name="AbortError"}}},507659:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var i=n(408027),s=n(914471),r=n(698760);class o{constructor(e,t,n){this.taskId=e,this.fetchTask=t,this.abortSignal=n,this.pollInterval=new r.J,this.fetchPromise=new Promise((e,t)=>{this.startNextPollingInterval(e,t)})}get promise(){return this.fetchPromise}startNextPollingInterval(e,t){let n=this.pollInterval.next();this.intervalId=setTimeout(()=>this.getStatus(e,t),n)}async getStatus(e,t){var n;if(null===(n=this.abortSignal)||void 0===n?void 0:n.aborted){t(new s._(this.abortSignal));return}let r=await this.fetchTask(this.taskId);if(r.taskStatus===i.hRl.Complete&&r.result&&r.result){this.result=r.result,e(this.result);return}if(r.taskStatus===i.hRl.CompleteErrors||r.taskStatus===i.hRl.Incomplete||r.taskStatus===i.hRl.Complete&&!r.result){t(Error("Unable to complete task"));return}this.startNextPollingInterval(e,t)}}},698760:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});let i=[2,2,4,8];class s{constructor(){this.currentStepIndex=0}next(){let e=1e3*i[this.currentStepIndex],t=Math.min(this.currentStepIndex+1,i.length-1);return this.currentStepIndex=t,e}}},245706:function(e,t,n){"use strict";n.d(t,{J:function(){return b}});var i=n(202784),s=n(443400),r=n(144958),o=n(398435),a=n(906277),l=n(410628),c=n(745257),d=n(438501),u=n(951248),p=n(273386),m=n(470269),h=n(789598),g=n(619139);let f=[r.N6],b=e=>{var t,n,b,v,y,C;let S="lti.launchFrame",[E,I]=(0,i.useState)(!1),w=null!==(t=e.iframeHeight)&&void 0!==t?t:window.innerHeight,[A,k]=(0,i.useState)(!0),[x,T]=(0,i.useState)(0),P=(0,i.useRef)(null),D=(0,c.y)(),G=(0,l.q)(),[R,B]=(0,g.f)((0,s.uI)(e.url)),L=(0,p.pJ)(e=>u.Ys.app.getRoute(e).params),N=L.courseId,O=null!==(n=L.contentId)&&void 0!==n?n:"",M=(0,p.r0)(N,O),$=!E||A?D.loadingIframeContainer:"",H=null!==(v=null===(b=null==M?void 0:M.permissions)||void 0===b?void 0:b.edit)&&void 0!==v&&v,F=!!(null===(y=null==M?void 0:M.selfEnrollmentGroups)||void 0===y?void 0:y.some(({group:e})=>!!(null==e?void 0:e.isSelfEnrolledAllowed))),U=M&&F&&!H&&!(null===(C=null==M?void 0:M.assignedGroups)||void 0===C?void 0:C.length),V=(0,i.useCallback)(()=>{T(e=>e+1),k(!0)},[k,T]),_=(0,i.useCallback)(e=>{B("group_id",e)},[B]),q=(0,i.useCallback)(()=>{m.Nd.goPeekState((0,m.YO)({courseId:N,contentId:O}))},[N,O]);return(0,i.useEffect)(()=>{V()},[R,V]),i.createElement("div",null,E&&M&&i.createElement("section",{className:D.ltiBanner},e.showAssignToGroups&&i.createElement(h.H,{courseId:N,content:M,url:R,analyticsId:S,isInstructor:H,handleEditGroups:e.assignToGroups,handleUpdateUrlIFrame:_,showGroupMembers:e.showGroupMembers}),e.showRefreshFrameButton&&i.createElement(o.AnalyticsPrimaryButton,{className:D.refreshButton,disabled:A,onClick:V,endIcon:i.createElement(d.Refresh,null),analyticsId:`${S}.refreshButton`},G(!E||A?"global.loading":"lti.launchFrame.refreshLabel"))),U?i.createElement(o.AnalyticsTypography,{align:"center",className:D.needsToEnrollParagraph},G("cloudDocument.groups.mustJoinGroupBeforeOpenContent"),i.createElement(o.AnalyticsLink,{className:"group-enroll-link",analyticsId:`${S}.link.groupEnroll`,href:"#",onClick:q},G("cloudDocument.groups.mustJoinGroupBeforeOpenContentLink"))):i.createElement("div",{style:{height:`${w}px`},className:(0,a.Z)(D.modalContent,{[D.isLoading]:!E})},(!E||A)&&i.createElement("div",null,i.createElement(o.AnalyticsCircularProgress,{id:"lti.launchFrame.loading",label:G("lti.launchFrame.loading"),ariaLabel:"lti.launchFrame.loading",size:"small"}),i.createElement("div",{className:"sr-only",role:"status","aria-live":"polite"},G("lti.launchFrame.loading"))),i.createElement("iframe",{ref:P,onLoad:()=>{var t,n,i,r;I(!0),k(!1);try{let o=null===(n=null===(t=P.current)||void 0===t?void 0:t.contentWindow)||void 0===n?void 0:n.location,a=f.some(e=>{var t;return e.test(null!==(t=null==o?void 0:o.pathname)&&void 0!==t?t:"")});if(a){let t=(0,s.hi)(null!==(i=null==o?void 0:o.href)&&void 0!==i?i:"");null===(r=null==e?void 0:e.onLtiReturned)||void 0===r||r.call(e,t)}}catch(e){}},key:x,id:"lti-launch-iframe",name:"lti-launch-iframe",allow:r.sq,src:R,title:e.iframeTitle,style:{height:`${w}px`},className:(0,a.Z)(e.className,D.iframeContainer,$)})))}},745257:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(281699);let s=(0,i.makeStyles)(e=>(0,i.createStyles)({modalContent:{textAlign:"center",alignItems:"center",justifyContent:"center",display:"flex"},isLoading:{display:"inline-flex",width:"100%",alignItems:"center",justifyContent:"center"},iframeContainer:{display:"block",margin:"0 16px",[e.breakpoints.up("md")]:{margin:"0 20px"}},ltiBanner:{display:"flex",alignItems:"center",padding:"8px 24px",gap:"24px",borderBottom:`1px solid ${e.palette.border.main}`,minHeight:"86px"},ltiGroupsBanner:{display:"flex",flex:1,justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},refreshButton:{marginLeft:"auto"},bannerActions:{display:"flex",gap:"12px"},loadingIframeContainer:{display:"none"},needsToEnrollParagraph:{paddingTop:"32px"},documentName:{fontSize:"1rem",fontWeight:e.typography.fontWeightSemiBold,lineHeight:"1.5"},groupSelector:{minWidth:"208px"}}))},789598:function(e,t,n){"use strict";n.d(t,{H:function(){return p}});var i=n(202784),s=n.n(i),r=n(410628),o=n(398435),a=n(273386),l=n(745257),c=n(281699),d=n(438501),u=n(341898);let p=e=>{var t;let n=(0,l.y)(),p=(0,r.q)(),{content:m,analyticsId:h,isInstructor:g,handleUpdateUrlIFrame:f,url:b,courseId:v}=e,y=null==m?void 0:m.assignedGroups,C=!!y&&y.length>0,S=(0,a.ye)("feature.content.cloudDocument.groups"),E=y&&y.length?y[0].groupId:"",[I,w]=(0,i.useState)(E),A=(null==y?void 0:y.length)===0&&m.isGroupContent?p("cloudDocument.groups.groupsNumber.plural",{number:y.length}):p("cloudDocument.parentDocument"),k="";(null==m?void 0:m.isGroupContent)&&!k&&C&&(k=C&&(null===(t=y[0].group)||void 0===t?void 0:t.title)||"");let x=(0,u.M)(v,I),T=!!(null==x?void 0:x.memberships)&&x.memberships.length>0;(0,i.useEffect)(()=>{C?w(y[0].groupId):w("")},[null==m?void 0:m.assignedGroups,y,C]),(0,i.useEffect)(()=>{f(I)},[f,I]);let P=!g&&!!(null==x?void 0:x.signUpSheet)&&!x.signUpSheet.isShowGroupMembers;return s().createElement("div",{className:n.ltiGroupsBanner},C&&g?s().createElement(o.AnalyticsTextField,{id:"lti.launchFrame.groups",className:n.groupSelector,analyticsId:`${h}.groups`,select:!0,value:I,onChange:e=>{w(e.target.value)},label:p("cloudDocument.documentSelector")},y.map(e=>s().createElement(c.MenuItem,{button:!0,key:e.groupId,value:e.groupId},e.groupTitle))):s().createElement(s().Fragment,null,g?s().createElement(o.AnalyticsTypography,{component:"span",className:n.documentName},A):s().createElement(o.AnalyticsTypography,{component:"span",className:n.documentName},k)),!(null==m?void 0:m.isGroupContent)&&g&&S&&!C&&s().createElement(o.AnalyticsIconButton,{onClick:()=>e.handleEditGroups(),analyticsId:`${h}.addToGroups`},s().createElement(d.Add,null),s().createElement(o.AnalyticsTypography,{component:"span",variant:"inherit"},p("cloudDocument.groups.assignToGroups"))),C&&T&&!P&&s().createElement(o.AnalyticsLink,{"aria-label":p("cloudDocument.groups.showMembersForGroup",{groupName:k}),analyticsId:`${h}.link.showMembers`,href:"#",onClick:()=>{e.showGroupMembers(I)},className:"show-group-members"},p("cloudDocument.groups.showMembers")))}},436103:function(e,t,n){"use strict";n.d(t,{R:function(){return b}});var i=n(202784),s=n.n(i),r=n(410628),o=n(158550),a=n(11897),l=n(398435),c=n(608555),d=n(273386),u=n(927335),p=n(438501),m=n(906277),h=n(470269),g=n(951248),f=n(776013);let b=(0,o.withAnalytics)(e=>{var t,n,b,v;let{analyticsId:y,analyticsEventAugmentor:C,courseId:S,addGoals:E,alignedGoalsCount:I,showGoals:w,contentId:A,onClose:k,allowConversations:x,assignToGroups:T,showAssignToGroups:P,groupContentStarted:D}=e,G=(0,a.y)(),R=(0,r.q)(),B=(0,d.Lx)(),L="CloudDocumentAllowClassConversations",N=(0,d.Tn)(S),O=(0,d.r0)(S,A),[M,$]=(0,i.useState)(x),[H,F]=(0,i.useState)(null==O?void 0:O.description),[U,V]=(0,i.useState)(null!=O&&!!O.assignedGroups&&(null==O?void 0:O.assignedGroups.length)>0),[_,q]=(0,i.useState)(!1),[z,W]=(0,i.useState)(!1),j=(0,d.gH)("cloudDocument","organization"),Z=(0,i.useCallback)(e=>{$(e.currentTarget.checked)},[]),K=(0,i.useCallback)(e=>{F(e.currentTarget.value)},[]),X=C(o.AnalyticsEventTypes.CHANGE_EVENT,K,`${y}.description`),Y=(0,i.useCallback)(()=>{if(O){let e={...O,description:H};B(g.Nwg.content.persistContent(O,e)).then(e=>{let t=e.contents[A];k(t,M,!1)})}},[O,H,M,k]),Q=(0,i.useCallback)(e=>{q(!1),e&&O&&B(g.Nwg.group.deleteByContentId(A)).then(()=>{let e={...O,assignedGroups:[],isGroupContent:!1};k(e,M,!0),V(!1)})},[M,O,A,B,k]),J=(0,i.useCallback)(()=>{h.Nd.leavePeekState()},[]);s().useEffect(()=>{W(!!H&&(null==H?void 0:H.length)>750)},[H]);let ee={analyticsId:`${y}.header`,title:R("cloudDocument.settings"),smallHeaderTitle:null!==(t=null==N?void 0:N.name)&&void 0!==t?t:"",type:c.BbPanelType.peek,hideNavMenu:!1,navMenuAriaLabel:R("global.navigationMenu")},et={primaryButtonProps:{text:R("cloudDocument.footer.save"),id:"cloud-document-next-button",disabled:z,onClick:Y},secondaryButtonProps:{text:R("cloudDocument.footer.cancel"),id:"cloud-document-cancel-button",onClick:J}},en=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{if(en.current){let e=en.current.querySelector("h1.ms-Panel-headerText");e&&(e.tabIndex=0)}},[]);let ei=(0,d.ye)("feature.content.cloudDocument.groups"),es=(null==O?void 0:O.isGroupContent)&&(null==O?void 0:O.assignedGroups)&&(null===(n=null==O?void 0:O.assignedGroups)||void 0===n?void 0:n.length)===0;return s().createElement("div",null,s().createElement("div",{className:G.containerPeekPanel},s().createElement("div",{ref:en,className:G.header},s().createElement(c.BbPanelHeader,{...ee})),s().createElement("div",{className:G.containerBody},s().createElement("section",null,s().createElement(l.AnalyticsFormControlLabel,{analyticsId:`${y}.allowClassConversations`,label:s().createElement(l.AnalyticsTypography,null,R("cloudDocument.detailsAndInfoSection.conversationChoice")),htmlFor:L,control:s().createElement(l.AnalyticsCheckbox,{id:L,analyticsId:`${y}.checkAllowClassConversation`,checked:M,inputProps:{"aria-checked":M?"true":"false","aria-describedby":"conversationChoiceDescription"},onChange:Z})}),s().createElement(l.AnalyticsTypography,{id:"conversationChoiceDescription",className:G.description},R(j("cloudDocument.detailsAndInfoSection.conversationChoiceDescription")))),s().createElement("section",null,s().createElement("h2",{className:G.additionalTools},R("cloudDocument.additionalTools")),s().createElement("div",{className:G.additionalToolsItemContainer},s().createElement("div",{className:G.additionalToolIcon},s().createElement(u.Goal,null)),s().createElement("div",{className:G.additionalToolTextContainer},s().createElement("span",{className:G.additionalToolText},R("cloudDocument.goals.goalsAndStandards")),void 0!==I&&s().createElement("span",null,0===I?s().createElement(l.AnalyticsLink,{analyticsId:`${y}.link.addGoals`,href:"#",onClick:E,className:G.additionalToolLink},R("cloudDocument.goals.alignWithGoals")):s().createElement(l.AnalyticsLink,{analyticsId:`${y}.link.showGoals`,href:"#",onClick:w,className:G.additionalToolLink},R("cloudDocument.goals.alignedGoals.plural",{number:I})))))),ei&&P&&s().createElement("section",{className:G.groupsSection},s().createElement("div",{className:(0,m.Z)(U?G.additionalToolsItemContainerTrashCanIcon:"")},s().createElement("div",{className:G.additionalToolsItemContainer},s().createElement("div",{className:G.additionalToolIcon},s().createElement(u.Groups,null)),s().createElement("div",{className:G.additionalToolTextContainer},s().createElement("span",{className:G.additionalToolText},R("cloudDocument.groups.assignedGroups")),s().createElement("span",null,(null===(b=null==O?void 0:O.assignedGroups)||void 0===b?void 0:b.length)&&(null===(v=null==O?void 0:O.assignedGroups)||void 0===v?void 0:v.length)>0||es&&(null==O?void 0:O.assignedGroups)?s().createElement(l.AnalyticsLink,{analyticsId:`${y}.link.showGroups`,href:"#",onClick:T,className:G.additionalToolLink},R("cloudDocument.groups.groupsNumber.plural",{number:O.assignedGroups.length})):s().createElement(l.AnalyticsLink,{analyticsId:`${y}.link.assignToGroups`,href:"#",onClick:T,className:G.additionalToolLink},R("cloudDocument.groups.assignToGroups"))),D&&s().createElement(l.AnalyticsTypography,{className:G.groupsSectionHint},R(j("cloudDocument.groups.unassignGroupHint"))))),U&&s().createElement("div",{className:"styles.unassignGroupButton"},s().createElement(l.AnalyticsIconButton,{disabled:D,"aria-label":R("cloudDocument.groups.unassignButtonAriaLabel"),analyticsId:`${y}.button.unassignGroups`,onClick:()=>q(!0)},s().createElement(p.Trash,null)),_&&s().createElement(f.U,{titleText:"cloudDocument.groups.unassignGroupsModal.title",contentText:j("cloudDocument.groups.unassignGroupsModal.content"),analyticsId:`${y}.unassignGroups`,rootId:"cloudDocument.settings.unassignGroups",confirmationText:"cloudDocument.groups.unassignGroupsModal.confirmation",exitCallback:Q})))),s().createElement("section",null,s().createElement(l.AnalyticsTextField,{classes:{root:G.descriptionBox},analyticsId:`${y}.description`,id:"cloud-document-description",label:R("cloudDocument.descriptionLabel"),placeholder:R("cloudDocument.placeholderDescription"),multiline:!0,fullWidth:!0,rows:4,value:H,onChange:X,error:z,helperText:R("cloudDocument.descriptionMaxCharactersLabel")})))),s().createElement("div",{className:G.footer},s().createElement(c.BbPanelFooter,{analyticsId:`${y}.footer`,...et})))})},351124:function(e,t,n){"use strict";n.d(t,{P:function(){return l}});var i=n(398435),s=n(311822),r=n(202784),o=n.n(r),a=n(410628);let l=({email:e,exitCallback:t})=>{let n=!!e,l=(0,a.q)(),[c,d]=(0,r.useState)(!0),u=()=>{d(!1)};return o().createElement(s._X,{analyticsId:"course.content.ltiNeedsApproval",className:"react-container",open:c,onClose:u,TransitionProps:{onExited:()=>{t(),d(!0)}}},o().createElement(i.AnalyticsDialogTitle,{analyticsId:"lti.modal.needs-approval.title"},l("course.content.ltiNeedsApprovalTitle")),o().createElement(i.AnalyticsDialogContent,{analyticsId:"lti.modal.needs-approval.content"},n?o().createElement(o().Fragment,null,o().createElement(i.AnalyticsDialogContentText,{analyticsId:"lti.modal.needs-approval.content.description"},l("course.content.ltiNeedsApprovalDescription")),o().createElement(i.AnalyticsDialogContentText,{analyticsId:"lti.modal.needs-approval.content.email"},o().createElement(i.AnalyticsLink,{href:`mailto:${e}`,analyticsId:"components.services.lti.needsApproval.email.link"},e))):o().createElement(i.AnalyticsDialogContentText,{analyticsId:"lti.modal.needs-approval.content.no-email"},l("course.content.ltiNeedsApprovalDescriptionNoEmail"))),o().createElement(i.AnalyticsDialogActions,{analyticsId:"lti.modal.needs-approval.actions"},o().createElement(i.AnalyticsPrimaryButton,{analyticsId:"global.ok",onClick:u},l("global.ok"))))}},341898:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});var i=n(951248),s=n(815532),r=n(202784),o=n(273386);function a(e,t){let n=(0,o.Lx)(),a=(0,o.pJ)(e=>i.Ys.group.getGroupsLoadingStatus(e)),l=(0,o.pJ)(e=>i.Ys.group.getGroupByGroupId(e,t));return(0,r.useEffect)(()=>{""===t||(null==l?void 0:l.memberships)||a!==s.S.HasNotStarted||n(i.Nwg.group.loadGroupById(e,t))},[e,t,n,null==l?void 0:l.memberships,a]),l}},619139:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var i=n(202784);let s=e=>{let[t,n]=i.useState(e),s=(0,i.useCallback)((e,t)=>{n(n=>{let i=new URL(n);return t?i.searchParams.set(e,t):i.searchParams.delete(e),i.toString()})},[n]);return[t,s]}},144958:function(e,t,n){"use strict";n.d(t,{Ic:function(){return s.Ic},J6:function(){return l.J},Mo:function(){return s.Mo},N6:function(){return s.N6},P7:function(){return o.P},PH:function(){return a.P},Qk:function(){return s.Qk},RZ:function(){return c.R},Rl:function(){return s.Rl},SM:function(){return i.S},Xl:function(){return i.X},iW:function(){return r.iW},ku:function(){return r.ku},sq:function(){return s.sq}});var i=n(64347),s=n(417206),r=n(71744),o=n(569555),a=n(351124),l=n(245706),c=n(436103)},64347:function(e,t,n){"use strict";n.d(t,{S:function(){return s},X:function(){return i}});let i="launch_attempt",s="assessment"},71744:function(e,t,n){"use strict";n.d(t,{iW:function(){return r},ku:function(){return o}});var i=n(470269),s=n(144958);let r="ultra_return_loc";class o{static getLTILaunchReturnLocation(e){switch(e){case s.Xl:return new a;case s.SM:return new l;default:throw Error("No valid return locations found")}}}class a{getRouteName(){return i.eJ.ASSESSMENT_ATTEMPT_IMS_PROCTORING}getRouteParams(e){let{content_id:t,course_id:n,returnToProctoringToolOnEndAssessment:i,password:s}=e;return{courseId:n,contentId:t,returnToProctoringToolOnEndAssessment:i,password:s}}}class l{getRouteName(){return i.eJ.ASSESSMENT_OVERVIEW}getRouteParams(e){let t=e.content_id;return{contentId:t}}}},417206:function(e,t,n){"use strict";n.d(t,{Ic:function(){return a},Mo:function(){return d},N6:function(){return o},Qk:function(){return l},Rl:function(){return c},sq:function(){return r}});var i=n(951248),s=n(83202);let r="geolocation *; microphone *; display-capture *; camera *; midi *; encrypted-media *; fullscreen *",o=/^\/webapps\/blackboard\/execute\/blti\/launchReturn/;function a(e){let{bbFileData:t,courseId:n,contentId:r,handle:o}=e,a="string"==typeof t?JSON.parse((0,s.fixDoubleQuotesInJSONValues)(t)):t,l={courseId:n,parentContentId:r,linkType:i.GQk.parse(a.linkType),linkRefId:a.linkRefId,handle:o};return i.GQk.LtiLink.isEqualTo(a.linkType)&&(l.url=a.url,l.launchInNewWindow=a.launchInNewWindow,a.customParameters&&(l.customParameters=JSON.stringify(a.customParameters))),i.GQk.LtiLink.isEqualTo(a.linkType)&&("IFRAME"===a.target||"embedded-app"===a.bbtype)&&(l.renderAsEmbed=!0),(i.GQk.LtiPlacement.isEqualTo(a.linkType)||i.GQk.LtiLink.isEqualTo(a.linkType))&&a.linkRefUuid&&(l.linkRefUuid=a.linkRefUuid),l}function l({contentDetail:e,contentHandler:t,launchInNewWindow:n}){var s,r,o;let a;if(!t)return null;let l=null===(s=null==e?void 0:e[t.toString()])||void 0===s?void 0:s.launchLink;if(!l)return null;let c=null;return i.GQk.LtiPlacement.startsWith(t)?c=null===(r=null==e?void 0:e[t.toString()])||void 0===r?void 0:r.placement.url:i.GQk.LtiLink.isEqualTo(t)&&(c=null===(o=null==e?void 0:e[t.toString()])||void 0===o?void 0:o.url),c&&(0,i.M5E)(c)?a=null!=n&&n:(a=!0,l=(0,i.Q2d)(l,{target_override:"window"})),{link:l,launchNewWindow:a}}function c(e){if(!e)return null;let t=e.split("-")[0];return t.includes(":")?t.split(":")[1]:t}function d(e){return i.GQk.PartnerCloud.isEqualTo(e.linkType)?function({courseId:e,linkRefId:t}){let n=c(t),s=`/launch/content?provider_id=${encodeURIComponent(null!=n?n:"null")}&course_id=${encodeURIComponent(null!=e?e:"null")}&link_ref_id=${encodeURIComponent(null!=t?t:"null")}`;return(0,i.uIm)(i.vc.partnerCloudBasePath+s)}(e):i.GQk.LtiLink.isEqualTo(e.linkType)?function({linkRefId:e,linkRefUuid:t,launchInNewWindow:n,courseId:s,url:r,customParameters:o,parentContentId:a}){let l=`/webapps/blackboard/execute/blti/launchLink?cim_placement_id=${encodeURIComponent(null!=e?e:"null")}&course_id=${encodeURIComponent(null!=s?s:"null")}&url=${encodeURIComponent(null!=r?r:"null")}`,c=null;o&&(c={custom_parameters:o}),a&&(c={...c,parent_id:a}),c&&(l=(0,i.Q2d)(l,c));let d=(0,i.uIm)(l);return t&&(d=(0,i.Q2d)(d,{blti_placement_uuid:t})),!n&&r&&(0,i.M5E)(r)||(d=(0,i.Q2d)(d,{target_override:"window"})),d}(e):i.GQk.LtiPlacement.isEqualTo(e.linkType)?(null==e?void 0:e.handle)?function({handle:e,courseId:t,customParameters:n}){let s=(0,i.Q2d)("/webapps/blackboard/execute/blti/launchPlacement",{handle:e,course_id:t,custom_parameters:n});return(0,i.uIm)(s)}(e):function({courseId:e,linkRefId:t,parentContentId:n,linkRefUuid:s}){let r=`/webapps/blackboard/execute/blti/launchPlacement?blti_placement_id=${encodeURIComponent(null!=t?t:"null")}&course_id=${encodeURIComponent(null!=e?e:"null")}`;n&&(r=(0,i.Q2d)(r,{parent_id:n}));let o=(0,i.uIm)(r);return s&&(o=(0,i.Q2d)(o,{blti_placement_uuid:s})),o}(e):""}},569555:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});let i=new class{constructor(){this.capabilitiesMessageListener=e=>{"org.imsglobal.lti.capabilities"===e.data.subject&&this.handleCapabilities(e)}}handleCapabilities(e){let t="lti_storage_frame",n={message_id:e.data.message_id,subject:"org.imsglobal.lti.capabilities.response",supported_messages:[{subject:"org.imsglobal.lti.capabilities"},{subject:"org.imsglobal.lti.get_data",frame:t},{subject:"org.imsglobal.lti.put_data",frame:t}]};!e.source||e.source instanceof MessagePort||e.source instanceof ServiceWorker||e.source.postMessage(n,e.origin)}init(e){e.addEventListener("message",this.capabilitiesMessageListener,!1)}}},758546:function(e,t,n){"use strict";n.d(t,{K3:function(){return l},Cm:function(){return v},q7:function(){return b}});var i={};n.r(i),n.d(i,{DEFAULT_RESERVED_WORDS:function(){return d},attachContentChangeListener:function(){return c},enableReservedWords:function(){return p},setReservedWords:function(){return m}});var s=n(202784),r=n(597901),o=n(484514),a=n(228357);let l=({apiBasePath:e,className:t,locale:n,initialMathML:i,isRtl:l,onError:c,onLoad:d})=>{let u=s.useRef(null),{initError:p,isReady:m,wirisEditorInstance:h}=(0,r.t)(u,e,i,n),g=(0,o.y)();return s.useEffect(()=>{h&&m&&d(h)},[h]),s.useEffect(()=>{p&&c(p)},[p]),s.createElement(a.Q,{theme:"light",isRtl:l},s.createElement("div",{className:`${g.mathEditor} math-editor ${t||""}`,ref:u}))};function c(e,t){let n={caretPositionChanged:e=>{},clipboardChanged:e=>{},contentChanged:e=>{t(e.getMathML())},styleChanged:e=>{},transformationReceived:e=>{}};return e.getEditorModel().addEditorListener(n),n}l.displayName="MathEditor";let d=["sin","cos","tan","asin","acos","atan","csc","sec","cot","log","exp","ln","round","e","&#960;"],u={reservedWordsColor:"#006fcb",forceReservedWords:"true",grammarResource:"grammar_eval_content.txt",reservedWords:d.join(",")};function p(e){e.setParams(u)}function m(e,t){e.setParams({reservedWords:[...d,...t].join(",")})}var h=n(188391),g=n.n(h);function f(e){let t=e;return e&&0>e.indexOf("//")&&("/"!==e[0]&&(t=`/${e}`),t=window.location.origin+e),t}class b{constructor({courseId:e,apiBasePath:t,locale:n,xsrfToken:i}){this.waitForLoaded=(e,t)=>{b.isWirisPluginsLoaded?(clearInterval(b.interval),b.interval=void 0,e()):void 0===b.interval?(b.retry=3,b.interval=setInterval(this.waitForLoaded,500,e,t)):void 0!==b.interval&&(b.retry>0?b.retry-=1:(clearInterval(b.interval),b.interval=void 0,t()))},this.courseId=e,this.apiBasePath=t,this.locale=n,this.xsrfToken=i}static get isWirisPluginsLoaded(){var e,t,n;let i=window;return!!(null===(n=null===(t=null===(e=i.com)||void 0===e?void 0:e.wiris)||void 0===t?void 0:t.js)||void 0===n?void 0:n.JsPluginViewer)}async load(){if(b.isWirisPluginsLoaded)return this.getInstance(this.locale);let e=await this.getConfiguration(),t=`${e.contextPath}app/WIRISplugins.js?viewer=image&lang=${this.locale}&async=true`;return this.loadWirisPlugins(t,this.locale)}parseElement(e){return new Promise((t,n)=>{this.load().then(n=>{let i=e.getElementsByTagName("math"),s=Array.from(i);if(0===s.length)return t(void 0);let r=0;n.replaceNodes(s,0,!0,()=>{(r+=1)===s.length&&t(void 0)})}).catch(n)})}async getImageMetadataFromMathML(e){let t=document.createElement("span");"string"==typeof e?t.innerHTML=e:t.appendChild(e);let n=t.innerHTML;await this.parseElement(t);let i=t.getElementsByTagName("img")[0];return{dataMathML:n,src:i.src,alt:i.alt}}latexToMathml(e){let t=new URLSearchParams({service:"latex2mathml",latex:e}),n=f("/webapps/vtbe-tinymce/app/service");return new Promise((i,s)=>{fetch(n,{method:"POST",headers:{...this.xsrfToken?{"X-Blackboard-XSRF":this.xsrfToken}:null},body:t}).then(e=>e.json()).then(t=>{var n;let s=document.createElement("div");s.innerHTML="ok"===t.status?t.result.text:"";let r=null!==(n=s.firstElementChild)&&void 0!==n?n:document.createElement("math"),o=document.createElement("semantics"),a=document.createElement("annotation");return a.setAttribute("encoding","LaTeX"),a.textContent=e.replace(/^\${2}/,"").replace(/\${2}$/,""),o.innerHTML=r.innerHTML,o.appendChild(a),r.innerHTML=o.outerHTML,i(r.outerHTML)}).catch(()=>s())})}hasLatex(e){let t;t=e instanceof Node?e.nodeValue||"":e;let n=t.indexOf("$$");if(-1===n)return!1;let i=t.indexOf("$$",n+2);return!(-1===i||t.substring(n+2,i).indexOf("\n")>-1)}getNextLatexPos(e,t){let n=t.indexOf("$$",e);if(-1===n)return null;let i=t.indexOf("$$",n+2);return -1===i?null:{start:n,end:i}}getConfiguration(){if(b.configurationPromise)return b.configurationPromise;let e=this.courseId?`/courses/${this.courseId}`:"",t=f(`${this.apiBasePath}/v1${e}/editor/v4/configurations`);return b.configurationPromise=fetch(t,{method:"GET",headers:{...this.xsrfToken?{"X-Blackboard-XSRF":this.xsrfToken}:null}}).then(e=>e.json()),b.configurationPromise.catch(()=>{b.configurationPromise=void 0}),b.configurationPromise}waitForLoadedPromise(){return new Promise((e,t)=>{b.retry=3,this.waitForLoaded(()=>e(void 0),()=>t(Error("WIRISplugins.js was not loaded")))})}loadWirisPlugins(e,t){return b.wirisPluginsPromise||(b.wirisPluginsPromise=new Promise((n,i)=>{g()(e,()=>{this.waitForLoadedPromise().then(()=>n(this.getInstance(t))).catch(i)})}),b.wirisPluginsPromise.catch(()=>{b.configurationPromise=void 0,b.wirisPluginsPromise=void 0})),b.wirisPluginsPromise}getInstance(e){var t,n,i;let s=window,r=null!==(i=null===(n=null===(t=null==document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.lang)&&void 0!==i?i:"en";return s.com.wiris.js.JsPluginViewer.lang=e||r,s.com.wiris.js.JsPluginViewer}}let v=i},553493:function(e,t,n){"use strict";var i,s;n.d(t,{e$:function(){return r},or:function(){return l}});let r="audio/webm; codecs=opus";(s=i||(i={})).Inactive="inactive",s.Recording="recording",s.Paused="paused";class o{constructor(){this.currentRecordingSession=null,this.mediaRecorder=null,this.mediaStream=null,this.autoStop=null}static getInstance(){return o.instance||(o.instance=new o),this.instance}static getBlobOptionsFromRecorderOptions(e){return{type:null==e?void 0:e.mimeType}}get recordingState(){var e;return(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)||i.Inactive}get isRecording(){return this.recordingState===i.Recording}isCurrentRecordingSession(e){return null!==this.currentRecordingSession&&this.currentRecordingSession===e}async enableRecording(e){if(this.isRecording)throw Error("Recording in progress");try{this.mediaStream=await navigator.mediaDevices.getUserMedia(e.streamConstraints),this.currentRecordingSession=e;return}catch(e){throw Error("Unable to start recording")}}async startRecording(e){if(this.isRecording)throw Error("Recording in progress");return this.mediaStream&&this.isCurrentRecordingSession(e)||await this.enableRecording(e),this.mediaRecorder=new MediaRecorder(this.mediaStream,this.currentRecordingSession.recorderOptions),this.mediaRecorder.start(),this.configureAutoStop(e),this.recordingState}async stopRecording(e){if(!this.isRecording)throw Error("No recording in progress");if(!this.isCurrentRecordingSession(e))throw Error("Cannot stop non-respective recording");let{currentRecordingSession:t,mediaRecorder:n}=this,{onRecordingComplete:i,recorderOptions:s}=t,r=new Promise(e=>{let t=o.getBlobOptionsFromRecorderOptions(s);n.ondataavailable=({data:n})=>{e(new Blob([n],t))}}),a=new Promise(e=>{n.onstop=()=>{this.mediaStream&&this.mediaStream.getTracks().forEach(e=>{e.stop()}),e()}});return n.stop(),await Promise.all([r,a]).then(([e])=>{i(e),this.currentRecordingSession=null}),this.autoStop&&clearTimeout(this.autoStop),this.recordingState}async toggleRecording(e){return this.isRecording?this.stopRecording(e):this.startRecording(e)}configureAutoStop(e){var t,n;let i=null===(n=null===(t=this.currentRecordingSession)||void 0===t?void 0:t.recordingOptions)||void 0===n?void 0:n.maxDuration;i&&(this.autoStop=setTimeout(()=>{this.isCurrentRecordingSession(e)&&this.stopRecording(this.currentRecordingSession)},i))}}class a{constructor(e,t,n,i){this.recorder=o.getInstance(),this.onRecordingComplete=e,this.recorderOptions=t,this.streamConstraints=n,this.recordingOptions=i||{},this.onRecordToggle=this.onRecordToggle.bind(this),this.onRecordStart=this.onRecordStart.bind(this),this.onRecordStop=this.onRecordStop.bind(this)}async onEnableRecording(){return this.recorder.enableRecording(this)}async onRecordStart(){return this.recorder.startRecording(this)}async onRecordStop(){return this.recorder.stopRecording(this)}async onRecordToggle(){return this.recorder.toggleRecording(this)}}class l extends a{constructor(e){super(e,{mimeType:r},{audio:!0,video:!1},{maxDuration:2e4})}}},776517:function(e,t,n){"use strict";n.d(t,{tw:function(){return m},rJ:function(){return h},Cs:function(){return u},I8:function(){return d},Pl:function(){return p},GS:function(){return P},Nw:function(){return B},zb:function(){return w},qK:function(){return L},YO:function(){return N},Dd:function(){return I},sA:function(){return D},ku:function(){return O},Rw:function(){return T},Db:function(){return A}});var i,s,r,o,a,l,c,d,u,p,m,h,g=n(313330),f=n(198022);(i=c||(c={})).QuestionGoalAlignmentForStudent="question-goal-alignment-for-student",i.AssessmentSubmissionFeedback="assessment-submission-feedback",i.AssessmentSubmissionFeedbackTab="assessment-submission-feedback-tab",i.RubricEvaluation="rubric-evaluation",i.RubricView="rubric-view",i.Collab="collab",i.DiscussionParticipants="discussion-participants",i.SubmissionList="submission-list",i.DiscussionFeedback="discussion-feedback",i.JournalSetting="journal-settings",i.JournalDetail="journal-details",i.JournalParticipationDetail="journal-participation-detail",i.Roster="roster",i.EnrolUsers="enroll-users",i.EditEnrollment="edit-enrollment",i.Description="description",i.GroupSetList="group-set-list",i.GroupSetDetail="group-set-detail",i.CourseEditBanner="course-edit-banner",i.Attendance="attendance",i.AttendanceSettings="attendance-settings",i.AttendanceStudentRecords="attendance-student-records",i.AnnouncementDetail="announcement-detail",i.AnnouncementList="announcement-list",i.BooksAndTools="books-and-tools",i.ContentMarket="content-market",i.QuestionBanks="question-banks",i.ClassSchedule="class-schedule",i.CourseMessages="course.messages",i.CreateMessage="create-message",i.CourseCalendar="course.calendar",i.CourseCalendarCreateEvent="event-create",i.CourseCalendarEditEvent="event-edit",i.CourseCalendarOfficeHours="office-hours",i.DiscussionsSettings="discussions-settings",i.DiscussionSettings="discussion-settings",i.DiscussionTelemetry="telemetryDiscussionForumInsights",i.NewMessage="message",i.CreateFolder="content-manage.create.folder",i.CreateContent="content-manage.create",i.CourseGroup="course-group",i.AdminAnnouncement="announcement",i.PerAssessmentSettings="per-assessment-settings",i.PerAssessmentGroupSettings="per-assessment-group-settings",i.AssessmentSettings="assessment-settings",i.SubmissionGrading="submission-grading",i.AssessmentSubmissionGradingFeedbackTab="submission-grading.assessment-submission-feedback-tab",i.GradesBulkDownload="grades-bulk-download",i.QuestionGoalAlignmentForInstructor="question-goal-alignment",i.GoalPickerLegacy="goal-picker-legacy",i.CourseGradesAccommodations="accommodation",i.ContentCopy="content-manage.copy",i.BulkEditContent="bulk-edit-content",i.ImportContent="content-manage.import",i.Exports="exports",i.ContentCollection="content-collection",i.ContentCollectionSettings="content-collection-settings",i.ContentCollectionPicker="content-collection-picker",i.CourseGradesAddItem="grade-item.create",i.CourseGradesAddItemCalculation="gradebook-item.calculation",i.CourseGradesViewIndividualGrade="view-individual-grades",i.QuestionAnalysisReport="question-analysis.report",i.QuestionAnalysis="course.analytics.question-analysis",i.QuestionAnalyticsScorm="course.analytics.scorm-reports",i.CourseQuestionAnalysisReport="course.analytics.question-analysis.peek.question-analysis.report",i.EventEdit="event-edit",i.ActivityStream="base.recentActivity",i.CourseTimeline="base.courses",i.Document="content-manage.edit.document",i.CourseOutline="course.outline",i.CourseGrades="course.grades",i.Journal="journal.view.with-participation",i.AssessmentInst="gradebook-item.assessment",i.Discussion="discussion.view.with-grading",i.GradedScormInst="gradebook-item.scorm-submissions",i.CourseMessageList="course.messages",i.CourseMessage="edit-message",i.StudentActivity="telemetryContentActivityInDetail",i.CreateLink="content-manage.create.link",i.LTILaunchLink="lti.launch-frame",i.CreateLTI="content-manage.create.lti",i.ScormSettings="scorm-settings",i.PreviewScorm="scorm-launch-frame",i.DiscussionBoard="course.engagement",i.ScormAnalysisReport="scorm-analytics-report",i.PartnerTool="partner-tool.tool",i.EditFolder="content-manage.edit.folder",i.EditLTI="content-manage.edit.lti",i.EditPlacement="content-manage.edit.placement",i.DocumentSettings="document-settings",i.Tools="base.tools",i.Messages="base.messages",i.ReleaseCondition="conditional-release",i.GradeBookOverAllGrade="gradebook-item.overall-grade",i.CourseGroupEnroll="course-group-enroll",i.AttendanceStudentView="attendance-student-view",i.StudentScormOverview="scorm-overview.student",i.AssessmentOverview="assessment.overview",i.AssessmentOverviewAttempt="assessment.overview.attempt",i.AssessmentDetails="assessment-details",i.AssessmentAttemptSubmissionFeedback="assessment.overview.attempt.review.assessment-submission-feedback-tab",i.AssessmentOverviewAttemptReviewInlineRubrics="assessment.overview.attempt.review.inline-rubric",i.GradeAndFeedback="grade-and-feedback",i.OverallGradeSettings="overall-grade-settings",i.InstitutionAdminPage="base.institution-page-admin",i.InstitutionPage="base.institution-page",i.BrandDetail="brand-detail",i.CreateModule="createModule",i.EditModule="editModule",i.BrowserSettings="browserSettings",i.IpContentCollection="contentCollection",i.GradeSettings="grade-setting",i.EditIpLinkImage="linkImage",i.IpViewLinks="allLinks",i.IpColorSelection="colorSelection",i.GradeDownloadSettings="grade-download-setting",i.MultipleAttemptGrading="multiple-attempt-grading",i.EditFileSettings="edit-file-settings",i.ContentManageCreateDocument="content-manage.create.document",i.DownloadTestResults="download-test-results",i.AssessmentOverviewMultipleAttempt="assessment.overview.multiple-attempt",i.AssessmentOverviewAttemptReview="assessment.overview.attempt.review",i.DiscussionDetails="discussion-details",i.OverallGrade="overall-grade-student",i.GradeUpload="grade-upload-setting",i.GradeSubmissionReceipt="attempt-receipt-search",i.CourseSettings="course-settings",i.CourseActivityAnalytics="course.analytics.course-activity",i.TelemetryAlertSettings="telemetry-settings",(s=d||(d={})).OpenAttempt="OPEN_ATTEMPT",s.OpenDocument="OPEN_DOCUMENT",s.ReviewAttempt="REVIEW_ATTEMPT",s.ReviewFeedback="REVIEW_FEEDBACK",s.PreviewAssessment="PREVIEW_ASSESSMENT",s.CollabRecordingPreview="COLLAB_RECORDING_PREVIEW",s.CollabManageSession="COLLAB_MANAGE_SESSION",s.OpenCourse="OPEN_COURSE",s.OpenDiscussion="OPEN_DISCUSSION",s.OpenGroupDiscussion="OPEN_GROUP_DISCUSSION",s.OpenJournal="OPEN_JOURNAL",s.OpenAssessment="OPEN_ASSESSMENT",s.OpenAssessmentInstView="OPEN_ASSESSMENT_INST_VIEW",s.OpenAssessmentSubmissionView="OPEN_ASSESSMENT_SUBMISSION_VIEW",s.OpenCourseAnnouncement="OPEN_COURSE_ANNOUNCEMENT",s.OpenAdminAnnouncement="OPEN_ADMIN_ANNOUNCEMENT",s.OpenCourseMessage="OPEN_COURSE_MESSAGE",s.OpenGradeBook="OPEN_GRADEBOOK",s.OpenCalendar="OPEN_CALENDAR",s.OpenGradedSCORM="OPEN_GRADED_SCORM",s.OpenInstViewGradedSCORM="OPEN_GRADED_SCORM_INST_VIEW",s.OpenTimeline="OPEN_TIMELINE",s.OpenPersonalEvent="OPEN_PERSONAL_EVENT",s.OpenCalendarEvent="OPEN_CALENDAR_EVENT",s.OpenTools="OPEN_TOOLS",s.OpenCreateMessages="OPEN_CREATE_MESSAGES",s.OpenCourseMessagesList="OPEN_MESSAGES_LIST",s.OpenInstitutionPage="OPEN_INSTITUTION_PAGE",s.OpenAdminInstitutionPage="OPEN_ADMIN_INSTITUTION_PAGE",s.OpenJournalParticipantsGrades="OPEN_JOURNAL_GRADE_PARTICIPANTS",s.OpenViewGradesOfflinePage="OPEN_VIEW_GRADES_OFFLINE_PAGE",s.OpenViewGradesAssessmentsPage="OPEN_VIEW_GRADES_ASSESSMENT_PAGE",s.OpenScormGradesPage="OPEN_SCORM_GRADES_PAGE",s.OpenDiscussionGradePage="OPEN_DISCUSSION_GRADE_PAGE",s.OpenAttendancePage="OPEN_ATTENDANCE_PAGE",s.OpenCalendarAssessmentPage="OPEN_CALENDAR_ASSESSMENT_PAGE",s.OpenCalendarDiscussionPage="OPEN_CALENDAR_DISCUSSION_PAGE",s.OpenCalendarJournalPage="OPEN_CALENDAR_JOURNAL_PAGE",s.OpenCalendarScormPage="OPEN_CALENDAR_SCORM_PAGE",s.OpenStudentCalendarAssessmentPage="OPEN_STUDENT_CALENDAR_ASSESSMENT_PAGE",s.OpenStudentCalendarScormPage="OPEN_STUDENT_CALENDAR_SCORM_PAGE",s.OpenStudentDiscusssionPage="OPEN_STUDENT_DISCUSSION_PAGE",(r=u||(u={})).AttemptSaveAndClosed="ATTEMPT_SAVE_AND_CLOSED",r.AttemptSubmitted="ATTEMPT_SUBMITTED",r.AttemptFeedbackOpened="ATTEMPT_FEEDBACK_OPENED",r.AttemptRubricOpened="ATTEMPT_RUBRIC_OPENED",r.AttemptGoalAlignmentOpened="ATTEMPT_GOAL_ALIGNMENT_OPENED",r.AttemptFeedbackClosed="ATTEMPT_FEEDBACK_CLOSED",r.AttemptRubricClosed="ATTEMPT_RUBRIC_CLOSED",r.AttemptGoalAlignmentClosed="ATTEMPT_GOAL_ALIGNMENT_CLOSED",r.AttemptOpened="ATTEMPT_OPENED",r.AttemptReviewOpened="ATTEMPT_REVIEW_OPENED",r.DocumentOpened="DOCUMENT_OPENED",r.DocumentClosed="DOCUMENT_CLOSED",r.LoadDocument="LOAD_DOCUMENT",r.AssessementPreviewOpened="ASSESSMENT_PREVIEW_OPENED",r.CollabClosed="COLLAB_CLOSED",r.CollabRoomSettingsOpened="COLLAB_ROOM_SETTINGS_OPENED",r.CollabRoomSettingsClosed="COLLAB_ROOM_SETTINGS_CLOSED",r.CollabViewRoomReportOpened="COLLAB_ROOM_VIEW_REPORT_OPENED",r.CollabViewRoomReportClosed="COLLAB_ROOM_VIEW_REPORT_CLOSED",r.CollabManageSessionOpened="COLLAB_MANAGE_SESSION_OPENED",r.CollabSessionOpened="COLLAB_SESSION_OPENED",r.CollabSessionClosed="COLLAB_SESSION_CLOSED",r.CollabRecordingsOpened="COLLAB_RECORDING_OPENED",r.CourseSettingsPanelOpened="COURSE_SETTINGS_PANEL_OPENED",r.CourseSettingsPanelClosed="COURSE_SETTINGS_PANEL_CLOSED",r.CourseActivityAnalyticsOpened="COURSE_ACTIVITY_ANALYTICS_OPENED",r.CourseAnalyticsPremiumReportsOpened="COURSE_ANALYTICS_PREMIUM_REPORTS_OPENED",r.DiscussionOpened="DISCUSSION_OPENED",r.DiscussionClosed="DISCUSSION_CLOSED",r.DiscussionParticipantsOpened="DISCUSSION_PARTICIPANTS_OPENED",r.DiscussionParticipantsClosed="DISCUSSION_PARTICIPANTS_CLOSED",r.DiscussionGradesParticipationOpened="DISCUSSION_GRADES_PARTICIPATION_OPENED",r.DiscussionGradesParticipationClosed="DISCUSSION_GRADES_PARTICIPATION_CLOSED",r.SubmissionListOpened="SUBMISSION_LIST_OPENED",r.SubmissionListClosed="SUBMISSION_LIST_CLOSED",r.DiscussionFeedbackOpened="DISCUSSION_FEEDBACK_OPENED",r.DiscussionFeedbackClosed="DISCUSSION_FEEDBACK_CLOSED",r.JournalOpened="JOURNAL_OPENED",r.JournalClosed="JOURNAL_CLOSED",r.JournalSettingsOpened="JOURNAL_SETTINGS_OPENED",r.JournalSettingsClosed="JOURNAL_SETTINGS_CLOSED",r.JournalDetailsOpened="JOURNAL_DETAILS_OPENED",r.JournalDetailsClosed="JORNRAL_DETAILS_CLOSED",r.JournalParticipationDetailOpened="JOURNAL_PARTICIPATION_DETAIL_OPENED",r.JournalParticipationDetailClosed="JOURNAL_PARTICIPATION_DETAIL_CLOSED",r.AssessmentOpened="ASSESSMENT_OPENED",r.AssessmentClosed="ASSESSMENT_CLOSED",r.EditAssignmentOpened="EDIT_ASSIGNMENT_OPENED",r.EditTestOpened="EDIT_TEST_OPENED",r.EditExamOpened="EDIT_EXAM_OPENED",r.EditHomeworkOpened="EDIT_HOMEWORK_OPENED",r.EditPresentationOpened="EDIT_PRESENTATION_OPENED",r.EditQuizOpened="EDIT_QUIZ_OPENED",r.CreateAssignmentOpened="CREATE_ASSIGNMENT_OPENED",r.CreateTestOpened="CREATE_TEST_OPENED",r.AssessmentOverviewOpened="ASSESSMENT_OVERVIEW_OPENED",r.AssessmentDetailOpened="ASSESSMENT_DETAIL_OPENED",r.FolderOpened="FOLDER_OPENED",r.LearningModuleOpened="LEARNING_MODULE_OPENED",r.CourseContentOpened="COURSE_CONTENT_OPENED",r.CourseContentClosed="COURSE_CONTENT_CLOSED",r.DiscussionBoardOpened="DISCUSSION_BOARD_OPENED",r.DiscussionBoardClosed="DISCUSSION_BOARD_CLOSED",r.RosterOpened="ROSTER_OPENED",r.RosterClosed="ROSTER_CLOSED",r.EnrollUsersOpened="ENROL_USERS_OPENED",r.EnrollUsersClosed="ENROL_USERS_CLOSED",r.EditEnrollmentOpened="EDIT_ENROLLMENT_OPENED",r.EditEnrollmentClosed="EDIT_ENROLLMENT_CLOSED",r.DescriptionOpened="DESCRIPTION_OPENED",r.DescriptionClosed="DESCRIPTION_CLOSED",r.GroupSetDetailOpened="GROUP_SET_DETAIL_OPENED",r.GroupSetDetailClosed="GROUP_SET_DETAIL_CLOSED",r.GroupSetListOpened="GROUP_SET_LIST_OPENED",r.GroupSetListClosed="GROUP_SET_LIST_CLOSED",r.CourseEditBannerOpened="COURSE_EDIT_BANNER_OPENED",r.CourseEditBannerClosed="COURSE_EDIT_BANNER_CLOSED",r.AttendanceOpened="ATTENDANCE_OPENED",r.AttendanceClosed="ATTENDANCE_CLOSED",r.AttendanceSettingsOpened="ATTENDANCE_SETTINGS_OPENED",r.AttendanceSettingsClosed="ATTENDANCE_SETTINGS_CLOSED",r.AttendanceStudentRecordsOpened="ATTENDANCE_STUDENT_RECORDS_OPENED",r.AttendanceStudentRecordsClosed="ATTENDANCE_STUDENT_RECORDS_CLOSED",r.AnnouncementDetailOpened="ANNOUNCEMENT_DETAIL_OPENED",r.AnnouncementDetailClosed="ANNOUNCEMENT_DETAIL_CLOSED",r.AnnouncementListOpened="ANNOUNCEMENT_LIST_OPENED",r.AnnouncementListClosed="ANNOUNCEMENT_LIST_CLOSED",r.BooksAndToolsOpened="BOOKS_AND_TOOLS_OPENED",r.BooksAndToolsClosed="BOOKS_AND_TOOLS_CLOSED",r.ContentMarketOpened="CONTENT_MARKET_OPENED",r.ContentMarketClosed="CONTENT_MARKET_CLOSED",r.QuestionBanksOpened="QUESTION_BANKS_OPENED",r.QuestionBanksClosed="QUESTION_BANKS_CLOSED",r.ClassScheduleOpened="CLASS_SCHEDULE_OPENED",r.ClassScheduleClosed="CLASS_SCHEDULE_CLOSED",r.TimelineOpened="TIMELINE_OPENED",r.CourseMessageOpened="COURSE_MESSAGE_OPENED",r.CourseMessageListOpened="COURSE_MESSAGE_LIST_OPENED",r.CourseMessageListClosed="COURSE_MESSAGE_LIST_CLOSED",r.CreateMessageOpened="CREATE_MESSAGE_OPENED",r.CreateMessageClosed="CREATE_MESSAGE_CLOSED",r.CourseActivityAnalyticsClosed="COURSE_ACTIVITY_ANALYTICS_CLOSED",r.AlertSettingsOpened="ANALYTICS_ALERT_SETTINGS_OPENED",r.AlertSettingsClosed="ANALYTICS_ALERT_SETTINGS_CLOSED",r.CourseCalendarOpened="COURSE_CALENDAR_OPENED",r.CourseCalendarClosed="COURSE_CALENDAR_CLOSED",r.CourseCalendarCreateNewEventOpened="COURSE_CALENDAR_CREATE_NEW_EVENT_OPENED",r.CourseCalendarCreateNewEventClosed="COURSE_CALENDAR_CREATE_NEW_EVENT_CLOSED",r.CourseCalendarOfficeHoursOpened="COURSE_CALENDAR_ADD_OFFICE_HOURS_OPENED",r.CourseCalendarOfficeHoursClosed="COURSE_CALENDAR_ADD_OFFICE_HOURS_CLOSED",r.CourseCalendarEditEventOpened="COURSE_CALENDAR_EDIT_EVENT_OPENED",r.CourseCalendarEditEventClosed="COURSE_CALENDAR_EDIT_EVENT_CLOSED",r.DiscussionsSettingsOpened="DISCUSSIONS_SETTINGS_OPENED",r.DiscussionsSettingsClosed="DISCUSSIONS_SETTINGS_CLOSED",r.DiscussionSettingsOpened="DISCUSSION_SETTINGS_OPENED",r.DiscussionSettingsClosed="DISCUSSION_SETTINGS_CLOSED",r.DiscussionTelemetryOpened="DISCUSSION_TELEMETRY_OPENED",r.DiscussionTelemetryClosed="DISCUSSION_TELEMETRY_CLOSED",r.NewMessagePanelOpened="NEW_MESSAGE_PANEL_OPENED",r.NewMessagePanelClosed="NEW_MESSAGE_PANEL_CLOSED",r.NewFolderPanelOpened="NEW_FOLDER_PANEL_OPENED",r.NewFolderPanelClosed="NEW_FOLDER_PANEL_CLOSED",r.NewDiscussionCreationPanelOpened="NEW_DISCUSSION_CREATION_PANEL_OPENED",r.NewDiscussionCreationPanelClosed="NEW_DISCUSSION_CREATION_PANEL_CLOSED",r.NewDiscussionCreated="NEW_DISCUSSION_CREATED",r.NewContentItemPanelOpened="NEW_CONTENT_ITEM_PANEL_OPENED",r.NewContentItemPanelClosed="NEW_CONTENT_ITEM_PANEL_CLOSED",r.CourseGroupOpened="COURSE_GROUP_OPENED",r.CourseGroupClosed="COURSE_GROUP_CLOSED",r.CreateJournalContentOpened="CREATE_JOURNAL_CONTENT_OPENED",r.JournalSavePrompt="JOURNAL_SAVE_PROMPT",r.AdminAnnouncementOpened="ADMIN_ANNOUNCEMENT_OPENED",r.AdminAnnouncementClosed="ADMIN_ANNOUNCEMENT_CLOSED",r.PerAssessmentSettingsOpened="PER_ASSESSMENT_SETTINGS_OPENED",r.PerAssessmentSettingsClosed="PER_ASSESSMENT_SETTINGS_CLOSED",r.PerAssessmentGroupSettingsOpened="PER_ASSESSMENT_GROUP_SETTINGS_OPENED",r.PerAssessmentGroupSettingsClosed="PER_ASSESSMENT_GROUP_SETTINGS_CLOSED",r.AssessmentSettingsOpened="ASSESSMENT_SETTINGS_OPENED",r.AssessmentSettingsClosed="ASSESSMENT_SETTINGS_CLOSED",r.SubmissionGradingOpened="SUBMISSION_GRADING_OPENED",r.SubmissionGradingClosed="SUBMISSION_GRADING_CLOSED",r.SubmissionGradingFeedbackTabOpened="SUBMISSION_GRADING_FEEDBACK_TAB_OPENED",r.SubmissionGradingFeedbackTabClosed="SUBMISSION_GRADING_FEEDBACK_TAB_CLOSED",r.GradesBulkDownloadOpened="GRADES_BULK_DOWNLOAD_OPENED",r.GradesBulkDownloadClosed="GRADES_BULK_DOWNLOAD_CLOSED",r.QuestionGoalAlignmentForInstructorOpened="QUESTION_GOAL_ALIGNMENT_INST_OPENED",r.QuestionGoalAlignmentForInstructorClosed="QUESTION_GOAL_ALIGNMENT_INST_CLOSED",r.GoalPickerLegacyOpened="GOAL_PICKER_LEGACY_OPENED",r.GoalPickerLegacyClosed="GOAL_PICKER_LEGACY_CLOSED",r.CourseGradeOpened="COURSE_GRADE_OPENED",r.CourseGradeClosed="COURSE_GRADE_CLOSED",r.CourseGradeAccommodationOpened="COURSE_GRADE_ACCOMMODATION_OPENED",r.CourseGradeAccommodationClosed="COURSE_GRADE_ACCOMMODATION_CLOSED",r.CourseGradesOverallGradeSetupOpened="COURSE_GRADE_OVERALL_GRADE_SETUP_OPENED",r.CourseGradesOverallGradeSetupClosed="COURSE_GRADE_OVERALL_GRADE_SETUP_CLOSED",r.CourseGradesAddItemOpened="COURSE_GRADE_ADD_ITEM_OPENED",r.CourseGradesAddItemClosed="COURSE_GRADE_ADD_ITEM_CLOSES",r.CourseGradesAddItemCalculationOpened="COURSE_GRADE_ADD_ITEM_CALCULATION_OPENED",r.CourseGradesAddItemCalculationClosed="COURSE_GRADE_ADD_ITEM_CALCULATION_CLOSED",r.CourseGradesIndividualGradeOpened="COURSE_GRADE_VIEW_INDIVIDUAL_GRADE_OPENED",r.CourseGradesIndividualGradeClosed="COURSE_GRADE_VIEW_INDIVIDUAL_GRADE_CLOSED",r.ContentCopyPanelOpened="CONTENT_COPY_PANEL_OPENED",r.ContentCopyPanelClosed="CONTENT_COPY_PANEL_CLOSED",r.BulkEditContentPanelOpened="BULK_EDIT_CONTENT_PANEL_OPENED",r.BulkEditContentPanelClosed="BULK_EDIT_CONTENT_PANEL_CLOSED",r.ImportContentPanelOpened="IMPORT_CONTENT_PANEL_OPENED",r.ImportContentPanelClosed="IMPORT_CONTENT_PANEL_CLOSED",r.ExportsPanelOpened="EXPORTS_PANEL_OPENED",r.ExportsPanelClosed="EXPORTS_PANEL_CLOSED",r.ContentCollectionPanelOpened="CONTENT_COLLECTION_PANEL_OPENED",r.ContentCollectionSettingOpened="CONTENT_COLLECTION_SETTINGS_OPENED",r.ContentCollectionSettingClosed="CONTENT_COLLECTION_SETTINGS_CLOSED",r.ContentCollectionPickerOpened="CONTENT_COLLECTION_PICKER_OPENED",r.ContentCollectionPickerClosed="CONTENT_COLLECTION_PICKER_CLOSED",r.FileOpened="FILE_OPENED",r.LinkOpened="LINK_OPENED",r.LTILaunched="LTI_LAUNCHED",r.QuestionAnalysisReportOpened="QUESTION_ANALYSIS_REPORT_OPENED",r.QuestionAnalysisReportClosed="QUESTION_ANALYSIS_REPORT_CLOSED",r.QuestionAnalysisOpened="QUESTION_ANALYSIS_OPENED",r.QuestionAnalysisClosed="QUESTION_ANALYSIS_CLOSED",r.QuestionAnalyticsScormReportOpened="QUESTION_ANALYTICS_SCORM_REPORT_OPENED",r.QuestionAnalyticsScormReportClosed="QUESTION_ANALYTICS_SCORM_REPORT_CLOSED",r.CourseQuestionAnalysisReportOpened="COURSE_QUESTION_ANALYSIS_REPORT_OPENED",r.CourseQuestionAnalysisReportClosed="COURSE_QUESTION_ANALYSIS_REPORT_CLOSED",r.PersonalEventOpened="PERSONAL_EVENT_OPENED",r.PersonalEventClosed="PERSONAL_EVENT_CLOSED",r.StudentActivityOpened="STUDENT_ACTIVITY_OPENED",r.StudentActivityClosed="STUDENT_ACTIVITY_CLOSED",r.ProgressTrackerOpened="PROGRESS_TRACKER_OPENED",r.ProgressTrackerClosed="PROGRESS_TRACKER_CLOSED",r.CancelClicked="CANCEL_CLICKED",r.ModelDismissed="MODEL_DISMISSED",r.CreateLinkPanelOpened="CREATE_LINK_PANEL_OPENED",r.CreateLinkPanelClosed="CREATE_LINK_PANEL_CLOSED",r.LTILinkOpened="LTI_LINK_OPENED",r.CreateLTIPanelOpened="CREATE_LTI_PANEL_OPENED",r.CreateLTIPanelClosed="CREATE_LTI_PANEL_CLOSED",r.ScormSettingsOpened="SCORM_SETTINGS_OPENED",r.ScormSettingsClosed="SCORM_SETTINGS_CLOSED",r.ScormFileUploaderOpened="SCORM_FILE_UPLOADED_OPENED",r.ScormSettingsOrFileUploaderOpened="SCORM_SETTINGS_OR_FILE_UPLOADER_OPENED",r.PreviewScormOpened="PREVIEW_SCORM_OPENED",r.PreviewScormClosed="PREVIEW_SCORM_CLOSED",r.GradedScormInstOpened="SCORM_SUBMISSIONS_OPENED",r.GradedScormInstClosed="SCORM_SUBMISSIONS_CLOSED",r.OfflineGradeOpened="OFFLINE_GRADES_OPENED",r.EditGradeItemOpened="EDIT_GRADE_ITEM_OPENED",r.AddGradeItemOpened="ADD_GRADE_ITEM_OPENED",r.ScormAnalysisReportOpened="SCORM_ANALYSIS_REPORT_OPENED",r.ScormAnalysisReportClosed="SCORM_ANALYSIS_REPORT_CLOSED",r.DownloadLinkClicked="DOWNLOAD_LINK_CLICKED",r.PartnerToolOpened="PARTNER_TOOL_OPENED",r.PartnerToolClosed="PARTNER_TOOL_CLOSED",r.EditFolderOpened="EDIT_FOLDER_OPENED",r.EditFolderClosed="EDTI_FOLDER_CLOSED",r.EditLinkOpened="EDIT_LINK_OPENED",r.EditFileOpened="EDIT_FILE_OPENED",r.EditLTIOpened="EDIT_LTI_OPENED",r.EditLTIClosed="EDIT_LTI_CLOSED",r.EditPlacementOpened="EDIT_PLACEMENT_OPENED",r.EditPlacementClosed="EDIT_PLACEMENT_CLOSED",r.CreateDocument="CREATE_DOCUMENT",r.ReleaseConditionPanelOpened="RELEASE_CONDITION_PANEL_OPENED",r.ReleaseConditionPanleClosed="RELEASE_CONDITION_PANEL_CLOSED",r.ToolsOpened="TOOLS_OPENED",r.ToolsClosed="TOOLS_CLOSED",r.MessagesOpened="MESSAGES_OPENED",r.MessageClosed="MESSAGE_CLOSED",r.GradableItemTabOpened="GRADABLE_ITEM_TAB_OPENED",r.StudentsTabOpened="STUDENTS_TAB_OPENED",r.QuestionPickerPanelOpened="QUESTION_PICKER_PANEL_OPENED",r.QuestionPickerPanelClosed="QUESTION_PICKER_PANEL_CLOSED",r.QuestionPoolPanelOpened="QUESTION_POOL_PANEL_OPENED",r.QuestionPoolPanelClosed="QUESTION_POOL_PANEL_CLOSED",r.ToolLinkOpened="TOOL_LINK_OPENED",r.CourseGroupEnrollOpened="COURSE_GROUP_ENROLL_OPENED",r.AttendanceStudentViewOpened="ATTENDANCE_STUDENT_VIEW_OPENED",r.StudentScormOverviewOpened="STUDENT_SCORM_OVERVIEW_OPENED",r.AssessmentDetailsClosed="ASSESSMENT_DETAILS_CLOSED",r.AssessmentAttemptSubmissionFeedbackOpened="ASSESSMENT_SUBMISSION_FEEDBACK_OPENED",r.AssessmentAttemptSubmissionFeedbackClosed="ASSESSMENT_SUBMISSION_FEEDBACK_CLOSED",r.DocumentSettingsOpened="DOCUMENT_SETTINGS_OPENED",r.DocumentSettingsClosed="DOCUMENT_SETTINGS_CLOSED",r.GradeAndFeedbackOpened="GRADE_AND_FEEDBACK_OPENED",r.GradeAndFeedbackClosed="GRADE_AND_FEEDBACK_CLOSED",r.AssessmentOverviewAttemptClosed="ASSESSMENT_OVERVIEW_ATTEMPT_CLOSED",r.AssessmentOverviewClosed="ASSESSMENT_OVERVIEW_CLOSED",r.MultipleAttemptGradingOpened="MULTIPLE_ATTEMPT_GRADING_OPENED",r.MultipleAttemptGradingClosed="MULTIPLE_ATTEMPT_GRADING_CLOSED",r.StudentSubmisionOpened="STUDENT_SUBMISSION_OPENED",r.TestSubmissionOpened="TEST_SUBMISSION_OPENED",r.AssignmentSubmissionOpened="ASSIGNMENT_SUBMISSION_OPENED",r.ExamSubmissionOpened="EXAM_SUBMISSION_OPENED",r.HomeworkSubmissionOpened="HOMEWORK_SUBMISSION_OPENED",r.PresentationSubmissionOpened="PRESENTATION_SUBMISSION_OPENED",r.QuizSubmissionOpened="QUIZ_SUBMISSION_OPENED",r.OverallGradeSettingsOpened="OVERALL_GRADE_SETTINGS_OPENED",r.OverallGradeSettingsClosed="OVERALL_GRADE_SETTINGS_CLOSED",r.InstitutionAdminPageOpened="INSTITUTION_ADMIN_PAGE_OPENED",r.InstitutionAdminPageClosed="INSTITUTION_ADMIN_PAGE_CLOSED",r.InstitutionPageOpened="INSTITUTION_PAGE_OPENED",r.InstitutionPageClosed="INSTITUTION_PAGE_CLOSED",r.BrandDetailOpened="INSTITUTION_BRAND_DETAIL_OPENED",r.BrandDetailClosed="INSTITUTION_BRAND_DETAIL_CLOSED",r.CreateModuleOpened="CREATE_MODULE_OPENED",r.CreateModuleClosed="CREATE_MODULE_CLOSED",r.EditBannerOpened="EDIT_BANNER_OPENED",r.EditBannerClosed="EDIT_BANNER_CLOSED",r.EditBannerLogoOpened="EDIT_BANNER_LOGO_OPENED",r.EditBannerLogoClosed="EDIT_BANNER_LOGO_CLOSED",r.BrowserSettingOpened="BROWSER_SETTING_OPENED",r.BrowserSettingClosed="BROWSER_SETTINGS_CLOSED",r.ContentCollectionOpened="IP_CONTENT_COLLECTION_OPENED",r.ContentCollectionClosed="IP_CONTENT_COLLECTION_CLOSED",r.GradeSettingsOpened="GRADE_SETTINGS_OPENED",r.GradeSettingsClosed="GRADE_SETTINGS_CLOSED",r.EditLinkImageOpened="EDIT_LINK_IMAGE_OPENED",r.EditLinkImageClosed="EDIT_LINK_IMAGE_CLOSED",r.IpViewLinksOpened="INSTITUTION_VIEW_LINKED_OPENED",r.IpViewLinksClosed="INSTITUTION_VIEW_LINKED_CLOSED",r.IpColorSelectionOpened="INSTITUTION_COLOR_SELECTION_OPENED",r.IpColorSelectionClosed="INSTITUTION_COLOR_SELECTION_CLOSED",r.GradesAndParticipantsOpened="GRADES_AND_PARTICIPANTS_OPENED",r.GradeBookDownloadButtonClicked="GRADEBOOK_DOWNLOAD_BUTTON_CLICKED",r.GradeDownloadSettingsOpened="GRADEBOOK_DOWNLOAD_SETTINGS_OPENED",r.GradeDownloadSettingsClosed="GRADEBOOK_DOWNLOAD_SETTINGS_CLOSED",r.EditFileSettingsOpened="EDIT_FILE_SETTINGS_OPENED",r.EditFileSettingsClosed="EDIT_FILE_SETTINGS_CLOSED",r.ContentManageCreateDocumentClosed="CREATE_DOCUMENT_CLOSED",r.NewJournalTitleUpdated="NEW_JOURNAL_TITLE_UPDATED",r.DownloadTestResultsOpened="DOWNLOAD_TEST_RESULTS_OPENED",r.DownloadTestResultsClosed="DOWNLOAD_TEST_RESULTS_CLOSED",r.NewMessageCreated="NEW_MESSAGE_CREATED",r.MessageSent="MESSAGE_SENT",r.AssessmentOverviewMultipleAttemptOpened="ASSESSMENT_MULTIPLE_ATTEMPT_OPENED",r.AssessmentOverviewMultipleAttemptClosed="ASSESSMENT_MULTIPLE_ATTEMPT_CLOSED",r.AssessmentOverviewAttemptReviewOpened="ASSESSMENT_OVERVIEW_ATTEMPT_REVIEW_OPENED",r.AssessmentOverviewAttemptReviewClosed="ASSESSMENT_OVERVIEW_ATTEMPT_REVIEW_CLOSED",r.DiscussionDetailsOpened="DISCUSSION_DETAILS_OPENED",r.DiscussionDetailsClosed="DISCUSSION_DETAILS_CLOSED",r.EventViewOpened="EVENT_VIEW_OPENED",r.EventViewClosed="EVENT_VIEW_CLOSED",r.OverallGradeOpened="OVERALL_GRADE_OPENED",r.OverallGradeClosed="OVERALL_GRADE_CLOSED",r.AssessmentOverviewAttemptReviewInlineRubricsOpened="ASSESSMENT_INLINE_RUBRICS_OPENED",r.AssessmentOverviewAttemptReviewInlineRubricsClosed="ASSESSMENT_INLINE_RUBRICS_CLOSED",r.AssessmentStudentRubricOpened="ASSESSMENT_STUDENT_RUBRIC_OPENED",r.AssessmentStudentRubricClosed="ASSESSMENT_STUDENT_RUBRIC_CLOSED",r.GradeCalculationDetailOpened="GRADE_CALCULATION_DETAIL_OPENED",r.GradeCalculationDetailClosed="GRADE_CALCULATION_DETAIL_CLOSED",r.GradeUploadOpened="GRADEBOOK_UPLOAD_OPENED",r.GradeUploadClosed="GRADEBOOK_UPLOAD_CLOSED",r.GradeSubmissionReceiptOpened="GRADEBOOK_SUBMISSION_RECEIPT_OPENED",r.GradeSubmissionReceiptClosed="GRADEBOOK_SUBMISSION_RECEIPT_CLOSED",r.CloudStorageOpened="CLOUD_STORAGE_OPENED",r.CloudStorageClosed="CLOUD_STORAGE_CLOSED",r.BlackboardSupportOpened="BLACKBOARD_SUPPORT_OPENED",r.SessionDebugOpened="SESSION_DEBUG_OPENED",r.ImportGroupSetPanelOpened="IMPORT_GROUP_SET_PANEL_OPENED",r.ImportGroupSetPanelClosed="IMPORT_GROUP_SET_PANEL_CLOSED",r.ImportGroupMembersPanelOpened="IMPORT_GROUP_MEMBERS_PANEL_OPENED",r.ImportGroupMembersPanelClosed="IMPORT_GROUP_MEMBERS_PANEL_CLOSED",r.ExportGroupSetPanelOpened="EXPROT_GROUP_SET_PANEL_OPENED",r.ExportGroupSetPanelClosed="EXPORT_GROUP_SET_PANEL_CLOSED",r.OfflineGradesAndFeedbacksPanelOpened="OFFLINE_GRADES_AND_FEEDBACK_PANEL_OPENED",r.StudentPreviewOpened="STUDENT_PREVIEW_OPENED",r.StudentPreviewClosed="STUDENT_PREVIEW_CLOSED",(o=p||(p={}))[o.Document=0]="Document",o[o.Test=1]="Test",o[o.Assignment=2]="Assignment",o[o.Link=3]="Link",o[o.Folder=4]="Folder",o[o.Discussion=5]="Discussion",o[o.GradedDiscussion=6]="GradedDiscussion",o[o.Journal=10]="Journal",o[o.DiscussionGroup=13]="DiscussionGroup",o[o.GradedDiscussionGroup=14]="GradedDiscussionGroup",o[o.LTIConnection=25]="LTIConnection",o[o.Scorm=36]="Scorm",(a=m||(m={})).GotoParticipants="GOTO_PARTICIPANTS",a.GotoSettings="GOTO_SETTINGS",a.GotoDetail="GOTO_DETAIL",a.GotoDownload="GOTO_DOWNLOAD",a.Delete="DELETE",a.Next="NEXT",a.Prev="PREV",a.Enroll="ENROLL",a.Search="SEARCH",a.GotoUpload="GOTO_UPLOAD",a.GotoSubmissionReceipt="GOTO_SUBMISSION_RECEIPT",a.OpenCourseSettings="OPEN_COURSE_SETTINGS",(l=h||(h={})).Success="Success",l.Fail="Fail";let b="fromPeekName",v={[d.OpenCalendar]:c.CourseCalendar,[d.OpenGradeBook]:c.CourseGrades,[d.OpenJournal]:c.Journal,[d.OpenDiscussion]:c.Discussion,[d.OpenGroupDiscussion]:c.Discussion,[d.OpenAssessmentInstView]:c.AssessmentInst,[d.OpenAssessmentSubmissionView]:c.AssessmentInst,[d.OpenInstViewGradedSCORM]:c.GradedScormInst,[d.OpenCourse]:c.CourseOutline,[d.OpenDocument]:c.Document,[d.OpenCourseAnnouncement]:c.AnnouncementDetail,[d.OpenAdminAnnouncement]:c.AdminAnnouncement,[d.OpenCourseMessage]:c.CourseMessage,[d.OpenTimeline]:c.CourseTimeline,[d.OpenPersonalEvent]:c.EventEdit,[d.OpenCalendarEvent]:c.EventEdit,[d.OpenCourseMessagesList]:c.CourseMessageList,[d.OpenCreateMessages]:c.CreateMessage,[d.OpenInstitutionPage]:c.InstitutionPage,[d.OpenAdminInstitutionPage]:c.InstitutionAdminPage,[d.OpenTools]:c.Tools,[d.OpenAssessment]:c.AssessmentOverview,[d.OpenStudentDiscusssionPage]:c.Discussion,[d.OpenGradedSCORM]:c.StudentScormOverview},y={[c.QuestionGoalAlignmentForStudent]:{type:u.AttemptGoalAlignmentOpened},[c.RubricEvaluation]:{type:u.AttemptRubricOpened,prevState:b},[c.RubricView]:{type:u.AttemptRubricOpened,prevState:b},[c.AssessmentSubmissionFeedbackTab]:{type:u.AttemptFeedbackOpened},[c.AssessmentSubmissionFeedback]:{type:u.AttemptFeedbackOpened},[c.DiscussionParticipants]:{type:u.DiscussionParticipantsOpened},[c.SubmissionList]:{type:u.SubmissionListOpened},[c.DiscussionFeedback]:{type:u.DiscussionFeedbackOpened},[c.JournalSetting]:{type:u.JournalSettingsOpened},[c.JournalDetail]:{type:u.JournalDetailsOpened},[c.JournalParticipationDetail]:{type:u.JournalParticipationDetailOpened},[c.EnrolUsers]:{type:u.EnrollUsersOpened},[c.EditEnrollment]:{type:u.EditEnrollmentOpened},[c.Description]:{type:u.DescriptionOpened},[c.GroupSetList]:{type:u.GroupSetListOpened},[c.GroupSetDetail]:{type:u.GroupSetDetailOpened,prevState:b},[c.CourseEditBanner]:{type:u.CourseEditBannerOpened},[c.AttendanceSettings]:{type:u.AttendanceSettingsOpened},[c.BooksAndTools]:{type:u.BooksAndToolsOpened},[c.ContentMarket]:{type:u.ContentMarketOpened,prevState:b},[c.QuestionBanks]:{type:u.QuestionBanksOpened},[c.ClassSchedule]:{type:u.ClassScheduleOpened},[c.CourseMessages]:{type:u.CourseMessageListOpened},[c.CreateMessage]:{type:u.CreateMessageOpened},[c.CourseCalendar]:{type:u.CourseCalendarOpened},[c.CourseCalendarCreateEvent]:{type:u.CourseCalendarCreateNewEventOpened},[c.CourseCalendarOfficeHours]:{type:u.CourseCalendarOfficeHoursOpened},[c.CourseCalendarEditEvent]:{type:u.CourseCalendarEditEventOpened},[c.DiscussionSettings]:{type:u.DiscussionSettingsOpened},[c.DiscussionsSettings]:{type:u.DiscussionsSettingsOpened},[c.NewMessage]:{type:u.NewMessagePanelOpened,prevState:b},[c.CreateContent]:{type:u.NewContentItemPanelOpened},[c.CourseGroup]:{type:u.CourseGroupOpened},[c.AdminAnnouncement]:{type:u.AdminAnnouncementOpened},[c.PerAssessmentSettings]:{type:u.PerAssessmentSettingsOpened},[c.PerAssessmentGroupSettings]:{type:u.PerAssessmentGroupSettingsOpened},[c.SubmissionGrading]:{type:u.SubmissionGradingOpened},[c.AssessmentSubmissionGradingFeedbackTab]:{type:u.SubmissionGradingFeedbackTabOpened},[c.GradesBulkDownload]:{type:u.GradesBulkDownloadOpened},[c.QuestionGoalAlignmentForInstructor]:{type:u.QuestionGoalAlignmentForInstructorOpened},[c.GoalPickerLegacy]:{type:u.GoalPickerLegacyOpened},[c.CourseGradesAccommodations]:{type:u.CourseGradeAccommodationOpened,prevState:b},[c.ContentCopy]:{type:u.ContentCopyPanelOpened},[c.BulkEditContent]:{type:u.BulkEditContentPanelOpened},[c.ImportContent]:{type:u.ImportContentPanelOpened},[c.Exports]:{type:u.ExportsPanelOpened},[c.ContentCollection]:{type:u.ContentCollectionPanelOpened},[c.ContentCollectionSettings]:{type:u.ContentCollectionSettingOpened},[c.ContentCollectionPicker]:{type:u.ContentCollectionPickerOpened,prevState:b},[c.CourseGradesAddItem]:{type:u.CourseGradesAddItemOpened},[c.CourseGradesAddItemCalculation]:{type:u.CourseGradesAddItemCalculationOpened},[c.CourseGradesViewIndividualGrade]:{type:u.CourseGradesIndividualGradeOpened},[c.QuestionAnalysis]:{type:u.QuestionAnalysisOpened},[c.QuestionAnalyticsScorm]:{type:u.QuestionAnalyticsScormReportOpened},[c.CourseQuestionAnalysisReport]:{type:u.CourseQuestionAnalysisReportOpened},[c.EventEdit]:{type:u.PersonalEventOpened},[c.CreateLink]:{type:u.CreateLinkPanelOpened},[c.CreateLTI]:{type:u.CreateLTIPanelOpened},[c.ScormSettings]:{type:u.ScormSettingsOrFileUploaderOpened},[c.PreviewScorm]:{type:u.PreviewScormOpened},[c.DiscussionBoard]:{type:u.DiscussionBoardOpened},[c.CourseGrades]:{type:u.CourseGradeOpened},[c.ScormAnalysisReport]:{type:u.ScormAnalysisReportOpened},[c.PartnerTool]:{type:u.PartnerToolOpened},[c.EditFolder]:{type:u.EditFolderOpened,prevState:b},[c.EditLTI]:{type:u.EditLTIOpened,prevState:b},[c.EditPlacement]:{type:u.EditPlacementOpened,prevState:b},[c.Tools]:{type:u.ToolsOpened},[c.Messages]:{type:u.MessagesOpened},[c.CourseGroupEnroll]:{type:u.CourseGroupEnrollOpened},[c.AttendanceStudentView]:{type:u.AttendanceStudentViewOpened},[c.StudentScormOverview]:{type:u.StudentScormOverviewOpened},[c.AssessmentAttemptSubmissionFeedback]:{type:u.AssessmentAttemptSubmissionFeedbackOpened},[c.DocumentSettings]:{type:u.DocumentSettingsOpened},[c.OverallGradeSettings]:{type:u.OverallGradeSettingsOpened},[c.InstitutionAdminPage]:{type:u.InstitutionAdminPageOpened},[c.InstitutionPage]:{type:u.InstitutionPageOpened},[c.BrandDetail]:{type:u.BrandDetailOpened},[c.CreateModule]:{type:u.CreateModuleOpened},[c.EditModule]:{type:u.CreateModuleOpened},[c.IpContentCollection]:{type:u.ContentCollectionOpened},[c.GradeSettings]:{type:u.GradeSettingsOpened},[c.BrowserSettings]:{type:u.BrowserSettingOpened},[c.IpViewLinks]:{type:u.IpViewLinksOpened},[c.IpColorSelection]:{type:u.IpColorSelectionOpened},[c.GradeDownloadSettings]:{type:u.GradeDownloadSettingsOpened},[c.CourseOutline]:{type:u.CourseContentOpened},[c.DownloadTestResults]:{type:u.DownloadTestResultsOpened},[c.AssessmentOverviewMultipleAttempt]:{type:u.AssessmentOverviewMultipleAttemptOpened},[c.AssessmentOverviewAttemptReview]:{type:u.AssessmentOverviewAttemptReviewOpened},[c.DiscussionDetails]:{type:u.DiscussionDetailsOpened,prevState:b},[c.OverallGrade]:{type:u.OverallGradeOpened},[c.AssessmentOverviewAttemptReviewInlineRubrics]:{type:u.AssessmentOverviewAttemptReviewInlineRubricsOpened},[c.GradeUpload]:{type:u.GradeUploadOpened},[c.GradeSubmissionReceipt]:{type:u.GradeSubmissionReceiptOpened},[c.CourseSettings]:{type:u.CourseSettingsPanelOpened},[c.CourseActivityAnalytics]:{type:u.CourseActivityAnalyticsOpened},[c.TelemetryAlertSettings]:{type:u.AlertSettingsOpened}},C={[c.QuestionGoalAlignmentForStudent]:{type:u.AttemptGoalAlignmentClosed},[c.RubricEvaluation]:{type:u.AttemptRubricClosed},[c.RubricView]:{type:u.AttemptRubricClosed},[c.AssessmentSubmissionFeedbackTab]:{type:u.AttemptFeedbackClosed},[c.AssessmentSubmissionFeedback]:{type:u.AttemptFeedbackClosed},[c.DiscussionParticipants]:{type:u.DiscussionParticipantsClosed},[c.SubmissionList]:{type:u.SubmissionListClosed},[c.DiscussionFeedback]:{type:u.DiscussionFeedbackClosed},[c.JournalSetting]:{type:u.JournalSettingsClosed},[c.JournalDetail]:{type:u.JournalDetailsClosed},[c.JournalParticipationDetail]:{type:u.JournalParticipationDetailClosed},[c.EnrolUsers]:{type:u.EnrollUsersClosed},[c.EditEnrollment]:{type:u.EditEnrollmentClosed},[c.Description]:{type:u.DescriptionClosed},[c.GroupSetList]:{type:u.GroupSetListClosed},[c.GroupSetDetail]:{type:u.GroupSetDetailClosed},[c.CourseEditBanner]:{type:u.CourseEditBannerClosed},[c.CourseSettings]:{type:u.CourseSettingsPanelClosed},[c.Attendance]:{type:u.AttendanceClosed},[c.AttendanceSettings]:{type:u.AttendanceSettingsClosed},[c.AttendanceStudentRecords]:{type:u.AttendanceStudentRecordsClosed},[c.AnnouncementDetail]:{type:u.AnnouncementDetailClosed},[c.AnnouncementList]:{type:u.AnnouncementListClosed},[c.BooksAndTools]:{type:u.BooksAndToolsClosed},[c.ContentMarket]:{type:u.ContentMarketClosed},[c.QuestionBanks]:{type:u.QuestionBanksClosed},[c.ClassSchedule]:{type:u.ClassScheduleClosed},[c.CourseMessages]:{type:u.CourseMessageListClosed},[c.CreateMessage]:{type:u.CreateMessageClosed},[c.CourseCalendar]:{type:u.CourseCalendarClosed},[c.CourseCalendarCreateEvent]:{type:u.CourseCalendarCreateNewEventClosed},[c.CourseCalendarOfficeHours]:{type:u.CourseCalendarOfficeHoursClosed},[c.CourseCalendarEditEvent]:{type:u.CourseCalendarEditEventClosed},[c.DiscussionSettings]:{type:u.DiscussionSettingsClosed},[c.DiscussionsSettings]:{type:u.DiscussionsSettingsClosed},[c.DiscussionTelemetry]:{type:u.DiscussionTelemetryClosed},[c.NewMessage]:{type:u.NewMessagePanelClosed},[c.CreateFolder]:{type:u.NewFolderPanelClosed},[c.CreateContent]:{type:u.NewContentItemPanelClosed},[c.CourseGroup]:{type:u.CourseGroupClosed},[c.AdminAnnouncement]:{type:u.AdminAnnouncementClosed},[c.AssessmentSettings]:{type:u.AssessmentSettingsClosed},[c.PerAssessmentSettings]:{type:u.PerAssessmentSettingsClosed},[c.PerAssessmentGroupSettings]:{type:u.PerAssessmentGroupSettingsClosed},[c.SubmissionGrading]:{type:u.SubmissionGradingClosed},[c.AssessmentSubmissionGradingFeedbackTab]:{type:u.SubmissionGradingFeedbackTabClosed},[c.GradesBulkDownload]:{type:u.GradesBulkDownloadClosed},[c.QuestionGoalAlignmentForInstructor]:{type:u.QuestionGoalAlignmentForInstructorClosed},[c.GoalPickerLegacy]:{type:u.GoalPickerLegacyClosed},[c.CourseGradesAccommodations]:{type:u.CourseGradeAccommodationClosed},[c.ContentCopy]:{type:u.ContentCopyPanelClosed},[c.BulkEditContent]:{type:u.BulkEditContentPanelClosed},[c.ImportContent]:{type:u.ImportContentPanelClosed},[c.Exports]:{type:u.ExportsPanelClosed},[c.ContentCollectionSettings]:{type:u.ContentCollectionSettingClosed},[c.ContentCollectionPicker]:{type:u.ContentCollectionPickerClosed},[c.CourseGradesAddItem]:{type:u.CourseGradesAddItemClosed},[c.CourseGradesAddItemCalculation]:{type:u.CourseGradesAddItemCalculationClosed},[c.CourseGradesViewIndividualGrade]:{type:u.CourseGradesIndividualGradeClosed},[c.QuestionAnalysisReport]:{type:u.QuestionAnalysisReportClosed},[c.QuestionAnalysis]:{type:u.QuestionAnalysisClosed},[c.QuestionAnalyticsScorm]:{type:u.QuestionAnalyticsScormReportClosed},[c.CourseQuestionAnalysisReport]:{type:u.CourseQuestionAnalysisReportClosed},[c.EventEdit]:{type:u.PersonalEventClosed},[c.StudentActivity]:{type:u.StudentActivityClosed},[c.Roster]:{type:u.RosterClosed},[c.Journal]:{type:u.JournalClosed},[c.Discussion]:{type:u.DiscussionClosed},[c.Document]:{type:u.DocumentClosed},[c.AssessmentInst]:{type:u.AssessmentClosed},[c.CreateLink]:{type:u.CreateLinkPanelClosed},[c.CreateLTI]:{type:u.CreateLTIPanelClosed},[c.ScormSettings]:{type:u.ScormSettingsClosed},[c.Collab]:{type:u.CollabClosed},[c.PreviewScorm]:{type:u.PreviewScormClosed},[c.GradedScormInst]:{type:u.GradedScormInstClosed},[c.CourseOutline]:{type:u.CourseContentClosed},[c.CourseGrades]:{type:u.CourseGradeClosed},[c.ScormAnalysisReport]:{type:u.ScormAnalysisReportClosed},[c.PartnerTool]:{type:u.PartnerToolClosed},[c.EditFolder]:{type:u.EditFolderClosed},[c.EditLTI]:{type:u.EditLTIClosed},[c.EditPlacement]:{type:u.EditPlacementClosed},[c.Tools]:{type:u.ToolsClosed},[c.Messages]:{type:u.MessageClosed},[c.ReleaseCondition]:{type:u.ReleaseConditionPanleClosed},[c.GradeBookOverAllGrade]:{type:u.CourseGradesOverallGradeSetupClosed},[c.AssessmentDetails]:{type:u.AssessmentDetailsClosed},[c.AssessmentAttemptSubmissionFeedback]:{type:u.AssessmentAttemptSubmissionFeedbackClosed},[c.DocumentSettings]:{type:u.DocumentSettingsClosed},[c.GradeAndFeedback]:{type:u.GradeAndFeedbackClosed},[c.AssessmentOverview]:{type:u.AssessmentOverviewClosed},[c.AssessmentOverviewAttempt]:{type:u.AssessmentOverviewAttemptClosed},[c.OverallGradeSettings]:{type:u.OverallGradeSettingsClosed},[c.InstitutionAdminPage]:{type:u.InstitutionAdminPageClosed},[c.InstitutionPage]:{type:u.InstitutionPageClosed},[c.BrandDetail]:{type:u.BrandDetailClosed},[c.CreateModule]:{type:u.CreateModuleClosed},[c.EditModule]:{type:u.CreateModuleClosed},[c.BrowserSettings]:{type:u.BrowserSettingClosed},[c.IpContentCollection]:{type:u.ContentCollectionClosed},[c.GradeSettings]:{type:u.GradeSettingsClosed},[c.EditIpLinkImage]:{type:u.EditLinkImageClosed},[c.IpViewLinks]:{type:u.IpViewLinksClosed},[c.IpColorSelection]:{type:u.IpColorSelectionClosed},[c.GradeDownloadSettings]:{type:u.GradeDownloadSettingsClosed},[c.MultipleAttemptGrading]:{type:u.MultipleAttemptGradingClosed},[c.EditFileSettings]:{type:u.EditFileSettingsClosed},[c.DownloadTestResults]:{type:u.DownloadTestResultsClosed},[c.AssessmentOverviewMultipleAttempt]:{type:u.AssessmentOverviewMultipleAttemptClosed},[c.AssessmentOverviewAttemptReview]:{type:u.AssessmentOverviewAttemptReviewClosed},[c.DiscussionDetails]:{type:u.DiscussionDetailsClosed},[c.OverallGrade]:{type:u.OverallGradeClosed},[c.AssessmentOverviewAttemptReviewInlineRubrics]:{type:u.AssessmentOverviewAttemptReviewInlineRubricsClosed},[c.GradeUpload]:{type:u.GradeUploadClosed},[c.GradeSubmissionReceipt]:{type:u.GradeSubmissionReceiptClosed},[c.CourseActivityAnalytics]:{type:u.CourseActivityAnalyticsClosed},[c.TelemetryAlertSettings]:{type:u.AlertSettingsClosed}};function S(){let e=window.webkit;return!!e&&!!e.messageHandlers&&!!e.messageHandlers.MobileApp}function E(){return!!window.MobileApp}function I(){return S()||E()}function w(e){return null==e?void 0:e.split(".peek.").pop()}function A(e){try{if(S()){let t=window.webkit;t.messageHandlers.MobileApp.postMessage(e)}if(E()){let t=JSON.stringify(e);window.MobileApp.sendMessageToMobile(t)}}catch(e){console.error(e)}}let k=new Map;function x(e){var t;if(!e)return;let n=document.querySelector("#preview-iframe");if(n&&n.contentWindow){null===(t=n.contentWindow.mobileAPI)||void 0===t||t.onMobileEventHandler(e);return}let i=JSON.parse(e);if(!i||!i.correlationId)return;let s=k.get(i.correlationId);s&&(i.status===h.Fail?s.error(i):s.next(i))}function T(e){window.mobileAPI.onMobileEventHandler=x;let t=(0,f.v4)(),n=new g.y(n=>{k.set(t,n),A({...e,correlationId:t})});return{response:n,correlationId:t}}function P(e){let t=k.get(e);t&&(t.complete(),k.delete(e))}function D(e){let t={type:e,status:h.Success};A(t)}function G(e,t,n){e===d.OpenCourseMessage||e===d.OpenCreateMessages?n.goPeekState(c.CourseMessageList,t).then(()=>{n.goPeekState(v[e],t)}):n.goPeekState(v[e],t)}function R(e,t,n){n.goPeekState(c.CourseOutline,t).then(()=>{G(e,t,n)})}function B(e){window.mobileAPI.dismissPanel=e}function L(e){window.mobileAPI.goToPeekState=(t,n)=>{var i,s;if(!t)return;let r=function(e,t){let n={};switch(e){case d.OpenDocument:n.courseId=t.courseId,n.id=t.contentId;break;case d.OpenAdminAnnouncement:n.streamEntryId=t.contentId;break;case d.OpenCourseAnnouncement:n.courseId=t.courseId,n.announcementId=t.contentId;break;case d.OpenCourseMessage:n.courseId=t.courseId,n.conversationId=t.contentId,n.offset=0,n.count=5;break;case d.OpenAssessmentInstView:n.courseId=t.courseId,n.contentId=t.contentId,n.gradeitemView="details";break;case d.OpenAssessmentSubmissionView:n.courseId=t.courseId,n.contentId=t.contentId,n.gradeitemView="students";break;default:n=t}return n}(t,n),o=null===(i=e.current.name)||void 0===i?void 0:i.split(".peek.").pop();t===d.OpenPersonalEvent||t===d.OpenCalendarEvent||t===d.OpenAdminAnnouncement?e.goToRoute(c.ActivityStream).then(()=>{G(t,r,e)}):t===d.OpenAdminInstitutionPage||t===d.OpenInstitutionPage||t===d.OpenTools?o===c.EventEdit||o===c.AdminAnnouncement?e.leavePeekState().then(()=>{e.goToRoute(v[t])}):e.goToRoute(v[t]):o===c.EventEdit||o===c.AdminAnnouncement?e.leavePeekState().then(()=>{e.goToRoute(c.CourseTimeline).then(()=>{R(t,r,e)})}):r&&r.courseId&&r.courseId!==(null===(s=e.params)||void 0===s?void 0:s.courseId)?o===c.CourseTimeline?t!==d.OpenCourse?R(t,r,e):e.goPeekState(c.CourseOutline,r):o!==c.CourseTimeline&&(t!==d.OpenCourse?e.goToRoute(c.CourseTimeline).then(()=>{R(t,r,e)}):e.goToRoute(c.CourseTimeline).then(()=>{e.goPeekState(c.CourseOutline,r)})):o===c.CourseTimeline?G(t,r,e):o===c.Discussion?e.leavePeekState().then(()=>{R(t,r,e)}):R(t,r,e)}}function N(e){I()?(document.body.classList.add("is-in-mobile-app"),window.mobileAPI={onMobileEventHandler:x,closeCurrentPanel:()=>(function(e){var t;let n=document.querySelector("#preview-iframe");n&&n.contentWindow?null===(t=n.contentWindow.mobileAPI)||void 0===t||t.closeCurrentPanel():e.leavePeekState()})(e),goToPeekState:()=>L(e)}):window.mobileAPI={onMobileEventHandler:()=>{},closeCurrentPanel:()=>{},goToPeekState:()=>{}}}function O(e,t){if(I())try{let n;e&&y[e]?(n=y[e],A({...n,prevState:n.prevState?t:void 0,status:h.Success})):t&&C[t]&&(n=C[t],A({...n,status:h.Success}))}catch(e){console.error(e)}}},311822:function(e,t,n){"use strict";n.d(t,{Dy:function(){return s.D},_X:function(){return i._},gk:function(){return r.g}}),n(820488);var i=n(812809),s=n(332170),r=n(34625)},936472:function(e,t,n){"use strict";n.d(t,{sF:function(){return T},uZ:function(){return P},zt:function(){return tj},xZ:function(){return k},Qn:function(){return tX},oj:function(){return tK},a6:function(){return tZ}});var i,s,r,o,a,l,c,d,u,p,m,h,g=n(398435),f=n(202784),b=n(174897),v=n(928316),y=n(44432),C=n(50635),S=n(236351),E=n(281699),I=n(408027),w=n(609582);let A=["StudentActivityAvailable","StudentGradeDataAvailable","StudentsFallingBehind","StudentsFallingBehindAbsent","StudentsFallingBehindFailing","StudentsFallingBehindAbsentFailing","NoRecentActivity","GradeAtRisk_GradeInLowest","GradeAtRisk_GradeBelowThreshold","GradeLowered","LowActivity","PerformanceIncreased_GradeIncreased","PerformanceIncreased_ActivityIncreased","HighActivity","HighGrade","Calendar","BlogEntryPosted","BlogEntryEdited","BlogEntryComment","JournalEntryPosted","JournalEntryEdited","JournalEntryComment","WikiEntryPosted","WikiEntryEdited","WikiEntryComment"],k={version:1,settings:A.map(e=>({id:e,isEnabled:!0,isEditable:!0}))};var x=n(715729);let T="NN",P="ultraui.stream.admin.settings";(i=c||(c={})).Email="EM",i.Mobile="MO",i.Stream="DA",(s=d||(d={})).DefaultOn="defaultOn",s.DefaultOff="defaultOff",s.AlwaysOn="alwaysOn",s.AlwaysOff="alwaysOff",s.NotApplicable="notApplicable";let D=e=>{let t;t=e&&e.value?JSON.parse(e.value):H();let n=[];return t.settings.forEach(e=>{n.push({context:I.afs.Course,source:T,event:e.id,method:c.Stream,isEnabled:e.isEnabled,isEditable:e.isEditable})}),G(n)},G=e=>{let t={};return e.forEach(e=>{let n=B(e),i="ns.admin.description."+n.toLowerCase().replace(/_/g,".");if(Object.prototype.hasOwnProperty.call(t,n))t[n].modalities[e.method]={...e,isDirty:!1};else{let s={};s[e.method]={...e,isDirty:!1},t[n]={key:n,title:i,modalities:s}}}),t},R=(e,t)=>Object.values(e).filter(t),B=e=>e.context.toString()+"_"+e.source+"_"+e.event,L=(e,t,n)=>void 0===t?e:e.sort((e,i)=>{let s=n(e.title),r=n(i.title);return t===w.SortDirection.Ascending?s.localeCompare(r):r.localeCompare(s)}),N=(e,t,n,i,s)=>{let r={...e},o=(0,x.ZP)(r[t].modalities[n.toString()],e=>{e.isEnabled=i,e.isEditable=s,e.isDirty=!0});if(r[t].modalities[n.toString()]=o,F(t)){let o=t.split("_");o[0]="ORG";let a=o.join("_"),l=(0,x.ZP)(e[a].modalities[n.toString()],e=>{e.isEditable=s,e.isEnabled=i,e.isDirty=!0});r[a].modalities[n.toString()]=l}return r},O=e=>Object.keys(e).some(t=>Object.keys(e[t].modalities).some(n=>e[t].modalities[n].isDirty)),M=e=>Object.keys(e).reduce((t,n)=>(F(n)&&Object.keys(e[n].modalities).forEach(i=>{let s=e[n].modalities[i];!0===s.isDirty&&t.push((0,x.ZP)(s,e=>{delete e.isDirty}))}),t),[]),$=e=>{let t=Object.keys(e).reduce((t,n)=>{if(!F(n)){let i=n.split(`_${T}_`).pop(),s=e[n].modalities[c.Stream];t.push({id:i,isEnabled:s.isEnabled,isEditable:s.isEditable})}return t},[]);return{key:P,value:JSON.stringify({version:1,settings:t})}},H=()=>{let e={version:1,settings:[]};return A.forEach(t=>{e.settings.push({id:t,isEnabled:!0,isEditable:!0})}),e},F=e=>{let t=e.split(`_${T}_`),n=t.pop();return void 0===n||0>A.indexOf(n)};class U extends f.PureComponent{render(){let{localize:e,defaultSetting:t,modality:n,onChange:i,analyticsId:s,classes:r}=this.props,{translate:o}=e;return t===d.NotApplicable?f.createElement("div",{className:r.notApplicable},o("ns.admin.modality.option.notApplicable")):f.createElement(w.Dropdown,{defaultSelectedKey:t,options:[{key:d.DefaultOn,text:o("ns.admin.modality.option.defaultOn"),className:"js-default-on"},{key:d.DefaultOff,text:o("ns.admin.modality.option.defaultOff"),className:"js-default-off"},{key:d.AlwaysOn,text:o("ns.admin.modality.option.alwaysOn"),className:"js-always-on"},{key:d.AlwaysOff,text:o("ns.admin.modality.option.alwaysOff"),className:"js-always-off"}],onChanged:e=>{let t,s;let r=e.key.toString();switch(r){case"defaultOff":t=!1,s=!0;break;case"alwaysOn":t=!0,s=!1;break;case"alwaysOff":t=!1,s=!1;break;default:t=!0,s=!0}i(n,t,s)},label:o("ns.admin.dropdownLabel"),analyticsId:`${s}`})}}let V=(0,S.X)((0,E.withStyles)(e=>(0,E.createStyles)({notApplicable:{color:e.palette.text.secondary,fontStyle:"italic"}}),{name:"NotificationMenu"})(U));class _ extends f.PureComponent{render(){let{localize:e,key:t,modalityList:n,onChange:i,analyticsId:s,classes:r}=this.props,{translate:o}=e;return f.createElement("table",{className:r.accordionSetting},f.createElement("tbody",null,f.createElement("tr",{className:r.accordionModality},f.createElement("td",{className:r.accordionModalityName},o("ns.admin.modality.type.stream")),f.createElement("td",{className:r.accordionModalityOption},f.createElement(V,{key:t,modality:c.Stream,defaultSetting:n[0],onChange:i,analyticsId:`${s}.streamMenu`}))),f.createElement("tr",{className:r.accordionModality},f.createElement("td",{className:r.accordionModalityName},o("ns.admin.modality.type.email")),f.createElement("td",{className:r.accordionModalityOption},f.createElement(V,{key:t,modality:c.Email,defaultSetting:n[1],onChange:i,analyticsId:`${s}.emailMenu`}))),f.createElement("tr",{className:r.accordionModality},f.createElement("td",{className:r.accordionModalityName},o("ns.admin.modality.type.mobile")),f.createElement("td",{className:r.accordionModalityOption},f.createElement(V,{key:t,modality:c.Mobile,defaultSetting:n[2],onChange:i,analyticsId:`${s}.mobileMenu`})))))}}let q=(0,S.X)((0,E.withStyles)(e=>(0,E.createStyles)({accordionSetting:{width:"100%"},accordionModality:{height:"62px",borderBottom:`1px solid ${e.palette.secondary.light}`,"&:last-child":{borderBottom:"none"}},accordionModalityName:{paddingLeft:"20px"},accordionModalityOption:{width:"180px",paddingRight:"20px"}}),{name:"AccordionTabContent"})(_));var z=n(188505),W=n(927335),j=n(958299);class Z extends f.PureComponent{render(){let{analyticsId:e,ariaLabel:t,content:n,classes:i}=this.props,s="notificationSettingsTooltip";return f.createElement(z.AnalyticsTooltip,{title:n,id:s,analyticsId:`${e}.tooltip`},f.createElement("div",{className:i.iconButtonWrapper},f.createElement(j.AnalyticsIconButton,{className:"tooltip-button","aria-label":t,"aria-describedby":s,"data-is-visible":!0,analyticsId:`${e}.tooltipButton`},f.createElement(W.Information,null))))}}let K=(0,E.withStyles)(e=>(0,E.createStyles)({iconButtonWrapper:{"& .tooltip-button":{color:e.palette.secondary.main,[e.breakpoints.up("md")]:{color:e.palette.text.secondary}}}}),{name:"NotificationSettingsTooltipBase"})(Z);var X=n(120506);let Y=f.createContext({});var Q=n(951248),J=n(267345),ee=n(906277);let et=new Set(["COURSE_NN_PerformanceIncreased_ActivityIncreased","COURSE_NN_NoRecentActivity","COURSE_NN_GradeAtRisk_GradeInLowest","COURSE_NN_GradeAtRisk_GradeBelowThreshold","COURSE_NN_GradeLowered","COURSE_NN_LowActivity","COURSE_NN_PerformanceIncreased_GradeIncreased","COURSE_NN_HighActivity","COURSE_NN_HighGrade"]),en=e=>{let{howAmIDoingFeatureFlagData:t}=e;return{isHowAmIDoingFeatureFlagEnabled:(null==t?void 0:t.flagValue)==="true",filterByCoursePrefix:!0}},ei=e=>!et.has(e.key),es=e=>e.key.startsWith("COURSE_"),er=()=>!0,eo=e=>{let{filterByCoursePrefix:t,isHowAmIDoingFeatureFlagEnabled:n}=e,i=[];return t&&i.push(es),n||i.push(ei),i.length>0?i:[er]},ea=e=>t=>eo(e).every(e=>e(t)),el="notificationSetttings.adminPanel";class ec extends f.Component{constructor(e){super(e),this.onSettingChange=(e,t,n,i)=>{let s=N(this.state.notificationSettingsMap,n,i,e,t);this.setState(()=>({notificationSettingsMap:s}),()=>{this.props.onSettingChange()})},this.getModalitySetting=e=>e?e.isEditable?e.isEnabled?d.DefaultOn:d.DefaultOff:e.isEnabled?d.AlwaysOn:d.AlwaysOff:d.NotApplicable,this.createTableRows=e=>{let{t}=this.props;return e.map(e=>({key:e.key,cells:[f.createElement("span",null,t(e.title)),f.createElement(V,{key:e.key,modality:c.Stream,defaultSetting:this.getModalitySetting(e.modalities[c.Stream]),onChange:(t,n,i)=>this.onSettingChange(n,i,e.key,t),analyticsId:`${el}.streamMenu`}),f.createElement(V,{key:e.key,modality:c.Email,defaultSetting:this.getModalitySetting(e.modalities[c.Email]),onChange:(t,n,i)=>this.onSettingChange(n,i,e.key,t),analyticsId:`${el}.emailMenu`}),f.createElement(V,{key:e.key,modality:c.Mobile,defaultSetting:this.getModalitySetting(e.modalities[c.Mobile]),onChange:(t,n,i)=>this.onSettingChange(n,i,e.key,t),analyticsId:`${el}.mobileMenu`})]}))},this.createAccordionTabs=e=>{let{t}=this.props;return e.map(e=>f.createElement(w.AccordionTab,{key:e.key,title:t(e.title),expanded:!1,showExpander:!0,borderSize:J.Separator.Thin,className:this.props.classes.accordionNotificationTab,contents:f.createElement(q,{key:e.key,onChange:(t,n,i)=>this.onSettingChange(n,i,e.key,t),modalityList:[this.getModalitySetting(e.modalities[c.Stream]),this.getModalitySetting(e.modalities[c.Email]),this.getModalitySetting(e.modalities[c.Mobile])],analyticsId:`${el}.accordionTabContent`}),analyticsId:`${el}.accordianTab`}))},this.handleTitleSort=e=>{this.setState(()=>({sortDirection:e}))},this.saveChanges=e=>{O(e)&&(this.props.persistAdminNotificationMethodSettings(M(e)),this.props.persistAdminRegistrySettings($(e))),this.props.closePanel()},this.onSpinner=()=>f.createElement("div",{className:this.props.classes.spinnerWrapper},f.createElement(w.Spinner,{size:w.SpinnerSize.xLarge})),this.footer=()=>{let{t:e}=this.props;return f.createElement(w.BbPanelFooter,{primaryButtonProps:{text:e("ns.admin.save"),onClick:()=>this.saveChanges(this.state.notificationSettingsMap)},secondaryButtonProps:{text:e("ns.admin.cancel"),onClick:this.props.closePanel},analyticsId:`${el}.panelFooter`})},this.state={sortDirection:w.SortDirection.Ascending,isLoading:!0,notificationSettingsMap:{}}}onRender(){var e;let{t,classes:n}=this.props,i=[{key:"notification",name:t("ns.admin.notification"),onSort:this.handleTitleSort},{key:"stream",name:t("ns.admin.modality.type.stream")},{key:"email",name:t("ns.admin.modality.type.email")},{key:"mobile",name:t("ns.admin.modality.type.mobile")}],s=R(this.state.notificationSettingsMap,ea(en(this.props)));s=L(s,this.state.sortDirection,t);let r=this.createTableRows(s),o=this.createAccordionTabs(s);return(null===(e=this.props.UltraWindowSize)||void 0===e?void 0:e.isLargeBreakpoint())?f.createElement(w.SortableTable,{hasActionableCells:!0,headers:i,rows:r,tableName:t("ns.admin.title"),analyticsId:`${el}.sortableTable`}):f.createElement("ul",{className:n.accordionTabList},o)}render(){let{t:e,classes:t}=this.props,{isLoading:n}=this.state,i=n?this.onSpinner():this.onRender(),s=n?null:this.footer(),r=e("ns.admin.pageHelpUrl");return f.createElement(Y.Provider,{value:{}},f.createElement("div",{className:(0,ee.Z)("react-container",t.adminPanelWrapper)},f.createElement("div",{className:t.headerWrapper},f.createElement(w.BbPanelHeader,{type:w.BbPanelType.full,title:e("ns.admin.title"),panelContentRight:f.createElement(K,{content:e("ns.admin.tooltipContent"),ariaLabel:e("ns.admin.tooltipAriaLabel"),analyticsId:el}),analyticsId:`${el}.panelHeader`,navMenuAriaLabel:e("global.navigationMenu")})),i,f.createElement("div",{className:t.pageHelpWrapper},f.createElement(w.PageHelp,{url:r,className:"notification-admin-page-help",analyticsId:`${el}.pageHelp`})),s))}componentDidMount(){let{loadAdminNotificationSettings:e,loadAdminRegistrySettings:t,loadFeatureFlag:n}=this.props;n({flagKey:Q.x40.HowAmIDoingReport}),e(),t({key:P})}static getDerivedStateFromProps(e,t){var n;if(!e.isSystemPreferenceLoading&&!(null===(n=e.howAmIDoingFeatureFlagData)||void 0===n?void 0:n.isLoading)&&t.isLoading&&e.adminNotificationSettings.length>0){let t=G(e.adminNotificationSettings),n=D(e.adminRegistrySettings),i={...t,...n};return{notificationSettingsMap:i,isLoading:!1}}return null}}let ed=(0,y.$j)(e=>({adminNotificationSettings:Q.Ys.notificationMethodSetting.getAdminNotificationMethodSettings(e),adminRegistrySettings:Q.Ys.systemPreference.getSystemPreferenceByKey(e,P),isSystemPreferenceLoading:Q.Ys.systemPreference.isSystemPreferenceLoading(e,P),howAmIDoingFeatureFlagData:Q.Ys.featureFlags.getFeatureFlagValue(e,Q.x40.HowAmIDoingReport)}),{loadAdminNotificationSettings:Q.Nwg.notificationMethodSetting.loadAdminNotificationMethodSettings,persistAdminNotificationMethodSettings:Q.Nwg.notificationMethodSetting.persistAdminNotificationMethodSettings,loadAdminRegistrySettings:Q.Nwg.systemPreference.loadSystemPreference,persistAdminRegistrySettings:Q.Nwg.systemPreference.persistSystemPreference,loadFeatureFlag:Q.Nwg.featureFlags.loadFeatureFlagValueByKey})((0,C.H)((0,X.windowResizingResponsiveComponentWrapper)((0,E.withStyles)(e=>(0,E.createStyles)({accordionNotificationTab:{backgroundColor:e.palette.background.default,marginBottom:"12px"},accordionTabList:{overflow:"auto",listStyle:"none",margin:"0",padding:"20px"},adminPanelWrapper:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",flexDirection:"column",backgroundColor:e.palette.background.b3,"& .ms-Panel-header":{[e.breakpoints.up("md")]:{padding:"0 30px"}},"& .bb-AccordionTab-Title-Container":{fontWeight:e.typography.fontWeightSemiBold,padding:"12px 20px"},"& .bb-SortableTable":{padding:"30px"},"& .bb-SortableTableHeaderCell":{borderTop:"none"},"& .ms-Dropdown-label":{position:"absolute",width:"1px",height:"1px",margin:"-1px",padding:"0",overflow:"hidden",border:"0"}},headerWrapper:{backgroundColor:e.palette.background.default},spinnerWrapper:{position:"absolute",left:"50%",top:"50%",marginLeft:"-25px"},pageHelpWrapper:{transition:"top 250ms cubic-bezier(0.55, 0, 0.1, 1)","text-align":"right","z-index":"9999","margin-top":"-38px","pointer-events":"none","& .notification-admin-page-help":{position:"relative",right:"32px",top:"-10px",a:{"pointer-events":"auto"}}}}),{name:"NotificationAdminPanel"})(ec)))),eu=e=>class extends f.PureComponent{render(){return f.createElement(ep.Consumer,null,t=>f.createElement(e,{...t,...this.props}))}},ep=f.createContext({});(r=u||(u={})).Guest="GUEST",r.Instructor="INSTRUCTOR",r.Student="STUDENT",r.Dual="DUAL",r.None="NONE";var em=u;let eh={InstitutionAnnouncements:{id:"InstitutionAnnouncements",displayKey:"ns.streams.category.InstitutionAnnouncements"},CourseAnnouncements:{id:"CourseAnnouncements",displayKey:"ns.streams.category.CourseAnnouncements"},GradedItemDue:{id:"GradedItemDue",displayKey:"ns.streams.category.GradedItemDue"},NewMessages:{id:"NewMessages",displayKey:"ns.streams.category.NewMessages"},NewContent:{id:"NewContent",displayKey:"ns.streams.category.NewContent"},GradesPosted:{id:"GradesPosted",displayKey:"ns.streams.category.GradesPosted"},NewGradeableItems:{id:"NewGradeableItems",displayKey:"ns.streams.category.NewGradeableItems"},GradesNeedReconciling:{id:"GradesNeedReconciling",displayKey:"ns.streams.category.GradesNeedReconciling"},StudentPerformanceAlert:{id:"StudentPerformanceAlert",displayKey:"ns.streams.category.StudentPerformanceAlert"},Discussion:{id:"Discussion",displayKey:"ns.streams.category.Discussion"},GradesAndActivity:{id:"GradesAndActivity",displayKey:"ns.streams.category.GradesAndActivity"},Calendar:{id:"Calendar",displayKey:"ns.streams.category.Calendar"},CourseAvailable:{id:"CourseAvailable",displayKey:"ns.streams.category.CourseAvailable"},Blog:{id:"Blog",displayKey:"ns.streams.category.Blog"},Journal:{id:"Journal",displayKey:"ns.streams.category.Journal"},Wiki:{id:"Wiki",displayKey:"ns.streams.category.Wiki"}};var eg=n(568076),ef=n(438501);let eb=e=>(0,E.createStyles)({accordionTitleContainer:{display:"flex",alignItems:"center",boxShadow:`0 -1px 0 0 ${e.palette.background.b9} inset`},accordionTitleContents:{flex:"1 1 auto"},accordionContents:{borderBottom:`1px solid ${e.palette.border.main}`},accordionIconButton:{height:"58px"},styledAccordionList:{listStyle:"none",margin:0}}),ev=0;class ey extends f.Component{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation(),e.preventDefault(),this.props.onToggle()}}render(){return f.createElement(j.AnalyticsIconButton,{className:(0,ee.Z)("js-accordion-expander",this.props.classes.accordionIconButton),onClick:this.onClick,"aria-label":this.props.expanderAriaLabel,"aria-expanded":this.props.open,analyticsId:`${this.props.analyticsId}.${this.props.open?"close":"open"}.items.button`},this.props.open?f.createElement(ef.ArrowUp,null):f.createElement(ef.ArrowDown,null))}}let eC=(0,E.withStyles)(eb,{name:"AccordionExpander"})(ey);class eS extends f.PureComponent{constructor(e){super(e),this.state={id:"accordion_"+ev},ev+=1}render(){let{contents:e,expanded:t,onToggle:n,showExpander:i,className:s,title:r,expanderAriaLabelledBy:o,analyticsId:a,expanderAriaLabel:l,classes:c}=this.props,{id:d}=this.state;return f.createElement("li",{className:`js-${s}`},f.createElement("div",{className:c.accordionTitleContainer},f.createElement("div",{className:c.accordionTitleContents},r),i&&f.createElement(eC,{open:t,onToggle:n,analyticsId:a,expanderAriaLabel:l})),t&&f.createElement("div",{className:c.accordionContents,id:`${d}_content`,"aria-labelledby":o},e))}}let eE=(0,E.withStyles)(eb,{name:"AccordionTab"})(eS),eI=e=>(0,E.createStyles)({categoryCheckbox:{margin:"8px 0",width:"100%"},categoryTriStateCheckboxStyles:{margin:"0"},categoryLabelStyles:{"& span:nth-of-type(2)":{fontSize:"16px",fontWeight:e.typography.fontWeightSemiBold,fontFamily:e.typography.fontFamily,paddingRight:"26px"}},categoryCheckboxStyles:{margin:"12px 0"},categoryList:{listStyle:"none"},categoryListItem:{display:"flex",alignItems:"center",":not(:last-child)":{boxShadow:`0 -1px 0 0 ${e.palette.border.main} inset`}}});class ew extends f.PureComponent{constructor(){super(...arguments),this.onToggle=(e,t)=>{let{definition:n,onSettingsUpdated:i}=this.props;if(i){let e={...this.props.currentSettings};e[n.id]={...e[n.id],isEnabled:t},i(e)}}}render(){var e;let{definition:t,localize:n,currentSettings:i,analyticsId:s,classes:r}=this.props,{translate:o}=n,a=null===(e=t.displayKey.split(".").pop())||void 0===e?void 0:e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),l=!!(i&&i[t.id]&&i[t.id].isEnabled);return f.createElement("li",{className:r.categoryListItem,key:t.id},f.createElement(g.AnalyticsFormControlLabel,{label:o(t.displayKey),className:(0,ee.Z)(`js-${a}-checkbox`,r.categoryCheckbox),htmlFor:`stream-settings-item-${t.id}`,control:f.createElement(g.AnalyticsCheckbox,{id:`stream-settings-item-${t.id}`,onChange:this.onToggle,checked:l,analyticsId:`${s}.${l?"disable":"enable"}.checkbox`}),analyticsId:`${s}.${l?"disable":"enable"}.label`}))}}let eA=(0,S.X)(eu((0,E.withStyles)(eI,{name:"StreamSettingsItem"})(ew)));class ek extends f.PureComponent{constructor(e){super(e),this.onAccordionToggle=()=>{1!==this.props.availableNotifications.length&&this.setState(e=>({isOpen:!e.isOpen}))},this.onCategoryToggle=()=>{let e=this.getTriStateCheckboxState(),t={...this.props.currentSettings};this.props.availableNotifications.forEach(n=>{t[n.id]={...t[n.id],isEnabled:e===eg.CheckStateTypesEnum.PARTIAL||e===eg.CheckStateTypesEnum.UNCHECKED}}),this.props.onSettingsUpdated(t)},this.getTriStateCheckboxState=()=>{let e=this.props.availableNotifications.reduce((e,t)=>{let n=this.props.currentSettings&&this.props.currentSettings[t.id]&&this.props.currentSettings[t.id].isEnabled;return e+(n?1:0)},0);return e===this.props.availableNotifications.length?eg.CheckStateTypesEnum.CHECKED:e?eg.CheckStateTypesEnum.PARTIAL:eg.CheckStateTypesEnum.UNCHECKED},this.state={isOpen:!1}}getAccordionId(){return this.props.category.id.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}renderCheckbox(){let{localize:e,analyticsId:t,classes:n}=this.props,{translate:i}=e,s=this.getTriStateCheckboxState()===eg.CheckStateTypesEnum.CHECKED,r=this.getAccordionId();return f.createElement(g.AnalyticsFormControlLabel,{label:i(this.props.category.displayKey),className:(0,ee.Z)(`js-${r}-category`,n.categoryCheckboxStyles,n.categoryLabelStyles),htmlFor:`stream-setting-label-${r}`,control:f.createElement(g.AnalyticsCheckbox,{id:`stream-setting-label-${r}`,onChange:this.onCategoryToggle,checked:s,analyticsId:`${t}.item.${s?"disable":"enable"}.checkbox`}),analyticsId:`${t}.item.${s?"disable":"enable"}.label`})}renderTristateCheckbox(e){let{localize:t,analyticsId:n,classes:i}=this.props,{translate:s}=t,r=this.getTriStateCheckboxState(),o=this.getAccordionId(),a=r!==eg.CheckStateTypesEnum.CHECKED?"enable":"disable";return f.createElement(g.AnalyticsFormControlLabel,{label:s("ns.streams.category.itemWithMultipleContent",{categoryName:s(this.props.category.displayKey),numContents:e}),className:(0,ee.Z)(`js-${o}-category`,i.categoryTriStateCheckboxStyles,i.categoryLabelStyles),htmlFor:`stream-setting-id-${o}`,control:f.createElement(g.AnalyticsCheckbox,{id:`stream-setting-id-${o}`,checked:this.getTriStateCheckboxState()===eg.CheckStateTypesEnum.CHECKED,indeterminate:this.getTriStateCheckboxState()===eg.CheckStateTypesEnum.PARTIAL,onChange:this.onCategoryToggle,analyticsId:`${n}.category.${a}.checkbox`}),analyticsId:`${n}.category.${a}.label`})}renderTitle(){let{availableNotifications:e}=this.props,t=e.length,n=t>1;return n?this.renderTristateCheckbox(t):this.renderCheckbox()}renderContents(){return f.createElement("ul",{className:this.props.classes.categoryList},this.props.availableNotifications.map(e=>f.createElement(eA,{definition:e,key:e.id,analyticsId:`${this.props.analyticsId}.${e.displayKey.replace(" ","")}`})))}render(){let e=this.props.availableNotifications.length>0,t=this.props.availableNotifications.length>1;if(!e)return null;let{translate:n}=this.props.localize;return f.createElement(eE,{title:this.renderTitle(),contents:this.renderContents(),className:this.getAccordionId(),expanded:this.state.isOpen,onToggle:this.onAccordionToggle,showExpander:t,expanderAriaLabel:n(this.props.category.displayKey),analyticsId:`${this.props.analyticsId}.category.tab`})}}let ex=(0,S.X)(eu((0,E.withStyles)(eI,{name:"StreamSettingsCategory"})(ek)));class eT extends f.PureComponent{constructor(){super(...arguments),this.filterSettings=e=>{let t=this.getCurrentMembership(),n={membership:t,settingsMap:this.props.notificationSettingsMap};return tj.filter(t=>t.category===e&&t.isStreamSettingVisible(n))}}render(){return f.createElement("ul",{className:this.props.classes.styledAccordionList},Object.values(eh).map(e=>f.createElement(ex,{key:e.id,category:e,availableNotifications:this.filterSettings(e),analyticsId:`notificationSettings.stream.panel.categoryList.item.${e.displayKey.replace(" ","")}`})))}getCurrentMembership(){return this.props.userEnrolledInCourse?this.props.isInstructor&&!this.props.isStudent?em.Instructor:!this.props.isInstructor&&this.props.isStudent?em.Student:this.props.isGuest?em.Guest:em.Dual:em.None}}let eP=(0,S.X)(eu((0,E.withStyles)(eb,{name:"StreamSettingsList"})(eT)));class eD extends f.PureComponent{constructor(e){super(e),this.onSettingsUpdated=e=>{this.setState({currentSettings:e}),this.props.onSettingsUpdated(e)};let t=G(e.adminNotificationSettings);this.state={currentSettings:e.currentSettings,notificationSettingsMap:t}}componentDidMount(){let{loadAdminRegistrySettings:e}=this.props;e({key:P})}static getDerivedStateFromProps(e,t){if(!e.isSystemPreferenceLoading&&e.adminNotificationSettings.length>0){let n=G(e.adminNotificationSettings),i=D(e.adminRegistrySettings),s={...n,...i};return{currentSettings:t.currentSettings,notificationSettingsMap:s}}return null}getHelpMessage(){let{t:e,userEnrolledInCourse:t,isInstructor:n,isGuest:i,isStudent:s}=this.props;return e(t?!i||s||n?n?"ns.panel.helpMessage.instructor":"ns.panel.helpMessage.student":"ns.panel.helpMessage.guest":"ns.panel.helpMessage.noEnrollment")}render(){let{t:e}=this.props;return f.createElement(ep.Provider,{value:{currentSettings:this.state.currentSettings,onSettingsUpdated:this.onSettingsUpdated,isInstructor:this.props.isInstructor,isStudent:this.props.isStudent,isGuest:this.props.isGuest,userEnrolledInCourse:this.props.userEnrolledInCourse}},f.createElement("h2",{className:this.props.classes.panelTitle},e("ns.panel.title")),f.createElement("div",null,this.getHelpMessage()),!this.props.isSystemPreferenceLoading&&this.state.notificationSettingsMap?f.createElement(eP,{notificationSettingsMap:this.state.notificationSettingsMap}):f.createElement("div",{className:this.props.classes.spinnerWrapper},f.createElement(w.Spinner,{size:w.SpinnerSize.xLarge})))}}let eG=(0,y.$j)(e=>({adminRegistrySettings:Q.Ys.systemPreference.getSystemPreferenceByKey(e,P),isSystemPreferenceLoading:Q.Ys.systemPreference.isSystemPreferenceLoading(e,P)}),{loadAdminRegistrySettings:Q.Nwg.systemPreference.loadSystemPreference})((0,C.H)((0,E.withStyles)(e=>(0,E.createStyles)({panelTitle:{fontSize:"20px !important",fontWeight:e.typography.fontWeightSemiBold,fontFamily:e.typography.fontFamily+" !important",marginBottom:"17px !important",lineHeight:"28px !important"},spinnerWrapper:{position:"absolute",left:"50%",top:"50%",marginLeft:"-25px"}}),{name:"StreamSettingsPanel"})(eD))),eR=e=>t=>eH(e,t.settingsMap)&&(t.membership===em.Dual||t.membership===em.Student),eB=e=>t=>eH(e,t.settingsMap)&&(t.membership===em.Dual||t.membership===em.Instructor),eL=e=>t=>eH(e,t.settingsMap)&&t.membership!==em.None&&t.membership!==em.Guest,eN=e=>t=>eH(e,t.settingsMap),eO=e=>t=>eF(e,t),eM=e=>(t,n)=>eU(e,t,n);(o=p||(p={})).Announcement="bb-announcement",o.Blog="bb_blog",o.Calendar="bb_calendar",o.Grades="bb_mygrades",o.Message="bb_message",o.Nautilus="bb-nautilus",o.Wiki="bb_Wiki",o.Telemetry="bb_tel";let e$=(e,t)=>t.some(t=>t.includes(e)),eH=(e,t)=>{if(!e||0===e.length)return!0;for(let n=0;n<e.length;n+=1){let i=e[n],s=eV(i),r=t[s];if(r){let e=r.modalities[c.Stream];if(e&&e.isEditable)return!0}}return!1},eF=(e,t)=>{if(!e)return!1;for(let n of e){let e=t.find(e=>n===`${e.source}:${e.event}`&&c.Stream===e.method);if(e&&e.isEnabled)return!0}return!1},eU=(e,t,n)=>{if(!e||0===e.length)return t;let i=e.reduce((e,t)=>{let i=n.find(e=>t===`${e.source}:${e.event}`&&c.Stream===e.method);return i&&e.push(i),e},[]),s=i.length&&i.every(e=>!e.isEditable);return s?i.some(e=>e.isEnabled):t},eV=e=>"COURSE_"+e.replace(":","_");(a=m||(m={})).BlogEntryComment="NN:BlogEntryComment",a.BlogEntryEdited="NN:BlogEntryEdited",a.BlogEntryPosted="NN:BlogEntryPosted",a.Calendar="NN:Calendar",a.GradeAtRisk_GradeBelowThreshold="NN:GradeAtRisk_GradeBelowThreshold",a.GradeAtRisk_GradeInLowest="NN:GradeAtRisk_GradeInLowest",a.GradeLowered="NN:GradeLowered",a.HighActivity="NN:HighActivity",a.HighGrade="NN:HighGrade",a.JournalEntryComment="NN:JournalEntryComment",a.JournalEntryEdited="NN:JournalEntryEdited",a.JournalEntryPosted="NN:JournalEntryPosted",a.LowActivity="NN:LowActivity",a.NoRecentActivity="NN:NoRecentActivity",a.PerformanceIncreased_ActivityIncreased="NN:PerformanceIncreased_ActivityIncreased",a.PerformanceIncreased_GradeIncreased="NN:PerformanceIncreased_GradeIncreased",a.StudentActivityAvailable="NN:StudentActivityAvailable",a.StudentGradeDataAvailable="NN:StudentGradeDataAvailable",a.StudentsFallingBehind="NN:StudentsFallingBehind",a.StudentsFallingBehindAbsent="NN:StudentsFallingBehindAbsent",a.StudentsFallingBehindAbsentFailing="NN:StudentsFallingBehindAbsentFailing",a.StudentsFallingBehindFailing="NN:StudentsFallingBehindFailing",a.WikiEntryComment="NN:WikiEntryComment",a.WikiEntryEdited="NN:WikiEntryEdited",a.WikiEntryPosted="NN:WikiEntryPosted",(l=h||(h={})).AssessmentAttemptAvailableResent="TE:TE_AVAIL_RESEND",l.AssessmentAvailable="TE:TE_AVAIL",l.AssessmentDue="TE:DUE",l.AssessmentNeedsGrading="TE:TE_SUBMIT",l.AssesmentOverdue="TE:OVERDUE",l.GroupAssessmentNeedsGrading="TE:TE_GT_SUBMIT",l.LateAssessmentNeedsGrading="TE:TE_SUBMIT_LATE",l.LateGroupAssessmentNeedsGrading="TE:TE_GT_SUBMIT_LATE",l.PeerSubmissionAttemptAvailableResent="PS:PS_AVAIL_RESEND",l.PeerSubmissionAvailable="PS:PS_AVAIL",l.PeerSubmissionDue="PS:DUE",l.PeerSubmissionNeedsGrading="PS:PS_SUBMIT",l.PeerSubmissionOverdue="PS:OVERDUE",l.LatePeerSubmissionNeedsGrading="PS:PS_SUBMIT_LATE",l.PeerEvaluationAttemptAvailableResent="PE:PE_AVAIL_RESEND",l.PeerEvaluationAvailable="PE:PE_AVAIL",l.PeerEvaluationDue="PE:DUE",l.PeerEvaluationNeedsGrading="PE:PE_SUBMIT",l.PeerEvaluationOverdue="PE:OVERDUE",l.LatePeerEvaluationNeedsGrading="PE:PE_SUBMIT_LATE",l.AssignmentAvailable="AS:AS_AVAIL",l.AssignmentAvailableResend="AS:AS_AVAIL_RESEND",l.AssignmentDue="AS:DUE",l.AssignmentNeedsGrading="AS:AS_ATTEMPT",l.AssignmentOverdue="AS:OVERDUE",l.GroupAssignmentAvailable="AS:AS_GA_AVAIL",l.GroupAssignmentAvailableResend="AS:AS_GA_AVAIL_RESEND",l.GroupAssignmentNeedsGrading="AS:AS_GA_ATTEMPT",l.LateAssignmentNeedsGrading="AS:AS_LATE_ATTEMPT",l.LateGroupAssignmentNeedsGrading="AS:AS_GA_LATE_ATTEMPT",l.BlogNeedsGrading="BL:BL_ATTEMPT",l.GroupBlogNeedsGrading="BL:BL_GR_ATTEMPT",l.ForumNeedsGrading="DF:DF_ATTEMPT",l.GroupForumNeedsGrading="DF:DF_GR_ATTEMPT",l.GroupThreadNeedsGrading="DT:DT_GR_ATTEMPT",l.ThreadNeedsGrading="DT:DT_ATTEMPT",l.GradebookAttemptUpdate="GB:GB_ATT_UPDATED",l.GradebookItemDue="GB:DUE",l.GradebookItemOverdue="GB:OVERDUE",l.GradebookNeedsReconciliation="GB:GB_NEEDS_RECON",l.ManualGradeCleared="GB:GB_GRA_CLEARED",l.ManualGradeUpdated="GB:GB_GRA_UPDATED",l.GroupJournalNeedsGrading="JN:JN_GR_ATTEMPT",l.JournalNeedsGrading="JN:JN_ATTEMPT",l.LateScormItemNeedsGrading="SC:SC_SUBMIT_LATE",l.ScormItemAvailable="SC:SC_AVAIL",l.ScormItemDue="SC:DUE",l.ScormItemOverdue="SC:OVERDUE",l.ScormItemNeedsGrading="SC:SC_SUBMIT",l.ScormItemGradeUpdated="SC:SC_GRA_UPDATED",l.SurveyAvailable="SU:SU_AVAIL",l.SurveyDue="SU:DUE",l.SurveyOverdue="SU:OVERDUE",l.SurveySubmitted="SU:SU_SUBMIT",l.GroupWikiNeedsGrading="WK:WK_GR_ATTEMPT",l.WikiNeedsGrading="WK:WK_ATTEMPT",l.AnnouncementAvailable="AN:AN_AVAIL",l.ContentAvailable="CO:CO_AVAIL",l.CourseAvailable="CR:CR_AVAIL",l.CourseMessageReceived="CM:CM_RCVD",l.QuotaAvailable="QU:QU_AVAIL";let e_=[h.AnnouncementAvailable],eq={id:"InstitutionAnnouncements",category:eh.InstitutionAnnouncements,displayKey:"",canHandle:e=>{let t=e$(e.type,[h.AnnouncementAvailable]);return t&&e.providerId===p.Announcement},defaultSetting:eO(e_),isStreamEntryVisible:eM(e_),isStreamSettingVisible:eN(e_)},ez=[h.AssessmentDue,h.AssignmentDue,h.ScormItemDue,h.SurveyDue,h.GradebookItemDue,h.PeerSubmissionDue,h.PeerEvaluationDue],eW=[h.AssesmentOverdue,h.AssignmentOverdue,h.ScormItemOverdue,h.SurveyOverdue,h.GradebookItemOverdue,h.PeerSubmissionOverdue,h.PeerEvaluationOverdue],ej={id:"GradedItemDue",category:eh.GradedItemDue,displayKey:"ns.streams.definition.GradedItemDue.GradedItemDue",canHandle:e=>e$(e.type,ez),defaultSetting:eO(ez),isStreamEntryVisible:eM(ez),isStreamSettingVisible:eR(ez)},eZ={id:"GradedItemOverdue",category:eh.GradedItemDue,displayKey:"ns.streams.definition.GradedItemDue.GradedItemOverdue",canHandle:e=>e$(e.type,eW),defaultSetting:eO(eW),isStreamEntryVisible:eM(eW),isStreamSettingVisible:eR(eW)},eK=[h.AssessmentAvailable,h.AssignmentAvailable,h.AssessmentAttemptAvailableResent,h.AssignmentAvailableResend,h.GroupAssignmentAvailable,h.GroupAssignmentAvailableResend,h.PeerSubmissionAvailable,h.PeerSubmissionAttemptAvailableResent,h.PeerEvaluationAvailable,h.PeerEvaluationAttemptAvailableResent],eX=[h.SurveyAvailable,h.QuotaAvailable,h.ContentAvailable,h.ScormItemAvailable],eY={id:"NewAssessmentsAdded",category:eh.NewContent,displayKey:"ns.streams.definition.NewContent.NewAssessmentsAdded",canHandle:e=>e$(e.type,eK),defaultSetting:eO(eK),isStreamEntryVisible:eM(eK),isStreamSettingVisible:eL(eK)},eQ={id:"NewContentAdded",category:eh.NewContent,displayKey:"ns.streams.definition.NewContent.NewContentAdded",canHandle:e=>{let t=e$(e.type,eX);return t&&"resource/x-bb-forumlink"!==e.contentHandler},defaultSetting:eO(eX),isStreamEntryVisible:eM(eX),isStreamSettingVisible:eL(eX)},eJ=[h.GradebookAttemptUpdate,h.ManualGradeUpdated,h.ManualGradeCleared,h.ScormItemGradeUpdated],e0={id:"GradesPosted",category:eh.GradesPosted,displayKey:"",canHandle:e=>{let t=e$(e.type,[h.GradebookAttemptUpdate,h.ManualGradeUpdated,h.ManualGradeCleared,h.ScormItemGradeUpdated]);return t||p.Grades===e.type},defaultSetting:eO(eJ),isStreamEntryVisible:eM(eJ),isStreamSettingVisible:eR(eJ)},e1=[h.GroupAssignmentNeedsGrading,h.GroupBlogNeedsGrading,h.GroupForumNeedsGrading,h.GroupJournalNeedsGrading,h.GroupThreadNeedsGrading,h.GroupWikiNeedsGrading,h.AssessmentNeedsGrading,h.AssignmentNeedsGrading,h.GroupAssessmentNeedsGrading,h.LateGroupAssessmentNeedsGrading,h.BlogNeedsGrading,h.ForumNeedsGrading,h.JournalNeedsGrading,h.LateAssessmentNeedsGrading,h.LateAssignmentNeedsGrading,h.LateGroupAssignmentNeedsGrading,h.LateScormItemNeedsGrading,h.ScormItemNeedsGrading,h.ThreadNeedsGrading,h.WikiNeedsGrading,h.PeerSubmissionNeedsGrading,h.LatePeerSubmissionNeedsGrading,h.PeerEvaluationNeedsGrading,h.LatePeerEvaluationNeedsGrading],e2={id:"NewGradeableItems",category:eh.NewGradeableItems,displayKey:"",canHandle:e=>e$(e.type,e1),defaultSetting:eO(e1),isStreamEntryVisible:eM(e1),isStreamSettingVisible:eB(e1)},e3=[m.StudentActivityAvailable],e9=[m.StudentGradeDataAvailable],e4=[m.StudentsFallingBehind],e7=[m.StudentsFallingBehindAbsent],e5=[m.StudentsFallingBehindFailing],e6=[m.StudentsFallingBehindAbsentFailing],e8={id:"StudentActivityAvailable",category:eh.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentActivityAvailable",isStreamEntryVisible:eM(e3),isStreamSettingVisible:eB(e3),canHandle:e=>e.type.includes(p.Telemetry)&&"SufficientActivityData"===e.telemetryNotificationType,defaultSetting:eO(e3)},te={id:"StudentGradeDataAvailable",category:eh.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentGradeDataAvailable",isStreamEntryVisible:eM(e9),isStreamSettingVisible:eB(e9),canHandle:e=>e.type.includes(p.Telemetry)&&"SufficientGradeData"===e.telemetryNotificationType,defaultSetting:eO(e9)},tt={id:"StudentsFallingBehind",category:eh.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentsFallingBehind",isStreamEntryVisible:eM(e4),isStreamSettingVisible:eB(e4),canHandle:e=>e.type.includes(p.Telemetry)&&"StudentsInTrouble"===e.telemetryNotificationType&&!!e.studentsInTrouble&&"0"!==e.studentsInTrouble.studentsInTrouble&&"0"===e.studentsInTrouble.studentsInTroubleAbsent&&"0"===e.studentsInTrouble.studentsInTroubleFailing,defaultSetting:eO(e4)},tn={id:"StudentsFallingBehindAbsent",category:eh.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentsFallingBehindAbsent",isStreamEntryVisible:eM(e7),isStreamSettingVisible:eB(e7),canHandle:e=>e.type.includes(p.Telemetry)&&"StudentsInTrouble"===e.telemetryNotificationType&&!!e.studentsInTrouble&&"0"!==e.studentsInTrouble.studentsInTrouble&&"0"!==e.studentsInTrouble.studentsInTroubleAbsent&&"0"===e.studentsInTrouble.studentsInTroubleFailing,defaultSetting:eO(e7)},ti={id:"StudentsFallingBehindFailing",category:eh.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentsFallingBehindFailing",isStreamEntryVisible:eM(e5),isStreamSettingVisible:eB(e5),canHandle:e=>e.type.includes(p.Telemetry)&&"StudentsInTrouble"===e.telemetryNotificationType&&!!e.studentsInTrouble&&"0"!==e.studentsInTrouble.studentsInTrouble&&"0"===e.studentsInTrouble.studentsInTroubleAbsent&&"0"!==e.studentsInTrouble.studentsInTroubleFailing,defaultSetting:eO(e5)},ts={id:"StudentsFallingBehindAbsentFailing",category:eh.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentsFallingBehindAbsentFailing",isStreamEntryVisible:eM(e6),isStreamSettingVisible:eB(e6),canHandle:e=>e.type.includes(p.Telemetry)&&"StudentsInTrouble"===e.telemetryNotificationType&&!!e.studentsInTrouble&&"0"!==e.studentsInTrouble.studentsInTrouble&&"0"!==e.studentsInTrouble.studentsInTroubleAbsent&&"0"!==e.studentsInTrouble.studentsInTroubleFailing,defaultSetting:eO(e6)},tr=[m.NoRecentActivity],to=[m.GradeAtRisk_GradeBelowThreshold,m.GradeAtRisk_GradeInLowest],ta=[m.GradeLowered],tl=[m.LowActivity],tc=[m.PerformanceIncreased_ActivityIncreased,m.PerformanceIncreased_GradeIncreased],td=[m.HighActivity],tu=[m.HighGrade],tp={id:"NoRecentActivity",category:eh.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.NoRecentActivity",isStreamEntryVisible:eM(tr),isStreamSettingVisible:eR(tr),canHandle:e=>!!e.type.includes(p.Telemetry)&&"NoRecentActivity"===e.telemetryNotificationType,defaultSetting:eO(tr)},tm={id:"GradeAtRisk",category:eh.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.GradeAtRisk",isStreamEntryVisible:eM(to),isStreamSettingVisible:eR(to),canHandle:e=>!!e.type.includes(p.Telemetry)&&("GradeInLowest"===e.telemetryNotificationType||"GradeBelowThreshold"===e.telemetryNotificationType),defaultSetting:eO(to)},th={id:"GradeLowered",category:eh.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.GradeLowered",isStreamEntryVisible:eM(ta),isStreamSettingVisible:eR(ta),canHandle:e=>!!e.type.includes(p.Telemetry)&&"GradeDropped"===e.telemetryNotificationType,defaultSetting:eO(ta)},tg={id:"LowActivity",category:eh.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.LowActivity",isStreamEntryVisible:eM(tl),isStreamSettingVisible:eR(tl),canHandle:e=>!!e.type.includes(p.Telemetry)&&"ActivityInLowest"===e.telemetryNotificationType,defaultSetting:eO(tl)},tf={id:"PerformanceIncreased",category:eh.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.PerformanceIncreased",isStreamEntryVisible:eM(tc),isStreamSettingVisible:eR(tc),canHandle:e=>!!e.type.includes(p.Telemetry)&&("GradeIncreased"===e.telemetryNotificationType||"ActivityIncreased"===e.telemetryNotificationType),defaultSetting:eO(tc)},tb={id:"HighActivity",category:eh.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.HighActivity",isStreamEntryVisible:eM(td),isStreamSettingVisible:eR(td),canHandle:e=>!!e.type.includes(p.Telemetry)&&"ActivityInHighest"===e.telemetryNotificationType,defaultSetting:eO(td)},tv={id:"HighGrade",category:eh.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.HighGrade",isStreamEntryVisible:eM(tu),isStreamSettingVisible:eR(tu),canHandle:e=>!!e.type.includes(p.Telemetry)&&"GradeInHighest"===e.telemetryNotificationType,defaultSetting:eO(tu)},ty=[m.Calendar],tC={id:"Calendar",category:eh.Calendar,displayKey:"",isStreamEntryVisible:eM(ty),isStreamSettingVisible:eN(ty),canHandle:e=>p.Calendar===e.type,defaultSetting:eO(ty)},tS=[h.CourseAvailable],tE={id:"CourseAvailable",category:eh.CourseAvailable,displayKey:"",canHandle:e=>e$(e.type,tS),defaultSetting:eO(tS),isStreamEntryVisible:eM(tS),isStreamSettingVisible:eN(tS)},tI=[m.BlogEntryPosted],tw=[m.BlogEntryEdited],tA=[m.BlogEntryComment],tk={id:"BlogEntryPosted",category:eh.Blog,displayKey:"ns.streams.definition.Blog.BlogEntryPosted",isStreamEntryVisible:eM(tI),isStreamSettingVisible:eL(tI),canHandle:e=>p.Blog===e.type&&"BL_EP"===e.eventType,defaultSetting:eO(tI)},tx={id:"BlogEntryEdited",category:eh.Blog,displayKey:"ns.streams.definition.Blog.BlogEntryEdited",isStreamEntryVisible:eM(tw),isStreamSettingVisible:eL(tw),canHandle:e=>p.Blog===e.type&&"BL_EE"===e.eventType,defaultSetting:eO(tw)},tT={id:"BlogEntryComment",category:eh.Blog,displayKey:"ns.streams.definition.Blog.BlogEntryComment",isStreamEntryVisible:eM(tA),isStreamSettingVisible:eB(tA),canHandle:e=>p.Blog===e.type&&"BL_CP"===e.eventType,defaultSetting:eO(tA)},tP=[m.JournalEntryPosted],tD=[m.JournalEntryEdited],tG=[m.JournalEntryComment],tR={id:"JournalEntryPosted",category:eh.Journal,displayKey:"ns.streams.definition.Journal.JournalEntryPosted",isStreamEntryVisible:eM(tP),isStreamSettingVisible:eL(tP),canHandle:e=>p.Blog===e.type&&"JR_EP"===e.eventType,defaultSetting:eO(tP)},tB={id:"JournalEntryEdited",category:eh.Journal,displayKey:"ns.streams.definition.Journal.JournalEntryEdited",isStreamEntryVisible:eM(tD),isStreamSettingVisible:eL(tD),canHandle:e=>p.Blog===e.type&&"JR_EE"===e.eventType,defaultSetting:eO(tD)},tL={id:"JournalEntryComment",category:eh.Journal,displayKey:"ns.streams.definition.Journal.JournalEntryComment",isStreamEntryVisible:eM(tG),isStreamSettingVisible:eB(tG),canHandle:e=>p.Blog===e.type&&"JR_CP"===e.eventType,defaultSetting:eO(tG)},tN=[m.WikiEntryPosted],tO=[m.WikiEntryEdited],tM=[m.WikiEntryComment],t$={id:"WikiEntryPosted",category:eh.Wiki,displayKey:"ns.streams.definition.Wiki.WikiEntryPosted",isStreamEntryVisible:eM(tN),isStreamSettingVisible:eL(tN),canHandle:e=>p.Wiki===e.type&&"EP"===e.eventType,defaultSetting:eO(tN)},tH={id:"WikiEntryEdited",category:eh.Wiki,displayKey:"ns.streams.definition.Wiki.WikiEntryEdited",isStreamEntryVisible:eM(tO),isStreamSettingVisible:eL(tO),canHandle:e=>p.Wiki===e.type&&"EE"===e.eventType,defaultSetting:eO(tO)},tF={id:"WikiEntryComment",category:eh.Wiki,displayKey:"ns.streams.definition.Wiki.WikiEntryComment",isStreamEntryVisible:eM(tM),isStreamSettingVisible:eL(tM),canHandle:e=>p.Wiki===e.type&&"CP"===e.eventType,defaultSetting:eO(tM)},tU=[h.GradebookNeedsReconciliation],tV={id:"GradesNeedReconciling",category:eh.GradesNeedReconciling,displayKey:"",canHandle:e=>e$(e.type,tU),defaultSetting:eO(tU),isStreamEntryVisible:eM(tU),isStreamSettingVisible:eB(tU)},t_=[h.ContentAvailable],tq={id:"NewDiscussionForum",category:eh.Discussion,displayKey:"ns.streams.definition.Discussion.NewDiscussionForum",canHandle:e=>{let t=e$(e.type,t_);return t&&"resource/x-bb-forumlink"===e.contentHandler},defaultSetting:eO(t_),isStreamEntryVisible:eM(t_),isStreamSettingVisible:eL(t_)},tz=[h.AnnouncementAvailable],tW={id:"CourseAnnouncements",category:eh.CourseAnnouncements,displayKey:"",canHandle:e=>{let t=e$(e.type,tz);return t&&e.providerId===p.Nautilus},defaultSetting:eO(tz),isStreamEntryVisible:eM(tz),isStreamSettingVisible:eN(tz)},tj=Object.values({InstitutionAnnouncements:eq,CourseAnnouncements:tW,GradedItemDue:ej,GradedItemOverdue:eZ,NewAssessmentsAdded:eY,NewContentAdded:eQ,GradesPosted:e0,NewGradeableItems:e2,GradesNeedReconciling:tV,StudentActivityAvailable:e8,StudentGradeDataAvailable:te,StudentsFallingBehind:tt,StudentsFallingBehindAbsent:tn,StudentsFallingBehindFailing:ti,StudentsFallingBehindAbsentFailing:ts,NewDiscussionForum:tq,NoRecentActivity:tp,GradeAtRisk:tm,GradeLowered:th,LowActivity:tg,PerformanceIncreased:tf,HighActivity:tb,HighGrade:tv,Calendar:tC,CourseAvailable:tE,BlogEntryPosted:tk,BlogEntryEdited:tx,BlogEntryComment:tT,JournalEntryPosted:tR,JournalEntryEdited:tB,JournalEntryComment:tL,WikiEntryPosted:t$,WikiEntryEdited:tH,WikiEntryComment:tF}),tZ=(e,t,n)=>{let i=f.createElement(b.g,{locale:n.locale,babelfishInstance:n.babelfishInstance,babelfishFormatInstance:n.babelfishFormatInstance,bundlesToLoad:["notification-settings/locales/[locale]/ns.json"],isRtl:n.isRtl},f.createElement(y.zt,{store:t},f.createElement(g.AnalyticsJssThemeProvider,{theme:"light",isRtl:n.isRtl},f.createElement(eG,{adminNotificationSettings:n.adminNotificationSettings,currentSettings:n.currentSettings,onSettingsUpdated:n.onSettingsUpdated,isGuest:n.isGuest,isInstructor:n.isInstructor,isStudent:n.isStudent,userEnrolledInCourse:n.userEnrolledInCourse}))));v.render(i,e)},tK=(e,t,n)=>{let i=f.createElement(b.g,{locale:n.locale,babelfishInstance:n.babelfishInstance,babelfishFormatInstance:n.babelfishFormatInstance,bundlesToLoad:["notification-settings/locales/[locale]/ns.json"],isRtl:n.isRtl},f.createElement(y.zt,{store:t},f.createElement(g.AnalyticsJssThemeProvider,{theme:"light",isRtl:n.isRtl},f.createElement(ed,{closePanel:n.closePanel,onSettingChange:n.onSettingChange}))));v.render(i,e)},tX=e=>{v.unmountComponentAtNode(e)}},809496:function(e,t,n){"use strict";n.d(t,{OO:function(){return i.O},YK:function(){return s.Y}}),n(562134);var i=n(229582),s=n(853057)},562134:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var i=n(202784),s=n(167013);let r=e=>{let t=(0,i.useRef)();t.current=e,(0,i.useEffect)(()=>s.N.onRouteChanging(e=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,e)}),[])}},229582:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var i=n(202784),s=n(562134);let r=(e,t)=>{let n=(0,i.useCallback)(n=>{e&&(n.preventRouteChange(),t())},[e,t]);(0,s.w)(n)}},853057:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var i=n(202784),s=n(905418),r=n(167013),o=n(562134);let a=e=>{let t=(0,s.N)(),[n,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(),p=(0,i.useCallback)(n=>{var i;let s=void 0!==t&&(null===(i=n.toState.name)||void 0===i?void 0:i.indexOf(t))!==0;!l&&e&&s&&(n.preventRouteChange(),a(!0),u(n))},[l,e,t]);(0,o.w)(p);let m=(0,i.useMemo)(()=>({isCloseInterrupted:n,cancelClose:()=>a(!1),doClose:()=>{var e,t;c(!0),r.N.goRoute(null!==(e=null==d?void 0:d.toState.name)&&void 0!==e?e:"",null!==(t=null==d?void 0:d.toParams)&&void 0!==t?t:{})}}),[n,d]);return m}},470269:function(e,t,n){"use strict";n.d(t,{BF:function(){return a.BF},BJ:function(){return o.BJ},BQ:function(){return o.BQ},Be:function(){return l.Be},C7:function(){return l.C7},EX:function(){return c.E},Eg:function(){return o.Eg},Fq:function(){return o.Fq},Gv:function(){return l.Gv},Hx:function(){return l.Hx},IN:function(){return a.IN},Jf:function(){return o.Jf},Jp:function(){return o.Jp},Jy:function(){return o.Jy},Lb:function(){return a.Lb},Lj:function(){return o.Lj},Ls:function(){return r.L},M0:function(){return o.M0},MS:function(){return l.MS},Nd:function(){return i.N},OH:function(){return l.OH},OO:function(){return s.OO},RK:function(){return o.RK},Re:function(){return o.Re},Rj:function(){return a.Rj},SS:function(){return l.SS},Ty:function(){return l.Ty},UM:function(){return o.UM},Vl:function(){return a.Vl},Vp:function(){return a.Vp},Wd:function(){return l.Wd},XO:function(){return o.XO},YK:function(){return s.YK},YO:function(){return a.YO},Z5:function(){return o.Z5},Zo:function(){return o.Zo},_Y:function(){return a._Y},a9:function(){return d.a},cw:function(){return o.cw},e5:function(){return l.e5},eJ:function(){return o.eJ},ee:function(){return a.ee},el:function(){return a.el},em:function(){return a.em},f8:function(){return r.f},fI:function(){return l.fI},gO:function(){return a.gO},jZ:function(){return a.jZ},k9:function(){return a.k9},l6:function(){return a.l6},lF:function(){return l.lF},mL:function(){return o.mL},nb:function(){return l.nb},nd:function(){return a.nd},oc:function(){return a.oc},p$:function(){return a.p$},pR:function(){return l.pR},rJ:function(){return o.rJ},s6:function(){return o.s6},sn:function(){return a.sn},tk:function(){return a.tk},vs:function(){return o.vs},xB:function(){return a.xB},xN:function(){return l.xN},xh:function(){return o.xh},xp:function(){return o.xp},yf:function(){return l.yf},zo:function(){return l.zo}});var i=n(167013),s=n(809496),r=n(551946),o=n(730948),a=n(860358),l=n(910273),c=n(443169),d=n(127942)},366377:function(e,t,n){"use strict";n.d(t,{f:function(){return o},q:function(){return r}});var i=n(202784),s=n.n(i);let r=(0,i.createContext)(void 0),o=({children:e})=>{let t=(0,i.useRef)(null),[n,o]=(0,i.useState)();return(0,i.useEffect)(()=>{var e,n,i;let s=null===(i=null===(n=null===(e=t.current)||void 0===e?void 0:e.closest("[data-base-state-name]"))||void 0===n?void 0:n.dataset)||void 0===i?void 0:i.baseStateName;o(s)},[]),s().createElement(r.Provider,{value:n},s().createElement("div",{ref:t},e))}},551946:function(e,t,n){"use strict";n.d(t,{L:function(){return s.L},f:function(){return i.f}});var i=n(366377),s=n(722764)},905418:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var i=n(202784),s=n(366377);let r=()=>{let e=(0,i.useContext)(s.q);return e}},722764:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var i=n(202784),s=n(470269),r=n(905418);let o=e=>{let t=(0,r.N)(),[n,o]=(0,i.useState)(),a=(0,i.useRef)(!0);return(0,i.useEffect)(()=>()=>{a.current=!1},[]),(0,i.useEffect)(()=>{if(!e){o(void 0);return}s.Nd.getPeekHref(e,t).then(e=>{a.current&&o(e)}).catch(()=>{a.current&&o(void 0)})},[t,e]),n}},763562:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(345397),s=n(775333);let r={AssessmentSettings:e=>({routeName:i.e.ASSESSMENT_SETTINGS,getArgs:()=>e}),RubricSettings:e=>({routeName:i.e.ASSESSMENT_SETTINGS_RUBRIC_SETTINGS,getArgs:()=>e}),GradeBookItemAssessment:e=>({routeName:s.R.GRADEBOOK_ITEM_ASSESSMENT,getArgs:()=>({gradeitemView:"details",...e})})}},838078:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var i=n(447670);let s={ContentCollection:e=>({routeName:i.x.CONTENT_COLLECTION,getArgs:()=>e})}},967688:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});var i=n(897127),s=n(470269);let r={CopyReport:e=>({routeName:i.X.COPY_REPORT_PEEK_PANEL,getArgs:()=>e}),ImportReport:e=>({routeName:i.X.IMPORT_REPORT_PEEK_PANEL,getArgs:()=>e}),ImportContent:e=>({routeName:i.X.IMPORT_CONTENT_PEEK_PANEL,getArgs:()=>e}),CreateContent:e=>({routeName:i.X.CREATE_CONTENT_PEEK_PANEL,getArgs:()=>e}),CopyContent:e=>({routeName:i.X.COPY_CONTENT_PEEK_PANEL,getArgs:()=>e}),Document:e=>({routeName:i.X.DOCUMENT,getArgs:()=>e}),CreateFolder:e=>({routeName:i.X.CREATE_FOLDER,getArgs:()=>e}),EditFolder:e=>({routeName:i.X.EDIT_FOLDER,getArgs:()=>e}),EditConditionalRelease:e=>({routeName:i.X.CONDITIONAL_RELEASE_PEEK_PANEL,getArgs:()=>e}),EditLearningModule:e=>({routeName:i.X.EDIT_LEARNING_MODULE_PEEK_PANEL,getArgs:()=>e}),BulkEditContent:()=>({routeName:i.X.BULK_EDIT_CONTENT_PEEK_PANEL,getArgs:()=>void 0}),ContentMarket:e=>({routeName:s.cw.CONTENT_MARKET,getArgs:()=>e}),GenericStudentProgress:e=>({routeName:i.X.GENERIC_STUDENT_PROGRES_PEEK_PANEL,getArgs:()=>e}),ContentSearch:()=>({routeName:i.X.CONTENT_SEARCH,getArgs:()=>void 0}),GenerateStructure:e=>({routeName:i.X.GENERATE_STRUCTURE,getArgs:()=>e})}},760871:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var i=n(345393),s=n(241248),r=n(663646);let o={CourseSchedule:e=>({routeName:i.L.COURSE_SCHEDULE,getArgs:()=>e}),CourseGroup:e=>({routeName:r.x.VIEW,getArgs:()=>e}),CourseOutline:e=>({routeName:s.B.COURSE_OUTLINE,getArgs:()=>e})}},774729:function(e,t,n){"use strict";n.d(t,{C7:function(){return o},fI:function(){return r},pR:function(){return s}});var i=n(775333);function s(e){return!!e.memberId||!!e.courseGroupId||!!e.childCourseId}let r=["gradebookView","listViewType","memberId","courseGroupId","gradebookAssessmentType","gradebookCategoryId","gradebookColumnId","childCourseId"],o={GradeDownload:()=>({routeName:i.R.GRADE_DOWNLOAD_SETTINGS,getArgs:()=>{}}),GradeUpload:()=>({routeName:i.R.GRADE_UPLOAD,getArgs:()=>{}}),GradeSettings:()=>({routeName:i.R.GRADE_SETTING,getArgs:()=>{}}),AttemptReceiptSearch:()=>({routeName:i.R.ATTEMPT_RECEIPT_SEARCH,getArgs:()=>{}})}},496526:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var i=n(897293);let s={Tasks:(e={})=>({routeName:i.J.COURSE_TASKS_PANEL,getArgs:()=>e}),Logs:(e={})=>({routeName:i.J.COURSE_LOGS_PANEL,getArgs:()=>e})}},478858:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(430552);let s={DiscussionWithGrading:e=>({routeName:i.J.DISCUSSION_VIEW_WITH_GRADING,getArgs:()=>e}),Conversation:e=>({routeName:i.J.CONVERSATION,getArgs:()=>e}),DiscussionsSettings:()=>({routeName:i.J.DISCUSSIONS_SETTINGS,getArgs:()=>null})}},903653:function(e,t,n){"use strict";n.d(t,{B:function(){return s}});var i=n(251871);let s={EditExternalLink:e=>({routeName:i.r.EDIT_EXTERNAL_LINK,getArgs:()=>e}),WebLinkLaunchFrame:e=>({routeName:i.r.WEB_LINK_LAUNCH_FRAME,getArgs:()=>e})}},220321:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var i=n(730948);let s={EditFile:e=>({routeName:i.Re.EDIT_FILE,getArgs:()=>e}),PreviewFile:e=>({routeName:i.Re.PREVIEW_FILE,getArgs:()=>e})}},383147:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var i=n(961641);let s={JournalWithParticipation:e=>({routeName:i.E.JOURNAL_VIEW_WITH_PARTICIPATION,getArgs:()=>e}),JournalSubmission:e=>({routeName:i.E.JOURNAL_PARTICIPATION_DETAIL,getArgs:()=>e}),JournalSubmissionFeedback:e=>({routeName:i.E.JOURNAL_SUBMISSION_FEEDBACK,getArgs:()=>e})}},706172:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var i=n(733003);let s={EditLti:e=>({routeName:i.U.LTI_EDIT,getArgs:()=>e}),EditLtiPlacement:e=>({routeName:i.U.LTI_EDIT_PLACEMENT,getArgs:()=>e}),EditLtiCloudDocument:e=>({routeName:i.U.LTI_LAUNCH_PEEK,getArgs:()=>e}),LaunchLti:e=>({routeName:i.U.LTI_LAUNCH,getArgs:()=>e}),LaunchLtiPeek:e=>({routeName:i.U.LTI_LAUNCH_PEEK,getArgs:()=>e}),LaunchLtiFrame:e=>({routeName:i.U.LTI_LAUNCH_FRAME,getArgs:()=>e})}},897486:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var i=n(713845);let s={QuestionAnalysis:e=>({routeName:i.$.QUESTION_ANALYSIS_REPORT,getArgs:()=>e})}},910273:function(e,t,n){"use strict";n.d(t,{Be:function(){return u.B},C7:function(){return c.C7},Gv:function(){return f.G},Hx:function(){return h.H},MS:function(){return m.M},OH:function(){return s.O},SS:function(){return a.S},Ty:function(){return b.T},Wd:function(){return r.W},e5:function(){return i.e},fI:function(){return c.fI},lF:function(){return g.l},nb:function(){return l.n},pR:function(){return c.pR},xN:function(){return p.x},yf:function(){return d.y},zo:function(){return o.z}});var i=n(763562),s=n(383147),r=n(560912),o=n(838078),a=n(967688),l=n(760871),c=n(774729),d=n(478858),u=n(903653),p=n(220321),m=n(706172),h=n(897486);n(643936);var g=n(440329),f=n(161191),b=n(496526)},560912:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var i=n(345109);let s={RubricEvaluation:e=>({routeName:i.m.RUBRIC_EVALUATION,getArgs:()=>e}),RubricView:e=>({routeName:i.m.RUBRIC_VIEW,getArgs:()=>e})}},440329:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var i=n(412152);let s={EditScorm:e=>({routeName:i.v.SCORM_EDIT,getArgs:()=>e}),ScormAnalyticsReport:e=>({routeName:i.v.SCORM_ANALYTICS_REPORT,getArgs:()=>e}),ScormOverviewStudent:e=>({routeName:i.v.SCORM_OVERVIEW_STUDENT,getArgs:()=>e}),ScormLaunchFrame:e=>({routeName:i.v.SCORM_LAUNCH_FRAME,getArgs:()=>e}),GradebookItemScormSubmissions:e=>({routeName:i.v.GRADEBOOK_ITEM_SCORM_SUBMISSIONS,getArgs:()=>e})}},161191:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var i=n(652398);let s={ContentActivityInDetail:e=>({routeName:i.v.CONTENT_ACTIVITY_IN_DETAIL,getArgs:()=>e}),DiscussionForumInsights:e=>({routeName:i.v.DISCUSSION_FORUM_INSIGHTS,getArgs:()=>e}),CourseAlerts:(e={})=>({routeName:i.v.TELEMETRY_SETTINGS,getArgs:()=>e})}},606325:function(e,t,n){"use strict";n.d(t,{E:function(){return o}});var i=n(408027),s=n(229430),r=n(778798);function o(e,t,n){var o;let a=n.id;return(null===(o=n.courseRole)||void 0===o?void 0:o.roleBucket)===i.O8v.Taking?(0,r.g)({courseId:e,membershipId:a,userId:t}):(0,s.r)({membershipId:a})}},443169:function(e,t,n){"use strict";n.d(t,{E:function(){return i.E}});var i=n(606325)},807057:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var i=n(345397);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.e.ASSESSMENT_EXTERNAL_OVERVIEW}}let r=e=>new s(e)},510219:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(345397);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.e.ASSESSMENT_OVERVIEW}}let r=e=>new s(e)},510993:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var i=n(345397);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.e.ASSESSMENT_SETTINGS}}let r=e=>new s(e)},229430:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});var i=n(241248);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.B.EDIT_ENROLLMENT}}let r=e=>new s(e)},338254:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});var i=n(608566);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.J.EDIT_QUESTION_BANK}}let r=e=>new s(e)},257389:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(775333);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.R.PER_ASSESSMENT_SETTINGS}}let r=e=>new s(e)},777317:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var i=n(775333);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.R.PER_GRADABLE_ITEM_SETTINGS}}let r=e=>new s(e)},556539:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var i=n(663646);class s{constructor(e){this.args=e}get routeName(){return i.x.EXPORT_GROUP_SET}getArgs(){return this.args}}let r=e=>new s(e)},571160:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var i=n(775333);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.R.GRADEBOOK_ITEM_ASSESSMENT}}let r=e=>new s(e)},186014:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i=n(775333);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.R.PER_ASSESSMENT_GROUP_SETTING}}let r=e=>new s(e)},807999:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var i=n(663646);class s{constructor(e){this.args=e}get routeName(){return i.x.GROUP_MEMBERS_LIST}getArgs(){return this.args}}let r=e=>new s(e)},860358:function(e,t,n){"use strict";n.d(t,{BF:function(){return c.B},IN:function(){return S.I},Lb:function(){return r.L},Rj:function(){return l.R},Vl:function(){return I.V},Vp:function(){return a.V},YO:function(){return C.Y},_Y:function(){return E._},ee:function(){return g.e},el:function(){return i.e},em:function(){return m.e},gO:function(){return y.g},jZ:function(){return p.j},k9:function(){return b.k},l6:function(){return o.l},nd:function(){return f.n},oc:function(){return u.o},p$:function(){return h.p},sn:function(){return d.s},tk:function(){return s.t},xB:function(){return v.x}});var i=n(510219),s=n(807057),r=n(510993);n(930878),n(290622),n(529513),n(229430);var o=n(338254),a=n(257389),l=n(777317),c=n(556539),d=n(571160),u=n(807999),p=n(186014),m=n(807347),h=n(855152),g=n(632002),f=n(67567),b=n(721825),v=n(203500);n(730591);var y=n(778798),C=n(366811),S=n(365390),E=n(358603),I=n(880898)},807347:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(663646);class s{get routeName(){return i.x.IMPORT_GROUP_SET}getArgs(){}}let r=()=>new s},855152:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var i=n(775333);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.R.OFFLINE_GRADE_AND_FEEDBACK}}let r=e=>new s(e)},632002:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(775333);class s{get routeName(){return i.R.GRADE_ITEM_OVERALL_GRADE}getArgs(){}}let r=()=>new s},67567:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});var i=n(608566);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.J.IMPORT_DETAILS}}let r=e=>new s(e)},721825:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var i=n(241248);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.B.COURSE_MESSAGE}}let r=e=>new s(e)},203500:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var i=n(241248);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.B.ACCOMMODATION}}let r=e=>new s(e)},366811:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var i=n(663646);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.x.VIEW_GROUP_ENROLL}}let r=e=>new s(e)},358603:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var i=n(652398);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.v.INSTRUCTOR_DETAILS}}let r=e=>new s(e)},778798:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var i=n(241248);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.B.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES}}let r=e=>new s(e)},880898:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(241248);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.B.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES}}let r=e=>new s(e)},365390:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var i=n(775333);class s{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return i.R.SUBMISSION_DEEP_LINK}}let r=e=>new s(e)},730948:function(e,t,n){"use strict";n.d(t,{BJ:function(){return p.B},BQ:function(){return l.B},Eg:function(){return m.E},Fq:function(){return s.F},Jf:function(){return x.J},Jp:function(){return y.J},Jy:function(){return c.J},Lj:function(){return v.L},M0:function(){return h.M},RK:function(){return d.R},Re:function(){return A.R},UM:function(){return C.U},XO:function(){return b.X},Z5:function(){return T},Zo:function(){return o.Z},cw:function(){return a.c},eJ:function(){return r.e},mL:function(){return k.m},rJ:function(){return E.r},s6:function(){return f.s},vs:function(){return f.v},xh:function(){return S.x},xp:function(){return u.x}});var i=n(428346),s=n(989106),r=n(345397),o=n(69609),a=n(693929),l=n(241248),c=n(430552),d=n(775333),u=n(663646),p=n(412499),m=n(961641),h=n(402316),g=n(345109),f=n(652398),b=n(897127),v=n(345393),y=n(608566),C=n(733003),S=n(447670),E=n(251871),I=n(412152),w=n(713845),A=n(37150),k=n(958417),x=n(897293);let T={Admin:i.i,Announcement:s.F,Assessment:r.e,Base:o.Z,Calendar:v.L,ContentCollection:S.x,ContentMarket:a.c,Course:l.B,CourseTasks:x.J,Content:b.X,Engagement:c.J,ExternalLink:E.r,File:A.R,Goals:k.m,Grade:d.R,Group:u.x,Integration:p.B,Journal:m.E,Lti:C.U,Profile:h.M,QuestionAnalysis:w.$,QuestionBanks:y.J,Rubric:g.m,Scorm:I.v,Telemetry:f.v}},652398:function(e,t,n){"use strict";var i,s;n.d(t,{s:function(){return i},v:function(){return r}}),(s=i||(i={})).CONTENT_ACTIVITY_IN_DETAIL="telemetryContentActivityInDetail",s.DIRECT_TO_COURSE="directToCourse",s.DISCUSSION_FORUM_INSIGHTS="telemetryDiscussionForumInsights",s.INSTRUCTOR_CLASS="telemetryInstructorClass",s.INSTRUCTOR_DETAILS="telemetryInstructorDetails",s.INSTRUCTOR_DYNAMIC="instructorDynamic",s.STUDENT_FIND_A_STUDY_PARTNER="telemetryStudentFindAStudyPartner",s.STUDENT_HIGH_PERFORMANCE="telemetryStudentHighPerformance",s.STUDENT_LOW_ACTIVITY="telemetryStudentLowActivity",s.STUDENT_LOW_GRADES="telemetryStudentLowGrades",s.STUDENT_PROGRESS="telemetryStudentProgress";let r={INSTRUCTOR_DYNAMIC:i.INSTRUCTOR_DYNAMIC.toString(),DIRECT_TO_COURSE:i.DIRECT_TO_COURSE.toString(),CONTENT_ACTIVITY_IN_DETAIL:i.CONTENT_ACTIVITY_IN_DETAIL.toString(),DISCUSSION_FORUM_INSIGHTS:i.DISCUSSION_FORUM_INSIGHTS.toString(),INSTRUCTOR_DETAILS:i.INSTRUCTOR_DETAILS.toString(),INSTRUCTOR_CLASS:i.INSTRUCTOR_CLASS.toString(),STUDENT_HIGH_PERFORMANCE:i.STUDENT_HIGH_PERFORMANCE.toString(),STUDENT_LOW_ACTIVITY:i.STUDENT_LOW_ACTIVITY.toString(),STUDENT_LOW_GRADES:i.STUDENT_LOW_GRADES.toString(),STUDENT_FIND_A_STUDY_PARTNER:i.STUDENT_FIND_A_STUDY_PARTNER.toString(),STUDENT_PROGRESS:i.STUDENT_PROGRESS.toString(),TELEMETRY_SETTINGS:"telemetry-settings"}},127942:function(e,t,n){"use strict";function i(e){return{calendarId:e.calendarId,itemSourceType:e.itemSourceType,itemSourceId:e.itemSourceId,recurRules:{repeatRuleType:e.repeatRuleType,repeatRuleCourseId:e.repeatRuleCourseId,repeatRuleUserId:e.repeatRuleUserId}}}n.d(t,{a:function(){return i}})},217347:function(e,t,n){"use strict";n.d(t,{I:function(){return I}});var i=n(202784),s=n.n(i),r=n(410628),o=n(423704),a=n(958299),l=n(137444),c=n(188505),d=n(281699);let u=(0,d.makeStyles)(e=>(0,d.createStyles)({sessionDebugButton:{width:"100%","& input":{borderWidth:"0px",marginBottom:"0px"},"& .copyButton":{minWidth:"0px",paddingLeft:"10px"}},errorText:{color:e.palette.error.main,fontSize:e.typography.fontSizeSmall,textAlign:"left"}}));var p=n(951248),m=n(273386);let h=()=>{let e=(0,m.Lx)();(0,i.useEffect)(()=>{e(p.Nwg.sessionDebug.resetSessionDebugState())},[e]);let t=(0,m.pJ)(p.Ys.sessionDebug.isUpdating),n=(0,m.pJ)(p.Ys.sessionDebug.getLogCode),s=(0,m.pJ)(p.Ys.sessionDebug.getSubmissionErrorCode),r=(0,i.useCallback)(t=>{e(p.Nwg.sessionDebug.submitSessionDebug(t))},[e]);return{submitSessionDebug:r,isUpdating:t,logCode:n,submissionErrorCode:s}};var g=n(47230);let f=()=>{let[e,t]=(0,i.useState)(!1),n=(0,i.useCallback)(e=>{(0,g.nx)(e),t(!0)},[]),s=(0,i.useCallback)(()=>{t(!1)},[]);return[e,n,s]};var b=n(327688),v=n(457706);let y=(0,d.makeStyles)(e=>(0,d.createStyles)({checkmark:{color:e.palette.success.main}})),C=e=>{let{isTextCopied:t}=e,n=y().checkmark;return t?i.createElement(b.Check,{className:n}):i.createElement(v.F,null)};var S=n(906277),E=n(408027);let I=e=>{let{ariaDescribedby:t,sessionDebug:n}=e,i=(0,r.q)(),{sessionDebugButton:d,errorText:p}=u(),{submitSessionDebug:m,isUpdating:g,logCode:b,submissionErrorCode:v}=h(),[y,I]=f(),w=s().createElement(c.AnalyticsTooltip,{analyticsId:"supportPanel.sessionDebug.codeCopied.tooltip",title:i("supportPanel.sessionDebug.codeCopiedTooltipText"),placement:"top-end",PopperProps:{style:{zIndex:1000100},open:y}},s().createElement(a.AnalyticsIconButton,{className:"copyButton",analyticsId:"supportPanel.sessionDebug.copyLogCode.button",onClick:()=>I(b),"aria-label":i(y?"supportPanel.sessionDebug.codeCopiedButtonAriaLabel":"supportPanel.sessionDebug.copyCodeButtonAriaLabel",{logCode:b})},s().createElement(C,{isTextCopied:y})));return b?s().createElement(l.L,{className:d,analyticsId:"supportPanel.sessionDebug.logCode.textDisplay",disabled:!0,InputProps:{endAdornment:w},value:b}):s().createElement(s().Fragment,null,s().createElement(o.x,{"aria-describedby":t,className:d,analyticsId:"supportPanel.sessionDebug.submit.button",onClick:()=>m(n),disabled:g||v>0},i("supportPanel.sessionDebug.submissionButtonText")),v>0&&s().createElement("p",{className:(0,S.Z)(p,"js-error-text")},i(v===E.oji.TooManyRequests?"supportPanel.sessionDebug.submissionQuotaText":"supportPanel.sessionDebug.submissionErrorText")))}},852512:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},i7:function(){return o},ir:function(){return u},fz:function(){return l},ko:function(){return C},gM:function(){return y},cm:function(){return m},dn:function(){return h},wI:function(){return f},JE:function(){return b}}),(r=o||(o={})).ContentUpdate="content-update",r.CloseFolderById="close-folder-immediately-by-id",r.UpdateReviewState="update-state",r.RouterStateChangeStart="$stateChangeStart";var i,s,r,o,a,l,c=n(202784);let d=(0,c.createContext)(void 0),u=d.Provider;function p(){let e=(0,c.useContext)(d);if(!e)throw Error("[Transit Services]: Invalid Scope Context");return e}function m(){let e=p();return(0,c.useMemo)(()=>e.$applyAsync.bind(e),[e])}function h(e,t=[]){let n=p(),[{watchedValue:i},s]=(0,c.useState)(()=>({watchedValue:e(n)}));return(0,c.useEffect)(()=>{let t=n.$watchCollection(e,e=>{s({watchedValue:e})});return t},t),i}var g=n(465139);function f(e,t){let n=p(),i=(0,g.zX)(t);(0,c.useEffect)(()=>{let t=n.$on(e,(e,...t)=>{i(e,...t)});return t},[e,n,i])}function b(e,t=[]){let n=p(),[{watchedValue:i},s]=(0,c.useState)(()=>({watchedValue:e(n)}));return(0,c.useEffect)(()=>{let t=n.$watch(e,e=>{s({watchedValue:e})},!0);return t},t),i}(i=a||(a={})).Approved="Approved",i.Excluded="Excluded",i.NeedsApproval="NeedsApproval",(s=l||(l={})).Scorm="ScormService",s.Lti="LtiService",s.CurrentCourseMembership="CurrentCourseMembershipService",s.ConditionalReleaseCourseModelOperations="ConditionalReleaseCourseModelOperations",s.Context="ContextService",s.ContentIcon="ContentIconService",s.Entitlement="EntitlementService",s.Ally="AllyService",s.Content="ContentService",s.PeerReview="PeerReview",s.CreateContentCourseModelOperations="CreateContentCourseModelOperations",s.DeleteContentCourseModelOperations="DeleteContentCourseModelOperations",s.LearningModuleRefreshChildrenOperations="LearningModuleRefreshChildrenOperations",s.ContentFolderRefresher="ContentFolderRefresher",s.CloudDriveService="CloudDriveService",s.AngularMenuCloserService="AngularMenuCloserService",s.Rubric="Rubric";let v=new Map,y=e=>{v.set(e.key,e)};function C(e){let t=v.get(e);if(!t)throw Error(`No service found with key: ${e}
Did you forget to register a service with that key?`);return t}},396277:function(e,t,n){"use strict";n.d(t,{Mg:function(){return E},xP:function(){return y},TZ:function(){return C}});var i=n(202784),s=n.n(i),r=n(273386),o=n(398435),a=n(410628),l=n(555342),c=n(281699);let d=(0,c.makeStyles)(e=>(0,c.createStyles)({container:{"& > div":{width:"100%"}},comboboxWidth:{width:"100%"},comboboxReset:{"& input":{border:0,margin:"0px",minHeight:"auto",height:"auto"},"& input:focus":{boxShadow:"none"}},description:{color:e.palette.text.hint,marginTop:"10px"}}));var u=n(72779),p=n.n(u);let m="user-profile-pronouns-description",h=({analyticsId:e,selectedPronouns:t,approvedPronouns:n,onPronounsChanged:r})=>{var c,u;let h=(0,a.q)(),g=d(),f=(0,i.useCallback)(e=>{r(e)},[r]);return s().createElement("div",{className:g.container},s().createElement(o.AnalyticsCombobox,{strings:(0,l.Jv)({announceSearchResults:(e,t)=>h("userProfile.pronouns.combobox.comboboxSuggestion.pronounsAvailableAlertText",{count:e,searchString:t}),noResults:e=>h("userProfile.pronouns.combobox.comboboxSuggestion.noPronounsFound",{searchString:e})}),classes:{root:p()(g.comboboxReset,g.comboboxWidth)},isMulti:!0,analyticsId:e,isClearable:!0,id:"user-profile-pronouns-control",label:h("userProfile.pronouns.combobox.label"),placeholder:h("userProfile.pronouns.combobox.placeholder"),value:null!==(c=null==t?void 0:t.map(e=>({value:e,label:e})))&&void 0!==c?c:[],options:null!==(u=null==n?void 0:n.map(e=>({value:e.name,label:e.name})))&&void 0!==u?u:[],onChange:f,"aria-describedby":m}),s().createElement(o.AnalyticsTypography,{id:m,className:g.description,component:"p"},h("userProfile.pronouns.description")))};var g=n(951248),f=n(408027);let b=(0,c.makeStyles)(e=>(0,c.createStyles)({requestPronounDescriptionRoot:{marginTop:"10px"},requestPronounFormRoot:{width:"100%",marginTop:"15px"},requestPronounsFormInputRoot:{"&$requestPronounsFormInputRoot":{paddingRight:0}},requestPronounsFormInputLabel:{fontWeight:e.typography.fontWeightBold},requestPronounsFormInputSendButton:{borderRadius:0}})),v=({analyticsId:e,approvedPronouns:t})=>{let n=(0,a.q)(),s=b(),[l,c]=i.useState(""),[d,u]=i.useState(""),[p,m]=i.useState(!1),[h,v]=i.useState(!1),y=(0,r.Lx)(),C=i.useCallback(e=>{let i=e.target.value;c(i);let s=!!(null==t?void 0:t.find(e=>{var t;return(null===(t=null==e?void 0:e.name)||void 0===t?void 0:t.localeCompare(i))===0}));if(s){u(n("userProfile.pronouns.request.pronounExists"));return}""!==d&&u("")},[t,d,n]),S=i.useCallback(()=>{y(g.Nwg.userPronouns.addSystemPronoun({name:l,status:f.xN_.Pending})).then(()=>{u(""),v(!0)}).catch(e=>{e instanceof g.IK&&u(n("admin-pages.approved-pronouns.list.add-option-xss-violation"))})},[l,y,n]),E=p&&h,I=p&&!h,w=!p,A={};return""!==d&&(A.error=!0,A.helperText=d),i.createElement(i.Fragment,null,E&&i.createElement(o.AnalyticsTypography,{className:s.requestPronounDescriptionRoot,"aria-live":"polite",role:"status"},n("userProfile.pronouns.request.sent")),I&&i.createElement(o.AnalyticsTextField,{classes:{root:s.requestPronounFormRoot},analyticsId:`${e}.request.inputField`,id:"request-new-pronouns",label:n("userProfile.pronouns.request.label"),placeholder:n("userProfile.pronouns.request.placeholder"),value:l,onChange:C,...A,InputLabelProps:{classes:{root:s.requestPronounsFormInputLabel}},InputProps:{endAdornment:i.createElement(o.AnalyticsInputAdornment,{analyticsId:`${e}.input.adornment`,id:"send-pronoun-request",position:"end",disableTypography:!0},i.createElement(o.AnalyticsPrimaryButton,{classes:{root:s.requestPronounsFormInputSendButton},onClick:S,analyticsId:`${e}.request.send`,disabled:""!==d||""===l},n("userProfile.pronouns.request.sendLabel"))),classes:{root:s.requestPronounsFormInputRoot}}}),w&&i.createElement(o.AnalyticsTypography,{className:s.requestPronounDescriptionRoot},n("userProfile.pronouns.request.description")+" ",i.createElement(o.AnalyticsLink,{analyticsId:`${e}.pronouns.request.show.inputField`,"aria-label":n("userProfile.pronouns.request.makeRequestAriaLabel"),component:"button",onClick:()=>m(!0)},n("userProfile.pronouns.request.makeRequest"))))},y=e=>{let t=(0,a.q)(),n=(0,r.c_)(),s=(0,r.YO)(),l=n.loading||s.loading;return i.createElement("div",null,l&&i.createElement(o.AnalyticsCircularProgress,{ariaLabel:t("userProfile.pronouns.loadingAriaLabel"),size:"small"}),!l&&i.createElement(i.Fragment,null,i.createElement(h,{...e,analyticsId:"userProfile.pronouns.TagPicker",approvedPronouns:s.list}),n.enabled&&i.createElement(v,{approvedPronouns:s.list,analyticsId:"userProfile.pronouns"})))};function C(e){let t=e.pronouns||"";return t.split(",").map(e=>e.trim()).join(", ")}var S=n(553493);let E=e=>{let{onAudioRecorded:t,onAudioDeleted:n,src:s}=e,r=(0,a.q)(),o=new S.or(e=>t(e));return i.createElement(l.G0,{recordLabel:r("userProfile.pronunciation.recordButtonLabel"),playLabel:r("userProfile.pronunciation.playButtonLabel"),onAudioDeleted:n,analyticsId:"userProfile.pronunciation",recordingSession:o,src:s})}},520675:function(e,t,n){"use strict";function i(e,t){return(null!=t?t:[{tag:"table",replacementText:""},{tag:"math",replacementText:"",replacementTextPlural:""}]).forEach(t=>{if(t.replacementTextPlural&&e.body.querySelectorAll(`body > p > ${t.tag}`).forEach(e=>{var t;if((null===(t=e.parentElement)||void 0===t?void 0:t.nodeName)==="P"){let t=[];e.parentElement.childNodes.forEach(e=>{t.push(e)}),e.parentElement.replaceWith(...t)}}),t.tagQuery&&t.replacementAttribute){let n=t.replacementAttribute;e.body.querySelectorAll(t.tagQuery).forEach(e=>{e.hasAttribute(n)&&e.replaceWith(e.getAttribute(n))})}let n=!1,i=t.tag?Array.from(e.body.querySelectorAll(t.tag)):[];i.forEach(i=>{var s,r,o,a,l;let c=i.previousSibling,d=function(e){var t,n,i;let s=!0,r=!0,o=e;for(;s&&r;)s=(null==(o=null!==(t=null==o?void 0:o.nextSibling)&&void 0!==t?t:null)?void 0:o.nodeName)==="SPAN"||(null==o?void 0:o.nodeName)==="#text",r=(null===(n=null==o?void 0:o.textContent)||void 0===n?void 0:n.trim())===""||(null===(i=null==o?void 0:o.textContent)||void 0===i?void 0:i.trim())==="\n";return o}(i);if((null==c?void 0:c.nodeName)==="BR"&&(null===(s=i.parentElement)||void 0===s||s.removeChild(c)),(null==d?void 0:d.nodeName)==="BR"&&(null===(r=i.parentElement)||void 0===r||r.removeChild(d)),i.nodeName===(null==d?void 0:d.nodeName)&&t.replacementTextPlural)n=!0,i.remove();else{let s=e.createElement("p");s.innerHTML=n?null!==(o=t.replacementTextPlural)&&void 0!==o?o:"":null!==(a=t.replacementText)&&void 0!==a?a:"",null===(l=i.parentElement)||void 0===l||l.replaceChild(s,i),n=!1}})}),e}n.d(t,{B:function(){return r},K:function(){return i}});let s=(e,t)=>{var n;3===e.nodeType&&(null===(n=e.textContent)||void 0===n?void 0:n.trim())?t.push(e.textContent.trim()):e.firstChild&&!e.hasAttribute("data-bbtype")&&s(e.firstChild,t),e.nextSibling&&s(e.nextSibling,t)};function r(e,t){let n=i(new DOMParser().parseFromString(e,"text/html"),t),r=[];return s(n.body,r),r.join(" ")}},739295:function(e,t,n){"use strict";n.d(t,{m:function(){return s},t:function(){return i}});let i=e=>2>Math.abs(e.scrollHeight-e.clientHeight-e.scrollTop),s=e=>{let t=document.createElement("textarea");return t.innerHTML=e,t.value}},678943:function(e,t,n){"use strict";n.d(t,{Gg:function(){return p},yZ:function(){return function e(t){return t.reduce((t,n)=>"directory"===n.type?t+e(n.children):t+1,0)}},fQ:function(){return function e(t){let n=[];return t.forEach(t=>{"file"===t.type?i.includes(t.file.name.toLowerCase())||n.push(t):"directory"===t.type&&n.push({...t,children:e(t.children)})}),n}},L2:function(){return u}});let i=[".ds_store","thumbs.db","desktop.ini"];function s(e){return!!e&&"file"in e}function r(e){return!!e&&"createReader"in e}function o(e){return new Promise((t,n)=>{e.readEntries(t,n)})}async function*a(e){let t=e.createReader(),n=await o(t);for(;n.length>0;)yield*n.values(),n=await o(t)}async function l(e,t){let n=null;if((null==t?void 0:t.getAsFile)?n=null==t?void 0:t.getAsFile():s(e)&&(n=await new Promise((t,n)=>{e.file(t,n)})),n&&!(null==e?void 0:e.isDirectory))return{type:"file",name:n.name,file:n}}async function c(e){return{type:"directory",name:e.name,children:await d(e)}}async function d(e){if(!r(e))return[];let t=[];for await(let n of a(e))s(n)?t.push(l(n)):r(n)&&t.push(c(n));return Promise.all(t)}async function u(e){var t;if(!(null===(t=e.dataTransfer)||void 0===t?void 0:t.items))return[];let n=e.dataTransfer.items,i=[];for(let e=0;e<n.length;e++)n[e]&&i.push(n[e]);let s=await Promise.all(i.map(e=>{let t=e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry();return t?t.isDirectory?c(t):l(t,e):void 0}));return s.filter(e=>!!e)}let p=25},359655:function(e,t,n){"use strict";n.d(t,{o:function(){return r},s:function(){return s}});let i=null,s=(e,t)=>(null!==i&&(i.remove(),i=null),new Promise((n,s)=>{(i=document.createElement("input")).setAttribute("id","id_file_upload"),i.setAttribute("type","file"),i.setAttribute("accept",e),i.setAttribute("multiple",`${t}`),i.style.display="none",document.body.appendChild(i),i.addEventListener("change",()=>{i&&null!==i.files?n(i.files):s(Error("File selection failed")),null==i||i.remove(),i=null}),i.click()})),r=(e,t)=>{let n=t.map(e=>e.toLowerCase()),i=Array.from(e).map(e=>`.${e.name.toLowerCase().split(".").pop()}`);return i.every(e=>n.includes(e))}},443400:function(e,t,n){"use strict";let i;n.d(t,{r9:function(){return F.r},Gg:function(){return W.Gg},cY:function(){return z.c},Ou:function(){return w},HD:function(){return O},hi:function(){return I},uI:function(){return h},yZ:function(){return W.yZ},m9:function(){return s.m},vZ:function(){return r.v},qR:function(){return a.q},_Y:function(){return E},fQ:function(){return W.fQ},xx:function(){return A},SV:function(){return c},Df:function(){return q},mg:function(){return d},L2:function(){return W.L2},AH:function(){return k},BD:function(){return H.B},dT:function(){return R},gj:function(){return C},re:function(){return D},t0:function(){return s.t},eY:function(){return u},s6:function(){return o.s},Yo:function(){return b},ul:function(){return $},hm:function(){return M},fL:function(){return v},KJ:function(){return H.K},rB:function(){return N},G1:function(){return S},ih:function(){return f},RR:function(){return m},U0:function(){return Z},ox:function(){return o.o}});var s=n(739295),r=n(73245),o=n(359655),a=n(144942);let l=/^[^\/]*\/\/[^\/]+/;function c(e){var t;let n=l.exec(e);return null!==(t=null==n?void 0:n[0])&&void 0!==t?t:e}function d(){return i||void 0===window.location||(i=c(window.location.href)),i}function u(e){return 0===e.indexOf("https://")}let p=/^[a-zA-Z]*:?\/\//;function m(e){return p.test(e)}function h(e,t){return e&&0>e.indexOf("://")&&0!==e.indexOf("//")&&("/"!==e[0]&&(e="/"+e),e=t?t+e:d()+e),e}let g=/[^\?#]*/;function f(e){var t,n;return e&&null!==(n=null===(t=g.exec(e))||void 0===t?void 0:t[0])&&void 0!==n?n:e}function b(e){m(e)||(e="http://"+e);let t=window.open(e,"_blank");return t&&(t.opener=null),t}function v(e){window.location.replace(e)}let y=/^https?:/;function C(e){return e?e.replace(y,""):""}function S(e){return e&&e.indexOf("://")>=0?e.substring(e.indexOf("://")+3):e}function E(e){return(0,(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split("?")[0]).split(":")[0]}function I(e){let t=e.indexOf("?");if(t<0)return{};let n=e.substring(t+1),i=n.split("&"),s={};return i.forEach(e=>{let t=e.split("=");s[t[0]]=decodeURIComponent(t[1])}),s}function w(e,t,n){return 0>e.indexOf(t+"=")?e+(0>e.indexOf("?")?"?":"&")+t+"="+n:e}function A(e,t){let n=w(e,"isForcedDownload","true");return w(n,"downloadFileName",encodeURIComponent(t))}function k(e){let t=e.split("/");return t[t.length-1]}let x=/[\[]/,T=/[\]]/,P=/\+/g;function D(e,t){e=e.replace(x,"\\[").replace(T,"\\]");let n=RegExp("[\\?&]"+e+"=([^&#]*)"),i=n.exec(t);return null===i?"":decodeURIComponent(i[1].replace(P," "))}var G=n(579633);function R(e,t){var n;return"Y"===t&&null!==(n=e.preferredDisplayName)&&void 0!==n?n:G.PreferredDisplayName.Given}var B=n(399882);function L(e,t){let n=setTimeout(t,36e5);return e=>{clearTimeout(n),e&&e()}}function N(e){let t={...e,legacySetup:L};return(0,B.I$)(t)}let O=new class{constructor(){this.readPolite=()=>{},this.readAssertive=()=>{}}},M=e=>{O.readPolite(e)},$=e=>{O.readAssertive(e)};var H=n(520675),F=n(202782),U=n(276635);let V={courseKeySection:"course",orgKeySection:"organization"},_={0:e=>`${e}.course`,1:e=>`${e}.organization`},q=(0,U.memoize)((e,t,n)=>{let{courseKeySection:i,orgKeySection:s}=null!=n?n:{},r={[F.r.AppendSection]:_,[F.r.Outdated_PrependSection]:{0:e=>`${i}.${e}`,1:e=>`${s}.${e}`}};return r[t][e?1:0]},(e,t,n=V)=>{let{courseKeySection:i,orgKeySection:s}=n,r=t===F.r.Outdated_PrependSection?`_${i}_${s}`:"";return`${e?1:0}_${t}${r}`});var z=n(74270),W=n(678943),j=n(202784);let Z=(e,t,n)=>{(0,j.useDebugValue)(`Interval: ${t}ms, ${n?"enabled":"disabled"}`);let i=(0,j.useRef)(e);i.current=e,(0,j.useEffect)(()=>{if(!n)return;let e=setInterval(()=>i.current(),t);return()=>clearInterval(e)},[t,n])}},219217:function(e,t,n){"use strict";n.d(t,{PH:function(){return i.P},y1:function(){return o},zX:function(){return a},Me:function(){return d},f0:function(){return l}});var i=n(672948),s=n(202784),r=n(276635);let o=(e,t)=>{let n=(0,s.useRef)(e);n.current=e;let i=(0,s.useRef)((0,r.debounce)((...e)=>{var t;return null===(t=n.current)||void 0===t?void 0:t.call(n,...e)},t)).current;return(0,s.useEffect)(()=>()=>{i.cancel()},[i]),i};function a(e){let t=(0,s.useRef)(e);return(0,s.useLayoutEffect)(()=>{t.current=e}),(0,s.useCallback)((...e)=>t.current(...e),[])}function l(e){let t=a((...t)=>null==e?void 0:e(...t));return e?t:void 0}let c=-1;function d(){let[e]=(0,s.useState)(()=>`:r${c+=1}:`);return e}},672948:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});let i=(e,t,n,i,s)=>{let r=`calc(${n} / 2)`,o=`calc(2 * (${n} + ${s}) / 1.4142)`,a=[e,`${t} ${r}`,`${i} 0`,`${i} calc(50% - ${r})`,`${t} 0`,`${t} calc(50% + ${r})`,`${i} 0`,`${i} calc(100% - ${r})`,`${t} 0`];return{background:`linear-gradient(${a.join()})`,backgroundSize:`${o} ${o}`}}},74270:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});class i{static reset(){this.maxCourseFolderDepth=void 0}static getMaxCourseFolderDepth(){var e,t;return this.maxCourseFolderDepth||(this.maxCourseFolderDepth=null!==(t=null===(e=window.__initialContext)||void 0===e?void 0:e.maxCourseFolderDepth)&&void 0!==t?t:2),this.maxCourseFolderDepth}}},144942:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});let i=/^[a-z][a-z0-9\+\-\.]*\:{1}/;function s(e){return i.test(e)?e:`http://${e}`}},465139:function(e,t,n){"use strict";n.d(t,{Me:function(){return i.Me},PH:function(){return i.PH},f0:function(){return i.f0},y1:function(){return i.y1},zX:function(){return i.zX}});var i=n(219217)},234483:function(e){e.exports='<div id="aria-live-polite-region-1" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-polite-region-2" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-assertive-region-1" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>\n<div id="aria-live-assertive-region-2" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>'},294451:function(e){e.exports='<p class="sr-only read-info-polite" role="alert" aria-live="polite">{{readInfo.message}}</p>\n<p class="sr-only read-info-assertive" role="alert" aria-live="assertive">{{readInfo.alertMessage}}</p>'},840649:function(e){e.exports='<a\n  href="javascript:void(0);"\n  class="skip-link"\n  bb-focus-next="{{ bbSkipLinkFocusNext }}"\n  bb-translate\n  bb-load-bundle="components/directives/skip-link"\n  analytics-id="components.directives.skip-link.message">\n  components.directives.skip-link.message\n</a>\n'},200970:function(e){e.exports='<div class="save-buttons">\n  <footer class="panel-footer" ng-if="!(hideCancel() || hideSave() || hideDelete())">\n    <!--footer tag is removed, and its children appended to parent if the directive is marked as \'isInline\'-->\n    <div ng-class="{\'inline\':isInline(), \'panel-footer-right\':!isInline()}" class="buttons-2 equal-buttons">\n      <button ng-if="!(hideDelete() != null ? hideDelete() : true)"\n              class="button js-delete js-primary-button non-first-focus" ng-class="{\'small clear icon\':isInline}"\n              bb-confirmation-needed="{{ deleteConfirmationResourceType }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isDeleteDisabled()"\n              ng-click="saveButtons.deleteAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices()}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.delete.button">\n                <span ng-if="!isInline()">{{saveButtons.deleteButtonStatus}}</span>\n                <span ng-if="isInline()"><i class="icon-trash"></i></span>\n      </button>\n      <button ng-if="!hideCancel()"\n              class="button button--secondary js-cancel js-secondary-button non-first-focus"\n              bb-confirmation-needed="{{ saveButtons.isCancelNowADelete() ? deleteConfirmationResourceType : \'\' }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isCancelDisabled()"\n              ng-click="saveButtons.cancelAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.cancel.button">{{saveButtons.cancelButtonStatus}}</button>\n      <button ng-if="!hideSave()"\n              class="button js-save js-primary-button non-first-focus"\n              bb-confirmation-needed="{{ saveConfirmationResourceType }}"\n              show-type="{{mustShowSaveConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isSaveDisabled()"\n              ng-click="saveButtons.saveAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="submit"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.save.button">{{saveButtons.saveButtonStatus}}</button>\n    </div>\n  </footer>\n</div>'},836657:function(e){e.exports='<ng-form name="baseForm" bb-autosave save-func="saveForm.save()" validation-func="saveForm.validate()" delay-autosave="delayAutosave()"\n         debounce-save-destination="debounceSaveDestination()" novalidate>\n    <div ng-transclude />\n    <bb-save-buttons validate-save="saveForm.validate()"\n                     save-action="saveForm.saveClicked()"\n                     cancel-action="saveForm.cancelClicked()"\n                     delete-action="saveForm.deleteClicked()"\n                     hide-save="hideFooter"\n                     hide-cancel="hideFooter"\n                     mousedown-action="saveForm.mouseDown()"\n                     can-delete="canDelete"\n                     display-delete-after-saving="displayDeleteAfterSaving()"\n                     delete-confirmation-resource-type="{{deleteConfirmationResourceType}}"\n                     must-show-delete-confirmation="true"\n                     choices="choices"\n                     analytics-id-tag-prefix="{{::analyticsIdTagPrefix}}.saveForm">\n                          <!-- TODO: will update the above “must-show-delete-confirmation” after PR #818 (update confirmation needed) is merged -->\n    </bb-save-buttons>\n</ng-form>\n'},283806:function(e){e.exports='<div class="element-image avatar no-select" aria-hidden="true"\n     ng-class="[avatarsClasses, {\'alert-outline\': isWarningRender}]"\n     bb-load-bundle="components/directives/avatar" bb-cache-compilation="avatar">\n  <div class="avatar-inner" ng-if="isAvatarRender && (!autoUpdate || !autoUpdate())">\n    <div ng-if="::(!first && !second)" class="first avatar-single">\n      <!-- If no user is set -->\n      <div class="initials">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n    </div>\n\n    <div ng-if="::(first && first.avatarUrl)" class="first avatar-single image-avatar">\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <!-- If first user is set and has avatar image -->\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && first.userInitials)"\n         class="first avatar-single {{::first.avatarBg}}">\n      <!-- If first user is set, but does not have avatar image, but has non-CJK name Will still render default-->\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && !first.userInitials)"\n         class="first avatar-single avatar-placeholder">\n      <!-- If first user is set, but does not have avatar image and name contains CJK characters -->\n      <!-- Show default avatar image -->\n      <img ng-if="::(!first.isMultiUser)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(first.isMultiUser)">\n        <bb-ui-icon-large-users></bb-ui-icon-large-users>\n      </div>\n    </div>\n\n    <div ng-if="::(second && second.avatarUrl && participants == 2)" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <!-- If second user is set and has avatar image -->\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && second.userInitials)"\n         class="second avatar-single {{::second.avatarBg}}">\n      <!-- If second user is set, but does not have avatar image, but has non-CJK name. Will still render default -->\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && !second.userInitials)"\n         class="second avatar-single avatar-placeholder">\n      <!-- If second user is set, but does not have avatar image and name contains CJK characters -->\n      <!-- Show default avatar image -->\n      <img ng-if="::(!second.isMultiUser)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(second.isMultiUser)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      <!-- If more than 2 participants involved, show `+3` type of avatar for right side -->\n      <!-- htmlhint:analytics-id:disable -->\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      <!-- htmlhint:analytics-id:enable -->\n    </div>\n  </div>\n\n  <div class="avatar-inner" ng-if="isAvatarRender && autoUpdate && autoUpdate()">\n\n    <div ng-if="!first && !second" class="first avatar-single">\n      <!-- If no user is set -->\n      <!-- htmlhint:analytics-id:disable -->\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n      <!-- htmlhint:analytics-id:enable -->\n    </div>\n\n    <div ng-if="first && first.avatarUrl" class="first avatar-single image-avatar">\n      <img ng-src="{{first.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <!-- If first user is set and has avatar image -->\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && first.userInitials"\n         class="first avatar-single {{first.avatarBg}}">\n      <!-- If first user is set, but does not have avatar image, but has non-CJK name -->\n      <!-- Show default image -->\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && !first.userInitials"\n         class="first avatar-single avatar-placeholder">\n      <!-- If first user is set, but does not have avatar image and name contains CJK characters -->\n      <!-- Show default avatar image -->\n      <img ng-if="::(!first.isMultiUser)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(first.isMultiUser)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="second && second.avatarUrl && participants == 2" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <!-- If second user is set and has avatar image -->\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && second.userInitials"\n         class="second avatar-single {{second.avatarBg}}">\n      <!-- If second user is set, but does not have avatar image, but has non-CJK name -->\n      <!-- Show default image -->\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && !second.userInitials"\n         class="second avatar-single avatar-placeholder">\n      <!-- If second user is set, but does not have avatar image and name contains CJK characters -->\n      <!-- Show default avatar image -->\n      <img ng-if="::(!second.isMultiUser)" src="./static/images/avatar-placeholder.svg"  bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(second.isMultiUser)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      <!-- If more than 2 participants involved, show `+3` type of avatar for right side -->\n      <!-- htmlhint:analytics-id:disable -->\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar : null">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      <!-- htmlhint:analytics-id:enable -->\n    </div>\n  </div>\n</div>\n'},819864:function(e){e.exports='<div ng-switch="$ctrl.icon">\n  <bb-ui-icon-large-assignments ng-switch-when="assignment" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-assignments>\n  <bb-ui-icon-large-attendance ng-switch-when="attendance" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-attendance>\n  <bb-ui-icon-large-blog ng-switch-when="blog" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-blog>\n  <bb-ui-icon-large-calculation ng-switch-when="calculation" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-calculation>\n  <bb-ui-icon-large-discussion ng-switch-when="discussion" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-discussion>\n  <bb-ui-icon-large-document-blank ng-switch-when="document-blank" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-document-blank>\n  <bb-ui-icon-large-document-cloud ng-switch-when="document-cloud" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-document-cloud>\n  <bb-ui-icon-large-document-text ng-switch-when="document-text" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-document-text>\n  <bb-ui-icon-large-folder ng-switch-when="folder|folder-open" ng-switch-when-separator="|" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-folder>\n  <bb-ui-icon-large-homework ng-switch-when="homework" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-homework>\n  <bb-ui-icon-large-photo ng-switch-when="photo" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-photo>\n  <bb-ui-icon-large-journal ng-switch-when="journal" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-journal>\n  <bb-ui-icon-large-learning-module ng-switch-when="learning-module" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-learning-module>\n  <bb-ui-icon-large-link ng-switch-when="link" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-link>\n  <bb-ui-icon-large-lti ng-switch-when="lti" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-lti>\n  <bb-ui-icon-large-overall-grade ng-switch-when="overall-grade" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-overall-grade>\n  <bb-ui-icon-large-pdf ng-switch-when="pdf" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-pdf>\n  <bb-ui-icon-large-presentation ng-switch-when="presentation" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-presentation>\n  <bb-ui-icon-large-scormengine ng-switch-when="scormengine" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-scormengine>\n  <bb-ui-icon-large-spreadsheet ng-switch-when="spreadsheet" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-spreadsheet>\n  <bb-ui-icon-large-survey ng-switch-when="survey" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-survey>\n  <bb-ui-icon-large-test ng-switch-when="test|quiz|exam" ng-switch-when-separator="|" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-test>\n  <bb-ui-icon-large-textbook ng-switch-when="textbook" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-textbook>\n  <bb-ui-icon-large-video ng-switch-when="video" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-video>\n  <bb-ui-icon-large-audio ng-switch-when="audio" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-audio>\n  <bb-ui-icon-large-zip ng-switch-when="zip" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-zip>\n  <bb-ui-icon-large-collaborative-cloud ng-switch-when="collaborative-cloud" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-collaborative-cloud>\n  <bb-ui-icon-large-document-blank ng-switch-default color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-document-blank>\n</div>\n'},371732:function(e){e.exports='<div bb-load-bundle="components/directives/collab-session-icon" class="icon-shadow" ng-class="{\'is-running\': $ctrl.runningSessionFlag}">\n    <bb-svg-icon ng-if="$ctrl.runningSessionFlag" size="small" icon="collab" role="presentation" aria-hidden="true" status="active"></bb-svg-icon>\n    <bb-svg-icon ng-if="!$ctrl.runningSessionFlag" size="medium" icon="collab-session" role="presentation" aria-hidden="true"></bb-svg-icon>\n</div>'},291538:function(e){e.exports='<bb-modal class="notification" modal-translate-options="modalTranslateOptions"\n          modal-aria-type="{{modalAriaType}}"\n          analytics-id-tag-prefix="components.directives.confirmationNeeded">\n  <div name="modal-contents">\n    <p ng-bind-html="::modalStrings.instructions"></p>\n    <div ng-show="confirmationNeeded.choices && confirmationNeeded.choices.length > 0" ng-repeat="choice in confirmationNeeded.choices">\n      <input id="{{choice.key}}" ng-disabled="choice.isDisable" ng-model="choice.value" type="checkbox" analytics-id="components.directives.confirmationNeeded.input.checkbox"/>\n      <label for="{{choice.key}}" bb-translate="{{choice.localizedKey}}"></label>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="okAction()" analytics-id="primary.button.okAction.button">{{::modalStrings.ok}}</button>\n  <button name="modal-footer-button-secondary" class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" analytics-id="secondary.button.cancelAction.button">{{::modalStrings.cancel}}</button>\n</bb-modal>\n'},48339:function(e){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options" data-show-add-options ng-click="addContentButton.toggleMenu()"\n     ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n     aria-expanded="{{addContentButton.isMenuVisible}}" aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n     aria-label="{{addContentButton.addButtonAriaLabel}}"\n     ng-focus="addContentButton.showButton()" ng-blur="addContentButton.hideButton()"\n     analytics-id="components.directives.add-content-button.assignment.button">\n  </button>\n  <!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost -->\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        allow-multiple="true"\n        monitor-leave="true"\n        disable-drag="disableDrag && disableDrag()"\n        target-div="{{\'#\' + fileListViewId}}"\n        hide-transclude-during-upload="false"\n        is-third-party-upload="false"\n        disallow-folder-uploads="true"\n        skip-zip-file-check="true"\n        ignored-states="::ignoredStates()"\n        position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n           ng-click="addContentButton.toggleMenu()"\n           analytics-id="components.directives.add-content-button.assignment.fileUpload.link" >\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon><span bb-translate analytics-id="course.content.buildContentArea.addFiles">course.content.buildContentArea.addFiles</span>\n        </a>\n      </bb-file-upload>\n    </li>\n    <li ng-if="!addContentButton.isMobile">\n      <!-- Skip zip file check, assignment does not support unzip file(LRN-101238) -->\n      <bb-file-upload allow-multiple="true" monitor-leave="true" is-third-party-upload="true"  hide-transclude-during-upload="false" skip-zip-file-check="true"\n                      click-enabled="false" primary-key="fileListViewId" disable-drag="disableDrag && disableDrag()"\n                      third-party-download-handler="addContentButton.downloadFile" target-div="{{\'#\' + fileListViewId}}"\n                      position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           primary-key="fileListViewId"\n           is-flatten="false"\n           attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n           ignored-states="::ignoredStates()"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.add-content-button.aria-label.content.oneDrive\'}"\n           ng-click="addContentButton.toggleMenu()"\n           analytics-id="components.directives.add-content-button.assignment.oneDrive.link">\n          <div>\n            <i class="icon-cloud"></i><span bb-translate>components.directives.add-content-button.oneDrive</span>\n          </div>\n        </a>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},521848:function(e){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options"\n          data-show-add-options ng-click="addContentButton.toggleMenu()"\n          ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n          aria-expanded="{{addContentButton.isMenuVisible}}"\n          aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n          aria-label="{{addContentButton.addButtonAriaLabel}}"\n          ng-focus="addContentButton.showButton()"\n          ng-blur="addContentButton.hideButton()"\n          analytics-id="components.directives.add-content-button.attempts.button">\n  </button>\n  <!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost -->\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        monitor-leave="true"\n        allow-multiple="true"\n        target-div="{{\'#\' + fileListViewId}}"\n        disable-drag="disableDrag && disableDrag()"\n        hide-transclude-during-upload="false"  is-third-party-upload="false"\n        third-party-download-handler="addContentButton.downloadFile"\n        skip-zip-file-check="true">\n        <div class="columns medium-12" ng-class="{\'medium-center\': attempt.isMobile}">\n          <a href="javascript:void(0);"\n             role="menuitem"\n             bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n             ng-click="addContentButton.toggleMenu()"\n             analytics-id="components.directives.add-content-button.attempts.fileUpload.link">\n            <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n            <span bb-translate>course.content.fileUpload.addFiles</span>\n          </a>\n        </div>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},851484:function(e){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    class="button-add-content js-show-add-options"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.editor.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="::addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>\n<!--\n  The elements are kept around to trigger download actions.\n  The \'ng-hide\' class is added to prevent the buttons from interfering with AX (tab order, screen readers)\n-->\n<ul class="element-list-add-menu angular-animate ng-hide">\n  <li>\n    <button type="button"\n            class="js-add-text-block"\n            ng-click="addContentButton.addTextBlock()"\n            analytics-id="components.directives.add-content-button.editor.addText.button">\n      <div>\n        <i class="icon-doc-pencil-2"></i>\n        <span bb-translate>components.directives.add-content-button.addContent</span>\n      </div>\n    </button>\n  </li>\n  <li ng-if="addContentButton.canEditUnsafeHtml">\n    <button type="button"\n            ng-click="addContentButton.addHtmlBlock()"\n            analytics-id="components.directives.add-content-button.editor.addHtml.button">\n      <div>\n        <bb-svg-icon size="small" icon="code"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.addHtml</span>\n      </div>\n    </button>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      click-enabled="true"\n      disable-drag="false"\n      class="js-file-upload"\n      web-location="{{webLocation}}"\n      file-location="{{fileLocation}}"\n      target-div="{{\'#\' + fileListViewId}}"\n      disallow-folder-uploads="true"\n      is-third-party-upload="false"\n      ignored-states="::ignoredStates()">\n        <button\n          type="button"\n          class="file-upload-button"\n          ng-click="addContentButton.assignPosition()"\n          aria-label="{{addContentButton.uploadAriaLabel}}"\n          analytics-id="components.directives.add-content-button.editor.fileUpload.button">\n          <div ng-if="!addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromComputer</span>\n          </div>\n          <div ng-if="addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromDevice</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="false"\n      monitor-leave="true"\n      target-div="{{\'#\' + fileListViewId}}"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      disable-drag="true"\n      is-third-party-upload="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      ignored-states="::ignoredStates()">\n      <button\n        type="button"\n        class="js-upload-from-cloud-storage-integration"\n        ng-click="addContentButton.assignPosition()"\n        bb-cloud-storage-integration\n        primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n        attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="false"\n        on-cancel-focus="!initialUpload ? addContentButton.focusAddButton : null"\n        analytics-id="components.directives.add-content-button.editor.uploadFromCloudStorage.button">\n          <div>\n            <i class="icon-cloud"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromCloudStorage</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n  <li>\n    <button type="button"\n            ng-class="{\'disabled\': !isDocumentSaved()}"\n            class="js-browse-content-collection-block"\n            ng-click="addContentButton.browseContentCollection()"\n            analytics-id="components.directives.add-content-collection-button.editor.addText.button">\n      <div>\n        <span bb-translate>course.contentCollection.browseContentCollection</span>\n      </div>\n    </button>\n  </li>\n</ul>\n'},313748:function(e){e.exports='<bb-svg-icon size="small" icon="add" class="js-add-plus add-circle-default"></bb-svg-icon>\n<bb-svg-icon size="small" icon="add" status="active" class="js-add-plus add-circle-active"></bb-svg-icon>'},901371:function(e){e.exports='<div ng-if="addContentButton.isCloudServiceAvailable">\n  <bb-file-upload\n    allow-multiple="true"\n    monitor-leave="true"\n    target-div="{{\'#\' + fileListViewId}}"\n    hide-transclude-during-upload="false"\n    click-enabled="false"\n    primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n    skip-zip-file-check="true"\n    disable-drag="true"\n    is-third-party-upload="true"\n    third-party-download-handler="addContentButton.downloadFile"\n    ignored-states="::ignoredStates()">\n    <button ng-click="addContentButton.assignPosition()"\n            class="doc-add-media clear ng-scope"\n            bb-cloud-storage-integration\n            primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n            attach-handler="addContentButton.cloudUploadAttachHandler"\n            web-location="{{webLocation}}"\n            file-location="{{fileLocation}}"\n            allow-multiple="true"\n            on-files-selected="addContentButton.onFilesSelectedHandler"\n            analytics-id="components.directives.add-content-button.cloud-upload.button">\n      <div class="import-action-header">\n        <i class="icon-cloud add-content-cloud-upload-icon"></i>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n        <div class="action-details" bb-translate="components.directives.add-content-button.importContentFromCloudStorage.description"></div>\n      </div>\n    </button>\n  </bb-file-upload>\n</div>\n'},232775:function(e){e.exports='<div bb-load-bundle="components/directives/add-content-button">\n  <div class="add-element no-select js-add-content-button {{::contextArea + \'-add-button\'}}"\n       ng-class="{\n         \'force-show-add-button\': addContentButton.isForceShowAddButton && addContentButton.isForceShowAddButton(),\n         \'is-active\': addContentButton.isMenuVisible,\n         \'button-visible\': addContentButton.isButtonVisible,\n         hide: hideDividerLines() && !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)\n       }"\n       ng-keydown="addContentButton.onKeydown($event)">\n    <template></template>\n  </div>\n  <div id="{{::fileListViewId}}">\n    <bb-progress display-results="false" primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId" target-div="{{::\'#\' + fileListViewId}}"></bb-progress>\n  </div>\n</div>'},717908:function(e){e.exports='<button class="button-add-content js-show-add-options"\n        data-show-add-options\n        ng-click="addContentButton.addGroup()"\n        ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n        aria-label="{{addContentButton.addButtonAriaLabel}}"\n        ng-focus="addContentButton.showButton()"\n        ng-blur="addContentButton.hideButton()"\n        analytics-id="components.directives.add-content-button.course-group.button">\n</button>\n'},903110:function(e){e.exports='<div id="{{::addContentButton.getButtonWrapperId()}}" tabindex="-1">\n  <button\n    id="{{::addContentButton.getTargetId()}}"\n    class="button-add-content js-show-add-options"\n    data-show-add-options\n    ng-click="addContentButton.toggleOverflowMenu()"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-haspopup="true"\n    aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    analytics-id="components.directives.add-content-button.course-outline.addContentMenu.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible && !addContentButton.isEmptyFolder()"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  aria-labelledby="{{::addContentButton.getTargetId()}}"\n  analytics-id="components.directives.add-content-button.contextualMenu">\n</bb-ui-contextual-menu>\n<ul class="element-list-add-menu angular-animate small-block-grid-2 medium-block-grid-2"\n    ng-class="\'large-block-grid-3\'"\n    ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n    ng-show="addContentButton.isEmptyFolder()">\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-create"\n       bb-peek-sref="content-manage.create(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.link">\n      <div>\n        <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.create</span>\n      </div>\n    </a>\n  </li>\n  <li ng-if="addContentButton.currentCourse.canCopy() && addContentButton.isEmptyFolder()">\n    <a class="content-import-button"\n       bb-peek-sref="content-manage.copy(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.import.link">\n      <div>\n        <bb-svg-icon size="small" icon="duplicate"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.copy</span>\n      </div>\n    </a>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      is-content="true"\n      primary-key="fileListViewLocalId"\n      skip-zip-file-check="true"\n      class="js-file-upload"\n      depth="depth()">\n      <button ng-if="addContentButton.isEmptyFolder()"\n              class="file-upload-button"\n              analytics-id="components.directives.add-content-button.course-outline.upload.button">\n        <div>\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n          <span bb-translate>components.directives.add-content-button.upload</span>\n        </div>\n      </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="true"\n      monitor-leave="true"\n      is-third-party-upload="true"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      cloud-upload-selected-content-id="addContentButton.positionForFiles.positionAfter"\n      primary-key="fileListViewId"\n      skip-zip-file-check="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      target-div="{{\'#\' + fileListViewId}}"\n      disable-drag="true"\n      ignored-states="[\'content-manage.import\']">\n      <button\n        class="doc-add-media clear ng-scope"\n        bb-cloud-storage-integration\n        primary-key="fileListViewId"\n        attach-handler="addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="true"\n        on-files-selected="addContentButton.onFilesSelectedHandler"\n        analytics-id="components.directives.add-content-button.course-outline.importContentFromCloudStorage.button">\n        <bb-svg-icon size="small" icon="upload-cloud"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n      </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-content-market"\n       href="javascript:void(0);"\n       ng-click="addContentButton.openContentMarket()"\n       analytics-id="components.directives.add-content-button.course-outline.openContentMarket.link">\n      <div>\n        <bb-ui-icon-small-content-market class="bb-ui-icon-folder"></bb-ui-icon-small-content-market>\n        <span bb-translate>components.directives.add-content-button.contentMarket</span>\n      </div>\n    </a>\n  </li>\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-content-collection"\n       bb-peek-sref="content-collection(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.contentCollection.link">\n      <div>\n        <bb-svg-icon size="small" icon="content-collection"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.contentCollection</span>\n      </div>\n    </a>\n  </li>\n</ul>\n'},165765:function(e){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    class="button-add-content"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.grades.button"\n  >\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>'},900038:function(e){e.exports='<div class="content-item-icon" bb-load-bundle="components/directives/element-image/element-image-accessibility">\n  <bb-ui-content-icon icon="contentItemIcon.iconName" color="{{contentItemIcon.iconColor}}" not-decorative="true" ng-if="!contentItemIcon.customLtiIcon"></bb-ui-content-icon>\n  <div class="image-wrapper" ng-if="contentItemIcon.customLtiIcon">\n    <img bb-translate-attrs="{\'alt\': \'components.directives.element-image.element-image-accessibility.img-icon-\' + contentItemIcon.iconName }" ng-src="{{ ::contentItemIcon.customLtiIcon }}" />\n  </div>\n</div>\n'},943383:function(e){e.exports='<div class="content-item-course-outline">\n  <div class="name">\n    <ng-switch on="content.getContentDisplay().linkAction()" ng-class="{\'has-indicator\': content.ui.hasIndicator}">\n      <div ng-switch-when="resource/x-bb-folder">\n        <bb-content-item-folder></bb-content-item-folder>\n      </div>\n      <div ng-switch-when="contenturl">\n        <!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). -->\n        <a bb-prevent-click-if="content.isConditionalReleaseLocked()"\n            ng-click="contentItemBase.onExternalLinkClick()"\n            ng-href="{{content.getContentDisplay().contentUrl()}}" target="_blank" rel="noopener noreferrer" class="content-title"\n            ng-class="{\'name-middle\': contentItemCourseOutline.shouldAlignMiddle()}"\n            aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n            analytics-id="content.item.course.outline.courseContent.link"\n            analytics-context="{{::content.getContentDisplay().contentUrl()}}"\n            aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n            tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}">\n          <span>{{ content.title }}</span>\n        </a>\n      </div>\n      <div ng-switch-when="fileurl">\n        <!-- Open the file preview panel for content that can be previewed -->\n        <a bb-prevent-click-if="content.isConditionalReleaseLocked()"\n            ng-click="contentItemBase.onExternalLinkClick()"\n            bb-peek-sref="preview-file({id: content.id})"\n            ng-class="{\'name-middle\': contentItemCourseOutline.shouldAlignMiddle()}"\n            class="content-title"\n            aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n            analytics-id="content.item.course.outline.courseContent.link"\n            analytics-context="{{::content.getContentDisplay().contentUrl()}}"\n            aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n            tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}">\n          <span>{{ content.title }}</span>\n        </a>\n      </div>\n      <div ng-switch-when="ltilaunch">\n        <bb-content-item-ltilaunch></bb-content-item-ltilaunch>\n      </div>\n      <div ng-switch-when="scormlaunch">\n        <bb-content-item-scormlaunch></bb-content-item-scormlaunch>\n      </div>\n      <div ng-switch-when="resource/x-bb-asmt-agn-link">\n        <!-- open  edit page when an instructor(=entitledToDesignAssessment) is accessing an assignment in a complete course. page will become read only based on canEdit() -->\n        <a ng-if="contentItemBase.entitledToDesignAssessment"\n           class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           bb-peek-sref="gradebook-item.assignment({\n                                 courseId: content.courseId,\n                                 contentId: content.id,\n                                 gradeitemView: \'details\' })"\n           analytics-id="content.item.course.outline.gradebook.item.assignment.link"><span>{{ content.title }}</span></a>\n        <!-- user cannot modify -->\n        <a ng-if="!contentItemBase.entitledToDesignAssessment"\n           bb-peek-sref="assignment.view({assignmentId:content.id})" bb-prevent-click-if="content.isConditionalReleaseLocked()"\n           ng-class="{\'is-late\': contentItemBase.isLate, \'is-restricted\': content.isRestricted()}"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           class="content-title"\n           analytics-id="content.item.course.outline.gradebook.item.assignment.readOnly.link"\n           aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n           tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-assignment">\n        <a bb-peek-sref="assignment.view({assignmentId:content.id})" class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           ng-class="{\'is-late\': contentItemBase.isLate}"\n           analytics-id="content.item.coures.outline.assignment.link"\n           aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n           tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-document">\n        <a bb-peek-sref="content-manage.edit.document({id:content.id})" class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           ng-class="{\'is-late\': contentItemBase.isLate}"\n           analytics-id="content.item.coures.outline.document.link"\n           aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n           tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-page">\n        <bb-content-item-page></bb-content-item-page>\n      </div>\n      <div ng-switch-when="resource/x-bb-asmt-test-link">\n        <!-- open edit page when an instructor(=entitledToDesignAssessment) is accessing content. In a complete course, page will become read only based on canEdit() -->\n        <a ng-if="contentItemBase.entitledToDesignAssessment" class="content-title"\n           bb-peek-sref="gradebook-item.assessment({\n                                 courseId: content.courseId,\n                                 contentId: content.id,\n                                 gradeitemView: \'details\',\n                                 assessmentType: \'test\'})"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           analytics-id="content.item.courses.outline.gradebook.item.assessment.link"><span>{{ content.title }}</span></a>\n        <!-- user cannot modify -->\n        <a ng-if="!contentItemBase.entitledToDesignAssessment" href="javascript:void(0);"\n           ng-click="contentItemBase.openAssessmentItem()" bb-prevent-click-if="content.isConditionalReleaseLocked()"\n           ng-class="{\'is-late\': contentItemBase.isLate, \'is-restricted\': content.isRestricted()}"\n           class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           analytics-id="content.item.courses.outline.gradebook.item.assessment.readOnly.link"\n           aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n           tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      </div>\n      <a ng-switch-when="resource/x-bb-forumlink" bb-peek-sref="discussion.view.with-grading({contentId:content.id})"\n         bb-prevent-click-if="content.isConditionalReleaseLocked()"\n         class="content-title" aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n         analytics-id="content.item.courses.outline.gradebook.item.forum.link"\n         aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n         tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      <div ng-switch-when="resource/x-bb-courselink">\n        <bb-web-link-item content="content" target-content="contentItemBase.targetContent" prefix="\'course.outline\'"/>\n      </div>\n      <div ng-switch-when="resource/x-bb-journallink">\n        <a bb-peek-sref="journal.view.with-participation({contentId:content.id})"\n          bb-prevent-click-if="content.isConditionalReleaseLocked()"\n          class="content-title" aria-describedby="activity-indicator-{{::content.id}}"\n          analytics-id="content.item.courses.outline.journal.link"\n          aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n          tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-default class="content-title">{{ content.title }}</div>\n      <bb-svg-icon role="img" aria-hidden="false" bb-translate-attrs="::{\'aria-label\':\'components.directives.content-item-base.aria-label.indicator\'}" ng-if="content.ui.hasIndicator" id="activity-indicator-{{::content.id}}" class="indicator" size="small" icon="activity-indicator"></bb-svg-icon>\n    </ng-switch>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date">\n    <!-- no due date -->\n    <span bb-translate ng-if="!dueDate" class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    <!-- due date -->\n    <span bb-translate ng-if="dueDate && !gradeDetail" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-if="dueDate && !gradeDetail" class="content-due-date"></bb-datetime>\n    <span ng-if="content.getTimedTestDetail().hasTimeLimit" class="time-limit ellipse">\n      <span class="vertical-bar"></span>\n      <span bb-translate>components.directives.content-item-base.time-limit</span>\n      <span ng-bind-html="content.getTimedTestDetail().displayedTimeLimitSeconds | timeSpan: \'m\': this "></span>\n    </span>\n    <span class="content-item-course-outline__proctored-tag" ng-if="contentItemCourseOutline.displayProctoredTag()">\n      <span class="vertical-bar"></span>\n      <bb-ui-icon-small-proctor-shield\n        class="content-item-course-outline__proctored-icon"\n        class-name="content-item-course-outline__proctored-icon-svg"\n      >\n      </bb-ui-icon-small-proctor-shield>\n      <span bb-translate>components.services.proctoring.outline.proctored</span>\n    </span>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date"\n       ng-class="{\'is-late\': contentItemBase.isLate}" ng-switch="dueDate != null">\n    <!-- submission card -->\n    <!--  TODO: submissionCard is disabled until LRN-101279 is fixed -->\n    <!-- <bb-submission-card ng-if="gradeDetail"  grade-detail="gradeDetail" inline="true"></bb-submission-card>\n    <bb-submission-card ng-if="!gradeDetail" grading-column="gradingColumn" inline="true"></bb-submission-card> -->\n    <!-- no due date -->\n    <span bb-translate ng-switch-default class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    <!-- due date -->\n    <span bb-translate ng-switch-when="true" class="content-no-due-date-label" ng-if="!dueDate">components.directives.content-item-base.no-due-date</span>\n    <span bb-translate ng-switch-when="true"\n          class="content-due-date-label" ng-if="dueDate">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-switch-when="true" class="content-due-date" ng-if="dueDate"></bb-datetime>\n    <span ng-if="content.getTimedTestDetail().hasTimeLimit" class="time-limit ellipse">\n      <span class="vertical-bar"></span>\n      <span bb-translate>components.directives.content-item-base.time-limit</span>\n      <span ng-bind-html="content.getTimedTestDetail().displayedTimeLimitSeconds | timeSpan: \'m\': this "></span>\n    </span>\n    <span class="content-item-course-outline__proctored-tag" ng-if="contentItemCourseOutline.displayProctoredTag()">\n      <span class="vertical-bar"></span>\n      <bb-ui-icon-small-proctor-shield\n        class="content-item-course-outline__proctored-icon"\n        class-name="content-item-course-outline__proctored-icon-svg"\n      >\n      </bb-ui-icon-small-proctor-shield>\n      <span bb-translate>components.services.proctoring.outline.proctored</span>\n    </span>\n  </div>\n  <bb-content-item-peer-assessment ng-if="content.id" content="content"></bb-content-item-peer-assessment>\n  <div ng-if="contentItemBase.isModifyPermissionLoaded && content.canHaveAttempts() && content.isGroupContent" class="group-info">\n    <div class="guidance-wrapper">\n      <div class="group-name">\n        <span><bb-svg-icon size="small" icon="groups"></bb-svg-icon></span>\n        <span class="group-target-guided" bb-guidance-target component-key="contentGroupInfo"\n              ng-if="!contentItemBase.contextCourse.course.isComplete()">\n        </span>\n        <a ng-if="contentItemBase.hasViewGroupsAsAdmin"\n           class="js-groups-link"\n           href="javascript:void(0);"\n           ng-click="contentItemBase.editGroups()"\n           analytics-id="content.item.course.outline.contentItemBase.editGroups.link">\n          <bb-group-count content="content"></bb-group-count>\n        </a>\n        <span ng-if="contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin" class="js-groups-link">\n          <bb-group-count content="content"></bb-group-count>\n        </span>\n        <div ng-if="!(contentItemBase.canViewGroups || contentItemBase.hasViewGroupsAsAdmin)" class="student-group-enrollment">\n          <bb-group-student-enrollment content="content"></bb-group-student-enrollment>\n        </div>\n        <!-- For complete course, will not show this guidance: LRN-107718 -->\n        <span>\n          <bb-guidance ng-if="!contentItemBase.contextCourse.course.isComplete() && !contentItemBase.entitledToDesignAssessment" component-key="contentGroupInfo"\n                       class="guidance-element-group guidance-is-empty-student guidance-element-overlay push-left">\n            <span bb-translate="{{::contentItemCourseOutline.groupAssessmentFtueKey}}" translate-values="{title: contentItemCourseOutline.customCategory}"></span>\n          </bb-guidance>\n        </span>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.isConditionalReleaseLocked()"\n    role="tooltip"\n    aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n    tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"\n    class="lock-info"\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    tooltip-position="bottom"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="false"\n    tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n    tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n    <span bb-translate="components.directives.content-item-base.conditionalRelease.lock-info"></span>\n    <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n  </div>\n  <div class="name-controls stop-click-propagation"\n    ng-class="{\n      \'name-conditional-release\': !content.canViewAsInstructor() && content.isConditionalReleaseLocked(),\n      \'selector-disabled\': content.isInForcedSequenceModule()\n    }"\n    ng-if="contentItemBase.showVisibility()">\n    <bb-content-visibility-selector content="content"\n                                    link-content="contentItemBase.targetContent"\n                                    onchange-func="contentItemBase.updateContentVisibility()"\n                                    open-panel-on-restricted="true"\n                                    enable-conditional-release="content.canAccessAdaptiveRelease()"\n                                    disable-restricted="contentItemBase.disableRestricted"\n                                    verbose-restricted-label="true"></bb-content-visibility-selector>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.isConditionalRelease()" class="conditional-release-control"\n       ng-class="{\'conditional-release-control-for-complete-course\': contentItemCourseOutline.isCourseCompletedAndInInstructorView()}">\n    <div class="rules">\n      <a href="javascript:void(0);"\n        ng-click="contentItemCourseOutline.canOpenConditionalRelease && contentItemCourseOutline.openConditionalRelease()"\n        bb-complex-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-disable-on-mouse-over="{{!contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-enable-on-mouse-leave-for-all-breakpoints="{{contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-enable-on-mouse-over-for-all-breakpoints="{{contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-open-on-activation="{{!contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-auto-update="true"\n        tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n        tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n        analytics-id="components.directives.content-item-base.conditionalRelease.link">\n        <span>{{contentItemBase.conditionalRelease.getConditionDescription()}}</span>\n        <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},763225:function(e){e.exports='<div class="content-wrapper" ng-class="{\'nocontent\': !content.canViewAsInstructor()}">\n  <div class="name">\n    <ng-switch on="content.getContentDisplay().viewHandler()" ng-class="{\'has-indicator\': content.ui.hasIndicator}">\n      <div ng-switch-when="resource/x-bb-folder" class="engagement-folder">\n        <bb-content-item-folder></bb-content-item-folder>\n      </div>\n      <a ng-switch-when="resource/x-bb-forumlink"\n         bb-peek-sref="discussion.view.with-grading({contentId:content.id})"\n         bb-prevent-click-if="content.isConditionalReleaseLocked()"\n         ng-attr-tabindex="{{ content.isConditionalReleaseLocked() ? -1 : 0 }}"\n         class="content-title"\n         analytics-id="content.item.engagement.outline.forumLink.link"\n         aria-describedby="activity-indicator-{{::content.id}}"\n      >\n        <span>{{ content.title }}</span>\n      </a>\n      <div ng-switch-default class="content-title">{{ content.title }}</div>\n      <bb-svg-icon role="img" aria-hidden="false" bb-translate-attrs="::{\'aria-label\':\'components.directives.content-item-base.aria-label.indicator\'}" ng-if="content.ui.hasIndicator" id="activity-indicator-{{::content.id}}" class="indicator" size="small" icon="activity-indicator" status="active"></bb-svg-icon>\n    </ng-switch>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date">\n    <!-- no due date -->\n    <span bb-translate ng-if="!dueDate" class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    <!-- due date -->\n    <span bb-translate ng-if="dueDate && !gradeDetail" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-if="dueDate && !gradeDetail" class="content-due-date"></bb-datetime>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date"\n       ng-class="{\'is-late\': contentItemBase.isLate}" ng-switch="dueDate != null">\n    <!-- submission card -->\n    <!--  TODO: submissionCard is disabled until LRN-101279 is fixed -->\n    <!-- <bb-submission-card ng-if="gradeDetail"  grade-detail="gradeDetail" inline="true"></bb-submission-card>\n    <bb-submission-card ng-if="!gradeDetail" grading-column="gradingColumn" inline="true"></bb-submission-card> -->\n    <!-- no due date -->\n    <span bb-translate ng-switch-default class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    <!-- due date -->\n    <span bb-translate ng-switch-when="true" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-switch-when="true" class="content-due-date"></bb-datetime>\n  </div>\n  <div ng-if="contentItemBase.isModifyPermissionLoaded && content.canHaveAttempts() && content.isGroupContent" class="group-info">\n    <div class="group-name">\n      <span><bb-svg-icon size="small" icon="groups"></bb-svg-icon></span>\n      <a href="javascript:void(0);"\n         ng-if="contentItemBase.hasViewGroupsAsAdmin"\n         ng-click="contentItemBase.editGroups()"\n         analytics-id="content.item.engagement.outline.contentItemBase.editGroups.link"\n      >\n        <bb-group-count content="content"></bb-group-count>\n      </a>\n      <span ng-if="contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin">\n        <bb-group-count content="content"></bb-group-count>\n      </span>\n      <div ng-if="!contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin" class="title">\n        <bb-group-student-enrollment content="content"></bb-group-student-enrollment>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.isConditionalReleaseLocked()"\n    role="tooltip"\n    class="lock-info"\n    tabindex="0"\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    tooltip-position="bottom"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n    tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n    <span bb-translate="components.directives.content-item-base.conditionalRelease.lock-info"></span>\n    <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n  </div>\n  <div class="student-created-info" ng-if="::contentItemEngagementOutline.isDiscussionCreatedByStudent()">\n    <span bb-translate="components.directives.content-item-base.content.discussionAuthorship.student"></span>\n  </div>\n  <div class="name-controls stop-click-propagation"\n    ng-class="{\n      \'name-conditional-release\': !content.canViewAsInstructor() && content.isConditionalReleaseLocked(),\n      \'selector-disabled\': content.isInForcedSequenceModule()\n    }"\n    ng-if="contentItemBase.showVisibility()">\n    <bb-content-visibility-selector content="content"\n                                    link-content="contentItemBase.targetContent"\n                                    onchange-func="contentItemBase.updateContentVisibility()"\n                                    disable-restricted="contentItemBase.disableRestricted"\n                                    open-panel-on-restricted="true"\n                                    verbose-restricted-label="true"></bb-content-visibility-selector>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.isConditionalRelease()" class="conditional-release-control">\n    <div class="rules">\n      <a href="javascript:void(0);"\n        ng-click="contentItemEngagementOutline.openConditionalRelease()"\n        bb-complex-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n        tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n        tooltip-auto-update="true"\n        tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n        tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n        analytics-id="components.directives.content-item-base.conditionalRelease.link">\n        <span>{{contentItemBase.conditionalRelease.getConditionDescription()}}</span>\n        <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},856055:function(e){e.exports='<!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). -->\n<button ng-if="!contentItemBase.isEngagementOutline()"\n        class="content-title" ng-class="{\'name-middle\': contentItemFolder.shouldAlignMiddle()}"\n        ng-click="contentItemFolder.toggleFolder()"\n        aria-expanded="{{content.ui.isOpen}}"\n        aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n        bb-translate-attrs="{\'aria-label\':\'components.directives.content-item-base.aria-label.toggle-folder\'}"\n        translate-attrs-values="{folderName: content.title}"\n        analytics-id="content.item.folder.toggleFolder.button"\n        aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n        tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}"><span>{{ content.title }}</span></button>\n<button ng-if="contentItemBase.isEngagementOutline()"\n        class="content-title name"\n        ng-click="contentItemFolder.toggleFolder()"\n        aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n        aria-expanded="{{content.ui.isOpen}}"\n        analytics-id="content.item.folder.engagementOutline.toggleFolder.button"><span>{{ content.title }}</span></button>\n'},826201:function(e){e.exports='<a class="content-title"\n   aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n   ng-click="contentItemLtiLaunch.ltiLaunch()"\n   href="javascript:void(0);"\n   analytics-id="content.item.ltilaunch.link"><span>{{ content.title }}</span></a>\n<div ng-if="contentItemBase.isExcludedOrDeletedLtiToolProvider() && !contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()">\n      <span class="broken-lti-link" ng-if="!contentItemBase.hasLTIToolConfigurationEntitlement()"\n      bb-translate>components.directives.content-item-base.excluded-lti-provider.instructor</span>\n      <span class="broken-lti-link" ng-if="contentItemBase.hasLTIToolConfigurationEntitlement()"\n      bb-translate>components.directives.content-item-base.excluded-lti-provider.admin</span>\n</div>\n<div ng-if="contentItemBase.isUnlaunchableLtiLink() && !contentItemBase.isExcludedOrDeletedLtiToolProvider() && !contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()">\n      <span class="broken-lti-link" ng-if="!contentItemBase.hasLTIToolConfigurationEntitlement()"\n      bb-translate>components.directives.content-item-base.deleted-placement.instructor</span>\n      <span class="broken-lti-link" ng-if="contentItemBase.hasLTIToolConfigurationEntitlement()"\n      bb-translate>components.directives.content-item-base.deleted-placement.admin</span>\n</div>\n<span class="broken-lti-link" ng-if="contentItemBase.isUnlaunchableLtiLink() && contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()"\n      bb-translate>components.directives.content-item-base.approval-required</span>\n'},570466:function(e){e.exports='<div ng-switch on="content.canViewAsInstructor() || !content.shouldRestrict()">\n  <!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). -->\n  <a class="content-title"\n     bb-peek-sref="content-manage.edit.document({id:content.id})"\n     ng-switch-when="true"\n     ng-class="{\'name-middle\': contentItemBase.shouldAlignMiddle()}"\n     aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n     analytics-id="content.item.page.edit.document.link"\n     aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n     tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}">\n     <span>{{ content.title }}</span>\n  </a>\n  <span class="content-title"\n        ng-switch-default\n        ng-class="{\'name-middle\': contentItemBase.shouldAlignMiddle()}"\n        aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n        tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}">{{ content.title }}</span>\n</div>\n'},132780:function(e){e.exports='<div ng-if="$ctrl.isInitialized && $ctrl.isPeerGrading" class="content-item-peer-assessment">\n  <div ng-if="$ctrl.isPeerGradingConfigured" class="peer-review-due-date">\n    <bb-svg-icon size="small" icon="peer-review"></bb-svg-icon>\n    <span bb-translate class="content-peer-review-due-date-label"\n          translate-values="{ peerReviewsNumber: $ctrl.peerReviewsPerStudent, datetime: $ctrl.peerReviewDueDate }">\n        components.directives.content-item-base.peer-review-due-date\n      </span>\n    <div ng-if="::$ctrl.contextCourseMembership.isStudentMembership()" class="tooltip-container">\n      <bb-ui-content-item-peer-assessment-tooltip tooltip-title="::$ctrl.getTooltipMessage()">\n      </bb-ui-content-item-peer-assessment-tooltip>\n    </div>\n  </div>\n</div>\n'},204842:function(e){e.exports='<a class="content-title"\n   ng-click="contentItemScormLaunch.scormLaunch()"\n   href="javascript:void(0);"\n   aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n   analytics-id="content.item.scormlaunch.link"\n   aria-hidden="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() }}"\n   tabindex="{{ contentItemBase.setForcedSequenceLearningModuleAttributes() ? -1 : 0 }}">\n  <span>{{ content.title }}</span>\n</a>\n'},456654:function(e){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-forumlink" class="content-title"\n     bb-peek-sref="discussion.view.with-grading({contentId:\'{{targetContent.id}}\'})"\n     bb-prevent-click-if="targetContent.isConditionalReleaseLocked()"\n     aria-describedby="{{ariaDescribedBy}}"\n     analytics-id="course.link.item.forumLink.link"\n     aria-hidden="{{ aria }}"\n     tabindex="{{ tabbable ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n  <div ng-switch-default class="content-title">{{ content.title }}</div>\n</ng-switch>\n'},732888:function(e){e.exports='<bb-guidance-feature-announcement\n  component-key="\'contentVisibility.membersAndGroups\'"\n  button-aria-label="$ctrl.buttonAriaLabel"\n  announcement-title="$ctrl.title"\n  content="$ctrl.content"\n  done-button-text="$ctrl.doneButtonText"\n  link-href="$ctrl.linkHref"\n  link-text="$ctrl.linkText"\n  close-label="$ctrl.closeLabel"\n></bb-guidance-feature-announcement>\n'},554293:function(e){e.exports='<div bb-foundation-defer bb-load-bundle="components/directives/content-visibility" dev-suppress-hide="true">\n  <div class="panel-block restricted-form content-visibility-rules-container">\n    <div class="row collapse">\n      <div class="columns small-12 js-from-checkbox">\n        <input type="checkbox"\n               ng-model="contentVisibilityRulesOptions.startDateSelect"\n               class="from-check"\n               id="from-check-{{contentVisibilityRulesOptions.id}}"\n               name="fromCheck"\n               ng-change="contentVisibilityRulesOptions.handleCheckClick(\'from-check\')"\n               ng-show="!isReadOnlyMode()"\n               analytics-id="content.visibility.rules.options.startDateSelect.input.checkbox"/>\n        <label class="date-time-label" for="from-check-{{contentVisibilityRulesOptions.id}}" ng-show="!isReadOnlyMode()"\n          bb-translate>components.directives.content-visibility.startDate</label>\n        <label class="date-time-label"\n          ng-show="isReadOnlyMode() && (contentVisibilityRulesOptions.startDateSelect || isAllowedEmpty)"\n          bb-translate>\n          components.directives.content-visibility.startDate\n        </label>\n      </div>\n      <div\n        ng-show="contentVisibilityRulesOptions.startDateSelect || !isReadOnlyMode() || (isAllowedEmpty && isReadOnlyMode())"\n        class="columns small-12">\n        <div class="row collapse date-time-inputs" ng-class="{\'read-only-fields\': isReadOnlyMode()}">\n          <div class="columns small-6 js-date-input-container {{contentVisibilityRulesOptions.dateFromContainer}}"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': contentVisibilityRulesOptions.timeDateFromDisabled}">\n            <!-- htmlhint:analytics-id:disable -->\n            <input id="date-from"\n                   bb-date-picker\n                   orientation="auto left"\n                   container=".{{contentVisibilityRulesOptions.dateFromContainer}}"\n                   ng-model="startDate" name="dateFrom" aria-describedby="date-from-error"\n                   ng-model-options="{ allowInvalid: true }"\n                   first-day-of-week="contentVisibilityRulesOptions.localeSettings.calendar.firstDayOfWeek"\n                   bb-validate-date\n                   ng-class="{\'read-only-field\': isReadOnlyMode()}"\n                   ng-attr-bb-focus="contentVisibilityRulesOptions.shouldFocus(\'start-date\')"\n                   ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n                   ng-required="contentVisibilityRulesOptions.isDateRequired(true)"\n                   ng-change="contentVisibilityRulesOptions.updateStartAndEndTime()"\n                   ng-disabled="contentVisibilityRulesOptions.timeDateFromDisabled"\n                   bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.startDateAria\',\n                       \'placeholder\': \'components.directives.content-visibility.datePlaceholder\'}"\n                   analytics-id="content.visibility.rules.options.startDate.input.text"/>\n              <!-- htmlhint:analytics-id:enable -->\n          </div>\n          <div class="columns small-6 input group"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': contentVisibilityRulesOptions.timeDateFromDisabled}">\n            <bb-time-picker name="timeFrom"\n                            id="time-from"\n                            aria-describedby="time-from-error"\n                            invalid-validation-key="time"\n                            analytics-id="content.visibility.rules.options.startDate.input.text"\n                            ng-model="startTime"\n                            disabled="contentVisibilityRulesOptions.timeDateFromDisabled"\n                            bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.startTimeAria\',\n                                \'placeholder\': \'components.directives.content-visibility.timePlaceholder\'}"\n            ></bb-time-picker>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12">\n        <div bb-validation-messages for="dateFrom" class="row collapse" id="date-from-error">\n            <span ng-message="required">\n                <bb-translate>components.directives.content-visibility.startDateError</bb-translate>\n              </span>\n          <span ng-message="date" bb-translate>\n            {{::contentVisibilityRulesOptions.setErrorString(true, true)}}\n          </span>\n          <span ng-message="startAndOrEndDate">\n            <bb-translate>components.directives.content-visibility.startAndOrEndDateError</bb-translate>\n          </span>\n          <span ng-message="startAndOrEndDateOnsubmit">\n            <bb-translate>components.directives.content-visibility.startAndOrEndDateError</bb-translate>\n          </span>\n          <span ng-message="startBeforeDueDate">\n            <bb-translate>components.directives.content-visibility.dueDateBeforeError</bb-translate>\n          </span>\n          <span ng-transclude="customStartDateAndTimeValidationMessages"></span>\n        </div>\n      </div>\n      <div bb-validation-messages for="timeFrom" class="row collapse" id="time-from-error">\n          <span ng-message="required">\n              <bb-translate>components.directives.content-visibility.startTimeError</bb-translate>\n          </span>\n        <span ng-message="time">\n            {{::contentVisibilityRulesOptions.setErrorString(false, true)}}\n        </span>\n        <span ng-message="required">\n          <bb-translate>components.directives.content-visibility.startTimeError</bb-translate>\n        </span>\n        <span ng-transclude="customStartDateAndTimeValidationMessages"></span>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12 js-until-checkbox">\n        <input type="checkbox"\n               ng-model="contentVisibilityRulesOptions.untilDateSelect"\n               class="until-check"\n               id="until-check-{{contentVisibilityRulesOptions.id}}"\n               name="untilCheck"\n               ng-change="contentVisibilityRulesOptions.handleCheckClick(\'until-check\')"\n               ng-show="!isReadOnlyMode()"\n               analytics-id="content.visibility.rules.options.untilDate.input.checkbox"/>\n        <label class="date-time-label" for="until-check-{{contentVisibilityRulesOptions.id}}"\n          ng-show="!isReadOnlyMode()" bb-translate>components.directives.content-visibility.endDate</label>\n        <label class="date-time-label"\n          ng-show="isReadOnlyMode() && (contentVisibilityRulesOptions.untilDateSelect || isAllowedEmpty)" bb-translate>\n          components.directives.content-visibility.endDate\n        </label>\n      </div>\n      <div\n        ng-show="contentVisibilityRulesOptions.untilDateSelect || !isReadOnlyMode() || (isAllowedEmpty && isReadOnlyMode())"\n        class="columns small-12">\n        <div class="row collapse date-time-inputs" ng-class="{\'read-only-fields\': isReadOnlyMode()}">\n          <div class="columns small-6 js-date-input-container {{contentVisibilityRulesOptions.dateUntilContainer}}"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': contentVisibilityRulesOptions.timeDateUntilDisabled}">\n            <!-- htmlhint:analytics-id:disable -->\n            <input id="date-until"\n                   bb-date-picker\n                   orientation="auto left"\n                   container=".{{contentVisibilityRulesOptions.dateUntilContainer}}"\n                   ng-model="endDate"\n                   ng-model-options="{ allowInvalid: true }"\n                   first-day-of-week="contentVisibilityRulesOptions.localeSettings.calendar.firstDayOfWeek"\n                   bb-validate-date\n                   name="dateUntil"\n                   aria-describedby="date-until-error" ng-class="{\'read-only-field\': isReadOnlyMode()}"\n                   ng-attr-bb-focus="contentVisibilityRulesOptions.shouldFocus(\'end-date\')"\n                   ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n                   ng-change="contentVisibilityRulesOptions.updateStartAndEndTime()"\n                   ng-required="contentVisibilityRulesOptions.isDateRequired(false)"\n                   ng-disabled="contentVisibilityRulesOptions.timeDateUntilDisabled"\n                   bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.endDateAria\',\n                       \'placeholder\': \'components.directives.content-visibility.datePlaceholder\'}"\n                   analytics-id="content.visiblity.rules.options.endDate.input.input.text"/>\n            <!-- htmlhint:analytics-id:enable -->\n          </div>\n          <div class="columns small-6 input group"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': contentVisibilityRulesOptions.timeDateUntilDisabled}">\n            <bb-time-picker name="timeUntil"\n                            id="time-until"\n                            aria-describedby="time-until-error"\n                            analytics-id="content.visibility.rules.options.endDate.input.text"\n                            ng-model="endTime"\n                            disabled="contentVisibilityRulesOptions.timeDateUntilDisabled"\n                            invalid-validation-key="time"\n                            bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.endTimeAria\',\n                                \'placeholder\': \'components.directives.content-visibility.timePlaceholder\'}"\n            ></bb-time-picker>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12">\n        <div bb-validation-messages for="dateUntil" class="row collapse" id="date-until-error">\n          <span ng-message="required">\n            <bb-translate>components.directives.content-visibility.endDateError</bb-translate>\n          </span>\n          <span ng-message="date">\n            {{::contentVisibilityRulesOptions.setErrorString(true, false)}}\n          </span>\n          <span ng-message="requiredOnsubmit">\n            <bb-translate>components.directives.content-visibility.endDateError</bb-translate>\n          </span>\n          <span ng-message="untilAfterStart">\n            <bb-translate>components.directives.content-visibility.endDateBeforeError</bb-translate>\n          </span>\n          <span ng-message="untilAfterStartOnsubmit">\n            <bb-translate>components.directives.content-visibility.endDateBeforeError</bb-translate>\n          </span>\n          <span ng-message="untilDueDate">\n            <bb-translate>components.directives.content-visibility.dueDateAfterError</bb-translate>\n          </span>\n          <span ng-message="subsequentDueDate">\n            <bb-translate>components.directives.content-visibility.subsequentDueDateAfterError</bb-translate>\n          </span>\n          <span ng-transclude="customEndDateAndTimeValidationMessages"></span>\n        </div>\n      </div>\n      <div bb-validation-messages for="timeUntil" class="row collapse" id="time-until-error">\n        <span ng-message="time">\n           {{::contentVisibilityRulesOptions.setErrorString(false, false)}}\n        </span>\n        <span ng-message="required">\n          <bb-translate>components.directives.content-visibility.endTimeError</bb-translate>\n        </span>\n        <span ng-transclude="customEndDateAndTimeValidationMessages"></span>\n      </div>\n    </div>\n  </div>\n</div>\n'},366122:function(e){e.exports='<div class="import-status-bar import-course-error" ng-class="{\'below\': contentImportStatusBarController.hideStatusBar()}"\n     ng-if="display" bb-load-bundle="components/directives/import-status-bar">\n  <div class="row">\n      <div bb-first-time-container>\n        <div class="columns guidance-wrapper import-status-bar-message">\n          <span class="successful-import-message ellipsis" bb-focus bb-translate ng-if="contentImportStatusBarController.notCarriedForwardItemsCount === 0">\n            course.import.statusBar.success\n          </span>\n          <bb-guidance component-key="importAnalysis" page-container-selector=".course-outline"\n                       class="guidance-element-overlay push-right push-top" ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0">\n            <bb-translate>course.import.statusBar.tooltip.main</bb-translate>\n          </bb-guidance>\n          <a bb-focus \n             href="javascript:void(0);" \n             class="not-copied-details" \n             ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0"\n             ng-class="{\'not-carry-details-warn\': contentImportStatusBarController.notCarriedForwardItemsCount > 0}"\n             ng-click="contentImportStatusBarController.goToImportReport()"\n             analytics-id="course.import.statusBar.importReport.link">\n            <div class="status-bar-alarm" bb-guidance-target component-key="importAnalysis">\n                <bb-translate class="ellipsis" translate-values="{ count: contentImportStatusBarController.notCarriedForwardItemsCount }">\n                  course.import.statusBar.itemsCount.plural\n                </bb-translate>\n            </div>\n          </a>\n        </div>\n      </div>\n    <div class="columns confirm-column right">\n      <button class="button default js-import-confirm" \n              ng-click="contentImportStatusBarController.confirm()"\n              analytics-id="course.import.statusBar.confirm.button">\n        <span bb-translate="course.import.statusBar.confirm"></span>\n      </button>\n      <!-- POST v1 -->\n      <!--<button tabindex="0" class="right inverse undo-import" ng-click="contentImportStatusBarController.undo()">-->\n      <!--<span>Undo Import</span>-->\n      <!--</button>-->\n    </div>\n  </div>\n</div>'},319663:function(e){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-blti-link" \n     bb-component-sref="{{prefix}}.engagement.edit({contentId:\'{{targetContent.id}}\'})"\n     class="content-title"\n     analytics-id="course.content.lti.link"><span>{{ content.title }}</span></a>\n</ng-switch>\n'},377343:function(e){e.exports='<div class="panel-header persistent-white-header mode-{{mode}} panel-header-directive"\n  bb-load-bundle="components/directives/panel-header"\n  ng-class="{\'is-editable\' : panelHeader.editMode,\n   \'has-slider\': hasSlider(),\n   \'can-edit\': canEdit,\n   \'has-controls\': showConversations() || showDelete() || showParticipants() || showSettings(),\n   \'has-visibility-toggle\': showVisibility()}">\n  <div class="panel-titles-container">\n    <div ng-if="showCourse()">\n      <div class="panel-sub-title js-vr-remove-random">\n        <span ng-if="::!panelHeaderTitleTranslateKey">{{panelHeader.panelHeaderTitle}}</span>\n        <span ng-if="::panelHeaderTitleTranslateKey" bb-translate>{{::panelHeaderTitleTranslateKey}}</span>\n      </div>\n    </div>\n    <div class="panel-title-texteditor">\n      <div class="editable-title-container" ng-show="!panelHeader.editMode">\n        <!-- ULTRA-13692 Since there\'s already an "Edit" button, we don\'t want keyboard users to be able to focus on the title to edit it,\n             otherwise there would be two ways to edit the title, which is confusing. However, since this title has an event listener, it\'s\n             announced as "clickable" by screenreaders, so let\'s hide it with aria-hidden and add another instance of the header just for\n             screenreaders instead. -->\n        <h1 class="sr-only" tabindex="-1" aria-hidden="true">{{panelTitle}}</h1>\n        <h1 class="panel-title secondary-title" ng-click="panelHeader.onEditMode()"\n            ng-keydown="panelHeader.titlePressKey($event)" bb-focus\n            ng-blur="panelHeader.blurTitle($event)"\n            ng-class="{\'student\' : !canEdit, \'is-hovered\': panelHeader.isEditButtonHovering}" title="{{panelTitle}}"\n            analytics-id="components.directives.content.panelHeader.secondaryTitle.header">{{panelTitle}}\n        </h1>\n        <button ng-if="canEdit" class="button super-clear edit-title" type="button"\n                ng-click="panelHeader.onEditMode()"\n                ng-mouseover="panelHeader.onEditButtonMouseOver()"\n                ng-mouseleave="panelHeader.onEditButtonMouseLeave()"\n                aria-label="{{ panelHeader.getAriaLabel() }}"\n                analytics-id="course.content.panelHeader.edit.button">\n          <bb-svg-icon size="small" icon="draw" aria-hidden="true"></bb-svg-icon>\n        </button>\n      </div>\n      <div class="panel-title-input-container" ng-show="panelHeader.editMode" bb-click-outside="panelHeader.onBlurTitle()">\n        <input\n          name="panel-title"\n          class="panel-header-title panel-title secondary-title"\n          type="text"\n          autocapitalize="off"\n          ng-keydown="panelHeader.pressKey($event)"\n          maxlength="{{maxLength}}"\n          ng-model ="panelTitle"\n          ng-model-options="{ getterSetter: true }"\n          ng-blur="panelHeader.onBlurTitle($event)"\n          ng-change="panelHeader.onChangeTitle()"\n          bb-translate-attrs="{\'aria-label\':\'{{::panelHeader.panelAriaLocalizationKey}}\'}"\n          bb-placeholder="{{::panelHeader.translatedPlaceholder}}"\n          translate-attrs-values="{{::localizationAttrsValues}}"\n          id="{{::panelHeader.getTeachingBubbleTargetElementId()}}"\n          ng-attr-aria-describedby="{{panelHeader.shouldShowTeachingBubble() ? panelHeader.getTeachingBubbleTooltipId() : undefined}}"\n          analytics-id="course.content.panelHeader.title.input.text"\n          >\n          <bb-ui-teaching-bubble\n            show="panelHeader.shouldShowTeachingBubble()"\n            dismiss="panelHeader.dismissTeachingBubble"\n            headline="panelHeader.getTeachingBubbleHeadline()"\n            message="panelHeader.getTeachingBubbleMessage()"\n            target-id="panelHeader.getTeachingBubbleTargetElementId()"\n            tooltip-id="panelHeader.getTeachingBubbleTooltipId()"\n            analytics-id="panelHeader.getTeachingBubbleAnalyticsId()">\n          </bb-ui-teaching-bubble>\n      </div>\n    </div>\n  </div>\n\n  <div\n    class="header-actions-menu button-group header-group"\n    ng-class="panelHeader.getButtonGroupClass()"\n    bb-first-time-container>\n\n    <ng-transclude ng-transclude-slot="panelHeaderActions"></ng-transclude>\n\n    <div ng-if="showVisibility()"\n         class="action-item item-visibility"\n         ng-class="{\'visibility-selector-disabled\': !panelHeader.isVisibilitySelectorEnabled()}">\n      <bb-content-visibility-membership-ftue></bb-content-visibility-membership-ftue>\n\n      <bb-content-visibility-selector ng-if="content" content="content"\n                                      is-visibility-selector-enabled="panelHeader.isVisibilitySelectorEnabled()"\n                                      onchange-func="panelHeader.onChangeVisibility()"\n                                      open-panel-on-restricted="openPanelOnRestricted()"\n                                      on-restricted-selected-func="panelHeader.onRestrictedSelected()"\n                                      validation-func="panelHeader.validateVisibilityChange(visibility)"\n                                      onblur-func="panelHeader.onBlurVisibility()"\n                                      disable-restricted="disableRestricted()"\n                                      has-medium-icon="false"></bb-content-visibility-selector>\n    </div>\n\n    <div class="ally-icons" ng-if="showAllyIcon() && panelHeader.canShowAlly">\n      <div class="small-ally-icon">\n        <bb-ally-show content-id="{{::content.id}}" show-alternative-formats-link="true" show-icon="true"\n          class="ally-icon"></bb-ally-show>\n      </div>\n      <div class="medium-ally-icon">\n        <bb-ally-show content-id="{{::content.id}}" show-alternative-formats-link="true" show-icon="true" icon-size="medium"\n          class="ally-icon"></bb-ally-show>\n      </div>\n    </div>\n\n    <div ng-if="showConversations() && content.ui.hasConversationAttached && content.attachedForumLink"\n         class="action-item conversation"\n         ui-sref-active="active">\n      <button ng-click="panelHeader.gotoConversation()"\n         bb-translate-attrs="{\'aria-label\':\'components.directives.header.conversationAriaLabel\', \'title\':\'components.directives.header.conversation\'}"\n         translate-attrs-values="{\'itemTitle\':\'{{panelTitle}}\'}"\n         class="button super-clear icon open-conversation"\n         type="button"\n         bb-guidance-target component-key="components.features.course.content.assessment.ftue.class-conversation"\n         analytics-id="panel.header.conversation.visibility.button">\n        <bb-svg-icon size="medium" icon="conversation"></bb-svg-icon>\n      </button>\n    </div>\n    <div ng-if="showDelete()"\n         class="action-item delete"\n         ng-class="{\'delete-button\': showDelete() && showSettings()}"\n         ui-sref-active="active">\n      <ng-switch on="panelHeader.getDeleteDirectiveArgumentType()">\n        <bb-delete ng-switch-when="ContentOnly" extra-class="standard-button" content="content" choices="choices" analytics-id="panel.header.content.only.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndDelete" extra-class="standard-button" content="content" delete-function="ondeleteFunc()" choices="choices" analytics-id="panel.header.content.delete.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndHandler" extra-class="standard-button" content="content" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.content.header.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndDeleteAndHandler" extra-class="standard-button" content="content" delete-function="ondeleteFunc()" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.content.delete.handler.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="DeleteAndHandler" extra-class="standard-button" delete-function="ondeleteFunc()" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.delete.handler.button.switch"></bb-delete>\n      </ng-switch>\n    </div>\n    <div ng-if="showParticipants()"\n         class="action-item participants"\n         ui-sref-active="active">\n      <!--TODO: need add real route here -->\n      <a bb-peek-sref="discussion-participants"\n         bb-translate-attrs="{\'aria-label\':\'components.directives.header.participants\'}"\n         class="button super-clear icon"\n         analytics-id="components.directives.discussion.participants.link">\n        <bb-svg-icon ng-if="!content.isGroupContent" size="medium" icon="people"></bb-svg-icon>\n        <bb-svg-icon ng-if="content.isGroupContent" size="medium" icon="groups"></bb-svg-icon>\n      </a>\n    </div>\n\n    <div ng-if="showSettings() && !!settingsPeekRef"\n         class="action-item settings"\n         ui-sref-active="active">\n      <a class="button super-clear icon assessment-settings-button"\n         href="javascript:void(0);"\n         ng-class="{\'disabled\': settingsDisabled()}"\n         ng-click="panelHeader.openSettingsPanel()"\n         bb-translate-attrs="{\'aria-label\':\'{{settingsLabel}}\'}"\n         analytics-id="panel.header.open.settings.panel.link">\n        <bb-svg-icon size="medium" icon="{{::panelHeader.getSettingsIcon()}}"></bb-svg-icon>\n      </a>\n    </div>\n    <ng-transclude ng-transclude-slot="panelHeaderCustomIcons" />\n  </div>\n  <div class="graded-count-wrap" ng-if="showSubmissionsGrading()">\n    <div class="graded-count-wrap-col col-numbers">\n      <div class="graded-numbers"\n      ng-if="showSubmissionsGrading() && summary.$resolved"\n      bb-translate="components.directives.header.submissions-grading.gradedCount.numbers"\n      translate-values="{gradedCount: summary.numStudentsGraded(), totalCount: summary.numEligibleToBeGraded}"\n      >\n      </div>\n      <div class="filtered-numbers" ng-if="showSubmissionsGrading() && isFiltered" bb-translate="components.directives.header.submissions-grading.filteredCount.numbers"\n      translate-values="{filteredCount}">\n      </div>\n    </div>\n    <div class="graded-count-wrap-col">\n      <p class="graded-label" ng-if="showSubmissionsGrading() && summary.$resolved" bb-translate="components.directives.header.submissions-grading.gradedCount.plural"></p>\n      <p class="graded-label" ng-if="showSubmissionsGrading() && isFiltered" bb-translate="components.directives.header.submissions-grading.filteredCount.plural"></p>\n    </div>\n  </div>\n</div>\n'},842508:function(e){e.exports='<div ng-if="conversionStatusBarController.showStatusBar && !conversionStatusBarController.inPreview"\n     class="conversion-status-bar import-learn-bar" ng-class="{\'below\': conversionStatusBarController.hideStatusBar()}"\n     bb-load-bundle="components/directives/conversion-status-bar" role="banner">\n  <div class="conversion-prompt-container">\n    <div class="conversion-prompt-title" bb-translate="course.conversion.statusBar.useUltraPromptTitle" course-org-token-resolver>\n    </div>\n    <div class="conversion-prompt-details" bb-translate="course.conversion.statusBar.useUltraPromptDetails" course-org-token-resolver>\n    </div>\n    <a class="hide-for-medium-only hide-for-small-only"\n        bb-translate="course.conversion.statusBar.moreInfoLink" bb-translate-attrs="{ \'href\': \'course.conversion.statusBar.moreInfoLinkUrl\' }"\n        target="_blank" rel="noopener noreferrer"\n        analytics-id="course.conversion.statusBar.moreInfoLink"></a>\n  </div>\n  <div class="conversion-button-container">\n    <a href="javascript:void(0);" class="js-back-to-classic conversion-button conversion-return-classic show-for-large-up"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic">\n      <bb-translate course-org-token-resolver>course.conversion.statusBar.backToClassic</bb-translate>\n    </a>\n    <button class="js-back-to-classic conversion-button conversion-return-button button button--secondary"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic.button">\n      <span bb-translate="course.conversion.statusBar.backToClassic" course-org-token-resolver></span>\n    </button>\n    <button class="js-use-new-ux conversion-button button default" ng-click="conversionStatusBarController.useTheNewExperience()"\n            bb-confirmation-needed="resource/x-bb-course-conversion" show-type="always"  confirmation-course-org-token-resolver\n            analytics-id="course.conversion.statusBar.useUltra.button">\n      <span bb-translate="course.conversion.statusBar.useUltra" course-org-token-resolver></span>\n    </button>\n  </div>\n</div>\n'},567077:function(e){e.exports='<bb-modal class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.outline.previewCourse.alert.modalTitle\'}"\n          modal-title-key="course.outline.previewCourse.alert.modalTitle"\n          analytics-id-tag-prefix="course.outline.previewCourse.alert">\n  <div name="modal-contents">\n    <bb-translate>course.conversion.statusBar.page-out-of-date</bb-translate>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(\'refresh\')" class="button js-primary-button" analytics-id="course.outline.previewCourse.alert.ok.button">\n    <span bb-translate="global.ok"></span>\n  </button>\n</bb-modal>'},369301:function(e){e.exports='<div class="preview-header"\n     ng-if="shouldShowHeader && !previewHeader.studentPreview.isInIframeOfPreviewMode()"\n     role="banner">\n  <div>\n    <h2 bb-translate course-org-token-resolver>course.outline.previewCourse.headerBar.title</h2>\n    <div ng-if="hasExceptionReport">\n      <bb-translate>course.outline.previewCourse.headerBar.description</bb-translate>\n      <a href="javascript:void(0);" bb-peek-sref="conversion-risk-analysis" bb-translate\n         analytics-id="course.outline.previewCourse.headerBar.exceptionsLink">course.outline.previewCourse.headerBar.exceptionsLink</a>\n    </div>\n  </div>\n</div>\n'},58887:function(e){e.exports='<div class="bb-course-catalog-link" ng-if="shouldDisplayCatalogLink">\n  <a href="javascript:void(0);"\n     class="catalog-anchor-tag"\n     ng-if="!isExternalCatalog"\n     ng-click="handleCatalogLink()"\n     course-org-token-resolver\n     aria-label="{{ariaLabel}}"\n     analytics-id="base.baseCourses.courseCatalog.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.link</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="medium" icon="programs" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_default" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n  <a class="catalog-anchor-tag"\n     ng-if="isExternalCatalog"\n     href="{{ ::externalCatalogUrl }}"\n     target="_blank"\n     rel="noopener noreferrer"\n     course-org-token-resolver\n     bb-translate-attrs="{\'aria-label\': \'base.baseCourses.aria-label.externalLink\'}"\n     analytics-id="base.baseCourses.courseCatalog.externalLink.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.externalLink</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="medium" icon="programs" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_default" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n</div>\n'},812450:function(e){e.exports='<ng-switch on="displayMode" bb-load-bundle="components/directives/delete">\n  <a href="javascript:void(0);"\n    ng-switch-when="controls"\n    ng-if="delete.requiredArgumentsSupplied"\n    bb-confirmation-needed get-confirmation-key-and-show-type="delete.getConfirmationKeyAndShowType()"\n    choices="{{choices}}"\n    show-type="{{ delete.modalShowType }}"\n    ng-click="delete.deleteElement()"\n    bb-translate-attrs="{\'aria-label\': \'{{attrTranslateKey}}\'}"\n    ng-disabled="savingInProgress"\n    class="{{extraClass}}" role="button"\n    analytics-id="components.directives.delete.deleteElement.link" \n  >\n    <span class="valign">\n      <span class="valign-content">\n        <bb-svg-icon size="small" icon="trash" class="icon-fw replaced"></bb-svg-icon>\n        <span class="ellipse" bb-translate="components.directives.delete.control-delete-label"></span>\n      </span>\n    </span>\n  </a>\n  <button ng-if="delete.requiredArgumentsSupplied"\n          bb-confirmation-needed get-confirmation-key-and-show-type="delete.getConfirmationKeyAndShowType()"\n          choices="{{choices}}"\n          ng-click="delete.deleteElement()"\n          ng-disabled="delete.isDeleteDisabled"\n          bb-translate-attrs="{\'aria-label\': \'{{attrTranslateKey}}\', \'title\': \'{{attrTranslateKey}}\'}"\n          ng-switch-default\n          class="button clear icon {{extraClass}}" type="button"\n          analytics-id="components.directives.delete.deleteElement.button"\n  >\n    <bb-svg-icon size="small" icon="trash"></bb-svg-icon>\n  </button>\n</ng-switch>'},799962:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.cloudStorageIntegration.modal.authorizationRequiredTitle"\n          analytics-id-tag-prefix="components.directives.cloudStorageIntegration.authorizationRequired">\n  <div name="modal-contents">\n    <p bb-translate>components.directives.cloudStorageIntegration.modal.authorizationRequiredMessage</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="global.close">\n    <bb-translate>global.close</bb-translate>\n  </button>\n</bb-modal>\n'},17413:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.cloudStorageIntegration.modal.errorTitle"\n          analytics-id-tag-prefix="components.directives.cloudStorageIntegration">\n  <div name="modal-contents">\n    <p bb-translate>components.directives.cloudStorageIntegration.modal.errorFull</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.cloudStorageIntegration.modal.cancelUploadText">\n    <bb-translate>components.directives.cloudStorageIntegration.modal.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},642663:function(e){e.exports='<div class="dropdown-directive">\n  <select id="{{::listId}}" ng-if="::dropdown.useNativeSelect()" ng-model="dropdown.selectedItem"\n          ng-options="item.name disable when item.isHeader for item in itemList"\n          ng-class="{\'drowdown-group\': listKind === \'group\'}"\n          ng-change="dropdown.clickItem()" analytics-id="directives.dropdown.item.select">\n    <!--for the listkind=group, ios mobile will show a blank option-->\n    <option ng-if="dropdown.shouldHaveBlankOption(listKind)" class="default-option" value="" analytics-id="directive.dropdown.option"></option>\n  </select>\n\n  <ul ng-attr-role="{{dropdown.getRole()}}"\n      ng-class="{\'feature-filter\': listKind !== \'custom\', \'selection-full-width\': selectionFullWidth(), \'force-above\': forceAbove}"\n      id="{{::listId}}" ng-if="::!dropdown.useNativeSelect()" class="f-dropdown ignore-accordion" data-dropdown-content\n      aria-hidden="true" tabindex="-1">\n    <li class="list-header" ng-if="listHeader">\n      <a href="javascript:void(0);"\n         analytics-id="{{::analyticsIdTagPrefix}}.listHeader.link"\n      >\n        {{listHeader}}\n      </a>\n    </li>\n    <li role="presentation" ng-repeat="item in itemList" ng-if="listKind === \'filter\'"\n        ng-class="{\'item-selected\': selectedItem === item}"\n        class="{{item.extraClass}}"\n    >\n      <a href="javascript:void(0);"\n         role="option"\n         aria-selected="{{selectedItem === item}}"\n         aria-setsize="{{itemList.length}}"\n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         class="js-filter-id-{{::item.index}}"\n         data-filter-id="{{::item.nature.toString()}}"\n         ng-click="dropdown.selectItem(item)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name.split(\' \').join(\'\')}}.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n        <i></i>\n      </a>\n    </li>\n    <li ng-repeat="item in itemList" ng-if="listKind === \'avatar-list\'">\n      <a href="javascript:void(0);"\n         class="item-container"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.avatar.link">\n        <div class="info-container">\n          <div class="avatar-container">\n            <bb-avatar user="item" inactive="!dropdown.isUserCourseAvailable(item.id)"></bb-avatar>\n          </div>\n          <div class="username-container">\n            <bb-username user="item" format="short" show-pronouns="true" show-pronunciation="true"></bb-username>\n            <div ng-if="selectedItem === item" class="sub-text" ng-bind-html="selectedText"></div>\n          </div>\n        </div>\n      </a>\n    </li>\n    <li role="presentation" ng-if="listKind === \'group\'" ng-repeat="item in itemList"\n        ng-class="{\'group-header-li\': item.isHeader }">\n      <a href="javascript:void(0);"\n         role="option"\n         aria-setsize="{{itemList.length}}"\n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         ng-class="{\'group-header\': item.isHeader}"\n         ng-attr-tabindex="{{ item.isHeader ? -1 : 0 }}"\n         ng-click="dropdown.selectItem(item, $event)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.group.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n      </a>\n    </li>\n    <div bb-dropdown-transclude></div>\n  </ul>\n</div>\n'},29367:function(e){e.exports='<div class="timestamp" bb-load-bundle="components/directives/duration" ng-cloak bb-cache-compilation="duration-directive">\n  <div ng-if="!duration.needAgo()">\n    <div class="js-split-datetime" ng-if="duration.separateDatetime()">\n      <span class="date" ng-bind="duration.date"></span>\n      <span class="time" ng-bind="duration.time"></span>\n    </div>\n    <bb-datetime ng-if="!duration.separateDatetime()" ng-class="{\'date\':duration.date}" value="date" format="Short"></bb-datetime>\n  </div>\n  <div ng-if="duration.needAgo()"\n       class="js-duration-ago"\n       bb-translate="components.directives.duration.agoText"\n       translate-values="{durationDate: duration.date, durationTime: duration.time}"></div>\n</div>'},532081:function(e){e.exports='<div class="text-editor" tabindex="-1" bb-load-bundle="components/directives/text-editor" bb-cache-compilation="basic-text-editor">\n  <label ng-if="inputLabelKey" class="text-editor-label" for="{{::elementId}}" bb-translate>{{::inputLabelKey}}</label>\n  <textarea id="{{::elementId}}"\n         class="read-mode editor-element"\n         name="{{::elementId}}"\n         tabindex="0"\n         type="text"\n         bb-validate-maxlength="{{::getInputMaxLength()}}"\n         ng-model="ngModel"\n         maxlength="{{::(getInputMaxLength() || \'\')}}"\n         ng-model-options="{ getterSetter: true }"\n         ng-disabled="readonly()"\n         fng-blur="textEditor.onBlur()"\n         fng-focus="textEditor.onFocus()"\n         fng-keyup="textEditor.onChange($event)"\n         fng-keydown="textEditor.onKeydown($event)"\n         bb-translate-attrs="{ \'placeholder\': \'{{placeholderKey}}\' }"\n         aria-label="{{textEditor.getContentLabel()}}"\n         translate-attrs-values="{{::placeholderAttrsValues}}"\n         bb-focus-on="{{::focusOn}}"\n         ng-required="::fieldRequired()"\n         analytics-id="components.textEditor.basicEditor.textarea"></textarea>\n  <div bb-validation-messages\n       ng-if="::!noValidationMessage()"\n       for="{{::elementId}}" immediate="true">\n    <span ng-message="maxlengthImmediate">\n      <span bb-translate translate-values="{ diff: element.$errorImmediate.maxlengthImmediate.diff }">\n        components.directives.validation.messages.errors.maxlength.plural\n      </span>\n    </span>\n  </div>\n</div>\n'},192166:function(e){e.exports='<bb-modal id="close-without-saving-modal" class="notification"\n          modal-title-key="components.directives.fileUpload.closeDuringUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.closeDuringUploadInstructions</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.closeDuringUploadClose">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadClose</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.closeDuringUploadGoBack">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadGoBack</bb-translate>\n  </button>\n</bb-modal>\n'},2160:function(e){e.exports='<bb-modal id="disallow-folder-upload-modal" class="notification js-disallow-folder"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.disallowFolderUploadTitle\' : \'components.directives.fileUpload.disallowFolderUploadNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.disallowFolderUploadFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},972061:function(e){e.exports='<bb-modal class="notification js-disallowed-file-type"\n          modal-title-key="components.directives.fileUpload.disallowedFileTypeTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowedFileTypeFull</bb-translate>\n      <a href="{{::fileUpload.getMoreSupportURL()}}" target="_blank" rel="noopener noreferrer" analytics-id="components.directives.fileUpload.moreSupportedFiles"><bb-translate>components.directives.fileUpload.moreSupportedFiles</bb-translate></a>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.validFiles.length > 0">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadValidFiles.plural">\n          <bb-translate translate-values="{count:fileUpload.validFiles.length}">components.directives.fileUpload.uploadValidFiles.plural</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.forceReselectDisallowedFiles && fileUpload.forceReselectDisallowedFiles()">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModalAndChooseFiles()" analytics-id="components.directives.fileUpload.selectAnotherFile">\n          <bb-translate>components.directives.fileUpload.selectAnotherFile</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},292821:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.errorTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>{{::errorModalErrorKey}}</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},990106:function(e){e.exports='<bb-modal id="folder-drop-depth-limit-modal" class="notification js-folder-drop-limit"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.folderDropDepthLimitTitle\' : \'components.directives.fileUpload.folderDropDepthLimitNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.folderDropDepthLimitFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFulNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},479856:function(e){e.exports='<bb-modal class="notification" \n          modal-title-key="components.directives.fileUpload.improperAmountOfFilesTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.improperAmountOfFilesFull</bb-translate>\n    </p>\n    <div class="file-list">\n      <div ng-repeat="file in fileUpload.uploadedFiles">\n        <input ng-if="$index===0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" checked analytics-id="components.directives.checked.input.radio">\n        <input ng-if="$index!==0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" analytics-id="components.directives.not.checked.input.radio">\n        <label class="toggle-label" for="{{\'fileListing\' + $index}}" style="white-space: nowrap">{{file.name}}</label><br />\n      </div>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadSelectedFile">\n    <bb-translate>components.directives.fileUpload.uploadSelectedFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},36790:function(e){e.exports='<bb-modal id="max-size-warning-modal" class="notification max-size-warning-modal"\n         modal-title-key="components.directives.fileUpload.maxSizeWarningTitle"\n         analytics-id-tag-prefix="max-size-warning-modal"\n         modal-aria-type="alertdialog"\n         >\n  <div name="modal-contents">\n    <p class="warning-message" bb-translate="components.directives.fileUpload.maxSizeWarningMessage" translate-values="{maxFileSize: calculateSizeInMib(maxFileSize)}"></p>\n    <div class="files-info">\n      <ul class="files-info-list">\n        <li ng-repeat="file in overSizedFiles">\n          <p class="file-info" bb-translate="components.directives.fileUpload.maxSizeWarningFiles" translate-values="{fileName: file.name, fileSize: calculateSizeInMib(file.size)}"></p>\n        </li>\n      </ul>\n    </div>\n    <p class="alternate-storage-info">\n      <span bb-translate translate-values="{alternateStorage}">\n        {{shouldRecommendAltStorageLocations ? \'components.directives.fileUpload.maxSizeWarningAlternateStorage\' : \'components.directives.fileUpload.maxSizeWarningNoAlternateStorage\'}}\n      </span>\n      <span ng-if="shouldIncludeSupportLink" ng-bind-html="supportLink"></span>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="closeModal()" analytics-id="components.directives.fileUpload.maxSizeWarningPrimary">\n      <bb-translate>components.directives.fileUpload.maxSizeWarningPrimary</bb-translate>\n  </button>\n</bb-modal>\n'},276176:function(e){e.exports='<bb-modal class="notification js-non-file-error" \n          modal-title-key="components.directives.fileUpload.disallowNonFileUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowNonFileUploadError</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},376893:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.packageTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.packageFull</bb-translate>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button button--secondary js-secondary-button dismiss-message expand" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.takeMeBack">\n          <bb-translate>components.directives.fileUpload.takeMeBack</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(true)" class="button button--secondary js-secondary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.addAllContent\'}" analytics-id="components.directives.fileUpload.addAllContent">\n          <bb-translate>components.directives.fileUpload.addAllContent</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(false)" class="button js-primary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.letMeChoose\'}" analytics-id="components.directives.fileUpload.letMeChoose">\n          <bb-translate>components.directives.fileUpload.letMeChoose</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},19504:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.zipTitle"\n          modal-dismiss-key="components.directives.fileUpload.takeMeBack"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.zipFull</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" ng-click="fileUpload.closeModal(true)" class="button js-primary-button" analytics-id="components.directives.fileUpload.unzipFile">\n    <bb-translate>components.directives.fileUpload.unzipFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" ng-click="fileUpload.closeModal(false)" class="button button--secondary js-secondary-button" analytics-id="components.directives.fileUpload.uploadAsZip">\n    <bb-translate>components.directives.fileUpload.uploadAsZip</bb-translate>\n  </button>\n</bb-modal>\n'},177474:function(e){e.exports='<div class="file-upload-container">\n  <div ngf-drop\n       id="{{fileUploadDivId}}"\n       ng-model="files" class="file-upload"\n       ngf-multiple="fileUpload.allowMultiple"\n       ngf-drop-disabled="disableDrag && disableDrag()"\n       ngf-change="fileUpload.onFileSelect($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"\n       ngf-stop-propagation="!(disableDrag && disableDrag())"\n       ngf-drag-over-class="dragClass"\n       tabindex="-1">\n    <div class="fileUploadTransclude" ng-transclude ng-show="fileUpload.transcludeVisible"></div>\n    <div class="js-file-upload-complete" ng-attr-ready="{{!fileUpload.uploadInProgress}}"></div>\n    <div ng-show="fileUpload.fileReviewVisible" class="file-upload-review">\n      <section class="file-upload-panel" ng-if="fileUpload.progressVisible">\n        <bb-progress primary-key="primaryKey && primaryKey()" display-results="fileUpload.useDefaultSuccessMethod"></bb-progress>\n      </section>\n    </div>\n  </div>\n  <input ngf-select\n         ng-if="fileUpload.allowMultiple"\n         type="file"\n         ngf-change="fileUpload.onFileSelect($files)"\n         multiple class="hide fileUploadInput"\n         analytics-id="components.directives.fileUpload.multipleFiles.input.file"/>\n  <input ngf-select\n         ng-if="!fileUpload.allowMultiple"\n         type="file"\n         ngf-change="fileUpload.onFileSelect($files)"\n         class="hide fileUploadInput"\n         analytics-id="components.directives.fileUpload.input.file"/>\n</div>'},868983:function(e){e.exports='<div>\n  <div class="upload-list">\n    <div ng-repeat="file in inProgressFiles" ng-attr-id="{{::progress.getProgressIdAttr(file)}}" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.document\'}" class="file-container file-container-progress">\n      <div class="file-meta-container">\n        <div class="file-meta">\n          <ng-switch on="file.currentMimeType">\n            <bb-ui-icon-large-zip ng-switch-when="application/zip" color="primary" class-name="element-image"></bb-ui-icon-large-zip>\n          </ng-switch>\n          <div ng-hide="file.isProcessing" class="progress-circle">\n            <svg class="progress-circle-svg" viewBox="-10 -10 220 220">\n              <path class="back" ng-attr-d="{{\'M0,100 a100,100 0 1 0 200,0 a100,100 0 1 0 -200,0\'}}" fill="transparent" />\n              <path class="bar" ng-attr-d="{{\'m100,0a100,100 0 0 1 0,200a100,100 0 0 1 0,-200\'}}" fill="transparent" stroke-dasharray="629" stroke-dashoffset="629"/>\n            </svg>\n            <i class="progress-icon file-error-icon icon-exclamation" ng-if="state === \'error\'"></i>\n            <span class="progress-value" bb-translate translate-values="{percentage: file.currentProgress}">global.percent</span>\n          </div>\n          <span ng-show="file.isProcessing" class="processing-spinner">\n            <div class="canvas success-state"></div>\n          </span>\n          <p class="progress-status">\n            <span class="ellipse" bb-translate="components.directives.fileUpload.uploadingFile" translate-values="{fileName: file.fileName}"></span>\n          </p>\n        </div>\n        <div class="content-item-controls file-container-controls">\n          <button ng-hide="file.isProcessing"\n                  class="button super-clear js-cancel-upload"\n                  bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.cancelUploadText\'}"\n                  ng-click="progress.cancelUpload($event, file.id, file.identifier)"\n                  analytics-id="components.directives.fileUpload.cancelUploadText.button">\n            <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},275325:function(e){e.exports='<!--\n  this #ftue-new div is copied from first-time-visit-directive.html.\n  it may need to move back up a level if/when the welcome template is made configurable.\n-->\n<div id="ftue-new" class="base-ftue" ng-if="firstVisit">\n  <div id="ftue-new-1" class="ftue-new-slide current-view">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.welcome.title</h2>\n\n      <div>\n        <a href="javascript:void(0);" class="ftue-img ftue-1-button scroll-button" tabindex="0" analytics-id="welcome.welcome.welcomeIcon.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_Welcome.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.welcome.alt\'}"\n                                          ></a>\n      </div>\n      <p class="medium-up-padding" bb-translate>welcome.welcome.description</p>\n    </div>\n    <div class="slide-control">\n\n      <button class="button ftue-1-button icon round ftue-advance large scroll-button"\n                                                                  bb-translate-attrs="{\'aria-label\': \'welcome.welcome.alt\'}"\n                                                                  analytics-id="welcome.welcome.downIcon.button"><i\n                                                                  class="icon-chevron-down"\n\n                                                                  ></i>\n      </button>\n    </div>\n  </div>\n\n  <div class="ftue-new-slide" id="ftue-new-2">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.layers.title</h2>\n\n      <div>\n        <a id="ftue-new-2-img" href="javascript:void(0);" class="ftue-img ftue-2-button scroll-button" tabindex="0" analytics-id="welcome.welcome.neverLoseYourPlace.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_NeverLoseYourPlace.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.layers.alt\'}"></a>\n      </div>\n      <p bb-translate>welcome.layers.description</p>\n    </div>\n    <div class="slide-control">\n      <button class="button icon round ftue-advance large ftue-2-button scroll-button"\n                                                                  bb-translate-attrs="{\'aria-label\': \'welcome.layers.alt\'}"\n                                                                  analytics-id="welcome.welcome.downIcon.button"><i\n                                                                  class="icon-chevron-down"\n                                                                  ></i>\n      </button>\n    </div>\n  </div>\n\n  <div class="ftue-new-slide" id="ftue-new-3">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.safe.title</h2>\n\n      <div>\n        <a id="ftue-new-3-img" href="javascript:void(0);" class="ftue-img ftue-3-button" ng-click="welcome.goNextPage()" tabindex="0" analytics-id="welcome.welcome.goNextPage.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_FeelFree.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.safe.alt\'}"></a>\n      </div>\n      <p bb-translate>welcome.safe.description</p>\n\n    </div>\n    <div class="slide-control">\n      <button class="button round ftue-end large ftue-3-button" bb-translate ng-click="welcome.goNextPage()" analytics-id="welcome.safe.button">welcome.safe.button</button>\n    </div>\n  </div>\n</div>\n'},193313:function(e){e.exports='<div ng-if="::foundationOffcanvas.wiredup || undefined"\n      class="bb-foundation-offcanvas"\n      ng-transclude\n      bb-click-outside="foundationOffcanvas.handleClickOutside()"\n      is-active="foundationOffcanvas.isPanelOpen"\n      aria-hidden="{{!foundationOffcanvas.isPanelOpen}}"\n      current-panel-only>\n</div>'},558136:function(e){e.exports='<div ng-show="isShown" class="guidance-container stop-click-propagation" aria-hidden="true">\n  <p ng-show="title" ng-transclude="title" class="guidance-title"></p>\n  <p ng-transclude></p>\n</div>'},228794:function(e){e.exports='<button bb-complex-tooltip=""\n  enhanced-tooltip="true"\n  tooltip-position="top-center"\n  tooltip-disable-on-mouse-over="false"\n  tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n  tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n  tooltip-scope="buttonComplexTooltip.$scope"\n  tooltip-template="{{ buttonComplexTooltip.getToolTipTemplate() }}"\n  tooltip-open-on-activation="true"\n  tooltip-auto-update="true"\n  tooltip-always-underline="false"\n  analytics-id="components.directives.content-item-base.conditionalRelease.date.link"\n  tooltip-center-content="true"\n  title="components.directives.grade.grader-column.statuses.restricted">\n  <bb-svg-icon size="small" icon="information" status="default"></bb-svg-icon>\n</button>\n'},85259:function(e){e.exports='<div class="grades-list instructor-wrapper">\n  <div class="row tabular-list-header course-grades-column-headers" ng-if="courseGradesGraderList.columns.length > 0">\n    <div class="columns small-6 medium-4 large-4 tabular-list-header-offset">\n      <div ng-click="courseGradesGraderList.onClickSort(\'item\')" analytics-id="components.directives.grade.course-grades-grader-list.sortNameColumn" class="sorting-header-column" role="button" bb-translate-attrs="{\'aria-label\': \'{{courseGradesGraderList.getAriaLabelString(\'item\')}}\'}" tabindex="0">\n        <span bb-translate>components.directives.grade.course-grades-grader-list.headers.name</span>\n        <bb-arrow-sort-indicator sortable="true" sort="courseGradesGraderList.getSortTypeValue(\'item\')" class="sort-icon js-{{courseGradesGraderList.getSortTypeValue(\'item\')}}-icon" />\n      </div>\n    </div>\n    <div class="columns hide-for-small-only medium-2 large-2">\n      <div ng-click="courseGradesGraderList.onClickSort(\'dueDate\')" analytics-id="components.directives.grade.course-grades-grader-list.sortDueDateColumn" class="sorting-header-column" bb-translate-attrs="{\'aria-label\': \'{{courseGradesGraderList.getAriaLabelString(\'dueDate\')}}\'}" role="button" tabindex="0">\n        <span bb-translate>components.directives.grade.course-grades-grader-list.headers.dueDate</span>\n        <bb-arrow-sort-indicator sortable="true" sort="courseGradesGraderList.getSortTypeValue(\'dueDate\')" class="sort-icon js-{{courseGradesGraderList.getSortTypeValue(\'dueDate\')}}-icon" />\n      </div>\n    </div>\n    <div class="columns hide-for-small-only medium-3 large-3">\n      <div ng-click="courseGradesGraderList.onClickSort(\'gradingStatus\')"\n           analytics-id="components.directives.grade.course-grades-grader-list.sortStatusColumn"\n           class="sorting-header-column" bb-translate-attrs="{\'aria-label\': \'{{courseGradesGraderList.getAriaLabelString(\'gradingStatus\')}}\'}" role="button" tabindex="0">\n        <span bb-translate>components.directives.grade.course-grades-grader-list.headers.progress</span>\n        <bb-arrow-sort-indicator sortable="true" sort="courseGradesGraderList.getSortTypeValue(\'gradingStatus\')" class="sort-icon" />\n      </div>\n    </div>\n    <div class="columns hide-for-small-only medium-3 large-3 end">\n      <div ng-click="courseGradesGraderList.onClickSort(\'post\')" analytics-id="components.directives.grade.course-grades-grader-list.sortPostColumn" class="sorting-header-column" bb-translate-attrs="{\'aria-label\': \'{{courseGradesGraderList.getAriaLabelString(\'post\')}}\'}" role="button" tabindex="0">\n        <span bb-translate>components.directives.grade.course-grades-grader-list.headers.post</span>\n        <bb-arrow-sort-indicator sortable="true" sort="courseGradesGraderList.getSortTypeValue(\'post\')" class="sort-icon" />\n      </div>\n    </div>\n  </div>\n\n  <div bb-mouse-leave-enter="course-gradebook">\n    <bb-add-content-button position-before="\'start\'" item-name="courseGradesGraderList.columns[0].columnName"\n                           context-area="courseGradesGraderList.contextArea"\n                           show-menu-override="!courseGradesGraderList.hasColumns"\n                           always-show="isFirst"\n                           show-add-attendance="attendanceIsAvailable() && !courseGradesGraderList.attendanceColumnExists"\n                           ng-if="courseGradesGraderList.contextArea && !course().isComplete() && courseGradesGraderList.canModify" bb-key-hide-ftue="grades.grader.course.column.add"></bb-add-content-button>\n    <!-- set keep-guidance-when-focusout to be true then add bb-key-hide-ftue="grades.grader.course.column.add" on its preceding element -->\n    <div bb-guidance-target component-key="grades.grader.course.column.add" keep-guidance-when-focusout="true" aria-describedby="guidance-moment-grade-add"></div>\n\n    <bb-guidance id="guidance-moment-grade-add" component-key="grades.grader.course.column.add"\n                 class="grades-list-guidance guidance-element-overlay" role="tooltip">\n      <bb-translate>components.directives.grade.course-grades-grader.ftue.add</bb-translate>\n    </bb-guidance>\n\n    <div class="grade-list-columns">\n      <div class="drag-element" ng-class="{\'no-hover\': (course().isComplete() || (column.isAttendance() && !attendanceIsAvailable)), \'last-tabular-row-container\': $last}"\n           ng-repeat="column in courseGradesGraderList.columns track by column.id" bb-content-item-mouseover>\n        <div bb-drop-handler on-move-handler="courseGradesGraderList.onMoveGraderItem" content="column"\n             next-content-id="courseGradesGraderList.columns[$index+1].id"\n             previous-content-id="courseGradesGraderList.columns[$index-1].id">\n\n          <bb-grader-column column="column"\n                            course="course()"\n                            is-course-view="true"\n                            category-map="courseGradesGraderList.categoryMap"\n                            attendance-column-exists="courseGradesGraderList.attendanceColumnExists"\n                            attendance-is-available="attendanceIsAvailable()">\n          </bb-grader-column>\n        </div>\n      </div>\n    </div>\n    <bb-setup-overall-grade ng-if="courseGradesGraderList.showSetupOverallGradeMessage && courseGradesGraderList.canModify"\n                            course-id="courseGradesGraderList.course.id"\n                            setup-overall-grade-hide-message-callback="courseGradesGraderList.setupOverallGradeHideMessageCallback()">\n    </bb-setup-overall-grade>\n  </div>\n</div>\n'},45404:function(e){e.exports='<div class="base-grades course-grades-instructor" ng-class="{\'grades-list-view\': courseGradesGrader.isGradableItemsListView}">\n  <div ng-if="courseGradesGrader.isDesktop && !courseGradesGrader.isSmallScreen" class="guidance-wrapper"\n    aria-describedby="guidance-moment-grade-settings">\n\n    <div class="row collapse course-grades-header-buttons-wrapper js-course-skip-link-target" tabindex="-1">\n      <div class="gradebook-toolbar group-filters">\n        <bb-square-toggle one-icon-class="toggle-table"\n                          one-aria-label="components.directives.grade.course-grades-grader.views.list-button"\n                          one-view-value="list"\n                          two-icon-class="toggle-grid"\n                          two-aria-label="components.directives.grade.course-grades-grader.views.grid-button"\n                          two-view-value="grid"\n                          property="courseGradesGrader.squareToggleValue"\n                          analytics-id-tag-prefix="components.directives.grade.view.courseGrader"\n                          class="toggle-group-filters-enabled">\n        </bb-square-toggle>\n\n        <div class="gradebook-options">\n          <div class="grade-grid-search-box group-filters" ng-if="courseGradesGrader.isGridView">\n            <bb-typeahead-search-box id="student-search-box"\n                                    item-selected="courseGradesGrader.itemSelected(item)"\n                                    type-ahead-search="courseGradesGrader.typeAheadSearch(searchText)"\n                                    clear-search="courseGradesGrader.clearSelection()"\n                                    input-placeholder="components.directives.grade.search-box.placeholder"\n                                    sr-empty-results="components.directives.grade.search-box.emptyResults"\n                                    sr-results-found="components.directives.grade.search-box.resultsFound"\n                                    sr-no-results-found="components.directives.grade.search-box.noResultsFound"\n                                    sr-label="components.directives.grade.search-box.placeholder"\n                                    clear-aria-label="components.directives.grade.search-box.clear"\n                                    icon="search">\n\n                  <ng-switch on="item.type">\n                    <div ng-switch-when="user" class="element-card">\n                      <bb-user-avatar class="typeahead-user-avatar" user="::item.data.user"></bb-user-avatar>\n                      <div class="typeahead-student-name-id">\n                        <bb-username class="typeahead-name ellipse" user="item.data.user"></bb-username>\n                        <div class="typeahead-id ellipse">{{::item.data.user.userName}}</div>\n                      </div>\n                    </div>\n                    <div ng-switch-when="column" class="element-card">\n                      <div bb-content-item-icon content-column="item.data.getMetadata()" show-alert-icon="item.data.getMetadata().getNumMissingIfLate() > 0" class="element-image" ng-if="item.data.getMetadata()"></div>\n                      <div class="typehead-title column-title ellipse">\n                        <div class="ellipse grade-title">{{::item.data.getMetadata().columnName}}</div>\n                        <div class="ellipse grade-type" bb-translate>components.directives.grade.search-box.columnName</div>\n                      </div>\n                    </div>\n                    <div ng-switch-when="category" class="element-card">\n                        <bb-ui-icon-large-document-multiple color="primary"></bb-ui-icon-large-document-multiple>\n                        <div class="typehead-title category-title ellipse">\n                          <div bb-translate class="ellipse grade-title" ng-if="::!item.data.getMetadata().gradebookCategory.isUserDefined">{{::item.data.getMetadata().gradebookCategory.localizableTitle.languageKey}}</div>\n                          <div bb-translate class="ellipse grade-title" ng-if="::item.data.getMetadata().gradebookCategory.isUserDefined">{{::item.data.getMetadata().gradebookCategory.title.split(\'.\')[0]}}</div>\n                          <div class="ellipse grade-type" bb-translate>components.directives.grade.search-box.category</div>\n                        </div>\n                    </div>\n                    <div ng-switch-default="noResult" class="element-card">\n                      <div class="no-result" bb-translate>components.directives.grade.search-box.noResultsFound</div>\n                  </div>\n                </ng-switch>\n            </bb-typeahead-search-box>\n          </div>\n          <bb-gradebook-advanced-filters-ftue ng-if="courseGradesGrader.isGridView && courseGradesGrader.showGradeListContainer()">\n          </bb-gradebook-advanced-filters-ftue>\n          <div ng-if="courseGradesGrader.isGridView && courseGradesGrader.showGradeListContainer()">\n            <a class="filter-panel-button super-clear button" bb-guidance-target component-key="grades.grader.search.filter"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.openAdvancedFilters\'}"\n              bb-peek-sref="gradebook-grid-advanced-filters" analytics-id="components.directives.grade.search.filter.button">\n              <bb-ui-icon-small-filter-options class="group-filters-icon"></bb-ui-icon-small-filter-options>\n              <span bb-translate>components.directives.grade.course-grades-grader.actions.filter</span>\n            </a>\n          </div>\n\n          <div ng-if="courseGradesGrader.userHasViewGradebookPermission">\n            <a class="open-attempt-receipt-search button super-clear"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.attemptReceiptSearch\', \'title\':\'components.directives.grade.course-grades-grader.actions.attemptReceiptSearch\'}"\n              bb-peek-sref="attempt-receipt-search"\n              analytics-id="components.directives.grade.actions.openAttemptReceiptSearch.link">\n              <bb-ui-icon-medium-content-view></bb-ui-icon-medium-content-view>\n            </a>\n          </div>\n\n          <div ng-if="courseGradesGrader.canUploadGradebook">\n            <a class="open-upload-settings button super-clear"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.upload\', \'title\': \'components.directives.grade.course-grades-grader.actions.upload\'}"\n              bb-peek-sref="grade-upload-setting"\n              ng-if="!courseGradesGrader.course.isComplete()"\n              analytics-id="components.directives.grade.actions.upload.link">\n              <bb-ui-icon-small-upload></bb-ui-icon-small-upload>\n            </a>\n          </div>\n\n          <div ng-if="courseGradesGrader.canDownloadGradebook">\n            <a class="open-downLoad-settings button super-clear"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.download\', \'title\': \'components.directives.grade.course-grades-grader.actions.download\'}"\n              bb-peek-sref="grade-download-setting"\n              ng-if="!courseGradesGrader.course.isComplete()"\n              analytics-id="components.directives.grade.actions.download.link">\n              <bb-ui-icon-small-download></bb-ui-icon-small-download>\n            </a>\n          </div>\n\n          <div ng-if="courseGradesGrader.userHasViewGradebookPermission" course-id="course.model.id">\n            <a class="open-gradebook-settings button super-clear js-open-settings"\n              bb-guidance-target component-key="grades.grader.course.settings"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.openSettings\', \'title\': \'components.directives.grade.course-grades-grader.actions.openSettings\'}"\n              bb-peek-sref="grade-setting"\n              analytics-id="components.directives.grade.actions.openSettings.link">\n              <bb-ui-icon-medium-settings></bb-ui-icon-medium-settings>\n            </a>\n          </div>\n        </div>\n      </div>\n      <bb-filter-chips\n        ng-if="courseGradesGrader.isGridView && courseGradesGrader.hasUrlFilters"\n        analytics-id="gradebook.grid.filters">\n      </bb-filter-chips>\n    </div>\n    <bb-guidance id="guidance-moment-grade-settings" component-key="grades.grader.course.settings" class="guidance-element-overlay push-bottom"\n      role="tooltip">\n      <p>\n        <bb-translate>components.directives.grade.course-grades-grader.ftue.setting</bb-translate>\n      </p>\n    </bb-guidance>\n\n  </div>\n  <bb-gradebook-list-view-tabs\n    on-tab-changed="courseGradesGrader.changeListViewType"\n    selected-tab="courseGradesGrader.currentTabId"\n    ng-if="!courseGradesGrader.isGridView"\n  ></bb-gradebook-list-view-tabs>\n\n  <div ng-if="courseGradesGrader.isGridView || courseGradesGrader.isGradableItemsListView">\n    <!-- Empty state template: this section of the page will be displayed when there is no content, and will invite users to create content -->\n    <div class="is-empty-page js-course-skip-link-target"\n         ng-if="courseGradesGrader.columns.$resolved && courseGradesGrader.columns.length === 0 && !courseGradesGrader.hasUrlFilters">\n      <div class="is-empty-wrapper">\n        <div class="is-empty-explanation">\n          <img src="./static/images/ftue/course-grades-instructor.svg" bb-translate-attrs="{alt: \'components.directives.grade.course-grades-grader.empty.addItems\'}" />\n          <h1 class="is-empty-heading" bb-translate>components.directives.grade.course-grades-grader.empty.header</h1>\n          <p bb-translate>components.directives.grade.course-grades-grader.empty.description</p>\n        </div>\n        <div class="add-element">\n          <ul role="menu" class="element-list-add-menu small-block-grid-1 medium-block-grid-3 large-block-grid-4">\n            <li>\n              <a role="menuitem" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addCalculation\'}"\n                 bb-peek-sref="gradebook-item.calculation" analytics-id="components.directives.grade.addCalculation.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addCalculation</span>\n                </div>\n              </a>\n            </li>\n            <li>\n              <a role="menuitem" class="js-empty-add-item" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addItem\'}"\n                 bb-peek-sref="grade-item.create" analytics-id="components.directives.addItem.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addItem</span>\n                </div>\n              </a>\n            </li>\n            <li ng-if="courseGradesGrader.attendanceIsAvailable">\n              <a role="menuitem" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addAttendance\'}"\n                 bb-peek-sref="attendance" analytics-id="components.directives.grade.addAttendance.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addAttendance</span>\n                </div>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n\n    <div class="grade-list-container"\n         ng-if="courseGradesGrader.isGradableItemsListView && courseGradesGrader.showGradeListContainer()">\n      <div class="spinner bb-secondary-color-2" ng-if="!courseGradesGrader.columns" aria-hidden="true"></div>\n      <div bb-infinite-scroll="courseGradesGrader.renderMoreColumns()"\n           infinite-scroll-container="\'.bb-offcanvas-panel-wrap .panel-wrap\'"\n           infinite-scroll-current-count="courseGradesGrader.columns.length"\n           infinite-scroll-focusable-children-selector=".grader-column .name a, .floating-headers .item-headers .grade-grid-header-content-wrapper"\n           infinite-scroll-load-limit="courseGradesGrader.GRADE_COLUMN_LOAD_LIMIT"\n           infinite-scroll-localization-keys-prefix="components.directives.grade.course-grades-grader.infiniteScroll"\n           infinite-scroll-total-count="courseGradesGrader.totalColumnCount"\n           infinite-scroll-tray-id="course-grades-grader">\n        <bb-course-grades-grader-list course="courseGrades.course"\n                                      is-first="true"\n                                      columns="courseGradesGrader.columns"\n                                      show-setup-overall-column="courseGradesGrader.showSetupOverallColumn"\n                                      attendance-is-available="courseGradesGrader.attendanceIsAvailable"\n                                      on-click-sort-icon="courseGradesGrader.onClickSortIcon(headerName)"\n                                      sort-attributes="courseGradesGrader.sortAttributes">\n        </bb-course-grades-grader-list>\n      </div>\n    </div>\n\n    <div class="grade-grid-content"\n         ng-if="courseGradesGrader.isGridView && courseGradesGrader.showGradeListContainer()">\n      <div>\n        <bb-grade-grid-reborn course="courseGrades.course"\n                              columns="courseGradesGrader.visibleColumns"\n                              attendance-is-available="courseGradesGrader.attendanceIsAvailable"\n                              merged-courses="courseGradesGrader.mergedCourses"\n                              ng-show="!courseGradesGrader.areFilterResultsEmpty">\n        </bb-grade-grid-reborn>\n        <div class="is-empty-page advanced-filters"\n            ng-if="courseGradesGrader.areFilterResultsEmpty">\n          <div class="is-empty-wrapper">\n            <div class="is-empty-explanation">\n              <h1 class="is-empty-heading" bb-translate>components.directives.grade.course-grades-grader.empty.advancedFilters.header</h1>\n              <p bb-translate>components.directives.grade.course-grades-grader.empty.advancedFilters.description</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Student List View handles its own loading indicator and empty state -->\n  <div ng-if="courseGradesGrader.isStudentListView" class="student-list-view-container">\n    <bb-student-list-view class="react-container"\n                          course-id="courseGrades.course.id">\n    </bb-student-list-view>\n  </div>\n</div>\n'},405116:function(e){e.exports='<ng-switch on="displayGrade.shouldShowPointsPossible()">\n  <span ng-switch-when="true" ng-bind-html="displayGrade.fullDisplayGrade"></span>\n  <span ng-switch-default><strong>{{displayGrade.fullDisplayGrade}}</strong></span>\n</ng-switch>'},367033:function(e){e.exports='<div class="grade-callout-wrapper">\n  <div class="grade-callout readonly {{displayGrade.getCourseColorClass()}}"\n       ng-class="{ \'pending\': displayGrade.attempt.isNeedsGrading() }"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target">\n    <span class="value" bb-translate>{{displayGrade.attemptStatus}}</span>\n  </div>\n</div>\n'},203179:function(e){e.exports='<div class="grade-callout-wrapper" ng-if="!displayGrade.isSchemaTypeComplete()">\n  <div class="grade-callout readonly {{displayGrade.colorClass || \'na\'}} overall-grade"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target"\n       ng-class="{\'defaultCursor\': displayGrade.cursorDefault}">\n    <span ng-if="!displayGrade.noGradeToDisplay()" class="sr-only" bb-translate>{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}</span>\n    <span ng-if="!overallGradePeekSref" class="value">{{displayGrade.fullDisplayGrade}}</span>\n    <a class="overall-grade value"\n       ng-if="overallGradePeekSref"\n       bb-peek-sref="{{overallGradePeekSref}}"\n       analytics-id="components.directives.grade.display-grade.overallGrade.link">\n      {{displayGrade.fullDisplayGrade}}\n    </a>\n  </div>\n</div>\n<bb-complete-incomplete-grade-pill\n  ng-if="displayGrade.isSchemaTypeComplete()"\n  is-complete="displayGrade.isStatusComplete()"\n  grade-value="displayGrade.schemaGradeValue">\n</bb-complete-incomplete-grade-pill>\n'},939990:function(e){e.exports='<span class="schema-grade">{{displayGrade.fullDisplayGrade}}</span>\n'},308322:function(e){e.exports='<div class="grade-color" ng-if="!displayGrade.isSchemaTypeComplete()">\n  <div ng-if="!displayGrade.shouldShowRubricButton() && !displayGrade.shouldShowRubricDiv()">\n    <div ng-if="!(isGroupGradeMultiple() && !showNotGraded())"\n         ng-class="{ \'show-total\': displayGrade.gradeDisplayItem.shouldShowTotalPoints(),\n                     \'final-grade\': finalGrade(),\n                     \'na\': displayGrade.gradeDisplayItem.displayValue == null,\n                     \'cursor-pointer\': displayGrade.cursorPointer,\n                     \'defaultCursor\': displayGrade.cursorDefault}"\n         class="wrapping-input-style {{displayGrade.colorClass}}"\n         ready="{{::displayGrade.fullDisplayGrade && !displayGrade.noGradeToDisplay() || undefined}}">\n      <ng-switch on="displayGrade.schema.scaleType">\n        <span ng-switch-default>\n          <span ng-if="displayGrade.fullDisplayGrade != null && !overallGradePeekSref" class="grade-input-display ready" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{displayGrade.fullDisplayGrade}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade != null && overallGradePeekSref"\n             class="grade-input-display ready"\n             bb-peek-sref="{{overallGradePeekSref}}"\n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.fullDisplayGrade.link">\n            {{displayGrade.fullDisplayGrade}}\n          </a>\n          <span ng-if="displayGrade.fullDisplayGrade == null && !overallGradePeekSref" class="grade-input-display" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade == null && overallGradePeekSref"\n             class="grade-input-display"\n             bb-peek-sref="{{overallGradePeekSref}}"\n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n        </span>\n        <span ng-switch-when="SCORE">\n          <!-- Accommodate for hiding of points possible in small format -->\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue != null && !overallGradePeekSref" class="grade-input-display ready">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue != null && overallGradePeekSref"\n             class="grade-input-display ready"\n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.fullDisplayGrade.link">\n            {{displayGrade.gradeDisplayItem.displayValue}}\n          </a>\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue == null && !overallGradePeekSref" class="grade-input-display">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue == null && overallGradePeekSref"\n             class="grade-input-display"\n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n          <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n        </span>\n      </ng-switch>\n    </div>\n    <div ng-if="isGroupGradeMultiple() && !showNotGraded()" class="wrapping-input-style is-multiple">\n      <div ng-if="overallGradePeekSref" class="group-multiple" bb-peek-sref="{{overallGradePeekSref}}" bb-translate>components.directives.grade.display-grade.multiple</div>\n      <div ng-if="!overallGradePeekSref" class="group-multiple" bb-translate>components.directives.grade.display-grade.multiple</div>\n    </div>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricButton()">\n    <a ng-if="!displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-view"\n       class="js-rubric-view wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubric.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n    <a ng-if="displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-evaluation({groupId: displayGrade.attempt.groupId})"\n       class="js-rubric-evaluation wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubricEvaluation.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}&nbsp</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricDiv() && displayGrade.shouldShowRubricEvaluation()"\n       class="wrapping-input-style clear"\n       ng-class="displayGrade.colorClass">\n    <span>\n      <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n      <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n    </span>\n  </div>\n</div>\n<bb-complete-incomplete-grade-pill\n  class="js-complete-pill"\n  ng-if="displayGrade.isSchemaTypeComplete()"\n  is-rubric-enabled="displayGrade.shouldShowRubricButton()"\n  is-complete="displayGrade.isStatusComplete()"\n>\n</bb-complete-incomplete-grade-pill>\n'},866736:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown cell-dropdown" role="menu">\n    <li role=“presentation”>\n        <button role="menuitem" \n                class="js-view-submission button clear" \n                ng-click="cell.view()" \n                ng-disabled="!cell.canBeView"\n                analytics-id="components.directives.grade.grid.viewItemRecord" >\n          <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n          <bb-translate  course-org-token-resolver class="ellipse">components.directives.grade.grid.viewItemRecord</bb-translate>\n        </button>\n    </li>\n  </ul>\n</div>'},598278:function(e){e.exports='<div class="input-wrapper" ng-if="!gradeGridCellEditorReborn.isSchemaTypeComplete()">\n  <input translate-attrs-values="{userName: gradeGridCellEditorReborn.userName}"\n        bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grid.scoreInputAriaLabel\'}"\n        ng-blur="gradeGridCellEditorReborn.onInputBlur($event)"\n        placeholder="--" ng-model="gradeGridCellEditorReborn.score"\n        ng-click="gradeGridCellEditorReborn.stopPropagation($event)"\n        ng-change="gradeGridCellEditorReborn.onChange()"\n        aria-describedby="totalPoints"\n        ng-keydown="gradeGridCellEditorReborn.onKeydown($event)" spellcheck="false" autocomplete="off"\n        analytics-id="components.directives.grade.gradeGridCellEditorReborn.input.text" />\n</div>\n<div class="possible-wrapper" ng-mousedown="gradeGridCellEditorReborn.mousedown()" ng-if="!gradeGridCellEditorReborn.isSchemaTypeComplete()">\n  <span class="slash"></span><span id="totalPoints" class="possible" ng-bind="col.data.possible"></span>\n</div>\n  <bb-complete-incomplete-grade-pill\n      ng-keydown="gradeGridCellEditorReborn.onKeydown($event)"\n      ng-if="gradeGridCellEditorReborn.isSchemaTypeComplete()"\n      class="js-completeScore"\n      grade-value="gradeGridCellEditorReborn.score"\n      is-complete="gradeGridCellEditorReborn.isStatusComplete()"\n      on-blur="gradeGridCellEditorReborn.onCompleteIncompleteBlur"\n      total-points="col.data.possible"\n      aria-complete-incomplete-label="gradeGridCellEditorReborn.getAriaLabel()"\n      analytics-id="components.directives.grade.gradeGridCellEditorReborn.input.text"\n      initial-has-focus="true"\n  ></bb-complete-incomplete-grade-pill>\n'},982118:function(e){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <div class="content content-header-bg"\n       ng-click="gradeGridColumnHeaderOverallReborn.popupMenu($event)"\n       tabindex="0"\n       role="columnheader"\n       aria-describedby="summary-points-{{::columnMetadata.id}}"\n       analytics-id="components.directives.grade.grid.gradeGridColumnHeaderOverallReborn.popupMenu"\n  >\n    <div bb-content-item-icon content-column="columnMetadata" class="element-image" role="presentation"></div>\n    <div class="grade-grid-header-title grade-name">\n      <bb-svg-icon class="visibility-icon"\n                   ng-if="!columnMetadata.visible"\n                   size="small"\n                   icon="invisible"\n                   role="img"\n                   bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.gradeNotVisible\'}"\n      ></bb-svg-icon>\n      <span class="ellipse" title="{{::columnMetadata.columnName}}">{{::columnMetadata.columnName}}</span>\n    </div>\n  </div>\n  <div class="grade-grid-header-summary" tabindex="1" id="summary-points-{{columnMetadata.id}}">\n    <span class="sr-only">{{columnMetadata.columnName}}</span>\n    <span class="ellipse points"\n          bb-translate-attrs="{\'title\': \'components.directives.grade.grid.points.plural\'}" translate-attrs-values="{count: gradeGridColumnHeaderOverallReborn.possible}"\n          bb-translate translate-values="{count: gradeGridColumnHeaderOverallReborn.possible}">components.directives.grade.grid.points.plural</span>\n    <span class="sr-only"\n          bb-translate translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n  </div>\n\n  <div class="grade-grid-header-summary" tabindex="1" ng-if="columnMetadata.isCalculated()" id="summary-info-{{columnMetadata.id}}">\n    <span class="sr-only">{{columnMetadata.columnName}}</span>\n    <span class="ellipse items-count"\n          bb-translate-attrs="{\'title\': \'components.directives.grade.grid.itemsTip\'}" translate-attrs-values="{count: columnMetadata.itemsCount}"\n          bb-translate translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n  </div>\n</div>\n'},596435:function(e){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <div class="content content-header-bg" tabindex="0" role="columnheader"\n       ng-class="{\'is-restricted\': columnMetadata.isHiddenFromStudents(), \'is-unavailable\': !gradeGridColumnHeaderReborn.toolAvailable || !col.hasContextMenuOptions()}"\n       ng-click="gradeGridColumnHeaderReborn.popupMenu($event)"\n       analytics-id="components.directives.grade.grid.gradeGridColumnHeaderReborn.popupMenu">\n    <div bb-content-item-icon content-column="columnMetadata" show-alert-icon="showAlertIcon()" class="element-image" role="presentation"></div>\n    <div class="ellipse grade-name" title="{{columnMetadata.columnName}}"\n      aria-labelledby="summary-info-{{columnMetadata.id}}">{{columnMetadata.columnName}}</div>\n    <div bb-feature-toggle="feature.course.content.formative.assessments"\n    remove-from-dom="true">\n    <span ng-if="columnMetadata.isFormative" class="formative-label"\n          bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n          id="summary-formative-{{columnMetadata.id}}"\n          aria-hidden="true"\n          bb-translate>\n          components.directives.grade.grid.formative\n    </span>\n  </div>\n\n  </div>\n\n  <div class="grade-grid-header-summary" tabindex="0"\n    id="summary-points-{{columnMetadata.id}}">\n    <span class="sr-only" >{{columnMetadata.columnName}}</span>\n    <span class="ellipse points" title="{{gradeGridColumnHeaderReborn.getSchemaText()}}">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n  </div>\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && !columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    tabindex="0"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse grade-count"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.gradedTip\'}" translate-attrs-values="{count: isGroupTest ? columnMetadata.summary.numStudentsGradedNeedsPosting + columnMetadata.summary.numStudentsPosted + columnMetadata.summary.numberOfStudentsOverriddenGradesToPost : columnMetadata.summary.numStudentsGraded()}"\n            bb-translate translate-values="{count: isGroupTest ? columnMetadata.summary.numStudentsGradedNeedsPosting + columnMetadata.summary.numStudentsPosted + columnMetadata.summary.numberOfStudentsOverriddenGradesToPost : columnMetadata.summary.numStudentsGraded()}">components.directives.grade.grid.graded</span>\n      <span class="grade-pipe"></span>\n      <span class="ellipse grade-posted-count"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.postedTip\'}" translate-attrs-values="{count: isGroupTest ? columnMetadata.summary.numStudentsPosted : columnMetadata.summary.numPosted}"\n            bb-translate translate-values="{count: isGroupTest ? columnMetadata.summary.numStudentsPosted : columnMetadata.summary.numPosted}">components.directives.grade.grid.posted</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n       class="grade-grid-header-summary"\n       ng-class="{\'grade-complete-status\': !gradeGridColumnHeaderReborn.isRestricted()}"\n       tabindex="0"\n       bb-translate-attrs="{\'title\': \'components.directives.grade.grader-column.statuses.restricted\'}"\n       id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()" class="grade-grid-header-summary"\n       tabindex="0"\n       bb-translate-attrs="{\'title\': \'components.directives.grade.grader-column.statuses.restricted\'}"\n       id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n       class="grade-grid-header-summary"\n       tabindex="0"\n       bb-translate-attrs="{\'title\': \'components.directives.grade.grid.completeLabel\'}"\n       id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="(!col.isShowSummary() || !columnMetadata.isVisibleToStudents()) && !columnMetadata.isCalculated()"\n       class="grade-grid-header-summary"\n       tabindex="0"\n       id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse grade-status"></span>\n    </div>\n  </div>\n\n  <div ng-if="columnMetadata.isCalculated()"\n       class="grade-grid-header-summary"\n       tabindex="0"\n       id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse items-count" ng-if="columnMetadata.itemsCount !== undefined"\n        bb-translate-attrs="{\'title\': \'components.directives.grade.grid.itemsTip\'}"\n        translate-attrs-values="{count: columnMetadata.itemsCount}" bb-translate\n        translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n    </div>\n  </div>\n</div>\n'},58155:function(e){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <div class="content student-content student-column" role="columnheader" tabindex="0">\n    <div class="ellipse left-bold location" course-org-token-resolver bb-translate>components.directives.grade.grid.students</div>\n  </div>\n  <div class="summary student-column"></div>\n  <div class="summary student-column">\n    <span bb-translate course-org-token-resolver translate-values="{count: studentsTotal}">components.directives.grade.grid.studentsSummary.plural</span>\n  </div>\n</div>\n'},678311:function(e){e.exports='<div class="grade-grid-cell grade-grid-body-cell"\n     tabindex="0"\n     ng-click="gradeGridColumnOverallReborn.enterEditor($event)"\n     analytics-id="components.directives.grade.grid.gradeGridColumnOverallReborn.enterEdit"\n>\n  <div class="overall-display-grade" ng-class="{\'editor-disable\': gradeGridColumnOverallReborn.disabledEditor}"\n       aria-label="{{gradeGridColumnOverallReborn.ariaLabelContent}}">\n    <!--<bb-display-grade column="col.data" display-type="GradeColor" grade-detail="gradeGridColumnOverallReborn.gradeDetail"></bb-display-grade>-->\n    <bb-display-grade-pill\n      column="col.data"\n      grade="gradeGridColumnOverallReborn.gradeDetail"></bb-display-grade-pill>\n  </div>\n</div>\n'},461576:function(e){e.exports='<div class="grade-grid-cell grade-grid-body-cell"\n  ng-click="!isDisabled && gradeGridColumnReborn.enterEditor($event)"\n  analytics-id="components.directives.grade.grid.gradeGridColumnReborn.enterEdit"\n>\n<div class="exception-icon" ng-if="gradeGridColumnReborn.showExceptionIcon">\n  <button\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    bb-translate-attrs="{\'aria-label\': \'components.directives.grade.submission-list-row.exception.tooltipButtonAriaLabel\'}"\n    translate-attrs-values="{name: gradeGridColumnReborn.getShortFormatUsername()}"\n    tooltip-position="top-center"\n    tooltip-center-content="true"\n    tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n    tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n    tooltip-scope="gradeGridColumnReborn.tooltipScope"\n    tooltip-template="{{gradeGridColumnReborn.getTooltipTemplate()}}"\n    analytics-id="components.directives.grade.grid.gradeGridColumnReborn.exception.button">\n    <bb-ui-icon-small-time-extra></bb-ui-icon-small-time-extra>\n  </button>\n</div>\n  <div class="score hide" aria-label="{{gradeGridColumnReborn.ariaLabelContent}}">\n      <bb-complete-incomplete-grade-pill\n        ng-if="gradeGridColumnReborn.isSchemaTypeComplete() && gradeGridColumnReborn.showCompletePill()"\n        class="complete-pill"\n        is-complete="gradeGridColumnReborn.isStatusComplete()"\n        grade-value="gradeGridColumnReborn.score"\n        on-blur="gradeGridColumnReborn.onCompleteInputBlur"\n        total-points="col.data.possible">\n      </bb-complete-incomplete-grade-pill>\n    <div id="displayedScore" class="hide">\n      <span id="display" class="ellipse hide" ng-show="!gradeGridColumnReborn.isSchemaTypeComplete()"></span>\n      <span id="posted"  class="grade-posted-symbol hide" bb-translate>components.directives.grade.grid.postedLabel</span>\n      <span id="pastDueZero" class="past-due-zero-symbol hide" bb-translate>components.directives.grade.grid.pastDueZero</span>\n      <span id="slash" class="slash hide"></span>\n      <span id="pointsPossible" class="pointsPossible hide"></span>\n      <span id="exempt" class="item-exempt-symbol hide" bb-translate>components.directives.grade.grid.exemptLabel</span>\n    </div>\n\n    <div id="gradeNow" class="hide" aria-label="{{gradeGridColumnReborn.ariaLabelContent}}">\n      <a href="javascript:void(0);"\n         analytics-id="components.directives.grade.grid.gradeNow"\n         bb-translate>components.directives.grade.grid.gradeNow</a>\n    </div>\n\n    <div id="newSubmission" class="hide">\n      <span class="new-submission" bb-translate>components.directives.grade.grid.newSubmissionLabel</span>\n    </div>\n\n    <span id="blank" class="sr-only">\n        {{gradeGridColumnReborn.ariaLabelContent}}\n    </span>\n  </div>\n  <div id="group" class="group-label" ng-if="!gradeGridColumnReborn.isRestrictedGroupContent">{{gradeGridColumnReborn.group.groupTitle}}</div>\n  <div id="ungraded" class="ungraded hide">\n    <span class="ellipse">{{gradeGridColumnReborn.ungraded}}</span>\n  </div>\n  <div class="anonymous hide">\n    <button\n      bb-tooltip\n      enhanced-tooltip="true"\n      tooltip-position="bottom-center"\n      class="anonymous-button"\n      analytics-id="components.directives.grade.grid.anonymous.button"\n      bb-translate-attrs="{ title: \'components.directives.grade.grid.anonymous.tooltip\' }">\n      <span bb-translate>components.directives.grade.grid.anonymous.label</span>\n    </button>\n  </div>\n</div>\n'},368601:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu student-card" tabindex="-1">\n  <div class="student-info">\n    <bb-user-avatar class="avatar" user="user"></bb-user-avatar>\n    <div class="info">\n      <bb-username class="ellipse username" user="user" auto-update="true" title="{{fullName}}" ng-class="{ inactive: !isUserCourseAvailable }"></bb-username>\n      <div class="profile ellipse" ng-if="user.userName && !user.studentId" title="{{user.userName}}">{{user.userName}}</div>\n      <div class="profile ellipse" ng-if="!user.userName && user.studentId" title="{{user.studentId}}" bb-translate translate-values="{ studentId: user.studentId }">components.directives.usercard.studentId</div>\n      <div class="profile ellipse" ng-if="user.userName && user.studentId" title="{{user.studentId}}" bb-translate translate-values="{ username: user.userName, studentId: user.studentId }">components.directives.usercard.usernameAndId</div>\n      <div class="profile" ng-bind="courseRole"></div>\n    </div>\n  </div>\n</div>\n'},167685:function(e){e.exports='<div class="grade-grid-cell grade-grid-body-cell student-column">\n  <div class="student-info">\n    <bb-user-avatar class="avatar"\n      user="user"\n      ng-click="!isDisabled && gradeGridColumnStudentReborn.viewIndividualGrades(user.id, membershipId)"\n      analytics-id="components.directives.grade.grid.studentAvatar.link"\n    >\n    </bb-user-avatar>\n    <div class="name-and-groups">\n      <a ng-if="!isDisabled" class="username-link"\n        bb-peek-sref="view-individual-grades({ userId: user.id, membershipId: membershipId })"\n        bb-prevent-routing-click="div.bb-audio-player"\n        analytics-id="components.directives.grade.grid.studentUsername.link"\n      >\n        <bb-username class="ellipse username" user="user" auto-update="true" format-sync="true" show-pronouns="true" show-pronunciation="true" ng-class="{ inactive: !isUserCourseAvailable }"></bb-username>\n      </a>\n      <span ng-if="isDisabled">\n        <bb-username class="ellipse username" user="user" auto-update="true" format-sync="true" show-pronouns="true" show-pronunciation="true" ng-class="{ inactive: !isUserCourseAvailable }"></bb-username>\n      </span>\n      <bb-filtered-users-groups\n        class="group-names"\n        user-id="user.id">\n      </bb-filtered-users-groups>\n    </div>\n  </div>\n</div>\n'},841543:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="grade-grid-group-confirm-dialog" aria-haspopup="true" role="dialog">\n  <div class="message-wrapper">\n    <div class="message">\n      <span bb-translate>components.directives.grade.grid.confirmContent</span>\n    </div>\n    <div class="buttons">\n      <button class="button" \n              ng-click="saveGroup()" \n              bb-translate  \n              analytics-id="components.directives.grade.grid.yes">components.directives.grade.grid.yes</button>\n      <button class="button button--secondary" \n              ng-click="saveOne()" \n              ng-disabled="isSaveOneDisabled" \n              analytics-id="components.directives.grade.grid.no"\n              bb-translate>components.directives.grade.grid.no</button>\n    </div>\n  </div>\n</div>'},156518:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown" role="menu">\n    <li role="presentation">\n      <a role="menuitem"\n         class="js-add-calculation"\n         bb-peek-sref="gradebook-item.calculation({positionAfter: positionAfter})"\n         analytics-id="components.directives.grade.grid.addCalculation">\n        <bb-svg-icon size="small" icon="calculation"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addCalculation</bb-translate>\n      </a>\n    </li>\n\n    <li role="presentation">\n      <a role="menuitem"\n         class="js-add-item"\n         bb-peek-sref="grade-item.create({positionAfter: positionAfter})"\n         analytics-id="components.directives.grade.grid.addItem">\n        <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addItem</bb-translate>\n      </a>\n    </li>\n\n    <li role="presentation" ng-if="!attendanceColumnExists && attendanceIsAvailable">\n      <a role="menuitem"\n         bb-peek-sref="attendance"\n         analytics-id="components.directives.grade.grid.addAttendance">\n        <bb-svg-icon size="small" icon="attendance" ></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addAttendance</bb-translate>\n      </a>\n    </li>\n  </ul>\n</div>'},216775:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown cell-dropdown" role="menu">\n    <li ng-if="cell.canBeView"\n        role="presentation">\n        <button role="menuitem"\n                class="js-view-submission button clear"\n                ng-click="cell.view()"\n                analytics-id="components.directives.grade.grid.viewItem">\n          <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n          <bb-translate  class="ellipse">components.directives.grade.grid.viewItem</bb-translate>\n        </button>\n    </li>\n    <li ng-class="{disable: !isReadyToPost()}"\n        ng-if="cell.canPost()"\n        role="presentation">\n        <button role="menuitem"\n                class="js-post-grade button clear"\n                ng-click="post()"\n                ng-disabled="!isReadyToPost()"\n                analytics-id="components.directives.grade.grid.post">\n          <bb-svg-icon size="small" icon="post"></bb-svg-icon>\n          <bb-translate class="ellipse" bb-translate>components.directives.grade.grid.post</bb-translate>\n        </button>\n    </li>\n    <li ng-if="cell.shouldAllowUserToAddExceptions()"\n          role="presentation">\n          <button role="menuitem"\n                  class="exception-grade button clear"\n                  ng-click="cell.openExceptionPanel()"\n                  analytics-id="components.directives.grade.grid.exceptions">\n            <bb-ui-icon-small-time-extra class="exception-small-icon"></bb-ui-icon-small-time-extra>\n            <bb-translate class="ellipse">components.directives.grade.submission-list-row.per-assessment.exceptions</bb-translate>\n          </button>\n    </li>\n    <div bb-feature-toggle="feature.gradebook.exempt.gradable.item" remove-from-dom="true">\n      <li ng-if="cell.canExempt()"\n          role="presentation">\n          <button role="menuitem"\n                  class="exempt-grade button clear"\n                  ng-click="cell.exempt()"\n                  analytics-id="components.directives.grade.grid.exempt">\n            <bb-ui-icon-small-exempt class="exempt-small-icon"></bb-ui-icon-small-exempt>\n            <bb-translate class="ellipse" bb-translate>components.directives.grade.course-grades-student.exemption.exemption</bb-translate>\n          </button>\n      </li>\n    </div>\n  </ul>\n</div>\n'},28570:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown" role="menu">\n    <li ng-if="col.isScorm()" role="presentation">\n      <a role="menuitem"\n         ng-click="col.previewScorm()"\n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grid.viewScorm">\n        <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.viewScorm</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canView() && !col.canEdit() && !col.isScorm()" role="presentation">\n      <a role="menuitem"\n          ng-click="col.viewOrEdit()"\n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.viewItem">\n        <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.viewItem</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canEdit()" role="presentation">\n      <a  role="menuitem"\n          class="js-edit-column"\n          ng-click="col.viewOrEdit()"\n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.edit">\n        <bb-svg-icon size="small" icon="draw"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.edit</bb-translate>\n      </a>\n    </li>\n    <li ng-if="canPostGrades" role="presentation">\n      <a  role="menuitem"\n          class="js-post-column"\n          ng-click="col.postGrades()"\n          href="javascript:void(0);"\n          bb-confirmation-needed="{{grade.getPostAllGradeConfirmationNeededStringsKey(col.data)}}"\n          modal-aria-type="alertdialog"\n          show-type="always"\n          analytics-id="components.directives.grade.grid.post">\n        <bb-svg-icon size="small" icon="post"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.post</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.data.isQuestionAnalysisAvailable() && col.canViewQuestionAnalysis()"\n        remove-from-dom="true"\n        role="presentation">\n      <a  role="menuitem"\n          class="js-open-question-analysis"\n          ng-click="col.openQuestionAnalysisOverview()"\n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.openQuestionAnalysis">\n        <bb-svg-icon size="small" icon="question-analysis"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.openQuestionAnalysis</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.showDownloadResults()" role="presentation">\n      <a role="menuitem"\n          class="js-download-results"\n          ng-click="col.openDownloadTestResultsPanel()"\n          href="javascript:void(0)"\n          analytics-id="components.directives.grade.grid.downloadResults">\n        <bb-ui-icon-small-download></bb-ui-icon-small-download>\n        <bb-translate class="ellipse">components.directives.grade.grader-column.downloadResults.overflowMenuLabel</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.hasDownloads() && col.canDownloadAll()" role="presentation">\n      <a role="menuitem"\n          class="js-download-all"\n          ng-click="col.openDownloadAll()"\n          href="javascript:void(0)"\n          analytics-id="components.directives.grade.grid.downloadAll">\n        <bb-ui-icon-small-download-file></bb-ui-icon-small-download-file>\n        <bb-translate class="ellipse">components.directives.grade.grid.downloadSubmissions</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canDelete()" role="presentation">\n      <a class="js-delete-column"\n         href="javascript:void(0);"\n         ng-click="col.triggerDelete($event)"\n         ng-switch="!!col.data.contentId"\n         analytics-id="components.directives.grade.grid.deleteColumn.link"\n         role="button">\n        <!-- Content column -->\n        <bb-delete callback-function="col.deleteColumn()"\n                   class="ellipse"\n                   content-id="col.data.contentId"\n                   course-id="col.data.courseId"\n                   display-mode="controls"\n                   ng-switch-when="true"\n                   role="menuitem">\n        </bb-delete>\n        <!-- Grading column -->\n        <bb-delete class="ellipse"\n                   confirmation-handler="{{col.getConfirmationMessage()}}"\n                   delete-function="col.deleteColumn()"\n                   display-mode="controls"\n                   ng-switch-when="false"\n                   role="menuitem">\n        </bb-delete>\n      </a>\n    </li>\n  </ul>\n</div>\n'},801838:function(e){e.exports='\n<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul ng-if="gradeGridColumnOverallReborn.gradeDetail.displayGrade.isOverride || col.gradeNotations.length" class="f-dropdown f-dropdown-overflow-menu reborn-dropdown performance-code-options show notation-no-border notation-max-height " role="menu">\n\n    <li ng-if="col.gradeNotations.length" class="performance-option-header">\n        <span bb-translate>components.directives.grade.grade-input.selectPerformanceCode</span>\n    </li>\n    <li ng-repeat="notation in col.gradeNotations" class="performance-code-option">\n      <a role="menuitem"\n         ng-click="gradeGridColumnOverallReborn.selectNotation(notation)"\n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grid.notation.link">\n        <span class="code" aria-label="{{notation.code}}">{{notation.code}}</span>\n        <span class="description notation-description-max-width" aria-label="{{notation.description}}">{{notation.description}}</span>\n      </a>\n    </li>\n    <li ng-if="gradeGridColumnOverallReborn.gradeDetail.displayGrade.isOverride" class="undo-override">\n      <a role="menuitem"\n         ng-click="gradeGridColumnOverallReborn.undoOverride()"\n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grade-input.undoOverride">\n        <bb-svg-icon size="small" icon="undo"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grade-input.undoOverride</bb-translate>\n      </a>\n    </li>\n  </ul>\n</div>\n'},186075:function(e){e.exports="<div ng-transclude></div>"},193674:function(e){e.exports='<div role="alertdialog" aria-live="assertive">\n  <div class="validation-message-wrapper" tabindex="0">\n    <span bb-ax-alert="2000" class="validation-message" id="sr-message" bb-translate >components.directives.grade.validation.default</span>\n  </div>\n</div>'},569683:function(e){e.exports='<div ng-if="!gradeGridOverallEditorReborn.isSchemaTypeComplete()" class="wrapping-input-style no-hover">\n  <div>\n    <input autocomplete="off" pu-elastic-input pu-elastic-input-minwidth="10px" pu-elastic-input-maxwidth="180px" pu-elastic-input-width-delta="8"\n           ng-blur="gradeGridOverallEditorReborn.onInputBlur()"\n           placeholder="--" ng-model="gradeGridOverallEditorReborn.score"\n           ng-mousedown="gradeGridOverallEditorReborn.stopPropagation($event)"\n           ng-click="gradeGridOverallEditorReborn.stopPropagation($event)"\n           ng-change="gradeGridOverallEditorReborn.onChange()"\n           ng-keydown="gradeGridOverallEditorReborn.onKeydown($event)" spellcheck="false"\n           analytics-id="components.directives.grade.grid.overAll.input.text"/>\n  </div>\n  <div ng-mousedown="gradeGridOverallEditorReborn.mousedown()" ng-class="{hidden: gradeGridOverallEditorReborn.isHiddenPointsPossible}">\n    <span class="slash"></span><span class="possible" ng-bind="gradeGridColumnOverallReborn.pointsPossibleToDisplay"></span>\n  </div>\n</div>\n<bb-complete-incomplete-grade-pill\n  class="js-completeScore"\n  ng-keydown="gradeGridOverallEditorReborn.onKeydown($event)"\n  ng-if="gradeGridOverallEditorReborn.isSchemaTypeComplete()"\n  grade-value="gradeGridOverallEditorReborn.score"\n  is-complete="gradeGridOverallEditorReborn.isStatusComplete()"\n  on-blur="gradeGridOverallEditorReborn.onCompleteIncompleteBlur"\n  analytics-id="components.directives.grade.grid.overAll.input.text"\n  total-points="gradeGridOverallEditorReborn.scope.gradeGridColumnOverallReborn.pointsPossible"\n  initial-has-focus="true"\n></bb-complete-incomplete-grade-pill>\n'},176683:function(e){e.exports='<div id="grade-grid-container" class="grade-grid-container">\n  <div class="spinner bb-secondary-color-2" ng-if="!gg.initialized" aria-hidden="true"></div>\n  <div class="overall-grade-setup grade-search-filter-panel student-column" ng-if="gg.showFilterCriteria">\n      <bb-grade-grid-search-filter-reborn merged-courses="::gg.mergedCourses"></bb-grade-grid-search-filter-reborn>\n  </div>\n\n  <div id="grade-grid" bb-grid-reborn="gg.gridOptions"></div>\n  <div class="overall-grade-setup text-center" ng-if="gg.isOverallPanelShown && gg.canViewOverallPanel">\n    <bb-setup-overall-grade show-fixed-view="gg.canViewOverallPanel" course-id="course().id" setup-overall-grade-hide-message-callback="gg.setupOverallGradeHideMessageCallback()"></bb-setup-overall-grade>\n  </div>\n</div>\n'},658169:function(e){e.exports='\n<div class="filter-list-content">\n  <div class="filter-panel-container">\n    <div class="filter-panel-header">\n      <div class="filter-panel-title-wrapper">\n        <h3 class="filter-panel-title" bb-translate>components.directives.grade.filter-panel.title</h3>\n        <button type="button"\n          class="filter-panel-close-button"\n          data-is-visible="true"\n          bb-translate-attrs="{\'aria-label\': \'components.directives.grade.filter-panel.closeFilterPanel\'}"\n          ng-click="gradeGridSearchFilterReborn.closeFilterCriteria()"\n          analytics-id="components.directives.grade.filterPanel.close.button"\n        >\n          <div>\n            <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n          </div>\n        </button>\n      </div>\n      <button class="filter-panel-clear-all is-disabled"\n              ng-disabled= "!gradeGridSearchFilterReborn.getCheckedMergedCourse() > 0"\n              ng-class="{\'filter-panel-clear-all-active\': gradeGridSearchFilterReborn.getCheckedMergedCourse() > 0}"\n              ng-click="gradeGridSearchFilterReborn.clearAll()"\n              analytics-id="components.directives.grade.filter-panel.clearAll"\n              bb-translate>\n              components.directives.grade.filter-panel.clearAll\n      </button>\n    </div>\n    <!-- TODO Container(style protoType) for search-box, enable in furture\n    <div class="filter-panel-block" id="keyword-block">\n        <div class="filter-panel-block-header">\n          <h4 class="filter-panel-block-title">Keyword Search</h4>\n          <button type="button filter-panel-toggle-button">\n            <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n          </button>\n        </div>\n        <div class="filter-panel-search-box">\n            <bb-typeahead-search-box id="student-search-box"\n                                     input-placeholder="components.directives.grade.search-box.placeholder"\n                                     sr-empty-results="components.directives.grade.search-box.emptyResults"\n                                     sr-results-found="components.directives.grade.search-box.resultsFound"\n                                     sr-no-results-found="components.directives.grade.search-box.noResultsFound"\n                                     sr-label="components.directives.grade.search-box.placeholder"\n                                     clear-aria-label="components.directives.grade.search-box.clear"\n                                     icon="search">\n            </bb-typeahead-search-box>\n        </div>\n    </div>\n    -->\n    <div class="filter-panel-block" id="sources-block" ng-repeat="criteriaBlock in gradeGridSearchFilterReborn.criteriaBlocks ">\n        <div class="filter-panel-block-header" id ={{::criteriaBlock.id}}>\n            <h4 class="filter-panel-block-title" course-org-token-resolver bb-translate>components.directives.grade.filter-panel.mergedCourseTitle</h4>\n            <button type="button" class="filter-panel-toggle-button"\n                    ng-class="{\'filter-panel-block-toggle-close\': !criteriaBlock.expanded }"\n                    ng-click="gradeGridSearchFilterReborn.collapseMergedCourse(criteriaBlock)"\n                    aria-label="{{gradeGridSearchFilterReborn.getToggleButtonLabel(criteriaBlock)}}"\n                    analytics-id="components.directives.grade.filterPanel.mergedCourse.collapse.button"\n            >\n            <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n            </button>\n          </div>\n        <div class="filter-panel-groups" ng-show="criteriaBlock.expanded">\n          <div class="filter-panel-group">\n            <div class="filter-panel-item" ng-repeat="criteriaDetail in criteriaBlock.criteriaDetails track by $index" >\n              <div class="is-enabled filter-panel-item-checkbox" ng-show="!criteriaDetail.ui.hidden">\n                <input type="checkbox" id={{::criteriaDetail.id}}\n                  class="bb-Checkbox-checkboxInput foundation-overrides"\n                  ng-model="criteriaDetail.ui.checked"\n                  ng-change="gradeGridSearchFilterReborn.filterMergedCourse(criteriaDetail)"\n                  analytics-id="components.directives.grade.filterPanel.mergedCourse.input.checkbox">\n                  <label class="foundation-overrides" for={{::criteriaDetail.id}}>\n                    <div class="check-box-label">\n                      <span>{{::criteriaDetail.childCourse.name}}</span>\n                      <bb-svg-icon icon="check" size="inline"></bb-svg-icon>\n                    </div>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n  </div>\n</div>'},817818:function(e){e.exports='<ul class="complex-tooltip-list conditional-release-tooltip">\n  <li bb-translate class="complex-tooltip-list__bullet" ng-if="gradeGridColumnReborn.isUserHasDueDateException()">components.directives.grade.submission-list-row.exception.date</li>\n  <li bb-translate class="complex-tooltip-list__bullet" ng-if="gradeGridColumnReborn.isUserHasReleaseConditions()">components.directives.grade.submission-list-row.exception.release</li>\n  <li bb-translate class="complex-tooltip-list__bullet" ng-if="gradeGridColumnReborn.cell.exceptions.hasAttemptsException">components.directives.grade.submission-list-row.exception.attempts</li>\n</ul>\n'},396922:function(e){e.exports='<div class="grade-input-wrapper" ng-class="{\'has-validation-error\': !!gradeInput.form[gradeInput.id].$invalid}">\n  <div ng-show="!gradeInput.isSchemaTypeComplete()" class="grade-pill-container" ng-attr-id="{{hasRubricClearConfirmationCallout ? \'grade-input-container-callout\' : \'\'}}">\n    <div>\n      <bb-inline-validation\n        show-error="!!gradeInput.form[gradeInput.id].$invalid"\n        bb-translate-attrs="{ \'error-message\': errorMessageKey }"\n        ng-show="gradeInput.shouldShowInput()">\n        <div\n          ng-class="{\'not-graded-exempt\': !gradeInput.colorClass && gradeDetail.isExempt, \'show-total\': gradeInput.shouldShowTotalPoints(), \'is-multiple\': gradeInput.isMultipleShown() && !gradeDetail.isExempt,\n                      \'is-in-progress\': gradeInput.isInProgressShown() && !gradeDetail.isExempt, \'group-grade-input\': !!forGroup, \'disable-click\': gradeDetail.isExempt}"\n          class="wrapping-input-style {{gradeInput.colorClass}}" data-dropdown="performanceCodes-{{gradeInput.id}}">\n          <div bb-foundation-defer>\n            <div class="wrapping-editable-input">\n              <bb-svg-icon size="small" icon="rubric"\n                           ng-if="gradeInput.isRubricEvalMode() && gradeInput.shouldShowInput()"></bb-svg-icon>\n\n              <input name="{{gradeInput.id}}" autocomplete="off"\n                     ng-class="{\'group-multiple\': gradeInput.isMultipleShown(), \'group-in-progress\': gradeInput.isInProgressShown()}"\n                     pu-elastic-input pu-elastic-input-minwidth="10px" pu-elastic-input-maxwidth="180px"\n                     pu-elastic-input-width-delta="8"\n                     type="text" placeholder="--"\n                     bb-translate-attrs="{ \'aria-label\': gradeInput.getGradeInputAriaLabelKey() }"\n                     translate-attrs-values="{ user: forUser, group_name: forGroup && forGroup.title, grade: gradeInput.gradeDisplayItem.displayValue, total: gradeDetail.pointsPossible || (column.isCalculated() ? 100 : column.possible)}"\n                     ng-model="gradeInput.gradeDisplayItem.displayValue" ng-readonly="gradeInput.isReadOnly()"\n                     title="{{gradeInput.gradeDisplayItem.perfCodeDesc}}"\n                     ng-blur="gradeInput.onBlur($event)" ng-change="gradeInput.gradeValueOnChange()"\n                     ng-focus="gradeInput.onFocus()"\n                     class="js-grade-input" analytics-id="directives.grade-input.grade.display.item.input"\n                     aria-invalid="{{!!gradeInput.form[gradeInput.id].$invalid ? \'true\' : \'false\'}}"\n                     aria-describedby="{{!!gradeInput.form[gradeInput.id].$invalid ? gradeInput.getAriaDescribeById(): undefined}}">\n\n              <bb-confirmation-callout-dialog\n                ng-if="hasRubricClearConfirmationCallout"\n                analytics-id="directives.grade-input.grade.clearRubricConfirmation"\n                target="\'#grade-input-container-callout\'"\n                is-visible="gradeInput.gradeDialog.isVisible"\n                text-content="gradeInput.gradeDialog.textContent"\n                on-dismiss="gradeInput.gradeDialog.onDismiss"\n                on-success="gradeInput.gradeDialog.onSuccess"\n              >\n              </bb-confirmation-callout-dialog>\n            </div>\n\n          </div>\n\n          <!--TOTAL POINTS-->\n          <!-- Fix ULTRA-15280.\n          If there is gradeDetail, we should use its pointsPossible as the total.\n          If there is no gradeDetail, which means it is not graded yet, there are tow cases:\n           for overall grade (and calculations), we use the default value 100, unless the overall grade schema is ScoreBased\n           for common column, assignment, etc. we use column.possible. -->\n          <span ng-if="gradeInput.shouldShowTotalPoints()" class="points-text" bb-translate\n                translate-values="{total: gradeInput.getTruncatedPointsPossible()}">\n        components.directives.grade.grade-input.points\n        </span>\n        </div>\n        <div class="alert-icon" ng-if="!!gradeInput.form[gradeInput.id].$invalid">\n          <bb-svg-icon size="small" icon="attention" status="alert"></bb-svg-icon>\n        </div>\n      </bb-inline-validation>\n      <a ng-show="!gradeInput.shouldShowInput()" class="button super-clear has-rubric wrapping-input-style {{gradeInput.colorClass}}"\n         ng-class="{\'show-total\': gradeInput.shouldShowTotalPoints(), \'is-multiple\': gradeInput.isMultipleShown(), \'is-in-progress\': gradeInput.isInProgressShown(), \'group-grade-input\': !!forGroup, \'disable-click\': disableRubricEvalClick()}"\n         ng-click="gradeInput.openRubricEvaluation()"\n         aria-disabled="{{disableRubricEvalClick()}}"\n         href="javascript:void(0);" analytics-id="directives.grade-input.rubric.evaluation.link">\n        <span class="sr-only" bb-translate translate-values="{user: forUser}">components.directives.grade.grade-input.rubricButtonAlt</span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span name="{{gradeInput.id}}" class="grade-point-value"\n              ng-class="{\'group-multiple\': gradeInput.isMultipleShown(), \'group-in-progress\': gradeInput.isInProgressShown()}">\n        {{gradeInput.gradeDisplayItem.displayValue || \'--\'}}&nbsp;\n      </span>\n\n        <!--TOTAL POINTS-->\n        <span ng-if="gradeInput.shouldShowTotalPoints()" class="points-text" bb-translate\n              translate-values="{total: gradeDetail.pointsPossible || (column.isCalculated() ? 100 : column.possible)}">\n        components.directives.grade.grade-input.points\n      </span>\n      </a>\n    </div>\n  </div>\n\n  <a class="js-complete-pill-wrapper complete-pill-link" tabindex="-1" analytics-id="directives.grade-input.grade.display.item.link" href="javascript:void(0);">\n    <bb-complete-incomplete-grade-pill\n      class="js-complete-pill"\n      ng-if="gradeInput.isSchemaTypeComplete()"\n      ng-model="gradeInput.gradeDisplayItem.displayValue"\n      name="{{gradeInput.id}}"\n      aria-complete-incomplete-label="gradeInput.getAriaLabel()"\n      analytics-id="directives.grade-input.grade.display.item.input"\n      grade-value="gradeInput.gradeDisplayItem.parsedValue"\n      is-complete="gradeInput.isStatusComplete()"\n      on-blur="gradeInput.onCompleteIncompleteBlur"\n      total-points="gradeInput.getTruncatedPointsPossible()"\n      is-editable="gradeInput.shouldShowInput()"\n      is-rubric-enabled="gradeInput.isRubricEvalMode()"\n      can-open-rubric-eval="gradeInput.openRubricEvaluation"\n      >\n    </bb-complete-incomplete-grade-pill>\n  </a>\n  <div ng-if="gradeInput.shouldShowExempt()" class="grade-input-align left">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.exempt</span>\n  </div>\n\n  <div ng-if="gradeInput.shouldShowOverrideIndicator()" class="left">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.overrideIndicator</span>\n  </div>\n\n  <div ng-if="gradeInput.shouldShowPastDueZeroIndicator()"\n       ng-class="{\'grade-input-align left\': gradeInput.shouldShowPastDueZeroIndicator(), \'left\': !gradeInput.shouldShowPastDueZeroIndicator()}">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.pastDueZero</span>\n  </div>\n\n  <div ng-if="gradeInput.alertScreenReaderNewGrade"\n       bb-ax-alert\n       id="gradeInput.getAriaDescribeById()"\n       class="sr-only"\n       bb-translate translate-values="{grade: gradeInput.gradeDisplayItem.displayValue}">\n    components.directives.grade.grade-input.screenReaderEnteredGrade\n  </div>\n</div>\n'},730346:function(e){e.exports='<ul id="performanceCodes-{{gradeInput.id}}" class="f-dropdown performance-code-options bb-foundation-dropdown-close-esc-override" data-dropdown-content>\n  <li class="performance-option-header" bb-translate>components.directives.grade.grade-input.selectPerformanceCode</li>\n  <li ng-repeat="perfCode in gradeNotations()" bb-click-to-invoke-child="a.performance-code-option">\n    <a href="javascript:void(0);"\n       tabindex="0"\n       role="menuitem"\n       ng-click="gradeInput.clickGradeNotation(perfCode,$event)"\n       class="performance-code-option"\n       analytics-id="directives.gradeInput.selectPerformanceCode.item.link">\n      <span class="code" title="{{perfCode.code}}">{{perfCode.code}}</span>\n      <span class="description" title="{{perfCode.description}}">{{perfCode.description}}</span>\n    </a>\n  </li>\n  <li ng-if="gradeDetail.displayGrade.isOverride" class="undo-override" bb-click-to-invoke-child="button.js-undo-override">\n    <a href="javascript:void(0);"\n       tabindex="0"\n       role="menuitem"\n       class="js-undo-override performance-code-option"\n       ng-click="gradeInput.undoOverride()"\n       analytics-id="directives.grade-input.undoOverride.link">\n      <bb-svg-icon size="small" icon="undo"></bb-svg-icon>\n      <span bb-translate>components.directives.grade.grade-input.undoOverride</span>\n    </a>\n  </li>\n</ul>\n\n'},962445:function(e){e.exports='<bb-modal id="dialog-override-warning-modal" class="notification dialog-override-warning-modal"\n         modal-title-key="components.directives.grade.grade-input.overrideDialogWarning.title"\n         analytics-id-tag-prefix="components.directives.grade.grade-input.overrideDialogWarning"\n         >\n  <div name="modal-contents">\n    <p class="warning-message" bb-translate="components.directives.grade.grade-input.overrideDialogWarning.message" translate-values="{grade}">\n    </p>\n  </div>\n  <button name="modal-footer-button-secondary" class="button button--secondary js-secondary-button js-cancel" ng-click="closeModal(false)" analytics-id="components.directives.grade.grade-input.overrideDialogWarning.secondaryButtonText">\n      <bb-translate>components.directives.grade.grade-input.overrideDialogWarning.secondaryButtonText</bb-translate>\n  </button>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="closeModal(true)" analytics-id="components.directives.grade.grade-input.overrideDialogWarning.primaryButtonText">\n      <bb-translate>components.directives.grade.grade-input.overrideDialogWarning.primaryButtonText</bb-translate>\n  </button>\n</bb-modal>\n'},304163:function(e){e.exports='<bb-guidance-feature-announcement\n  component-key="\'gradebook.advancedFilters\'"\n  button-aria-label="$ctrl.buttonAriaLabel"\n  announcement-title="$ctrl.announcementTitle"\n  content="$ctrl.content"\n  done-button-text="$ctrl.doneButtonText"\n  link-href="$ctrl.linkHref"\n  link-text="$ctrl.linkText"\n  close-label="$ctrl.closeLabel"\n></bb-guidance-feature-announcement>\n'},67104:function(e){e.exports='<div ng-class="{\'is-restricted\': graderColumn.column.isHidden() && !graderColumn.column.externalGrade, \'grader-column\': true}">\n  <div class="row tabular-row js-row grader-column-item">\n    <div ng-class="{\'medium-5\': !graderColumn.isCourseView, \'medium-4\': graderColumn.isCourseView}" class="columns">\n      <div class="element-card">\n        <div bb-content-item-icon\n          show-alert-icon="graderColumn.showAlertIcon()"\n          content-column="graderColumn.column"\n          class="element-image"\n          ng-class="{\'submission-nav-link\': graderColumn.itemLinkIsClickable}"\n          ng-if="graderColumn.column"\n          ng-click="graderColumn.handleColumnClick(\'icon\')"\n          analytics-id="components.directives.grade.graderColumn.icon.link">\n        </div>\n        <div class="element-details">\n          <div ng-class="{\'gradebook-overall-grade-title\': graderColumn.column.externalGrade}">\n            <bb-svg-icon\n              id="{{graderColumn.column.id + \'grade-not-visible-icon\'}}"\n              size="small"\n              ng-if="graderColumn.column.externalGrade && !graderColumn.column.visible"\n              icon="invisible"\n              class="visibility-icon"\n              role="img"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.gradeNotVisible\'}"\n            ></bb-svg-icon>\n            <span class="name ellipse" ng-if="graderColumn.itemLinkIsClickable">\n              <a  class="submission-nav-link"\n                  ng-click="graderColumn.handleColumnClick(\'title\')"\n                  href="javascript:void(0);"\n                  bb-key-hide-ftue="grades.grader.base.column.clickItem"\n                  id="{{\'graderColumn_\' + graderColumn.course.courseId + \'_\' + graderColumn.index}}"\n                  analytics-id="components.directives.grade.graderColumn.name.link"\n                  aria-label="{{graderColumn.attendanceAriaLabel}}"\n                  ng-attr-aria-describedby="{{graderColumn.column.externalGrade && !graderColumn.column.visible ? graderColumn.column.id + \'grade-not-visible-icon\' : undefined}}">\n                  {{graderColumn.column.columnName}}\n              </a>\n            </span>\n          </div>\n          <span class="name ellipsis" ng-if="!graderColumn.itemLinkIsClickable">\n            <span id="{{ \'graderColumn_\' + graderColumn.course.courseId + \'_\' + graderColumn.index }}">{{graderColumn.column.columnName}}</span>\n          </span>\n          <div class="name-controls" ng-if="::!graderColumn.column.isOffline()">\n            <span ng-if="graderColumn.isFormative" bb-feature-toggle="feature.course.content.formative.assessments">\n              <span class="formative-label" bb-translate>components.directives.grade.grader-column.statuses.formative</span>\n              <span class="secondary-text" ng-if="graderColumn.column.summary.numEligibleToBeGraded > 0">|</span>\n            </span>\n            <span class="secondary-text" ng-if="::graderColumn.column.seemsAttemptBased()">\n              <span ng-if="graderColumn.column.dueDate && graderColumn.numMissingStudents">\n                <span class="items-missing" bb-translate translate-values="{missingCount: graderColumn.numMissingStudents}">components.directives.grade.grader-column.studentsMissing.plural</span>\n                <span ng-if="!graderColumn.column.isOffline()">|</span>\n              </span>\n              <span ng-if="graderColumn.column.summary.numStudentSubmissions && graderColumn.column.summary.numEligibleToBeGraded">\n                <bb-translate ng-if="graderColumn.column.isDiscussion()" class="submittedCount" translate-values="{participatedCount: graderColumn.column.summary.numStudentSubmissions(), totalCount: graderColumn.column.summary.numEligibleToBeGraded}">components.directives.grade.grader-column.studentsParticipated.plural</bb-translate>\n                <bb-translate ng-if="!graderColumn.column.isDiscussion()" class="submittedCount" translate-values="{submittedCount: graderColumn.column.summary.numStudentSubmissions(), totalCount: graderColumn.column.summary.numEligibleToBeGraded}">components.directives.grade.grader-column.studentsSubmitted.plural</bb-translate>\n              </span>\n            </span>\n            <span class="secondary-text" ng-if="::graderColumn.column.isAttendance() && graderColumn.column.summary.averageGradeForStudents">\n                <span bb-translate translate-values="{percentage: graderColumn.column.summary.averageGradeForStudents}">components.directives.grade.grader-column.attendance.average</span>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ng-if="graderColumn.isCourseView" class="date columns medium-2 large-2 hide-for-small-only">\n      <bb-datetime ng-if="!graderColumn.column.isAttendance()" format="Short" value="graderColumn.column.dueDate">\n      </bb-datetime>\n      <span ng-if="graderColumn.column.isAttendance()" bb-translate>components.directives.grade.grader-column.attendance.ongoing</span>\n    </div>\n\n    <div ng-class="{\'grade-status-container columns medium-7\': !graderColumn.isCourseView, \'columns medium-5 course-only-grade-status-container\': graderColumn.isCourseView}">\n      <div class="grade-progress" ng-class="{\'columns medium-7 course-only-grade-status\': graderColumn.isCourseView}" ng-if="!graderColumn.column.isAttendance()">\n        <div ng-switch="graderColumn.column.isCollectExternalSubmissions()">\n          <!-- External submission statuses are calculated differently from others since the instructor is initiating the attempt\n          when they go to grade the user. Therefore, we want to include people who have no submission as ready to be graded //-->\n          <div ng-switch-when="true">\n            <a ng-switch="graderColumn.column.summary.getStatus().toString()"\n                ng-class="{\'submission-nav-link\': graderColumn.itemLinkIsClickable}"\n                ng-click="graderColumn.handleColumnClick(\'status\')"\n                href="javascript:void(0);"\n                analytics-id="components.directives.grade.graderColumn.status.link"\n                tabindex="{{ graderColumn.itemLinkIsClickable ? 0 : -1 }}"\n                aria-labelledby="{{ graderColumn.itemLinkIsClickable ? \'grading-status-id\' + \'_\' + graderColumn.index + \' \' + \'graderColumn_\' + graderColumn.course.courseId + \'_\' + graderColumn.index : undefined}}">\n              <div class="grade-count" ng-switch-when="NEEDS_GRADING">\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </div>\n              <span ng-switch-when="NEEDS_POSTING">\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0">\n                  components.directives.grade.grader-column.statuses.allGraded\n                </span>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0"\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <span ng-switch-when="ALL_GRADED">\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0" bb-translate>\n                  components.directives.grade.grader-column.statuses.allGraded\n                </span>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0" bb-translate\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <div class="grade-progress-complete" ng-switch-when="ALL_POSTED">\n                <bb-svg-icon class="grade-progress-icon" size="small" icon="complete" status="success"></bb-svg-icon>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.allPosted</span>\n              </div>\n              <span ng-switch-when="NOTHING_TO_GRADE">\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0" bb-translate>\n                  components.directives.grade.grader-column.statuses.nothingToGrade\n                </span>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0" bb-translate\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <div class="grade-progress-restricted" ng-switch-when="RESTRICTED">\n                <bb-button-complex-tooltip></bb-button-complex-tooltip>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n              </div>\n            </a>\n          </div>\n          <div ng-switch-default>\n            <a ng-switch="graderColumn.column.summary.getStatus().toString()"\n                ng-if="::!graderColumn.column.isCalculated()"\n                ng-class="{\'submission-nav-link\': graderColumn.itemLinkIsClickable}"\n                ng-click="graderColumn.handleColumnClick(\'status\')"\n                href="javascript:void(0);"\n                analytics-id="components.directives.grade.graderColumn.status.link"\n                tabindex="{{ graderColumn.itemLinkIsClickable ? 0 : -1 }}"\n                aria-labelledby="{{ graderColumn.itemLinkIsClickable ? \'grading-status-id\' + \'_\' + graderColumn.index + \' \' +  \'graderColumn_\' + graderColumn.course.courseId + \'_\' + graderColumn.index : undefined}}">\n              <div class="grade-count js-grade-progress-needs-grading" ng-switch-when="NEEDS_GRADING">\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="::graderColumn.column.isOffline()"\n                      bb-translate translate-values="{count: graderColumn.column.summary.numStudentsNeedsGrading}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="::!graderColumn.column.isOffline()"\n                      bb-translate translate-values="{count: graderColumn.getNumberOfSubmissionsNeedsGrading()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </div>\n              <span ng-switch-when="NEEDS_POSTING" id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.allGraded</span>\n              <span class="js-grade-progress-all-graded" ng-switch-when="ALL_GRADED" id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.allGraded</span>\n              <div class="grade-progress-complete" ng-switch-when="ALL_POSTED">\n                <bb-svg-icon class="grade-progress-icon" size="small" icon="complete" status="success"></bb-svg-icon>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.allPosted</span>\n              </div>\n              <span class="js-grade-progress-nothing-to-show" ng-switch-when="NOTHING_TO_GRADE" id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.nothingToGrade</span>\n              <div class="grade-progress-restricted" ng-switch-when="RESTRICTED">\n                <bb-button-complex-tooltip></bb-button-complex-tooltip>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n              </div>\n            </a>\n            <div ng-if="::graderColumn.column.isCalculated()"><!-- Needed for spacing --></div>\n          </div>\n        </div>\n      </div>\n      <div class="grade-progress" ng-class="{\'columns medium-7 course-only-grade-status\': graderColumn.isCourseView}" ng-if="graderColumn.column.isAttendance()">\n        <a ng-class="{\'submission-nav-link\': graderColumn.itemLinkIsClickable}"\n          ng-click="graderColumn.handleColumnClick(\'status\')"\n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.graderColumn.status.link"\n          tabindex="{{ graderColumn.itemLinkIsClickable ? 0 : -1 }}"\n          aria-labelledby="{{ graderColumn.itemLinkIsClickable ? \'grading-status-id\' + \'_\' + graderColumn.index + \' \' + \'graderColumn_\' + graderColumn.course.courseId + \'_\' + graderColumn.index : undefined}}"\n          id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}"\n          bb-translate>\n            components.directives.grade.grader-column.attendance.markAttendance\n        </a>\n      </div>\n      <div class="grade-status" ng-class="{\'columns medium-5 course-only-grade-status\': graderColumn.isCourseView}">\n        <div ng-if="::!graderColumn.column.isCalculated()">\n          <div ng-if="!graderColumn.course.isComplete() && graderColumn.column.summary.hasGradesToPost() && graderColumn.canPostGrades" class="post">\n            <button class="button button--secondary send-grade" bb-confirmation-needed="{{graderColumn.grade.getPostAllGradeConfirmationNeededStringsKey(graderColumn.column)}}"\n                    modal-aria-type="alertdialog" show-type="always" ng-click="graderColumn.postGrades()"\n                    bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.postGrades\'}"\n                    translate-attrs-values="{courseName: graderColumn.course.name, columnName: graderColumn.column.columnName}"\n                    bb-translate="{{graderColumn.isCourseView ? \'components.directives.grade.grader-column.actions.postGradesWithLocalizedCount\' : \'components.directives.grade.grader-column.actions.basePostGradesWithLocalizedCount\'}}"\n                    translate-values="{count : graderColumn.column.summary.totalNumberOfGradesToPost()}"\n                    analytics-id="{{graderColumn.isCourseView ? \'components.directives.grade.grader-column.actions.postGradesWithLocalizedCount\' : \'components.directives.grade.grader-column.actions.basePostGradesWithLocalizedCount\'}}" >\n            </button>\n          </div>\n        </div>\n        <div ng-if="::graderColumn.column.isCalculated()"><!-- Needed for spacing --></div>\n      </div>\n    </div>\n    <div ng-if="(graderColumn.showOverflowMenu || graderColumn.showDragControls) && !graderColumn.isRestrictedGroupContent"\n        class="columns medium-1 large-1 last-row-item item-controls dots" bb-foundation-defer>\n\n      <!-- disable if its a group and has user is not entitled -->\n      <button bb-drag-handle ng-if="graderColumn.showDragControls"\n              drag-item-id="{{::graderColumn.column.id}}"\n              drag-item-name="{{graderColumn.column.columnName}}"\n              class="super-clear small button icon js-drag-handle drag-drop-button"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.reorder-grader-item\', \'title\': \'components.directives.grade.grader-column.aria-label.move-tip\'}"\n              translate-attrs-values="{columnName: graderColumn.column.columnName}"\n              analytics-id="components.directives.grade.graderColumn.reorderItem.button" >\n        <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n      </button>\n\n      <!-- disable if its a group and has user is not entitled -->\n      <div ng-if="graderColumn.showOverflowMenu" class="overflow-menu-container right">\n        <bb-overflow-menu element-id="{{graderColumn.overflowMenuId}}"\n                          element-name="{{graderColumn.column.columnName}}"\n                          menu-items="graderColumn.getOverflowMenuItems()"\n                          analytics-id-tag-prefix="components.directives.grade.grader-column.overflowMenu">\n        </bb-overflow-menu>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="graderColumn.showConversionMessage">\n    <bb-course-access-alert course="course"\n                            alert-type="graderColumn.getAlertType()"\n                            confirm-callback="graderColumn.closeConversionTooltip()"\n                            timeout-callback="graderColumn.closeConversionTooltip()">\n    </bb-course-access-alert>\n  </div>\n</div>\n<bb-add-content-button\n                      position-after="graderColumn.column.id" item-name="graderColumn.column.columnName"\n                      context-area="graderColumn.contextArea"\n                      ng-if="graderColumn.isCourseView && !graderColumn.course.isComplete() && graderColumn.canModify"\n                      show-add-attendance="attendanceIsAvailable() && !attendanceColumnExists()">\n</bb-add-content-button>\n'},455029:function(e){e.exports="<div\n  ng-class=\"{'validation-error' : showError()}\"\n  ng-transclude>\n</div>\n"},931017:function(e){e.exports='<bb-modal class="notification automatic-zero-setting-confirmation"\n          modal-translate-options="modalTranslateOptions"\n          modal-aria-type="alertdialog"\n          analytics-id-tag-prefix="components.directives.pastDueZeroSettings">\n  <div name="modal-contents">\n    <!-- Instructions -->\n    <p bb-translate>{{ modalTranslateOptions.instructions.key }}</p>\n    <!-- Past due zero: Unassign zero -->\n    <div ng-if="!pastDueZero.isPastZeroAssigned">\n      <fieldset ng-if="modalTranslateOptions.choices && modalTranslateOptions.choices.length > 0"\n                class="fieldset-options">\n        <legend class="sr-only" bb-translate="{{ modalTranslateOptions.title.key }}"></legend>\n        <div class="option-item" ng-repeat="option in modalTranslateOptions.choices">\n          <input type="radio" \n                 name="{{ ::option.name }}" \n                 id="{{ ::option.id }}"\n                 ng-model="modalTranslateOptions.choiceModal"\n                 ng-value="option.value"\n                 analytics-id="components.directives.grade.pastDueZero.option.input.radio">\n          <label for="{{ ::option.id }}" bb-translate>{{ ::option.localizedKey }}</label>\n          <p ng-if="!!option.descriptionKey"\n             class="past-due-unassign-description"\n             bb-translate>\n            {{ ::option.descriptionKey }}\n          </p>\n        </div>\n      </fieldset>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" \n          type="button" \n          class="button confirm-ok js-primary-button" \n          ng-click="okAction()" \n          analytics-id="{{modalTranslateOptions.confirm.key}}"\n          bb-translate>\n    {{modalTranslateOptions.confirm.key}}\n  </button>\n  <button name="modal-footer-button-secondary" \n          type="button" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="cancelAction()" \n          analytics-id="{{modalTranslateOptions.cancel.key}}"\n          bb-translate>\n    {{modalTranslateOptions.cancel.key}}\n  </button>\n</bb-modal>'},25281:function(e){e.exports='<bb-modal class="notification automatic-zero-confirmation" \n          modal-translate-options="modalTranslateOptions"\n          modal-aria-type="alertdialog"\n          analytics-id-tag-prefix="components.directives.pastDueZero">\n  <div name="modal-contents">\n    <!-- Instructions -->\n    <p bb-translate>{{ modalTranslateOptions.instructions.key }}</p>\n  </div>\n  <button name="modal-footer-button-primary" \n          type="button" \n          class="button confirm-ok js-primary-button" \n          ng-click="okAction()" \n          analytics-id="course.grades.pastDue.confirmationNeeded.confirm"\n          bb-translate>\n          course.grades.pastDue.confirmationNeeded.confirm\n  </button>\n  <button name="modal-footer-button-secondary" \n          type="button" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="cancelAction()" \n          analytics-id="course.grades.pastDue.confirmationNeeded.cancel"\n          bb-translate>\n          course.grades.pastDue.confirmationNeeded.cancel\n  </button>\n</bb-modal>'},925904:function(e){e.exports='<div class="rb-grid-container" ng-style="container.getContainerStyle()" role="grid">\n  <div class="rb-ax-focus-placeholder sr-only" tabindex="-1"></div>\n  <div class="rb-grid-header-wrapper">\n    <div class="rb-grid-header">\n      <div class="rb-grid-canvas" ng-style="container.getHeaderCanvasStyle()" role="rowgroup">\n        <div class="rb-row rb-header-row" ng-class="::container && {\'rb-row-border\': container.headerBorder} || undefined" role="row">\n          <div rb-grid-cell="col.headerTemplate"\n               class="rb-cell rb-header-cell"\n               ng-class="[\'rb-col-\' + col.id, \'rb-column-position-\' + col.id, {\'rb-cell-border\': col.border}]"\n               role="columnheader"\n               ng-repeat="col in container.renderedColumns track by $index"\n               ng-click="container.callbacks.header($event)"\n               analytics-id="components.directives.gridContainer.header.{{::col.id}}.button">\n            <div class="rb-add-column-placeholder" ng-if="::container.canAddColumn()" ng-mouseenter="container.columnAdder.enter($event, col)"></div>\n          </div>\n          <div class="rb-add-column-placeholder first" ng-if="::container.canAddColumn()" ng-mouseenter="container.columnAdder.enter($event)"></div>\n        </div>\n      </div>\n    </div>\n    <div ng-if="container.hasVScrollbar" class="rb-grid-scrollbar-placeholder-y"></div>\n  </div>\n  <div class="rb-grid-body" ng-style="container.getBodyStyle()">\n    <div class="rb-grid-canvas" ng-style="container.getBodyCanvasStyle()" role="rowgroup">\n      <div class="rb-row rb-cell-row" ng-repeat="row in container.renderedRows track by $index" role="row"\n          ng-class="[\'rb-row-position-\' + row.id, container && {\'rb-row-border\': container.rowBorder} || undefined]">\n        <div rb-grid-cell="col.cellTemplate"\n             class="rb-cell"\n             ng-class="[\'rb-col-\' + col.id, \'rb-row-\' + row.id, \'rb-column-position-\' + col.id, {\'rb-cell-border\': col.border}]"\n             role="gridcell"\n             ng-repeat="col in container.renderedColumns track by $index"\n             ng-click="container.callbacks.cell($event)"\n             analytics-id="components.directives.gridContainer.callback"\n        ></div>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!container.hasHScrollbar" class="rb-grid-scrollbar-placeholder-x"></div>\n  <div class="rb-add-column" ng-if="::container && container.canAddColumn()">\n    <div class="column-header-button-wrapper" ng-mouseleave="container.columnAdder.leave()">\n      <a class="small button clear icon button-add-content hide"\n         href="javascript:void(0);"\n         ng-click="container.columnAdder.onClick($event)"\n         role="button"\n         aria-haspopup="true"\n         analytics-id="components.directives.grade.grid.addBtuAriaLabel.link">\n        <span class="sr-only" bb-translate>components.directives.grade.grid.addBtuAriaLabel</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},715673:function(e){e.exports='<div class="rb-grid">\n  <style scoped id="rb-grid"></style>\n  <style scoped id="rb-grid-rows-initial-position"></style>\n\n  <div ng-if="grid.containers.left" rb-grid-container="left" id="rb-grid-container-left"></div>\n\n  <div rb-grid-container="center"></div>\n\n  <div ng-if="grid.containers.right" rb-grid-container="right"></div>\n\n  <div ng-transclude></div>\n\n</div>\n'},601404:function(e){e.exports='<span class="group-count-directive" bb-load-bundle="components/directives/group/group-count">\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="!$ctrl.isSelfEnrollment()">components.directives.group-count.groups.plural</bb-translate>\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="$ctrl.isSelfEnrollment()">components.directives.group-count.groups.selfEnroll.plural</bb-translate>\n</span>\n'},577162:function(e){e.exports='<div class="group-student-self-enroll-directive" bb-load-bundle="components/directives/group/group-student-enrollment">\n  <div ng-if="$ctrl.content.assignedGroups.length > 0">\n    <span ng-if="!$ctrl.isOpenEnrollment()" class="ellipse title">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </span>\n    <a ng-if="$ctrl.isSelfEnrollment && $ctrl.isOpenEnrollment()" class="self-enroll-link js-self-enroll-link"\n       href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()"\n       analytics-id="components.directives.group-student-enrollment.groupTitle.link">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </a>\n  </div>\n  <span ng-if="!($ctrl.content.assignedGroups.length > 0) && !$ctrl.isSelfEnrollment" class="ellipse title" bb-translate\n        translate-values="{title: components.directives.group-student-enrollment.unknown}">\n    components.directives.group-student-enrollment.unknown\n  </span>\n  <div ng-if="!($ctrl.content.assignedGroups.length > 0) && $ctrl.isSelfEnrollment">\n    <div ng-if="$ctrl.isOpenEnrollment()">\n      <a href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()" class="self-enroll-link js-self-enroll-link"\n         bb-translate analytics-id="components.directives.group-student-enrollment.self-enroll-to-participate">components.directives.group-student-enrollment.self-enroll-to-participate</a>\n    </div>\n    <div ng-if="$ctrl.isBeforeEnrollment()" class="self-enroll-date" translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-starts</div>\n    <div ng-if="$ctrl.isOpenEnrollmentWithEnding()" class="self-enroll-date"\n         ng-class="{\'is-important\': $ctrl.selfEnrollGroupInfo.isEnrollmentDateImportant}"\n         translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closes</div>\n    <div ng-if="$ctrl.isAfterEnrollment()" class="self-enroll-date"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closed</div>\n  </div>\n</div>\n'},268163:function(e){e.exports='<!-- this button is for screenreader users only and should be placed at the end of an infinite scroll list in the DOM so that they know that more items can be loaded -->\n<button class="sr-only load-more-items"\n        ng-click="infiniteScroll.loadMoreItems()"\n        tabindex="-1"\n        ng-disabled="infiniteScroll.disabled || infiniteScroll.remainingCount <= 0"\n        bb-load-bundle="components/directives/infinite-scroll"\n        bb-translate translate-values="infiniteScroll.loadMoreLocalizationValues"\n        analytics-id="{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}">{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}</button>\n'},520383:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="course.placements.inlineGradableModalTitle"\n          analytics-id-tag-prefix="course.placements.basePlacement">\n  <div name="modal-contents">\n    <p bb-translate>course.placements.inlineGradableSupport</p>\n  </div>\n  <!-- htmlhint:analytics-id:disable -->\n  <button name="modal-footer-button-primary"\n          ng-click="dismissCallback()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="course.placements.basePlacement.ok.button">\n    global.ok\n  </button>\n  <!-- htmlhint:analytics-id:enable -->\n</bb-modal>'},489908:function(e){e.exports='<div class="reveal-modal fade open" ng-class="{ in: $parent.animate }" role="{{::modal.ariaType}}" tabindex="-1" data-reveal\n     ng-multi-transclude-controller ng-attr-aria-label="{{::modal.titleString}}" ng-keydown="modal.handleKeyDown($event)">\n  <div class="reveal-modal__header">\n    <h1 class="reveal-modal__title" aria-describedby="modal-contents" bb-focus>\n      {{::modal.titleString}}\n    </h1>\n    <button class="close-reveal-modal standard-button light-background" \n            ng-click="modal.dismiss()" \n            bb-translate-attrs="{ \'aria-label\': \'global.close\' }"\n            analytics-id="{{modal.analyticsIdTagPrefix}}.modal.close.button">\n      <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n    </button>\n  </div>\n  <div id="modal-contents" class="reveal-modal__contents" ng-multi-transclude="modal-contents"></div>\n  <footer ng-multi-transclude="modal-footer" class="reveal-modal__footer">\n    <div class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n      <div ng-multi-transclude="modal-footer-help-link" class="reveal-modal__footer-help-link-container"></div>\n      <div class="reveal-modal__footer-buttons">\n        <span ng-multi-transclude="modal-footer-button-secondary" class="reveal-modal__footer-button-container"></span>\n        <span ng-multi-transclude="modal-footer-button-primary" class="reveal-modal__footer-button-container"></span>\n      </div>\n    </div>\n  </footer>\n  <div class="reveal-modal__dismiss" ng-class="{ \'hide\' : !modal.dismissString }">\n    <span class="reveal-modal__divider"></span>\n    <button class="button button--text dismiss-message expand" ng-click="modal.dismiss()" analytics-id="{{modal.analyticsIdTagPrefix}}..modal.dismiss.button">\n      <span>{{::modal.dismissString}}</span>\n    </button>\n  </div>\n</div>\n'},423652:function(e){e.exports='<span ng-switch on="$ctrl.iconName" class="overflow-menu-icon">\n  <bb-ui-icon-small-course-complete ng-switch-when="course-complete"></bb-ui-icon-small-course-complete>\n  <bb-ui-icon-small-notes ng-switch-when="notes"></bb-ui-icon-small-notes>\n  <bb-ui-icon-small-safe-assign ng-switch-when="safe-assign"></bb-ui-icon-small-safe-assign>\n  <bb-ui-icon-small-numbered-list ng-switch-when="numbered-list"></bb-ui-icon-small-numbered-list>\n  <bb-ui-icon-small-exempt ng-switch-when="exempt"></bb-ui-icon-small-exempt>\n  <bb-svg-icon ng-switch-default size="small" icon="{{::$ctrl.iconName}}" status="{{::$ctrl.status}}"></bb-svg-icon>\n</span>\n'},370341:function(e){e.exports='<button ng-if="!overflowMenu.isSingleMode() && overflowMenu.menuItems.length > 0"\n        ng-show="overflowMenu.show()"\n        ng-disabled="isDisabled()"\n        class="overflow-menu-button"\n        data-dropdown="{{elementId}}-menu-icon-dropdown"\n        data-options="{{::overflowMenu.menuDirection}}"\n        aria-haspopup="true"\n        title="{{overflowMenu.getButtonAriaLabel()}}"\n        ng-click="overflowMenu.showMenu=true"\n        aria-label="{{overflowMenu.getButtonAriaLabel()}}"\n        analytics-id="{{analyticsIdTagPrefix}}.showMenu.button">\n  <bb-svg-icon size="small" icon="menu"></bb-svg-icon>\n</button>\n\n<!--Single mode toggle button-->\n<button ng-if="overflowMenu.isSingleMode() && overflowMenu.menuItems.length > 0"\n        ng-show="overflowMenu.singleMenuItem.show()"\n        ng-click="overflowMenu.showMenu=true; overflowMenu.singleMenuItem.onClick()"\n        ng-disabled="isDisabled()"\n        class="overflow-menu-button"\n        bb-click-focus="{{overflowMenu.singleMenuItem.hasConfirmation() ? \'\' : overflowMenu.singleMenuItem.bbClickFocus}}"\n        data-dropdown="{{elementId}}-menu-icon-dropdown"\n        data-options="{{::overflowMenu.menuDirection}}"\n        aria-haspopup="true"\n        title="{{overflowMenu.singleMenuItem.ariaLabel()}}"\n        aria-label="{{overflowMenu.singleMenuItem.ariaLabel()}}"\n        analytics-id="{{analyticsIdTagPrefix}}.showSingleMenu.button">\n  <bb-svg-icon size="small" icon="{{overflowMenu.singleMenuItem.icon}}" status="{{overflowMenu.singleMenuItem.status}}"></bb-svg-icon>\n</button>\n\n<!--Menu -->\n<div id="{{::elementId}}-menu-icon-dropdown" ng-if="overflowMenu.showMenu" ng-show="overflowMenu.show()" class="f-dropdown f-dropdown-overflow-menu"\n     data-dropdown-content aria-autoclose="false">\n  <!--Menu item list-->\n  <ul ng-show="!overflowMenu.isSingleMode()"\n      class="js-menu-item-list"\n      ng-class="{\'with-option-text\': overflowMenu.hasOptionText(), \'ignore-accordion\': overflowMenu.ignoreAccordion()}"\n      role="menu">\n    <li ng-repeat="menuItem in overflowMenu.menuItems | filter:overflowMenu.visibleMenuItemsFilter track by menuItem.id"\n      bb-click-to-invoke-child="a.js-menu-item-link"\n      custom-attributes="{{ ::menuItem.addAdditionalAttributes() }}"\n      id="{{ ::menuItem.id + \'_li\' }}"\n      role="menuitem">\n      <a href="javascript:void(0);"\n         ng-if="!menuItem.disable()"\n         class="js-menu-item-link"\n         id="{{::menuItem.id}}"\n         ng-click="menuItem.onClick()"\n         bb-click-focus="{{menuItem.hasConfirmation() ? \'\' : menuItem.bbClickFocus}}"\n         aria-label="{{menuItem.ariaLabel()}}"\n         ng-keydown="overflowMenu.onOptionKeydown($event)"\n         analytics-id="{{::overflowMenu.buildAnalyticsId(menuItem)}}">\n        <!-- Icon -->\n        <bb-overflow-menu-icon icon-name="{{menuItem.icon}}" status="{{menuItem.status}}"></bb-overflow-menu-icon>\n        <!-- Label -->\n        <span bb-translate>{{::menuItem.labelKey}}</span>\n        <p ng-if="::menuItem.textKey" class="option-text" bb-translate>{{::menuItem.textKey}}</p>\n      </a>\n      <a href="javascript:void(0);"\n         ng-if="menuItem.disable()"\n         class="js-menu-item-link disable"\n         ng-click="menuItem.onClick()"\n         aria-disabled="true"\n         bb-tooltip\n         enhanced-tooltip="true"\n         tooltip-position="bottom"\n         title="{{menuItem.disableInfo}}"\n         analytics-id="{{analyticsIdTagPrefix}}.{{::menuItem.labelKey}}.disabled.link">\n        <!-- Icon -->\n        <bb-overflow-menu-icon icon-name="{{menuItem.icon}}" status="{{menuItem.status}}"></bb-overflow-menu-icon>\n        <!-- Label -->\n        <span bb-translate>{{::menuItem.labelKey}}</span>\n        <p ng-if="::menuItem.textKey" class="option-text" bb-translate>{{::menuItem.textKey}}</p>\n        <span class="sr-only">{{menuItem.disableInfo}}</span>\n      </a>\n    </li>\n  </ul>\n\n  <!-- Confirmation - shows when the corresponding button is pressed from the menu -->\n  <div role="alertdialog"\n       aria-label="{{overflowMenu.getTextByKey(menuItem.options.confirmationOptions.titleKey)}}"\n       ng-repeat="menuItem in overflowMenu.confirmationNeededMenuItems"\n       ng-show="menuItem.show()" id="{{::menuItem.confirmationId}}"\n       class="menu-icon-confirmation"\n       ng-class="{\'menu-icon-confirmation-single-mode\': overflowMenu.isSingleMode()}">\n    <h1 aria-describedby="{{::(\'overflow-confirmation-instructions\' + menuItem.confirmationId)}}"\n        bb-focus="menuItem.isConfirmationMenuVisible()"\n        ng-blur="menuItem.blur()"\n        keep-trigger-focus="true">{{overflowMenu.getTextByKey(menuItem.options.confirmationOptions.titleKey)}}</h1>\n    <p id="{{\'overflow-confirmation-instructions\' + menuItem.confirmationId}}">{{overflowMenu.getTextByKey(menuItem.options.confirmationOptions.instructionsKey)}}</p>\n    <div class="choice" ng-show="menuItem.hasChoices()" ng-repeat="choice in menuItem.options.confirmationOptions.choices">\n      <input id="{{choice.key + elementId}}"\n             ng-disabled="choice.isDisable"\n             ng-model="choice.value"\n             type="checkbox"\n             ng-keydown="overflowMenu.onOptionKeydown($event)"\n             analytics-id="{{analyticsIdTagPrefix}}.isDisabled.input.checkbox"/>\n      <label for="{{choice.key + elementId}}" bb-translate="{{choice.localizedKey}}"></label>\n    </div>\n    <hr>\n    <div class="menu-icon-confirmation-footer">\n      <button class="button button--secondary"\n              ng-click="menuItem.onCancel()"\n              analytics-id="{{analyticsIdTagPrefix}}.cancel.button">\n        <span bb-translate>global.cancel</span>\n      </button>\n      <button class="button js-delete-confirm"\n              ng-click="menuItem.onConfirm($event)"\n              bb-click-focus="{{::menuItem.bbClickFocus}}"\n              analytics-id="{{analyticsIdTagPrefix}}.confirm.button">\n        <span bb-translate>{{::menuItem.options.comfirmLabelKey || menuItem.labelKey}}</span>\n      </button>\n    </div>\n  </div>\n</div>\n'},376874:function(e){e.exports='<div bb-load-bundle="components/directives/save-tray">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.loadingMoreItems</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsLoaded</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsFailedToLoad</span>\n  </div>\n</div>\n'},757267:function(e){e.exports='<div bb-load-bundle="components/directives/save-tray" role="status">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.saving</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.success</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.error</span>\n  </div>\n</div>\n'},549777:function(e){e.exports='<div>\n  <div class="notification-container {{::toastStatus()}}">\n    <div class="close-notification">&times;</div>\n    <div class="progress-indicator icon">\n      <i class="{{::toastIcon()}}"></i>\n    </div>\n    <span class="progress-status {{::toastClass()}}">\n    </span>\n  </div>\n</div>\n'},571346:function(e){e.exports='<div class="square-toggle">\n  <input class="toggle-input input-one"\n         ng-checked="property === oneViewValue"\n         aria-checked="{{property === oneViewValue}}"\n         id="square-toggle-option-one-{{ ::squareToggle.oneControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.radioGroupName }}"\n         type="radio"\n         value="{{ ::oneViewValue }}"\n         aria-controls="{{ ::oneAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::oneTooltipTemplate }}"\n         tooltip-scope="oneTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option1.input.radio">\n  <label class="toggle-label input label-one js-label-{{oneIconClass}}"\n         for="square-toggle-option-one-{{ ::squareToggle.oneControlId }}">\n    <bb-svg-icon size="custom" icon="{{oneIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::oneAriaLabel }}</span>\n  </label>\n  <input class="toggle-input input-two"\n         ng-checked="property === twoViewValue"\n         aria-checked="{{property === twoViewValue}}"\n         id="square-toggle-option-two-{{ ::squareToggle.twoControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.radioGroupName }}"\n         type="radio"\n         value="{{ ::twoViewValue }}"\n         aria-controls="{{ ::twoAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::twoTooltipTemplate }}"\n         tooltip-scope="twoTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option2.input.radio">\n  <label class="toggle-label input label-two js-label-{{twoIconClass}}"\n         for="square-toggle-option-two-{{ ::squareToggle.twoControlId }}">\n    <bb-svg-icon size="custom" icon="{{twoIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::twoAriaLabel }}</span>\n  </label>\n  <a href="javascript:void(0);" class="button" role="presentation" tabindex="-1"\n     analytics-id="{{analyticsIdTagPrefix}}.presentation.link"></a>\n</div>\n'},513910:function(e){e.exports='<div class="complex-statistic-contents"></div>'},324612:function(e){e.exports='<div class="simple-statistic-contents" ng-class="::item().cssClass">\n  <div bb-tooltip enhanced-tooltip="true" data-tooltip-on-overflow-only="true" title="{{ ::item().data }}">\n    <div class="stat-data"\n         ng-attr-aria-label="{{ item().aria ? item().aria : undefined }}"\n         data-ng-bind-html="::item().trusted"\n         data-ellipsis></div>\n  </div>\n  <div ng-if="::item().subtext" class="stat-sub-text" bb-translate>{{ ::item().subtext }}</div>\n  <div ng-if="::!item().subtext && item().reserveSubtextSpace" class="stat-sub-text" aria-hidden="true">&nbsp;</div>\n</div>'},43485:function(e){e.exports='<div class="bb-statistics">\n  <ul class="statistics-list total-items-{{::statistics.total}} small-per-row-{{::statistics.smallPerRow}} large-per-row-{{::statistics.largePerRow}}">\n    <li ng-repeat="item in statistics.config">\n      <div class="statistics-item-container" ng-class="{\'no-default-padding\': item.noDefaultPadding, \'full-height\': !item.complexScope}">\n        <div class="stat-title" ng-attr-title="{{ item.hover ? item.hover : undefined }}" bb-translate>{{::item.title}}</div>\n        <div ng-if="::!item.complexScope" bb-simple-statistic item="::item"></div>\n        <div ng-if="::item.complexScope" bb-complex-statistic item="::item"></div>\n      </div>\n    </li>\n  </ul>\n</div>'},719164:function(e){e.exports='<div class="submission-card" ng-class="{\'is-late\': isLate, \'inline\': inline}" bb-load-bundle="components/directives/submission-card">\n  <div class="panel" ng-class="{\'clickable-panel\': clickable}">\n    <bb-ui-icon-large-assignments class="submission-card__icon" ng-if="!inline" color="{{::submissionCard.showLateIcon ? \'error\' : \'inherit\'}}"></bb-ui-icon-large-assignments>\n    <div class="info" ng-class="{\'completed\': submissionCard.attempt.isCompleted(), \'rubric-icon-spacing\': submissionCard.shouldExpandForRubricIcon()}">\n      <span class="name ellipsis" bb-translate ng-if="!inline">{{title}}</span>\n      <span class="detail">\n        <span class="test-status ellipsis" ng-show="!!status">\n          <span class="inline-status" ng-if="inline && !hasAttempt && showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.late\n          </span>\n          <span class="inline-status" ng-if="inline && !hasAttempt && !showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.new\n          </span>\n          <span ng-if="inline && !hasAttempt"> - </span>\n          <span bb-translate class="status">{{status}}</span>\n          <ng-switch on="submissionCard.attempt.status" ng-if="submissionCard.attempt">\n            <bb-datetime class="date" format="Short" ng-switch-when="COMPLETED" value="::submissionCard.attempt.attemptLastGradedDate"></bb-datetime>\n            <bb-datetime class="date" format="Short" ng-switch-default value="::submissionCard.attempt.attemptDate"></bb-datetime>\n          </ng-switch>\n          <bb-datetime class="date" format="Short" ng-if="!submissionCard.attempt && gradingColumn.dueDate" value="::gradingColumn.dueDate"></bb-datetime>\n        </span>\n      </span>\n    </div>\n    <div class="grade-container">\n      <ng-switch on="gradeDetail.isPosted()">\n        <bb-display-grade ng-switch-when="true"\n                          grade-detail="gradeDetail"\n                          column="gradingColumn"\n                          display-type="GradeColor"\n                          show-rubric-button="showRubricButton()"\n                          show-rubric-div="showRubricDiv()"></bb-display-grade>\n        <bb-display-grade ng-switch-default\n                          attempt="submissionCard.attempt"\n                          display-type="AttemptStatus"></bb-display-grade>\n      </ng-switch>\n    </div>\n  </div>\n</div>\n'},860858:function(e){e.exports='<td class="table-cell"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</td>\n'},776101:function(e){e.exports='<th class="table-cell"\n    scope="row"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</th>'},764253:function(e){e.exports='<table class="fs-table bb-table">\n  <caption role="alert" class="sr-only">{{ ::config().title }}</caption>\n  <thead>\n    <tr class="table-headings">\n      <th class="table-heading"\n          scope="col"\n          ng-style="{ \'width\': column.widthPercentage, \'min-width\': column.widthPercentage }"\n          ng-repeat="column in config().columns"\n          ng-if="column.visible"\n          data-heading-index="{{ ::$index }}"\n          ng-class="{\n            \'sortable-header\': column.sort,\n            \'ascending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\',\n            \'descending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\'}"\n          ng-attr-aria-sort="{{ $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\' ? \'ascending\' :\n          $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\' ? \'descending\' : undefined }}">\n        <button class="button-anchor" ng-if="column.sort" analytics-id="components.directives.table.sort.button">\n          <span class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n          <i class="sort-control">\n            <i class="arrow up" ></i>\n            <i class="arrow down"></i>\n          </i>\n        </button>\n        <span ng-if="!column.sort" class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody ng-if="table.initialDataLoaded || config().showRowsDuringRefresh">\n    <tr ng-repeat="item in tableData()"\n        class="table-row"\n        ng-class="{\'clickable\': config().rowClickFn }"\n        ng-click="config().rowClickFn ? config().rowClickFn(item): null"\n        ng-transclude\n        analytics-id="components.directives.table.rowClick"></tr>\n  </tbody>\n</table>\n<div ng-if="config().pageSize && table.initialDataLoaded">\n  <div bb-infinite-scroll="table.showMore()"\n       infinite-scroll-immediate-check="false"\n       infinite-scroll-total-count="config().totalCount"\n       infinite-scroll-current-count="tableData().length"\n       infinite-scroll-load-limit="config().pageSize"\n       infinite-scroll-container="config().infiniteScrollContainerSelector()"\n       infinite-scroll-tray-id="{{::config().instanceId}}-scroll-tray"></div>\n</div>\n<div class="spinner bb-secondary-color-2" ng-show="!table.initialDataLoaded"></div>'},566934:function(e){e.exports='<div class="telemetry-panel">\n\n  <div id="discussion-insights" class="panel-content discussion-insights" bb-foundation-defer>\n\n    <div class="insights">\n      <div class="insight-summary row collapse summary-box">\n        <div class="column small-12">\n          <bb-statistics\n            config="statisticsConfig"\n            ng-if="isLoaded"\n            small-per-row="1"\n            large-per-row="4"></bb-statistics>\n        </div>\n      </div>\n\n      <div class="participation-chart-container">\n        <div class="bar-chart">\n          <span class="participated"\n                aria-label="{{barchartParticipants}}"\n                title="{{barchartParticipants}}"></span>\n          <span class="opened"\n                aria-label="{{barchartOpenedNonParticipants}}"\n                title="{{barchartOpenedNonParticipants}}"></span>\n          <span class="unopened"\n                aria-label="{{barchartNonParticipants}}"\n                title="{{barchartNonParticipants}}"></span>\n        </div>\n        <div class="legend">\n          <div class="participatedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentParticipatedCaption)"></div>\n          <div class="openedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentOpenedCaption)"></div>\n        </div>\n      </div>\n\n      <div class="non-participant-groups row" ng-if="displayNonParticipantGroups">\n        <div class="column small-12 non-participant-box clearfix" bb-foundation-defer>\n          <h3 class="stat-title large-non-participants-title"\n              bb-translate="components.directives.discussion.insights.groupNonParticipants"\n              translate-values="{count: totalNonParticipants}"></h3>\n          <div class="float-right">\n            <button class="button super-clear message-all-non-participants-button"\n                type="button"\n                ng-click="discussionInsights.goToMessageAll()"\n                bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageNonParticipants\'}"\n                translate-attrs-values="{count: totalNonParticipants}"\n                analytics-id="components.directives.discussion.insights.messageNonParticipants.button">\n              <bb-ui-icon-medium-messages></bb-ui-icon-medium-messages>\n            </button>\n          </div>\n\n          <div class="group-nonparticipants" ng-repeat="nonParticipantGroup in nonParticipantGroups track by nonParticipantGroup.id">\n            <div class="group-heading child-is-invokable" bb-click-to-invoke-child="a.group-link">\n              <a class="group-link"\n                 href="javascript:void(0);"\n                 ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 analytics-id="components.directives.discussion.insights.nonParticipantGroup.link">\n                {{nonParticipantGroup.name}}\n              </a>\n            </div>\n            <div class="nonparticipant-in-group-container"\n                 ng-class="nonParticipantGroup.total > 3 ? \'space-evenly\' : \'set-margin\' ">\n              <div class="nonparticipant-in-group child-is-invokable"\n                   bb-click-to-invoke-child="a.group-non-participant-link"\n                   ng-repeat="nonParticipant in nonParticipantGroup.nonParticipants | limitTo: 4 track by nonParticipant.id">\n                <bb-avatar class="nonparticipant-in-group-avatar" user="nonParticipant"></bb-avatar>\n                <a class="group-non-participant-link"\n                   href="javascript:void(0);"\n                   aria-label="{{nonParticipant.localizedName}}"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipant.link">\n                  {{nonParticipant.localizedName}}\n                </a>\n              </div>\n            </div>\n            <div class="count-link">\n              <a ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 ng-show="nonParticipantGroup.hidden > 0"\n                 href="javascript:void(0);"\n                 bb-translate="components.directives.discussion.insights.moreLink"\n                 translate-values="{count: nonParticipantGroup.hidden}"\n                 analytics-id="components.directives.discussion.insights.moreLink">\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="non-participants row" ng-show="(displayNonParticipants || displayNonParticipantGroup)">\n        <div class="column small-12 non-participant-box clearfix" ng-if="showLargeNonparticipantPanel" bb-foundation-defer>\n          <h3 class="stat-title large-non-participants-title" bb-translate="components.directives.discussion.insights.nonParticipants"></h3>\n          <div class="float-right">\n            <button class="button super-clear message-all-non-participants-button"\n                type="button"\n                ng-click="discussionInsights.goToMessageAll()"\n                bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageNonParticipants\'}"\n                translate-attrs-values="{count: totalNonParticipants}"\n                analytics-id="components.directives.discussion.insights.messageNonParticipants.button">\n              <bb-ui-icon-medium-messages></bb-ui-icon-medium-messages>\n            </button>\n          </div>\n          <ul class="non-participant-list clearfix">\n            <li class="non-participant child-is-invokable"\n                bb-click-to-invoke-child="a.non-participant-link"\n                tabindex="-1"\n                ng-show="showNonparticipant[$index]"\n                ng-repeat="nonParticipant in nonParticipants | limitTo: 18 track by nonParticipant.id">\n              <div class="non-participant-cell"\n                   ng-class="{\'show-focus-outline\': discussionInsights.isFocusedNonparticipant(nonParticipant.id)}">\n                <a class="non-participant-link hide-focus-outline"\n                   bb-translate-attrs="{\'aria-label\':\'{{nonParticipant.localizedNameWithoutWrap}}\'}"\n                   id="non-participant-link-{{nonParticipant.id}}"\n                   tabindex="0"\n                   href="javascript:void(0);"\n                   ng-focus="true"\n                   ng-blur="true"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipantLink.link">\n                  <bb-avatar class="non-participant-avatar" user="nonParticipant.avatarData"></bb-avatar>\n                </a>\n                <span ng-if="!discussionInsights.isPreferedNameBoth(nonParticipant)" class="byline stacked" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.localizedName)"></span>\n\n                <div ng-if="discussionInsights.isPreferedNameBoth(nonParticipant)">\n                  <span class="byline stacked stacked-other-name" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.otherName)"></span>\n                  <span class="byline stacked stacked-other-name" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.fullName)"></span>\n                </div>\n              </div>\n            </li>\n          </ul>\n          <label class="summary-line">{{nonParticipationSummary}}</label>\n        </div>\n        <div class="column small-12 non-participant-box clearfix" ng-if="!showLargeNonparticipantPanel">\n          <h3 class="stat-title subheader">{{barchartNonParticipants}}</h3>\n          <button class="messageAllButton button"\n                  bb-translate="components.directives.discussion.insights.messageAll"\n                  bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageAll\'}"\n                  ng-click="discussionInsights.goToMessageAll()"\n                  analytics-id="components.directives.discussion.insights.messageAll">\n          </button>\n        </div>\n      </div>\n\n      <div class="row equal-height" ng-if="displayTopComments || displayTopParticipants">\n        <div class="top-comments column {{topCommentsColumns}} student-list-box" ng-if="displayTopComments">\n          <h3 class="stat-title subheader"\n              id="most-replies-heading"\n              bb-translate="components.directives.discussion.insights.mostReplies"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-comment-row child-is-invokable"\n                 bb-click-to-invoke-child="a.discussion-link"\n                 ng-class="{\'last\':$last}"\n                 ng-repeat="comment in topComments | limitTo: numberOfCommentsToDisplay | orderBy: \'-numReplies\'">\n              <a href="javascript:void(0);"\n                 class="discussion-link"\n                 ng-click="discussionInsights.goToDiscussion(comment.user.group.id)"\n                 aria-labelledby="comment-user-{{comment.user.id}} most-replies-heading"\n                 aria-describedby="comment-message-{{comment.user.id}}\n                 comment-replies-{{comment.user.id}}"\n                 analytics-id="components.directives.discussion.insights.goToDiscussion.link">\n                <bb-avatar class="top-participant-avatar" user="comment.user.avatarData"></bb-avatar>\n                <div class="comment-info">\n                  <div class="comment-message ellipsis" id="comment-message-{{comment.user.id}}">{{comment.message}}</div>\n                  <div class="byline ellipsis">\n                    <span id="comment-user-{{comment.user.id}}">\n                      <bb-translate>components.directives.discussion.insights.by</bb-translate> {{comment.user.localizedName}}\n                      <span ng-show="isGroupDiscussion"><bb-translate>components.directives.discussion.insights.inGroup</bb-translate> {{comment.user.group.name}}</span>\n                    </span> |\n                    <span id="comment-replies-{{comment.user.id}}"> {{comment.numReplies}} <bb-translate>components.directives.discussion.insights.replies</bb-translate></span>\n                  </div>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n        <div class="top-participants column {{topParticipantColumns}} student-list-box" ng-if="displayTopParticipants">\n          <h3 id="top-heading" class="stat-title subheader" bb-translate="components.directives.discussion.insights.topParticipants"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-participants-row child-is-invokable"\n                 bb-click-to-invoke-child="a.grading-panel-link"\n                 ng-class="{\'last\':$last, \'not-graded\': (!isGradable || isGroupDiscussion), \'group-row\':isGroupDiscussion}"\n                 ng-repeat="participant in topParticipants | limitTo: numberOfCommentsToDisplay | orderBy: \'-numComments\'">\n              <a href="javascript:void(0);"\n                 class="grading-panel-link"\n                 aria-labelledby="user-{{participant.user.id}} top-heading"\n                 aria-describedby="span-replies-{{participant.user.id}} span-feedback-{{participant.user.id}}"\n                 ng-class="{\'not-graded\': (!isGradable || isGroupDiscussion)}"\n                 ng-click="discussionInsights.goToGrade(participant.user.id)"\n                 analytics-id="components.directives.discussion.insights.goToGrade.link">\n                <bb-avatar class="comment-avatar" user="participant.user.avatarData"></bb-avatar>\n                <div class="top-participant-info ellipsis" ng-class="{\'not-graded\': !isGradable}">\n                  <span class="discussion-insights-heading" id="user-{{participant.user.id}}">{{participant.user.localizedName}}</span><br>\n                  <span class="ellipsis" ng-show="isGroupDiscussion">{{participant.user.group.name}}</span><br ng-show="isGroupDiscussion">\n                  <span class="byline" id="span-feedback-{{participant.user.id}}">\n                    <bb-svg-icon class="top-participant-icon" size="small" icon="feedback" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.feedback\'}"></bb-svg-icon>\n                    {{participant.numComments}}\n                  </span>\n                  <span class="byline" id="span-replies-{{participant.user.id}}">\n                  <bb-svg-icon class="top-participant-icon" size="small" icon="replies" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.replies\'}"></bb-svg-icon>\n                    {{participant.numReplies}}\n                  </span>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ui-view="telemetry-discussion-forum-insights-base@"></div>\n  </div>\n</div>\n'},891502:function(e){e.exports='<div>\n  <!-- Display a loading spinner if page is rendering -->\n  <div class="telemetry-loading-anim" ng-if="telemetryPanelHeader.showSpinner">\n    <div class="spinner bb-secondary-color-2"/>\n  </div>\n  <header class="panel-header simple-header">\n    <div class="panel-titles-container">\n      <div class="panel-sub-title">{{ ::course().name }}</div>\n      <div class="black-header-contents">\n        <button class="left-off-canvas-toggle menu-toggle standard-button dark-background"\n                type="button"\n                analytics-id="components.directives.telemetry.panel.menu.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>components.directives.telemetry.panel.menu</span>\n        </button>\n        <h1 class="panel-title" ng-if="::titleKey" bb-translate>{{::titleKey}}</h1>\n        <h1 class="panel-title" ng-if="title">{{::title}}</h1>\n        <!-- BUTTON 2 (displayed to the left of Button 1) -->\n        <button ng-if="buttonTwoIcon" id="button-two"\n                aria-haspopup="true"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonTwoAriaLabel,\'title\': buttonTwoTitle}"\n                ng-click="buttonTwoCallback()"\n                ng-class="{ \'active\': mobileStudentListVisible }"\n                analytics-id="components.directives.telemetry.panel.buttonwTwo.button">\n          <i class="{{ ::buttonTwoIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonTwoTitle</span>\n        </button>\n        <!-- BUTTON 1 (displayed on the far right) -->\n        <button ng-if="buttonOneIcon"\n                id="button-one"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonOneAriaLabel,\'title\': buttonOneTitle}"\n                ng-click="buttonOneCallback()"\n                analytics-id="components.directives.telemetry.panel.buttonOne.button">\n          <i class="{{ ::buttonOneIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonOneTitle</span>\n        </button>\n      </div>\n    </div>\n  </header>\n</div>\n'},84535:function(e){e.exports='<div class="typeahead-search" bb-click-outside="typeaheadSearchBox.onClickOutside()" is-active="true" bb-load-bundle="components/directives/typeahead">\n  <label for="typeahead-search-box-{{::typeaheadSearchBox.randomElementId}}">\n    <bb-svg-icon ng-if="::typeaheadSearchBox.icon" icon="{{::typeaheadSearchBox.icon}}" size="small" class="magnifying-glass"></bb-svg-icon>\n    <span ng-if="::typeaheadSearchBox.srLabel" class="sr-only" bb-translate="{{::typeaheadSearchBox.srLabel}}"></span>\n  </label>\n  <input aria-describedby="requiredPrompt" type="text" id="typeahead-search-box-{{::typeaheadSearchBox.randomElementId}}"\n         ng-model="typeaheadSearchBox.searchValue"\n         ng-model-options="{ debounce: 250 }"\n         role="combobox"\n         aria-activedescendant="typeahead-result-{{::typeaheadSearchBox.randomElementId}}-0"\n         aria-autocomplete="list"\n         aria-owns="typeahead-search-autocomplete"\n         name="typeaheadSearchBox"\n         autocomplete="off"\n         ng-keydown="typeaheadSearchBox.onInputBoxKeyDown($event)"\n         ng-click="typeaheadSearchBox.onInputBoxClick($event)"\n         ng-change="typeaheadSearchBox.onSearchValueChange()"\n         ng-focus="typeaheadSearchBox.onFocusInputBox($event)"\n         bb-translate-attrs="{\'placeholder\': \'{{typeaheadSearchBox.inputPlaceholder}}\'}"\n         class="truncated"\n         ng-class="{\'not-empty with-clear-btn\': typeaheadSearchBox.searchValue, \'empty\': !typeaheadSearchBox.searchValue,\n                    \'with-icon\': typeaheadSearchBox.icon, \'is-active\': typeaheadSearchBox.isFocus}"\n         analytics-id="components.directives.typeheadSearchBox.input.text"/>\n    <button class="typeahead-clear-button" bb-translate-attrs="{\'aria-label\': \'{{typeaheadSearchBox.clearAriaLabel}}\'}"\n            tabindex="0"\n            ng-show="typeaheadSearchBox.searchValue"\n            ng-click="typeaheadSearchBox.clear()"\n            ng-focus="typeaheadSearchBox.onFocusClearBtn($event)"\n            ng-blur="typeaheadSearchBox.onBlurClearBtn($event)"\n            analytics-id="components.directives.typeheadSearchBox.clearAriaLabel.button">\n      <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n    </button>\n  <span id="requiredPrompt" class="sr-only" bb-translate="{{::typeaheadSearchBox.srEmptyResults}}"></span>\n  <div id="typeahead-search-autocomplete" class="typeahead-search-autocomplete adding"\n       ng-if="typeaheadSearchBox.showResults"\n       role="listbox"\n       tabindex="-1">\n    <div class="typeahead-search-entry" ng-repeat="item in typeaheadSearchBox.searchResults"\n         role="option"\n         tabindex="-1"\n         id="typeahead-result-{{::typeaheadSearchBox.randomElementId}}-{{$index}}"\n         ng-keydown="typeaheadSearchBox.onResultEntryKeyDown($event, item)"\n         ng-click="typeaheadSearchBox.onResultEntryClick($event, item)"\n         analytics-id="components.directives.typeheadSearchBox.onResultEntryClick">\n      <typeahead-inject></typeahead-inject>\n    </div>\n  </div>\n</div>'},56832:function(e){e.exports='<div class="typeahead-selected-options" ng-class="{\'empty\': selectedOptions.length === 0}" bb-load-bundle="components/directives/typeahead">\n  <ul bb-translate-attrs="{ \'aria-label\': selectedOptionsListLabel }">\n    <li ng-repeat="option in selectedOptions">\n      <span>{{::option.displayName}}</span>\n      <button class="button button--text"\n              ng-click="typeaheadSelectedOptions.removeOption(option)"\n              bb-translate-attrs="{ \'aria-label\': \'typeahead.typeahead-options.remove\' }"\n              translate-attrs-values="{ displayName: option.displayName }"\n              analytics-id="components.directives.typeaheadSelectedOptions.removeOption.button">\n        <bb-svg-icon size="small" icon="clear" />\n      </button>\n    </li>\n  </ul>\n</div>'},288815:function(e){e.exports='<div>\n  <div class="initials"></div>\n  <div class="image"></div>\n</div>'},698268:function(e){e.exports='<div>\n  <bb-user-avatar ng-repeat="user in displayUsers" user="user"></bb-user-avatar>\n</div>'},305988:function(e){e.exports='<bb-ui-username\n  ng-if="un.user"\n  class="bb-ui-username"\n  user="un.user"\n  format="un.format"\n  show-pronouns="un.showPronouns"\n  show-pronunciation="un.showPronunciation"\n  subtext="{{ un.showInlineUsername ? user.userName : undefined }}"\n  on-username-click="onUsernameClick"\n></bb-ui-username>\n<span\n  ng-if="un.user"\n  class="sr-only username-accommodation-content"\n>\n  <span class="username-has-accommodation">{{ un.textAccommodation }}</span>\n</span>\n'},342005:function(e){e.exports='<!-- Onsubmit Errors first -->\n<script type="text/ng-template" id="default-onsubmit-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="numberInvalidOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.number_invalid</span></span>\n  <span ng-message="numberLargeOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberLargeOnsubmit.max }">components.directives.validation.messages.onsubmitErrors.number_large</span></span>\n  <span ng-message="numberSmallOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberSmallOnsubmit.min }">components.directives.validation.messages.onsubmitErrors.number_small</span></span>\n  <span ng-message="maxlengthOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.maxlength</span></span>\n  <span ng-message="urlOnsubmit"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="requiredOnsubmit"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="emailOnsubmit"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="timeOnsubmit"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="dateOnsubmit"><span bb-translate>components.directives.validation.messages.errors.date</span></span>\n</script>\n\n<!-- Errors -->\n<script type="text/ng-template" id="default-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="rangeInvalid"><span bb-translate translate-values="{ value: errors.rangeInvalidArgs.min }">components.directives.validation.messages.errors.range_invalid</span></span>\n  <span ng-message="numberInvalid"><span bb-translate>components.directives.validation.messages.errors.number_invalid</span></span>\n  <span ng-message="numberLarge"><span bb-translate translate-values="{ value: errors.numberLarge.max }">components.directives.validation.messages.errors.number_large</span></span>\n  <span ng-message="numberSmall"><span bb-translate translate-values="{ value: errors.numberSmall.min }">components.directives.validation.messages.errors.number_small</span></span>\n  <span ng-message="maxlength"><span role="status" aria-live="polite" bb-translate translate-values="{ diff: errors.maxlength.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n  <span ng-message="url"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="required"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="email"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="phoneNumber"><span bb-translate>components.directives.validation.messages.errors.phone_number_noSymbolsOrSpaces</span></span>\n  <span ng-message="time"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="date"><span class="js-error-date" bb-translate>components.directives.validation.messages.errors.date</span></span>\n  <span ng-message="maxDate"><span bb-translate translate-values="{ value: errors.maxDate.dateMax }">components.directives.validation.messages.errors.max_date</span></span>\n  <span ng-message="minDate"><span bb-translate translate-values="{ value: errors.minDate.dateMin }">components.directives.validation.messages.errors.min_date</span></span>\n  <span ng-message="schemaSymbolString"><span bb-translate>components.directives.validation.messages.errors.schema_symbol_string</span></span>\n</script>\n\n<!-- Immediate Errors -->\n<script type="text/ng-template" id="default-immediate-error-messages">\n  <span ng-message="maxlengthImmediate"><span role="status" aria-live="polite" bb-translate translate-values="{ diff: immediateErrors.maxlengthImmediate.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n</script>\n\n<!-- Warnings -->\n<script type="text/ng-template" id="default-warning-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.warnings.invalid_bbml_markups_cleanup</span></span>\n  <span ng-message="maxlengthWarning"><span role="status" aria-live="polite" bb-translate translate-values="{ left: warnings.maxlengthWarning.left }">components.directives.validation.messages.warnings.maxlength.plural</span></span>\n</script>\n\n<div class="bb-validation-messages form-element-onsubmit-errors" ng-class="{\'sr-only\': !showOnsubmitErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.onsubmitFieldHasError</div>\n  </div>\n\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="onsubmitErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-onsubmit-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.fieldHasError</div>\n  </div>\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="errors">\n    <ng-transclude class="js-error-message"></ng-transclude>\n    <div ng-messages-include="default-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showImmediateErrors}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="immediateErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-immediate-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-warnings" ng-class="{\'sr-only\': !showWarnings}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="warnings">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-warning-messages"></div>\n  </div>\n</div>\n'},56227:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.services.error-modal.error-external-questions">\n  <div name="modal-contents">\n    <p bb-translate>{{descriptionKey}}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss">components.services.error-modal.dismiss</button>\n</bb-modal>\n'},225663:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-aria-type="alertdialog"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.services.error-modal.error-not-enough-submissions">\n  <div name="modal-contents">\n    <p bb-translate>{{::descriptionKey}}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss">components.services.error-modal.dismiss</button>\n</bb-modal>\n'},453494:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-conflict.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-conflict.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},364258:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-course-is-closed.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-course-is-closed">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-is-closed.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-course-is-closed.alt"\n          bb-translate>components.services.error-modal.error-course-is-closed.alt</button>\n</bb-modal>\n'},690778:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-discussion-due-date.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-discussion-due-date">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-discussion-due-date.description</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.error-discussion-due-date.ok"\n          bb-translate>global.ok</button>\n</bb-modal>\n'},883912:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-forbidden.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-forbidden">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-forbidden.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},741278:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-insufficient-storage.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-insufficient-storage">\n  <div name="modal-contents">\n    <div>\n      <p bb-translate>components.services.error-modal.error-insufficient-storage.information</p>\n    </div>\n    <div>\n      <p bb-translate>components.services.error-modal.error-insufficient-storage.description</p>\n    </div>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},279215:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-not-found-modal"\n          modal-title-key="components.services.error-modal.error-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-not-found">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>\n'},643785:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-persist-question.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-persist-question">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-persist-question.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-persist-question.alt"\n          bb-translate>components.services.error-modal.error-persist-question.alt</button>\n</bb-modal>\n'},72026:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-something-broke-modal"\n          modal-title-key="components.services.error-modal.error-something-broke.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-something-broke">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-something-broke.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>\n'},973016:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-too-long.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-too-long">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-too-long.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},592639:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},589023:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p>{{ errorString }}</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},840721:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="course.content.ltiNeedsApprovalTitle"\n          analytics-id-tag-prefix="course.content.ltiNeedsApproval">\n  <div name="modal-contents">\n    <p ng-if="hasEmail" bb-translate>course.content.ltiNeedsApprovalDescription</p>\n    <p ng-if="hasEmail"><a href="mailto:{{ ::email }}" analytics-id="components.services.lti.needsApproval.email.link">{{ ::email }}</a></p>\n    <p ng-if="!hasEmail" bb-translate>course.content.ltiNeedsApprovalDescriptionNoEmail</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="global.ok"\n          bb-translate>global.ok</button>\n</bb-modal>'},42530:function(e){e.exports='<div class="reveal-modal-bg fade"\n     ng-class="{in: animate, dark: darkenBackdrop}"\n     ng-click="close($event)"\n     style="display: block"\n     analytics-id="components.services.backdrop"\n></div>'},837442:function(e){e.exports="<div ng-transclude></div>"},673600:function(e){e.exports='<bb-modal class="notification proctoring-modal" analytics-id-tag-prefix="components.services.proctoring">\n  <div name="modal-contents">\n    <p bb-translate>{{::requirementsText}}</p>\n    <p ng-bind-html="::downloadText"></p>\n    <p bb-translate>{{::browserText}}</p>\n  </div>\n  <!-- htmlhint:analytics-id:disable -->\n  <button name="modal-footer-button-primary"\n          role="button"\n          class="button js-primary-button proctoring-modal-button"\n          ng-click="$parent.$dismiss()"\n          bb-translate-attrs="{\'aria-label\':\'components.services.proctoring.modal.continue\'}"\n          analytics-id="components.services.proctoring.modal.continue.button"\n  >\n  <!-- htmlhint:analytics-id:enable -->\n    <bb-translate>components.services.proctoring.modal.continue</bb-translate>\n  </button>\n</bb-modal>\n'},484769:function(e){e.exports='<bb-modal id="content-deleted-modal"\n          class="notification"\n          modal-title-key="base.stream.modal.accessDenied.title"\n          analytics-id-tag-prefix="base.stream.modal.accessDenied">\n  <div name="modal-contents">\n    <p bb-translate>base.stream.modal.accessDenied.body</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate analytics-id="global.ok">global.ok</button>\n</bb-modal>\n'},48042:function(e){e.exports='\n<footer class="panel-footer notification toast-container">\n  <bb-save-tray tray-type="LoadMoreResults"\n                tray-id="{{::trayId}}"\n                tray-localization-keys-prefix="{{::trayLocalizationKeysPrefix}}">\n  </bb-save-tray>\n</footer>'},742203:function(e){e.exports='<footer class="panel-footer notification row collapse" ng-click="toastClicked()"\n        analytics-id="components.services.toast.clicked">\n  <bb-save-tray toast-message="::message" toast-short-message="::shortMessage" toast-icon="::icon" toast-class="::toastClass" toast-status="::toastStatus"></bb-save-tray>\n</footer>\n'},168955:function(e){e.exports='<div>\n    <div bb-dir>\n        <div ui-view="{0}" bb-offcanvas-pausal-scope></div>\n    </div>\n</div>'},623017:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-course-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  <!-- htmlhint:analytics-id:disable -->\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss.button"\n  >\n    components.services.error-modal.dismiss\n  </button>\n  <!-- htmlhint:analytics-id:enable -->\n</bb-modal>'},205507:function(e){e.exports='<div id="body-content" class="tools-frame" ng-controller="ultra.legacy.tool.controller">\n  <div id="side-panel" class="tools-overlay full bb-offcanvas-right side-panel">\n    <div class="panel-wrap">\n      <header class="panel-header">\n        <div class="columns" id="global-title">\n          <h1 class="panel-title ng-scope" bb-translate="{{tool.getToolTitleByKey(legacyTool.toolName)}}"></h1>\n          <button class="left-off-canvas-toggle menu-toggle" aria-expanded="true"\n                  analytics-id="base.tools.frame.menu.button">\n            <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n            <span class="sr-only" bb-translate>base.menu</span>\n          </button>\n        </div>\n      </header>\n      <div class="iframe-wrapper">\n        <iframe name="legacy-tool-iframe" bb-iframe-max-height seamless="seamless" ng-src="{{::legacyTool.getUrl()}}"\n                bb-iframe-event-repeater="keydown"\n                bb-translate-attrs="{\'title\': \'{{tool.getToolTitleByKey(legacyTool.toolName)}}\'}"></iframe>\n      </div>\n    </div>\n  </div>\n</div>\n'},745321:function(e){e.exports='<bb-modal class="notification" modal-title-key="course.content.assessment.alreadySubmitted.title"\n  analytics-id-tag-prefix="course.content.assessment.alreadySubmitted">\n  <div name="modal-contents">\n    <p bb-translate>course.content.assessment.alreadySubmitted.backend</p>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(); customClose();"\n    class="button confirm-ok js-primary-button ng-scope" bb-translate\n    analytics-id="course.content.groupAttempt.edit.alreadySubmitted.dismiss">\n    course.content.groupAttempt.edit.alreadySubmitted.dismiss\n  </button>\n</bb-modal>\n'},609992:function(e){e.exports='<bb-modal class="notification"\n  modal-title-key="course.content.assessment.settings.dueDate.isLateAttemptCreationDisallowed.label"\n  analytics-id-tag-prefix="course.content.assessment.settings.dueDate.isLateAttemptCreationDisallowed">\n  <div name="modal-contents">\n    <p bb-translate>course.content.assessment.settings.dueDate.isLateAttemptCreationDisallowed.restriction.description\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(); assessmentOverview.navigateAttemptReview();"\n    class="button confirm-ok js-primary-button ng-scope" bb-translate\n    analytics-id="course.content.groupAttempt.edit.alreadySubmitted.dismiss">\n    course.content.groupAttempt.edit.alreadySubmitted.dismiss\n  </button>\n</bb-modal>\n'},984993:function(e){e.exports='<bb-modal class="notification group-attempt-access-control-dialog {{additionalClass}}"\n  modal-translate-options="modalTranslateOptions"\n  analytics-id-tag-prefix="components.directives.groupAttemptAccessControlDialog">\n\n  <div name="modal-contents">\n\n    <div class="queue">\n      <div class="owner user-tile">\n        <div>\n          <bb-avatar user="owner"></bb-avatar>\n          <bb-username user="owner"></bb-username>\n        </div>\n      </div>\n      <div class="user-tile queuer" ng-repeat="user in queuedUsers track by user.id" ng-class="\'queuer-\' + $index">\n        <div>\n          <bb-avatar user="user"></bb-avatar>\n          <bb-username user="user"></bb-username>\n        </div>\n      </div>\n    </div>\n\n    <p ng-bind-html="::modalStrings.instructions"></p>\n  </div>\n  <span name="modal-footer-button-primary">\n    <button class="button confirm-ok js-primary-button" ng-click="okAction()" ng-if="!hideOK" analytics-id="primary.ok.action.button">{{::modalStrings.ok}}</button>\n    <button class="button confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n  <span name="modal-footer-button-secondary">\n    <button class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="!hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n</bb-modal>\n'},690349:function(e){e.exports='<bb-modal class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.grades.settings.categorySettings.deleteAlert.title\'}"\n          modal-title-key="course.grades.settings.categorySettings.deleteAlert.title"\n          analytics-id-tag-prefix="course.grades.settings.categorySettings.deleteAlert">\n  <div name="modal-contents">\n    <bb-translate>course.grades.settings.categorySettings.deleteAlert.content</bb-translate>\n  </div>\n  <button name="modal-footer-button-primary" \n          ng-click="$parent.$dismiss()" \n          class="button js-primary-button"\n          analytics-id="course.grades.settings.categorySettings.deleteAlert.ok.button">\n    <span bb-translate="course.grades.settings.categorySettings.deleteAlert.ok-button"></span>\n  </button>\n</bb-modal>'},869374:function(e){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': {{::gradesUploadSettings.completedModalTitleKey}}}"\n          modal-title-key="{{::gradesUploadSettings.completedModalTitleKey}}" aria-describedby="course-is-complete"\n          analytics-id-tag-prefix="course.grades.grades-upload-settings">\n    <div name="modal-contents">\n        <p id="course-is-complete" bb-translate="course.grades.grades-upload-settings.courseComplete.content" course-org-token-resolver></p>\n    </div>\n    <a name="modal-footer-help-link" \n       href="" \n       bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkCourseComplete\'}" \n       target="_blank" \n       bb-translate="course.grades.grades-upload-settings.helpButton" \n       rel="noopener noreferrer"\n       analytics-id="course.grades.grades-upload-settings.helpButton">\n    </a>\n    <button name="modal-footer-button-primary" \n            class="button js-discard-changes js-primary-button" \n            ng-click="$dismiss()"\n            analytics-id="course.grades.gradesUploadSettings.closeButton.button">\n        <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n    </button>\n</bb-modal>'},592178:function(e){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.failedToUpload.title\'}" \n          modal-title-key="course.grades.grades-upload-settings.failedToUpload.title" aria-describedby="failed-to-upload"\n          analytics-id-tag-prefix="course.grades.gradesUploadSettingsFailed">\n<div name="modal-contents">\n    <p id="failed-to-upload" translate-values="{ count: failedItemsCount, errorItems: failedItems }"\n       bb-translate="course.grades.grades-upload-settings.failedToUpload.content.plural"></p>\n</div>\n  <button name="modal-footer-button-primary" \n          class="button js-discard-changes js-primary-button failed-to-upload-button" \n          ng-click="$dismiss()"\n          analytics-id="course.grades.gradesUploadSettingsFailed.closeButton.button">\n      <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n  </button>\n</bb-modal>'},110324:function(e){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.wrongDelimiter.title\'}" \n    modal-title-key="course.grades.grades-upload-settings.wrongFormat.title" aria-describedby="wrong-format-content"\n    analytics-id-tag-prefix="course.grades.gradesUploadSettingsWrongFormat">\n    <div name="modal-contents">\n        <p id="wrong-format-content" bb-translate="course.grades.grades-upload-settings.wrongFormat.content"></p>\n    </div>\n    <a name="modal-footer-help-link" \n       href="" \n       bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkUpload\'}" \n       target="_blank" \n       bb-translate="course.grades.grades-upload-settings.helpButton" \n       rel="noopener noreferrer"\n       analytics-id="course.grades.grades-upload-settings.helpButton">\n    </a>\n    <button name="modal-footer-button-primary" \n            class="button js-discard-changes js-primary-button" \n            ng-click="$dismiss()"\n            analytics-id="course.grades.gradesUploadSettingsWrongFormat.closeButton.button">\n        <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n    </button>\n</bb-modal>'},813710:function(e){e.exports='<bb-modal role="alertdialog" class="notification upload-disallowed-file-type upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.fileTypeError.title\'}" \n          modal-title-key="course.grades.grades-upload-settings.fileTypeError.title" aria-describedby="gradebook-upload-failed"\n          analytics-id-tag-prefix="course.grades.grades-upload-settings">\n  <div name="modal-contents">\n    <p id="gradebook-upload-failed" bb-translate="course.grades.grades-upload-settings.fileTypeError.content"></p>\n  </div>\n  <a name="modal-footer-help-link" \n     href="" \n     bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkUpload\'}" \n     target="_blank" \n     bb-translate="course.grades.grades-upload-settings.helpButton" \n     rel="noopener noreferrer"\n     analytics-id="course.grades.grades-upload-settings.helpButton">\n  </a>\n  <button name="modal-footer-button-primary" \n          class="button js-discard-changes js-primary-button" \n          ng-click="$dismiss()"\n          analytics-id="course.grades.gradesUploadSettingsError.closeButton.button">\n    <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n  </button>\n</bb-modal>'},835901:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-custom-toggle-grid",use:"icon-custom-toggle-grid-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="icon-custom-toggle-grid"><path fill="none" stroke-width="2" stroke-miterlimit="10" d="M0 1h12M0 6h12M0 11h12M1 12V0M6 12V0M11 12V0" /></symbol>'});s.add(r),e.exports=r},540960:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-custom-toggle-table",use:"icon-custom-toggle-table-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="icon-custom-toggle-table"><path fill="none" stroke-width="2" stroke-miterlimit="10" d="M0 1h12M0 6h12M0 11h12" /></symbol>'});s.add(r),e.exports=r},402764:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-add-feedback",use:"icon-medium-add-feedback-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-add-feedback"><path d="M1 1h22v19h-8l-3 3-3-3H1V1zM12 6v10M7 11h10" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},195488:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-collab-session",use:"icon-medium-collab-session-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-collab-session"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 5h17v4l5-3.9583V19l-5-4v4H1V5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M18 8v8M6 8l2 4-2 4M11 8l2 4-2 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},258e3:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-conversation",use:"icon-medium-conversation-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-conversation"><path d="M4.5 18C6.433 18 8 16.433 8 14.5S6.433 11 4.5 11 1 12.567 1 14.5 2.567 18 4.5 18zM9 23c.2624-2.4862-1.873-5-4.5-5M23 7.5c0 3.5899-2.9101 6.5-6.5 6.5-1.0821 0-2.1025-.2644-3-.7322L11 15l.5-3.3464C10.5633 10.5273 10 9.0794 10 7.5 10 3.9101 12.9101 1 16.5 1S23 3.9101 23 7.5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},311774:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-discussion",use:"icon-medium-discussion-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-discussion"><path d="M8 21.4025a10.4446 10.4446 0 01-1.75-.8072L1 22l1.4318-5.2034C1.5217 15.2417 1 13.4318 1 11.5 1 5.701 5.701 1 11.5 1c4.5718 0 8.4611 2.9218 9.9025 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M9 16c0 3.866 3.134 7 7 7 1.3878 0 2.6812-.3803 3.7692-1.0769L23 23l-1.0769-3.2308C22.6197 18.6812 23 17.3878 23 16c0-3.866-3.134-7-7-7s-7 3.134-7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="13" cy="16" r=".5" /><circle cx="16" cy="16" r=".5" /><circle cx="19" cy="16" r=".5" /></symbol>'});s.add(r),e.exports=r},78914:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-download",use:"icon-medium-download-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-download"><path d="M12 15V1M8 11l4 4 4-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 7v16h22V7h-4M1 7h4-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},644102:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-feedback",use:"icon-medium-feedback-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-feedback"><path d="M1 1h22v19h-8l-3 3-3-3H1V1zM6 6h12M6 9h12M6 12h12M6 15h7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},633562:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-groups",use:"icon-medium-groups-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-groups"><g clip-path="url(#icon-medium-groups_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 23.0644C17.3246 21.1155 14.8704 20 12 20s-5.3246 1.1155-7 3.0644M12 20c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8z" /><path d="M23 11s-1-3-4.5-3c-2.1456 0-3.3517 1.1274-3.9639 2M5.5 8C3.567 8 2 6.433 2 4.5S3.567 1 5.5 1 9 2.567 9 4.5 7.433 8 5.5 8zM1 11s1-3 4.5-3c2.1456 0 3.3517 1.1274 3.9639 2" /></g><defs><clipPath id="icon-medium-groups_clip0"><path d="M0 0h24v24H0z" /></clipPath></defs></symbol>'});s.add(r),e.exports=r},848054:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-information",use:"icon-medium-information-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-information"><path d="M12 23c6.0751 0 11-4.9249 11-11S18.0751 1 12 1 1 5.9249 1 12s4.9249 11 11 11z" stroke-width="2" /><path d="M12 6.5a.5.5 0 100-1 .5.5 0 000 1z" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 9h2v9M10 18h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},158561:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-people",use:"icon-medium-people-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-people"><path d="M1 23c1.096-4.3157 4.5473-7 9-7s7.904 2.6843 9 7M10 16c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8zM23 12c-.2345-1.9862-2.5-4-4.5-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},215990:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-programs",use:"icon-medium-programs-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-programs"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M17 3h6v20h-6zM9 7h8v16H9zM1 1h8v22H1zM1 19h8M1 5h8M12 11h2M12 19h2M17 19h6M20 7v3" /></symbol>'});s.add(r),e.exports=r},895384:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-settings",use:"icon-medium-settings-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-settings"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4277 6.2062l-2.779.674a8.3399 8.3399 0 00-1.7651-1.7008l.5771-2.8038a.4939.4939 0 00-.3024-.5594l-1.9855-.7817a.4933.4933 0 00-.6028.2026l-1.4904 2.444a8.2935 8.2935 0 00-2.4509.0405L9.0563 1.333a.4956.4956 0 00-.6098-.1818l-1.9568.8509a.4934.4934 0 00-.2827.5703l.674 2.778a8.3417 8.3417 0 00-1.7018 1.7651l-2.8038-.5761a.4946.4946 0 00-.5594.3024l-.7817 1.9855a.495.495 0 00.2026.6028l2.444 1.4894a8.3611 8.3611 0 00.0406 2.4509l-2.3887 1.5734a.4952.4952 0 00-.1809.6098l.851 1.9568a.4938.4938 0 00.5692.2827l2.779-.6741a8.3178 8.3178 0 001.7652 1.7019l-.5772 2.8028a.4936.4936 0 00.3034.5594l1.9845.7827a.4946.4946 0 00.6029-.2026l1.4903-2.4441a8.3594 8.3594 0 002.451-.0405l1.5724 2.3877a.4943.4943 0 00.6097.1819l1.9569-.8509a.4953.4953 0 00.2836-.5703l-.674-2.7791a8.3321 8.3321 0 001.7008-1.7641l2.8038.5772a.4948.4948 0 00.5594-.3034l.7817-1.9855a.4938.4938 0 00-.2026-.6029l-2.444-1.4893a8.298 8.298 0 00-.0405-2.451l2.3887-1.5733a.4936.4936 0 00.1808-.6098l-.8509-1.9559a.4944.4944 0 00-.5693-.2836z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M12 16c-2.2057 0-4-1.7943-4-4s1.7943-4 4-4 4 1.7943 4 4-1.7943 4-4 4z" stroke-width="2" /></symbol>'});s.add(r),e.exports=r},778342:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-upload",use:"icon-medium-upload-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-upload"><path d="M12 1v14M1 7v16h22V7h-4M1 7h4-4zM8 5l4-4 4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},818659:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-accessibility",use:"icon-small-accessibility-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accessibility"><path d="M8 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2zM3 6l5 1 5-1M3 15l5-5 5 5M8 7v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},602994:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-accommodation",use:"icon-small-accommodation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accommodation"><circle cx="8" cy="8" r="7" stroke-width="2" /><path d="M4 6l1 2 5-3M12 10l-1-2-5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},939352:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-activity-indicator",use:"icon-small-activity-indicator-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-activity-indicator"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="2" stroke-width="4" /></symbol>'});s.add(r),e.exports=r},976145:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-add-plus",use:"icon-small-add-plus-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add-plus"><path d="M8 5v6M11 8H5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},197002:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-add",use:"icon-small-add-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM11 8H5M8 5v6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},950628:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-ally-alt-formats",use:"icon-small-ally-alt-formats-usage",viewBox:"0 0 16 17",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17" id="icon-small-ally-alt-formats"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 16.5l8-13 8 13h-4s-.5-3-4-3-4 3-4 3H0zm8-4c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" fill="#262626" /><path d="M16 3.5l-3 5-3-5h2v-3h2v3h2z" fill="#262626" /></symbol>'});s.add(r),e.exports=r},973778:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-ally-indicator-unscored",use:"icon-small-ally-indicator-unscored-usage",viewBox:"0 0 16 17",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17" id="icon-small-ally-indicator-unscored"><path d="M7 11.6667c0 .4602.4477.8333 1 .8333s1-.3731 1-.8333L8 7.5l-1 4.1667z" stroke-width="2" stroke-linejoin="round" /><path d="M2 11.5H1v-1c0-3.866 3.134-7 7-7s7 3.134 7 7v1h-1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 3.5v1M13.25 6l-1 1M3.75 7l-1-1" stroke-width="2" stroke-linecap="round" /></symbol>'});s.add(r),e.exports=r},626552:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-attendance",use:"icon-small-attendance-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attendance"><path d="M15 15V2H1v13h14zM4.5 1v1h7V1h-7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 9l2 2 4-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},783822:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-attention",use:"icon-small-attention-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attention"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 4v5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="12" r=".5" /></symbol>'});s.add(r),e.exports=r},759817:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-calculation",use:"icon-small-calculation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-calculation"><path d="M4 2v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="10" cy="10" r=".5" /><circle cx="14" cy="14" r=".5" /><path d="M2 10l4 4M2 14l4-4M14 10l-4 4M14 4h-4M6 4H2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},428881:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-calendar",use:"icon-small-calendar-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-calendar"><path d="M1 15h14V2H1v13zM5 1v1h6V1H5zM5 12h1M1 6h14M5 9h1M10 12h1M10 9h1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},288211:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-class-pulse-future",use:"icon-small-class-pulse-future-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-class-pulse-future"><path d="M9 14c0 .5523-.4477 1-1 1s-1-.4477-1-1 .4477-1 1-1 1 .4477 1 1zM11 6.5a.5.5 0 11-1 0 .5.5 0 011 0zM5.5 9.5a.5.5 0 11-1 0 .5.5 0 011 0z" /><path d="M15 11l-4.5-4.5-5.5 3-4-2.357M9 2c0 .5523-.4477 1-1 1s-1-.4477-1-1 .4477-1 1-1 1 .4477 1 1z" /><path d="M15 2H1v12h14V2z" /></symbol>'});s.add(r),e.exports=r},520905:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-clear",use:"icon-small-clear-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-clear"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM10 6l-4 4M6 6l4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},904051:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-close",use:"icon-small-close-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-close"><path d="M15 1L1 15M1 1l14 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},58717:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-code",use:"icon-small-code-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-code"><path d="M4 3L1 8l3 5M12 3l3 5-3 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},16759:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-collab",use:"icon-small-collab-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-collab"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3h10v3l4-1.974V12l-4-2v3H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 6l1 2-1 2M7.5 6l1 2-1 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},948286:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-complete",use:"icon-small-complete-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-complete"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8l2 3 4-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},10176:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-content-collection",use:"icon-small-content-collection-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-collection"><path d="M14 15H2V9h3v1h6V9h3v6zM13 9V4H3v5M4 4V1h8v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},507860:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-content-market",use:"icon-small-content-market-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-market"><path d="M2 2h13l-1 8H4" stroke-width="2" stroke-linejoin="round" /><circle cx="13" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="4" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 6h11.5M7 2v8M11 2v8M1 1h1l2 12h9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},239707:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-conversation",use:"icon-small-conversation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-conversation"><path d="M15 4.5C15 6.433 13.433 8 11.5 8c-.4457 0-.872-.0833-1.264-.2352L8 8l.25-2.1985A3.4905 3.4905 0 018 4.5C8 2.567 9.567 1 11.5 1S15 2.567 15 4.5zM7 15c0-2-2-4-4-4M3 11c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},722113:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-course_catalog_default",use:"icon-small-course_catalog_default-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-course_catalog_default"><path d="M5 14.5c-2 1.0446-4 0-4 0v-13c2-1 4 0 4 0v13zM15 14.5c-2 1.125-4 0-4 0v-13s2-1 4 0v13zM8 11v1m0-7v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 14.5357c-3 1.0447-6 0-6 0V1.5s3-1 6 0v13.0357z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},655360:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-discussion",use:"icon-small-discussion-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-discussion"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="5" cy="8" r=".5" /><circle cx="8" cy="8" r=".5" /><circle cx="11" cy="8" r=".5" /></symbol>'});s.add(r),e.exports=r},880181:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-download",use:"icon-small-download-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-download"><path d="M4 4H1v11h14V4h-3M8 1v11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 10l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},801166:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-draw",use:"icon-small-draw-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-draw"><path d="M15 4l-3-3L2 11l-1 4 4-1L15 4zM12 6l-2-2M6 12l-2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},219624:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-duplicate",use:"icon-small-duplicate-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-duplicate"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 4h11v11H1z" /><path d="M12 12h3V1H4v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},735296:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-feedback",use:"icon-small-feedback-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-feedback"><path d="M1 1h14v12h-4l-3 2-3-2H1V1zM4 4h8M4 7h8M4 10h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},262817:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-filter-options",use:"icon-small-filter-options-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-filter-options"><path d="M1 1h8M1 5h8M1 9h8M1 13h5M13 1v14M11 13l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},862744:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-import-export",use:"icon-small-import-export-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-import-export"><path d="M15 9.091V15H1V1h5.909" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 7v3h3M12 1h3v3M6 10l9-9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},692330:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-information",use:"icon-small-information-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-information"><circle cx="8" cy="8" r="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M7 7h1v4M6 11h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="4" r=".5" /></symbol>'});s.add(r),e.exports=r},712354:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-invisible",use:"icon-small-invisible-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-invisible"><path d="M8 3C4.6406 3 1 8 1 8s3.6406 5 7 5 7-5 7-5-3.6406-5-7-5zM1 13L15 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="1" stroke-width="2" /></symbol>'});s.add(r),e.exports=r},272058:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-lock-circle",use:"icon-small-lock-circle-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock-circle"><g stroke-width="2"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8h6v3H5V8z" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 9h4v1H6z" /><path d="M6 8V5.7143C6 4.857 6.6667 4 8 4m0 0c.3333 0-.3333 0 0 0zm0 0c1.3333 0 2 .8571 2 1.7143V8" stroke-linecap="round" stroke-linejoin="round" /></g></symbol>'});s.add(r),e.exports=r},651560:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-lock",use:"icon-small-lock-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock"><path d="M3 8h10v7H3V8zM5 8V4c0-1.5 1-3 3-3m0 0c.5 0-.5 0 0 0zm0 0c2 0 3 1.5 3 3v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},826679:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-main-menu",use:"icon-small-main-menu-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-main-menu"><path d="M1 3h14M15 8H1M1 13h14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},501535:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-menu",use:"icon-small-menu-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-menu"><circle cx="2" cy="8" r="1" stroke-width="2" /><circle cx="8" cy="8" r="1" stroke-width="2" /><circle cx="14" cy="8" r="1" stroke-width="2" /></symbol>'});s.add(r),e.exports=r},756184:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-messages",use:"icon-small-messages-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-messages"><path d="M1 3h14v10H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 3l7 7 7-7M1 13l5-5M15 13l-5-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},205654:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-move-item-up-down",use:"icon-small-move-item-up-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-move-item-up-down"><path d="M5 11V3M7 4L5 2 3 4M11 5v8M9 12l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},537125:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-peer-review",use:"icon-small-peer-review-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-peer-review"><path d="M6.5 10C7.8807 10 9 8.8807 9 7.5S7.8807 5 6.5 5 4 6.1193 4 7.5 5.1193 10 6.5 10zM6.5 10C3.2288 10 1 12.5 1 15M11.5 6C12.8807 6 14 4.8807 14 3.5S12.8807 1 11.5 1 9 2.1193 9 3.5 10.1193 6 11.5 6zM12 6c.7226 0 1.4451.464 2 1.0569M10 13l2 2 3-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},777230:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-post",use:"icon-small-post-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-post"><path d="M9 15L1 9l14-8-6 14zM5 12L15 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 12v3l1.5-1.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},275071:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-question-analysis",use:"icon-small-question-analysis-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-question-analysis"><path d="M11 1H5l1 2v4l-5 8h14l-5-8V3l1-2zM4.125 10h7.75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},655511:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-replies",use:"icon-small-replies-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-replies"><path d="M1 5h14v10H1v-4" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 3L1 5l2 2" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},106257:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-rubric",use:"icon-small-rubric-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-rubric"><path d="M11 12h4v3h-4v-3zM4 12h4v3H4v-3zM1 12v3M1 5v3M11 5h4v3h-4V5zM4 5h4v3H4V5zM8 1H4M15 1h-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},12537:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-search",use:"icon-small-search-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-search"><circle cx="6.5" cy="6.5" r="5.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M15 15l-4.5-4.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},760943:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-started",use:"icon-small-started-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-started"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 8H4s0 4 4 4 4-4 4-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10.8247 9a3.594 3.594 0 01-.2191.5528c-.1907.3814-.461.7323-.8478.9901C9.3773 10.7966 8.825 11 8 11c-.825 0-1.3773-.2034-1.7578-.4571-.3868-.2578-.657-.6087-.8478-.9901A3.5857 3.5857 0 015.1754 9h5.6493z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},60117:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-trash",use:"icon-small-trash-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-trash"><path d="M4 4l2-3h4l2 3M2 5l1 10h10l1-10M1 4h14M8 7v5M11 7l-.5 5M5 7l.5 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},296457:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-undo",use:"icon-small-undo-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-undo"><path d="M3 3L1 5l2 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 5h11c2 0 3 2.0474 3 4s-1 4-3 4H4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},507168:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-upload",use:"icon-small-upload-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-upload"><path d="M14 5h1v9H1V5h1M6 4l2-2 2 2M8 10V2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},200530:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-visible",use:"icon-small-visible-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-visible"><path d="M8 3C4.6406 3 1 8 1 8s3.6406 5 7 5 7-5 7-5-3.6406-5-7-5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="1" stroke-width="2" /></symbol>'});s.add(r),e.exports=r},570188:function(e){e.exports='<svg viewBox="0 0 240 186" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M238.484 37.43a67.869 67.869 0 0 1-1.648 16.812c-62.272 2.694-124.644 2.145-186.966 1.596-15.93-.15-32.56 1.048-48.34-.549-4.494-16.412 15.381-13.818 25.668-14.217a5941.954 5941.954 0 0 1 51.885-1.596 5869.139 5869.139 0 0 1 102.722-1.796c4.644-.05 56.679-.55 56.679-.25ZM237.735 75.892c1.748-6.036 2.297-12.421 1.698-18.657-11.635-.898-23.271.748-34.856 2.145-59.027 6.984-118.702 6.635-178.128 4.19-5.842-.249-18.277-2.843-23.27.749C-.967 67.262-.118 75.643.581 79.933c15.23 1.447 31.56-.399 46.891-.698 15.33-.25 30.662-.549 45.993-.799l93.033-1.646c4.694-.1 50.587 1.297 51.236-.898ZM.382 130.218c79.55-7.583 159.451-.399 238.952-8.979-.749-9.628-1.449-19.256-2.198-28.884-.05-.749-2.097-3.393-3.046-3.193-31.56 5.537-211.435 5.886-222.621 4.989-6.442-.499-5.494 1.646-7.142 11.922-.4 2.295-3.246 24.045-3.945 24.145Z" fill="#009A8F"/><path d="M204.327 32.392c2.447.698 5.144.748 7.391-.35 2.297-1.097 4.045-3.442 3.895-5.986-3.496 0-6.642-1.796-9.688-3.542-.849-.499-1.698-.997-2.097-1.895-.3-.799-.2-1.846-.799-2.445-.3-.3-.7-.399-1.099-.499-.949-.25-2.097-.299-2.846.3-.7.548-.899 1.496-.999 2.344-.599 5.538.549 10.526 6.242 12.073ZM147.298 165.537c-2.447.699-5.143.748-7.39-.349-2.298-1.098-4.045-3.442-3.896-5.986 3.496 0 6.642-1.796 9.688-3.542.849-.499 1.698-.998 2.098-1.896.299-.798.199-1.846.799-2.444.299-.3.699-.399 1.098-.499.949-.25 2.098-.299 2.847.299.699.549.899 1.497.998 2.345.6 5.487-.549 10.526-6.242 12.072Z" fill="#F6AC3D"/><path d="M16.262 158.703c-.2 1.646-.5 3.342-1.448 4.639-.949 1.347-2.897 2.095-4.295 1.297-.849-.499-1.448-1.446-2.447-1.646-1.648-.299-2.596 2.145-1.648 3.492.95 1.347 2.747 1.746 4.395 1.796 2.946.15 6.242-.399 8.14-2.694.899-1.097 1.348-2.444 1.797-3.791 3.246-10.027 5.494-20.653 4.345-31.129-7.99-1.197-6.891 4.091-7.191 9.977-.35 6.136-.849 12.122-1.648 18.059ZM203.228 155.859c.5 1.148 1.099 2.295 2.098 3.093 1.298 1.098 3.046 1.447 4.744 1.497 1.748.05 3.545-.25 4.894-1.347 1.348-1.098 1.997-3.143 1.148-4.59l-6.442 1.647c-.549.149-1.148.299-1.648.049-.998-.399-1.148-1.696-1.148-2.793.05-6.236.1-12.521.1-18.757 0-2.445.349-11.574-4.744-7.782-2.497 1.895-1.748 10.226-1.798 12.87-.05 5.537.549 11.075 2.796 16.113Z" stroke="#009A8F" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M103.353 104.726c43.795-.548 87.641-.598 131.436-.199M4.477 106.772c8.59-.25 17.228-.499 25.867-.699" stroke="#000" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M189.296 79.284c-.2 3.443-.35 6.935-.55 10.377 0 .349 0 .748.25.997.2.2.549.2.849.2h4.195c.349 0 .699 0 .999-.2.449-.299.499-.897.549-1.446.15-3.592.349-7.184.499-10.776-2.746-.099-5.493.05-8.19.499M20.357 82.278c-.15 2.843-.35 5.737-.5 8.58 0 .399 0 .798.25 1.048.2.199.55.249.9.249.998 0 1.997-.2 2.945-.549.45-3.392.65-6.784.55-10.176-2.148-.2-4.295-.1-6.442.249" stroke="#009A8F" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M1.53 55.29c.3-2.196-2.496-4.29 2.048-10.427 1.548-2.095 5.293-2.294 13.084-2.943 7.84-.648 29.862-1.247 29.862-1.247M175.563 46.709c6.292.1 12.584-.948 18.527-3.043.449-.15.998-.599.749-.998-.1-.15-.25-.2-.4-.25-1.897-.797-4.194-.698-5.992.3-.3.15-.599.4-.599.699 0 .249.199.399.349.548 3.546 3.243 8.989 3.043 13.783 2.644 3.396-.3 6.891-.598 9.937-2.095M164.027 64.369c24.719-5.637 50.088-8.381 75.456-8.231-1.398 6.934-2.796 13.868-4.195 20.852a189.606 189.606 0 0 1-24.969 2.245" stroke="#000" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M202.18 32.192a16.908 16.908 0 0 0-.55 4.19M206.624 33.14c-.1 1.297-.05 2.544.05 3.841M200.082 22.065c-2.047-.15-2.447.749-3.995.25M149.446 165.338a16.95 16.95 0 0 1 .549 4.19M145.001 166.286c.1 1.297.05 2.544-.05 3.841M151.543 155.211c2.197 1.147 2.247-.399 3.645.349" stroke="#A67243" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M162.03 167.034c-.05.05-.05.1 0 .149h.05c.35-.099.15-.399-.05-.149Z" stroke="#F6AC3D" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M150.744 152.667c-.05.049-.05.099 0 .149h.05c.35-.05.15-.349-.05-.149Z" stroke="#000" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M162.729 169.378s0 .05.05.05h.05c.749-.399-.4-.648-.1-.05ZM165.476 169.129s0 .05 0 0c.15.15.2-.1.05-.2-.05.05-.1.15-.05.2Z" stroke="#F6AC3D" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M200.482 19.172c-.05.05-.05.1 0 .15h.05c.35-.05.15-.35-.05-.15Z" stroke="#000" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M63.139 31.835h9.666c1.961.057 4.946 1.024 7.334 1.905 2.303.853 7.648 19.7 7.932 24.989l-1.706 26.666 6.71 22.259s-6.71 4.122-25.757 4.122-26.865-4.975-26.865-4.975l8.159-23.453-.682-27.462c.312-2.587 3.468-21.236 5.97-22.004 3.155-.966 7.363-2.104 9.239-2.047Z" fill="#DA80A0"/><path d="m50.26 43.264-2.387 12.622 1.82 47.021" stroke="#000" stroke-width=".569" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M77.268 34.053c2.757-1.109 5.856.34 6.794 3.155l9.61 29.566s2.074 8.614-3.839 10.291c-5.998 1.677-9.267-8.102-9.267-8.102l-6.397-29.082c-.54-2.417.768-4.89 3.099-5.828Z" fill="#DA80A0"/><path d="m56.401 81.5 28.6-14.669s5.287-2.275 7.732 2.018c3.269 5.8-2.445 8.728-2.445 8.728L61.15 89.403 56.401 81.5Z" fill="#DA80A0"/><path d="m49.55 85.423-10.433 3.753s-.626 1.99 2.445 1.648l8.585-3.07-.597-2.331Z" fill="#A67243"/><path d="M61.178 84.485 56.401 81.5s-6.795 3.411-6.795 3.525c0 .142-7.818 6.396-7.818 6.396l-4.946 7.392a.868.868 0 0 0 .255 1.194l.313.199a.835.835 0 0 0 1.166-.256l4.037-6.169 1.222-.995-3.184 8.045a.859.859 0 0 0 .597 1.081l.17.056a.87.87 0 0 0 1.024-.511l2.644-6.937.625-1.052-2.16 7.449a.858.858 0 0 0 .597 1.08l.17.057a.871.871 0 0 0 1.024-.512l2.644-6.937.568-.085-2.018 6.112a.862.862 0 0 0 .483.967c.426.199.938 0 1.109-.455l2.473-5.828.142-.369c1.763-.342 4.89-.313 7.022-4.492l4.748-1.592-1.337-4.378Z" fill="#A67243"/><path d="M85 66.859 49.55 85.423l-7.76 5.998-4.35 6.482" stroke="#000" stroke-width=".569" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M56.657 34.45c-2.643-1.364-5.884-.198-7.05 2.502L37.241 65.495s-2.9 8.386 2.843 10.603c5.827 2.246 10.006-7.164 10.006-7.164l9.126-28.343a5.21 5.21 0 0 0-2.559-6.14Z" fill="#DA80A0"/><path d="M72.18 85.707 46.45 66.433s-4.832-3.127-7.96.682c-4.207 5.174.967 9.012.967 9.012l26.723 16.545 5.998-6.965Z" fill="#DA80A0"/><path d="m78.263 90.711 9.637 5.458s.285 2.075-2.7 1.222l-7.932-4.463.995-2.217Z" fill="#A67243"/><path d="m64.902 91.905 4.406 2.388c1.393 4.463 4.492 5.003 6.169 5.6l.085.398 1.45 6.169a.848.848 0 0 0 1.024.626c.398-.086.653-.455.625-.882l-.91-6.425.54.171 1.422 7.278c.085.426.483.71.91.682l.17-.029a.866.866 0 0 0 .768-.966l-.882-7.704.455 1.137 1.422 7.278c.085.426.483.71.91.682l.17-.028a.868.868 0 0 0 .768-.967L82.64 98.87l1.052 1.194 2.928 6.766c.17.426.682.625 1.109.455l.34-.143c.456-.17.655-.682.456-1.137l-3.668-8.102s-6.652-7.477-6.623-7.619c.028-.142-6.084-4.634-6.084-4.634l-5.203 2.133-2.046 4.122Z" fill="#A67243"/><path d="m46.537 80.874 18.365 11.031 2.075-4.094M56.43 49.177l-6.368 19.729 28.23 21.435 6.623 7.591 2.218 4.975" stroke="#000" stroke-width=".569" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M38.157 99.863c0-7.506 6.681-9.695 11.457-9.695l19.019-9.949c4.776 0 22.743 11.143 22.743 19.644 0 8.5-2.673 15.976-26.183 15.976-23.51 0-27.035-8.471-27.035-15.976Z" fill="#F0E7D9"/><path d="m75.314 148.959 1.478 14.072-3.374 2.047-5.098-1.621-.966-15.437c.028.029 3.724-.483 7.96.939Z" fill="#A67243"/><path d="m68.274 163.363-.227 7.051s-1.421 1.364-.825 3.638c0 0 1.678 6.795 6.568 9.495 4.89 2.701 11.57 4.293 8.556-4.434l-5.6-16.148c-.199-1.393-1.848-1.336-8.472.398Z" fill="#009A8F"/><path d="M80.442 177.293s-2.473 1.734-5.345-1.336l-3.866-13.333s4.065-1.393 4.264-.625l4.947 15.294Z" fill="#84CCAA"/><path d="M75.408 161.728c.149-.048.31.034.358.183l4.946 15.295a.285.285 0 0 1-.54.175l-4.947-15.295a.284.284 0 0 1 .183-.358ZM68.36 170.432v.011c0 .008 0 .021.002.038l.01.154c.01.136.029.335.06.586.064.504.181 1.216.395 2.046.427 1.664 1.237 3.789 2.766 5.666 1.528 1.875 4.006 3.545 6.297 4.361 1.145.408 2.22.594 3.092.501.863-.092 1.502-.451 1.852-1.118a.285.285 0 1 1 .503.263c-.46.881-1.3 1.315-2.295 1.42-.988.105-2.154-.107-3.343-.531-2.379-.847-4.947-2.574-6.546-4.537-1.598-1.961-2.437-4.171-2.877-5.883a17.371 17.371 0 0 1-.407-2.116 12.866 12.866 0 0 1-.077-.824v-.017l.283-.01-.284.01a.284.284 0 1 1 .568-.02ZM76.71 168.185a.284.284 0 1 0-.155-.547l-2.53.711a.284.284 0 1 0 .154.547l2.53-.711ZM77.418 169.228a.284.284 0 0 1-.197.35l-2.53.711a.284.284 0 1 1-.154-.547l2.53-.711a.285.285 0 0 1 .35.197ZM77.673 171.256a.283.283 0 1 0-.148-.548l-2.53.682a.284.284 0 1 0 .148.549l2.53-.683ZM78.242 172.269a.284.284 0 0 1-.196.351l-2.502.711a.284.284 0 0 1-.155-.547l2.502-.711a.284.284 0 0 1 .35.196ZM78.529 174.354a.284.284 0 1 0-.154-.547l-2.53.711a.283.283 0 1 0 .153.547l2.53-.711Z" fill="#000"/><path d="m76.86 164.017-5.06.256c-.768.028-1.337.682-1.308 1.45.028.767.682 1.336 1.45 1.307l5.572-.284a.56.56 0 0 0 .483-.767l-.597-1.592c-.057-.256-.284-.398-.54-.37Z" fill="#DA80A0"/><path d="m77.275 155.952 5.856-50.915s.768-8.586-6.169-9.922c-11.286-2.161-10.689 9.41-10.689 9.41l.029 53.19 10.973-1.763Z" fill="#F0E7D9"/><path d="m45.464 127.268-9.723 14.726 2.283 3.212h5.563l9.069-13.532c-.029.029-2.7-4.321-7.192-4.406Z" fill="#A67243"/><path d="m43.84 144.996-2.469 6.608s.797 1.802-.62 3.679c0 0-4.133 5.647-9.682 6.288-5.55.64-12.334-.426-6.23-7.354l11.316-12.808c.713-1.213 2.217-.534 7.685 3.587Z" fill="#009A8F"/><path d="M27.292 153.258s1.629 2.544 5.451.795l8.643-10.864s-3.231-2.833-3.707-2.199l-10.387 12.268Z" fill="#84CCAA"/><path d="M37.863 140.773a.284.284 0 0 0-.4.033l-10.388 12.268a.285.285 0 1 0 .434.367l10.387-12.267a.285.285 0 0 0-.033-.401ZM41.075 151.502v.002l-.004.008-.017.035a12.005 12.005 0 0 1-.347.657c-.25.442-.629 1.056-1.141 1.743-1.028 1.376-2.585 3.035-4.712 4.19-2.126 1.153-5.053 1.757-7.482 1.641-1.214-.058-2.279-.294-3.05-.711-.764-.413-1.219-.988-1.288-1.739a.283.283 0 0 0-.31-.256.283.283 0 0 0-.256.309c.091.99.703 1.71 1.584 2.186.874.472 2.032.719 3.294.779 2.522.12 5.554-.502 7.779-1.71 2.223-1.206 3.839-2.932 4.896-4.349a17.31 17.31 0 0 0 1.181-1.802c.13-.23.227-.415.292-.544l.073-.149.02-.04.004-.011.002-.003v-.001l-.259-.118.26.118a.284.284 0 1 0-.518-.235ZM34.205 146.251a.284.284 0 1 1 .35-.448l2.07 1.619a.284.284 0 0 1-.35.448l-2.07-1.619ZM33.154 146.946a.284.284 0 0 0 .049.399l2.07 1.619a.284.284 0 1 0 .35-.448l-2.07-1.618a.285.285 0 0 0-.4.048ZM32.147 148.726a.285.285 0 0 1 .346-.452l2.08 1.593a.284.284 0 1 1-.345.451l-2.081-1.592ZM31.236 149.446a.284.284 0 0 0 .048.399l2.044 1.608a.285.285 0 1 0 .351-.447l-2.044-1.607a.284.284 0 0 0-.399.047ZM30.178 151.266a.284.284 0 1 1 .35-.448l2.07 1.619a.284.284 0 0 1-.35.448l-2.07-1.619Z" fill="#000"/><path d="m35.65 142.338 4.584 2.16c.699.318.976 1.139.658 1.838-.318.699-1.139.977-1.838.659l-5.046-2.381a.56.56 0 0 1-.155-.893l1.157-1.246c.15-.215.414-.26.64-.137Z" fill="#DA80A0"/><path d="m39.55 135.171 20.014-47.163s3.582-7.846 10.263-5.601c10.888 3.696 4.662 13.447 4.662 13.447l-26.296 46.253-8.643-6.936Z" fill="#F0E7D9"/><path d="m54.987 130.111 17.967-31.158s2.132-4.577 5.941.426" stroke="#000" stroke-width=".569" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="m75.526 22.664.284 11.855-4.918 7.988-4.691-7.675-.256-6.596 9.58-5.572Z" fill="#A67243"/><path d="M69.158 3.532c-5.913-.54-11.741 4.776-10.86 13.475.938 8.983 7.25 14.64 10.718 14.64 4.349 0 9.807-8.585 9.41-15.863-.399-7.277-3.071-11.655-9.268-12.252Z" fill="#A67243"/><path d="M63.705 14.413c.215-.227.52-.394.842-.409.322-.015.658.136.796.41M70.44 14.413c.215-.227.521-.394.843-.409.32-.015.658.136.796.41" stroke="#000" stroke-width=".569" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M64.394 18.355c.38 0 .689-.434.689-.97s-.308-.97-.689-.97c-.38 0-.689.434-.689.97s.309.97.689.97ZM71.436 18.355c.38 0 .688-.434.688-.97s-.308-.97-.688-.97c-.38 0-.69.434-.69.97s.31.97.69.97Z" fill="#000"/><path d="M67.697 17.831c.06 2.112-.912 3.456-.897 3.678.015.221.553.886 1.136.782M66.222 24.533s.87 1.125 4.025 0" stroke="#000" stroke-width=".569" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M76.919 16.552s1.563-1.791 2.473-.91c.91.882 1.649 5.004-1.734 5.43 0 0-3.099-.114-.74-4.52ZM59.833 16.552s-1.563-1.791-2.473-.91c-.91.882-1.65 5.004 1.734 5.43 0 0 3.099-.114.739-4.52Z" fill="#A67243"/><path d="M70.465 31.676s4.691-2.928 5.885-6.766M79.221 17.263s-1.308-.882-1.109 2.103c0 0 .54-1.194.626-.824M57.616 17.263s1.307-.882 1.108 2.103c0 0-.54-1.194-.625-.824M69.954 43.843l.17 9.95" stroke="#000" stroke-width=".569" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M77.26 34.69c.312-.995-.711-1.65-.597-2.73.312-2.928 1.904-5.401 2.956-8.073 2.132-5.459 2.53-13.078-.597-17.825-3.155-4.776-9.95-6.112-14.64-3.525-4.009 2.217-7.96 4.32-9.95 15.266-1.251 6.823-.683 9.95 1.336 13.22 2.018 3.809 7.277 8.272 7.76 13.616 0 0 2.161-1.137 3.298-3.383 0 0 4.634 3.355 5.373 5.43-.028.029 5.487-8.841 5.06-11.996ZM67.85 9.985c7.96.768 9.523 3.781 9.523 7.05 0 4.776-2.615 9.61-3.582 11.827-.739 1.705-1.108 3.809-.625 5.6-.938-1.08-2.7-1.592-3.781-2.331 0 0-8.5-3.44-10.149-10.69-.74-3.268-.142-12.309 8.614-11.456Z" fill="#DA80A0"/><path d="M77.402 13.766c-6.738-6.197-15.238-4.918-17.796.74-2.104 4.633-1.934 13.531 13.56 19.132 2.16.796 1.791 7.277-2.502 4.974M80.415 11.435c.91-12.65-12.992-12.281-16.488-9.012" stroke="#000" stroke-width=".569" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M66.713 40.432a33.83 33.83 0 0 1-3.213 4.236c-.511-8.7-10.632-11.144-10.206-23.312.143-4.179 3.554-17.568 16.262-16.772M67.85 42.166c1.45.91 2.729 2.16 3.752 3.639.171.256.455.569.711.426a.865.865 0 0 0 .228-.227c1.051-1.507 1.734-3.326 2.388-5.089l2.302-6.225" stroke="#000" stroke-width=".569" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg>'},128895:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" id="Layer_1" x="0" y="0" style="enable-background:new 0 0 200 200" version="1.1" viewBox="0 0 200 200"><style>@font-face{font-family:&quot;OpenSans-Semibold&quot;;src:url(data:;base64,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bGRlaW1hY3JvbmlicmV2ZWlvZ29uZWtpakpjaXJjdW1mbGV4amNpcmN1bWZsZXhLY29tbWFhY2NlbnRrY29tbWFhY2NlbnRrZ3JlZW5sYW5kaWNMYWN1dGVsYWN1dGVMY29tbWFhY2NlbnRsY29tbWFhY2NlbnRMY2Fyb25sY2Fyb25MZG90bGRvdE5hY3V0ZW5hY3V0ZU5jb21tYWFjY2VudG5jb21tYWFjY2VudE5jYXJvbm5jYXJvbm5hcG9zdHJvcGhlRW5nZW5nT21hY3Jvbm9tYWNyb25PYnJldmVvYnJldmVPaHVuZ2FydW1sYXV0b2h1bmdhcnVtbGF1dFJhY3V0ZXJhY3V0ZVJjb21tYWFjY2VudHJjb21tYWFjY2VudFJjYXJvbnJjYXJvblNhY3V0ZXNhY3V0ZVNjaXJjdW1mbGV4c2NpcmN1bWZsZXhTY2VkaWxsYXNjZWRpbGxhVGNvbW1hYWNjZW50dGNvbW1hYWNjZW50VGNhcm9udGNhcm9uVGJhcnRiYXJVdGlsZGV1dGlsZGVVbWFjcm9udW1hY3JvblVicmV2ZXVicmV2ZVVyaW5ndXJpbmdVaHVuZ2FydW1sYXV0dWh1bmdhcnVtbGF1dFVvZ29uZWt1b2dvbmVrV2NpcmN1bWZsZXh3Y2lyY3VtZmxleFljaXJjdW1mbGV4eWNpcmN1bWZsZXhaYWN1dGV6YWN1dGVaZG90YWNjZW50emRvdGFjY2VudGxvbmdzQXJpbmdhY3V0ZWFyaW5nYWN1dGVBRWFjdXRlYWVhY3V0ZU9zbGFzaGFjdXRlb3NsYXNoYWN1dGVTY29tbWFhY2NlbnRzY29tbWFhY2NlbnR0b25vc2RpZXJlc2lzdG9ub3NBbHBoYXRvbm9zYW5vdGVsZWlhRXBzaWxvbnRvbm9zRXRhdG9ub3NPbWljcm9udG9ub3NVcHNpbG9udG9ub3NPbWVnYXRvbm9zaW90YWRpZXJlc2lzdG9ub3NBbHBoYUJldGFHYW1tYXVuaTAzOTRFcHNpbG9uWmV0YUV0YVRoZXRhS2FwcGFMYW1iZGFNdU51WGlPbWljcm9uUGlSaG9TaWdtYVRhdVVwc2lsb25QaGlDaGlQc2l1bmkwM0E5VXBzaWxvbmRpZXJlc2lzYWxwaGF0b25vc2Vwc2lsb250b25vc2V0YXRvbm9zaW90YXRvbm9zdXBzaWxvbmRpZXJlc2lzdG9ub3NhbHBoYWJldGFnYW1tYWRlbHRhZXBzaWxvbnpldGFldGF0aGV0YWlvdGFrYXBwYWxhbWJkYXVuaTAzQkNudXhpb21pY3JvbnBpcmhvc2lnbWExc2lnbWF0YXV1cHNpbG9ucGhpY2hpcHNpb21lZ2Fpb3RhZGllcmVzaXN1cHNpbG9uZGllcmVzaXNvbWljcm9udG9ub3N1cHNpbG9udG9ub3NvbWVnYXRvbm9zYWZpaTEwMDIzYWZpaTEwMDUxYWZpaTEwMDUyYWZpaTEwMDUzYWZpaTEwMDU0YWZpaTEwMDU3YWZpaTEwMDU4YWZpaTEwMDU5YWZpaTEwMDYwYWZpaTEwMDYxYWZpaTEwMDYyYWZpaTEwMTQ1YWZpaTEwMDE3YWZpaTEwMDE4YWZpaTEwMDE5YWZpaTEwMDIwYWZpaTEwMDIxYWZpaTEwMDIyYWZpaTEwMDI0YWZpaTEwMDI1YWZpaTEwMDI2YWZpaTEwMDI3YWZpaTEwMDI4YWZpaTEwMDI5YWZpaTEwMDMwYWZpaTEwMDMxYWZpaTEwMDMyYWZpaTEwMDMzYWZpaTEwMDM0YWZpaTEwMDM1YWZpaTEwMDM2YWZpaTEwMDM3YWZpaTEwMDM4YWZpaTEwMDM5YWZpaTEwMDQwYWZpaTEwMDQxYWZpaTEwMDQyYWZpaTEwMDQzYWZpaTEwMDQ0YWZpaTEwMDQ1YWZpaTEwMDQ2YWZpaTEwMDQ3YWZpaTEwMDQ4YWZpaTEwMDQ5YWZpaTEwMDY1YWZpaTEwMDY2YWZpaTEwMDY3YWZpaTEwMDY4YWZpaTEwMDY5YWZpaTEwMDcwYWZpaTEwMDcyYWZpaTEwMDczYWZpaTEwMDc0YWZpaTEwMDc1YWZpaTEwMDc2YWZpaTEwMDc3YWZpaTEwMDc4YWZpaTEwMDc5YWZpaTEwMDgwYWZpaTEwMDgxYWZpaTEwMDgyYWZpaTEwMDgzYWZpaTEwMDg0YWZpaTEwMDg1YWZpaTEwMDg2YWZpaTEwMDg3YWZpaTEwMDg4YWZpaTEwMDg5YWZpaTEwMDkwYWZpaTEwMDkxYWZpaTEwMDkyYWZpaTEwMDkzYWZpaTEwMDk0YWZpaTEwMDk1YWZpaTEwMDk2YWZpaTEwMDk3YWZpaTEwMDcxYWZpaTEwMDk5YWZpaTEwMTAwYWZpaTEwMTAxYWZpaTEwMTAyYWZpaTEwMTAzYWZpaTEwMTA0YWZpaTEwMTA1YWZpaTEwMTA2YWZpaTEwMTA3YWZpaTEwMTA4YWZpaTEwMTA5YWZpaTEwMTEwYWZpaTEwMTkzYWZpaTEwMDUwYWZpaTEwMDk4V2dyYXZld2dyYXZlV2FjdXRld2FjdXRlV2RpZXJlc2lzd2RpZXJlc2lzWWdyYXZleWdyYXZlYWZpaTAwMjA4dW5kZXJzY29yZWRibHF1b3RlcmV2ZXJzZWRtaW51dGVzZWNvbmRleGNsYW1kYmxmcmFuY2FmaWkwODk0MXBlc2V0YUV1cm9hZmlpNjEyNDhhZmlpNjEyODlhZmlpNjEzNTJPbWVnYWVzdGltYXRlZHBhcnRpYWxkaWZmRGVsdGFwcm9kdWN0c3VtbWF0aW9ucmFkaWNhbGluZmluaXR5aW50ZWdyYWxhcHByb3hlcXVhbG5vdGVxdWFsbGVzc2VxdWFsZ3JlYXRlcmVxdWFsbG96ZW5nZXVuaUZCMDF1bmlGQjAyZG90bGVzc2p1bmkyMDAwdW5pMjAwMXVuaTIwMDJ1bmkyMDAzdW5pMjAwNHVuaTIwMDV1bmkyMDA2dW5pMjAwN3VuaTIwMDh1bmkyMDA5dW5pMjAwQXVuaTIwMEJ1bmlGRUZGdW5pRkZGQ3VuaUZGRkR1bmkwMUYwdW5pMDJCQ3VuaTAzRDF1bmkwM0QydW5pMDNENnVuaTFFM0V1bmkxRTNGdW5pMUUwMHVuaTFFMDF1bmkxRjREdW5pMDJGM3VuaUZCMDN1bmlGQjA0T2hvcm5vaG9yblVob3JudWhvcm51bmkwMzAwdW5pMDMwMXVuaTAzMDNob29rZG90YmVsb3d1bmkwNDAwdW5pMDQwRHVuaTA0NTB1bmkwNDVEdW5pMDQ2MHVuaTA0NjF1bmkwNDYydW5pMDQ2M3VuaTA0NjR1bmkwNDY1dW5pMDQ2NnVuaTA0Njd1bmkwNDY4dW5pMDQ2OXVuaTA0NkF1bmkwNDZCdW5pMDQ2Q3VuaTA0NkR1bmkwNDZFdW5pMDQ2RnVuaTA0NzB1bmkwNDcxdW5pMDQ3MnVuaTA0NzN1bmkwNDc0dW5pMDQ3NXVuaTA0NzZ1bmkwNDc3dW5pMDQ3OHVuaTA0Nzl1bmkwNDdBdW5pMDQ3QnVuaTA0N0N1bmkwNDdEdW5pMDQ3RXVuaTA0N0Z1bmkwNDgwdW5pMDQ4MXVuaTA0ODJ1bmkwNDgzdW5pMDQ4NHVuaTA0ODV1bmkwNDg2dW5pMDQ4OHVuaTA0ODl1bmkwNDhBdW5pMDQ4QnVuaTA0OEN1bmkwNDhEdW5pMDQ4RXVuaTA0OEZ1bmkwNDkydW5pMDQ5M3VuaTA0OTR1bmkwNDk1dW5pMDQ5NnVuaTA0OTd1bmkwNDk4dW5pMDQ5OXVuaTA0OUF1bmkwNDlCdW5pMDQ5Q3VuaTA0OUR1bmkwNDlFdW5pMDQ5RnVuaTA0QTB1bmkwNEExdW5pMDRBMnVuaTA0QTN1bmkwNEE0dW5pMDRBNXVuaTA0QTZ1bmkwNEE3dW5pMDRBOHVuaTA0QTl1bmkwNEFBdW5pMDRBQnVuaTA0QUN1bmkwNEFEdW5pMDRBRXVuaTA0QUZ1bmkwNEIwdW5pMDRCMXVuaTA0QjJ1bmkwNEIzdW5pMDRCNHVuaTA0QjV1bmkwNEI2dW5pMDRCN3VuaTA0Qjh1bmkwNEI5dW5pMDRCQXVuaTA0QkJ1bmkwNEJDdW5pMDRCRHVuaTA0QkV1bmkwNEJGdW5pMDRDMXVuaTA0QzJ1bmkwNEMzdW5pMDRDNHVuaTA0QzV1bmkwNEM2dW5pMDRDN3VuaTA0Qzh1bmkwNEM5dW5pMDRDQXVuaTA0Q0J1bmkwNENDdW5pMDRDRHVuaTA0Q0V1bmkwNEQwdW5pMDREMXVuaTA0RDJ1bmkwNEQzdW5pMDRENHVuaTA0RDV1bmkwNEQ2dW5pMDREN3VuaTA0RDh1bmkwNEQ5dW5pMDREQXVuaTA0REJ1bmkwNERDdW5pMDRERHVuaTA0REV1bmkwNERGdW5pMDRFMHVuaTA0RTF1bmkwNEUydW5pMDRFM3VuaTA0RTR1bmkwNEU1dW5pMDRFNnVuaTA0RTd1bmkwNEU4dW5pMDRFOXVuaTA0RUF1bmkwNEVCdW5pMDRFQ3VuaTA0RUR1bmkwNEVFdW5pMDRFRnVuaTA0RjB1bmkwNEYxdW5pMDRGMnVuaTA0RjN1bmkwNEY0dW5pMDRGNXVuaTA0RjZ1bmkwNEY3dW5pMDRGOHVuaTA0Rjl1bmkwNEZBdW5pMDRGQnVuaTA0RkN1bmkwNEZEdW5pMDRGRXVuaTA0RkZ1bmkwNTAwdW5pMDUwMXVuaTA1MDJ1bmkwNTAzdW5pMDUwNHVuaTA1MDV1bmkwNTA2dW5pMDUwN3VuaTA1MDh1bmkwNTA5dW5pMDUwQXVuaTA1MEJ1bmkwNTBDdW5pMDUwRHVuaTA1MEV1bmkwNTBGdW5pMDUxMHVuaTA1MTF1bmkwNTEydW5pMDUxM3VuaTFFQTB1bmkxRUExdW5pMUVBMnVuaTFFQTN1bmkxRUE0dW5pMUVBNXVuaTFFQTZ1bmkxRUE3dW5pMUVBOHVuaTFFQTl1bmkxRUFBdW5pMUVBQnVuaTFFQUN1bmkxRUFEdW5pMUVBRXVuaTFFQUZ1bmkxRUIwdW5pMUVCMXVuaTFFQjJ1bmkxRUIzdW5pMUVCNHVuaTFFQjV1bmkxRUI2dW5pMUVCN3VuaTFFQjh1bmkxRUI5dW5pMUVCQXVuaTFFQkJ1bmkxRUJDdW5pMUVCRHVuaTFFQkV1bmkxRUJGdW5pMUVDMHVuaTFFQzF1bmkxRUMydW5pMUVDM3VuaTFFQzR1bmkxRUM1dW5pMUVDNnVuaTFFQzd1bmkxRUM5dW5pMUVDQnVuaTFFQ0N1bmkxRUNEdW5pMUVDRXVuaTFFQ0Z1bmkxRUQwdW5pMUVEMXVuaTFFRDJ1bmkxRUQzdW5pMUVENHVuaTFFRDV1bmkxRUQ2dW5pMUVEN3VuaTFFRDh1bmkxRUQ5dW5pMUVEQXVuaTFFREJ1bmkxRURDdW5pMUVERHVuaTFFREV1bmkxRURGdW5pMUVFMHVuaTFFRTF1bmkxRUUydW5pMUVFM3VuaTFFRTR1bmkxRUU1dW5pMUVFNnVuaTFFRTd1bmkxRUU4dW5pMUVFOXVuaTFFRUF1bmkxRUVCdW5pMUVFQ3VuaTFFRUR1bmkxRUVFdW5pMUVFRnVuaTFFRjB1bmkxRUYxdW5pMUVGNHVuaTFFRjV1bmkxRUY2dW5pMUVGN3VuaTFFRjh1bmkxRUY5dW5pMjBBQnVuaTAzMEZ1bmkyMTIwVGNlZGlsbGF0Y2VkaWxsYUl0aWxkZUltYWNyb25JYnJldmVJb2dvbmVrSWRvdGFjY2VudElKSW90YXRvbm9zSW90YUlvdGFkaWVyZXNpc2FmaWkxMDA1NWFmaWkxMDA1NnVuaTA0QzB1bmkwNENGdW5pMUVDOHVuaTFFQ0FPcGVuIFNhbnMgaXMgYSB0cmFkZW1h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)}</style><circle cx="99.5" cy="99.5" r="99.5" style="fill:#e3f4fc"/><path d="M51.74 40.724h95.52v117.282H51.74z" style="fill:#d2edfa"/><path d="M51.74 38.606h95.52v115.42H51.74z" style="fill:#fff"/><path d="M93.928 75.222h42.188v2.388H93.928zM93.928 80.794h42.188v2.388H93.928zM93.928 86.366h20.696v2.388H93.928z" style="fill:#d2edfa"/><path d="m57.61 97.358 2.165-8.013-8.023 2.13z" style="fill:#c26fd2"/><path d="M79.6 77.61v14.328H65.272V77.61H79.6m2.388-2.388H62.884v19.104h19.104V75.222z" style="fill:#d2edfa"/><text style="fill:#a8bfcc;font-family:&quot;OpenSans-Semibold&quot;;font-size:23.3456" transform="translate(93.928 30.646)">Abc</text><path d="M62.884 49.75h73.232v14.328H62.884zM133.728 107.858v30.248H65.272v-30.248h68.456m2.388-2.388H62.884v35.024h73.232V105.47zM86.764 75.222h2.388v2.388h-2.388zM86.764 80.794h2.388v2.388h-2.388zM86.764 86.366h2.388v2.388h-2.388z" style="fill:#d2edfa"/><path d="M34.394 118.206h35.024v2.388H34.394zM34.394 124.574h34.228v2.388H34.394zM34.394 130.942h34.228v2.388H34.394zM34.394 137.31h19.9v2.388h-19.9z" style="fill:#aec6d6"/><path d="M142.447 110.126h-.001" style="fill:#c7bcac"/><defs><path id="SVGID_1_" d="M100.296 132.534h30.248v29.452h-30.248z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><g style="clip-path:url(#SVGID_2_)"><path d="M129.748 162.782h-28.656a1.592 1.592 0 0 1-1.592-1.592v-27.86c0-.879.713-1.592 1.592-1.592h28.656c.879 0 1.592.713 1.592 1.592v27.86c0 .879-.713 1.592-1.592 1.592z" style="fill:#36d7fb"/><circle cx="120.668" cy="147.315" r="2.841" style="fill:#fee132"/><path d="M120.669 145.611c.94.001 1.704.766 1.704 1.706s-.766 1.704-1.706 1.704a1.708 1.708 0 0 1-1.704-1.706 1.706 1.706 0 0 1 1.706-1.704m.001-1.137a2.841 2.841 0 1 0-.004 5.682 2.841 2.841 0 0 0 .004-5.682z" style="fill:#fefa78"/><g style="opacity:.2"><path d="m131.308 160.029.002-4.233-5.679-5.686-5.686 5.679-10.222-10.235-10.236 11.358-.001 3.096" style="fill:#303030"/></g><path d="m119.975 158.238-10.222-10.235-10.236 11.358-.001 1.817a1.596 1.596 0 0 0 1.591 1.593l27.957.018a2.278 2.278 0 0 0 2.274-2.271l.001-2.273-5.679-5.686-5.685 5.679z" style="fill:#44e17d"/><path d="m109.812 150.315 9.036 9.048 1.125 1.126 1.126-1.125 4.56-4.554 4.088 4.093-.002 2.295-28.638-.019.001-1.207 8.704-9.657m-.059-2.313L99.517 159.36l-.001 1.818a1.596 1.596 0 0 0 1.591 1.593l28.638.019h.001c.875 0 1.591-.716 1.592-1.591l.002-2.954-5.679-5.686-5.686 5.679-10.222-10.236z" style="fill:#82fa7d"/></g><path d="M129.748 161.209v1.573h-28.656v-1.573H99.5v1.573c0 .879.713 1.592 1.592 1.592h28.656c.879 0 1.592-.713 1.592-1.592v-1.573h-1.592z" style="fill:#d2edfa"/><path d="M129.748 133.33v27.86h-28.656v-27.86h28.656m0-1.592h-28.656c-.879 0-1.592.713-1.592 1.592v27.86c0 .879.713 1.592 1.592 1.592h28.656c.879 0 1.592-.713 1.592-1.592v-27.86c0-.879-.713-1.592-1.592-1.592z" style="fill:#fff"/><path d="M96.515 147.26c-6.924 0-12.537-5.613-12.537-12.537s5.613-12.537 12.537-12.537" style="fill:none;stroke:#c26fd2;stroke-width:2.388;stroke-linecap:round;stroke-miterlimit:10"/><path d="m97.088 126.308 7.188-4.15-7.188-4.151zM68.671 53.292l4.151 7.188 4.151-7.188z" style="fill:#c26fd2"/><path d="M72.734 54.526V31.84c0-6.1 4.945-11.045 11.045-11.045h7.363M35.289 113.695l19.37-19.369" style="fill:none;stroke:#c26fd2;stroke-width:2.388;stroke-linecap:round;stroke-miterlimit:10"/><path d="M139.218 70.125h8v46h-8z" style="fill:#fec34c" transform="rotate(45.001 143.22 93.124)"/><path d="M144.875 75.782h8v46h-8z" style="fill:#fcb73d" transform="rotate(45.001 148.877 98.78)"/><path d="M157.431 76.983h14v4h-14z" style="fill:#d5d5d5" transform="rotate(45.001 164.433 78.981)"/><path d="M156.896 73.447h8v4h-8z" style="fill:#e8e8e8" transform="rotate(45.001 160.897 75.446)"/><path d="m170.795 82.518-11.314-11.314 2.885-2.885a7.92 7.92 0 0 1 11.201 0l.113.113a7.92 7.92 0 0 1 0 11.201l-2.885 2.885z" style="fill:#fc5d92"/><path d="m118.469 123.531 5.657-16.971 11.314 11.314z" style="fill:#fcd3a6"/><path d="M124.126 106.56h3.771v3.771h3.772v3.772h3.771v3.771" style="fill:#fcd3a6"/><path d="m173.68 68.433-.057-.057-8.485 8.485 5.657 5.657 2.885-2.885a7.92 7.92 0 0 0 0-11.2z" style="opacity:.1"/><path d="m120.237 118.227-1.768 5.304 5.304-1.768z" style="fill:#767676"/></svg>'},659170:function(e){e.exports='<svg width="199" height="200" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M99.5 0C154.45 0 199 44.55 199 99.5S154.45 199 99.5 199 0 154.45 0 99.5 44.55 0 99.5 0Z" fill="#E3F4FC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7.01 137.07c14.78 36.42 50.5 62.11 92.23 62.11 41.73 0 77.45-25.69 92.23-62.11H7.01Z" fill="#D2EDFA"/><path d="M139.71 158.59h-77c-2.21 0-4-1.79-4-4v-108c0-2.21 1.79-4 4-4h77c2.21 0 4 1.79 4 4v108c0 2.21-1.79 4-4 4Z" fill="#545C61"/><path d="M139.71 158.59h-77c-2.21 0-4-1.79-4-4v-104c0-2.21 1.79-4 4-4h77c2.21 0 4 1.79 4 4v104c0 2.21-1.79 4-4 4Z" fill="#3F4549"/><path d="M63.71 60.59a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" fill="#2F3437"/><path d="M54.69 58.59h9.04c1.09 0 1.98-.89 1.98-1.98v-.04c0-1.09-.89-1.98-1.98-1.98h-9.04c-1.09 0-1.98.89-1.98 1.98v.04c0 1.09.89 1.98 1.98 1.98Z" fill="#C1C1BC"/><path opacity=".2" d="M63.73 54.59h-2c1.09 0 1.98.89 1.98 1.98v.04c0 1.09-.89 1.98-1.98 1.98h2c1.09 0 1.98-.89 1.98-1.98v-.04c0-1.1-.89-1.98-1.98-1.98Z" fill="#000"/><path d="M63.71 82.59a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" fill="#2F3437"/><path d="M54.69 80.59h9.04c1.09 0 1.98-.89 1.98-1.98v-.04c0-1.09-.89-1.98-1.98-1.98h-9.04c-1.09 0-1.98.89-1.98 1.98v.04c0 1.09.89 1.98 1.98 1.98Z" fill="#C1C1BC"/><path opacity=".2" d="M63.73 76.59h-2c1.09 0 1.98.89 1.98 1.98v.04c0 1.09-.89 1.98-1.98 1.98h2c1.09 0 1.98-.89 1.98-1.98v-.04c0-1.1-.89-1.98-1.98-1.98Z" fill="#000"/><path d="M63.71 104.59a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" fill="#2F3437"/><path d="M54.69 102.59h9.04c1.09 0 1.98-.89 1.98-1.98v-.04c0-1.09-.89-1.98-1.98-1.98h-9.04c-1.09 0-1.98.89-1.98 1.98v.04c0 1.09.89 1.98 1.98 1.98Z" fill="#C1C1BC"/><path opacity=".2" d="M63.73 98.59h-2c1.09 0 1.98.89 1.98 1.98v.04c0 1.09-.89 1.98-1.98 1.98h2c1.09 0 1.98-.89 1.98-1.98v-.04c0-1.1-.89-1.98-1.98-1.98ZM63.73 120.59h-2c1.09 0 1.98.89 1.98 1.98v.04c0 1.09-.89 1.98-1.98 1.98h2c1.09 0 1.98-.89 1.98-1.98v-.04c0-1.1-.89-1.98-1.98-1.98Z" fill="#000"/><path d="M63.71 148.59a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" fill="#2F3437"/><path d="M54.69 146.59h9.04c1.09 0 1.98-.89 1.98-1.98v-.04c0-1.09-.89-1.98-1.98-1.98h-9.04c-1.09 0-1.98.89-1.98 1.98v.04c0 1.09.89 1.98 1.98 1.98Z" fill="#C1C1BC"/><path opacity=".2" d="M63.73 142.59h-2c1.09 0 1.98.89 1.98 1.98v.04c0 1.09-.89 1.98-1.98 1.98h2c1.09 0 1.98-.89 1.98-1.98v-.04c0-1.1-.89-1.98-1.98-1.98Z" fill="#000"/><path d="M120.73 102.59H83.69c-1.09 0-1.98-.89-1.98-1.98v-.04c0-1.09.89-1.98 1.98-1.98h37.04c1.09 0 1.98.89 1.98 1.98v.04c0 1.09-.89 1.98-1.98 1.98ZM109.73 112.59H93.69c-1.09 0-1.98-.89-1.98-1.98v-.04c0-1.09.89-1.98 1.98-1.98h16.04c1.09 0 1.98.89 1.98 1.98v.04c0 1.09-.89 1.98-1.98 1.98ZM120.73 92.59H83.69c-1.09 0-1.98-.89-1.98-1.98v-.04c0-1.09.89-1.98 1.98-1.98h37.04c1.09 0 1.98.89 1.98 1.98v.04c0 1.09-.89 1.98-1.98 1.98Z" fill="#545C61"/><path d="M143.71 69.59v-17l3.26 1.09a4 4 0 0 1 2.74 3.79v7.23c0 1.72-1.1 3.25-2.74 3.79l-3.26 1.1Z" fill="#39E079"/><path d="M143.71 87.59v-17l3.26 1.09a4 4 0 0 1 2.74 3.79v7.23c0 1.72-1.1 3.25-2.74 3.79l-3.26 1.1Z" fill="#26D4FA"/><path d="M143.71 106.59v-17l3.26 1.09a4 4 0 0 1 2.74 3.79v7.23c0 1.72-1.1 3.25-2.74 3.79l-3.26 1.1Z" fill="#C26FD2"/><path opacity=".2" d="m145.71 53.25-2-.66v17l2-.67V53.25ZM145.71 71.25l-2-.66v17l2-.67V71.25ZM145.71 90.25l-2-.66v17l2-.67V90.25Z" fill="#000"/><path d="M49.14 123.43a.996.996 0 0 1-1.41 0l-21.57-21.57a3 3 0 0 1 0-4.24l2.12-2.12a.996.996 0 1 1 1.41 1.41l-2.12 2.12a.996.996 0 0 0 0 1.41l21.57 21.57c.39.4.39 1.03 0 1.42Z" fill="#EB5840"/><path opacity=".2" d="M49.14 123.43a.996.996 0 0 1-1.41 0l-21.57-21.57a3 3 0 0 1 0-4.24l2.12-2.12a.996.996 0 1 1 1.41 1.41l-2.12 2.12a.996.996 0 0 0 0 1.41l21.57 21.57c.39.4.39 1.03 0 1.42Z" fill="#000"/><path d="m96.87 151.36-7.07 7.07-38.88-38.9 7.06-7.06 38.89 38.89Z" fill="#F9F9F9"/><path opacity=".2" d="m93.34 154.9-3.54 3.53-38.88-38.89 3.53-3.53 38.89 38.89Z" fill="#000"/><path d="M106.04 166c.44.44.44 1.16 0 1.6-.44.44-1.16.44-1.6 0l-2.98-2.98c-.44-.44-.44-1.16 0-1.6.44-.44 1.16-.44 1.6 0l2.98 2.98Z" fill="#3E3E3E"/><path d="m58.69 111.76-8.49 8.49-24.79-24.79a5.939 5.939 0 0 1 0-8.4l.08-.08a5.939 5.939 0 0 1 8.4 0l24.8 24.78ZM103.95 165.48l-.03.03c-.82.82-2.09.96-3.07.33l-10.12-6.48 7.07-7.07 6.48 10.12c.62.98.49 2.25-.33 3.07Z" fill="#EB5840"/><path opacity=".2" d="m57.98 112.47-7.071 7.071.707.707 7.071-7.071-.707-.707Z" fill="#000"/><path opacity=".2" d="m25.45 87.02-.04.04a5.939 5.939 0 0 0 0 8.4l24.79 24.79 4.24-4.24-28.99-28.99ZM94.26 155.82l-3.54 3.54 10.12 6.48c.97.62 2.25.49 3.07-.33l.01-.01-9.66-9.68Z" fill="#000"/><path d="m98.29 152.77-7.09 7.09a.984.984 0 0 1-1.4 0l-.01-.01a.984.984 0 0 1 0-1.4l7.09-7.09a.984.984 0 0 1 1.4 0l.01.01c.39.39.39 1.01 0 1.4Z" fill="#EB5840"/><path opacity=".2" d="m93.34 154.9-3.54 3.54a.984.984 0 0 0 0 1.4l.01.01c.39.39 1.01.39 1.4 0l3.54-3.54-1.41-1.41Z" fill="#000"/><path opacity=".2" d="m98.73 153.75-.55-.87-6.86 6.86.86.55 6.55-6.54Z" fill="#000"/><path opacity=".1" d="M103.73 175.59H60.69c-1.09 0-1.98-.89-1.98-1.98v-.04c0-1.09.89-1.98 1.98-1.98h43.04c1.09 0 1.98.89 1.98 1.98v.04c0 1.09-.89 1.98-1.98 1.98Z" fill="#000"/></svg>'},376782:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" fill="none"><g clip-path="url(#a)"><path fill="#E3F4FC" d="M100 200.007c55.228 0 100-44.772 100-100 0-55.229-44.772-100-100-100S0 44.779 0 100.007s44.772 100 100 100Z"/><path fill="#E5E5E5" d="M195 10H5v96h190V10Z"/><path fill="#fff" d="M190 103.812V15H10v89l180-.188Z"/><path fill="#CDCDCD" d="M68.379 105.986H49.638l7.713-5.979h11.028v5.979Z"/><path fill="#333" d="M57.366 99.993a2.308 2.308 0 0 0 .727 1.695c.193.187.42.355.685.5l1.333.543-.039-5.457-1.44.595c-.794.443-1.268 1.236-1.266 2.124ZM97.479 106h-6.064V94.014h6.061c1.355.004 2.525 1.144 2.529 2.454v7.073c-.005 1.354-1.139 2.455-2.526 2.459Z"/><path fill="#F8F8F8" d="M68.375 94h23.039v11.986H68.378L68.375 94Z"/><path fill="#E5E5E5" d="M68.375 99.993h23.039v5.993H68.378l-.003-5.993Z"/><path fill="#E5E5E5" d="M68.379 105.986 68.375 94a2.56 2.56 0 0 0-1.401.419l-6.902 2.855.039 5.457 6.745 2.747c.436.322.962.506 1.523.508Z"/><path fill="#000" d="M91.414 99.993V106h6.064c1.388-.004 2.522-1.105 2.526-2.458v-3.549h-8.59ZM57.353 99.993l-.002.014a2.308 2.308 0 0 0 .727 1.695c.193.187.419.355.685.5l1.333.543-.02-2.752h-2.723Z"/><path fill="#BABABA" d="m60.09 99.993.02 2.738 6.745 2.747c.436.323.962.507 1.523.509l-.002-5.993H60.09v-.001Z"/><path fill="#CEE9F8" d="M.511 110.17c4.549 45.074 39.034 81.304 83.268 88.521L195 106.446H5L.511 110.17Z"/><path fill="#BABABA" d="M197 116H7v2h190v-2ZM7 10H5v108h2V10Z"/><path fill="#CDCDCD" d="M190 15h-2v88.813h2V15ZM197 108H7v8h190v-8Z"/><path fill="#fff" d="M197 106H7v2h190v-2Z"/><path fill="#CDCDCD" d="M190 15H10v2h180v-2Z"/><path fill="#BABABA" d="M9 105.986H5V118h4v-12.014Z"/><path fill="#51C6EC" d="M91.49 150.154H23.462a.796.796 0 0 1-.796-.796v-14.317c0-.44.356-.796.796-.796H91.49v15.909Z"/><path fill="#15A9CB" d="M36.431 150.154H23.462a.796.796 0 0 1-.796-.796v-14.317c0-.44.356-.796.796-.796h12.969v15.909Z"/><path fill="#F7EDDD" d="M91.49 136.518H38.725v11.364H91.49v-11.364Z"/><path fill="#15A9CB" d="M91.49 136.518H38.725v2.273H91.49v-2.273Z"/><path fill="#fff" d="M91.49 141.063H38.725v2.273H91.49v-2.273ZM91.49 145.609H38.725v2.273H91.49v-2.273Z"/><path fill="#FDE000" d="M80.02 134.245H30.345a.796.796 0 0 1-.796-.796v-7.499c0-.44.356-.796.796-.796H80.02v9.091Z"/><path fill="#D1AB2A" d="M43.314 134.245H30.345a.796.796 0 0 1-.796-.796v-7.499c0-.44.356-.796.796-.796h12.97v9.091Z"/><path fill="#F7EDDD" d="M80.02 127.427H45.608v4.545H80.02v-4.545Z"/><path fill="#D1AB2A" d="M80.02 127.427H45.608v2.273H80.02v-2.273Z"/><path fill="#fff" d="M80.02 129.7H45.608v2.273H80.02V129.7Z"/><path fill="#C474D2" d="M178.667 150.154h-66.529a2.284 2.284 0 0 1-2.294-2.273v-11.364a2.284 2.284 0 0 1 2.294-2.273l66.529 6.818v9.092Z"/><path fill="#974D98" d="M123.608 150.154h-11.471a2.284 2.284 0 0 1-2.294-2.273v-11.364a2.284 2.284 0 0 1 2.294-2.273l11.471 1.176v14.734Z"/><path stroke="#CDCBCB" stroke-miterlimit="10" stroke-width="1.142" d="M125.902 139.927c1.901 0 3.441 1.526 3.441 3.409 0 1.883-1.541 3.409-3.441 3.409"/><path fill="#F7EDDD" d="M178.667 144.472h-52.765v3.409h52.765v-3.409Z"/><path fill="#974D98" d="M178.667 144.472h-52.765v-6.818l52.765 5.682v1.136Z"/><path fill="#8A5D3B" fill-rule="evenodd" d="M14.5 152.203c17.5 28.653 49.243 47.804 85.5 47.804s68-19.151 85.5-47.804h-171Z" clip-rule="evenodd"/><path fill="#6E4A2F" d="M175.318 166.006a99.75 99.75 0 0 0 6.26-7.887H18.422a99.567 99.567 0 0 0 6.26 7.887h150.636Z"/><path fill="#A87C4F" d="M196.067 158.154H3.933c-2.172 0-3.933-1.791-3.933-4s1.761-4 3.933-4h192.134c2.172 0 3.933 1.791 3.933 4s-1.761 4-3.933 4Z"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h200v200H0z"/></clipPath></defs></svg>'},38050:function(e){e.exports='<svg fill="none" style="overflow:visible;width:100%" viewBox="0 0 500 300" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M284.4 173.1c-8.3 2.9-12.3 12.2-8.8 20.3l46.1 103.2s11.1 23.7 27.4 15.7c16.6-8 4.6-30.1 4.6-30.1l-51-102.2c-3.6-6.5-11.3-9.4-18.3-6.9Z" fill="#D7B08F"/><path d="m305.7 189.7 20 108.8s3.9 16.6 18.4 14.7c19.5-2.4 16.3-21.2 16.3-21.2l-27.6-105-27.1 2.7Z" fill="#D7B08F"/><path d="m306.4 130.4-7.7 20.9c-2.1 5.8-2.2 12.2-.1 18.1l7.1 20.3 15.8 15.3 11.3-18-7-24 11.1-26.8c1.3-3.1 1.3-6.6.1-9.7l-2-5.1c-2.3-5.7-7.9-9.3-14.1-9-6.6.4-12 5.1-13.3 11.6l-1.2 6.4Z" fill="#D7B08F"/><path d="m329.7 282.1-30-109.5s-3.7-12.2-1-21.4m32.7-18-13.3 19.9s-5.6 5.3-1.9 14.8" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M264.9 183.5c-18.2-7.4-38.8-6.6-56.4 2.3-1.6.8-3.2 1.6-4.7 2.4-9.8 5-9.2 23.5-10.2 34.4-5 54.7-19.6 174.9-19.6 174.9s-5.763 42.515 66.5 47c72.5 4.5 65.5-37 65.5-37l-10-58.9 17-64.2s8.2-17.7 5.2-29.2L301 206.4c-2.1-6.1-6.8-11-12.8-13.4l-23.3-9.5Z" fill="#F0E7D9"/><path d="M308.6 227.9c.6 1.7 11.3 32.3 11.3 32.3l-30.1 112.2m-25.7-164.8c.6 1.7 14.3 65 14.3 65l-24.2 125.7" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="m269.227 143-1.498 53.5s-2.097 3.6-4.395 8.5c-1.098-5.7-25.168-17.7-25.168-17.7l.499-57.7c-.099 0 18.078 11.5 30.562 13.4Z" fill="#D7B08F"/><path d="M238.066 187.3s27.466 11.2 26.866 24.8c0 0-2.496-11.9 2.697-15.6" fill="#D7B08F"/><path d="M238.066 187.3s27.466 11.2 26.866 24.8c0 0-2.496-11.9 2.697-15.6" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M243.459 72.9c22.273-12.6 56.03 2.1 51.835 42 4.395 22.9-11.785 53.9-19.475 55.3-10.487 1.8-25.568-6-32.36-16.5-3.395-5.3-6.491-24-6.491-24s-17.978-42.9 6.491-56.8Z" fill="#D7B08F"/><path d="M290.964 109.977c-.646-.8-1.568-1.387-2.536-1.44-.968-.053-1.982.48-2.397 1.44m-15.35 0c-.645-.8-1.567-1.387-2.535-1.44-.968-.053-1.982.48-2.397 1.44" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M288.889 123.844c-1.145 0-2.074-1.529-2.074-3.414 0-1.885.929-3.413 2.074-3.413 1.146 0 2.075 1.528 2.075 3.413 0 1.885-.929 3.414-2.075 3.414Zm-21.204 0c-1.146 0-2.074-1.529-2.074-3.414 0-1.885.928-3.413 2.074-3.413s2.074 1.528 2.074 3.413c0 1.885-.928 3.414-2.074 3.414Z" fill="#000"/><path d="M280.499 121c.162.318 7.068 15.736 4.793 16.531-2.193.795-4.712-3.815-4.712-3.815m4.281 9.858s-2.338 3.959-10.813 0" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M234.271 114c-4.195.5-13.283 6-1.998 17.7 11.286 11.7 15.181-4.3 12.884-10.1-2.297-5.8-7.69-7.9-10.886-7.6Z" fill="#D7B08F"/><path d="M243.559 158.5c15.181 12 30.262 11.1 30.262 11.1m-43.246-48.4s5.094-3.4 4.395 8.1c0 0-2.097-4.6-2.497-3.1" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M296.692 147.7c9.189-21.6 24.57-73.1-18.077-75.2 0 0 7.691-8.4 4.195-19.1-3.496-10.7-28.964-7.2-31.76 4.7-2.697 11.9-2.098 12.3-2.098 12.3s-19.675 5.6-27.365 26.9c-6.792 18.9-11.186 44.7-4.994 60.3 6.192 15.6 3.196 18.4 3.196 18.4 47.64 18.4 25.568-27.7 18.876-40.1-1.797-.3-3.895-1.5-6.492-4.1-11.285-11.7-2.197-17.3 1.998-17.7 1.598-.2 3.695.3 5.693 1.5 13.283-13 25.767-35.3 25.767-35.3s4.195 21.8 29.264 21.4c0 0 1.098 6.8.299 13.4.799 28.6-11.585 51.6-18.177 54.8.1 5 3.096 15.5 26.866 5.8.1-.2-16.279-6.4-7.191-28Z" fill="#84CCAA"/><path d="M235.969 136.8s31.46 48.1-3.496 43.6m69.313-46.8s-18.776 30.4 2.197 41.9M267.429 74.6s-3.795 36.3 43.945 22" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M303.085 92.9s5.593-23.3-19.875-20.7c-25.468 2.6-32.659 4.3-32.859-10" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M257.042 64.6s-8.988-9.6 0-15.2c8.989-5.6 33.858 2.6 27.765 12.8-6.092 10.3-23.27-3.8-23.27-3.8m-44.644 62.3s-11.286-9.3 1.797-14.5c13.084-5.2 38.153-9.2 45.144-25.7" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="m297 112.7 37.6-4.5c8.9-1.4 16.8 5.8 16.1 14.8-.5 7.4-6.8 13.1-14.3 12.9-9.1-.3-30.9-1.2-38.2-1.4-3.6-.1-6.3-3.2-6-6.8l-.5-9.3c.4-2.9 2.5-5.3 5.3-5.7Z" fill="#524CA0"/><path d="M338.8 133.2c5.965 0 10.8-5.194 10.8-11.6 0-6.407-4.835-11.6-10.8-11.6-5.965 0-10.8 5.193-10.8 11.6 0 6.406 4.835 11.6 10.8 11.6Z" fill="#F0F0F0"/><path d="m263.2 114.7 37.6-4.5c8.9-1.4 16.8 5.8 16.1 14.8-.5 7.4-6.8 13.1-14.3 12.9-9.1-.3-30.9-1.2-38.2-1.4-3.6-.1-6.3-3.2-6-6.8l-.4-9.4c.2-2.9 2.4-5.2 5.2-5.6Z" fill="#524CA0"/><path d="M305 135.2c5.965 0 10.8-5.194 10.8-11.6 0-6.407-4.835-11.6-10.8-11.6-5.965 0-10.8 5.193-10.8 11.6 0 6.406 4.835 11.6 10.8 11.6Z" fill="#F0F0F0"/><path d="M202 188.9c-6.9 5.4-7.7 15.5-1.9 22l103.6 116.7s18.1 18.9 31 6.2c13.1-12.9-5.2-30-5.2-30l-108-114.2c-5.4-4.9-13.7-5.2-19.5-.7Z" fill="#D7B08F"/><path d="m263.9 176.4 42.6 147.3s4.8 16.3 19.1 13.8c19.3-3.5 15.2-22 15.2-22l-50-143.1-26.9 4Z" fill="#D7B08F"/><path d="M297.4 138.1c-.6-.8-1.5-1.4-2.4-1.7 1.1-1.6 1.2-3.8 0-5.4-.8-1-1.9-1.7-3.1-1.8.6-1.4.5-3.1-.5-4.5-1.3-1.7-3.6-2.4-5.6-1.5l-.3.1c.2-1.2-.1-2.4-.8-3.4-1.3-1.7-3.6-2.4-5.6-1.5l-1.7.8c-10.8 5.7-17.3 20.4-18.1 23.5-1 3.7 4.7 33.7 4.7 33.7l18 16.6 9-19.4-2.9-16.1 9.6-14.1-.1-.1c1-1.5 1-3.6-.2-5.2Zm-10.1-7.2-.1.1-.1-.2.2.1Z" fill="#D7B08F"/><path d="m291.8 287.2 4.7 2.2-31.6-105.9c-5.4-18.8-5.4-32.5-5.4-32.5m31.5 2.2-2.9 4.3 2.9 16.1" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><g clip-path="url(#b)"><path d="M231.5 373.3c11.8-10.1 21.4-22.7 28.1-36.6 4.1-8.6 7.1-17.8 11.7-26.2 18.5-33.7 58.6-48.7 85-76.6 20.2-21.3 31.9-50.5 32.1-79.9 14.8 25.3 19.8 55.1 32.4 81.6 7.2 15.1 17.1 30.1 16.4 46.7-.3 7.3-2.7 14.4-5.4 21.2-5.9 15.2-13.3 29.8-22.1 43.6-10.4 16.4-22.7 31.6-30.8 49.3-5.1 11.1-8.5 23.3-16.1 32.8-2.9 3.7-6.6 6.9-11.1 8.3-7.6 2.3-15.6-1.2-22.7-4.6-24.3-11.7-48.6-23.3-72.9-35-10.5-5-22-11.2-25.6-22.3" fill="#087F5E"/><path d="M208 442.8c1.9.7 3.2 2.6 3.3 4.6-51.7-27.3-86.1-80.5-102.4-136.7-2.3-7.9-4.3-15.9-5.1-24.1-2-21.6 4.5-43 8.3-64.4 3.8-21.4 4.7-45-7.3-63.2 17.3 9 28.4 26.4 43.3 39.1 14.6 12.5 32.7 20 49.6 29.2 23.5 12.8 46 29.7 58.1 53.6 8.4 16.6 11.3 35.4 13.3 53.9a698 698 0 0 1 4.2 79.2c0 1.2 0 2.4-.7 3.4-1 1.5-2.9 1.8-4.7 2.1-23 3.3-45.4 10.9-65.6 22.3" fill="#009A8F"/><path d="M218.2 440.3c18.2-30 31.5-64.2 58.2-86.9 21.1-17.9 48.8-26.8 76.5-28.4 10.6-.6 21.3-.2 31.9-1.3 34.1-3.6 66.9-25.2 79.2-57.2l7.2 23.7c7 22.9 14.1 46.2 13.8 70.1-.2 23.9-9 49-28.2 63.3-16 11.9-36.7 14.8-55.7 20.8-22.8 7.2-44.2 19.5-60.1 37.4-2.3 2.6-4.6 5.4-7.9 6.4-2.6.8-5.4.4-8 0-41.1-6.8-80.5-23.3-114-48" fill="#009A8F"/><path d="M277.7 454.2c-8.1 9.5-31.9 14-33.2 13.8-27.5-4.6-50.2-23.6-69.6-43.7-19.3-20.1-37.3-42.3-61.2-56.5-18.9-11.2-40.6-16.9-60.5-26.2-8.7-4.1-17.4-9.1-23.2-16.8-4-5.3-6.5-11.5-9-17.7-5.3-13.5-10.7-26.9-16-40.4 13.2.3 24.7 8.5 36.4 14.8 36.4 19.4 79.5 20 119.6 29.6 12.2 2.9 24.3 6.8 34.7 13.7 9.2 6.1 16.7 14.5 23.6 23 22.7 27.9 40.9 59.5 53.7 93l4.7 13.4Z" fill="#087F5E"/><path d="M393.1 174.4c-8.4 24.3-1.4 51.2-5.4 76.6-1 6.2-2.7 12.5-6.3 17.7-5.3 7.7-14.1 12.1-22.4 16.3" stroke="#087F5E" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M132.5 199.9c1.8 9.2 5 18 8.9 26.5 4.6 10.1 10 19.7 16.3 28.8 9.9 14.5 21.8 27.5 32.5 41.4 10.7 13.9 20.5 29 25.3 45.9m-44.8-88.1c1.5-9.2 2.9-18.3 4.4-27.5m-58.2 23.5c11.1 3.4 22.2 6.8 33.3 10.1" stroke="#009A8F" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M276.6 416.8c6.3-3.5 12.6-6.9 18.9-10.3 4.8-2.6 9.6-5.1 14.8-6.7 4.9-1.5 10-2 15.1-2.6 27.5-3.2 55.1-6.9 81.5-15.4 6.5-2.1 12.8-4.4 18.8-7.6 11.5-6 21.3-14.7 30.7-23.6 3.9-3.7 8.1-7.9 8.6-13.3" stroke="#087F5E" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M428.5 333.3c-3 9.8-5.1 20-6.1 30.2M376 342.3c-1.7 9.5-2.7 19.1-2.9 28.8m-60.2-16.2c1.2 9.3 4 18.4 8.3 26.7m25.3 31.3c15.7 7.1 31.3 14.2 47 21.3m-3.2-35.8c15.9 7 31.7 14.1 47.6 21.1m-6.6-35.7c13.4 3.7 26.5 8.3 39.3 13.8m-223.3 29.5c-6.8-5.1-10.6-13.2-15.6-20.1-6.3-8.8-14.8-15.9-23.1-22.9-16.2-13.5-32.5-27.1-51.4-36.4-23.7-11.7-50.2-16.1-74.5-26.5-5.4-2.3-11-5.2-13.9-10.3" stroke="#087F5E" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M271.5 435.1c-13.6-25.2-28.9-49.5-45.7-72.7-7.1-9.8-14.6-19.5-23.7-27.5-23.2-20.3-54.7-27.8-85.2-32m131.9 78.7c4.4-8.3 27.3-34.3 55.7-48.8 27.9-14.3 49.7-9.2 68-11.5 21-2.6 44.6-6.8 62.4-18.3m-163.7 48c0-15.1-1.5-62.3-25.3-84.5m25.3 44c9-21.2 37.3-43.7 37.3-43.7" stroke="#000" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></g></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h500v500H0z"/></clipPath><clipPath id="b"><path fill="#fff" transform="translate(5 81)" d="M0 0h480v480H0z"/></clipPath></defs></svg>'},871111:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" xml:space="preserve"><path fill="#C26FD2" d="M3 3.5V34c0 2.2 1.8 4 4 4h22c2.2 0 4-1.8 4-4V3.5H3z"/><path fill="#955CA1" d="M33 7H6.5A3.51 3.51 0 0 1 3 3.5 3.51 3.51 0 0 1 6.5 0H33v7z"/><path fill="#955CA1" d="M7 3.5H3V34c0 2.2 1.8 4 4 4V3.5z"/><path fill="#DFF1FF" d="M3.164 4.5C3.599 5.938 4.925 7 6.5 7H33V2H6.5C4.925 2 3.599 3.062 3.164 4.5z"/><path fill="#D498DF" d="M32 1v5H6.5C5.122 6 4 4.878 4 3.5S5.122 1 6.5 1H32m1-1H6.5C4.575 0 3 1.575 3 3.5S4.575 7 6.5 7H33V0z"/><path fill="#DFF1FF" d="M32 2h1v4h-1z"/><path fill="none" stroke="#C4DAE8" stroke-linecap="round" stroke-miterlimit="10" d="M7.5 4.5h25"/><path fill="#955CA1" d="M31 1h2v1h-2zM9.022 4h4.312v2H9.022z"/><path fill="#7B5080" d="M27.82 32.431h-1.026c.119-.186.206-.395.206-.631V7h-8.01v22.462l6.211 3.377c.149.086.315.129.486.146v.008h.063c.016.001.032.007.05.007.012 0 .021-.006.033-.007h1.988v-.562zm-2.018-.432L25.8 32l.002-.001z"/><path fill="#7B5080" d="M11 7h-1v24.8c0 .63.493 1.134 1.111 1.182v.011h.056c.012 0 .021.007.033.007.017 0 .034-.006.051-.007h1.018v-.265h-.266L19 28.924l.014.008V7H11zm.201 25-.004-.001.004.001zm.105-.031c-.004.003-.009.002-.014.004.005-.002.01-.001.014-.004L19 27.785l-7.694 4.184z"/><path fill="#965CA1" d="M28 7H11v24.8a1.202 1.202 0 0 0 1.799 1.039L20 28.924l7.201 3.916A1.201 1.201 0 0 0 29 31.8V7h-1zM12.055 31.928zm.142.071.004.001H12.2l-.003-.001zM20 27.785l-7.694 4.184c-.004.003-.009.002-.014.004.005-.002.009-.001.014-.004L20 27.785l7.694 4.184c.004.003.009.002.014.004-.004-.002-.009-.001-.014-.004L20 27.785zM27.799 32l.004-.001-.004.001zm.123-.05.023-.022a.12.12 0 0 1-.023.022z"/><path fill="#C26FD2" d="m20.006 14 1.547 3.135 3.46.502-2.504 2.44.591 3.446-3.094-1.627-3.094 1.627.591-3.446L15 17.637l3.459-.502z"/><path fill="#FFF" d="M23.101 24.022a.49.49 0 0 1-.232-.058l-2.862-1.505-2.861 1.505a.5.5 0 0 1-.725-.527l.547-3.186-2.314-2.256a.5.5 0 0 1 .276-.854l3.199-.465 1.431-2.899c.168-.34.729-.34.896 0l1.432 2.899 3.199.465a.5.5 0 0 1 .276.854l-2.314 2.256.547 3.186a.5.5 0 0 1-.495.585zm-3.095-2.627c.08 0 .16.02.232.058l2.198 1.155-.42-2.446a.5.5 0 0 1 .145-.443l1.777-1.732-2.457-.356a.5.5 0 0 1-.376-.273l-1.1-2.227-1.099 2.227a.5.5 0 0 1-.376.273l-2.457.356 1.777 1.732c.118.115.172.28.145.443l-.42 2.446 2.197-1.155a.513.513 0 0 1 .234-.058z"/><path fill="#C26FD2" d="M28.984 7H11.022l-2-3h17.962z"/><path fill="none" stroke="#C4DAE8" stroke-linecap="round" stroke-miterlimit="10" d="M7.5 2.5h25"/></svg>'},508349:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 250 250"><path fill="#521E00" d="M47 173c8-1 16 1 23 2 14 2 75 3 90 3 2-35 2-71-3-107-36 1-75 2-111 5 2 2-3 41-2 45 0 17 3 34 3 52Z"/><path fill="#D7B08F" d="m57 47 2-2 3-1 112-9-11 26-6 11-13 1c-17 3-35 1-52 0l-26 1c-5 0-17 3-20 2-3-7 8-23 11-29ZM6 198l128 17c11-13 18-24 27-38-1 1-74-1-104-2-7 0-14-2-21 2-10 8-19 15-30 21Z"/><path fill="#F6AC3D" d="M52 168c-4 3-8 6-8 10v2l2 1c4 2 9-1 13-3 11-5 21-11 31-18-1 1-8-5-9-5-4-2-6-1-9 1-7 3-14 7-20 12Zm37 26v1l1 1h9c3-1 5-4 7-6 6-5 11-12 16-18l-13-3c-3-1-5 0-7 3-6 6-10 14-13 22Z"/><path fill="#F6AC3D" d="M160 93c-2-1-20 3-23 2-9 0-18-4-24-11l-4-7-1-9c-1-8-3-15-6-23l-1-2-2 1-5 5-7 10-3 3H64l-4-1c-2 0-4-3-6-5-3-3-7-6-11-7-2 8-2 16 0 24l-1 6c-3 4-3 20-3 24 7 35 33 55 66 66 9 3 19 5 28 5l-5 8v3h1c3 1 6-2 8-4l11-9 4-2 13-5c1-1-2-70-5-72Z"/><path fill="#DA80A0" d="m99 55 2-1 2 3a59 59 0 0 1-1 10c-3 1-9 2-9-2-1-3 5-8 6-10Zm-53 3h1l1-1 5 4 2 6v1c-3 1-7 4-9 2V58Z"/><path fill="#D7B08F" d="M239 72c6 13 5 83 6 93-28 2-68 9-85 10l1-32c1-9-4-71-4-71 1-2 19-2 24-2a1242 1242 0 0 1 58 2Z"/><path stroke="#521E00" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="m160 178-24 38c-1 1-106-15-106-14M158 71l18-37-34 3m15 39c6 30 4 91 2 99l76-10"/><path stroke="#521E00" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M196 117h-10c4-7 10-13 15-19l17 16-11 2c-1 5 5 29 2 34l-10 1c-4 0-3-34-3-34Z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M64 110c3 0 4-9 4-9s-1 7 9 6m-47 13 25-17m-30 9 26-11m32-1 26-5m-25 11 25-5m-40 56c-8 3-11 6-18 12-2 2-4 3-5 6l-2 4c1 3 4 5 7 4 3 0 5-2 7-4l12-7"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M45 124c5 11 15 30 60 45-4 4-9 8-12 13-3 4-5 9-4 13v2l2 1c3 1 7-1 10-4m45-66c-2-2-5-3-9-4l-9 1c-3 2-4 4-5 7l-1 9v6l2 4 3 6c3 5 7 9 12 13l-5 4-6 5-2 7h5c9-3 14-12 22-15m-26-75c1 2 0 14-1 17 0 0 0 0 0 0m9-16c2 1 2 12 1 15"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M125 152c3 0 15 0 19-4m-2-4c-6 2-12 2-18 2m-15-1 13 16 2 7c0 2-2 3-3 5l-3 4"/><path fill="#000" d="M68 98c1 0 2-1 2-3s-1-3-2-3-2 1-2 3 1 3 2 3Zm-14-8c1 0 2-1 2-3s-1-3-2-3-2 1-2 3 1 3 2 3Zm29 0c1 0 2-1 2-3s-1-3-2-3-2 1-2 3 1 3 2 3Z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M101 54s-6 3-8 12c3 4 9 3 9 3M47 57s8 2 9 10c-2 4-9 4-9 4"/></svg>'},29163:function(e){e.exports='<div bb-load-bundle="components/directives/content-item-base" ng-class="::contentItemBase.getRootClassName()" bb-cache-compilation="content-item-base">\n  <div class="content-item-base-container guidance-overflow-fix js-content-item-base" bb-click-to-invoke-child=".content-title">\n    <div ng-switch on="content.ui.importPlaceholder" class="content-item-row-container">\n      <div ng-switch-when="true" class="placeholder-container" bb-focus>\n        <div class="placeholder-text" bb-translate>components.directives.content-item-base.copy-placeholder</div>\n        <div class="sr-only" bb-translate>components.directives.content-item-base.please-wait</div>\n      </div>\n      <bb-review-state-icon\n        ng-if="contentItemBase.shouldShowReviewStateIcon()"\n        content-id="content.id"\n        course-id="contentItemBase.courseId"\n        on-review-state-icon-click="contentItemBase.onReviewStateIconClick"\n        has-automatic-review-state-transition="!content.canUpdateReviewState()"\n        before-item-state="contentItemBase.getNeighborReviewState(itemBefore)"\n        after-item-state="contentItemBase.getNeighborReviewState(itemAfter)"\n      ></bb-review-state-icon>\n\n      <div ng-switch-default class="row drag-element-row" ng-class="{\n        \'is-restricted\': content.canViewAsInstructor() ? !content.isAvailable : false,\n        \'hidden-from-student-cr\': content.canViewAsInstructor() && content.isConditionalReleaseWithHiddenFromStudent(),\n        \'isNotClickable\': content.isConditionalReleaseLocked() || content.isRestricted() && !content.canViewAsInstructor()}">\n        <div class="content-item-row">\n          <div class="content-item-details" ng-class="{\'is-uploading\':content.ui.isUploading}">\n            <div class="element-card outline-item">\n              <ng-switch on="content.ui.isUploading">\n                <div ng-switch-when="true" class="upload-file">\n                  <bb-progress displayResults="false" id="{{content.ui.fileUploadId}}" class="bb-progress"></bb-progress>\n                </div>\n\n                <div class="outline-item-inner" ng-switch-default>\n                  <div class="element-image" ng-if="contentItemBase.isGradeLoaded" bb-content-item-icon="content" show-alert-icon="contentItemBase.shouldShowAlertIcon()">\n                  </div>\n                  <div class="element-details">\n                    <div ng-if="shouldShowContent">\n                      <bb-content-item-course-outline ng-if="!contentItemBase.isEngagementOutline()"></bb-content-item-course-outline>\n                      <bb-content-item-engagement-outline ng-if="contentItemBase.isEngagementOutline()"></bb-content-item-engagement-outline>\n                    </div>\n                    <div ng-if="!contentItemBase.shouldShowContent">\n                      {{contentItemBase.overrideMessage}}\n                    </div>\n                  </div>\n                </div>\n              </ng-switch>\n            </div>\n          </div>\n          <div ng-if="content.id" class="item-controls">\n            <!-- Show this if the user has edit permissions on the content and it is movable //-->\n            <button bb-drag-handle\n                    drag-item-id="{{content.id}}"\n                    drag-item-name="{{content.title}}"\n                    drag-item-type="{{contentItemBase.contentHandler}}"\n                    drag-item-context="{{contextArea}}"\n                    class="super-clear small button icon js-drag-handle"\n                    ng-if="canMove && content.canEdit()"\n                    translate-attrs-values="{contentTitle: content.title}"\n                    bb-translate-attrs="{\'title\': \'components.directives.content-item-base.move\', \'aria-label\': \'components.directives.content-item-base.aria-label.move\'}"\n                    analytics-id="content.item.base.move.button"\n                    >\n\n              <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n            </button>\n            <bb-ally-content-ref\n                ng-if="contentItemBase.canShowAlly"\n                content-id="{{content.id}}"\n                file-id="{{::contentItemBase.allyService.getXythosIdFromContentItem(content)}}"\n                file-preview-url="{{::content.getContentDisplay().contentUrl()}}"\n            ></bb-ally-content-ref>\n            <bb-ally-show\n              ng-if="contentItemBase.canShowAlly && contentItemBase.isAllyInstructor"\n              content-id="{{content.id}}"\n              show-view-score-link="true"\n              show-icon="true"\n              class="ally-icon"\n            ></bb-ally-show>\n            <bb-ally-show\n              ng-if="contentItemBase.canShowAllyAlternativeFormats(content)"\n              content-id="{{content.id}}"\n              show-alternative-formats-link="true"\n              show-icon="true"\n              class="ally-icon"\n            ></bb-ally-show>\n            <!-- Show this if the user has edit or delete permissions //-->\n            <div class="right" bb-foundation-defer>\n              <bb-overflow-menu ng-show="contentItemBase.showOverflowMenu()"\n                                element-id="{{content.id}}"\n                                element-name="{{content.title}}"\n                                menu-items="contentItemBase.getOverflowMenu()"\n                                on-menu-toggle="contentItemBase.updateAlly()"\n                                ng-attr-data-ally-content-ref="{{content.id}}"\n                                ng-attr-data-ally-show="{{ contentItemBase.overflowMenuIsAllyConditional() ? \'instructorfeedback\' : undefined }}"\n                                analytics-id-tag-prefix="components.directives.content-item-base.overflowMenu">\n              </bb-overflow-menu>\n            </div>\n          </div>\n        </div>\n\n        <div ng-if="contentItemBase.getDescription()" class="content-item-description">\n          <bb-course-content-item-description\n            description="contentItemBase.getDescription()"\n          ></bb-course-content-item-description>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},458984:function(e){e.exports='<div class="content-outline" bb-load-bundle="components/directives/content/content-outline">\n  <bb-add-content-button ng-if="!hideAddMenuOverride && canCreate"\n                         can-create-all-contents="canCreateAllContents"\n                         is-render-by-default="contentOutline.parentFolder.depth === 0"\n                         show-menu-override="contentOutline.shouldShowMenuOverride()"\n                         parent-id="contentOutline.parentFolder.id" root-content="contentOutline.parentFolder"\n                         position-before="\'start\'" item-name="contents[0].title"\n                         depth="(contentOutline.parentFolder.depth + 1)"\n                         always-show="contentOutline.shouldShowAddButton()" context-area="contentOutline.contextArea"\n                         can-copy-import="canCopyImport">\n  </bb-add-content-button>\n  <div class="add-element" ng-if="hideAddMenuOverride && !canCreate"> </div>\n  <div ng-if="contents">\n    <div class="content-outline-scroll-container"\n         bb-infinite-scroll="contentOutline.loadMoreChildren(contentOutline.parentFolder)"\n         infinite-scroll-immediate-check="true" infinite-scroll-disabled="contentOutline.isAllContentsLoaded()"\n         infinite-scroll-container="contentOutline.getScrollContainerSelector()"\n         infinite-scroll-listen-for-event="content-outline-infinite-scroll-check"\n         infinite-scroll-current-count="contents.length" infinite-scroll-total-count="contents.paging.count"\n         infinite-scroll-load-limit="contents.paging.limit"\n         infinite-scroll-tray-id="content-outline-{{::contentOutline.parentFolder.id}}"\n         infinite-scroll-focusable-children-selector=".content-title"\n         infinite-scroll-localization-keys-prefix="components.directives.content.content-outline.infiniteScroll.{{::contentOutline.contextArea === \'discussions\' ? \'discussions\' : \'content\'}}"\n         infinite-scroll-force-show-ancestor-selector="{{::contentOutline.getScrollForceShowSelector()}}"\n         sortable-parent>\n      <div class="content-outline-scroll-list" data-parent-id="{{::contentOutline.parentFolder.id}}">\n        <div class="js-content-div drag-element"\n             ng-class="{\'last\': $last, \'has-conversation-indicator\': content.ui.hasIndicator}"\n             ng-repeat="content in contents track by contentOutline.getContentTrackingId(content)" data-content-id="{{content.id}}"\n             ng-mouseenter="contentOutline.placeAddButton(content)">\n            <ng-switch on="(content.isFolder() && !content.isBbPage()) || content.isLearningModule()">\n              <div ng-switch-when="true">\n                <bb-folder root-content="contentOutline.parentFolder"\n                          on-file-drop-handler="contentOutline.onFileDropHandler"\n                          on-move-handler="contentOutline.onMoveHandler"\n                          on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler" contents="contents"\n                          content="content" next-content-id="contents[$index + 1].id"\n                          previous-content-id="contents[$index - 1].id"\n                          load-more-children="contentOutline.loadMoreChildren" can-create="canCreate"\n                          can-move="contentOutline.canMove" context-area="contentOutline.contextArea"\n                          can-copy-import="canCopyImport"></bb-folder>\n              </div>\n              <div ng-switch-when="false" bb-drag drag-item="::content.id" can-move="contentOutline.canMove">\n                <div ng-if="!content.isGroupContent || content.assignedGroups.length >= 0 || contentOutline.canMove">\n                  <div bb-drop-handler on-file-drop-handler="contentOutline.onFileDropHandler"\n                      on-move-handler="contentOutline.onMoveHandler"\n                      on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler" content="content"\n                      root-content="contentOutline.parentFolder" next-content-id="contents[$index + 1].id"\n                      previous-content-id="contents[$index - 1].id">\n                    <div class="row collapse element-list-row js-course-skip-link-target" can-create="canCreate"\n                        can-move="contentOutline.canMove" bb-content-item-mouseover\n                        ng-class="{ \'element-list-row-extra-icon\': contentOutline.isProgressTrackingStateShown(content) }">\n                      <bb-content-item-base contents="contents" content="content" context-area="contentOutline.contextArea"\n                                            can-move="contentOutline.canMove"\n                                            item-before="contents[$index - 1]"\n                                            item-after="contents[$index + 1]"\n                                            ></bb-content-item-base>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ng-switch>\n\n            <div id="add-button-placeholder{{content.id}}"\n                class="add-element-container"\n                ng-if="::canCreate">\n              <div ng-if="contentOutline.isAddContentButtonUnattached(content.id)"\n                  id="add-button-line{{content.id}}" class="add-element" tabindex="0" role="button"\n                  ng-class="{\'mobile-center-content-button\': contentOutline.isMobileDevice()}"\n                  aria-label="{{::contentOutline.getAddButtonLineLabel(content.title)}}"\n                  ng-focus="contentOutline.placeAddButton(content, true)">\n                <bb-svg-icon size="small" icon="add" class="mobile-add-content-icon" ng-if="contentOutline.isMobileDevice()"></bb-svg-icon>\n              </div>\n            </div>\n          <bb-progress\n              ng-if="contentOutline.cloudUploadInProgress[content.id]"\n              target-div="#progress{{content.id}}"\n              primary-key="\'progress\' + content.id"\n              display-results="false"\n          >\n          </bb-progress>\n        </div>\n        <div class="drag-element">\n          <div drag-item-id="{{contentOutline.placeholderContent.id}}"></div>\n          <div class="drop-placeholder" bb-drop-handler content="contentOutline.placeholderContent"\n               on-move-handler="contentOutline.onMoveHandler"\n               on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- LRN-123904: For file upload content items `positionAfter` is set to `content.id` in course-outline.html. But when file upload is\n  in progress, `content.id` stays undefined. As a result `positionAfter` receives undefined.\n  `positionAfter` value is not used when `content.id` is not available. i.e.: When upload-in-progress file is very first item - `positionAfter` value is not\n  available, therefore `positionBefore` is used instead. -->\n  <bb-add-content-button\n    class="movable-add-content-button movable-add-content-button-folder{{::contentOutline.parentFolder.id}}"\n    ng-hide="!contentOutline.addContentButtonLocation"\n    ng-if="::canCreate && !content.ui.importPlaceholder"\n    can-create-all-contents="canCreateAllContents"\n    content="contentOutline.addContentButtonLocation"\n    root-content="contentOutline.parentFolder"\n    is-button-location-changable="true"\n    parent-id="contentOutline.parentFolder.id"\n    position-after="contentOutline.addContentButtonLocation.id || contentOutline.addContentButtonLocation.positionAfter"\n    position-before="(contentOutline.addContentButtonLocation.id || contentOutline.addContentButtonLocation.positionAfter) ? null : contentOutline.addContentButtonLocation.positionBefore"\n    item-name="contentOutline.addContentButtonLocation.title"\n    depth="contentOutline.addContentButtonLocation.depth"\n    context-area="contentOutline.contextArea"\n    can-copy-import="canCopyImport">\n  </bb-add-content-button>\n</div>\n'},657945:function(e){e.exports='<div bb-foundation-defer bb-load-bundle="components/directives/content-visibility"\n  class="item-selector-container content-visibility-selector" bb-cache-compilation="content-visibility-selector">\n  <!-- To allow instructors to see visibility status in a completed course -->\n  <div\n    ng-if="!contentVisibilitySelector.isEditable() && contentVisibilitySelector.entitledToViewDesigner && content.isVisibleToStudents()"\n    class="visibility-message visibility-label">\n    <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="visible" class="visibility-icon">\n    </bb-svg-icon>\n    <span class="js-visibility js-visible-option vert-centered-label-text" bb-translate course-org-token-resolver>\n      components.directives.content-visibility.visible\n    </span>\n  </div>\n  <!-- To allow instructors to see visibility status in a completed course -->\n  <div\n    ng-if="!contentVisibilitySelector.isEditable() && contentVisibilitySelector.entitledToViewDesigner && content.isHiddenFromStudents()"\n    class="visibility-message visibility-label">\n    <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="invisible" class="visibility-icon">\n    </bb-svg-icon>\n    <span bb-translate course-org-token-resolver>components.directives.content-visibility.hidden</span>\n  </div>\n  <!-- To allow instructors to see visibility status in a completed course -->\n  <div\n    ng-if="!contentVisibilitySelector.isEditable() && contentVisibilitySelector.entitledToViewDesigner && content.isConditionalRelease()"\n    class="visibility-message visibility-label">\n    <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="lock" class="visibility-icon"></bb-svg-icon>\n    <span class="js-visibility js-restricted-option js-conditional-release-option"\n      bb-translate>components.directives.content-visibility.conditional-availability</span>\n  </div>\n  <button name="visibility-content" ng-model="content.visible" ng-show="contentVisibilitySelector.isEditable()"\n    bb-prevent-click-if="!contentVisibilitySelector.isVisibilitySelectorEnabled()" type="button" class="button dropdown"\n    aria-controls="item-visibility-selector_{{::contentVisibilitySelector.selectorId}}"\n    ng-click="contentVisibilitySelector.checkForCourseLinks()"\n    data-dropdown="item-visibility-selector_{{::contentVisibilitySelector.selectorId}}" aria-expanded="false"\n    analytics-id="course.content.visibility.button">\n    <div class="visibility-label" ng-if="contentVisibilitySelector.isVisibleToStudents()">\n      <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="visible" class="visibility-icon">\n      </bb-svg-icon>\n      <span class="js-visibility js-visible-option vert-centered-label-text" bb-translate course-org-token-resolver>\n        components.directives.content-visibility.visible\n      </span>\n    </div>\n    <div class="visibility-label" ng-if="contentVisibilitySelector.isHiddenFromStudents()">\n      <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="invisible" class="visibility-icon">\n      </bb-svg-icon>\n      <span class="js-visibility js-hidden-option vert-centered-label-text" bb-translate course-org-token-resolver>\n        components.directives.content-visibility.hidden\n      </span>\n    </div>\n    <div class="visibility-label" ng-if="contentVisibilitySelector.isConditionalRelease()">\n      <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="lock" class="visibility-icon">\n      </bb-svg-icon>\n      <span class="js-visibility js-restricted-option vert-centered-label-text"\n        bb-translate>components.directives.content-visibility.conditional-availability</span>\n    </div>\n  </button>\n\n  <ul ng-if="contentVisibilitySelector.isEditable()"\n    id="item-visibility-selector_{{::contentVisibilitySelector.selectorId}}"\n    class="f-dropdown item-visibility-selector selection-full-width" data-dropdown-content aria-hidden="true">\n    <li ng-class="{\'item-selected\': content.isVisibleToStudents()}"\n      ng-if="contentVisibilitySelector.showVisibleHiddenMenuOptions()">\n      <a href="javascript:void(0);" ng-click="contentVisibilitySelector.selectVisible()"\n        class="visible-option visibility-label" analytics-id="components.directives.content-visibility.visible.link">\n        <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="visible"></bb-svg-icon>\n        <span bb-translate course-org-token-resolver>components.directives.content-visibility.visible</span>\n      </a>\n    </li>\n    <li ng-class="{\'item-selected\': content.isHiddenFromStudents()}"\n      ng-if="contentVisibilitySelector.showVisibleHiddenMenuOptions()">\n      <a href="javascript:void(0);" ng-click="contentVisibilitySelector.selectHidden()"\n        class="hidden-option visibility-label" analytics-id="components.directives.content-visibility.hidden.link">\n        <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="invisible"></bb-svg-icon>\n        <span bb-translate course-org-token-resolver>components.directives.content-visibility.hidden</span>\n      </a>\n    </li>\n    <li ng-if="contentVisibilitySelector.showConditionalReleaseMenuOption()"\n      ng-class="{\'item-selected\': content.isConditionalRelease()}">\n      <a href="javascript:void(0);" ng-click="contentVisibilitySelector.selectConditionalRelease()"\n        class="restricted-option visibility-label conditional-release-restricted-option"\n        analytics-id="components.directives.content-visibility.conditional-availability.link">\n        <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="lock"></bb-svg-icon>\n        <span bb-translate>components.directives.content-visibility.conditional-availability</span>\n      </a>\n    </li>\n    <course-link-visibility-warning-banner ng-if="contentVisibilitySelector.showInfoBanner">\n    </course-link-visibility-warning-banner>\n  </ul>\n</div>\n'},486219:function(e){e.exports='<div bb-load-bundle="components/directives/folder" class="folder" ng-class="{\'is-empty-folder\': content.children.length === 0 && folder.showEmptyMenu, \'learning-module\': content.isLearningModule()}" bb-cache-compilation="content-folder">\n  <div bb-drop-handler on-move-handler="onMoveHandler" on-move-into-folder-handler="onMoveIntoFolderHandler" on-file-drop-handler="onFileDropHandler" content="content" is-folder-open="folder.isOpen" next-content-id="nextContentId" previous-content-id="previousContentId">\n    <div ng-if="::(!content.isLearningModule())"\n         class="row collapse element-list-row folder-row-container js-parent js-course-skip-link-target"\n         can-create="canCreate"\n         bb-content-item-mouseover\n         ng-class="{open: folder.isOpen, \'is-conditional-release\': content.isConditionalReleaseLocked(), \'element-list-row-extra-icon\': folder.isProgressTrackingStateShown(content)}"\n         bb-click-to-invoke-child="button.content-title">\n      <bb-content-item-base contents="contents" content="content" context-area="folder.contextArea" can-move="canMove"></bb-content-item-base>\n      <div class="list-tree-toggle" ng-if="folder.canToggle()">\n        <button class="button super-clear"\n                ng-click="folder.toggleFolder()"\n                aria-controls="{{::\'folder-contents-\' + content.id}}"\n                aria-expanded="{{folder.isOpen}}"\n                bb-translate-attrs="{\'aria-label\':\'components.directives.folder.aria-label.toggle-folder\'}"\n                translate-attrs-values="{folderName: content.title}"\n                analytics-id="course.content.folder.toggle.button">\n          <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n        </button>\n      </div>\n    </div>\n\n    <div ng-if="::(content.isLearningModule())" ng-class="{open: folder.isOpen}">\n      <bb-learning-module-base-item content="content" contents="contents" context-area="folder.contextArea" can-toggle="::folder.canToggle()"\n        toggle-func="folder.toggleFolder()" can-move="canMove" is-open="folder.isOpen">\n      </bb-learning-module-base-item>\n    </div>\n  </div>\n  <div ng-attr-id="{{::(content.isLearningModule() ? \'learning-module-contents-\' : \'folder-contents-\') + content.id}}" class="folder-contents" aria-expanded="{{folder.isOpen}}" ng-class="{\'not-empty\': content.children && content.children.length > 0}">\n    <div ng-if="(content.children.length > 0 || folder.showOutlineOverride) && folder.isOpen">\n      <bb-content-outline hide-add-menu-override="folder.showOutlineOverride" on-file-drop-handler="onFileDropHandler" on-move-handler="onMoveHandler"\n                          on-move-into-folder-handler="onMoveIntoFolderHandler" load-more-children="loadMoreChildren" parent-folder="folder.content"\n                          contents="folder.content.children" can-create="canCreate" can-move="canMove" context-area="folder.contextArea"\n                          can-copy-import="canCopyImport"></bb-content-outline>\n    </div>\n    <div class=\'drag-element\'>\n      <div bb-drop-handler\n        ng-show="content.children.length === 0"\n        on-move-handler="onMoveHandler"\n        on-move-into-folder-handler="onMoveIntoFolderHandler"\n        on-file-drop-handler="onFileDropHandler"\n        content="{id: content.id + \'blank\', parentId: content.id, depth: content.depth + 1}"\n        empty-target\n      >\n        <span class="empty-message" ng-if="content.children.length === 0 && folder.showEmptyMenu && !canCreate"\n          ng-class="{\'foder-in-force-sequence-empty-message\': content.isForcedSequenceItem()}"\n          bb-translate="{{\n              content.isLearningModule() ?\n                \'components.directives.learning-module.empty\' :\n                \'components.directives.folder.empty\'\n          }}">\n        </span>\n        <!-- (|| false) keep showMenuOverride in watch status in add-content-button directive -->\n        <!-- use ng-show instead of ng-if to keep the element when close add buttons, make sure the upload directive handlers will not be lost -->\n        <ng-switch on="::content.isLearningModule()">\n          <bb-add-content-button ng-switch-when="false" show-menu-override="folder.showMenuOverride || false" depth="(content.depth + 1)" content="content"\n                                 root-content="rootContent()" parent-id="content.id" position-before="\'start\'"\n                                 ng-show="canCreate && folder.showEmptyMenu" context-area="folder.contextArea"\n                                 can-copy-import="canCopyImport" folder-nested-button="true"></bb-add-content-button>\n          <bb-add-content-button ng-switch-when="true" show-menu-override="false" depth="(content.depth + 1)" content="content"\n                                 root-content="content" parent-id="content.id" position-before="\'start\'"\n                                 is-render-by-default="true"\n                                 class="empty-lm-add-content-btn"\n                                 ng-show="canCreate && folder.showEmptyMenu" context-area="folder.contextArea"\n                                 can-copy-import="canCopyImport" folder-nested-button="true"></bb-add-content-button>\n        </ng-switch>\n      </div>\n    </div>\n  </div>\n</div>\n'},402665:function(e){e.exports='<div bb-load-bundle="components/directives/content/learning-module/learning-module-base-item" class="base-content-item bb-lm-base-item"\n  bb-cache-compilation="lm-base-item" role="region" aria-labelledby="::learning-module-title-{{content.id}}">\n  <div class="content-item-base-container guidance-overflow-fix js-content-item-base" ng-paste="$event.stopPropagation()">\n    <div ng-switch on="content.ui.importPlaceholder">\n      <!-- Import placeholder  -->\n      <div ng-switch-when="true" class="placeholder-container" bb-focus>\n        <div class="placeholder-text" bb-translate>components.directives.content-item-base.copy-placeholder</div>\n        <div class="sr-only" bb-translate>components.directives.content-item-base.please-wait</div>\n      </div>\n\n      <!-- Non-imported content -->\n      <div ng-switch-default class="drag-element-row" ng-class="{\'is-restricted\': content.canEdit() && content.isHiddenFromStudents(), \'isNotClickable\': content.isConditionalReleaseLocked() || content.isRestricted() && !content.canEdit()}">\n        <div class="content-item-row">\n          <div class="content-item-details" ng-class="{\'is-uploading\':content.ui.isUploading}">\n            <div class="element-card outline-item">\n\n              <ng-switch on="content.ui.isUploading">\n                <!-- Uploading section begin -->\n\n                <div ng-switch-when="true" class="upload-file">\n                  <bb-progress displayResults="false" id="{{content.ui.fileUploadId}}" class="bb-progress"></bb-progress>\n                </div>\n                <!-- Uploading section end -->\n\n                <div class="outline-item-inner" ng-switch-default>\n\n                  <div class="lm-header-section">\n                    <!-- Learning Module title -->\n                    <div class="lm-header-row"\n                         ng-class="{\'lm-header-row-with-icon\': baseItem.shouldShowReviewStateIcon()}"\n                         bb-click-to-invoke-child=".list-tree-toggle button">\n                      <!-- Header row section -->\n                      <div class="lm-title-container">\n                        <div class="title-container">\n                          <!-- Conditional release section begin -->\n                          <bb-review-state-icon\n                            ng-if="::baseItem.shouldShowReviewStateIcon()"\n                            content-id="content.id"\n                            course-id="content.courseId"\n                            has-automatic-review-state-transition="!content.canUpdateReviewState()"\n                            before-item-state="baseItem.getNeighborReviewState()"\n                            after-item-state="baseItem.getNeighborReviewState()"\n                          ></bb-review-state-icon>\n                          <!-- Conditional release section end -->\n\n                          <!-- Attach event only at Instructor View -->\n                          <div ng-if="::content.canEdit()" class="lm-title-instructor">\n                            <button class="lm-title secondary-title ellipse"\n                              tabindex="0"\n                              bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.aria-label.toggleLM\'}"\n                              translate-attrs-values="{learningModuleName: content.title}"\n                              aria-expanded="{{isOpen}}"\n                              id="{{::\'learning-module-title-\' + content.id}}"\n                              ng-click="baseItem.toggleLM()"\n                              analytics-id="course.learning.module.base.item.toggleLm.button"\n                              aria-controls="{{::\'learning-module-contents-\' + content.id}}">\n                              {{content.title}}\n                            </button>\n                          </div>\n\n                          <!-- Just display title at Student View -->\n                          <div class="lm-title-student" ng-if="::(!content.canEdit())">\n                            <button class="lm-title secondary-title ellipse"\n                                tabindex="0"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.aria-label.toggleLM\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                aria-expanded="{{isOpen}}"\n                                ng-click="!content.isConditionalReleaseLocked() && baseItem.toggleLM()"\n                                id="{{::\'learning-module-title-\' + content.id}}"\n                                analytics-id="course.learning.module.base.item.toggleLm.button"\n                                aria-controls="{{::\'learning-module-contents-\' + content.id}}">\n                              {{::content.title}}\n                            </button>\n                            <div ng-if="content.isConditionalReleaseLocked()"\n                              role="tooltip"\n                              tabindex="0"\n                              class="lock-info"\n                              bb-complex-tooltip\n                              enhanced-tooltip="true"\n                              tooltip-position="bottom"\n                              tooltip-open-on-activation="true"\n                              tooltip-disable-on-mouse-over="true"\n                              tooltip-scope="baseItem.conditionalRelease.tooltipScope"\n                              tooltip-template="{{::baseItem.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n                              <span bb-translate>components.directives.content-item-base.conditionalRelease.lock-info</span>\n                              <span class="sr-only">{{baseItem.conditionalRelease.tooltips}}</span>\n                            </div>\n                          </div>\n                        </div>\n\n                        <!-- Learning Module visibility selector  -->\n                        <div class="lm-visibility-selector" ng-if="content.canEdit() || (baseItem.isCourseCompletedAndInInstructorView() && content.isConditionalRelease())">\n                          <bb-content-visibility-selector\n                            ng-if="::content.canEdit()"\n                            content="content"\n                            is-visibility-selector-enabled="true"\n                            onchange-func="baseItem.onChangeVisibility()"\n                            open-panel-on-restricted="true"\n                            disable-restricted="false"\n                            enable-conditional-release="true">\n                          </bb-content-visibility-selector>\n                          <div class="rules" ng-if="(content.canEdit() || baseItem.isCourseCompletedAndInInstructorView()) && content.isConditionalRelease()">\n                            <a href="javascript:void(0);"\n                              ng-click="baseItem.canOpenConditionalRelease && baseItem.openConditionalRelease()"\n                              bb-complex-tooltip\n                              enhanced-tooltip="true"\n                              tooltip-position="bottom"\n                              tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n                              tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n                              tooltip-auto-update="true"\n                              tooltip-scope="baseItem.conditionalRelease.tooltipScope"\n                              tooltip-template="{{::baseItem.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n                              analytics-id="components.directives.content-item-base.conditionalRelease.link">\n                              <span>{{baseItem.conditionalRelease.getConditionDescription()}}</span>\n                              <span class="sr-only">{{baseItem.conditionalRelease.tooltips}}</span>\n                            </a>\n                          </div>\n                        </div>\n                        <div ng-if="content.isForcedSequenceModule() && content.canEdit()"\n                          class="lm-instructor-note"\n                          bb-translate\n                        >\n                          components.directives.learning-module.base-item.forced-sequence.instructor-note\n                        </div>\n                        <!-- Learning Module control section begin -->\n\n                        <!-- for student -->\n                        <!-- <div ng-if="::(!content.canEdit())">\n                          <span class="lm-counting">{{baseItem.completed}} / {{baseItem.count}}</span>\n                        </div> -->\n\n                        <!-- for instructor -->\n                        <div ng-if="::(content.canEdit() && canMove)" class="lm-drag-button">\n                          <button bb-drag-handle drag-item-id="{{content.id}}"\n                                  drag-item-name="{{content.title}}"\n                                  drag-item-type="{{content.contentHandler}}"\n                                  drag-item-context="{{contextArea}}"\n                                  class="super-clear small button icon js-drag-handle"\n                                  translate-attrs-values="{contentTitle: content.title}"\n                                  bb-translate-attrs="{\'title\': \'components.directives.content-item-base.move\', \'aria-label\': \'components.directives.content-item-base.aria-label.move\'}"\n                                  analytics-id="course.learning.module.base.item.move.button">\n                            <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n                          </button>\n                        </div>\n                        <div bb-foundation-defer>\n                          <bb-overflow-menu ng-if="::(content.canDelete() || content.canEdit() || content.hasConversation() && !content.isConditionalReleaseLocked())"\n                                            element-id="{{::(\'learning-module\' + baseItem.controlId)}}"\n                                            element-name="{{content.title}}"\n                                            menu-items="baseItem.getOverflowMenu()"\n                                            analytics-id-tag-prefix="components.directives.learning-module.base-item.overflowMenu">\n                          </bb-overflow-menu>\n                        </div>\n                      </div>\n\n                      <div class="lm-description" ng-if="content.description">\n                        <bb-course-content-item-description class="description-show-text-container description-show-text"\n                          description="content.description"\n                        ></bb-course-content-item-description>\n                      </div>\n\n                      <!-- Learning Module control section end -->\n                      <div class="list-tree-toggle" ng-if="::(content.canEdit() || !content.isRestricted())">\n                        <button class="button super-clear" ng-click="baseItem.toggleLM()" aria-controls="{{::\'learning-module-contents-\' + content.id}}"\n                          aria-expanded="{{isOpen}}"\n                          bb-translate-attrs="{title: isOpen ? \'components.directives.learning-module.base-item.collapse\' : \'components.directives.learning-module.base-item.expand\'}"\n                          translate-attrs-values="{learningModuleName: content.title}"\n                          analytics-id="course.learning.module.base.item.toggleLm.button"\n                          >\n                          <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n                        </button>\n                      </div>\n                    </div>\n\n                    <bb-forced-sequence-warning-banner ng-if="baseItem.shouldShowForcedSequenceWarningBanner()"></bb-forced-sequence-warning-banner>\n\n                    <!-- Learning Module title section end -->\n                  </div>\n                </div>\n              </ng-switch>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},287633:function(e){e.exports='<bb-modal id="student-preview-modal" role="alertdialog" class="notification" bb-translate-attrs="{\'aria-label\': \'components.services.studentPreview.modalTitleKey\'}"\n          modal-title-key="{{::courseOrgTokenPrefix}}.studentPreview.modalTitleKey" aria-describedby="first-time-confimation"\n          analytics-id-tag-prefix="course.outline.studentPreview.firstTimeConfirmation">\n  <div name="modal-contents">\n    <bb-svg-icon size="custom" icon="preview-user-avatar"></bb-svg-icon>\n    <p id="first-time-info" bb-translate>\n      {{::courseOrgTokenPrefix}}.studentPreview.firstTimeConfirmation\n    </p>\n  </div>\n  <button name="modal-footer-button-primary"\n          type="button"\n          class="button js-discard-changes js-primary-button"\n          ng-click="$parent.$close()"\n          analytics-id="course.outline.studentPreview.firstTimeConfirmation.startPreview.button">\n    <span bb-translate="components.services.studentPreview.startPreview"></span>\n  </button>\n  <button name="modal-footer-button-secondary"\n          type="button"\n          class="button button--secondary js-cancel-discard js-secondary-button"\n          ng-click="$parent.$dismiss()"\n          analytics-id="course.outline.studentPreview.cancel.button">\n    <span bb-translate="components.services.studentPreview.cancel"></span>\n  </button>\n</bb-modal>\n'},320559:function(e){e.exports='<bb-modal id="remove-conditional-availability-confirmation-modal" \n          class="notification js-dismiss-modal" \n          role="alertdialog" \n          bb-translate-attrs="{\'aria-label\': \'course.conditionalRelease.removeConditionalAvailability.title\'}"\n          modal-title-key="course.conditionalRelease.removeConditionalAvailability.title"\n          analytics-id-tag-prefix="course.conditionalRelease.removeConditionalAvailability">\n  <div name="modal-contents">\n    <p bb-translate>\n      course.conditionalRelease.removeConditionalAvailability.instructions\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="button js-primary-button" \n          ng-click="$parent.$close()" \n          bb-translate\n          analytics-id="global.continue">\n    global.continue\n  </button>\n  <button name="modal-footer-button-secondary" \n          class="button button--secondary js-secondary-button" \n          ng-click="$parent.$dismiss()" \n          bb-translate\n          analytics-id="global.cancel">\n    global.cancel\n  </button>\n</bb-modal>\n'},918079:function(e){e.exports='<svg id="icon-large-avatar-multiple" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><g fill="none"  stroke-miterlimit="10"><path d="M37.685 17.545C37.976 12.214 41.593 8 46.012 8c4.609 0 8.345 4.583 8.345 10.237s-3.737 10.237-8.345 10.237c-1.683 0-3.25-.612-4.562-1.663"/><path d="M44.685 44.789h11.676C57.996 42.569 59 39.838 59 36.846c0-5.068-2.81-9.419-6.894-11.656M18.949 26.469c-1.387 1.26-3.103 2.005-4.962 2.005-4.609 0-8.345-4.583-8.345-10.237S9.379 8 13.987 8c4.39 0 7.988 4.158 8.32 9.438"/><path d="M7.894 25.191C3.81 27.428 1 31.779 1 36.847c0 2.992 1.004 5.722 2.639 7.943H15.27"/><g><ellipse cx="30" cy="27.514" rx="11.266" ry="13.223"/><path d="M19.619 32.661c-2.532 3.407-4.644 8.708-4.644 13.758 0 2.317.343 4.528.942 6.581h28.167c.599-2.054.942-4.264.942-6.581 0-5.09-2.075-10.343-4.644-13.758"/></g></g></svg>'},621865:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-discussion",use:"icon-medium-discussion-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-discussion"><path d="M8 21.4025a10.4446 10.4446 0 01-1.75-.8072L1 22l1.4318-5.2034C1.5217 15.2417 1 13.4318 1 11.5 1 5.701 5.701 1 11.5 1c4.5718 0 8.4611 2.9218 9.9025 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M9 16c0 3.866 3.134 7 7 7 1.3878 0 2.6812-.3803 3.7692-1.0769L23 23l-1.0769-3.2308C22.6197 18.6812 23 17.3878 23 16c0-3.866-3.134-7-7-7s-7 3.134-7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="13" cy="16" r=".5" /><circle cx="16" cy="16" r=".5" /><circle cx="19" cy="16" r=".5" /></symbol>'});s.add(r),e.exports=r},483291:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-groups",use:"icon-medium-groups-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-groups"><g clip-path="url(#icon-medium-groups_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 23.0644C17.3246 21.1155 14.8704 20 12 20s-5.3246 1.1155-7 3.0644M12 20c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8z" /><path d="M23 11s-1-3-4.5-3c-2.1456 0-3.3517 1.1274-3.9639 2M5.5 8C3.567 8 2 6.433 2 4.5S3.567 1 5.5 1 9 2.567 9 4.5 7.433 8 5.5 8zM1 11s1-3 4.5-3c2.1456 0 3.3517 1.1274 3.9639 2" /></g><defs><clipPath id="icon-medium-groups_clip0"><path d="M0 0h24v24H0z" /></clipPath></defs></symbol>'});s.add(r),e.exports=r},713690:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-invisible",use:"icon-medium-invisible-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-invisible"><circle cx="12" cy="12" r="2" stroke-width="2" /><path d="M12 6C7.1067 6 1 12 1 12s6.1067 6 11 6 11-6 11-6-6.1067-6-11-6zM1 23L23 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},278565:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-lock",use:"icon-medium-lock-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-lock"><path d="M11 16c0-.5523.4477-1 1-1v0c.5523 0 1 .4477 1 1v2c0 .5523-.4477 1-1 1v0c-.5523 0-1-.4477-1-1v-2z" stroke-width="2" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M3 11h18v12H3z" /><path d="M6 11V6s0-5 6-5 6 5 6 5v5" stroke-width="2" /></symbol>'});s.add(r),e.exports=r},95318:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-time",use:"icon-medium-time-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-time"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M12 5v7l4 4M10 14l-3 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},123405:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-medium-visible",use:"icon-medium-visible-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-visible"><circle cx="12" cy="12" r="2" stroke-width="2" /><path d="M12 6C7.1067 6 1 12 1 12s6.1067 6 11 6 11-6 11-6-6.1067-6-11-6z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},249017:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-arrow-down",use:"icon-small-arrow-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-arrow-down"><path d="M1 4l7 7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},614606:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-beast-analytics",use:"icon-small-beast-analytics-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-beast-analytics"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 8V1M8 8l5-4M8 8l4.5 4.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},18854:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-chat",use:"icon-small-chat-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-chat"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},733638:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-class-pulse-future",use:"icon-small-class-pulse-future-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-class-pulse-future"><path d="M9 14c0 .5523-.4477 1-1 1s-1-.4477-1-1 .4477-1 1-1 1 .4477 1 1zM11 6.5a.5.5 0 11-1 0 .5.5 0 011 0zM5.5 9.5a.5.5 0 11-1 0 .5.5 0 011 0z" /><path d="M15 11l-4.5-4.5-5.5 3-4-2.357M9 2c0 .5523-.4477 1-1 1s-1-.4477-1-1 .4477-1 1-1 1 .4477 1 1z" /><path d="M15 2H1v12h14V2z" /></symbol>'});s.add(r),e.exports=r},145668:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-conversation",use:"icon-small-conversation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-conversation"><path d="M15 4.5C15 6.433 13.433 8 11.5 8c-.4457 0-.872-.0833-1.264-.2352L8 8l.25-2.1985A3.4905 3.4905 0 018 4.5C8 2.567 9.567 1 11.5 1S15 2.567 15 4.5zM7 15c0-2-2-4-4-4M3 11c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},224470:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-discussion",use:"icon-small-discussion-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-discussion"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="5" cy="8" r=".5" /><circle cx="8" cy="8" r=".5" /><circle cx="11" cy="8" r=".5" /></symbol>'});s.add(r),e.exports=r},578187:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-documents",use:"icon-small-documents-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-documents"><path d="M1 4h7.0084L11 7v8H1V4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8.0005 4v3h3.0015M4 8h1M4 11h3.9722" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 1h11v12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},173631:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-export",use:"icon-small-export-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-export"><path d="M7 9l8-8M12 1h3v3M15 9.091V15H1V1h5.909" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},280139:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-groups",use:"icon-small-groups-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-groups"><path d="M12 15s-1-2-4-2M4 15s1-2 4-2M8 13c1.6569 0 3-1.3431 3-3S9.6569 7 8 7s-3 1.3431-3 3 1.3431 3 3 3zM12 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2zM1 7s1-2 3-2 3 2 3 2M9 7s1-2 3-2 3 2 3 2M4 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},611368:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-invisible",use:"icon-small-invisible-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-invisible"><path d="M8 3C4.6406 3 1 8 1 8s3.6406 5 7 5 7-5 7-5-3.6406-5-7-5zM1 13L15 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="1" stroke-width="2" /></symbol>'});s.add(r),e.exports=r},397174:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-lock",use:"icon-small-lock-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock"><path d="M3 8h10v7H3V8zM5 8V4c0-1.5 1-3 3-3m0 0c.5 0-.5 0 0 0zm0 0c2 0 3 1.5 3 3v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},213644:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-move-item-up-down",use:"icon-small-move-item-up-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-move-item-up-down"><path d="M5 11V3M7 4L5 2 3 4M11 5v8M9 12l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},579805:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-question-analysis",use:"icon-small-question-analysis-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-question-analysis"><path d="M11 1H5l1 2v4l-5 8h14l-5-8V3l1-2zM4.125 10h7.75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},709597:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-time",use:"icon-small-time-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-time"><path d="M15 8c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7 7 3.134 7 7zM5 11l1-1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 4v4l3 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r),e.exports=r},566997:function(e,t,n){var i=n(745966),s=n(610045),r=new i({id:"icon-small-visible",use:"icon-small-visible-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-visible"><path d="M8 3C4.6406 3 1 8 1 8s3.6406 5 7 5 7-5 7-5-3.6406-5-7-5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="1" stroke-width="2" /></symbol>'});s.add(r),e.exports=r},220794:function(e,t,n){"use strict";let i,s,r,o;n(458704),n(282753),n(526195),n(273452),n(660321),n(160839),n(914602),n(411850),n(839571),n(49661),n(418360),n(684875),n(939170),n(785106),n(481518),n(662721),n(396287),n(144152),n(156669),n(495954),n(646168);let a=new Map;"BroadcastChannel"in window||(window.BroadcastChannel=class{close(){window.removeEventListener("storage",this.onStorage);let e=a.get(this.id);e.delete(this),e.size||a.delete(this.id)}_onStorage({key:e,newValue:t,storageArea:n}){if(n===window.localStorage&&null!==t&&e.substring(0,this.id.length)===this.id)try{let e=JSON.parse(t);this.dispatchEvent(new MessageEvent("message",{data:e}))}catch(e){this.dispatchEvent(new ErrorEvent("messageerror",{error:e,message:"Failed to deserialize incoming message."}))}}postMessage(e){e=JSON.stringify(e);let t=`${this.id}${Date.now()}$${Math.random()}`;window.localStorage.setItem(t,e),setTimeout(()=>window.localStorage.removeItem(t),500),a.get(this.id).forEach(t=>{t!==this&&t.dispatchEvent(new MessageEvent("message",{data:JSON.parse(e)}))})}get onmessage(){return this.messageChannel.port1.onmessage}set onmessage(e){this.messageChannel.port1.onmessage=e}get onmessageerror(){return this.messageChannel.port1.onmessageerror}set onmessageerror(e){return this.messageChannel.port1.onmessageerror=e}addEventListener(...e){return this.messageChannel.port1.addEventListener.apply(this.messageChannel.port1,e)}removeEventListener(...e){return this.messageChannel.port1.removeEventListener.apply(this.messageChannel.port1,e)}dispatchEvent(...e){return this.messageChannel.port1.dispatchEvent.apply(this.messageChannel.port1,e)}constructor(e){this.name=e,this.id=`$BroadcastChannel$${e}$`,a.has(this.id)||a.set(this.id,new Set),a.get(this.id).add(this),this.onStorage=this._onStorage.bind(this),window.addEventListener("storage",this.onStorage),this.messageChannel=new MessageChannel}});var l,c=n(625506),d=n(464027),u=n(417073),p=n(103528),m=n(643292),h=n(714772),g=n(810309),f=n(458733),b=n(951248);let v={"course-content":g.vQ,"course-core":f.vQ,"learn-data-services":b.vQg},y={};function*C(){let e=function(e=v){return e!==i&&(y=function(e=v){let t={};return Object.keys(e).forEach(n=>{let i=e[n];Object.keys(null!=i?i:{}).forEach(e=>{let s=i[e],r=`${n}/${e}`;t[r]=s})}),i=e,Object.freeze(t)}(e)),y}(),t=Object.keys(e).map(t=>(0,h.Cs)(function(e,t=e.name){return function*(){for(;;)try{yield(0,h.RE)(e);break}catch(e){console.error(`Uncaught error in saga ${t}:`,e)}}}(e[t],t)));yield(0,h.$6)(t)}var S=n(379614),E=n(305233);let I="ultra.components.directives.animatedGif";class w{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="E",this.link=(e,t,n)=>{let i=d.element('<img role="presentation" alt="" style="width:0; height:0">');i.attr("src",t.attr("src")),t.append(i),this.timeout(()=>{t.attr("alt")&&i.attr("alt",t.attr("alt"))},e,0,!1);let s=()=>{i.off("load",s),i.attr("src",""),i.addClass("animated-gif"),this.timeout(()=>{i.removeAttr("style"),i.attr("src",t.attr("src"))},e,250,!1)};i.on("load",s)}}}w.$inject=["$injector",E.H],d.module(I,[E.e]).directive("bbAnimatedGif",["$injector",e=>e.instantiate(w)]),n(151526),n(86822);var A=n(873085),k=n(18447),x=n(822658),T=n(717716),P=n(168132),D=n(450100),G=n(158550),R=n(396184),B=n(247126);let L="ultra.bb.angulartics",N=e=>{},O=(e,t)=>{},M={subscribeToFramework:G.subscribeToFramework};d.module(L,["angulartics","angulartics.scroll",P.e1,D.e1,x.e1]).config(["$analyticsProvider",e=>{e.registerPageTrack(e=>{N(e)}),e.registerEventTrack((e,t)=>{O(e,t)}),c.fn.extend({waypoint(){return this.each(function(){c(this).triggerHandler("scrollby")})}})}]).run(["$rootScope","$timeout",P.YW.H,D.HV,x.HV,(e,t,n,i,s)=>{let r=i.getQueue("telemetry");function o(e){r.enqueue(()=>t(()=>(A.ZP.addHistory(e),n.$create(e)),1e3,!1))}function a(){return s.course?{id:s.course.id,uuid:s.course.uuid,batchUid:s.course.batchUid,ultraStatus:s.course.ultraStatus}:null}function l(e){if(e){if("{"===e[0])try{return JSON.parse(e)}catch(e){}return{value:e}}}M.subscribeToFramework("UltraTelemetry",(e,t)=>{let{analyticsId:n,...i}=null!=t?t:{};e===G.AnalyticsEventTypes.CLICK_EVENT&&o({action:"click",analyticsId:n,context:i,url:document.URL,applicationId:k.default.telemetryAppId,course:a()}),e===G.AnalyticsEventTypes.CHANGE_EVENT&&o({action:"change",analyticsId:n,context:i,url:document.URL,applicationId:k.default.telemetryAppId,course:a()})}),N=e=>{o({action:"pageview",analyticsId:e,url:document.URL,applicationId:k.default.telemetryAppId,course:a(),screenDimension:{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}})},O=(e,t)=>{t.id&&("click"===t.eventType||"scrollby"===t.eventType)&&o({action:t.eventType,analyticsId:t.id,url:document.URL,context:l(t.context),applicationId:k.default.telemetryAppId,course:a()})},e.$on(R.N.$stateChangeSuccess,(e,t,n,i)=>{var s;null!=t&&null!==(s=t.name)&&void 0!==s&&s.startsWith(null==i?void 0:i.name)||(function(e){if(!e)return[];let t=e.split(B.qt),n=[],i="";return t.forEach(e=>{""!==e&&(i=i.length>0?`${i}${B.qt}${e}`:e,n.push(i))}),n})(null==i?void 0:i.name).forEach(e=>{var n;!(null==t?void 0:null===(n=t.name)||void 0===n?void 0:n.startsWith(e))&&e.includes(B.qt)&&o({action:"panelclosed",analyticsId:e,url:document.URL,applicationId:k.default.telemetryAppId,course:a()})})}),document.addEventListener("click",e=>{let t,n;if((0,T.c1)(e.target))return;let i=d.element(e.target),s=i.closest("a"),r="_blank"===s.attr("target"),c=(0,T.X_)(i);if(c||(t=(0,T.IK)(i)||(0,T.CY)(i.parent())),!t&&r&&(t=i.attr("analytics-id")||"external-link"),t){if(c||(n=l((0,T.$o)(i))),r){var u,p;(n=null!=n?n:{}).value=null!==(u=n.value)&&void 0!==u?u:s.attr("href"),n.valueType=null!==(p=n.valueType)&&void 0!==p?p:"link"}o({action:"click",analyticsId:t,url:document.URL,context:n,applicationId:k.default.telemetryAppId,course:a()})}},!0)}]);var $=n(381235),H=n(108404),F=n(291146);let U="ultra.components.directives.dir";class V{constructor(e){this.bbLocalize=e,this.restrict="A",this.link=(e,t,n)=>{e.$watch("locale",()=>{n.attr=n.attr||"dir",n.rtl=n.rtl||"rtl",n.ltr=n.ltr||"ltr",this.bbLocalize.isRTL(e)?t.attr(n.attr,n.rtl):t.attr(n.attr,n.ltr)})}}}V.$inject=[F.serviceName],d.module(U,[]).directive("bbDir",["$injector",e=>e.instantiate(V)]);var _=n(345e3),q=n(287236),z=n(496037),W=n(915047),j=n(173773);let Z="ultra.directives.bbTime";class K{compile(e){let t=e.html();return(e,n,i)=>{let s=t=>{let s=this.bbLocalize.getFormatEnum(F.ILocaleTimeFormat,i.format)||F.ILocaleTimeFormat.Short;if("true"===i.epoch){let e=new Date(0);e.setUTCSeconds(t),t=e}let r=e=>{"bb-time"===n.prop("tagName").toLowerCase()?n.replaceWith(e):n.html(e)};null==t?r(""):this.bbLocalize.formatTime(t,s,e).then(r)};"true"===i.autoUpdate?i.$observe("bbTime",()=>{s(new Date(this.$parse(i.bbTime)(e)))}):s(this.$parse(t)(e)||new Date(this.$parse(i.bbTime)(e)))}}constructor(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}}K.$inject=["$parse",F.serviceName],d.module(Z,[F.moduleName]).directive("bbTime",["$injector",e=>e.instantiate(K)]);var X=n(442424);let Y="ultra.directives.bbNumber";class Q{compile(e){let t=e.html();return(e,n,i)=>{let s=this.$parse(t)(e);this.bbLocalize.formatNumber(s,e).then(e=>{"bb-number"===n.prop("tagName").toLowerCase()?n.replaceWith(e):n.html(e)})}}constructor(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}}Q.$inject=["$parse",F.serviceName],d.module(Y,[F.moduleName]).directive("bbNumber",["$injector",e=>e.instantiate(Q)]);var J=n(793423),ee=n(862231),et=n(915638),en=n(274711),ei=n(836657),es=n(555342);let er="ultra.directives.saveForm";class eo{validate(){return this.scope.validate()&&this.scope.baseForm&&this.scope.baseForm.$valid}save(){if(this.validate()){if(this.savePromise)this.queuedSave||(this.queuedSave=!0,this.savePromise=this.savePromise.finally(()=>(this.savePromise=null,this.queuedSave=!1,this.save())));else{this.autoSaveState=en.F.Saving;let e=this.scope.save();this.savePromise=e.then(e=>(this.autoSaveState=en.F.Saved,e))}return this.savePromise}}saveClicked(){if(this.autoSaveState===en.F.NotSaved)return this.save().then(()=>{this.scope.$emit("autosave-button-click",{target:"save"}),this.scope.showAlertMessage&&this.scope.showAlertMessage()});this.scope.$emit("autosave-button-click",{target:"save"})}cancelClicked(){if(this.scope.cancel){let e=this.scope.cancel();e?e.then(()=>{this.scope.$emit("autosave-button-click",{target:"cancel"})}):this.scope.$emit("autosave-button-click",{target:"cancel"})}}deleteClicked(){if(this.scope.delete){let e=this.scope.delete();e?e.then(()=>{this.scope.$emit("autosave-button-click",{target:"delete"})}):this.scope.$emit("autosave-button-click",{target:"delete"})}}mouseDown(){this.scope.$emit("bb-autosave-interrupt-timer"),this.scope.$emit("autosave-button-click",{target:"mouseDown"})}constructor(e,t){this.scope=e,this.$q=t,this.queuedSave=!1,e.editMode?(e.$broadcast("bb-save-button",es.Ht.Saved),this.autoSaveState=en.F.Saved):this.autoSaveState=en.F.NotSaved,e.$on(ee.qH,(t,n,i)=>{switch(e.$broadcast("bb-save-button",n,i),n){case es.Ht.Change:this.autoSaveState=en.F.NotSaved;break;case es.Ht.Saving:this.autoSaveState=en.F.Saving;break;case es.Ht.Saved:this.autoSaveState=en.F.Saved;case es.Ht.SaveFailure:case es.Ht.ValidationFailure:}})}}class ea{constructor(e){this.$q=e,this.transclude=!0,this.restrict="E",this.scope={save:"&",cancel:"&?",validate:"&",delete:"&?",canDelete:"=",deleteConfirmationResourceType:"@?",choices:"=?",editMode:"=",hideFooter:"=",baseForm:"=?",delayAutosave:"&?",displayDeleteAfterSaving:"&?",debounceSaveDestination:"&?",showAlertMessage:"&?",analyticsIdTagPrefix:"@"},this.link=(e,t)=>{e.saveForm=new eo(e,this.$q)},this.template=ei}}ea.$inject=["$q"],d.module(er,[ee.e1,et.e1]).directive("bbSaveForm",["$injector",e=>e.instantiate(ea)]);var el=n(934230);let ec="ultra.services.security",ed="xsrf",eu="X-Blackboard-XSRF",ep="xsrf-token-changed";class em{registerXsrfCallback(e){this.xsrfCallbacks.add(e),this.token&&this.invokeXsrfCallback(e)}unregisterXsrfCallback(e){return this.xsrfCallbacks.delete(e)}getToken(){return this.token}updateToken(e){return this.token===e||(this.token=e,this.xsrfCallbacks.forEach(e=>this.invokeXsrfCallback(e)),this.crossWindowMessaging.postMessage(ep,this.token)),this.token}invokeXsrfCallback(e){try{e(this.token)}catch(e){}}constructor(e,t){this.$rootScope=e,this.crossWindowMessaging=t,this.xsrfCallbacks=new Set,e.$on(ep,(e,t)=>this.updateToken(t)),e.$on("$destroy",()=>{this.xsrfCallbacks.clear()})}}em.$inject=["$rootScope",el.HV],d.module(ec,[el.e1]).service(ed,em);var eh=n(501),eg=n(372457),ef=n(621945),eb=n(81234),ev=n(100952),ey=n(499161),eC=n(785454),eS=n(294992),eE=n(842508),eI=n(567077),ew=n(352375),eA=n(603712),ek=n(625506);let ex="ultra.directives.conversionStatusBar";class eT{get showStatusBar(){return this._showStatusBar}set showStatusBar(e){let t=this._showStatusBar;this._showStatusBar=e,t!==e&&this.updateStatusClass()}updateStatusClass(){!this.showStatusBar||this.hideStatusBar()||this.inPreview?ek("body").removeClass("has-conversion-status-bar"):ek("body").addClass("has-conversion-status-bar")}identifyCourse(){return(this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course)?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()}useTheNewExperience(){this.course.setUltraStatusDecided().then(()=>{this.showStatusBar=!1,this.$rootScope.$broadcast("reloadCourse",this.courseId)})}backToClassic(){this.course.undoCourseConversion().then(e=>{let t=e.$response;if(200===t.status)this.ultraState.transitionTo(this.course.getBaseRoute()),this.$rootScope.$broadcast("convertToClassicCourse",this.course.id);else if(400===t.status||404===t.status){let e=this.$modal.open({template:eI,scope:this.$scope,resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/outline/course-outline")]}});e.result.then(()=>{this.ultraState.transitionTo(this.course.getBaseRoute())})}})}hideStatusBar(){return(this.ultraState.current.name.match(/\.peek\./g)||[]).length>1}constructor(e,t,n,i,s,r,o,a,l){this.$scope=e,this.$rootScope=t,this.$q=n,this.$modal=i,this.CourseModel=s,this.ultraState=r,this.contextCourse=o,this.bbLocalize=a,this.timeout=l,this.displayGuidanceBackToClassic=!1,this.identifyCourse().then(e=>{this.course=e,this.courseId=this.course.id,this.showStatusBar=!1,this.course.canConvert()&&(this.showStatusBar=this.course.isUltraPreview())}),e.$on("confirmNewExperience",()=>{this.useTheNewExperience()}),e.$on(eA.SA,(e,t)=>{this.inPreview=t,this.updateStatusClass(),this.showStatusBar=this.course.isUltraPreview()}),e.$on("$stateChangeSuccess",()=>{this.updateStatusClass()}),e.$on("$destroy",()=>{ek("body").removeClass("has-conversion-status-bar")})}}eT.$inject=["scope","$rootScope","$q","$modal",P.N7.H,B.HV,x.HV,F.serviceName,E.H];class eP{constructor(e){this.$injector=e,this.restrict="E",this.template=eE,this.scope={courseId:"@?"},this.link=e=>{e.conversionStatusBarController=this.$injector.instantiate(eT,{scope:e})}}}eP.$inject=["$injector"],d.module(ex,[x.e1,F.moduleName,P.e1,B.e1,E.e,ew.e1]).directive("bbConversionStatusBar",["$injector",e=>e.instantiate(eP)]);var eD=n(606592),eG=n(625506);let eR="ultra.components.directives.accessibility.enterKeyUpFocus";class eB{constructor(e){this.injector=e,this.restrict="A",this.link=(e,t,n)=>{t.on("keydown",e=>{e.keyCode!==eD.K5||n.bbTriggerEnterKeydown||e.preventDefault()}),t.on("keyup",t=>{if(t.keyCode===eD.K5&&(t.preventDefault(),t.stopPropagation(),e.$apply(()=>{e.$eval(n.ngClick||n.bbClick,{$event:t}),e.$eval(n.ngBlur,{$event:t})}),n.bbEnterKeyUpFocus)){let e=eG(n.bbEnterKeyUpFocus);if(n.indexToFocus){let t=Number(n.indexToFocus);e.eq(t).focus()}else e.focus()}})}}}eB.$inject=["$injector"],d.module(eR,[]).directive("bbEnterKeyUpFocus",["$injector",e=>e.instantiate(eB)]);var eL=n(908707),eN=n(915539),eO=n(266481),eM=n(451251),e$=n(335920),eH=n(558136);let eF="ultra.components.directives.bbGuidance",eU=/[_-]/g;(0,S.BT)({name:S.ZH,priority:S.lX});class eV{constructor(e,t,n,i){this.ultraState=e,this.offCanvas=t,this.timeout=n,this.$document=i,this.require="^bbFirstTimeContainer",this.replace=!0,this.restrict="E",this.scope={componentKey:"@",pageContainerSelector:"@?",alwaysShow:"@",displayPriority:"&?",broadcastGuidanceHideEvent:"@?",onGuidanceEnabledEvent:"@?",disableHideInPanelState:"@?",forceShowInPanelState:"@?"},this.transclude={title:"?bbGuidanceTitle"},this.template=eH,this.link=(e,t,n,i)=>{let s;if(!e.componentKey)throw Error("'component-key' attribute required in bb-guidance");e.componentKey=eM.EY(e.componentKey,eU);let r=t.closest(".bb-offcanvas-panel").attr("data-base-state-name"),o=!!e.onGuidanceEnabledEvent,a=new S.DO(t.get(0),S.ZH,e.componentKey,i.manager,i.firstTimeHelper,S._k,e.displayPriority&&e.displayPriority(),o);a.setShouldShow(()=>{let n=c(t).parent().is(":visible"),s=!!e.pageContainerSelector&&c(e.pageContainerSelector).is(":visible");return n||s?i.firstTimeHelper.shouldShow(a.componentKey,r,e.$eval(e.alwaysShow)):Promise.resolve(!1)}),e.isShown=a.shown,a.onShownChanged(t=>{e.$applyAsync(()=>{e.isShown=t})}),a.registerToManager();let l=t=>{c(t.target).parents().addBack();let n=!!e.disableHideInPanelState&&this.ultraState.includes(e.disableHideInPanelState);e.isShown&&!this.ultraState.transition&&!n&&(a.hide(),this.$document[0].removeEventListener("click",l,!0),e.broadcastGuidanceHideEvent&&e.$root.$broadcast(e.broadcastGuidanceHideEvent))},d=()=>{a.showComponent(),this.$document[0].addEventListener("click",l,!0)};s=null,e.onGuidanceEnabledEvent?(s=e.$root.$on(e.onGuidanceEnabledEvent,()=>{d()}),s=e.$root.$on("show-guidance-component",()=>{this.timeout(()=>{d()},e,600)}),i.firstTimeHelper.shouldShow("predict.wizard").then(t=>{let n=!!e.forceShowInPanelState&&this.ultraState.includes(e.forceShowInPanelState);(!t||n)&&d()})):this.$document[0].addEventListener("click",l,!0),e.$on("$destroy",()=>{a.deregisterFromManager(),this.$document[0].removeEventListener("click",l,!0),s&&s()})},this.ultraState=e}}eV.$inject=[B.HV,e$.HV,E.H,"$document"],d.module(eF,[B.e1,eL.e1]).directive("bbGuidance",["$injector",e=>e.instantiate(eV)]);let e_="ultra.components.directives.guidanceTarget";class eq{get multiTargetSupport(){return this.containerController.firstTimeHelper.hasMultiTargetSupport(this.componentKey)}registerToManager(){this.manager&&(this.hideImpl(),this.manager.registerTarget(this))}deregisterToManager(){this.manager&&this.manager.deregisterTarget(this)}onShown(){this.showImpl()}onHidden(){this.hideImpl()}showImpl(){this.element.addClass("is-guided")}hideImpl(){this.element.removeClass("is-guided")}constructor(e,t,n){this.element=e,this.componentKey=t,this.containerController=n,this.manager=n.manager}}class ez{constructor(){this.require="^bbFirstTimeContainer",this.restrict="A",this.link=(e,t,n,i)=>{if("false"!==n.showGuidanceTarget){let s=n.componentKey,r=n.componentKeyList,o=[],a=(e,n)=>{let i=new eq(t,e,n);i.registerToManager(),o.push(i)};if(!s&&!r)throw Error("'component-key' or 'component-key-list' attribute required in bb-guidance-target");if(r){let t=e.$watch(r,e=>{e&&e.length>0&&(e.forEach(e=>{a(e=eM.EY(e,eU),i)}),t())})}if(s&&a(s=eM.EY(s,eU),i),"true"!==n.keepGuidanceWhenFocusout){let n=()=>{e.$root.$broadcast("hide-ftue-component",s)};t.on("focusout",n),t.on("keypress",n),e.$on("$destroy",()=>{t.off("focusout",n),t.off("keypress",n)})}e.$on("$destroy",()=>{o.forEach(e=>e.deregisterToManager())})}}}}d.module(e_,[eL.e1]).directive("bbGuidanceTarget",["$injector",e=>e.instantiate(ez)]),n(3744);var eW=n(276635),ej=n(240231),eZ=n(625506);let eK="ultra.components.directives.hasFooter";class eX{constructor(e,t,n){this.scope=e,this.element=t,this.attrs=n,this.domChanged=()=>{let e=this.element.find("footer:not(.notification)").filter(":visible").filter(function(){return eZ(this).height()>0}),t=this.element.find(".import-status-bar").filter(":visible").filter(function(){return eZ(this).height()>0});e.length>0||t.length>0?(eZ(this.element).addClass("has-footer"),eZ(this.element).hasClass("in-preview-mode")&&eZ(window.parent.document).find("body").addClass("has-footer-in-preview-mode"),e.find(".navigation-visible").length>0&&eZ(this.element).addClass("has-navigation-footer")):(eZ(this.element).removeClass("has-footer"),eZ(this.element).hasClass("in-preview-mode")&&eZ(window.parent.document).find("body").removeClass("has-footer-in-preview-mode"))};let i=eW.debounce(this.domChanged,100,{leading:!0,trailing:!0});this.observer=new MutationObserver(i),this.observer.observe(t[0],{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),ej.c(this.element,i),ej.q(this.element,i),this.scope.$on("$destroy",()=>{this.observer.disconnect(),ej.c(this.element,i),ej.q(this.element,i)})}}eX.$inject=["scope","element","attrs"];class eY{constructor(e){this.$injector=e,this.restrict="A",this.link=(e,t,n)=>{e.hasfooter=this.$injector.instantiate(eX,{scope:e,element:t,attrs:n})}}}eY.$inject=["$injector"],d.module(eK,[]).directive("bbHasFooter",["$injector",e=>e.instantiate(eY)]);var eQ=n(625506);let eJ="ultra.directives.accessibility.keyboardClick";class e0{constructor(){this.restrict="A",this.link=(e,t,n)=>{t.on("keyup",e=>{let t=eQ(e.target),n=t.closest(".react-container").length>0,i="LI"===t.prop("tagName")&&"option"===t.attr("role")&&"listbox"===t.closest("UL").attr("role");(e.keyCode!==eD.K5||n||"file"===t.attr("type")||"INPUT"===t.prop("tagName")&&("INPUT"!==t.prop("tagName")||"checkbox"!==t.prop("type"))||"BUTTON"===t.prop("tagName")||"BODY"===t.prop("tagName")||"A"===t.prop("tagName")&&t.attr("href")||i)&&(e.keyCode!==eD.L_||n||"A"!==t.prop("tagName")&&("DIV"!==t.prop("tagName")||"button"!==t.attr("role")))||t.trigger("click")})}}}d.module(eJ,[]).directive("bbKeyboardClick",["$injector",e=>e.instantiate(e0)]);var e1=n(111451);let e2="ultra.components.directives.keyHideFtue";class e3{constructor(){this.restrict="A",this.link=(e,t,n)=>{let i=n.bbKeyHideFtue;if(!i)throw Error("'bb-key-hide-ftue' attribute should have value");let s=()=>{e.$root.$broadcast("hide-ftue-component",i)};t.on("focusout",s),t.on("keypress",s),e.$on("$destroy",()=>{t.off("focusout",s),t.off("keypress",s)})}}}d.module(e2,[]).directive("bbKeyHideFtue",["$injector",e=>e.instantiate(e3)]);var e9=n(815922);let e4="ultra.directives.accessibility.focusNext";class e7{constructor(){this.restrict="A",this.link=(e,t,n)=>{let i="true"===n.bbFocusNextOneTimeOnly;!function(e,t,n){e.on("keydown.focusNext",i=>{if(i.keyCode===eD.Mf&&!i.shiftKey&&t){let s=d.element(t);s.length>=1&&-1!==parseInt(s.attr("tabindex"),10)&&(s.first().focus(),i.preventDefault(),n&&e.off("keydown.focusNext"))}})}(t,n.bbFocusNext,i)}}}d.module(e4,[]).directive("bbFocusNext",["$injector",e=>e.instantiate(e7)]);let e5="ultra.directives.accessibility.focusPrev";class e6{constructor(){this.restrict="A",this.link=(e,t,n)=>{let i="true"===n.bbFocusPrevOneTimeOnly;!function(e,t,n){e.on("keydown.focusPrev",i=>{if(i.keyCode===eD.Mf&&i.shiftKey&&t){let s=d.element(t);s.length>=1&&-1!==s.prop("tabindex")&&(s.first().focus(),i.preventDefault(),n&&e.off("keydown.focusPrev"))}})}(t,n.bbFocusPrev,i)}}}d.module(e5,[]).directive("bbFocusPrev",["$injector",e=>e.instantiate(e6)]),n(20720);var e8=n(625506);let te="ultra.directives.bbFoundationDropdownClose",tt="bbFoundationDropdownClose";class tn{constructor(){this.restrict="A",this.link=(e,t,n)=>{let i="keyup."+tt;t.on("click",e=>{let n=e8(e.target);if(n.closest("[data-dropdown]").length<=0&&(n.closest(".f-dropdown").length<=0||n.closest(".f-dropdown a").length>0)){let e=t.find(".f-open-dropdown");if(e.length&&e.foundation("dropdown","close",e),window.top!==window){let e=e8(window.parent.document).find(".f-open-dropdown");e.foundation("dropdown","close",e)}}}),t.on("scroll",e=>{let t=e8(e.target);t.hasClass("f-dropdown")||0!==t.parents(".f-dropdown").length||e8(".f-open-dropdown").each(function(){e8(this).foundation("dropdown","close",e8(this))})}),e8("body").on(i,e=>{if(e.keyCode===eD.Mf){let e=t.find(".f-open-dropdown"),n=e8(document.activeElement).is(".f-open-dropdown"),i=e8(document.activeElement).parents(".f-open-dropdown").length>0;n||i||e.foundation("dropdown","close",e)}}),e.$on("$destroy",()=>{t.off(),e8("body").off(i)})}}}d.module(te,[]).directive(tt,["$injector",e=>e.instantiate(tn)]);var ti=n(625506);let ts="ultra.components.directives.hoverMenuOpacity";class tr{constructor(){this.restrict="A",this.link=(e,t)=>{t.on("focus",".hover-menu a, .hover-menu button",e=>{0===ti("body.hide-focus-outline").length&&ti(e.target).closest(".hover-menu").css({opacity:1})}).on("blur",".hover-menu a, .hover-menu button",e=>{ti(e.target).closest(".hover-menu").removeAttr("style")})}}}tr.$inject=["$injector"],d.module(ts,[]).directive("bbHoverMenuOpacity",["$injector",e=>e.instantiate(tr)]);var to=n(685414),ta=n(915121),tl=n(401078),tc=n(227961),td=n(366122);let tu="ultra.directives.contentImportStatusBar";class tp{identifyCourse(){return(this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course)?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()}confirm(){let e="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(e,"false").then(()=>{this.$scope.display=!1})}undo(){let e="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(e,"true").then(()=>{this.$scope.display=!1})}goToImportReport(){this.ultraState.goPeekState("content-manage.import-report",{id:this.$scope.taskId})}hideStatusBar(){return -1!==this.ultraState.current.name.indexOf(this.baseState)&&this.ultraState.current.name.length>this.baseState.length}getItemsCount(){return this.course.getImportCopyTaskStatus(this.$scope.taskId).then(e=>{let t=e.$response.data.conversionReportTORest;if(t){let e=t.filter(e=>P.SF.mA.Success!==e.ultraConversionStatus);return e.length}return 0})}constructor(e,t,n,i,s,r,o,a,l){this.$scope=e,this.$rootScope=t,this.element=n,this.$q=i,this.CourseModel=s,this.ultraState=r,this.context=o,this.bbLocalize=a,this.contextCourse=l,this.identifyCourse().then(t=>{this.course=t,this.baseState=r.current.name,n.detach().appendTo(d.element(".side-panel-content")),e.$on("$destroy",()=>{d.element(".side-panel-content > "+n.get(0).tagName).length>0&&d.element(".side-panel-content > "+n.get(0).tagName).remove()}),e.$watch("taskId",()=>{e.taskId&&this.getItemsCount().then(e=>{this.notCarriedForwardItemsCount=e})})})}}tp.$inject=["scope","$rootScope","element","$q",P.N7.H,B.HV,eh.HV,F.serviceName,x.HV];class tm{constructor(e){this.$injector=e,this.restrict="E",this.template=td,this.scope={display:"=",taskId:"=",courseId:"@?"},this.link=(e,t)=>{e.contentImportStatusBarController=this.$injector.instantiate(tp,{scope:e,element:t})}}}tm.$inject=["$injector"],d.module(tu,[eh.e1,F.moduleName,P.e1,B.e1]).directive("bbContentImportStatusBar",["$injector",e=>e.instantiate(tm)]);var th=n(335614),tg=n(625506);let tf="ultra.components.directives.ultraState.peekSref";class tb{constructor(e,t,n,i){this.$parse=e,this.uiSrefDirective=t,this.ultraState=n,this.context=i,this.restrict=this.uiSrefDirective[0].restrict,this.scope=!0,this.require=this.uiSrefDirective[0].require,this.link=(e,t,n,i)=>{let s=this.$parse(n.bbPeekSref)(e)||n.bbPeekSref,r=t.closest("[data-base-state-name]").data("baseStateName")||this.context.basePage;this.ultraState.getPeekStateName(s,r).then(s=>{n.uiSref=s;let r=this.uiSrefDirective[0].compile(t,n,void 0);r(e,t,n,i),n.bbPreventRoutingClick&&t.bind("click",e=>{tg(e.target).closest(n.bbPreventRoutingClick).length>0&&e.preventDefault()})})}}}tb.$inject=["$parse","uiSrefDirective",B.HV,eh.HV],d.module(tf,["ui.router",eh.e1,B.e1]).directive("bbPeekSref",["$injector",e=>e.instantiate(tb)]);let tv="ultra.directives.preventClick";class ty{constructor(e,t){this.$parse=e,this.$rootScope=t,this.priority=101,this.restrict="A",this.compile=(e,t)=>{let n=this.$parse(t.bbPreventClickIf);return{pre:(e,t)=>{t.on("click",t=>{function i(){if(n(e,{$event:t}))return t.stopImmediatePropagation(),t.preventDefault(),!1}this.$rootScope.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}}ty.$inject=["$parse","$rootScope"],d.module(tv,[]).directive("bbPreventClickIf",["$injector",e=>e.instantiate(ty)]);var tC=n(916415),tS=n(294451);let tE="ultra.components.directives.accessibility.readInfo";class tI{constructor(e,t,n,i){this.scope=e,this.element=t,this.attrs=n,this.timeout=i,this.message="",this.alertMessage="",tC.ZU.OnRootScope(e,"read-info-directive",(t,n)=>{this.message=n,i(()=>{this.message=""},e,1e3)}),tC.ZU.OnRootScope(e,"read-info-directive-alert",(t,n,s)=>{void 0!==s?(this.alertMessage="",i(()=>{this.alertMessage=n},e,s)):(this.alertMessage=n,i(()=>{this.alertMessage=""},e,1e3))})}}tI.$inject=["scope","element","attrs",E.H];class tw{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="A",this.link=(e,t,n)=>{t.append(this.$compile(tS)(e)),e.readInfo=this.$injector.instantiate(tI,{scope:e,element:t,attrs:n})}}}tw.$inject=["$injector","$compile"],d.module(tE,[E.e]).directive("bbReadInfo",["$injector",e=>e.instantiate(tw)]);var tA=n(840649);let tk="ultra.components.directives.accessibility.skipLink";class tx{constructor(){this.restrict="E",this.scope={bbSkipLinkTarget:"@",bbSkipLinkFocusNext:"@?"},this.template=tA,this.link=(e,t,n)=>{t.find(".skip-link").on("click",()=>{let e=t.closest(".bb-offcanvas-panel");e.length||(e=t.closest("#site-wrap"));let i=e.find(n.bbSkipLinkTarget).first();i.focus(),i.is(document.activeElement)||null!=i.attr("tabindex")||(i.attr("tabindex","-1"),i.focus())})}}}d.module(tk,[]).directive("bbSkipLink",["$injector",e=>e.instantiate(tx)]);var tT=n(491966),tP=n(489081),tD=n(709620),tG=n(725781),tR=n(685772),tB=n(691885),tL=n(681739),tN=n(619930),tO=n(839650),tM=n(834266),t$=n(144597);n(368952);var tH=n(270679),tF=n(275325),tU=n(625506);let tV="ultra.components.directives.firstVisit";class t_{alterBodyStyles(e,t){tU("body").addClass(t),e.$on("$destroy",()=>{tU("body").removeClass(t)})}resizeWelcomeWindow(e,t){let n;let i=()=>{let e=t.find(".current-view"),n=e.offset().top,i=this.$q.defer(),s=this.$q.defer();t.closest("body").animate({scrollTop:n},{duration:500,always(){i.resolve()}}),t.closest("html").animate({scrollTop:n},{duration:500,always(){s.resolve()}}),this.$q.all([i.promise,s.promise]).then(()=>e.find("a.ftue-img").focus())},s=e=>{let t=tU(e.target),n=t.closest(".ftue-new-slide").next();tU(n).addClass("current-view").siblings().removeClass("current-view"),i()};t.on("click",".scroll-button",s),tH.Z.detect().desktop()&&tC.ZU.OnWindow("resize",()=>{this.timeout.cancel(n),n=this.timeout(()=>{let e=t.find(".ftue-new-slide");for(let t=0;t<e.length;t++){let n=e.eq(t),i=n.find(".slide-content").height(),s=n.find(".slide-control").height(),r=parseInt(n.find(".slide-content").css("top"),10),o=i+s+r+40;n.css("min-height",o);let a=tU(window).height();a>o&&n.css("height",a)}i()},e,250,!1)},e),e.$on("$destroy",()=>{t.off("click",".scroll-button",s)})}constructor(e,t,n){this.$q=e,this.bbContext=t,this.timeout=n,this.restrict="E",this.template=tF,this.link=(e,t,n)=>{this.alterBodyStyles(e,"ftue-on");let i=n.path,s=n.place,r="ultraui.first.time."+i+"."+s+".visited";e.firstVisit=!1,e.loadImage=(e,t,n,i=null)=>{let s=n.inViewTarget;e&&"both"===t&&!s.src.match(RegExp(i+"$"))&&(s.src=i)},this.bbContext.getPreference(r,"false").then(n=>{"false"===n.value?(e.firstVisit=!0,this.bbContext.setPreference(r,"true"),this.resizeWelcomeWindow(e,t)):"true"===n.value&&(e.firstVisit=!1)})}}}t_.$inject=["$q",eh.HV,E.H],d.module(tV,[eh.e1,"angular-inview",E.e]).directive("bbFirstVisit",["$injector",e=>e.instantiate(t_)]);var tq=n(58904),tz=n(202784),tW=n(292050),tj=n(957244),tZ=n(529462),tK=new class{init(){this.integrationContainer=document.querySelector(".integration-react-container"),this.portalManager.addPortalListener(this.onPortalEvent),this.integrationService.addIntegrationMessageType(tj.Oz,this.updatePortal)}generateUniqueDomElement(){let e=tZ.V(),t=document.createElement("div");return t.id=e,this.integrationContainer.appendChild(t),t}getIntegrationContainer(){return this.integrationContainer}constructor(e,t){this.integrationService=e,this.portalManager=t,this.sendNewPortal=e=>{this.integrationService.sendEventMessage({type:tj.Fm,eventType:tj.Kj.PortalNew,portalId:e.portalId,selector:e.selector,selectorData:e.selectorData},e.owningIntegrationId)},this.sendRemovedPortal=e=>{this.integrationService.sendEventMessage({type:tj.Fm,eventType:tj.Kj.PortalRemove,portalId:e.portalId,selector:e.selector,selectorData:e.selectorData},e.owningIntegrationId)},this.sendCallbackPortal=e=>{this.integrationService.sendMessage({type:tj.l4.PortalCallback,callbackId:e.callbackId,portalId:e.portalId,event:e.event},e.owningIntegrationId)},this.sendRenderFailure=e=>{if(!e.requestingIntegrationId){console.warn("Unable to send error to targetless portal");return}this.integrationService.sendMessage({type:tj.pM,portalId:e.portalId,status:tj.xR.Failure,error:e.error,errorMessage:e.errorMessage},e.requestingIntegrationId)},this.onPortalEvent=(e,t)=>{switch(e){case tj.DI.NewPortal:this.sendNewPortal(t);break;case tj.DI.RemovedPortal:this.sendRemovedPortal(t);break;case tj.DI.CallbackPortal:this.sendCallbackPortal(t);break;case tj.DI.FailedValidationPortal:this.sendRenderFailure(t)}},this.updatePortal=(e,t)=>{if(!e)return;let{portalId:n,contents:i}=e,s=this.portalManager.updatePortal({portalId:n,contents:i,requestingIntegrationId:t.id},()=>{let e=this.portalManager.getPortalData(n),i=e.getOwningIntegrationId();if(i&&i!==t.id)return{portalId:n,error:tj.yr.Authorization,errorMessage:`Portal ${n} is already owned by ${i} -- not allowing render from ${t.id}`,requestingIntegrationId:t.id}});s&&(this.portalManager.setPortalOwnership(n,t.id),this.sendRenderSuccess(t.id,n))},this.sendRenderSuccess=(e,t)=>{this.integrationService.sendMessage({type:tj.pM,portalId:t,status:tj.xR.Success},e)}}}(tq.Z,tW.hE),tX=n(928316),tY=n(609582),tQ=n(632188),tJ=n(311822);let t0=e=>{let{integrationId:t,contents:n,portalId:i}=e;return tz.createElement(tW.$2,{portalType:t2,initialOwningIntegrationId:t,initialContents:n,portalId:i})};var t1=n(174897);let t2="modal",t3={[tj.l1.Small]:tY.DialogType.small,[tj.l1.Large]:tY.DialogType.large,[tj.l1.Medium]:tY.DialogType.normal};var t9=new class{init(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(tj.BG.ModalNew,this.onPortalModal),this.integrationService.addIntegrationMessageType(tj.BG.ModalClose,this.onPortalModalClose),this.initializeWhitelist()}initializeWhitelist(){this.modalWhitelist.set(tj.sH.Modal,{props:{width:!0},isValid:(e,t)=>this.isValidModalElement(e,t),render:(e,t,n)=>{let{width:i,...s}=t,r=t3[i];return tz.createElement(tJ.Dy,{...s,dialogContentProps:{type:r},hidden:!1,onDismiss:()=>this.closePortalModal()},n)}}),this.modalWhitelist.set(tj.sH.ModalHeader,{props:{title:!1},isValid:e=>(e.props&&e.props.title&&"string"!=typeof e.props.title&&console.warn(`Invalid prop \`title\` value: expected \`string\` but received \`${typeof e.props.title}\`, defaulting to no title.`),!0),render:(e,t,n)=>tz.createElement(tY.DialogHeader,{...t,analyticsId:"integration.modal.header",showCloseButton:!0,onDismiss:()=>this.closePortalModal(),closeButtonAriaLabel:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:"global.close"})},n)}),this.modalWhitelist.set(tj.sH.ModalBody,{isValid:e=>!0,render:(e,t,n)=>tz.createElement("div",{key:t.key},n)}),this.modalWhitelist.set(tj.sH.ModalFooter,{isValid:e=>!0,render:(e,t,n)=>tz.createElement(tY.DialogFooter,t,n)}),this.componentManager.addComponentType(t2,1,this.modalWhitelist)}constructor(e,t,n,i){this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.portalManager=i,this.modalWhitelist=new Map,this.isValidModalElement=(e,t)=>{if(!tj.B$.has(e.props.width))return console.warn(`Invalid prop \`width\` of value ${e.props.width} supplied to ${e.tag}, expected one of [${Object.values(tj.X$)}].`),!1;if(!e.children)return console.warn(`Children are needed for ${tj.sH.Modal}, but no value for \`children\` was given.`),!1;if("string"==typeof e.children)return console.warn("Incorrect children value: expected `Array` but received `string`."),!1;let n=[tj.sH.ModalHeader,tj.sH.ModalBody,tj.sH.ModalFooter];if(e.children.length!==n.length)return console.warn(`Incorrect number of children elements: expected ${n.length}, but received ${e.children.length}.`),!1;for(let i=0;i<n.length;i++){let s=e.children[i];if(s.tag!==n[i])return console.warn(`Incorrect order of children: position ${i} expected ${n[i]}, but received ${s.tag}.`),!1;if(!this.componentManager.isValidComponent({componentContext:t2,componentName:n[i],contents:s,integrationId:t}))return!1}return!0},this.onPortalModal=(e,t)=>{if(!this.isValidRequestParameters(e,t))return;let n=tQ.Z.length()>0,i=tJ.gk.getInstance().isModalDisplaying(),s=this.componentManager.overMaxComponents(t2);if(s||i||n){console.error("A modal is already open; not opening another one."),this.sendModalMessage(t,null,e.modalId,tj.xR.Failure,tj.fZ.ModalAlreadyOpenError,"A modal is already open; not opening another one.");return}let r=this.portalManager.validateContents({portalType:t2,contents:e.contents,integrationId:t.id});if(!r.passed){this.sendModalMessage(t,null,e.modalId,tj.xR.Failure,tj.fZ.FailedComponentValidationError,`Component validation failed; not rendering ${tj.sH.Modal}.`);return}this.modalId=e.modalId,this.owningIntegration=t;let o=tZ.V();this.currentModal=this.integrationPortalService.generateUniqueDomElement();let a={owningIntegrationId:t.id,portalId:o,element:this.currentModal};return this.render(a,e.contents).then(()=>{this.sendModalMessage(t,a.portalId,this.modalId,tj.xR.Success)})},this.isValidRequestParameters=(e,t)=>e.type&&e.type===tj.BG.ModalNew?e.modalId?!!e.contents||(console.warn("Not a valid new modal request, `contents` were not provided."),this.sendModalMessage(t,null,e.modalId,tj.xR.Failure,tj.fZ.MissingContentsError,"Not a valid new modal request, `contents` were not provided."),!1):(console.warn("Not a valid new modal request, `modalId` must be a unique non-empty value."),this.sendModalMessage(t,null,e.modalId,tj.xR.Failure,tj.fZ.InvalidIdError,"Not a valid new modal request, `modalId` must be a unique non-empty value."),!1):(console.warn(`Not a valid new modal request, \`type\` must be ${tj.BG.ModalNew}.`),this.sendModalMessage(t,null,e.modalId,tj.xR.Failure,tj.fZ.InvalidRequestTypeError,`Not a valid new modal request, \`type\` must be ${tj.BG.ModalNew}.`),!1),this.render=(e,t)=>new Promise(n=>{tX.render(tz.createElement(t1.g,{babelfishInstance:this.bbLocalize.intl,babelfishFormatInstance:this.bbLocalize.frmt,locale:this.bbLocalize.getLocale(null),isRtl:this.bbLocalize.isRTL()},tz.createElement(t0,{integrationId:e.owningIntegrationId,portalId:e.portalId,contents:t})),e.element,()=>{n()})}),this.onPortalModalClose=(e,t)=>{if(this.owningIntegration&&this.owningIntegration.id!==t.id){console.warn(`The integration ${t.id} does not own the modal of ${e.modalId}; not closing modal`),this.sendModalCloseResponseMessage(t,e.modalId,tj.xR.Failure,tj.fZ.WrongOwnerError,`The integration ${t.id} does not own the modal of ${e.modalId}; not closing modal`);return}if(this.modalId!==e.modalId){console.warn(`No modal has an id of ${e.modalId}`),this.sendModalCloseResponseMessage(t,e.modalId,tj.xR.Failure,tj.fZ.ModalNotFoundError,`No modal has an id of ${e.modalId}`);return}this.closePortalModal(e.modalId,t)},this.closePortalModal=(e,t)=>{this.currentModal&&(tX.unmountComponentAtNode(this.currentModal),this.sendModalCloseResponseMessage(t||this.owningIntegration,e||this.modalId,tj.xR.Success))},this.sendModalMessage=(e,t,n,i,s,r)=>{this.integrationService.sendMessage({type:tj.BG.ModalResponse,status:i,portalId:t,modalId:n,...s&&{error:s},...r&&{errorMessage:r}},e)},this.sendModalCloseResponseMessage=(e,t,n,i,s)=>{this.integrationService.sendMessage({type:tj.BG.ModalCloseResponse,status:n,modalId:t,...i&&{error:i},...s&&{errorMessage:s}},e)}}}(tq.Z,tK,tW.yW,tW.hE),t4=n(313021);let t7={type:tj.cQ,status:tj.xR.Success},t5={type:tj.cQ,status:tj.xR.Failure};var t6=new class{init(){this.integrationService.addIntegrationMessageType(tj.e0,this.injectJs)}constructor(e){this.createScriptElement=e=>{let t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("type","text/javascript"),t.setAttribute("async","true"),t},this.injectJs=(e,t)=>{e.url&&e.url.startsWith("https://")||this.integrationService.sendMessage({...t5,reason:"Insecure URL"},t);let n=this.createScriptElement(e.url);document.body.appendChild(n),n.addEventListener("load",()=>{this.integrationService.sendMessage(t7,t)}),n.addEventListener("error",e=>{let n=e.message||"Invalid Script File";this.integrationService.sendMessage({...t5,reason:n},t)})},this.integrationService=e}}(tq.Z),t8=n(425372),ne=n(300105);let nt=e=>{let{component:t,contents:n}=e,[i,s]=tz.useState(t.shown);return tz.useEffect(()=>(s(t.shown),t.addListener(s),()=>{t.removeListener(s)}),[t]),i&&tz.createElement(tW.$2,{portalType:ng,initialOwningIntegrationId:t.integrationId,initialContents:n,portalId:t.portalId})};var nn=n(89505),ni=n(545051),ns=n(945209),nr=n(465139);let no={[tj.l1.Small]:250,[tj.l1.Medium]:300,[tj.l1.Large]:500},na={[tj.CD.Light]:ns.DefaultPalette.white,[tj.CD.Dark]:ns.DefaultPalette.neutralDark},nl={[tj.$n.BottomLeft]:ni.ScreenPosition.bottomLeft,[tj.$n.BottomRight]:ni.ScreenPosition.bottomRight,[tj.$n.TopLeft]:ni.ScreenPosition.topLeft,[tj.$n.TopRight]:ni.ScreenPosition.topRight},nc=(e,t)=>{let n=no[tj.l1.Medium];return!e.isSmallBreakpoint()||no[t]<=n?no[t]:(console.warn("Requested prop `size` is greater than current breakpoint size: reducing `size` to medium breakpoint."),n)},nd=e=>{if(e.isSmallBreakpoint())return tY.DirectionalHint.bottomCenter},nu=(e,t)=>{if(e.isSmallBreakpoint())return(0,ni.getScreenPositionPoint)(ni.ScreenPosition.bottomCenter);if(t.selector.type===tj.LB.Region){let e=nl[t.selector.value];return(0,ni.getScreenPositionPoint)(e)}return t.targetElementFinder()},np=e=>e.isLargeBreakpoint()?tj.iA.Large:e.isMediumBreakpoint()?tj.iA.Medium:tj.iA.Small,nm=(0,nn.windowResizingResponsiveComponentWrapper)(e=>{let{children:t,hideBeak:n,key:i,notificationData:s,onDismiss:r,size:o,theme:a,UltraWindowSize:l}=e,c=nu(l,s),d=s.targetElementFinder(),[u,p]=tz.useState(()=>{var e,t;return"callout-"+s.selector.type===tj.LB.Region?"regional":null===(e=null==d?void 0:d.getBoundingClientRect())||void 0===e?void 0:null===(t=e.top)||void 0===t?void 0:t.toString()}),m=np(l),h=nc(l,o),g=na[a],f=nd(l),b=(0,nr.zX)(()=>{if(d&&(0,es.PZ)(d)){var e;p(`target${null===(e=d.getBoundingClientRect())||void 0===e?void 0:e.top}`)}else r()});return tz.useEffect(()=>{let e=eW.debounce(()=>b(),100);if(s.selector.type!==tj.LB.Region)return document.body.addEventListener("scroll",e,!0),()=>{document.body.removeEventListener("scroll",e),e.cancel()}},[s.selector.type,b]),tz.createElement(tY.Callout,{key:i,target:c,onDismiss:r,calloutWidth:h,setInitialFocus:!0,isBeakVisible:!n,directionalHint:f,className:`integration-notification-${a}`,backgroundColor:g,minPagePadding:m,allowDismissOnFocusTarget:!0,preventDismissOnScroll:!0,calloutId:u},tz.createElement("div",{tabIndex:0},t))});class nh{get shown(){return this._shown}setShown(e){this.shown!==e&&(this._shown=e,this.listeners.forEach(t=>t(e)))}constructor(e,t){this.notificationData=e,this.guidanceManager=t,this.componentType="IntegrationNotification",this.priority=2*S.Di,this.isInitialHide=!1,this._shown=!1,this.listeners=[],this.shouldShow=()=>new Promise((e,t)=>{let n=!!this.notificationData.targetElementFinder();e(n)}),this.addListener=e=>{this.listeners.push(e)},this.removeListener=e=>{let t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)},this.onShown=()=>{this.setShown(!0)},this.onHidden=e=>{this.setShown(!1)},this.dispose=()=>{this.listeners=[],this.guidanceManager.deregisterComponent(this)},this.componentKey=`integration.notification.${e.portalId}`,this.notificationId=e.notificationId,this.portalId=e.portalId,this.integrationId=e.owningIntegrationId,this.data=e,this.guidanceManager.registerComponent(this),this.guidanceManager.startQueue()}}let ng="notification";var nf=new class{init(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(tj.Eo.NotificationNew,this.onPortalNotification),this.integrationService.addIntegrationMessageType(tj.Eo.NotificationClose,this.onPortalNotificationClose),this.notificationWhitelist.set(tj.D_.Notification,{props:{size:!0,theme:!1,hideBeak:!1,directionalHint:!1},isValid:e=>this.isValidNotificationElement(e),render:(e,t,n)=>{let{key:i,size:s,theme:r=tj.CD.Light,hideBeak:o}=t,a=this.notificationMap.get(e);return tz.createElement(nm,{size:s,hideBeak:o,key:i,notificationData:a.component.data,onDismiss:()=>{this.closeNotification(e)},theme:r},n)}}),this.componentManager.addComponentType(ng,0,this.notificationWhitelist)}getTargetElementFinder(e,t){if(e.type===tj.LB.Region)return()=>this.integrationPortalService.getIntegrationContainer();let n=()=>this.findElementByAnalyticsId(e.value);if(n())return n;console.warn("Invalid notification target"),this.sendNotificationResponseMessage(t,null,tj.xR.Failure,tj.ZN.InvalidTargetError,"Invalid notification target")}findNotification(e){let t=Array.from(this.notificationMap.values()).find(t=>t.component.notificationId===e);if(t)return t.component}constructor(e,t,n,i,s){this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.ftueManager=i,this.portalManager=s,this.notificationWhitelist=new Map,this.isValidNotificationElement=e=>tj.yf.has(e.props.size)?(e.props.theme&&!tj.wV.has(e.props.theme)&&console.warn(`Invalid prop \`theme\` of value ${e.props.theme} supplied to ${e.tag}, expected one of [${Object.values(tj.CD)}];
        defaulting to ${tj.CD.Light} theme.`),e.props.hideBeak&&"boolean"!=typeof e.props.hideBeak&&console.warn(`Invalid prop \`hideBeak\` value: expected a \`boolean\` but received \`${typeof e.props.hideBeak}\`; defaulting to a visible beak.`),!0):(console.warn(`Invalid prop \`size\` of value ${e.props.size} supplied to ${e.tag}, expected one of [${Object.values(tj.l1)}].`),!1),this.findElementByAnalyticsId=e=>{if(!e)return null;let t=document.querySelector(`[data-analytics-id="${e}"]`);return t||document.querySelector(`[analytics-id="${e}"]`)},this.createFTUEComponent=(e,t)=>{let n=new nh(t,this.ftueManager),i={component:n,element:t.element};return n.addListener(n=>{if(!n){this.sendNotificationStatus(e,t.portalId,t.notificationId,tj.RK.Removed);return}let s=t.targetElementFinder();if(!s){this.closeNotification(t.portalId),this.sendNotificationStatus(e,t.portalId,t.notificationId,tj.RK.Failed);return}this.currentNotification=i,this.sendNotificationStatus(e,t.portalId,t.notificationId,tj.RK.Visible)}),this.notificationMap.set(t.portalId,i),n},this.onPortalNotification=(e,t)=>{if(!e.selector||!tj.AQ.has(e.selector.type)){console.warn(`Invalid selector type provided ${e.selector&&e.selector.type}`),this.sendNotificationResponseMessage(t,null,tj.xR.Failure,tj.ZN.InvalidSelectorError,`Invalid selector type provided ${e.selector&&e.selector.type}`);return}if(e.selector.type===tj.LB.Region&&!tj.L4.has(e.selector.value)){console.warn(`Invalid selector value provided ${e.selector&&e.selector.value}`),this.sendNotificationResponseMessage(t,null,tj.xR.Failure,tj.ZN.InvalidSelectorError,`Invalid selector value provided ${e.selector&&e.selector.value}`);return}let n=this.portalManager.validateContents({portalType:ng,contents:e.contents,integrationId:t.id});if(!n.passed){this.sendNotificationResponseMessage(t,null,tj.xR.Failure,tj.ZN.FailedComponentValidationError,`Component validation failed; not rendering ${tj.D_.Notification}.`);return}let i=this.getTargetElementFinder(e.selector,t);if(!i)return;let s={element:this.integrationPortalService.generateUniqueDomElement(),portalId:tZ.V(),notificationId:tZ.V(),owningIntegrationId:t.id,targetElementFinder:i,selector:e.selector},r=this.createFTUEComponent(t,s);return this.render(r,s.element,e.contents).then(()=>{this.sendNotificationResponseMessage(t,s.notificationId,tj.xR.Success),this.sendNotificationStatus(t,s.portalId,s.notificationId,tj.RK.Queued)})},this.removeNotificationFromQueue=e=>{e.dispose(),this.notificationMap.delete(e.portalId)},this.clearPortalNotification=()=>{this.notificationMap.forEach(e=>{let t=this.findNotification(e.component.notificationId);this.currentNotification&&this.currentNotification.component.notificationId===t.notificationId?this.closeNotification(t.portalId):this.removeNotificationFromQueue(t)})},this.onPortalNotificationClose=(e,t)=>{let n=this.findNotification(e.notificationId);if(!n){console.warn("Notification not found"),this.sendCloseNotificationResponse(t,e.notificationId,tj.xR.Failure,tj.ZN.NotificationNotFoundError,"Notification not found");return}if(n.integrationId!==t.id){console.warn(`${t.id} does not have ownership of the current notification`),this.sendCloseNotificationResponse(t,e.notificationId,tj.xR.Failure,tj.ZN.NoOwnershipError,`${t.id} does not have ownership of the current notification--not closing notification`);return}this.currentNotification&&this.currentNotification.component.notificationId===e.notificationId?this.closeNotification():(this.removeNotificationFromQueue(n),this.sendNotificationStatus(t,n.portalId,n.notificationId,tj.RK.Removed)),this.sendCloseNotificationResponse(t,e.notificationId,tj.xR.Success)},this.render=(e,t,n)=>new Promise(i=>{tX.render(tz.createElement(t1.g,{babelfishInstance:this.bbLocalize.intl,babelfishFormatInstance:this.bbLocalize.frmt,locale:this.bbLocalize.getLocale(null),isRtl:this.bbLocalize.isRTL()},tz.createElement(nt,{component:e,contents:n})),t,()=>{i()})}),this.sendCloseNotificationResponse=(e,t,n,i,s)=>{this.integrationService.sendMessage({type:tj.Eo.NotificationCloseResponse,notificationId:t,status:n,...i&&{error:i},...s&&{errorMessage:s}},e)},this.sendNotificationResponseMessage=(e,t,n,i,s)=>{this.integrationService.sendMessage({type:tj.Eo.NotificationResponse,status:n,notificationId:t,...i&&{error:i},...s&&{errorMessage:s}},e)},this.sendNotificationStatus=(e,t,n,i)=>{this.integrationService.sendMessage({type:tj.Eo.NotificationStatus,status:i,notificationId:n,portalId:t},e)},this.closeNotification=e=>{if(!this.currentNotification&&!e)return;let t=this.currentNotification;e&&(t=this.notificationMap.get(e)),t&&(tX.unmountComponentAtNode(t.element),setTimeout(()=>{this.removeNotificationFromQueue(t.component),this.currentNotification=void 0},500))},this.notificationMap=new Map}}(tq.Z,tK,tW.yW,S.uS,tW.hE);let nb=()=>{ne.ZP.subscribe((e,t)=>{t.isLaunchedInNewWindow=!!t.isLaunchedInNewWindow,tq.Z.sendEventMessage({type:tj.Fm,eventType:tj.Kj.Route,routeName:e,routeData:t})},ne.i$.Changed),ne.ZP.subscribe((e,t)=>{e.includes("classic")&&nf.clearPortalNotification(),t.isLaunchedInNewWindow=!!t.isLaunchedInNewWindow,tq.Z.sendEventMessage({type:tj.Fm,eventType:tj.Kj.RouteChanging,routeName:e,routeData:t})},ne.i$.Changing)};var nv=n(608555),ny=n(410628);let nC=e=>{let t=(0,ny.q)(),{panelType:n,panelTitle:i,panelSubtitle:s,integrationId:r,showPanel:o,portalId:a,onPanelClose:l,stackIndex:c,useCustomPadding:d,closeButtonAriaLabel:u,resolver:p}=e,m=null!=u?u:t("global.close");return tz.createElement(nv.BbPanel,{isOpen:o,onDismiss:()=>l(a,r),type:n,stackIndex:c,analyticsId:"components.directives.integration.integrationPanel",excludeContentPadding:d,closeButtonAriaLabel:m},tz.createElement(nv.BbPanelHeader,{title:i,smallHeaderTitle:s,navMenuAriaLabel:t("global.navigationMenu")}),tz.createElement("div",{className:"integration-panel"},tz.createElement("div",{className:"integration-panel-contents"},tz.createElement(tW.$2,{portalId:a,initialOwningIntegrationId:r,portalType:nS,skipCustomValidation:!0,onRegistered:p}))))},nS="panel",nE=e=>{switch(e){case tj.Nc.Full:return tY.BbPanelType.full;case tj.Nc.Small:return tY.BbPanelType.peek;default:return console.warn(`Received unknown panel type ${e}`),null}};var nI=new class{init(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(tj.dq.PanelNew,this.onPortalPanel),this.integrationService.addIntegrationMessageType(tj.dq.PanelClose,this.onPortalPanelClose),this.componentManager.addComponentType(nS,1)}removePanel(e){e&&setTimeout(()=>{tX.unmountComponentAtNode(e),e.remove()},500)}constructor(e,t,n,i){this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.portalManager=i,this.onPortalPanel=(e,t)=>{let{panelTitle:n,correlationId:i,useCustomPadding:s}=e;if(this.componentManager.overMaxComponents(nS)){console.warn("Panel is already open; not opening another one"),this.sendPanelMessage(t,null,tj.xR.Failure,i);return}if(!n){console.warn("Received a panel event without a panelTitle; not opening panel"),this.sendPanelMessage(t,null,tj.xR.Failure,i);return}let r=nE(e.panelType);if(null===r){this.sendPanelMessage(t,null,tj.xR.Failure,i);return}let o=tZ.V(),a=this.updatePanelAttributes(e,o);if(!a){console.warn("Received a panel event without proper attributes or with a missing callback id."),this.sendPanelMessage(t,null,tj.xR.Failure,i);return}let l=this.integrationPortalService.generateUniqueDomElement();return l.className="integration-panel",this.currentPanelData={element:l,panelType:e.panelType,panelTitle:e.panelTitle,panelSubtitle:e.panelSubtitle,owningIntegrationId:t.id,portalId:o,useCustomPadding:s||!1,closeButtonAriaLabel:e.closeButtonAriaLabel},this.renderPanel(this.currentPanelData,!0).then(()=>{this.sendPanelMessage(t,this.currentPanelData.portalId,tj.xR.Success,i)})},this.updatePanelAttributes=(e,t)=>{let n=e.attributes;if(!n)return!0;let i={},s=Object.keys(n).filter(e=>!n[e]||!n[e].callbackId);return s.length>0?(console.warn(`Panel attributes [${s.join(",")}] are missing callbackId parameters`),!1):(Object.keys(n).forEach(e=>{let t=n[e];i={...i,[e]:{callbackId:t.callbackId}}}),this.panelAttributesEvents.set(t,{portalId:t,subscribedAttributes:i}),!0)},this.renderPanel=(e,t)=>{let n=document.getElementsByClassName("bb-offcanvas-panel").length+1,i=nE(e.panelType);return new Promise(s=>{tX.render(tz.createElement(t1.g,{locale:this.bbLocalize.getLocale(null),babelfishInstance:this.bbLocalize.intl,babelfishFormatInstance:this.bbLocalize.frmt,isRtl:this.bbLocalize.isRTL()},tz.createElement(nC,{panelType:i,panelTitle:e.panelTitle,panelSubtitle:e.panelSubtitle,integrationId:e.owningIntegrationId,showPanel:t,portalId:e.portalId,onPanelClose:this.onPanelCloseAction,stackIndex:n,useCustomPadding:e.useCustomPadding,resolver:s,closeButtonAriaLabel:e.closeButtonAriaLabel})),e.element)})},this.onPortalPanelClose=(e,t)=>{let n=t.id,i=this.portalManager.getPortalData(e.id);if(!i){console.warn(`no panel has an id of ${e.id}`);return}if(i.getOwningIntegrationId()!==n){console.warn(`The integration ${n} does not own the portalId of ${e.id}; not closing anything`);return}return this.renderPanel(this.currentPanelData,!1)},this.onPanelCloseAction=(e,t)=>{this.renderPanel(this.currentPanelData,!1);let n=this.portalManager.getPortalData(e);if(!n)return;let i=tj.Hh.onClose,s=this.panelAttributesEvents.get(n.portalId),r=s&&s.subscribedAttributes[i],o=this.integrationService.findIntegration(t);if(this.portalManager.removePortal({portalId:e,owningIntegrationId:t}),this.removePanel(this.currentPanelData.element),this.currentPanelData=null,r&&o){let e={type:tj.l4.PortalCallback,callbackId:s.subscribedAttributes[i].callbackId,portalId:n.portalId,event:i};this.integrationService.sendMessage(e,o)}},this.sendPanelMessage=(e,t,n,i)=>{this.integrationService.sendMessage({type:tj.dq.PanelResponse,status:n,portalId:t,correlationId:i},e)},this.panelAttributesEvents=new Map}}(tq.Z,tK,tW.yW,tW.hE),nw=n(542728),nA=n(988266),nk=n(750442),nx=n(144958);let nT=(e,t,n)=>{let[i,s]=(0,tz.useState)("");return(0,tz.useEffect)(()=>{let i=(0,nx.Ic)({bbFileData:{linkType:b.GQk.LtiPlacement.toString()},handle:e,courseId:n});i.customParameters=t,s((0,nx.Mo)(i))},[e,t,n]),i},nP=e=>{let{handle:t,customParameters:n,courseId:i,style:s,isOrganization:r}=e,o=nT(t,n,i);return tz.useEffect(()=>{o&&tq.Z.sendEventMessage({type:tj.Fm,eventType:tj.Kj.LtiLaunch,launchData:{courseId:i,coursesOrOrganizations:r?"organizations":"courses",isLaunchedInNewWindow:!1,toolHref:o}})},[i,o,r]),tz.createElement("iframe",{src:o,style:s})};var nD=new class{init(e){this.componentManager.addGlobalComponent(tj.qV.LtiLaunch,{props:{handle:!0,customParameters:!1,courseId:!1,style:!1},isValid:e=>!e.children,render:(t,n)=>{var i,s;let r=null!==(s=n.courseId)&&void 0!==s?s:null===(i=e.getCurrentUrlParams())||void 0===i?void 0:i.courseId,o=e.current.name.includes("organization");return tz.createElement(nP,{courseId:r,isOrganization:o,...n})}})}constructor(e){this.componentManager=e}}(tW.yW),nG=n(281699);let nR=(0,nG.makeStyles)({container:{maskImage:e=>`url(${e.url})`,WebkitMaskImage:e=>`url(${e.url})`,height:e=>`${e.height}`,width:e=>`${e.width}`,backgroundColor:"currentColor"}}),nB=`(^[\\u0000-\\u001F ]*${/d([\r\n\t])*a\1*t\1*a\1*:\1*i\1*m\1*a\1*g\1*e\1*\/\1*s\1*v\1*g\1*\+\1*x\1*m\1*l\1*;\1*/i.source})|(${/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.source})`,nL=RegExp(nB,"i"),nN=new Map([["uef--base-nav-svg","svg-icon medium-icon default integration-svg-icon"]]),nO=new Map([["classname",e=>(0,tW.PV)(e,nN)]]),nM=e=>{let{url:t,height:n,width:i,className:s,style:r}=e,o=nR({url:t,height:n,width:i});return tz.createElement("div",{className:`${s} ${o.container}`,style:r})};var n$=new class{constructor(e){this.componentManager=e,this.init=()=>{this.componentManager.addGlobalComponent(tj.qV.SvgIcon,{props:{url:!0,height:!0,width:!0,className:!1,style:!1},isValid:e=>this.isValidSvgUrl(e.props),render:(e,t)=>tz.createElement(nM,t),transformers:nO})},this.isValidSvgUrl=e=>e.url?e.height||e.width?!!nL.test(e.url)||(console.warn(`Unsupported URI received for ${tj.qV.SvgIcon}: [${e.url}] Only HTTPS and data:image/svg+xml data URIs are supported.`),!1):(console.warn(`A height and/or width is required for ${tj.qV.SvgIcon}, but no value for \`height\` and/or \`width\` was given.`),!1):(console.warn(`A url is required for ${tj.qV.SvgIcon}, but no value for \`url\` was given.`),!1)}}(tW.yW),nH=n(285179);let nF=new Map([["uef--action-menu--extension","action-menu-extension"],["uef--action-menu--labeled","action-menu-labeled"]]),nU=new Map([["uef--course-details--menu-label","blue-link select-value"]]);var nV=new class{init(){let e=new Map;e.set("items",(e,t,n)=>e?e.map(e=>({...e,callback:(0,tW.rc)(e.callbackId,tj.dX.onClick,t,n)})):e),this.componentManager.addGlobalComponent(tj.qV.ActionMenu,{props:{items:!0,label:!0,className:!0,labelClassName:!0},transformers:e,isValid:e=>!e.children,render:(e,t)=>{var n;if(!t.items)return;let i=t.items.map((e,t)=>({key:t,name:e.name,onClick:e.callback})),s=t.label?tz.createElement("span",{className:(0,tW.PV)(t.labelClassName,nU)},t.label):null,r=`components.services.integration.${t.analyticsId||"unknown"}.actionMenu`;return tz.createElement(tY.ActionMenu,{ariaLabel:t.ariaLabel,menuProps:{items:i},className:null!==(n=(0,tW.PV)(t.className,nF))&&void 0!==n?n:"action-menu-extension",analyticsId:r},s)}})}constructor(e){this.componentManager=e}}(tW.yW),n_=n(625506),nq=new class{batchIntegrationPageAnalyticsRequest(e,t){let n=this.integrationGroup.get(t);if(this.integrationGroup.has(t)){if(n.requestCount+=1,1===this.integrationGroup.size&&n.requestCount>tj.RU.RateLimit||this.integrationGroup.size>1&&n.requestCount>tj.RU.RateLimit){console.warn("Rate limit of page level analytics event reached");return}e.analyticsIds.forEach(e=>{n.analyticsIds.add(e)})}else this.integrationGroup.set(t,{analyticsIds:new Set(e.analyticsIds),requestCount:1})}checkAnalyticsIdElementVisibility(){let e=new Map;this.integrationGroup.forEach((t,n)=>{let i=[],s=new Set(t.analyticsIds);t.analyticsIds.forEach(t=>{if(e.has(t)){i.push(e.get(t)),s.delete(t),this.sendAnalyticsMessage(s,i,n);return}let r=this.getDataAnalyticsElements(t);if(0===r.length){let r={analyticsId:t,isElementVisible:!1};e.set(t,r),i.push(r),s.delete(t),this.sendAnalyticsMessage(s,i,n);return}let o=new IntersectionObserver((r,o)=>{let a={analyticsId:t,isElementVisible:this.isElementsAvailableInViewport(r)};e.set(t,a),i.push(a),r.forEach(e=>{o.unobserve(e.target)}),s.delete(t),this.sendAnalyticsMessage(s,i,n)},{threshold:1});r.forEach(e=>{o.observe(e)})})})}isElementsAvailableInViewport(e){return e.some(e=>(this.accessibility.isElementInActivePanel(n_(e.target))||this.isElementAvailableInMslayer(e.target))&&e.isIntersecting)}isElementAvailableInMslayer(e){var t,n;return null!==(n=null===(t=document.querySelector("div.ms-Layer"))||void 0===t?void 0:t.contains(e))&&void 0!==n&&n}getDataAnalyticsElements(e){return document.querySelectorAll('[analytics-id="'+e+'"], [data-analytics-id="'+e+'"]')}sendAnalyticsMessage(e,t,n){if(0===e.size){let e={type:tj.$3,results:t};this.integrationService.sendMessage(e,n)}}initPageAnalytics(e){this.accessibility=e,this.integrationService.addIntegrationMessageType(tj.$3,this.isElementAvailableInCurrentPage)}constructor(e){this.integrationService=e,this.timerId=null,this.integrationGroup=new Map,this.TimeoutMs=1e3,this.isElementAvailableInCurrentPage=(e,t)=>{this.batchIntegrationPageAnalyticsRequest(e,t),this.timerId||(this.timerId=setTimeout(()=>{this.checkAnalyticsIdElementVisibility(),this.timerId=void 0,this.integrationGroup.clear()},this.TimeoutMs))}}}(tq.Z);let nz=(e,t,n,i)=>{t4.Z.init(),t6.init(),tK.init(),nw.Z.init(e,t),nA.Z.init(t),nI.init(e),t9.init(e),nf.init(e),t8.Z.addHoverListener(),t8.Z.addClickListener(),nb(),nk.Z.init(e),nD.init(n),n$.init(),nV.init(),nH.ZP.init(),nq.initPageAnalytics(i)};class nW{start(){this.routeListener.subscribe(this.handleRouteChanging,ne.i$.Changing),this.routeListener.subscribe(this.handleRouteChanged,ne.i$.Changed)}get started(){return this._started}set started(e){this._started=e,this.startedCallback&&this.startedCallback(e)}constructor(e,t){this.routeListener=e,this._started=!0,this.handleRouteChanging=()=>{this.started=!1},this.handleRouteChanged=()=>{this.started=!0},this.onStateChanged=e=>{this.startedCallback=e},t.addWatcher(this)}}var nj=n(814154),nZ=n(854108),nK=n(684710),nX=n(962389),nY=n(633714);let nQ="ultra.directives.validate.bbmlmarkup",nJ={img:["id"]};class n0{constructor(e,t){this.$q=e,this.$http=t,this.whitelist=null,this.whitelistInitializer=null,this.require="ngModel",this.restrict="A",this.initialWhitelist=()=>(null===this.whitelistInitializer&&(this.whitelistInitializer=this.$http.get("/learn/api/v1/utilities/bbml/whitelist").then(e=>{this.whitelist={};let t=(e.data[":all"]||[]).concat(nJ[":all"]||[]);eW.forEach(e.data,(e,n)=>{let i={};eW.each(e.concat(t,nJ[n]||[]),e=>{i[e]=e}),this.whitelist[n]=i})},()=>{this.whitelist=null})),this.whitelistInitializer),this.validate=e=>{if(null===this.whitelist||1!==e[0].nodeType)return!0;let t=e[0].tagName.toLowerCase();if(!Object.prototype.hasOwnProperty.call(this.whitelist,t))return!1;let n=this.whitelist[t];return eW.every(e[0].attributes,e=>Object.prototype.hasOwnProperty.call(n,e.name.toLowerCase()))&&eW.every(e.children(),e=>this.validate(c(e)))},this.getValidator=(e,t,n,i)=>e=>{let n=this.$q.defer();return this.initialWhitelist().then(()=>{let e=eW.every(t.children(),e=>this.validate(c(e)));e?n.resolve():n.reject()}),n.promise},this.link=(e,t,n,i)=>{i.$asyncValidators.bbmlMarkup=this.getValidator(e,t,n,i)}}}n0.$inject=["$q","$http"];class n1 extends n0{}d.module(nQ,[F.moduleName]).directive("bbValidateBbmlMarkup",["$injector",e=>e.instantiate(n0)]);var n2=n(625506);let n3="ultra.directives.validate.bbmlmarkup.sanitize",n9={style:e=>null,":default":e=>{let t=n2("<span></span>");return t.text(e.text()),t}};class n4 extends n1{constructor(...e){super(...e),this.validate=e=>{if(null===this.whitelist)return!0;let t=!0;if(1!==e[0].nodeType)return!0;let n=e[0].tagName.toLowerCase();if(Object.prototype.hasOwnProperty.call(this.whitelist,n)){let i=this.whitelist[n];eW.each(Array.prototype.slice.apply(e[0].attributes),n=>{Object.prototype.hasOwnProperty.call(i,n.name.toLowerCase())||(e.removeAttr(n.name),t=!1)})}else{t=!1;let i=(n9[n]||n9[":default"])(e);if(null===i)return e.remove(),!1;e.replaceWith(i),e=i}return eW.each(e.children(),e=>{t=this.validate(n2(e))&&t}),t},this.getValidator=(e,t,n,i)=>e=>{let n=this.$q.defer();return this.initialWhitelist().then(()=>{let s=!0,r=n2("<span></span>");r.html(e),eW.each(r,e=>{s=this.validate(n2(e))&&s}),s||i.$setViewValue(t.html()),n.resolve()}),n.promise}}}angular.module(n3,[F.moduleName]).directive("bbSanitizeBbmlMarkup",["$injector",e=>e.instantiate(n4)]);var n7=n(925676),n5=n(482819);let n6="ultra.directives.validate.emailAddress";class n8{constructor(){this.require="ngModel",this.link=(e,t,n,i)=>{i.$validators.email=function(e){return n5.F.test(e)||!e}}}}d.module(n6,[]).directive("bbValidateEmailAddress",["$injector",e=>e.instantiate(n8)]);let ie="ultra.directives.validate.emailAddresses";class it{constructor(){this.require="ngModel",this.link=(e,t,n,i)=>{i.$validators.email=function(e){return!e||n5.D.test(e)}}}}d.module(ie,[]).directive("bbValidateEmailAddresses",["$injector",e=>e.instantiate(it)]);let ii="ultra.directives.validate.input";class is{constructor(){this.require="?ngModel",this.link=(e,t,n,i)=>{i&&(t.on("focusin",()=>{i.$focused=!0,e.$root.$$phase||e.$$phase||e.$root.$digest()}),t.on("focusout",()=>{i.$focused=!1,e.$root.$$phase||e.$$phase||e.$root.$digest()}))}}}d.module(ii,[]).directive("input",["$injector",e=>e.instantiate(is)]).directive("textarea",["$injector",e=>e.instantiate(is)]);let ir="ultra.directives.validate.kvp";class io{getKVPValidator(e,t,n,i){return(e,t)=>{let n=t+"";if(""===n)return!0;let i=!0,s=n.split("\n");return s.forEach(e=>{if(e.trim().length>0&&i){let t=e.split("=");2!==t.length&&(i=!1)}}),i}}constructor(){this.require="ngModel",this.restrict="A",this.link=(e,t,n,i)=>{i.$validators.kvp=this.getKVPValidator(e,t,n,i)}}}d.module(ir,[]).directive("bbValidateKeyValuePair",["$injector",e=>e.instantiate(io)]);var ia=n(385270);let il="ultra.directives.validate.maxlength",ic="bbValidateMaxlength";class id{constructor(e){this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getMaxlengthValidator=(e,t,n,i)=>e=>{let t=c("<textarea/>").val(e).text(),s=t||e;if(null==s)return!0;let r=n[ic];if(null==r||""===r)return!0;let o=s.length,a=!!n.maxlengthAfterEscape&&n.maxlengthAfterEscape;"true"===a&&(o=ia.Z.HTML(s).length);let l=n.maxlengthNotice?n.maxlengthNotice:Math.floor(.9*r).toString();return(l.match(/\%$/)&&(l=Math.floor(r*(1-(l=l.replace(/\D/,""))/100)).toString()),o>r)?(delete i.$warning.maxlengthWarning,i.$error.maxlength={maxlength:r,diff:o-r},i.$errorImmediate.maxlengthImmediate={maxlength:r,diff:o-r},!1):o>=l?(delete i.$error.maxlength,delete i.$errorImmediate.maxlengthImmediate,i.$warning.maxlengthWarning={maxlength:r,left:r-o},!0):(delete i.$error.maxlength,delete i.$errorImmediate.maxlengthImmediate,delete i.$warning.maxlengthWarning,!0)},this.link=(e,t,n,i)=>{i.$validators.maxlengthValidator=this.getMaxlengthValidator(e,t,n,i),i.$warning||(i.$warning={}),i.$errorImmediate||(i.$errorImmediate={})}}}d.module(il,[F.moduleName]).directive(ic,[F.serviceName,e=>new id(e)]);let iu="ultra.directives.validate.number";class ip{constructor(e){this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.selectionStart=0,this.selectionEnd=0,this.oldViewValue="",this.getNumberParser=(e,t,n,i)=>t=>{if(i.$isEmpty(t))return i.$setValidity("numberInvalid",!0),t;let s=this.regroup(e,i),r=this.bbLocalize.parseNumberSync(s,e);if(Number.isNaN(r))return i.$setValidity("numberInvalid",!1),r;i.$setValidity("numberInvalid",!0);let o=this.bbLocalize.getDecimalStringForScope(e),a=r.toString(),l=a.split(String(o)),c=n&&n.maxDecimal?Number(n.maxDecimal):F.Service.defaultDecimalPrecision;return l.length>1&&l[1].length>c&&(r=parseFloat(a=l[0]+o+l[1].substring(0,c)),this.reformatFromModel(i,r)),this.updateSelection(e,i,this.target,this.key),r},this.getMinValidator=(e,t,n,i)=>e=>{let t=parseFloat(n.min),s=i.$isEmpty(e);if(!s&&Number.isNaN(Number(e)))return delete i.$error.numberSmall,!1;let r=s||e>=t;return r?delete i.$error.numberSmall:i.$error.numberSmall={min:t},r},this.getMaxValidator=(e,t,n,i)=>e=>{let t=parseFloat(n.max),s=i.$isEmpty(e);if(!s&&Number.isNaN(Number(e)))return delete i.$error.numberLarge,!1;let r=s||e<=t;return r?delete i.$error.numberLarge:i.$error.numberLarge={max:t},r},this.getNumberFormatter=(e,t,n,i)=>t=>{let s=t||i.$modelValue;if(i.$setValidity("numberInvalid",!0),s||0===s){let t=n&&n.maxDecimal?n.maxDecimal:F.Service.defaultDecimalPrecision;return this.bbLocalize.formatNumberSync(parseFloat(s),e,{maximumFractionDigits:t,useGrouping:!0})}return""},this.regroup=(e,t)=>{let n=this.bbLocalize.regroupNumberSync(t.$viewValue,e);return t.$viewValue!==n&&(t.$viewValue=n,t.$render(),t.$validate()),n},this.reformatFromModel=(e,t)=>{t=t||e.$modelValue;let n=e.$formatters,i=n.length,s=t;for(;i--;)s=n[i](s);e.$viewValue!==s&&(e.$viewValue=s,e.$render(),e.$validate())},this.allowInput=(e,t,n,i)=>{if(!t||!t.key)return!1;let s=i.$viewValue,{selectionStart:r,selectionEnd:o}=t.target,a=this.bbLocalize.getGroupingStringForScope(e),l=this.bbLocalize.getDecimalStringForScope(e),c=this.bbLocalize.parseNumberSync(s,e),d=n&&n.maxDecimal?Number(n.maxDecimal):F.Service.defaultDecimalPrecision,u=t.key===a,p=o-r==0&&"Backspace"===t.key&&s[r-1]===a,m=o-r==0&&"Delete"===t.key&&s[r]===a,h=o-r==1&&s[r]===a&&("Backspace"===t.key||"Delete"===t.key),g=o-r==0&&!Number.isNaN(Number(t.key))&&this.target.selectionStart>s.indexOf(l)&&s.split(l)[1]&&s.split(l)[1].length>=d;!(o-r>1)&&!Number.isNaN(c)&&(p||m||u||h||g)&&t.preventDefault()},this.updateSelection=(e,t,n,i)=>{if(!i||-1!==["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Shift","Meta","Tab","End","Home","-"].indexOf(i))return;let s=Math.max(0,this.selectionEnd+t.$viewValue.length-this.oldViewValue.length);n.selectionStart=s,n.selectionEnd=s},this.link=(e,t,n,i)=>{t.on("blur",()=>{i.$valid&&this.reformatFromModel(i)}),t.on("focus",()=>{t.select()}),t.on("keydown",t=>{this.target=t.target,this.key=t.key,this.selectionStart=this.target.selectionStart,this.selectionEnd=this.target.selectionEnd,this.oldViewValue=i.$viewValue,this.allowInput(e,t,n,i)}),i.$parsers.push(this.getNumberParser(e,t,n,i)),i.$formatters.push(this.getNumberFormatter(e,t,n,i)),n.min&&(i.$validators.minValidator=this.getMinValidator(e,t,n,i),n.$observe("min",()=>{i.$validate()})),n.max&&(i.$validators.maxValidator=this.getMaxValidator(e,t,n,i),n.$observe("max",()=>{i.$validate()}))}}}d.module(iu,[F.moduleName]).directive("bbValidateNumber",[F.serviceName,e=>new ip(e)]);let im="ultra.directives.validate.time";class ih{formatTime(e,t){return"ar-sa"===this.bbLocalize.getLocale(t)?this.getISOTime(e):this.bbLocalize.formatTimeSync(e,F.ILocaleTimeFormat.Short,t)}constructor(e){this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getISOTime=e=>("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2),this.getTimeParser=(e,t,n,i)=>s=>{let r;if(i.$isEmpty(s))return i.$setValidity("time",!0),i.$modelValue;try{r=this.bbLocalize.parseTimeSync(s,F.ILocaleTimeFormat.Short,e,i.$modelValue)}catch(e){return i.$setValidity("time",!1),i.$modelValue}return i.$setValidity("time",!0),(s="time"===n.type?this.getISOTime(r):this.formatTime(r,e))===i.$viewValue||(i.$setViewValue(s),t.is(":focus")||i.$render()),r},this.getTimeFormatter=(e,t,n,i)=>()=>{i.$setValidity("time",!0);let s=i.$modelValue;return i.$isEmpty(s)?t.val():"time"===n.type?this.getISOTime(s):this.formatTime(s,e)},this.link=(e,t,n,i)=>{i.$parsers.push(this.getTimeParser(e,t,n,i)),i.$formatters.push(this.getTimeFormatter(e,t,n,i)),t.on("blur",()=>{i.$render()})}}}d.module(im,[F.moduleName]).directive("bbValidateTime",[F.serviceName,e=>new ih(e)]);let ig=RegExp("^(?:(?:https?|ftp)://)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i"),ib="ultra.directives.validate.url";class iv{getUrlValidator(e,t,n,i){return e=>e?ig.test(e+"")?(delete i.$error.urlInvalid,!0):(i.$error.urlInvalid=!0,!1):(i.$error.urlInvalid&&delete i.$error.urlInvalid,!0)}constructor(){this.require="ngModel",this.restrict="A",this.link=(e,t,n,i)=>{i.$validators.url=this.getUrlValidator(e,t,n,i),i.$warning||(i.$warning={}),i.$errorImmediate||(i.$errorImmediate={})}}}d.module(ib,[]).directive("bbValidateUrl",["$injector",e=>e.instantiate(iv)]);var iy=n(231090);let iC=[nQ,n3,n7.e1,n6,ie,ii,ir,il,iu,im,ib,iy.e1];n(788093),n(45224);var iS=n(763674),iE=n(910741),iI=n(376095),iw=n(350383),iA=n(495175),ik=n(470269);let ix="ultra.course.content.assignment.routes";d.module(ix,[F.moduleName,iE.e1,iw.e1,iA.e1,B.e1,x.e1]).config([B.e2,x.e2,iS.e2,(e,t,i)=>{e.peekState("assignment",{abstract:!0,url:"/assignment/:assignmentId?courseId",resolve:{[x.gc]:t.resolve,[iS.gc]:i.resolve,contentData:[x.gc,iE.HV,B.HV,(e,t,n)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.assignmentId,contentHandler:P.courseContent.ContentHandler.UltraAssignment})],currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>null!=e.gradingColumn.rubricAssociations?e.gradingColumn.$asPromise():e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()]},peekStates:["conversations",ik.BQ.COURSE_MESSAGE],peekViewName:"assignment-conversation@"}).peekState("assignment.router",{url:"/route",routingFunction:[P.N7.H,iw.HV,B.HV,(e,t,n)=>{let i=n.nextParams.courseId?n.nextParams.courseId:n.prevParams.courseId;e.$new(i).contents.$find(n.nextParams.assignmentId).$then(e=>{e.canViewAsInstructor()?n.go(n.prev.name,n.prevParams).then(()=>{n.goPeekState("gradebook-item.assignment",{courseId:e.courseId,contentId:e.id,gradeitemView:"details"})}):n.go(n.prev.name,n.prevParams).then(()=>{n.goPeekState("assignment.view",{courseId:e.courseId,assignmentId:e.id})})})}]}).peekState("assignment.view",{url:"/view",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])],prefetch:["$q",P.N7.H,B.HV,(e,t,n)=>{let i=n.nextParams.courseId?n.nextParams.courseId:n.prevParams.courseId;k.default.features.httpEase&&t.$new(i).contents.$find(n.nextParams.assignmentId,{expand:"assignedGroups,associatedRubrics,alignedGoals"}).$then(e=>{t.$new(i).gradebook.columns.$find(e.getDeployedAssessment().gradingColumn.id,{expand:"associatedRubrics,rubricAssociations.rubricDefinition.alignedGoals,rubricAssociations.rubricDefinition.rows.alignedGoals"})})}]},require:[()=>Promise.all([n.e(82082),n.e(20342)]).then(n.bind(n,320342))],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations",ik.BQ.COURSE_MESSAGE],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt",{abstract:!0,url:"/attempt"}).peekState("assignment.view.attempt.edit",{url:"/{attemptId:_[0-9]+_1}",onEnter:[e$.HV,B.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/goal-alignment/goal")])]},require:[()=>Promise.all([n.e(82082),n.e(3835),n.e(85793)]).then(n.bind(n,592412))],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations",ik.BQ.COURSE_MESSAGE,"rubric-evaluation","rubric-view",iI._b],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt.finished",{url:"/view",onEnter:[e$.HV,B.HV,e=>{e.shrinkTopPanel()}],params:{gradeDetail:null},resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/content/assignment/assignment")]},require:()=>Promise.all([n.e(82082),n.e(20342)]).then(n.bind(n,320342)),pageTitle:"course.content.assignmentAttempt"}).peekState("assignment.grade",{url:"/grade",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/content/assignment/assignment")]},require:()=>Promise.all([n.e(82082),n.e(20342)]).then(n.bind(n,320342)),pageTitle:"course.content.assignmentGrading"})}]);var iT=n(346523),iP=n(11407),iD=n(64314),iG=n(748157),iR=n(984993);let iB="ultra.modules.groupattempt.activities",iL="ultra.services.groupattempt.activities",iN="ultra.services.groupattempt.activities.dialog",iO="bbGroupAttemptActivitiesPeek",iM=RegExp("assessment\\.overview\\.attempt("+B.qt.replace(/\./g,"\\.")+".+)?$"),i$={USER_CANCELLED:"USER_CANCELLED",USER_RELEASE_CONTROL:"USER_RELEASE_CONTROL",USER_REJECT_CONTROL:"USER_REJECT_CONTROL"},iH=d.module(iB,["ng"]);iH.factory(iL,["$injector","$q","$log","$http","$rootScope",eg.HV,E.H,B.HV,function(e){let t=e.get("$q"),n=e.get("$http"),i=e.get("$rootScope"),s=e.get(eg.HV);return tC.ZU.OnRootScope(i,"$stateChangeError",function(t,n,i){iM.test(n.name)&&e.get(B.HV).go(n.name.replace(/\.attempt$/,""),i)}),{new:(e,i)=>{let r=(e,t)=>{e.userId=t.userId,e.queue=t.queue,e.groupAttemptId=t.groupAttemptId,e.status=t.status},o=t.when(null),a={myId:s.userId,request(){return o=o.then(()=>{let s=t.defer();return n.put(`${k.default.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${i}/activities`,{}).then(e=>{r(this,e.data),s.resolve(this)}),s.promise})},keepAlive(s){o=o.then(o=>{let l=t.defer();return eW.some(this.queue.concat(this.userId),e=>this.myId===e)?n({method:"PATCH",url:`${k.default.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${i}/activities`}).then(e=>(r(this,e.data),t.when(s(this)).then(e=>{if(eW.some(this.queue.concat(this.userId),e=>this.myId===e)&&e){let e=new Date().getTime(),t=()=>{window.requestAnimationFrame(()=>{new Date().getTime()-e>=5e3?a.keepAlive(s):t()})};t()}}))).finally(()=>{l.resolve(this)}):l.resolve(this),l.promise})},release(){return o=o.then(()=>{let s=t.defer();return n.delete(`${k.default.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${i}/activities`).then(e=>{r(this,e.data),s.resolve(this)}),s.promise})},kickout(){return o=o.then(()=>n.delete(`${k.default.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${i}/activities/waiting`))},peek(){return o=o.then(()=>{let s=t.defer();return n.get(`${k.default.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${i}/activities`).then(e=>{r(this,e.data),s.resolve(this)}),s.promise})}};return a}}}]),iH.factory(iN,["$injector","$q","$log","$http","$rootScope",F.serviceName,B.HV,iG.HV,iD.HV,P.EA.HV,function(e){let t=e.get(iG.HV),n=e.get("$rootScope"),i=e.get(iD.HV),s=e.get(P.EA.HV),r=e.get(F.serviceName),o="features.course.content.assessment.group-attempt.activities",a=(e,n)=>{let r=t.open({template:iR,scope:e,controller:["$scope",function(e){}]});return r.refresh=function(t){i.performBatch(()=>{let n=e.queuedUsers;e.owner&&(n[e.owner.id]=e.owner),e.queuedUsers={},t.userId&&t.userId!==(e.owner||{}).id&&s.$find(t.userId).$then(t=>{e.owner=t}),t.queue.forEach((t,i)=>{Object.prototype.hasOwnProperty.call(n,t)?e.queuedUsers[t]=n[t]:s.$find(t).$then(n=>{e.queuedUsers[t]=n})})})},r.scope=e,r.refresh(n),r.result.finally(()=>{r.scope.$destroy()}),r};return{openRequest:e=>{let t;let i=n.$new();return eW.extend(i,{hideOK:!0,modalTranslateOptions:{title:{key:`${o}.title_group_member_editing`}},modalStrings:{instructions:r.translateSync({locale:null,key:`${o}.msg_taken_by_other_group_member`}),ok:r.translateSync({locale:null,key:`${o}.takecontrol`}),cancel:r.translateSync({locale:null,key:`${o}.cancel`})},queuedUsers:{},additionalClass:"requesting",okAction:()=>{i.$broadcast(i$.USER_REQUEST_CONTROL)},cancelAction:()=>{t.dismiss()}}),t=a(i,e)},openNotify:e=>{let t;let i=n.$new();return eW.extend(i,{hideOK:!1,modalTranslateOptions:{title:{key:`${o}.title_group_member_requesting`}},modalStrings:{instructions:r.translateSync({locale:null,key:`${o}.msg_taking_by_other_group_member`}),ok:r.translateSync({locale:null,key:`${o}.leave`}),cancel:r.translateSync({locale:null,key:`${o}.ignore`})},queuedUsers:{},additionalClass:"notifying",okAction:()=>{i.$broadcast(i$.USER_RELEASE_CONTROL)},cancelAction:()=>{t.dismiss()}}),t=a(i,e)},openDeclined:e=>{let t;let i=n.$new();return eW.extend(i,{hideCancel:!0,modalTranslateOptions:{title:{key:`${o}.title_group_member_request_decline`}},modalStrings:{instructions:r.translateSync({locale:null,key:`${o}.msg_control_request_declined`}),ok:r.translateSync({locale:null,key:`${o}.ok`})},queuedUsers:{},additionalClass:"declined",okAction:()=>{t.dismiss()}}),t=a(i,e)}}}]),iH.directive(iO,[B.HV,E.H,iL,function(e,t,n){return{restrict:"A",link:(i,s,r)=>{s.addClass("group-attempt-activities-observe");let o=i.$watch(r[iO],r=>{if(r&&o(),r&&r.groupId&&r.isInProgress()){let o=n.new(e.params.courseId,r.id),a=()=>{o.peek().then(e=>{e.status&&(r.status=e.status),eW.extend(i,{groupAttemptOwnerId:e.userId});let n="group-attempt-has-owner";e.userId?s.addClass(n):s.removeClass(n),t(a,i,5e3)})};a()}})}}}]);class iF{isRelatedState(e){return iM.test(e)}constructor(e){let t;this.delegatee=e,this.isResolvingControl=!1,eW.forEach(e,(e,t)=>{this[t]=e});let n=["$injector","$http","$q","$rootScope",E.H,B.HV,P.N7.H];this.resolve=this.resolve||{};let i=e=>{let n=e.get("$q"),i=e.get("$rootScope"),s=e.get(E.H),r=e.get(B.HV),o=e.get(P.N7.H),a=e.get(iL),l=e.get(iN);if(!this.isRelatedState(r.next.name))return n.when(!0);if(this.isResolvingControl)return n.reject();this.isResolvingControl=!0;let c=n.defer(),d=r.nextParams;return o.$new(d.courseId).contents.$find(d.contentId||d.assignmentId).$then(e=>{if(!e.isGroupContent){c.resolve(!0),t=null;return}(t=a.new(d.courseId,d.attemptId)).peek().then(e=>{if(e.userId&&e.myId!==e.userId){i.$broadcast("hideInitialLoadingArea");let t=l.openRequest(e);t.result.then(()=>{},()=>{e.release(),c.reject()}),e.request().then(()=>{e.keepAlive(()=>e.myId===e.userId?(t.close(),c.resolve(!0),!1):e.queue.some(t=>e.myId===t)?(t.refresh(e),!0):(t.dismiss("ACCESS_CONTROL_TAKEN"),c.reject(),s(()=>{l.openDeclined(e)},i,200),!1))})}else c.resolve(!0)})}),c.promise.finally(()=>{this.isResolvingControl=!1})},s=this.resolve;if(s.translateGroupAttemptControl=[F.serviceName,e=>{e.loadBundle("features/course/content/assessment/group-attempt/activities/group-attempt-activities")}],s.attempt){let e=s.attempt;s.attempt=["contentData"].concat(n).concat((t,s)=>{let r=s.get("$q"),o=s.get(B.HV);return r.when(s.invoke(n.concat(i))).then(()=>s.invoke(e,null,{contentData:t})).then(e=>this.isRelatedState(o.next.name)&&e.isSubmitted()?(s.get(B.HV).goPeekState("assessment.overview.attempt.review",{attemptId:e.id}),r.reject()):e)})}else s.takeControlOnGroupAttempt=n.concat(i);let r=this,o=r.onExit;r.onExit=n.concat(e=>{this.isRelatedState(e.get(B.HV).prev.name)&&(o&&e.invoke(o),t&&(t.release(),(r.__childScope||{$destroy:d.noop}).$destroy()))});let a=r.onEnter;r.onEnter=n.concat(e=>{let n;let i=e.get("$rootScope"),s=e.get(iN),o=e.get(B.HV);if(!this.isRelatedState(o.next.name)||(a&&e.invoke(a),!t))return;let l=!1,c=()=>{l=!0},d=()=>{l=!1},u=i.$new();u.$on(iP.Kn,c),u.$on(iP.j7,c),u.$on(iP.sg,d),u.$on(iP.Mc,d),r.__childScope=u,t.request().then(e=>{e.keepAlive(e=>!!l||!!this.isRelatedState(o.current.name)&&(e.userId!==e.myId?(o.leavePeekState(),!1):(e.userId===e.myId&&e.queue.length>0?n?n.refresh(e):((n=s.openNotify(e)).result.then(()=>{},()=>{e.kickout(),n=null}),n.scope.$on(i$.USER_RELEASE_CONTROL,()=>{n.close(),i.$broadcast(iP.dX);let t=u.$on("$stateChangeAbort",(i,s)=>{"ABORTED_BY_FILE_UPLOAD"===(s||{}).reason&&(t(),e.kickout()),n=null})})):n&&(n.close(),n=null),!0)))})})}}var iU=n(838044),iV=n(159212),i_=n(939284),iq=n(866688),iz=n(319434),iW=n(408027),ij=n(745321),iZ=n(609992),iK=n(207069);let iX="ultra.course.content.assessment.routes",iY={onEnter:["contentData","attempt",e$.HV,B.HV,"$stateParams",iV.HV,function(e,t,n,i,s,r){if(!s.skipTransitionEvents){if(s.viewOriginalityReport&&!s.forceOpenFeedbackPanel){i.goPeekState(ik.eJ.ASSESSMENT_ATTEMPT_REVIEW_ORIGINALITY_TAB);return}i.isPeekPanelOpen()&&n.expandTopPanel(),function(e,t,n,i,s){var r;let o=null==e?void 0:null===(r=e.gradingColumn)||void 0===r?void 0:r.peerGrading,a=n.next.name.includes("assessment-submission-feedback"),l=n.next.name.includes("assessment-submission-feedback-tab"),c=n.next.name.includes("rubric"),d=!n.prev.name,u=s.isSmallBreakpoint();if(o||a||l||c||d||u)return!1;let p=iq.e.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail);return i.forceOpenFeedbackPanel&&p}(e,t,i,s,r)&&i.goPeekState(ik.eJ.ASSESSMENT_ATTEMPT_REVIEW_FEEDBACK_TAB,{attemptId:t.id})}}],onExit:["contentData",e$.HV,B.HV,"$q","$stateParams",function(e,t,n,i,s){if(!s.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){let s=i.when();n.isPeekPanelOpen()&&(s=t.shrinkTopPanel()),s.then(()=>{n.goPeekState("assessment.overview.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId,viewOriginalityReport:this.viewOriginalityReport})})}}]},iQ={onEnter:[B.HV,iK.HV,(e,t)=>{t.createWaiter(b.x40.FlexibleAttemptGradingM1).then(t=>{t||e.goCurrentBasePage()})}]};d.module(iX,[iw.e1,B.e1,iI.e1,iU.e1,iB,x.e1,i_.H2,iq.e1]).config([B.e2,x.e2,iS.e2,i_.AX,(e,t,i)=>{e.peekState("assessment",{abstract:!0,url:"/assessment/{contentId:_[0-9]+_1}?courseId",resolve:{[x.gc]:t.resolve}}).peekState("assessment.open",{url:"/open",params:{contentId:null,courseId:null,isCollectExternalSubmissions:!1},routingFunction:[P.N7.H,iw.HV,B.HV,(e,t,n)=>{let i=n.nextParams.contentId,s=n.nextParams.courseId,r=n.nextParams.isCollectExternalSubmissions;t.hasAnyCourseEntitlement([iz.s7.ViewAssessment,iz.s7.ModifyAssessment],s).then(e=>{if(e)n.goPeekState(ik.RK.GRADEBOOK_ITEM_ASSESSMENT,{courseId:s,contentId:i,gradeitemView:"details",assessmentType:"test"});else{let e=ik.eJ.ASSESSMENT_OVERVIEW;r&&(e=ik.eJ.ASSESSMENT_EXTERNAL_OVERVIEW),n.goPeekState(e,{courseId:s,contentId:i})}})}]}).peekState("assessment.overview",{url:"/overview",resolve:{contentData:[x.gc,iE.HV,B.HV,i_.D$,(e,t,n,i)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId,contentExtraExpand:"alignedGoals"}).then(e=>(i.setCurrentContent(e.courseContent),e))],[iS.gc]:i.resolve,translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("components/services/proctoring")])],onEnter:["contentData",eh.HV,(e,t)=>{t.column=e.gradingColumn}],onExit:[eh.HV,e=>{e.column=null}]},peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations",ik.BQ.COURSE_MESSAGE,ik.eJ.ASSESSMENT_PEER_GRADING],pageTitle:"course.content.assessment.overview.pageTitle",require:[()=>Promise.all([n.e(27993),n.e(47048),n.e(7152),n.e(92090),n.e(64755)]).then(n.bind(n,558984)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(27993),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6355),n.e(52493),n.e(47048),n.e(6521),n.e(7152),n.e(66692),n.e(92090),n.e(22674),n.e(93596),n.e(56372)]).then(n.bind(n,493596))]}).peekState(ik.eJ.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,{panelClass:"screen flexible-attempt-grading-panel",url:"/flexible-attempt-grading?contentId&userId&attemptId&gradeBy&questionId",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(38182)]).then(n.bind(n,938182)),resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/grades/flexible-attempt-grading")],currentContent:iT.Z.currentContent,currentColumn:iT.Z.currentColumn},...iQ,pageTitle:"course.grades.flexibleAttemptGrading.title",allowChildPeekStates:!0}).peekState(ik.eJ.ASSESSMENT_PEER_GRADING,{panelClass:"full",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])],currentColumn:iT.Z.currentColumn,currentContent:iT.Z.currentContent},url:"/peerReview?columnId&gradeId&userId&attemptId&initialPeerIndex",onExit:["currentColumn",e$.HV,B.HV,(e,t,n)=>{n.goPeekState("assessment.overview",{})}],reloadOnSearch:!1,require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(98610)]).then(n.bind(n,198610)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(25900),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(21235),n.e(97809),n.e(8988),n.e(6521),n.e(82578),n.e(217),n.e(3835),n.e(19438),n.e(41547),n.e(75377),n.e(83011),n.e(77457),n.e(69752),n.e(79500)]).then(n.bind(n,810913))],pageTitle:"course.grades.peer-grading.title",peekViewName:"peer-grading-peek",peekStates:[]}).peekState(`${ik.eJ.ASSESSMENT_PEER_GRADING_SUBMISSION_FEEDBACK_TAB}`,{url:"/inline-feedback?&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${ik.eJ.ASSESSMENT_PEER_GRADING}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712)]).then(n.bind(n,789825))}}}).peekState(ik.eJ.ASSESSMENT_EXTERNAL_OVERVIEW,{url:"/external-overview",panelClass:"full",resolve:{contentData:[x.gc,iE.HV,B.HV,i_.D$,(e,t,n,i)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId}).then(e=>(i.setCurrentContent(e.courseContent),e))],[iS.gc]:i.resolve,currentContent:["contentData","$q",(e,t)=>t.when(e.courseContent)],currentColumn:["contentData","$q",(e,t)=>t.when(e.gradingColumn)],translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])],onEnter:["contentData",eh.HV,(e,t)=>{t.column=e.gradingColumn}],onExit:[eh.HV,e=>{e.column=null}]},peekViewName:"assessment-overview-peek",allowChildPeekStates:!0,peekStates:["conversations",ik.BQ.COURSE_MESSAGE,"rubric-view","rubric-evaluation"],require:[()=>Promise.all([n.e(27993),n.e(47048),n.e(7152),n.e(92090),n.e(97589),n.e(91712)]).then(n.bind(n,885858)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(27993),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(47048),n.e(6521),n.e(7152),n.e(92090),n.e(97589),n.e(17530)]).then(n.bind(n,984260))]}).peekState("assessment.overview.attempt",new iF({url:"/attempt/{attemptId:_[0-9]+_1}",onEnter:[e$.HV,B.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{currentContent:["contentData",i_.D$,(e,t)=>(t.setCurrentContent(e.courseContent),e.courseContent)],currentColumn:["contentData",e=>e.gradingColumn],attempt:["$q","contentData",P.N7.H,B.HV,P.U_.serviceName,P.uy.HV,(e,t,n,i)=>{let s=i.nextParams.attemptId,r=t.courseContent.isGroupContent,o=n.$buildRaw({id:t.courseContent.courseId}).gradebook;return r?t.gradingColumn.getGroupAttemptByGroupAssociationId(t.courseContent.assignedGroups[0].groupAssociationId,!1,s).then(e=>0===e.attempts.length&&e.isInProgress()?e.withParams({expand:"attempts,attempts.toolAttemptDetail,toolAttemptDetail"}).$patch(["id"]).$asPromise():e.$asPromise()):o.attempts.$find(s,{expand:"toolAttemptDetail,alignedGoals"}).$then(e=>{t.attempt=e}).$asPromise()}]},params:{attemptId:null},peekStates:["conversations",ik.BQ.COURSE_MESSAGE,"assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-evaluation","rubric-view",ik.UM.LTI,ik.cw.CONTENT_MARKET,iI._b,iU.ef],peekViewName:"assessment-attempt-peek",pageTitle:"course.content.assessment.details.pageTitle",require:[()=>n.e(31591).then(n.bind(n,631591)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(27993),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6355),n.e(52493),n.e(47048),n.e(6521),n.e(7152),n.e(66692),n.e(92090),n.e(22674),n.e(93596),n.e(56372)]).then(n.bind(n,493596))]})).peekState("assessment.overview.multiple-attempt",{panelClass:"peek",url:"/multiple-attempt?columnId&gradeId",resolve:{currentColumn:["contentData",e=>e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()]},params:{viewOriginalityReport:!1},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(82578),n.e(217),n.e(8992)]).then(n.bind(n,308992))]}).peekState(ik.eJ.ASSESSMENT_ATTEMPT_IMS_PROCTORING,{url:"/proctoring/attempt?contentId&password&returnToProctoringToolOnEndAssessment",peekStates:["conversations",ik.BQ.COURSE_MESSAGE,"edit-file-settings","attempt-safe-assign-setting","rubric-view",iI._b,iU.ef],resolve:{translations:[F.serviceName,e=>e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])],[x.gc]:t.resolve,contentData:[x.gc,iE.HV,B.HV,(e,t,n)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})],[iS.gc]:i.resolve,currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>e.gradingColumn],attempt:["contentData",iq.HV,B.HV,(e,t,n)=>{let{gradingColumn:i,courseContent:s}=e,r=n.nextParams.password,o=s.isGroupContent,a=s.assignedGroups?s.assignedGroups[0].groupId:null;return t.launchAttempt(i,r,o,a)}],onEnter:["contentData","attempt",B.HV,iG.HV,function(e,t,n,i){let{courseContent:s}=e,r=null==t?void 0:t.$response;if((null==r?void 0:r.status)===iW.oji.Forbidden){var o;switch(null==r?void 0:null===(o=r.data)||void 0===o?void 0:o.code){case iW.MlJ.AttemptCompletedOrForceCompletion:n.goPeekState(ik.eJ.ASSESSMENT_OVERVIEW,{contentId:s.id}).then(()=>{i.open({scope:this.$rootScope,template:ij})});break;case iW.MlJ.AttemptPastDue:n.goPeekState(ik.eJ.ASSESSMENT_OVERVIEW,{contentId:s.id}).then(()=>{i.open({scope:this.$rootScope,template:iZ})})}}}]},require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6355),n.e(4729),n.e(52493),n.e(47048),n.e(6521),n.e(7152),n.e(66692),n.e(22674),n.e(65301),n.e(81050)]).then(n.bind(n,633006)),pageTitle:"components.services.proctoring.delivery.attempt.pageTitle",peekViewName:"proctored-assessment-peek",panelClass:"full"}).peekState("assessment-details",{panelClass:"peek",url:"/details",resolve:{contentData:[x.gc,iE.HV,B.HV,i_.D$,(e,t,n,i)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId}).then(e=>(i.setCurrentContent(e.courseContent),e))],translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment")])]},params:{detailsView:!0,submitToGRD:null},require:[()=>Promise.all([n.e(27993),n.e(47048),n.e(7152),n.e(92090),n.e(64755)]).then(n.bind(n,558984)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(27993),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6355),n.e(52493),n.e(47048),n.e(6521),n.e(7152),n.e(66692),n.e(92090),n.e(22674),n.e(93596),n.e(56372)]).then(n.bind(n,493596))],peekStates:["attempt-safe-assign-setting"]}).peekState(ik.eJ.ASSESSMENT_ATTEMPT_REVIEW,{url:"/review?columnId&contentId",panelClass:"full",resolve:{contentData:["contentData",x.gc,iE.HV,B.HV,i_.D$,(e,t,n,i,s)=>e.gradeDetail.ui.groupAttempt?e:n.loadContentAndGrades({course:t,contentId:i.nextParams.contentId}).then(e=>(s.setCurrentContent(e.courseContent),e))],[iS.gc]:i.resolve},require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6521),n.e(82578),n.e(217),n.e(19438),n.e(49536)]).then(n.bind(n,235711))],...iY,params:{commentPanelInitiallyOpen:!1,viewOriginalityReport:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations",ik.BQ.COURSE_MESSAGE,ik.RK.SUBMISSION_DEEP_LINK,"rubric-view","originality-report",iU.ef]}).peekState(ik.eJ.ASSESSMENT_ATTEMPT_REVIEW_FEEDBACK_TAB,{url:"/inline-feedback?attemptId&userId&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${ik.eJ.ASSESSMENT_ATTEMPT_REVIEW}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712)]).then(n.bind(n,789825))}},peekStates:[ik.UM.LTI,ik.RK.SUBMISSION_DEEP_LINK]}).peekState(ik.eJ.ASSESSMENT_ATTEMPT_REVIEW_RUBRICS_TAB,{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{[`${ik.eJ.ASSESSMENT_ATTEMPT_REVIEW}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(90970)]).then(n.bind(n,490970))}},peekStates:[ik.UM.LTI,ik.RK.SUBMISSION_DEEP_LINK]}).peekState(ik.eJ.ASSESSMENT_ATTEMPT_REVIEW_ORIGINALITY_TAB,{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{[`${ik.eJ.ASSESSMENT_ATTEMPT_REVIEW}@`]:{require:()=>n.e(92992).then(n.bind(n,192992))}},peekStates:[ik.UM.LTI,ik.RK.SUBMISSION_DEEP_LINK]}),e.peekState(ik.eJ.ASSESSMENT_SETTINGS,{panelClass:"peek",url:"/assessmentSettings?contentId?focusEleId?subpanelId",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(6355),n.e(52493),n.e(47048),n.e(66692),n.e(44801),n.e(8344)]).then(n.bind(n,926288)),pageTitle:"course.content.assessment.windowTitle",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])]},peekViewName:"assessment-settings-peek",allowChildPeekStates:!0,peekStates:["assign-graders","course-group","goal-picker-legacy","rubric","proctoring-lti-tool","question-analysis"]}),e.peekState("assign-graders",{panelClass:"full",url:"/assignGraders",require:()=>n.e(38394).then(n.bind(n,638394)),pageTitle:"course.content.assessment.settings.delegatedGrading.assignGraders.pageTitle",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/content/assessment/assessment")]},peekViewName:"assign-graders-peek"}),e.peekState("attempt-safe-assign-setting",{url:"/safeAssignSetting",require:()=>n.e(44251).then(n.bind(n,644251)),params:{submitToGRD:null}}).peekState("assessment-submission-feedback",{url:"/feedback?userId",require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712)]).then(n.bind(n,789825)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(6521),n.e(7152),n.e(66692),n.e(90814),n.e(62300)]).then(n.bind(n,505039))],resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")],offCanvasArgs:["offCanvasArgs",e=>(e.overlay=!1,e.disableFocusHandling=!0,e)]},pageTitle:"course.content.assessment.feedback.title"}).peekState(ik.RK.CREATE_OFFLINE_ATTEMPT,{url:"/create-attempt?expandId&userId&groupId&columnId&contentId",require:()=>Promise.all([n.e(52493),n.e(78108)]).then(n.bind(n,739072)),resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/content/assessment/attempt/create/create-attempt")]},pageTitle:"course.content.assessment.attempt.create.createAttempt",panelClass:"peek"}).peekState("proctoring-lti-tool",{panelClass:"full",url:"/proctoringLtiTool?toolHref&toolSubtitle",resolve:{translations:[F.serviceName,e=>e.loadBundle("components/services/proctoring")]},require:()=>n.e(13313).then(n.bind(n,413313)),pageTitle:"components.services.proctoring.ltiTool.pageTitle"}).peekState(ik.RK.SUBMISSION_DEEP_LINK,{url:"/submission-deep-link?deepLinkAttemptId&peerIndex",panelClass:"full",require:[()=>n.e(67527).then(n.bind(n,267527)),()=>n.e(67204).then(n.bind(n,567204))],peekStates:["assessment-submission-feedback"],peekViewName:"submission-deep-link"}).peekState(ik.RK.SUBMISSION_DEEP_LINK_FEEDBACK_TAB,{url:"/inline-feedback?mode&deepLinkAttemptId",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${ik.RK.SUBMISSION_DEEP_LINK}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(63550)]).then(n.bind(n,963550))}},peekStates:["per-assessment-settings",ik.UM.LTI,ik.RK.SUBMISSION_DEEP_LINK]}).peekState(ik.eJ.ASSESSMENT_ATTEMPT_RESPONDUS_REQUIREMENT,{url:"/respondusRequirement?contentId",resolve:{translations:[F.serviceName,e=>e.loadBundle("components/services/proctoring")]},panelClass:"full",require:[()=>n.e(8724).then(n.bind(n,208724))],pageTitle:"components.services.proctoring.delivery.attempt.pageTitle"})}]);let iJ="ultra.course.attendance.routes";d.module(iJ,[B.e1,x.e1]).config([B.e2,x.e2,(e,t)=>{e.peekState("attendance",{url:"/attendance?courseId&attendanceView&meetingId&memberId&isSingleUserView",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},reloadOnSearch:!1,require:()=>Promise.all([n.e(30531),n.e(4822)]).then(n.bind(n,804822)),pageTitle:"course.attendance.pageTitle",panelClass:"full",peekStates:["attendance-settings","attendance-student-records"]}).peekState("attendance-settings",{url:"/settings",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},require:()=>Promise.all([n.e(30531),n.e(26649)]).then(n.bind(n,26649)),pageTitle:"course.attendance.settings.pageTitle"}).peekState("attendance-student-records",{url:"/studentRecords/:membershipId?userId",resolve:{[x.gc]:t.resolve,translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},require:()=>Promise.all([n.e(30531),n.e(9757)]).then(n.bind(n,409757)),pageTitle:"course.attendance.studentRecords.pageTitle",allowChildPeekStates:!0,peekStates:[ik.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES]}).peekState("attendance-student-view",{url:"/attendanceGrade?courseId",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},require:()=>Promise.all([n.e(30531),n.e(9757)]).then(n.bind(n,409757)),pageTitle:"course.attendance.studentRecords.pageTitle"})}]);var i0=n(98631),i1=n(625506);let i2="ultra.base.proctoring.routes";d.module(i2,[F.moduleName,B.e1,x.e1,iS.e1,iq.e1]).config([B.e2,x.e2,iS.e2,(e,t,i)=>{e.baseState(ik.Zo.BASE_PROCTORING_ATTEMPT,{url:"^/proctoring/attempt?courseId&contentId&password",peekStates:["conversations",ik.BQ.COURSE_MESSAGE,"assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-view",iI._b,iU.ef],onEnter:()=>{i1("body").addClass("proctoring-attempt-open")},onExit:()=>{i1("body").removeClass("proctoring-attempt-open")},resolve:{[x.gc]:t.resolve,[iS.gc]:i.resolve,contentData:[x.gc,iE.HV,B.HV,(e,t,n)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})],translations:[F.serviceName,e=>e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])],currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>e.gradingColumn],attempt:["contentData",iq.HV,B.HV,(e,t,n)=>{let{gradingColumn:i,courseContent:s}=e,r=n.nextParams.password,o=s.isGroupContent,a=s.assignedGroups?s.assignedGroups[0].groupId:null;return t.launchAttempt(i,r,o,a)}],exceptions:["contentData",x.gc,iS.gc,i0.HV,(e,t,n,i)=>{var s;let r=null==t?void 0:t.id,o=null==n?void 0:n.id,a=null==e?void 0:null===(s=e.gradingColumn)||void 0===s?void 0:s.id;if(r&&o&&a)return i.getGradableItemUserOptionExceptions(r,o,[a])}]},require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6355),n.e(4729),n.e(52493),n.e(47048),n.e(6521),n.e(7152),n.e(66692),n.e(22674),n.e(65301),n.e(81050)]).then(n.bind(n,633006)),pageTitle:"components.services.proctoring.delivery.attempt.pageTitle",peekViewName:"proctored-assessment-peek"}).baseState("base.proctoring-review",{url:"^/proctoring/review?courseId&contentId&attemptId",peekStates:[],onEnter:()=>{i1("body").addClass("proctoring-attempt-open")},onExit:()=>{i1("body").removeClass("proctoring-attempt-open")},resolve:{translations:[F.serviceName,e=>e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])],[x.gc]:t.resolve,[iS.gc]:i.resolve,currentContent:[x.gc,B.HV,i_.D$,(e,t,n)=>e.contents.$find(t.nextParams.contentId).$asPromise().then(e=>(n.setCurrentContent(e),e))],currentAttempt:[x.gc,B.HV,(e,t)=>e.gradebook.attempts.$find(t.nextParams.attemptId,{expand:"toolAttemptDetail,alignedGoals,viewUrl"}).$asPromise()],currentGradedQuestionAttempts:["$q","currentAttempt",(e,t)=>{let n=e.defer();return t.assessment.gradedQuestionAttempts.$fetch({expand:"questionAttempt.question,questionAttempt.answerCorrectness"}).$asPromise().then(e=>{e.setPostStatusAndGroupAttemptId(t),n.resolve(e)}),n.promise}]},require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(4729),n.e(6521),n.e(65301),n.e(39485)]).then(n.bind(n,839485)),pageTitle:"components.services.proctoring.delivery.review.pageTitle"})}]);var i3=n(811339);let i9="ultra.base.messages.routes";d.module(i9,[x.e1,iS.e1,B.e1]).config([B.e2,x.e2,iS.e2,(e,t,i)=>{e.peekState("create-message",{url:"/create?courseId&{allowReplies:bool}",resolve:{[x.gc]:t.resolve,[iS.gc]:i.resolve},require:()=>Promise.all([n.e(27459),n.e(21235),n.e(71173),n.e(73570)]).then(n.bind(n,23977)),pageTitle:"components.directives.message.newMessage",panelClass:"full"}).peekState("edit-message",{url:"/edit/:conversationId?courseId&offset&count",require:()=>Promise.all([n.e(27459),n.e(21235),n.e(71173),n.e(73570)]).then(n.bind(n,23977)),pageTitle:"components.directives.message.message",panelClass:"full",allowChildPeekStates:!0,peekStates:[ik.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,ik.BQ.EDIT_ENROLLMENT],peekViewName:"course-conversation-peek@"}).peekState(ik.BQ.COURSE_MESSAGE,{url:"/message?courseId&recipientIds&conversationPerRecipient",onExit:["$rootScope","$stateParams",(e,t)=>{!function(e,t){e.$broadcast("bb-message-refresh",t)}(e,t.courseId)}],resolve:{[iS.gc]:i.resolve,translations:[F.serviceName,e=>e.loadBundle("features/base/messages/base-messages")]},require:()=>Promise.all([n.e(27459),n.e(21235),n.e(71173),n.e(73570)]).then(n.bind(n,23977)),pageTitle:"base.messages.newMessage",panelClass:"full"})}]);let i4="ultra.base.stream.routes";d.module(i4,[F.moduleName,e$.e1,iw.e1,P.e1,B.e1]).config([B.e2,e=>{e.peekState("announcement",{url:"/announcement/:streamEntryId",require:()=>Promise.all([n.e(27459),n.e(90917),n.e(19620),n.e(24956),n.e(17346)]).then(n.bind(n,705292)),pageTitle:"base.stream.entryTitle.announcement"}).peekState("stream-message",{url:"/message/:courseId/:conversationId",require:()=>Promise.all([n.e(27459),n.e(21235),n.e(71173),n.e(55425)]).then(n.bind(n,929316)),pageTitle:"base.stream.entryTitle.message"}).peekState("content-group",{url:"/content/:streamEntryId",require:()=>Promise.all([n.e(90917),n.e(19620),n.e(24956),n.e(93875)]).then(n.bind(n,997035)),resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/stream/content/content")]},pageTitle:"base.stream.content.pageTitle"}).peekState("notification-create",{abstract:!0,url:"/notification",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/stream/notification")],isAdmin:[iw.HV,e=>e.hasSystemEntitlement(iz.lP.ViewAdminTop).then(e=>e)]},panelClass:"full",require:()=>n.e(86969).then(n.bind(n,86969)),pageTitle:"base.stream.notification.create.pageTitle"}).peekState("notification-create.steps",{url:"/create",panelClass:"full",pageTitle:"base.stream.notification.create.pageTitle",views:{"notification-step1@":{require:()=>Promise.all([n.e(27459),n.e(95750)]).then(n.bind(n,131130))},"notification-step2@":{require:()=>n.e(89461).then(n.bind(n,989461))}}}).peekState("notification-edit",{abstract:!0,url:"/notification",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/stream/notification")]},panelClass:"full",require:()=>n.e(91867).then(n.bind(n,291867)),pageTitle:"base.stream.notification.edit.pageTitle"}).peekState("notification-edit.steps",{url:"/edit",panelClass:"full",pageTitle:"base.stream.notification.edit.pageTitle",views:{"notification-step1@":{require:()=>Promise.all([n.e(27459),n.e(95750)]).then(n.bind(n,131130))},"notification-step2@":{require:()=>n.e(89461).then(n.bind(n,989461))}}})}]);var i7=n(578332);let i5="ultra.base.notification-settings.routes";d.module(i5,[F.moduleName,B.e1]).config([B.e2,e=>{e.peekState("notification-settings",{abstract:!0,require:()=>n.e(23528).then(n.bind(n,923528)),resolve:{mobileDistributorSettings:[P.g8.H,e=>e.$build().courseSettings.$new(iz.e3.Mobile).$fetch().$allow([400])],isMobileDistributorActive:["$q","mobileDistributorSettings","memberships",(e,t)=>t.$then(e=>!!e.settings).$asPromise()],notificationGeneralSettings:[P.yc.HV,e=>e.$build().$fetch().$asPromise()],memberships:[i7.HV,e=>e.reloadStreamMemberships()]}}).peekState("notification-settings.content",{url:"/notification/settings?tab",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/notifications-settings/base-notifications-settings")],memberships:[i7.HV,e=>e.reloadStreamMemberships()]},views:{"email-settings@":{require:()=>n.e(7732).then(n.bind(n,707732))},"stream-settings@":{require:()=>n.e(93518).then(n.bind(n,893518)),resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/stream/base-stream")]}},"sms-settings@":{require:()=>Promise.all([n.e(4729),n.e(49273),n.e(64265)]).then(n.bind(n,564265))},"mobile-settings@":{require:()=>n.e(51502).then(n.bind(n,851502))}}})}]);let i6="ultra.base.admin.brand.routes";d.module(i6,[F.moduleName,B.e1]).config([B.e2,e=>{e.peekState("brands",{panelClass:"full",allowChildPeekStates:!0,url:"/brands",systemEntitlement:iz.lP.ViewBrands,require:()=>Promise.all([n.e(98290),n.e(62101),n.e(66350),n.e(22258),n.e(90119),n.e(80045)]).then(n.bind(n,139068)),pageTitle:"base.admin.branding.brandList.title",peekStates:["create-brand","brand-detail","modify-custom-css"]}).peekState("modify-custom-css",{panelClass:"full",allowChildPeekStates:!0,url:"/custom-css/modify",systemEntitlement:iz.lP.ModifyCustomCss,require:()=>n.e(96856).then(n.bind(n,496856)),pageTitle:"base.admin.branding.addCustomCSS.title"}).peekState("create-brand",{panelClass:"full",allowChildPeekStates:!0,url:"/create",systemEntitlement:iz.lP.CreateBrand,require:()=>Promise.all([n.e(98290),n.e(62101),n.e(66350),n.e(22258),n.e(90119),n.e(23962)]).then(n.bind(n,600296)),pageTitle:"base.admin.branding.createBrand.title",peekStates:["colorSelection"]}).peekState("brand-detail",{panelClass:"full",allowChildPeekStates:!0,url:"/brand/:brandId",systemEntitlement:iz.lP.ViewBrands,require:()=>Promise.all([n.e(98290),n.e(62101),n.e(66350),n.e(22258),n.e(90119),n.e(23962)]).then(n.bind(n,600296)),pageTitle:"base.admin.branding.brandDetails.title",peekStates:["colorSelection"]})}]);let i8="ultra.base.admin.theme.routes";d.module(i8,[F.moduleName,B.e1]).config([B.e2,e=>{e.peekState("colorSelection",{systemEntitlement:iz.lP.ViewAdmin,url:"/theme/:themeId/colorSelection",require:()=>n.e(28653).then(n.bind(n,128653)),pageTitle:"base.admin.theme.colorSelection.title",panelClass:"full"})}]);let se="ultra.base.calendar.routes";d.module(se,[F.moduleName,B.e1]).config([B.e2,e=>{e.peekState(ik.Lj.CALENDAR_SETTINGS,{url:"/settings",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")]},require:()=>n.e(85665).then(n.bind(n,685665)),pageTitle:"base.calendar.settings.title"}).peekState(ik.Lj.CREATE_EVENT,{url:"/event/create?selectedDate?calendarId",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([n.e(90917),n.e(19620),n.e(19166),n.e(24956),n.e(31189),n.e(99761)]).then(n.bind(n,610488)),pageTitle:"base.calendar.create.addEvent"}).peekState(ik.Lj.EDIT_EVENT,{url:"/event/edit/:calendarId/:itemSourceType/:itemSourceId?updateSeries&repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([n.e(90917),n.e(19620),n.e(19166),n.e(24956),n.e(31189),n.e(99761)]).then(n.bind(n,610488)),pageTitle:"base.calendar.create.editEvent"}).peekState(ik.Lj.VIEW_EVENT,{url:"/event/view/:calendarId/:itemSourceType/:itemSourceId?repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")]},require:()=>Promise.all([n.e(19166),n.e(63193)]).then(n.bind(n,563193)),pageTitle:"base.calendar.create.viewEvent"}).peekState(ik.Lj.COURSE_SCHEDULE,{url:"/class-schedule?selectedDate&courseId",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([n.e(19166),n.e(31189),n.e(45819)]).then(n.bind(n,66016)),pageTitle:"base.calendar.schedule.classSchedule"}).peekState(ik.Lj.OFFICE_HOURS,{url:"/office-hours?selectedDate?calendarId",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([n.e(90917),n.e(19620),n.e(19166),n.e(24956),n.e(31189),n.e(99761)]).then(n.bind(n,610488)),pageTitle:"base.calendar.addOfficeHours"})}]);var st=n(919038);let sn="ultra.base.institution-page.routes";d.module(sn,[B.e1]).config([B.e2,e=>{e.peekState("allLinks",{url:"/all?moduleId",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(45683)]).then(n.bind(n,645683)),pageTitle:"base.nav.institutionPage",resolve:{IP:[st.HV,B.HV,(e,t)=>{let n=t.nextParams;return e.getModuleIsVisible(n.moduleId).then(e=>{if(!e)return t.goToRoute("base.institution-page")})}]}}).peekState("editPageImage",{systemEntitlement:iz.dF.ModifyPortalOptionsModuleManagement,url:"/editPage?type",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(6914)]).then(n.bind(n,206914)),pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-page-image-peek"}).peekState("editModule",{systemEntitlement:iz.dF.ModifyPortalOptionsModuleManagement,url:"/edit?moduleId&expandRoles",panelClass:"full",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(59381)]).then(n.bind(n,59381)),peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("createModule",{systemEntitlement:iz.dF.CreatePortalOptionsModuleManagement,url:"/create?type&sequence",panelClass:"full",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(5712)]).then(n.bind(n,805712)),peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("linkImage",{systemEntitlement:iz.dF.ModifyPortalOptionsModuleManagement,url:"/linkImage?linkId",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(7814)]).then(n.bind(n,707814)),pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-link-image-peek"}).peekState("contentCollection",{systemEntitlement:iz.dF.ModifyPortalOptionsModuleManagement,url:"/contentCollection",require:()=>n.e(35766).then(n.bind(n,835766)),pageTitle:"base.nav.institutionPage",panelClass:"full",peekViewName:"ip-content-collection-peek"}).peekState("browserSettings",{systemEntitlement:iz.dF.ModifyPortalOptionsModuleManagement,url:"/browserSettings",require:()=>n.e(37864).then(n.bind(n,37864)),pageTitle:"base.nav.institutionPage",panelClass:"peek"})}]);let si="ultra.features.base.profile.privacy.routes";d.module(si,["ui.router",B.e1]).config([B.e2,e=>{e.peekState("privacy",{url:"/privacy",require:()=>Promise.all([n.e(4729),n.e(49273),n.e(77564),n.e(55850)]).then(n.bind(n,777564)),pageTitle:"base.profile.updatePrivacySettings.pageTitle"})}]);let ss="profile.update-avatar.routes";d.module(ss,[e$.e1,B.e1]).config([B.e2,e=>{e.peekState(ik.M0.UPDATE_AVATAR_PEEK,{url:"/avatar/update",require:()=>Promise.all([n.e(4729),n.e(57534)]).then(n.bind(n,557534)),pageTitle:"base.profile.update-avatar.pageTitle"})}]);var sr=n(43223);let so="ultra.features.base.profile.update.basicProfile.routes";d.module(so,["ui.router",e$.e1,P.e1,B.e1]).config([B.e2,e=>{e.peekState(ik.M0.UPDATE_PROFILE_PEEK,{url:"/update?focusField",require:()=>Promise.all([n.e(4729),n.e(49273),n.e(26217),n.e(9773)]).then(n.bind(n,409573)),pageTitle:"base.profile.update.sectionTitle",resolve:{currentUser:[sr.HV,eg.HV,(e,t)=>e.$find(t.userId).$asPromise()]}}).peekState(ik.M0.UPDATE_LANGUAGE_PEEK,{url:"/language",require:()=>n.e(4146).then(n.bind(n,604146)),pageTitle:"base.profile.updateLanguage.pageTitle",resolve:{currentUser:[sr.HV,eg.HV,(e,t)=>e.$find(t.userId).$asPromise()]}})}]);let sa="profile.update-password.routes";d.module(sa,[e$.e1,B.e1]).config([B.e2,e=>{e.peekState(ik.M0.UPDATE_PASSWORD_PEEK,{url:"/password/update",require:()=>Promise.all([n.e(4729),n.e(49273),n.e(15440)]).then(n.bind(n,315440)),pageTitle:"base.profile.update-password.pageTitle"})}]);var sl=n(205507);let sc="ultra.base.tools.routes";d.module(sc,[B.e1]).config([B.e2,e=>{e.state("base.tools.legacy",{url:"/:toolName",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/tools/base-tools")],offCanvasArgs:[B.HV,e=>({panelClass:"full",template:sl,close:()=>{e.goCurrentBasePage()},stateName:"base.tools.legacy"})]},require:()=>Promise.resolve().then(n.bind(n,335614)),onExit:[e$.HV,e=>{e.close("base.tools.legacy")}],pageTitle:"base.tools.pageTitle"})}]);var sd=n(104111);let su="ultra.base.courses.routes";d.module(su,[tM.e1,F.moduleName,eh.e1,e$.e1,P.e1,B.e1,sd.e1]).config([B.e2,e=>{e.peekState("external",{abstract:!0}).peekState("external.create",{url:"/external/create",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/courses/external/external-course")]},require:()=>Promise.all([n.e(19166),n.e(31189),n.e(40030)]).then(n.bind(n,6582)),pageTitle:"course.external.panelTitleAdd"}).peekState("external.edit",{url:"/external/edit/:id",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/courses/external/external-course")]},require:()=>Promise.all([n.e(19166),n.e(31189),n.e(40030)]).then(n.bind(n,6582)),pageTitle:"course.external.panelTitleEdit"}).peekState("external.description",{url:"/external/description/:courseId",resolve:{currentCourse:["$stateParams",P.N7.H,P.jh.H,(e,t,n)=>{let i=e.courseId;return n.$new(i).$fetch().$asPromise().then(e=>{let n=t.$new();return n.id=e.id,n.name=e.title,n.description=e.description,n.displayName=e.title,n})}],translations:[F.serviceName,e=>e.loadBundle("features/course/description/course-description")]},require:()=>n.e(74799).then(n.bind(n,974799)),pageTitle:"course.description.header"})}]);var sp=n(411475),sm=n(739605);let sh="ultra.course.journal.router";d.module(sh,[F.moduleName,B.e1,sp.e1,sm.e1,x.e1,iS.e1,i_.e1]).config([B.e2,x.e2,iS.e2,i_.e2,(e,t,i,s)=>{e.peekState(ik.Eg.JOURNAL,{abstract:!0,url:"/journal",resolve:{[x.gc]:t.resolve,translations:["$q",F.serviceName,(e,t)=>{let n=[];return n.push(t.loadBundle("features/course/content/journal/journal")),n.push(t.loadBundle("features/course/content/course-content")),n.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(n)}]}}).peekState(ik.Eg.JOURNAL_VIEW,{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter?journalId",panelClass:"full",pageTitle:"course.content.journalItem",require:()=>Promise.all([n.e(25900),n.e(21235),n.e(8988),n.e(6355),n.e(9818),n.e(13298),n.e(67248)]).then(n.bind(n,895195)),resolve:{translations:["$q",F.serviceName,(e,t)=>{let n=[];return n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),e.all(n)}]}}).peekState(ik.Eg.JOURNAL_VIEW_WITH_PARTICIPATION,{url:"?view&limit&page&name&submissionStatus&gradingStatus&sortColumn&sortDirection&entryLimit&entryPage",panelClass:"full",reloadOnSearch:!1,views:{"journal-content@":{require:()=>Promise.all([n.e(27459),n.e(6355),n.e(21054),n.e(99778),n.e(9818),n.e(66764)]).then(n.bind(n,437759))},"journal-participation@":{require:()=>Promise.all([n.e(99778),n.e(81874)]).then(n.bind(n,981874))}},onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],peekStates:[ik.XO.CONDITIONAL_RELEASE_PEEK_PANEL,ik.cw.CONTENT_MARKET,"course-group",ik.Eg.JOURNAL_DETAILS,ik.Eg.JOURNAL_PARTICIPATION_DETAIL,ik.Eg.JOURNAL_SETTINGS,sp.Rn,ik.Eg.JOURNAL_SUBMISSION_FEEDBACK,ik.UM.LTI,ik.BQ.COURSE_MESSAGE,"rubric","rubric-evaluation","rubric-view","view-exceptions"],peekViewName:"journal-peek@",pageTitle:"course.content.journalItem",allowChildPeekStates:!0,resolve:{[x.gc]:t.resolve,[iS.gc]:i.resolve,currentCourseId:["$state",e=>e.nextParams.courseId],[i_.gc]:s.resolve,currentColumn:[B.HV,x.gc,(e,t)=>{let n=e.nextParams.columnId;if(n&&n!==P.Rp.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n).$asPromise()}]}}).peekState(ik.Eg.JOURNAL_PARTICIPATION_DETAIL,{url:"/journal-participation-detail?offset&columnId&contentId&singleUserId&singleMembershipId&participantId&entryLimit&entryPage",panelClass:"full",require:()=>Promise.all([n.e(21235),n.e(8988),n.e(99778),n.e(39115)]).then(n.bind(n,339115)),pageTitle:"course.content.journalItem",peekViewName:"journal-submissions-peek",allowChildPeekStates:!0,resolve:{translations:["$q",F.serviceName,(e,t)=>t.loadBundle("features/course/content/journal/journal")]},peekStates:[ik.Eg.JOURNAL_SUBMISSION_FEEDBACK,ik.cw.CONTENT_MARKET,ik.UM.LTI,"rubric-evaluation"]}).peekState(ik.Eg.JOURNAL_DETAILS,{panelClass:"peek",url:"/details",require:()=>n.e(51377).then(n.bind(n,751377)),pageTitle:"course.content.journalDetails",peekViewName:"journal-details-peek"}).peekState(ik.Eg.JOURNAL_SETTINGS,{panelClass:"peek",url:"/settings?focusEleId",require:()=>Promise.all([n.e(6355),n.e(9818),n.e(71995)]).then(n.bind(n,137684)),pageTitle:"course.content.journalSettings",peekViewName:"journal-settings-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","rubric"]}).peekState(ik.Eg.JOURNAL_SUBMISSION_FEEDBACK,{panelClass:"peek",url:"/feedback?userId?columnId",require:()=>Promise.all([n.e(99778),n.e(63467)]).then(n.bind(n,663467)),pageTitle:"course.content.journalFeedback",peekViewName:"journal-feedback-peek"})}]);var sg=n(471915);let sf="ultra.course.content.conversations.routes";d.module(sf,[F.moduleName,B.e1,x.e1]).config([B.e2,x.e2,(e,t)=>{e.peekState("conversations",{url:"/conversations/:contentId/:courseId?groupId",resolve:{[x.gc]:t.resolve,content:[x.gc,iE.HV,B.HV,P.N7.H,(e,t,n,i)=>i.$new(e.id).contents.$find(n.nextParams.contentId,{expand:"assignedGroups"}).$asPromise()],translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("common/user-common")])],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[sg.HV,"currentCourseMemberships",(e,t)=>e.init(t).then(()=>e.loadHardContent(!0))]},onExit:[sg.HV,e=>{e.destroy()}],require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6355),n.e(25062),n.e(54777),n.e(21054),n.e(68362),n.e(79389),n.e(42152)]).then(n.bind(n,242152)),pageTitle:"course.content.classConversations",peekViewName:"conversations-peek",panelClass:"full",allowChildPeekStates:!0,peekStates:[ik.BQ.COURSE_MESSAGE,ik.BQ.COURSE_DISCUSSION_PARTICIPANTS,ik.BQ.COURSE_LTI,ik.BQ.COURSE_CONTENT_MARKET]})}]);var sb=n(260644);let sv="ultra.course.announcement.router";d.module(sv,[F.moduleName,B.e1]).config([B.e2,e=>{e.peekState(ik.Fq.ANNOUNCEMENT_DETAIL,{url:"/announcement-detail?courseId&announcementId&mode",require:()=>Promise.all([n.e(19620),n.e(51231)]).then(n.bind(n,351231)),pageTitle:"course.outline.announcements.title",panelClass:"full"})}]);let sy="ultra.course.books-and-tools.router";d.module(sy,[F.moduleName,B.e1]).config([B.e2,e=>{e.peekState("books-and-tools",{url:"/booksAndTools?parentId",require:()=>Promise.all([n.e(44716),n.e(57308)]).then(n.bind(n,47496)),resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/books-and-tools/books-and-tools")]},panelClass:"peek",pageTitle:"course.booksAndTools.tab.title",peekStates:[ik.cw.CONTENT_MARKET,"partner-tools","proctoring-lti-tool"]})}]);var sC=n(855019),sS=n(996011),sE=n(57292);let sI="ultra.course.collab.router";d.module(sI,[F.moduleName,B.e1]).config([B.e2,e=>{k.default.features.collab&&e.peekState("collab",{url:"/collab/:launchType",require:()=>n.e(2264).then(n.bind(n,902264)),pageTitle:"course.outline.collab.ultraCollabTitle",panelClass:"full",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/collab/course-collab")]},onExit:["$rootScope",e=>{e.$broadcast("collab-exit")}]})}]);var sw=n(379688),sA=n(396685);let sk="ultra.course.content-market.router";d.module(sk,[F.moduleName,B.e1]).config([B.e2,e=>{e.peekState(ik.cw.CONTENT_MARKET,{url:"/contentmarket?parentId&positionBefore&positionAfter&position&mode",require:()=>Promise.all([n.e(25900),n.e(44716),n.e(29577),n.e(28920)]).then(n.bind(n,638331)),resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])]},panelClass:"full",pageTitle:"course.contentMarket.contentMarketName",peekStates:["partner-tool",ik.UM.LTI]})}]);let sx="ultra.course.content-collection.router";d.module(sx,[F.moduleName,B.e1]).config([B.e2,e=>{e.peekState(ik.xh.CONTENT_COLLECTION,{url:"/contentcollection?parentId&positionBefore&positionAfter",require:()=>n.e(49082).then(n.bind(n,849082)),resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content-collection/content-collection")])]},panelClass:"full",pageTitle:"course.contentCollection.contentCollection",peekStates:["content-collection-edit","content-collection-picker","content-collection-settings"],peekViewName:"content-collection-child@"}).peekState("content-collection-edit",{url:"/edit",require:()=>n.e(25326).then(n.bind(n,625326)),panelClass:"peek",pageTitle:"course.contentCollection.itemSettings",peekStates:[],params:{items:null,fileRow:null}}).peekState("content-collection-settings",{url:"/settings",require:()=>n.e(55542).then(n.bind(n,655542)),panelClass:"peek",pageTitle:"course.contentCollection.browserSettings",peekStates:[]}).peekState("content-collection-picker",{url:"/picker?pickerType&multi",require:()=>n.e(26842).then(n.bind(n,126842)),panelClass:"full",pageTitle:"course.contentCollection.browseContentCollection",peekStates:[],params:{pickerType:"File",multi:"true"}})}]);var sT=n(802698);let sP="ultra.course.groups.router";d.module(sP,[x.e1,F.moduleName,B.e1]).config([x.e2,B.e2,(e,t)=>{t.peekState("group-set-list",{url:"/group-set-list",courseEntitlement:iz.pQ.ViewGroupsAsAdmin,require:()=>n.e(67641).then(n.bind(n,267641)),pageTitle:"course.outline.groupWorkspace.title",peekStates:["group-set-detail",ik.xp.IMPORT_GROUP_SET,ik.xp.EXPORT_GROUP_SET,ik.xp.GROUP_MEMBERS_LIST],panelClass:"full"}).peekState(ik.xp.IMPORT_GROUP_SET,{url:"/import-group-set",courseEntitlement:iz.pQ.ViewGroupsAsAdmin,require:()=>n.e(52717).then(n.bind(n,552717)),pageTitle:"course.content.courseGroup.importGroupSetTitle",panelClass:"peek"}).peekState(ik.xp.IMPORT_GROUP_MEMBERS,{url:"/import-groups-members",courseEntitlement:iz.pQ.ViewGroupsAsAdmin,require:()=>n.e(44678).then(n.bind(n,444678)),pageTitle:"course.content.courseGroup.importGroups",panelClass:"peek"}).peekState(ik.xp.EXPORT_GROUP_SET,{url:"/export-group-set?groupSetId",courseEntitlement:iz.pQ.ViewGroupsAsAdmin,require:()=>n.e(54826).then(n.bind(n,154826)),pageTitle:"course.content.courseGroup.exportGroupSetTitle",panelClass:"peek"}).peekState(ik.xp.GROUP_MEMBERS_LIST,{url:"/group-members-list?groupId",require:()=>n.e(33497).then(n.bind(n,33497)),pageTitle:"course.content.courseGroup.groupMembersTitle",panelClass:"peek"}).peekState("group-set-detail",{panelClass:"full",url:"/groupSet?courseId&groupSetId&mode",courseEntitlement:iz.pQ.ViewGroupsAsAdmin,resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/content/group/course-group")]},require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(21235),n.e(8988),n.e(63564),n.e(30549)]).then(n.bind(n,730549)),pageTitle:"course.content.courseGroup.groupSetTitle",peekStates:[ik.BQ.COURSE_MESSAGE,ik.xp.EXPORT_GROUP_SET,ik.xp.IMPORT_GROUP_MEMBERS],peekViewName:"group-message-peek"}).peekState("content-group-enroll",{url:"/group-enroll?courseId&contentId&fromView",panelClass:"full",resolve:{[x.gc]:e.resolve,translations:[F.serviceName,e=>e.loadBundle("features/course/content/group/course-group")]},require:()=>n.e(16006).then(n.bind(n,616006)),pageTitle:"course.content.courseGroup.selfEnroll",peekStates:[ik.xp.GROUP_MEMBERS_LIST]}).peekState("course-group-enroll",{url:"/course-group-enroll?courseId&fromView",pageTitle:"course.content.courseGroup.selfEnroll",peekStates:[ik.xp.GROUP_MEMBERS_LIST],panelClass:"full",require:()=>n.e(39013).then(n.bind(n,839013))})}]);var sD=n(539210);let sG="ultra.course.question-analysis.routes",sR=()=>({translations:[F.serviceName,e=>e.loadBundle("features/course/question-analysis/question-analysis")]});d.module(sG,[B.e1]).config([B.e2,e=>{e.peekState("question-analysis",{url:"?qaContentId",abstract:!0,resolve:sR(),courseEntitlement:[sD.SE.ViewGrades]}).peekState("question-analysis.report",{url:"/report",onEnter:[B.HV,e=>{e.goPeekState(ik.RK.GRADEBOOK_ITEM_ASSESSMENT,{contentId:e.nextParams.qaContentId,courseId:e.nextParams.courseId,gradeitemView:"questionAnalysis",assessmentType:"test"})}],pageTitle:"course.question-analysis.report.pageTitle",peekViewName:"question-analysis-report",peekStates:["gradebook-item","question-analysis-report"]}),e.peekState("question-analysis-report",{url:"?difficultyFilter&discriminationFilter",abstract:!0,resolve:sR(),courseEntitlement:[sD.SE.ViewGrades]}).peekState("question-analysis-report.question-details",{panelClass:"full",url:"/questionDetails/:questionId",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(37901),n.e(59380)]).then(n.bind(n,552201)),pageTitle:"course.question-analysis.question-details.pageTitle",peekViewName:"question-analysis-question-details",peekStates:["gradebook-item"]})}]);let sB="ultra.course.question-banks.routes";d.module(sB,[F.moduleName,B.e1,x.e1]).config([B.e2,x.e2,(e,t)=>{e.peekState(ik.Jp.QUESTION_BANKS,{url:"/banks",resolve:{[x.gc]:t.resolve,translations:[F.serviceName,e=>e.loadBundle("features/course/question-banks/question-banks")]},peekStates:[ik.Jp.IMPORT_DETAILS,ik.Jp.EDIT_QUESTION_BANK],peekViewName:"question-banks-peek",panelClass:"full",require:()=>Promise.all([n.e(28835),n.e(39571)]).then(n.bind(n,36506)),pageTitle:"course.question-banks.pageTitle"}).peekState(ik.Jp.IMPORT_DETAILS,{url:"/importDetails/{taskId:_[0-9]+_1}",require:()=>n.e(89615).then(n.bind(n,989615)),pageTitle:"course.question-banks.import-details.pageTitle"}).peekState(ik.Jp.EDIT_QUESTION_BANK,{url:"/editBank/{assessmentId}?isNew",peekStates:[ik.cw.CONTENT_MARKET],peekViewName:"question-bank-edit-peek",panelClass:"full",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(28835),n.e(31640),n.e(69634)]).then(n.bind(n,769634)),pageTitle:"course.question-banks.edit-question-bank.pageTitle"})}]);var sL=n(460574);let sN="ultra.course.roster.router";d.module(sN,[F.moduleName,B.e1,x.e1,iS.e1]).config([B.e2,x.e2,iS.e2,(e,t,i)=>{e.peekState("roster",{url:"/roster",resolve:{[x.gc]:t.resolve,[iS.gc]:i.resolve,translations:[F.serviceName,e=>e.loadBundle("features/course/roster/course-roster")]},peekStates:[ik.BQ.EDIT_ENROLLMENT,"enroll-users",ik.BQ.COURSE_MESSAGE,"invite",ik.BQ.ACCOMMODATION,ik.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES],panelClass:"full",peekViewName:"account-update-base@",require:()=>Promise.all([n.e(46704),n.e(40232)]).then(n.bind(n,140232)),pageTitle:"course.roster.rosterName"}).peekState(ik.BQ.EDIT_ENROLLMENT,{url:"/edit/:membershipId",require:()=>Promise.all([n.e(26217),n.e(46704),n.e(48754)]).then(n.bind(n,837691))}).peekState("enroll-users",{url:"/enroll",require:()=>Promise.all([n.e(46704),n.e(88726)]).then(n.bind(n,88726)),pageTitle:"course.roster.enroll.enrollPeople"}).peekState(ik.BQ.COURSE_MESSAGE,{url:"/message?courseId?recipientId",require:()=>Promise.all([n.e(27459),n.e(21235),n.e(71173),n.e(73570)]).then(n.bind(n,23977))}).peekState("invite",{url:"/invite",require:()=>n.e(94850).then(n.bind(n,994850)),pageTitle:"course.roster.invite.inviteStudents"}).peekState(ik.BQ.ACCOMMODATION,{url:"/exception/:membershipId",require:()=>n.e(3105).then(n.bind(n,103105)),pageTitle:"course.roster.dueDateException",resolve:{currentMembership:["$q","$stateParams",P.N7.H,(e,t,n)=>{let i={fields:sL.Zh.join(",")};return n.$new(t.courseId).memberships.$find(t.membershipId,i).$asPromise()}]}})}]);var sO=n(934366);let sM="ultra.course.course-tasks.router";d.module(sM,[x.e1,F.moduleName,B.e1]).config([x.e2,B.e2,(e,t)=>{t.peekState(ik.Jf.COURSE_TASKS_LOGS,{abstract:!0,url:"/courseTasks",require:()=>Promise.all([n.e(61381),n.e(53979)]).then(n.bind(n,553979)),resolve:{[x.gc]:e.resolve,translations:[F.serviceName,e=>e.loadBundle("features/course/course-tasks")]},panelClass:"full"}).peekState(ik.Jf.COURSE_TASKS_PANEL,{url:"/tasks",views:{"course-tasks@":{require:[()=>Promise.all([n.e(61381),n.e(41030)]).then(n.bind(n,141030)),()=>Promise.all([n.e(61381),n.e(53979)]).then(n.bind(n,553979))]}},pageTitle:"course.courseTasks.tasks.title",peekStates:["content-manage"],panelClass:"full"}).peekState(ik.Jf.COURSE_LOGS_PANEL,{url:"/logs",views:{"course-tasks@":{require:[()=>Promise.all([n.e(61381),n.e(47287)]).then(n.bind(n,347287)),()=>Promise.all([n.e(61381),n.e(53979)]).then(n.bind(n,553979))]}},pageTitle:"course.courseTasks.logs.title",panelClass:"full"})}]);let s$="ultra.course.goal-alignment.router";d.module(s$,[B.e1]).config([B.e2,e=>{e.peekState("goal-picker-legacy",{panelClass:"full",url:"/goalPickerLegacy",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/goal-alignment/goal")]},require:()=>n.e(21865).then(n.bind(n,321865)),pageTitle:"course.goal-alignment.goal.header",params:{goalAlignableContent:null}})}]);let sH="ultra.course.content.lti.routes";d.module(sH,[F.moduleName,iE.e1,iw.e1,iA.e1,B.e1,x.e1,iS.e1]).config([B.e2,x.e2,iS.e2,(e,t,i)=>{e.peekState(ik.UM.LTI,{abstract:!0,url:"/lti"}).peekState(ik.UM.LTI_LAUNCH,{url:"/launch?courseId&contentId&linkRef&linkType",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/content/course-content")],[iS.gc]:i.resolve,[x.gc]:t.resolve,currentContent:["$q",B.HV,P.YM.H,P.N7.H,(e,t,n,i)=>{let s=e.defer(),r=t.nextParams.courseId?t.nextParams.courseId:t.prevParams.courseId,o=t.nextParams.contentId?t.nextParams.contentId:t.prevParams.contentId,a=t.nextParams.linkRef?t.nextParams.linkRef:t.prevParams.linkRef,l=t.nextParams.linkType?t.nextParams.linkType:t.prevParams.linkType;return r&&o?i.$new(r).contents.$find(o).$asPromise().then(e=>s.resolve(e)):r&&a&&b.u$1.PartnerCloud.isEqualTo(l)?n.getContentIds(r,a).then(e=>{e.contentIds&&e.contentIds.length>0?i.$new(r).contents.$find(e.contentIds[0]).$asPromise().then(e=>s.resolve(e)):s.resolve(null)}):s.resolve(null),s.promise}],currentGradeColumn:["$q",x.gc,"currentContent",eh.HV,(e,t,n)=>{if(t&&n){let e=n.contentDetail[n.contentHandler.toString()].gradingColumn.id;return t.gradebook.columns.$find(e).$asPromise()}return e.when(null)}],contentData:["$q",x.gc,"currentContent","currentGradeColumn",iE.HV,(e,t,n,i,s)=>{if(t&&n&&i)return s.loadContentAndGrades({course:t,content:n,column:i});e.when(null)}]},panelClass:"peek",require:()=>n.e(3554).then(n.bind(n,766247)),pageTitle:" Launch"}).peekState(ik.UM.LTI_LAUNCH_FRAME,{url:"/launchFrame?toolHref",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/content/course-content")]},panelClass:"full",require:()=>n.e(28115).then(n.bind(n,328115)),pageTitle:"course.content.ltiLaunchFrameTitle"}).peekState(ik.UM.LTI_LAUNCH_PEEK,{url:"/launchPeek?toolHref&courseId&contentId",resolve:{[x.gc]:t.resolve,translations:[F.serviceName,e=>e.loadBundle("features/course/content/course-content")]},peekStates:[ik.XO.CONDITIONAL_RELEASE_PEEK_PANEL,ik.UM.LTI_EDIT_CLOUD_DOCUMENT,ik.Jy.CONVERSATION,ik.xp.VIEW,ik.xp.GROUP_MEMBERS_LIST,ik.xp.VIEW_GROUP_ENROLL],panelClass:"full",require:()=>n.e(51985).then(n.bind(n,351985)),pageTitle:"course.content.ltiLaunchFrameTitle"}).peekState(ik.UM.LTI_LAUNCH_CLOUD_CREATE,{url:"/launchCloudCreate?toolHref&courseId&contentId&placementId",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/content/course-content")]},peekStates:[ik.UM.LTI_LAUNCH_PEEK],panelClass:"full",require:()=>n.e(89894).then(n.bind(n,489894)),pageTitle:"course.content.ltiLaunchFrameTitle"}).peekState(ik.UM.LTI_EDIT_CLOUD_DOCUMENT,{url:"/edit?contentId",resolve:{[x.gc]:t.resolve,translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},panelClass:"peek",require:[()=>Promise.all([n.e(69610),n.e(99144)]).then(n.bind(n,769610))],peekViewName:"cloud-document-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.editCloudDocument"})}]);var sF=n(759485),sU=n(776517);function sV(e){let t=sF.uI(e);sF.fL(t)}let s_="ultra.course.partner-tool.router";d.module(s_,[F.moduleName,B.e1]).config([B.e2,e=>{e.peekState("partner-tool",{abstract:!0,url:"/partners/:partnerId"}).peekState("partner-tool.tool",{url:"/tools/:toolType?partnerParentId&mode",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/content-market/content-market")]},params:{partnerTitle:"",toolHref:"",returnState:null},panelClass:"full",require:()=>Promise.all([n.e(25900),n.e(29577),n.e(36426)]).then(n.bind(n,975642)),pageTitle:"course.partnerTool.partnerTool"})}]);var sq=n(226443),sz=n(815372);let sW="ultra.course.content.scorm.routes",sj={onEnter:["contentData","attempt",e$.HV,B.HV,"$stateParams",iV.HV,(e,t,n,i,s,r)=>{if(!s.forceOpenFeedbackPanel||s.skipTransitionEvents)return;i.isPeekPanelOpen()&&n.expandTopPanel();let o=iq.e.attemptHasFeedback(t),a=iq.e.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail),l=i.next.name.indexOf("assessment-submission-feedback")>=0,c=!i.prev.name,d=r.isSmallBreakpoint();!o||!a||d||l||c||i.goPeekState("assessment-submission-feedback",{attemptId:t.id})}],onExit:["contentData",e$.HV,B.HV,"$q","$stateParams",(e,t,n,i,s)=>{if(!s.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){let s=i.when();n.isPeekPanelOpen()&&(s=t.shrinkTopPanel()),s.then(()=>{n.goPeekState("scorm-overview.student.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId})})}}]};d.module(sW,[F.moduleName,B.e1,x.e1,i_.H2]).config([B.e2,x.e2,iS.e2,i_.AX,(e,t,i)=>{e.peekState("scorm",{abstract:!0,url:"/scorm"}).peekState("scorm.open",{url:"/open",params:{contentId:null,courseId:null},routingFunction:[B.HV,sz.HV,(e,t)=>{t.scormLaunch({courseId:e.nextParams.courseId,contentId:e.nextParams.contentId,showPreLaunchPanel:!0})}]}).peekState("scorm-settings",{url:"/scorm/settings?parentId&positionBefore&positionAfter&contentId",pageTitle:"course.content.scorm.settings.panelTitle",require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(52493),n.e(44801),n.e(31613)]).then(n.bind(n,481990))],resolve:{[x.gc]:t.resolve,translations:[F.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]},peekViewName:"scorm-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy",ik.XO.CONDITIONAL_RELEASE_PEEK_PANEL,"content-collection-picker"]}).peekState("scorm-launch-frame",{url:"/scorm/launchFrame?toolHref&courseId&contentId",resolve:{translations:[F.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]},panelClass:"full",require:[()=>n.e(13201).then(n.bind(n,513201))],pageTitle:"course.content.scorm.launch.frameTitle"}).peekState("gradebook-item.scorm-submissions",{pageTitle:"course.content.scorm.settings.gradingTitle",url:"/scorm/:contentId/columns/:columnId/submissions?courseId&gradeitemView&gradingStatus&submissionStatus",panelClass:"full",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])]},views:{"gradebook-item-scorm-slider@":{require:()=>n.e(55163).then(n.bind(n,455163))},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(87217),n.e(60419)]).then(n.bind(n,806639))}},onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],peekStates:["conversations",ik.BQ.COURSE_MESSAGE,ik.XO.CONDITIONAL_RELEASE_PEEK_PANEL,"scorm-settings","scorm-launch-frame",ik.RK.SUBMISSION_GRADING,ik.eJ.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,ik.BQ.COURSE_GRADES_MULTIPLE_ATTEMPT,ik.RK.PER_GRADABLE_ITEM_SETTINGS],peekViewName:"gradebook-item-panel@"}).peekState("scorm-overview",{abstract:!0,resolve:{[x.gc]:t.resolve,contentData:[x.gc,iE.HV,B.HV,i_.D$,(e,t,n,i)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId}).then(e=>(i.setCurrentContent(e.courseContent),e))],[iS.gc]:i.resolve,translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])]},onEnter:["contentData",eh.HV,(e,t)=>{t.column=e.gradingColumn}],onExit:[eh.HV,e=>{e.column=null}],require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(27993),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6355),n.e(52493),n.e(47048),n.e(6521),n.e(7152),n.e(66692),n.e(92090),n.e(22674),n.e(93596),n.e(73061)]).then(n.bind(n,190500))}).peekState("scorm-overview.student",{url:"/scorm/overview/{contentId:_[0-9]+_1}?courseId",peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations",ik.BQ.COURSE_MESSAGE],views:{"scorm-grading-section@":{require:()=>n.e(65124).then(n.bind(n,565124))}}}).peekState("scorm-overview.student.multiple-attempt",{url:"/scorm-attempts/:columnId/:gradeId",resolve:{scormContentData:[x.gc,"contentData",sz.HV,iE.HV,B.HV,(e,t,n,i,s)=>{let r=n.currentContentData||t&&t.gradingColumn.id===s.nextParams.columnId&&t;return r||i.loadContentAndGrades({course:e,contentId:s.nextParams.contentId,columnId:s.nextParams.columnId})}],translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment")])]},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(82578),n.e(217),n.e(8243)]).then(n.bind(n,208243))}).peekState("scorm-overview.student.attempt",{url:"/column/{columnId:_[0-9]+_1}/attempt/{attemptId:_[0-9]+_1}",panelClass:"full",resolve:{contentData:["contentData",x.gc,iE.HV,B.HV,(e,t,n,i)=>e.gradeDetail.ui.groupAttempt?e:n.loadContentAndGrades({course:t,contentId:i.nextParams.contentId,columnId:i.nextParams.columnId})],currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>e.gradingColumn],attempt:["$q","contentData",P.N7.H,B.HV,P.U_.serviceName,P.uy.HV,(e,t,n,i)=>{let s=i.nextParams.attemptId,r=n.$buildRaw({id:t.courseContent.courseId}).gradebook;return r.attempts.$find(s,{expand:"toolAttemptDetail,alignedGoals"}).$then(e=>{t.attempt=e}).$asPromise()}]},require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6521),n.e(82578),n.e(217),n.e(19438),n.e(49536)]).then(n.bind(n,235711)),...sj,params:{commentPanelInitiallyOpen:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations",ik.BQ.COURSE_MESSAGE]}).peekState("scorm-analytics-report",{url:"/scorm-report/{contentId:_[0-9]+_1}?courseId",resolve:{[x.gc]:t.resolve,content:[x.gc,B.HV,P.N7.H,(e,t,n)=>n.$new(e.id).contents.$find(t.nextParams.contentId).$asPromise()],translations:[F.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]},panelClass:"full",require:()=>n.e(29348).then(n.bind(n,129348)),pageTitle:"course.content.scorm.report.pageTitle"})}]);let sZ="ultra.base.system-content-market.router",sK=d.module(sZ,[F.moduleName,B.e1]);sK.config([B.e2,e=>{e.peekState("system-content-market",{url:"/systemcontentmarket",require:()=>Promise.all([n.e(44716),n.e(94099)]).then(n.bind(n,118259)),resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("features/base/system-content-market/system-content-market"),t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])]},panelClass:"full",pageTitle:"base.systemContentMarket.title",params:{mode:null}})}]);var sX=n(712303),sY=n(579188),sQ=n(513174);let sJ="ultra.telemetry.routes";function s0(e,t,n,i){let s=t.courseId;if(!s)return e.when(null);let r=e.defer();return n.$new(s).users.$find(i.userId).$then(e=>{r.resolve(sX.bb(e))},e=>{r.resolve(sX.b1())}),r.promise}d.module(sJ,[F.moduleName,e$.e1,P.e1,B.e1,x.e1,sY.e1,sQ.e1]).config([B.e2,x.e2,sY.e2,(e,t,i)=>{e.peekState("telemetry-settings",{url:"/telemetry-settings",require:()=>n.e(75698).then(n.bind(n,975698)),resolve:{currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>s0(e,t,n,i)]},pageTitleHandler:i.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"components.directives.telemetry.courseActivityAlertSettings"}).peekState(ik.vs.INSTRUCTOR_CLASS,{url:"/{coursesOrOrganizations:(?:courses|organizations)}/:courseId/telemetry/activityVsGrade?notificationId",require:()=>Promise.all([n.e(12821),n.e(35195),n.e(90917),n.e(68297),n.e(88541),n.e(26292),n.e(31221),n.e(59727),n.e(80532)]).then(n.bind(n,80532)),panelClass:"full",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[x.gc]:t.resolve,isOrganization:[x.gc,B.HV,(e,t)=>(t.nextParams.coursesOrOrganizations=e.isOrganization?"organizations":"courses",e.isOrganization)]},peekStates:[ik.BQ.COURSE_MESSAGE,"event-create","telemetry-settings",ik.vs.INSTRUCTOR_DETAILS,ik.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES],peekViewName:"telemetry-instructor-class-base@",pageTitleHandler:i.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler",resolveOrgCourseKey:!0}),pageTitle:"components.directives.telemetry.courseActivityHeaderTitle.course"}).peekState(ik.vs.INSTRUCTOR_DETAILS,{url:"/telemetry/timeSeries/:courseId?userId",require:()=>Promise.all([n.e(12821),n.e(35195),n.e(90917),n.e(68297),n.e(88541),n.e(34388),n.e(78584)]).then(n.bind(n,949479)),panelClass:"full",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[x.gc]:t.resolve},peekStates:[ik.BQ.COURSE_MESSAGE,"event-create","telemetry-settings"],peekViewName:"telemetry-instructor-details-base@",pageTitleHandler:i.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler",resolveOrgCourseKey:!0}),pageTitle:"components.directives.telemetry.panel.titleStudentDetail.course"}).peekState(ik.vs.STUDENT_HIGH_PERFORMANCE,{url:"/telemetry/student/high-performance/:courseId",require:()=>Promise.all([n.e(12821),n.e(35195),n.e(90917),n.e(68297),n.e(88541),n.e(26292),n.e(31221),n.e(74379)]).then(n.bind(n,184979)),panelClass:"peek",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[x.gc]:t.resolve,currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>s0(e,t,n,i)],canActivateState:[sQ.HV,e=>{e.byFeatureFlag(b.x40.HowAmIDoingReport)}]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(ik.vs.STUDENT_LOW_ACTIVITY,{url:"/telemetry/student/low-performance/activity/:courseId",require:()=>Promise.all([n.e(12821),n.e(35195),n.e(90917),n.e(68297),n.e(88541),n.e(26292),n.e(31221),n.e(34388),n.e(80260)]).then(n.bind(n,968245)),panelClass:"peek",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[x.gc]:t.resolve,currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>s0(e,t,n,i)],canActivateState:[sQ.HV,e=>{e.byFeatureFlag(b.x40.HowAmIDoingReport)}]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(ik.vs.STUDENT_LOW_GRADES,{url:"/telemetry/student/low-performance/grades/:courseId",require:()=>Promise.all([n.e(12821),n.e(35195),n.e(90917),n.e(68297),n.e(88541),n.e(26292),n.e(31221),n.e(34388),n.e(62577)]).then(n.bind(n,646430)),panelClass:"peek",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[x.gc]:t.resolve,currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>s0(e,t,n,i)],canActivateState:[sQ.HV,e=>{e.byFeatureFlag(b.x40.HowAmIDoingReport)}]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(ik.vs.STUDENT_PROGRESS,{url:"/telemetry/student/progress/:courseId",require:()=>Promise.all([n.e(12821),n.e(35195),n.e(90917),n.e(68297),n.e(88541),n.e(34388),n.e(9804)]).then(n.bind(n,757864)),panelClass:"peek",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[x.gc]:t.resolve,currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>s0(e,t,n,i)],canActivateState:[sQ.HV,e=>{e.byFeatureFlag(b.x40.HowAmIDoingReport)}]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(ik.vs.STUDENT_FIND_A_STUDY_PARTNER,{url:"/telemetry/student/request-study-help/:courseId",require:()=>n.e(55022).then(n.bind(n,755022)),panelClass:"peek",resolve:{translations:["$q",F.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry")])],[x.gc]:t.resolve,currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>s0(e,t,n,i)],canActivateState:[sQ.HV,e=>{e.byFeatureFlag(b.x40.HowAmIDoingReport)}]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(ik.vs.CONTENT_ACTIVITY_IN_DETAIL,{url:"/telemetry/instructor/activity-in-detail/:contentId",onEnter:[B.HV,e=>{e.goPeekState(ik.RK.GRADEBOOK_ITEM_ASSESSMENT,{contentId:e.nextParams.contentId,courseId:e.nextParams.courseId,gradeitemView:"studentActivity",assessmentType:"test"})}],panelClass:"full",resolve:{translations:[F.serviceName,e=>e.loadBundle("components/directives/telemetry/telemetry")],currentContent:["$stateParams",x.gc,(e,t)=>{let n=e.contentId;return t.contents.$find(n).$asPromise()}]},pageTitle:"components.directives.telemetry.panel.titleStudentActivityDetails",peekStates:[ik.BQ.COURSE_MESSAGE,"event-create",ik.vs.INSTRUCTOR_DETAILS],peekViewName:"telemetry-content-activity-in-detail-base@"}).peekState(ik.vs.DISCUSSION_FORUM_INSIGHTS,{url:"/telemetry/instructor/discussion-insights/:contentId/:forumContentId",require:()=>n.e(30276).then(n.bind(n,30276)),panelClass:"full",params:{groupId:null},resolve:{translations:[F.serviceName,e=>e.loadBundle("components/directives/discussion")],currentContent:["$stateParams",x.gc,(e,t)=>{let n=e.contentId;return t.contents.$find(n).$asPromise()}]},pageTitle:"components.directives.discussion.insights.pageTitle",peekStates:["content-manage","submission-list",ik.BQ.COURSE_MESSAGE],peekViewName:"telemetry-discussion-forum-insights-base@"})}]);var s1=n(693879),s2=n(614682),s3=n(625506);let s9="ultra.routes",s4=e=>e.location;function s7(e,t){return{systemInfo:[eh.HV,e=>e.getSystemInfo().$asPromise()],currentUser:[eg.HV,e=>e.userModel.$asPromise()],languages:["currentUser",P.Mj.H,(e,n)=>{if(t&&e.locale)return n.$collection().$fetch({limit:1e4}).$asPromise()}],user:["currentUser","languages",(e,n)=>(t&&e.locale&&!eW.find(n,{locale:e.locale})&&(e.locale=null),e.$patch().$asPromise())],localize:["$q","$rootScope","user","systemInfo",F.serviceName,"$cookies","$window",(t,n,i,s,r,o,a)=>{let l=i.locale||s.defaultLocaleIdentifier,c=o.get("guest.session.locale");i.isGuest()&&c&&(l=c);let d=s1.h.getInstance();if(s.siteId&&s.ultraCustomLocaleLocation&&d.setOverrideLocation(s.ultraCustomLocaleLocation,s.siteId),s.ultraLocaleData){let e=Object.keys(s.ultraLocaleData);e.forEach(e=>{let t=s.ultraLocaleData[e];t.ultraOverrideCode&&r.addOverride(e,t.ultraOverrideCode)}),0>e.indexOf(l)&&(l=s.defaultLocaleIdentifier)}let u=s4(a).href.match(F.localeQuerystringRegex);u&&k.default.features.devtools_enableSetLangQuery&&(l=u[1]),r.setUltraLocaleData(s.ultraLocaleData),r.setUserLocale(l),r.setSystemDefaultLocale(s.defaultLocaleIdentifier),s2.mq.initialize(r.isRTL()?s2.$Q.RightToLeft:s2.$Q.LeftToRight);let p=[r.setLocale(n,l),...e.map(e=>r.loadBundle(e)),t.when(s2.mq.getCSSLoadedPromise())];return t.all(p)}]}}d.module(s9,[P.e1,eh.e1,eg.e1,F.moduleName,B.e1,ix,iX,iJ,i2,sn,i3.e,i9,si,ss,so,sa,sc,i4,i5,i6,i8,se,su,sf,sb.e,sv,sy,sC.e,sS.e,sE.e,sI,sw.e,sA.e,sk,sx,sT.e,sP,sG,sB,sN,sO.e,sM,s$,sh,sH,s_,sq.e,sW,sZ,sJ,"ngCookies"]).config([B.e2,e=>{e.state("base",{abstract:!0,resolve:s7(["features/base/base","global","common/grades-common","components/services/grade"]),require:()=>Promise.all([n.e(81525),n.e(21235),n.e(90917),n.e(4729),n.e(19620),n.e(24956),n.e(51361),n.e(29636)]).then(n.bind(n,829636))}).state("welcome",{resolve:s7(["features/welcome"],!0),require:()=>n.e(41771).then(n.bind(n,741771)),pageTitle:"welcome.welcome.title"}).state("register-succeeded",{url:"/startLearn?registerStatusCode?courseId?enrollStatusCode",require:()=>n.e(51315).then(n.bind(n,651315))}).state("base.not-found",{resolve:{translations:[F.serviceName,e=>e.loadBundle("features/base/not-found/base-not-found")]},require:()=>n.e(25876).then(n.bind(n,725876)),pageTitle:"base.not-found.pageNotFoundTitle"}).state("logout",{url:"^/logout",onEnter:()=>{s3("body").addClass("bb-logout"),window.location.href=sF.uI("/webapps/login/?action=logout")}}).state("classicRedirect",{url:"/classicRedirect?legacyUrl",onEnter:[B.HV,e=>{let t=e.nextParams.legacyUrl,n=t?sF.hi(t).course_id:null;n&&e.goPeekState("course.classic.outline",{courseId:n,legacyUrl:t})}]}).state("mobileApiCall",{url:"^/mobileApiCall?action&courseId&contentId&attemptId&columnId",onEnter:[B.HV,e=>{!function(e){let{action:t,courseId:n,contentId:i,attemptId:s,columnId:r}=e.nextParams,o=r||"";switch(t){case sU.I8.OpenDocument:sV(`ultra/courses/${n}/outline/edit/document/${i}?courseId=${n}`);break;case sU.I8.OpenAttempt:sV(`ultra/courses/${n}/outline/assessment/${i}/overview/attempt/${s}?courseId=${n}`);break;case sU.I8.ReviewAttempt:sV(`ultra/courses/${n}/outline/assessment/${i}/overview/attempt/${s}/review?courseId=${n}&columnId=${r}&contentId=${i}`);break;case sU.I8.ReviewFeedback:sV(`ultra/courses/${n}/outline/assessment/${i}/overview/attempt/${s}/review/inline-feedback?attemptId=${s}&mode=inline&courseId=${n}&contentId=${i}`);break;case sU.I8.PreviewAssessment:sV(`ultra/courses/${n}/outline/assessment/test/${i}?courseId=${n}&gradeitemView=details`);break;case sU.I8.CollabRecordingPreview:sV(`ultra/courses/${n}/outline/collab/launchRecordings`);break;case sU.I8.CollabManageSession:sV(`ultra/courses/${n}/outline/collab/launchSessions`);break;case sU.I8.OpenCourse:sV(`ultra/courses/${n}/outline`);break;case sU.I8.OpenDiscussion:sV(`ultra/courses/${n}/engagement/discussion/${i}?view=discussions&courseId=${n}`);break;case sU.I8.OpenGroupDiscussion:sV(`ultra/courses/${n}/outline/discussion/${i}?view=discussions&disGroupId=${s}&courseId=${n}`);break;case sU.I8.OpenJournal:sV(`ultra/courses/${n}/outline/journal/${i}?view=journal&courseId=${n}`);break;case sU.I8.OpenAssessment:sV(`ultra/courses/${n}/outline/assessment/${i}/overview?courseId=${n}`);break;case sU.I8.OpenAssessmentInstView:sV(`ultra/courses/${n}/outline/assessment/test/${i}?courseId=${n}&gradeitemView=details`);break;case sU.I8.OpenAdminAnnouncement:sV(`ultra/stream/announcement/${i}`);break;case sU.I8.OpenCourseAnnouncement:sV(`ultra/courses/${n}/announcements/announcement-detail?courseId=${n}&announcementId=${i}`);break;case sU.I8.OpenCourseMessage:sV(`ultra/courses/${n}/messages/edit/${i}?courseId=${n}&offset=0&count=1`);break;case sU.I8.OpenGradeBook:sV(`ultra/courses/${n}/grades`);break;case sU.I8.OpenCalendar:sV(`ultra/courses/${n}/calendar`);break;case sU.I8.OpenGradedSCORM:sV(`ultra/courses/${n}/outline/scorm/overview/${i}?courseId=${n}`);break;case sU.I8.OpenInstViewGradedSCORM:sV(`ultra/courses/${n}/outline/scorm/${i}/columns/${o}/submissions?courseId=${n}&gradeitemView=students`);break;case sU.I8.OpenTimeline:sV("ultra/course");break;case sU.I8.OpenPersonalEvent:sV(`ultra/stream/event/edit/PERSONAL/blackboard.data.calendar.CalendarEntry/${i}`);break;case sU.I8.OpenCalendarEvent:sV(`ultra/stream/event/edit/${n}/blackboard.data.calendar.CalendarEntry/${i}`);break;case sU.I8.OpenTools:sV("ultra/tools");break;case sU.I8.OpenCreateMessages:sV(`ultra/messages/create?courseId=${n}`);break;case sU.I8.OpenCourseMessagesList:sV(`ultra/courses/${n}/messages`);break;case sU.I8.OpenInstitutionPage:sV("ultra/institution-page");break;case sU.I8.OpenAdminInstitutionPage:sV("ultra/institution-page/admin/default");break;case sU.I8.OpenJournalParticipantsGrades:sV(`ultra/grades/journal/${i}?view=participants&limit=25&page=1&submissionStatus=all&courseId=${n}`);break;case sU.I8.OpenViewGradesOfflinePage:sV(`ultra/grades/offline-grades/${i}?courseId=${n}&gradeitemView=students`);break;case sU.I8.OpenViewGradesAssessmentsPage:sV(`ultra/grades/assessment/test/${i}?courseId=${n}&gradeitemView=students`);break;case sU.I8.OpenScormGradesPage:sV(`ultra/grades/scorm/${i}/columns/${r}/submissions?courseId=${n}&gradeitemView=students`);break;case sU.I8.OpenDiscussionGradePage:sV(`ultra/grades/discussion/${i}?view=participants&courseId=${n}`);break;case sU.I8.OpenAttendancePage:sV(`ultra/grades/attendance?courseId=${n}`);break;case sU.I8.OpenCalendarAssessmentPage:sV(`ultra/calendar/assessment/test/${i}?courseId=${n}&gradeitemView=details`);break;case sU.I8.OpenCalendarDiscussionPage:sV(`ultra/calendar/discussion/${i}?view=discussions&courseId=${n}`);break;case sU.I8.OpenCalendarJournalPage:sV(`ultra/calendar/journal/${i}?view=journal&courseId=${n}`);break;case sU.I8.OpenCalendarScormPage:sV(`ultra/calendar/scorm/${i}/columns/${r}/submissions?courseId=${n}&gradeitemView=students`);break;case sU.I8.OpenStudentCalendarAssessmentPage:sV(`ultra/calendar/assessment/${i}/overview?courseId=${n}`);break;case sU.I8.OpenStudentCalendarScormPage:sV(`ultra/calendar/scorm/overview/${i}?courseId=${n}`);break;case sU.I8.OpenStudentDiscusssionPage:sV(`ultra/courses/${n}}/outline/discussion/${i}?view=discussions&courseId=${n}`);break;default:e.go("base.not-found")}}(e)}]})}]);var s5=n(312056);let s6="ultra.components.directives.sizeToFitTextArea";class s8{sizeToFit(){let e=this.element.get(0);e.clientHeight===e.scrollHeight&&(e.style.height=this.defaultHeight+"px");let t=e.clientHeight;(!this.maxHeight||this.maxHeight>t)&&(t=Math.max(e.scrollHeight,t,this.minHeight),this.scope.maxHeight&&(t=Math.min(this.maxHeight,t)),t>e.clientHeight&&(e.style.height=t+"px"))}constructor(e,t,n,i){if(this.scope=e,this.element=t,this.attrs=n,this.timeout=i,this.defaultHeight=null!=this.scope.defaultHeight?parseInt(this.scope.defaultHeight,10):37,"textarea"!==t[0].tagName.toLowerCase())throw Error("This directive is only for use as an attribute on textareas");this.maxHeight=this.scope.maxHeight?parseInt(this.scope.maxHeight,10):null,t.addClass("size-to-fit-textarea"),null!=e.textareaModel?this.scope.$watch("textareaModel",(e,t)=>{e!==t&&this.sizeToFit()}):t.keyup(this.sizeToFit.bind(this)),this.timeout(()=>{this.minHeight="true"===this.scope.initialHeightLock?this.element.get(0).clientHeight:null,this.sizeToFit()},this.scope,0,!1)}}s8.$inject=["scope","element","attrs",E.H];class re{constructor(e){this.$injector=e,this.replace=!1,this.restrict="A",this.priority=1,this.terminal=!1,this.scope={defaultHeight:"@",maxHeight:"@",initialHeightLock:"@",textareaModel:"=?"},this.link=(e,t,n)=>{e.sizetofittextarea=this.$injector.instantiate(s8,{scope:e,element:t,attrs:n})}}}re.$inject=["$injector"],d.module(s6,[E.e]).directive("bbSizeToFitTextarea",["$injector",e=>e.instantiate(re)]);let rt="ultra.components.directives.bbPreventDrag";class rn{constructor(e){this.$rootScope=e,this.restrict="A",this.link=(e,t)=>{t.attr("draggable","false"),t.on("dragstart",e=>{let t=e.originalEvent.target,n=t.ownerDocument.activeElement;if(!n.className.includes("bb-editor")&&(!t.getAttribute||"true"!==t.getAttribute("draggable")))return!1})}}}rn.$inject=["$rootScope"],d.module(rt,[]).directive("bbPreventDrag",["$injector",e=>e.instantiate(rn)]);let ri="ultra.components.directives.formlabel",rs="bbFormLabelDecorator";class rr{constructor(e,t,n){this.$q=e,this.$log=t,this.timeout=n,this.restrict="A",this.scope=!0,this.waitForElement=(e,t)=>{null==t.elementInspectStartAt&&(t.elementInspectStartAt=new Date().getTime());let n=this.$q.defer();return this.timeout(()=>d.element(document.getElementById(e)),t,50).then(i=>{i.length>0?n.resolve(i):new Date().getTime()-t.elementInspectStartAt>rr.elementInspectTimeout?n.reject("Cannot find element #"+e+" in "+rr.elementInspectTimeout+"ms"):this.waitForElement(e,t).then(e=>{n.resolve(e)}).catch(e=>{n.reject(e)})}),n.promise},this.link=(e,t,n)=>{let i=e.$eval(n[rs])||{},s=n.for;s&&this.waitForElement(s,e).then(t=>{let n=()=>{e.attrsElement=eW.mapValues(eW.keyBy(t[0].attributes,"nodeName"),e=>e.nodeValue)};i.autoupdate&&(e.domObserver=new MutationObserver(n),e.domObserver.observe(t[0],{childList:!1,attributes:!0,subtree:!1})),n()}).catch(e=>{this.$log.warn(e)}),e.$watchGroup(eW.compact(["attrsElement",n[rs]]),e=>{rr.decorators.forEach(n=>{n(t,d.extend({},e[0],e[1]))})}),e.$on("$destroy",()=>{void 0!==e.domObserver&&e.domObserver.disconnect()})}}}rr.elementInspectTimeout=1e4,rr.$inject=["$q","$log","timeout"],rr.decorators=[(e,t)=>{let n=t.required;!0===n||["true","required",""].indexOf(n)>=0?e.addClass("required"):e.removeClass("required")}],d.module(ri,[]).directive(rs,["$injector",e=>e.instantiate(rr)]);var ro=n(853321),ra=n(371732);n(195488),n(16759);let rl="ultra.components.directives.collabSessionIcon",rc=((l=class{$onChanges(e){this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.$scope),key:this.runningSessionFlag?"components.directives.collab-session-icon.aria-label.active-collab":"components.directives.collab-session-icon.aria-label.inactive-collab"}).then(e=>{this.$element.attr("aria-label",e)})}constructor(e,t,n){this.$scope=e,this.$element=t,this.bbLocalize=n}}).$inject=["$scope","$element",F.serviceName],l);rc=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(0,tC.wA)({moduleName:rl,componentName:"bbCollabSessionIcon",template:ra,bindings:{runningSessionFlag:"<"},requireModules:[F.moduleName]})],rc);let rd="ultra.directives.elementimage.accessibility",ru="aria-label",rp=["components","directives","element-image","element-image-accessibility"];class rm{constructor(e,t){this.$injector=e,this.bbLocalize=t,this.restrict="C",this.link=(e,t,n)=>{if(t.attr(ru))return;let i=t.attr("class"),s=n=>{let i=/\bimg-icon-[\w-]+\b/.exec(n);null===i?t.removeAttr(ru):(this.loadBundle.then(()=>{t.attr(ru,this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:rp.join(".")+"."+i[0].replace(/-[aco]$/,"")}))}),e.$digest())};requestAnimationFrame(()=>{s(i)});let r=new MutationObserver(eW.debounce(()=>{requestAnimationFrame(()=>{let e=t.attr("class");i!==e&&s(i=e)})},100,{leading:!0}));r.observe(t[0],{attributes:!0,attributeFilter:["class"]}),e.$on("$destroy",()=>{r.disconnect()})},this.loadBundle=t.loadBundle(rp.join("/"))}}rm.$inject=["$injector",F.serviceName],d.module(rd,[F.moduleName]).directive("elementImage",["$injector",e=>e.instantiate(rm)]);var rh=n(562060),rg=n(215027);let rf=["scheduledTasks","telemetry"],rb=null,rv="ultra.services.zoomUtility";d.module(rv,[]),tH.Z.detect().mobile()&&c(document).on("mouseover","input, textarea, select, .editor-element",function(){c(this).css("font-size","16px")});var ry=n(211796),rC=n(369301);function rS(e,t){return function(n,i){t(n,i,e)}}let rE="ultraUi.components.directives.conversion.previewHeader";class rI{constructor(e,t,n,i,s){this.scope=e,this.element=t,this.attrs=n,this.windowSize=i,this.studentPreview=s;let r=e.course,o=i.isMediumBreakpoint()||i.isLargeBreakpoint();this.scope.shouldShowHeader=o&&r.isUltraPreview(),this.scope.hasExceptionReport=!!r.ultraConversionReportId,e.$on("reloadCourse",(e,t)=>{t===r.id&&(this.scope.shouldShowHeader=r.isUltraPreview())})}}rI=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([rS(0,(0,ry.tB)("scope")),rS(1,(0,ry.tB)("element")),rS(2,(0,ry.tB)("attrs")),rS(3,(0,ry.tB)(iV.HV)),rS(4,(0,ry.tB)(eA.HV))],rI);class rw{constructor(e){this.$injector=e,this.restrict="AE",this.template=rC,this.scope={course:"="},this.link=(e,t,n)=>{e.previewHeader=this.$injector.instantiate(rI,{scope:e,element:t,attrs:n})}}}rw.$inject=["$injector"],d.module(rE,[eA.e1]).directive("bbPreviewHeader",["$injector",e=>e.instantiate(rw)]);let rA="ultra.service.filters.timespan",rk=[{symbol:"d",base:86400,label:"days"},{symbol:"h",base:3600,label:"hours"},{symbol:"m",base:60,label:"minutes"},{symbol:"s",base:1,label:"seconds"}];d.module(rA,[F.moduleName]).filter("timeSpan",["$log",F.serviceName,function(e,t){let n={};return rk.forEach(e=>{n[e.symbol]=e}),function(i,s="hm",r){let o={},a={};return eW.forEach(s,t=>{let i=t.toLowerCase();Object.prototype.hasOwnProperty.call(n,i)?a[i]=i!==t:e.error(`${i} is not supported!`)}),eW(n).filter(e=>Object.prototype.hasOwnProperty.call(a,e.symbol)).forEach(e=>{let s=e.symbol,l=1===eW.size(a),c=Math.floor(i/n[s].base),d=n[s].label;(c>0||!0===a[s]||l&&0===eW.size(o))&&(o[d]=t.translateSync({locale:t.getLocale(r),key:`global.timeSpan.${d}.plural`,params:{v:c},noEscape:!0})),i%=n[s].base,delete a[s]}),eW.defaults(o,{days:"",hours:"",minutes:"",seconds:""}),t.translateSync({locale:t.getLocale(r),key:"global.timeSpan.oneline",params:o,noWrap:!0,noEscape:!0}).trim().replace(/\s+/g," ")}}]);let rx=[rA];var rT=n(625506);let rP="ultra.offcanvas-scope.offcanvas-scope-pausal-scope",rD="bbOffcanvasPausalScope";class rG{constructor(){this.restrict="A",this.link=function(e,t,n){let i=function(e){var t,n;return e.hasClass("bb-offcanvas-overlay")&&(t=e.next()).hasClass("bb-offcanvas-panel")&&(t.hasClass("full")||(n=t.css("max-width"),eW.findIndex([void 0,"none"],e=>e===n)>=0))},s=function(){let e=t.is(".hide-in-background")?t:t.parents(".hide-in-background");return"true"===e.attr("aria-hidden")&&(()=>{let t=e.nextAll();for(let e=0;e<t.length;e+=2)if(i(rT(t.get(e))))return!0;return!1})()};e.$newOffcanvasScope=function(...e){let t=this.constructor.prototype.$new.apply(this,e);return t.$$__digestPaused=!1,t};let r=()=>{e.$$__digestPaused=s(),!1!==e.$$__digestPaused||e.$root.$$phase||e.$digest()};if(e.$on(e$.gQ,r),e.$on(e$.mP,r),!k.default.production){let t=function(e){return e?t(e.$parent)+"."+e.$id+(e.$$digestPaused?"P":"A"):""},i=function(){n.$set(rD,t(e))};e.$on(e$.gQ,i),e.$on(e$.mP,i),i()}}}}let rR=d.module(rP,[]);rR.directive(rD,["$injector",e=>e.instantiate(rG)]);var rB=n(366880),rL=n(73268),rN=n(698268);let rO="ultra.directives.user-avatar-group";d.module(rO,[rL.e1]).directive("bbUserAvatarGroup",function(){return{restrict:"E",template:rN,scope:{users:"=?"},link(e,t){t.addClass("avatar element-image"),e.$watch("users",t=>{t&&(e.displayUsers=(0,eW.compact)([e.users[0],e.users.length>2?{id:"_groupedusers_"+(e.users.length-1),getInitials(){return"+"+(e.users.length-1)},avatar:{permanentUrl:"default"},lastModifiedAt:void 0}:e.users[1]]))})}}});var rM=n(311303),r$=n(484034),rH=n(86945),rF=new class{init(){if(this._isEventAlreadyWrapped)return;let e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(...t){return this.addEventListener("load",function(){if(this.status>399){let e=new URL(this.responseURL).pathname.substring(1),n=e.substr(0,e.lastIndexOf("/"));if(!eW.includes(["learn/api/v1/users/me/preferences","learn/api/v1/systemPreferences","telemetry/api/v1/browser"],n)){let n=this.responseText.replace(/(\r\n|\n|\r)/gm,"").substr(0,150),i=`${t[0]} ${e} ${this.status} - ${this.statusText} "${n}"`;A.ZP.addHistory({applicationId:"",analyticsId:i,action:"request error",url:e})}}}),e.apply(this,[].slice.call(t))},this._isEventAlreadyWrapped=!0}},rU=n(612270);let rV="ultra";window.Foundation.libs.reveal.settings.dismiss_modal_class="close-reveal-modal, .reveal-close",!rb&&function(){let e=sF.mg();return!k.default.production||e.indexOf("perf-ultra")>-1||e.indexOf("mylearn.int.bbpd.io")>-1||e.indexOf(".dev.bbpd.io")>-1||e.indexOf(".animal.bbsaas.io")>-1}()&&(rb=new class{registerWebRequestListener(){window.addEventListener("message",e=>{e.source===window&&e.data&&e.data.type&&e.data.details&&this.handleWebRequestMessage(e.data.type,e.data.details)})}handleWebRequestMessage(e,t){if(this.isMonitoredUrl(t.url))switch(e){case"onBeforeRequest":this.onRequestStarted(t);break;case"onCompleted":case"onErrorOccurred":this.onRequestCompleted(t)}}isMonitoredUrl(e){return e&&e.indexOf("/learn/api/v1")>=0&&0===rf.filter(t=>e.indexOf(t)>-1).length}onRequestStarted(e){this.pendingRequests.push(e)}onRequestCompleted(e){let t=eW.findIndex(this.pendingRequests,t=>t.requestId===e.requestId);if(t>-1){let n=this.pendingRequests[t],i={requestId:e.requestId,type:e.type,method:e.method,url:e.url,statusCode:e.statusCode,elapsedTime:e.timeStamp-n.timeStamp,requestBody:n.requestBody,error:e.error};this.httpRequestLog.push(i),this.pendingRequests.splice(t,1)}}dumpHttpRequestLog(){let e={};for(let t of(window.httpRequestLog.forEach(t=>{let n=t.method+" "+t.url;null==e[n]&&(e[n]=[]),e[n].push(t.params)}),Object.keys(e)))if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];console.log(t+" ["+n.length+"]",n)}}clearHttpRequestLog(){this.httpRequestLog.length=0}constructor(){this.pendingRequests=[],this.httpRequestLog=[],this.registerWebRequestListener()}},window.httpRequestLog=rb.httpRequestLog,window.pendingRequests=rb.pendingRequests,window.dumpHttpRequestLog=rb.dumpHttpRequestLog,window.clearHttpRequestLog=rb.clearHttpRequestLog,window.disableFtueGuidance=()=>{k.default.disableAllFtueGuidance=!0});let r_=["angulartics","angulartics.scroll","ngAnimate","ngAria","ngMessages","ngOnload","ngSanitize","ui.router","angular-data.DSCacheFactory","fng","ngRedux",I,L,ev.e,$.e1,s5.e1,ey.e1,eC.e1,eS.e1,H.e1,ex,j.e1,X.e1,U,tL.e1,eR,J.e1,eL.e1,e9.e1,eN.e1,e4,e5,ri,tc.e1,te,eO.e1,eF,e_,eK,ts,tu,e2,eJ,e1.e,to.e1,ta.e1,_.e1,tl.e1,q.e1,Y,th.moduleName,tf,tv,tE,er,tk,tB.e1,tT.e1,tP.e1,tD.e1,Z,tG.e1,W.e1,z.e1,tR.e1,ec,eh.e1,ef.e1,tM.e1,tN.e1,tO.e,t$.e1,tV,rt,ne.e1,nj.e,nZ.e1,E.e,P.e1,s6,ro.e1,rl,rd,s9,B.e1,rg.e,rh.e,rv,rE,rP,rB.e1,rL.e1,rO,rH.e1,rM.e,r$.e1].concat(iC).concat(rx);function rq(){return r=(0,p.ZP)(),d.module(rV,r_).config([F.providerName,e=>{e.setOptions({production:k.default.production})}]).config(["$locationProvider",B.e2,"$urlRouterProvider",(e,t,n)=>{e.html5Mode(!0),n.rule((e,t)=>{let n=t.url();if(!n)return;let i=sF.ih(n);if("/"===i[i.length-1])return i.substring(0,i.length-1)}),n.otherwise((e,t)=>{let n=t.url(),i=e.get(B.HV);if("/"===sF.ih(n)){let t=e.get(ef.HV);t.navigateToLandingPage()}else i.go("base.not-found")})}]).config(["$ocLazyLoadProvider",e=>{e.config({loadedModules:[rV]})}]).config(["$animateProvider",e=>{e.classNameFilter(/angular-animate/)}]).config(["$compileProvider",e=>{e.debugInfoEnabled(!k.default.production)}]).config(["$httpProvider",e=>{e.useApplyAsync(!0),rW(e)}]).config(["DSCacheFactoryProvider",e=>{e.setCacheDefaults({capacity:1e3,maxAge:18e5,deleteOnExpire:"passive"})}]).config(["$ariaProvider",e=>{e.config({bindRoleForClick:!1,bindKeydown:!1,ariaRequired:!1,ariaInvalid:!1,tabindex:!1})}]).config(["$logProvider",e=>{e.debugEnabled(!k.default.production)}]).config(["$provide",function(e){e.decorator("$rootScope",["$delegate",function(e){return Object.defineProperty(e.constructor.prototype,"$$digestPaused",{get(){return Object.prototype.hasOwnProperty.call(this,"$$__digestPaused")&&null!=this.$$__digestPaused?this.$$__digestPaused:(this.$parent||{}).$$digestPaused}}),e}])}]).config(["$ngReduxProvider",e=>{let t=window,n=[m.Z,r],i=[];if(!k.default.production){let e=(0,u.createLogger)({level:"info",collapsed:!0});n.push(e),t.__REDUX_DEVTOOLS_EXTENSION__&&i.push(t.__REDUX_DEVTOOLS_EXTENSION__&&t.__REDUX_DEVTOOLS_EXTENSION__())}e.createStoreWith(b.QWy,n,i)}]).config(["$qProvider",e=>{e.errorOnUnhandledRejections(!1)}])}function rz(e){return e&&e.url&&(e.url.indexOf("/api/")>=0||e.url.indexOf("/partner-cloud/app/")>=0)}function rW(e){e.interceptors.push(()=>({request:e=>(rz(e)&&(e.url=sF.uI(e.url)),e)}))}function rj(e){e.run(["$rootScope","$ngRedux",F.serviceName,tN.HV,ed,(e,t,n,i,s)=>{let a;s.registerXsrfCallback(e=>{(0,b.jQV)({apiBasePath:k.default.apiBasePath,xsrf:e,partnerCloudBasePath:k.default.partnerCloudBasePath,foundationsApiSession:b.tiF})}),r.run(C);let l=t.connect(e=>({}),b.Nwg.app)((e,t)=>{a=t});e.$on("destroy",l),e.$on(R.N.$stateChangeSuccess,(t,i,s,r,l)=>{a&&a.handleStateChangeSuccess({toState:i,toParams:s});let c="base.recentActivity";r.name&&(c=r.name),e.previousState=c,e.previousStateSref=`${c}${l?`(${JSON.stringify(l)})`:""}`,e.index=Object.create(null),e.index.locale=(n.getLocale(e)||"").replace("_","-");let d=()=>{let t=i.pageTitle||"base.ultra";n.translate({locale:e.index.locale,key:t}).then(t=>{e.index.title=t})},u=new Promise((e,t)=>{try{if(i.pageTitleHandler){let t=i.pageTitleHandler;t.build({injector:o,name:i.name,pageTitle:i.pageTitle}).process(),e(t)}else d()}catch(e){console.error(`Uncaught error in dynamic title for state ${i.name}:`,e),t()}});u.then(null,d)}),e.$on(R.G.$locationChangeSuccess,(e,t)=>{if(!a)return;let n=t.split("?")[1],i={};if(n){let e=new URLSearchParams(n);for(let[t,n]of Array.from(e.entries()))i[t]=n}a.handleLocationChangeSuccess({queryParams:i})});let c=i.subscribe();e.$on("destroy",c)}]).run(["$http",eh.HV,ed,(e,t,n)=>{n.registerXsrfCallback(t=>{e.defaults.headers.common[eu]=t,d.element.ajaxSetup({headers:{[eu]:t}})}),d.element.ajaxPrefilter(e=>{rz(e)&&(e.url=sF.uI(e.url))})}]).run(["$rootScope",eh.HV,eg.HV,F.serviceName,function(e,t,n,i){e.context=t,e.$on("bbCurrentUserModified",()=>{n.userModel.$fetch()}),(0,nX.tp)(t,n,i),(0,nY.E4)(t,n,i)}]).run(["$rootScope",e=>{e.Modernizr=window.Modernizr}])}function rZ(){sF.re("inPreviewMode",window.location.href)&&c("body").addClass("in-preview-mode"),d.element(document).ready(()=>{d.module("pre-bootstrap-ultra",["ng",eh.e1]).config(["$httpProvider",e=>{rW(e)}]);let e=d.injector(["pre-bootstrap-ultra"]),t=e.get(eh.HV),n=e.get(eg.HV),i=e.get("$http"),r=e.get(E.H),a=e.get("$q");c(document).foundation(),/Android/.test(navigator.appVersion)&&"function"==typeof document.activeElement.scrollIntoViewIfNeeded&&window.addEventListener("resize",()=>{"INPUT"===document.activeElement.tagName&&r(()=>{document.activeElement.scrollIntoViewIfNeeded()},this.scope,0,!1)});let l=sF.mg(),u=window.__initialContext.xsrf?a.when({data:{xsrfToken:window.__initialContext.xsrf}}):i.get(l+k.default.apiBasePath+"/v1/utilities/xsrfToken");a.all([n.userModel.$asPromise(),u,t.getSystemInfo().$asPromise()]).then(e=>{let t=e[0];s=t.id;let i=e[2];eb.Z.userId=s,nK.Z.setClientOffset(i.now.getTime()-new Date().getTime());let r=c("base"),a=r.attr("href");r.attr("href",k.default.basePath+"/"),o=d.bootstrap(document.documentElement,[rV],{strictDi:!0});let l=o.get(eh.HV),u=o.get(ed),p=o.get(ne.HV);p.addRouteListener();let m=new nW(ne.ZP,S._k);m.start(),u.updateToken(e[1].data.xsrfToken),n._setUserId(s),u.registerXsrfCallback(e=>{l.sessionId=e,l.xsrfToken=e}),nx.P7.init(window),tq.Z.init(window),nz(o.get(F.serviceName),o.get("$ngRedux"),o.get(B.HV),o.get(rU.HV)),rF.init(),r.attr("href",a)}).catch(e=>{401===e.status&&(window.location.href="/?new_loc="+encodeURIComponent(window.location.pathname+(window.location.search||"")+(window.location.hash||"")))}).finally(()=>{let e=()=>{let e=c("#initial-load-area");if(e&&e.length>0){if(window.__e2eTestingEnabled){e.remove();return}e.addClass("fade-out"),ej.c(e,t=>{if(!t.data.noTransitions&&"opacity"!==t.originalEvent.propertyName)return!1;e.remove()}),setTimeout(()=>e.remove(),500)}};if(window.__e2eTestingEnabled){e();return}if(o){let t;let n=o.get("$rootScope"),i=n.$on("$stateChangeSuccess",()=>{e(),i(),t()});t=n.$on("$stateChangeError",()=>{e(),t(),i()}),n.$on("hideInitialLoadingArea",()=>{e()})}else e()})})}if(k.default.production){let e=rq();rj(e),rZ()}else Promise.all([n.e(20004),n.e(94459)]).then((()=>{Promise.resolve().then(n.bind(n,12979)).then(e=>{r_=r_.concat(e.modules);let t=rq();rj(t),e.init(t),rZ()})}).bind(null,n)).catch(()=>{})},283481:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(625506),s=n(464027),r=n(529462),o=n(305233);let a="ultra.directives.accessibility.alert";class l{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="A",this.link=(e,t,n)=>{this.alertContainerId=n.alertId?n.alertId:r.d(),e.$on("$destroy",()=>{i(`#${this.alertContainerId}`).remove()}),e.$watch(()=>t.html(),t=>{this.alertArea.html("");let i=Number(n.bbAxAlert)||0;null!=t&&""!==t&&(0===i?this.trigger(t):this.timeout(this.trigger.bind(this,t),e,i,!1))})},this.trigger=e=>{this.alertArea.append(i(`<div id="${this.alertContainerId}"></div>`).append(e))},this.alertArea=i("body > .ax-alert-area"),0===this.alertArea.length&&(i("body").append('<div class="ax-alert-area" role="alert" aria-atomic="false" aria-live="assertive"></div>'),this.alertArea=i("body > .ax-alert-area"))}}l.$inject=["$injector",o.H],s.module(a,[o.e]).directive("bbAxAlert",["$injector",e=>e.instantiate(l)])},100952:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(464027),s=n(606592),r=n(625506);let o="ultra.directives.accessibility.arrowKeyNavigation",a="bb-arrow-key-container",l="bb-arrow-key-destination",c="["+a+"]",d="["+l+"]";class u{navigate(e,t,n,i,r){let o;switch(n){case s.UP:if(r){let n=parseInt(e.closest(c).attr("bb-arrow-key-container"),10),s=t.find(this.containerWithValue(n)).find(d).filter(":visible"),r=s.index(e.closest(d));"0"!==e.attr("tabindex")&&(0!==r||i)&&(o=s.eq(r-1))}else!(o=e.closest(d).prev(d)).length&&i&&(o=e.closest(c).find(d).last());break;case s.WV:if(r){let n=e.closest(c).attr("bb-arrow-key-container"),s=t.find(this.containerWithValue(n)).find(d).filter(":visible"),r=s.index(e.closest(d));!(o=s.eq(r+1)).length&&i&&(o=s.first())}else!(o=e.closest(d).next(d)).length&&i&&(o=e.closest(c).find(d).first());break;case s.RL:if(r){let n=parseInt(e.closest(c).attr(a),10),i=e.closest(d).attr(l);o=t.find(this.containerWithValue(n-1)).find(this.destinationWithValue(i)).first()}else{let t=e.closest(d).prevAll(d).length,n=this.getPreviousContainer(e).find(d);n.length?o=n.eq(t).add(n.last()).first():i&&t>0&&(o=e.closest(c).nextAll(c).last().find(d).eq(t))}break;case s.pX:if(r){let n=parseInt(e.closest(c).attr(a),10),i=e.closest(d).attr(l);o=t.find(this.containerWithValue(n+1)).find(this.destinationWithValue(i)).first()}else{let t=e.closest(d).prevAll(d).length,n=this.getNextContainer(e).find(d);n.length?o=n.eq(t).add(n.last()).first():i&&(o=e.closest(c).prevAll(c).last().find(d).eq(t))}}return!!o&&!!o.length&&(o.focus(),!0)}containerWithValue(e){return"["+a+'="'+e+'"]'}destinationWithValue(e){return"["+l+'="'+e+'"]'}getPreviousContainer(e){return e.closest(c).prevAll(c).first()}getNextContainer(e){return e.closest(c).nextAll(c).first()}rotateKeyCode(e){switch(e){case s.UP:return s.RL;case s.WV:return s.pX;case s.RL:return s.UP;case s.pX:return s.WV}}upEqualsLeftKeyCode(e){switch(e){case s.RL:return s.UP;case s.pX:return s.WV;default:return e}}constructor(e){this.$parse=e,this.restrict="A",this.link=(e,t,n)=>{let i=this.$parse(n.bbArrowKeyNavigation)(null);if("rows"!==i.layout&&"columns"!==i.layout&&"both"!==i.layout)throw Error("bb-arrow-key-navigation directive is missing or has an invalid layout specified");if(i.tabDirection&&"vertical"!==i.tabDirection&&"horizontal"!==i.tabDirection)throw Error("bb-arrow-key-navigation directive has an invalid tabDirection specified");t.on("keydown",e=>{let n=r(e.target),o=e.keyCode;i.tabDirection&&o===s.Mf&&("vertical"===i.tabDirection?o=e.shiftKey?s.UP:s.WV:"horizontal"===i.tabDirection&&(o=e.shiftKey?s.RL:s.pX)),"rows"===i.layout&&(o=this.rotateKeyCode(o)),i.upEqualsLeft&&(o=this.upEqualsLeftKeyCode(o));let a=this.navigate(n,t,o,i.wrap,i.explicit);a&&(this.body.removeClass("hide-focus-outline"),e.preventDefault(),e.stopPropagation())}),e.$on("$destroy",()=>{t.off()})},this.body=r("body")}}u.$inject=["$parse"],i.module(o,[]).directive("bbArrowKeyNavigation",["$injector",e=>e.instantiate(u)])},499161:function(e,t,n){"use strict";n.d(t,{e1:function(){return r}});var i=n(464027),s=n(625506);let r="ultra.components.directives.accessibility.clickFocus";class o{constructor(e,t){this.injector=e,this.timeout=t,this.restrict="A",this.link=(e,t,n)=>{n.bbClickFocus.length&&t.on("click",()=>{this.timeout(()=>{if(n.indexToFocus){let e=Number(n.indexToFocus),t=s(n.bbClickFocus).eq(e);t.focus()}else{let e=s(n.bbClickFocus);e.focus()}},120)})}}}o.$inject=["$injector","$timeout"],i.module(r,[]).directive("bbClickFocus",["$injector",e=>e.instantiate(o)])},915539:function(e,t,n){"use strict";n.d(t,{Pq:function(){return m},e1:function(){return d}});var i=n(612270),s=n(464027),r=n(276635),o=n(606592),a=n(336),l=n(305233),c=n(625506);let d="ultra.directives.accessibility.hideFocusOutline",u="hide-focus-outline",p="is-focusVisible";class m{static enableFocusOutline(){c(document.body).removeClass(u),c(document.body).addClass(p)}static ensureEvents(e){m.eventHandlers||(m.eventHandlers={keyup:t,keydown:t,mousedown:r.debounce(function(t){e.addClass(u),e.removeClass(p),i.t6.isLastNavigationByKeyboard=!1,i.t6.lastClickedElement=c(t.target).closest(":tabbable"),r.delay(()=>{i.t6.lastClickedElement&&0===i.t6.lastClickedElement.parents("body").length&&(i.t6.lastClickedElement=void 0)},800)},200)},Object.keys(m.eventHandlers).forEach(e=>{document.addEventListener(e,m.eventHandlers[e],!0)}));function t(e){e.keyCode===o.Mf&&(m.enableFocusOutline(),i.t6.isLastNavigationByKeyboard=!0)}}static unregisterEvents(){Object.keys(m.eventHandlers).forEach(e=>{document.removeEventListener(e,m.eventHandlers[e],!0)}),m.eventHandlers=null}constructor(e){this.bbTimeout=e,this.restrict="A",this.link=(e,t,n)=>{a.B(),t.addClass(u),t.removeClass(p),m.instanceCount+=1,m.ensureEvents(t),e.$on("$destroy",()=>{m.instanceCount-=1,0===m.instanceCount&&m.unregisterEvents(),t.off()})}}}m.$inject=[l.H],m.instanceCount=0,m.eventHandlers=null,s.module(d,[l.e]).directive("bbFocusHelper",["$injector",e=>e.instantiate(m)])},815922:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(612270),s=n(464027),r=n(335920),o=n(887545);let a="ultra.directives.accessibility.focus";class l{constructor(e,t){this.bbOffcanvas=e,this._accessibility=t,this.restrict="A",this.link=(e,t,n)=>{let i=n.keepTriggerFocus,s=e.$watch(n.bbFocus,e=>{(null==e||"true"===e.toString().toLowerCase())&&this._accessibility.isElementInActivePanel(t)&&(o.Zl(t,this.bbOffcanvas.safeFocus.bind(this.bbOffcanvas)),"true"!==i&&s())})}}}l.$inject=[r.HV,i.HV],s.module(a,[r.e1]).directive("bbFocus",["$injector",e=>e.instantiate(l)])},111451:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(464027),s=n(606592);let r="ultra.directives.accessibility.keyboardEnter";class o{constructor(){this.restrict="A",this.link=(e,t,n)=>{t.on("keydown keypress",i=>{i.keyCode===s.K5&&(n.bbBlurBeforeEnter&&t.blur(),e.$apply(function(){e.$eval(n.bbKeyboardEnter,{$event:i})}),i.preventDefault())})}}}i.module(r,[]).directive("bbKeyboardEnter",["$injector",e=>e.instantiate(o)])},685414:function(e,t,n){"use strict";n.d(t,{$N:function(){return d},e1:function(){return c},i_:function(){return u}});var i=n(464027),s=n(916415),r=n(234483),o=n(443400),a=n(396184),l=n(625506);let c="ultra.components.directives.accessibility.liveRegion",d="aria_live_polite",u="aria_live_assertive",p="#aria-live-polite-region-1",m="#aria-live-polite-region-2",h="#aria-live-assertive-region-1",g="#aria-live-assertive-region-2";class f{cleanLiveRegion(){let e=l(p),t=l(m),n=l(h),i=l(g);void 0!==e&&(e.empty(),t.empty(),n.empty(),i.empty())}readPoliteMessage(e){let t=l(p),n=l(m);this.readMessage(t,n,e)}readAssertiveMessage(e){let t=l(h),n=l(g);this.readMessage(t,n,e)}readMessage(e,t,n){""===e.text()?this.switchRegion(t,e,n):this.switchRegion(e,t,n)}switchRegion(e,t,n){e.empty(),e.attr("aria-hidden","true"),t.text(n),t.attr("aria-hidden","false")}constructor(e,t,n){this.scope=e,this.element=t,this.attrs=n,o.HD.readAssertive=e=>this.readAssertiveMessage(e),o.HD.readPolite=e=>this.readPoliteMessage(e),s.ZU.OnRootScope(e,d,(e,t)=>{this.readPoliteMessage(t),this.isEnabled=!0}),s.ZU.OnRootScope(e,u,(e,t)=>{this.readAssertiveMessage(t),this.isEnabled=!0}),e.$on(a.G.$locationChangeSuccess,()=>{this.isEnabled&&(this.cleanLiveRegion(),this.isEnabled=!1)})}}f.$inject=["scope","element","attrs"];class b{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="A",this.link=(e,t,n)=>{t.append(this.$compile(r)(e)),e.liveRegion=this.$injector.instantiate(f,{scope:e,element:t,attrs:n})}}}b.$inject=["$injector","$compile"],i.module(c,[]).directive("bbLiveRegion",["$injector",e=>e.instantiate(b)])},333099:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i,s=n(916415),r=n(211796),o=n(564470);let a="ultra.directives.bbAllyContentRef";!function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);r>3&&o&&Object.defineProperty(t,n,o)}([(0,s.wA)({module:angular.module(a,[]),componentName:"bbAllyContentRef",bindings:{contentId:"@",fileId:"@",filePreviewUrl:"@"}}),(i=(0,r.tB)("$element"),function(e,t){i(e,t,0)})],class{$postLink(){o.ZP.renderContentId(this.$element[0],{contentId:this.contentId,fileId:this.fileId,filePreviewUrl:this.filePreviewUrl})}$onDestroy(){o.ZP.destroyComponent(this.$element[0])}constructor(e){this.$element=e}})},309085:function(e,t,n){"use strict";n.d(t,{e1:function(){return c}});var i=n(564470),s=n(993795),r=n(291146),o=n(916415),a=n(211796);function l(e,t){return function(n,i){t(n,i,e)}}let c="ultra.directives.bbAllyShow",d=class{$postLink(){let e={contentRef:this.contentId,widgetType:this.showViewScoreLink?i.l9.ScoreIndicator:i.l9.AlternativeFormats},t=this.localize.getLocale(this.$scope);this.showIcon?this.iconSize&&(e.iconSize=this.iconSize):e.text=this.localize.translateSync({locale:t,key:this.showViewScoreLink?"ally.open_feedback_panel":"ally.download_alternative_formats"}),this.showAlternativeFormatsLink&&(e.ariaLabel=this.localize.translateSync({locale:t,key:"ally.download_alternative_formats"})),i.ZP.renderWidget(this.$element[0],e)}$onDestroy(){i.ZP.destroyComponent(this.$element[0])}constructor(e,t,n){this.$element=e,this.$scope=t,this.localize=n,this.showIcon=!1}};!function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);r>3&&o&&Object.defineProperty(t,n,o)}([(0,o.wA)({module:angular.module(c,[s.e1,r.moduleName]),componentName:"bbAllyShow",bindings:{contentId:"@",showViewScoreLink:"<?",showAlternativeFormatsLink:"<?",showIcon:"<?",iconSize:"@?"}}),l(0,(0,a.tB)("$element")),l(1,(0,a.tB)("$scope")),l(2,(0,a.tB)(r.serviceName))],d)},188183:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(464027),s=n(445218),r=n(555342);let o="ultra.components.directives.grade.course-grades-grader",a={Class:r.kq,bindingNames:["sortable","sort"]};i.module(o,[]).component("bbArrowSortIndicator",(0,s.G5)(a))},862231:function(e,t,n){"use strict";n.d(t,{Gb:function(){return g},JB:function(){return f},XH:function(){return b},e1:function(){return u},lZ:function(){return m},o5:function(){return p},qH:function(){return h}});var i,s,r=n(464027),o=n(152625),a=n(614682),l=n(524852),c=n(305233),d=n(555342);let u="ultra.directives.autosave",p="bb-autosave-save-to-server-now",m="bb-autosave-browser-delete",h="bb-autosave-form",g="bb-autosave-save-trigger-debounce",f=1e4,b=3;(i=s||(s={})).BrowserLocalStorage="browserLocalStorage",i.BrowserSessionStorage="browserSessionStorage",i.Server="server";class v{setupListeners(){this.scope.$on("bb-autosave-interrupt-timer",()=>{this.timeout.cancel(this.autoSaveTimeout)}),this.scope.$on(g,()=>{this.scope.delayAutosave&&this.scope.delayAutosave()||this.debounceSave()}),this.scope.$on(p,()=>{this.scope.delayAutosave&&this.scope.delayAutosave()||(this.timeout.cancel(this.autoSaveTimeout),this.saveToServerNow())}),this.scope.$on("bb-autosave-save-to-browser-now",()=>{this.scope.delayAutosave&&this.scope.delayAutosave()||(this.scope.$emit(h,d.Ht.Change),this.timeout.cancel(this.autoSaveTimeout),this.saveToBrowserNow())}),this.scope.$on("bb-autosave-browser-restore",()=>{this.restoreFromBrowser()}),this.scope.$on(m,()=>{this.deleteFromBrowser()}),this.scope.$on("bb-start-auto-submission",(e,t)=>{this.startAutoSubmit=!0,t.resolve()}),this.scope.$on("bb-cancel-auto-submission",()=>{this.startAutoSubmit=!1})}setupWatcher(){let e=(e,t)=>{this.scope.delayAutosave&&this.scope.delayAutosave()||null===e&&""===t||this.debounceSave()};if(!this.scope.delayAutosave||!this.scope.delayAutosave())return l.k(this.scope,this.formController,e);let t=this.scope.$watch(()=>this.scope.delayAutosave(),n=>{null==n||n||(l.k(this.scope,this.formController,e),t())})}checkForDirectiveConfigErrors(){if(this.saveTo===s.Server&&!(this.scope.saveFunc&&this.scope.validationFunc))throw Error("saving to the server requires save-func and validate to be defined")}isValid(){return this.formController.$valid&&this.scope.validationFunc()}debounceSave(){if(this.startAutoSubmit)return;this.scope.useSaveNumbers&&(this.saveNumber=this.saveNumber+1);let e=this.saveNumber;this.scope.$emit(h,d.Ht.Change,void 0,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e}),this.scope.$emit("bb-autosave-form-to-browser",d.Ht.Change),this.timeout.cancel(this.autoSaveTimeout),!this.autoSaveTimeout&&this.scope.useLeadingEdge?(this.saveToDestination(e),this.autoSaveTimeout=this.timeout(()=>{},this.scope,this.timeoutMillis)):this.autoSaveTimeout=this.timeout(()=>{this.saveToDestination(e)},this.scope,this.timeoutMillis)}saveToDestination(e){this.saveTo===s.Server?this.saveToServerNow(e):this.browserStorageDestination&&this.saveToBrowserNow()}saveToServerNow(e=0){if(!(!this.startAutoSubmit&&a.wj())){if(!(this.scope.saveFunc&&this.scope.validationFunc))throw Error("saving to the server requires save-func and validate to be defined");this.isValid()?(this.scope.$emit(h,d.Ht.Saving,void 0,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e}),this.scope.saveFunc().then(t=>{this.scope.$emit(h,d.Ht.Saved,t,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e}),this.browserStorageDestination&&this.deleteFromBrowser()},t=>{this.scope.$emit(h,d.Ht.SaveFailure,t,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e})})):this.scope.$emit(h,d.Ht.ValidationFailure)}}saveToBrowserNow(){if(!this.browserStorageDestination)throw Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");this.scope.$emit("bb-autosave-form-to-browser",d.Ht.Saving),this.browserStorage.serializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then(e=>{this.scope.$emit("bb-autosave-form-to-browser",d.Ht.Saved,e)})}restoreFromBrowser(){if(!this.browserStorageDestination)throw Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deserializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then(e=>{if(e)return this.scope.$root.$broadcast("bb-autosave-browser-restore-data",e),e})}deleteFromBrowser(){if(!this.browserStorageDestination)throw Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deleteCurrentRouteScopes(this.browserStorageDestination)}constructor(e,t,n,i,r){switch(this.$q=e,this.scope=t,this.formController=n,this.browserStorage=i,this.timeout=r,this.timeoutMillis=2e3,this.startAutoSubmit=!1,this.saveNumber=0,this.saveTo=this.scope.debounceSaveDestination&&function(e){if(e)return Object.values(s).find(t=>t.toLowerCase()===e.toLowerCase())}(this.scope.debounceSaveDestination())||s.Server,this.saveTo){case s.BrowserSessionStorage:this.browserStorageDestination=o.iE.SessionStorage;break;case s.BrowserLocalStorage:this.browserStorageDestination=o.iE.LocalStorage}this.checkForDirectiveConfigErrors(),t.timeoutMillis?this.timeoutMillis=t.timeoutMillis():this.browserStorageDestination&&(this.timeoutMillis=1e3),this.setupListeners(),this.browserStorageDestination&&this.restoreFromBrowser(),this.setupWatcher()}}v.$inject=["$q","scope","formController",o.HV,c.H];class y{constructor(e){this.$injector=e,this.restrict="A",this.require="^form",this.scope={debounceSaveDestination:"&?",delayAutosave:"&?",saveFunc:"&?",autoSaveContextId:"@?",autoSaveContextArea:"@?",timeoutMillis:"&?",validationFunc:"&?",useLeadingEdge:"<?",useSaveNumbers:"<?"},this.link=(e,t,n,i)=>{e.autoSave=this.$injector.instantiate(v,{scope:e,formController:i})}}}y.$inject=["$injector"],r.module(u,[c.e,o.e1]).directive("bbAutosave",["$injector",e=>e.instantiate(y)])},915638:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(464027),s=n(291146),r=n(200970),o=n(555342);let a="ultra.directives.saveButtons";class l{isValid(){return this.scope.ignoreFormValidation&&this.scope.ignoreFormValidation()?this.scope.validateSave():this.form.$valid&&this.scope.validateSave()}isCancelNowADelete(){return this.scope.displayDeleteAfterSaving&&this.scope.displayDeleteAfterSaving()&&this.isSavedOnceOrMore}isCancelDisabled(){return this.isSaving||this.isCancelNowADelete()&&!this.scope.canDelete()}isDeleteDisabled(){return this.isSaving||!this.scope.canDelete()}isSaveDisabled(){return this.isSaving||!this.isValid()}cancelAction(){return this.form.$setPristine(),this.informScreenReaderToRead(this.canceledSuccessfullyStr),this.isCancelNowADelete()?this.scope.deleteAction():this.scope.cancelAction()}deleteAction(){return this.form.$setPristine(),this.scope.deleteAction()}saveAction(){return this.form.$setSubmitted(),this.informScreenReaderToRead(this.savedSuccessfullyStr),this.scope.saveAction()}mousedownAction(){if(this.scope.mousedownAction)return this.scope.mousedownAction()}informScreenReaderToRead(e){this.scope.disableScreenreaderAnnouncements&&this.scope.disableScreenreaderAnnouncements()||this.scope.$emit("read-info-directive",e)}constructor(e,t){this.scope=e,this.bbLocalize=t,this.isSaving=!1,this.isSavedOnceOrMore=!1,this.savedToBrowserCount=0,this.bbLocalize.loadBundle("components/directives/save-buttons").then(()=>{this.notSavedStr=e.saveType||this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.notSaved"}),this.savedStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.saved"}),this.savingStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.saving"}),this.cancelStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.cancel"}),this.deleteStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.delete"}),this.savedSuccessfullyStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.notification.savedSuccessfully"}),this.canceledSuccessfullyStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.notification.canceledSuccessfully"}),this.deleteButtonStatus=this.deleteStr,e.displaySavedAfterSaving&&e.displaySavedAfterSaving()&&this.isSavedOnceOrMore?this.saveButtonStatus=this.savedStr:this.saveButtonStatus=this.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()&&this.isSavedOnceOrMore?this.cancelButtonStatus=this.deleteStr:this.cancelButtonStatus=this.cancelStr}),e.$on("bb-save-button",(t,n,i)=>{let s=!1;switch(n){case o.Ht.Change:this.isSaving=!1,this.saveButtonStatus=this.notSavedStr;break;case o.Ht.Saving:this.isSaving=!0,this.saveButtonStatus=this.savingStr,s=!0;break;case o.Ht.Saved:s=!0,this.isSavedOnceOrMore=!0,this.isSaving=!1,this.informScreenReaderToRead(this.savedSuccessfullyStr),e.displaySavedAfterSaving&&e.displaySavedAfterSaving()?this.saveButtonStatus=this.savedStr:this.saveButtonStatus=this.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()?this.cancelButtonStatus=this.deleteStr:this.cancelButtonStatus=this.cancelStr;break;case o.Ht.SaveFailure:case o.Ht.ValidationFailure:s=!0}this.form.$bbSaveAttempt=s}),e.$parent.$on("bb-autosave-form-to-browser",(e,t,n)=>{o.Ht.Saved===t&&this.element.attr("saved-to-browser",this.savedToBrowserCount+=1)})}}l.$inject=["scope",s.serviceName];class c{constructor(e,t){this.$injector=e,this.bbLocalize=t,this.require="^form",this.replace=!0,this.restrict="E",this.scope={canDelete:"&",cancelAction:"&",choices:"=?",deleteAction:"&",deleteConfirmationResourceType:"@?",disableScreenreaderAnnouncements:"&?",displayDeleteAfterSaving:"&?",displaySavedAfterSaving:"&?",hideSave:"&?",hideCancel:"&?",hideDelete:"&?",isInline:"&?",mousedownAction:"&?",mustShowDeleteConfirmation:"&?",mustShowSaveConfirmation:"&?",saveAction:"&",saveConfirmationResourceType:"@?",validateSave:"&",ignoreFormValidation:"&",saveType:"@?",analyticsIdTagPrefix:"@"},this.link=(e,t,n,i)=>{e.saveButtons=this.$injector.instantiate(l,{scope:e}),e.saveButtons.form=i,e.saveButtons.element=t},this.compile=(e,t)=>{let n=t.isInline;return"true"===n&&(e.prepend(e.find("footer").children()),e.find("footer").remove()),{pre:this.link}},this.template=r}}c.$inject=["$injector",s.serviceName],i.module(a,[s.moduleName]).directive("bbSaveButtons",["$injector",e=>e.instantiate(c)])},449522:function(e,t,n){"use strict";n.d(t,{e1:function(){return E}}),n(602994);var i=n(464027),s=n(190234),r=n(451251),o=n(18447),a=n(291146),l=class{static convertToGrayscale(e){let t;let n=document.createElement("canvas"),i=n.getContext("2d"),s=e.naturalWidth,r=e.naturalHeight;n.width=s,n.height=r,i.drawImage(e,0,0);let o=i.getImageData(0,0,s,r),a=o.data.length;for(let e=0;e<a;e+=4)t=(o.data[e]+o.data[e+1]+o.data[e+2])/3,o.data[e]=t,o.data[e+1]=t,o.data[e+2]=t;return i.putImageData(o,0,0,0,0,o.width,o.height),n.toDataURL()}};let c="ultra.components.directives.imageGrayscale";class d{onLoadCallback(){return()=>{let e=l.convertToGrayscale(this.element[0]);this.element[0].src=e}}constructor(e,t,n){this.scope=e,this.element=t,this.attributes=n;let i="true"===this.attributes.bbImageGrayscale;i&&p()&&t.one("load",this.onLoadCallback())}}class u{constructor(){this.restrict="A",this.link=(e,t,n)=>new d(e,t,n)}}function p(){let e=document.documentMode;return 10===e||11===e}let m=i.module(c,[]);p()&&m.directive("bbImageGrayscale",["$injector",e=>e.instantiate(u)]);var h=n(343597),g=n(78364);let f="ultra.components.directives.bbUiIcon.large.AvatarMultiple";(0,h.n)(g.Y,f,"bbUiIconLargeAvatarMultiple");var b=n(211796),v=n(283806),y=n(592281),C=n(625506);function S(e,t){return function(n,i){t(n,i,e)}}let E="ultra.directives.avatar";class I{getAvatarBG(e){let t=parseInt((e&&e.id||"0").replace(/[^\d]/g,""),10);return"default-avatar-"+(t%this.backgroundColors+1)}avatarParticipantsClass(e){switch(e){case 0:return"no-participants";case 1:return"one-participant";case 2:return"two-participants";default:return"two-plus-participants"}}canDisplayAvatarForUser(e){return!!e&&(!!(e.givenName||e.familyName||this.isAnonymousStudent(e))||!!e.avatar&&!!e.avatar.permanentUrl&&"default"!==e.avatar.permanentUrl)}getInitials(e){return!e||this.isAnonymousStudent(e)||!e.givenName||!e.familyName||(0,r.bj)(e.givenName)||(0,r.bj)(e.familyName)||(0,r.DR)(e.givenName)||(0,r.DR)(e.familyName)?null:(e.givenName.charAt(0)+e.familyName.charAt(0)).toLowerCase()}buildAvatarData(e){let t={};if(!this.canDisplayAvatarForUser(e))return null;if(t.avatarBg=this.getAvatarBG(e),t.userInitials=this.getInitials(e),e.ui&&e.ui.displayName?t.username=e.ui.displayName:e.givenName||e.familyName||this.isAnonymousStudent(e)?this.bbLocalize.formatUsername(e,a.ILocaleUsernameFormat.Long,this.scope,{noWrap:!0,noEscape:!0}).then(e=>{t.username=e}):t.username=null,e.avatar&&e.avatar.permanentUrl&&"default"!==e.avatar.permanentUrl){if(/^https?/.test(e.avatar.permanentUrl)&&-1===e.avatar.permanentUrl.indexOf("ts=")){let t=(y.Z.isValidDate(e.lastModifiedAt)?e.lastModifiedAt:new Date).getTime();e.avatar.permanentUrl=e.avatar.permanentUrl+(e.avatar.permanentUrl.indexOf("?")>=0?"&ts=":"?ts=")+encodeURIComponent(t)}t.avatarUrl=e.avatar.permanentUrl}return t.isMultiUser=(0,s.CE)(e),t}isAnonymousStudent(e){if(e.isAnonymousStudent)return e.isAnonymousStudent()}renderAvatars(){let e=this.scope.users;if(!e&&this.scope.user&&(e=this.scope.user),i.isArray(e)||(e=null!=e?[e]:[]),0===e.length){this.scope.first=null,this.scope.second=null,this.scope.participants=0,this.scope.isAvatarRender=!0;return}this.scope.participants=e.length,this.scope.avatarsClasses={},i.isDefined(this.scope.inactive)&&(this.scope.avatarsClasses.inactive=this.scope.inactive()),this.scope.avatarsClasses.inactive||(this.scope.avatarsClasses.outline=!0),!this.scope.avatarsClasses.inactive&&i.isDefined(this.scope.customizedActiveStyle)&&(this.scope.avatarsClasses.outline=!0,this.scope.avatarsClasses[this.scope.customizedActiveStyle]=!0),this.scope.avatarsClasses[this.avatarParticipantsClass(e.length)]=!0,this.scope.first=this.buildAvatarData(e[0]),2===e.length?this.scope.second=this.buildAvatarData(e[1]):e.length>2&&(this.scope.second={}),this.scope.isAvatarRender=!0}constructor(e,t,n,i,s){this.scope=e,this.$element=t,this.attributes=n,this.bbLocalize=i,this.$timeout=s,this.backgroundColors=12;let r=this.scope.$watchGroup(["user.givenName","user.familyName","user.ui.displayName","user.avatar.permanentUrl","user","inactive()","isWarningRender"],()=>{void 0!==this.scope.user&&(this.renderAvatars(),this.scope.autoUpdate&&this.scope.autoUpdate()||r())}),o=this.scope.$watchCollection("users",()=>{this.scope.users&&(this.renderAvatars(),this.scope.autoUpdate&&this.scope.autoUpdate()||o())})}}class w{constructor(e,t){this.bbLocalize=e,this.$timeout=t,this.restrict="E",this.template=v,this.scope={user:"=?",inactive:"&?",users:"=?",autoUpdate:"&?",isGray:"&?",hasException:"&?",customizedActiveStyle:"@?",analyticsIdTagPrefix:"@",isWarningRender:"=?"},this.link=(e,t,n)=>new I(e,t,n,this.bbLocalize,this.$timeout)}}w=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([S(0,(0,b.tB)(a.serviceName)),S(1,(0,b.tB)("$timeout"))],w),o.default.features.newAvatar?i.module(E,[f]).directive("bbAvatar",["$compile",e=>({restrict:"E",scope:!1,priority:Number.MAX_VALUE,terminal:!0,link(t,n,i){let s=Object.prototype.hasOwnProperty.call(i,"users")?"bb-user-avatar-group":"bb-user-avatar",r=C(n[0].outerHTML.replace(/bb\-avatar/g,s));n.replaceWith(r),e(r)(t)}})]):i.module(E,[c,f]).directive("bbAvatar",["$injector",e=>e.instantiate(w)])},817473:function(e,t,n){"use strict";n.d(t,{e1:function(){return K}});var i=n(916415),s=n(211796),r=n(291146),o=n(291601),a=n(343597),l=n(477115);let c="ultra.components.directives.bbUiIcon.large.Attendance";(0,a.n)(l.u,c,"bbUiIconLargeAttendance");var d=n(441667),u=n(20856);let p="ultra.components.directives.bbUiIcon.large.Calculation";(0,a.n)(u.E,p,"bbUiIconLargeCalculation");var m=n(477747),h=n(345349);let g="ultra.components.directives.bbUiIcon.large.DocumentBlank";(0,a.n)(h.E,g,"bbUiIconLargeDocumentBlank");var f=n(976606),b=n(986028),v=n(229812),y=n(623402);let C="ultra.components.directives.bbUiIcon.large.Homework";(0,a.n)(y.A,C,"bbUiIconLargeHomework");var S=n(139936);let E="ultra.components.directives.bbUiIcon.large.Photo";(0,a.n)(S.P,E,"bbUiIconLargePhoto");var I=n(756010),w=n(628406),A=n(395757),k=n(620927),x=n(303103);let T="ultra.components.directives.bbUiIcon.large.OverallGrade";(0,a.n)(x.b,T,"bbUiIconLargeOverallGrade");var P=n(708339);let D="ultra.components.directives.bbUiIcon.large.Pdf";(0,a.n)(P.Q,D,"bbUiIconLargePdf");var G=n(773331);let R="ultra.components.directives.bbUiIcon.large.Presentation";(0,a.n)(G.A,R,"bbUiIconLargePresentation");var B=n(954684),L=n(739028),N=n(674504),O=n(500875),M=n(720847);let $="ultra.components.directives.bbUiIcon.large.Video";(0,a.n)(M.n,$,"bbUiIconLargeVideo");var H=n(13480);let F="ultra.components.directives.bbUiIcon.large.Audio";(0,a.n)(H.B,F,"bbUiIconLargeAudio");var U=n(487393),V=n(19344),_=n(279120);let q="ultra.components.directives.bbUiIcon.large.Participation";(0,a.n)(_.A,q,"bbUiIconLargeParticipation");var z=n(741343);let W="ultra.components.directives.bbUiIcon.large.CollaborativeCloud";(0,a.n)(z.u,W,"bbUiIconLargeCollaborativeCloud");var j=n(819864);function Z(e,t){return function(n,i){t(n,i,e)}}let K="ultra.components.directives.bbUiContentIcon";!function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);r>3&&o&&Object.defineProperty(t,n,o)}([(0,i.wA)({moduleName:K,componentName:"bbUiContentIcon",bindings:{icon:"<",color:"@?",notDecorative:"<?"},template:j,requireModules:[r.moduleName,m.e,o.e,c,F,d.e,p,m.e,g,f.e,b.e,v.e,C,I.e,w.e,A.e,k.e,T,D,E,R,B.e,L.e,N.e,O.e,$,U.e,V.e,q,W]}),Z(0,(0,s.tB)("$scope")),Z(1,(0,s.tB)(r.serviceName))],class{$onChanges(){this.setTitleAccess()}setTitleAccess(){this.notDecorative&&this.icon&&(this.titleAccess=this.localize.translateSync({key:`components.directives.element-image.element-image-accessibility.img-icon-${this.icon}`,locale:this.localize.getLocale(this.$scope)}))}constructor(e,t){this.$scope=e,this.localize=t}})},343597:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var i=n(464027),s=n(202784),r=n(445218);function o(e,t,n){i.module(t,[]).component(n,(0,r.G5)({Class:t=>s.createElement(e,t),attributes:["color","className","titleAccess"],withErrorModalBoundary:!1}))}},291601:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(115296);let r="ultra.components.directives.bbUiIcon.large.Assignments";(0,i.n)(s.M,r,"bbUiIconLargeAssignments")},441667:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(610455);let r="ultra.components.directives.bbUiIcon.large.Blog";(0,i.n)(s.l,r,"bbUiIconLargeBlog")},477747:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(768722);let r="ultra.components.directives.bbUiIcon.large.Discussion";(0,i.n)(s.$,r,"bbUiIconLargeDiscussion")},976606:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(361333);let r="ultra.components.directives.bbUiIcon.large.DocumentCloud";(0,i.n)(s.g,r,"bbUiIconLargeDocumentCloud")},340651:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(890983);let r="ultra.components.directives.bbUiIcon.large.DocumentMultiple";(0,i.n)(s.I,r,"bbUiIconLargeDocumentMultiple")},986028:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(520091);let r="ultra.components.directives.bbUiIcon.large.DocumentText";(0,i.n)(s.s,r,"bbUiIconLargeDocumentText")},229812:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(852632);let r="ultra.components.directives.bbUiIcon.large.Folder";(0,i.n)(s.g,r,"bbUiIconLargeFolder")},756010:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(904749);let r="ultra.components.directives.bbUiIcon.large.Journal";(0,i.n)(s.t,r,"bbUiIconLargeJournal")},628406:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(718359);let r="ultra.components.directives.bbUiIcon.large.LearningModule";(0,i.n)(s.W,r,"bbUiIconLargeLearningModule")},395757:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(892208);let r="ultra.components.directives.bbUiIcon.large.Link";(0,i.n)(s.r,r,"bbUiIconLargeLink")},620927:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(830858);let r="ultra.components.directives.bbUiIcon.large.Lti";(0,i.n)(s.U,r,"bbUiIconLargeLti")},954684:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(747216);let r="ultra.components.directives.bbUiIcon.large.Scormengine";(0,i.n)(s.C,r,"bbUiIconLargeScormengine")},739028:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(120560);let r="ultra.components.directives.bbUiIcon.large.Spreadsheet";(0,i.n)(s.Y,r,"bbUiIconLargeSpreadsheet")},19344:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(543375);let r="ultra.components.directives.bbUiIcon.large.Survey";(0,i.n)(s.m,r,"bbUiIconLargeSurvey")},674504:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(124057);let r="ultra.components.directives.bbUiIcon.large.Test";(0,i.n)(s.e,r,"bbUiIconLargeTest")},500875:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(864094);let r="ultra.components.directives.bbUiIcon.large.Textbook";(0,i.n)(s.w,r,"bbUiIconLargeTextbook")},487393:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(420628);let r="ultra.components.directives.bbUiIcon.large.Zip";(0,i.n)(s.s,r,"bbUiIconLargeZip")},723485:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(861493);let r="ultra.components.directives.bbUiIcon.medium.Settings";(0,i.n)(s.Settings,r,"bbUiIconMediumSettings")},607793:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(541346);let r="ultra.components.directives.bbUiIcon.small.Download";(0,i.n)(s.U,r,"bbUiIconSmallDownload")},895135:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(879121);let r="ultra.components.directives.bbUiIcon.small.Exempt";(0,i.n)(s.d,r,"bbUiIconSmallExempt")},112746:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(367522);let r="ultra.components.directives.bbUiIcon.small.Invisible";(0,i.n)(s.u,r,"bbUiIconSmallInvisible")},71551:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(343597),s=n(267744);let r="ultra.components.directives.bbUiIcon.small.Upload";(0,i.n)(s.g,r,"bbUiIconSmallUpload")},381235:function(e,t,n){"use strict";n.d(t,{e1:function(){return s}});var i=n(464027);let s="ultra.components.directives.cacheCompilation";class r{compile(e,t){let n=t.bbCacheCompilation;if(!n)throw Error("Cache compilation key is required");let i=e.contents();return e.empty(),null==this.compiled[n]&&(this.compiled[n]=this.$compile(i)),(e,t)=>{this.compiled[n](e,function(e,n){t.append(e)})}}constructor(e){this.$compile=e,this.compiled=Object.create(null),this.priority=2e3}}r.$inject=["$compile"],i.module(s,[]).directive("bbCacheCompilation",["$injector",e=>e.instantiate(r)])},619903:function(e,t,n){"use strict";n.d(t,{e1:function(){return r}});var i=n(464027),s=n(305233);let r="ultra.components.directives.clickOutside";class o{applyExpression(e){let t=this.element.is(e.target),n=this.element.has(e.target).length>0;t||n||this.scope.$apply(this.attrs.bbClickOutside)}getContainer(){if("currentPanelOnly"in this.attrs){let e=this.element;for(;e.parent().length;)if((e=e.parent()).is(".bb-offcanvas-panel,#main-content-inner"))return e}}constructor(e,t,n,i,s){this.scope=e,this.element=t,this.attrs=n,this.$document=i,this.timeout=s;let r=e=>this.applyExpression(e),o=this.getContainer()||i;this.scope.$watch(this.attrs.isActive,(e,t)=>{e?this.timeout(()=>{o.on("click",r)},this.scope,0,!1):o.off("click",r)}),this.scope.$on("$destroy",()=>{o.off("click",r)})}}o.$inject=["scope","element","attrs","$document",s.H];class a{constructor(e){this.$injector=e,this.priority=100,this.restrict="A",this.compile=(e,t)=>({pre:(e,t,n)=>this.$injector.instantiate(o,{scope:e,element:t,attrs:n})})}}a.$inject=["$injector"],i.module(r,[]).directive("bbClickOutside",["$injector",e=>e.instantiate(a)])},785454:function(e,t,n){"use strict";n.d(t,{e1:function(){return r}}),n(219693);var i=n(464027),s=n(625506);let r="ultra.components.directives.clickScrollTo";class o{constructor(){this.restrict="A",this.link=(e,t,n)=>{t.on("click",()=>{s(n.bbClickScrollTo).scrollintoview({duration:500})}),e.$on("$destroy",()=>{t.off()})}}}i.module(r,[]).directive("bbClickScrollTo",["$injector",e=>e.instantiate(o)])},294992:function(e,t,n){"use strict";n.d(t,{e1:function(){return o}});var i=n(464027),s=n(305233),r=n(625506);let o="ultra.components.directives.clickToInvokeChild",a="bbClickToInvokeChild";class l{setClickableStyle(){this.timeout(()=>{let e=this.element.find(this.linkSelector).first();e.length?(void 0===this.element.attr("tabindex")&&this.element.attr("tabindex","-1"),this.element.addClass("child-is-invokable")):(this.element.removeAttr("tabindex"),this.element.removeClass("child-is-invokable"))},this.scope,0,!1)}constructor(e,t,n,i){if(this.scope=e,this.element=t,this.attrs=n,this.timeout=i,this.linkSelector=n[a],!this.linkSelector&&void 0!==this.linkSelector)throw Error(a+" has no child selector specified.");this.setClickableStyle(),e.$on("click-to-invoke-child-directive-init",()=>{this.setClickableStyle()}),t.on("click",e=>{if(!r(e.target).closest("a, button, [ng-click], .stop-click-propagation, [bb-click-to-invoke-child]",this.element.get(0)).length){let t=this.element.find(this.linkSelector).get(0);t&&(t.click(),n.stopPropagation&&"true"===n.stopPropagation&&e.stopPropagation())}})}}l.$inject=["scope","element","attrs",s.H];class c{constructor(e){this.$injector=e,this.scope=!1,this.restrict="A",this.link=(e,t,n)=>{this.$injector.instantiate(l,{scope:e,element:t,attrs:n})}}}c.$inject=["$injector"],i.module(o,[s.e]).directive(a,["$injector",e=>e.instantiate(c)])},312056:function(e,t,n){"use strict";n.d(t,{e1:function(){return r}});var i=n(464027),s=n(305233);let r="ultra.components.directives.click";class o{constructor(e){this.timeout=e,this.restrict="A",this.link=(e,t,n)=>{void 0===n.bbClickTimeout&&(n.bbClickTimeout=0);let i=0,s=()=>{let t;"true"===n.bbClickOnceDisable?t=e.$eval(n.bbClick):(i+=1)<=1&&(t=e.$eval(n.bbClick)),null!=t&&void 0!==t&&t.finally(()=>{this.timeout(function(){i=0},e,n.bbClickTimeout)})};e.$on("$destroy",function(){t.off("click",s)}),t.on("click",s)}}}o.$inject=[s.H],i.module(r,[s.e]).directive("bbClick",["$injector",e=>e.instantiate(o)])},880978:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(464027),s=n(291146),r=n(555342),o=n(445218);let a="ultra.components.directives.components.confirmationCalloutDialog",l={Class:r.y2,bindingNames:["analyticsId","target","isVisible","textContent","onDismiss","onSuccess"],renderLocalized:!0};i.module(a,[s.moduleName]).component("bbConfirmationCalloutDialog",(0,o.G5)(l))},352375:function(e,t,n){"use strict";n.d(t,{e1:function(){return l}});var i=n(247126),s=n(822658),r=n(211796),o=n(464027);function a(e,t){return function(n,i){t(n,i,e)}}let l="ultra.components.directives.confirmationCourseOrgTokenReplacementDirective";class c{replaceToken(e){return e?e.replace("resource/x-bb-course-","resource/x-bb-organization-"):e}constructor(e,t,n,i,s){this.element=e,this.attributes=t,this.scope=n,this.ultraState=i,this.currentCourse=s;try{let n=i.includes("base.organizations.**")||s.course&&s.course.isOrganization;n&&t.bbConfirmationNeeded&&(t.bbConfirmationNeeded=this.replaceToken(t.bbConfirmationNeeded),e.attr("bb-confirmation-needed",this.replaceToken(t.bbConfirmationNeeded)))}catch(e){}}}class d{constructor(e,t){this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=()=>(e,t,n)=>new c(t,n,e,this.ultraState,this.currentCourse)}}d=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([a(0,(0,r.tB)(i.HV)),a(1,(0,r.tB)(s.HV))],d),o.module(l,[i.e1]).directive("confirmationCourseOrgTokenResolver",["$injector",e=>e.instantiate(d)])},108404:function(e,t,n){"use strict";n.d(t,{N0:function(){return b},Pc:function(){return y},e1:function(){return h},y_:function(){return s}});var i,s,r=n(276635),o=n(464027),a=n(501),l=n(291146),c=n(748157),d=n(168132),u=n(291538),p=n(776517),m=n(625506);let h="ultra.directives.confirmationNeeded",g="components.directives.confirmation-needed.",f="dont-ask-again",b="show-confirmation";function v(e){if(e)return Object.values(s).find(t=>t.toLowerCase()===e.toLowerCase())}function y(e,t){return g+t+"-"+e}(i=s||(s={})).Always="always",i.Once="once",i.UserChoice="userChoice";class C{handleButtonClick(e){let t;if(!this.clickHandling){if(this.clickHandling=!0,this.attrs.getConfirmationKeyAndShowType)t=this.$q.when(this.scope.$eval(this.attrs.getConfirmationKeyAndShowType));else if(this.attrs.bbConfirmationNeeded)t=this.$q.when({confirmationKey:this.attrs.bbConfirmationNeeded,showType:this.attrs.showType});else{this.clickHandling=!1;return}e&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault()),t.then(t=>{if(!t.confirmationKey){this.invokeClickAction(e);return}switch(this.resourceType=t.confirmationKey.replace("resource/",""),this.choices=[],v(t.showType)){case s.Always:this.confirmAction(e);break;case s.Once:this.showConfirmationActionOnlyOnce(e);break;default:this.showConfirmationActionByUserChoice(e)}})}}showConfirmationActionOnlyOnce(e){this.bbContext.getPreference(this.createPreferenceKey(f),"false").then(t=>{"true"===t.value?this.invokeClickAction(e):this.confirmAction(e)})}createResourceKey(e){return g+e+"-"+this.resourceType}createPreferenceKey(e){return"{{context}}.confirmation".replace("{{context}}",this.resourceType+"-"+e).replace(/\-/g,".")}addToChoices(e,t,n){let i;i=this.attrs.modalContext&&"predict"===this.attrs.modalContext?{key:e,value:!!t,localizedKey:e,preferenceKey:this.createPreferenceKey(e),isDisable:!!n}:{key:e,value:!!t,localizedKey:this.createResourceKey(e),preferenceKey:this.createPreferenceKey(e),isDisable:!!n};let s=this.choices.some(t=>t.key===e);s||this.choices.push(i)}parseChoicesFromAttr(e){if(e&&e.length)for(let t=0;t<e.length;t++)this.addToChoices(e[t].key,e[t].value,e[t].isDisable)}showConfirmationActionByUserChoice(e){this.bbContext.getPreference(this.createPreferenceKey(f),"false").then(t=>{if("true"===t.value){if(this.attrs.choices){let t=JSON.parse(this.attrs.choices),n=[];t.forEach(e=>{n.push(this.bbContext.getPreference(this.createPreferenceKey(e.key),"false").then(t=>{let n="true"===t.value;this.scope.$emit(e.key,n)}))}),this.$q.all(n).then(()=>{this.invokeClickAction(e)})}else this.invokeClickAction(e)}else this.addToChoices(f),this.confirmAction(e)},()=>{this.addToChoices(f),this.confirmAction(e)})}confirmAction(e){let t;this.scope.titleKey=this.createResourceKey("title"),this.scope.instructionsKey=this.createResourceKey("instructions"),this.scope.cancelKey=this.createResourceKey("cancel"),this.scope.okKey=this.createResourceKey("ok"),this.attrs.choices&&this.attrs.choices.length>0&&this.parseChoicesFromAttr(JSON.parse(this.attrs.choices)),t=this.attrs.customClass?u.replace(/class="notification"/,'class="notification '+this.attrs.customClass+'"'):u;let n=this;this.modalInstance=this.$modal.open({template:t,scope:n.scope,resolve:{translations:[l.serviceName,e=>e.loadBundle("components/directives/confirmation-needed")]},controller:["$scope",l.serviceName,function(e,t){e.okAction=()=>{e.$close(),n.okClicked=!0},e.cancelAction=()=>{n.attrs.otherChoiceAction?(e.$close(),n.okClicked=!1):e.$dismiss(),(0,p.sA)(p.Cs.CancelClicked)};let i={};n.attrs.modalTranslateOptions&&(i=e.$eval(n.attrs.modalTranslateOptions)),e.modalTranslateOptions={},e.modalStrings={title:null,instructions:null,cancel:null,ok:null},Object.keys(e.modalStrings).forEach(n=>{e.modalTranslateOptions[n]=r.merge({key:e[n+"Key"]},i[n]),e.modalStrings[n]=t.translateSync(e.modalTranslateOptions[n])})}]}),this.modalInstance.result.then(()=>{this.okClicked?(this.persistResult(),this.invokeClickAction(e)):(this.scope.$eval(this.attrs.otherChoiceAction),this.clickHandling=!1)},()=>{this.attrs.dismissCallback&&this.scope.$eval(this.attrs.dismissCallback),this.clickHandling=!1})}persistResult(){switch(v(this.attrs.showType)){case s.Always:this.choices.forEach(e=>{this.scope.$emit(e.key,e.value)});break;case s.Once:this.bbContext.setPreference(this.createPreferenceKey(f),"true");break;default:this.choices.forEach(e=>{e.value&&(this.scope.$emit(e.key,e.value),this.bbContext.setPreference(e.preferenceKey,e.value.toString()))})}}invokeClickAction(e){this.scope.$eval(this.attrs.fngClick||this.attrs.ngClick,{$event:e}),this.clickHandling=!1,this.scope.nextSelector&&m(this.scope.nextSelector).focus()}constructor(e,t,n,i,s,r){this.scope=e,this.attrs=n,this.$q=i,this.bbContext=s,this.$modal=r,this.clickHandling=!1,this.scope.confirmationNeeded=this,this.scope.modalAriaType=this.attrs.modalAriaType,this.scope.nextSelector=this.attrs.nextSelector,e.$on(b,(e,t,n)=>{t===this.attrs.modalName&&this.handleButtonClick(n)}),t.on("click",e=>{this.handleButtonClick(e)}),e.$on("$destroy",()=>{t.off()}),e.$on("dismiss-confirmation",()=>{this.modalInstance&&this.modalInstance.dismiss()})}}class S{constructor(e,t,n){this.$q=e,this.bbContext=t,this.$modal=n,this.priority=100,this.restrict="A",this.scope=!0,this.compile=(e,t)=>({pre:(e,t,n)=>new C(e,t,n,this.$q,this.bbContext,this.$modal)})}}S.$inject=["$q",a.HV,c.HV,d.N7.H],o.module(h,["ngSanitize",a.e1,c.e1]).directive("bbConfirmationNeeded",["$injector",e=>e.instantiate(S)])},439393:function(e,t,n){"use strict";n.d(t,{$:function(){return w}});var i,s,r=n(793423),o=n(291146),a=n(48852),l=n(822658),c=n(429794),d=n(322484),u=n(4540),p=n(606592),m=n(168132),h=n(83722),g=n(529462),f=n(305233),b=n(247126),v=n(479442),y=n(211796),C=n(408027),S=n(776517),E=n(443400);function I(e,t){return function(n,i){t(n,i,e)}}(i=s||(s={})).Unzip="Unzip",i.Website="Website",i.Default="Default";class w{onKeydown(e){e.keyCode===p.hY&&this.isMenuVisible&&(this.closeMenu(),this.element.find("a.js-show-add-options").focus(),e.stopPropagation(),e.preventDefault())}showButton(){this.isButtonVisible=!0}hideButton(){this.isButtonVisible=!1}turnOffAlwaysShow(){this.alwaysShow=!1}toggleMenu(){if(this.showMenuOverride)this.showMenuOverride&&this.isEmptyFolder()&&this.scope.$emit("toggle-folder-by-id",this.scope.content.id);else{let e=this.isMenuVisible;e||this.$rootScope.$broadcast("close-all-add-menus"),this.isMenuVisible||this.timeout(()=>{this.element.scrollintoview({duration:250})},this.scope,0,!1),this.isMenuVisible=!e}}isForceShowAddButton(){return this.scope.forceShowAddButton}closeMenu(){this.isMenuVisible&&this.toggleMenu()}getInsertLocationData(){return this.insertLocation={parentId:this.scope.parentId(),positionBefore:this.scope.positionBefore&&this.scope.positionBefore(),positionAfter:this.scope.positionAfter&&this.scope.positionAfter(),depth:this.scope.depth(),contentId:"create",columnId:"create"}}assignPosition(){(0,S.sA)(S.Cs.CloudStorageOpened),this.closeMenu(),this.scope.$emit("bb-bbml-editor-assign-position",this.getInsertLocationData())}_addFolderToCourseOutline(e,t){return this.contentSvc.makeContentInContentTree(this.scope.rootContent&&this.scope.rootContent(),this.contextCourse.courseId,t.parentId,t.positionBefore,t.positionAfter,!0).then(n=>{let i=n.content;return i.parentId=t.parentId,i.positionBefore=t.positionBefore,i.positionAfter=t.positionAfter,i.isAvailable=!1,i.depth=t.depth,i.description="",i.title=e.name,i.contentDetail={"resource/x-bb-folder":{isFolder:!0}},i.courseId=this.contextCourse.courseId,i.contentHandler=m.courseContent.ContentHandler.Folder,i.$save().$asPromise()})}_addContentToCourseOutline(e,t,n){let i=this.contentSvc.makeContentInContentTree(this.scope.rootContent&&this.scope.rootContent(),this.contextCourse.courseId,n.parentId,n.positionBefore,n.positionAfter,!0).then(e=>e.content);return i.then(i=>(i.parentId=n.parentId,i.positionBefore=n.positionBefore,i.positionAfter=n.positionAfter,i.isAvailable=!1,i.depth=n.depth,i.description="",i.title=t.fileName,i.contentHandler=m.courseContent.ContentHandler.File,i.contentDetail={"resource/x-bb-file":{file:{fileName:t.fileName,fileLocation:t.fileLocation},fileAssociationMode:C.nEm.Embed}},e.ui&&e.ui.needUnzip&&(i.contentDetail["resource/x-bb-file"].action=s.Unzip.toString()),i.courseId=this.contextCourse.courseId,i.$asPromise()))}getTargetId(){return`addContentButton-${this.uuid}`}getButtonWrapperId(){return`addContentButtonWrapper-${this.uuid}`}getDirectionalHint(){return v.DirectionalHint.bottomCenter}isEmptyFolder(){let{content:e,folderNestedButton:t}=this.scope;return!!(e&&e.isFolder()&&e.children&&0===e.children.length&&t&&t())}constructor(e,t,n){this.scope=t,this.element=n,this.alwaysShow=!1,this.isButtonVisible=!1,this.isMobile=!1,this.isUploadMultipleFiles=!1,this.removeDefaultRenderClass=!1,this.uuid=(0,g.V)(),this.downloadFile=e=>{this.scope.$broadcast("downloadFile",e,this.positionForFiles)},this.defaultAttachHandler=(e,t,n,i,s)=>{let r=i||this.$q.defer(),o={parentId:void 0,positionBefore:"start",positionAfter:void 0,depth:0};return this.isUploadMultipleFiles=n,this.insertLocation=s||this.getInsertLocationData(),o=t.ui&&t.ui.parentId?{parentId:t.ui.parentId,positionBefore:t.ui.positionBefore,positionAfter:t.ui.positionAfter,depth:t.ui.depth}:this.insertLocation,"folder"===t.type?(this.closeMenu(),!t.ui||t.ui.depth<=E.cY.getMaxCourseFolderDepth()?this._addFolderToCourseOutline(t,o).then(e=>{t.ui={parentId:e.id,positionBefore:"start",depth:1+Number(e.depth)},r.resolve(t)},e=>{r.reject(e)}):r.resolve()):this._addContentToCourseOutline(t,e,o).then(e=>{let n=null==s?void 0:s.positionAfter;this.scope.$root.$broadcast("uploadComplete",t,n),e.$save().$then(n=>{t.ui&&t.ui.needUnzip&&(e=n),r.resolve()})}),r.promise},this.toggleAddContentMenu=()=>{this.isEmptyFolder()?this.scope.$emit("toggle-folder-by-id",this.scope.content.id):this.isMenuVisible=!this.isMenuVisible,this.timeout(()=>{this.scope.$apply()},this.scope)},this.hideAddContentMenu=e=>{null===e.target.closest(`#${this.getButtonWrapperId()}`)&&(this.isMenuVisible=!1,this.timeout(()=>{this.scope.$apply()},this.scope))},this.$q=e.get("$q"),this.$rootScope=e.get("$rootScope"),this.bbLocalize=e.get(o.serviceName),this.cloudDriveService=e.get(d.HV),this.fileUploadSettingsService=e.get(u.HV),this.timeout=e.get(f.H),this.contentSvc=e.get(c.HV),this.CourseModel=e.get(m.N7.H),this.PartnerService=e.get(h.HV),this.ultraState=e.get(b.HV),this.contextCourse=e.get(l.HV),this.scope.addMenuId=g.d(),this.showMenuOverride=this.scope.showMenuOverride,this.alwaysShow=this.scope.alwaysShow,this.currentCourse=this.contextCourse.course,this.isCloudServiceAvailablePromise=this.cloudDriveService.isCloudServiceAvailable().then(e=>this.isCloudServiceAvailable=e),this.bbLocalize.loadBundle("components/directives/add-content-button").then(()=>{let e="content";this.scope.itemIndex&&null!=this.scope.itemIndex()?e="item-index":"grades"===this.scope.contextArea?e="grades":"course-group"===this.scope.contextArea?e="group":"bbml-editor-single-file"===this.scope.contextArea&&(this.scope.addContentButton.isMenuVisible=!0),this.isMenuVisible=!1,this.addButtonAriaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.aria-label."+e+".add-button-label"});let t="components.directives.add-content-button.aria-label.content."+(this.isMobile?"yourDevice":"yourComputer");this.uploadAriaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:t}),(this.scope.itemName||this.scope.itemType)&&this.scope.$watchGroup(["itemName()","itemType()","itemIndex()"],t=>{let[n,i,s]=t;if(n||i){let t=this.scope.positionAfter?"after":"before";this.addButtonAriaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.aria-label."+e+".add-button-label-item-name-"+(i?i+"-":"")+t,params:{itemName:n,itemIndex:s},noWrap:!0,noEscape:!0})}})}),n.mouseover(()=>{this.$rootScope.$broadcast("mouseover-add-content-button"),this.scope.$apply(()=>{this.scope.addContentButton.showButton()})}),this.scope.$on("close-all-add-menus",()=>{this.showMenuOverride?this.isEmptyFolder()&&this.scope.content.ui.isOpen&&(this.scope.addContentButton.isMenuVisible=!0):this.scope.addContentButton.isMenuVisible=!1}),this.scope.showBothButtons&&this.scope.showBothButtons()||this.scope.$on("mouseover-add-content-button",()=>{this.scope.addContentButton.hideButton()}),this.scope.$on("content-item-hover",(e,t)=>{let i=()=>n.closest(".folder").is(t.element.parent(".folder")),s=()=>n.closest(".folder-contents").find("bb-add-content-button").first().is(n),r=()=>t.element.hasClass("js-parent")&&t.element.hasClass("open");this.scope.addContentButton.hideButton();let o=()=>{let e;return(e=s()?n.closest(".folder-contents").find(".js-content-div .element-list-row").first():n.closest(".js-content-div").next(".js-content-div").find(".element-list-row").first()).hasClass("element-list-row")||(e=n.next().find(".js-content-div").first().find(".element-list-row")),!!e.is(t.element)&&this.scope.addContentButton.showButton()},l=()=>{let e=n.closest(".js-content-div").find(".element-list-row").first(),s=!1;e.is(t.element)&&(s=!0),i()&&(s=!1),r()&&(s=!1),this.scope.addContentButton.isButtonVisible!==s&&(this.scope.addContentButton.isButtonVisible=s)};this.scope.showBothButtons&&this.scope.showBothButtons()?o()||l():t.relativeMousePosition===a.hU.Top?o():l()}),this.scope.$on("content-outline-hover-end",()=>{this.scope.addContentButton.hideButton()}),this.scope.$watch("alwaysShow",e=>{this.alwaysShow=e}),n.on("drop",e=>{this.closeMenu(),this.scope.$emit(r.Ei,this.scope.parentId(),this.scope.positionBefore&&this.scope.positionBefore(),this.scope.positionAfter&&this.scope.positionAfter(),this.scope.depth(),void 0,this.scope.content,r.mb.AssignDropTarget)}),this.scope.$on("$stateChangeStart",()=>{this.ultraState.includes("**.content-manage.import.**")?this.isMenuVisible=this.isEmptyFolder():this.isEmptyFolder()?this.isMenuVisible=!0:this.isMenuVisible=!1,this.timeout(()=>{this.scope.$apply()},this.scope)}),this.scope.$on(r.Qk,()=>{this.closeMenu()}),this.isMenuVisible=this.scope.showMenuOverride,null!=this.scope.showMenuOverride&&this.scope.$watch(()=>this.scope.showMenuOverride,e=>{this.scope.addContentButton.isMenuVisible=e,this.showMenuOverride=e}),this.getInsertLocationData()}}w=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([I(0,(0,y.tB)("$injector")),I(1,(0,y.tB)("scope")),I(2,(0,y.tB)("element"))],w)},444938:function(e,t,n){"use strict";n.d(t,{e:function(){return j}}),n(785106),n(788093),n(197002),n(976145),n(58717),n(10176),n(507860),n(219624),n(507168),n(311774);var i=n(464027),s=n(439393);class r extends s.${}class o extends s.${}var a=n(202784),l=n(319434),c=n(211796),d=n(675820),u=n(809226),p=n(438501);function m(e,t){return function(n,i){t(n,i,e)}}class h extends s.${initialize(){return this.$q.all({canEditUnsafeHtml:this.unsafeHtmlService.canEditUnsafeHtml(),isCloudServiceAvailable:this.isCloudServiceAvailablePromise}).then(({canEditUnsafeHtml:e,isCloudServiceAvailable:t})=>{this.canEditUnsafeHtml=e,this.isCloudServiceAvailable=t}).finally(this.initializeItems)}constructor(e,t,n){super(e,t,n),this.canEditUnsafeHtml=!1,this.isCloudServiceAvailable=!1,this.initializeItems=()=>{this.items=[{key:"addText",className:"js-add-content",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.addContent"}),icon:a.createElement(p.Notes,null),onClick:this.addTextBlock}],this.canEditUnsafeHtml&&this.items.push({key:"addHtml",className:"js-add-html",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.addHtml"}),icon:a.createElement(p.Editor,null),onClick:this.addHtmlBlock}),this.items.push({key:"addLocalFile",className:"js-add-local-file",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:`components.directives.add-content-button.${this.isMobile?"uploadFromDevice":"uploadFromComputer"}`}),icon:a.createElement(p.UploadFile,null),onClick:this.uploadLocalFile}),this.items.push({key:"browseContentCollectionFile",className:"js-browse-content-collection-file",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"course.contentCollection.browseContentCollection"}),icon:a.createElement(p.ContentCollection,null),onClick:this.browseContentCollection}),this.isCloudServiceAvailable&&this.items.push({key:"addCloudFile",className:"js-add-cloud-file",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.uploadFromCloudStorage"}),icon:a.createElement(p.UploadCloud,null),onClick:this.uploadCloudFile})},this.addTextBlock=()=>{this.scope.$emit("bb-bbml-editor-add-block",l.Pq.Text,this.getInsertLocationData())},this.addHtmlBlock=()=>{this.scope.$emit("bb-bbml-editor-add-block",l.Pq.Html,this.getInsertLocationData())},this.uploadLocalFile=()=>{this.element.find(".file-upload-button").click()},this.uploadCloudFile=()=>{this.element.find(".js-upload-from-cloud-storage-integration").click()},this.browseContentCollection=()=>{this.rteCollectionService.handleContentCollectionResponse(this.scope,this.getInsertLocationData()),this.ultraState.goPeekState("content-collection-picker",{pickerType:"File",multi:"true"})},this.focusAddButton=()=>{this.element.find("button").focus()},this.$q=e.get("$q"),this.unsafeHtmlService=e.get(d.HV),this.rteCollectionService=e.get(u.HV),this.initialize()}}h.$inject=[],h=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([m(0,(0,c.tB)("$injector")),m(1,(0,c.tB)("scope")),m(2,(0,c.tB)("element"))],h);var g=n(843432);class f extends s.${addGroup(){this.toggleMenu();let e=this.scope.positionBefore?this.scope.positionBefore():this.scope.positionAfter()+1;this.scope.createFunction(e),this.closeMenu()}}var b=n(146893);function v(e,t){return function(n,i){t(n,i,e)}}let y="addAttendance";class C extends s.${addOrRemoveAddAttendanceMenuItem(){let e=null==this.scope.showAddAttendance||!this.scope.showAddAttendance(),t=this.doesMenuItemExistByKey(y);e?this.removeMenuItemByKey(y):t||this.addAttendanceMenuItem()}doesMenuItemExistByKey(e){return this.items.some(t=>t.key===e)}removeMenuItemByKey(e){this.items=this.items.filter(t=>t.key!==e)}addAttendanceMenuItem(){this.items.push({key:y,href:this.attendanceHref,className:"doc-add-attendance",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addAttendance"}),icon:a.createElement(p.Attendance,null)})}constructor(e,t,n){super(e,t,n),this.scope=t,this.element=n;let i=n.closest("[data-base-state-name]").data("baseStateName");this.$q.all([this.ultraState.peekHref("grade-item.create",this.getInsertLocationData(),i),this.ultraState.peekHref("gradebook-item.calculation",this.getInsertLocationData(),i),this.ultraState.peekHref("attendance",null,i)]).then(e=>{this.attendanceHref=e[2],this.items=[{key:"addGradebookItem",href:e[0],className:"doc-add-grade",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addItem"}),icon:a.createElement(p.Add,null)},{key:"addCalculation",href:e[1],className:"doc-add-calc",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addCalculation"}),icon:a.createElement(p.Calculation,null)}],this.addOrRemoveAddAttendanceMenuItem()}),t.$on("always-show-time-expires",()=>{t.addContentButton.alwaysShow=!1}),t.$on("update-content-menu",()=>{this.items&&this.addOrRemoveAddAttendanceMenuItem()})}}C.$inject=[],C=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([v(0,(0,c.tB)("$injector")),v(1,(0,c.tB)("scope")),v(2,(0,c.tB)("element"))],C);var S=n(48339),E=n(521848),I=n(851484),w=n(901371),A=n(232775),k=n(717908),x=n(903110),T=n(165765);class P{getTemplateText(e){if(null==e||!(e in this.handlersAndTemplateTexts))throw Error("valid contextArea must be provided");if(null==this.handlersAndTemplateTexts[e].templateText)throw Error("No template for context area: "+e);return A.replace("<template></template>",this.handlersAndTemplateTexts[e].templateText)}getHandler(e,t,n){if(null==e||!(e in this.handlersAndTemplateTexts))throw Error("valid contextArea must be provided");return this.$injector.instantiate(this.handlersAndTemplateTexts[e].handler,{scope:t,element:n})}constructor(e){this.$injector=e,this.handlersAndTemplateTexts={assignment:{handler:r,templateText:S},attempts:{handler:o,templateText:E},"bbml-editor":{handler:h,templateText:I},"cloud-upload":{handler:g.A6,templateText:w},"course-group":{handler:f,templateText:k},"course-outline":{handler:b.Y,templateText:x},grades:{handler:C,templateText:T}}}}P.$inject=["$injector"];var D=n(313748),G=n(853321);let R="ultra.components.directives.content.buttonAddContent";class B{constructor(){this.restrict="C",this.template=D}}B.$inject=["$injector"],i.module(R,[G.e1]).directive("buttonAddContent",["$injector",e=>e.instantiate(B)]);var L=n(291146),N=n(116248),O=n(445218),M=n(19414);let $="ultra.components.directives.react-toolkit.contextual-menu";class H extends a.Component{render(){return this.props.show?a.createElement(M.ContextualMenu,{items:this.props.items,directionalHint:this.props.directionalHint,target:document.getElementById(this.props.targetId),onDismiss:this.props.dismiss,labelElementId:this.props.ariaLabelledby,analyticsId:this.props.analyticsId}):null}}i.module($,[]).component("bbUiContextualMenu",(0,O.G5)({Class:H,bindingNames:["items","targetId","show","dismiss","directionalHint"],attributes:["ariaLabelledby","analyticsId"]}));var F=n(429794),U=n(4540),V=n(83722),_=n(247126),q=n(343597),z=n(424380);let W="ultra.components.directives.bbUiIcon.small.ContentMarket";(0,q.n)(z.r,W,"bbUiIconSmallContentMarket");let j="ultra.directives.addContentButton";class Z{constructor(e,t,n){this.$injector=e,this.$rootScope=t,this.ultraState=n,this.compiled=Object.create(null),this.restrict="E",this.scope={attachHandler:"=?",disableDrag:"&?",content:"=",createFunction:"=?",hideDividerLines:"&?",rootContent:"&?",contextArea:"=",alwaysShow:"=",showAddAttendance:"&?",showBothButtons:"&?",isDocumentSaved:"&?",showMenuOverride:"=",positionBefore:"&?",positionAfter:"&?",parentId:"&",depth:"&",canCreateAllContents:"=?",canCopyImport:"=?",folderNestedButton:"&?",fileLocation:"@?",webLocation:"@?",initialUpload:"&?",primaryKey:"&?",ignoredStates:"&?",itemName:"&?",itemType:"&?",itemIndex:"&?",isButtonLocationChangable:"<?",isRenderByDefault:"&?"},this.compile=()=>(e,t)=>{let n;n=e.contextArea?e.contextArea:e.$parent.contextArea?e.$parent.contextArea:"course-outline";let i=this.$injector.instantiate(P,{});null==this.compiled[n]&&(this.compiled[n]=this.$injector.get("$compile")(i.getTemplateText(n))),e.addContentButton=i.getHandler(n,e,t),e.fileListViewId="fileListView-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.fileListViewLocalId=e.fileListViewId+"Local",this.compiled[n](e,function(e,n){t.append(e)}),this.$rootScope.$broadcast("add-content-button-ready")}}}Z.$inject=["$injector","$rootScope",_.HV,F.HV,u.HV],i.module(j,["ngAnimate",R,N.e1,L.moduleName,$,F.e1,u.e1,U.e1,V.e1,_.e1,d.e1,W]).directive("bbAddContentButton",["$injector",e=>e.instantiate(Z)])},843432:function(e,t,n){"use strict";n.d(t,{A6:function(){return l},_9:function(){return a}});var i=n(439393),s=n(793423),r=n(211796);function o(e,t){return function(n,i){t(n,i,e)}}let a="allCloudUploadsCompleteEvent";class l extends i.${constructor(e,t,n){super(e,t,n),this.cloudUploadPromises=[],this.onFilesSelectedHandler=e=>{let t=[];e.forEach(e=>{let n={id:e.id,deferred:this.$q.defer()};t.push(n.deferred),this.cloudUploadPromises.push(n)}),this.$q.all(t.map(e=>e.promise)).then(()=>{this.scope.$emit(a)},e=>{this.scope.$emit(a,e)})},this.resolveFileUploadDeferred=(e,t)=>{let n=this.cloudUploadPromises.findIndex(t=>t.id===e);return n>=0&&(t?this.cloudUploadPromises[n].deferred.reject(t):this.cloudUploadPromises[n].deferred.resolve(),this.cloudUploadPromises.splice(n,1),!0)},this.cloudUploadAttachHandler=(e,t,n,i)=>{let s=this.scope.attachHandler||this.defaultAttachHandler,r=this.$q.defer();return s(e,t,n,i).then(()=>{this.resolveFileUploadDeferred(t.ui.fileId)&&r.resolve()}),r.promise},t.$on(s.Ei,(e,t,n,i,r)=>{i===s.mb.Error?this.resolveFileUploadDeferred(t,"failed"):i===s.mb.Cancel&&this.resolveFileUploadDeferred(t)})}}l.$inject=[],l=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([o(0,(0,r.tB)("$injector")),o(1,(0,r.tB)("scope")),o(2,(0,r.tB)("element"))],l)},146893:function(e,t,n){"use strict";n.d(t,{Y:function(){return m},_:function(){return p}});var i=n(202784);n(219693);var s=n(276635),r=n(439393),o=n(793423),a=n(438501),l=n(470269),c=n(211796),d=n(776517);function u(e,t){return function(n,i){t(n,i,e)}}let p="show-cloud-upload-progress";class m extends r.${toggleOverflowMenu(){this.initContextMenuItems().then(()=>{this.toggleMenu()}).catch(()=>{})}initContextMenuItems(){let e=this.element.closest("[data-base-state-name]").data("baseStateName"),t=this.getInsertLocationData();return this.$q.all({isCloudServiceAvailable:this.isCloudServiceAvailablePromise,createHref:this.ultraState.peekHref(l.XO.CREATE_CONTENT_PEEK_PANEL,t,e),copyHref:this.ultraState.peekHref(l.XO.COPY_CONTENT_PEEK_PANEL,t,e),contentCollectionHref:this.ultraState.peekHref(l.xh.CONTENT_COLLECTION,t,e)}).then(e=>{let t=this.bbLocalize.getLocale(this.scope);this.items=[{key:"create",className:"js-create",href:e.createHref,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.create"}),icon:i.createElement(a.Add,null)},{key:"copy",className:"js-copy",href:e.copyHref,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.copy"}),icon:i.createElement(a.Duplicate,null)},{key:"upload-file",className:"js-upload-file",onClick:this.uploadFile,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.upload"}),icon:i.createElement(a.Upload,null)},{key:"upload-cloud-file",className:"js-upload-cloud-file",onClick:this.uploadCloudFile,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.importContentFromCloudStorage.title"}),icon:i.createElement(a.UploadCloud,null)},{key:"content-market",className:"js-content-market",onClick:this.openContentMarket,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.contentMarket"}),icon:i.createElement(a.ContentMarket,null)},{key:"content-collection",className:"js-content-collection",href:e.contentCollectionHref,name:this.bbLocalize.translateSync({locale:t,key:"components.directives.add-content-button.contentCollection"}),icon:i.createElement(a.ContentCollection,null)}],this.isCloudServiceAvailable||(0,s.remove)(this.items,e=>"upload-cloud-file"===e.key),this.currentCourse.canCopy()||(0,s.remove)(this.items,e=>"copy"===e.key)})}saveLocationForFileUpload(){this.scope.isButtonLocationChangable&&(this.positionForFiles=this.getInsertLocationData())}getLocationData(){let e=this.scope.rootContent(),t=this.getInsertLocationData();return this.contentSvc.getParentFolder(t.parentId,this.contextCourse.courseId,e).$asPromise().then(e=>{if(e.children){let n=""+e.children.getInsertionIndex(t.positionBefore,t.positionAfter,!0,e.hasMoreChildren);return{position:n,parentId:t.parentId,positionBefore:t.positionBefore,positionAfter:t.positionAfter,depth:t.depth}}})}constructor(e,t,n){if(super(e,t,n),this.scope=t,this.element=n,this.uploadFile=()=>{this.saveLocationForFileUpload(),this.element.find(".file-upload").click()},this.uploadCloudFile=()=>{this.saveLocationForFileUpload(),this.scope.isButtonLocationChangable&&this.scope.$emit(p,this.positionForFiles.positionAfter),this.element.find(".doc-add-media").click(),(0,d.sA)(d.Cs.CloudStorageOpened)},this.openContentMarket=()=>this.getLocationData().then(e=>{this.ultraState.goPeekState(l.cw.CONTENT_MARKET,e)}),this.initContextMenuItems(),t.$on("always-show-time-expires",()=>{this.turnOffAlwaysShow()}),t.isButtonLocationChangable&&t.$on("change-add-content-button-position",(e,t)=>{t.reopen&&!this.isMenuVisible&&this.toggleOverflowMenu()}),t.$on(o.Ei,(e,n,i)=>{if(i===o.mb.OutlineAddContentButtonFileSelected&&n===t.fileListViewLocalId){let e=this.positionForFiles||this.getInsertLocationData();this.closeMenu(),t.$emit(o.Ei,e.parentId,e.positionBefore,e.positionAfter,e.depth,n,t.content,o.mb.AssignDropTarget),this.assignPosition()}}),this.scope.isRenderByDefault&&this.scope.isRenderByDefault()){let e=this.scope.$watch("addContentButton.isMenuVisible",t=>{t&&(this.scope.addContentButton.removeDefaultRenderClass=!0,e())})}this.scope.$watch("parentId()",(e,t)=>{e!==t&&this.initContextMenuItems()})}}m.$inject=[],m=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,c.tB)("$injector")),u(1,(0,c.tB)("scope")),u(2,(0,c.tB)("element"))],m)},826055:function(e,t,n){"use strict";n.d(t,{G:function(){return i},a:function(){return s}});let i="update-state",s="course-outline.refresh-folder"},220439:function(e,t,n){"use strict";n.d(t,{e1:function(){return p}});var i=n(464027),s=n(168132),r=n(291146),o=n(817473),a=n(990126),l=n(247126),c=n(900038),d=n(759485),u=n(951248);let p="ultra.components.directives.content.contentItemIcon";class m{get iconColor(){return this.scope.showAlertIcon?"error":"primary"}constructor(e,t,n,i,r,o,a){let l;this.scope=e,this.$q=t,this.element=n,this.bbLocalize=i,this.contentIconService=r,this.ColumnModel=o,this.$state=a,this.iconName="document-blank",this.iconNameForLocalization="document-blank";let c=[],p=s.courseContent.ContentHandler,m=e.$watch(()=>e.contentColumn,()=>{var t,n,i,s,r,a,h,g,f,b;let v=e.bbContentItemIcon&&e.bbContentItemIcon.contentHandler&&e.bbContentItemIcon.contentHandler.toString();if(v)switch(this.contentIconService.matchLtiPlacementHandler(v)){case p.LtiLink.toString():{let e=null===(t=this.scope.bbContentItemIcon.contentDetail)||void 0===t?void 0:null===(n=t["resource/x-bb-blti-link"])||void 0===n?void 0:n.customIconUrl;e&&(this.customLtiIcon=d.uI(this.scope.bbContentItemIcon.contentDetail["resource/x-bb-blti-link"].customIconUrl)),l="bbContentItemIcon",c=["showAlertIcon"];break}case p.CourseLink.toString():if(e.bbContentItemIcon.contentDetail){let t=this.scope.$watch(()=>e.bbContentItemIcon.id,n=>{n&&(e.bbContentItemIcon.getLinkContentSource().$then(e=>{this.contentIconService.getIconClass(e).then(e=>{e&&(this.iconName=this.contentIconService.getIconName(e),this.iconNameForLocalization=this.contentIconService.getIconNameForLocalization(this.iconName))})}),t())})}else this.iconName=this.contentIconService.getIconName(e.bbContentItemIcon.getContentHandlerByIconUrl().iconClass),this.iconNameForLocalization=this.contentIconService.getIconNameForLocalization(this.iconName);break;case p.RusticiScorm.toString():c=[`${l="bbContentItemIcon"}.contentDetail['${v}'].gradebookItems[0].gradingColumn.gradebookCategory.id`];break;case p.LtiPlacement.toString():this.customLtiIcon=d.uI(null===(i=null===(s=this.scope.bbContentItemIcon)||void 0===s?void 0:null===(r=s.contentDetail)||void 0===r?void 0:r[`${v}`].placement)||void 0===i?void 0:i.iconUrl),l="bbContentItemIcon",c=["showAlertIcon"];break;default:c=[(l="bbContentItemIcon")+".contentHandler",l+".ui.isOpen",l+".contentDetail['"+p.File.toString()+"'].file.mimeType",l+".contentDetail['"+p.TestLink.toString()+"'].test.gradingColumn.gradebookCategory.id",l+".contentDetail['"+p.TestLink.toString()+"'].assignment.gradingColumn.gradebookCategory.id"]}else e.contentColumn&&((null===(a=e.contentColumn.gradableItemIconUrl)||void 0===a?void 0:a.includes("public/blti_icons"))?(null===(h=e.contentColumn.gradableItemIconUrl)||void 0===h?void 0:h.includes("public/blti_icons"))&&(this.customLtiIcon=d.uI(e.contentColumn.gradableItemIconUrl)):this.customLtiIcon=d.uI(null===(g=this.scope.bbContentItemIcon)||void 0===g?void 0:null===(f=g.contentDetail)||void 0===f?void 0:null===(b=f.placement)||void 0===b?void 0:b.iconUrl),c=[(l="contentColumn")+".scoreProviderHandle",l+".calculationType",l+".externalGrade",l+".visible",l+".summary.numStudentsGraded()",l+".summary.numStudentSubmissions()",l+".categoryTitle",l+".dueDate"]);let y=e.$watchGroup(c,()=>{let t=e[l];t&&(t instanceof this.ColumnModel?this.contentIconService.getColumnIconClass(t):this.contentIconService.getIconClass(t)).then(e=>{e&&(this.iconName=this.contentIconService.getIconName(e),this.iconNameForLocalization=this.contentIconService.getIconNameForLocalization(this.iconName));let n=p.Folder.isEqualTo(t.contentHandler),i=p.Unknown.isEqualTo(t.contentHandler),s=p.File.isEqualTo(t.contentHandler),r=p.LtiLink.isEqualTo(t.contentHandler),a=u.ddT.isLtiPlacement(t.contentHandler),l=p.RusticiScorm.isEqualTo(t.contentHandler),c=p.TestLink.isEqualTo(t.contentHandler),d=t instanceof o;n||i||d||s||r||a||l||c||y(),m()})})})}}m.$inject=["scope","$q","element",r.serviceName,a.HV,s.Rp.serviceName,l.HV];class h{constructor(e){this.$injector=e,this.restrict="A",this.template=c,this.scope={bbContentItemIcon:"=",contentColumn:"=",showAlertIcon:"="},this.link=(e,t)=>{e.contentItemIcon=this.$injector.instantiate(m,{scope:e,element:t})}}}h.$inject=["$injector"],i.module(p,[o.e1,a.e1,l.e1]).directive("bbContentItemIcon",["$injector",e=>e.instantiate(h)])},48852:function(e,t,n){"use strict";n.d(t,{e1:function(){return a},hU:function(){return s}});var i,s,r=n(464027),o=n(305233);let a="ultra.directives.contentItemMouseover";(i=s||(s={})).Top="TOP",i.Bottom="BOTTOM",i.Default="DEFAULT";class l{handleMousemove(e){(null==this.elementOffset||null==this.elementHeight)&&this.recalculatePosition(),this.lastTime=Date.now(),e.pageY-this.elementOffset>this.elementHeight/2?(this.lastPosition!==s.Bottom&&this.broadcastPosition(s.Bottom),this.lastPosition=s.Bottom):(this.lastPosition!==s.Top&&this.broadcastPosition(s.Top),this.lastPosition=s.Top)}broadcastPosition(e){this.scope.$emit("content-item-mouseover",{element:this.element,relativeMousePosition:e})}recalculatePosition(){this.elementHeight=this.element.outerHeight(),this.elementOffset=this.element.offset().top}constructor(e,t,n){this.scope=e,this.element=t,this.timeout=n,this.lastPosition=s.Default,this.lastTime=0,t.mouseover(()=>{this.recalculatePosition()}),t.mousemove(e=>{Date.now()-this.lastTime>1e3?(this.timeout.cancel(this.lastMousemoveTimeout),this.handleMousemove(e)):(this.timeout.cancel(this.lastMousemoveTimeout),this.lastMousemoveTimeout=this.timeout(()=>{this.handleMousemove(e)},this.scope,100,!1))}),t.mouseleave(()=>{this.timeout.cancel(this.lastMousemoveTimeout),this.lastPosition=s.Default}),e.$on("content-outline-hover-end",()=>{this.timeout.cancel(this.lastMousemoveTimeout),this.lastPosition=s.Default})}}l.$inject=["scope","element",o.H];class c{constructor(e){this.$injector=e,this.restrict="A",this.scope={canCreate:"&"},this.link=(e,t)=>{e.canCreate&&e.canCreate()&&(e.contentItemMouseover=this.$injector.instantiate(l,{scope:e,element:t}))}}}c.$inject=["$injector"],r.module(a,[o.e]).directive("bbContentItemMouseover",["$injector",e=>e.instantiate(c)])},288092:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(168132),s=n(211796),r=n(136742),o=n(291146),a=n(512923),l=n(247126),c=n(822658),d=n(763674),u=n(408027),p=n(276635);function m(e,t){return function(n,i){t(n,i,e)}}class h{getConditions(e,t,n){var i,s;this.content=e;let r=null===(i=e.adaptiveReleaseRules)||void 0===i?void 0:i.rules;if((null==r?void 0:r.length)||e.isForcedSequenceModule()){if((null==r?void 0:null===(s=r[0])||void 0===s?void 0:s.criteria)&&(this.allCriteria=r[0].criteria),this.getACLCriteria()?this.setACLCondition():this.aclToolTips=null,this.getPerformanceCriteria()?this.setPerformanceCondition(t,n):this.performanceToolTips=null,this.getDateCriteria()?this.setDateCondition():this.dateToolTips=null,this.contextCourseMembership.courseMembership.isStudentMembership()&&e.isForcedSequenceItem()){let t=0===e.position;this.forcedSequenceTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:t?"components.directives.content-item-base.conditionalRelease.student-forced-sequence-first-item-tooltip":"components.directives.content-item-base.conditionalRelease.student-forced-sequence-item-tooltip",noWrap:!0,noEscape:!0}),this.updateTooltipScope()}else this.forcedSequenceTips=null}}getConditionDescription(){let e=!!this.getACLCriteria(),t=!!this.getPerformanceCriteria(),n=!!this.getDateCriteria(),i=this.contextCourse.course.isOrganization,s=[[e,i?"organization-membership":"course-membership"],[n,"date"],[t,"performance"]].filter(e=>!!e[0]).map(e=>`components.directives.content-item-base.conditionalRelease.conditionDescriptions.${e[1]}`);if(0===s.length)return;let r=this.localizeService.getLocale(this.scope),o=s.map((e,t)=>this.localizeService.translateSync({locale:r,key:`${e}${0===t&&"-capitalized"||""}`}));return this.localizeService.formatItemsSync(o,o.length,null,this.scope,!1,{noWrap:!0})}getPerformanceCriteria(){return this.getCriteriaByType(u.faN.Grade)||this.getCriteriaByType(u.faN.GradePercentage)}getDateCriteria(){return this.getCriteriaByType(u.faN.Date)}getACLCriteria(){return this.getCriteriaByType(u.faN.ACL)}getCriteriaByType(e){return this.allCriteria&&this.allCriteria.find(t=>t.type===e)}setPerformanceCondition(e,t){this.gradeCriteria=this.getPerformanceCriteria();let n=this.gradeCriteria&&this.gradeCriteria.minScore,i=this.gradeCriteria&&this.gradeCriteria.maxScore,s=this.gradeCriteria&&this.gradeCriteria.gradeColumnId,r="",o="";if(!s||t){let e=`components.directives.content-item-base.conditionalRelease.${this.role()}-missing-column-error`;this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:e,noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!0,this.updateTooltipScope();return}this.courseModel.$new(this.courseId||this.content.courseId).gradebook.columns.$find(s).$allow([403]).$then(t=>{if(t.$response&&403===t.$response.status){this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.content-item-base.conditionalRelease.student-missing-column-error",noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!0,this.updateTooltipScope();return}let s=`components.directives.content-item-base.conditionalRelease.${this.role()}-lock-tooltip`;void 0===i?s+="-common":n===i?s+="-equal":s+="-custom";let a=e||t&&t.columnName;this.schemaService.loadSchemas(this.courseId).then(e=>{let l=e&&e.find(e=>e.id===t.gradingSchemaId)||{};this.gradeCriteria&&"Grade_Range"===this.gradeCriteria.type&&(void 0!==i||l.scaleType===u.aQo.Score||l.scaleType===u.aQo.Complete)&&(r=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),params:{score:n||0},key:"components.directives.content-item-base.conditionalRelease.point.plural",noWrap:!0,noEscape:!0}),o=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),params:{score:i||t.possible},key:"components.directives.content-item-base.conditionalRelease.point.plural",noWrap:!0,noEscape:!0})),this.gradeCriteria&&"Grade_Range_Percentage"===this.gradeCriteria.type&&(void 0!==i||l.scaleType===u.aQo.Percent?(r=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),params:{score:n||0},key:"components.directives.content-item-base.conditionalRelease.percentage",noWrap:!0,noEscape:!0}),o=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),params:{score:i||t.possible},key:"components.directives.content-item-base.conditionalRelease.percentage",noWrap:!0,noEscape:!0})):l.scaleType===u.aQo.Tabular&&(l.symbols.sort((e,t)=>e.absoluteTranslation-t.absoluteTranslation),l.symbols.forEach(e=>{e.absoluteTranslation>=n&&(r=n=e.symbol)}))),this.getPerformanceToolTips(s,r,o,a)})})}setDateCondition(){if(this.dateCriteria=this.getDateCriteria(),this.dateCriteria){let e=null;this.dateCriteria.start&&this.dateCriteria.end?e="both":this.dateCriteria.start?e="showon":this.dateCriteria.end&&(e="hideafter");let t=`components.directives.content-item-base.conditionalRelease.${this.role()}-${e}-date-tooltip`;this.dateToolTips=e&&this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:t,params:{showon:new Date(this.dateCriteria.start),hideafter:new Date(this.dateCriteria.end)},noWrap:!0,noEscape:!0}),this.updateTooltipScope()}}setACLCondition(){this.aclCriteria=this.getACLCriteria(),this.aclCriteria&&(this.aclToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.content-item-base.conditionalRelease.acl-tooltip",noWrap:!0,noEscape:!0}),this.updateTooltipScope())}getPerformanceToolTips(e,t,n,i,s=""){this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:e,params:{minScore:t,maxScore:n,title:i},noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!1,this.updateTooltipScope()}updateTooltipScope(){if(angular.isUndefined(this.tooltipScope)&&(this.tooltipScope=this.scope.$new(!0)),this.tooltipScope.items=[],this.aclToolTips&&this.tooltipScope.items.push(this.aclToolTips),this.performanceToolTips&&(this.tooltipScope.items.push(this.performanceToolTips),this.isPerformanceConditionInvalid)){this.tooltips=this.performanceToolTips;return}this.dateToolTips&&this.tooltipScope.items.push(this.dateToolTips),this.forcedSequenceTips&&this.tooltipScope.items.push(this.forcedSequenceTips),this.tooltips=this.tooltipScope.items.join(" ")}getConditionalReleaseComplexTooltipTemplate(){return r.B("conditional-release-tooltip")}constructor(e,t,n,i,s,r,o){this.localizeService=e,this.schemaService=t,this.courseModel=n,this.contextCourse=i,this.contextCourseMembership=s,this.scope=o,this.isPerformanceConditionInvalid=!1,this.role=(0,p.memoize)(()=>this.contextCourseMembership.courseMembership&&this.contextCourseMembership.courseMembership.isStudentMembership()?"student":"instructor"),this.courseId=i.courseId?i.courseId:r.params.courseId}}h=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([m(0,(0,s.tB)(o.serviceName)),m(1,(0,s.tB)(a.HV)),m(2,(0,s.tB)(i.N7.H)),m(3,(0,s.tB)(c.HV)),m(4,(0,s.tB)(d.HV)),m(5,(0,s.tB)(l.HV)),m(6,(0,s.tB)("scope"))],h)},453835:function(e,t,n){"use strict";n.d(t,{e1:function(){return tT}});var i=n(464027),s=n(444938),r=n(291146);n(621865),n(483291),n(614606),n(18854),n(733638),n(397174),n(145668),n(224470),n(578187),n(173631),n(280139),n(213644),n(579805);var o=n(276635),a=n(916415),l=n(866688),c=n(333099),d=n(309085),u=n(993795),p=n(429794);n(939352),n(692330),n(537125),n(272058);var m=n(952966),h=n(247126),g=n(822658),f=n(350383),b=n(856055),v=n(776517);let y="ultra.components.directives.content.contentItem.contentItemType.contentItemFolder";class C{toggleFolder(){if(!this.scope.content.ui.isOpen){let e={type:v.Cs.FolderOpened,status:v.rJ.Success,contentId:this.scope.content.id};(0,v.Db)(e)}this.scope.$emit("toggle-folder",this.scope.content)}shouldAlignMiddle(){let e=this.scope.content;return!(e.canViewAsInstructor()||e.description||e.isVisible()&&e.adaptiveReleaseRules)}constructor(e,t,n){this.scope=e,this.element=t,this.attrs=n}}C.$inject=["scope","element","attrs"];class S{constructor(e){this.$injector=e,this.restrict="E",this.template=b,this.scope=!1,this.link=(e,t,n)=>{e.contentItemFolder=this.$injector.instantiate(C,{scope:e,element:t,attrs:n})}}}S.$inject=["$injector"],i.module(y,[]).directive("bbContentItemFolder",["$injector",e=>e.instantiate(S)]);var E=n(168132),I=n(915121),w=n(763674),A=n(826201);let k="ultra.components.directives.content.contentItem.contentItemType.contentItemLtilaunch";class x{ltiLaunch(){if(this.scope.content.getContentDisplay().isLtiLink())this.notifyMobileAppOnItemClick(),this.ltiService.ltiLaunch({courseId:this.scope.content.courseId,contentId:this.scope.content.id,content:this.scope.content,showPreLaunchPanel:!0});else throw Error("Attempted to LTI launch a non-LTI content item. "+this.scope.content.contentHandler.toString())}notifyMobileAppOnItemClick(){let e={type:v.Cs.LTILaunched,status:v.rJ.Success,contentId:this.scope.content.id,contentTitle:this.scope.content.title,contentType:v.Pl.LTIConnection};(0,v.Db)(e)}ltiLinkNeedsApproval(){let e=this.ltiService.getDomainConfigStatusType(this.scope.content);return E.ov.gM.NeedsApproval===e}constructor(e,t,n){this.scope=e,this.ltiService=t,this.contextCourseMembership=n}}x.$inject=["scope",I.HV,w.HV];class T{constructor(e){this.$injector=e,this.restrict="E",this.template=A,this.scope=!1,this.link=(e,t,n)=>{e.contentItemLtiLaunch=this.$injector.instantiate(x,{scope:e,element:t,attrs:n})}}}T.$inject=["$injector"],i.module(k,[I.e1,w.e1]).directive("bbContentItemLtilaunch",["$injector",e=>e.instantiate(T)]);var P=n(815372),D=n(204842);let G="ultra.components.directives.content.contentItem.contentItemType.contentItemScormlaunch";class R{scormLaunch(){if(this.scope.content.isScorm())this.scormService.scormLaunch({courseId:this.scope.content.courseId,contentId:this.scope.content.id,content:this.scope.content,showPreLaunchPanel:!0});else throw Error("Attempted to launch a non-SCORM content item. "+this.scope.content.contentHandler.toString())}constructor(e,t){this.scope=e,this.scormService=t}}R.$inject=["scope",P.HV];class B{constructor(e){this.$injector=e,this.restrict="E",this.template=D,this.scope=!1,this.link=(e,t,n)=>{e.contentItemScormLaunch=this.$injector.instantiate(R,{scope:e,element:t,attrs:n})}}}B.$inject=["$injector"],i.module(G,[P.e1]).directive("bbContentItemScormlaunch",["$injector",e=>e.instantiate(B)]);var L=n(570466);let N="ultra.components.directives.content.contentItem.contentItemType.contentItemPage";class O{shouldAlignMiddle(){return!this.scope.content.canViewAsInstructor()}constructor(e){this.scope=e}}O.$inject=["scope"];class M{constructor(e){this.$injector=e,this.restrict="E",this.template=L,this.scope=!1,this.link=(e,t,n)=>{e.contentItemPage=this.$injector.instantiate(O,{scope:e,element:t,attrs:n})}}}M.$inject=["$injector"],i.module(N,[]).directive("bbContentItemPage",["$injector",e=>e.instantiate(M)]);var $=n(319434),H=n(211796),F=n(470269),U=n(943383),V=n(426477),_=n(343597),q=n(942026);let z="ultra.components.directives.bbUiIcon.small.ProctorShield";(0,_.n)(q.x,z,"bbUiIconSmallProctorShield");var W=n(408027);function j(e,t){return function(n,i){t(n,i,e)}}let Z="ultra.components.directives.content.contentItem.contentItemCourseOutline";class K{get canOpenConditionalRelease(){var e,t,n;return!!(null===(e=this.scope.content)||void 0===e?void 0:null===(t=e.permissions)||void 0===t?void 0:null===(n=t.adaptiveRelease)||void 0===n?void 0:n.view)}shouldAlignMiddle(){let e=this.scope.content;return!(e.canViewAsInstructor()||e.description||e.isVisible()&&e.adaptiveReleaseRules)}openConditionalRelease(){if(this.isCourseCompletedAndInInstructorView())return;let e=this.scope.content.id;this.scope.content&&this.scope.content.contentHandler&&this.scope.content.contentDetail&&E.courseContent.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.getLinkContentSource().$then(t=>{e=t.id}),this.ultraState.goPeekState(F.XO.CONDITIONAL_RELEASE_PEEK_PANEL,{contentId:e})}isCourseCompletedAndInInstructorView(){var e;return(null===(e=this.currentCourseService.course)||void 0===e?void 0:e.isComplete())&&this.scope.content.canViewAsInstructor()}displayProctoredTag(){let e=this.scope.content.getProctoringServiceHandle(),t=this.scope.content.isSecureBrowserRequiredToTake(),n=e&&e!==V.j;return t||n}constructor(e,t,n,i,s){this.scope=e,this.entitlementService=t,this.proctoringService=n,this.ultraState=i,this.currentCourseService=s,this.customCategory="",this.entitlementService.hasCourseEntitlement($.eo.ModifyContent,this.scope.content.courseId).then(e=>{this.entitledToModifyContent=e})}}K=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([j(0,(0,H.tB)("scope")),j(1,(0,H.tB)(f.HV)),j(2,(0,H.tB)(m.HV)),j(3,(0,H.tB)(h.HV)),j(4,(0,H.tB)(g.HV))],K);class X{constructor(e){this.$injector=e,this.restrict="E",this.template=U,this.scope=!1,this.link=e=>{if(e.contentItemCourseOutline=this.$injector.instantiate(K,{scope:e}),e.content.getAssociatedGradingColumn()){let t=e.content.getAssociatedGradingColumn().gradebookCategory;t&&!t.isUserDefined?(e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description."+t.title,e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title."+t.title):(e.contentItemCourseOutline.customCategory=t&&t.title,e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description.custom",e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title.custom")}else e.contentItemBase.courseLinkContentHandler.isEqualTo(e.content.contentHandler)&&(e.contentItemCourseOutline.groupAssessmentFtueKey=`components.directives.content-item-base.group-assessment-description.${W.bu3.Discussion}`,e.contentItemCourseOutline.groupAssessmentFtueTitleKey=`components.directives.content-item-base.group-assessment-title.${W.bu3.Discussion}`)}}}X.$inject=["$injector"],i.module(Z,[y,k,N,G,m.e1,h.e1,g.e1,z]).directive("bbContentItemCourseOutline",["$injector",e=>e.instantiate(X)]);var Y=n(763225);let Q="ultra.components.directives.content.contentItem.contentItemEngagementOutline";class J{get canOpenConditionalRelease(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)}openConditionalRelease(){this.isCourseCompletedAndInInstructorView()||this.ultraState.goPeekState(F.XO.CONDITIONAL_RELEASE_PEEK_PANEL,{contentId:this.scope.content.id})}isCourseCompletedAndInInstructorView(){return!this.scope.content.canEdit()&&this.scope.content.canViewAsInstructor()}isDiscussionCreatedByStudent(){var e;let t=!1,n=null===(e=this.scope.content.contentDetail)||void 0===e?void 0:e["resource/x-bb-forumlink"];return n&&(t=n.isDiscussionCreatedByStudent),!!t}constructor(e,t,n){this.scope=e,this.entitlementService=t,this.ultraState=n,this.entitlementService.hasCourseEntitlement($.eo.ModifyContent,this.scope.content.courseId).then(e=>{this.entitledToModifyContent=e})}}J.$inject=["scope",f.HV,h.HV];class ee{constructor(e){this.$injector=e,this.restrict="E",this.template=Y,this.scope=!1,this.link=e=>{e.contentItemEngagementOutline=this.$injector.instantiate(J,{scope:e})}}}ee.$inject=["$injector"],i.module(Q,[y,h.e1]).directive("bbContentItemEngagementOutline",["$injector",e=>e.instantiate(ee)]);var et=n(3870),en=n(202784),ei=n(445218),es=n(188505),er=n(438501);let eo="ultra.components.directives.content.contentItem.contentItemType.contentItemPeerAssessment.tooltip";class ea extends en.Component{render(){return en.createElement(es.AnalyticsTooltip,{placement:"top",title:this.props.tooltipTitle,"aria-label":this.props.tooltipTitle,analyticsId:"components.directives.content-item-base.content-item-peer-assessment.tooltip.button"},en.createElement("button",{className:"peer-review-info-tooltip"},en.createElement(er.Information,null)))}}i.module(eo,[]).component("bbUiContentItemPeerAssessmentTooltip",(0,ei.G5)({Class:ea,bindingNames:["tooltipTitle"]}));var el=n(132780);function ec(e,t){return function(n,i){t(n,i,e)}}let ed="ultra.components.directives.content.contentItem.contentItemType.contentItemPeerAssessment",eu=class{$onInit(){var e;this.$scope.contentItemPeerAssessment=this,$.GQ.TestLink.isEqualTo(null===(e=this.content)||void 0===e?void 0:e.contentHandler)?this.peerReviewService.getOrCreatePeerContentFromContent(this.content).then(e=>{this.peerReviewContentObject=e,this.isInitialized=!0}):this.isInitialized=!0}getTooltipMessage(){return this.localize.translateSync({key:"components.directives.content-item-base.content-item-peer-assessment.peer-review-information-tooltip",locale:this.localize.getLocale(this.$scope)})}get peerReviewsPerStudent(){var e,t;return null!==(t=null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.numOfPeerReviewsToComplete)&&void 0!==t?t:0}get peerReviewDueDate(){var e;return null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.peerReviewDueDate}get isPeerGrading(){var e,t;return null!==(t=null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.peerGrading)&&void 0!==t&&t}get isPeerGradingConfigured(){var e,t;return null!==(t=null===(e=this.peerReviewContentObject)||void 0===e?void 0:e.isPeerGradingConfigured)&&void 0!==t&&t}constructor(e,t,n,i){this.$scope=e,this.contextCourseMembership=t,this.peerReviewService=n,this.localize=i}};eu=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(0,a.wA)({moduleName:ed,componentName:"bbContentItemPeerAssessment",bindings:{content:"<"},template:el,requireModules:[r.moduleName,et.e1,eo]}),ec(0,(0,H.tB)("$scope")),ec(1,(0,H.tB)(w.HV)),ec(2,(0,H.tB)(et.HV)),ec(3,(0,H.tB)(r.serviceName))],eu);var ep=n(501),em=n(506462),eh=n(22221),eg=n(910741),ef=n(442424),eb=n(793423),ev=n(708678),ey=n(335920),eC=n(677076),eS=n(305233),eE=n(996159),eI=n(108404),ew=n(867734),eA=n(220439),ek=n(863608),ex=n(456654),eT=n(951248);let eP="ultra.directives.webLinkItem";class eD{constructor(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"=",aria:"=?",tabbable:"=?"},this.template=ex,this.link=(e,t)=>{let n=e.$watch("targetContent.contentHandler",t=>{null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())});!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then(()=>{e.content.description=e.targetContent.description})),e.ariaDescribedBy="content-item-icon-"+e.content.id,e.content.ui.hasIndicator&&(e.ariaDescribedBy+=" activity-indicator-"+e.content.id),eT.AaE.isNotAccessibleButVisibleForcedSequenceItem(e.content)?(e.aria=!0,e.tabbable=!0):(e.aria=!1,e.tabbable=!1)}}}eD.$inject=[E.N7.H],i.module(eP,[]).directive("bbWebLinkItem",["$injector",e=>e.instantiate(eD)]);var eG=n(847192),eR=n(539210),eB=n(512923),eL=n(963341),eN=n(451374),eO=n(29163),eM=n(288092),e$=n(606592),eH=n(775366),eF=n(458733);let eU="ultra.features.course.outline.review-state-icon",eV={Class:eF.Ts,bindingNames:["afterItemState","beforeItemState","contentId","courseId","hasAutomaticReviewStateTransition","onReviewStateIconClick"],renderLocalized:!0,withProvider:!0};i.module(eU,[r.moduleName]).component("bbReviewStateIcon",(0,ei.G5)(eV));let e_=(e,t)=>{t?e.$broadcast("refresh-items",t):e.$broadcast("refresh-items")},eq=(e,t)=>{e.$on("refresh-items",t)},ez=(e,t)=>{e.$on("close-scorm-launch-frame",t)},eW=(e,t)=>{e.content.$fetch().$asPromise().then(n=>{n===e.content?e_(e,t):e.content=n})};var ej=n(826055),eZ=n(810309),eK=n(118717);let eX="ultra.course.content.outline.react.contentitem.description",eY={Class:eF.uE,renderLocalized:!0,withProvider:!0,bindingNames:["description"]};i.module(eX,[r.moduleName]).component("bbCourseContentItemDescription",(0,ei.G5)(eY));var eQ=n(625506);function eJ(e,t){return function(n,i){t(n,i,e)}}let e0="ultra.directives.contentItemBase",e1="base-content-item";class e2{get canDownload(){return this.scope.content.getContentDisplay().canDownload()}get contentReviewState(){return this.scope.content.state}set contentReviewState(e){e&&this.scope.content&&(this.scope.content.state=e)}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({contentReviewState:eT.Ys.contentReviewState.getContentReviewStateForContextUser(e,this.scope.content.id),courseProgressConfiguration:eT.Ys.courseProgress.getCourseProgressConfiguration(e,this.courseId)}),e=>(0,eK.DE)({updateContentReviewState:eT.Nwg.contentReviewState.persistContentReviewState,retrieveCourseProgressConfiguration:eT.Nwg.courseProgress.loadCourseProgressConfiguration},e))(this);this.scope.$on("$destroy",e)}isEngagementOutline(){return"discussions"===this.scope.contextArea}getDescription(){return this.scope.content.systemGeneratedLocalizableDescription?this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:this.scope.content.systemGeneratedLocalizableDescription.languageKey}):this.scope.content.description}getAriaDescribedBy(){let e="content-item-icon-"+this.scope.content.id;return this.scope.content.ui.hasIndicator&&(e+=" activity-indicator-"+this.scope.content.id),e}getDeleteConfirmationKeyAndShowType(){return this.contentService.generateDeleteConfirmationKey(this.scope.content,this.scope.contextArea).then(e=>({confirmationKey:this.scope.content.ui.deleteConfirmationKey,showType:this.scope.content.ui.modalShowType}))}deleteContent(){if(!E.courseContent.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler))return this._deleteContentAndBroadcastUpdateCRTooltip();this.scope.content.getLinkContentSource().$then(e=>{var t;let n=null==e?void 0:null===(t=e.contentHandler)||void 0===t?void 0:t.toString();return W.DXv.Discussion===n?this._deleteContent(e):this._deleteContentAndBroadcastUpdateCRTooltip()})}_deleteContentAndBroadcastUpdateCRTooltip(){return this._deleteContent(this.scope.content).then(()=>{this.$rootScope.$broadcast("bb-update-CR-tooltip",this.scope.content.getAssociatedGradingColumn(),"",!0)})}async _deleteContent(e){let t=await (0,eT.gUR)(e.courseId,e.id);t?e.getSoftLinks().$asPromise().then(t=>{t.length?this.$q.all(t.map(t=>this.CourseModel.$new(e.courseId).contents.$new(t.courseContent).$fetch().$asPromise().then(e=>{this.$rootScope.$broadcast("deleteContent",e,!1)}))).then(()=>{this.$rootScope.$broadcast("deleteContent",e)}):this.$rootScope.$broadcast("deleteContent",e)}):this.$rootScope.$broadcast("deleteContent",e);let n=this.element.closest(".js-content-div"),i=n.next(".js-content-div");if(i.length>0)i.find(".js-content-item-base").first().find(".content-title").focus();else{let e=n.prev(".js-content-div");if(e.length>0)e.find(".js-content-item-base").first().find(".content-title").focus();else{let e=n.closest(".folder");e.length>0?e.find(".js-content-item-base").first().find(".content-title").focus():this.timeoutService(()=>{eQ(".js-create").focus()},this.scope.$root,0,!1)}}}hasSupportedConversation(){return!!this.scope.content.hasConversation()&&ew.dI.create(this.scope.content).supportsConversations()}shouldShowAlertIcon(){return this.isLate||this.scope.content.canViewAsInstructor()&&this.isUnlaunchableLtiLink()}shouldShowDiscussionAnalytics(){return this.scope.content.contentHandler&&$.GQ.Discussion.isEqualTo(ew.dI.create(this.scope.content).viewHandler())}shouldShowScormAnalysisReport(){return this.scope.content&&this.entitlementService.isEntitled(eR.SE.FullGradebookAccess,this.scope.content.courseId||this.courseId)&&this.scope.content.isScorm()&&this.scope.content.hasReport()}getContentProgressRoute(){var e;let t=!!(null===(e=this.courseProgressConfiguration)||void 0===e?void 0:e.progressTrackingEnabled),n=t&&this.entitlementService.isEntitled(eF.NT.ViewProgressInformation,this.scope.content.courseId||this.courseId);if(n)return ew.dI.create(this.scope.content).getContentProgressRoute()}isUnlaunchableLtiLink(){return this.scope.content.id&&this.scope.content.getContentDisplay().isLtiLink()&&(!this.scope.content.getContentDisplay().isXplorLtiLink()&&!this.ltiService.getLaunchLinkFromContent(this.scope.content)||void 0!==this.ltiService.placementExists(this.scope.content)&&!this.ltiService.placementExists(this.scope.content))}hasViewB2Entitlement(){this.entitlementService.hasSystemEntitlement($.dF.ViewBuildingBlock).then(e=>this.canViewB2=e)}hasLTIToolConfigurationEntitlement(){return this.canViewB2}isExcludedOrDeletedLtiToolProvider(){let e=this.ltiService.getDomainConfigStatusType(this.scope.content);return this.scope.content.id&&this.scope.content.getContentDisplay().isLtiLink()&&(void 0!==this.ltiService.ltiToolProviderExists(this.scope.content)&&!this.ltiService.ltiToolProviderExists(this.scope.content)||E.ov.gM.Excluded===e)}showVisibility(){return!this.isUnlaunchableLtiLink()&&!this.scope.hideVisibilitySelector}usesEditButton(){let e=this.scope.content.getContentDisplay();return e.usesEditButton()&&e.canUseEditButton()}openEditContentPanel(){this.ultraState.goPeekState(this.scope.content.getContentDisplay().getEditState(),this.scope.content.getContentDisplay().getEditStateParams())}updateContentVisibility(){return this.targetContent&&this.scope.content?(this.targetContent.applyAvailabilitySettings(this.scope.content),this.updateVisibilityImpl(this.targetContent).then(()=>this.updateVisibilityImpl(this.scope.content))):this.scope.content?this.updateVisibilityImpl(this.scope.content):this.$q.resolve()}updateVisibilityImpl(e){e.visibility=this.contentService.determineVisibility(e.isAvailable);let t=["isAvailable","isPartiallyVisible","adaptiveReleaseRules"],n=e.getAssociatedGradingColumn();return n&&(n.visible=e.isAvailable,t.push("contentDetail")),e.withParams({fields:"id"}).$save(t).$asPromise().then(()=>{this.$rootScope.$broadcast("content-update",e)})}updateAlly(){this.canShowAlly&&this.allyService.update(this.scope,this.scope.content.id,this.allyService.getXythosIdFromContentItem(this.scope.content))}getOverflowMenu(){let e=[{icon:"draw",labelKey:"global.edit",show:()=>{var e,t;let n=this.isGettingConfirmationOptions?this.lastIsEditButtonShow:this.usesEditButton();return this.scope.content.isLtiLink()&&(null===(e=this.scope.content.contentDetail)||void 0===e?void 0:null===(t=e[this.contentHandler])||void 0===t?void 0:t.itemOrigin)===eT.fq8.CloudDocument&&(n=this.showEditButtonFromLTILink()&&this.scope.content.canViewAsInstructor()),this.lastIsEditButtonShow=n,n},onClick:this.openEditContentPanel.bind(this)},{icon:"conversation",labelKey:"components.directives.content-item-base.overflow-menu.open-conversation",show:this.hasSupportedConversation.bind(this),onClick:()=>{this.ultraState.goPeekState("conversations",{courseId:this.scope.content.courseId,contentId:this.scope.content.id})}},{icon:"beast-analytics",labelKey:"components.directives.content-item-base.overflow-menu.student-activity",show:()=>this.displayTelemetryUserActivity&&!this.isAnonymouslyGraded(),onClick:()=>{this.ultraState.goPeekState(F.vs.CONTENT_ACTIVITY_IN_DETAIL,{contentId:this.scope.content.id})}},{icon:"beast-analytics",uniqueId:"scorm-analytics-report",labelKey:"components.directives.content-item-base.overflow-menu.view-analytics",show:()=>this.shouldShowScormAnalysisReport()&&!this.contextCourseMembership.isStudentMembership(),onClick:()=>{this.ultraState.goPeekState("scorm-analytics-report",{courseId:this.scope.content.courseId,contentId:this.scope.content.id})}},{icon:"beast-analytics",uniqueId:"discussion-insights",labelKey:"components.directives.content-item-base.overflow-menu.student-activity",show:()=>this.displayTelemetryDiscussionActivity,onClick:()=>{let e=this.scope.content.contentDetail["resource/x-bb-courselink"]?this.scope.content.contentDetail["resource/x-bb-courselink"].linkSourceId:this.scope.content.id;this.ultraState.goPeekState(F.Jy.DISCUSSION_VIEW_WITH_GRADING,{contentId:e,forumContentId:this.scope.content.id,view:eH.Z.StudentActivity})}},{icon:"question-analysis",labelKey:"components.directives.content-item-base.overflow-menu.question-analysis",show:()=>this.canViewQuestionAnalysis&&this.scope.content.isQuestionAnalysisAvailable(),onClick:()=>{this.ultraState.goPeekState("question-analysis.report",{qaContentId:this.scope.content.id})}},{icon:"class-pulse-future",uniqueId:"content-progress",labelKey:this.contextCourse.course.isOrganization?"components.directives.content-item-base.overflow-menu.content-progress-org":"components.directives.content-item-base.overflow-menu.content-progress",show:()=>void 0!==this.getContentProgressRoute(),onClick:()=>{let e=this.getContentProgressRoute();void 0!==e&&this.ultraState.goPeekState(e.stateName,e.args)}},{icon:"trash",labelKey:"global.delete",show:()=>this.scope.content.canDelete(),onClick:this.deleteContent.bind(this),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>(this.isGettingConfirmationOptions=!0,this.getDeleteConfirmationKeyAndShowType().then(e=>{let t=e.confirmationKey.replace(/^resource\//,"");return this.isGettingConfirmationOptions=!1,this.$q.when(eL.Hz(t))}))}},{icon:"download",labelKey:this.canShowAlly?"ally.context_menu.download_original_file":"global.download",show:()=>this.canDownload,onClick:()=>{(0,v.sA)(v.Cs.DownloadLinkClicked),window.open(this.scope.content.getContentDisplay().contentUrl(),"_blank"),this.automaticallyUpdateContentReviewState(this.scope.content)}},{labelKey:"ally.context_menu.view_accessibility_score",icon:"ally-indicator-unscored",show:()=>this.canShowAlly&&this.isAllyInstructor,onClick:()=>{},additionalAttributes:{"data-ally-show":"instructorfeedback","data-ally-content-ref":this.scope.content.id,"data-ally-invoke":"instructorfeedback",style:"display:none;",onkeydown:`(function(e) {
              if (e.keyCode === ${e$.K5} || e.keyCode === ${e$.L_}) {
                $(e.target).closest("li").click();
              }
              })(event)`}},{icon:"ally-alt-formats",labelKey:"ally.context_menu.download_alternative_formats",show:()=>this.canShowAlly&&this.canDownload,onClick:()=>{},additionalAttributes:{"data-ally-show":"alternativeformats","data-ally-content-ref":this.scope.content.id,"data-ally-invoke":"alternativeformats",style:"display:none;",onkeydown:`(function(e) {
                if (e.keyCode === ${e$.K5} || e.keyCode === ${e$.L_}) {
                 $(e.target).closest("li").click();
                }
              })(event)`}}];return e}overflowMenuIsAllyConditional(){var e;return null!==(e=this.scope.content)&&void 0!==e&&!!e.isFile()&&0!==this.getOverflowMenu().length&&this.getOverflowMenu().filter(e=>{var t;return null===(t=e.show)||void 0===t?void 0:t.call(e)}).every(e=>{var t;return(null===(t=e.additionalAttributes)||void 0===t?void 0:t["data-ally-show"])!==void 0})}canShowAllyAlternativeFormats(){var e,t,n,i;return(null===(e=this.scope.content)||void 0===e?void 0:e.isFile())&&(0,W.lMq)(null===(t=this.scope.content)||void 0===t?void 0:null===(n=t.contentDetail)||void 0===n?void 0:null===(i=n[W.DXv.File])||void 0===i?void 0:i.fileAssociationMode)}get deployedAssessment(){return this.scope.content&&this.scope.content.getDeployedAssessment()}isAnonymouslyGraded(){let e=this.scope.content.getAssociatedGradingColumn();return e&&e.anonymousGrading}async editGroups(){let e,t=this.scope.content.id;if(this.scope.content.isAssignment()||this.scope.content.isTest())e=this.deployedAssessment.gradingColumn.id;else if(e=this.scope.gradeColumn&&this.scope.gradeColumn.id,E.courseContent.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.contentDetail){let e=await this.scope.content.getLinkContentSource().$asPromise();t=e.id}this.ultraState.goPeekState("course-group",{groupCourseId:this.scope.content.courseId||this.ultraState.params.courseId,groupContentId:t,groupColumnId:e})}showOverflowMenu(){let e=this.scope.content;return e.canDelete()||e.canViewAsInstructor()||this.usesEditButton()||e.hasConversation()||this.canDownload||this.canShowAlly&&!e.isConditionalReleaseLocked()}openAssessmentItem(){l.e.isExternalSubmissionsAssessment(this.scope.content)?this.ultraState.goPeekState(F.eJ.ASSESSMENT_EXTERNAL_OVERVIEW,{contentId:this.scope.content.id}):this.ultraState.goPeekState(F.eJ.ASSESSMENT_OVERVIEW,{contentId:this.scope.content.id})}onExternalLinkClick(){var e;this.notifyMobileAppOnItemClick(),(null===(e=this.scope.content.permissions)||void 0===e?void 0:e.canHaveReviewState)&&this.automaticallyUpdateContentReviewState(this.scope.content)}automaticallyUpdateContentReviewState(e){let t=(0,eZ.w4)(e);t&&this.updateContentReviewState(e.courseId,e.id,t).then(()=>{this.$rootScope.$broadcast(ej.G,this.scope.content,t)})}notifyMobileAppOnItemClick(){let e,t;if(E.courseContent.ContentHandler.File.isEqualTo(this.scope.content.contentHandler)?(e=v.Cs.FileOpened,t=v.Pl.Document):E.courseContent.ContentHandler.ExternalLink.isEqualTo(this.scope.content.contentHandler)&&(e=v.Cs.LinkOpened,t=v.Pl.Link),E.courseContent.ContentHandler.File.isEqualTo(this.scope.content.contentHandler)||E.courseContent.ContentHandler.ExternalLink.isEqualTo(this.scope.content.contentHandler)){let n={type:e,status:v.rJ.Success,contentId:this.scope.content.id,contentTitle:this.scope.content.title,contentType:t};(0,v.Db)(n)}}getRootClassName(){return e1}shouldShowReviewStateIcon(){var e,t;let n=null===(t=this.scope.showReviewStateIcon)||void 0===t||t,i=!!(null===(e=this.courseProgressConfiguration)||void 0===e?void 0:e.progressTrackingEnabled)||this.scope.content.inSequence;return n&&i&&this.contextCourseMembership.isStudentMembership()}getNeighborReviewState(e){return!this.scope.content.inSequence||!e||e.isUiFolder()?eF.bY.None:e.state===W.aql.Completed?eF.bY.Completed:eF.bY.Incomplete}setForcedSequenceLearningModuleAttributes(){return eT.AaE.isNotAccessibleButVisibleForcedSequenceItem(this.scope.content)}constructor(e,t,n,i,s,r,l,c,d,u,p,m,h,g,f,b,v,y,C,S){this.$q=t,this.$rootScope=n,this.$ngRedux=i,this.element=s,this.scope=r,this.CourseModel=l,this.schemaService=c,this.contentService=d,this.contextService=u,this.contextCourse=p,this.contextCourseMembership=m,this.courseContentService=h,this.entitlementService=g,this.localizeService=f,this.ltiService=b,this.telemetryService=v,this.timeoutService=y,this.ultraState=C,this.allyService=S,this.courseLinkContentHandler=E.courseContent.ContentHandler.CourseLink,this.disableRestricted=!1,this.displayTelemetryUserActivity=!1,this.displayTelemetryDiscussionActivity=!1,this.entitledToDesignAssessment=!1,this.isModifyPermissionLoaded=!1,this.isGettingConfirmationOptions=!1,this.getNextReviewState=()=>W.aql.Started===this.contentReviewState?W.aql.Completed:W.aql.Completed===this.contentReviewState?W.aql.Started:null,this.onReviewStateIconClick=()=>{let e=this.getNextReviewState();if(!this.scope.content.canUpdateReviewState()||this.scope.content.inSequence||!e||!this.scope.content.courseId||!this.scope.content.id)return this.$q.resolve();let t=this.updateContentReviewState(this.scope.content.courseId,this.scope.content.id,e);return this.$q.when(t).then(()=>{})},this.showEditButtonFromLTILink=()=>!this.isExcludedOrDeletedLtiToolProvider()&&!!this.ltiService.placementExists(this.scope.content),this.displayGradeInfo=!1,this.isLate=!1,this.scope.shouldShowContent=!0,this.canViewGroups=this.entitlementService.isEntitled($.pQ.ViewGroups),this.hasViewGroupsAsAdmin=this.entitlementService.isEntitled($.pQ.ViewGroupsAsAdmin),this.courseId=p.courseId?p.courseId:this.ultraState.params.courseId,this.conditionalRelease=e.instantiate(eM.Z,{scope:r}),this.subscribeToReduxChanges();let I=this.entitlementService.isUserEntitledToRetrieveCourseProgressConfiguration(this.contextCourseMembership.isStudentMembership());!this.courseProgressConfiguration&&this.retrieveCourseProgressConfiguration&&I&&this.retrieveCourseProgressConfiguration({courseId:this.courseId}),this.scope.content.$then(e=>{this.entitlementService.hasAnyCourseEntitlement([$.s7.ModifyAssessment,$.s7.ViewAssessment],e.courseId).then(t=>{if(this.entitledToDesignAssessment=t,this.isModifyPermissionLoaded=!0,e.canHaveAttempts()&&!this.entitledToDesignAssessment&&e.contentDetail){let t=e.getAssociatedGradingColumn(),n=l.$new(e.courseId).gradebook.columns.$buildRaw(t);this.scope.gradingColumn=n,(this.displayGradeInfo?this.courseContentService.loadContentAndGrades({course:this.CourseModel.$buildRaw({id:e.courseId}),content:e,column:n}):this.$q.when({courseContent:e,gradingColumn:n})).then(e=>{this.displayGradeInfo&&this.scope.gradingColumn.isLate()&&(!e.gradeDetail||e.gradeDetail.ui.attempt.isInProgress())&&(this.isLate=!0),this.isGradeLoaded=!0,e.gradeDetail&&e.gradeDetail.column.id===n.id&&(this.scope.gradeDetail=e.gradeDetail)})}else this.isLate=!1,this.isGradeLoaded=!0}),this.entitlementService.hasAnyCourseEntitlement([eR.SE.ViewGrades],e.courseId).then(e=>{this.canViewQuestionAnalysis=e}),this.contextService.getSystemInfo().$asPromise().then(e=>{e.telemetryEnabled&&(this.telemetryService.determineContentSupportsActivityData(this.scope.content).then(e=>{this.displayTelemetryUserActivity=e&&!this.contextCourseMembership.isStudentMembership()}),this.displayTelemetryDiscussionActivity=this.shouldShowDiscussionAnalytics()&&!this.contextCourseMembership.isStudentMembership())}),this.allyService.isAvailable().then(e=>{e&&this.allyService.isAllySupportedContentItem(this.scope.content)?(this.canShowAlly=!0,this.updateAlly()):this.canShowAlly=!1;let t=this.getOverflowMenu();this.isAllyInstructor=this.allyService.isAllyInstructor(),this.$rootScope.$broadcast("menuItems.update",this.scope.content.id,t)}),r.content.title||E.courseContent.ContentHandler.UltraAssignment.isEqualTo(this.scope.content.contentHandler)||E.courseContent.ContentHandler.TestLink.isEqualTo(this.scope.content.contentHandler)||this.localizeService.loadBundle("features/course/content/course-content").then(()=>{r.content.title=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"course.content.contentTitlePlaceholder"})});let t=e=>{e.getLinkContentSource().$then(e=>{this.targetContent=e,this.contentHandler=e.contentHandler&&e.contentHandler.toString()},t=>{403===t.$response.status&&o.remove(this.scope.contents,t=>t.$pk===e.$pk)})};this.scope.$watch("::content.id",()=>{if(E.courseContent.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)){if(this.scope.content.contentDetail)t(this.scope.content);else{let e=this.scope.$watch("content.isConditionalReleaseUnlocked()",n=>{n&&(t(this.scope.content),e())})}}}),eq(this.scope,(e,t)=>{this.scope.content.isConditionalReleaseLocked()&&this.scope.content.containsCriteriaWithGradeColumnId(t)&&eW(this.scope,t)}),ez(this.scope,()=>{this.scope.content.isConditionalReleaseLocked()&&eW(this.scope)}),a.ZU.OnRootScope(this.scope,"grade-attempt",(e,t,n)=>{this.scope.content.id===t&&(this.scope.gradeDetail=n)}),r.content.contentHandler?r.content.isBbPage()?this.contentHandler=E.courseContent.ContentHandler.Document.toString():this.contentHandler=r.content.contentHandler.toString():this.contentHandler=E.courseContent.ContentHandler.Document.toString(),this.disableRestricted=E.courseContent.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler),this.conditionalRelease.getConditions(this.scope.content),this.hasViewB2Entitlement()}),this.scope.$on("refresh-conditional-release-rules",(e,t)=>{this.scope.content.id===t.id&&this.conditionalRelease.getConditions(t)}),this.scope.$on("content-update",(e,t)=>{this.scope.content.id!==t.id||this.scope.content.ui.linkSource||(this.scope.content=t),this.scope.content.ui.linkSource&&this.scope.content.ui.linkSource.id===t.id&&(this.scope.content.ui.linkSource=t);let n=this.scope.content.getDueDate();this.scope.dueDate=n&&new Date(n)}),this.scope.$on("bb-update-CR-tooltip",(e,t,n,i)=>{t&&(this.conditionalRelease.gradeCriteria&&this.conditionalRelease.gradeCriteria.gradeColumnId)===t.id&&this.conditionalRelease.getConditions(this.scope.content,n,i)}),this.scope.$on("show-override-message",(e,t,n)=>{this.scope.content&&this.scope.content.id===n&&(t?(this.scope.shouldShowContent=!1,this.overrideMessage=t):this.scope.shouldShowContent=!0)});let w=o.once(()=>{this.scope.$watch(()=>this.scope.content.getDueDate(),e=>{this.scope.dueDate=e&&new Date(e)})});this.scope.$watch("content.contentHandler",()=>{r.content.ui.importPlaceholder||w()}),this.scope.$on("discussion-group-content-update",(e,t)=>{this.scope.content&&E.courseContent.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.contentDetail&&this.scope.content.getLinkContentSource().$then(e=>{e.id===t.id&&this.scope.content.applyGroupSettings(t)})})}}e2=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([eJ(0,(0,H.tB)("$injector")),eJ(1,(0,H.tB)("$q")),eJ(2,(0,H.tB)("$rootScope")),eJ(3,(0,H.tB)("$ngRedux")),eJ(4,(0,H.tB)("element")),eJ(5,(0,H.tB)("scope")),eJ(6,(0,H.tB)(E.N7.H)),eJ(7,(0,H.tB)(eB.HV)),eJ(8,(0,H.tB)(p.HV)),eJ(9,(0,H.tB)(ep.HV)),eJ(10,(0,H.tB)(g.HV)),eJ(11,(0,H.tB)(w.HV)),eJ(12,(0,H.tB)(eg.HV)),eJ(13,(0,H.tB)(f.HV)),eJ(14,(0,H.tB)(r.serviceName)),eJ(15,(0,H.tB)(I.HV)),eJ(16,(0,H.tB)(eC.HV)),eJ(17,(0,H.tB)(eS.H)),eJ(18,(0,H.tB)(h.HV)),eJ(19,(0,H.tB)(u.HV))],e2);class e3{constructor(e){this.$injector=e,this.restrict="E",this.scope={content:"=",contents:"=",contextArea:"=",canMove:"=",itemBefore:"<",itemAfter:"<",showReviewStateIcon:"<?",hideVisibilitySelector:"<?"},this.template=eO,this.link=(e,t)=>{e.contentItemBase=this.$injector.instantiate(e2,{scope:e,element:t}),e.$on(eb.Ei,(n,i,s,r)=>{r===eb.mb.FileDrop&&e.content===s.content&&(s.targetElement=t.find(".bb-progress"),e.$root.$broadcast(eb.Ei,i,s,e.content.ui.fileUploadId,s.targetElement,eb.mb.LinkProgress))})}}}e3.$inject=["$injector"],i.module(e0,[Z,Q,k,N,ed,ef.e1,em.e1,eh.e1,I.e1,ey.e1,eU,eI.e1,eA.e1,eP,ek.e1,eG.e1,ev.e1,r.moduleName,p.e1,eg.e1,eB.e1,eL.e1,eN.e1,eE.e1,c.e1,d.e1,eX]).directive("bbContentItemBase",["$injector",e=>e.instantiate(e3)]);var e9=n(48852),e4=n(271689),e7=n(295762),e5=n(476522),e6=n(299530);n(785106),n(249017);var e8=n(486219);n(651560),n(760943),n(948286),n(288211);var te=n(805950),tt=n(915638),tn=n(555342);let ti="ultra.features.course.content.banners.bbForcedSequenceWarningBanner",ts={Class:tn.WG,withThemeProvider:!0,renderLocalized:!0};i.module(ti,[]).component("bbForcedSequenceWarningBanner",(0,ei.G5)(ts));var tr=n(402665),to=n(529462),ta=n(938978);function tl(e,t){return function(n,i){t(n,i,e)}}let tc="ultraUi.components.directives.content.learningModule.learningModuleBaseItem";class td{deleteContent(){this.scope.$emit("deleteContent",this.scope.content)}getOverflowMenu(){let e=[{icon:"draw",labelKey:"global.edit",show:()=>this.scope.content.canEdit(),onClick:this.edit.bind(this)},{icon:"class-pulse-future",uniqueId:"content-progress",labelKey:this.contextCourse.course.isOrganization?"components.directives.content-item-base.overflow-menu.content-progress-org":"components.directives.content-item-base.overflow-menu.content-progress",show:()=>this.canViewProgress(),onClick:()=>{this.ultraState.goPeekState(F.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,{id:this.scope.content.id,courseId:this.courseId})}},{icon:"trash",labelKey:"global.delete",show:()=>this.scope.content.canDelete(),onClick:this.deleteContent.bind(this),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>this.getDeleteConfirmationKeyAndShowType().then(e=>{let t=e.confirmationKey.replace(/^resource\//,"");return this.$q.when(eL.Hz(t))})}}];return e}edit(){this.ultraState.goPeekState(F.XO.EDIT_LEARNING_MODULE_PEEK_PANEL,{id:this.scope.content.id})}getDeleteConfirmationKeyAndShowType(){return this.contentService.generateDeleteConfirmationKey(this.scope.content,this.scope.contextArea).then(e=>({confirmationKey:this.scope.content.ui.deleteConfirmationKey,showType:this.scope.content.ui.modalShowType}))}canViewProgress(){var e;let t=!!(null===(e=this.courseProgressConfiguration)||void 0===e?void 0:e.progressTrackingEnabled);return t&&this.entitlementService.isEntitled(eF.NT.ViewProgressInformation,this.courseId)}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({courseProgressConfiguration:eT.Ys.courseProgress.getCourseProgressConfiguration(e,this.courseId)}),e=>(0,eK.DE)({retrieveCourseProgressConfiguration:eT.Nwg.courseProgress.loadCourseProgressConfiguration},e))(this);this.scope.$on("$destroy",e)}toggleLM(){var e,t;null===(t=(e=this.scope).toggleFunc)||void 0===t||t.call(e),this.scope.content.ui.isOpen&&this.fetchProgress().then(()=>{let e={type:v.Cs.LearningModuleOpened,status:v.rJ.Success,contentId:this.scope.content.id};(0,v.Db)(e)})}isCourseCompletedAndInInstructorView(){return!this.scope.content.canEdit()&&this.entitledToModifyContent}get canOpenConditionalRelease(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)}openConditionalRelease(){this.ultraState.goPeekState(F.XO.CONDITIONAL_RELEASE_PEEK_PANEL,{contentId:this.scope.content.id})}getNeighborReviewState(){return eF.bY.None}shouldShowReviewStateIcon(){return eT.AaE.canHaveReviewState(this.scope.content)&&eT.AaE.canViewReviewState(this.scope.content)&&!!this.scope.content.id}onChangeVisibility(){this.scope.content.visibility=this.contentService.determineVisibility(this.scope.content.isAvailable),this.scope.content.withParams({fields:"id"}).$save(["isAvailable","isPartiallyVisible","adaptiveReleaseRules"]).$asPromise().then(()=>{this.$rootScope.$broadcast("content-update",this.scope.content)})}fetchProgress(){return this.scope.content.$fetch({expand:"hasProgressed"}).$asPromise().then(e=>{this.scope.content=e})}shouldShowForcedSequenceWarningBanner(){return this.scope.content.canEdit()&&this.scope.content.isForcedSequenceModule()&&this.scope.isOpen&&!this.scope.content.isHiddenFromStudents()&&this.scope.content.hasProgressed}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h){var g;this.scope=e,this.$rootScope=t,this.element=n,this.attrs=i,this.localizeService=s,this.$q=r,this.contentService=o,this.offcanvasService=a,this.timeout=l,this.ultraState=c,this.contextCourseMembership=d,this.entitlementService=p,this.$ngRedux=m,this.contextCourse=h,this.lmTitlePlaceholder=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.learning-module.base-item.title-placeholder"}),this.description="",this.controlId=(0,to.d)(),this.childrenRefresher=new ta.H(this.$q),this.conditionalRelease=u.instantiate(eM.Z,{scope:e}),e.content.title||(e.content.title=this.lmTitlePlaceholder),e.content.description=null!==(g=e.content.description)&&void 0!==g?g:"",this.scope.$on("refresh-conditional-release-rules",(e,t)=>{this.scope.content.id===t.id&&this.conditionalRelease.getConditions(t)}),this.scope.$on("bb-update-CR-tooltip",(e,t,n,i)=>{t&&(this.rulesCriteria&&this.rulesCriteria.gradeColumnId)===t.id&&this.conditionalRelease.getConditions(this.scope.content,n,i)}),(e.content.isConditionalReleaseLocked()||e.content.isConditionalRelease()||e.content.isForcedSequenceModule())&&this.conditionalRelease.getConditions(e.content),this.entitlementService.hasCourseEntitlement($.eo.ModifyContent,this.scope.content.courseId).then(e=>{this.entitledToModifyContent=e}),this.scope.$on(ej.G,(t,n)=>{this.childrenRefresher.refreshChildren(n,e.content,this.contextCourseMembership.isStudentMembership())}),this.courseId=this.scope.content.courseId||this.ultraState.params.courseId,this.subscribeToReduxChanges();let f=this.entitlementService.isUserEntitledToRetrieveCourseProgressConfiguration(this.contextCourseMembership.isStudentMembership());!this.courseProgressConfiguration&&this.retrieveCourseProgressConfiguration&&f&&this.retrieveCourseProgressConfiguration({courseId:this.courseId}),eq(this.scope,(e,t)=>{this.scope.content.isConditionalReleaseLocked()&&this.scope.content.containsCriteriaWithGradeColumnId(t)&&eW(this.scope,t)}),ez(this.scope,e=>{this.scope.content.isConditionalReleaseLocked()&&eW(this.scope)})}}td=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([tl(0,(0,H.tB)("scope")),tl(1,(0,H.tB)("$rootScope")),tl(2,(0,H.tB)("element")),tl(3,(0,H.tB)("attrs")),tl(4,(0,H.tB)(r.serviceName)),tl(5,(0,H.tB)("$q")),tl(6,(0,H.tB)(p.HV)),tl(7,(0,H.tB)(ey.HV)),tl(8,(0,H.tB)(eS.H)),tl(9,(0,H.tB)(h.HV)),tl(10,(0,H.tB)(w.HV)),tl(11,(0,H.tB)("$injector")),tl(12,(0,H.tB)(f.HV)),tl(13,(0,H.tB)("$ngRedux")),tl(14,(0,H.tB)(g.HV))],td);class tu{constructor(e){this.$injector=e,this.restrict="E",this.template=tr,this.scope={content:"=",canToggle:"&",toggleFunc:"&",canMove:"=",contextArea:"=",isOpen:"="},this.link=(e,t,n)=>{e.baseItem=this.$injector.instantiate(td,{scope:e,element:t,attrs:n})}}}function tp(e,t){return function(n,i){t(n,i,e)}}tu.$inject=["$injector"],i.module(tc,[te.e1,tt.e1,p.e1,eG.e1,ey.e1,eS.e,h.e1,eB.e1,f.e1,ti,eX]).directive("bbLearningModuleBaseItem",["$injector",e=>e.instantiate(tu)]);let tm="ultra.directives.folder";class th{_closeFolderImmediately(){this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).hide(),this.isOpen=!1,this.content.ui.isOpen=!1):this.scope.$apply(()=>{this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).hide(),this.isOpen=!1,this.content.ui.isOpen=!1})}toggleFolder(){this.isOpen||null!=this.content.children&&0!==this.content.children.length||this.loadMoreChildren(this.content).$then(()=>{var e;this.content.children&&0===this.content.children.length&&(null===(e=this.scope.content.permissions)||void 0===e?void 0:e.canHaveReviewState)&&this.scope.content.state!==W.aql.Completed&&this.scope.content.updateState(W.aql.Completed,!0)}),this.content.children&&(this.isOpen=this.content.ui.isOpen=!this.content.ui.isOpen,this.content.children.$then(()=>{this.initialChildrenLength=this.content.children.length,0===this.content.children.length?(this._calculateDurationAndToggle(),this.showMenuOverride=!0,(this.isOpen||this.isOpen&&this.content.isLearningModule())&&this.scope.$root.$broadcast("close-all-add-menus",this.content.id)):this.timeout(()=>{this._calculateDurationAndToggle(),this.showMenuOverride=!1},this.scope),this.clearWatcher&&this.clearWatcher(),this.clearWatcher=this.scope.$watch(()=>this.content.children&&this.content.children.length,(e,t)=>{this.showMenuOverride=0===e,0===e&&e!==t&&this.isOpen&&this.scope.$root.$broadcast("close-all-add-menus",this.content.id),null==e&&this.isOpen&&(this._closeFolderImmediately(),this.toggleFolder())})}),this.toggleLabelKey=this.isOpen?"components.directives.folder.aria-label.close":"components.directives.folder.aria-label.open")}_calculateDurationAndToggle(){let e=this.isOpen?1e3:2e3,t=this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).outerHeight(),n=Math.min(e,Math.round(1.17*t));this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).slideToggle(n)}canToggle(){return this.content.canEdit()||!this.content.isRestricted()}get content(){return this.scope.content}isProgressTrackingStateShown(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.canViewReviewState}constructor(e,t,n,i){this.scope=e,this.element=t,this.timeout=n,this.contextCourseMembership=i,this.showEmptyMenu=!0,this.showMenuOverride=!1,this.showOutlineOverride=!1,this.isOpen=!1,this.toggleLabelKey="components.directives.folder.aria-label.open",this.initialChildrenLength=0,this.FOLDER_CONTENTS_SELECTOR=".folder-contents",this.contextArea=e.contextArea,this.loadMoreChildren=e.loadMoreChildren,this.contents=e.contents,this.content.ui?this.content.ui.isOpen=!1:this.content.ui={isOpen:!1},e.$on("toggle-folder",(e,t)=>{this.canToggle()&&t===this.content&&this.toggleFolder()}),e.$on("toggle-folder-by-id",(t,n)=>{this.canToggle()&&n===this.content.id&&(this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?this.toggleFolder():e.$apply(()=>{this.toggleFolder()}))}),e.$on("close-folder-immediately-by-id",(e,t)=>{this.isOpen&&this.canToggle()&&t===this.content.id&&this._closeFolderImmediately()}),e.$on("bb-drag-start",()=>{this.isOpen&&this.canToggle()&&(null==this.content.children||0===this.content.children.length)&&this._closeFolderImmediately()}),e.$on("close-all-add-menus",(e,t)=>{this.isOpen&&(null==this.content.children||0===this.content.children.length)&&this.content.id!==t&&!this.content.isLearningModule()&&this.toggleFolder()}),e.$on("showContentImportProgress",(t,n,i)=>{this.content.id!==i||0!==this.content.children.length||this.showOutlineOverride||(this.showOutlineOverride=!0,this.timeout(()=>{this.scope.$broadcast("showContentImportProgress",n,i)},e))}),e.$on("keyboard-drag-move",(e,t)=>{this.content.id+"blank"===t?this.showEmptyMenu=!1:this.showEmptyMenu=!0}),e.$on("keyboard-drag-lost-focus",()=>{this.showEmptyMenu=!0}),e.$on("keyboard-drag-end",()=>{this.showEmptyMenu=!0})}}th=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([tp(0,(0,H.tB)("scope")),tp(1,(0,H.tB)("element")),tp(2,(0,H.tB)(eS.H)),tp(3,(0,H.tB)(w.HV))],th);class tg{constructor(e){this.$injector=e,this.restrict="E",this.scope={content:"=",contextArea:"=",canCreate:"=",contents:"=",canMove:"=",loadMoreChildren:"=",nextContentId:"=?",onFileDropHandler:"=?",onMoveHandler:"=",onMoveIntoFolderHandler:"=",previousContentId:"=?",canCopyImport:"=?",rootContent:"&?"},this.compile=e=>({pre:(e,t)=>{e.folder=this.$injector.instantiate(th,{scope:e,element:t})}}),this.template=e8}}tg.$inject=["$injector"],i.module(tm,[e0,e6.e1,s.e,eS.e,tc]).directive("bbFolder",["$injector",e=>e.instantiate(tg)]);var tf=n(458516);/*
 * An Angular service which helps with creating recursive directives.
 * @author Mark Lagendijk
 * @license MIT
 */let tb="ultra.service.RecursionHelper",tv="recursionHelper";/**
 * An Angular service which helps with creating recursive directives.
 * @author Mark Lagendijk
 * @license MIT
 *
 * Sample usage:
 * ```typescript
 *
 * var link = (scope: IScope, element: JQuery) => {
 *   // do stuff
 * };
 *
 * var compile = (element: JQuery) => {
 *   return recursiveHelper.compile(element, link);
 * };
 *
 * ```
 *
 */class ty{compileContents(e,t){return this.$compile(t)}compile(e,t,n){i.isFunction(n)&&(n={post:n});let s=t.contents();return t.empty(),{pre:n&&n.pre?n.pre:null,post:(t,i,...r)=>{let o=this.compileContents(e,s);o(t,function(e){i.append(e)}),n&&n.post&&n.post.apply(null,[t,i,...r])}}}constructor(e){this.$compile=e,this.compileContents=o.memoize(this.compileContents)}}ty.$inject=["$compile"],i.module(tb,[]).service(tv,ty);var tC=n(146893),tS=n(159212),tE=n(270679),tI=n(198022),tw=n(458984),tA=n(838700),tk=n(625506);function tx(e,t){return function(n,i){t(n,i,e)}}let tT="ultra.directives.contentOutline";class tP{resetMovableAddContentButton(e){this.addContentButtonLocation=null,e.append(this.getMovableAddContentButton())}addImportPlaceholder(){this.ContentService.getOrMakeContentInContentTree(this.parentFolder,this.parentFolder.courseId,void 0,this.parentFolder.id,"start").then(e=>{e.content.ui.importPlaceholder=!0,this.timeout(()=>{tk(".placeholder-container").closest(".js-content-div").scrollintoview({duration:300})},this.scope,0,!1)})}getScrollContainerSelector(){return this.windowService.isLargeBreakpoint()?this.LARGE_CONTAINER_SELECTOR:this.SMALL_CONTAINER_SELECTOR}getScrollForceShowSelector(){return`.${e1}`}isAllContentsLoaded(){return!!this.scope.contents&&!!this.scope.contents.paging&&!!this.scope.contents.paging.count&&this.scope.contents.length>=this.scope.contents.paging.count}isAddContentButtonUnattached(e){return!!e&&(!this.addContentButtonLocation||e!==this.addContentButtonLocation.id)}placeAddButton(e,t=!1){let n=this.parentFolder?`.movable-add-content-button-folder${this.parentFolder.id}`:"";if(!this.isAddContentButtonUnattached(e.id)||this.contextArea===tA.m.Discussions||void 0===e.id)return;let i=!!document.querySelector(".ms-ContextualMenu-list.is-open");(t||!i)&&(this.getMovableAddContentButton().appendTo(tk(`#add-button-placeholder${e.id}`)),this.addContentButtonLocation=e,this.scope.$broadcast("change-add-content-button-position",{reopen:i}),t&&this.element.find(`.movable-add-content-button.movable-add-content-button${n} .button-add-content.js-show-add-options`).focus())}getMovableAddContentButton(){let e=this.parentFolder?`.movable-add-content-button-folder${this.parentFolder.id}`:"";return this.element.find(`.movable-add-content-button${e}`)}getAddButtonLineLabel(e){return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.add-content-button.aria-label.content.add-button-label-item-name-after",params:{itemName:e},noWrap:!0,noEscape:!0})}isMobileDevice(){return tE.Z.detect().mobile()}shouldShowMenuOverride(){return(!this.parentFolder||0!==this.parentFolder.depth)&&this.showMenuOverride}shouldShowAddButton(){return this.scope.isFirst||this.scope.contents&&0===this.scope.contents.length}hasId(e){return this.scope.contents.some(t=>t.ui.tempId===e||t.id===e)}getTempId(){let e;let t=!1;for(;!t;)e=(0,tI.v4)(),t=!this.hasId(e);return e}isProgressTrackingStateShown(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.canViewReviewState}constructor(e,t,n,i,s,r,o,a){this.scope=e,this.element=t,this.ContentService=i,this.CourseContentModel=s,this.timeout=r,this.windowService=o,this.localizeService=a,this.cloudUploadInProgress={},this.showContentImportProgress=!1,this.LARGE_CONTAINER_SELECTOR=".bb-offcanvas-panel-wrap .panel-wrap",this.SMALL_CONTAINER_SELECTOR=".bb-offcanvas-panel-wrap .panel-wrap .panel-content",this.getContentTrackingId=e=>null!=e.id?e.id:(e.ui.tempId||(e.ui.tempId=this.getTempId()),e.ui.tempId),this.contextArea=e.contextArea,this.addContentButtonLocation=null,this.loadMoreChildren=e.loadMoreChildren,this.parentFolder=e.parentFolder,this.onFileDropHandler=e.onFileDropHandler,this.onMoveHandler=e.onMoveHandler,this.onMoveIntoFolderHandler=e.onMoveIntoFolderHandler,this.canMove=e.canMove&&(!e.contents.permissions||e.contents.permissions.move),this.showMenuOverride=!1,null!=e.contents&&"function"==typeof e.contents.$asPromise&&e.contents.$asPromise().then(()=>{this.showMenuOverride=0===e.contents.length}),this.placeholderContent=this.CourseContentModel.$buildRaw({id:this.parentFolder&&this.parentFolder.id&&this.parentFolder.id+"_placeholder",parentId:this.parentFolder&&this.parentFolder.id,contentHandler:E.courseContent.ContentHandler.Unknown.toString(),depth:this.parentFolder&&this.parentFolder.depth&&this.parentFolder.depth+1}),e.$watch("contents.length",(n,i)=>{this.showMenuOverride=0===n,this.placeholderContent.id=this.parentFolder&&this.parentFolder.id&&this.parentFolder.id+"_placeholder",this.placeholderContent.parentId=this.parentFolder&&this.parentFolder.id,this.resetMovableAddContentButton(t),n<i&&(e.$emit("content-outline-infinite-scroll-check"),tk(`#add-button${this.scope.parentFolder.id}`).appendTo(tk(`#add-button-container${this.scope.parentFolder.id}`)))}),e.$eval(n.showContentImportProgress)&&this.addImportPlaceholder(),e.$on("bb-drag-start",()=>{this.resetMovableAddContentButton(t)}),e.$on("keyboard-drag-start",()=>{this.resetMovableAddContentButton(t)}),e.$on("showContentImportProgress",(e,t,n)=>{("-1"===n||this.parentFolder.id===n)&&this.addImportPlaceholder()}),e.$on(tC._,(e,t)=>{this.cloudUploadInProgress[t]||(this.cloudUploadInProgress[t]=!0)})}}tP=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([tx(0,(0,H.tB)("scope")),tx(1,(0,H.tB)("element")),tx(2,(0,H.tB)("attrs")),tx(3,(0,H.tB)(p.HV)),tx(4,(0,H.tB)(E.courseContent.HV)),tx(5,(0,H.tB)(eS.H)),tx(6,(0,H.tB)(tS.HV)),tx(7,(0,H.tB)(r.serviceName))],tP);class tD{constructor(e,t){this.link=e,this.recursionHelper=t,this.replace=!0,this.restrict="E",this.scope={canCreate:"=",contents:"=",contextArea:"=",loadMoreChildren:"=",isFirst:"=",parentFolder:"=",onFileDropHandler:"=?",onMoveHandler:"=",onMoveIntoFolderHandler:"=?",canMove:"=",canCreateAllContents:"=?",canCopyImport:"=?",hideAddMenuOverride:"=?"},this.compile=e=>this.recursionHelper.compile("content-outline-directive",e,this.link),this.template=tw}}tD.$inject=["link",tv],i.module(tT,[s.e,e0,e7.e1,e5.e1,e4.e1,e9.e1,p.e1,e6.e1,tm,tf.e1,tb,tS.e1,r.moduleName]).directive("bbContentOutline",["$injector",p.HV,e=>e.instantiate(tD,{link:(t,n,i)=>{t.contentOutline=e.instantiate(tP,{scope:t,element:n,attrs:i})}})])},838700:function(e,t,n){"use strict";var i,s;n.d(t,{m:function(){return i}}),(s=i||(i={})).CourseOutline="course-outline",s.Discussions="discussions",s.ContentSearch="content-search"},476522:function(e,t,n){"use strict";n.d(t,{e1:function(){return c}});var i=n(389564),s=n(291146),r=n(916415),o=n(211796),a=n(732888);function l(e,t){return function(n,i){t(n,i,e)}}let c="ultra.components.directives.content.content-visibility.membership-ftue",d=class{translate(e){return this.localizeService.translate({locale:this.localizeService.getLocale(this.$scope),key:e,noWrap:!0,noEscape:!0})}constructor(e,t,n){this.$scope=e,this.$q=t,this.localizeService=n,this.translate("components.directives.content-visibility.usersAndGroupsAnnouncement.buttonAriaLabel").then(e=>this.buttonAriaLabel=e),this.translate("components.directives.content-visibility.usersAndGroupsAnnouncement.title").then(e=>this.title=e),this.translate("components.directives.content-visibility.usersAndGroupsAnnouncement.content").then(e=>this.content=e),this.translate("global.close").then(e=>this.closeLabel=e),this.translate("components.directives.content-visibility.usersAndGroupsAnnouncement.doneButtonText").then(e=>this.doneButtonText=e),this.translate("components.directives.content-visibility.usersAndGroupsAnnouncement.moreInfoLinkText").then(e=>this.linkText=e),this.translate("components.directives.content-visibility.usersAndGroupsAnnouncement.moreInfoLinkUrl").then(e=>this.linkHref=e)}};!function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);r>3&&o&&Object.defineProperty(t,n,o)}([(0,r.wA)({moduleName:c,componentName:"bbContentVisibilityMembershipFtue",template:a,bindings:{},requireModules:[i.e]}),l(0,(0,o.tB)("$scope")),l(1,(0,o.tB)("$q")),l(2,(0,o.tB)(s.serviceName))],d)},271689:function(e,t,n){"use strict";n.d(t,{e1:function(){return h}}),n(20720);var i=n(464027),s=n(619034),r=n(951248),o=n(291146),a=n(501),l=n(226464),c=n(862801),d=n(211796),u=n(529462),p=n(554293);function m(e,t){return function(n,i){t(n,i,e)}}let h="ultra.directives.contentVisibilityRulesOptions";class g{shouldFocus(e){return void 0!==this.scope.dateFieldFocus&&"undefined"!==this.scope.dateFieldFocus&&this.scope.dateFieldFocus===e}handleCheckClick(e){let t=this.startDateSelect,n=this.untilDateSelect;this.scope.$emit("date-selection-changed",t,n),this.scope.isAllowedEmpty?t||n||this.form.dateFrom.$setValidity("startAndOrEndDate",!0):t||n?this.form.dateFrom.$setValidity("startAndOrEndDate",!0):(this.form.dateFrom.$setTouched(),this.form.dateFrom.$setValidity("startAndOrEndDate",!1)),this.form.dateUntil.$validate(),this.form.timeUntil.$validate(),this.form.dateFrom.$validate(),this.form.timeFrom.$validate(),"from-check"===e&&t?(this.scope.startDate=this.context.getServerTime(),this.scope.startTime=this.context.getServerTime()):"until-check"===e&&n&&this.setInitialEndDateTime(),this.updateStartAndEndTime()}setInitialEndDateTime(){let e;if(this.scope.subsequentDueDate||this.scope.dueDate){var t;e=this.addDays(new Date(null!==(t=this.scope.subsequentDueDate)&&void 0!==t?t:this.scope.dueDate),1)}else e=this.addDays(this.scope.startDate>this.context.getServerTime()?this.scope.startDate:this.context.getServerTime(),1);this.scope.endDate=e,this.scope.endTime=e}addDays(e,t){return new Date(e.getTime()+864e5*t)}setErrorString(e,t){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.content-visibility."+(t?"start":"end")+(e?"DateValidationError":"TimeValidationError")})}isDateRequired(e){let t=this.element.find("#from-check-"+this.id).prop("checked"),n=this.element.find("#until-check-"+this.id).prop("checked");return e?!!t:!!n}setWatchers(){this.scope.$watch("startDate",e=>{this.isValidDate(e)&&this.scope.startTime!==e&&(this.scope.startTime=e),this.doValidation(),this.onChange()}),this.scope.$watch("startTime",e=>{this.isValidDate(e)&&this.scope.startDate!==e&&(this.scope.startDate=e),this.doValidation(),this.onChange()}),this.scope.$watch("endDate",e=>{this.isValidDate(e)&&this.scope.endTime!==e&&(this.scope.endTime=e),this.doValidation(),this.onChange()}),this.scope.$watch("endTime",e=>{this.isValidDate(e)&&this.scope.endDate!==e&&(this.scope.endDate=e),this.doValidation(),this.onChange()}),this.scope.$watch("startDateSelect",e=>{this.scope.isAllowedEmpty&&(this.startDateSelect=e),!1===e&&this.scope.isAllowedEmpty&&(this.scope.startTime=null,this.scope.startDate=null)}),this.scope.$watch("untilDateSelect",e=>{this.scope.isAllowedEmpty&&(this.untilDateSelect=e),!1===e&&this.scope.isAllowedEmpty&&(this.scope.endTime=null,this.scope.endDate=null)})}setValidators(){let e=this.scope.$watch("form.dateFrom",(t,n)=>{this.form.dateFrom&&(this.scope.isAllowedEmpty?this.form.dateFrom.$validators.required=e=>!this.startDateSelect||this.startDateSelect&&null!=e||this.scope.isAllowedEmpty&&null===e:this.form.dateFrom.$validators.required=e=>!this.startDateSelect||this.startDateSelect&&null!=e,this.form.timeFrom.$validators.required=e=>!!(!this.startDateSelect||this.startDateSelect&&this.timeFrom.$viewValue),this.scope.isAllowedEmpty?this.form.dateUntil.$validators.required=e=>!this.untilDateSelect||this.untilDateSelect&&null!=e||this.scope.isAllowedEmpty&&null===e:this.form.dateUntil.$validators.required=e=>!this.untilDateSelect||this.untilDateSelect&&null!=e,this.form.timeUntil.$validators.required=()=>!!(!this.untilDateSelect||this.untilDateSelect&&this.timeUntil.$viewValue),this.form.dateFrom.$validators.untilAfterStart=e=>(this.form.dateUntil.$setTouched(),this.form.dateUntil.$validate(),!0),this.form.dateFrom.$validators.startBeforeDueDate=e=>!this.startDateSelect||e&&this.isDueDateAfterStartDate(e),this.form.dateUntil.$validators.untilAfterStart=e=>!this.untilDateSelect||!this.startDateSelect||!this.isStartDateValid()||e&&this.isValidDateOrder(this.scope.startDate,e),this.scope.subsequentDueDate?this.form.dateUntil.$validators.subsequentDueDate=e=>!this.untilDateSelect||e&&this.isDueDateBeforeEndDate(e):this.form.dateUntil.$validators.untilDueDate=e=>!this.untilDateSelect||e&&this.isDueDateBeforeEndDate(e),this.element.find(".restricted-form").focusout(()=>{this.doValidation()}),this.onChange(),e())})}doValidation(){this.form.$setDirty(),this.form.dateFrom.$validate(),this.form.timeFrom.$validate(),this.form.dateUntil.$validate(),this.form.timeUntil.$validate()}onChange(){this.scope.onchangeFunc&&this.scope.onchangeFunc()}onBlur(){this.scope.onblurFunc&&this.scope.onblurFunc()}noDateErrorsExist(){return this.isStartDateValid()&&this.isEndDateValid()}isStartDateError(){return this.startDateSelect&&!this.scope.startDate}isStartAndOrEndDateError(){return!this.startDateSelect&&!this.untilDateSelect&&!this.scope.endDate}isStartDateValid(){return!this.isStartDateError()&&!this.isStartAndOrEndDateError()&&this.isDueDateAfterStartDate(this.scope.startDate)}isEndDateError(){return this.untilDateSelect&&!this.scope.endDate}isEndDateBeforeError(){return this.untilDateSelect&&this.scope.endDate&&this.startDateSelect&&!this.isValidDateOrder(this.scope.startDate,this.scope.endDate)}isEndDateValid(){return!this.isEndDateError()&&!this.isEndDateBeforeError()&&!this.isDueDateBeforeEndDate(this.scope.endDate)}isValidDate(e){return e&&!Number.isNaN(e.getTime())}updateStartAndEndTime(){this.startDateSelect||(this.scope.startDate=null,this.scope.startTime=null),this.untilDateSelect||(this.scope.endDate=null,this.scope.endTime=null),this.noDateErrorsExist()&&(this.onChange(),this.onBlur())}isValidDateOrder(e,t){if(null==e||null==t)return!1;let n=new Date(e.getTime()),i=new Date(t.getTime());return n.setSeconds(0,0),i.setSeconds(0,0),s(i).isAfter(n)}isDueDateBeforeEndDate(e){return null==this.scope.dueDate||(this.scope.subsequentDueDate?s(this.scope.subsequentDueDate).isBefore(e):s(this.scope.dueDate).isBefore(e))}isDueDateAfterStartDate(e){return null==this.scope.dueDate||s(this.scope.dueDate).isAfter(e)}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({localeSettings:r.Ys.locale.getLocaleSettings(e,this.bbLocalize.getAppLocaleISO())}),e=>({getLocaleSettings:t=>e(r.Nwg.locale.getLocaleSettings(t))}))(this);this.scope.$on("$destroy",e)}get timeDateFromDisabled(){var e;return!this.startDateSelect||(null===(e=this.scope)||void 0===e?void 0:e.isReadOnlyMode())}get timeDateUntilDisabled(){var e;return!this.untilDateSelect||(null===(e=this.scope)||void 0===e?void 0:e.isReadOnlyMode())}constructor(e,t,n,i,s,r){this.$ngRedux=e,this.scope=t,this.element=n,this.form=i,this.context=s,this.bbLocalize=r,this.id=(0,u.d)(),this.scope.contentVisibilityRulesOptions=this,this.dateFrom=i.dateFrom,this.timeFrom=i.timeFrom,this.dateUntil=i.dateUntil,this.timeUntil=i.timeUntil,this.subscribeToReduxChanges();let o=this.bbLocalize.getAppLocaleISO();this.getLocaleSettings&&this.getLocaleSettings({locale:o}),this.startDateSelect=!!this.scope.startDate,this.untilDateSelect=!!this.scope.endDate,this.setWatchers(),this.setValidators();let a=(0,u.d)();this.dateFromContainer=`${a}-date-from-container`,this.dateUntilContainer=`${a}-date-until-container`}}g=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([m(0,(0,d.tB)("$ngRedux")),m(1,(0,d.tB)("scope")),m(2,(0,d.tB)("element")),m(3,(0,d.tB)("form")),m(4,(0,d.tB)(a.HV)),m(5,(0,d.tB)(o.serviceName))],g);class f{constructor(e){this.$injector=e,this.restrict="E",this.require="^form",this.scope={startDate:"=?",startTime:"=?",startDateSelect:"=?",endDate:"=?",endTime:"=?",untilDateSelect:"=?",onblurFunc:"&?",onchangeFunc:"&?",isReadOnlyMode:"&?",dateFieldFocus:"@?",isAllowedEmpty:"=?",dueDate:"<",subsequentDueDate:"<?"},this.template=p,this.transclude={customStartDateAndTimeValidationMessages:"?bbContentVisibilityCustomStartDateAndTimeValidationMessages",customEndDateAndTimeValidationMessages:"?bbContentVisibilityCustomEndDateAndTimeValidationMessages"},this.link=(e,t,n,i)=>{e.contentVisibilityRulesOptions=this.$injector.instantiate(g,{scope:e,element:t,form:i})}}}f.$inject=["$injector"],i.module(h,[a.e1,l.e1,c.e1]).directive("bbContentVisibilityRulesOptions",["$injector",e=>e.instantiate(f)])},295762:function(e,t,n){"use strict";n.d(t,{e1:function(){return I}}),n(20720),n(709597),n(566997),n(611368),n(397174),n(95318),n(123405),n(713690),n(278565);var i=n(464027),s=n(276635),r=n(951248),o=n(319434),a=n(350383),l=n(291146),c=n(606592),d=n(168132),u=n(529462),p=n(247126),m=n(468706),h=n(822658),g=n(657945),f=n(445218),b=n(458733);let v="ultra.components.services.courseLinkVisibilityWarningBanner",y={Class:b.Ws,renderLocalized:!0,withProvider:!0};i.module(v,[]).component("courseLinkVisibilityWarningBanner",(0,f.G5)(y));var C=n(320559),S=n(470269),E=n(408027);let I="ultra.directives.contentVisibilitySelector";class w{checkForCourseLinks(){if(this.isFirstDropdownOpen&&!this.showInfoBanner)return this.isFirstDropdownOpen=!1,this.checkShouldShowCourseLinkWarning()}getIconSize(){return this.scope.hasMediumIcon?"medium":"small"}loadAdaptiveReleaseEntitlements(){let e=this.entitlementService.hasCourseEntitlement(o.s7.ViewAdaptiveRelease,this.scope.content.courseId).then(e=>{this.entitledToViewConditionalRelease=e}),t=this.entitlementService.hasCourseEntitlement(o.s7.DeleteAdaptiveRelease,this.scope.content.courseId).then(e=>{this.entitledToDeleteConditionalRelease=e});return this.$q.all([e,t])}onChange(){this.scope.onchangeFunc&&this.scope.onchangeFunc()}onBlur(){this.scope.onblurFunc&&this.scope.onblurFunc()}disableRestricted(){return!!this.scope.disableRestricted&&this.scope.disableRestricted()}onRestrictedSelected(){this.scope.onRestrictedSelectedFunc&&this.scope.onRestrictedSelectedFunc()}selectVisible(){this.visibilitySelected(E.hbA.Visible)}selectHidden(){this.visibilitySelected(E.hbA.Hidden)}selectConditionalRelease(){let e={contentId:this.contentId};this.ultraState.goPeekState(S.XO.CONDITIONAL_RELEASE_PEEK_PANEL,e)}isEditable(){return!!(!this.isVisibilitySelectorMenuEmpty()&&(this.scope.content.canEdit()||this.scope.content.canEditAvailability&&this.scope.content.canEditAvailability()||!this.scope.content.id))}validateChange(e){if(this.scope.validationFunc){let t=this.scope.validationFunc({visibility:e});return void 0===t||t}return!0}visibilitySelected(e){this.validateChange(e)&&this.confirmVisibilityChange().then(()=>{this.changeVisibility(e)})}confirmVisibilityChange(){var e,t,n,i;let s=null;return((null===(e=this.scope.content)||void 0===e?void 0:null===(t=e.isConditionalRelease)||void 0===t?void 0:t.call(e))&&!(null===(n=this.scope.content)||void 0===n?void 0:null===(i=n.hasOnlyForcedSequenceConditionalReleaseCriteria)||void 0===i?void 0:i.call(n))&&(s=C),s)?this.bbLocalize.loadBundle("features/course/conditional-release/conditional-release").then(()=>this.$modal.open({template:s,scope:this.scope}).result):this.$q.resolve()}changeVisibility(e){this.scope.content&&this.scope.content.isConditionalRelease&&this.scope.content.isConditionalRelease()&&this.scope.content.conditionalReleaseAsync("DELETE"),this.scope.content.setVisibility(e),E.hbA.Restricted===e&&this.onRestrictedSelected(),this.onChange(),this.onBlur()}static getAdaptiveReleaseCriteria(e){return e&&e.rules?e.rules.map(e=>e.criteria).reduce((e,t)=>t.concat(e),[]):null}canDeleteCriteria(e){let t=e.type;switch(t){case"Grade_Range":case"Grade_Range_Percentage":return this.scope.content.permissions.adaptiveRelease.criteria.performance.delete;case"Date_Range":return this.scope.content.permissions.adaptiveRelease.criteria.dates.delete;default:return this.scope.content.permissions.adaptiveRelease.delete}}canDeleteAllCriteria(e){return e.every(e=>this.canDeleteCriteria(e))}canShowVisibleHidden(){let e=w.getAdaptiveReleaseCriteria(this.scope.content.adaptiveReleaseRules);return this.entitledToDeleteConditionalRelease||!e||this.canDeleteAllCriteria(e)}showVisibleHiddenMenuOptions(){let e=this.scope.content.isConditionalRelease&&this.scope.content.isConditionalRelease();return!e||e&&this.canShowVisibleHidden()}showConditionalReleaseMenuOption(){return!this.disableRestricted()&&this.scope.content.id&&this.entitledToViewConditionalRelease}checkShouldShowCourseLinkWarning(){if("function"==typeof this.scope.content.isCourseLink&&this.scope.content.isCourseLink())this.showInfoBanner=!0;else if(this.scope.content.id&&!r.AaE.isDiscussion(this.scope.content)&&!r.AaE.isLink(this.scope.content))return this.$q.when((0,r.gUR)(this.scope.content.courseId,this.scope.content.id)).then(e=>{e&&(this.showInfoBanner=e)});return this.$q.when()}isVisibilitySelectorMenuEmpty(){return!this.showVisibleHiddenMenuOptions()&&!this.showConditionalReleaseMenuOption()}isVisibilitySelectorEnabled(){return!this.scope.isVisibilitySelectorEnabled||this.scope.isVisibilitySelectorEnabled()}isVisibleToStudents(){var e,t,n,i;return(null===(e=this.scope.content)||void 0===e?void 0:null===(t=e.hasOnlyForcedSequenceConditionalReleaseCriteria)||void 0===t?void 0:t.call(e))?this.scope.content.isAvailable:!!(null===(n=this.scope.content)||void 0===n?void 0:null===(i=n.isVisibleToStudents)||void 0===i?void 0:i.call(n))}isHiddenFromStudents(){var e,t,n,i;return(null===(e=this.scope.content)||void 0===e?void 0:null===(t=e.hasOnlyForcedSequenceConditionalReleaseCriteria)||void 0===t?void 0:t.call(e))?!this.scope.content.isAvailable:!!(null===(n=this.scope.content)||void 0===n?void 0:null===(i=n.isHiddenFromStudents)||void 0===i?void 0:i.call(n))}isConditionalRelease(){var e,t;return!(this.isVisibleToStudents()||this.isHiddenFromStudents())&&!!(null===(e=this.scope.content)||void 0===e?void 0:null===(t=e.isConditionalRelease)||void 0===t?void 0:t.call(e))}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({showInfoBanner:r.Ys.content.getHasContentLinksByLinkedContentId(e,this.scope.content.id)}))(this);this.scope.$on("$destroy",e)}constructor(e,t,n,i,r,a,l,p,m){if(this.iScope=e,this.element=t,this.$q=n,this.$ngRedux=i,this.bbLocalize=r,this.entitlementService=a,this.ultraState=l,this.$modal=p,this.currentCourse=m,this.contentHandler="",this.isBbPage=!1,this.todayDate=new Date,this.isFirstDropdownOpen=!0,this.scope=e,this.scope.contentVisibilitySelector=this,this.subscribeToReduxChanges(),this.visibleOptionKey=`components.directives.content-visibility.${m.course.isOrganization?"organization.":""}visible`,this.hiddenOptionKey=`components.directives.content-visibility.${m.course.isOrganization?"organization.":""}hidden`,this.contentId=this.scope.content.id,this.contentHandler=this.scope.content.contentHandler?this.scope.content.contentHandler.toString():"",null==this.contentId){let e=this.scope.$watch(()=>this.scope.content.id,t=>{t&&(null==this.contentId&&(this.contentId=t),e())})}if(this.selectorId=u.d(),this.contentHandler&&d.courseContent.ContentHandler.Folder.isEqualTo(this.contentHandler)&&null!=this.scope.content.contentDetail){let e=this.scope.content.contentDetail[d.courseContent.ContentHandler.Folder.toString()];e&&e.isBbPage&&(this.isBbPage=!0)}if(this.scope.content.permissions){let e=this.scope.content.permissions;this.entitledToViewDesigner=s.isFunction(this.scope.content.canViewAsInstructor)&&this.scope.content.canViewAsInstructor(),e.adaptiveRelease?(this.entitledToViewConditionalRelease=e.adaptiveRelease.view,this.entitledToDeleteConditionalRelease=e.adaptiveRelease.delete):this.loadAdaptiveReleaseEntitlements()}else this.entitlementService.hasCourseEntitlement(o.eo.ViewAsDesigner,this.scope.content.courseId).then(e=>{this.entitledToViewDesigner=e}),this.loadAdaptiveReleaseEntitlements();t.find(".item-visibility-selector, .item-visibility-selector a").on("keydown",e=>{e.keyCode===c.K5&&e.preventDefault()})}}w.$inject=["scope","element","$q","$ngRedux",l.serviceName,a.HV,p.HV,"$modal",h.HV];class A{constructor(e){this.$injector=e,this.restrict="E",this.scope={content:"=",onblurFunc:"&?",onchangeFunc:"&?",onRestrictedSelectedFunc:"&?",openPanelOnRestricted:"&?",disableRestricted:"&?",validationFunc:"&?",isVisibilitySelectorEnabled:"&?",hasMediumIcon:"=?"},this.template=g,this.link=(e,t)=>{e.contentVisibilitySelector=this.$injector.instantiate(w,{scope:e,element:t})}}}A.$inject=["$injector"],i.module(I,[m.e1,h.e1,v]).directive("bbContentVisibilitySelector",["$injector",e=>e.instantiate(A)])},863608:function(e,t,n){"use strict";n.d(t,{e1:function(){return o}});var i=n(464027),s=n(168132),r=n(319663);let o="ultra.directives.lti";class a{constructor(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"="},this.template=r,this.link=(e,t)=>{let n=e.$watch("targetContent.contentHandler",t=>{null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())});!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then(()=>{e.content.description=e.targetContent.description}))}}}a.$inject=[s.N7.H],i.module(o,[]).directive("bbLtiLinkItem",["$injector",e=>e.instantiate(a)])},400969:function(e,t,n){"use strict";n.d(t,{ew:function(){return o},e1:function(){return j}}),n(239707),n(655360),n(801166),n(692330),n(258e3),n(311774),n(848054),n(633562),n(158561),n(895384);var i,s,r,o,a=n(464027),l=n(276635),c=n(612270),d=n(993795),u=n(291146),p=n(335920),m=n(822658),h=n(501),g=n(305233),f=n(247126),b=n(456141),v=n(333099),y=n(309085),C=n(295762),S=n(476522),E=n(445218),I=n(202784),w=n(397236),A=n(273386),k=n(236351);let x=(0,k.X)(({localize:e})=>{let t=(0,A.gH)("components.directives.content-visibility","components.directives.content-visibility.organization");return I.createElement(w.nh,{componentKey:"components.directives.contentVisibility.groupVisibility",announcementTitle:e.translate("components.directives.content-visibility.groupVisibility.title"),content:e.translate(t("components.directives.content-visibility.groupVisibility.content")),buttonAriaLabel:e.translate("components.directives.content-visibility.groupVisibility.buttonAriaLabel"),doneButtonText:e.translate("components.directives.content-visibility.groupVisibility.doneButtonText"),linkHref:e.translate("components.directives.content-visibility.groupVisibility.moreInfoLinkUrl"),linkText:e.translate("components.directives.content-visibility.groupVisibility.moreInfoLinkText"),closeLabel:e.translate("global.close")})}),T="ultra.features.course.content.group.course-group-visibility-ftue";a.module(T,[u.moduleName]).component("bbCourseGroupVisibilityFtue",(0,E.G5)({Class:x,renderLocalized:!0,withProvider:!0}));var P=n(977044),D=n(625506);let G="ultra.components.directives.placeholder";class R{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="A",this.scope=!1,this.require="?ngModel",this.link=(e,t,n,i)=>{if("input"!==t.prop("tagName").toLowerCase())throw Error("Attempted to use bb-placeholder directive on a non-input element");let s=e=>{let t=D("<div></div>").text(e).css("visibility","hidden").appendTo(document.body),n=t.width();return t.remove(),n},r=()=>{let n=t.attr("title"),i=t.prev("span");this.timeout(()=>{t.val()&&t.val()!==n?i.css("visibility","hidden"):(i.css("visibility",""),n&&i.css("margin-left",s(n)+2+"px"))},e,0,!1)};t.wrap('<div class="bb-placeholder"></div>'),t.before('<span class="panel-title bb-placeholder__text">'+n.bbPlaceholder+"</span>"),t.on("cut",r),t.on("keydown",r),t.on("keyup",r),t.on("paste",r),t.on("change",r),t.on("blur",r),t.on("focus click",r),n.$observe("bbPlaceholder",n=>{t.prev("span").text(n),this.timeout(()=>{t.trigger("keydown")},e,0,!1)}),i&&e.$watch(()=>i.$modelValue,()=>{r()})}}}R.$inject=["$injector",g.H],a.module(G,[g.e]).directive("bbPlaceholder",["$injector",e=>e.instantiate(R)]);var B=n(102886),L=n(479442);let N="ultra.components.directives.react-toolkit.teaching-bubble";class O extends I.Component{render(){let e=document.getElementById(this.props.targetId);if(!this.props.show)return null;let t=this.props.calloutProps||{},n={directionalHint:L.DirectionalHint.bottomLeftEdge,directionalHintFixed:!0,minPagePadding:0,preventDismissOnResize:!0,...t};return I.createElement(B.TeachingBubble,{analyticsId:this.props.analyticsId,targetElement:e,headline:this.props.headline,onDismiss:this.props.dismiss,calloutProps:n,teachingBubbleTooltipId:this.props.tooltipId},this.props.message)}}a.module(N,[]).component("bbUiTeachingBubble",(0,E.G5)({Class:O,bindingNames:["analyticsId","targetId","tooltipId","headline","message","show","dismiss","calloutProps"],withThemeProvider:!1,withErrorModalBoundary:!1}));var M=n(551669),$=n(112746),H=n(529462),F=n(614682),U=n(283927),V=n(606592),_=n(168132),q=n(377343),z=n(548792),W=n(451251);let j="ultra.components.directives.content.panelHeader";(i=r||(r={})).ContentOnly="ContentOnly",i.ContentAndDelete="ContentAndDelete",i.ContentAndHandler="ContentAndHandler",i.ContentAndDeleteAndHandler="ContentAndDeleteAndHandler",i.DeleteAndHandler="DeleteAndHandler",i.None="None",(s=o||(o={})).Gear="settings",s.Info="information";class Z{configure(){this.configureLocalizationKeys(),this.element.closest(".panel-wrap").addClass("has-bb-panel-header"),this.contextCourse.course?this.courseName=this.contextCourse.course.displayName:this.scope.$watch("::content",e=>{e&&this.CourseModel.$find(e.courseId).$then(e=>{this.courseName=e.displayName})}),this.scope.$watch("::content",e=>{e&&this.allyService.isAvailable().then(e=>{e&&(this.canShowAlly=!0,this.allyService.update(this.scope,this.scope.content.id,this.allyService.getXythosIdFromContentItem(this.scope.content)))})})}focusReadonlyPanelTitle(){let{disableTitleAutofocus:e,focusTitleForEdit:t}=this.scope,n=!e&&!(null==t?void 0:t());return n}forceTitleFocus(){if(null!=this.scope.panelTitle)this.accessibility.focusCorrectElementOnPanel();else{let e=this.scope.$watch("panelTitle",t=>{null!=t&&(this.accessibility.focusCorrectElementOnPanel(),e())})}}get panelHeaderTitle(){return this.scope.panelHeaderTitle?this.scope.panelHeaderTitle:this.courseName}getTeachingBubbleTargetElementId(){return this.inputId}getTeachingBubbleTooltipId(){return this.teachingBubbleTooltipId}getTeachingBubbleAnalyticsId(){return this.teachingBubbleAnalyticsId}inputExists(){return this.element.find(`#${this.getTeachingBubbleTargetElementId()}`).length>0}getTeachingBubbleHeadline(){return this.localize.translateSync({key:this.teachingBubbleHeadlineLocalizationKey,locale:this.localize.getLocale(this.scope)})}getTeachingBubbleMessage(){return this.localize.translateSync({key:`components.directives.header.teachingBubble.${this.contextCourse.course&&this.contextCourse.course.isOrganization?"organization.":""}message`,locale:this.localize.getLocale(this.scope)})}setTeachingBubbleState(){if(this.scope.setTeachingBubbleAsFtue){let e=this.element.closest(".bb-offcanvas-panel").attr("data-base-state-name"),t=this.getTeachingBubbleComponentKey();this.firstTimeHelper.shouldShow(t,e,!1).then(e=>{this.shouldShowFtueTeachingBubble=e,this.teachingBubbleHasBeenShown=!this.shouldShowFtueTeachingBubble})}else this.teachingBubbleHasBeenShown=!1}setFtueTeachingBubbleAsShown(){if(this.scope.setTeachingBubbleAsFtue&&this.shouldShowFtueTeachingBubble){let e=this.getTeachingBubbleComponentKey();this.firstTimeHelper.hide(e)}}onBlurTitle(e){let t=e.target,n=e.relatedTarget;if(t&&n&&(0,F._y)(t)!==(0,F._y)(n)){this.scope.panelTitle&&this.scope.panelTitle.length||(this.scope.panelTitle=this.translatedPlaceholder,this.delayedTitleBlur());return}this.onReadMode(),this.scope.hasError||this.delayedTitleBlur()}delayedTitleBlur(){this.scope.onblurFuncTitle&&this.timeout(()=>{this.scope.onblurFuncTitle()},this.scope,0)}onChangeTitle(){let e=!this.teachingBubbleHasBeenShown;if(this.teachingBubbleHasBeenShown=!0,this.scope.onchangeFuncTitle&&!this.scope.hasError&&this.scope.onchangeFuncTitle(),e){var t,n;null===(n=(t=this.scope).dismissTeachingBubble)||void 0===n||n.call(t)}}onBlurVisibility(){this.onReadMode(),this.scope.onblurFuncVisibility&&!this.scope.hasError&&this.scope.onblurFuncVisibility()}onChangeVisibility(){this.scope.onchangeFuncVisibility&&!this.scope.hasError&&this.scope.onchangeFuncVisibility()}onRestrictedSelected(){this.scope.onRestrictedSelectedFuncTitle&&!this.scope.hasError&&this.scope.onRestrictedSelectedFuncTitle()}validateVisibilityChange(e){if(this.scope.validationFuncVisibility){let t=this.scope.validationFuncVisibility({visibility:e});return void 0===t||t}return!0}onEditButtonMouseOver(){this.isEditButtonHovering=!0}onEditButtonMouseLeave(){this.isEditButtonHovering=!1}validateTitle(){this.autoTitle(),this.scope.panelTitle?this.editMode=!1:this.editMode=!0}onEditMode(){this.scope.canEdit?(this.editMode=!0,this.panelTitleOrig=this.scope.panelTitle,this.bbOffcanvas.safeFocus(this.element.find(".panel-header-title"))):this.editMode=!1}titlePressKey(e){(e.keyCode===V.K5||e.keyCode===V.L_)&&this.scope.canEdit&&(e.preventDefault(),this.bbOffcanvas.safeFocus(this.element.find(".edit-title")))}blurTitle(e){let t=e.target;t.removeAttribute("bb-focus"),t.setAttribute("tabindex","-1")}pressKey(e){if(13===e.keyCode){e.preventDefault(),e.stopPropagation();let t=this.element.find(".panel-header-title").get(0);t.blur()}else e.keyCode===V.hY&&this.editMode&&this.scope.panelTitle!==this.panelTitleOrig&&(e.preventDefault(),e.stopPropagation(),this.scope.panelTitle=this.panelTitleOrig,this.editMode||this.bbOffcanvas.safeFocus(this.element.find(".panel-title")))}onReadMode(){this.scope.filterTitleTags&&this.scope.filterTitleTags()&&this.filterTitleTags(),this.validateTitle()}filterTitleTags(){this.scope.panelTitle&&(this.scope.panelTitle=this.scope.panelTitle.replace(U.a,""))}configureLocalizationKeys(){let e="components.directives.header";this.scope.localizationKey?(this.placeholderLocalizationKey=`${e}.placeholder.${this.scope.localizationKey}`,this.teachingBubbleHeadlineLocalizationKey=`${e}.teachingBubble.headline.${this.scope.localizationKey}`,this.panelAriaLocalizationKey=this.scope.ariaLocalizationKey?`${e}.aria.title.${this.scope.ariaLocalizationKey}`:this.placeholderLocalizationKey):this.scope.content&&this.scope.content.$then(()=>{if(this.scope.content.contentHandler){let t=this.scope.content.contentHandler.toString().replace("resource/","");this.placeholderLocalizationKey=`${e}.placeholder.${t}`,this.panelAriaLocalizationKey=this.scope.ariaLocalizationKey?`${e}.aria.title.${this.scope.ariaLocalizationKey}`:this.placeholderLocalizationKey,this.teachingBubbleHeadlineLocalizationKey=`${e}.teachingBubble.headline.${t}`}})}gotoConversation(e){var t,n;(null===(n=(t=this.scope).onNavigateToConversation)||void 0===n?void 0:n.call(t))!==!1&&this.ultraState.goPeekState("conversations",{courseId:this.scope.content.courseId,contentId:this.scope.content.id,groupId:e||"default"})}autoTitle(){if(!this.scope.panelTitle&&this.scope.autoTitle&&this.scope.autoTitle()){let e=this.translatedPlaceholder;this.scope.panelTitle=e}}shouldShowTeachingBubble(){return!this.teachingBubbleHasBeenShown&&this.scope.showEmptyTitleReminder&&this.inputExists()}getDeleteDirectiveArgumentType(){let e=r.None;return this.scope.content&&this.scope.content.contentHandler?(e=r.ContentOnly,this.attrs.ondeleteFunc?(e=r.ContentAndDelete,this.scope.ondeleteConfirmHandler&&(e=r.ContentAndDeleteAndHandler)):this.scope.ondeleteConfirmHandler&&(e=r.ContentAndHandler)):this.attrs.ondeleteFunc&&this.scope.ondeleteConfirmHandler&&(e=r.DeleteAndHandler),e}getButtonGroupClass(){let e=0,t=0;return this.scope.showConversations&&this.scope.showConversations()&&(e+=1,t+=1),this.scope.showParticipants&&this.scope.showParticipants()&&(e+=1),this.scope.showSettings&&this.scope.showSettings()&&(e+=1,t+=1),this.scope.showDelete&&this.scope.showDelete()&&(this.scope.showSettings&&this.scope.showSettings()||(e+=1),t+=1),"small-buttons-"+e+" large-buttons-"+t}getSettingsIcon(){return this.scope.settingsIcon?this.scope.settingsIcon:o.Gear.toString()}openSettingsPanel(){null!=this.scope.settingsDisabled&&this.scope.settingsDisabled()||this.ultraState.goPeekState(this.scope.settingsPeekRef)}isVisibilitySelectorEnabled(){return!this.scope.isVisibilitySelectorEnabled||this.scope.isVisibilitySelectorEnabled()}constructor(e,t,n,i,s,r,o,a,c,d,u,p,m){this.scope=e,this.element=t,this.attrs=n,this.accessibility=i,this.timeout=s,this.bbOffcanvas=r,this.context=o,this.CourseModel=a,this.localize=c,this.ultraState=d,this.contextCourse=u,this.allyService=p,this.firstTimeHelper=m,this.isEditButtonHovering=!1,this.inputId=`bb-panel-header-input-${(0,H.V)()}`,this.teachingBubbleTooltipId=`bb-panel-header-tooltip-${(0,H.V)()}`,this.teachingBubbleHasBeenShown=!0,this.teachingBubbleAnalyticsId=`bb-panel-header-tooltip-${(0,H.V)()}`,this.shouldShowFtueTeachingBubble=!1,this.dismissTeachingBubble=()=>{var e,t;this.teachingBubbleHasBeenShown=!0,null===(t=(e=this.scope).dismissTeachingBubble)||void 0===t||t.call(e),this.scope.$apply()},this.getTeachingBubbleComponentKey=()=>(0,W.EY)(`TEACHING_BUBBLE_COMPONENT_KEY_${this.scope.localizationKey}`,z.U1),this.getAriaLabel=(()=>{let e=l.memoize(e=>this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"components.directives.header.aria.edit",params:{title:e},noWrap:!0,noEscape:!0}));return()=>e(this.scope.panelTitle)})(),this.scope.panelHeader=this,this.accessibility.isFocusDelayed=!0,this.configure(),c.loadBundle("components/directives/panel-header").then(()=>{this.placeholderLocalizationKey&&(this.translatedPlaceholder=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:this.placeholderLocalizationKey,params:{date:this.context.getServerTime()},noWrap:!0})),(!this.scope.panelTitle||this.scope.focusTitleForEdit&&this.scope.focusTitleForEdit())&&this.scope.canEdit?(this.onEditMode(),this.scope.keepTitleOnEdit&&this.scope.keepTitleOnEdit()?this.element.find(".panel-header-title").get(0).setSelectionRange(0,0):this.scope.panelTitle&&(this.scope.panelTitle=""),this.timeout(()=>{this.setTeachingBubbleState()},this.scope,0)):(this.editMode=!1,this.focusReadonlyPanelTitle()&&this.forceTitleFocus())}),this.scope.setPlaceholderAsDefaultTitle&&this.scope.setPlaceholderAsDefaultTitle()&&!this.scope.panelTitle&&e.$watch(()=>this.element.find("input.panel-title").attr("placeholder"),e=>{e&&(this.scope.panelTitle=e)}),this.scope.$on("panel-header-force-edit-mode",(e,t)=>{this.editMode=t}),this.scope.$on("$destroy",()=>{this.setFtueTeachingBubbleAsShown()})}}Z.$inject=["scope","element","attrs",c.HV,g.H,p.HV,h.HV,_.N7.H,u.serviceName,f.HV,m.HV,d.HV,z.HV];class K{constructor(e){this.$injector=e,this.restrict="E",this.template=q,this.transclude={panelHeaderCustomIcons:"?bbPanelHeaderCustomIcons",panelHeaderActions:"?bbPanelHeaderCustomActions"},this.scope={showCourse:"&?",panelHeaderTitle:"@?",panelHeaderTitleTranslateKey:"@?",content:"=",contentId:"=?",canEdit:"=",mode:"@?",hasError:"=?",hasSlider:"&?",showDelete:"&?",ondeleteFunc:"&?",ondeleteConfirmHandler:"@?",choices:"=?",showConversations:"&?",onconversationsFunc:"&?",onNavigateToConversation:"&?",showVisibility:"&?",onchangeFuncVisibility:"&?",onblurFuncVisibility:"&?",disableRestricted:"&?",openPanelOnRestricted:"&?",validationFuncVisibility:"&?",panelTitle:"=?",setPlaceholderAsDefaultTitle:"&?",localizationKey:"@",ariaLocalizationKey:"@",localizationAttrsValues:"@",onchangeFuncTitle:"&?",onblurFuncTitle:"&?",onRestrictedSelectedFuncTitle:"&?",maxLength:"=?",autoTitle:"&?",disableTitleAutofocus:"<?",focusTitleForEdit:"&?",keepTitleOnEdit:"&?",showSubmissionsGrading:"&?",summary:"=?",isFiltered:"=?",filteredCount:"=?",showAllyIcon:"&?",showSettings:"&?",settingsDisabled:"&?",settingsIcon:"@?",settingsPeekRef:"@?",settingsLabel:"@?",showParticipants:"&?",isVisibilitySelectorEnabled:"&?",filterTitleTags:"&?",showEmptyTitleReminder:"&?",dismissTeachingBubble:"&?",setTeachingBubbleAsFtue:"@?"},this.link=(e,t,n)=>{e.panelHeader=this.$injector.instantiate(Z,{scope:e,element:t,attrs:n})}}}K.$inject=["$injector",b.H,_.N7.H],a.module(j,[c.e1,p.e1,$.e,C.e1,S.e1,T,P.e1,G,f.e1,M.e,N,v.e1,y.e1,z.e1]).directive("bbPanelHeader",["$injector",e=>e.instantiate(K)])},86945:function(e,t,n){"use strict";n.d(t,{OC:function(){return m},e1:function(){return u},ns:function(){return p}}),n(722113),n(215990);var i=n(464027),s=n(58887),r=n(168132),o=n(64314),a=n(247126),l=n(159212),c=n(468706),d=n(291146);let u="ultra.directives.courseCatalogLink",p="course",m="org",h="ultraui.coursecatalog.link",g="ultraui.organizationcatalog.link",f="classic_course_catalog_link_ind",b="classic_course_catalog_link",v={[h]:"Disabled",[g]:"Disabled",[f]:"N",[b]:""};class y{handleSystemPreferencesResponse(e){let t=this.getPreferenceValueByKey(e,this.getCatalogLinkKey())||v[this.getCatalogLinkKey()];this.scope.shouldDisplayCatalogLink="Enabled"===t;let n=this.getPreferenceValueByKey(e,f)||v[f];this.scope.isExternalCatalog="Y"===n,this.scope.externalCatalogUrl=this.getPreferenceValueByKey(e,b)||v[b]}getPreferenceValueByKey(e,t){let n=e.find(e=>e.key===t);return n?n.value:null}getCatalogLinkKey(){return this.attrs.catalogType===p?h:g}constructor(e,t,n,i,r,o,a,l){this.scope=e,this.attrs=t,this.$q=n,this.SystemPreferenceModel=i,this.batchService=r,this.ultraState=o,this.windowSizeService=a,this.bbLocalize=l,this.template=s,r.performBatch(()=>{n.all([i.$find(this.getCatalogLinkKey()).$allow([404]).$asPromise(),i.$find(f).$allow([404]).$asPromise(),i.$find(b).$allow([404]).$asPromise()]).then(e=>{this.handleSystemPreferencesResponse(e)})});let c=t.catalogType===m?"base.organization-catalog":"base.course-catalog";e.handleCatalogLink=()=>{o.goToRoute(c)},e.windowSizeService=a,a.isLargeBreakpoint()||this.bbLocalize.loadBundle("base/baseCourses").then(()=>{e.ariaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"base.baseCourses.link"})})}}y.$inject=["scope","attrs","$q",r.B5.H,o.HV,a.HV,l.HV,d.serviceName];class C{constructor(e){this.$injector=e,this.template=s,this.link=(e,t,n)=>{e.courseCatalogLink=this.$injector.instantiate(y,{scope:e,element:t,attrs:n})}}}C.$inject=["$injector"],i.module(u,[r.e1,o.e1,a.e1,l.e1,c.e1]).directive("bbCourseCatalogLink",["$injector",e=>e.instantiate(C)])},468706:function(e,t,n){"use strict";n.d(t,{e1:function(){return l}});var i=n(247126),s=n(822658),r=n(211796),o=n(464027);function a(e,t){return function(n,i){t(n,i,e)}}let l="ultra.components.directives.courseOrgTokenReplacementDirective",c=[{coursePrefix:"base.baseCourses",orgPrefix:"base.baseOrganizations"},{coursePrefix:"base.courses",orgPrefix:"base.organizations"},{coursePrefix:"course",orgPrefix:"organization"},{coursePrefix:"components.directives.message",orgPrefix:"components.directives.message.organization"},{coursePrefix:"components.directives.learning-module.ghost-panel",orgPrefix:"components.directives.learning-module.orgs-ghost-panel"},{coursePrefix:"components.directives.calendar",orgPrefix:"components.directives.calendar.organization"},{coursePrefix:"components.directives.content-visibility",orgPrefix:"components.directives.content-visibility.organization"},{coursePrefix:"components.directives.grade",orgPrefix:"components.directives.grade.organization"},{coursePrefix:"components.directives.telemetry",orgPrefix:"components.directives.telemetry.organization"}];class d{replaceToken(e){if(e){let t=c.find(t=>e.startsWith(t.coursePrefix));if(t)return e.replace(t.coursePrefix,t.orgPrefix)}return e}constructor(e,t,n,i,s){this.element=e,this.attributes=t,this.scope=n,this.ultraState=i,this.currentCourse=s;try{let n=i.includes("base.organizations.**")||s.course&&s.course.isOrganization;if(n&&(t.bbTranslate&&(t.bbTranslate=this.replaceToken(t.bbTranslate),e.attr("bb-translate",this.replaceToken(t.bbTranslate))),t.bbTranslateAttrs)){let n=t.bbTranslateAttrs;o.forEach(this.scope.$eval(n),e=>{n=n.replace(e,this.replaceToken(e))}),t.bbTranslateAttrs=n,e.attr("bb-translate-attrs",n)}}catch(e){}}}class u{constructor(e,t){this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=()=>(e,t,n)=>new d(t,n,e,this.ultraState,this.currentCourse)}}u=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([a(0,(0,r.tB)(i.HV)),a(1,(0,r.tB)(s.HV))],u),o.module(l,[i.e1]).directive("courseOrgTokenResolver",["$injector",e=>e.instantiate(u)])},173773:function(e,t,n){"use strict";n.d(t,{e1:function(){return r}});var i=n(464027),s=n(291146);let r="ultra.directives.bbDate";class o{compile(e){let t=e.html();return(e,n,i)=>{let r=t=>{let r=this.bbLocalize.getFormatEnum(s.ILocaleDateFormat,i.format)||s.ILocaleDateFormat.Full,o=e=>{"bb-date"===n.prop("tagName").toLowerCase()?n.replaceWith(e):n.html(e)};null==t?o(""):this.bbLocalize.formatDate(t,r,e).then(o)},o=t=>t?new Date(this.$parse(t)(e)):null;"true"===i.autoUpdate?i.$observe("bbDate",()=>{r(o(i.bbDate))}):r(this.$parse(t)(e)||o(i.bbDate))}}constructor(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}}o.$inject=["$parse",s.serviceName],i.module(r,[s.moduleName]).directive("bbDate",["$injector",e=>e.instantiate(o)])},226464:function(e,t,n){"use strict";n.d(t,{e1:function(){return m}}),n(318494),n(428881);var i=n(276635),s=n(625506),r=n(464027),o=n(291146),a=n(925676),l=n(270679),c=n(887545),d=n(606592),u=n(619034),p=n(915539);let m="ultra.components.directives.datepicker";class h{initialize(){let e=this.bbLocalize.getLocale(this.scope);if(this.localeString=null,null==this.attrs.bbValidateDate){this.attrs.bbValidateDate="short";let e=this.bbValidateDate[0].compile(this.element,this.attrs,void 0);e(this.scope,this.element,this.attrs,this.model,this.$transclude)}if(!l.Z.detect().desktop()&&window.Modernizr.inputtypes.date){if(this.setupNativeDatePicker(),this.attrs.$set("type","date"),this.element.removeAttr("placeholder"),this.attrs.bbTranslateAttrs){let e=this.scope.$eval(this.attrs.bbTranslateAttrs);e.placeholder&&(delete e.placeholder,this.attrs.bbTranslateAttrs=JSON.stringify(e))}}else{this.bbLocalize.loadBundle("components/directives/datepicker").then(()=>{if(null==this.attrs.placeholder&&this.attrs.$set("placeholder",this.bbLocalize.translateSync({locale:e,key:"components.directives.datepicker.dateFormatPlaceholder"})),this.model.$modelValue){let e=this.bbLocalize.formatDateSync(this.model.$modelValue,o.ILocaleDateFormat.Short,this.scope);this.element.val(e)}let t=this.bbLocalize.translateSync({locale:e,key:"components.directives.datepicker.ariaLabel.datepickerButton"});this.widgetButton=this.$compile(`<button class="open-datepicker super-clear js-datepicker-toggle-btn" aria-label="${t}" type="button"><bb-svg-icon size="small" icon="calendar"></bb-svg-icon></button>`)(this.scope),this.updateReadOnlyState(),this.widgetButton.on("focus",()=>{let e=document.querySelector('[name="due-date"]');(null==e?void 0:e.hasAttribute("disabled"))&&(null==e?void 0:e.getAttribute("disabled"))&&this.widgetButton.blur()}),this.attrs.$observe("disabled",e=>{this.updateReadOnlyState()}),this.attrs.$observe("readonly",e=>{this.updateReadOnlyState()})}),this.localeString=this.bbLocalize.preProcessFormatterLocale(e).replace(/_/g,"-"),3===this.localeString.split("-").length&&(this.localeString=this.localeString.split("-").filter((e,t)=>t<2).join("-")),0>["zh-TW","zh-CN","rs-latin","pt-BR","nl-BE"].indexOf(this.localeString)&&("en-SC"===this.localeString?this.localeString="ar":"ko-KR"===this.localeString?this.localeString="kr":"nb-NO"===this.localeString||"nn-NO"===this.localeString?this.localeString="no":this.localeString=this.localeString.substring(2,0)),this.attrs.$set("type","text");let t=this.bbLocalize.isRTL(this.scope);if(this.attrs.container){let e=s(this.attrs.container);e.length&&(this.container=e)}this.attrs.orientation&&(this.orientation=this.attrs.orientation);let i={todayHighlight:!0,beforeShowDay:e=>({content:this.bbLocalize.formatNumberSync(e.getDate(),this.scope)}),autoclose:!0,forceParse:!1,container:this.container,keyboardNavigation:!1,language:this.localeString,orientation:this.orientation,weekStart:this.weekStart,rtl:t,showOnFocus:!1,startDate:new Date("1900-01-01"),templates:{leftArrow:'<div class="icon-arrow-left"></div>',rightArrow:'<div class="icon-arrow-right"></div>'}};"en"===this.localeString?this.setupBootstrapDatePicker(i):(this.localeString="bootstrap-datepicker."+this.localeString,n.e(24625).then((()=>{n(414808)("./"+this.localeString).then(()=>{this.setupBootstrapDatePicker(i)})}).bind(null,n)).catch(()=>{})),this.scope.$on("$destroy",()=>{this.element.datepicker("destroy")})}}setupNativeDatePicker(){this.scope.$watch(()=>this.model.$modelValue,e=>{e&&(this.element.val(u(e).format("YYYY-MM-DD")),this.element.triggerHandler("change"),this.model.$render())})}setupBootstrapDatePicker(e){this.element.datepicker(e).data("datepicker"),this.scope.$watch(()=>this.model.$modelValue,()=>{this.updateDatepicker()}),this.element.on("changeDate",e=>{if(e.date){let t=this.bbLocalize.formatDateSync(e.date,o.ILocaleDateFormat.Short,this.scope);this.element.val(t),this.element.triggerHandler("change"),this.model.$render()}});let t=this.element.data("datepicker");t.isInput=!1,this.element.unbind("keyup",t._events[0][1].keyup),this.element.on("show changeMonth changeYear",e=>{this.datepickerDropdownElement=s(".datepicker-dropdown"),this.iconArrowLeft=this.datepickerDropdownElement.find(".icon-arrow-left"),this.iconArrowRight=this.datepickerDropdownElement.find(".icon-arrow-right"),this.openDatepickerButton=this.element.siblings("button.open-datepicker");let t=[];this.datepickerDropdownElement.find("td.day").not(".old").not(".new").each(function(){t.push(s(this))}),this.currentMonthDays=t,this.datepickerDropdownElement.on("keydown",e=>{e.keyCode===d.hY&&(this.openDatepickerButton.focus(),this.element.datepicker("hide"))}),this.iconArrowLeft.add(this.iconArrowRight).on("blur",()=>{this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true")}),this.iconArrowLeft.off("keydown").on("keydown",e=>{e.preventDefault(),e.keyCode!==d.hY&&e.stopPropagation(),e.keyCode===d.L_||e.keyCode===d.K5?(this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),this.goToPreviousMonth()):e.keyCode===d.Mf&&(e.shiftKey?(this.openDatepickerButton.focus(),this.element.datepicker("hide")):this.focusElement(this.iconArrowRight))}),this.iconArrowRight.off("keydown").on("keydown",e=>{e.preventDefault(),e.keyCode!==d.hY&&e.stopPropagation(),e.keyCode===d.L_||e.keyCode===d.K5?(this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),this.goToNextMonth()):e.keyCode===d.Mf&&(e.shiftKey?this.focusElement(this.iconArrowLeft):this.focusDefaultDay())}),this.updateAriaRolesAndStates(this.getViewDate(),e.date),this.setUpKeyboardNavigation(),"show"===e.type&&(this.datepickerDropdownElement.find("tfoot").remove(),this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true"),this.datepickerDropdownElement.on("keyup",e=>{e.stopPropagation()}),this.focusDefaultDay())})}updateDatepicker(){let e=this.model.$modelValue,t=this.element.data("datepicker");if(r.isDate(e)&&t){let n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),i=t.getUTCDate();i&&i.getTime()===n.getTime()||(t.dates.replace([n]),t.viewDate=n,t.fill())}}updateReadOnlyState(){!this.element.hasClass("show-calendar-icon")&&(this.element.prop("disabled")||this.element.prop("readonly"))?this.widgetButton.remove():this.element.next()!==this.widgetButton&&(this.widgetButton.click(e=>{this.element.datepicker("show")}),this.element.after(this.widgetButton))}focusDefaultDay(){let e=i.find(this.currentMonthDays,e=>e.hasClass("active")),t=null!=e?e:this.currentMonthDays[0];this.focusElement(t)}focusPreviousDay(){let e=this.getActiveElementIndex();0===e?(this.goToPreviousMonth(),this.focusLastDayOfMonth()):this.focusElement(this.currentMonthDays[e-1])}focusNextDay(){let e=this.getActiveElementIndex();e<this.currentMonthDays.length-1?this.focusElement(this.currentMonthDays[e+1]):(this.goToNextMonth(),this.focusElement(this.currentMonthDays[0]))}focusSameWeekdayOfPreviousWeek(){let e=this.getActiveElementIndex();e-7>=0?this.focusElement(this.currentMonthDays[e-7]):(this.goToPreviousMonth(),this.focusElement(this.currentMonthDays[this.currentMonthDays.length-(7-e)]))}focusSameWeekdayOfNextWeek(){let e=this.getActiveElementIndex();if(e+7<this.currentMonthDays.length)this.focusElement(this.currentMonthDays[e+7]);else{let t=e+7-this.currentMonthDays.length;this.goToNextMonth(),this.focusElement(this.currentMonthDays[t])}}focusSameDayOfPreviousMonth(){this.focusSameDayOfAdjacentMonth(-1)}focusSameDayOfNextMonth(){this.focusSameDayOfAdjacentMonth(1)}focusSameDayOfAdjacentMonth(e){let t=this.getActiveElementIndex();e>0?this.goToNextMonth():this.goToPreviousMonth(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()}focusSameDayOfPreviousYear(){this.focusSameDayOfAdjacentYear(-1)}focusSameDayOfNextYear(){this.focusSameDayOfAdjacentYear(1)}focusSameDayOfAdjacentYear(e){let t=this.getActiveElementIndex();e>0?this.goToNextYear():this.goToPreviousYear(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()}focusFirstDayOfMonth(){this.focusElement(this.currentMonthDays[0])}focusLastDayOfMonth(){this.focusElement(this.currentMonthDays[this.currentMonthDays.length-1])}focusElement(e){e.attr("tabindex","-1").focus()}getViewDate(){return this.element.data("datepicker").viewDate}setViewDate(e){this.element.data("datepicker").viewDate=e}getActiveElementIndex(){return i.findIndex(this.currentMonthDays,e=>e.attr("id")===s(document.activeElement).attr("id"))}goToPreviousMonth(){this.moveMonth(-1)}goToNextMonth(){this.moveMonth(1)}goToPreviousYear(){this.moveYear(-1)}goToNextYear(){this.moveYear(1)}moveMonth(e){let t=this.getViewDate();this.setViewDate(this.element.datepicker("moveMonth",t,e)),this.element.datepicker("fill"),this.element.trigger("changeMonth")}moveYear(e){let t=this.getViewDate();this.setViewDate(this.element.datepicker("moveYear",t,e)),this.element.datepicker("fill"),this.element.trigger("changeYear")}getAdjustedDate(e){let t=new Date(parseInt(e,10));return new Date(t.getTime()+6e4*t.getTimezoneOffset())}updateAriaRolesAndStates(e,t){let n=this.bbLocalize.getLocale(this.scope),i=this.bbLocalize.translateSync({locale:n,key:"components.directives.datepicker.ariaLabel.container"});this.datepickerDropdownElement.attr("role","application").attr("aria-label",i),this.datepickerDropdownElement.find("table").attr("role","grid").attr("aria-label",i);let r=this.bbLocalize.translateSync({locale:n,key:"components.directives.datepicker.ariaLabel.previousMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-left").attr("aria-label",r).attr("role","button");let o=this.bbLocalize.translateSync({locale:n,key:"components.directives.datepicker.ariaLabel.nextMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-right").attr("aria-label",o).attr("role","button"),this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-live","assertive").attr("aria-atomic","true"),this.datepickerDropdownElement.find("thead th").attr("role","gridcell"),this.datepickerDropdownElement.find("table").removeAttr("aria-activedescendant");let a=u(e),l=u(a).subtract({months:1}),c=u(a).add({months:1});this.datepickerDropdownElement.find("td").each((e,t)=>{let n,i;let r=s(t);r.attr("role","gridcell");let o=t.getAttribute("data-date");i=r.hasClass("old")?l.toDate():r.hasClass("new")?c.toDate():a.toDate(),n=o?this.getAdjustedDate(o):new Date(i.getFullYear(),i.getMonth(),+r.text());let d=u(n);if(Number.isNaN(d.date()))return;r.attr("aria-label",this.bbLocalize.formatDateSync(d.toDate()));let p="datepicker-td-"+d.unix();r.attr("id",p),r.hasClass("active")&&(r.attr("aria-selected","true"),this.datepickerDropdownElement.find("table").attr("aria-activedescendant",p))})}setUpKeyboardNavigation(){this.currentMonthDays.forEach(e=>{e.off("keydown").on("keydown",e=>{switch(e.preventDefault(),e.keyCode!==d.K5&&e.keyCode!==d.hY&&e.stopPropagation(),p.Pq.enableFocusOutline(),e.keyCode){case d.RL:this.bbLocalize.isRTL()?this.focusNextDay():this.focusPreviousDay();break;case d.pX:this.bbLocalize.isRTL()?this.focusPreviousDay():this.focusNextDay();break;case d.UP:this.focusSameWeekdayOfPreviousWeek();break;case d.WV:this.focusSameWeekdayOfNextWeek();break;case d.Ku:e.ctrlKey||e.altKey?this.focusSameDayOfPreviousYear():this.focusSameDayOfPreviousMonth();break;case d.VM:e.ctrlKey||e.altKey?this.focusSameDayOfNextYear():this.focusSameDayOfNextMonth();break;case d.Sd:this.focusFirstDayOfMonth();break;case d.uR:this.focusLastDayOfMonth();break;case d.Mf:e.shiftKey?this.focusElement(this.iconArrowRight):(c.Bv(null,this.openDatepickerButton),this.element.datepicker("hide"));break;case d.K5:case d.L_:this.currentMonthDays[this.getActiveElementIndex()].click(),this.openDatepickerButton.focus()}})})}constructor(e,t,n,i,s,r,o,a){this.scope=e,this.element=t,this.attrs=n,this.model=i,this.$transclude=s,this.bbLocalize=r,this.bbValidateDate=o,this.$compile=a,this.attrs.firstDayOfWeek?this.scope.$watch(`${this.attrs.firstDayOfWeek}`,e=>{void 0!==e&&(this.weekStart=e,this.initialize())}):this.initialize()}}h.$inject=["scope","element","attrs","model","$transclude",o.serviceName,a.Ei+"Directive","$compile"];class g{constructor(e){this.$injector=e,this.priority=1,this.restrict="A",this.require="ngModel",this.link=(e,t,n,i,s)=>{e.datepicker=this.$injector.instantiate(h,{scope:e,element:t,attrs:n,model:i,$transclude:s})}}}g.$inject=["$injector"],r.module(m,[o.moduleName,a.e1]).directive("bbDatePicker",["$injector",e=>e.instantiate(g)])},442424:function(e,t,n){"use strict";n.d(t,{e1:function(){return r}});var i=n(464027),s=n(291146);let r="ultra.components.directives.bbDatetime";class o{constructor(e,t,n){this.$parse=e,this.$q=t,this.bbLocalize=n,this.restrict="E",this.scope={value:"&"},this.link=(e,t,n)=>{let r=n.format,o=n.timezoneFormat;e.$watch(()=>e.value(),n=>{let a=s.ILocaleDatetimeFormat.Short,l=s.ILocaleTimezoneFormat.Short;if(!i.isDate(n))return t.html("");if(r&&(a=this.bbLocalize.getFormatEnum(s.ILocaleDatetimeFormat,r)),o&&(l=this.bbLocalize.getFormatEnum(s.ILocaleTimezoneFormat,o)),r&&o)this.bbLocalize.translate({locale:this.bbLocalize.getLocale(e),key:`components.directives.datetime.datetimeWithTimezone.${r.toUpperCase()}_datetime_${o.toUpperCase()}_timezone`,params:{datetime:n},noWrap:!0,noEscape:!0}).then(e=>{t.html(e)});else{let i=o?this.bbLocalize.formatTimezone(n,l):this.bbLocalize.formatDatetime(n,a,e);i.then(e=>{t.html(e)})}},!0)}}}o.$inject=["$parse","$q",s.serviceName],i.module(r,[s.moduleName]).directive("bbDatetime",["$injector",e=>e.instantiate(o)])},977044:function(e,t,n){"use strict";n.d(t,{e1:function(){return b}});var i=n(625506),s=n(276635),r=n(464027),o=n(916415),a=n(108404),l=n(429794),c=n(822658),d=n(624930),u=n(168132),p=n(305233),m=n(247126),h=n(838700),g=n(555342),f=n(812450);let b="ultra.components.directives.delete";class v{initialize(){let e;this.scope.unregisterAutoSave=s.once(this.scope.$root.$on("bb-autosave-form",(e,t,n)=>{if(g.Ht.Saving===t){let e=i(document.activeElement);e&&e.length&&(this.focusedElement=e[0]),this.scope.savingInProgress=!0}else this.scope.savingInProgress=!1,this.timeout(()=>{this.focusedElement&&(this.focusedElement.focus(),this.focusedElement=null)},this.scope,0)})),this.scope.$on("$destroy",this.scope.unregisterAutoSave),this.scope.parent=this.scope.$parent,o.ZU.OnRootScope(this.scope,"disable-delete",e=>{this.isDeleteDisabled=!0}),o.ZU.OnRootScope(this.scope,"enable-delete",e=>{this.isDeleteDisabled=!1});let t=this.contextCourse.courseId||this.scope.courseId&&this.scope.courseId();if(t&&(e=this.courseModel.$new(t)),this.scope.contentId&&!t)throw new d.v({message:"A courseId must be provided when contentId is used"});if(this.requiredArgumentsSupplied=!0,this.scope.attrTranslateKey="components.directives.delete.control-delete-label",this.attrs.confirmationHandler&&(this.modalShowType="always",this.scope.attrTranslateKey="components.directives.delete.handlers."+this.attrs.confirmationHandler.replace("resource/","")),this.scope.content&&(null==this.scope.contentId||this.scope.contentId===this.scope.content.$pk))this.contentPromise=this.scope.content&&this.scope.content.$asPromise&&this.scope.content.$asPromise()||this.$q.when(this.scope.content);else if(this.scope.contentId)this.contentPromise=e.contents.$new(this.scope.contentId).$fetch().$asPromise();else if(this.attrs.deleteFunction&&this.attrs.confirmationHandler);else throw this.requiredArgumentsSupplied=!1,new d.v({message:"a content object, a contentId string, or a confirmationHandler and deleteFunction must be provided."});this.contentPromise&&this.contentPromise.then(e=>{this.scope.content=e,this.scope.content.contentHandler&&!this.scope.attrTranslateKey&&(this.scope.attrTranslateKey="components.directives.delete.handlers."+this.scope.content.contentHandler.toString().replace("resource/",""))})}getConfirmationKeyAndShowType(){return this.$q.when(this.contentPromise).then(()=>{let e;return(this.scope.content&&this.scope.content.$resolve(),this.attrs.confirmationHandler)?this.$q.when({confirmationKey:this.attrs.confirmationHandler,showType:this.modalShowType}):(this.ultraState.includes("**.outline.**")?e=h.m.CourseOutline:this.ultraState.includes("**.engagement.**")&&(e=h.m.Discussions),this.scope.content.$asPromise().then(t=>this.ContentService.generateDeleteConfirmationKey(t,e,this.contextCourse.course.isOrganization).then(e=>({confirmationKey:e.ui.deleteConfirmationKey,showType:e.ui.modalShowType}))))})}deleteElement(){this.attrs.deleteFunction?(this.scope.deleteFunction(),this.scope.unregisterAutoSave()):this.ContentService.deleteContent(this.scope.content).then(()=>{this.scope.parent.contentCreateItem&&(this.scope.parent.contentCreateItem.confirmCancellation=!1),this.scope.unregisterAutoSave(),this.attrs.callbackFunction?this.scope.callbackFunction():this.ultraState.leavePeekState(this.ultraState.current.name)})}constructor(e,t,n,i,s,r,o,a,l){this.$q=e,this.scope=t,this.element=n,this.attrs=i,this.ultraState=s,this.courseModel=r,this.contextCourse=o,this.ContentService=a,this.timeout=l,this.isDeleteDisabled=!1,this.focusedElement=null,t.$watch("contentId",(e,t)=>{e!==t&&this.initialize()}),this.initialize()}}v.$inject=["$q","scope","element","attrs",m.HV,u.N7.H,c.HV,l.HV,p.H];class y{constructor(e){this.$injector=e,this.restrict="E",this.template=f,this.scope={content:"=?",contentId:"=?",courseId:"&?",deleteFunction:"&?",callbackFunction:"&?",displayMode:"@?",extraClass:"@?",choices:"=?"},this.link=(e,t,n)=>{e.delete=this.$injector.instantiate(v,{scope:e,element:t,attrs:n})}}}y.$inject=["$injector",m.HV],r.module(b,[c.e1,l.e1,a.e1,u.e1,m.e1]).directive("bbDelete",["$injector",e=>e.instantiate(y)])},847192:function(e,t,n){"use strict";n.d(t,{e1:function(){return b}}),n(205654);var i,s,r=n(464027),o=n(291146),a=n(286806),l=n(606592),c=n(168132),d=n(305233),u=n(685414),p=n(822658),m=n(429794),h=n(838700),g=n(675356),f=n(625506);let b="ultra.components.directives.bbDragHandle";(s=i||(i={})).Vertical="vertical",s.Horizontal="horizontal",s.Omnidirectional="omnidirectional";class v{contentHasFolderChild(e){if(c.courseContent.ContentHandler.Folder.isEqualTo(e.dragItemType)&&h.m.Discussions!==this.dragDropService.currentDragContext){let e=c.courseContent.e6.Root,t=this.currentCourseService.course,n=this.contentService.findRootNode(t,e);this.contentService.getContentInContentTree(n,t.courseId,this.dragDropService.currentDragId).then(e=>{e.content&&(this.dragDropService.currentDragHasFolderChild=e.content.getChildren().$asPromise().then(e=>e.some(e=>e.isUiFolder())))})}}dragStart(e,t,n){if(this.dragDropService.currentDragElement){let e=f(".f-open-dropdown");e.length>0&&window.Foundation.libs.dropdown.close(e),this.dragDropService.currentDragElement.remove()}if(this.$rootScope.$broadcast("bb-drag-start"),f(document.body).addClass("bb-is-dragging"),this.dragDropService.originalElement=t.closest(this.dragDropService.dragElementSelector),this.dragDropService.currentDragElement=this.dragDropService.originalElement.clone(),this.dragDropService.idOfPreviousItem=this.dragDropService.originalElement.prev(".drag-element").find("[drag-item-id]").attr("drag-item-id"),this.dragDropService.idOfNextItem=this.dragDropService.originalElement.next(".drag-element").find("[drag-item-id]").attr("drag-item-id"),this.menuCloserService.closeAnyOpenAngularMenus(),c.courseContent.ContentHandler.Folder.isEqualTo(n.dragItemType)){this.$rootScope.$broadcast("close-folder-immediately-by-id",n.dragItemId);let e=this.dragDropService.currentDragElement.find(".img-icon-folder-open");e.removeClass("img-icon-folder-open").addClass("img-icon-folder")}this.dragDropService.originalElement.addClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.addClass(this.dragDropService.movableElementClass).addClass("mouse-touch-drag"),this.dragDropService.originalElement.after(this.dragDropService.currentDragElement),this.dragDropService.currentDragId=n.dragItemId,this.dragDropService.currentDragType=n.dragItemType,this.contentHasFolderChild(n),this.dragDropService.currentDropTargetId=n.dragItemId,this.dragDropService.positionBefore=n.dragItemId,this.dragDropService.createDropPlaceholderElement(this.dragDropService.currentDragElement),this.dragMove(e,n)}dragEnd(e,t){f(document.body).removeClass("bb-is-dragging"),e.preventDefault(),this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.movableElementClass),this.dragDropService.currentDragElement.removeAttr("style"),this.$rootScope.$broadcast("bb-drag-end")}dragCancel(){this.$rootScope.$broadcast("bb-drag-cancel"),f(document.body).removeClass("bb-is-dragging")}dragMove(e,t){let n,s,r,o;e.preventDefault();let l=this.dragDropService.currentDragElement.find("[bb-drag-handle]"),c=this.dragDropService.originalElement.find("[bb-drag-handle]").offset(),d=l.offset(),u=this.dragDropService.currentDragElement.offset(),p=d.left-u.left,m=d.top-u.top,h=p+l.width()/2,g=m+l.height()/2,f=i.Horizontal===this.dragDirection||i.Omnidirectional===this.dragDirection,b=i.Vertical===this.dragDirection||i.Omnidirectional===this.dragDirection;e.touches?(n=f?e.touches[0].pageX-h:u.left,s=b?e.touches[0].pageY-g:u.top,r=f?e.touches[0].pageX:c.left,o=b?e.touches[0].pageY:c.top):(n=f?e.pageX-h:u.left,s=b?e.pageY-g:u.top,r=f?e.pageX:c.left,o=b?e.pageY:c.top),this.dragDropService.currentDragElement.offset({left:n,top:s}),this.dragDropService.pointerPosition={left:r,top:o},this.dragDropService.scrollDragDropItemsContainer(this.dragDropService.pointerPosition.top,a.ns.SCROLLING_CONSTANTS.mouseInteractionDistanceToScroll),this.timeout.cancel(this.bbDragMoveTimeoutId),this.bbDragMoveTimeoutId=this.timeout(()=>{this.$rootScope.$broadcast("bb-drag-move")},t,150,!1)}constructor(e,t,n,s,r,o,a){this.$rootScope=e,this.bbLocalizeService=t,this.dragDropService=n,this.timeout=s,this.currentCourseService=r,this.contentService=o,this.menuCloserService=a,this.bbDragMoveTimeoutId=null,this.scope={dragItemId:"@",dragItemName:"@",dragItemType:"@",dragDirection:"@?",dragItemContext:"@?"},this.restrict="A",this.link=(e,t,n)=>{this.dragDirection=function(e){if(e)return Object.values(i).find(t=>t.toLowerCase()===e.toLowerCase())}(e.dragDirection)||i.Vertical,this.dragDropService.currentDragContext=e.dragItemContext,f(t).parent().attr("role","application"),t.on("mousedown",n=>{function i(e){e.stopImmediatePropagation()}n.preventDefault(),document.addEventListener("click",i,!0),this.dragStart(n,t,e),f(document).on("mousemove.reorder",t=>{this.dragMove(t,e)}),f(document).on("mouseup.reorder",n=>{this.dragEnd(n,t),f(document).off("mousemove.reorder"),f(document).off("mouseup.reorder"),t.on("$destroy",()=>{document.removeEventListener("click",i,!0)}),this.timeout(()=>{document.removeEventListener("click",i,!0)},e,0,!1)})}),t.on("keydown",t=>{if(t.stopPropagation(),t.keyCode===l.K5||t.keyCode===l.L_){if(t.preventDefault(),this.dragDropService.isKeyboardDragging){let t=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(e),key:"components.services.drag-drop.aria.reorder-stopped",noWrap:!0});this.$rootScope.$broadcast(u.i_,t),f(document.body).removeClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-end")}else{this.dragDropService.isKeyboardDragging=!0,this.dragDropService.currentDragId=e.dragItemId,this.dragDropService.currentDragType=e.dragItemType,this.contentHasFolderChild(e),this.dragDropService.currentDropTargetId=e.dragItemId,this.dragDropService.positionBefore=e.dragItemId,f(document.body).addClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-start");let t=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(e),key:"components.services.drag-drop.aria.reorder-started",params:{itemName:e.dragItemName},noWrap:!0});this.$rootScope.$broadcast(u.i_,t)}}else if(t.keyCode===l.UP)t.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-up");else if(t.keyCode===l.WV)t.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-down");else if(t.keyCode===l.pX)t.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-right");else if(t.keyCode===l.RL)t.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-left");else if(t.keyCode===l.hY&&(t.preventDefault(),this.dragDropService.isKeyboardDragging)){let t=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(e),key:"components.services.drag-drop.aria.reorder-canceled"});this.$rootScope.$broadcast(u.i_,t),f(document.body).removeClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-cancel")}}),t.on("blur",()=>{this.dragDropService.isKeyboardDragging&&(f(document.body).removeClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-cancel"))});let s=n=>{this.dragStart(n,t,e)},r=t=>{this.dragMove(t,e)},o=e=>{this.dragEnd(e,t)},a=()=>{this.dragCancel()};t[0].addEventListener("touchstart",s,!1),t[0].addEventListener("touchmove",r,!1),t[0].addEventListener("touchend",o,!1),t[0].addEventListener("touchcancel",a,!1),e.$on("$destroy",()=>{t[0].removeEventListener("touchstart",s,!1),t[0].removeEventListener("touchmove",r,!1),t[0].removeEventListener("touchend",o,!1),t[0].removeEventListener("touchcancel",a,!1)})}}}v.$inject=["$rootScope",o.serviceName,a.HV,d.H,p.HV,m.HV,g.HV],r.module(b,[o.moduleName,a.e1,d.e,p.e1,m.e1,g.e1]).directive("bbDragHandle",["$injector",e=>e.instantiate(v)])},299530:function(e,t,n){"use strict";n.d(t,{e1:function(){return m}});var i=n(464027),s=n(188314),r=n(291146),o=n(286806),a=n(168132),l=n(305233),c=n(685414),d=n(838700),u=n(443400),p=n(625506);let m="ultra.components.directives.bbDropHandler";class h{_keyboardMoveBelowThisItem(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.content().id):this.scope.nextContentId&&this.scope.nextContentId()===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.nextContentId()):(this.dragPosition=o.Pw.Bottom,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())}_keyboardMoveAboveThisItem(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.content().id):this.scope.previousContentId&&this.scope.previousContentId()===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.previousContentId()):(this.dragPosition=o.Pw.Top,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())}_informScreenReaderOfNewLocation(){let e=this.element.find("[bb-drag-handle]").eq(0).attr("drag-item-name"),t="";if(""!==this.dragDropService.queuedScreenReaderMessages&&(t+=this.dragDropService.queuedScreenReaderMessages+" "),-1!==this.dragDropService.currentDropTargetId.indexOf("blank")){t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-only-item-in-folder",noWrap:!0}),this.$rootScope.$broadcast(c.i_,t),this.dragDropService.queuedScreenReaderMessages="";return}this.scope.previousContentId&&this.scope.previousContentId()||o.Pw.Top!==this.dragPosition&&o.Pw.Self!==this.dragPosition?this.scope.nextContentId&&this.scope.nextContentId()||o.Pw.Bottom!==this.dragPosition&&o.Pw.Self!==this.dragPosition||(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-end-of-list",noWrap:!0})+" "):t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-top-of-list",noWrap:!0})+" ",o.Pw.Self===this.dragPosition?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-self",noWrap:!0}):o.Pw.Folder===this.dragPosition?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-folder",params:{itemName:e},noWrap:!0}):o.Pw.Top===this.dragPosition?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-above",params:{itemName:e},noWrap:!0}):o.Pw.Bottom===this.dragPosition&&(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-below",params:{itemName:e},noWrap:!0})),this.$rootScope.$broadcast(c.i_,t),this.dragDropService.queuedScreenReaderMessages=""}_applyKeyboardPlaceholderAndStyling(){let e=this.dropTargetElement;o.Pw.Self===this.dragPosition?this.dropTargetElement.addClass(this.dragDropService.dragHoverClass):o.Pw.Folder===this.dragPosition?(this.dropTargetElement.before(this.dragDropService.currentDragElement),this.dragDropService.currentDragElement&&(1===this.scope.content().depth?this.dragDropService.currentDragElement.addClass(this.dragDropService.onFolderClass):2===this.scope.content().depth&&this.dragDropService.currentDragElement.addClass(this.dragDropService.onNestedFolderClass))):o.Pw.Bottom===this.dragPosition?(e=this.dragDropService.currentDragElement,this.dropTargetElement.after(this.dragDropService.currentDragElement)):o.Pw.Top===this.dragPosition&&(e=this.dragDropService.currentDragElement,this.dropTargetElement.before(this.dragDropService.currentDragElement)),this._scrollContainer(e)}_removeKeyboardPlaceholderAndStyling(){this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&(this.dragDropService.currentDragElement.removeClass(this.dragDropService.onFolderClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.onNestedFolderClass),this.dragDropService.currentDragElement.remove())}_scrollContainer(e){this.dragDropService.scrollDragDropItemsContainer(e.offset().top,o.ns.SCROLLING_CONSTANTS.keyboardInteractionDistanceToScroll)}_keyboardEndDragAndClearValues(){this.timeout(()=>{p('[bb-drag-handle][drag-item-id="'+this.dragDropService.currentDragId+'"]').focus(),this.dragDropService.clearDropTarget(),this.dragDropService.currentDragId=void 0,this.dragDropService.currentDragType=void 0,this.dragDropService.isKeyboardDragging=!1},this.scope,0,!1)}isDropPreventedByContentDepthRules(){let e=()=>a.courseContent.ContentHandler.Folder.isEqualTo(this.dragDropService.currentDragType);if(void 0!==this.dragDropService.currentDragHasFolderChild)return this.dragDropService.currentDragHasFolderChild.then(t=>e()&&(this.isDraggingOverFolder&&this.scope.content().depth===u.cY.getMaxCourseFolderDepth()||this.scope.content().depth>u.cY.getMaxCourseFolderDepth()||this.isDraggingOverFolder&&t));let t=this.$q.defer();return t.resolve(!1),t.promise}isDnDPreventedInDiscussionContext(){return d.m.Discussions===this.dragDropService.currentDragContext&&a.courseContent.ContentHandler.Folder.isEqualTo(this.dragDropService.currentDragType)&&(this.isDraggingOverFolder&&this.scope.content().depth===s.Vr||this.scope.content().depth>s.Vr)}dragOverFunc(e){if(this.dragDropService.currentDragId&&this.dragDropService.currentDragId!==this.scope.content().id){this.dragDropService.setDropTarget(this.scope.content().id),!this.folderHoverTimeout&&this.scope.isFolderOpen&&!1===this.scope.isFolderOpen()&&(this.dropTargetElement.addClass(this.dragDropService.dragHoverClass),this.folderHoverTimeout=this.timeout(()=>{this.isDropPreventedByContentDepthRules().then(e=>{e||this.isDnDPreventedInDiscussionContext()?(this.dragDropService.isShowingDepthMessage=!0,this.$rootScope.$broadcast("show-override-message",this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:this.dragDropService.folderDepthMessageKey}),this.scope.content().id)):(this.scope.$emit("toggle-folder-by-id",this.scope.content().id),this.wasFolderOpened=!0)})},this.scope,1500)),this.dragDropService.isShowingDepthMessage&&this.dragDropService.isNotSameDropTarget()&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());let t=this.element.offset().top+this.element.height()/2,n=this.dragPosition;this.isAFolder()&&(this.isDraggingOverFolder=!0),this.scope.content().id.indexOf("placeholder")>-1?(this.dragDropService.positionAfter=this.scope.content().parentId,this.dragDropService.positionBefore=void 0,this.dragPosition=o.Pw.Bottom):e<=t?(this.dragDropService.positionBefore=this.scope.content().id,this.dragDropService.positionAfter=void 0,this.dragPosition=o.Pw.Top):(this.dragDropService.positionAfter=this.scope.content().id,this.dragDropService.positionBefore=void 0,this.dragPosition=o.Pw.Bottom),(this.dragDropService.isNotSameDropTarget()||this.dragPosition!==n)&&(this._moveDropPlaceholderElement(),this.isEmptyTarget&&this.element.children().hide())}}_moveDropPlaceholderElement(){this.$rootScope.$broadcast("remove-placeholder"),this.dragDropService.currentDragId!==this.dragDropService.currentDropTargetId&&(this.dragDropService.positionBefore&&this.dragDropService.currentDropTargetId!==this.dragDropService.idOfNextItem?this.dropTargetElement.before(this.dragDropService.dropPlaceholderElement):(!(this.dragDropService.currentDropTargetId.indexOf("placeholder")>-1)||this.dragDropService.idOfNextItem!==this.dragDropService.currentDropTargetId)&&this.dragDropService.positionAfter&&this.dragDropService.currentDropTargetId!==this.dragDropService.idOfPreviousItem&&this.dropTargetElement.after(this.dragDropService.dropPlaceholderElement))}_isDroppingInSamePlace(){if(null!=this.dragDropService.positionAfter&&this.scope.previousContentId&&this.dragDropService.positionAfter===this.scope.previousContentId()||this.dragDropService.positionAfter===this.dragDropService.currentDragId||null!=this.dragDropService.positionBefore&&this.scope.nextContentId&&this.dragDropService.positionBefore===this.scope.nextContentId()||this.dragDropService.positionBefore===this.dragDropService.currentDragId)return!0}dropHandlerFunc(){this.timeout.cancel(this.folderHoverTimeout),this.dropTargetElement.parents("[data-parent-id]").last().removeAttr("style"),this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("remove-placeholder"),this.$rootScope.$broadcast("file-drag-restore"),this.dragDropService.isShowingDepthMessage&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());let e={dragContentId:this.dragDropService.currentDragId,originalElement:this.dragDropService.originalElement,parentFolderId:this.scope.content().parentId,positionAfterId:this.dragDropService.positionAfter,positionBeforeId:this.dragDropService.positionBefore,rootScope:this.$rootScope,targetFolderId:this.scope.content().id};this.isDropPreventedByContentDepthRules().then(t=>{this._isDroppingInSamePlace()||this.isDnDPreventedInDiscussionContext()?this.dropCleanupFunc():!t&&this.isDraggingOverFolder?this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.scope.onMoveIntoFolderHandler()(e),this.dropCleanupFunc()):this.scope.$apply(()=>{this.scope.onMoveIntoFolderHandler()(e),this.dropCleanupFunc()}):t?this.dropCleanupFunc():this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.scope.onMoveHandler()(e),this.dropCleanupFunc()):this.scope.$apply(()=>{this.scope.onMoveHandler()(e),this.dropCleanupFunc()}),this.isDraggingOverFolder=!1})}dropCleanupFunc(){this.wasFolderOpened&&(this.wasFolderOpened=!1,this.scope.$emit("toggle-folder-by-id",this.scope.content().id)),this.dragDropService.currentDragId=void 0,this.dragDropService.currentDragType=void 0,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&this.dragDropService.currentDragElement.remove()}dragLeaveFunc(){this.isDraggingOverFolder=!1,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.timeout.cancel(this.folderHoverTimeout),this.folderHoverTimeout=void 0,this.isDropPreventedByContentDepthRules().then(e=>{e&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage())})}broadcastShowOverrideMessage(){this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?this.$rootScope.$broadcast("show-override-message",void 0,this.scope.content().id):this.scope.$apply(()=>this.$rootScope.$broadcast("show-override-message",void 0,this.scope.content().id))}keyboardMoveUpToItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-up-to-item",e)},this.scope)}keyboardMoveDownToItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-down-to-item",e)},this.scope)}keyboardMoveBelowItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-below-item",e)},this.scope)}keyboardMoveAboveItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-above-item",e)},this.scope)}keyboardMoveOntoFolder(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-onto-folder",e)},this.scope)}keyboardMoveIntoFolderAsLastItem(){let e=this.scope.content().children;e.length>0?this.keyboardMoveBelowItem(e[e.length-1].id):this.keyboardMoveBelowItem(this.scope.content().id+"blank")}keyboardMoveIntoFolderAsFirstItem(){let e=this.scope.content().children;e.length>0?this.keyboardMoveAboveItem(e[0].id):this.keyboardMoveAboveItem(this.scope.content().id+"blank")}isNotSameDropTarget(){return this.scope.content().id!==this.dragDropService.currentDragId}isOnSamePanel(){return this.element.closest(".panel-content").is(this.dragDropService.originalElement.closest(".panel-content"))}isEnabledForReordering(){return!(this.scope.disableForReordering&&this.scope.disableForReordering())}isAFolder(){return null!=this.scope.isFolderOpen}constructor(e,t,n,i,s,r,a,l){this.scope=e,this.element=t,this.$rootScope=i,this.$q=s,this.timeout=r,this.dragDropService=a,this.bbLocalizeService=l,this.isDraggingOverFolder=!1,this.isEmptyTarget="emptyTarget"in n,this.dropTargetElement=t.closest(this.dragDropService.dragElementSelector),e.$on("bb-drag-move",()=>{if(this.isEnabledForReordering()&&this.isNotSameDropTarget()&&this.isOnSamePanel()){let e=t.offset(),n=t.height()+e.top,i=t.width()+e.left;this.dragDropService.pointerPosition.left>=e.left&&this.dragDropService.pointerPosition.left<=i&&this.dragDropService.pointerPosition.top>=e.top&&this.dragDropService.pointerPosition.top<=n?this.dragOverFunc(this.dragDropService.pointerPosition.top):this.dragLeaveFunc()}}),e.$on("bb-drag-end",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&this.isOnSamePanel()&&this.dropHandlerFunc()}),t.on("drop",t=>{t.originalEvent.dataTransfer.files&&t.originalEvent.dataTransfer.files.length>0&&e.onFileDropHandler&&e.onFileDropHandler()(t.originalEvent.dataTransfer.files,e.content())}),e.$on("bb-drag-cancel",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&this.isOnSamePanel()&&(e.content().id===this.dragDropService.currentDragId&&(this.dragDropService.positionBefore=e.content().id),this.dropHandlerFunc())}),e.$on("keyboard-drag-start",()=>{this.isEnabledForReordering()&&e.content().id===this.dragDropService.currentDragId&&(this.dragPosition=o.Pw.Self,this.dragDropService.originalElement=t.closest(this.dragDropService.dragElementSelector),this.dragDropService.currentDragElement=this.dragDropService.originalElement.clone(),this.dragDropService.originalElement.addClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.addClass(this.dragDropService.movableElementClass),this.dragDropService.originalElement.addClass(this.dragDropService.dragHoverClass),this.dragDropService.setDropTarget(e.content().id))}),e.$on("keyboard-drag-end",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&this.isOnSamePanel()&&this.timeout(()=>{this.dragDropService.originalElement&&this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),o.Pw.Folder===this.dragPosition?this.dragDropService.positionAfter=e.content().id:o.Pw.Top===this.dragPosition?(this.dragDropService.positionBefore=e.content().id,this.dragDropService.positionAfter=null):(this.dragDropService.positionAfter=e.content().id,this.dragDropService.positionBefore=null),this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&this.dragDropService.currentDragElement.remove(),this.isDropPreventedByContentDepthRules().then(t=>{if(!this.isDnDPreventedInDiscussionContext()&&!t&&!this._isDroppingInSamePlace()){let t={dragContentId:this.dragDropService.currentDragId,dragElement:this.dragDropService.currentDragElement,parentFolderId:this.scope.content().parentId,positionAfterId:this.dragDropService.positionAfter,positionBeforeId:this.dragDropService.positionBefore,rootScope:this.$rootScope,targetFolderId:this.scope.content().id};e.onMoveHandler()(t)}this._keyboardEndDragAndClearValues()})},e)}),e.$on("keyboard-drag-cancel",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&(this._keyboardEndDragAndClearValues(),this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.remove())}),e.$on("keyboard-drag-up",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&(this._removeKeyboardPlaceholderAndStyling(),this.isEmptyTarget&&(this.dragPosition=o.Pw.Top),o.Pw.Self===this.dragPosition||o.Pw.Top===this.dragPosition?e.previousContentId&&e.previousContentId()?this.keyboardMoveUpToItem(e.previousContentId()):e.content().depth>1?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),this.keyboardMoveOntoFolder(e.content().parentId)):(this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):o.Pw.Folder===this.dragPosition?this._keyboardMoveAboveThisItem():o.Pw.Bottom===this.dragPosition&&this.isDropPreventedByContentDepthRules().then(t=>{this.isAFolder()?!0===e.isFolderOpen()&&this.isNotSameDropTarget()&&!this.isDnDPreventedInDiscussionContext()&&!t?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),this.keyboardMoveIntoFolderAsLastItem()):!1===e.isFolderOpen()&&this.isNotSameDropTarget()&&!this.isDnDPreventedInDiscussionContext()&&!t&&this.keyboardMoveOntoFolder(this.scope.content().id):this._keyboardMoveAboveThisItem()}))}),e.$on("keyboard-drag-down",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&(this._removeKeyboardPlaceholderAndStyling(),this.isEmptyTarget&&(this.dragPosition=o.Pw.Bottom),o.Pw.Self===this.dragPosition||o.Pw.Bottom===this.dragPosition?e.nextContentId&&e.nextContentId()?this.keyboardMoveDownToItem(e.nextContentId()):e.content().depth>1?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),this.keyboardMoveBelowItem(e.content().parentId)):(this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):o.Pw.Folder===this.dragPosition?this.isDropPreventedByContentDepthRules().then(t=>{e.isFolderOpen&&!0===e.isFolderOpen()&&this.isNotSameDropTarget()&&!this.isDnDPreventedInDiscussionContext()&&!t?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),this.keyboardMoveIntoFolderAsFirstItem()):this._keyboardMoveBelowThisItem()}):o.Pw.Top===this.dragPosition&&this.isDropPreventedByContentDepthRules().then(e=>{this.isAFolder()&&this.isNotSameDropTarget()&&!this.isDnDPreventedInDiscussionContext()&&!e?this.keyboardMoveOntoFolder(this.scope.content().id):this._keyboardMoveBelowThisItem()}))}),e.$on("keyboard-drag-right",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&o.Pw.Folder===this.dragPosition&&e.isFolderOpen&&!1===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)}),e.$on("keyboard-drag-left",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&o.Pw.Folder===this.dragPosition&&e.isFolderOpen&&!0===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)}),e.$on("keyboard-move-up-to-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),e.content().id===this.dragDropService.currentDragId?(this.dragPosition=o.Pw.Self,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):this.isAFolder()?this.scope.isFolderOpen&&!0===this.scope.isFolderOpen()?this.keyboardMoveIntoFolderAsLastItem():(this.dragPosition=o.Pw.Folder,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):this._keyboardMoveAboveThisItem())}),e.$on("keyboard-move-down-to-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),e.content().id===this.dragDropService.currentDragId?(this.dragPosition=o.Pw.Self,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):this.isAFolder()?this.keyboardMoveOntoFolder(this.scope.content().id):this._keyboardMoveBelowThisItem())}),e.$on("keyboard-move-above-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),this._keyboardMoveAboveThisItem())}),e.$on("keyboard-move-below-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),this._keyboardMoveBelowThisItem())}),e.$on("keyboard-move-onto-folder",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),this.dragPosition=o.Pw.Folder,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())}),e.$on("remove-placeholder",()=>{this.isEnabledForReordering()&&this.dragDropService.dropPlaceholderElement&&this.dragDropService.dropPlaceholderElement.remove(),this.isEmptyTarget&&this.element.children("bb-add-content-button").show()})}}h.$inject=["scope","element","attrs","$rootScope","$q",l.H,o.HV,r.serviceName];class g{constructor(e){this.$injector=e,this.scope={onMoveIntoFolderHandler:"&?",onMoveHandler:"&",onFileDropHandler:"&",isFolderOpen:"&?",content:"&",previousContentId:"&?",nextContentId:"&?",disableForReordering:"&?"},this.restrict="A",this.link=(e,t,n)=>{e.dropHandlerDirective=this.$injector.instantiate(h,{scope:e,element:t,attrs:n})}}}g.$inject=["$injector"],i.module(m,[o.e1,l.e]).directive("bbDropHandler",["$injector",e=>e.instantiate(g)])},691885:function(e,t,n){"use strict";n.d(t,{e1:function(){return d},s8:function(){return i}}),n(201915),n(3744);var i,s,r=n(625506),o=n(464027),a=n(916415),l=n(606592),c=n(291146);let d="ultra.components.directives.bbSortable";(s=i||(i={})).Horizontal="Horizontal",s.Vertical="Vertical";let u={containerSelector:"[sortable-container]",itemSelector:"[sortable-item]",containerPath:"[sortable-parent]:first",placeholder:'<div class="placeholder">&nbsp;</div>',handle:"i.icon-reorder",onDragStart(e,t,n,i){t.rootGroup.placeholder=e.clone().addClass("placeholder").removeAttr("sortable-item"),t.rootGroup.placeholder.find("[sortable-container], [sortable-item]").removeAttr("sortable-container sortable-item"),n(e,t)},triggerKey:l.K5,orientation:i.Vertical,placeholderClass:"placeholder",moveKeyHandler:(e,t,n,s)=>{let r=t.options;if(i.Horizontal===r.orientation){let t=r.isRTL?l.RL:l.pX,n=r.isRTL?l.pX:l.RL;s.keyCode===n?(s.stopPropagation(),e.insertBefore(e.prev(r.itemSelector)),e.find(r.handle).focus()):s.keyCode===t&&(e.insertAfter(e.next(r.itemSelector)),e.find(r.handle).focus(),s.stopPropagation())}else s.keyCode===l.UP?(s.stopPropagation(),e.insertBefore(e.prev(r.itemSelector)),e.find(r.handle).focus()):s.keyCode===l.WV&&(e.insertAfter(e.next(r.itemSelector)),e.find(r.handle).focus(),s.stopPropagation())},cancelHandler:(e,t,n,i,s)=>{let r=e.index();r>n?e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+n+")")):r<n&&e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+(n+1)+")"))},saveHandler:(e,t,n,i)=>{e.focus(),t.options.onDrop&&"function"==typeof t.options.onDrop&&t.options.onDrop(e,t,n,i)}};class p{keyboardDragAndDrop(e,t){let n=r(e).find(t.sortableOptions.handle);return n.on("keyup",e=>{if(e.keyCode===t.sortableOptions.triggerKey){let n=r(e.target),i=n.closest(t.sortableOptions.itemSelector),s=i.parents(t.sortableOptions.containerSelector).last().data("sortable");i.hasClass(t.sortableOptions.placeholderClass)||(e.stopImmediatePropagation(),i.addClass(t.sortableOptions.placeholderClass),t.sortableOptions.onEnter&&t.sortableOptions.onEnter(i,s),this.triggerAccessibilityMode(n,t))}}),n}triggerAccessibilityMode(e,t){let n,i,s;let o=e.closest(t.sortableOptions.itemSelector),a=o.parents(t.sortableOptions.containerSelector).last().data("sortable"),l=o.index(),c=()=>{r(document).off("click focusin",i),e.off("keydown",n),e.off("keyup",s),o.data("axHandlersAdded",!1),o.removeClass(t.sortableOptions.placeholderClass),t.sortableOptions.onExit&&t.sortableOptions.onExit(o,a)};n=e=>{t.sortableOptions.moveKeyHandler(o,a,r.noop,e)},i=n=>{r(n.target).is(e)||(c(),t.sortableOptions.cancelHandler(o,a,l,r.noop,n))},s=e=>{e.keyCode===t.sortableOptions.triggerKey&&(c(),e.stopImmediatePropagation(),t.sortableOptions.saveHandler(o,a,r.noop,e))},e.on("keyup",s),e.on("keydown",n),r(document).on("click focusin",i),t.$on("$destroy",c),o.data("axHandlersAdded",!0)}constructor(e){this.localize=e,this.scope={sortableOptions:"=?"},this.restrict="A",this.link=(e,t,n)=>{let i=e.$watch("sortableOptions",()=>{e.sortableOptions=r.extend({},u,e.sortableOptions),e.sortableOptions.isRTL=this.localize.isRTL(e);let n=t.parents("[bb-sortable]");t.on("touchstart",e.sortableOptions.handle,e=>{r(e.target).trigger("click")}),0!==n.length?(n.sortable("destroy"),n.last().sortable(e.sortableOptions)):t.sortable(e.sortableOptions),t.find(e.sortableOptions.itemSelector).each((t,n)=>{this.keyboardDragAndDrop(r(n),e)}),a.ZU.OnRootScope(e,"sortable-item-inserted",(t,n)=>{let i=this.keyboardDragAndDrop(n,e);n.hasClass(e.sortableOptions.placeholderClass)&&!n.data("axHandlersAdded")&&this.triggerAccessibilityMode(i,e)}),i()})}}}p.$inject=[c.serviceName],o.module(d,[c.moduleName]).directive("bbSortable",["$injector",e=>e.instantiate(p)])},116248:function(e,t,n){"use strict";n.d(t,{e1:function(){return h}});var i=n(464027),s=n(793423),r=n(291146),o=n(322484),a=n(839650),l=n(168132),c=n(748157),d=n(305233),u=n(951248),p=n(17413),m=n(799962);let h="ultra.directives.bbCloudStorageIntegration";class g{onFileSelect(e){this.scope.$emit(s.GZ,e,this.scope.primaryKey&&this.scope.primaryKey()),this.scope.onFilesSelected&&this.scope.onFilesSelected(e)}getDownloadFileInfo(e){let t=(0,u.nMx)(e);return this.CloudDriveModel.$new("CloudStorageIntegration").contents.$new(t).$fetch({accessToken:this.accessToken}).$asPromise()}downloadFiles(e,t,n,i){let r={accessToken:this.accessToken,expand:"mimeType,isMedia"};this.scope.fileLocation&&(r.fileLocation=this.scope.fileLocation),this.scope.webLocation&&(r.webLocation=this.scope.webLocation),(n?this.CloudDriveTaskModel.$new(i||e.id):this.CloudDriveModel.$new("CloudStorageIntegration").contents.$new(i||e.id).download).$fetch(r).$then(n=>{if("COMPLETE"===n.status){let i=this.scope.$on(s.Ei,(r,o,a)=>{a!==s.mb.UploadProgressComplete||e.ui.fileId&&o!==e.ui.fileId||(this.attachHandler(n,e,t),i())})}else this.timeout(()=>{this.downloadFiles(e,t,!0,n.taskId)},this.scope,2e3);(n.completePercentage<100||"COMPLETE"===n.status)&&this.scope.$root.$broadcast(s.Ei,e.ui.index,n.completePercentage,null,s.mb.UpdateProgress,e.inProgressFileId,e.ui.targetDiv,e.ui.fileId)},t=>{this.displayUploadError(),this.scope.$root.$broadcast(s.Ei,e.ui.fileId,e,s.mb.Error,e.ui.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),this.$exceptionHandler(t,"source")})}attachHandler(e,t,n){let i=this.$q.defer(),s={fileName:null,fileLocation:null};return e&&(s.fileName=e.fileName,s.fileLocation=e.fileLocation,s.webLocation=e.webLocation,s.mimeType=e.mimeType,s.isMedia=e.isMedia),this.scope.attachHandler(s,t,this.scope.isUploadMultipleFiles,void 0,n).then(e=>{i.resolve(e)},e=>{i.reject(e)}),i.promise}displayUploadError(){this.$modal.open({template:p,scope:this.scope})}constructor(e,t,n,i,s,r,o,a){this.scope=e,this.$q=t,this.$exceptionHandler=n,this.bbLocalize=i,this.$modal=s,this.CloudDriveModel=r,this.CloudDriveTaskModel=o,this.timeout=a,this.bbLocalize.loadBundle("components/directives/cloudStorageIntegration")}}g.$inject=["scope","$q","$exceptionHandler",r.serviceName,c.HV,l.Os.H,l.xd.H,d.H];class f{constructor(e,t,n,s,r){this.$injector=e,this.$q=t,this.$modal=n,this.CloudDriveService=s,this.bbLocalize=r,this.scope={attachHandler:"=",isFlatten:"=?",primaryKey:"&?",primaryKeyValue:"@?",fileLocation:"@?",webLocation:"@?",disableClick:"&?",allowMultiple:"=?",onFilesSelected:"=?",onCancelFocus:"=?"},this.restrict="A",this.link=(e,t,n)=>{let s=this;e.cloudStorageIntegration=this.$injector.instantiate(g,{scope:e}),e.folderBranchCounts=0,e.isInitialized=!!s.CloudDriveService.cloudDriveStorage,e.isInitialized||s.CloudDriveService.initializeCloudDrive();let r=function(t){let n=[];if(t&&t.length>0){for(let i=0;i<t.length;i++)n.push(e.cloudStorageIntegration.getDownloadFileInfo(t[i]));s.$q.all(n).then(t=>{s.CloudDriveService.isGettingFilesInfo=!1,e.cloudStorageIntegration.onFileSelect(t),t.length>1&&(e.isUploadMultipleFiles=!0)},()=>{s.CloudDriveService.isGettingFilesInfo=!1})}};t.on("click",()=>{if((!e.disableClick||!e.disableClick())&&e.isInitialized){let n=this.bbLocalize.getLocale(e);s.CloudDriveService.cloudDriveStorage.openFilePicker(n,e.allowMultiple).then(n=>{if((n||[]).length>0){if(!n[0]||!n[0].bearer_token||!n[0].bearer_token.key){this.$modal.open({template:m,scope:e});return}e.cloudStorageIntegration.accessToken=n[0].bearer_token.key,s.CloudDriveService.isGettingFilesInfo=!0,i.isDefined(e.allowMultiple)&&!1===e.allowMultiple&&n.length>1?r([n[0]]):r(n)}else e.onCancelFocus?e.onCancelFocus():t.focus()}),e.$on("$destroy",()=>{s.CloudDriveService.isGettingFilesInfo=!1,t.off("click")})}}),e.$on("downloadFile",(t,n,i)=>{n.ui.primaryKey===(e.primaryKey&&e.primaryKey())&&n.file.$url().indexOf("CloudStorageIntegration")>=0&&e.cloudStorageIntegration.downloadFiles(n,i)})}}}f.$inject=["$injector","$q","$modal",o.HV,r.serviceName],i.module(h,[r.moduleName,o.e1,a.e,c.e1,d.e]).directive("bbCloudStorageIntegration",["$injector",e=>e.instantiate(f)])},681739:function(e,t,n){"use strict";n.d(t,{e1:function(){return d}});var i=n(276635),s=n(464027),r=n(270679),o=n(606592),a=n(305233),l=n(642663),c=n(916415);let d="ultra.components.directives.dropdown";class u{selectItem(e,t){e.isHeader?t.stopPropagation():this.scope.clickFunction({item:e})}getRole(){return"menu"===this.scope.listKind?"menu":"listbox"}clickItem(){this.selectedItem&&(this.scope.selectedItem=this.selectedItem,this.scope.clickFunction({item:this.selectedItem}))}useNativeSelect(){return!this.scope.forceCustomDropdown&&this.isMobile&&"avatar-list"!==this.scope.listKind&&"custom"!==this.scope.listKind&&"region"!==this.scope.listKind}isUserCourseAvailable(e){let t=this.scope.getUserCourseAvailabilities&&this.scope.getUserCourseAvailabilities();return!(t&&!t[e])}shouldHaveBlankOption(e){return this.isIos&&"group"===e}constructor(e,t,n,a){if(this.scope=e,this.element=t,this.$window=n,this.timeout=a,this.RESIZE_DELAY=150,this.isMobile=!1,this.isIos=!1,this.setMaxHeight=()=>{let e=this.element.offset().top,t=s.element(this.$window).height(),n=34;"avatar-list"===this.scope.listKind&&(n=57);let i=Math.max(Math.floor((this.scope.forceAbove?e:t-e)/n),2);this.scope.simplifiedMaxItemsPerPage&&this.scope.simplifiedMaxItemsPerPage()>0&&(i=Math.min(i,this.scope.simplifiedMaxItemsPerPage())),this.element.find(".dropdown-directive").css({maxHeight:n*i+2})},this.element.addClass("bb-dropdown"),this.isMobile=!r.Z.detect().desktop(),this.isIos=r.Z.detect().ios(),this.selectedItem=this.scope.selectedItem,e.$watch("::selectedItem",e=>{this.selectedItem=e}),!this.useNativeSelect()){let t;this.element.on("keyup",e=>{(e.keyCode===o.K5||e.keyCode===o.L_)&&e.stopPropagation()}),this.element.on("opened.fndtn.dropdown",()=>{this.setMaxHeight(),this.scope.$applyAsync(),t=c.ZU.OnWindow("resize",i.debounce(this.setMaxHeight,this.RESIZE_DELAY),e),(this.scope.onOpen||s.noop)()}),this.element.on("closed.fndtn.dropdown",()=>{t(),(this.scope.onClose||s.noop)()})}}}u.$inject=["scope","element","$window",a.H];class p{constructor(e){this.$injector=e,this.restrict="E",this.template=l,this.transclude=!0,this.scope={listId:"@",itemList:"=",listKind:"@",selectedItem:"=?",selectedText:"@?",listHeader:"@?",clickFunction:"&?",onOpen:"&?",onClose:"&?",getUserCourseAvailabilities:"&?userCourseAvailabilities",selectionFullWidth:"&?",simplifiedMaxItemsPerPage:"&?",forceAbove:"=?",forceCustomDropdown:"=?",analyticsIdTagPrefix:"@?"},this.link=(e,t,n,i,s)=>{e.dropdown=this.$injector.instantiate(u,{scope:e,element:t})}}}p.$inject=["$injector"];class m{constructor(e){this.$injector=e,this.restrict="EA",this.link=(e,t,n,i,s)=>{"custom"===e.listKind||"region"===e.listKind||"menu"===e.listKind?s((n,i)=>{i.dropdown=e.dropdown,t.replaceWith(n)}):t.remove()}}}m.$inject=["$injector"],s.module(d,[a.e]).directive("bbDropdown",["$injector",e=>e.instantiate(p)]).directive("bbDropdownTransclude",["$injector",e=>e.instantiate(m)])},48446:function(e,t,n){"use strict";n.d(t,{GD:function(){return c},e1:function(){return l}});var i=n(464027),s=n(501),r=n(291146),o=n(814154),a=n(29367);let l="ultra.directives.bbDuration",c="refresh.relative.dates";class d{needAgo(){return!!(this.scope.hasAgo&&this.scope.hasAgo()&&this.lessThanOneDay)}separateDatetime(){return!!(this.scope.separateDatetime&&this.scope.separateDatetime())}_localizeRelativeDate(){if(this.scope.date){let e={},t=new Date,n=this.scope.isRelativeToServerDate&&this.scope.isRelativeToServerDate();(null==n||n)&&(e={relativeTo:this.bbContext.getServerTime()},t=this.bbContext.getServerTime());let i=t.getTime()-this.scope.date.getTime();if(i>=6e4&&this.scope.date.setSeconds(30),this.lessThanOneDay=i<=864e5,this.needAgo()||this.separateDatetime()){let t=this.bbLocalize.getFormatEnum(r.ILocaleDateFormat,this.scope.dateFormat)||r.ILocaleDateFormat.Short;this.bbLocalize.formatDuration(this.scope.date,this.scope,e,t).then(e=>{this.date=e.date||"",this.time=e.time||""})}}}constructor(e,t,n,i){this.scope=e,this.bbContext=t,this.bbLocalize=n,this.interval=i,this.date="",this.time="",this.lessThanOneDay=!1;let s=e.$watch("date",()=>{this._localizeRelativeDate(),e.autoUpdate&&!e.autoUpdate()&&e.date&&s()});e.$on(c,()=>{this._localizeRelativeDate()}),this.interval(()=>{this._localizeRelativeDate()},this.scope,d.DEFAULT_REFRESH_INTERVAL)}}d.DEFAULT_REFRESH_INTERVAL=18e4,d.$inject=["scope",s.HV,r.serviceName,o.H];class u{constructor(e){this.$injector=e,this.restrict="E",this.replace=!0,this.template=a,this.scope={date:"=",autoUpdate:"&?",isRelativeToServerDate:"&?",dateFormat:"@?",hasAgo:"&?",separateDatetime:"&?"},this.link=e=>{e.duration=this.$injector.instantiate(d,{scope:e})}}}u.$inject=["$injector"],i.module(l,[s.e1,r.moduleName,o.e]).directive("bbDuration",["$injector",e=>e.instantiate(u)])},147941:function(e,t,n){"use strict";n.d(t,{QM:function(){return d},yf:function(){return u}});var i=n(464027),s=n(291146),r=n(247126),o=n(606592),a=n(451251),l=n(211796);function c(e,t){return function(n,i){t(n,i,e)}}let d="text-editor-update-original-value";class u{isEditorDirty(){return this.isTextTouched}getContentLabel(){let e=this.getPlaceholderKey(),t=this.truncatedViewValue;return t||e}getPlaceholderKey(){return(this.scope.placeholderAttrsValues!==this.originalPlaceholderAttrValues||null==this.placeholderText)&&(this.placeholderText=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.scope.placeholderKey,params:this.scope.$eval(this.scope.placeholderAttrsValues)}),this.originalPlaceholderAttrValues=this.scope.placeholderAttrsValues),this.placeholderText}get truncatedViewValue(){return this._truncatedViewValue}set truncatedViewValue(e){let t=this.element.find(".editor-element"),n=t.length?t.text():void 0;this._truncatedViewValue=a.u0(n,100)}onChange(e){(!e||e.keyCode!==o.Mf)&&this.scope.hasFocus&&(this.isTextTouched=!0,this.scope.onchangeFunc&&this.scope.onchangeFunc({event:e}))}onKeydown(e){}isUploadProgressModalOpen(){let e=i.element(".progress-indicator-modal");return e&&e.length>0}isAddContentSelectorOpened(){return this.bbUltraState.current.name.length>this.currentStateName.length&&a.Ny(this.bbUltraState.current.name,this.currentStateName)}onBeforeBlur(){return!this.preventBlur&&!this.scope.disableInlineEditing}onBlur(){return this.scope.hasFocus=!1,this.ctrl.$focused=!1,this.scope.onblurFunc&&this.scope.onblurFunc(),!0}onFocus(){this.focusOnAuthorControls=!1,this.scope.readonly()||this.scope.hasFocus||(this.scope.hasFocus=!0,this.ctrl.$focused=!0,this.scope.onFocusFunc&&this.scope.onFocusFunc(),this.scope.$emit("entering-edit-state"))}isDirty(){return!(this.originalText||this.isTextTouched)}updateOriginalValues(){this.scope.ngModel===this.originalNgModel&&(this.originalText=this.scope.ngModel,this.originalPlainText=this.scope.plainText)}restoreFromOriginalValues(){this.originalText||(this.originalText="",this.originalPlainText=""),this.scope.ngModel=this.originalText,this.scope.plainText=this.originalPlainText}resetEditor(e){this.restoreFromOriginalValues()}isValidInputLength(){let e=null;if(null!=this.scope.getInputMaxLength&&(e=this.scope.getInputMaxLength()),null==e)return!0;if(e){let t=this.scope.plainText;return!!t&&t.trim().length<=e}return!0}constructor(e,t,n,i,s){this.scope=e,this.element=t,this.ctrl=n,this.bbLocalize=i,this.bbUltraState=s,this.focusOnAuthorControls=!1,this.isTextTouched=!1,this.myDirection="down",this.preventBlur=!1,this.currentStateName=s.current.name,e.disableInlineEditing=null!=e.disableInlineEditing&&e.disableInlineEditing,this.scope.$stopDigestPropagation=!0,this.originalNgModel=this.scope.ngModel,e.direction&&null!=e.direction()&&(this.myDirection=e.direction());let r=!(this.scope.ngModel&&this.scope.ngModel.length);e.$emit("text-editor-empty",{textEditor:this,isEmpty:r}),e.$root.$on("bb-bbml-editor-bbml-pre-redraw",()=>{this.updateOriginalValues()}),e.$on("text-editor-set-pristine",()=>{this.isTextTouched=!1}),e.$on("text-editor-viewValue-initialized",()=>{this.truncatedViewValue=this.ctrl.$viewValue}),e.$on("text-editor-reset-to-original-value",()=>{this.isDirty()&&this.updateOriginalValues(),this.resetEditor(!1)}),e.$on(d,()=>{this.updateOriginalValues(),this.isTextTouched=!1}),e.$on("$destroy",()=>{this.isTextTouched=!1})}}u=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([c(0,(0,l.tB)("scope")),c(1,(0,l.tB)("element")),c(2,(0,l.tB)("ctrl")),c(3,(0,l.tB)(s.serviceName)),c(4,(0,l.tB)(r.HV))],u)},805950:function(e,t,n){"use strict";n.d(t,{e1:function(){return m}});var i=n(532081),s=n(464027),r=n(381235),o=n(291146),a=n(247126),l=n(606592),c=n(529462),d=n(147941),u=n(211796);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultra.directives.basicTextEditor";class h extends d.yf{onKeydown(e){this.shouldPreventLineBreaking&&e.keyCode===l.K5&&(e.stopPropagation(),e.preventDefault())}constructor(e,t,n,i,s,r){super(t,n,i,s,r),this.shouldPreventLineBreaking=!0,t.$on(d.QM,()=>{this.updateOriginalValues(),this.isTextTouched=!1}),t.shouldPreventLineBreaking&&(this.shouldPreventLineBreaking=t.shouldPreventLineBreaking())}}h.$inject=[],h=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,u.tB)("$q")),p(1,(0,u.tB)("scope")),p(2,(0,u.tB)("element")),p(3,(0,u.tB)("ctrl")),p(4,(0,u.tB)(o.serviceName)),p(5,(0,u.tB)(a.HV))],h);class g{constructor(e){this.$injector=e,this.require=["ngModel"],this.replace=!0,this.restrict="E",this.scope={placeholderKey:"@",placeholderAttrsValues:"@",elementId:"@",readonly:"&",getInputMaxLength:"&?inputMaxLength",onchangeFunc:"&?",onblurFunc:"&?",onFocusFunc:"&",ngModel:"=",fieldRequired:"&?",plainText:"=?",validationMessage:"@?",focusOn:"@?",noValidationMessage:"&?",direction:"&?",shouldPreventLineBreaking:"&?"},this.link=(e,t,n,i)=>{let s=i[0];e.textEditor=this.$injector.instantiate(h,{scope:e,element:t,ctrl:s}),e.elementId||(e.elementId="text-editor-"+c.d())},this.template=i}}g.$inject=["$injector"],s.module(m,[r.e1,o.moduleName,a.e1]).directive("bbBasicTextEditor",["$injector",e=>e.instantiate(g)])},144597:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(464027),s=n(18447),r=n(625506),o=n(207069);let a="ultra.components.directives.featureToggle";class l{constructor(e,t){this.$parse=e,this.flagService=t,this.restrict="A",this.priority=1e3,this.transclude="element",this.terminal=!0,this.link=(e,t,n,i,o)=>{let a=!1,l=n.bbFeatureToggle.startsWith("!"),c=l?n.bbFeatureToggle.substring(1):n.bbFeatureToggle,d=r(document.createComment(`end bbFeatureToggle: ${n.bbFeatureToggle}`)),u=d.insertAfter(t),p="false"!==n.delayInitialLoad,m=!1,h=()=>{var e,i;m=!0;let r=l?!a:a,c=(null==n?void 0:null===(e=n.prototypeContent)||void 0===e?void 0:e.toLowerCase())==="true";if(s.default.showFeaturePrototypes||!c){let e=(null==n?void 0:null===(i=n.removeFromDom)||void 0===i?void 0:i.toLowerCase())==="true";e?(f(t.parent(),t,u),r&&o(e=>{g(e,t.parent(),t)})):o(e=>{r||e.addClass("bb-feature-toggle-hide"),f(t.parent(),t,u),g(e,t.parent(),t)})}},g=(e,t,n)=>{0!==n.parent().length?n.after(e):t.prepend(e)},f=(e,t,n)=>{let i=e.contents(),s=i.index(t)+1,r=i.index(n);s<r&&i.slice(s,r).remove()};e.$on("feature-flag-values-updated",(e,t)=>{let n=null==t?void 0:t[c],i=this.flagService.isFlagValueTrueStrict(n),r=p&&!m;n&&void 0!==i&&(r||i!==a)&&(a=s.default.features[c]||i,h())});let b=s.default.features[c]||this.flagService.isFeatureEnabledStrict(c);void 0===b&&p||(a=null!=b&&b,h())}}}l.$inject=["$parse",o.HV],i.module(a,[o.e1]).directive("bbFeatureToggle",["$injector",e=>e.instantiate(l)])},793423:function(e,t,n){"use strict";n.d(t,{WO:function(){return Z},Qk:function(){return j},mb:function(){return r},GZ:function(){return W},Ei:function(){return z},e1:function(){return q}}),n(160839),n(914602),n(411850);var i,s,r,o,a=n(276635),l=n(625506),c=n(464027),d=n(763674),u=n(291146);n(904051);var p=n(814154),m=n(206745),h=n(487393),g=n(868983);let f="ultra.directives.bbProgress";class b{cancelUploadFile(e){e.content&&this.scope.$root.$broadcast(z,e.content,r.DeleteContent),e.interval&&this.interval.cancel(e.interval);let t=this.scope.inProgressFiles.splice(this.scope.inProgressFiles.indexOf(e),1)[0];this.scope.$root.$broadcast(z,e.id,t,r.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())}remove(e){a.remove(this.scope.inProgressFiles,t=>t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.ui.fileId===e.ui.fileId&&this.isIdentifierInProgressFile(t.inProgressFileId,e.inProgressFileId):!!e.ui&&!!e.ui.id&&t.id===e.ui.id&&this.isIdentifierInProgressFile(t.inProgressFileId,e.inProgressFileId)),this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,0,e.id,r.Cancel,this.scope.primaryKey&&this.scope.primaryKey())}isIdentifierInProgressFile(e,t){return!e||!t||e===t}transformModelForDisplay(e){let t={barId:e.file.id?e.file.id.replace(/\D/g,""):"",content:e.content,currentMimeType:e.currentMimeType,currentProgress:0,file:e.file,fileName:e.fileName,fileSize:e.file.size,id:e.id,inProgressFileId:e.inProgressFileId||"",interval:null,ui:e.ui};return t}getProgressIdAttr(e){return e.inProgressFileId?`file-progress-${e.barId}-${e.inProgressFileId}`:`file-progress-${e.barId}`}setProgress(e,t,n,i){let s,o,l,c,d;if(n){d=a.find(this.scope.inProgressFiles,e=>e.file.id===n&&this.isIdentifierInProgressFile(e.inProgressFileId,i));let e=this.scope.targetDiv?`-${i}`:"",t=`#file-progress-${n.replace(/\D/g,"")}${e}`;c=this.scope.element.find(t+" .progress-circle .bar"),l=this.scope.element.find(t+" .processing-spinner .canvas")}else{d=this.scope.inProgressFiles.find(t=>t.id===e&&this.isIdentifierInProgressFile(t.inProgressFileId,i));let t=this.scope.inProgressFiles.indexOf(d);c=this.scope.element.find(".progress-circle-svg .bar").eq(t),l=this.scope.element.find(".processing-spinner .canvas").eq(t)}if(!d||d.currentProgress>=t)return;null!=d.interval&&this.interval.cancel(d.interval);let u=d.currentProgress;d.interval=this.interval(()=>{d&&(d.currentProgress++,o=(s=c.attr("stroke-dashoffset"))-s*(.01*d.currentProgress),c.css({strokeDashoffset:o+"px"}),100===d.currentProgress&&(d.isProcessing||(this.spinner.initInlineLoader(l,this.processingSpinnerArgs).start(),d.isProcessing=!0),n?this.scope.$root.$broadcast(z,n,r.UploadProgressComplete):this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,this.scope.inProgressFiles.indexOf(d),e,r.UploadProgressComplete),this.interval.cancel(d.interval)))},this.scope,20,t-u)}constructor(e,t,n,i,s){this.scope=e,this.bbLocalize=t,this.interval=n,this.$q=i,this.spinner=s,this.processingSpinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5},this.cancelUpload=(e,t,n)=>{e.stopImmediatePropagation(),e.preventDefault();let i=this.scope.inProgressFiles.filter(e=>e.id===t&&this.isIdentifierInProgressFile(e.inProgressFileId,n))[0];this.cancelUploadFile(i)},this.scope.$on("cancel-upload-all",e=>{this.scope.inProgressFiles.forEach(e=>{this.cancelUploadFile(e)})})}}b.$inject=["scope",u.serviceName,p.H,"$q",m.HV];class v{constructor(e,t,n){this.$injector=e,this.interval=t,this.bbLocalize=n,this.template=g,this.restrict="E",this.scope={displayResults:"=",progressId:"=",targetDiv:"@",primaryKey:"&?"},this.link=(e,t,n)=>{e.element=t,e.progress=this.$injector.instantiate(b,{scope:e}),e.progress.progressId=n.id||"directive-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.inProgressFiles=[],e.$on(z,(n,i,s,o,a)=>{if(null!=s&&(null!=s.content&&s.content.ui.fileUploadId===e.progress.progressId||e.progress.progressId===s.progressId||e.targetDiv&&e.targetDiv===a)){if(o!==r.Uploading||s.content){if(o===r.Uploaded)e.progress.displayResults||e.progress.remove(s);else if(o===r.Error)e.progress.remove(s);else if(o===r.CommenceUpload){if(null!=s.content){if(e.fileUploadDivId=i,t.attr("id")===s.targetElement.attr("id")){e.inProgressFiles.push(e.progress.transformModelForDisplay(s));let n=this.interval(()=>{let o=t.find(".progress-circle").length;o>0&&(e.$root.$broadcast(z,i,s,r.ProgressRenderComplete),this.interval.cancel(n))},e,100,10)}}else s.progressId===e.progress.progressId&&(e.inProgressFiles.push(e.progress.transformModelForDisplay(s)),e.$root.$broadcast(z,i,s,r.ProgressRenderComplete))}else o===r.Cancel&&e.progress.remove(s)}else if(e.fileUploadDivId=i,e.inProgressFiles.push(e.progress.transformModelForDisplay(s)),e.progress.displayResults){e.lastPiesRendered=0;let n=this.interval(()=>{let o=t.find(".progress-circle").length;if(o>e.lastPiesRendered){for(let t=e.lastPiesRendered;t<e.lastPiesRendered+o;t++)e.$root.$broadcast(z,i,t,e.inProgressFiles[t].id,r.ProgressRenderComplete,s.inProgressFileId),this.interval.cancel(n);this.interval.cancel(n)}e.lastPiesRendered=o},e,100,10)}else e.$root.$broadcast(z,i,e.inProgressFiles.length-1,e.inProgressFiles[e.inProgressFiles.length-1].id,r.ProgressRenderComplete,s.inProgressFileId,e.targetDiv)}}),e.$on(z,(t,n,i,s,o,a,l,c)=>{(l&&l===e.targetDiv||s&&s.attr&&s.attr("id")===e.element.attr("id")&&o===r.UpdateProgress)&&e.progress.setProgress(n,i,c,a)}),e.progress.displayResults=!0,e.$watch("::displayResults",t=>{e.progress.displayResults=t})}}}v.$inject=["$injector",p.H,u.serviceName],c.module(f,[h.e]).directive("bbProgress",["$injector",e=>e.instantiate(v)]);var y=n(18447),C=n(322484),S=n(834266),E=n(786121),I=n(748157),w=n(168132),A=n(305233),k=n(369695),x=n(247126),T=n(759485),P=n(685414),D=n(372457),G=n(4540),R=n(192166),B=n(972061),L=n(2160),N=n(479856),O=n(990106),M=n(276176),$=n(376893),H=n(177474),F=n(292821),U=n(19504),V=n(36790),_=n(443400);let q="ultra.directives.bbFileUpload",z="bbFileUpload",W="thirdPartyFileSelectedEvent",j="fileSelected",Z="dismissUploadModalEvent";(i=r||(r={})).AllUploadsCompleted="allUploadsCompleted",i.AssignDropTarget="assignDropTarget",i.Cancel="cancel",i.CommenceUpload="commenceUpload",i.ContentCreated="contentCreated",i.Delete="delete",i.DeleteContent="deleteContent",i.Error="error",i.File="file",i.FileDrop="fileDrop",i.Folder="folder",i.LinkProgress="linkProgress",i.OutlineAddContentButtonFileSelected="outlineAddContentButtonFileSelected",i.ProgressRenderComplete="progressRenderComplete",i.UpdateFileTypes="updateFileTypes",i.UpdateProgress="updateProgress",i.Uploaded="uploaded",i.Uploading="uploading",i.UploadProgressComplete="uploadProgressComplete",(s=o||(o={})).General="components.directives.fileUpload.errorFull",s.Security="components.directives.fileUpload.errorSecurity";class K{static generateTempFileId(){return`${Math.floor(1e4*Math.random())}-${Math.floor(1e4*Math.random())}`}}class X{getContentOutlineCloudKey(e,t){let n=t||this.scope.cloudUploadSelectedContentId;if(n)return`${e?"#progress":"progress"}${n}`}throwModalForNonFileUpload(){this.modalInstance=this.$modal.open({template:M,scope:this.scope,resolve:{translations:[u.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.catch(e=>{this.notifyUploadCancelled(),this.resetFileInput()})}endsWith(e,t){return e.lastIndexOf(t),e.lastIndexOf(t)===e.length-t.length}getUploadingFileIndexById(e,t){let n=this.uploadingFiles.filter(n=>n.id===e&&this.validateIdentifier(n.inProgressFileId,t))[0];return this.uploadingFiles.indexOf(n)}isFolder(e){let t=this.$q.defer();if("directory"===e.type)t.resolve(!0);else if(e instanceof Blob){let n=new FileReader;n.onload=()=>{1===n.readyState&&n.abort(),t.resolve(!1)},n.onerror=()=>{this.isLikelyAFile(e)&&(this.displayUploadError(),this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,e,r.Error,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),t.reject()),t.resolve(!0)},n.readAsText(this.sliceFileHelper(e))}else t.resolve(!1);return t.promise}sliceFileHelper(e){return e.slice(0,1)}isZipFile(e){return".zip"===e.substring(e.lastIndexOf(".")).toLowerCase()}isLikelyAFile(e){return"directory"!==e.type&&(""!==e.type||e.size>4096)}loadTranslations(){this.bbLocalize.loadBundle("components/directives/file-upload").then(()=>{this.browserFolderWarning=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.browserFolderWarning"}),this.cancelUploadText=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.cancelUploadText"}),this.unknownMimeType=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.unknownMimeType"}),this.uploaded=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.uploaded"}),this.uploading=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.uploading"})})}notifyUploadCancelled(){this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,null,r.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())}removeUploadingFile(e){a.remove(this.uploadingFiles,t=>t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.inProgressFileId&&e.inProgressFileId?t.ui.fileId===e.ui.fileId&&t.inProgressFileId===e.inProgressFileId:t.ui.fileId===e.ui.fileId:t.inProgressFileId&&e.inProgressFileId?e&&t.fileName===e.fileName&&t.inProgressFileId===e.inProgressFileId:e&&t.fileName===e.fileName),delete this.uploadsInProgress[e.id]}resetFileInput(){let e=l(document.body).find(".fileUploadInput");for(let t=0;t<e.length;t++){let n=e.eq(t);n[0].value=""}}registerRouterStateChangeEventHandlers(){this.scope.$on("$stateChangeStart",(e,t,n,i,s)=>{i.name===t.name||t.name===this.initialState||this.isStateIgnored(i,t)||this.confirmLeaveDuringUpload(e,t,n)})}isStateIgnored(e,t){if(this.scope.ignoredStates&&this.scope.ignoredStates()){for(let n of this.scope.ignoredStates())if(e.name.indexOf(n)>=0||t.name.indexOf(n)>=0)return!0}return!1}setUploadDate(){this.bbLocalize.formatDatetime(new Date,u.ILocaleDatetimeFormat.Short).then(e=>{this.uploadDate=e})}validateFiles(e){if(""===this.allowedFileTypes)return e;let t=[],n=!1;this.allowedFileTypes.indexOf("/")>0?(n=!0,t[0]=this.allowedFileTypes.substr(0,this.allowedFileTypes.indexOf("/")),t[1]=this.allowedFileTypes.substr(this.allowedFileTypes.indexOf("/")+1)):t=this.allowedFileTypes.toLowerCase().split(",");let i=[];for(let s=0;s<e.length;s++){let r=e[s];if(n){let e=[];e[0]=r.type.substr(0,this.allowedFileTypes.indexOf("/")),e[1]=r.type.substr(this.allowedFileTypes.indexOf("/")+1),t[0]===e[0]&&(t[1]===e[1]||"*"===t[1])&&i.push(r)}else for(let e=0;e<t.length;e++)if("."!==t[e].charAt(0)&&(t[e]="."+t[e]),this.endsWith(r.name.toLowerCase(),t[e])){i.push(r);break}}return i}validateUploadFileSizes(e){if(this.currentUploadCount=0,this.oversizedFiles=[],this.allowOversizedFiles)return e;let t=this.scope.fileUploadSettings.maxUploadSizeInBytes;return this.oversizedFiles=e.filter(e=>e.size>t),e.filter(e=>e.size<=t)}abortUpload(e){this.uploadsInProgress[e].abort(),delete this.uploadsInProgress[e]}abortAllUploads(){Object.keys(this.uploadsInProgress).forEach(e=>this.abortUpload(e))}validateIdentifier(e,t){return!e||!t||e===t}constructor(e,t,n,i,s,d,p,m,h,g,f,b,v,C,S,E,I,w,A){if(this.scope=e,this.element=t,this.attrs=n,this.contextCourseMembership=i,this.bbLocalize=s,this.cloudDrive=d,this.interval=p,this.$modal=m,this.$http=h,this.timeout=g,this.$compile=f,this.Upload=b,this.ultraState=v,this.FileUtilityFactory=C,this.errorModal=S,this.toast=E,this.$q=I,this.contextUser=w,this.$sceService=A,this.aborted=!1,this.alertedUserForFolderIncompatibility=!1,this.fileReviewVisible=!1,this.isMultipleUpload=!1,this.letMeChooseSelected=!1,this.progressVisible=!1,this.successVisible=!1,this.transcludeVisible=!0,this.uploadInProgress=!1,this.isUploadCompleteEventRegistered=!1,this.allowOversizedFiles=!1,this.currentUploadCount=0,this.failedUploadCount=0,this.idCounter=0,this.originalUploadCount=0,this.successfulUploadCount=0,this.allowedFileTypes="",this.allowMultiple=!1,this.hideTranscludeDuringUpload=!0,this.id="",this.isContent=!1,this.monitorLeave=!1,this.useDefaultSuccessMethod=!1,this.isThirdPartyUpload=!1,this.oversizedFiles=[],this.model={fileLocation:null,files:[]},this.uploadingFiles=[],this.uploadsInProgress={},this.cancelUpload=(e,t)=>{let n=this.getUploadingFileIndexById(e,t);this.scope.isThirdPartyUpload&&n>=0?this.uploadingFiles.splice(n,1):this.uploadsInProgress[e]&&n>=0&&(this.abortUpload(e),this.aborted=!0,this.originalUploadCount--,this.resetFileInput(),n>=0&&this.uploadingFiles.splice(n,1),(!this.allowMultiple||0===this.model.files.length)&&this.hideTranscludeDuringUpload&&(this.fileReviewVisible=!1,this.transcludeVisible=!0)),this.uploadingFiles&&0!==this.uploadingFiles.length||(this.uploadInProgress=!1)},this.updateModel=(e,t,n,i,s)=>{let r=e.mimeType?e.mimeType:n,o=this.fileUtil.calculateSize(t.size),a={fileLocation:e.fileLocation,webLocation:e.webLocation,fileName:e.fileName,currentMimeType:r,fileSize:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.sizeOutput",params:{label:o.sizeLabel,size:parseFloat(o.size.toFixed(2)).toString()}}),rawFileSize:t.size,isMedia:e.isMedia,uploadDate:this.uploadDate,targetClass:i,ui:{position:s}};return this.allowMultiple?this.model.files.push(a):this.model.files[0]=a,this.model.fileLocation=e.fileLocation,this.currentFileName=a.fileName,a},this.success=(e,t)=>{this.currentUploadCount--,this.model.files=[],this.currentUploadCount<=0&&(this.oversizedFiles.length&&this.openMaxSizeWarning(),this.scope.$root.$broadcast(z,r.AllUploadsCompleted,null,null,null,this.scope.primaryKey&&this.scope.primaryKey())),"/v1/files"===this.attrs.url&&this.useDefaultSuccessMethod&&this.hideTranscludeDuringUpload&&(this.transcludeVisible=!0)},this.displayUploadError=e=>{this.scope.errorModalErrorKey=null!=e?e:o.General,this.modalInstance=this.$modal.open({template:F,scope:this.scope,resolve:{translations:[u.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(()=>{},()=>{this.resetFileInput(),this.hideTranscludeDuringUpload&&(this.transcludeVisible=!0)})},this.getMoreSupportURL=()=>{let e=this.contextCourseMembership.isStudentOrGuestMembership()||this.contextUser.userModel.isStudent()||this.contextUser.userModel.isGuest();return e?"http://help.blackboard.com/001_563en_US":"http://help.blackboard.com/001_562en_US"},this.progress=(e,t,n)=>{this.scope.$root.$broadcast(z,e,t,n,r.UpdateProgress,void 0,this.scope.targetDiv)},this.conductUpload=(e,t,n)=>{let i,s,l=0;if(s=n?this.uploadingFiles.filter(e=>e.id===n)[0]:this.uploadingFiles.filter(t=>t.ui.primaryKey===e.ui.primaryKey)[0],i=e.targetElement?e.targetElement:this.scope.targetElement,this.scope.isThirdPartyUpload)e&&(e.ui.index=t,e.ui.position=this.scope.position&&this.scope.position(),e.ui.targetDiv=this.getContentOutlineCloudKey(!0)||this.scope.targetDiv,this.scope.thirdPartyDownloadHandler(e),this.oversizedFiles.length&&this.openMaxSizeWarning());else{let n=T.mg()+y.default.apiBasePath+"/v1/files?expand=mimeType,isMedia";this.scope.fileLocation&&(n=n+"&fileLocation="+this.scope.fileLocation),this.scope.webLocation&&(n=n+"&webLocation="+this.scope.webLocation),this.scope.extraParams&&(n=n+"&"+a.map(this.scope.extraParams(),(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&")),this.uploadsInProgress[s.id]=this.Upload.upload({url:n,method:"POST",headers:{"Content-Type":e.type},data:e.data,file:e.file,fileName:e.fileName}).progress(e=>{100!==(l=parseInt((100*e.loaded/e.total).toString(),10))?s.currentProgress=l:s.currentProgress<100&&(s.currentProgress=99),this.progress(s.id,l,i)}).success((n,i,o,a)=>{let l=this.interval(()=>{if(100===s.currentProgress||0===s.currentProgress){let i=this.updateModel(n,e.file,e.currentMimeType,e.targetClass,this.scope.position&&this.scope.position());if(i.ui.originFileName=e.fileName,this.success(i,t),this.successfulUploadCount++,this.removeUploadingFile(e),(!this.uploadingFiles||0===this.uploadingFiles.length)&&(this.uploadInProgress=!1,this.failedUploadCount+this.successfulUploadCount===this.originalUploadCount)){let e;e=this.originalUploadCount>1?0===this.failedUploadCount?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadSuccessful.plural",params:{filesCount:this.originalUploadCount},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:this.originalUploadCount-this.failedUploadCount,filesCount:this.originalUploadCount},noWrap:!0})+" "+this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:this.failedUploadCount,filenameList:this.bbLocalize.formatItemsSync(this.failedUploadFilenames,this.failedUploadFilenames.length,null,this.scope,!1,{noWrap:!0})},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.singleFile.uploadSuccessful",noWrap:!0}),this.scope.$root.$broadcast(P.i_,e)}i.ui.id=e.id,null!=e.content?this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,e.content,i,r.Uploaded,this.scope.targetDiv,this.isMultipleUpload):this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,i,r.Uploaded,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),this.interval.cancel(l)}},this.scope,100,5e3,!0)}).error(t=>{if(this.removeUploadingFile(e),this.failedUploadCount++,this.failedUploadFilenames.push(e.fileName),(!this.uploadingFiles||0===this.uploadingFiles.length)&&(this.uploadInProgress=!1,this.failedUploadCount+this.successfulUploadCount===this.originalUploadCount)){let e;e=this.originalUploadCount>1?this.failedUploadCount===this.originalUploadCount?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFailed",noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:this.originalUploadCount-this.failedUploadCount,filesCount:this.originalUploadCount},noWrap:!0})+" "+this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:this.failedUploadCount,filenameList:this.bbLocalize.formatItemsSync(this.failedUploadFilenames,this.failedUploadFilenames.length,null,this.scope,!1,{noWrap:!0})},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.singleFile.uploadFailed",noWrap:!0}),this.scope.$root.$broadcast(P.i_,e)}if(this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,e,r.Error,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),this.aborted)this.aborted=!1;else{let e=t&&422===t.status?o.Security:o.General;this.displayUploadError(e)}})}},this.prepareToUpload=(e,t,n,i)=>{let s;this.resetFileInput();let o=JSON.stringify({fileLocation:this.model.fileLocation}),l=e.type;l||(l=this.unknownMimeType);let d="img-icon-document",u=e.name||e.filename;if(this.scope.isThirdPartyUpload){(s={id:e.id,currentMimeType:l,currentProgress:0,data:o,file:e,fileName:u,inProgressFileId:K.generateTempFileId(),targetClass:d,type:e.type}).ui=c.copy(e.ui),s.ui?s.ui.primaryKey=this.scope.primaryKey&&this.scope.primaryKey():s.ui={primaryKey:this.scope.primaryKey&&this.scope.primaryKey()},t&&this.isZipFile(u)&&(s.ui.needUnzip=t),s.ui.fileId=e.id,this.uploadingFiles.push(s),this.isUploadCompleteEventRegistered||(this.scope.$on("uploadComplete",(e,t,n)=>{let i=a.findIndex(this.uploadingFiles,e=>t.ui.fileId===e.ui.fileId);if(i>=0){let e=this.getContentOutlineCloudKey(!0,n)||this.scope.targetDiv,i=this.getContentOutlineCloudKey(!1,n)||this.scope.primaryKey&&this.scope.primaryKey();this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,t,r.Uploaded,e,i),this.removeUploadingFile(t)}this.uploadingFiles&&0!==this.uploadingFiles.length||(this.uploadInProgress=!1)}),this.isUploadCompleteEventRegistered=!0);let n=this.getContentOutlineCloudKey(!0)||this.scope.targetDiv,i=this.getContentOutlineCloudKey(!1)||this.scope.primaryKey&&this.scope.primaryKey();this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,s,r.Uploading,n,i)}else(s={content:i,currentMimeType:l,currentProgress:0,data:o,file:e,fileName:u,id:K.generateTempFileId(),progressId:null,targetClass:d,type:e.type}).ui={primaryKey:this.scope.primaryKey&&this.scope.primaryKey()},this.uploadingFiles.push(s),null!=i?this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,s,r.FileDrop,this.scope.targetDiv):this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,s,r.Uploading,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())},this.uploadFiles=(e,t)=>{this.isContent||(this.fileReviewVisible=!0),this.hideTranscludeDuringUpload&&(this.transcludeVisible=!1),e.forEach(n=>{this.isContent?this.isFolder(n).then(e=>{e?(this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,n,r.Folder),this.scope.isChrome||this.alertedUserForFolderIncompatibility||(this.alertedUserForFolderIncompatibility=!0,this.errorModal.handleError(this.browserFolderWarning))):(this.uploadInProgress=!0,this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,n,r.File),this.currentUploadCount++)}):(this.uploadInProgress=!0,this.prepareToUpload(n,t,e.indexOf(n),null))})},this.calculateSizeInMib=e=>e/1048576,this.openMaxSizeWarning=()=>{this.maxFileSizeScope=this.scope.$new();let e="",t=this.scope.fileUploadSettings;this.maxFileSizeScope.shouldIncludeSupportLink=""!==t.supportLink,this.maxFileSizeScope.shouldRecommendAltStorageLocations=""!==t.recommendedAlternatives,this.maxFileSizeScope.shouldIncludeSupportLink&&(e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.maxSizeWarningSupportLinkText",params:{supportLink:t.supportLink},noWrap:!0}),e=this.$sceService.trustAsHtml(e)),this.maxFileSizeScope.maxFileSize=t.maxUploadSizeInBytes,this.maxFileSizeScope.alternateStorage=t.recommendedAlternatives,this.maxFileSizeScope.supportLink=e,this.maxFileSizeScope.closeModal=this.closeModal,this.maxFileSizeScope.calculateSizeInMib=this.calculateSizeInMib,this.maxFileSizeScope.overSizedFiles=this.oversizedFiles,this.oversizedFiles=[],this.modalInstance=this.$modal.open({template:V,scope:this.maxFileSizeScope,resolve:{translations:[u.serviceName,e=>e.loadBundle("components/directives/file-upload")]}})},this.continueCurrentUpload=(e,t)=>{e.length>0&&this.uploadFiles(e,t)},this.uploadEnabled=()=>(this.allowMultiple||this.allowMultipleSelects||0===this.uploadingFiles.length&&0===this.model.files.length)&&!this.scope.isThirdPartyUpload,this.fileUploadClick=()=>{this.uploadEnabled()&&this.element.find(".fileUploadInput").trigger("click",!0)},this.modalCancelUpload=()=>{this.modalInstance.dismiss()},this.addContent=e=>{e&&this.modalInstance.close(e)},this.closeModal=e=>{if(null===e||c.isUndefined(e))return this.modalInstance.close();e?this.modalInstance.close(e):(this.modalInstance.close(e),this.resetFileInput())},this.closeModalAndChooseFiles=()=>{this.closeModal(!0),this.resetFileInput(),this.element.find(".file-upload-container div:first-child").eq(0).click()},this.containsPackageFile=(e,t)=>{t?(this.modalInstance=this.$modal.open({template:$,scope:this.scope,resolve:{translations:[u.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(t=>{t&&this.continueCurrentUpload(e,t)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.continueCurrentUpload(e)},this.containsZipFile=e=>{let t=e.filter(e=>this.isZipFile(e.name));0!==t.length?(this.modalInstance=this.$modal.open({template:U,scope:this.scope,resolve:{translations:[u.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(t=>{this.continueCurrentUpload(e,t)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.containsPackageFile(e)},this.checkAllowedFileTypesAndValidateFileSizes=e=>{e=this.validateUploadFileSizes(e);let t=this.validateFiles(e);if(!e.length&&this.oversizedFiles.length){this.openMaxSizeWarning(),this.notifyUploadCancelled(),this.resetFileInput();return}t.length!==e.length?(this.validFiles=t,this.modalInstance=this.$modal.open({template:this.disallowedFileTypeErrorTemplate||B,scope:this.scope,resolve:{translations:[u.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(e=>{this.scope.skipZipFileCheck&&this.scope.skipZipFileCheck()?this.continueCurrentUpload(t,!1):this.containsZipFile(t)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.scope.skipZipFileCheck&&this.scope.skipZipFileCheck()?this.continueCurrentUpload(t,!1):this.containsZipFile(t)},this.removeFoldersIfBreaksDepthLimit=e=>{this.scope.depth&&this.scope.depth()>_.cY.getMaxCourseFolderDepth()?this.removeFolders(e,O):this.checkAllowedFileTypesAndValidateFileSizes(e)},this.removeFoldersIfDisallowed=e=>{this.scope.disallowFolderUploads&&this.scope.disallowFolderUploads()?this.removeFolders(e,L):this.removeFoldersIfBreaksDepthLimit(e)},this.removeFolders=(e,t)=>{let n={};this.$q.all(e.map(e=>this.isFolder(e).then(t=>t?n:e))).then(i=>{let s=i.filter(e=>e!==n);s.forEach(e=>{e.path=null}),s.length!==e.length?(this.scope.hasFiles=0!==s.length,this.modalInstance=this.$modal.open({template:t,scope:this.scope,resolve:{translations:[u.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(e=>{this.checkAllowedFileTypesAndValidateFileSizes(s)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.checkAllowedFileTypesAndValidateFileSizes(s)})},this.ensurePlurality=e=>{e.length>1&&!this.allowMultiple?(this.uploadedFiles=e,this.modalInstance=this.$modal.open({template:N,scope:this.scope,resolve:{translations:[u.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(t=>{let n=l('input[type="radio"][name="fileListing"]:checked').val();this.removeFoldersIfDisallowed([e[n]])},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.removeFoldersIfDisallowed(e)},this.onFileSelect=(e,t,n,i,s,o)=>{if(!(o&&(l(o.target).is(".js-no-file-drop")||l(o.target).is(".js-show-add-options")))&&(!e||!e.length||"Blob"!==e[0].constructor.name)){if(e.length){let t;this.isMultipleUpload=e.length>1,this.scope.$root.$broadcast(z,this.scope.primaryKey&&this.scope.primaryKey(),r.AssignDropTarget),this.scope.$root.$broadcast(z,this.scope.primaryKey&&this.scope.primaryKey(),r.OutlineAddContentButtonFileSelected),this.setUploadDate(),this.ensurePlurality(e),this.originalUploadCount=e.length,this.failedUploadCount=this.successfulUploadCount=0,this.failedUploadFilenames=[],t=this.originalUploadCount>1?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadStarted.plural",params:{filesCount:this.originalUploadCount},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.singleFile.uploadStarted",noWrap:!0}),this.scope.$root.$broadcast(P.i_,t)}else this.throwModalForNonFileUpload()}},this.confirmLeaveDuringUpload=(e,t,n)=>{(this.uploadInProgress||this.cloudDrive.isGettingFilesInfo)&&!X.isLeaveConfirmModalOpened&&(e.preventDefault(),this.modalInstance=this.$modal.open({template:R,scope:this.scope,resolve:{translations:[u.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),X.isLeaveConfirmModalOpened=!0,this.modalInstance.result.then(e=>{X.isLeaveConfirmModalOpened=!1,this.scope.isThirdPartyUpload||this.abortAllUploads(),this.aborted=!0,this.uploadInProgress=!1,this.uploadingFiles.forEach(e=>{this.scope.$root.$broadcast(z,this.scope.fileUploadDivId,e,r.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())}),this.ultraState.go(t.name,n)},()=>{X.isLeaveConfirmModalOpened=!1,this.scope.$root.$broadcast("$stateChangeAbort",{reason:"ABORTED_BY_FILE_UPLOAD"})}))},this.initialState=this.ultraState.current.name,this.allowMultipleSelects=e.$eval(e.allowMultipleSelects),this.scope.isChrome=/Chrome/.test(navigator.userAgent),this.disallowedFileTypeErrorTemplate=this.scope.disallowedFileTypeErrorTemplate,e.dragClass="drag",e.$on("bb-drag-start",()=>{e.dragClass=""}),e.$on("file-drag-restore",()=>{e.dragClass="drag"}),!e.isThirdPartyUpload){if(n.url)this.url=n.url;else throw Error("'url' attribute required in file upload");if(!n.data)throw Error("'data' attribute required in file upload")}this.element.find(".file-upload:first").on("click",(e,t)=>{(!this.scope.clickEnabled||this.scope.clickEnabled())&&!t&&this.fileUploadClick()}),["hideTranscludeDuringUpload","useDefaultSuccessMethod","allowedFileTypes","forceReselectDisallowedFiles","allowMultiple","isContent","fileUploadClick","allowOversizedFiles"].forEach(e=>{let t=this.scope.$watch(e,n=>{null!=n&&(t(),this[e]=n)})});let k=this.scope.$watch("targetDiv",n=>{if(null!=n)k(),this.scope.targetElement=t.find(n),0===this.scope.targetElement.length&&(this.scope.targetElement=l(n));else{this.progressVisible=!0;let n=this.interval(()=>{let e=t.find(".file-upload-panel");e.length>0&&(this.scope.targetElement=e,this.interval.cancel(n))},e,100,10)}}),x=this.scope.$watch("monitorLeave",e=>{e&&(this.registerRouterStateChangeEventHandlers(),x())});this.isThirdPartyUpload=e.isThirdPartyUpload,this.loadTranslations(),this.fileUtil=this.FileUtilityFactory()}}X.isLeaveConfirmModalOpened=!1;class Y{constructor(e,t,n,i,s,o,a,l,c,d,u,p,m,h,g,f,b){this.contextCourseMembership=e,this.bbLocalize=t,this.cloudDrive=n,this.$modal=i,this.$http=s,this.interval=o,this.timeout=a,this.$compile=l,this.Upload=c,this.ultraStateService=d,this.FileUtilityFactory=u,this.errorModal=p,this.toast=m,this.$q=h,this.contextUser=g,this.fileUploadSettingsService=f,this.$sceService=b,this.replace=!1,this.transclude=!0,this.restrict="E",this.template=H,this.scope={allowedFileTypes:"@",allowMultiple:"=",allowMultipleSelects:"@",cancelUpload:"=",clickEnabled:"&?",confirmLeaveDuringUpload:"=",closeModal:"=",closeModalAndChooseFiles:"@",delete:"=",disableDrag:"&?",disallowFolderUploads:"&?",extensions:"=",cloudUploadSelectedContentId:"<?",fileUploadClick:"=",forceReselectDisallowedFiles:"&?",hideTranscludeDuringUpload:"=",isContent:"=",improperAmountOfFilesUpload:"=",isThirdPartyUpload:"=?",primaryKey:"&?",modalCancelUpload:"=",monitorLeave:"=",onFileSelect:"=",position:"&?",showUnzippedSelection:"=",skipZipFileCheck:"&?",targetDiv:"@",thirdPartyDownloadHandler:"=",uploadUnzippedFiles:"=",unzippedFileSelection:"=",uploadEnabled:"=",useDefaultSuccessMethod:"=",fileLocation:"@?",webLocation:"@?",ignoredStates:"&?",extraParams:"&?",depth:"&?",initialUpload:"=?",disallowedFileTypeErrorTemplate:"@?",allowOversizedFiles:"<?"},this.link=(e,t,n,i)=>{e.fileUploadDivId=`fileUploadDiv-${K.generateTempFileId()}`,e.targetElement=t.find(".file-upload-panel"),e.fileUpload=new X(e,t,n,this.contextCourseMembership,this.bbLocalize,this.cloudDrive,this.interval,this.$modal,this.$http,this.timeout,this.$compile,this.Upload,this.ultraStateService,this.FileUtilityFactory,this.errorModal,this.toast,this.$q,this.contextUser,this.$sceService),e.$on(W,(t,n,i)=>{t.stopPropagation&&t.stopPropagation(),i&&i===(e.primaryKey&&e.primaryKey())&&e.fileUpload.onFileSelect(n),e.$emit(j,n,i)}),e.$on(Z,()=>{e.fileUpload.modalInstance&&e.fileUpload.modalInstance.dismiss()}),e.$on(z,(t,n,i,s,o,a,l,c)=>{if(n===e.fileUploadDivId){if(o===r.Cancel)e.fileUpload.cancelUpload(s,a);else if(o===r.ProgressRenderComplete)"number"==typeof i&&e.fileUpload.conductUpload(e.fileUpload.uploadingFiles.filter(t=>t.id===s&&e.fileUpload.validateIdentifier(t.inProgressFileId,a))[0],i,s);else if(o===r.UploadProgressComplete){let t=e.fileUpload.uploadingFiles.filter(t=>t.id===s&&e.fileUpload.validateIdentifier(t.inProgressFileId,a))[0];t&&(t.currentProgress=100)}}}),e.$on(z,(n,i,s,o,a)=>{i===(e.primaryKey&&e.primaryKey())&&a===r.UpdateFileTypes&&(e.fileUpload.allowedFileTypes=s,t.find("input").attr("accept",s),o())}),e.$on(z,(t,n,i,s)=>{n===e.fileUploadDivId&&i&&i.fileName&&s===r.ProgressRenderComplete&&e.fileUpload.conductUpload(i,0,i.id)}),e.$on(z,(t,n,i,s)=>{if(n===e.fileUploadDivId&&s===r.ContentCreated){let t=this.interval(()=>{e.fileUpload.prepareToUpload(i.ui.file,!1,0,i),this.interval.cancel(t)},e,100,20)}}),e.$on(z,(t,n,i,s,o,a)=>{if(n===e.fileUploadDivId&&a===r.LinkProgress)for(let t=0;t<e.fileUpload.uploadingFiles.length;t++)i.content?e.fileUpload.uploadingFiles[t].fileName===i.fileName&&e.fileUpload.uploadingFiles[t].file.path===i.file.path&&e.fileUpload.uploadingFiles[t].id===i.id&&(e.fileUpload.uploadingFiles[t].progressId=i.content.ui.fileUploadId,e.$root.$broadcast(z,e.fileUploadDivId,i,r.CommenceUpload)):e.fileUpload.uploadingFiles[t].fileName===i.fileName&&e.fileUpload.uploadingFiles[t].file.path===i.file.path&&e.fileUpload.uploadingFiles[t].id===i.id&&null==e.fileUpload.uploadingFiles[t].progressId&&(e.fileUpload.uploadingFiles[t].progressId=e.fileUpload.isContent?null:s,e.fileUpload.uploadingFiles[t].targetElement=o,e.$root.$broadcast(z,e.fileUploadDivId,i,r.CommenceUpload))}),e.fileUploadSettings=this.fileUploadSettingsService.getSettings(),e.initialUpload&&e.fileUpload.uploadFiles([e.initialUpload],!1)}}}Y.$inject=[d.HV,u.serviceName,C.HV,I.HV,"$http",p.H,A.H,"$compile","Upload",x.HV,E.xQ,S.HV,k.HV,"$q",D.HV,G.HV,"$sce"],c.module(q,["ngFileUpload",d.e1,u.moduleName,C.e1,p.e,I.e1,w.e1,E.e1,A.e,f,S.e1,k.e1,x.e1,G.e1]).directive(z,["$injector",e=>e.instantiate(Y)])},708678:function(e,t,n){"use strict";n.d(t,{Rp:function(){return p},dG:function(){return u},e1:function(){return d}}),n(839571);var i=n(464027),s=n(625506),r=n(619903),o=n(240231),a=n(305233),l=n(606592),c=n(193313);let d="ultra.components.directives.foundationOffcanvas",u="OFFCANVASE-TOGGLE-CLOSE",p="OFFCANVAS-TOGGLE-OPEN";class m{initialProperties(){this.attrs.bbFoundationOffcanvasPosition&&(this.position=this.attrs.bbFoundationOffcanvasPosition),this.attrs.bbFoundationOffcanvasEventDelegate&&(this.scope.$on(p,()=>{this.openPanel()}),this.scope.$on(u,()=>{this.closePanel()})),this.attrs.bbFoundationOffcanvasDialogModel&&(this.dialogModel=this.attrs.bbFoundationOffcanvasDialogModel)}wireup(){return this.wiredup=!0,this.timeout(()=>{if(this.closeButtonElement=s("#"+this.attrs.bbFoundationOffcanvasCloseButton),0===this.closeButtonElement.length)throw Error('The bbFoundationOffcanvas directive couldn\'t find a "Close Menu" button with an ID of '+this.attrs.bbFoundationOffcanvasCloseButton);if(this.wrapperElement=this.element,this.offcanvasPanelElement=this.element.children().children(),1!==this.offcanvasPanelElement.length)throw Error("bbFoundationOffcanvas directive must have exactly one child element. Fix the usage in the html template.");if(this.offcanvasPanelElement.addClass(this.position+"-off-canvas-menu"),this.attrs.bbFoundationOffcanvasOverrideButtonClass&&(this.overrideButtonClass=this.$parse(this.attrs.bbFoundationOffcanvasOverrideButtonClass)(this.scope)),this.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),this.closeButtonElement.addClass("exit-off-canvas-overlay").on("click.bbFoundationOffcanvas",()=>{this.scope.$apply(()=>{this.closePanel()})}),this.offcanvasPanelElement.find("a, button").last().on("keydown.bbFoundationOffcanvas",e=>{e.keyCode!==l.Mf||e.shiftKey||(e.preventDefault(),this.scope.$apply(()=>{this.closePanel()}))}),this.offcanvasPanelElement.find("a, button").first().on("keydown.bbFoundationOffcanvas",e=>{e.keyCode===l.Mf&&e.shiftKey&&(e.preventDefault(),this.scope.$apply(()=>{this.closePanel()}))}),this.scope.$on("foundation-offcanvas-close-panel",()=>{this.closePanel()}),null!=this.attrs.bbFoundationOffcanvasCommonParent){if(this.commonParent=s("#"+this.attrs.bbFoundationOffcanvasCommonParent),0===this.commonParent.length)throw Error("The bbFoundationOffcanvas directive couldn't find a common parent element with an ID of "+this.attrs.bbFoundationOffcanvasCommonParent)}else this.commonParent=s(this.wrapperElement).parents().has(this.closeButtonElement).first();if(this.commonParent.hasClass("group-list")||this.commonParent.addClass("off-canvas-wrap off-canvas-overlay"),!this.overrideButtonClass){let e=this.offcanvasPanelElement.find("li").not(".ng-hide").length;this.commonParent.addClass("buttons-"+e)}o.c(this.commonParent,e=>(this.isPanelOpen&&(e.data.noTransitions||"right"===e.originalEvent.propertyName)&&(this.isFromKeyBoard?this.offcanvasPanelElement.find("a, button").first().focus():(this.offcanvasPanelElement.parent().attr("tabindex",0),this.offcanvasPanelElement.parent().focus())),!1)),this.element.foundation(),this.scope.$on("$destroy",()=>{this.element.off("click.bbFoundationOffcanvas"),this.closeButtonElement.off("click.bbFoundationOffcanvas"),this.offcanvasPanelElement.find("a, button").last().off("keydown.bbFoundationOffcanvas"),this.offcanvasPanelElement.find("a, button").first().off("keydown.bbFoundationOffcanvas"),this.commonParent.removeClass("off-canvas-wrap off-canvas-overlay")})},this.scope,0,!1)}getPosition(){switch(this.position){case"right":return"left";case"top":return"bottom";case"bottom":return"top";default:return"right"}}_openPanel(){this.offcanvasPanelElement.css("display","block"),this.justOpenedPanel=!0,this.timeout(()=>{this.offcanvasPanelElement.foundation("offcanvas","show","move-"+this.getPosition()),this.isPanelOpen=!0,this.offcanvasPanelElement.find("a, button").attr("tabindex","0"),this.justOpenedPanel=!1},this.scope,0,!1)}openPanel(){if(this.wiredup)this._openPanel();else{let e=this.$q.defer();this.scope.$watch("::foundationOffcanvas.wiredup",t=>{t&&e.resolve()}),this.$q.all([this.wireup(),e.promise]).then(()=>{this._openPanel()})}}closePanel(){this.offcanvasPanelElement.foundation("offcanvas","hide","move-"+this.getPosition()),this.isPanelOpen=!1,this.isFromKeyBoard=!1,this.offcanvasPanelElement.parent().removeAttr("tabindex"),this.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),this.openButtonElement.focus(),this.timeout(()=>{this.isPanelOpen||this.offcanvasPanelElement.css("display","none")},this.scope,300,!1)}handleClickOutside(){!this.dialogModel&&(s("body").hasClass("modal-open")||this.justOpenedPanel||this.closePanel())}togglePanel(){this.isPanelOpen?this.closePanel():this.openPanel()}constructor(e,t,n,i,r,o,a){this.scope=e,this.element=t,this.attrs=n,this.$compile=i,this.$parse=r,this.$q=o,this.timeout=a,this.overrideButtonClass=!1,this.isPanelOpen=!1,this.justOpenedPanel=!1,this.isFromKeyBoard=!1,this.wiredup=!1,this.position="right",this.dialogModel=!1,this.initialProperties(),a(()=>{if(this.openButtonElement=s("#"+this.attrs.bbFoundationOffcanvasOpenButton),0===this.openButtonElement.length)throw Error('The bbFoundationOffcanvas directive couldn\'t find an "Open Menu" button with an ID of '+this.attrs.bbFoundationOffcanvasOpenButton);this.openButtonElement.on("click.bbFoundationOffcanvas",()=>{this.scope.$apply(()=>{this.togglePanel()})}),this.openButtonElement.on("keydown.bbFoundationOffcanvas",e=>{e.keyCode===l.K5&&(this.isFromKeyBoard=!0)})},e,0,!1)}}m.$inject=["scope","element","attrs","$compile","$parse","$q",a.H];class h{constructor(e){this.$injector=e,this.transclude=!0,this.restrict="E",this.link=(e,t,n)=>{if(null==n.bbFoundationOffcanvasOpenButton||null==n.bbFoundationOffcanvasCloseButton)throw Error('Please provide jQuery selectors for both the "Open Menu" and "Close Menu" buttons');let i=n.$observe("bbFoundationOffcanvasCloseButton",s=>{s&&(e.foundationOffcanvas=this.$injector.instantiate(m,{scope:e,element:t,attrs:n}),i())})},this.template=c}}h.$inject=["$injector"],i.module(d,[r.e1,a.e]).directive("bbFoundationOffcanvas",["$injector",e=>e.instantiate(h)])},227961:function(e,t,n){"use strict";n.d(t,{e1:function(){return g}}),n(914602),n(19149),n(20720);var i=n(211796),s=n(625506),r=n(276635),o=n(464027),a=n(529462),l=n(336),c=n(305233),d=n(606592),u=n(109205),p=n(683356);function m(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function h(e,t){return function(n,i){t(n,i,e)}}let g="ultra.directives.bbFoundation";window.Foundation.libs.dropdown.dirs._base=function(e){var t,n;let i=this.offsetParent(),s=i.offset(),r=e.offset();r.top-=s.top,r.left-=s.left,r.missRight=!1,r.missTop=!1,r.missLeft=!1,r.leftRightFlag=!1;let o=null!==(n=null===(t=this.closest(".panel-wrap")[0])||void 0===t?void 0:t.clientWidth)&&void 0!==n?n:window.innerWidth,a=(window.innerWidth-o)/2;if(!this.hasClass("mega")){let t=this.outerWidth(),n=e.offset();n.top<=this.outerHeight()&&(r.missTop=!0,window.innerWidth,r.leftRightFlag=!0),n.left-a+t>o?(r.missRight=!0,r.missLeft=!1):n.left-a-t<=0&&(r.missLeft=!0,r.missRight=!1)}return this.toggleClass("miss-right",r.missRight),this.toggleClass("miss-left",r.missLeft),r};let f=window.Foundation.libs.dropdown.dirs.bottom;window.Foundation.libs.dropdown.dirs.bottom=function(e,t){var n;let i=window.Foundation.libs.dropdown,s=f.call(this,e,t);return!i.rtl||(null===(n=e[0].dataset)||void 0===n?void 0:n.defaultPositioning)?s:this.offsetParent()[0]===e.offsetParent()[0]?{...s,left:0}:{...s,left:e.offset().left}};let b=window.Foundation.libs.dropdown.dirs.right;window.Foundation.libs.dropdown.dirs.right=function(e,t){let n=window.Foundation.libs.dropdown,i=b.call(this,e,t);return n.rtl?{...i,left:i.left-e.outerWidth()}:i};let v=window.Foundation.libs.dropdown.adjust_pip;window.Foundation.libs.dropdown.adjust_pip=function(e,...t){e.hasClass("disable-pip-adjustment")||v.apply(this,[e,...t])};let y=(e,t,n,i)=>{e.$on("$destroy",()=>{window.Foundation.scope===t[0]&&(window.Foundation.scope=null),r.forEach(window.Foundation.libs,e=>{e.scope===t[0]&&(e.scope=null),delete e.bindings,delete e.settings.callback})}),["small","small-only","medium","medium-only","large","large-only","xlarge","xlarge-only","xxlarge"].forEach(e=>{window.Foundation.media_queries[e]=s(".foundation-mq-"+e).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")}),l.B();let o=e=>{e.each((t,i)=>{let r=s(i),o=r.hasClass("active"),a=r.children("a").first(),l=r.children(".content").first(),c=s("body");l.attr("aria-hidden",!o+""),a.attr({"aria-selected":o,"aria-expanded":o});let u=r.find(':tabbable[role!="tab"]').add(r.find('[tabindex="-1"]')).add(r.find("input")).not(r.children("a").first());o?u.attr("tabindex",0):u.attr("tabindex","-1"),n||(a.on("keydown",n=>{if(n.keyCode===d.UP||n.keyCode===d.RL){let n=0===t?e.length-1:t-1;s(e.get(n)).children("a").first().focus()}else if(n.keyCode===d.WV||n.keyCode===d.pX){let n=t===e.length-1?0:t+1;s(e.get(n)).children("a").first().focus()}else n.keyCode===d.Sd?s(e.get(0)).children("a").first().focus():n.keyCode===d.uR&&s(e.get(e.length-1)).children("a").first().focus();c.removeClass("hide-focus-outline")}),l.on("keydown",n=>{if(n.ctrlKey&&n.keyCode===d.UP)a.focus();else if(n.ctrlKey&&n.keyCode===d.Ku){let n=0===t?e.length-1:t-1;s(e.get(n)).children("a").first().focus()}else if(n.ctrlKey&&n.keyCode===d.VM){let n=t===e.length-1?0:t+1;s(e.get(n)).children("a").first().focus()}c.removeClass("hide-focus-outline")})),r.addClass("accordion-complete")})},c=t.find(".accordion");c.length>0&&c.each((e,t)=>{let n=s(t),i=n.find(".accordion-navigation:not(.accordion-complete)");n.attr("role","tablist"),i.each((t,n)=>{let i=s(n),r=i.children("a").first(),o=i.children(".content").first();r.attr("role","tab"),o.attr("role","tabpanel");let l=a.d(),c="accordion"+e+"-"+l+"-header"+t,d="accordion"+e+"-"+l+"-panel"+t;r.attr("id",c),o.attr("id",d),r.attr("href","#"+d),r.attr("aria-controls",d),o.attr("aria-labelledby",c)}),o(i)}),i(t,e),t.foundation({accordion:{multi_expand:!0,callback:e=>{e.closest(".accordion").removeAttr("aria-multiselectable");let t=e.closest(".accordion").children(".accordion-navigation");o(t)}},dropdown:{}})};class C{constructor(e,t){this.dropdownInit=e,this.integrationEventEmitterService=t,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,n)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);let i=e.$eval(n.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()}),y(e,t,i,this.dropdownInit)},this.onDestroyHandler=null}}C=m([h(0,(0,i.tB)(u.H)),h(1,(0,i.tB)(p.HV))],C);class S{constructor(e,t,n){this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,n)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);let i=e.$eval(n.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()}),this.timeout(()=>{y(e,t,i,this.dropdownInit)},e,0,!1)},this.onDestroyHandler=null}}S=m([h(0,(0,i.tB)(c.H)),h(1,(0,i.tB)(u.H)),h(2,(0,i.tB)(p.HV))],S);class E{constructor(e,t,n){this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,n)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);let i=e.$eval(n.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()});let s=e.$watch(n.bbFoundationWait,n=>{n&&(s(),this.timeout(()=>{y(e,t,i,this.dropdownInit)},e,0,!1))})}}}E=m([h(0,(0,i.tB)(c.H)),h(1,(0,i.tB)(u.H)),h(2,(0,i.tB)(p.HV))],E);class I{constructor(e,t,n){this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,n)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);let i=e.$eval(n.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()}),e.$watch(n.bbFoundationWaitContinuous,n=>{n&&this.timeout(()=>{y(e,t,i,this.dropdownInit)},e,0,!1)},null!=n.bbDeepWatch&&n.bbDeepWatch)}}}I=m([h(0,(0,i.tB)(c.H)),h(1,(0,i.tB)(u.H)),h(2,(0,i.tB)(p.HV))],I),o.module(g,[c.e,u.e,p.e1]).directive("bbFoundation",["$injector",e=>e.instantiate(C)]).directive("bbFoundationDefer",["$injector",e=>e.instantiate(S)]).directive("bbFoundationWait",["$injector",e=>e.instantiate(E)]).directive("bbFoundationWaitContinuous",["$injector",e=>e.instantiate(I)])},908707:function(e,t,n){"use strict";n.d(t,{e1:function(){return l}});var i,s=n(464027),r=n(379614),o=n(548792),a=n(211796);let l="ultra.components.directives.firstTimeContainer";class c{constructor(e){this.firstTimeHelper=e,this.manager=r.uS}}c=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(i=(0,a.tB)(o.HV),function(e,t){i(e,t,0)})],c);class d{constructor(){this.restrict="AE",this.controller=c,this.link=(e,t,n,i)=>{i.manager.startQueue(),e.$on("hide-ftue-component",(e,t)=>{i.manager.hideComponent(t)})}}}s.module(l,[o.e1]).directive("bbFirstTimeContainer",["$injector",e=>e.instantiate(d)])},519833:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(211796),s=n(916415),r=n(228794);function o(e,t){return function(n,i){t(n,i,e)}}let a="ultra.components.directives.buttonComplexTooltip";!function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);r>3&&o&&Object.defineProperty(t,n,o)}([(0,s.wA)({moduleName:a,componentName:"bbButtonComplexTooltip",template:r}),o(0,(0,i.tB)("$scope")),o(1,(0,i.tB)("$rootScope"))],class{$onInit(){this.$scope.buttonComplexTooltip=this}getToolTipTemplate(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'}constructor(e,t){this.$scope=e,this.$rootScope=t}})},213778:function(e,t,n){"use strict";n.d(t,{eB:function(){return is},dT:function(){return u},e1:function(){return ii}}),n(540960),n(835901),n(895384),n(78914),n(778342),n(262817);var i,s,r,o,a,l,c,d,u,p=n(276635),m=n(464027),h=n(948319);n(626552);var g=n(444938),f=n(48852),b=n(299530),v=n(406002),y=n(104485),C=n(495175),S=n(266481),E=n(708678),I=n(291146),w=n(305233),A=n(951248),k=n(85259),x=n(539210),T=n(211796),P=n(188183),D=n(719151);function G(e,t){return function(n,i){t(n,i,e)}}let R="ultra.components.directives.grade.courseGradesGraderList";class B{subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({setupOverallGradeMessageIsHiddenPreference:A.Ys.coursePreference.getCoursePreferenceByKeyAndCourseId(e,x.nv.key,this.course.id),gradebookColumns:A.Ys.gradebookColumn.getGradebookColumnsByCourseId(e,this.course.id)}),e=>({loadSetupOverallGradeMessageIsHiddenPreference:t=>e(A.Nwg.coursePreference.loadCoursePreference({key:t,courseId:this.course.id}))}))((e,t)=>{let{setupOverallGradeMessageIsHiddenPreference:n,gradebookColumns:i}=e,{loadSetupOverallGradeMessageIsHiddenPreference:s}=t;if(Object.assign(this,{setupOverallGradeMessageIsHiddenPreference:n,loadSetupOverallGradeMessageIsHiddenPreference:s}),this.currentGradebookColumns&&i&&this.currentGradebookColumns!==i){let e=i.find((e,t)=>!p.isEqual(e,this.currentGradebookColumns[t]));e&&this.columns.forEach(t=>{t.id===e.id&&t.isFormative!==e.isFormative&&(t.isFormative=e.isFormative)})}this.currentGradebookColumns=null!=i?i:[]});this.scope.$on("$destroy",e)}findGraderItemById(e){return p.find(this.columns,t=>t.id===e)}setupOverallGradeHideMessageCallback(){this.scope.$apply(()=>this.showSetupOverallGradeMessage=!1)}onClickSort(e){this.scope.onClickSortIcon({headerName:e})}getSortTypeValue(e){return(0,D.f)(e,this.scope.sortAttributes)}getAriaLabelString(e){var t;return(null===(t=this.scope.sortAttributes)||void 0===t?void 0:t.sortType)&&this.scope.sortAttributes.columnName===e?"components.directives.grade.course-grades-grader-list.headers.aria-label."+e+"."+this.scope.sortAttributes.sortType:"components.directives.grade.course-grades-grader-list.headers.aria-label."+e+".none"}constructor(e,t,n,i,s,r){this.scope=e,this.attrs=t,this.gradebookPermissionService=n,this.$ngRedux=i,this.grade=s,this.categoryService=r,this.categoryMap={},this.onMoveGraderItem=e=>{let t=this.findGraderItemById(e.dragContentId),n=t.positionBeforeId?t.positionBeforeId:null,i=t.positionAfterId?t.positionAfterId:null,s=this.columns.indexOfItemById(e.dragContentId),r=null;if(e.positionBeforeId?(-1!==(r=this.columns.indexOfItemById(e.positionBeforeId))&&-1!==s&&s<r&&r--,t.positionBeforeId=e.positionBeforeId):e.positionAfterId&&(-1!==(r=this.columns.indexOfItemById(e.positionAfterId))&&-1!==s&&s>r&&r++,t.positionAfterId=e.positionAfterId),null==r||s===r||-1===s||-1===r){t.positionBeforeId=n,t.positionAfterId=i;return}return this.columns.splice(r,0,this.columns.splice(s,1)[0]),t.$patch()},this.canModify=this.gradebookPermissionService.canModify(),this.contextArea="grades",this.columns=e.columns,this.course=e.course(),this.hasColumns=!0,this.currentGradebookColumns=[],this.subscribeToReduxChanges(),this.categoryService.getOrLoadCategoriesForCourse(this.scope.course().id).then(e=>{e.forEach(e=>{this.categoryMap[e.id]=e})}),this.scope.showSetupOverallColumn&&this.loadSetupOverallGradeMessageIsHiddenPreference&&!this.setupOverallGradeMessageIsHiddenPreference&&this.loadSetupOverallGradeMessageIsHiddenPreference(x.nv.key).then(()=>{var e;let t=(null===(e=this.setupOverallGradeMessageIsHiddenPreference)||void 0===e?void 0:e.value)==="true";this.showSetupOverallGradeMessage=!t}),e.$watchCollection("columns",t=>{t&&(this.columns=t,this.hasColumns=0!==t.length,this.attendanceColumnExists=this.columns.some(e=>e.isAttendance()),e.$broadcast("update-content-menu"))}),e.$on("content-item-mouseover",(t,n)=>{e.$apply(()=>{e.$broadcast("content-item-hover",n)})}),e.$on("course-gradebook-mouse-leave",()=>{e.$broadcast("content-outline-hover-end")}),e.$on("attempt-base-content-update",(e,t)=>{let n=this.columns.filter(e=>t.id===e.contentId);n.length>0&&n.forEach(e=>{e.$fetch()})}),e.$on("bb-change-overall-panel-visibility",(e,t,n)=>{var i;if(this.course.id!==t&&this.course.isComplete())return;let s=(null===(i=this.setupOverallGradeMessageIsHiddenPreference)||void 0===i?void 0:i.value)==="true";this.showSetupOverallGradeMessage=s?!s:n})}}B=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([G(0,(0,T.tB)("scope")),G(1,(0,T.tB)("attrs")),G(2,(0,T.tB)(y.HV)),G(3,(0,T.tB)("$ngRedux")),G(4,(0,T.tB)(C.HV)),G(5,(0,T.tB)(S.HV))],B);class L{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="E",this.template=k,this.scope={course:"&",columns:"=",showSetupOverallColumn:"=",isFirst:"=",attendanceIsAvailable:"&",sortAttributes:"=",onClickSortIcon:"&"},this.link=(e,t,n)=>{this.timeout(()=>{e.courseGradesGraderList=this.$injector.instantiate(B,{scope:e,element:t,attrs:n})},e)}}}L.$inject=["$injector",w.H],m.module(R,[v.e1,E.e1,g.e,f.e1,b.e1,P.e]).directive("bbCourseGradesGraderList",["$injector",I.serviceName,(e,t)=>(t.loadBundle("components/directives/grade/course-grades-grader-list"),e.instantiate(L))]);var N=n(350383),O=n(916415),M=n(319434),$=n(915121),H=n(815372),F=n(97478),U=n(873518),V=n(369695),_=n(247126);let q="rb_grid_",z={CELL_FOCUSED:`${q}cell_focused`,COLUMN:`${q}column`,DATA_UPDATE:`${q}data_update`,ENTER_CELL:`${q}enter_cell`,ENTER_NEXT_CELL:`${q}enter_next_cell`,FOCUS_CELL:`${q}focus_cell`,LEAVE_CELL:`${q}leave_cell`,LEAVE_GRID:`${q}leave_grid`,ROW:`${q}row`,SCROLL_H:`${q}scroll_h`,SCROLL_V:`${q}scroll_v`};var W=n(470269),j=n(625506);function Z(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function K(e,t){return function(n,i){t(n,i,e)}}class X{getCourse(){return this.gridData.course}hasContextMenuOptions(){return this.isScorm()||this.canView()||this.gradeService.canPostGrades(this.gridData.course,this.data)||this.data.isQuestionAnalysisAvailable()&&this.canViewQuestionAnalysis()||this.canDelete()}isAssessment(){return A.u$1.Test.isEqualTo(this.data.scoreProviderHandle)}canView(){return!this.data.scoreProviderHandle||(this.isAssessment()?this.canViewAssessment:this.canViewContentDesigner)}canEdit(){return!this.gridData.course.isComplete()&&(this.data.scoreProviderHandle?this.isAssessment()?this.canModifyAssessment:this.canModifyContent:this.gradebookPermissionService.canModify())}canDelete(){return!this.gridData.course.isComplete()&&(this.data.scoreProviderHandle?this.isAssessment()?this.canDeleteAssessment:this.canDeleteContent:this.gradebookPermissionService.canModify())}deleteColumn(){throw Error("Unsupported operation exception")}deleteColumnFromGridData(){this.gridData.deleteColumn(this)}getConfirmationMessage(){throw Error("Unsupported operation exception")}viewOrEdit(){if(A.u$1.PartnerCloud.isEqualTo(this.data.scoreProviderHandle))this.ltiService.ltiLaunch({courseId:this.data.courseId,contentId:this.data.contentId,linkType:M.GQ.PartnerCloud,linkRefId:this.data.linkId});else{let e=this.data.scoreProviderHandle;(!e||this.scoreProviderHelper.supportsOverall(e))&&(this.scoreProviderHelper.supportsExternalEdit(e)?this.ltiService.ltiEditColumn(this.data):this.openEditState())}}canViewQuestionAnalysis(){return this.gradebookPermissionService.canViewGrades()}openQuestionAnalysisOverview(){throw Error("Unsupported operation exception")}showDownloadResults(){return this.gridData.canViewGrades&&this.isAssessment()&&this.data.summary.numSubmissionsTotal>0}hasDownloads(){return A.u$1.Test.isEqualTo(this.data.scoreProviderHandle)}canDownloadAll(){return!1}openDownloadAll(){this.ultraState.goPeekState("grades-bulk-download",{columnId:this.id})}previewScorm(){this.isScorm()&&this.scormService.scormLaunch({courseId:this.data.courseId,contentId:this.data.contentId,showPreLaunchPanel:!1})}openEditState(){throw Error("Unsupported operation exception")}postGrades(){this.data.postReadyGrades().then(()=>(this.toast.show({messageKey:"components.directives.grade.grid.gradesPosted",icon:"icon-check",toastStatus:"success"}),this.data.anonymousGrading)?this.data.$fetch().$asPromise().then(()=>this.data.summary.$fetch().$asPromise()):this.data.summary.$fetch().$asPromise()).then(()=>{this.gridData.updateColumnByMetadata(this.data)&&this.rootScope.$broadcast(z.COLUMN)})}isShowSummary(){return!0}isScorm(){return this.data&&this.data.isScorm()}onClick(){}triggerDelete(e){e.target===e.currentTarget&&(j(e.target).find("a").click(),e.preventDefault(),e.stopPropagation())}getMetadata(){return this.data}filterByColumId(e){return e.indexOf(this.id)>-1}filterByCategoryId(e){return!!this.data.gradebookCategory&&e.indexOf(this.data.gradebookCategoryId)>-1}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f){this.rootScope=e,this.gridData=t,this.data=n,this.headerTemplate=i,this.cellTemplate=s,this.columnWidth=r,this.position=o,this.border=a,this.ltiService=c,this.entitlementService=d,this.gradeService=u,this.gradebookPermissionService=p,this.scormService=m,this.scoreProviderHelper=h,this.toast=g,this.ultraState=f,this.openDownloadTestResultsPanel=()=>{this.ultraState.goPeekState(W.Z5.Grade.DOWNLOAD_TEST_RESULTS,{columnId:this.id})},this.order=null!=l?l:0,this.id=n.id;let b=this.getCourse().id;this.entitlementService.hasCourseEntitlement(M.s7.DeleteAssessment,b).then(e=>{this.canDeleteAssessment=e}),this.entitlementService.hasCourseEntitlement(M.eo.DeleteContent,b).then(e=>{this.canDeleteContent=e}),this.entitlementService.hasCourseEntitlement(M.s7.ModifyAssessment,b).then(e=>{this.canModifyAssessment=e}),this.entitlementService.hasCourseEntitlement(M.eo.ModifyContent,b).then(e=>{this.canModifyContent=e}),this.entitlementService.hasCourseEntitlement(M.s7.ViewAssessment,b).then(e=>{this.canViewAssessment=e}),this.entitlementService.hasCourseEntitlement(M.eo.ViewAsDesigner,b).then(e=>{this.canViewContentDesigner=e})}}X=Z([K(0,(0,T.tB)("$rootScope")),K(1,(0,T.tB)("gridData")),K(2,(0,T.tB)("data")),K(3,(0,T.tB)("headerTemplate")),K(4,(0,T.tB)("cellTemplate")),K(5,(0,T.tB)("columnWidth")),K(6,(0,T.tB)("position")),K(7,(0,T.tB)("border")),K(8,(0,T.tB)("order")),K(9,(0,T.tB)($.HV)),K(10,(0,T.tB)(N.HV)),K(11,(0,T.tB)(C.HV)),K(12,(0,T.tB)(y.HV)),K(13,(0,T.tB)(H.HV)),K(14,(0,T.tB)(U.HV)),K(15,(0,T.tB)(V.HV)),K(16,(0,T.tB)(_.HV))],X);class Y extends X{addBorder(){this.border=!0}deleteBorder(){this.border=!1}filterByColumId(e){return!0}filterByCategoryId(e){return!0}}class Q extends X{loadNotation(){this.notationService.getGradeNotationsMap(this.gridData.course.id,!0).then(e=>{this.gradeNotations=e})}openEditState(){this.ultraState.goPeekState("gradebook-item.overall-grade",{columnId:this.id,gradeitemView:"details"})}deleteColumn(){this.data.forceDelete()}getConfirmationMessage(){return"x-bb-grade-calculation"}filterByColumId(e){return!0}filterByCategoryId(e){return!0}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f,b){super(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f),this.notationService=b,this.gradeNotations=[],this.loadNotation()}}Q.$inject=[],Q=Z([K(0,(0,T.tB)("$rootScope")),K(1,(0,T.tB)("gridData")),K(2,(0,T.tB)("data")),K(3,(0,T.tB)("headerTemplate")),K(4,(0,T.tB)("cellTemplate")),K(5,(0,T.tB)("columnWidth")),K(6,(0,T.tB)("position")),K(7,(0,T.tB)("border")),K(8,(0,T.tB)("order")),K(9,(0,T.tB)($.HV)),K(10,(0,T.tB)(N.HV)),K(11,(0,T.tB)(C.HV)),K(12,(0,T.tB)(y.HV)),K(13,(0,T.tB)(H.HV)),K(14,(0,T.tB)(U.HV)),K(15,(0,T.tB)(V.HV)),K(16,(0,T.tB)(_.HV)),K(17,(0,T.tB)(F.HV))],Q);class J extends X{refreshAffectedColumns(){let e=this.findAffectedColumns();e.forEach(e=>this.gridData.updateColumnByMetadata(e.data))}findAffectedColumns(e=[]){let t=p.differenceBy(this.gridData.getColumns().filter(e=>e instanceof J&&e.isAffected(this)),e,"id"),n=p.unionBy([],t,"id");return e=p.unionBy(t,e,"id"),t.forEach(t=>{n=p.unionBy(n,t.findAffectedColumns(e),"id")}),n}}class ee extends J{isAffected(e){let t=this.data.calculatedFormula&&this.data.calculatedFormula.aliases;return!p.isUndefined(t)&&(!p.isUndefined(p.findKey(t,t=>t===e.id))||!p.isUndefined(p.findKey(t,t=>e.data.gradebookCategory&&t===e.data.gradebookCategory.id)))}openEditState(){this.ultraState.goPeekState("gradebook-item.calculation",{columnId:this.id,gradeitemView:"details"})}deleteColumn(){this.data.forceDelete()}getConfirmationMessage(){return"x-bb-grade-calculation"}}class et extends J{getConfirmationMessage(){return"x-bb-grade-column"}stashAffectedColumnsBeforeEdit(){this._affectedColumnsBeforeEdit=this.findAffectedColumns()}get affectedColumnsBeforeEdit(){return this._affectedColumnsBeforeEdit}isAffected(e){return!1}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f){super(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f),this._affectedColumnsBeforeEdit=[]}}et.$inject=[],et=Z([K(0,(0,T.tB)("$rootScope")),K(1,(0,T.tB)("gridData")),K(2,(0,T.tB)("data")),K(3,(0,T.tB)("headerTemplate")),K(4,(0,T.tB)("cellTemplate")),K(5,(0,T.tB)("columnWidth")),K(6,(0,T.tB)("position")),K(7,(0,T.tB)("border")),K(8,(0,T.tB)("order")),K(9,(0,T.tB)($.HV)),K(10,(0,T.tB)(N.HV)),K(11,(0,T.tB)(C.HV)),K(12,(0,T.tB)(y.HV)),K(13,(0,T.tB)(H.HV)),K(14,(0,T.tB)(U.HV)),K(15,(0,T.tB)(V.HV)),K(16,(0,T.tB)(_.HV))],et);class en extends et{openEditState(){this.stashAffectedColumnsBeforeEdit(),this.ultraState.goPeekState("grade-item.edit",{id:this.id})}deleteColumn(){this.data.forceDelete()}}class ei extends et{canDelete(){return super.canDelete()&&this.showAttendanceDeleteOption}get canBePost(){return!1}openEditState(){this.stashAffectedColumnsBeforeEdit();let e={courseId:this.data.courseId,contentId:this.data.contentId};this.scoreProviderHelper.editStateRef(this.data.scoreProviderHandle,e,U.tU.GoToState)}deleteColumn(){this.data.forceDelete()}checkIfAttendanceIsAvailable(){if(this.gridData.course.tools){let e=this.gridData.course.tools.getToolById("bb-attendance");if(e&&e.toolEnabledSetting.isAvailable)return!0}return!1}checkIfAttendanceRecordsExist(){this.showAttendanceDeleteOption=!1,this.checkIfAttendanceIsAvailable()&&this.gridData.course.attendanceRecordsExist().then(e=>{this.showAttendanceDeleteOption=!e})}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f){super(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f),this.checkIfAttendanceRecordsExist(),O.ZU.OnRootScope(e,"$stateChangeSuccess",(e,t,n,i)=>{i.name.indexOf("attendance")>=0&&this.checkIfAttendanceRecordsExist()})}}ei.$inject=[],ei=Z([K(0,(0,T.tB)("$rootScope")),K(1,(0,T.tB)("gridData")),K(2,(0,T.tB)("data")),K(3,(0,T.tB)("headerTemplate")),K(4,(0,T.tB)("cellTemplate")),K(5,(0,T.tB)("columnWidth")),K(6,(0,T.tB)("position")),K(7,(0,T.tB)("border")),K(8,(0,T.tB)("order")),K(9,(0,T.tB)($.HV)),K(10,(0,T.tB)(N.HV)),K(11,(0,T.tB)(C.HV)),K(12,(0,T.tB)(y.HV)),K(13,(0,T.tB)(H.HV)),K(14,(0,T.tB)(U.HV)),K(15,(0,T.tB)(V.HV)),K(16,(0,T.tB)(_.HV))],ei);class es extends et{canDownloadAll(){return(!this.data||!this.data.anonymousGrading)&&this.gradebookPermissionService.canViewBulkDownload()}showDownloadResults(){return(!this.data||!this.data.anonymousGrading)&&super.showDownloadResults()}openEditState(){this.stashAffectedColumnsBeforeEdit();let e={courseId:this.data.courseId,contentId:this.data.contentId};this.scoreProviderHelper.editStateRef(this.data.scoreProviderHandle,e,U.tU.GoToState)}deleteColumn(){this.rootScope.$broadcast("bb-delete-column",this.data)}openQuestionAnalysisOverview(){this.ultraState.goPeekState("question-analysis.report",{qaContentId:this.data.contentId})}}class er extends es{initializeUserIdGroupIdMap(){let e=this.gridData.getColumnIdGroupsMap()[this.id];p.isEmpty(e)||e.forEach(e=>{let t=this.gridData.getGroupIdUserIdMap()[e.groupId];p.isEmpty(t)||t.forEach(t=>{this._userIdGroupIdMap[t]=e.groupId})})}canDownloadAll(){return!1}get userIdGroupIdMap(){return this._userIdGroupIdMap}getGroupById(e){return p.find(this.groups,t=>t.groupId===e)}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f,b){super(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f),this.groups=b,this._userIdGroupIdMap={},this.initializeUserIdGroupIdMap()}}er.$inject=[],er=Z([K(0,(0,T.tB)("$rootScope")),K(1,(0,T.tB)("gridData")),K(2,(0,T.tB)("data")),K(3,(0,T.tB)("headerTemplate")),K(4,(0,T.tB)("cellTemplate")),K(5,(0,T.tB)("columnWidth")),K(6,(0,T.tB)("position")),K(7,(0,T.tB)("border")),K(8,(0,T.tB)("order")),K(9,(0,T.tB)($.HV)),K(10,(0,T.tB)(N.HV)),K(11,(0,T.tB)(C.HV)),K(12,(0,T.tB)(y.HV)),K(13,(0,T.tB)(H.HV)),K(14,(0,T.tB)(U.HV)),K(15,(0,T.tB)(V.HV)),K(16,(0,T.tB)(_.HV)),K(17,(0,T.tB)("groups"))],er);class eo extends er{}class ea extends er{}class el extends es{}function ec(e,t){return function(n,i){t(n,i,e)}}let ed="ultra.components.services.gradebookSearchbox",eu="gradebookSearchbox";(i=l||(l={})).USER="user",i.COLUMN="column",i.CATEGORY="category",i.NO_RESULT="noResult";class ep{typeAheadSearch(e,t,n){let i=RegExp("^.*"+e.replace(ep.REGULAR_EXPRESSION_TOKENS,"\\$&")+".*$","i"),s=[],r=this.searchUsersResults(i,e,n);r.forEach(e=>{s.push({type:l.USER,data:e})});let o=this.searchColumnResults(i,e,t);o.forEach(e=>{s.push({type:l.COLUMN,data:e})});let a=this.searchCategoryResults(i,e,t);return a.forEach(e=>{s.push({type:l.CATEGORY,data:e,id:e.data.gradebookCategory.id})}),0===s.length&&s.push({type:l.NO_RESULT,data:null}),s}searchUsersResults(e,t,n){let i=[n=>{let i=(n,i)=>e.test(n)&&0===n.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())&&t.length>i;return i(`${n.user.givenName} ${n.user.familyName}`,n.user.givenName.length)||i(`${n.user.familyName} ${n.user.givenName}`,n.user.familyName.length)},t=>e.test(`${t.user.givenName}`),t=>e.test(`${t.user.familyName}`),t=>t.user.userName&&e.test(t.user.userName),t=>t.user.studentId&&e.test(t.user.studentId)],s=(0,p.orderBy)(n.filter(e=>{let n=0,s=i.findIndex(t=>t(e));switch(s){case 1:n=e.user.givenName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());break;case 2:n=e.user.familyName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())+.5;break;case 3:n=e.user.userName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())+100;break;case 4:n=e.user.studentId.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())+1e3}return e.ui._weight=n,s>=0}),["ui._weight","user.givenName","user.familyName"],["asc","asc","asc"]);return s}searchColumnResults(e,t,n){let i=[t=>e.test(`${t.data.columnName}`)],s=n.filter(e=>!(e instanceof Y||e instanceof Q)),r=(0,p.orderBy)(s.filter(e=>{let n=0,s=i.findIndex(t=>t(e));return -1!==s&&(n=e.data.effectiveColumnName&&e.data.effectiveColumnName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())),e.weight=n,s>=0}),["weight","data.columnName"],["asc","asc"]);return r}searchCategoryResults(e,t,n){let i=[t=>{let n=this.getCategoryTitle(t.data.gradebookCategory);return e.test(`${n}`)}],s=n.filter(e=>!!e.data.gradebookCategory),r=(0,p.uniqBy)(s,e=>e.data.gradebookCategory.id),o=(0,p.orderBy)(r.filter(e=>{let n=0,s=i.findIndex(t=>t(e)),r=this.getCategoryTitle(e.data.gradebookCategory);return -1!==s&&(n=r.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())),e.weight=n,s>=0}),["weight","data.categoryTitle"],["asc","asc"]);return o}getCategoryTitle(e){return e.isUserDefined?e.title:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$rootScope),key:e.localizableTitle.languageKey})}constructor(e,t,n){this.$rootScope=e,this.$q=t,this.bbLocalize=n}}ep.REGULAR_EXPRESSION_TOKENS=/[-\/\\^$*+?.()|[\]{}]/g,ep=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([ec(0,(0,T.tB)("$rootScope")),ec(1,(0,T.tB)("$q")),ec(2,(0,T.tB)(I.serviceName))],ep),m.module(ed,[I.moduleName]).service(eu,ep);var em=n(458516),eh=n(748157),eg=n(168132),ef=n(270679);n(948286),n(759817),n(777230),n(200530),n(644102),n(402764),n(197002),n(12537);var eb=n(512923),ev=n(537749),ey=n(63001),eC=n(144958),eS=n(100776);function eE(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function eI(e,t){return function(n,i){t(n,i,e)}}(s=c||(c={}))[s.UNLOADED=0]="UNLOADED",s[s.WAITING=1]="WAITING",s[s.LOADING=2]="LOADING",s[s.LOADED=3]="LOADED";class ew{get isUnloaded(){return this.loadState===c.UNLOADED}get isWaiting(){return this.loadState===c.WAITING}get isLoading(){return this.loadState===c.LOADING}get isLoaded(){return this.loadState===c.LOADED}get isPosted(){var e;return!p.isNil(null===(e=this.data)||void 0===e?void 0:e.grade)&&this.data.grade.isPosted()}get hasNewSubmission(){return!p.isNull(this.data)&&this.data.needsGradingAttemptCount>0}get isPastDueZero(){var e;return!p.isNil(null===(e=this.data)||void 0===e?void 0:e.grade)&&this.data.grade.isPastDueZero()}get isExempt(){var e;return!p.isNil(null===(e=this.data)||void 0===e?void 0:e.grade)&&this.data.grade.isExempt}setLoadState(e){this.loadState=e}getScore(e){let t=this.getGrade();if(null==t)return;let n=t.displayGrade,i=this.column.data,s=this.getGridData().getSchema()[i.gradingSchemaId],r=this.$injector.instantiate(ey.G,{scope:e,gradeDetail:t});return r.init(i,s),r.displayGrade=n,r.parsedValue}getGrade(){return p.isNull(this.data)?void 0:this.data.grade}view(){throw Error("Unsupported operation exception")}openExceptionPanel(){throw Error("Unsupported operation exception")}exempt(){throw Error("Unsupported operation exception")}post(){return this.data&&this.column.data.grades.$new(this.data.grade.id).postReadyGrades()}get canBeView(){return!1}shouldAllowUserToAddExceptions(){return!1}canExempt(){return!1}get isReadyToPost(){return!this.isPosted}canPost(){return this.gradebookPermissionService.canPostGrades(null,this.column.data)}getGridData(){return this.gridData}get isCleanAttemptGrade(){return!1}get isNeedAutoPost(){return!1}get canBeEdited(){return this.column.data.delegatedGrading?this.canPost():!this.isAnonymousGrading}get isAnonymousGrading(){return this.column.data.anonymousGrading}openExceptionPeekPanel(){let e;let t={columnId:this.column.id,userId:this.row.metadata.user.id,contentId:this.column.data.contentId};A.u$1.Test.isEqualTo(this.column.data.scoreProviderHandle)&&!this.column.data.groupContent&&(t.membershipId=this.row.metadata.id,e=W.Z5.Grade.PER_ASSESSMENT_SETTINGS,this.ultraState.goPeekState(e,t))}openEditPerGradableItemExemptionPanel(){let e={courseId:this.gridData.course.id,columnId:this.column.id,userId:this.row.metadata.user.id};this.ultraState.goPeekState(W.RK.PER_GRADABLE_ITEM_SETTINGS,e)}canViewAndModifyGradeBook(){return this.entitlementService.areAllEntitled([x.SE.ModifyGradebook,x.SE.ViewGrades,x.SE.ViewGradebookMetaData])}canViewAssessmentException(){return this.entitlementService.isEntitled(x.SE.AssessmentViewException)}constructor(e,t,n,i,s,r,o,a,l,d,u,p,m=null,h=null,g=c.UNLOADED){this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=i,this.scoreProviderHelper=s,this.attemptSelectionService=r,this.ultraState=o,this.gradebookPermissionService=a,this.entitlementService=l,this.gridData=d,this.row=u,this.column=p,this.data=m,this.exceptions=h,this.loadState=g}}ew=eE([eI(0,(0,T.tB)("$q")),eI(1,(0,T.tB)("$injector")),eI(2,(0,T.tB)($.HV)),eI(3,(0,T.tB)(eg.N7.H)),eI(4,(0,T.tB)(U.HV)),eI(5,(0,T.tB)(eS.HV)),eI(6,(0,T.tB)(_.HV)),eI(7,(0,T.tB)(y.HV)),eI(8,(0,T.tB)(N.HV)),eI(9,(0,T.tB)("gridData")),eI(10,(0,T.tB)("row")),eI(11,(0,T.tB)("column"))],ew);class eA extends ew{constructor(e,t,n,i,s,r,o,a,l,d,u,p){super(e,t,n,i,s,r,o,a,l,d,u,p,null,null,c.LOADED),this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=i,this.scoreProviderHelper=s,this.attemptSelectionService=r,this.ultraState=o,this.gradebookPermissionService=a,this.entitlementService=l,this.gridData=d,this.row=u,this.column=p}}eA.$inject=[],eA=eE([eI(0,(0,T.tB)("$q")),eI(1,(0,T.tB)("$injector")),eI(2,(0,T.tB)($.HV)),eI(3,(0,T.tB)(eg.N7.H)),eI(4,(0,T.tB)(U.HV)),eI(5,(0,T.tB)(eS.HV)),eI(6,(0,T.tB)(_.HV)),eI(7,(0,T.tB)(y.HV)),eI(8,(0,T.tB)(N.HV)),eI(9,(0,T.tB)("gridData")),eI(10,(0,T.tB)("row")),eI(11,(0,T.tB)("column"))],eA);class ek extends ew{}class ex extends ew{canPost(){return!1}get canBeEdited(){return!1}}class eT extends ew{}class eP extends eT{get canBeView(){return this.gradebookPermissionService.canViewGrades()}view(){this.ultraState.goPeekState(W.RK.GRADE_AND_FEEDBACK,{columnId:this.column.id,userId:this.row.metadata.user.id})}shouldAllowUserToAddExceptions(){return!1}exempt(){this.openEditPerGradableItemExemptionPanel()}canExempt(){return this.canViewAndModifyGradeBook()}}class eD extends eT{getGroupId(){}get canBeView(){return this.gradebookPermissionService.canViewAttempts()&&!!this.data&&this.data.attemptCount>0}view(){if(null!=this.column.data.linkId&&(A.u$1.PartnerCloud.isEqualTo(this.column.data.scoreProviderHandle)||A.u$1.LTILink.isEqualTo(this.column.data.scoreProviderHandle)))this.CourseModel.$new(this.gridData.course.id).gradebook.columns.$new(this.column.id).grades.$new(this.data.grade.id).attempts.$fetch().$then(e=>{let t=ev.YD({gradableItemId:this.column.id,courseId:this.gridData.course.id,attemptId:e[0].id,membershipId:this.row.metadata.id,linkId:this.column.data.linkId}),n=(0,eC.Rl)(this.column.data.linkId);A.u$1.PartnerCloud.isEqualTo(this.column.data.scoreProviderHandle)?this.partnerSettingsModel.getSettingsById(n).then(e=>this.ltiService.launch(t,!e.responsive)):this.ltiService.launch(t)});else{var e;let t={courseId:this.gridData.course.id,columnId:this.column.id,gradeId:this.data.grade.id,contentId:this.column.data.contentId,userId:this.row.metadata.user.id},n=(null===(e=this.data.grade.attempts)||void 0===e?void 0:e.length)>this.column.data.multipleAttempts,i=this.column.data.isAttemptBased&&(this.column.data.isMultipleAttempts()||n);if(!i){if(this.data.grade.lastAttemptId)t.attemptId=this.data.grade.lastAttemptId;else if(this.data.grade.attempts&&this.data.grade.attempts.length){let e=p.last(this.data.grade.attempts);t.attemptId=e&&e.id}else if(this.data.grade.groupAttempts&&this.data.grade.groupAttempts.length){let e=p.last(this.data.grade.groupAttempts);t.attemptId=e&&e.id}}t.groupId=this.getGroupId(),i?this.CourseModel.$new(this.gridData.course.id).gradebook.columns.$new(this.column.id).$fetch().$asPromise().then(e=>{this.attemptSelectionService.goToMultipleAttemptsGrading(t,e)}):this.scoreProviderHelper.gradingStateRef(this.column.data,this.data.grade,t,U.tU.GoToState)}}exempt(){this.openEditPerGradableItemExemptionPanel()}canExempt(){return!this.isAnonymousGrading&&this.canViewAndModifyGradeBook()}openExceptionPanel(){this.openExceptionPeekPanel()}shouldAllowUserToAddExceptions(){return A.u$1.Test.isEqualTo(this.column.data.scoreProviderHandle)&&!this.column.data.groupContent&&!this.column.data.anonymousGrading&&!this.column.data.collectExternalSubmissions&&this.canViewAndModifyGradeBook()&&this.canViewAssessmentException()}constructor(e,t,n,i,s,r,o,a,l,d,u,p,m,h=null,g=null,f=c.UNLOADED){super(e,t,n,i,s,r,o,a,l,d,u,p,h,g,f),this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=i,this.scoreProviderHelper=s,this.attemptSelectionService=r,this.ultraState=o,this.gradebookPermissionService=a,this.entitlementService=l,this.gridData=d,this.row=u,this.column=p,this.partnerSettingsModel=m,this.data=h,this.exceptions=g,this.loadState=f}}eD=eE([eI(0,(0,T.tB)("$q")),eI(1,(0,T.tB)("$injector")),eI(2,(0,T.tB)($.HV)),eI(3,(0,T.tB)(eg.N7.H)),eI(4,(0,T.tB)(U.HV)),eI(5,(0,T.tB)(eS.HV)),eI(6,(0,T.tB)(_.HV)),eI(7,(0,T.tB)(y.HV)),eI(8,(0,T.tB)(N.HV)),eI(9,(0,T.tB)("gridData")),eI(10,(0,T.tB)("row")),eI(11,(0,T.tB)("column")),eI(12,(0,T.tB)(eg.km.H))],eD);class eG extends eD{getGroupId(){return this.group.groupId}get group(){return this._group}shouldAllowUserToAddExceptions(){return!1}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m){super(e,t,n,i,s,r,o,a,l,c,d,u,m),this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=i,this.scoreProviderHelper=s,this.attemptSelectionService=r,this.ultraState=o,this.gradebookPermissionService=a,this.entitlementService=l,this.gridData=c,this.row=d,this.column=u,this._group=p,this.partnerSettingsModel=m}}eG.$inject=[],eG=eE([eI(0,(0,T.tB)("$q")),eI(1,(0,T.tB)("$injector")),eI(2,(0,T.tB)($.HV)),eI(3,(0,T.tB)(eg.N7.H)),eI(4,(0,T.tB)(U.HV)),eI(5,(0,T.tB)(eS.HV)),eI(6,(0,T.tB)(_.HV)),eI(7,(0,T.tB)(y.HV)),eI(8,(0,T.tB)(N.HV)),eI(9,(0,T.tB)("gridData")),eI(10,(0,T.tB)("row")),eI(11,(0,T.tB)("column")),eI(12,(0,T.tB)("group")),eI(13,(0,T.tB)(eg.km.H))],eG);class eR extends eG{get canBeView(){return!0}view(){this.ultraState.goPeekState("submission-list",{courseId:this.gridData.course.id,columnId:this.column.id,contentId:this.column.data.contentId,participantId:this.row.metadata.user.id,disGroupId:this.getGroupId()})}get isCleanAttemptGrade(){return!0}get isNeedAutoPost(){return!0}shouldAllowUserToAddExceptions(){return!1}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m){super(e,t,n,i,s,r,o,a,l,c,d,u,p,m),this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=i,this.scoreProviderHelper=s,this.attemptSelectionService=r,this.ultraState=o,this.gradebookPermissionService=a,this.entitlementService=l,this.gridData=c,this.row=d,this.column=u,this.partnerSettingsModel=m}}eR.$inject=[],eR=eE([eI(0,(0,T.tB)("$q")),eI(1,(0,T.tB)("$injector")),eI(2,(0,T.tB)($.HV)),eI(3,(0,T.tB)(eg.N7.H)),eI(4,(0,T.tB)(U.HV)),eI(5,(0,T.tB)(eS.HV)),eI(6,(0,T.tB)(_.HV)),eI(7,(0,T.tB)(y.HV)),eI(8,(0,T.tB)(N.HV)),eI(9,(0,T.tB)("gridData")),eI(10,(0,T.tB)("row")),eI(11,(0,T.tB)("column")),eI(12,(0,T.tB)("group")),eI(13,(0,T.tB)(eg.km.H))],eR);class eB extends eD{get canBeView(){return!0}view(){this.ultraState.goPeekState("submission-list",{courseId:this.gridData.course.id,columnId:this.column.id,contentId:this.column.data.contentId,participantId:this.row.metadata.user.id})}get isCleanAttemptGrade(){return!0}get isNeedAutoPost(){return!0}shouldAllowUserToAddExceptions(){return!1}}class eL extends eD{get canBeView(){return!0}view(){this.ultraState.goPeekState(W.Eg.JOURNAL_PARTICIPATION_DETAIL,{courseId:this.gridData.course.id,columnId:this.column.id,contentId:this.column.data.contentId,participantId:this.row.metadata.id,gradebookView:"grid"})}get isCleanAttemptGrade(){return!0}get isNeedAutoPost(){return!0}}class eN extends eT{get isAttendance(){return!0}get canBeView(){return!0}view(){let e=this.row.metadata.user.id,t=this.row.metadata.id;this.ultraState.goPeekState("attendance-student-records",{userId:e,membershipId:t})}}var eO=n(897349),eM=n(456141),e$=n(822658),eH=n(408027),eF=n(207069);function eU(e,t){return function(n,i){t(n,i,e)}}class eV{isCellExisting(e){return this.isCellExistingByColumnId(e.column.id)}isCellExistingByColumnId(e){return!p.isUndefined(this.cells[e])}insertDataCell(e){this.isCellExisting(e)||(this.cells[e.column.id]=e)}deleteDataCellByColumnId(e){this.isCellExistingByColumnId(e)&&delete this.cells[e]}constructor(e,t){this.cells=e,this.metadata=t}}class e_{get canViewGrades(){return this._canViewGrades}get course(){return this._course}getSchema(){return this.gradeSchemaBySchemaId}getColumnIdGroupsMap(){return this.assignedGroupByGradeColumnId}getAllGroupMemberships(){return this.allGroupMemberships}getGroupIdUserIdMap(){return this.userIdsByGroupId}initializeSchemas(e){this.gradeSchemaBySchemaId={},e.forEach(e=>{this.gradeSchemaBySchemaId[e.id]=e})}initialize(e,t){this._course=e,this.courseId=e.id,this.columnMetadatas=t;let n=this.entitlementService.hasCourseEntitlement(M.pQ.ViewGroups,this.courseId).then(e=>(this.canViewGroups=e,this.canViewGroups)?this.initializeGroupsMemberships():this.$q.resolve(!1)),i=this.entitlementService.hasAnyCourseEntitlement([x.SE.ViewGrades,x.SE.ViewGrades],e.id).then(e=>(this._canViewGrades=e,e)),s=this.loadSchemas(this.courseId).then(e=>{this.initializeSchemas(e)}),r=this.fetchMemberships({}).then(e=>{this.dataRowsByMembershipId={},this.insertRows(e);let t=!1;this.columns=this.getColumnMetadatas().map(e=>(e.externalGrade&&(t=e.externalGrade),this.insertColumnByMetadata(e)));let n=this.createStudentColumn(t);return this.insertColumn(n,!0),{memberships:e,columns:this.columns}});return this.$q.all([r,n,s,i]).then(e=>this.deferredInit.resolve(e[0])).catch(e=>this.deferredInit.reject(e)),this.getOverallColumn(),this.initialized}getAssignedGroupsByColumnId(e){return this.assignedGroupByGradeColumnId[e]}loadSchemas(e){return this.schemaService.loadSchemas(e)}initializeColumnIdGroupsMap(e){this.assignedGroupByGradeColumnId={},p.isEmpty(this.getColumnMetadatas())||this.getColumnMetadatas().forEach(t=>{t.contentId&&!t.isScorm()&&e[t.contentId]&&(this.assignedGroupByGradeColumnId[t.id]=e[t.contentId])})}initializeGroupsMemberships(){return this.allGroupMemberships=[],this.getGroupsMemberships().then(()=>(this.initializeGroupIdUserIdMap(),!0))}initializeGroupIdUserIdMap(){this.userIdsByGroupId={};let e={};this.allGroupMemberships.forEach(t=>{this.userIdsByGroupId[t.id]=t.memberships.map(e=>e.userId),t.assignedContents.forEach(t=>{(e[t.contentId]=e[t.contentId]||[]).push(t)})}),this.initializeColumnIdGroupsMap(e)}getGroupsMemberships(){return this.course.groups.$refresh({offset:this.allGroupMemberships.length,limit:1e4,fields:"id,memberships,assignedContents"}).$asPromise().then(e=>(this.allGroupMemberships=this.allGroupMemberships.concat(e),e.paging.nextPage)?this.getGroupsMemberships():this.allGroupMemberships)}fetchMemberships(e){return this.fetchMembershipsRecursively([],e,0)}fetchMembershipsRecursively(e,t,n){let i=this.course.memberships.$refresh({fields:e_.MEMBERSHIPS_REQUEST_FIELDS,sort:e_.MEMBERSHIPS_SORTING,...x.z8,...t,offset:n});return i.$asPromise().then(n=>{let i=e.concat(n);if(n.paging.nextPage){let e=new URLSearchParams(n.paging.nextPage),s=parseInt(e.get("offset"),10);return this.fetchMembershipsRecursively(i,t,s)}return i})}getFilteredColumns(e){let t=[];return this.course.gradebook.columns.$refresh({expand:"collectExternalSubmissions",...e}).$asPromise().then(n=>{let i=n.filter(e=>!1===e.visibleInBook);if(i.forEach(e=>n.$remove(e)),t=t.concat(n),this.formativeFeatureFlag&&e.assessmentType){let n=e.assessmentType.split(",");t=t.filter(e=>this.AssessmentTypeFilterHelper(n,e))}let s=t.some(e=>!!e.externalGrade);if(Object.keys(e).length>0&&this.overallColumn&&!s&&t.push(this.overallColumn),n.paging.nextPage)return this.getFilteredColumns(e);if((null==t?void 0:t.length)>0){this.expandColumnSummaries(t);let e=t.map(e=>(e.externalGrade&&(s=e.externalGrade),this.updateColumnByMetadata(e)));this.columns=e;let n=this.createStudentColumn(s);return e.unshift(n),e}return[]})}AssessmentTypeFilterHelper(e,t){return!!(e.includes(x.IQ.Formative)&&e.includes(x.IQ.Summative))||(e.includes(x.IQ.Formative)?!!t.isFormative:!!e.includes(x.IQ.Summative)&&!t.isFormative)}getOverallColumn(){this.course.gradebook.columns.$find("finalGrade",{expand:"collectExternalSubmissions"}).$allow([eH.oji.NotFound]).$asPromise().then(e=>{var t;(null===(t=e.$response)||void 0===t?void 0:t.status)!==eH.oji.NotFound&&(this.overallColumn=e)})}clearOverallColumn(){this.overallColumn=void 0}expandColumnSummaries(e){var t,n;let i=null!==(n=null===(t=e.paging)||void 0===t?void 0:t.count)&&void 0!==n?n:this.MAX_SUMMARY_REQUEST_SIZE,s=this.course.gradebook.summaries.expandingColumns(e),r=this.$q.all(p.range(0,i,this.MAX_SUMMARY_REQUEST_SIZE).map(e=>s.$fetch({limit:this.MAX_SUMMARY_REQUEST_SIZE,offset:e,excludeCalculations:!0}).$asPromise())).then(()=>e);return r}fetchGradeBulkView(e,t,n){return e.gradebook.bulkView.$fetch({membershipIds:t,columnIds:n,expand:"attempts,lastAttemptId,needsGradingAttemptCount,groupAttempts,exceptions",timestamp:new Date().getTime()}).$asPromise()}createColumnByColumnMetadata(e){return e.externalGrade?this.createOverallColumn(e):e.isCalculated()?this.createCalculationColumn(e):e.isOffline()?this.createOfflineItemColumn(e):e.isDiscussion()?p.isEmpty(this.assignedGroupByGradeColumnId[e.id])?this.createDiscussionItemColumn(e):this.createGroupDiscussionGradeColumn(e,this.assignedGroupByGradeColumnId[e.id]):e.isAttendance()?this.createAttendanceItemColumn(e):this.assignedGroupByGradeColumnId[e.id]?this.createGroupTestGradeColumn(e,this.assignedGroupByGradeColumnId[e.id]):e.seemsAttemptBased()&&e.scoreProviderHandle?this.createAttemptBasedItemGradeColumn(e):e.scoreProviderHandle?this.createItemGradeColumn(e):this.createOfflineItemColumn(e)}createStudentColumn(e){return this.$injector.instantiate(Y,{gridData:this,data:{id:e_.COLUMN_STUDENT},headerTemplate:"<bb-grade-grid-column-header-student-reborn></bb-grade-grid-column-header-student-reborn>",cellTemplate:"<bb-grade-grid-column-student-reborn></bb-grade-grid-column-student-reborn>",columnWidth:e_.STUDENT_COLUMN_WIDTH,position:"left",border:!e,order:0})}createOverallColumn(e){return this.overallColumn=e,this.$injector.instantiate(Q,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-overall-reborn></bb-grade-grid-column-header-overall-reborn>",cellTemplate:"<bb-grade-grid-column-overall-reborn></bb-grade-grid-column-overall-reborn>",columnWidth:e_.COLUMN_WIDTH,position:"left",border:!0,order:10})}createCalculationColumn(e){return this.$injector.instantiate(ee,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e_.COLUMN_WIDTH,position:"center",border:!0,order:0})}createItemGradeColumn(e){return this.$injector.instantiate(et,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e_.COLUMN_WIDTH,position:"center",border:!0,order:0})}createOfflineItemColumn(e){return this.$injector.instantiate(en,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e_.COLUMN_WIDTH,position:"center",border:!0,order:0})}createDiscussionItemColumn(e){return this.$injector.instantiate(el,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e_.COLUMN_WIDTH,position:"center",border:!0,order:0})}createAttendanceItemColumn(e){return this.$injector.instantiate(ei,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e_.COLUMN_WIDTH,position:"center",border:!0,order:0})}createAttemptBasedItemGradeColumn(e){return this.$injector.instantiate(es,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e_.COLUMN_WIDTH,position:"center",border:!0,order:0})}createGroupTestGradeColumn(e,t){return this.$injector.instantiate(eo,{groups:t,gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e_.COLUMN_WIDTH,position:"center",border:!0,order:0})}createGroupDiscussionGradeColumn(e,t){return this.$injector.instantiate(ea,{groups:t,gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e_.COLUMN_WIDTH,position:"center",border:!0,order:0})}getColumnMetadata(e){return p.find(this.columnMetadatas,t=>t.id===e)}getColumnMetadataByContentId(e){return p.find(this.columnMetadatas,t=>t.contentId===e)}isColumnMetadataExisting(e){return!p.isUndefined(this.getColumnMetadata(e))}getColumnMetadatas(){return this.columnMetadatas}getRowById(e){return this.dataRowsByMembershipId[e]}getRowByUserId(e){return p.find(p.values(this.dataRowsByMembershipId),t=>t.metadata.user.id===e)}getGroupById(e){return this.allGroupMemberships.find(t=>t.id===e)}getCell(e,t){return this.dataRowsByMembershipId[e].cells[t]}insertRows(e){e.forEach(e=>this.insertRow(e))}insertRow(e){this.dataRowsByMembershipId[e.id]=new eV({},e)}createCell(e,t){if(t.id===e_.COLUMN_STUDENT)return this.$injector.instantiate(eA,{gridData:this,row:e,column:t});let n=t.data;return n.externalGrade?this.$injector.instantiate(ek,{gridData:this,row:e,column:t}):n.isCalculated()?this.$injector.instantiate(ex,{gridData:this,row:e,column:t}):n.isOffline()?this.$injector.instantiate(eP,{gridData:this,row:e,column:t}):n.isDiscussion()?t instanceof er&&t.userIdGroupIdMap[e.metadata.user.id]?this.$injector.instantiate(eR,{gridData:this,row:e,column:t,group:t.getGroupById(t.userIdGroupIdMap[e.metadata.user.id])}):this.$injector.instantiate(eB,{gridData:this,row:e,column:t}):n.isAttendance()?this.$injector.instantiate(eN,{gridData:this,row:e,column:t}):t instanceof er&&t.userIdGroupIdMap[e.metadata.user.id]?this.$injector.instantiate(eG,{gridData:this,row:e,column:t,group:t.getGroupById(t.userIdGroupIdMap[e.metadata.user.id])}):n.isJournal()?this.$injector.instantiate(eL,{gridData:this,row:e,column:t}):n.seemsAttemptBased()?this.$injector.instantiate(eD,{gridData:this,row:e,column:t}):this.$injector.instantiate(eT,{gridData:this,row:e,column:t})}insertColumn(e,t=!1){t?this.columns.unshift(e):this.columns.push(e),this.insertDataCells(e)}insertDataCells(e){p.forOwn(this.dataRowsByMembershipId,t=>t.insertDataCell(this.createCell(t,e)))}insertColumnByMetadata(e){let t=this.createColumnByColumnMetadata(e);return this.insertColumn(t),t}updateColumnByMetadata(e){this.isColumnExisting(e.id)&&this.deleteColumnById(e.id);let t=this.createColumnByColumnMetadata(e);return this.insertColumnAtIndex(t,this.getColumnMetadataIndexInColumnMetadatas(e)+1),this.insertDataCells(t),t}refreshDataCell(e,t){p.isUndefined(e)||(e.deleteDataCellByColumnId(t.id),e.insertDataCell(this.createCell(e,t)))}deleteColumn(e){this.deleteColumnById(e.id)}deleteColumnById(e){let t=p.remove(this.columns,t=>t.id===e);this.deleteDataCellsByColumnId(e),t&&t[0]&&t[0].data&&t[0].data.contentId&&(t=p.remove(this.columns,e=>e.data&&e.data.contentId===t[0].data.contentId)).forEach(e=>this.deleteDataCellsByColumnId(e.id))}deleteDataCellsByColumnId(e){p.forOwn(this.dataRowsByMembershipId,t=>t.deleteDataCellByColumnId(e))}getColumnMetadataIndexInColumnMetadatas(e){return p.findIndex(this.columnMetadatas,t=>e.id===t.id)}insertColumnAtIndex(e,t){this.columns.splice(t,0,e)}getColumn(e){return p.find(this.columns,t=>t.id===e)}getColumns(){return this.columns}isColumnExisting(e){return!p.isUndefined(this.getColumn(e))}getRowCount(){return p.keys(this.dataRowsByMembershipId).length}loadGradeData(e,t){if(p.isEmpty(e)||p.isEmpty(t)||p.isEmpty(t.filter(e=>e.id!==e_.COLUMN_STUDENT)))return;let[n,i]=this.filterRowsAndColumns(e.map(e=>e.id),t.map(e=>e.id),e=>e.isUnloaded||e.isWaiting);p.isEmpty(n)||p.isEmpty(i)||this.prepareFetchGrades(n,e_.ROW_NUMBER_PER_REQUEST,i,e_.COLUMN_NUMBER_PER_REQUEST)}filterRowsAndColumns(e,t,n){let i=this.filterRows(e,t,n),s=this.filterColumns(i,t,n);return[i,s]}filterRows(e,t,n){let i=[];return e.forEach(e=>{let s=this.dataRowsByMembershipId[e];p.find(t,e=>n(s.cells[e]))&&i.push(e)}),i}filterColumns(e,t,n){let i=[];return t.forEach(t=>{p.find(e,e=>n(this.dataRowsByMembershipId[e].cells[t]))&&i.push(t)}),i}prepareFetchGrades(e,t,n,i){let s=p.isEmpty(this.requestQueue),r=[];p.chunk(e,t<=0?e.length:t).forEach(e=>{p.chunk(n,i<=0?n.length:i).forEach(t=>{s?this.requestQueue.push([e,t]):r.push([e,t]),this.markWaiting(e,t)})}),this.requestQueue=r.concat(this.requestQueue),s&&this.fetchGrades()}fetchGrades(){for(let e=0;e<e_.REQUEST_WORKER_NUMBER;e++)this.fetchGrade()}fetchGrade(){if(!p.isEmpty(this.requestQueue)){let[e,t]=this.requestQueue.shift();[e,t]=this.filterRowsAndColumns(e,t,e=>e.isWaiting),p.isEmpty(e)||p.isEmpty(t)?this.fetchGrade():(this.markLoading(e,t),this.fetchGradeBulkView(this.CourseModel.$new(this.courseId),e,t).then(n=>{this.assignGrade(n),this.assignException(n),this.markLoaded(e,t),this.fetchGrade()}))}}assignGrade(e){e.bulkViewUsers.forEach(e=>{if(null!=e.courseMembershipId){let t=this.dataRowsByMembershipId[e.courseMembershipId];null!=e.grades&&e.grades.forEach(e=>{let n=t.cells[e.columnId];n.isLoading&&(n.data=e)})}})}assignException(e){e.bulkViewUsers.forEach(e=>{if(e.exceptions){let t=this.dataRowsByMembershipId[e.exceptions[0].membershipId];e.exceptions.forEach(e=>{if(null!=e.columnId){let n=t.cells[e.columnId];(null==n?void 0:n.isLoading)&&(n.exceptions=e)}})}})}applyGradesFromState(e){var t;let n=this.getRowById(e.memberId),i=null==n?void 0:n.cells[e.columnId],s=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.grade;s&&s.isExempt!==e.isExempt?(s.isExempt=e.isExempt,this.broadcastGradeStatusChange(i,n)):!s&&e.isExempt&&this.broadcastGradeStatusChange(i,n)}broadcastGradeStatusChange(e,t){var n,i;let s=null;e.column instanceof er&&(s=e.column.groups[0].groupId),this.gradeGridRebornDirectiveScope.$broadcast(C.Lg,{columnId:e.column.id,groupId:s,userId:null==t?void 0:null===(n=t.metadata)||void 0===n?void 0:null===(i=n.user)||void 0===i?void 0:i.id,updateColumn:!0})}markWaiting(e,t){e.forEach(e=>t.forEach(t=>{let n=this.dataRowsByMembershipId[e].cells[t];n.isUnloaded&&n.setLoadState(c.WAITING)}))}markLoading(e,t){e.forEach(e=>t.forEach(t=>{let n=this.dataRowsByMembershipId[e].cells[t];n.isWaiting&&n.setLoadState(c.LOADING)}))}markLoaded(e,t){e.forEach(e=>t.forEach(t=>{let n=this.dataRowsByMembershipId[e].cells[t];n.isLoading&&n.setLoadState(c.LOADED)})),this.broadcastRefreshEvent(e,t)}broadcastRefreshEvent(e,t){e.forEach(e=>{let n=t.filter(t=>this.dataRowsByMembershipId[e].cells[t].isLoaded);this.gradeGridRebornDirectiveScope.$broadcast(eO.T.REFRESH,{rowId:e,columnIds:n})})}refreshAllColumns(){p.forEach(this.getColumnMetadatas(),e=>this.updateColumnByMetadata(e))}addUpdatedColumnFlag(e){p.forEach(e,e=>{let t=p.find(this.columns,t=>t.id===e);t&&(t.isUpdated=!0)})}destroy(){this.requestQueue=[]}constructor(e,t,n,i,s,r,o,a,l){this.$rootScope=e,this.$injector=t,this.$q=n,this.CourseModel=i,this.entitlementService=s,this.schemaService=r,this.currentCourse=o,this.gradeGridRebornDirectiveScope=a,this.featureFlagService=l,this._canViewGrades=!1,this.gradeSchemaBySchemaId={},this.dataRowsByMembershipId={},this.columns=[],this.assignedGroupByGradeColumnId={},this.allGroupMemberships=[],this.userIdsByGroupId={},this.requestQueue=[],this.canViewGroups=!1,this.formativeFeatureFlag=!1,this.MAX_SUMMARY_REQUEST_SIZE=1e3,O.ZU.OnRootScope(this.$rootScope,C.Ui,(e,t)=>{let n=this.getColumnMetadatas().find(e=>e.id===t);n&&this.$rootScope.$broadcast(C.JH,n)}),this.$q.when(l.createWaiter(A.x40.FormativeAssessment)).then(e=>{this.formativeFeatureFlag=e}),this.deferredInit=this.$q.defer(),this.initialized=this.deferredInit.promise;let c=a.$watchCollection("columnMetadatas",e=>{e&&(this.initialize(this.currentCourse.course,e),c())})}}e_.COLUMN_WIDTH=142,e_.COLUMN_STUDENT="COLUMN_STUDENT",e_.STUDENT_COLUMN_WIDTH=220,e_.REQUEST_WORKER_NUMBER=5,e_.ROW_NUMBER_PER_REQUEST=0,e_.COLUMN_NUMBER_PER_REQUEST=0,e_.MEMBERSHIPS_REQUEST_FIELDS="role,courseRole,childCourseId,user,id,isAvailable,dueDateExceptionType",e_.MEMBERSHIPS_SORTING=(0,A.C4U)(x.Y3),e_=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([eU(0,(0,T.tB)("$rootScope")),eU(1,(0,T.tB)("$injector")),eU(2,(0,T.tB)("$q")),eU(3,(0,T.tB)(eM.H)),eU(4,(0,T.tB)(N.HV)),eU(5,(0,T.tB)(eb.HV)),eU(6,(0,T.tB)(e$.HV)),eU(7,(0,T.tB)("gradeGridRebornDirectiveScope")),eU(8,(0,T.tB)(eF.HV))],e_);var eq=n(58155);let ez="ultra.components.directives.gradeGridColumnHeaderStudentReborn";class eW{constructor(e,t,n,i){this.scope=e,this.element=t,this.attrs=n,this.gradeGridRebornController=i,e.studentsTotal=i.getRowCount(),e.$on(z.CELL_FOCUSED,()=>{t.find(".content").focus()});let s=[eO.T.GRADEBOOK_CLEAR_SEARCHBOX_SELECTION,eO.T.ADVANCED_FILTERS_ROWS,z.ROW];s.forEach(t=>{e.$on(t,()=>{this.scope.studentsTotal=i.getRowCount()})}),e.$on(eO.T.GRADEBOOK_USER_SELECTED,()=>{this.scope.studentsTotal=1})}}eW.$inject=["scope","element","attrs","gradeGridRebornController"];class ej{constructor(e){this.$injector=e,this.restrict="E",this.template=eq,this.scope=!0,this.require=`^${nR}`,this.link=(e,t,n,i)=>{e.gradeGridColumnHeaderStudentReborn=this.$injector.instantiate(eW,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}ej.$inject=["$injector"],m.module(ez,[]).directive("bbGradeGridColumnHeaderStudentReborn",["$injector",e=>e.instantiate(ej)]);var eZ=n(167685);n(368601);var eK=n(445218);let eX="ultra.components.directives.group.filteredUsersGroups",eY={Class:x.uD,withProvider:!0,renderLocalized:!0,bindingNames:["userId"]};function eQ(e,t){return function(n,i){t(n,i,e)}}m.module(eX,[I.moduleName]).component("bbFilteredUsersGroups",(0,eK.G5)(eY));let eJ="ultra.components.directives.gradeGridColumnStudentReborn";class e0{getLocalizedRoleNameByCourseRole(e){return e.identifier&&e.identifier.toString() in eg.XY.M4?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:eg.XY.M4[e.identifier.toString()]}):e.courseName.rawValue}viewIndividualGrades(e,t){this.ultraState.goPeekState(W.Z5.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,{userId:e,membershipId:t})}constructor(e,t,n,i,s,r,o){this.scope=e,this.element=t,this.attrs=n,this.gradeGridRebornController=i,this.bbLocalize=s,this.ultraState=r,this.entitlementService=o,e.$watch("row",t=>{let n=i.getGridData(),s=n.getRowById(t.id),r=s.metadata;this.hasItemExceptionView=this.entitlementService.isEntitled(x.SE.ViewException,r.course.id),this.hasAssessmentExceptionView=this.entitlementService.isEntitled(M.iL.ViewException,r.course.id),e.isDisabled=!(this.hasItemExceptionView&&this.hasAssessmentExceptionView),e.user=r.user,e.membershipId=r.id,e.fullName=this.bbLocalize.formatUsernameSync(e.user,I.ILocaleUsernameFormat.Short,e,{noWrap:!0}),e.isUserCourseAvailable=r.isAvailable,e.courseRole=this.getLocalizedRoleNameByCourseRole(r.courseRole)}),this.isRtl=this.bbLocalize.isRTL(),e.$on(z.ENTER_CELL,(e,t)=>{t.find("bb-username").click()})}}e0=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([eQ(0,(0,T.tB)("scope")),eQ(1,(0,T.tB)("element")),eQ(2,(0,T.tB)("attrs")),eQ(3,(0,T.tB)("gradeGridRebornController")),eQ(4,(0,T.tB)(I.serviceName)),eQ(5,(0,T.tB)(_.HV)),eQ(6,(0,T.tB)(N.HV))],e0);class e1{constructor(e){this.$injector=e,this.restrict="E",this.template=eZ,this.scope=!0,this.require=`^${nR}`,this.link=(e,t,n,i)=>{e.gradeGridColumnStudentReborn=this.$injector.instantiate(e0,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}e1.$inject=["$injector"],m.module(eJ,[eX,_.e1]).directive("bbGradeGridColumnStudentReborn",["$injector",e=>e.instantiate(e1)]);var e2=n(100079),e3=n(861001),e9=n(606592),e4=n(982118),e7=n(28570),e5=n(625506);class e6{highlight(e){e.isUpdated?(e5(".rb-col-"+e.id).addClass("highlighted"),delete e.isUpdated,this.timeout(()=>{e5(".rb-col-"+e.id).removeClass("highlighted")},this.scope,6e3,!1)):e5(".rb-col-"+e.id).removeClass("highlighted")}constructor(e,t){this.scope=e,this.timeout=t}}var e8=n(625506);let te="ultra.components.directives.gradeGridColumnHeaderOverallReborn";class tt extends e6{initializeEventHandler(){this.element.find(".content-header-bg").focusin(()=>{this.focusin()}).focusout(()=>{this.focusout()})}focusin(){this.rootScope.$broadcast(eO.T.FOCUSIN_CELL,{columnId:this.col.id})}focusout(){this.rootScope.$broadcast(eO.T.FOCUSOUT_CELL,{columnId:this.col.id})}get possible(){let e=this.gradeGridRebornController.getGridData().getSchema()[this.scope.columnMetadata.gradingSchemaId];return(null==e?void 0:e.scaleType)===eH.aQo.Score?e2.m(this.scope.columnMetadata.possible,2):100}popupMenu(e){let t=`grade-grid-column-header-menu-reborn-${this.col.id}`;if(!this.gradeGridRebornController.isMenuExisting(t)){let n=e8(e.target).closest(".grade-grid-header-cell").offset();n.top+=87,this.menuScope.col=this.col,this.menuScope.grade=this.grade,this.menuScope.autoDestroy=!1,this.menuScope.adjustPosition=e=>{let t=n.left+e.width(),i=this.gradeGridRebornController.getGradeGridContainerElementRight();t>i&&(n.left-=t-i+(0,e3.I)()),e.offset(n)},this.gradeGridRebornController.popupMenu(t,e7,this.menuScope),this.timeout(()=>{let e=this.gradeGridRebornController.getPopupMenu();e.on("keydown",t=>{t.keyCode===e9.hY||t.keyCode===e9.Mf?(e.data("destroy")(),this.scope.$emit(z.CELL_FOCUSED),t.preventDefault(),t.stopPropagation()):e9.tH(t)&&this.scope.$emit(z.CELL_FOCUSED)}),this.gradeGridRebornController.getMenuitems().first().focus()},this.menuScope,0,!1),e.preventDefault(),e.stopPropagation()}}constructor(e,t,n,i,s,r,o,a){super(t,a),this.rootScope=e,this.element=n,this.attrs=i,this.$compile=s,this.gradeGridRebornController=r,this.grade=o,this.canPostGrades=!1,this.initializeEventHandler(),this.menuScope=t.$new(!0),t.$watch("col",e=>{t.columnMetadata=e.data,this.col=e,this.highlight(this.col),this.canPostGrades=this.grade.canPostGrades(e.gridData.course,e.data)}),t.$on(z.CELL_FOCUSED,()=>{n.find(".content").focus()}),n.find(".content").on("keydown",e=>{if(e.keyCode===e9.hY)this.scope.$emit(z.LEAVE_GRID);else{if(!e9.tH(e))return;e8(e.target).click()}e.preventDefault(),e.stopPropagation()}),n.find(".content").on("keyup",e=>{e9.tH(e)&&(e.preventDefault(),e.stopPropagation())}),t.$on(eO.T.FOCUSIN_CELL,(e,t)=>{t.columnId===this.col.id&&(this.gradeGridRebornController.getElement().find(".is-active").removeClass("is-active"),this.element.find(".content").addClass("is-active"))}),t.$on(eO.T.FOCUSOUT_CELL,(e,t)=>{t.columnId===this.col.id&&this.element.find(".content").removeClass("is-active")})}}tt.$inject=["$rootScope","scope","element","attrs","$compile","gradeGridRebornController",C.HV,w.H];class tn{constructor(e){this.$injector=e,this.restrict="E",this.template=e4,this.scope=!0,this.require=`^${nR}`,this.link=(e,t,n,i)=>{e.gradeGridColumnHeaderOverallReborn=this.$injector.instantiate(tt,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tn.$inject=["$injector"],m.module(te,[]).directive("bbGradeGridColumnHeaderOverallReborn",["$injector",e=>e.instantiate(tn)]);var ti=n(193674),ts=n(625506);let tr="ultra.components.directives.gradeGridMessageReborn";class to{mousedown(){ts(this.window).trigger("click")}constructor(e,t,n,i,s){this.window=e,this.scope=t,this.element=n,this.attrs=i,this.timeout=s,s(()=>{p.isUndefined(t.adjustPosition)||t.adjustPosition(n)},t)}}to.$inject=["$window","scope","element","attrs",w.H];class ta{constructor(e){this.$injector=e,this.restrict="A",this.template=ti,this.link=(e,t,n)=>{e.gradeGridMessageReborn=this.$injector.instantiate(to,{scope:e,element:t,attrs:n})}}}ta.$inject=["$injector"],m.module(tr,[]).directive("bbGradeGridMessageReborn",["$injector",e=>e.instantiate(ta)]);var tl=n(569683),tc=n(625506);let td="ultra.components.directives.gradeGridOverallEditorReborn";class tu{initialize(){this.score=this.scope.gradeGridColumnOverallReborn.score,this.element.find("input").focus(),this.element.find(".wrapping-input-style").css({"border-color":"#c36fd3"}),this.timeout(()=>{this.element.find("input").select()},this.scope,0,!1),this.checkValue(this.score).then(e=>{this.isValidated=e})}removeErrorMessage(){this.element.removeClass("validation-alert"),p.isUndefined(this.messageElement)||(this.messageElement.remove(),this.messageElement=void 0),p.isUndefined(this.messageScope)||(this.messageScope.$destroy(),this.messageScope=void 0)}createErrorMessage(){if(this.messageElement&&this.removeErrorMessage(),p.isUndefined(this.messageElement)){this.element.addClass("validation-alert");let e=this.element.parent(".grade-grid-cell").offset();e.top+=60,this.messageScope=this.scope.$new(!1,this.scope),this.messageScope.adjustPosition=t=>{let n=e.left+t.width(),i=e.top+t.height(),s=this.gradeGridRebornController.getGradeGridContainerElementRight(),r=this.gradeGridRebornController.getGradeGridContainerElementBottom();n>s&&(e.left-=n-s+(0,e3.I)()),i>r&&(e.top-=t.height()+40),this.messageElement.offset(e)},this.$compile(tu.CELL_MESSAGE_TEMPLATE)(this.messageScope,e=>{this.messageElement=e,this.element.parents("bb-grade-grid-reborn").append(this.messageElement)})}}get isValidated(){return this._isValidated}set isValidated(e){this._isValidated=e,this.isValidated?this.removeErrorMessage():this.createErrorMessage()}stopPropagation(e){e.preventDefault(),e.stopPropagation()}mousedown(){tc(this.window).trigger("click")}get isHiddenPointsPossible(){return!(p.isUndefined(this.score)||/^-?\d*(\,\d+)?(\.\d+)?$/.test(this.score))}onChange(){this.checkValue(this.score).then(e=>{this.isValidated=e})}isSchemaTypeComplete(){return this.scope.gradeGridColumnOverallReborn.isSchemaTypeComplete()}isStatusComplete(){return this.scope.gradeGridColumnOverallReborn.isStatusComplete()}onInputBlur(){this.scope.gradeGridColumnOverallReborn.onInputBlur(this.isValidated,this.score)}checkValue(e){let t=this.gradeGridRebornController.getGridData().getSchema()[this.scope.col.data.gradingSchemaId],n=this.gradeService.createGradeSubmission(this.scope.col.data,e,t);return this.gradeService.validateGrade(n,this.scope)}onKeydown(e){e9.tH(e)?(this.scope.gradeGridColumnOverallReborn.gotoNextCell(),tc(e.target).blur(),this.mousedown(),e.preventDefault(),e.stopPropagation()):e.keyCode===e9.hY?(tc(e.target).blur(),this.mousedown(),this.scope.$emit(z.LEAVE_CELL)):e9.Wl(e)&&(this.score&&(e.keyCode===e9.RL||e.keyCode===e9.pX)?e.stopPropagation():this.mousedown())}constructor(e,t,n,i,s,r,o,a){this.$compile=e,this.window=t,this.scope=n,this.element=i,this.attrs=s,this.gradeGridRebornController=r,this.gradeService=o,this.timeout=a,this.onCompleteIncompleteBlur=(e,t,n)=>{this.scope.$applyAsync(()=>this.scope.gradeGridColumnOverallReborn.onInputBlur(this.isValidated,t))},this.initialize(),n.$on(eO.T.REFRESH_OVERALL_EDITOR,()=>{this.initialize()}),n.$on("$destroy",()=>{this.removeErrorMessage()})}}tu.$inject=["$compile","$window","scope","element","attrs","gradeGridRebornController",C.HV,w.H],tu.CELL_MESSAGE_TEMPLATE='<div bb-grade-grid-message-reborn class="grade-grid-reborn-message" ng-mousedown="gradeGridMessageReborn.mousedown()"></div>';class tp{constructor(e){this.$injector=e,this.restrict="A",this.template=tl,this.require=`^${nR}`,this.link=(e,t,n,i)=>{e.gradeGridOverallEditorReborn=this.$injector.instantiate(tu,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tp.$inject=["$injector"],m.module(td,[tr]).directive("bbGradeGridOverallEditorReborn",["$injector",e=>e.instantiate(tp)]);var tm=n(678311),th=n(790461),tg=n(801838),tf=n(625506);function tb(e,t){return function(n,i){t(n,i,e)}}let tv="ultra.components.directives.gradeGridColumnOverallReborn";class ty{changeRecord(e){let[t,n]=e;this.initializeCell(t.id,n.id),this.initializeState(),this.initializeUI(),this.initializeGradeDetail(this.cell.data)}initializeEventHandler(){this.element.parents(".rb-cell").focusin(()=>{this.focusin()}).focusout(()=>{this.focusout()}),this.element.children(".grade-grid-cell").mousedown(()=>this.mousedown())}focusin(){this.rootScope.$broadcast(eO.T.FOCUSIN_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})}focusout(){this.rootScope.$broadcast(eO.T.FOCUSOUT_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})}initializeUI(){let e=this.element.children(".grade-grid-cell");this.isLoading||this.isEditing?e.children(".score").hide():e.children(".overall-display-grade").show()}initializeGradeDetail(e){let t=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId];p.isUndefined(null==e?void 0:e.grade)||p.isNull(null==e?void 0:e.grade)?this._gradeDetail=void 0:t.scaleType===eH.aQo.Score?this._gradeDetail=this.gradeService.toFixedGradeDetail(e.grade):this._gradeDetail=e.grade.displayGrade.isOverride?this.gradeService.truncateGradeDetail(e.grade):this.gradeService.gradeDetailToPercentage(e.grade);let n=this.extractGradeFromGradeDetail(this.gradeDetail);this.setUpScreenReader(this.cell,n)}extractGradeFromGradeDetail(e){let t=e&&e.displayGrade&&e.displayGrade.perfCode&&e.displayGrade.perfCode.code,n=t||e&&e.getScore();return n}get disabledEditor(){return!this.canBeEdited&&p.isEmpty(this.extractGradeFromGradeDetail(this.gradeDetail))}initializeState(){this._isEditing=!1}initializeCell(e,t){this.cell=this.gridData.getCell(e,t),this._oldScore=this._score=void 0}get isReady(){return!p.isUndefined(this.cell)}get isLoading(){return!this.isReady||!this.cell.isLoaded}get score(){if(this.isReady){if(p.isUndefined(this._score)){let e=this.gradeDetail&&this.gradeDetail.getScore();e=e?this.bbLocalize.formatNumberSync(Math.round(100*parseFloat(e))/100,this.scope,{maximumFractionDigits:C.UF.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL}):e,p.isEmpty(e)&&this.gradeDetail&&!p.isUndefined(this.gradeDetail.displayGrade.perfCode)&&(e=this.gradeDetail.displayGrade.perfCode.code),this._oldScore=this._score=e}return this._score}}set score(e){this._score=e}get isReadonly(){if(this.isReady)return!1}get isEditing(){return this._isEditing}get gradeDetail(){return this._gradeDetail}get pointsPossible(){let e=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId];if(e.scaleType===eH.aQo.Score){var t;let e=(null===(t=this._gradeDetail)||void 0===t?void 0:t.manualGrade)!=null?this._gradeDetail.pointsPossible:this.cell.column.data.possible;return e2.m(null!=e?e:this.cell.column.data.possible,2)}return 100}isStatusComplete(){return!!this.cell.getGrade().displayGrade.grade}isSchemaTypeComplete(){return this.gridData.getSchema()[this.cell.column.data.gradingSchemaId].scaleType===eH.aQo.Complete}get pointsPossibleToDisplay(){return null==this.pointsPossible?null:this.bbLocalize.formatNumberSync(this.pointsPossible,this.scope,{maximumFractionDigits:C.UF.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL})}insertCellEditor(){this.editorScope=this.scope.$new(!1,this.scope),this.$compile(ty.OVERALL_EDITOR_TEMPLATE)(this.editorScope,e=>this.element.children(".grade-grid-body-cell").append(e)),this.timeout(()=>{this.addInputKeyEventListeners();let e=this.scope.$on(z.SCROLL_H,()=>{this.closeEditor(),e(),t(),this.scope.$apply()}),t=this.scope.$on(z.SCROLL_V,()=>{this.closeEditor(),t(),e(),this.scope.$apply()})},this.scope,200)}removeCellEditor(){this.element.find("#bb-grade-grid-overall-editor-reborn").remove()}gotoNextCell(){this.nextDeferred=this.$q.defer(),this.nextDeferred.promise.then(()=>{this.scope.$emit(z.ENTER_NEXT_CELL)})}mousedown(){tf(this.window).trigger("click")}isConfirmDialogExisting(){return!!tf(".grade-grid-group-confirm-dialog").length}get canBeEdited(){return!this.gridData.course.isComplete()&&!p.isUndefined(this.cell)&&this.gradebookPermissionService.canOverrideGrades()}enterEditor(e){this.isConfirmDialogExisting()||!this.canBeEdited||this.isLoading||this._isEditing||(this._isEditing=!0,this.element.find(".overall-display-grade").hide(),this.insertCellEditor(),this.popupMenu(e))}popupMenu(e){let t=`grade-grid-notation-menu-reborn-${this.scope.row.id}-${this.scope.col.id}`;if((this.scope.col.gradeNotations.length||this.gradeDetail&&this.gradeDetail.displayGrade&&this.gradeDetail.displayGrade.isOverride)&&!this.gradeGridRebornController.isMenuExisting(t)){let n=tf(e.target).closest(".grade-grid-cell").offset();n.top+=60;let i=this.scope.$new(!1);i.adjustPosition=e=>{let t=n.left+e.width(),i=n.top+e.height(),s=this.gradeGridRebornController.getGradeGridContainerElementRight(),r=this.gradeGridRebornController.getGradeGridContainerElementBottom();t>s&&(n.left-=t-s+(0,e3.I)()),i>r&&(n.top-=e.height()+40),e.offset(n)},this.gradeGridRebornController.popupMenu(t,tg,i),this.addMenuKeyEventListeners(),e.preventDefault(),e.stopPropagation()}}openOverrideDialog(e){this.overrideDialogScope.closeModal=this.closeModal,this.overrideDialogScope.grade=e,this.modalInstance=this.$modal.open({template:th.qt,scope:this.overrideDialogScope,resolve:{translations:[I.serviceName,e=>e.loadBundle("components/directives/grade/grade-input")]}})}addInputKeyEventListeners(){let e=this.element.find("#bb-grade-grid-overall-editor-reborn input");e.on("keydown",e=>{let t=this.gradeGridRebornController.getMenuitems();if(e9.Tw(e))t.first().focus();else{if(!e9.i_(e))return;t.last().focus()}e.preventDefault(),e.stopPropagation()})}addMenuKeyEventListeners(){this.timeout(()=>{let e=this.gradeGridRebornController.getPopupMenu();e.on("keydown",t=>{let n=this.gradeGridRebornController.getMenuitems();if(e9.Tw(t)){let e=n.index(tf(t.target))+1;e<n.length?n.eq(e).focus():this.element.find(".grade-grid-cell").trigger("click",!0)}else if(e9.i_(t)){let e=n.index(tf(t.target))-1;e>=0?n.eq(e).focus():this.element.find(".grade-grid-cell").trigger("click",!0)}else if(e9.tH(t))this.scope.$emit(z.LEAVE_CELL);else{if(t.keyCode!==e9.hY)return;e.data("destroy")(),this.scope.$emit(z.LEAVE_CELL)}t.preventDefault(),t.stopPropagation()})},this.scope,0,!1)}areGradesComplete(){let e=this.cell.column.data.calculatedFormula,t=e.aliases,{items:n,formula:i}=(0,x.l)(e,this.gridData.getColumnMetadatas()),s=i?(0,x.MK)(i,{advanced:()=>this.findIncludedColumnIdsForAliases(t),sumSelected:()=>this.findIncludedColumnIdsForFormulaItems(n),weighted:()=>this.findIncludedColumnIdsForFormulaItems(n)}):this.findIncludedColumnIdsForAliases(t);return this.gridData.getColumnMetadatas().filter(e=>s[e.id]).every(e=>{var t;return null===(t=this.gridData.getCell(this.cell.row.metadata.id,e.id).getGrade())||void 0===t?void 0:t.isGraded()})}findIncludedColumnIdsForAliases(e){let t=Object.entries(e).filter(([e])=>e.startsWith("c")).reduce((e,[,t])=>({...e,[t]:!0}),{}),n=Object.entries(e).filter(([e])=>e.startsWith("i")).reduce((e,[,t])=>({...e,[t]:!0}),{});return this.gridData.getColumnMetadatas().filter(e=>n[e.id]||t[e.gradebookCategoryId]).reduce((e,t)=>({...e,[t.id]:!0}),{})}findIncludedColumnIdsForFormulaItems(e){return e.reduce((e,t)=>{if(t.isCategory&&t.el&&!t.isExempted){var n;return{...e,...this.findIncludedColumnIdsForFormulaItems(null!==(n=t.childGradeItems)&&void 0!==n?n:[])}}return(!t.isCalculation||!t.el||t.isExempted)&&(t.isCategory||t.isCalculation||t.isExempted)?e:{...e,[t.id]:!0}},{})}onInputBlur(e,t){if(!this.isLoading&&this._isEditing&&(this.closeEditor(),e)){let e=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],s=this.score;this.score=t;let r=this.gradeService.parseGrade(t,e,this.scope),o=this.createGradeSubmission(e,r);if(this.score){let e=p.find(this.cell.column.gradeNotations,e=>e.code===this.score);e&&(o.perfCodeId=e.id)}if(this.score&&e.scaleType===eH.aQo.Score&&!p.isNaN(Number(r))&&this.isDirty()){var n,i;if(o.pointsPossible=this.pointsPossible,(null===(n=this.modalInstance)||void 0===n?void 0:n.opened)||this.areGradesComplete())(null===(i=this.modalInstance)||void 0===i?void 0:i.opened)||this.saveGrade(o);else{let e=this.gradeService.pointToPercentage(Number(r),this.pointsPossible);this.element.find(".grade-grid-cell").eq(0).focus(),this.openOverrideDialog(e2.m(e,2)),this.modalInstance.opened.then(()=>{this.modalInstance.result.then(()=>{this.saveGrade(o)},()=>{this.score=s})}).finally(()=>{this.modalInstance.opened=null})}}else this.saveGrade(o)}}closeEditor(){!this.isLoading&&this._isEditing&&(this._isEditing=!1,this.removeCellEditor(),this.editorScope.$destroy(),this.element.find(".overall-display-grade").show())}isDirty(){if(p.isUndefined(this._oldScore)&&!p.isEmpty(this.score))return!0;if(!p.isUndefined(this._oldScore)){let e=this.bbLocalize.parseNumberSync(this._oldScore,this.scope),t=this.bbLocalize.parseNumberSync(this.score,this.scope);return p.isNaN(e)||p.isNaN(t)?this._oldScore!==this.score:e!==t}return!1}createGradeSubmission(e,t){let n=this.gradeService.createGradeSubmission(this.cell.column.data,t,e);return n.clearGrade=this.gradeService.wasGradeCleared(this._oldScore,this.score),n}saveGrade(e){if(this.isDirty()){if(p.isUndefined(e)){let t=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId];e=this.createGradeSubmission(t,this.gradeService.parseGrade(this.score,t,this.scope))}this.gradeService.saveGrade(e,this.cell.data&&this.cell.data.grade,void 0,{userId:this.cell.row.metadata.user.id}).then(e=>this.cell.column.data.summary.$fetch()).then(()=>{this.gridData.refreshDataCell(this.cell.row,this.cell.column),this.rootScope.$broadcast(z.DATA_UPDATE),this.nextDeferred&&this.areGradesComplete()&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)})}else this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)}undoOverride(){this.score="",this.saveGrade()}selectNotation(e){this.score=e.code;let t=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],n=this.createGradeSubmission(t,this.score);n.perfCodeId=e.id,this.saveGrade(n)}setUpScreenReader(e,t){let n=e&&e.row&&e.row.metadata.user,i=n&&n.givenName.concat(n&&n.familyName),s=e&&e.column.data.columnName,r=!this.gridData.course.isComplete();if(t){let n=this.gradeService.getGradeToDisplay(e.data.grade.displayGrade,this.scope,this.gridData.getSchema()[e.column.data.gradingSchemaId].scaleType);this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:r?"components.directives.grade.grid.tableCellAriaLabel":"components.directives.grade.grid.tableCellAriaLabelReadOnly",params:{userName:i,assignmentName:s,grade:n||t},noWrap:!0,noEscape:!0})}else this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:r?"components.directives.grade.grid.tableCellAriaLabelEmpty":"components.directives.grade.grid.tableCellAriaLabelEmptyReadOnly",params:{userName:i,assignmentName:s},noWrap:!0,noEscape:!0})}constructor(e,t,n,i,s,r,o,a,l,c,d,u,m,h){this.rootScope=e,this.window=t,this.$q=n,this.CourseModel=i,this.gradeService=s,this.gradebookPermissionService=r,this.$compile=o,this.scope=a,this.element=l,this.attrs=c,this.gradeGridRebornController=d,this.timeout=u,this.bbLocalize=m,this.$modal=h,this.closeModal=e=>{e?this.modalInstance.close():this.modalInstance.dismiss()},this.initializeEventHandler(),this.gridData=this.gradeGridRebornController.getGridData(),a.$watchGroup(["row","col"],e=>{this.changeRecord(e)}),a.$on(eO.T.REFRESH,(e,t)=>{let n=t.rowId,i=t.columnIds;p.forEach(i,e=>{this.scope.row.id===n&&this.cell.column.id===e&&(this.initializeCell(n,e),this.initializeUI(),this.initializeGradeDetail(this.cell.data),this.scope.$broadcast(eO.T.REFRESH_OVERALL_EDITOR))})}),a.$on(z.ENTER_CELL,(e,t)=>t.find(".grade-grid-cell").click()),a.$on("$destroy",()=>{}),this.overrideDialogScope=a.$new()}}ty.OVERALL_EDITOR_TEMPLATE='<div bb-grade-grid-overall-editor-reborn id="bb-grade-grid-overall-editor-reborn" class="editor"></div>',ty=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([tb(0,(0,T.tB)("$rootScope")),tb(1,(0,T.tB)("$window")),tb(2,(0,T.tB)("$q")),tb(3,(0,T.tB)(eg.N7.H)),tb(4,(0,T.tB)(C.HV)),tb(5,(0,T.tB)(y.HV)),tb(6,(0,T.tB)("$compile")),tb(7,(0,T.tB)("scope")),tb(8,(0,T.tB)("element")),tb(9,(0,T.tB)("attrs")),tb(10,(0,T.tB)("gradeGridRebornController")),tb(11,(0,T.tB)(w.H)),tb(12,(0,T.tB)(I.serviceName)),tb(13,(0,T.tB)(eh.HV))],ty);class tC{constructor(e){this.$injector=e,this.restrict="E",this.template=tm,this.scope=!0,this.require=`^${nR}`,this.link=(e,t,n,i)=>{e.gradeGridColumnOverallReborn=this.$injector.instantiate(ty,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tC.$inject=["$injector"],m.module(tv,[td]).directive("bbGradeGridColumnOverallReborn",["$injector",e=>e.instantiate(tC)]);let tS="ultra.components.directives.grade.filterChips",tE={Class:x.S_,renderLocalized:!0,withProvider:!0,attributes:["analyticsId"]};m.module(tS,[I.moduleName]).component("bbFilterChips",(0,eK.G5)(tE));var tI=n(519833),tw=n(596435),tA=n(625506);let tk="ultra.components.directives.gradeGridColumnHeaderReborn";class tx extends e6{initializeEventHandler(){this.element.find(".content-header-bg").focusin(()=>{this.focusin()}).focusout(()=>{this.focusout()})}focusin(){this.rootScope.$broadcast(eO.T.FOCUSIN_CELL,{columnId:this.col.id})}focusout(){this.rootScope.$broadcast(eO.T.FOCUSOUT_CELL,{columnId:this.col.id})}get possible(){if(this.scope.columnMetadata&&!p.isUndefined(this.scope.columnMetadata.possible))return Math.round(100*this.scope.columnMetadata.possible)/100}popupMenu(e){let t=`grade-grid-column-header-menu-reborn-${this.col.id}`,n=this.grade.canPostGrades(this.col.gridData.course,this.col.data);if((!this.isGroupContent()||this.hasEntitlementsToViewGroups())&&!this.gradeGridRebornController.isMenuExisting(t)&&this.toolAvailable){let i=tA(e.target).closest(".grade-grid-header-cell").offset();i.top+=87,this.menuScope.col=this.col,this.menuScope.grade=this.grade,this.menuScope.canPostGrades=n,this.menuScope.autoDestroy=!1,this.menuScope.adjustPosition=e=>{let t=i.left+e.width(),n=this.gradeGridRebornController.getGradeGridContainerElementRight();t>n&&(i.left-=t-n+(0,e3.I)()),e.offset(i)},this.gradeGridRebornController.popupMenu(t,e7,this.menuScope),this.timeout(()=>{let e=this.gradeGridRebornController.getPopupMenu();e.on("keydown",t=>{t.keyCode===e9.hY||t.keyCode===e9.Mf?(e.data("destroy")(),this.scope.$emit(z.CELL_FOCUSED),t.preventDefault(),t.stopPropagation()):e9.tH(t)&&this.scope.$emit(z.CELL_FOCUSED)}),this.gradeGridRebornController.getMenuitems().first().focus()},this.menuScope,0,!1),e.preventDefault(),e.stopPropagation()}}hasEntitlementsToViewGroups(){return this.col&&this.entitlementService.isEntitled(M.pQ.ViewGroups,this.col.getCourse().id)}isGroupContent(){return this.col&&this.col instanceof er&&null!==this.col.groups||this.col.data&&this.col.data.groupContent}isRestricted(){return!!this.isGroupContent()&&!this.hasEntitlementsToViewGroups()}getToolTipTemplate(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'}getSchemaText(){let e="components.directives.grade.grid.points.plural";if(this.scope.columnMetadata&&this.scope.columnMetadata.isScorm()){let t=this.scope.columnMetadata.ui&&this.scope.columnMetadata.ui.content||null,n=t&&t.getScormGradebookItems()||[],i=n&&n.find(e=>e.columnId===this.scope.columnMetadata.id),s=i&&i.scoringMethod&&i.scoringMethod.toString().toLowerCase()||"score";e=`course.content.scorm.settings.gradeSchema.${s}Overview.plural`}return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:e,params:{point:this.possible,count:this.possible},noWrap:!0})}constructor(e,t,n,i,s,r,o,a,l,c){super(t,a),this.rootScope=e,this.element=n,this.attrs=i,this.$compile=s,this.gradeGridRebornController=r,this.grade=o,this.bbLocalize=l,this.entitlementService=c,this.initializeEventHandler(),this.toolAvailable=!0,this.menuScope=t.$new(!0),Object.defineProperty(t,"possible",{get:()=>this.possible}),t.$watch("col",e=>{t.columnMetadata=e.data,this.col=e,p.debounce(()=>this.highlight(this.col),1e3)(),this.element.data("col",this.col),t.isGroupTest=this.col instanceof eo,t.showAlertIcon=()=>t.columnMetadata.getNumMissingIfLate()>0,this.element.find(".content").removeClass("is-active"),r.activeColumnId===e.id&&this.element.find(".content").addClass("is-active"),t.columnMetadata.isAttendance()&&!r.attendanceIsAvailable&&(this.toolAvailable=!1)}),t.$on(eO.T.FOCUSIN_CELL,(e,t)=>{t.columnId===this.col.id&&(this.gradeGridRebornController.getElement().find(".is-active").removeClass("is-active"),this.toolAvailable&&this.element.find(".content").addClass("is-active"))}),t.$on(eO.T.FOCUSOUT_CELL,(e,t)=>{t.columnId===this.col.id&&this.element.find(".content").removeClass("is-active")}),t.$on(z.CELL_FOCUSED,()=>{n.find(".content").focus()}),n.find(".content").on("keydown",e=>{if(e.keyCode===e9.hY)this.scope.$emit(z.LEAVE_GRID);else{if(!e9.tH(e))return;tA(e.target).click()}e.preventDefault(),e.stopPropagation()}),n.find(".content").on("keyup",e=>{e9.tH(e)&&(e.preventDefault(),e.stopPropagation())})}}tx.$inject=["$rootScope","scope","element","attrs","$compile","gradeGridRebornController",C.HV,w.H,I.serviceName,N.HV],function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);r>3&&o&&Object.defineProperty(t,n,o)}([(0,T.aM)("possible","locale","columnMetadata.scoreProviderHandle")],tx.prototype,"getSchemaText",null);class tT{constructor(e){this.$injector=e,this.restrict="E",this.template=tw,this.scope=!0,this.require=`^${nR}`,this.link=(e,t,n,i)=>{e.gradeGridColumnHeaderReborn=this.$injector.instantiate(tx,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tT.$inject=["$injector"],m.module(tk,[tI.e1]).directive("bbGradeGridColumnHeaderReborn",["$injector",e=>e.instantiate(tT)]);var tP=n(598278),tD=n(625506);function tG(e,t){return function(n,i){t(n,i,e)}}let tR="ultra.components.directives.gradeGridCellEditorReborn";class tB{initialize(){this.score=this.scope.gradeGridColumnReborn.score,this.element.find("input").focus(),this.element.addClass("purple-outline"),this.timeout(()=>{this.element.find("input").select()},this.scope,0,!1),this.userName=this.scope.gradeGridColumnReborn.userName,this.checkValue(this.score).then(e=>{this.isValidated=e})}removeErrorMessage(){this.element.removeClass("validation-alert"),p.isUndefined(this.messageElement)||(this.messageElement.remove(),this.messageElement=void 0),p.isUndefined(this.messageScope)||(this.messageScope.$destroy(),this.messageScope=void 0)}createErrorMessage(){if(this.messageElement&&this.removeErrorMessage(),p.isUndefined(this.messageElement)){this.element.addClass("validation-alert");let e=this.element.parent(".grade-grid-cell").offset();e.top+=80,this.messageScope=this.scope.$new(!1,this.scope),this.messageScope.adjustPosition=t=>{let n=e.left+t.width(),i=e.top+t.height(),s=this.gradeGridRebornController.getGradeGridContainerElementRight(),r=this.gradeGridRebornController.getGradeGridContainerElementBottom();i>r&&(e.top-=t.height()+80),n>s&&(e.left-=n-s+(0,e3.I)()),this.messageElement.offset(e)},this.$compile(tB.CELL_MESSAGE_TEMPLATE)(this.messageScope,e=>{this.messageElement=e,this.element.parents("bb-grade-grid-reborn").append(this.messageElement)})}}get isValidated(){return this._isValidated}set isValidated(e){this._isValidated=e,this.isValidated?this.removeErrorMessage():this.createErrorMessage(),this.scope.gradeGridColumnReborn.isReadyToPost=this.score&&this.isValidated}stopPropagation(e){e.preventDefault(),e.stopPropagation()}mousedown(){tD(this.window).trigger("click")}onChange(){this.checkValue(this.score).then(e=>{this.isValidated=e})}isSchemaTypeComplete(){return this.scope.gradeGridColumnReborn.isSchemaTypeComplete()}isStatusComplete(){return this.scope.gradeGridColumnReborn.isStatusComplete()}getAriaLabel(){return this.bbLocalize.translateSync({key:"components.directives.grade.grid.scoreInputAriaLabel",locale:this.bbLocalize.getLocale(this.scope),params:{userName:this.userName},noWrap:!0})}onInputBlur(e){this.scope.gradeGridColumnReborn.isPastDueZero&&""===this.score&&(this.score=this.scope.gradeGridColumnReborn.score),this.scope.gradeGridColumnReborn.onInputBlur(e,this.isValidated,this.score)}checkValue(e){let t=this.gradeGridRebornController.getGridData().getSchema()[this.scope.col.data.gradingSchemaId],n=this.gradeService.createGradeSubmission(this.scope.col.data,e,t);return this.gradeService.validateGrade(n,this.scope)}onKeydown(e){e9.tH(e)?(this.scope.gradeGridColumnReborn.gotoNextCell(),tD(e.target).blur(),this.mousedown(),e.preventDefault(),e.stopPropagation()):e.keyCode===e9.hY?(tD(e.target).blur(),this.mousedown(),this.scope.$emit(z.LEAVE_CELL)):e9.Wl(e)&&(this.score&&(e.keyCode===e9.RL||e.keyCode===e9.pX)?e.stopPropagation():this.mousedown())}constructor(e,t,n,i,s,r,o,a,l){this.$compile=e,this.window=t,this.scope=n,this.element=i,this.attrs=s,this.gradeGridRebornController=r,this.gradeService=o,this.timeout=a,this.bbLocalize=l,this.onCompleteIncompleteBlur=(e,t,n)=>{this.scope.$applyAsync(()=>this.scope.gradeGridColumnReborn.onInputBlur(e,this.isValidated,t))},this.initialize(),n.$on(eO.T.REFRESH_CELL_EDITOR,()=>{this.initialize(),this.scope.gradeGridColumnReborn.getIsOtherGroupMemberGraded()}),n.$on("$destroy",()=>{this.removeErrorMessage()})}}tB.CELL_MESSAGE_TEMPLATE='<div bb-grade-grid-message-reborn class="grade-grid-reborn-message" ng-mousedown="gradeGridMessageReborn.mousedown()"></div>',tB=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([tG(0,(0,T.tB)("$compile")),tG(1,(0,T.tB)("$window")),tG(2,(0,T.tB)("scope")),tG(3,(0,T.tB)("element")),tG(4,(0,T.tB)("attrs")),tG(5,(0,T.tB)("gradeGridRebornController")),tG(6,(0,T.tB)(C.HV)),tG(7,(0,T.tB)(w.H)),tG(8,(0,T.tB)(I.serviceName))],tB);class tL{constructor(e){this.$injector=e,this.restrict="A",this.template=tP,this.require=`^${nR}`,this.link=(e,t,n,i)=>{e.gradeGridCellEditorReborn=this.$injector.instantiate(tB,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tL.$inject=["$injector"],m.module(tR,[tr]).directive("bbGradeGridCellEditorReborn",["$injector",e=>e.instantiate(tL)]);var tN=n(461576),tO=n(216775),tM=n(866736),t$=n(841543),tH=n(817818),tF=n(625506);function tU(e,t){return function(n,i){t(n,i,e)}}let tV="ultra.components.directives.gradeGridColumnReborn";class t_{initializeState(){this._isEditing=!1,this.resetGradePost()}initializeCell(e,t,n=!0){this.cell=this.gridData.getCell(e,t),this.setUpScreenReader(this.cell,this.score),this._oldScore=this._score=void 0,this.group&&n&&this.element.children(".grade-grid-cell").removeClass(`group-id-${this.group.groupId} group-grade-cell selected`),this._group=void 0,this._isOtherGroupMemberGraded=void 0,this.cell instanceof eG&&(this._group=this.cell.group,this.element.children(".grade-grid-cell").addClass(`group-id-${this.group.groupId} group-grade-cell`)),this.setSelectEventListener(),this.showExceptionIcon=this.shouldShowExceptionIcon()}getTooltipTemplate(){return tH}isUserHasReleaseConditions(){var e,t;return(null===(e=this.cell.exceptions)||void 0===e?void 0:e.hasEndException)||(null===(t=this.cell.exceptions)||void 0===t?void 0:t.hasStartException)}isUserHasDueDateException(){var e,t,n,i;return(null===(e=this.cell)||void 0===e?void 0:null===(t=e.exceptions)||void 0===t?void 0:t.hasDueDateException)&&!(null===(n=this.cell)||void 0===n?void 0:null===(i=n.row)||void 0===i?void 0:i.metadata.isDueDateExcepted())}shouldShowExceptionIcon(){var e,t,n,i,s,r,o,a,l,c;return((null===(e=this.cell)||void 0===e?void 0:null===(t=e.exceptions)||void 0===t?void 0:t.hasStartException)||(null===(n=this.cell)||void 0===n?void 0:null===(i=n.exceptions)||void 0===i?void 0:i.hasEndException)||(null===(s=this.cell)||void 0===s?void 0:null===(r=s.exceptions)||void 0===r?void 0:r.hasAttemptsException)||(null===(o=this.cell)||void 0===o?void 0:null===(a=o.exceptions)||void 0===a?void 0:a.hasDueDateException)&&!(null===(l=this.cell)||void 0===l?void 0:null===(c=l.row)||void 0===c?void 0:c.metadata.isDueDateExcepted()))&&!this.isGroupAssessment()&&!this.cell.isAnonymousGrading}setSelectEventListener(){this.group&&p.isUndefined(this.unbindSelectEvent)&&!this.isRestrictedGroupContent?this.unbindSelectEvent=this.scope.$on(eO.T.SELECT_GROUP,(e,t)=>{this.group.groupId===t.groupId&&this.cell.column.id===t.columnId&&t.enter?this.element.children(".group-grade-cell").addClass("selected"):this.element.children(".group-grade-cell").removeClass("selected")}):p.isUndefined(this.group)&&!p.isUndefined(this.unbindSelectEvent)&&(this.unbindSelectEvent(),this.unbindSelectEvent=void 0)}initializeEventHandler(){this.element.parents(".rb-cell").mouseenter(()=>this.mouseEnterHandler()).mouseleave(()=>this.mouseLeaveHandler()).focus(()=>this.keyEnterHandler()).blur(()=>this.keyLeaveHandler()).focusin(()=>{this.focusin(),this.mouseEnterHandler(),this.showPointsPossible()}).focusout(()=>{this.focusout(),this.mouseLeaveHandler(),this.hidePointsPossible()}).click(()=>{this.showPointsPossible()})}focusin(){this.isRestrictedGroupContent||this.rootScope.$broadcast(eO.T.FOCUSIN_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})}focusout(){this.isRestrictedGroupContent||this.rootScope.$broadcast(eO.T.FOCUSOUT_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})}showElement(e){e.removeClass("hide")}hideElement(e){e.addClass("hide")}initializeUI(){let e=this.element.constructor.fn,t=e.show,n=e.hide;e.show=function(){return this.removeClass("hide")},e.hide=function(){return this.addClass("hide")},(this.group||this.cell.column.data&&this.cell.column.data.groupContent)&&(this.isRestrictedGroupContent=!this.entitlementService.isEntitled(M.pQ.ViewGroups,this.gridData.course.id));let i=this.element.children(".grade-grid-cell");if(this.isLoading)i.removeClass("grade-now-bg").find(".score, .ungraded, .anonymous").hide();else{let e=this.gridData.canViewGrades;if(!e||this.isRestrictedGroupContent){if(this.cell.data)i.addClass("grade-now-bg"),i.find(".score").show().find("#displayedScore").show().find("#display").text("--").show();else{let e=i.find("#displayedScore");e.children("#display").text("").hide(),e.hide()}}else{let e=this.displayedScore;this.cell.isAnonymousGrading||e||this.isExempt?i.removeClass("grade-now-bg"):i.addClass("grade-now-bg"),this.isEditing||this.cell.isAnonymousGrading?i.children(".score").hide():i.children(".score").show();let t=i.find("#displayedScore");if(e?(t.children("#display").text(e).show(),this.isExempt?t.children("#exempt").show():t.children("#exempt").hide(),t.show()):(t.children("#display").text("").hide(),this.isExempt?(t.children("#exempt").show(),t.show()):(t.children("#exempt").hide(),t.hide())),this.isPastDueZero?(i.find("#pastDueZero").show(),this.isExempt&&(i.find("#pastDueZero").hide(),i.find("#displayedScore").children("#display").text("").hide())):i.find("#pastDueZero").hide(),!this.isPosted||this.isPastDueZero||this.isExempt?i.find("#posted").hide():i.find("#posted").show(),!this.canGradeCell()||e||this.isExempt?i.find("#gradeNow").hide():i.find("#gradeNow").show(),this.hasNewSubmission&&!this.isExempt?i.find("#newSubmission").show():i.find("#newSubmission").hide(),this.canGradeCell()?i.find("#blank").hide():i.find("#blank").show(),this.cell instanceof ex&&this.ungradedItemCount&&this.ungradedItemCount>0&&!this.isExempt?(this.ungraded=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.ungraded",params:{count:this.ungradedItemCount},noWrap:!0,noEscape:!0}),i.find("#ungraded").show()):i.find("#ungraded").hide(),this.cell instanceof ex&&!this.isExempt){let e=this.pointsPossible;i.find("#pointsPossible").text(p.isUndefined(e)?"":e.toString())}this.cell.isAnonymousGrading&&!this.isExempt?i.find(".anonymous").show():i.find(".anonymous").hide()}}e.show=t,e.hide=n}showPointsPossible(){if(this.cell instanceof ex){let e=this.element.children(".grade-grid-cell");e.addClass("purple-outline"),e.find("#displayedScore").children("#display").text(this.score),this.showElement(e.find("#displayedScore")),this.showElement(e.find("#slash")),this.showElement(e.find("#pointsPossible")),this.timeout(()=>{let e=this.scope.$on(z.SCROLL_H,()=>{this.hidePointsPossible(),e(),t()}),t=this.scope.$on(z.SCROLL_V,()=>{this.hidePointsPossible(),t(),e()})},this.scope,200)}}hidePointsPossible(){if(this.cell instanceof ex){let e=this.element.children(".grade-grid-cell");e.removeClass("purple-outline"),e.find("#displayedScore").children("#display").text(this.displayedScore),this.hideElement(e.find("#slash")),this.hideElement(e.find("#pointsPossible"))}}resetGradePost(){this._isReadyToPost=void 0}get isReady(){return!p.isUndefined(this.cell)}get isLoading(){return!this.isReady||!this.cell.isLoaded}get isPosted(){return!p.isUndefined(this.cell)&&this.cell.isPosted}get hasNewSubmission(){return!p.isUndefined(this.cell)&&this.cell.hasNewSubmission}get isPastDueZero(){return!p.isUndefined(this.cell)&&this.cell.isPastDueZero}get isExempt(){return this.isReady&&this.cell.isExempt}get displayedScore(){if(!this.isLoading)return this.formatScore()}isSchemaTypeComplete(){var e,t,n,i;return(null===(e=this.gridData.getSchema()[null===(t=this.cell)||void 0===t?void 0:null===(n=t.column)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.gradingSchemaId])||void 0===e?void 0:e.scaleType)===eH.aQo.Complete}showCompletePill(){return this.element.find("#gradeNow").hasClass("hide")}isStatusComplete(){var e;return!!(null===(e=this.cell.getGrade())||void 0===e?void 0:e.displayGrade.grade)&&!this.isPastDueZero}get ungradedItemCount(){if(this.isReady){var e;if(null===(e=this.cell.data)||void 0===e?void 0:e.grade)return this.cell.data.grade.ungradedItemCount;if(this.gridData.getColumnMetadata(this.cell.column.id))return this.gridData.getColumnMetadata(this.cell.column.id).itemsCount}}get pointsPossible(){if(this.isReady&&this.cell.data&&this.displayedScore){let e=this.cell.data.grade.pointsPossible;return p.isUndefined(e)?e:Math.round(100*e)/100}}get score(){if(this.isReady){if(p.isUndefined(this._score)){let e=this.cell.getScore(this.scope);this._oldScore=this._score=e}return this._score}}set score(e){this._score=e}get isReadonly(){if(this.isReady)return!1}get isEditing(){return this._isEditing}get group(){return this._group}mouseEnterHandler(){this.group&&!this.isRestrictedGroupContent&&this.rootScope.$broadcast(eO.T.SELECT_GROUP,{groupId:this.group.groupId,columnId:this.cell.column.id,enter:!0})}mouseLeaveHandler(){!this.group||this._freezeGroup||this.isRestrictedGroupContent||this.rootScope.$broadcast(eO.T.SELECT_GROUP,{groupId:this.group.groupId,columnId:this.cell.column.id,enter:!1})}keyEnterHandler(){if(!this.cell.isAnonymousGrading)return;let e=this.element.find(".anonymous").children();e&&e.focus()}keyLeaveHandler(){if(!this.cell.isAnonymousGrading)return;let e=this.element.find(".anonymous").children();e&&e.blur()}insertCellEditor(){this.editorScope=this.scope.$new(!1,this.scope),this.$compile(t_.CELL_EDITOR_TEMPLATE)(this.editorScope,e=>this.element.children(".grade-grid-body-cell").append(e)),this.timeout(()=>{this.addInputKeyEventListeners();let e=this.scope.$on(z.SCROLL_H,()=>{p.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("grade-now-bg"),this.closeEditor(),e(),t()}),t=this.scope.$on(z.SCROLL_V,()=>{p.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("grade-now-bg"),this.closeEditor(),t(),e()})},this.scope,200)}removeCellEditor(){this.element.find("#bb-grade-grid-cell-editor-reborn").remove()}isConfirmDialogExisting(){return!!tF(".grade-grid-group-confirm-dialog").length}enterEditor(e){if(!this.isConfirmDialogExisting()&&this.isCellGradeable(this.cell)&&!this.isLoading&&!this._isEditing){if(this.cell.column.data.isAttendance())this.gradeGridRebornController.attendanceIsAvailable&&(this.cell.canBeView&&this.popupMenu(e,!1),this.rootScope.$broadcast(eO.T.SELECT_GROUP,{groupId:void 0,columnId:this.cell.column.id,enter:!1}));else{let t=this.hasEntitlementsToGradeCell();(this.cell.canBeView||this.cell.canPost())&&(t||(this.isReadyToPost=!!this.score),this.popupMenu(e,!0)),t&&!this.isExempt&&(this._isEditing=!0,this.hideElement(this.element.find(".score")),this.element.children(".grade-grid-cell").removeClass("grade-now-bg"),this.insertCellEditor(),this.group?this.rootScope.$broadcast(eO.T.ENTER_EDITOR,{group:this.group,columnId:this.cell.column.id}):this.rootScope.$broadcast(eO.T.SELECT_GROUP,{groupId:void 0,columnId:this.cell.column.id,enter:!1}))}this.getIsOtherGroupMemberGraded()}}getIsOtherGroupMemberGraded(){this.group&&this.getGroupGrades(this.cell.column.id).then(()=>{this.isOtherGroupMemberGraded()})}set isReadyToPost(e){this._isReadyToPost=e}get isReadyToPost(){return this._isReadyToPost}post(e,t){return t?this.cell.column.data.postReadyGroupAttempts({groupAssociationId:this.group.groupAssociationId}):this.cell.column.data.grades.$new(e.id).postReadyGrades()}fetchSummary(e){return this.cell.column.data.summary.$fetch(e).$asPromise()}popupMenu(e,t){let n=`grade-grid-cell-menu-reborn-${this.scope.row.id}-${this.scope.col.id}`;if(!this.gradeGridRebornController.isMenuExisting(n)){let i=tF(e.target).closest(".grade-grid-cell").offset();i.top+=80;let s=this.scope.$new(!0);s.cell=this.cell,s.post=()=>{(this.savePromise||this.$q.when()).then((e=this.cell.getGrade())=>{this.postDefer&&(this.postDefer.resolve(!0),this.timeout.cancel(this.postDeferTimeout)),e&&(this.isGroupAssessment()?this.post(e,!0).then(()=>this.fetchSummary({timestamp:Date.now()})).then(()=>{let e=this.gridData.getGroupIdUserIdMap()[this.group.groupId];e.forEach(e=>{this.gridData.refreshDataCell(this.gridData.getRowByUserId(e),this.cell.column)}),this.rootScope.$broadcast(z.DATA_UPDATE),this.resetGradePost()}):this.post(e,!1).then(()=>this.fetchSummary({timestamp:Date.now()})).then(()=>{this.gridData.refreshDataCell(this.cell.row,this.cell.column),this.rootScope.$broadcast(z.DATA_UPDATE),this.resetGradePost()}))})},s.isReadyToPost=()=>!this._isUpdating&&this.cell.isReadyToPost&&this.isReadyToPost&&(!this.isGroupAssessment()||this._isOtherGroupMemberGraded),s.adjustPosition=e=>{let t=i.top+e.height(),n=this.gradeGridRebornController.getGradeGridContainerElementBottom();t>n&&(i.top-=80+e.height()),e.offset(i)},t?this.gradeGridRebornController.popupMenu(n,tO,s):this.gradeGridRebornController.popupMenu(n,tM,s),this.addMenuKeyEventListeners(),e.preventDefault(),e.stopPropagation()}}popupConfirmDialog(e){let t=`group-cell-confirm-dialog-reborn-${this.scope.row.id}-${this.scope.col.id}`,n=this.$q.defer();if(!this.gradeGridRebornController.isMenuExisting(t)){let i=this.scope.$new(!0);i.waiting=200,i.onBeforeDestroy=e=>{n.resolve(!0)},i.saveGroup=()=>{n.resolve(!0)},i.saveOne=()=>{n.resolve(!1)},i.isSaveOneDisabled=""===this.score,e.top+=80,i.adjustPosition=t=>{let n=e.left+t.width(),i=e.top+t.height(),s=this.gradeGridRebornController.getGradeGridContainerElementRight(),r=this.gradeGridRebornController.getGradeGridContainerElementBottom();n>s&&(e.left-=n-s+(0,e3.I)()),i>r&&(e.top-=t.height()+80),t.offset(e)},i.$on("$destroy",()=>{this.scope.$emit(z.LEAVE_CELL)}),this.gradeGridRebornController.popupMenu(t,t$,i),this.timeout(()=>{let e=tF(`#${t}`),n=e.find("button");n.on("keydown",function(e){if(e9.Tw(e))n.eq((n.index(this)+1)%n.length).focus();else if(e9.i_(e))n.eq((n.index(this)-1+n.length)%n.length).focus();else{if(e.keyCode!==e9.hY)return;tF(window).click()}e.preventDefault(),e.stopPropagation()}),n.first().focus()},this.scope,0,!1)}return n.promise}isOtherGroupMemberGraded(){this._isOtherGroupMemberGraded=p.isUndefined(p.findKey(this.studentIdGradeMap,(e,t)=>{let n=e.getScore();return this.cell.row.metadata.user.id!==t&&(""===n||p.isNull(n)||p.isUndefined(n))}))}addInputKeyEventListeners(){let e=this.element.find("#bb-grade-grid-cell-editor-reborn input");e.on("keydown",e=>{let t=this.gradeGridRebornController.getMenuitems();if(e9.Tw(e))t.first().focus();else{if(!e9.i_(e))return;t.last().focus()}e.preventDefault(),e.stopPropagation()})}addMenuKeyEventListeners(){this.timeout(()=>{let e=this.gradeGridRebornController.getPopupMenu();e.on("keydown",t=>{let n=this.gradeGridRebornController.getMenuitems();if(e9.Tw(t)){let e=n.index(tF(t.target))+1;e<n.length?n.eq(e).focus():this.element.find(".grade-grid-cell").trigger("click",!0)}else if(e9.i_(t)){let e=n.index(tF(t.target))-1;e>=0?n.eq(e).focus():this.element.find(".grade-grid-cell").trigger("click",!0)}else if(e9.tH(t))this.scope.$emit(z.LEAVE_CELL);else{if(t.keyCode!==e9.hY)return;e.data("destroy")(),this.scope.$emit(z.LEAVE_CELL)}t.preventDefault(),t.stopPropagation()})},this.scope,0,!1)}gotoNextCell(){this.nextDeferred=this.$q.defer(),this.nextDeferred.promise.then(()=>{this.scope.$emit(z.ENTER_NEXT_CELL)})}onInputBlur(e,t,n){if(!this.isLoading&&this._isEditing){if(this.savePromise=this.$q.when(),this.postDefer=this.$q.defer(),this.postPromise=this.postDefer.promise,t){let t;this.score=n,p.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("grade-now-bg"),this.isDirty()?(t=this.$q.defer(),this.savePromise=t.promise):this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0);let i=this.$q.when(!1);this.isGroupAssessment()&&this.isDirty()&&(i=this.popupConfirmDialog(tF(e.target).closest(".grade-grid-cell").offset())),i.then(e=>{this.showScoreTemporarily(),this.saveGrade(e,t),this.closeEditor()})}else p.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("grade-now-bg"),this.closeEditor(),this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)}}showScoreTemporarily(){if(this.isDirty()){let e=this.element.find("#display");e.text(this.score);let t=this.element.find("#posted");p.isEmpty(this.score)?(this.hideElement(t),this.hideElement(this.element.find("#displayedScore")),this.showElement(this.element.find("#gradeNow"))):(this.hideElement(this.element.find("#gradeNow")),this.showElement(this.element.find("#displayedScore")),this.showElement(e))}}closeEditor(){!this.isLoading&&this._isEditing&&(this._isEditing=!1,this.removeCellEditor(),this.editorScope.$destroy(),this.showElement(this.element.find(".score")),this.rootScope.$broadcast(eO.T.CLOSE_EDITOR,{group:this.group,columnId:this.cell.column.id}))}formatScore(){let e;let t=this.cell.data;return!p.isNull(t)&&t.grade&&t.grade.displayGrade&&(e=this.gradeService.getGradeToDisplay(t.grade.displayGrade,this.scope,this.gridData.getSchema()[this.cell.column.data.gradingSchemaId].scaleType),this.setUpScreenReader(this.cell,e)),e}isDirty(){return p.isUndefined(this._oldScore)&&!p.isEmpty(this.score)||!p.isUndefined(this._oldScore)&&this.bbLocalize.parseNumberSync(this._oldScore,this.scope).toString()!==this.bbLocalize.parseNumberSync(this.score,this.scope).toString()}createGradeSubmission(){let e=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],t=this.gradeService.createGradeSubmission(this.cell.column.data,this.gradeService.parseGrade(this.score,e,this.scope),e);return t.clearGrade=this.gradeService.wasGradeCleared(this._oldScore,this.score),t}getGroupGrades(e){this.studentIdGradeMap={};let t=this.gridData.getGroupIdUserIdMap()[this.group.groupId].map(e=>this.gridData.getRowByUserId(e).metadata.id);return this.CourseModel.$new(this.gridData.course.id).gradebook.bulkView.$fetch({membershipIds:t,columnIds:[e]}).$asPromise().then(e=>{e.bulkViewUsers.forEach(e=>{this.studentIdGradeMap[e.studentId]=e.grades[0].grade})})}prepareSaveGroupGrade(){return this.$q.when().then(()=>{this.gridData.getGroupById(this.group.groupId).memberships.forEach(e=>{e.ui={gradeDetail:this.studentIdGradeMap[e.userId]}})})}saveGrade(e,t){if(this.isDirty()){this._oldScore=this._score,p.isUndefined(t)&&(t=this.$q.defer(),this.savePromise=t.promise);let n=this.createGradeSubmission(),i=this.$q.when();n.clearGrade&&this.cell.isCleanAttemptGrade&&(i=this.CourseModel.$new(this.gridData.course.id).gradebook.columns.$new(this.cell.column.id).grades.$new(this.cell.data.grade.id).attempts.$fetch().$asPromise().then(e=>e[0])),i.then(t=>(e?this.prepareSaveGroupGrade():this.$q.when()).then(()=>this.gradeService.saveGrade(n,this.cell.data&&this.cell.data.grade,t,e?{group:this.gridData.getGroupById(this.group.groupId)}:{userId:this.cell.row.metadata.user.id}))).then(i=>{!n.clearGrade&&this.cell.isPosted&&this.cell.isNeedAutoPost?this.post(i,e):t.resolve(i)}).then(()=>(this.postDeferTimeout=this.timeout(()=>{this.postDefer.resolve(!1)},this.scope,100,!1),this.postPromise.then(e=>e?void 0:this.fetchSummary()))).then(()=>{this.refresh(e),this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)})}}refresh(e){let t=this.getAffectedColumns().concat([this.cell.column]),n=this.getOverallColumn();n&&t.push(n);let i=[this.cell.row];e&&this.gridData.getGroupIdUserIdMap()[this.group.groupId].forEach(e=>{let t=this.gridData.getRowByUserId(e);t!==this.cell.row&&i.push(t)}),p.forEach(i,e=>{p.forEach(t,t=>{this.gridData.refreshDataCell(e,t)})}),this._isUpdating=!0,this.rootScope.$broadcast(z.DATA_UPDATE)}getAffectedColumns(){return this.cell.column instanceof J?this.cell.column.findAffectedColumns():[]}getOverallColumn(){return p.find(this.gridData.getColumns(),e=>e instanceof Q)}getShortFormatUsername(){let e=this.gridData.getCell(this.scope.row.id,this.cell.column.id);return this.bbLocalize.formatUsernameSync(e.row.metadata.user,I.ILocaleUsernameFormat.Short,this.scope,{noWrap:!0,noEscape:!0})}setUpScreenReader(e,t){this.userName=`${e.row.metadata.user.givenName} ${e.row.metadata.user.familyName}`;let n=e.column.data.columnName;if(t){if(this.isSchemaTypeComplete()){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.isStatusComplete()?"components.directives.grade.grid.completeLabel":"components.directives.grade.grid.incompleteLabel"});this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabel":"components.directives.grade.grid.tableCellAriaLabelReadOnly",params:{userName:this.userName,assignmentName:n,grade:e},noWrap:!0,noEscape:!0})}else this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabel":"components.directives.grade.grid.tableCellAriaLabelReadOnly",params:{userName:this.userName,assignmentName:n,grade:t},noWrap:!0,noEscape:!0})}else this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabelEmpty":"components.directives.grade.grid.tableCellAriaLabelEmptyReadOnly",params:{userName:this.userName,assignmentName:n},noWrap:!0,noEscape:!0});if(this.isPosted){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.postedLabel",noWrap:!0,noEscape:!0});this.ariaLabelContent=`${this.ariaLabelContent} ${e}`}if(this.isPastDueZero){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.pastDueZero",noWrap:!0,noEscape:!0});this.ariaLabelContent=`${this.ariaLabelContent} ${e}`}if(this.isExempt){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.exemptLabel",noWrap:!0,noEscape:!0});this.ariaLabelContent=`${this.ariaLabelContent} ${e}`}if(this.group&&(this.ariaLabelContent=`${this.ariaLabelContent} ${this.group.groupTitle}`),this.hasNewSubmission){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.newSubmissionLabel",noWrap:!0,noEscape:!0});this.ariaLabelContent=`${e} ${this.ariaLabelContent}`}}isGroupAssessment(){return this.group&&this.cell instanceof eG&&!(this.cell instanceof eR)}constructor(e,t,n,i,s,r,o,a,l,c,d,u,m){this.rootScope=e,this.window=t,this.$q=n,this.CourseModel=i,this.gradeService=s,this.$compile=r,this.scope=o,this.element=a,this.attrs=l,this.gradeGridRebornController=c,this.timeout=d,this.bbLocalize=u,this.entitlementService=m,this.isRestrictedGroupContent=!1,this.tooltipScope=this.scope.$new(),this.hasEntitlementsToGradeCell=()=>{if(this.isRestrictedGroupContent||!this.cell.canBeEdited)return!1;let e=this.cell;return e.data&&e.data.grade?this.gradeService.canGrade(e.data.grade.gradeScoreDesignation):!!e.column&&!!e.column.data&&this.gradeService.canGrade(e.column.data.gradeScoreDesignation)},this.isCellGradeable=e=>!(this.isRestrictedGroupContent||p.isUndefined(e)||this.gridData.course.isComplete()||p.isUndefined(this.group)&&e.column instanceof er)&&e.canBeEdited,this.canGradeCell=()=>this.isCellGradeable(this.cell)&&this.hasEntitlementsToGradeCell(),this._isUpdating=!1,this.initializeEventHandler(),this.gridData=this.gradeGridRebornController.getGridData(),this.hasItemExceptionView=this.entitlementService.isEntitled(x.SE.ViewException,this.gridData.course.id),this.hasAssessmentExceptionView=this.entitlementService.isEntitled(M.iL.ViewException,this.gridData.course.id),o.isDisabled=!(this.hasItemExceptionView&&this.hasAssessmentExceptionView),o.$watchGroup(["row","col"],e=>{let[t,n]=e;this.initializeCell(t.id,n.id),this.initializeState(),this.initializeUI()}),o.$on(eO.T.REFRESH,(e,t)=>{this._isUpdating=!1;let n=t.rowId,i=t.columnIds;p.forEach(i,e=>{this.scope.row.id===n&&this.cell.column.id===e&&(this.initializeCell(n,e,!1),this.initializeUI(),this.scope.$broadcast(eO.T.REFRESH_CELL_EDITOR))})}),o.$on(z.ENTER_CELL,(e,t)=>t.find(".grade-grid-cell").click()),o.$on("$destroy",()=>{}),o.$on(eO.T.ENTER_EDITOR,(e,t)=>{p.isUndefined(t.group)||p.isUndefined(this.group)||t.group.groupId!==this.group.groupId||this.cell.column.id!==t.columnId||(this._freezeGroup=!0)}),o.$on(eO.T.CLOSE_EDITOR,(e,t)=>{this.group&&this._freezeGroup&&(this._freezeGroup=!1)})}}t_.CELL_EDITOR_TEMPLATE='<div bb-grade-grid-cell-editor-reborn id="bb-grade-grid-cell-editor-reborn" class="editor"></div>',t_=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([tU(0,(0,T.tB)("$rootScope")),tU(1,(0,T.tB)("$window")),tU(2,(0,T.tB)("$q")),tU(3,(0,T.tB)(eg.N7.H)),tU(4,(0,T.tB)(C.HV)),tU(5,(0,T.tB)("$compile")),tU(6,(0,T.tB)("scope")),tU(7,(0,T.tB)("element")),tU(8,(0,T.tB)("attrs")),tU(9,(0,T.tB)("gradeGridRebornController")),tU(10,(0,T.tB)(w.H)),tU(11,(0,T.tB)(I.serviceName)),tU(12,(0,T.tB)(N.HV))],t_);class tq{constructor(e){this.$injector=e,this.restrict="E",this.template=tN,this.scope=!0,this.require=`^${nR}`,this.link=(e,t,n,i)=>{e.gradeGridColumnReborn=this.$injector.instantiate(t_,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tq.$inject=["$injector"],m.module(tV,[tR]).directive("bbGradeGridColumnReborn",["$injector",e=>e.instantiate(tq)]),n(904051);var tz=n(658169);let tW="ultra.components.directives.gradeSearchFilterReborn";class tj{initial(){this.getCheckedMergedCourse()||this.clearAll(),this.criteriaBlocks=[{id:"merged_course",expanded:!0,name:"merged_course",criteriaDetails:this.scope.mergedCourses}]}clearAll(){this.$rootScope.$broadcast(eO.T.GRADEBOOK_CLEAR_SEARCHBOX_SELECTION,!0)}collapseMergedCourse(e){this.criteriaBlocks.some(t=>t.id===e.id)&&(e.expanded=!e.expanded)}getCheckedMergedCourse(){return this.scope.mergedCourses&&this.scope.mergedCourses.filter(e=>!0===e.ui.checked).length}getToggleButtonLabel(e){return e.expanded?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.filter-panel.collapse"}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.filter-panel.expand"})}constructor(e,t,n){this.scope=e,this.$rootScope=t,this.bbLocalize=n,this.initial()}}tj.$inject=["scope","$rootScope",I.serviceName];class tZ{constructor(e){this.$injector=e,this.restrict="E",this.template=tz,this.scope={mergedCourses:"<"},this.link=(e,t,n)=>{e.gradeGridSearchFilterReborn=this.$injector.instantiate(tj,{scope:e,element:t,attrs:n})}}}tZ.$inject=["$injector"],m.module(tW,[]).directive("bbGradeGridSearchFilterReborn",["$injector",e=>e.instantiate(tZ)]);var tK=n(625506),tX=n(887833),tY=n(925904),tQ=n(614682);function tJ(e,t){return function(n,i){t(n,i,e)}}let t0="rbGridContainer";class t1{initColumnsPosition(e=this.columns,t=!0){let n=[],i=0;for(let s=0;s<e.length;s++){let r=e[s];r.accumulativeWidth=i,t&&n.push(`.rb-column-position-${r.id} {${this.isRtl?"right":"left"}: ${(0,tX.V)(i)};}`),i+=r.columnWidth}if(t){tK(`style#${this.id}`).remove();let e=tK(`<style scoped id="${this.id}"></style>`);e.text(n.join("\n")),this.grid.$element.prepend(e)}return i}getCssPosition(){return this.isRtl&&"center"!==this.position?"left"===this.position?"right":"left":this.position}getContainerStyle(){let e=this.grid.containers.left,t=this.grid.containers.right;return this.isMain?{[this.isRtl?"right":"left"]:(0,tX.V)(e&&e.totalWidth),[this.isRtl?"left":"right"]:(0,tX.V)(t&&t.totalWidth+this.grid.scrollbarWidth)}:{[this.getCssPosition()]:"0"}}getHeaderCanvasStyle(){return{width:(0,tX.V)(this.totalWidth),height:(0,tX.V)(this.grid.options.headerHeight)}}getBodyCanvasStyle(){return{width:(0,tX.V)(this.totalWidth),height:(0,tX.V)(this.totalHeight)}}getBodyStyle(){return{"overflow-x":this.hasHScrollbar?"scroll":"hidden","overflow-y":this.hasVScrollbar?"scroll":"hidden"}}init(e,t){if(this.element=t,this.scope=e,this.element.addClass(this.id),this.header=this.element.find(".rb-grid-header"),this.body=this.element.find(".rb-grid-body"),this.canAddColumn()){let e=this.scope.$watch("container",t=>{null!=t&&t.canAddColumn()&&(this.columnAdder=new t2(this.element.find(".rb-add-column"),this),e(),this.deferedInit.resolve(this))})}return this.adjustRows(),this.adjustColumns(),this.addEventListeners(),this.canAddColumn()||this.deferedInit.resolve(this),this.initialized}toggleFirstAddColumnPlaceholder(e){this.element.find(".rb-add-column-placeholder.first")[e?"show":"hide"]()}resetColumns(e){this.columns=[...e],this.columns.sort((e,t)=>e.order-t.order),this.totalWidth=this.initColumnsPosition(e,!1),this.adjustColumns()}resetRows(e){this.initialized.then(()=>{this.rows=e,this.totalHeight=this.grid.options.rowHeight*this.rows.length,this.adjustRows()})}addEventListeners(){this.element.on("wheel",this.handleWheel.bind(this)),this.body.on("scroll",this.handleScroll.bind(this))}handleScroll(){var e,t,n;let i=(e=this.body.scrollLeft(),t=this.isRtl,n=this.getMaxScrollLeft(),t&&(0,tQ.ed)()!==tQ.nj.Negative?n-e:Math.abs(e)),s=this.body.scrollTop();this.grid.scrollContainers({scrollLeft:i!==this.scrollLeft?i:null,scrollTop:s!==this.scrollTop?s:-1})}handleWheel(e){if(this.body[0].scrollWidth===this.body[0].clientWidth&&this.body[0].scrollHeight===this.body[0].clientHeight)return;let t=e.originalEvent,n=this.isRtl?-t.deltaX:t.deltaX,i=t.deltaY;if(1===t.deltaMode){let e=parseInt(this.element.css("font-size"),10);n*=e,i*=e}if(this.atTop()&&i<0||this.atBottom()&&i>0||this.atLeft()&&n<0||this.atRight()&&n>0||0===n&&0===i)return;e.preventDefault(),e.stopPropagation();let s=-1,r=null;0!==i&&(s=Math.max(0,Math.min(this.scrollTop+i,this.getMaxScrollTop()))),0!==n&&(r=Math.max(0,Math.min(this.scrollLeft+n,this.getMaxScrollLeft()))),this.grid.scrollContainers({scrollTop:s,scrollLeft:r})}scrollHorizontally(e){var t,n;let i=(t=this.isRtl,n=this.getMaxScrollLeft(),t?(0,tQ.ed)()===tQ.nj.Negative?-e:n-e:e);this.body.scrollLeft(i),this.header.scrollLeft(i),this.scrollLeft=e,this.adjustColumns()}scrollVertically(e){this.body.scrollTop(e),this.scrollTop=e,this.adjustRows()}canAddColumn(){return this.isMain&&this.grid.canAddColumn()&&this.gradebookPermissionService.canModify()}getVisibleColRange(){let e=this.scrollLeft,t=0,n=this.columns.length;for(let n=0,i=0;n<this.columns.length;n++)if((i+=this.columns[n].columnWidth)>=e){t=n;break}for(let t=0,i=0;t<this.columns.length;t++)if((i+=this.columns[t].columnWidth)>=e+this.body[0].clientWidth){n=t;break}return{start:t,end:n}}calculateNextRenderedColumns(){let{start:e,end:t}=this.getVisibleColRange();this.nextRenderedColumns=this.columns.slice(e,t+2+1)}adjustColumns(){this.calculateNextRenderedColumns(),this.grid.debounceRefresh()}getVisibleRowRange(){let e=Math.ceil(this.body[0].clientHeight/this.grid.options.rowHeight),t=Math.floor(this.scrollTop/this.grid.options.rowHeight);return{start:t,end:t+e}}calculateNextRenderedRows(){let{start:e,end:t}=this.getVisibleRowRange();this.nextRenderedRows=this.rows.slice(e,t+2)}isRowOutOfBound(e){let{start:t,end:n}=this.getVisibleRowRange();return{top:e<=t,bottom:e>=n}}isColOutOfBound(e){let{start:t,end:n}=this.getVisibleColRange();return{left:e<=t,right:e>=n}}adjustRows(){this.calculateNextRenderedRows(),this.grid.debounceRefresh()}applyData(){this.renderedRows=this.nextRenderedRows,this.renderedColumns=this.nextRenderedColumns}getMaxScrollTop(){return this.totalHeight-this.body[0].clientHeight}getMaxScrollLeft(){return this.totalWidth-this.body[0].clientWidth}getTopRowScrollTop(e){return this.grid.options.rowHeight*e}getBottomRowScrollTop(e){return Math.max(0,this.grid.options.rowHeight*(e+1)-this.body[0].clientHeight)}getLeftColScrollLeft(e){return e.accumulativeWidth}getRightColScrollLeft(e){return Math.max(0,e.accumulativeWidth+e.columnWidth-this.body[0].clientWidth)}atTop(){return 0===this.scrollTop}atBottom(){return this.scrollTop===this.getMaxScrollTop()}atLeft(){return!this.isMain||0===this.scrollLeft}atRight(){return!this.isMain||this.scrollLeft===this.getMaxScrollLeft()}constructor(e,t,n,i,s,r,o){this.$q=e,this.position=t,this.columns=n,this.grid=i,this.timeout=s,this.bbLocalize=r,this.gradebookPermissionService=o,this.renderedRows=[],this.nextRenderedRows=[],this.renderedColumns=[],this.nextRenderedColumns=[],this.scrollTop=0,this.scrollLeft=0,this.id=i.id+"-container-"+t,this.rows=i.options.memberships,this.totalWidth=this.initColumnsPosition(n,!1),this.totalHeight=i.options.rowHeight*i.options.memberships.length,this.isMain="center"===t,this.headerBorder=i.options.headerBorder,this.rowBorder=i.options.rowBorder,this.callbacks=i.options.callbacks,this.isRtl=this.bbLocalize.isRTL(),this.deferedInit=this.$q.defer(),this.initialized=this.deferedInit.promise}}t1=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([tJ(0,(0,T.tB)("$q")),tJ(1,(0,T.tB)("position")),tJ(2,(0,T.tB)("columns")),tJ(3,(0,T.tB)("grid")),tJ(4,(0,T.tB)(w.H)),tJ(5,(0,T.tB)(I.serviceName)),tJ(6,(0,T.tB)(y.HV))],t1);class t2{enter(e,t){this.button.hasClass("active")||this.show(tK(e.target),t)}leave(){this.button.hasClass("active")||this.hide()}show(e=this.firstPlaceholder,t){this.element.show(),this.element.offset(e.offset()),this.element.css("opacity","1"),this.container.currentColumn=t||this.grid.containers.left.columns.slice(-1)[0],this.addAriaLabel()}hide(){this.element.hide(),this.element.css("opacity","0")}onClick(e){this.button.toggleClass("active"),this.button.hasClass("active")&&this.container.callbacks.column(e,this.container.currentColumn)}addAriaLabel(){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.lastAddButtonAriaLabel",params:{columnName:this.container.currentColumn.data.columnName},noWrap:!0,noEscape:!0});this.button.attr("aria-label",e)}constructor(e,t){this.element=e,this.container=t,this.grid=t.grid,this.scope=t.scope,this.bbLocalize=t.bbLocalize,e.css("height",`calc(100% - ${(0,tX.V)(this.grid.scrollbarWidth)}`),this.button=e.find(".button"),this.firstPlaceholder=this.container.element.find(".rb-add-column-placeholder.first"),this.button.on("keydown",e=>{let t;this.grid.previousCell.tabPressed=!1;let n=this.container.currentColumn;if(e9.i_(e)||e.keyCode===e9.RL||e.keyCode===e9.hY){let e=n||this.grid.containers.left.columns.slice(-1)[0],i=this.container.columns.indexOf(e);i>=0&&this.container.isColOutOfBound(i).left?this.grid.scroll({scrollLeft:this.container.getLeftColScrollLeft(e)},()=>{this.grid.$scope.$broadcast(z.FOCUS_CELL,t,e)}):this.grid.$scope.$broadcast(z.FOCUS_CELL,t,e)}else{if(!e9.Tw(e)&&e.keyCode!==e9.pX)return;let i=this.grid.getFocusableColumns(),s=NaN,r=NaN;n?(n=i[(i.indexOf(n)+1)%i.length])===i[0]&&(t=this.container.rows[0],r=0):n=this.container.columns[0];let o=this.container.columns.indexOf(n);this.container.isColOutOfBound(o).right&&(s=this.container.getRightColScrollLeft(n)),(0,p.isNaN)(s)&&(0,p.isNaN)(r)?this.grid.$scope.$broadcast(z.FOCUS_CELL,t,n):this.grid.scroll({scrollTop:r,scrollLeft:s},()=>this.grid.$scope.$broadcast(z.FOCUS_CELL,t,n))}this.hide(),e.preventDefault(),e.stopPropagation()}),O.ZU.OnWindow("click",e=>{tK(e.target).closest(this.button).length||(this.button.removeClass("active"),this.hide())},this.container.scope),this.container.scope.$on(z.SCROLL_H,()=>{this.hide()}),this.container.scope.$on(z.SCROLL_V,()=>{this.button.hasClass("active")&&this.hide()})}}class t3{}class t9{constructor(){this.replace=!0,this.restrict="A",this.require=[`^${na}`,t0],this.template=tY,this.controller=t3,this.scope=!0,this.link=(e,t,n,i)=>{let[s,r]=i;s.initializedWithOptions.then(()=>{let i=s.containers[n[t0]];e.container=i,e.grid=s,i.init(e,t),r.container=i})}}}var t4=n(959613),t7=n(625506);function t5(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function t6(e,t){return function(n,i){t(n,i,e)}}let t8="rbGridCell";class ne{}class nt{setTabindex(){this.scope.col.focusable&&this.element.attr("tabindex",0)}goLeft(){return this.localizeService.isRTL(this.scope)?this.goNextColumn():this.goPreviousColumn()}goRight(){return this.localizeService.isRTL(this.scope)?this.goPreviousColumn():this.goNextColumn()}goForth(){this.goDown(!0)}goBack(){this.goUp(!0)}removeFocus(){this.container.element.find(".rb-ax-focus-placeholder").focus()}notifyFocus(e,t){this.grid.$scope.$broadcast(z.FOCUS_CELL,e,t)}handleFocus(){this.element.focus()}isFirst(){let{row:e,col:t}=this.scope,n=this.grid.getFocusableColumns();return void 0===e&&t===n[0]}isLast(){let{row:e,col:t}=this.scope,n=this.container.rows,i=this.grid.getFocusableColumns();return e===n[n.length-1]&&t===i[i.length-1]}getHandler(e){return(0,e9.i_)(e)&&!this.isFirst()?this.goBack:(0,e9.Tw)(e)&&!this.isLast()?this.goForth:e.keyCode===e9.RL?this.goLeft:e.keyCode===e9.pX?this.goRight:e.keyCode===e9.UP?this.goUp:e.keyCode===e9.WV?this.goDown:(0,e9.tH)(e)?this.handleEnter:e.keyCode===e9.hY?this.element.is(e.target)?this.handleEscape:this.handleFocus:void 0}handleEnter(){this.scope.$broadcast(z.ENTER_CELL,this.element)}handleEscape(){this.scope.$emit(z.LEAVE_GRID)}constructor(e,t,n,i,s,r,o,a){this.scope=e,this.element=t,this.grid=n,this.container=i,this.$q=s,this.timeout=r,this.localizeService=o,this.debounce=a,this.goPreviousColumnImpl=()=>{this.removeFocus();let{row:e}=this.scope,{col:t}=this.scope,n=this.container.rows,i=this.grid.getFocusableColumns(),s=i[(i.indexOf(t)-1+i.length)%i.length];if("right"===this.container.position&&this.scope.$first){this.grid.scrollToRight(()=>this.notifyFocus(e,s));return}if(s===i[i.length-1]){if(e){let t=n.indexOf(e)-1;e=n[t];let i=NaN;this.container.isRowOutOfBound(t).top&&(i=this.container.getTopRowScrollTop(t)),this.grid.scrollToRightWithTop(i,()=>this.notifyFocus(e,s))}return}let r=this.container.columns.indexOf(s),o=r>=0;this.container.isColOutOfBound(r).left?this.grid.scroll({scrollLeft:o?this.container.getLeftColScrollLeft(s):0},()=>this.notifyFocus(e,s)):this.notifyFocus(e,s)},this.goNextColumnImpl=()=>{this.removeFocus();let{row:e,col:t}=this.scope,n=this.container.rows,i=this.grid.getFocusableColumns(),s=i[(i.indexOf(t)+1)%i.length];if("left"===this.container.position&&this.scope.$last){this.grid.scrollToLeft(()=>this.notifyFocus(e,s));return}if(s===i[0]){let t=-1,i=n[0];if(void 0===e)t=0;else{let s=n.indexOf(e)+1;(i=n[s])&&this.container.isRowOutOfBound(s).bottom&&(t=this.container.getBottomRowScrollTop(s))}this.grid.scroll({scrollLeft:0,scrollTop:t},()=>this.notifyFocus(i,s));return}let r=this.container.columns.indexOf(s);this.container.isColOutOfBound(r).right?this.grid.scroll({scrollLeft:this.container.getRightColScrollLeft(s)},()=>this.notifyFocus(e,s)):this.notifyFocus(e,s)},this.goUpImpl=(e=!1)=>{this.removeFocus();let{row:t,col:n}=this.scope,i=this.container.rows,s=i.indexOf(t)-1;if(!t){this.grid.scrollToBottom(()=>this.notifyFocus(i[i.length-1],n));return}let r=i[s];r?this.container.isRowOutOfBound(s).top?this.grid.scroll({scrollTop:this.container.getTopRowScrollTop(s)},()=>this.notifyFocus(r,n)):this.notifyFocus(r,n):e?this.grid.scrollToBottom(()=>this.notifyFocus(i[i.length-1],n)):this.notifyFocus(void 0,n)},this.goDownImpl=(e=!1)=>{this.removeFocus();let{row:t,col:n}=this.scope,i=this.container.rows,s=i.indexOf(t)+1,r=i[s];if(!r){e?(r=i[0],this.grid.scrollToTop(()=>this.notifyFocus(r,n))):this.notifyFocus(r,n);return}if(void 0===t){this.grid.scrollToTop(()=>this.notifyFocus(r,n));return}this.container.isRowOutOfBound(s).bottom?this.grid.scroll({scrollTop:this.container.getBottomRowScrollTop(s)},()=>this.notifyFocus(r,n)):this.notifyFocus(r,n)},this.goPreviousColumn=this.debounce.asDebounced(this.goPreviousColumnImpl,this.scope,50),this.goNextColumn=this.debounce.asDebounced(this.goNextColumnImpl,this.scope,50),this.goUp=this.debounce.asDebounced(this.goUpImpl,this.scope,50),this.goDown=this.debounce.asDebounced(this.goDownImpl,this.scope,50),this.setTabindex(),t.on("keydown",e=>{let t=this.getHandler(e);t&&(this.grid.previousCell=this,this.tabPressed=e.keyCode===e9.Mf,(0,e9.Wl)(e)&&t7(document.body).removeClass("hide-focus-outline"),t.call(this),e.preventDefault(),e.stopPropagation())}),e.$on(z.FOCUS_CELL,(e,t,n)=>{this.scope.row===t&&this.scope.col===n&&(this.handleFocus(),this.grid.cellFocusDeferred&&this.grid.cellFocusDeferred.resolve(this))}),e.$on(z.LEAVE_CELL,()=>{this.handleFocus()}),e.$on(z.ENTER_NEXT_CELL,()=>{this.grid.cellFocusDeferred=new function(){this.promise=new Promise(e=>{this.resolve=e})},this.goForth(),this.grid.cellFocusDeferred.promise.then(e=>{e.handleEnter(),this.grid.cellFocusDeferred=null})})}}nt=t5([t6(0,(0,T.tB)("scope")),t6(1,(0,T.tB)("element")),t6(2,(0,T.tB)("grid")),t6(3,(0,T.tB)("container")),t6(4,(0,T.tB)("$q")),t6(5,(0,T.tB)(w.H)),t6(6,(0,T.tB)(I.serviceName)),t6(7,(0,T.tB)(t4.HV))],nt);class nn extends nt{setTabindex(){this.scope.col.focusable&&this.element.attr("tabindex",this.scope.col.headerFocusable?0:-1)}goBack(){this.goLeft()}goForth(){let{row:e,col:t}=this.scope;this.canAddColumn()?this.container.canAddColumn()?this.notifyFocus(e,t):this.grid.scrollToLeft(()=>this.notifyFocus(e,t)):this.goRight()}handleFocus(){let e=this.grid.previousCell,t=this.grid.containers.center.columnAdder;e.tabPressed&&e instanceof nn&&e.canAddColumn()&&this.canAddColumn()?(this.container.canAddColumn()?t.show(this.element.find(".rb-add-column-placeholder"),this.scope.col):t.show(),t.button.focus()):this.scope.col.headerFocusable?super.handleFocus():this.scope.$broadcast(z.CELL_FOCUSED,this.element)}canAddColumn(){return this.container.canAddColumn()||this.grid.canAddColumn()&&"left"===this.container.position&&this.scope.$last}}class ni{constructor(e,t){this.$injector=e,this.$compile=t,this.templates=Object.create(null),this.restrict="A",this.require=[`^${na}`,`^${t0}`,t8],this.controller=ne,this.transclude=!0,this.link=(e,t,n,i,s)=>{let r=e.$eval(n[t8]);(this.templates[r]=this.templates[r]||this.$compile(r))(e,e=>t.append(e)),s(e=>t.append(e));let[o,a,l]=i;l.cellNavigator=this.$injector.instantiate(e.row?nt:nn,{scope:e,element:t,grid:o,container:a.container})}}}ni=t5([t6(0,(0,T.tB)("$injector")),t6(1,(0,T.tB)("$compile"))],ni);var ns=n(715673);function nr(e,t){return function(n,i){t(n,i,e)}}let no="ultra.components.directives.gridReborn",na="bbGridReborn";class nl{onWindowResizeImpl(){p.forEach(this.containers,e=>{e.adjustRows(),e.adjustColumns()})}initialize(e){this.options=e,this.setDefaultValues(),this.initStyles(),this.createContainers(),this.initRowsPosition(),this.initColumnsPosition(),this.deferredInitWithOptions.resolve(e)}initStyles(){let e=[],t=this.$element.find("style#rb-grid");e.push(`.${this.id} .rb-header-row {height: ${(0,tX.V)(this.options.headerHeight)};}`),e.push(`.${this.id} .column-header-button-wrapper, .${this.id} .rb-add-column-placeholder {height: ${(0,tX.V)(this.options.headerContentHeight)};}`),e.push(`.${this.id} .rb-cell-row {height: ${(0,tX.V)(this.options.rowHeight)};}`),Array.prototype.push.apply(e,this.options.columns.map(e=>`.${this.id} .rb-col-${e.id} {width: ${(0,tX.V)(e.columnWidth)};}`)),e.push(`.${this.id} .rb-grid-scrollbar-placeholder-x {height: ${(0,tX.V)(this.scrollbarWidth)};}`),e.push(`.${this.id} .rb-grid-scrollbar-placeholder-y {width: ${(0,tX.V)(this.scrollbarWidth)};}`),t.text(e.join("\n"))}initRowsPosition(){let e=this.options.memberships,t=[],n=this.$element.find("style#rb-grid-rows-initial-position");for(let n=0;n<e.length;n++)t.push(`.${this.id} .rb-row-position-${e[n].id} {top: ${(0,tX.V)(n*this.options.rowHeight)};}`);n.text(t.join("\n"))}initColumnsPosition(){p.values(this.containers).forEach(e=>e.initColumnsPosition())}createContainers(){p.forEach(this.splitColumns(),(e,t)=>this.containers[t]=this.$injector.instantiate(t1,{position:t,columns:e,grid:this})),this.containers.center.hasHScrollbar=!0,(this.containers.right||this.containers.center).hasVScrollbar=!0}setDefaultValues(e=this.options){e.headerContentHeight=e.headerContentHeight||e.headerHeight,e.headerBorder=!1!==e.headerBorder,e.rowBorder=!1!==e.rowBorder,e.columns.forEach(e=>{e.position=e.position||"center",e.border=!1!==e.border,e.focusable=!1!==e.focusable})}getFocusableColumns(){let e=this.containers.left,t=this.containers.right;return(e&&e.columns||[]).concat(this.containers.center.columns,t&&t.columns||[]).filter(e=>e.focusable)}splitColumns(e=this.options.columns){let t=p.groupBy(e,e=>e.position);return t.center=t.center||[],t}scrollContainers({scrollTop:e=-1,scrollLeft:t}){e>=0&&(this.notifyScrollVertically(e),p.forEach(this.containers,t=>{t.scrollVertically(e)})),null!=t&&(this.notifyScrollHorizontally(t),this.containers.center.scrollHorizontally(t))}scrollToLeft(e){this.scroll({scrollLeft:0},e)}scrollToRight(e){this.scroll({scrollLeft:this.containers.center.getMaxScrollLeft()},e)}scrollToRightWithTop(e,t){this.scroll({scrollLeft:this.containers.center.getMaxScrollLeft(),scrollTop:e},t)}scrollToTop(e){this.scroll({scrollTop:0},e)}scrollToBottom(e){this.scroll({scrollTop:this.containers.center.getMaxScrollTop()},e)}scroll(e,t){t&&this.afterCellDataUpdated(t),this.scrollContainers(e)}canAddColumn(){return!!this.options.callbacks.column}afterCellDataUpdated(e){this.afterCellDataUpdatedHooks.push(e)}applyAfterCellUpdatedOnce(){for(let e=0;e<this.afterCellDataUpdatedHooks.length;e++)try{this.afterCellDataUpdatedHooks[e]()}catch(e){console.error(e)}this.afterCellDataUpdatedHooks.length=0}refreshImpl(){p.forEach(this.containers,e=>e.applyData());let e=p.values(this.containers).reduce((e,t)=>e.concat(t.renderedColumns),[]);(this.options.callbacks.data||m.noop)(this.containers.center.renderedRows,e),this.$scope.$apply(),this.applyAfterCellUpdatedOnce()}constructor(e,t,n,i,s,r){this.$scope=e,this.$element=t,this.$attrs=n,this.$injector=i,this.$q=s,this.debounce=r,this.containers=Object.create(null),this.afterCellDataUpdatedHooks=[],this.onColumnEvent=(e,t)=>{this.initializedWithOptions.then(()=>{t&&(this.options.columns=t),this.setDefaultValues(),this.afterCellDataUpdated(()=>{this.initStyles(),p.forEach(this.containers,e=>e.initColumnsPosition())}),p.forEach(this.splitColumns(),(e,t)=>{let n=this.containers[t];n.resetColumns(e)})})},this.onRowEvent=(e,t)=>{this.initializedWithOptions.then(()=>{t&&(this.options.memberships=t),this.setDefaultValues(),this.initStyles(),this.initRowsPosition(),p.forEach(this.containers,e=>e.resetRows(t))})},this.onDataUpdate=()=>{this.debounceRefresh()},this.notifyScrollHorizontally=p.throttle(this.$scope.$broadcast.bind(this.$scope.$root,z.SCROLL_H),50),this.notifyScrollVertically=p.throttle(this.$scope.$broadcast.bind(this.$scope.$root,z.SCROLL_V),50),this.id="rb-grid-"+n.id,t.addClass(this.id),this.scrollbarWidth=(0,e3.I)(),this.deferredInitWithOptions=s.defer(),this.initializedWithOptions=this.deferredInitWithOptions.promise;let o=e.$watch(n[na],e=>{e&&(this.initialize(e),o())});this.debounceRefresh=this.debounce.asDebounced(this.refreshImpl.bind(this),this.$scope,50),this.onWindowResize=this.debounce.asDebounced(this.onWindowResizeImpl.bind(this),this.$scope,50),O.ZU.OnWindow("resize",this.onWindowResize,e),e.$on(z.COLUMN,this.onColumnEvent),e.$on(z.ROW,this.onRowEvent),e.$on(z.DATA_UPDATE,this.onDataUpdate)}}nl=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([nr(0,(0,T.tB)("$scope")),nr(1,(0,T.tB)("$element")),nr(2,(0,T.tB)("$attrs")),nr(3,(0,T.tB)("$injector")),nr(4,(0,T.tB)("$q")),nr(5,(0,T.tB)(t4.HV))],nl);class nc{constructor(e){this.$injector=e,this.replace=!0,this.restrict="A",this.template=ns,this.transclude=!0,this.controller=nl,this.controllerAs="grid",this.scope=!0}}nc.$inject=["$injector"],m.module(no,[t4.e1]).directive(na,["$injector",e=>e.instantiate(nc)]).directive(t0,["$injector",e=>e.instantiate(t9)]).directive(t8,["$injector",e=>e.instantiate(ni)]);var nd=n(186075),nu=n(607793),np=n(343597),nm=n(576643);let nh="ultra.components.directives.bbUiIcon.small.DownloadFile";(0,np.n)(nm.x,nh,"bbUiIconSmallDownloadFile");var ng=n(895135),nf=n(625506);let nb="ultra.components.directives.gradeGridMenuReborn";class nv{listenOnWindow(){let e=(e,t)=>{t||nf(e.target).closest("button:disabled").length||this.element.data("destroy")()};if(!1===this.scope.autoDestroy){let t=nf(window);t.on(`click.${this.scope.id}`,e),t.on(`blur.${this.scope.id}`,e)}else O.ZU.OnWindow("click",e,this.scope),O.ZU.OnWindow("blur",e=>{this.element.data("destroy")()},this.scope)}constructor(e,t,n,i,s){this.scope=e,this.element=t,this.attrs=n,this.gradeGridRebornController=i,this.timeout=s,t.data("destroy",()=>{if(p.isUndefined(e.onBeforeDestroy)||e.onBeforeDestroy(t),t.remove(),s.cancel(this.timeoutRef),this.scrollHDeregistration&&this.scrollHDeregistration(),this.scrollVDeregistration&&this.scrollVDeregistration(),!1===e.autoDestroy){let t=nf(window);t.off(`click.${e.id}`),t.off(`blur.${e.id}`)}else e.$destroy()}),e.keepOthers||nf("[bb-grade-grid-menu-reborn]").each((e,n)=>{n!==t[0]&&nf(n).data("destroy")()}),t.mousedown(e=>{nf(e.target).closest("button:disabled").length&&e.preventDefault()}),p.isUndefined(e.waiting)?this.listenOnWindow():s(()=>{this.listenOnWindow()},e,e.waiting,!1),this.timeoutRef=s(()=>{this.scrollHDeregistration=e.$on(z.SCROLL_H,()=>{s(()=>t.data("destroy")(),e,0,!1)}),this.scrollVDeregistration=e.$on(z.SCROLL_V,()=>{s(()=>t.data("destroy")(),e,0,!1)})},e,200,!1),s(()=>{p.isUndefined(e.adjustPosition)||e.adjustPosition(t)},e,0,!1)}}nv.$inject=["scope","element","attrs","gradeGridRebornController",w.H];class ny{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="A",this.template=nd,this.require=`^${nR}`,this.transclude=!0,this.link=(e,t,n,i)=>{e.gradeGridMenuReborn=this.$injector.instantiate(nv,{scope:e,element:t,attrs:n,gradeGridRebornController:i}),this.timeout(()=>{t.on("keydown",e=>{let n=t.find("li>:tabbable"),i=nf(e.target);if(e.keyCode===e9.UP)n.eq((n.index(i)-1+n.length)%n.length).focus();else if(e.keyCode===e9.WV)n.eq((n.index(i)+1)%n.length).focus();else{if(!e9.tH(e))return;i.click()}e.preventDefault(),e.stopPropagation()})},e,0,!1)}}}ny.$inject=["$injector",w.H],m.module(nb,[nu.e,nh,ng.e]).directive("bbGradeGridMenuReborn",["$injector",e=>e.instantiate(ny)]);var nC=n(340651),nS=n(796588),nE=n(797344),nI=n(176683),nw=n(156518),nA=n(122490),nk=n(274371),nx=n(454229),nT=n(396184),nP=n(625506);function nD(e,t){return function(n,i){t(n,i,e)}}let nG="ultra.components.directives.gradeGridReborn",nR="bbGradeGridReborn";class nB{updateFilterConditions(e){let t={membershipId:e.memberId,groupId:e.courseGroupId,childCourseId:e.childCourseId},n={columnId:e.gradebookColumnId,assessmentType:e.gradebookAssessmentType,gradebookCategoryId:e.gradebookCategoryId};!this.changingState&&(p.isEqual(t,this.rowFilterParams)||(this.rowFilterParams=t,this.rowFiltersPresent()?this.setAdvancedFilterRows(e):this.setUnfilteredRows()),p.isEqual(n,this.columnFilterParams)||(this.columnFilterParams=n,this.columnFiltersPresent()?this.setAdvancedFilterColumns(e):this.setUnfilteredColumns()))}updateAffectedColumns(e){return this.$q.all(e.map(e=>{let t=e.data;return t.$fetch().$asPromise().then(()=>t.summary.$fetch().$asPromise())})).then(()=>{e.forEach(e=>this.gridData.updateColumnByMetadata(e.data))})}rowFiltersPresent(){let e=this.ultraState.params;return(0,W.pR)(e)}columnFiltersPresent(){let e=this.ultraState.params;return!!e.gradebookCategoryId||!!e.gradebookColumnId||!!e.gradebookAssessmentType}setUnfilteredRows(){this.studentsTotal=this.availableRowSelectedOptions.length,this.$scope.$broadcast(z.ROW,this.availableRowSelectedOptions),this.$scope.$emit(eO.T.ADVANCED_FILTERS_ROWS,this.availableRowSelectedOptions)}setUnfilteredColumns(){this.gridData.getFilteredColumns({}).then(e=>{this.availableColumnSelectedOptions=e,this.$scope.$broadcast(z.COLUMN,e),this.$scope.$emit(eO.T.ADVANCED_FILTERS_COLUMNS,this.availableColumnSelectedOptions)})}setAdvancedFilterRows(e){let t={membershipId:e.memberId,groupId:e.courseGroupId,childCourseId:e.childCourseId};this.gridData.fetchMemberships(t).then(e=>{this.studentsTotal=e.length,this.$scope.$broadcast(z.ROW,e),this.$scope.$emit(eO.T.ADVANCED_FILTERS_ROWS,e)})}setAdvancedFilterColumns(e){let t={columnId:e.gradebookColumnId,gradebookCategoryId:e.gradebookCategoryId,assessmentType:e.gradebookAssessmentType};this.gridData.getFilteredColumns(t).then(e=>{this.filteredColumns=e,this.$scope.$broadcast(z.COLUMN,e),this.$scope.$emit(eO.T.ADVANCED_FILTERS_COLUMNS,e)})}initialize(){let e=this.$q((e,t)=>{this.$q.all([this.bbLocalize.loadBundle("components/directives/grade/grade-grid"),this.bbLocalize.loadBundle("components/directives/grade/grade-input")]).then(()=>{this.gridData=this.$injector.instantiate(e_,{gradeGridRebornDirectiveScope:this.$scope}),this.gridData.initialized.then(n=>{this.availableRowSelectedOptions=n.memberships,this.studentsTotal=n.memberships.length,this.availableColumnSelectedOptions=n.columns,this.$scope.$emit(eO.T.ADVANCED_FILTERS_ROWS,this.availableRowSelectedOptions),this.$scope.$emit(eO.T.ADVANCED_FILTERS_COLUMNS,this.availableColumnSelectedOptions),this.gridOptions={memberships:n.memberships,columns:n.columns,rowHeight:this.rowHeight,headerHeight:this.headerHeight,headerContentHeight:89,headerBorder:!0,rowBorder:!0,callbacks:{data:(e,t)=>this.gridData.loadGradeData(e,t),column:this.gridData.course.isComplete()?void 0:(e,t)=>this.onClickAddColumnButton(e,t)}},this.initialized=!0,this.handleMergedCourse(),this.gridData.course.isComplete()?(this.isOverallPanelShown=!1,e(!0)):this.gradeService.needsToSetupOverall(this.gridData.getColumnMetadatas(),this.gridData.course.id).then(t=>{t?this.loadSetupOverallGradeMessageIsHiddenPreference&&!this.setupOverallGradeMessageIsHiddenPreference&&this.loadSetupOverallGradeMessageIsHiddenPreference(x.nv.key).then(()=>{var e;let t=(null===(e=this.setupOverallGradeMessageIsHiddenPreference)||void 0===e?void 0:e.value)==="true";this.isOverallPanelShown=!t}):this.isOverallPanelShown=t,e(!0)}).catch(t)}).catch(e=>{console.error(e),t(e)})}).catch(e=>{console.error(e),t(e)})});return e}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({setupOverallGradeMessageIsHiddenPreference:A.Ys.coursePreference.getCoursePreferenceByKeyAndCourseId(e,x.nv.key,this.$scope.course().id),gradebookGrades:A.Ys.gradebookGrade.getGradebookGradesByCourseId(e,this.$scope.course().id)}),e=>({loadSetupOverallGradeMessageIsHiddenPreference:t=>e(A.Nwg.coursePreference.loadCoursePreference({key:t,courseId:this.$scope.course().id}))}))(({setupOverallGradeMessageIsHiddenPreference:e,gradebookGrades:t},{loadSetupOverallGradeMessageIsHiddenPreference:n})=>{let i;Object.assign(this,{setupOverallGradeMessageIsHiddenPreference:e,loadSetupOverallGradeMessageIsHiddenPreference:n}),this.currentGradebookGrades&&t&&this.currentGradebookGrades!==t&&(i=t.find((e,t)=>{var n,i,s;return!(null==e?void 0:null===(n=e.api)||void 0===n?void 0:n.isUpdating)&&(null===(i=this.currentGradebookGrades[t])||void 0===i?void 0:i.id)===e.id&&(null===(s=this.currentGradebookGrades[t])||void 0===s?void 0:s.isExempt)!==e.isExempt||!this.currentGradesMap.has(e.id)&&e.isExempt&&e.ui.isGradePersistByUserId})),this.currentGradebookGrades=t,t&&(this.currentGradesMap=new Map(t.map(e=>[e.id,e]))),i&&this.gridData.applyGradesFromState(i)});this.$scope.$on("$destroy",e)}refreshSchema(e){this.gridData.getSchema()[e.id]=e,p.forEach(this.gridData.getColumnMetadatas(),e=>{let t=this.gridData.getSchema()[e.gradingSchemaId];(null==t?void 0:t.scaleType)===eH.aQo.Tabular&&this.gridData.updateColumnByMetadata(e)}),this.$scope.$broadcast(z.COLUMN)}refreshDataCells(e,t){p.forEach(e,e=>{p.forEach(t,t=>{this.gridData.refreshDataCell(e,t)})}),this.$scope.$broadcast(z.COLUMN)}refreshDataCell(e,t){this.gridData.refreshDataCell(e,t),this.$scope.$broadcast(z.COLUMN)}addStudentColumnBorder(e){e.externalGrade&&!this.gridData.isColumnExisting(e.id)&&this.gridData.getColumn(e_.COLUMN_STUDENT).deleteBorder()}deleteStudentColumnBorder(e){e.externalGrade&&this.gridData.getColumn(e_.COLUMN_STUDENT).addBorder()}updateOverallNotation(){let e=p.find(this.gridData.getColumns(),e=>e instanceof Q);e&&(e.loadNotation(),this.gridData.updateColumnByMetadata(e.data)&&this.$scope.$broadcast(z.COLUMN))}getAffectedColumnsBeforeEdit(e){let t=this.gridData.getColumn(e.id),n=[];return t instanceof et&&(n=t.affectedColumnsBeforeEdit),n}getAffectedColumns(e){let t=e.findAffectedColumns(),n=p.find(this.gridData.getColumns(),e=>e instanceof Q);return n&&t.push(n),t}setupSearchFilterListener(){this.$scope.$on(eO.T.GRADEBOOK_USER_SELECTED,(e,t)=>{let n=this.availableRowSelectedOptions;t&&t.length>0?this.$scope.$broadcast(z.ROW,p.intersectionWith(n,t,(e,t)=>e.userId===t)):n.length!==this.gridOptions.memberships.length&&(this.searchedResult&&"user"===this.searchedResult.type?this.$scope.$broadcast(z.ROW,[]):this.$scope.$broadcast(z.ROW,n))}),this.$scope.$on(eO.T.GRADEBOOK_CLEAR_SEARCHBOX_SELECTION,(e,t)=>{let n=this.getAvailableRowSelectedOptions();this.availableRowSelectedOptions&&this.availableRowSelectedOptions.length!==this.gridOptions.memberships.length&&this.$scope.$broadcast(z.ROW,n),this.filteredColumns&&this.filteredColumns.length!==this.availableColumnSelectedOptions.length&&this.$scope.$broadcast(z.COLUMN,this.availableColumnSelectedOptions),this.ids&&(this.ids=null),this.handleMergedCourse()}),this.$scope.$on(eO.T.GRADEBOOK_COLUMN_SELECTED,(e,t)=>{let n=this.availableColumnSelectedOptions;this.filterColumns((e,t)=>p.filter(e,e=>e.filterByColumId(t)),t,n)}),this.$scope.$on(eO.T.GRADEBOOK_CATEGORY_SELECTED,(e,t)=>{let n=this.availableColumnSelectedOptions;this.ids=t,this.filterColumns((e,t)=>p.filter(e,e=>e.filterByCategoryId(t)),t,n)})}setupColumnChangeListener(){this.$scope.$on(C.JH,(e,t,n)=>{t.summary.$fetch().$asPromise().then(()=>{this.addStudentColumnBorder(t),this.updateColumns(t),this.updateFilteredColumns(),this.updateCategoryColumns(),this.filteredColumns&&this.toast.show({messageKey:"components.directives.grade.grid.newItemAdded",icon:"icon-check",toastStatus:"success"})})}),this.$scope.$on("content-update",(e,t)=>{if(t.isScorm()){let e=t.getScormGradebookItems().map(e=>this.$scope.course().gradebook.columns.$buildRaw(e.gradingColumn));this.$q.all(e.map(e=>(e.ui={content:t},e.summary.$fetch().$asPromise()))).then(()=>{e.forEach(e=>this.updateColumns(e))})}if(t.isDiscussion()){let e=this.gridData.getColumnMetadataByContentId(t.id);p.isUndefined(e)||this.gridData.initializeGroupsMemberships().then(()=>e.summary.$fetch().$asPromise()).then(()=>{this.updateColumns(e)})}if(t.isLtiLink()||t.isLtiPlacement()){var n;let e=this.gridData.getColumnMetadataByContentId(null!==(n=t.id)&&void 0!==n?n:"");e&&e.$fetch()}}),this.$scope.$on("bb-delete-column",(e,t)=>{let n=this.gridData.getColumn(t.id);this.deleteStudentColumnBorder(t);let i=this.$q.when();if(n instanceof J){let e=this.getAffectedColumns(n);i=this.$q.all(e.map(e=>e.data.$fetch().$asPromise())).then(()=>{e.forEach(e=>this.gridData.updateColumnByMetadata(e.data))})}n instanceof Q&&this.gridData.clearOverallColumn(),i.then(()=>{this.gridData.deleteColumnById(t.id),p.remove(this.filteredColumns,e=>e.data.id===t.id),this.$scope.$broadcast(z.COLUMN),this.timeout(()=>{let e=this.$element.find(":focus").parents("bb-grade-grid-column-header-reborn").data("col");p.isUndefined(e)||this.$scope.$broadcast(eO.T.FOCUSIN_CELL,{columnId:e.id})},this.$scope,0,!1)})}),this.$scope.$on("attempt-base-content-update",(e,t)=>{this.updateAttempBaseContent(t)}),this.$scope.$on("attempt-base-content-update-by-regrading",(e,t)=>{this.updateAttempBaseContent(t)})}updateAttempBaseContent(e){let t=this.gridData.getColumnMetadataByContentId(e.id);p.isUndefined(t)||t.$fetch().$asPromise().then(()=>{this.gridData.initializeGroupsMemberships().then(()=>t.summary.$fetch().$asPromise()).then(()=>{this.updateColumns(t)})})}updateColumns(e){let t=this.getAffectedColumnsBeforeEdit(e),n=this.gridData.updateColumnByMetadata(e);if(n instanceof J){let e=n.findAffectedColumns();e=p.unionBy(t,e,"id");let i=p.find(this.gridData.getColumns(),e=>e instanceof Q);i&&e.push(i),this.$q.all(e.map(e=>e.data.$fetch().$asPromise())).then(()=>{e.forEach(e=>this.gridData.updateColumnByMetadata(e.data)),this.$scope.$broadcast(z.COLUMN)})}else this.$scope.$broadcast(z.COLUMN)}setContainerHeight(){let e=nP(".course-grades-header-buttons-wrapper"),t=e.offset().top+e.outerHeight()+parseFloat(e.css("margin-bottom")),n=window.innerHeight-t;this.$element.find(".grade-grid-container").css("height",n)}getRowCount(){return this.studentsTotal}getGridData(){return this.gridData}getElement(){return this.$element}createMenuScope(e,t){let n=this.$scope.$new(!0);return n.adjustPosition=t=>{let n=e.left+t.width(),i=this.getGradeGridContainerElementRight();n>i&&(e.left-=n-i+(0,e3.I)()),t.offset(e)},n.positionAfter=t,n.attendanceColumnExists=this.isAttendanceExisting(),n.attendanceIsAvailable=this.attendanceIsAvailable,n}onClickAddColumnButton(e,t){let n=p.isUndefined(t)||"left"===t.position?"start":t.id,i=`grade-grid-add-column-menu-reborn-${n}`;if(this.isMenuExisting(i))return;let s=nP(e.target).offset();s&&(s.top+=30);let r=this.createMenuScope(s,n);this.popupMenu(i,nw,r),this.timeout(()=>{let n=this.getPopupMenu();n.on("keydown",i=>{i.keyCode===e9.hY||i.keyCode===e9.Mf?(n.data("destroy")(),nP(e.target).click(),nP(e.target).focus(),i.preventDefault(),i.stopPropagation()):e9.tH(i)&&this.$scope.$broadcast(z.FOCUS_CELL,void 0,t)}),this.getMenuitems().first().focus()},r,0,!1),e.preventDefault(),e.stopPropagation()}getPopupMenu(){return this.$element.find("[bb-grade-grid-menu-reborn]")}getMenuitems(){return this.getPopupMenu().find("li>:tabbable")}getGradeGridContainerElement(){return this.$element.children("#grade-grid-container")}getGradeGridContainerElementRight(){let e=this.getGradeGridContainerElement();return e.offset().left+e.width()}getGradeGridContainerElementBottom(){let e=this.getGradeGridContainerElement();return e.offset().top+e.height()}popupMenu(e,t,n,i){n.id=e,this.showMenu(t,n,i)}isMenuExisting(e){return!!this.$element.children(`#${e}`).length}showMenu(e,t,n){t.$applyAsync(()=>{this.$compile(e)(t,e=>{this.$element.append(e),p.isUndefined(n)||e.offset(n)})})}isAttendanceExisting(){return!!this.availableColumnSelectedOptions.find(e=>this.gridData.getColumnMetadata(e.id)&&this.gridData.getColumnMetadata(e.id).isAttendance())}get attendanceIsAvailable(){return this.$scope.attendanceIsAvailable&&this.$scope.attendanceIsAvailable()}setupOverallGradeHideMessageCallback(){this.$scope.$apply(()=>this.isOverallPanelShown=!1)}refreshColumns(e=p.noop){this.gridData.refreshAllColumns(),e(),this.$scope.$broadcast(z.COLUMN)}filterColumns(e,t,n){t&&(this.filteredColumns=e(n,t),this.$scope.$broadcast(z.COLUMN,this.filteredColumns))}updateFilteredColumns(){let e=p.find(this.filteredColumns,e=>e instanceof Q);this.filteredColumns&&!e&&(this.filteredColumns.push(p.find(this.availableColumnSelectedOptions,e=>e instanceof Q)),this.$scope.$broadcast(z.COLUMN,this.filteredColumns))}updateCategoryColumns(){let e=this.availableColumnSelectedOptions;this.filterColumns((e,t)=>p.filter(e,e=>e.filterByCategoryId(t)),this.ids,e)}handleMergedCourse(){this.mergedCourses.forEach(e=>{if(this.availableRowSelectedOptions){let t=p.find(this.availableRowSelectedOptions,t=>t.childCourseId===e.id);t||(e.ui.hidden=!0)}})}getCheckedMergeCourseIds(){return p.filter(this.mergedCourses,e=>e.ui.checked).map(e=>e.id)}getAvailableRowSelectedOptions(){return this.availableRowSelectedOptions}constructor(e,t,n,i,s,r,o,a,l,c,d,u,m,h,g,f,b){this.$compile=e,this.$element=t,this.$injector=n,this.$ngRedux=i,this.$q=s,this.$scope=r,this.$location=a,this.ultraState=l,this.gradeService=c,this.gradebookPermissionService=d,this.$attrs=u,this.bbLocalize=m,this.CourseModel=h,this.GradeColumn=g,this.timeout=f,this.toast=b,this.headerHeight=166,this.rowHeight=80,this.showFilterCriteria=!1,this.mergedCourses=[],this.studentsTotal=0,this.currentGradesMap=new Map,this.onUrlFiltersUpdated=()=>{let e=this.$location.search(),t=this.hasUrlFilters;this.hasUrlFilters=!!(e.memberId||e.gradebookColumnId||e.gradebookAssessmentType||e.gradebookCategoryId||e.courseGroupId||e.childCourseId),t!==this.hasUrlFilters&&this.setContainerHeight(),this.updateFilterConditions(e)},this.initialized=!1,O.ZU.OnWindow("resize",p.debounce(this.setContainerHeight.bind(this),100),r),this.setContainerHeight(),r.$on(nT.G.$locationChangeSuccess,()=>{this.timeout(()=>this.setContainerHeight(),this.$scope,50)}),this.mergedCourses.push(...this.$scope.mergedCourses),r.$on(eO.T.FOCUSIN_CELL,(e,t)=>{this.activeColumnId=t.columnId}),r.$on(eO.T.FOCUSOUT_CELL,(e,t)=>{this.activeColumnId=void 0}),r.$on(nT.N.$stateChangeStart,()=>this.changingState=!0),r.$on(nT.N.$stateChangeSuccess,()=>this.changingState=!1),this.subscribeToReduxChanges(),this.initialize().then(()=>{this.onUrlFiltersUpdated(),this.setupSearchFilterListener(),this.setupColumnChangeListener(),r.$on(nT.G.$locationChangeSuccess,this.onUrlFiltersUpdated)}),this.$scope.$on("bb-change-overall-panel-visibility",(e,t,n)=>{var i;this.gridData.course.id!==t&&this.gridData.course.isComplete()||((null===(i=this.setupOverallGradeMessageIsHiddenPreference)||void 0===i?void 0:i.value)==="true"?this.isOverallPanelShown=!1:this.isOverallPanelShown=n)}),this.$scope.$on("grade-notation-cache-update",(e,t)=>{this.updateOverallNotation()}),this.$scope.$on("bb-grades-schema-save",(e,t)=>{this.refreshSchema(t)}),O.ZU.OnRootScope(this.$scope,"bb-grade-input-save",(e,t,n,i)=>{let s=this.gridData.getColumn(n),r=s.data;r.$fetch().$asPromise().then(()=>r.summary.$fetch().$asPromise()).then(()=>{if(s instanceof J)return this.updateAffectedColumns(this.getAffectedColumns(s))}).then(()=>{if(i){let e=this.gridData.getRowByUserId(i);this.refreshDataCell(e,s)}else this.gridData.updateColumnByMetadata(r),this.$scope.$broadcast(z.COLUMN)})}),this.$scope.$on(nk.Ks,(e,t,n,i,s)=>{let r=this.gridData.getRowById(n),o=this.gridData.getColumn(t);this.refreshDataCell(r,o)}),this.$scope.$on("due-date-exception-updated",(e,t,n)=>{this.$scope.$broadcast(C.Lg,{columnId:t,userId:n,updateColumn:!0})}),this.$scope.$on("course.grades.gradebook-item.submission.grade-status-change",(e,t)=>{let n=this.gridData.getRowByUserId(t.userId),i=this.gridData.getColumn(t.columnId),s=i.data;s.$fetch().$asPromise().then(()=>s.summary.$fetch().$asPromise()).then(()=>{if(i instanceof J)return this.updateAffectedColumns(this.getAffectedColumns(i))}).then(()=>{i instanceof eo?this.refreshDataCells(this.gridData.getGroupIdUserIdMap()[t.groupId].map(e=>this.gridData.getRowByUserId(e)),[i]):t.updateColumn?(this.gridData.updateColumnByMetadata(s),this.$scope.$broadcast(z.COLUMN)):this.refreshDataCell(n,i)})}),this.$scope.$on("bb-reload-grid-view",e=>{this.$scope.$emit("grade-notation-update",this.gridData.course.id)}),this.$scope.$on(nA.CQ,()=>{this.refreshColumns()}),this.$scope.$on(is,(e,t)=>{this.refreshColumns(()=>{this.gridData.addUpdatedColumnFlag(t)})}),this.$scope.$on(nT.N.$stateChangeSuccess,(e,t,n,i)=>{i.name.endsWith(W.RK.GRADEBOOK_GRID_ADVANCED_FILTERS)&&this.updateFilterConditions(n)}),this.$scope.$on("$destroy",()=>{this.columnFiltersPresent()&&this.setUnfilteredColumns()}),this.canViewOverallPanel=d.canModify()}}nB=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([nD(0,(0,T.tB)("$compile")),nD(1,(0,T.tB)("$element")),nD(2,(0,T.tB)("$injector")),nD(3,(0,T.tB)("$ngRedux")),nD(4,(0,T.tB)("$q")),nD(5,(0,T.tB)("$scope")),nD(6,(0,T.tB)("$rootScope")),nD(7,(0,T.tB)("$location")),nD(8,(0,T.tB)(_.HV)),nD(9,(0,T.tB)(C.HV)),nD(10,(0,T.tB)(y.HV)),nD(11,(0,T.tB)("$attrs")),nD(12,(0,T.tB)(I.serviceName)),nD(13,(0,T.tB)(eM.H)),nD(14,(0,T.tB)(nx.serviceName)),nD(15,(0,T.tB)(w.H)),nD(16,(0,T.tB)(V.HV))],nB);class nL{constructor(e){this.$injector=e,this.restrict="E",this.template=nI,this.controller=nB,this.controllerAs="gg",this.scope={course:"&",columnMetadatas:"<columns",attendanceIsAvailable:"&?",mergedCourses:"<"}}}nL.$inject=["$injector"],m.module(nG,[no,ez,eJ,te,tv,tk,tV,tW,nb,th.e1,nS.e1,nE.e1,y.e1,V.e1,nC.e,_.e1,tS]).directive(nR,["$injector",e=>e.instantiate(nL)]);var nN=n(949237),nO=n(202784);let nM="ultra.directives.grade.studentListViewTable";class n$ extends nO.Component{render(){let{analyticsId:e,courseId:t,currentUserId:n}=this.props;return nO.createElement(x.Sp,{analyticsId:e,courseId:t,currentUserId:n})}}m.module(nM,[]).component("bbStudentListViewTable",(0,eK.G5)({Class:n$,attributes:["analyticsId"],bindingNames:["courseId","currentUserId"],renderLocalized:!0,withProvider:!0}));var nH=n(372457);function nF(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function nU(e,t){return function(n,i){t(n,i,e)}}let nV="ultra.components.directives.studentListView",n_=`<bb-student-list-view-table
                        analytics-id="components.directives.grades.studentListView"
                        course-id="studentListView.scope.courseId"
                        current-user-id="studentListView.currentUserId"
                      ></bb-student-list-view-table>`;class nq{constructor(e,t){this.scope=e,this.currentUserId=t.userId}}nq=nF([nU(0,(0,T.tB)("scope")),nU(1,(0,T.tB)(nH.HV))],nq);class nz{constructor(e){this.$injector=e,this.restrict="E",this.template=n_,this.scope={courseId:"<"},this.link=e=>{e.studentListView=this.$injector.instantiate(nq,{scope:e})}}}nz=nF([nU(0,(0,T.tB)("$injector"))],nz),angular.module(nV,[nM]).directive("bbStudentListView",["$injector",e=>e.instantiate(nz)]);let nW="ultra.directives.grade.overallGradeSetup";m.module(nW,[]).component("bbOverallGradeSetup",(0,eK.G5)({Class:({showFixedView:e,courseId:t,analyticsId:n,setupOverallGradeHideMessageCallback:i})=>nO.createElement(x.dX,{analyticsId:n,showFixedView:e,courseId:t,setupOverallGradeHideMessageCallback:i}),attributes:["analyticsId"],bindingNames:["showFixedView","courseId","setupOverallGradeHideMessageCallback"],renderLocalized:!0,withProvider:!0,withThemeProvider:!0}));let nj="ultra.components.directives.setupOverallGrade",nZ=`<bb-overall-grade-setup
                        analytics-id="components.directives.grade.overall-panel"
                        show-fixed-view="showFixedView"
                        course-id="courseId"
                        setup-overall-grade-hide-message-callback="setupOverallGradeHideMessageCallback">
                      </bb-overall-grade-setup>`;class nK{constructor(e){this.$injector=e,this.restrict="E",this.template=nZ,this.scope={showFixedView:"<",courseId:"<",setupOverallGradeHideMessageCallback:"&"}}}nK=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(r=(0,T.tB)("$injector"),function(e,t){r(e,t,0)})],nK),angular.module(nj,[nW]).directive("bbSetupOverallGrade",["$injector",e=>e.instantiate(nK)]);var nX=n(197923),nY=n(869721);let nQ="ultra.components.directives.bbUiIcon.small.FilterOptions";(0,np.n)(nY.j,nQ,"bbUiIconSmallFilterOptions");var nJ=n(71551),n0=n(723485),n1=n(389564),n2=n(304163);function n3(e,t){return function(n,i){t(n,i,e)}}let n9="ultra.components.directives.grade.gradebook-advanced-filters-ftue",n4=class{translate(e){return this.localizeService.translate({locale:this.localizeService.getLocale(this.$scope),key:e,noWrap:!0,noEscape:!0})}constructor(e,t,n){this.$scope=e,this.$q=t,this.localizeService=n,this.translate("components.directives.grade.course-grades-grader.ftue.advancedFilters.buttonAriaLabel").then(e=>this.buttonAriaLabel=e),this.translate("components.directives.grade.course-grades-grader.ftue.advancedFilters.title").then(e=>this.announcementTitle=e),this.translate("components.directives.grade.course-grades-grader.ftue.advancedFilters.content").then(e=>this.content=e),this.translate("components.directives.grade.course-grades-grader.ftue.advancedFilters.doneButtonText").then(e=>this.doneButtonText=e),this.translate("global.close").then(e=>this.closeLabel=e),this.translate("components.directives.grade.course-grades-grader.ftue.advancedFilters.moreInfoLinkText").then(e=>this.linkText=e),this.translate("components.directives.grade.course-grades-grader.ftue.advancedFilters.moreInfoLinkUrl").then(e=>this.linkHref=e)}};n4=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(0,O.wA)({moduleName:n9,componentName:"bbGradebookAdvancedFiltersFtue",template:n2,bindings:{},requireModules:[n1.e]}),n3(0,(0,T.tB)("$scope")),n3(1,(0,T.tB)("$q")),n3(2,(0,T.tB)(I.serviceName))],n4);var n7=n(138122);let n5="ultra.components.directives.bbUiIcon.medium.ContentView";(0,np.n)(n7.C,n5,"bbUiIconMediumContentView");var n6=n(45404),n8=n(613392);function ie(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function it(e,t){return function(n,i){t(n,i,e)}}let ii="ultra.directives.grade.courseGradesGrader",is="after-update-grades";(o=d||(d={}))[o.NeedsGrading=1]="NeedsGrading",o[o.NeedsPostingOrAllGraded=2]="NeedsPostingOrAllGraded",o[o.AllPosted=3]="AllPosted",o[o.NothingToGrade=4]="NothingToGrade",o[o.Restricted=5]="Restricted",o[o.Attendance=6]="Attendance",o[o.Other=7]="Other",(a=u||(u={})).List="list",a.Grid="grid";let ir=new Set([u.List,u.Grid]),io=u.List,ia=new Set([nX.H1.id,nX.VE.id]),il=nX.H1.id,ic="item";class id{getLastViewPreference(){this.isDesktop&&!this.isSmallScreen?this.loadUserPreference({key:this.lastViewGradebookPreferenceKey}).then(()=>{let e=this.lastViewPreference;this.view=(null==e?void 0:e.value)&&ir.has(e.value)?e.value:io}).catch(()=>{this.view=io}):this.view=io}get squareToggleValue(){return this.isGridView?u.Grid:u.List}set squareToggleValue(e){void 0!==this.lastViewGradebookPreferenceKey&&this.saveUserPreference({key:this.lastViewGradebookPreferenceKey,value:e}),this.isGridView||this.resetSortAttributes(),this.view=e}get areFilterResultsEmpty(){let e=this.filteredColumns.filter(e=>!(e instanceof Q||e instanceof Y));return this.hasUrlFilters&&(0===e.length||0===this.filteredRows.length||this.selectionNotAvailable)}clearSelection(){var e,t,n;l.USER===(null===(e=this.selectedItem)||void 0===e?void 0:e.type)?this.scope.$broadcast(z.ROW,this.filteredRows):(l.CATEGORY===(null===(t=this.selectedItem)||void 0===t?void 0:t.type)||l.COLUMN===(null===(n=this.selectedItem)||void 0===n?void 0:n.type))&&this.scope.$broadcast(z.COLUMN,this.filteredColumns),this.selectedItem=void 0,this.selectionNotAvailable=!1}itemSelected(e){switch(this.clearSelection(),this.selectedItem=e,e.type){case l.USER:return this.selectUser(e);case l.COLUMN:return this.selectColumn(e);case l.CATEGORY:return this.selectCategory(e)}}selectUser(e){let t=e.data.user.id,n=this.filteredRows.findIndex(e=>e.userId===t);return this.selectionNotAvailable=-1===n,-1!==n&&this.scope.$broadcast(eO.T.GRADEBOOK_USER_SELECTED,[t]),this.bbLocalize.formatUsernameSync(e.data.user,I.ILocaleUsernameFormat.Short,this.scope,{noWrap:!0,noEscape:!0})}selectColumn(e){let t=e.data.id,n=this.filteredColumns.findIndex(e=>e.id===t);return this.selectionNotAvailable=-1===n,-1!==n&&this.scope.$broadcast(eO.T.GRADEBOOK_COLUMN_SELECTED,[t]),e.data.getMetadata().columnName}selectCategory(e){let t=e.id,n=this.filteredColumns.findIndex(e=>e.data.gradebookCategoryId===t);return this.selectionNotAvailable=-1===n,-1!==n&&this.scope.$broadcast(eO.T.GRADEBOOK_CATEGORY_SELECTED,[t]),this.gradeSearchBox.getCategoryTitle(e.data.getMetadata().gradebookCategory)}typeAheadSearch(e){let t=this.gradeSearchBox.typeAheadSearch(e,this.filteredColumns,this.filteredRows);return this.$q.resolve(t)}renderMoreColumns(){if(this.currentlyLoading||this.firstRender){this.firstRender=!1;return}if(this.columns.length<this.visibleColumns.length){let e=this.addColumns();this.scope.$root.$broadcast(em.XC,"course-grades-grader",e)}}addColumns(){let e=this.$q.defer();return this.timeout(()=>{let t=this.columns.length;this.visibleColumns.length-t>this.GRADE_COLUMN_RENDER_LIMIT?this.columns.push(...this.visibleColumns.$slice(t,t+this.GRADE_COLUMN_RENDER_LIMIT)):this.columns.push(...this.visibleColumns.$slice(t,this.visibleColumns.length)),e.resolve()},this.scope,1e3),e.promise}showGradeListContainer(){return this.allCategoriesLoaded&&(this.columns.length>0&&!this.hasUrlFilters||this.hasUrlFilters)}updateFilteredCount(){this.filteredCount=this.mergedCourses.filter(e=>!0===e.ui.checked).length}calculateCanAddOverallGrade(e,t){if(!this.gradebookPermissionService.canModify()){this.showSetupOverallColumn=!1;return}let n=!t||this.course.id===t;n&&!this.course.isComplete()?this.showSetupOverallColumn=e:this.showSetupOverallColumn=!1}loadColumns(){this.currentlyLoading=!0;let e=this.grade.loadColumns(this.scope.courseGrades.course,!0,{expand:"collectExternalSubmissions",limit:this.GRADE_COLUMN_LOAD_LIMIT,offset:this.visibleColumns?this.visibleColumns.length:0});this.scope.$root.$broadcast(em.XC,"course-grades-grader",e),e.then(e=>e.attachRelatedContentsByScoreProviderHandle(A.u$1.Scorm)).then(e=>{this.removeNotVisibleColumns(e),this.visibleColumns&&this.visibleColumns.length>0?this.visibleColumns.concat(e):this.visibleColumns=e,this.totalColumnCount=e.paging.count,e.paging.nextPage?this.loadColumns():(this.currentlyLoading=!1,this.loadCategories(),this.grade.needsToSetupOverall(this.visibleColumns,this.course.id).then(e=>{this.calculateCanAddOverallGrade(e)}),this.visibleColumns.length>this.GRADE_COLUMN_RENDER_LIMIT?this.columns=this.visibleColumns.$slice(0,this.GRADE_COLUMN_RENDER_LIMIT):this.columns=this.visibleColumns,this.expandColumnSummaries(this.visibleColumns))})}expandColumnSummaries(e){let t=e.paging&&e.paging.count||1e3,n=this.course.gradebook.summaries.expandingColumns(e),i=this.$q.all(p.range(0,t,1e3).map(e=>n.$fetch({limit:1e3,offset:e,excludeCalculations:!0}).$asPromise())).then(()=>e);return i}loadCategories(){this.categoryService.getOrLoadCategoriesForCourse(this.scope.courseGrades.course.id).then(e=>{e.forEach(e=>{this.categoryTitleMap[e.id]=e.title}),this.visibleColumns&&this.visibleColumns.forEach(e=>{e.gradebookCategoryId&&(e.categoryTitle=this.categoryTitleMap[e.gradebookCategoryId])}),this.allCategoriesLoaded=!0})}loadMergedCourse(){this.entitlementService.isEntitled(M.s7.ViewChildCourse,this.course.id)&&this.course.getChildrenCourses().then(e=>{let t=p.sortBy(e,e=>e.childCourse.name);this.mergedCourses.push(...t),this.mergedCourses.forEach(e=>{e.ui={checked:!1,hidden:!1}})})}setupColumnUpdateResponder(){this.scope.$on(C.JH,(e,t)=>{this.replaceOrInsertColumnWrapper(t),t.summary.$fetch()}),this.scope.$on("content-update",(e,t)=>{if(t.isScorm()){let e=t.getScormGradebookItems();e.forEach(e=>{let n=this.course.gradebook.columns.$buildRaw(e.gradingColumn);n.ui={content:t},this.replaceOrInsertColumnWrapper(n),n.summary.$fetch()})}}),this.scope.$on("bb-change-overall-panel-visibility",(e,t,n)=>{this.calculateCanAddOverallGrade(n,t)}),this.scope.$on("$stateChangeStart",(e,t,n,i)=>{if(i.name.indexOf("attendance")>-1){let e=this.visibleColumns.find(e=>e.isAttendance());e?e.$fetch().$asPromise().then(()=>this.removeNotVisibleColumns(this.columns)):this.loadColumns()}}),this.scope.$on(nN.UM,(e,t)=>{this.grade.loadColumns(this.scope.courseGrades.course,!0).then(e=>{this.visibleColumns=e,this.visibleColumns.forEach(e=>e.summary.$fetch()),this.scope.$broadcast(is,t)})})}replaceOrInsertColumnWrapper(e){let t=this.replaceOrInsertColumn(this.visibleColumns,e);this.columns!==this.visibleColumns&&t<this.columns.length&&this.replaceOrInsertColumn(this.columns,e)}replaceOrInsertColumn(e,t){let n=p.findIndex(e,e=>e.id===t.id);return n>-1?e[n]=t:(t.positionBeforeId?n="start"===t.positionBeforeId.toLowerCase()?0:p.findIndex(e,e=>t.positionBeforeId===e.id):t.positionAfterId&&("start"===t.positionAfterId.toLowerCase()?n=0:"end"===t.positionAfterId.toLowerCase()?n=e.length:(n=p.findIndex(e,e=>t.positionAfterId===e.id))>=0&&n++),n>=e.length||n<0?e.push(t):e.splice(n,0,t),this.totalColumnCount++),n>-1?n:0}_removeColumn(e,t){let n=p.findIndex(e,e=>e.id===t.id);n>-1&&e.splice(n,1)}removeNotVisibleColumns(e){let t=0;e.forEach((n,i)=>{!1===n.visibleInBook&&(e.splice(i,1),t++,n.isAttendance()&&(this.scope.$broadcast("bb-delete-column",n),this.scope.$root.$broadcast("bb-reload-grid-view"),this.attendanceIsAvailable=!1))}),e.paging.count=e.paging.count-t}setupColumnDeleteResponder(){this.scope.$on("bb-delete-column",(e,t)=>{this.removeColumn(t),t.externalGrade&&(this.scope.$root.$broadcast("bb-reload-grid-view"),this.scope.$root.$broadcast("bb-change-overall-panel-visibility",t.courseId,!0))})}removeColumn(e){if(this._removeColumn(this.visibleColumns,e),this.columns!==this.visibleColumns&&this._removeColumn(this.columns,e),this.totalColumnCount--,e&&e.contentId){let t=this.visibleColumns&&this.visibleColumns.find(t=>t.contentId===e.contentId);t&&this.removeColumn(t)}}setupViewChange(){this.scope.$watch("courseGradesGrader.view",()=>{var e;let t=!(null===(e=this.$location.search())||void 0===e?void 0:e.gradebookView);this.ultraState.search("gradebookView",this.view,{location:!t||"replace",notify:!1}),this.scope.$root.$broadcast(eO.T.GRADEBOOK_CLEAR_SEARCHBOX_SELECTION,!0)}),this.scope.$on(nT.G.$locationChangeSuccess,this.handleLocationChanged)}setupListViewTypeChange(){this.scope.$watch("courseGradesGrader.currentTabId",()=>{this.ultraState.search("listViewType",this.currentTabId)})}setupBreakpointChange(){O.ZU.OnWindow("resize",p.debounce(()=>{h._H()&&this.isGridView&&(this.view=u.List)},100),this.scope)}setUpLastViewGradebookPreferenceKey(){let e=this.scope.courseGrades.course.id.replace(/_/g,".");this.lastViewGradebookPreferenceKey="grade.last.gradebook.view"+e}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({lastViewPreference:A.Ys.userPreference.getUserPreferenceByKey(e,this.lastViewGradebookPreferenceKey)}),e=>({loadUserPreference:t=>e(A.Nwg.userPreference.loadUserPreference({...t})),saveUserPreference:t=>e(A.Nwg.userPreference.persistUserPreference(t))}))(this);this.scope.$on("$destroy",e)}get isSmallScreen(){return h._H()}get isGridView(){return this.view===u.Grid}get isGradableItemsListView(){return this.view===u.List&&this.currentTabId===nX.H1.id}get isStudentListView(){return this.view===u.List&&this.currentTabId===nX.VE.id}resetSortAttributes(){this.sortAttributes={columnName:ic,sortType:n8.E.NONE},this.sortColumnsByPosition()}sortColumnsByPosition(){this.visibleColumns&&this.visibleColumns.sort((e,t)=>e.position-t.position)}onClickSortIcon(e){this.sortAttributes=(0,D.z)(e,this.sortAttributes),this.sortColumnByHeaderName()}sortColumnByHeaderName(){var e,t;if(this.sortColumnsByPosition(),(null===(e=this.sortAttributes)||void 0===e?void 0:e.sortType)===n8.E.ASCENDING||(null===(t=this.sortAttributes)||void 0===t?void 0:t.sortType)===n8.E.DESCENDING)switch(this.sortAttributes.columnName){case ic:this.sortColumnByFieldName(this.sortAttributes.sortType);break;case"dueDate":this.sortColumnByDueDate(this.sortAttributes.sortType);break;case"gradingStatus":this.sortColumnByStatus(this.sortAttributes.sortType);break;case"post":this.sortColumnByPost(this.sortAttributes.sortType)}this.setPagingDataToColumn()}setPagingDataToColumn(){this.visibleColumns.length>this.GRADE_COLUMN_RENDER_LIMIT?(this.columns.$clear(),this.columns.push(...this.visibleColumns.$slice(0,this.GRADE_COLUMN_RENDER_LIMIT))):this.columns=this.visibleColumns}sortColumnByFieldName(e){this.visibleColumns.sort((t,n)=>e===n8.E.ASCENDING?t.columnName.localeCompare(n.columnName):n.columnName.localeCompare(t.columnName))}sortColumnByDueDate(e){let t=[],n=[],i=[];this.visibleColumns.forEach(e=>{e.isAttendance()?t.push(e):e.dueDate?i.push(e):n.push(e)}),e===n8.E.ASCENDING?(i.sort((e,t)=>e.dueDate.getTime()-t.dueDate.getTime()),this.visibleColumns.$clear(),this.visibleColumns.push(...i,...t,...n)):(i.sort((e,t)=>t.dueDate.getTime()-e.dueDate.getTime()),this.visibleColumns.$clear(),this.visibleColumns.push(...n,...t,...i))}sortColumnByStatus(e){this.visibleColumns.sort((t,n)=>{let i=this.getStatusPriorityFromSummary(t),s=this.getStatusPriorityFromSummary(n);if(i===d.NeedsGrading&&s===d.NeedsGrading){let i=0,s=0;return i=t.isCollectExternalSubmissions()?this.getNumberEligibleToBeGradedExternalSubmissions(t):t.isOffline()?t.summary.numStudentsNeedsGrading:this.getNumberOfSubmissionsNeedsGrading(t),s=n.isCollectExternalSubmissions()?this.getNumberEligibleToBeGradedExternalSubmissions(n):n.isOffline()?n.summary.numStudentsNeedsGrading:this.getNumberOfSubmissionsNeedsGrading(n),e===n8.E.ASCENDING?i-s:s-i}return e===n8.E.ASCENDING?i-s:s-i})}getNumberOfSubmissionsNeedsGrading(e){return null==e.summary.numSubmissionsNeedsGrading?e.summary.numSubmissionsNeedsReconciling:e.summary.numSubmissionsNeedsGrading}getNumberEligibleToBeGradedExternalSubmissions(e){return m.isUndefined(e.summary.numGroupsNeedsGrading)?e.summary.numStudentsEligibleToBeGradedExternalSubmission:e.summary.numGroupsEligibleToBeGradedExternalSubmission}getStatusPriorityFromSummary(e){if(e.isAttendance())return d.Attendance;let t=e.summary.getStatus();if(e.isCollectExternalSubmissions()&&(t===M.MN.NeedsPosting||t===M.MN.NothingToGrade||t===M.MN.AllGraded)&&this.getNumberEligibleToBeGradedExternalSubmissions(e)>0)return d.NeedsGrading;switch(t){case M.MN.NeedsGrading:return d.NeedsGrading;case M.MN.NeedsPosting:case M.MN.AllGraded:return d.NeedsPostingOrAllGraded;case M.MN.AllPosted:return d.AllPosted;case M.MN.NothingToGrade:return d.NothingToGrade;case M.MN.Restricted:return d.Restricted;default:return d.Other}}sortColumnByPost(e){let t=[],n=[];this.visibleColumns.forEach(e=>{let i=this.gradebookPermissionService.canPostGrades(e.courseId,e);!e.isCalculated()&&!this.course.isComplete()&&e.summary.hasGradesToPost()&&i?n.push(e):t.push(e)}),e===n8.E.ASCENDING?(n.sort((e,t)=>e.summary.totalNumberOfGradesToPost()-t.summary.totalNumberOfGradesToPost()),this.visibleColumns.$clear(),this.visibleColumns.push(...n,...t)):(n.sort((e,t)=>t.summary.totalNumberOfGradesToPost()-e.summary.totalNumberOfGradesToPost()),this.visibleColumns.$clear(),this.visibleColumns.push(...t,...n))}constructor(e,t,n,i,s,r,o,a,c,d,u,p,m){this.$modal=e,this.$location=t,this.scope=n,this.$q=i,this.entitlementService=s,this.grade=r,this.gradebookPermissionService=o,this.categoryService=a,this.ultraState=c,this.timeout=d,this.gradeSearchBox=u,this.bbLocalize=p,this.$ngRedux=m,this.GRADE_COLUMN_LOAD_LIMIT=1e3,this.GRADE_COLUMN_RENDER_LIMIT=50,this.currentlyLoading=!1,this.categoryTitleMap={},this.allCategoriesLoaded=!1,this.isDesktop=!1,this.firstRender=!0,this.canDownloadGradebook=!1,this.canUploadGradebook=!1,this.showFilterCriteriaSettings=!1,this.mergedCourses=[],this.filteredColumns=[],this.filteredRows=[],this.advancedFiltersEmptyResults=!1,this.checkForURLFilters=()=>{let e=this.$location.search();this.hasUrlFilters=!!(e.memberId||e.gradebookColumnId||e.gradebookAssessmentType||e.gradebookCategoryId||e.courseGroupId||e.childCourseId)},this.changeListViewType=e=>{ia.has(e)&&(this.currentTabId=e,this.resetSortAttributes())},this.handleLocationChanged=()=>{var e;let t=null===(e=this.$location.search())||void 0===e?void 0:e.gradebookView;ir.has(t)&&(this.view=t)};let h=c.params.gradebookView,g=c.params.listViewType;this.resetSortAttributes(),this.setUpLastViewGradebookPreferenceKey(),this.subscribeToReduxChanges(),this.isDesktop=ef.Z.detect().desktop(),ir.has(h)?this.view=h:this.getLastViewPreference(),ia.has(g)?this.currentTabId=g:this.currentTabId=il,this.checkForURLFilters(),n.$on(nT.G.$locationChangeSuccess,this.checkForURLFilters),this.setupColumnUpdateResponder(),this.setupColumnDeleteResponder(),this.setupViewChange(),this.setupBreakpointChange(),this.setupListViewTypeChange(),this.userHasViewGradebookPermission=this.gradebookPermissionService.canView(),n.$on("bb-update-category-icon",(e,t,n)=>{t.categoryTitle=this.categoryTitleMap[n]}),n.$on(nA.CQ,()=>{this.expandColumnSummaries(this.visibleColumns)}),n.$on(eO.T.GRADEBOOK_CLEAR_SEARCHBOX_SELECTION,e=>{this.updateFilteredCount()}),n.$on(eO.T.ADVANCED_FILTERS_COLUMNS,(e,t)=>{var n,i;this.filteredColumns=t,(l.CATEGORY===(null===(n=this.selectedItem)||void 0===n?void 0:n.type)||l.COLUMN===(null===(i=this.selectedItem)||void 0===i?void 0:i.type))&&this.itemSelected(this.selectedItem)}),n.$on(eO.T.ADVANCED_FILTERS_ROWS,(e,t)=>{var n;this.filteredRows=t,l.USER===(null===(n=this.selectedItem)||void 0===n?void 0:n.type)&&this.itemSelected(this.selectedItem)}),O.ZU.OnRootScope(n,C.Lg,(e,t)=>{let n=this.visibleColumns.find(e=>e.id===t.columnId);n&&(n.summary.$fetch(),this.scope.$root.$broadcast("bb-update-summary"),this.scope.$root.$broadcast("bb-update-category-icon",n),this.replaceOrInsertColumnWrapper(n),n.$fetch())}),this.canUploadGradebook=o.canModify(),this.scope.courseGrades.course.$then(e=>{e.isToolAvailable("bb-attendance").then(e=>{this.attendanceIsAvailable=e}),this.loadColumns(),this.course=e,this.loadMergedCourse(),this.canDownloadGradebook=o.canViewGrades()&&this.entitlementService.isEntitled("course.gradebook-data.export.EXECUTE",this.course.id)})}}id=ie([it(0,(0,T.tB)("$modal")),it(1,(0,T.tB)("$location")),it(2,(0,T.tB)("scope")),it(3,(0,T.tB)("$q")),it(4,(0,T.tB)(N.HV)),it(5,(0,T.tB)(C.HV)),it(6,(0,T.tB)(y.HV)),it(7,(0,T.tB)(S.HV)),it(8,(0,T.tB)(_.HV)),it(9,(0,T.tB)(w.H)),it(10,(0,T.tB)(eu)),it(11,(0,T.tB)(I.serviceName)),it(12,(0,T.tB)("$ngRedux"))],id);class iu{constructor(e){this.$injector=e,this.restrict="E",this.template=n6,this.scope=!0,this.link=e=>{e.courseGradesGrader=this.$injector.instantiate(id,{scope:e})}}}iu=ie([it(0,(0,T.tB)("$injector"))],iu),m.module(ii,[eh.e1,R,E.e1,C.e1,y.e1,I.moduleName,em.e1,eg.e1,nG,nX.e1,nV,nj,n0.e,nu.e,nQ,nJ.e,ed,n9,n5]).directive("bbCourseGradesGrader",["$injector",I.serviceName,(e,t)=>(t.loadBundle("components/directives/grade/course-grades-grader"),e.instantiate(iu))])},153504:function(e,t,n){"use strict";n.d(t,{BY:function(){return d},mV:function(){return u}});var i=n(211796),s=n(579188),r=n(247126),o=n(822658),a=n(291146),l=n(539210);function c(e,t){return function(n,i){t(n,i,e)}}let d="course-grades-student-tab",u="CourseGradebookStudentTitleHandler";class p extends s.IG{process(e,t,n){let i=this.getTabKey(t);return this.bbLocalize.translate({key:i,locale:this.bbLocalize.getLocale(this.$rootScope)}).then(e=>{this.$rootScope.index.title=[e,n,this.currentCourse.course.name].filter(e=>!!e).join(" / ")})}getTabKey(e){if(!e)return"base.nav.grades";switch(e){case l.$O.Grades:return"base.nav.grades";case l.$O.Progress:return"course.content.progress.pageTitle";case l.$O.Notes:return"gradebook.studentTabs.notes"}}constructor(e,t,n,i,s,r){super(e,t,n,i,s),this.$injector=e,this.$rootScope=t,this.ultraState=n,this.bbLocalize=i,this.currentCourse=s,this.$q=r}}p=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([c(0,(0,i.tB)("$injector")),c(1,(0,i.tB)("$rootScope")),c(2,(0,i.tB)(r.HV)),c(3,(0,i.tB)(a.serviceName)),c(4,(0,i.tB)(o.HV)),c(5,(0,i.tB)("$q"))],p),(0,s.XN)(u,p)},339409:function(e,t,n){"use strict";n.d(t,{e1:function(){return S}}),n(106257);var i,s,r=n(464027),o=n(501),a=n(63001),l=n(104485),c=n(512923),d=n(495175),u=n(291146),p=n(372457),m=n(408027),h=n(100079),g=n(445218),f=n(539210),b=n(367033),v=n(203179),y=n(939990);n(405116);var C=n(308322);let S="ultra.grade.display";(s=i||(i={})).AttemptStatus="AttemptStatus",s.FinalBase="FinalBase",s.Column="Column",s.Course="Course",s.GradeColor="GradeColor";class E{isSchemaTypeComplete(){var e;return(null===(e=this.schema)||void 0===e?void 0:e.scaleType)===m.aQo.Complete}isStatusComplete(){var e,t,n,i,s;return this.isStudent?!!(null===(i=this.scope.gradeDetail)||void 0===i?void 0:i.displayGrade.grade)&&!(null===(s=this.scope.gradeDetail)||void 0===s?void 0:s.displayGrade.scoredByAutomaticZero):(null===(e=this.scope.gradeDetail)||void 0===e?void 0:null===(t=e.isGraded)||void 0===t?void 0:t.call(e))&&!(null===(n=this.scope.gradeDetail)||void 0===n?void 0:n.isPastDueZero())}setFullDisplayGrade(){let e;if(this.schema&&this.schema.scaleType&&(this.schema.scaleType===m.aQo.Tabular||this.schema.scaleType===m.aQo.Text||this.schema.scaleType===m.aQo.Complete))this.fullDisplayGrade=this.scope.showNotGraded&&this.scope.showNotGraded()?E.NO_GRADE_DISPLAY:this.schemaGrade||E.NO_GRADE_DISPLAY;else{var t;if(e=this.scope.showNotGraded&&this.scope.showNotGraded()?E.NO_GRADE_DISPLAY:this.getSchemaGrade(),this.shouldShowPointsPossible()){let t="components.directives.grade.display-grade.";t+=i.Course===this.scope.gradeType?"course-score":"score",this.bundlePromise.then(()=>{var n;this.fullDisplayGrade=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:t,params:{grade:e,possible:h.m(null!==(n=this.scope.gradeDetail&&this.scope.gradeDetail.pointsPossible)&&void 0!==n?n:this.scope.column.possible,2)},noWrap:!0,noEscape:!0})})}else(null===(t=this.schema)||void 0===t?void 0:t.scaleType)===m.aQo.Percent&&e!==E.NO_GRADE_DISPLAY?this.bundlePromise.then(()=>{this.fullDisplayGrade=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"components.directives.grade.display-grade.percent",params:{grade:e},noWrap:!0,noEscape:!0})}):this.fullDisplayGrade=e}}get attempt(){return this.scope.attempt&&this.scope.attempt()||this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)}convertGrade(e){try{let t=e.replace(/[^0-9.,]/g,"");return this.localize.parseNumberSync(t)}catch(e){return null}}getSchemaGrade(){let e;return null!=(e=null==this.schemaGradeValue?this.convertGrade(this.schemaGrade):h.m(this.schemaGradeValue,2))&&this.localize.formatNumberSync(e,this.scope,{maximumFractionDigits:d.UF.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL})||E.NO_GRADE_DISPLAY}shouldShowPointsPossible(){var e;return(null===(e=this.schema)||void 0===e?void 0:e.scaleType)===m.aQo.Score&&(m.eNW.NonCalculated===this.scope.column.calculationType||this.scope.gradeDetail&&this.scope.gradeDetail.pointsPossible>0||this.scope.column.possible>0)}getCourseColorClass(){return this.courseColorClass}noGradeToDisplay(){return this.fullDisplayGrade===E.NO_GRADE_DISPLAY}getNoGradeDisplay(){return E.NO_GRADE_DISPLAY}shouldShowRubricButton(){return this.scope.showRubricButton&&this.scope.showRubricButton()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()}shouldShowRubricDiv(){return this.scope.showRubricDiv&&this.scope.showRubricDiv()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()}shouldShowRubricEvaluation(){return this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()&&null!=this.attempt&&this.attempt.isCompleted()&&!this.scope.gradeDetail.isOverrideGrade()}constructor(e,t,n,s,o,l,c,d,u,p){this.scope=e,this.attrs=t,this.$q=n,this.$injector=s,this.gradebookPermissionService=l,this.localize=c,this.context=d,this.schemaService=u,this.contextUser=p,this.fullDisplayGrade=E.NO_GRADE_DISPLAY,this.bundlePromise=c.loadBundle("components/directives/grade/display-grade"),this.courseColorClass=e.courseColorClass,this.cursorPointer=e.cursorPointer&&e.cursorPointer(),this.cursorDefault=e.cursorDefault&&e.cursorDefault(),this.isStudent=p.userModel.isStudent(),this.isStudent||l.canViewGrades(this.scope.course&&this.scope.course().id)?(this.scope.$watch("::column",e=>{if(e){let t=e=>{let t;let n=this.scope.$watch("gradeDetail",r=>{r&&(this.schemaGrade=o.getGradeToDisplay(r.displayGrade,this.scope,this.schema.scaleType),this.setFullDisplayGrade(),(i.GradeColor===this.scope.gradeType||i.FinalBase===this.scope.gradeType)&&(this.gradeDisplayItem=s.instantiate(a.G,{gradeDetail:r,scope:this.scope}),this.scope.$watch("::column",t=>{t&&this.gradeDisplayItem.init(t,e).then(()=>{this.gradeDisplayItem.displayGrade=this.scope.showNotGraded&&this.scope.showNotGraded()?null:r.displayGrade,this.gradeDisplayItem.displayValue&&(this.colorClass=this.gradeDisplayItem.getGradeColor())})})),n(),t())});t=this.scope.$watch("summary",e=>{if(this.colorClass="na",e){if(this.schemaGrade=e.averageGradeForStudentsSchemaValue,this.schemaGradeValue=e.averageGradeForStudents,this.setFullDisplayGrade(),i.FinalBase===this.scope.gradeType&&!r.isUndefined(e.averageGradeForStudents)){var t,s;let n=h.m(null!==(s=null===(t=this.scope.gradeDetail)||void 0===t?void 0:t.pointsPossible)&&void 0!==s?s:this.scope.column.possible,2);this.colorClass=o.getPercentileColor(o.pointToPercentage(e.averageGradeForStudents,n))}n()}},!0)};this.scope.schema?(this.schema=this.scope.schema,t(this.scope.schema)):u.loadGradeSchema(e).then(e=>{this.schema=e,t()})}}),i.AttemptStatus===this.scope.displayType&&(this.courseColorClass="na",this.attempt?this.attempt.isNeedsGrading()?this.attemptStatus="components.directives.grade.display-grade.pending-grade":this.attempt.isInProgress()&&(this.attemptStatus="components.directives.grade.display-grade.NA"):this.attemptStatus="components.directives.grade.display-grade.NA")):(this.fullDisplayGrade=this.attemptStatus=E.NO_GRADE_DISPLAY,this.colorClass="na")}}E.NO_GRADE_DISPLAY="--",E.$inject=["scope","attrs","$q","$injector",d.HV,l.HV,u.serviceName,o.HV,c.HV,p.HV];class I{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="E",this.scope={attempt:"&?",gradeDetail:"=",summary:"=",column:"=",schema:"=?",displayType:"@",finalGrade:"&?",translateKey:"@",courseColorClass:"=",isGroupGradeMultiple:"&?",showNotGraded:"&?",overallGradePeekSref:"@?",showRubricButton:"&?",showRubricDiv:"&?",cursorPointer:"&?",cursorDefault:"&?",course:"&?"},this.link=(e,t,n)=>{e.displayGrade=this.$injector.instantiate(E,{scope:e,attrs:n}),e.gradeType=function(e){if(e)return Object.values(i).find(t=>t.toLowerCase()===e.toLowerCase())}(e.displayType)||i.Column,t.append(this.$compile(function(e){switch(e){case i.AttemptStatus:return b;case i.FinalBase:return v;case i.Column:return y;case i.GradeColor:return C}}(e.gradeType))(e))}}}I.$inject=["$injector","$compile"];let w={Class:f.XW,bindingNames:["gradeValue","isComplete","totalPoints","onBlur","initialHasFocus","isEditable","isRubricEnabled","canOpenRubricEval","ariaCompleteIncompleteLabel"],attributes:["analyticsId"],renderLocalized:!0,withProvider:!0};r.module(S,[d.e1,l.e1]).directive("bbDisplayGrade",["$injector",e=>e.instantiate(I)]).component("bbCompleteIncompleteGradePill",(0,g.G5)(w))},897349:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});let i="rb_grade_grid_",s={REFRESH_OVERALL_EDITOR:`${i}refresh_overall_editor`,REFRESH_CELL_EDITOR:`${i}refresh_cell_editor`,SELECT_GROUP:`${i}select_group`,REFRESH:`${i}refresh`,FOCUSIN_CELL:`${i}focusin`,FOCUSOUT_CELL:`${i}focusout`,ENTER_EDITOR:`${i}enter_editor`,CLOSE_EDITOR:`${i}close_editor`,ADVANCED_FILTERS_COLUMNS:`${i}advanced-filter-columns`,ADVANCED_FILTERS_ROWS:`${i}advanced-filter-rows`,GRADEBOOK_CLEAR_SEARCHBOX_SELECTION:`${i}gradebook-clear-searchbox-selection`,GRADEBOOK_USER_SELECTED:`${i}gradebook-user-selected`,GRADEBOOK_COLUMN_SELECTED:`${i}gradebook-column-selected`,GRADEBOOK_CATEGORY_SELECTED:`${i}gradebook-category-selected`}},790461:function(e,t,n){"use strict";n.d(t,{e1:function(){return P},qt:function(){return I}}),n(273452),n(106257),n(783822),n(296457);var i=n(276635),s=n(464027),r=n(291146),o=n(748157),a=n(283481),l=n(887545),c=n(100079),d=n(63001),u=n(495175),p=n(387679),m=n(30799),h=n(606592),g=n(168132),f=n(305233),b=n(915047),v=n(247126),y=n(396922),C=n(211796),S=n(408027),E=n(730346),I=n(962445),w=n(880978),A=n(951248),k=n(118717),x=n(625506);function T(e,t){return function(n,i){t(n,i,e)}}let P="ultra.components.directives.grade.gradeInput";class D{buildGradeDialog(){this.gradeDialog={isVisible:!1,textContent:{title:this.getStringFromLocale("components.directives.grade.grade-input.clearConfirmationDialog.title"),body:this.getStringFromLocale("components.directives.grade.grade-input.clearConfirmationDialog.body"),secondaryButtonText:this.getStringFromLocale("components.directives.grade.grade-input.clearConfirmationDialog.secondaryButtonText"),primaryButtonText:this.getStringFromLocale("components.directives.grade.grade-input.clearConfirmationDialog.primaryButtonText")},onDismiss:this.onDismissCallback,onSuccess:this.onSuccessCallback}}openOverrideDialog(){var e;if(!(null===(e=this.modalInstance)||void 0===e?void 0:e.opened)){let e=this.scope.gradeDetail?this.scope.gradeDetail.getScore():"",t=this.getTruncatedPointsPossible(),n=this.bbLocalize.parseNumberSync(this.gradeDisplayItem.displayValue),i=c.m(this.grade.pointToPercentage(n,t),2);return this.overrideDialogScope.closeModal=this.closeModal,this.overrideDialogScope.grade=i,this.modalInstance=this.$modal.open({template:I,scope:this.overrideDialogScope,resolve:{translations:[r.serviceName,e=>e.loadBundle("components/directives/grade/grade-input")]}}),this.modalInstance.result.then(()=>(this.timeout(()=>{x("#performanceCodes-"+this.id).remove()},this.scope,0,!1),this.validateAndSave()),()=>{this.gradeDisplayItem.displayValue=e,this.onDismissCallback()}).finally(()=>{this.modalInstance.opened=null})}}shouldShowModal(){var e;return(null===(e=this.scope.column)||void 0===e?void 0:e.externalGrade)&&this.isScoreSchema()&&this.isFormValid()&&this.isFormDirty()&&this.scoreHasChanged()&&""!==this.gradeDisplayItem.displayValue&&!this.isGradesComplete()}getStringFromLocale(e){return this.bbLocalize.translateSync({key:e,locale:this.bbLocalize.getLocale(this.scope)})}isFormDirty(){return this.form[this.id].$dirty}isFormValid(){return this.form[this.id].$valid}repositionGradeNotationDropdown(e){let t=this.inputElement.closest(this.gradeNotationsWrapperSelector).height(),n=e.position()&&e.position().top,i=n+e.height();if(this.scope.offsetTop&&this.scope.offsetTop()){let t=n+2*this.scope.offsetTop();e.css("top",t),e.addClass("show"),i=t+e.height()}i>t&&this.scope.$root.$broadcast("performance-dropdown-container-height-update",i-t+30)}showGradeNotationDropdown(){x("#performanceCodes-"+this.id).length>0&&x("#performanceCodes-"+this.id).remove();let e=this.$compile(E)(this.scope);this.inputElement.closest(this.gradeNotationsWrapperSelector).append(e),this.scope.offsetTop&&this.isWrapperDivClickHandled&&this.repositionGradeNotationDropdown(e),e.on("keydown",t=>{if(t.keyCode!==h.Mf||t.shiftKey)t.keyCode===h.hY&&(t.preventDefault(),t.stopPropagation(),this.inputElement.trigger("click.fndtn.dropdown"),this.timeout(()=>{x("#performanceCodes-"+this.id).remove()},this.scope,0,!1),this.$q.when(this.validateAndSave()).finally(()=>{this.gradeDialog.isVisible||this.setFocusOnNextTabbableElement()}));else{let n=e.find(":tabbable");n.last().is(":focus")&&(t.preventDefault(),n.eq(0).focus())}}),this.element.foundation()}refreshInputBox(){var e,t,n,i,s;let r=this.scope.gradeDetail&&this.scope.gradeDetail.id,o=this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade,a=this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress(),l=this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple(),c=this.scope.column.gradingSchemaId;this.gradeDisplayItem.gradeDetail=this.scope.gradeDetail,this.gradeDisplayItem.schema.id!==c&&this.gradeDisplayItem.init(this.scope.column),r&&o&&!this.scope.gradeDetail.isExempt?(this.gradeDisplayItem.displayGrade=o,this.updateGradeColor()):a&&!this.scope.gradeDetail.isExempt?(this.gradeDisplayItem.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.in_progress"}),this.gradeDisplayItem.parsedValue="",this.updateGradeColor()):l&&!this.scope.gradeDetail.isExempt?(this.gradeDisplayItem.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.multiple"}),this.gradeDisplayItem.parsedValue="",this.updateGradeColor()):o&&!this.scope.gradeDetail.isExempt?this.gradeDisplayItem.displayGrade=o:l&&this.scope.gradeDetail.isExempt?(this.gradeDisplayItem.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.noValue"}),this.gradeDisplayItem.parsedValue="",this.updateGradeColor()):(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.isExempt)&&((null===(t=this.scope.gradeDetail)||void 0===t?void 0:null===(n=t.displayGrade)||void 0===n?void 0:n.isOverride)||!(null===(i=this.scope.gradeDetail)||void 0===i?void 0:null===(s=i.displayGrade)||void 0===s?void 0:s.scoredByAutomaticZero))?(this.gradeDisplayItem.displayGrade=o,this.updateGradeColor()):this.gradeDisplayItem.displayGrade=null}isSchemaTypeLetterOrPercentage(){var e,t,n,i;return(null===(e=this.gradeDisplayItem)||void 0===e?void 0:null===(t=e.schema)||void 0===t?void 0:t.scaleType)===S.aQo.Percent||(null===(n=this.gradeDisplayItem)||void 0===n?void 0:null===(i=n.schema)||void 0===i?void 0:i.scaleType)===S.aQo.Tabular}isSchemaTypeComplete(){var e,t;return(null===(e=this.gradeDisplayItem)||void 0===e?void 0:null===(t=e.schema)||void 0===t?void 0:t.scaleType)===S.aQo.Complete}shouldShowTotalPoints(){var e,t,n,i,s;return(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.isExempt)?!((null===(t=this.scope.gradeDetail)||void 0===t?void 0:t.isExempt)&&this.isMultipleShown()||this.scope.column.isScorm()&&!this.isScoreSchema())&&(null===(n=this.gradeDisplayItem)||void 0===n?void 0:n.displayValue)&&!this.isSchemaTypeLetterOrPercentage():((null===(i=this.scope.gradeDetail)||void 0===i?void 0:i.isPastDueZero())&&!this.isSchemaTypeLetterOrPercentage()||(null===(s=this.scope.gradeDetail)||void 0===s?void 0:s.isOverrideGrade())&&!this.isSchemaTypeLetterOrPercentage()||(this.gradeDisplayItem.shouldShowTotalPoints()||this.hasFocus()||this.form[this.id]&&this.isFormDirty())&&(!this.isMultipleShown()&&!this.isInProgressShown()||(this.isMultipleShown()||this.isInProgressShown())&&this.hasFocus())&&!this.getPerfCodeFromDisplayValue(this.gradeDisplayItem.displayValue))&&!(this.scope.column.isScorm()&&!this.isScoreSchema())}getTruncatedPointsPossible(){var e,t,n;return this.isScoreSchema()?c.m((null===(t=this.scope.gradeDetail)||void 0===t?void 0:t.manualGrade)&&this.scope.gradeDetail.pointsPossible||this.scope.column.possible||this.scope.column.isCalculated()&&100||0,2):c.m(null!==(n=null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.pointsPossible)&&void 0!==n?n:this.scope.column.isCalculated()?100:this.scope.column.possible,2)}isScoreSchema(){var e,t;return(null===(e=this.gradeDisplayItem)||void 0===e?void 0:null===(t=e.schema)||void 0===t?void 0:t.scaleType)===S.aQo.Score}isReadOnly(){return this.scope.readOnly&&this.scope.readOnly()}hasFocus(){return this.inputElement.is(":focus")||this.wrapperDiv.hasClass(D.WRAPPER_FOCUS_CLASS)}getOldScore(){var e,t,n,i,s;return(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.isOverride())&&(null===(t=this.scope.gradeDetail)||void 0===t?void 0:t.displayGrade.perfCode)?null===(i=this.scope.gradeDetail)||void 0===i?void 0:i.displayGrade.perfCode.code:(null===(n=this.scope.gradeDetail)||void 0===n?void 0:n.getScore())?(null===(s=this.scope.gradeDetail.displayGrade)||void 0===s?void 0:s.requiresSchemaKnowledgeToDisplay)?Number(this.scope.gradeDetail.getScore())*this.scope.gradeDetail.pointsPossible/100:Number(this.scope.gradeDetail.getScore()):null}getNewScore(){return this.gradeDisplayItem.displayValue?isNaN(this.gradeDisplayItem.displayValue)?this.gradeDisplayItem.displayValue:this.bbLocalize.parseNumberSync(this.gradeDisplayItem.displayValue):null}scoreHasChanged(){let e=this.getOldScore(),t=this.getNewScore();return e!==t}get colorClass(){var e,t,n,i,s,r;let o=null===(e=this.form[this.id])||void 0===e?void 0:e.$viewValue;return this.scope.forGroup&&o&&this.isReservedWord(o)||null===(t=this.gradeDisplayItem)||void 0===t||!t.displayValue||(null===(i=(n=this.scope).isGroupGradeMultiple)||void 0===i?void 0:i.call(n))||(null===(r=(s=this.scope).isGroupGradeInProgress)||void 0===r?void 0:r.call(s))?"":this.gradeDisplayItem.getGradeColor()}validateAndSave(e){if(!this.isGradeErased()||e||this.isGradeErased()&&!this.scope.hasRubricClearConfirmationCallout){if(this.wrapperDiv.removeClass(D.WRAPPER_FOCUS_CLASS),this.scope.$emit("grade-input-blur",this.id),this.shouldShowPastDueZeroIndicator()&&""===this.form[this.id].$viewValue&&(this.gradeDisplayItem.displayValue="0",this.form[this.id].$setPristine()),this.isFormValid()){if(this.isFormDirty()&&this.scoreHasChanged()){if(!this.isSaving){let e=this._save();return this.scope.$emit("grade-input-save-promise",e),e.then(e=>{this.form[this.id]&&this.form[this.id].$setPristine(),this.alertScreenReaderNewGrade=!0,this.scope.$emit("bb-grade-input-save",e,this.scope.column.id,this.scope.forUser&&this.scope.forUser.id),this.reloadGradeDetail(this.courseId,[this.scope.column.id],[this.scope.gradeDetail.memberId],{expand:["grade.instructorFeedback","grade.lastFeedbackAuthor"]}),this.refreshInputBox()}).finally(()=>{this.isSaving=!1}),e}}else this.form[this.id].$setPristine(),this.refreshInputBox()}}else this.isSaving||(this.gradeDialog.isVisible=!0)}_validate(){let e=this.grade.createGradeSubmission(this.scope.column,this.gradeDisplayItem.displayValue,this.gradeDisplayItem.schema);e.clearGrade=this.isGradeErased();let t=this.grade.validateGrade(e,this.scope);return this.$q.when(t).then(e=>{this.form[this.id].$setValidity("invalidGrade",e)})}getPerfCodeFromDisplayValue(e){let t=null;if(e){let n=this.scope.gradeNotations?this.scope.gradeNotations():[];if(n.length>0){let s=i.find(n,t=>t.code===e);s&&(t=s.id)}}return t}_save(){var e,t,n,s;let r=this.$q.when(),o=null!==(s=null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.ui.groupAttempt)&&void 0!==s?s:null===(t=this.scope.gradeDetail)||void 0===t?void 0:t.ui.attempt;this.isSaving=!0,this.perfCodeId=this.getPerfCodeFromDisplayValue(this.gradeDisplayItem.displayValue);let a=this.perfCodeId?this.gradeDisplayItem.displayValue:this.grade.parseGrade(this.gradeDisplayItem.displayValue,this.gradeDisplayItem.schema,this.scope),l=this.grade.createGradeSubmission(this.scope.column,a,this.gradeDisplayItem.schema);if(this.perfCodeId&&(l.perfCodeId=this.perfCodeId),this.scope.column&&this.scope.column.externalGrade&&this.scope.gradeDetail){let e=this.scope.gradeDetail.manualGrade?this.scope.gradeDetail.pointsPossible:this.scope.column.possible,t=l.gradeValue;if(e&&e>0&&t&&t.isNumeric){let n=parseFloat(t.grade);t.grade=String(this.isScoreSchema()?n:100*n/e)}this.gradeDisplayItem.schema.scaleType===S.aQo.Score&&(l.pointsPossible=e)}else if((null===(n=this.scope.column)||void 0===n?void 0:n.externalGrade)&&!this.scope.gradeDetail){let e=this.scope.column.possible;this.gradeDisplayItem.schema.scaleType===S.aQo.Score&&(l.pointsPossible=e)}if(this.isGradeErased()&&(l.clearGrade=!0,(this.scope.column.isAssignment()||this.scope.column.isDiscussion())&&(this.scope.forGroup?this.scope.forGroup&&!this.scope.gradeDetail.ui.groupAttempt&&(r=this.scope.column.getContentGroupIdToGroupAttempt({expand:"attempts,toolAttemptDetail,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor"}).then(e=>{i.values(e.lookup).forEach(e=>{e[0].groupId===this.scope.forGroup.id&&(this.scope.gradeDetail.ui.groupAttempt=e[0])})})):r=this.$q.when()),this.isRubricAssociated())){this.scope.hasRubricClearConfirmationCallout&&(this.scope.forGroup?l.groupAttemptId=null==o?void 0:o.id:l.attemptId=null==o?void 0:o.id);let e=null==o?void 0:o.rubricEvaluation;e&&(e.cells=[]),l.setGradeToEmpty=!0,l.rubricEvaluation=e}return r.then(()=>{let e=this.scope.override&&this.scope.override()&&!(this.isGradeErased()&&(this.scope.column.isAssignment()||this.scope.column.isDiscussion()||this.isRubricAssociated()&&this.scope.hasRubricClearConfirmationCallout)),t=e?null:o,n=!!(this.scope.gradeDetail&&this.scope.gradeDetail.isPosted()),i=this.isGradeErased(),s=this.scope.gradeDetail;return this.grade.saveGrade(l,s,t,{userId:this.scope.forUser&&this.scope.forUser.id,group:this.scope.forGroup}).then(e=>{if(this.isRubricAssociated()&&this.$rootScope.$emit(p.fY,l.gradeValue.grade),this.scope.column.externalGrade&&e.displayGrade&&e.displayGrade.isOverride&&!this.isScoreSchema()&&(e.pointsPossible=100),e instanceof this.AttemptModel)this.scope.gradeDetail.displayGrade=e.displayGrade,i&&(this.scope.gradeDetail.manualStatus=S.WTZ.NoOverride),Object.assign(this.scope.gradeDetail.ui.attempt,e);else if(e instanceof this.GroupAttemptModel)this.gradeDisplayItem.displayGrade=e.displayGrade,this.scope.gradeDetail.displayGrade=e.displayGrade;else if(e instanceof this.GradeModel){let t=this.scope.gradeDetail?this.scope.gradeDetail.permissions:null;this.scope.gradeDetail=e,t&&(this.scope.gradeDetail.permissions=t),this.scope.column.externalGrade&&e.displayGrade&&!e.displayGrade.isOverride&&!this.isScoreSchema()&&(this.scope.gradeDetail=this.grade.gradeDetailToPercentage(this.scope.gradeDetail)),this.scope.column.externalGrade&&(this.gradeDisplayItem.gradeDetail=this.scope.gradeDetail)}else e[0]instanceof this.GradeModel&&(this.scope.gradeDetail.displayGrade=e[0].displayGrade);return(this.scope.column.isAssignment()||this.scope.column.isDiscussion())&&!i&&n&&(e.isPosted&&!e.isPosted()||e.isCompleted&&!e.isCompleted()||e[0]&&e[0].isReadyToPost&&e[0].isReadyToPost())?this._postGrade(e):e})})}_postGrade(e){return this.scope.forGroup?this.scope.column.postReadyGroupAttempts({groupAssociationId:this.scope.gradeDetail.ui.groupAttempt.groupAssociationId}).then(t=>(this.scope.gradeDetail.manualStatus=S.WTZ.IsPosted,e instanceof Array&&e.forEach(e=>{e.manualStatus=S.WTZ.IsPosted}),e)):this.scope.gradeDetail.postReadyGrades().then(t=>(this.scope.gradeDetail.manualStatus=S.WTZ.IsPosted,e.status=S.I$9.Completed,e))}isMultipleShown(){return this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple()}isInProgressShown(){return this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress()}gradeValueOnChange(){this.$q.when(this._validate()).then(()=>{this.scope.hasGradeAndIsValid=this.form[this.id].$valid&&!!this.gradeDisplayItem.displayValue})}onFocus(){this.canOverrideByGradeNotation()&&this.showGradeNotationDropdown(),this.isFormValid()&&!this.isFormDirty()&&(this.gradeDisplayItem.displayValue=this.gradeDisplayItem.parsedValue)}shouldShowOverrideIndicator(){return!(null==this.scope.enableOverrideIndicator||!this.scope.enableOverrideIndicator||!this.scope.gradeDetail||this.scope.gradeDetail.isExempt||this.shouldShowPastDueZeroIndicator())&&this.grade.isRubricGradeOverridden(this.scope.gradeDetail,this.scope.gradeDetail.ui.attempt,this.scope.column,this.scope.forGroup)&&!this.scope.gradeDetail.isExempt}shouldShowPastDueZeroIndicator(){return this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade&&this.scope.gradeDetail.displayGrade.scoredByAutomaticZero&&!this.scope.gradeDetail.isExempt}shouldShowExempt(){return this.scope.gradeDetail&&this.scope.gradeDetail.isExempt}isRubricAssociated(){return this.scope.column.hasRubricAssociation()}isRubricEvalMode(){return!!this.scope.enableRubricEvalAction&&this.scope.enableRubricEvalAction()&&this.isRubricAssociated()}shouldShowInput(){return!this.isRubricEvalMode()||this.isRubricEvalMode()&&this.scope.enableEditableInputMode}updateGradeColor(){this.wrapperDiv.removeClass(this.inputColorClass),!this.gradeDisplayItem.displayValue||this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple()||this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress()||(this.inputColorClass=this.gradeDisplayItem.getGradeColor(),this.wrapperDiv.addClass(this.inputColorClass))}isGradeErased(){return this.isFormDirty()&&this.gradeDisplayItem.wasValueErased}setFocusOnNextTabbableElement(){this.timeout(()=>{l.Bv(null,this.inputElement)},this.scope,0,!1)}isReservedWord(e){let t=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.multiple"}).toLocaleLowerCase(),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.in_progress"}).toLocaleLowerCase(),i=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.noValue"}).toLocaleLowerCase(),s=e.toLocaleLowerCase();return s===t||s===n||s===i}getGradeInputAriaLabelKey(){if(!this.scope.forUser&&!this.scope.forGroup)return;let e="components.directives.grade.grade-input.aria.",t=this.shouldShowOverrideIndicator()?"overrideScoreInput":"scoreInput";return this.shouldShowPastDueZeroIndicator()&&(t="pastDueZeroScoreInput"),e+=t,this.scope.forGroup&&(e+="Group"),e+=this.gradeDisplayItem.displayValue?"Graded":"Empty"}getAriaLabel(){var e;return this.bbLocalize.translateSync({key:this.getGradeInputAriaLabelKey()||"",locale:this.bbLocalize.getLocale(this.scope),noWrap:!0,params:{user:this.scope.forUser,group_name:this.scope.forGroup&&this.scope.forGroup.title,grade:this.gradeDisplayItem.parsedValue,total:(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.pointsPossible)||(this.scope.column.isCalculated()?100:this.scope.column.possible)}})}canOverrideByGradeNotation(){let e=this.scope.gradeNotations?this.scope.gradeNotations():[];return this.scope.canOverrideByGradeNotation&&this.scope.canOverrideByGradeNotation()&&(e&&e.length>0||this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade&&this.scope.gradeDetail.displayGrade.isOverride)}getAriaDescribeById(){return`invalidGradeAriaDescribeById_${this.scope.forUser.id}`}clickGradeNotation(e,t){t.stopPropagation(),this.gradeDisplayItem.displayValue=e.code,this.perfCodeId=e.id,this.afterClickDropdownListItem()}undoOverride(){this.gradeDisplayItem.displayValue="",this.perfCodeId=null,this.afterClickDropdownListItem()}afterClickDropdownListItem(){this.form[this.id].$setDirty(!0),this.form[this.id].$setValidity("invalidGrade",!0),this.timeout(()=>{x("#performanceCodes-"+this.id).remove()},this.scope,0,!1),this.$q.when(this.validateAndSave()).finally(()=>{this.setFocusOnNextTabbableElement()})}isGradesComplete(){return!1}onBlur(e){this.isWrapperDivClickHandled=!1;let t=[];e&&e.relatedTarget&&e.relatedTarget.classList&&(t=e.relatedTarget.classList),this.inputElementBluredByTab||i.includes(t,"performance-code-option")||(this.timeout(()=>{this.inputElementBluredByTab=!1,x("#performanceCodes-"+this.id).remove()},this.scope,0,!1),this.shouldShowModal()?this.openOverrideDialog():this.validateAndSave())}subscribeToRedux(){let e=this.$ngRedux.connect(null,e=>(0,k.DE)({reloadGradeDetail:A.Nwg.gradebookGrade.loadBulkView},e))(this);this.scope.$on("$destroy",e)}isStatusComplete(){return!!this.gradeDisplayItem.displayValue&&!this.shouldShowPastDueZeroIndicator()}constructor(e,t,n,i,s,r,o,a,l,c,u,p,m,g,f,b,v,y){this.$rootScope=e,this.$compile=t,this.$q=n,this.$injector=i,this.$ngRedux=s,this.scope=r,this.element=o,this.attrs=a,this.form=l,this.bbLocalize=c,this.grade=u,this.AttemptModel=p,this.GradeModel=m,this.GroupAttemptModel=g,this.CourseModel=f,this.timeout=b,this.ultraState=v,this.$modal=y,this.alertScreenReaderNewGrade=!1,this.gradeDisplayItem=this.$injector.instantiate(d.G,{gradeDetail:this.scope.gradeDetail,scope:this.scope}),this.id=this.attrs.id,this.isSaving=!1,this.wrapperDiv=this.element.find("."+D.WRAPPER_CLASS),this.inputElement=this.wrapperDiv.find("input"),this.isWrapperDivClickHandled=!1,this.gradeNotationsWrapperSelector=this.scope.gradeNotationsWrapperSelector||"body",this.inputElementBluredByTab=!1,this.isProcessingFocusEvent=!1,this.onDismissCallback=()=>{this.gradeDialog.isVisible=!1,this.form[this.id].$setPristine(),this.inputElement.blur(),this.inputElement.focus(),this.inputElement.select()},this.onSuccessCallback=()=>{this.gradeDialog.isVisible=!1,this.validateAndSave(!0).finally(()=>{this.setFocusOnNextTabbableElement()})},this.closeModal=e=>{e?this.modalInstance.close():this.modalInstance.dismiss()},this.onCompleteIncompleteBlur=(e,t,n)=>{this.scope.$applyAsync(()=>{this.gradeDisplayItem.displayValue=t,this.form[this.id].$dirty=n,this.validateAndSave()})},this.openRubricEvaluation=()=>{var e,t;let n;!this.isRubricAssociated()||this.scope.disableRubricEvalClick&&this.scope.disableRubricEvalClick()||(n=(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.groupAssociationId)?(null===(t=this.scope.forUser)||void 0===t?void 0:t.id)||null:this.scope.gradeDetail.user&&(this.scope.gradeDetail.user.$pk||this.scope.gradeDetail.user.id)||null,this.timeout(()=>{this.ultraState.goPeekState("rubric-evaluation",{userId:n,groupId:this.scope.forGroup?this.scope.forGroup.id:null,columnId:this.scope.column.id})},this.scope,0,!1))},this.overrideDialogScope=r.$new(),this.subscribeToRedux(),this.wrapperDiv.on("click",()=>{!this.isRubricEvalMode()&&(this.isWrapperDivClickHandled=!0,this.scope.onClick&&!this.isReadOnly()&&this.scope.onClick(),this.wrapperDiv.addClass(D.WRAPPER_FOCUS_CLASS),this.inputElement.is(":focus")||(this.inputElement.focus(),this.inputElement.select()))}),this.inputElement.on("click",e=>{let t=x("#performanceCodes-"+this.id);t.hasClass("f-open-dropdown")&&(e.preventDefault(),e.stopPropagation())}),this.inputElement.on("focus",e=>{if(!this.isProcessingFocusEvent){this.isProcessingFocusEvent=!0;try{e.preventDefault(),e.stopPropagation(),this.wrapperDiv.addClass(D.WRAPPER_FOCUS_CLASS),this.inputElement.select(),this.scope.$emit("grade-input-in-focus",this.id);let t=x("#performanceCodes-"+this.id);this.scope.offsetTop&&this.scope.offsetTop()||t.addClass("show"),this.isWrapperDivClickHandled||this.timeout(()=>{t&&!t.hasClass("f-open-dropdown")&&(this.inputElement.trigger("click.fndtn.dropdown"),this.scope.offsetTop&&this.repositionGradeNotationDropdown(t))},this.scope,0,!1)}finally{this.isProcessingFocusEvent=!1}}}),this.inputElement.on("keydown",e=>{let t=x("#performanceCodes-"+this.id);if(t&&t.hasClass("f-open-dropdown")&&e.keyCode===h.Mf&&!e.shiftKey){this.inputElementBluredByTab=!0;let n=t.find(":tabbable");n&&(n.first().focus(),e.preventDefault(),e.stopPropagation())}else e.keyCode!==h.K5&&e.keyCode!==h.dS&&(e.keyCode!==h.Mf||e.shiftKey)||(e.preventDefault(),this.inputElement.is(":focus")&&this.inputElement.trigger("click.fndtn.dropdown"),this.shouldShowModal()?this.openOverrideDialog():this.$q.when(this.validateAndSave()).finally(()=>{this.gradeDialog.isVisible||this.timeout(this.setFocusOnNextTabbableElement.bind(this),this.scope,0)}))}),this.element.foundation(),this.scope.$watch("::column",e=>{e&&(this.courseId=e.courseId,this.gradeDisplayItem.init(e).then(()=>{this.attrs.gradeDetail&&this.scope.$watchGroup(["gradeDetail.id","gradeDetail.displayGrade","gradeDetail.ui.attempt.displayGrade","gradeDetail.isExempt","isGroupGradeInProgress()","isGroupGradeMultiple()","column.gradingSchemaId","column.possible"],e=>{this.isSaving||this.refreshInputBox()})}),e.externalGrade?this.errorMessageKey="components.directives.grade.grade-input.errorMessage.overallGrade":this.errorMessageKey="components.directives.grade.grade-input.errorMessage.default")}),this.buildGradeDialog()}}D.WRAPPER_CLASS="wrapping-input-style",D.WRAPPER_FOCUS_CLASS="wrapping-input-style-focus",D=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([T(0,(0,C.tB)("$rootScope")),T(1,(0,C.tB)("$compile")),T(2,(0,C.tB)("$q")),T(3,(0,C.tB)("$injector")),T(4,(0,C.tB)("$ngRedux")),T(5,(0,C.tB)("scope")),T(6,(0,C.tB)("element")),T(7,(0,C.tB)("attrs")),T(8,(0,C.tB)("form")),T(9,(0,C.tB)(r.serviceName)),T(10,(0,C.tB)(u.HV)),T(11,(0,C.tB)(g.U_.serviceName)),T(12,(0,C.tB)(g.zn.H)),T(13,(0,C.tB)(g.uy.HV)),T(14,(0,C.tB)(g.N7.H)),T(15,(0,C.tB)(f.H)),T(16,(0,C.tB)(v.HV)),T(17,(0,C.tB)(o.HV))],D);class G{constructor(e,t){this.$injector=e,this.bbLocalize=t,this.restrict="E",this.template=y,this.require="^form",this.scope={column:"=",gradeDetail:"=",onClick:"&",onBlur:"&",enableRubricEvalAction:"&?",hasRubricClearConfirmationCallout:"<?",disableRubricEvalClick:"&?",enableEditableInputMode:"&?",forUser:"=?",forGroup:"=?",hasGradeAndIsValid:"=?",isGroupGradeMultiple:"&?",isGroupGradeInProgress:"&?",notAllowEmptyString:"&?",override:"&?",readOnly:"&?",enableOverrideIndicator:"=?",canOverrideByGradeNotation:"&?",gradeNotations:"&?",gradeNotationsWrapperSelector:"@?",offsetTop:"&?"},this.link=(e,t,n,i)=>{if(!n.id&&!n.column)throw Error("Id and Column are required.");if(!n.gradeDetail)throw Error("A grade object must be provided");if(n.gradeDetail&&!n.forUser&&!n.forGroup)throw Error("forUser or forGroup is required.");e.gradeInput=this.$injector.instantiate(D,{scope:e,element:t,attrs:n,form:i})}}}G.$inject=["$injector"],s.module(P,["puElasticInput",a.e,m.e1,b.e1,v.e1,w.e]).directive("bbGradeInput",["$injector",e=>e.instantiate(G)])},197923:function(e,t,n){"use strict";n.d(t,{H1:function(){return w},VE:function(){return A},e1:function(){return I}});var i=n(464027),s=n(202784),r=n(236351),o=n(445218),a=n(398435),l=n(397236),c=n(555342),d=n(609582),u=n(951248),p=n(470269),m=n(273386);let h="ultra.components.services.gradebookListViewTabs",g=e=>{let{onChange:t,value:n,tabs:i,localize:r,analyticsId:o,ftue:h}=e,g="components.directives.grade.course-grades-grader.actions",f={analyticsId:"course.downloadGradeSettings.link",label:r.translate(`${g}.download`)},b={analyticsId:"course.uploadGradeSettings.link",label:r.translate(`${g}.upload`)},v={analyticsId:"course.attemptReceiptSearch.link",label:r.translate(`${g}.attemptReceiptSearch`)},y={analyticsId:"course.gradebookSettings.link",label:r.translate(`${g}.openGradebookSettings`)},C={analyticsIdPrefix:"course.gradebookDropdownMenu",ariaLabel:r.translate(`${g}.moreOptionsGradebook`),menuOptions:[f,b,v,y],optionClicked:e=>{e.analyticsId===f.analyticsId?p.Nd.goPeekState(p.C7.GradeDownload()):e.analyticsId===b.analyticsId?p.Nd.goPeekState(p.C7.GradeUpload()):e.analyticsId===y.analyticsId?p.Nd.goPeekState(p.C7.GradeSettings()):p.Nd.goPeekState(p.C7.AttemptReceiptSearch())},isRtl:r.isRtl()},[S,E]=s.useState(),I=(0,m.Lx)(),[w]=(0,l.cS)(null==h?void 0:h.componentKey);return s.createElement("div",{className:"gradebook-list-view-tabs"},s.createElement("div",{className:"more-options"},s.createElement(c.rU,{...C,className:"right-menu"})),s.createElement(a.AnalyticsTabs,{onChange:t,value:n,analyticsId:`${o}.gradebook.listViewTabs`},i&&i.map(e=>{let t={analyticsId:`${o}.gradebook.listViewTab.${e.id}`,className:`js-gradebook-tab-${e.id}`,key:e.id,value:e.id,label:r.translate(e.displayKey)};return e.id===(null==h?void 0:h.targetId)&&(t.innerRef=E),s.createElement(a.AnalyticsTab,t)})),w&&S&&s.createElement(l.Am,{componentKey:h.componentKey,onDismiss:()=>{I(u.Nwg.userPreference.persistUserPreference({key:h.componentKey,value:"1"}))},targetElement:S,headline:r.translate("components.directives.grade.course-grades-grader.views.studentListViewGuidanceHeader"),calloutProps:{directionalHint:d.DirectionalHint.bottomAutoEdge},analyticsId:`${o}.ftue`},r.translate("components.directives.grade.course-grades-grader.views.studentListViewGuidanceBody"),s.createElement(a.AnalyticsPrimaryButton,{analyticsId:`${o}.gradebook.PrimaryButton`,className:"ftue-action",onClick:()=>{I(u.Nwg.userPreference.persistUserPreference({key:h.componentKey,value:"1"})),h.action()}},r.translate("components.directives.grade.course-grades-grader.views.studentListViewGuidanceTry"))))};class f extends s.Component{render(){return s.createElement(g,this.props)}}let b={Class:(0,r.X)(f),attributes:["analyticsId"],bindingNames:["value","onChange","tabs","ftue"],renderLocalized:!0,withProvider:!0};i.module(h,[]).component("bbUiGradebookListViewTabs",(0,o.G5)(b));var v=n(211796),y=n(776517),C=n(322121);function S(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function E(e,t){return function(n,i){t(n,i,e)}}let I="ultra.components.directives.gradebookListViewTabs",w={id:"assignments",ariaLabel:"components.directives.grade.course-grades-grader.views.gradableItemsListView",displayKey:"components.directives.grade.course-grades-grader.views.gradableItemsListViewTabLabel"},A={id:"students",ariaLabel:"components.directives.grade.course-grades-grader.views.studentListView",displayKey:"components.directives.grade.course-grades-grader.views.studentListViewTabLabel"},k=[w,A],x="students",T=`<bb-ui-gradebook-list-view-tabs
                            value="gradebookListViewTabs.scope.selectedTab"
                            on-change="gradebookListViewTabs.onTabChange"
                            tabs="gradebookListViewTabs.tabs"
                            ftue="gradebookListViewTabs.ftue">
                      </bb-ui-gradebook-list-view-tabs>`;class P{constructor(e,t){this.scope=e,this.mobileEventHandlerService=t,this.onTabChange=(e,t)=>{let n=this.tabs.find(e=>e.id===t),i=t===A.id?y.Cs.StudentsTabOpened:y.Cs.GradableItemTabOpened;this.mobileEventHandlerService.registerHandler(i),this.scope.$on("$destroy",()=>{this.mobileEventHandlerService.clearHandler(i)}),this.scope.onTabChanged&&this.scope.onTabChanged(n.id),this.scope.$apply()},this.tabs=k,this.ftue={componentKey:"ftue.grades.grader.studentlistview",targetId:x,action:()=>{this.scope.onTabChanged(x)}}}}P=S([E(0,(0,v.tB)("scope")),E(1,(0,v.tB)(C.HV))],P);class D{constructor(e){this.$injector=e,this.restrict="E",this.template=T,this.scope={onTabChanged:"<?",selectedTab:"="},this.link=e=>{e.gradebookListViewTabs=this.$injector.instantiate(P,{scope:e})}}}D=S([E(0,(0,v.tB)("$injector"))],D),angular.module(I,[h,C.e1]).directive("bbGradebookListViewTabs",["$injector",e=>e.instantiate(D)])},406002:function(e,t,n){"use strict";n.d(t,{e1:function(){return N}}),n(356328),n(626552),n(948286),n(205654),n(275071);var i=n(464027),s=n(916415),r=n(612270),o=n(915121),a=n(619903),l=n(104111),c=n(108404),d=n(453835),u=n(429794),p=n(339409),m=n(847192),h=n(48446),g=n(519833),f=n(319434),b=n(708678),v=n(350383),y=n(104485),C=n(495175),S=n(291146),E=n(168132),I=n(963341),w=n(400969),A=n(529462),k=n(873518),x=n(369695),T=n(247126),P=n(838700),D=n(67104),G=n(408027),R=n(470269),B=n(539210),L=n(625506);let N="ultra.directives.grade.graderColumn";class O{updateNumMissingStudents(){this.numMissingStudents=this.column.getNumMissingIfLate()}openAddItemPanel(e){this.whichAddItemPanelOpen=e,L(e).addClass("is-active").find(".element-list-add-menu").slideToggle(300)}closeAddItemPanel(e){this.whichAddItemPanelOpen===e&&(this.whichAddItemPanelOpen=null),L(e).removeClass("is-active").find(".element-list-add-menu").slideUp(300)}toggleAddItemPanel(e){this.whichAddItemPanelOpen===e?this.closeAddItemPanel(e):this.openAddItemPanel(e)}registerPostGradesWatchers(){this.scope.$watchGroup([()=>this.column.summary.hasGradesToPost(),()=>this.course.isComplete()],()=>{this.canPostGrades=this.grade.canPostGrades(this.course,this.column)})}postGrades(){this.column.postReadyGrades().then(e=>{this.toast.show({messageKey:"components.directives.grade.grader-column.actions.gradesPosted",icon:"icon-check",toastStatus:"success"}),this.column.summary.$fetch().$asPromise().then(e=>{this.scope.$emit(C.JH,this.column),this.scope.$root.$broadcast("bb-update-summary")})})}deleteColumn(){return this.column.forceDelete()}deleteContent(){this.column.courseId&&this.column.contentId&&this.CourseModel.$new(this.column.courseId).contents.$new(this.column.contentId).$fetch().$asPromise().then(e=>{this.ContentService.deleteContent(e).then(()=>{this.deleteContentCallback()})})}deleteContentCallback(){this.scope.$root.$broadcast("bb-delete-column",this.column)}viewEditColumn(){this.accessibility.setFocusOverrideOnPanel("#"+this.overflowMenuId,".grades-list");let e=this.column.scoreProviderHandle;(!e||this.scoreProviderHelper.supportsOverall(e))&&(E.courseContent.ContentHandler.PartnerCloud.isEqualTo(null==e?void 0:e.toString())||E.courseContent.ContentHandler.LtiLink.isEqualTo(null==e?void 0:e.toString())?this.ltiService.ltiEditColumn(this.column):this.openViewEditState())}openViewEditState(){let{contentId:e,courseId:t,externalGrade:n,id:i,linkId:s,scoreProviderHandle:r}=this.column,o=!this.column.isAssignment()&&!this.column.isTest();n?this.ultraState.goPeekState("gradebook-item.overall-grade",{columnId:i,gradeitemView:"details"}):this.column.isCalculated()?this.ultraState.goPeekState("gradebook-item.calculation",{columnId:i,gradeitemView:"details"}):r&&this.column.seemsAttemptBased()&&(this.hasViewAssessmentEntitlement||o)?this.scoreProviderHelper.editStateRef(r,{courseId:t,contentId:e,linkRefId:s},k.tU.GoToState):r&&this.column.isAttendance()?this.scoreProviderHelper.editStateRef(r,{courseId:t,contentId:e},k.tU.GoToState):this.ultraState.goPeekState("grade-item.edit",{id:this.column.id})}_openColumn(e){let t,n;let{contentId:s,courseId:r,id:o,linkId:a,scoreProviderHandle:l}=this.column;if(this.course.isUltra()){let c=this.hasViewAssessmentEntitlement&&(this.column.isTest()||this.column.isAssignment());if(this.isLTILink()){this.launchLti();return}if(this.column.isAttendance())({state:t,args:n}=i.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(l,{contentId:s,courseId:r,columnId:o,linkRefId:a},k.tU.GenerateStateParams)));else if(this.column.externalGrade)t="gradebook-item.overall-grade",n={columnId:o};else if(this.column.isCalculated())t="gradebook-item.calculation",n={columnId:o,courseId:r};else if(l&&!this.column.isOffline()&&(this.canViewGrades||this.canViewAttempts)&&this.hasItemExceptionView&&this.hasAssessmentExceptionView){let l={};if("status"===e){let e=this.getNonOfflineItemsGradingStatusQueryParam();l={gradingStatus:e}}({state:t,args:n}=i.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(this.column.scoreProviderHandle,{contentId:s,courseId:r,columnId:o,linkRefId:a,...l},k.tU.GenerateStateParams)))}else l&&(this.column.isDiscussion()||this.column.isScorm()||this.column.isScormSCO()||c)?{state:t,args:n}=i.fromJson(this.scoreProviderHelper.editStateRef(this.column.scoreProviderHandle,{courseId:r,contentId:s,linkRefId:a},k.tU.GenerateStateParams)):this.canViewGrades?(t="gradebook-item.offline",n={columnId:o,courseId:r,gradeitemView:"students"}):(t="grade-item.edit",n={id:o})}else t="course.outline",n={courseId:r,legacyUrl:this.getLegacyUrl()};this.ultraState.goPeekState(t,n)}handleColumnClick(e){this.itemLinkIsClickable&&!this.isRestrictedGroupContent&&(this.isCourseView?this._openColumn(e):this.course.refreshConvertToUltraStatus().then(()=>{this.courseConversionService.isConversionComplete(this.course.ui.convertToUltraTaskStatus)?this._openColumn(e):this.showConversionTooltip()}))}getNonOfflineItemsGradingStatusQueryParam(){let e=this.column.summary.getStatus();if(this.column.isCollectExternalSubmissions()&&(e===f.MN.NeedsPosting||e===f.MN.AllGraded||e===f.MN.NothingToGrade)&&this.getNumberEligibleToBeGradedExternalSubmissions()>0)return G.qr.NeedsGrading;switch(e){case f.MN.NeedsGrading:return G.qr.NeedsGrading;case f.MN.AllPosted:return this.column.isAnonymousGrading()?G.qr.AllStatuses:G.qr.Completed;case f.MN.NothingToGrade:return this.column.isAnonymousGrading()?G.qr.AllStatuses:G.qr.NothingToGrade;default:return G.qr.AllStatuses}}showConversionTooltip(){this.showConversionMessage=!0}closeConversionTooltip(){this.showConversionMessage=!1}getAlertType(){return f.MQ.ConversionInProgress}launchLti(){this.ltiService.ltiLaunch({courseId:this.column.courseId,contentId:this.column.contentId,linkType:f.GQ.parse(this.column.scoreProviderHandle.toString()),linkRefId:this.column.linkId})}showAlertIcon(){return this.column.getNumMissingIfLate()>0}getLegacyUrl(){return"/webapps/gradebook/do/instructor/enterGradeCenter?course_id="+this.column.courseId}isLTILink(){return this.ltiService.isLTILink(this.column)}showMarkAttendance(){return this.column.isAttendance()&&this.hasViewAttendanceEntitlement}showDelete(){return this.column.isAttendance()?this.canModify&&this.showAttendanceDeleteOption:this.canModify}openAttendance(){this.ultraState.goPeekState("attendance")}showQuestionAnalysis(){return this.column.isQuestionAnalysisAvailable()&&this.canViewGrades}showDownloadTestResults(){return!this.column.isAnonymousGrading()&&this.canViewGrades&&this.column.isTest()&&this.column.summary.numSubmissionsTotal>0}showViewEdit(){let e=this.column.isOffline()||null==this.column.scoreProviderHandle||this.scoreProviderHelper.supportsEdit(this.column.scoreProviderHandle);return!!e&&(!!(this.column.isOffline()||this.column.isCalculated())||this.hasDesignerViewEntitlement||this.canModify)}hasContentId(){return!!this.column.contentId}getConfirmationKeyAndShowType(){let e;return this.ultraState.includes("**.outline.**")?e=P.m.CourseOutline:this.ultraState.includes("**.engagement.**")&&(e=P.m.Discussions),this.CourseModel.$new(this.column.courseId).contents.$new(this.column.contentId).$fetch().$asPromise().then(t=>this.ContentService.generateDeleteConfirmationKey(t,e).then(e=>({confirmationKey:e.ui.deleteConfirmationKey,showType:e.ui.modalShowType})))}getOverflowMenuItems(){return[{icon:this.canModify?"draw":"visible",labelKey:this.canModify?"global.edit":"global.view",show:()=>this.showViewEdit(),onClick:()=>this.viewEditColumn()},{icon:"attendance",labelKey:"components.directives.grade.grader-column.attendance.markAttendance",show:()=>this.showMarkAttendance(),onClick:()=>this.openAttendance()},{icon:"question-analysis",labelKey:"components.directives.grade.grader-column.questionAnalysisOverflowMenuLabel",show:()=>this.showQuestionAnalysis(),onClick:()=>{this.ultraState.goPeekState("question-analysis.report",{qaContentId:this.column.contentId})}},{icon:"download",labelKey:"components.directives.grade.grader-column.downloadResults.overflowMenuLabel",show:()=>this.showDownloadTestResults(),onClick:()=>{this.ultraState.goPeekState(R.Z5.Grade.DOWNLOAD_TEST_RESULTS,{columnId:this.column.id})}},{icon:"trash",labelKey:"global.delete",onClick:()=>{this.hasContentId()?this.deleteContent():this.deleteColumn()},show:()=>this.showDelete(),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>{let e;return this.hasContentId()?this.getConfirmationKeyAndShowType().then(t=>(e=t.confirmationKey.replace(/^resource\//,""),this.$q.when(I.Hz(e)))):this.column&&this.column.ui&&this.column.ui.deleteConfirmationHandle?(e=this.column.ui.deleteConfirmationHandle.replace(/^resource\//,""),this.$q.when(I.Hz(e))):(e="generic-content",this.$q.when(I.Hz(e)))}}}]}get itemLinkIsClickable(){return this.isActionable&&(!this.column.isAttendance()||this.hasViewAttendanceEntitlement)&&(!this.isLTILink()||this.hasDesignerViewEntitlement)&&!this.isRestrictedGroupContent}get isActionable(){return!this.column.isAttendance()||this.scope.attendanceIsAvailable()}get showOverflowMenu(){let e=this.isCourseView&&!this.course.isComplete()&&this.isActionable;return e&&(this.showViewEdit()||this.showDelete()||this.showMarkAttendance()||this.showQuestionAnalysis()||this.showDownloadTestResults())}get showDragControls(){return this.isCourseView&&!this.course.isComplete()&&this.isActionable&&this.canModify}checkIfAttendanceIsAvailable(){return!!(this.scope.attendanceIsAvailable&&this.scope.attendanceIsAvailable())}checkIfAttendanceRecordsExist(){this.showAttendanceDeleteOption=!1,this.column.isAttendance()&&this.checkIfAttendanceIsAvailable()&&this.CourseModel.$new(this.column.courseId).attendanceRecordsExist().then(e=>{this.showAttendanceDeleteOption=!e})}getNumberEligibleToBeGradedExternalSubmissions(){return i.isUndefined(this.column.summary.numGroupsNeedsGrading)?this.column.summary.numStudentsEligibleToBeGradedExternalSubmission:this.column.summary.numGroupsEligibleToBeGradedExternalSubmission}getNumberOfSubmissionsNeedsGrading(){return null==this.column.summary.numSubmissionsNeedsGrading?this.column.summary.numSubmissionsNeedsReconciling:this.column.summary.numSubmissionsNeedsGrading}get isFormative(){return this.column.isFormative}getToolTipTemplate(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'}constructor(e,t,n,i,r,o,a,l,c,d,u,p,m,h){this.scope=e,this.$q=t,this.ContentService=n,this.courseConversionService=i,this.CourseModel=r,this.entitlementService=o,this.grade=a,this.gradebookPermissionService=l,this.bbLocalize=c,this.ultraState=d,this.accessibility=u,this.scoreProviderHelper=p,this.ltiService=m,this.toast=h,this.hasItemExceptionView=!1,this.hasAssessmentExceptionView=!1,this.hasDesignerViewEntitlement=!1,this.hasViewAssessmentEntitlement=!1,this.hasViewAttendanceEntitlement=!1,this.isRestrictedGroupContent=!1,this.numMissingStudents=0,this.showConversionMessage=!1,this.attendanceAriaLabel=void 0,this.canModify=this.gradebookPermissionService.canModify(e.course().id),this.canPostGrades=this.gradebookPermissionService.canPostGrades(e.course().id),this.canViewAttempts=this.gradebookPermissionService.canViewAttempts(e.course().id),this.canViewGrades=this.gradebookPermissionService.canViewGrades(e.course().id),this.column=e.column,this.course=e.course(),this.isCourseView=e.isCourseView,this.contextArea="grades",this.index=e.$parent.$index+1,this.column.isGroupContent()&&(this.isRestrictedGroupContent=!this.entitlementService.isEntitled(f.pQ.ViewGroups,this.course.id)),this.bbLocalize.loadBundle("components/directives/grade/grader-column").then(()=>{this.column.externalGrade&&(e.column.columnName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.overall.label"}))}),this.entitlementService.hasAnyCourseEntitlement([f.s7.ViewAssessment,f.s7.ModifyAssessment],this.course.id).then(e=>{this.hasViewAssessmentEntitlement=e}),this.entitlementService.hasCourseEntitlement(f.s7.ViewAttendance,this.course.id).then(e=>{this.hasViewAttendanceEntitlement=e}),this.entitlementService.hasCourseEntitlement(f.eo.ViewAsDesigner,this.course.id).then(e=>{this.hasDesignerViewEntitlement=e}),this.entitlementService.hasCourseEntitlement(B.SE.ViewException,this.course.id).then(e=>{this.hasItemExceptionView=e}),this.entitlementService.hasCourseEntitlement(f.iL.ViewException,this.course.id).then(e=>{this.hasAssessmentExceptionView=e}),this.column.$resolve().$then(e=>{this.grade.setDeleteConfirmationHandle(this.column),this.overflowMenuId="grader-column-open-button-"+A.d(),this.checkIfAttendanceRecordsExist()});let g=e.$watch("column.summary.$resolved",()=>{this.column.summary&&this.column.summary.$resolved&&(this.updateNumMissingStudents(),g(),this.isRestrictedGroupContent&&(this.column.summary.restricted=!0,this.column.restricted=!0))});s.ZU.OnRootScope(e,"bb-grade-input-save",(e,t,n,i)=>{this.column.id===i&&this.column.summary.$fetch()}),s.ZU.OnRootScope(e,"bb-update-category-icon",(e,t)=>{this.column.id===t.id&&(this.scope.categoryMap&&t.gradebookCategoryId&&(this.column.gradebookCategory=this.scope.categoryMap[t.gradebookCategoryId],this.column.categoryTitle=this.column.gradebookCategory&&this.column.gradebookCategory.title),(null===t.dueDate||t.dueDate&&t.dueDate instanceof Date)&&(this.column.dueDate=t.dueDate),this.column.visible=t.visible,this.updateNumMissingStudents())}),"Attendance"===this.column.effectiveColumnName&&(this.attendanceAriaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.attendance.course-attendance",params:{courseName:this.course.name},noWrap:!0,noEscape:!0})),this.scope.column.isAttendance()&&s.ZU.OnRootScope(e,"$stateChangeSuccess",(e,t,n,i)=>{i.name.indexOf("attendance")>=0&&this.checkIfAttendanceRecordsExist()}),e.$watch("column",e=>{this.column=e}),this.registerPostGradesWatchers()}}O.$inject=["scope","$q",u.HV,l.HV,E.N7.H,v.HV,C.HV,y.HV,S.serviceName,T.HV,r.HV,k.HV,o.HV,x.HV];class M{constructor(e){this.$injector=e,this.restrict="E",this.template=D,this.scope={assessment:"<?",column:"=",course:"&",isCourseView:"=",categoryMap:"=?",attendanceColumnExists:"&?",attendanceIsAvailable:"&"},this.link=(e,t,n)=>{e.graderColumn=this.$injector.instantiate(O,{scope:e})}}}M.$inject=["$injector"],i.module(N,[a.e1,u.e1,d.e1,c.e1,l.e1,p.e1,h.e1,m.e1,b.e1,S.moduleName,k.e1,T.e1,w.e1,o.e1,I.e1,x.e1,g.e1]).directive("bbGraderColumn",["$injector",S.serviceName,(e,t)=>(t.loadBundle("components/directives/grade/grader-column"),e.instantiate(M))])},30799:function(e,t,n){"use strict";n.d(t,{e1:function(){return c}}),n(356328);var i=n(464027),s=n(291146),r=n(529462),o=n(685414),a=n(455029),l=n(625506);let c="ultra.components.directives.grade.inlineValidation";class d{tooltipExists(){return 0!==l(`#${this.scope.tooltipId}`).length}updateErrorMessage(){this.scope.errorMessage?this.scope.errorMessageRefined=this.scope.errorMessage:this.bbLocalize.loadBundle("components/directives/grade/inline-validation").then(()=>{this.scope.errorMessageRefined=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.inline-validation.default"})})}checkErrors(){this.scope.showError()?this.showErrorTip():this.hideErrorTip()}setupEventHandlers(){this.scope.focusableElement.on("focus",()=>{this.checkErrors()}).on("blur",()=>{this.hideErrorTip()}),this.scope.$on("bb-inline-validation-check",()=>{this.checkErrors()})}showErrorTip(){if(this.scope.focusableElement[0]===document.activeElement){this.tooltipExists()||l("body").append(this.$compile(`
          <div id="${this.scope.tooltipId}"
            class="tooltip inline-validation f-dropdown content inline-validation-tooltip">
            <span class="validation-message" ng-bind="errorMessageRefined" aria-role="text"></span>
            <span class="nub"></span>
          </div>
        `)(this.scope));let e=this.element.children().first(),t=l(`#${this.scope.tooltipId}`);window.Foundation.libs.tooltip.reposition(e,t,e.attr("class")),t.show(),this.scope.$root.$broadcast(o.i_,this.scope.errorMessageRefined)}}hideErrorTip(){l(`#${this.scope.tooltipId}`).hide()}constructor(e,t,n,i,s){this.scope=e,this.element=t,this.attrs=n,this.$compile=i,this.bbLocalize=s,this.scope.$on("$destroy",()=>{this.element.off(),this.element=null,l(`#${this.scope.tooltipId}`).remove()});let o=r.d();e.tooltipId=`inline-validation-tooltip-${o}`,e.alertTextId=`inline-validation-alert-text-${o}`,this.updateErrorMessage(),this.scope.focusableElement=this.element.find(":tabbable, input:enabled"),this.setupEventHandlers(),e.$watch(()=>this.scope.focusableElement.val(),e=>{null!=e&&this.checkErrors()}),e.$watch(()=>this.scope.showError(),e=>{this.checkErrors()}),e.$watch("errorMessage",e=>this.updateErrorMessage())}}d.$inject=["scope","element","attrs","$compile",s.serviceName];class u{constructor(e){this.$injector=e,this.restrict="E",this.transclude=!0,this.template=a,this.scope={showError:"&",errorMessage:"@"},this.link=(e,t,n,i)=>{e.inlineValidation=this.$injector.instantiate(d,{scope:e,element:t,attrs:n})}}}u.$inject=["$injector"],i.module(c,[s.moduleName]).directive("bbInlineValidation",["$injector",e=>e.instantiate(u)])},447397:function(e,t,n){"use strict";n.d(t,{OI:function(){return d},e1:function(){return l},wW:function(){return c}});var i=n(464027),s=n(291146),r=n(515480),o=n(25281),a=n(931017);let l="ultraUi.components.directives.grade.pastDueZero",c="bb-past-due-zero-confirmation",d="bb-past-due-zero-settings",u="course.grades.pastDue.confirmationNeeded.";class p{displayPastDueConfirmation(e){e?this.initModalTranslateOptions(e):this.initModalTranslateOptions();let t=!1,n=this.scope,i=this.$modal.open({template:e?o:a,scope:n,resolve:{translations:[s.serviceName,e=>e.loadBundle("course/grades/pastDue/confirmationNeeded")]},controller:["$scope",s.serviceName,function(e,i){e.okAction=()=>{e.$close(),t=!0},e.cancelAction=()=>{e.$close(),t=!1,n.cancelCallback&&n.cancelCallback()}}]});i.result.then(()=>{t&&this.scope.confirmCallback&&(this.isPastZeroAssigned?this.scope.confirmCallback():this.scope.confirmCallback({args:{choice:this.scope.modalTranslateOptions.choiceModal}}))},()=>{this.scope.dismissCallback&&this.scope.dismissCallback()})}initModalTranslateOptions(e){if(e)return this.scope.modalTranslateOptions={title:{key:u+"title"},instructions:{key:u+e+".instructions"}};let t=this.isPastZeroAssigned?"assign":"unassign";if(this.scope.modalTranslateOptions={title:{key:u+t+".title"},instructions:{key:u+t+".instructions"},confirm:{key:u+t+".confirm"},cancel:{key:u+t+".cancel"}},!this.isPastZeroAssigned){let e=[{id:"past-due-unassign-retain",name:"pastDueUnassignZero",value:r.Z.Retain.toString(),localizedKey:u+"unassign.choices.retain"},{id:"past-due-unassign-delete",name:"pastDueUnassignZero",value:r.Z.Delete.toString(),localizedKey:u+"unassign.choices.delete",descriptionKey:u+"unassign.choices.instructions"}];Object.assign(this.scope.modalTranslateOptions,{choices:e,choiceModal:e[0].value})}return this.scope.modalTranslateOptions}constructor(e,t,n,i,s){this.scope=e,this.element=t,this.attrs=n,this.$modal=i,this.bbLocalize=s,this.scope.$on(c,(e,t)=>{this.displayPastDueConfirmation(t)}),this.scope.$on(d,(e,t)=>{this.isPastZeroAssigned=t,this.displayPastDueConfirmation()})}}p.$inject=["scope","element","attrs","$modal",s.serviceName];class m{constructor(e){this.$injector=e,this.restrict="E",this.template=o,this.scope={confirmCallback:"&?",cancelCallback:"&?",dismissCallback:"&?"},this.link=(e,t,n)=>{e.pastDueZero=this.$injector.instantiate(p,{scope:e,element:t,attrs:n})}}}m.$inject=["$injector"],i.module(l,[]).directive("bbPastDueZero",["$injector",e=>e.instantiate(m)])},506462:function(e,t,n){"use strict";n.d(t,{e1:function(){return o}});var i=n(291146),s=n(916415),r=n(601404);let o="ultra.directives.group.group-count";!function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);r>3&&o&&Object.defineProperty(t,n,o)}([(0,s.wA)({moduleName:o,componentName:"bbGroupCount",template:r,bindings:{content:"<"},requireModules:[i.moduleName]})],class{$onInit(){}isSelfEnrollment(){return!!this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0&&this.content.selfEnrollmentGroups.some(e=>e.group&&!e.group.groupSetId)}})},22221:function(e,t,n){"use strict";n.d(t,{$w:function(){return m},e1:function(){return p}});var i=n(429794),s=n(372457),r=n(291146),o=n(247126),a=n(577162),l=n(352685),c=n(916415),d=n(211796);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.directives.group.group-student-enrollment",m=class{$onInit(){this.render()}async render(){if(this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0){let{locale:e,babelfishFormatter:t}=this.localize.getReactBabelfishParams(this.scope),n=this.content.selfEnrollmentGroups.filter(e=>e.group).map(e=>e.group);this.selfEnrollGroupInfo=await l.pL(n,e,t),this.isSelfEnrollment=this.selfEnrollGroupInfo.isSelfEnrollment}else this.isSelfEnrollment=!1}async openContentEnrollPanel(){this.fromView?this.ultraState.current.name.endsWith("discussion.view.with-grading.peek.discussion-details")?(await this.ultraState.leavePeekState(),await this.ultraState.leavePeekState(),await this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})):(await this.ultraState.leavePeekState(),await this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})):await this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id})}isBeforeEnrollment(){return this.selfEnrollGroupInfo&&"Before"===this.selfEnrollGroupInfo.enrollmentDateState}isOpenEnrollment(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState}isOpenEnrollmentWithEnding(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState&&null!=this.selfEnrollGroupInfo.relativeDate}isAfterEnrollment(){return this.selfEnrollGroupInfo&&"After"===this.selfEnrollGroupInfo.enrollmentDateState}constructor(e,t,n,i,s){this.scope=e,this.contentService=t,this.currentUserService=n,this.localize=i,this.ultraState=s,this.isSelfEnrollment=!1}};m=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(0,c.wA)({moduleName:p,componentName:"bbGroupStudentEnrollment",template:a,bindings:{content:"<",fromView:"@"},requireModules:[i.e1,s.e1,r.moduleName,o.e1]}),u(0,(0,d.tB)("$scope")),u(1,(0,d.tB)(i.HV)),u(2,(0,d.tB)(s.HV)),u(3,(0,d.tB)(r.serviceName)),u(4,(0,d.tB)(o.HV))],m)},389564:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(445218),s=n(397236);let r="ultra.components.directives.content.guidance-feature-announcement",o=(0,i.G5)({Class:s.nh,bindingNames:["announcementTitle","content","componentKey","doneButtonText","buttonAriaLabel","linkHref","linkText","onCloseAnnouncement","closeLabel"],withProvider:!0,withErrorModalBoundary:!1});angular.module(r,[]).component("bbGuidanceFeatureAnnouncement",o)},458516:function(e,t,n){"use strict";n.d(t,{XC:function(){return u},e1:function(){return d}}),n(939170);var i=n(276635),s=n(464027),r=n(18447),o=n(887545),a=n(369695),l=n(305233),c=n(268163);let d="ultra.components.directives.infiniteScroll",u="bbInfiniteScroll";class p{breakPromises(){i.forEach(this.promises,e=>{e.resolve()})}loadMoreItems(){this.remainingCount>0&&(this.isManualLoad=!0,this.scope.$eval(this.attrs.bbInfiniteScroll))}get loadMoreLocalizationValues(){return s.extend({},this.localizationValues,{loadCount:this.loadCount})}setLoadCount(){null!=this.loadLimit&&null!=this.remainingCount&&(this.loadCount=Math.min(this.loadLimit,this.remainingCount))}constructor(e,t,n,s,r,a,l){let d;this.scope=e,this.element=t,this.attrs=n,this.$compile=s,this.$q=r,this.timeout=a,this.toast=l,this.isManualLoad=!1,this.promises=[];let p=n.$observe("infiniteScrollTrayId",e=>{this.trayId=e,p()});if(n.infiniteScrollLocalizationKeysPrefix){let e=n.$observe("infiniteScrollLocalizationKeysPrefix",t=>{this.localizationKeysPrefix=t,this.trayLocalizationKeysPrefix=t+".saveTray",e()})}else this.localizationKeysPrefix="components.directives.infinite-scroll",this.trayLocalizationKeysPrefix="";n.infiniteScrollLocalizationValues&&(this.localizationValues=e.$eval(n.infiniteScrollLocalizationValues)),e.$watchGroup([n.infiniteScrollTotalCount,n.infiniteScrollCurrentCount],e=>{if(null!=e[0]&&null!=e[1]){if(this.totalCount=e[0],this.currentCount=e[1],this.remainingCount=this.totalCount-this.currentCount,this.remainingCount<0)throw Error(`The remainingCount of ${this.remainingCount} should never be a negative number!`);this.setLoadCount()}}),e.$watch(n.infiniteScrollDisabled,e=>{this.disabled=e});let m=e.$watch(n.infiniteScrollLoadLimit,e=>{null!=e&&(this.loadLimit=e,this.setLoadCount(),m())});s(t)(e),this.timeout(()=>{d=s(c)(e).insertAfter(t)},this.scope,0,!1),this.scope.$on(u,(e,t,s)=>{if(this.trayId!==t)return;let r=this.$q.defer();if(s.then(()=>{r.resolve()}).catch(()=>r.resolve()),this.promises.push(r),r.promise.then(()=>i.remove(this.promises,e=>s===e)),this.cancelLoading=this.toast.showLoading({trayId:t,trayLocalizationKeysPrefix:this.trayLocalizationKeysPrefix,promise:r.promise}),this.attrs.infiniteScrollFocusableChildrenSelector&&this.isManualLoad){this.isManualLoad=!1;let e=this.loadCount;s.then(()=>{this.timeout(()=>{let t=this.element.find(this.attrs.infiniteScrollFocusableChildrenSelector);o.Zl(t.eq(t.length-e),null,n.infiniteScrollForceShowAncestorSelector)},this.scope,0,!1)})}}),this.scope.$on("$destroy",()=>{d&&d.remove(),this.breakPromises(),this.cancelLoading&&this.cancelLoading()})}}p.$inject=["scope","element","attrs","$compile","$q",l.H,a.HV];class m{constructor(e){this.$injector=e,this.terminal=!0,this.compile=(e,t)=>(e,t,n)=>{let i=e.$eval(n.infiniteScrollCurrentCount),s=e.$eval(n.infiniteScrollTotalCount);null!=i&&null!=s&&i>=s||t.attr("infinite-scroll",n.bbInfiniteScroll),t.removeAttr("bb-infinite-scroll"),e.infiniteScroll=this.$injector.instantiate(p,{scope:e,element:t,attrs:n})}}}m.$inject=["$injector"],s.module(d,["infinite-scroll",l.e,a.e1]).value("THROTTLE_MILLISECONDS",r.default.infiniteScrollThrottleMS).directive("bbInfiniteScroll",["$injector",e=>e.instantiate(m)])},484034:function(e,t,n){"use strict";n.d(t,{PN:function(){return a},e1:function(){return o}}),n(418360);var i=n(276635),s=n(311303),r=n(625506);let o="bbIntersectionObservableDirective";function a(e=null){return function(t){return class extends t{constructor(...t){super(...t),this.require=[].concat(this.require||[]).concat([`^^?${s.E}`]),this.link=function(e,t=null){return function(n,s,r,o,a){let l=o[o.length-1],c=(0,i.once)(()=>{e.call(this,n,s,r,o,a)}),d=c;t&&t>0?d=(0,i.debounce)(()=>{c(),n.$evalAsync(i.noop)},t):d.cancel=i.noop,l?l.link(s[0],n,(e,t,n)=>{n.isIntersecting?d():d.cancel()}):c()}}(this.link||i.noop,e)}}}}let l="bbIntersectionObservable";angular.module(o,[]).directive(l,["$compile",function(e){let t={transclude:"element",priority:6e3,terminal:!0,require:`^^?${s.E}`,restrict:"A",link(t,n,s,o,a){if(!o)return a(function(e,t){n.replaceWith(e)});let c={placeholder:"div",debounce:0,...t.$eval(s[l]||"{}")},d=r(`<${c.placeholder} class="intersection-observable-placeholder"></${c.placeholder}>`);e(d)(t),n.replaceWith(d);let u=(0,i.debounce)((0,i.once)(()=>{a(function(e,t){o.unlink(d[0]),d.replaceWith(e)})}),c.debounce);o.link(d[0],t,(e,t,n)=>{n.isIntersecting?u():u.cancel()})}};return t}])},311303:function(e,t,n){"use strict";n.d(t,{E:function(){return a},e:function(){return o}});var i=n(276635),s=n(464027),r=n(305233);let o="ultra.service.intersectionobserver.directive",a="bbIntersectionObserver";s.module(o,[r.e]).directive(a,[function(){return{restrict:"A",scope:!1,controller:["$scope","$element",r.H,function(e,t,n){if("IntersectionObserver"in window){let t=[],s=new IntersectionObserver(r=>{i(r).map(e=>({entry:e,data:i.find(t,t=>t.el===e.target)})).each(({entry:e,data:n})=>{n.fn(n.el,n.scope,e)&&(i.remove(t,t=>t.el===e.target),s.unobserve(e.target))}),n(i.noop,e)},{root:null,rootMargin:"0px",threshold:0});e.$on("$destroy",function(){s.disconnect()}),Object.assign(this,{link(e,n,r){n.$on("$destroy",()=>{s.unobserve(e),i.remove(t,t=>t.el===e)}),s.observe(e),t.push({el:e,scope:n,fn:r})},unlink(e){s.unobserve(e),i.remove(t,t=>t.el===e)}})}else Object.assign(this,{link(e,t,n){n(e,t,{isIntersecting:!0,boundingClientRect:void 0,intersectionRatio:void 0,intersectionRect:void 0,rootBounds:void 0,target:e,time:void 0})},unlink:i.noop})}]}}])},401078:function(e,t,n){"use strict";n.d(t,{e1:function(){return d}}),n(684875),n(904051);var i=n(276635),s=n(464027),r=n(291146),o=n(887545),a=n(606592),l=n(489908),c=n(776517);let d="ultra.components.directives.modal";class u{handleKeyDown(e){e.keyCode===a.Mf?(e.preventDefault(),e.shiftKey?o.gW(this.element):o.Bv(this.element)):e.keyCode===a.hY&&(e.stopPropagation(),this.dismiss())}dismiss(){this.scope.modalDismissCallback?this.scope.modalDismissCallback():this.scope.$parent.$dismiss(),(0,c.sA)(c.Cs.ModelDismissed)}constructor(e,t,n,s,r){this.scope=e,this.element=t,this.attrs=n,this.transcludes=s,this.bbLocalize=r,this.ariaType="dialog",this.ariaType=e.modalAriaType?e.modalAriaType:this.ariaType,this.analyticsIdTagPrefix=e.analyticsIdTagPrefix||"";let o=e.modalTranslateOptions&&e.modalTranslateOptions();this.titleKey=e.modalTitleKey,this.titleString=r.translateSync(i.merge({key:e.modalTitleKey},o?o.title:{})),this.dismissKey=e.modalDismissKey,(e.modalDismissKey||o&&o.dismiss)&&(this.dismissString=r.translateSync(i.merge({key:e.modalDismissKey},o?o.dismiss:{})));let a=t.find("[name=modal-footer] button");t.find(".reveal-modal__footer").addClass("buttons-"+a.length+"-md")}}u.$inject=["scope","element","attrs","transcludes",r.serviceName];class p{constructor(e){this.$injector=e,this.replace=!0,this.restrict="E",this.template=l,this.transclude=!0,this.scope={modalDismissCallback:"&?",modalDismissKey:"@?",modalTitleKey:"@?",modalTranslateOptions:"&?",modalAriaType:"@?",analyticsIdTagPrefix:"@"},this.link=(e,t,n,i,s)=>{e.modal=this.$injector.instantiate(u,{scope:e,element:t,attrs:n,transcludes:s})}}}p.$inject=["$injector","$rootScope"],s.module(d,["multi-transclude"]).directive("bbModal",["$injector",e=>e.instantiate(p)])},287236:function(e,t,n){"use strict";n.d(t,{e1:function(){return s}});var i=n(464027);let s="ultra.directives.bbMouseLeaveEnter";class r{constructor(e){this.$rootScope=e,this.restrict="A",this.link=(e,t,n)=>{let i=()=>{e.$apply(()=>{this.$rootScope.$broadcast(n.bbMouseLeaveEnter+"-mouse-enter")})},s=()=>{e.$apply(()=>{this.$rootScope.$broadcast(n.bbMouseLeaveEnter+"-mouse-leave")})};e.$on("$destroy",()=>{t.off("mouseenter",i),t.off("mouseleave",s)}),t.on("mouseenter",i),t.on("mouseleave",s)}}}r.$inject=["$rootScope"],i.module(s,[]).directive("bbMouseLeaveEnter",["$injector",e=>e.instantiate(r)])},963341:function(e,t,n){"use strict";n.d(t,{Hz:function(){return I},e1:function(){return E}}),n(501535),n(801166),n(60117),n(200530),n(712354),n(880181),n(862744),n(818659),n(973778),n(950628);var i=n(276635),s=n(464027),r=n(294992),o=n(108404),a=n(291146),l=n(305233),c=n(109205),d=n(683356),u=n(916415),p=n(211796),m=n(606592),h=n(423652);let g="ultra.components.directives.overflow-menu.overflow-menu-icon",f=class{};f=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(0,u.wA)({moduleName:g,componentName:"bbOverflowMenuIcon",template:h,bindings:{iconName:"@",status:"@"}})],f);var b=n(370341),v=n(895135),y=n(625506);function C(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function S(e,t){return function(n,i){t(n,i,e)}}let E="ultra.components.directives.overflowMenu.overflowMenu";function I(e){return{titleKey:(0,o.Pc)(e,"title"),instructionsKey:(0,o.Pc)(e,"instructions")}}class w{show(){return!this.options.show||this.options.show()}disable(){return!!this.options.disable&&this.options.disable()}onClick(){this.disable()||(this.options.confirmationOptions?this.options.confirmationOptions.lazyLoadTitleKeyAndInstructionsKey?this.options.confirmationOptions.lazyLoadTitleKeyAndInstructionsKey().then(e=>{this.options.confirmationOptions.titleKey=e.titleKey||this.options.confirmationOptions.titleKey,this.options.confirmationOptions.instructionsKey=e.instructionsKey||this.options.confirmationOptions.instructionsKey,this.menu.showConfirmation(this.confirmationId),this.isConfirmationActive=!0}):(this.menu.showConfirmation(this.confirmationId),this.isConfirmationActive=!0):this.onConfirm())}isConfirmationMenuVisible(){return this.isConfirmationActive}blur(){this.isConfirmationActive=!1}getLabelKey(){return this.labelKey}onConfirm(e){e&&(this.integrationEventEmitterService.emitIntegrationEvent(e),e.preventDefault(),e.stopImmediatePropagation()),this.persistChoices(),this.menu.closeDropdown(),this.options.onClick(),this.isConfirmationActive=!1}onCancel(){this.menu.closeDropdown(),this.isConfirmationActive=!1}hasConfirmation(){return null!=this.options.confirmationOptions}hasChoices(){return this.hasConfirmation()&&this.options.confirmationOptions.choices&&this.options.confirmationOptions.choices.length>0}hasTextKey(){return this.textKey.length>0}persistChoices(){this.hasChoices()&&this.menu.persistChoices(this.options.confirmationOptions.choices)}addAdditionalAttributes(){if(this.additionalAttributes){let e=this.menu.menuElement.find("#"+this.id+"_li");Object.keys(this.additionalAttributes).forEach(t=>{e.attr(t,this.additionalAttributes[t])})}return!0}constructor(e,t,n,i){this.menu=e,this.name=t,this.options=n,this.integrationEventEmitterService=i,this.isConfirmationActive=!1,this.id=e.elementId+"_"+t,this.hasConfirmation()&&(this.confirmationId=this.id+"_confirmation"),this.textKey=n.textKey||"",this.bbClickFocus=n.bbClickFocus||"",this.ariaLabel=n.ariaLabel||(()=>""),this.disableInfo=n.disableInfo||"",this.additionalAttributes=n.additionalAttributes||null}}class A extends w{constructor(e,t,n){let i=t.uniqueId?t.uniqueId:"edit";super(e,i,t,n),this.icon=t.icon||"draw",this.labelKey=t.labelKey||"global.edit"}}A=C([S(0,(0,p.tB)("menu")),S(1,(0,p.tB)("options")),S(2,(0,p.tB)("integrationEventEmitterService"))],A);class k extends w{constructor(e,t,n){let i=t.uniqueId?t.uniqueId:"delete";super(e,i,t,n),this.icon=t.icon||"trash",this.labelKey=t.labelKey||"global.delete"}}k=C([S(0,(0,p.tB)("menu")),S(1,(0,p.tB)("options")),S(2,(0,p.tB)("integrationEventEmitterService"))],k);class x extends w{constructor(e,t,n){let i=t.uniqueId?t.uniqueId:t.icon;super(e,i,t,n),this.icon=t.icon,this.status=t.status,this.uniqueId=t.uniqueId,this.labelKey=t.labelKey}}x=C([S(0,(0,p.tB)("menu")),S(1,(0,p.tB)("options")),S(2,(0,p.tB)("integrationEventEmitterService"))],x);class T{addOptionsToMenuItems(e){this.scope.editOptions&&this.scope.editOptions()&&this.menuItems.push(this.$injector.instantiate(A,{menu:this,options:this.scope.editOptions(),integrationEventEmitterService:this.integrationEventEmitterService})),e&&e.length>0&&e.forEach(e=>{this.menuItems.push(this.$injector.instantiate(x,{menu:this,options:e,integrationEventEmitterService:this.integrationEventEmitterService}))}),this.scope.deleteOptions&&this.scope.deleteOptions()&&this.menuItems.push(this.$injector.instantiate(k,{menu:this,options:this.scope.deleteOptions(),integrationEventEmitterService:this.integrationEventEmitterService})),this.checkAndUpdateForSingleMenu(),this.confirmationNeededMenuItems=i.filter(this.menuItems,e=>e.hasConfirmation())}repositionMenuIfNeeded(){let e=this.element.find(".f-dropdown-overflow-menu"),t=this.element.find(".overflow-menu-button");if(0!==e.length&&(e.removeClass("align-top"),e.offset().top+e.outerHeight()+8>=y(document).height())){e.addClass("align-top");let n=t.position().top+parseInt(t.css("margin-top"),10);e.css("top",0-e.outerHeight()+4+n)}}initWindowResizeHandler(){u.ZU.OnWindow("resize",()=>{this.resetDropdownMenuStyles(),this.repositionMenuIfNeeded()},this.scope)}resetDropdownMenuStyles(){let e=y(".guidance-wrapper .f-dropdown.f-dropdown-overflow-menu");e.each(t=>{y(e[t]).removeAttr("style")})}show(){return this.menuItems.length>0&&this.menuItems.some(e=>e.show())}hasUniqueId(e){return!!this.element.find('a[id*="'+e+'"]').length}closeDropdown(){let e=this.element.find(".f-open-dropdown:visible");this.element.foundation("dropdown","close",e)}toggleDropdown(){let e=this.element.find(".overflow-menu-button");this.element.foundation("dropdown","toggle",e)}showConfirmation(e){this.timeout(()=>{this.element.find("[data-dropdown-content]").addClass("bb-foundation-dropdown-tab-override"),null==this.dialogMap[e]&&(this.dialogMap[e]=this.element.find("#"+e)),this.dialogMap[e].show(),this.element.find(".js-menu-item-list").hide(),this.menuItems.some(e=>s.isDefined(e.disable))&&y("body").find(".enhanced-tooltip").attr("aria-hidden","true").css({top:0,left:0}),this.ignoreCloseEvent=!0,this.toggleDropdown(),this.toggleDropdown(),this.ignoreCloseEvent=!1},this.scope)}getButtonAriaLabel(){let e;e=null!=this.scope.elementName?"components.directives.overflow-menu.menu-button.aria-label":"components.directives.overflow-menu.menu-button.title";let t={locale:this.bbLocalize.getLocale(this.scope),key:e,noWrap:!0};null!=this.scope.elementName&&(t.params={elementName:this.$sce.trustAsHtml(this.scope.elementName)});let n=this.bbLocalize.translateSync(t);return n}getTextByKey(e){let t={locale:this.bbLocalize.getLocale(this.scope),key:e,noWrap:!0};return this.bbLocalize.translateSync(t)}hasOptionText(){return this.menuItems.length>0&&this.menuItems.some(e=>e.hasTextKey())}persistChoices(e){e&&e.length&&e.forEach(e=>{this.scope.$emit(e.key,e.value)})}addMenuItem(e){let t=this.$injector.instantiate(x,{menu:this,options:e,integrationEventEmitterService:this.integrationEventEmitterService}),n=this.indexOfExistingMenuItem(e,this.menuItems);n>-1||(this.menuItems.push(t),this.checkAndUpdateForSingleMenu(),this.confirmationNeededMenuItems=i.filter(this.menuItems,e=>e.hasConfirmation()))}indexOfExistingMenuItem(e,t){let n=i.findIndex(t,t=>e.labelKey===t.getLabelKey());return n}onOptionKeydown(e){(e.keyCode===m.K5||e.keyCode===m.L_)&&e.preventDefault()}isSingleMode(){var e,t;return null===(t=(e=this.scope).isSingleMode)||void 0===t?void 0:t.call(e)}ignoreAccordion(){var e,t;return null===(t=(e=this.scope).ignoreAccordion)||void 0===t?void 0:t.call(e)}checkAndUpdateForSingleMenu(){this.isSingleMode()&&this.menuItems.length&&(this.menuItems=this.menuItems.slice(0,1),this.singleMenuItem=this.menuItems[0])}buildAnalyticsId(e){return e.additionalAttributes&&e.additionalAttributes.analyticsIdOverride?e.additionalAttributes.analyticsIdOverride:`${this.scope.analyticsIdTagPrefix}.${e.labelKey}.link`}constructor(e,t,n,s,r,o,a,l){this.scope=e,this.element=t,this.$injector=n,this.$sce=s,this.bbLocalize=r,this.timeout=o,this.dropdownInit=a,this.integrationEventEmitterService=l,this.menuItems=[],this.confirmationNeededMenuItems=[],this.visibleMenuItemsFilter=e=>e.show(),this.ignoreCloseEvent=!1,this.dialogMap={},this.initDropdownMenu=i.once(()=>{this.dropdownInit(this.element,this.scope),this.timeout(()=>{this.element.find(".js-menu-item-list a").first().focus()},this.scope,100)}),this.isRtl=r.isRTL(e),this.menuElement=t,this.elementId=e.elementId,this.menuDirection=`align:${this.isRtl?"right":"left"}`;let c=[];e.menuItems&&e.menuItems()&&(c=e.menuItems()),this.addOptionsToMenuItems(c),this.initWindowResizeHandler(),this.element.on("closed.fndtn.dropdown",".f-open-dropdown",()=>{e.menuWasToggled(!1),this.ignoreCloseEvent||(this.element.find(".menu-icon-confirmation").hide(),this.element.find("[data-dropdown-content]").removeClass("bb-foundation-dropdown-tab-override"),this.element.find(".js-menu-item-list").show())}),this.element.on("opened.fndtn.dropdown",".f-dropdown-overflow-menu",()=>{e.menuWasToggled(!0),this.initDropdownMenu(),this.repositionMenuIfNeeded()}),e.menuItems&&e.$on("menuItems.update",(e,t,n)=>{this.elementId===t&&(this.menuItems=[],this.addOptionsToMenuItems(n))})}}C([(0,p.aM)("elementName","locale")],T.prototype,"getButtonAriaLabel",null),T=C([S(0,(0,p.tB)("scope")),S(1,(0,p.tB)("element")),S(2,(0,p.tB)("$injector")),S(3,(0,p.tB)("$sce")),S(4,(0,p.tB)(a.serviceName)),S(5,(0,p.tB)(l.H)),S(6,(0,p.tB)(c.H)),S(7,(0,p.tB)(d.HV))],T);class P{setMenu(e){this.menu=e,this.queuedMenuItems.length>0&&this.queuedMenuItems.forEach(e=>{this.addMenuItem(e)})}addMenuItem(e){this.menu?this.menu.addMenuItem(e):this.queuedMenuItems.push(e)}destroyMenu(){this.menu=null,this.queuedMenuItems=[]}constructor(e){this.$injector=e,this.queuedMenuItems=[]}}P.$inject=["$injector"];class D{constructor(e,t,n){this.$compile=e,this.$injector=t,this.bbLocalize=n,this.restrict="E",this.template=b,this.require="?^^bbOverflowMenuContainer",this.scope={elementId:"@",elementName:"@?",editOptions:"&?",deleteOptions:"&?",menuItems:"&?",isDisabled:"&?",isSingleMode:"&?",onMenuToggle:"&?",analyticsIdTagPrefix:"@",ignoreAccordion:"&?"},this.link=(e,t,n,i)=>{this.bbLocalize.loadBundle("components/directives/overflow-menu"),this.bbLocalize.loadBundle("components/directives/confirmation-needed"),e.menuWasToggled=t=>{e.onMenuToggle&&e.$applyAsync(()=>e.onMenuToggle({isOpen:t}))},e.overflowMenu=this.$injector.instantiate(T,{scope:e,element:t}),i&&(i.setMenu(e.overflowMenu),e.$on("$destroy",()=>{i.destroyMenu()}))}}}D=C([S(0,(0,p.tB)("$compile")),S(1,(0,p.tB)("$injector")),S(2,(0,p.tB)(a.serviceName))],D);class G{constructor(e,t){this.$compile=e,this.$injector=t,this.restrict="A",this.controller=P}}G.$inject=["$compile","$injector"],s.module(E,[r.e1,o.e1,a.moduleName,g,l.e,c.e,d.e1,v.e]).directive("bbOverflowMenu",["$injector",e=>e.instantiate(D)]).directive("bbOverflowMenuContainer",["$injector",e=>e.instantiate(G)])},702991:function(e,t,n){"use strict";n.d(t,{e1:function(){return m},gJ:function(){return h}});var i=n(276635),s=n(625506),r=n(464027),o=n(206745),a=n(305233),l=n(291146),c=n(916415),d=n(757267),u=n(376874),p=n(549777);let m="ultra.components.directives.saveTray";class h{getTemplateHtml(){return this.template}static getTrayType(e){switch(e){case"LoadMoreResults":return h.LoadMoreResults;case"Toast":return h.Toast;default:return h.Default}}constructor(e,t,n){this.template=e,this.msgKeysSuffix=t,this.eventName=n}}h.Default=new h(d,{inProgress:"saving",success:"success",error:"error"},"bb-save-tray-start"),h.LoadMoreResults=new h(u,{inProgress:"loadingMoreItems",success:"itemsLoaded",error:"itemsFailedToLoad"},"bb-load-more-results-start"),h.Toast=new h(p);class g{sendMessageToScreenReader(e,t,n){t&&e.$root.$emit("read-info-directive-alert",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.localizationKeysPrefix+"."+t}),n)}sendStatusMessage(e,t){"true"===e.emitStatusEvent&&e.$root.$emit("save-tray-status-event",t)}constructor(e,t,n,r,o){if(this.scope=e,this.spinner=n,this.timeout=r,this.bbLocalize=o,this.inProgress=!1,this.localizationKeysPrefix=e.trayLocalizationKeysPrefix||"components.directives.save-tray",this.footer=t.closest("footer"),e.toastMessage&&e.toastMessage()){if(t.find(".notification-container span.progress-status").html(e.toastMessage()),e.toastShortMessage&&e.toastShortMessage()){let n,r=!1,o=!1,a=!0,l=t.find(".notification-container span.progress-status"),d=()=>{let t=s(window).width();l[0].offsetWidth<l[0].scrollWidth?(r||(n=t),r=!0,a&&(o=!0),l.html(e.toastShortMessage())):t>n&&!o&&(r=!1,l.html(e.toastMessage())),a=!1};this.timeout(d,e,0);let u=i.debounce(d,100);c.ZU.OnWindow("resize",u,e)}}else this.spinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5,successCallback:()=>{var t,n;this.status="success",this.inProgress=!1,this.sendStatusMessage(e,this.status),this.sendMessageToScreenReader(e,null!==(n=null===(t=e.trayType.msgKeysSuffix)||void 0===t?void 0:t.success)&&void 0!==n?n:""),e.$apply()},errorCallback:()=>{var t,n;this.status="error",this.inProgress=!1,this.sendStatusMessage(e,this.status),this.sendMessageToScreenReader(e,null!==(n=null===(t=e.trayType.msgKeysSuffix)||void 0===t?void 0:t.error)&&void 0!==n?n:""),e.$apply()}},e.$on("save-tray-spinner-status-update",(e,t)=>{if(this.spinnerObject)return t?this.spinnerObject.complete():this.spinnerObject.error()}),e.$on(e.trayType.eventName,(n,i,s,r,o,a)=>{var l,c;e.trayId===i&&(this.status="",this.canvasElement||(this.canvasElement=t.find(".canvas")),r&&(this.spinnerArgs=r),this.footer.addClass("is-active"),this.spinnerObject||(this.spinnerObject=this.spinner.initInlineLoader(this.canvasElement,this.spinnerArgs)),this.inProgress||(this.spinnerObject.start(),this.inProgress=!0),this.timeoutComplete=!1,this.activeTimeout&&!this.timeoutComplete&&this.timeout.cancel(this.activeTimeout),this.sendMessageToScreenReader(e,null!==(c=null===(l=e.trayType.msgKeysSuffix)||void 0===l?void 0:l.inProgress)&&void 0!==c?c:"",0),s.then(()=>{o?(this.activeTimeout=this.timeout(()=>{this.footer.removeClass("is-active"),this.timeoutComplete=!0,this.scope.$root.$broadcast("bbSaveTrayComplete")},e,a||g.ACTIVE_TIMEOUT_LENGTH,!0),this.spinnerObject.complete()):this.spinnerObject.error()},e=>{e&&"canceled"===e.$status||this.spinnerObject.error()}))})}}g.$inject=["scope","element",o.HV,a.H,l.serviceName],g.ACTIVE_TIMEOUT_LENGTH=6e3;class f{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="E",this.scope={trayId:"@?",trayLocalizationKeysPrefix:"@?",toastMessage:"&?",toastShortMessage:"&?",toastClass:"&?",toastIcon:"&?",toastStatus:"&?",emitStatusEvent:"@?"},this.link=(e,t,n)=>{n.trayType?e.trayType=h.getTrayType(n.trayType):e.trayType=e.toastMessage&&e.toastMessage()?h.Toast:h.Default,t.append(this.$compile(e.trayType.getTemplateHtml())(e)),e.saveTray=this.$injector.instantiate(g,{scope:e,element:t})}}}f.$inject=["$injector","$compile"],r.module(m,[o.e1,a.e,l.moduleName]).directive("bbSaveTray",["$injector",e=>e.instantiate(f)])},491966:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(464027),s=n(136742),r=n(529462),o=n(571346);let a="ultra.components.directives.squareToggle";class l{handleKeyUp(e){(13===e.keyCode||32===e.keyCode)&&(this.scope.property=e.target.value)}handleClick(e){this.scope.property=e.target.value}constructor(e,t,n){this.scope=e,this.element=t,this.attrs=n,this.radioGroupName=r.d(),this.oneControlId=r.d(),this.twoControlId=r.d()}}l.$inject=["scope","element","attrs"];class c{constructor(e){this.$injector=e,this.restrict="E",this.template=o,this.scope={oneIconClass:"@",oneAriaLabel:"@",oneAriaControls:"@?",oneViewValue:"@",oneTooltipTemplate:"@?",oneTooltipScope:"&?",property:"=",twoIconClass:"@",twoAriaLabel:"@",twoAriaControls:"@?",twoViewValue:"@",twoTooltipTemplate:"@?",twoTooltipScope:"&?",analyticsIdTagPrefix:"@?"},this.compile=(e,t)=>(i.isDefined(t.oneTooltipTemplate)&&e.find("input.input-one").attr("bb-complex-tooltip",""),i.isDefined(t.twoTooltipTemplate)&&e.find("input.input-two").attr("bb-complex-tooltip",""),{post:(e,t,n)=>{e.squareToggle=this.$injector.instantiate(l,{scope:e,element:t,attrs:n})}})}}c.$inject=["$injector"],i.module(a,[s.e1]).directive("bbSquareToggle",["$injector",e=>e.instantiate(c)])},133667:function(e,t,n){"use strict";n.d(t,{e1:function(){return m}}),n(409721);var i=n(464027),s=n(513910);let r="ultra.components.directives.statistics.complexStatistic";class o{constructor(e,t,n){this.scope=e,this.element=t,this.$compile=n;let i=this.$compile(this.scope.item().complexTemplate)(this.scope.item().complexScope);t.append(i)}}o.$inject=["scope","element","$compile"];class a{constructor(e){this.$injector=e,this.replace=!0,this.restrict="A",this.template=s,this.scope={item:"&"},this.link=(e,t)=>{e.complexStatistic=this.$injector.instantiate(o,{scope:e,element:t})}}}a.$inject=["$injector"],i.module(r,[]).directive("bbComplexStatistic",["$injector",e=>e.instantiate(a)]);var l=n(324612);let c="ultra.components.directives.statistics.simpleStatistic";class d{constructor(e,t){this.scope=e,this.$sce=t,this.scope.item().trusted=t.trustAsHtml(this.scope.item().data)}}d.$inject=["scope","$sce"];class u{constructor(e){this.$injector=e,this.replace=!0,this.restrict="A",this.template=l,this.scope={item:"&"},this.link=e=>{e.simpleStatistic=this.$injector.instantiate(d,{scope:e})}}}u.$inject=["$injector"],i.module(c,[]).directive("bbSimpleStatistic",["$injector",e=>e.instantiate(u)]);var p=n(43485);let m="ultra.components.directives.statistics";class h{constructor(e){this.scope=e,this.smallPerRow=e.smallPerRow()||1,this.largePerRow=e.largePerRow()||4,this.scope.$watch("config()",e=>{e&&(this.config=e.length>10?e.slice(0,10):e,this.total=this.config.length)})}}h.$inject=["scope"];class g{constructor(e){this.$injector=e,this.replace=!0,this.restrict="AE",this.template=p,this.scope={config:"&",smallPerRow:"&",largePerRow:"&"},this.link=e=>{e.statistics=this.$injector.instantiate(h,{scope:e})}}}g.$inject=["$injector"],i.module(m,["dibari.angular-ellipsis",r,c]).directive("bbStatistics",["$injector",e=>e.instantiate(g)])},451374:function(e,t,n){"use strict";n.d(t,{e1:function(){return h}});var i,s,r=n(464027),o=n(291601),a=n(339409),l=n(211796),c=n(624930),d=n(719164),u=n(408027);function p(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function m(e,t){return function(n,i){t(n,i,e)}}let h="ultra.components.directives.submissionCard";(i=s||(s={})).Attempt="ATTEMPT",i.Grade="GRADE",i.Info="INFO";class g{shouldExpandForRubricIcon(){return(this.scope.showRubricButton&&this.scope.showRubricButton()||this.scope.showRubricDiv&&this.scope.showRubricDiv())&&this.scope.gradingColumn.hasRubricAssociation&&this.scope.gradingColumn.hasRubricAssociation()}get showLateIcon(){return this.showLate&&(!this.scope.gradeDetail||!this.attempt||this.attempt.isInProgress())}constructor(e){let t,n;if(this.scope=e,!(e.gradingColumn||e.gradeDetail))throw new c.v({message:"gradingColumn or gradeDetail must be provided."});if(this.scope.gradeDetail&&!this.scope.gradeDetail.column)throw new c.v({message:"gradeDetail.column must be provided to display attempt mode."});switch(this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)&&(this.attempt=this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt,this.currentGradeStatus=this.scope.gradeDetail.ui.attempt.status),(!e.gradeDetail||e.gradeDetail&&!this.attempt)&&e.gradingColumn?this.scope.mode=s.Info:e.gradeDetail&&this.attempt&&(this.scope.mode=s.Attempt,this.scope.gradingColumn=this.scope.gradeDetail.column),this.showLate=!e.showLate||e.showLate(),e.mode){case s.Info:n=e.gradingColumn.dueDate?"DUE":"NO_DUE_DATE",t=this.showLate?"UNOPENED_LATE":"UNOPENED";break;case s.Attempt:n=this.attempt.status.toString(),e.hasAttempt=!0,t=u.I$9.InProgress===this.attempt.status&&this.showLate?"SUBMISSION_LATE":"SUBMISSION";case s.Grade:}e.status="components.directives.submission-card.attemptStatus."+n,e.title="components.directives.submission-card.title."+t}}g=p([m(0,(0,l.tB)("scope"))],g);class f{constructor(e){this.$injector=e,this.restrict="AE",this.template=d,this.scope={gradeDetail:"=?",gradingColumn:"=?",inline:"@?",clickable:"=?",showLate:"&?",showRubricButton:"&?",showRubricDiv:"&?"},this.link=e=>{e.submissionCard=this.$injector.instantiate(g,{scope:e})}}}f=p([m(0,(0,l.tB)("$injector"))],f),r.module(h,[o.e,a.e1]).directive("bbSubmissionCard",["$injector",e=>e.instantiate(f)])},853321:function(e,t,n){"use strict";n.d(t,{e1:function(){return g}});var i,s,r,o,a=n(916415),l=n(211796);(i=r||(r={}))[i.LeftToRight=0]="LeftToRight",i[i.Bidirectional=1]="Bidirectional",(s=o||(o={})).Small="small",s.Medium="medium",s.Large="large",s.Custom="custom";let c={directionality:r.Bidirectional},d=e=>e.reduce((e,t)=>({...e,[t]:{...c}}),{}),u={[o.Small]:d(["peer-review","history","time","timer","reminder","add-reminder","no-time-limit","faster","slower","help","information","search","accommodation","away","add-circle-extended","invisible","netstats-unavailable","text","camera","type-size","close-captioning","bulk-edit","draw","edit","highlighter","erase","link","unlinked","check","attempts","attendance","square-checked","complete","play-start","volume-low","volume-medium","volume-mute","volume","mute-audio","telephony","mute-phone","audio","collab","collab-off","mute-video","record","recording","stop-recording","video","start","stop","raise-hands","lower-hand","hand-pointer","approval","disapproval","status-approval","edit-tool","course-complete","notes","safe-assign","app","broken-app","custom-content","whiteboard","format_text_default","format_text","italicize_default","italicize","subscript_default","subscript","superscript_default","superscript","underline_default","underline","bold_default","bold","calculation","strikethrough","insert_formula"]),[o.Medium]:d(["peer-review","hand-raise","shape-line","history","time","timer","reminder","add-reminder","no-time-limit","help","help-circle","information","search","zoom-in","zoom-out","exempt","disabled","status-away","invisible","risk-low","text","camera","capture","type-size","close-captioning","download-captions","link","pencil","highlighter","erase","tools","pen","brush","check","check-circle","attempts","audio-mute","cam-mic","audio","telephony","mute-phone","hang-up","sound-on","sound-off","collab","download-recording","video","record","stop-recording","video","video-mute","stop-action","play-start","raise-hand","lower-hand","hand-pointer","pan","asl-interpreter","edit-tool","course-complete","content-view","safe-assign","grades","attendance","wiki","app","app-off","calculation","whiteboard"]),[o.Large]:d(["app-c","attendance-a","attendance","audio-a","audio-c","audio","calculation-a","calculation-c","calculation","certification-a","certification-c","certification","check-circle-c","check-circle","collaborate-a","collaborate-c","collaborate","coming-soon","course-complete","database-connected","diploma-a","diploma-c","diploma","field-work-a","field-work-c","field-work","fill-in-the-blank-a","fill-in-the-blank","grades-a","grades-c","grades","help-a","help-c","help","information","raise-hand-a","raise-hand-c","raise-hand","record-a","record-c","record","reminder-a","reminder-c","reminder","rubric-a","rubric-c","rubric","scormengine-a","scormengine-sco-a","scormengine-sco","scormengine","stop-recording-a","stop-recording-c","stop-recording","support-document-a","support-document-c","support-document","technical-diploma-a","technical-diploma-c","technical-diploma","text-box-a","text-box","timer-a","timer-c","timer","video-a","video-c","video","whiteboard-a","whiteboard-c","whiteboard","wiki-a","wiki-c","wiki"]),[o.Custom]:{}};var p=n(396184);function m(e,t){return function(n,i){t(n,i,e)}}let h=["active","alert","success","warning"],g="ultra.components.directives.svgIcon",f=class{$onInit(){this.windowHref=window.location.href,this.updateIconState(),this.setStatusStyles(),this.destroyLocationChangeListener=this.$rootScope.$on(p.G.$locationChangeSuccess,()=>{this.windowHref=window.location.href,this.updateIconState()})}$onChanges(){this.updateIconState()}$onDestroy(){this.destroyLocationChangeListener()}updateIconState(){var e,t;this.directionalStyles=(null===(e=u[this.size])||void 0===e?void 0:null===(t=e[this.icon])||void 0===t?void 0:t.directionality)===r.Bidirectional?"":"directional-icon",this.iconHref=`${this.windowHref}#icon-${this.size}-${this.icon}`}setStatusStyles(){this.color?this.statusStyles="color":null!=h.find(e=>this.status)?this.statusStyles=this.status:this.statusStyles="default"}constructor(e,t){this.$rootScope=e,this.$element=t}};!function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);r>3&&o&&Object.defineProperty(t,n,o)}([(0,a.wA)({moduleName:g,componentName:"bbSvgIcon",template:`
    <svg
      class="svg-icon svg-icon-directive {{::$ctrl.size}}-icon {{::$ctrl.statusStyles}} {{
        $ctrl.directionalStyles
      }}"
      focusable="false"
      aria-hidden="true"
      bb-cache-compilation="svg-icon"
    >
      <use xlink:href="" ng-href="{{ $ctrl.iconHref }}"></use>
    </svg>
  `,bindings:{icon:"@",color:"<",size:"@",status:"@"}}),m(0,(0,l.tB)("$rootScope")),m(1,(0,l.tB)("$element"))],f)},709620:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(464027),s=n(489081),r=n(860858),o=n(776101);let a="ultra.components.directives.table.tableCell";class l{getColumn(){this.column=this.ctrl.getConfig().columns[this.scope.columnIndex()]}handleAlternateText(){if(this.column&&this.column.alternateTextFn){let e=this.column.alternateTextFn(this.scope.item);this.element.find(".alternate-contents").text(e),this.element.find(".transclude-container").attr("aria-hidden","true")}}constructor(e,t,n){this.scope=e,this.element=t,this.ctrl=n,this.getColumn(),this.handleAlternateText()}}l.$inject=["scope","element","ctrl"];class c{constructor(e){this.$injector=e,this.require="^bbTable",this.restrict="E",this.replace=!0,this.transclude=!0,this.template=function(e,t){return"true"===t.header?o:r},this.scope={columnIndex:"&",header:"@"},this.link=(e,t,n,i,s)=>{e.item=e.$parent.$parent.item,e.tableCell=this.$injector.instantiate(l,{scope:e,element:t,ctrl:i}),s((n,i)=>{i.item=e.item,t.find(".transclude-container").append(n)})}}}c.$inject=["$injector"],i.module(a,[s.e1]).directive("bbTableCell",["$injector",e=>e.instantiate(c)])},489081:function(e,t,n){"use strict";n.d(t,{SQ:function(){return u},e1:function(){return d}});var i=n(276635),s=n(464027),r=n(529462),o=n(458516),a=n(291146),l=n(948319),c=n(764253);let d="ultra.components.directives.table";function u(e,t,n){let i=e+"("+t+")";return n&&(i+=","+n+"("+t+")"),i}class p{init(){let e=this.scope.config();e.instanceId=e.instanceId||r.d(),e.currentSortDirection=e.currentSortDirection||"asc",e.currentSortColumnIndex=e.currentSortColumnIndex||0,e.columns.forEach(e=>{s.isUndefined(e.visible)&&(e.visible=!0)});let t=this.scope.$watchCollection("tableData()",e=>{s.isArray(e)&&(this.initialDataLoaded=!0,t())});if(e.customBreakpointFn){let t=i.throttle(t=>{e.customBreakpointFn(t)},500);this.scope.$watch(()=>l.nS(),e=>{t(e)})}this.addEventListeners(),this.setCaption()}addEventListeners(){this.element.on("click","tr th.sortable-header",e=>{let t=s.element(e.currentTarget),n=t.attr("data-heading-index");if(s.isDefined(n)){let e=parseInt(n,10);this.sort(e)}})}setCaption(){let e=this.scope.config();this.localizeService.loadBundle("components/directives/table").then(()=>{let t=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.table.caption",params:{caption:e.title,column:e.columns[e.currentSortColumnIndex].heading,direction:this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.table."+e.currentSortDirection})},noWrap:!0});this.element.find("caption").text(t)})}sort(e){let t=this.scope.config();this.initialDataLoaded=!1,t.currentSortColumnIndex===e?t.currentSortDirection="asc"===t.currentSortDirection?"desc":"asc":t.currentSortDirection="asc",t.currentSortColumnIndex=e,this.scope.$emit("table.sorted",{instanceId:t.instanceId,columnIndex:t.currentSortColumnIndex,sortDirection:t.currentSortDirection,callback:()=>{this.initialDataLoaded=!0,this.setCaption()}})}showMore(){this.throttledShowMore()}constructor(e,t,n,r){this.scope=e,this.element=t,this.$q=n,this.localizeService=r,this.fetchingMoreRows=!1,this.initialDataLoaded=!1,this.throttledShowMore=i.throttle(()=>{let e=this.scope.config();if(this.scope.tableData().length<e.totalCount&&!this.fetchingMoreRows){this.fetchingMoreRows=!0;let t=this.$q.defer();this.scope.$emit("table.showMore",{instanceId:e.instanceId,callback:e=>{t.resolve(e)}}),this.scope.$root.$broadcast(o.XC,e.instanceId+"-scroll-tray",t.promise),t.promise.then(()=>{this.fetchingMoreRows=!1})}},500);let a=this.scope.$watch("config()",e=>{s.isDefined(e)&&(a(),this.init())})}}p.$inject=["scope","element","$q",a.serviceName];class m{constructor(e){this.$injector=e,this.restrict="E",this.template=c,this.transclude=!0,this.scope={config:"&",tableData:"&"},this.controller=["$scope",function(e){this.getConfig=function(){return e.config()}}],this.link=(e,t)=>{e.table=this.$injector.instantiate(p,{scope:e,element:t})}}}m.$inject=["$injector"],s.module(d,[o.e1,a.moduleName]).directive("bbTable",["$injector",e=>e.instantiate(m)])},996159:function(e,t,n){"use strict";n.d(t,{e1:function(){return x}}),n(735296),n(655511),n(501535),n(756184);var i=n(464027),s=n(276635),r=n(948319),o=n(291146),a=n(133667),l=n(449522),c=n(853321),d=n(294992),u=n(247126),p=n(471915),m=n(677076),h=n(575583),g=n(168132),f=n(385270),b=n(470269),v=n(343597),y=n(599017);let C="ultra.components.directives.bbUiIcon.medium.Messages";(0,v.n)(y.V,C,"bbUiIconMediumMessages");var S=n(916415),E=n(566934),I=n(776517),w=n(951248),A=n(389860),k=n(625506);let x="ultra.components.directives.discussion";class T{notifyMobileApp(){var e;let t={type:I.Cs.DiscussionTelemetryOpened,status:I.rJ.Success,contentId:this.scope.contentId,contentTitle:this.scope.content().title,prevState:(0,I.zb)(null===(e=this.ultraState.prev)||void 0===e?void 0:e.name)};(0,I.Db)(t)}createDfiReport(e,t,n){let i=n?this.telemetry.loadDiscussionActivityData(e,t,n):this.telemetry.loadDiscussionActivityData(e,t);i.then(e=>{this.scope.discussionData=e,this.scope.header=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.header",params:{title:this.scope.content().title},noEscape:!0,noWrap:!0}),this.scope.course=this.courseModel.$find(this.scope.courseId),this.scope.isSingleGroup=!!n,this.scope.groups=this.scope.discussionData.groups,this.scope.isGradable=!!this.scope.discussionData.gradeColumnId,this.scope.gradingColumn=this.scope.discussionData.gradeColumnId,this.scope.viewedOnlyCount=this.scope.discussionData.viewedOnlyCount,this.scope.avgCommentsPerStudent=this.scope.discussionData.avgCommentsPerStudent?this.scope.discussionData.avgCommentsPerStudent:0,this.scope.avgWordCountPerComment=this.scope.discussionData.avgWordCountPerComment?this.scope.discussionData.avgWordCountPerComment:0,this.scope.avgGradeOfDiscussion=this.scope.discussionData.avgGrade?this.scope.discussionData.avgGrade/100:0,this.scope.numberOfCommentsToDisplay=1,this.scope.topComments=[],this.scope.displayTopComments=!1,this.scope.topParticipants=[],this.scope.displayTopParticipants=!1,this.scope.nonParticipants=[],this.scope.showNonparticipant=[],this.scope.showLargeNonparticipantPanel=!0,this.scope.minHeightForTopBoxes="auto",this.scope.nonParticipants=this.getNonParticipants(),this.scope.displayNonParticipants=!!this.scope.nonParticipants.length&&!this.scope.isGroupDiscussion,this.scope.displayNonParticipantGroups=!!this.scope.nonParticipants.length&&this.scope.isGroupDiscussion&&!this.scope.isSingleGroup,this.scope.displayNonParticipantGroup=!!this.scope.nonParticipants.length&&this.scope.isGroupDiscussion&&this.scope.isSingleGroup,this.scope.nonParticipantGroups=this.scope.displayNonParticipantGroups?this.getNonParticipantGroups():[],this.scope.totalNonParticipants=this.scope.nonParticipants.length,this.scope.totalParticipants=this.scope.discussionData.totalParticipants+this.scope.totalNonParticipants,this.scope.displayedNonParticipants=24,this.scope.additionalNonParticipants=this.scope.totalNonParticipants,this.scope.currentPanelWidth=0,this.scope.lastPanelWidth=-1,this.scope.isLoaded=!0;for(let e=0;e<this.scope.displayedNonParticipants;e++)this.scope.showNonparticipant[e]=!0;this.getTopComments(),this.getTopParticipants(),this.getParticipantBarChart(),this.updateNonParticipantView(),this.scope.statisticsConfig=this.getSummaryInsightNumbers(),this.scope.topCommentsColumns=this.scope.displayTopComments&&this.scope.displayTopParticipants?"small-12 medium-8 large-9":"small-12",this.scope.topParticipantColumns=this.scope.displayTopComments&&this.scope.displayTopParticipants?"small-12 medium-4 large-3":"small-12"})}getSummaryInsightNumbers(){let e=this.bbLocalize.getLocale(this.scope),t=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.numParticipants"}),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.formattedParticipation",params:{count:this.scope.totalParticipants-this.scope.totalNonParticipants,total:this.scope.totalParticipants},noWrap:!0}),i=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgComments"}),s=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgCount"}),r=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgGrade"}),o=this.scope.isGradable&&this.scope.avgGradeOfDiscussion>0?this.bbLocalize.formatPercentageSync(this.scope.avgGradeOfDiscussion,this.scope):this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.na"}),a=[];return a.push({title:t,data:n}),a.push({title:i,data:this.bbLocalize.formatNumberSync(this.scope.avgCommentsPerStudent,this.scope).toString()}),this.scope.avgWordCountPerComment&&this.scope.avgWordCountPerComment>0&&a.push({title:s,data:this.bbLocalize.formatNumberSync(this.scope.avgWordCountPerComment,this.scope).toString()}),this.scope.isGradable&&a.push({title:r,data:o}),a}getParticipantBarChart(){let e=0,t=0,n=100,i=this.scope.totalParticipants-this.scope.totalNonParticipants;this.scope.totalParticipants>0?n=100-((e=Math.floor((this.scope.totalParticipants-this.scope.totalNonParticipants)/this.scope.totalParticipants*100))+(t=Math.floor(this.scope.viewedOnlyCount/this.scope.totalParticipants*100))):(e=0,t=0,n=100),k(".bar-chart .participated").attr("style","width: "+e+"%"),k(".bar-chart .opened").attr("style","width: "+t+"%"),k(".bar-chart .unopened").attr("style","width: "+n+"%");let s=this.scope.totalNonParticipants-this.scope.viewedOnlyCount;this.scope.barchartNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartNonParticipants",params:{count:s},noWrap:!0}),this.scope.barchartOpenedNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartOpenedNonParticipants",params:{count:this.scope.viewedOnlyCount},noWrap:!0}),this.scope.barchartParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartParticipants",params:{count:i},noWrap:!0}),this.scope.percentParticipatedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentParticipated",params:{percent:this.bbLocalize.formatPercentageSync(e/100,this.scope)},noWrap:!0}),this.scope.percentOpenedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentOpened",params:{percent:this.bbLocalize.formatPercentageSync((t+e)/100,this.scope)},noWrap:!0})}getNonParticipantGroups(){let e=[];return this.scope.nonParticipants.length>0&&i.forEach(this.scope.groups,t=>{let n={id:t.id,name:t.name,nonParticipants:[],total:0,hidden:0};i.forEach(this.scope.nonParticipants,e=>{(e=this.handlePreferredDisplayName(e)).group.id===t.id&&(e.localizedName=this.bbLocalize.formatUsernameSync(e,o.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),n.nonParticipants.push(e),n.total++)}),n.hidden=n.total>4?n.total-4:0,n.total>0&&e.push(n)}),e}getTopComments(){this.scope.numberOfCommentsToDisplay=r._H()?3:5,this.scope.discussionData.topComments.forEach(e=>{let t={user:this.handlePreferredDisplayName(e.user),message:f.Z.text(e.message),messageId:e.messageId,numReplies:e.numReplies};t.user.localizedName=this.bbLocalize.formatUsernameSync(e.user,o.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.user.avatarData=e.user,this.scope.topComments.push(t),this.scope.displayTopComments=!0})}getTopParticipants(){this.scope.discussionData.topParticipants.forEach(e=>{let t={user:this.handlePreferredDisplayName(e.user),numComments:e.numComments,numReplies:e.numReplies};t.user.localizedName=this.bbLocalize.formatUsernameSync(e.user,o.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.user.avatarData=e.user,this.scope.topParticipants.push(t),this.scope.displayTopParticipants=!0})}getNonParticipants(){let e=[];return this.scope.discussionData.nonParticipants.forEach(t=>{t.avatarData=t,t.localizedName=this.bbLocalize.formatUsernameSync(this.handlePreferredDisplayName(t),o.ILocaleUsernameFormat.Short,null,{noWrap:!1,noEscape:!0}),t.localizedNameWithoutWrap=this.bbLocalize.formatUsernameSync(this.handlePreferredDisplayName(t),o.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.preferredDisplayName===o.PreferredDisplayName.Both&&(t.otherName=this.bbLocalize.formatUsernameSync({...t,preferredDisplayName:o.PreferredDisplayName.Other},o.ILocaleUsernameFormat.Brief,null,{noWrap:!0,noEscape:!0}),t.fullName=this.bbLocalize.formatUsernameSync({...t,preferredDisplayName:o.PreferredDisplayName.Given},o.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0})),e.push(t)}),e}toggleIndividualNonParticipantDisplay(){s.defer(()=>{let e=i.element("#discussion-insights"),t=e.find(".non-participant-box").innerWidth()-30;t=t<1118?t:1118;let n=2*Math.ceil((t+20)/126);this.scope.displayedNonParticipants=0;for(let e=0;e<18;e++)e<n&&e<this.scope.totalNonParticipants?(this.scope.showNonparticipant[e]=!0,this.scope.displayedNonParticipants++):this.scope.showNonparticipant[e]=!1;this.scope.additionalNonParticipants=this.scope.totalNonParticipants>this.scope.displayedNonParticipants?this.scope.totalNonParticipants-this.scope.displayedNonParticipants:0,this.scope.nonParticipationSummary=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.nonParticipationSummary",params:{count:this.scope.displayedNonParticipants,total:this.scope.totalNonParticipants},noWrap:!0}),this.setNonParticipantMargin(t)})}setNonParticipantMargin(e){let t=k("li.non-participant"),n=Math.floor(e/126),i=126*n+106;k(t).css("margin-right",n-1>0?20+(e-i-2)/n:20+e-i),k(t[n]).css("margin-right","2px"),2*n+1<=t.length&&k(t[2*n+1]).css("margin-right","2px")}updateNonParticipantView(){let e=this.bbLocalize.getLocale(this.scope);this.scope.nonParticipantsOptions=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.nonparticipantsOptions"}),this.scope.numberOfCommentsToDisplay=r._H()?3:5,this.scope.currentPanelWidth=i.element("#discussion-insights").find(".non-participant-box").innerWidth(),this.scope.currentPanelWidth!==this.scope.lastPanelWidth&&(r._H()?this.scope.showLargeNonparticipantPanel=!1:(this.scope.showLargeNonparticipantPanel=!0,this.toggleIndividualNonParticipantDisplay())),this.scope.lastPanelWidth=this.scope.currentPanelWidth}getSafeHtml(e){return this.$sce.trustAsHtml(e)}hasNavScrollbar(){let e=i.element(".group-selector")[0];return!!(e&&e.scrollWidth>e.clientWidth)}goToDiscussion(e){e&&(this.discussion.groupId=e),this.ultraState.search("view","discussions")}goToGrade(e){this.scope.isGradable&&!this.scope.isGroupDiscussion&&this.ultraState.goPeekState("submission-list",{columnId:this.scope.gradingColumn,participantId:e,contentId:this.scope.contentId})}goToMessage(e){this.ultraState.goPeekState(b.BQ.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e})}isFocusedNonparticipant(e){return k(document.activeElement).is(i.element(k("a#non-participant-link-"+e)))}sortNamesAlphabetically(e){let t="";return e.sort((e,t)=>e.givenName+e.familyName<t.givenName+t.familyName?-1:1).forEach(e=>{t+=e.id+","}),t.slice(0,-1)}goToMessageAll(){let e=this.sortNamesAlphabetically(this.scope.nonParticipants);this.ultraState.goPeekState(b.BQ.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e,conversationPerRecipient:!0})}isPreferedNameBoth(e){return e.preferredDisplayName===o.PreferredDisplayName.Both}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({otherNameAsDisplayNameSystemPreference:w.Ys.systemPreference.getSystemPreferenceByKey(e,A.N0)}),e=>({loadOtherNameAsDisplayNameSystemPreference:t=>e(w.Nwg.systemPreference.loadSystemPreference(t))}))(this);this.scope.$on("$destroy",e)}handlePreferredDisplayName(e){var t;return e&&(null===(t=this.otherNameAsDisplayNameSystemPreference)||void 0===t?void 0:t.value)&&(e.preferredDisplayName="Y"===this.otherNameAsDisplayNameSystemPreference.value?e.preferredDisplayName:void 0),e}constructor(e,t,n,i,r,o,a,l,c,d,u){this.$window=e,this.$sce=t,this.scope=n,this.element=i,this.$stateParams=r,this.$ngRedux=o,this.bbLocalize=a,this.telemetry=l,this.discussion=c,this.ultraState=d,this.courseModel=u,this.updateDfiPanel=e=>{let t=null==e?void 0:e.groupId;if(t===this.scope.currentGroupId)return;let n=null==e?void 0:e.name;t&&t!==p.Qx?(this.discussion.groupId=t,this.scope.currentGroupId=t,this.scope.currentGroupName=n,this.createDfiReport(this.scope.courseId,this.scope.contentId,t),this.updateNonParticipantView()):(this.discussion.groupId=p.Qx,this.scope.currentGroupId=p.Qx,this.scope.currentGroupName=void 0,this.createDfiReport(this.scope.courseId,this.scope.contentId))},n.isLoaded=!1,n.courseId=n.content().courseId,n.contentId=n.content().id,n.isGroupDiscussion=n.content().isGroupContent,this.subscribeToReduxChanges(),this.loadOtherNameAsDisplayNameSystemPreference({key:A.N0}),this.ultraState.params.disGroupId&&this.ultraState.params.disGroupId!==p.Qx?this.createDfiReport(n.courseId,n.contentId,this.ultraState.params.disGroupId):this.createDfiReport(n.courseId,n.contentId),S.ZU.OnWindow("resize",s.debounce(()=>{(this.scope.displayNonParticipants||this.scope.displayNonParticipantGroup)&&(this.updateNonParticipantView(),this.scope.$apply())},150),n),this.notifyMobileApp(),this.scope.$on("refresh-student-activity",()=>{this.updateDfiPanel(this.discussion.selectedGroup)}),this.scope.$on("group-change",()=>{this.updateDfiPanel(this.discussion.selectedGroup)})}}T.$inject=["$window","$sce","scope","element","$stateParams","$ngRedux",o.serviceName,m.HV,p.HV,u.HV,g.N7.H];class P{constructor(e){this.$injector=e,this.restrict="EA",this.template=E,this.scope={content:"&"},this.link=(e,t,n)=>{e.discussionInsights=this.$injector.instantiate(T,{scope:e,element:t,attrs:n})}}}P.$inject=["$injector"],i.module(x,[a.e1,l.e1,c.e1,C,d.e1,m.e1,h.e1,u.e1]).directive("bbDiscussionInsights",["$injector",e=>e.instantiate(P)])},575583:function(e,t,n){"use strict";n.d(t,{e1:function(){return o}}),n(826679);var i=n(464027),s=n(305233),r=n(891502);let o="ultra.directives.telemetry.panel.header";class a{dataLoaded(){this.timeout.cancel(this.spinnerTimeout),this.showSpinner=!1}constructor(e,t){this.scope=e,this.timeout=t,this.showSpinner=!1,this.spinnerTimeout=this.timeout(()=>{this.showSpinner=!0},this.scope,a.WAIT_TIME_TO_SHOW_SPINNER),this.scope.$watch("::panelDataLoaded()",e=>{e&&this.dataLoaded()})}}a.$inject=["scope",s.H],a.WAIT_TIME_TO_SHOW_SPINNER=1e3;class l{constructor(e){this.$injector=e,this.restrict="E",this.template=r,this.transclude=!0,this.scope={course:"&",panelDataLoaded:"&",titleKey:"@?",title:"@?",buttonOneIcon:"@",buttonOneCallback:"&",buttonOneAriaLabel:"@",buttonOneTitle:"@",buttonTwoIcon:"@",buttonTwoCallback:"&",buttonTwoAriaLabel:"@",buttonTwoTitle:"@"},this.link=e=>{e.telemetryPanelHeader=this.$injector.instantiate(a,{scope:e})}}}l.$inject=["$injector"],i.module(o,[]).directive("bbTelemetryPanelHeader",["$injector",e=>e.instantiate(l)])},862801:function(e,t,n){"use strict";n.d(t,{e1:function(){return p}});var i=n(202784),s=n(928316),r=n(555342),o=n(916415),a=n(211796),l=n(174897),c=n(291146),d=n(398435);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.components.directives.timePicker",m=angular.module(p,[c.moduleName]),h=class{$postLink(){this.render()}$onChanges(){this.render()}$onDestroy(){s.unmountComponentAtNode(this.$element[0])}$onInit(){this.ngModel.$render=()=>this.render()}constructor(e,t,n,o){this.$scope=e,this.$element=t,this.$timeout=n,this.localizeService=o,this.isValid=!0,this.onChange=(e,t)=>{t?(this.onViewValueCleared&&this.onViewValueCleared(this.ngModel.$name,this.ngModel.$isEmpty(e)),this.ngModel.$setViewValue(e),this.render()):this.ngModel.$setPristine()},this.onValidate=e=>{this.isValid=e,this.invalidValidationKey&&this.$timeout(()=>this.ngModel.$setValidity(this.invalidValidationKey,e)),this.render()},this.render=()=>{let{analyticsId:e,errorEmptyMessage:t,disabled:n,readonly:o,placeholder:a,ngModel:c}=this,u={onDateTimeChanging(){},onChangeValue:e=>this.onChange(e,e!==c.$viewValue),analyticsId:e,value:c.$viewValue,onValidateCallback:this.onValidate,isValueValid:this.isValid,errorFormatMessage:this.errorFormatMessage,errorEmptyMessage:t,disabled:n,readonly:o,placeholder:a,ariaLabel:this.$element.attr("aria-label")},{locale:p,babelfishInstance:m,babelfishFormatter:h,isRtl:g}=this.localizeService.getReactBabelfishParams(this.$scope);s.render(i.createElement(l.g,{babelfishFormatInstance:h,babelfishInstance:m,locale:p,isRtl:g},i.createElement(d.AnalyticsJssThemeProvider,{isRtl:this.localizeService.isRTL(this.$scope)},i.createElement(r.jI,u))),this.$element[0])}}};!function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);r>3&&o&&Object.defineProperty(t,n,o)}([(0,o.wA)({module:m,componentName:"bbTimePicker",bindings:{analyticsId:"@",errorFormatMessage:"@?",errorEmptyMessage:"@?",disabled:"<?",readonly:"<?",name:"@?",onViewValueCleared:"<?",placeholder:"@?",invalidValidationKey:"@?"},require:{ngModel:"ngModel"}}),u(0,(0,a.tB)("$scope")),u(1,(0,a.tB)("$element")),u(2,(0,a.tB)("$timeout")),u(3,(0,a.tB)(c.serviceName))],h)},136742:function(e,t,n){"use strict";n.d(t,{B:function(){return p},e1:function(){return u}});var i=n(276635),s=n(464027),r=n(291146),o=n(305233),a=n(159212),l=n(725781),c=n(606592),d=n(625506);let u="ultra.components.directives.tooltip.complexTooltip";function p(e=""){return'<ul class="complex-tooltip-list '+e+'"><li ng-repeat="item in items track by $index">{{item}}</li></ul>'}class m extends l.u{showTooltip(){"true"===this.scope.tooltipAutoUpdate&&this.tooltipCreated&&this.scopeChanged&&(this.updateTooltipContent(super.getTooltip()),this.tooltipCreated=!1,this.scopeChanged=!1),super.showTooltip()}addTooltipContent(e){this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),this.tooltipScope.$apply(),e.on("keydown",e=>{e.which===c.hY?(this.element.focus(),this.hideTooltip()):e.which!==c.Mf||e.shiftKey?e.which===c.Mf&&e.shiftKey&&s.element(e.target).closest(".tooltip-first-tabbable").length>0&&(this.getTooltip().find(".tooltip-last-tabbable").focus(),e.preventDefault(),e.stopPropagation()):s.element(e.target).closest(".tooltip-last-tabbable").length>0&&(this.getTooltip().find(".tooltip-first-tabbable").focus(),e.preventDefault(),e.stopPropagation())}),e.append(d('<div class="'+m.TOOLTIP_CONTENT_CLASS+'"></div>').append(this.content))}updateTooltipContent(e){this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),e.find("."+m.TOOLTIP_CONTENT_CLASS).empty().append(this.content)}addTooltipStyles(e){e.removeClass("tooltip-center-content"),this.attrs.tooltipMaxWidth&&(e.removeClass("tooltip-max-width"),e.css({"max-width":this.attrs.tooltipMaxWidth})),"true"===this.attrs.tooltipDisablePadding&&e.addClass("tooltip-unpadded"),"true"===this.attrs.tooltipDarkTheme&&e.addClass("tooltip-dark-theme")}addTooltipEvents(e){e.on("mouseleave",e=>{this.timeoutMS>0?this.timeout=this.timeoutService(()=>{this.hideTooltip()},this.scope,this.timeoutMS):this.hideTooltip()}),e.on("mouseover",e=>{this.timeout&&this.timeoutService.cancel(this.timeout)}),e.on("click",e=>{e.stopPropagation()})}postShowTooltip(){s.isDefined(this.attrs.tooltipFocusSelector)&&this.timeoutService(()=>{this.getTooltip().find(this.attrs.tooltipFocusSelector).eq(0).focus()},this.scope,120)}constructor(e,t,n,r,o,a,l){super(e,t,n,o,a,l),this.scope=e,this.element=t,this.attrs=n,this.$compile=r,this.localizeService=o,this.timeoutService=a,this.windowSizeService=l,this.scopeChanged=!1;let c=this.scope.$watch("tooltipScope()",e=>{e&&(this.tooltipScope=this.scope.tooltipScope(),this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),c())}),d=this.scope.$watch("tooltipScope().items",(e,t)=>{e&&t&&i.difference(e,t).length&&(this.tooltipScope=this.scope.tooltipScope(),this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),this.scopeChanged=!0,this.tooltipScope.$parent.$on("$destroy",()=>{this.tooltipScope.$destroy()}),(s.isUndefined(this.scope.tooltipAutoUpdate)||"false"===this.scope.tooltipAutoUpdate)&&d())})}}m.$inject=["scope","element","attrs","$compile",r.serviceName,o.H,a.HV],m.TOOLTIP_CONTENT_CLASS="complex-tooltip-content";class h{constructor(e){this.$injector=e,this.restrict="A",this.scope={tooltipScope:"&",tooltipTemplate:"@",tooltipAutoUpdate:"@?"},this.link=(e,t,n)=>{e.complexTooltip=this.$injector.instantiate(m,{scope:e,element:t,attrs:n})}}}h.$inject=["$injector"],s.module(u,[r.moduleName,o.e,l.e1,a.e1]).directive("bbComplexTooltip",["$injector",e=>e.instantiate(h)])},725781:function(e,t,n){"use strict";n.d(t,{e1:function(){return m},u:function(){return h}}),n(356328);var i=n(906277),s=n(276635),r=n(625506),o=n(464027),a=n(291146),l=n(305233),c=n(159212),d=n(913481),u=n(606592),p=n(529462);let m="ultra.components.directives.tooltip";class h{isTooltipVisible(){return this.getTooltip()&&"false"===this.getTooltip().attr("aria-hidden")}cancelTimeout(){this.timeout&&this.timeoutService.cancel(this.timeout)}showTooltip(){if(this.content){if(!this.tooltipCreated&&(this.addTooltipToDom(),!this.attrs.tooltipInitImmediate)){this.timeoutService(()=>{this.showTooltip()},this.scope,100);return}this.getTriggerElement().attr("title",""),(o.isUndefined(this.attrs.tooltipOnOverflowOnly)||"true"===this.attrs.tooltipOnOverflowOnly&&"true"===o.element(this.getTriggerElement().children()[0]).attr("data-overflowed"))&&(this.cancelTimeout(),this.hideAllTooltips(),this.positionTooltip(),this.getTooltip().attr("aria-hidden","false"),this.postShowTooltip())}}hideTooltip(){this.tooltipCreated&&this.getTooltip().attr("aria-hidden","true").css({top:0,left:0})}hideAllTooltips(){let e=r("body");e.find(".enhanced-tooltip").attr("aria-hidden","true").css({top:0,left:0})}addTooltipToDom(){let e=void 0===this.attrs.tooltipCenterContent||"true"===this.attrs.tooltipCenterContent,t="true"===this.attrs.tooltipDarkTheme,n=(0,i.Z)("enhanced-tooltip","tooltip-max-width",{"tooltip-center-content":e,"tooltip-dark-theme":t},this.attrs.tooltipClassNames),s=r(`<span class="${n}" aria-hidden="true" role="tooltip" id="${this.controlId}">${this.getPipHtml()}</span>`);this.addTooltipStyles(s),this.addTooltipContent(s),this.addTooltipEvents(s),this.addTooltipClose(s),this.$body.append(s),this.getTriggerElement().attr("aria-describedby",this.controlId),this.tooltipCreated=!0}getPipHtml(){return"true"===this.attrs.tooltipDisablePip?"":'<span class="enhanced-tooltip-pip"></span>'}getPipPadding(){return"true"===this.attrs.tooltipDisablePip?0:13}getTriggerElement(){return this.element}getTooltip(){if(!this.tooltip){let e=this.$body.find(`#${this.controlId}`);this.tooltip=e.length>0?e:null}return this.tooltip}updateTooltip(){if(this.tooltipCreated){let e=this.getTooltipPip()||"";this.getTooltip().html("").append(e).append(document.createTextNode(this.content))}}getTooltipPip(){return this.pip||(this.pip=this.getTooltip().find(".enhanced-tooltip-pip")),this.pip}positionTooltip(){this.getTooltipPip().removeClass(this.adjustedTooltipPosition);let e=this.getTriggerElement().offset().left,t=e+this.getTriggerElement().outerWidth()/2;switch(this.checkPositionInBoundary(t),this.adjustedTooltipPosition){case"top-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()/2);break;case"top-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()+20);break;case"top-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-20);break;case"bottom-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()/2);break;case"bottom-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()+h.TOOLTIP_PIP_PADDING);break;case"bottom-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-h.TOOLTIP_PIP_PADDING);break;case"right-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,e+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"right-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+h.TOOLTIP_PIP_PADDING,e+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"right-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-h.TOOLTIP_PIP_PADDING,e+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"left-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,e-this.getTooltip().outerWidth()-this.getPipPadding());break;case"left-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+h.TOOLTIP_PIP_PADDING,e-this.getTooltip().outerWidth()-this.getPipPadding());break;case"left-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-h.TOOLTIP_PIP_PADDING,e-this.getTooltip().outerWidth()-this.getPipPadding())}this.getTooltipPip().addClass(this.adjustedTooltipPosition)}applyPosition(e,t,n){let i=this.adjustLeftPercentage(n),s=this.ensureTopInBounds(t);e.css({top:s||"auto",left:i||"auto"})}ensureTopInBounds(e){let t=e+this.getTooltip().outerHeight();if(this.getWindowHeight()-t<h.TOOLTIP_VIEWPORT_EDGE_PADDING?e=this.getWindowHeight()-this.getTooltip().outerHeight()-h.TOOLTIP_VIEWPORT_EDGE_PADDING:e<h.TOOLTIP_VIEWPORT_EDGE_PADDING&&(e=h.TOOLTIP_VIEWPORT_EDGE_PADDING),o.isDefined(this.attrs.tooltipTopAdjustPercent)){let t=this.getTriggerElement().outerHeight()/100*parseInt(this.attrs.tooltipTopAdjustPercent,10);e+=t}return e}adjustLeftPercentage(e){let t=e;if(o.isDefined(this.attrs.tooltipLeftAdjustPercent)){let e=this.getTriggerElement().outerWidth()/100*parseInt(this.attrs.tooltipLeftAdjustPercent,10);t+=e}return t}checkPositionInBoundary(e){let t=this.tooltipPosition.split("-");("bottom"===t[0]||"top"===t[0])&&(this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getTooltip().outerHeight()+this.getPipPadding()>this.getWindowHeight()?t[0]="top":this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding()<0&&(t[0]="bottom"),e+this.getTooltip().outerWidth()/2>this.getWindowWidth()?t[1]="left":e-this.getTooltip().outerWidth()/2<0?t[1]="right":t[1]=t[1]?t[1]:"center"),this.adjustedTooltipPosition=t.join("-")}getWindowWidth(){return r(window).width()}getWindowHeight(){return r(window).height()}addTooltipClose(e){let t=e.find(".close-icon");t.length>0&&t.on("click",()=>{this.hideTooltip()})}addTooltipStyles(e){}addTooltipContent(e){this.content=this.getTriggerElement().attr("title"),e.append(document.createTextNode(this.content))}addTooltipEvents(e){}postShowTooltip(){}constructor(e,t,n,i,s,o){this.scope=e,this.element=t,this.attrs=n,this.localizeService=i,this.timeoutService=s,this.windowSizeService=o,this.tooltipCreated=!1,this.tooltip=null,this.pip=null,this.timeout=null,this.timeoutMS=500,h.initEnhancedTooltipEvents(),this.controlId=this.attrs.tooltipId||`tooltip-${p.d()}`,this.tooltipPosition=this.attrs.tooltipPosition||"top","true"===this.attrs.tooltipAlwaysUnderline&&this.getTriggerElement().addClass("tooltip-always-underline"),this.$body=r("body"),this.attrs.$observe("title",e=>{e&&(this.content=e,this.updateTooltip())}),this.scope.$on("$destroy",()=>{this.getTooltip()&&this.getTooltip().remove(),this.$body=null,this.tooltip=null,this.pip=null,h.destroyTooltipEvents()}),"true"!==this.attrs.tooltipDisableOnMouseLeave&&t.on("mouseleave",()=>{(this.windowSizeService.isLargeBreakpoint()||"true"===this.attrs.tooltipEnableOnMouseLeaveForAllBreakpoints)&&(this.timeoutMS>0?this.timeout=this.timeoutService(()=>{this.hideTooltip()},this.scope,this.timeoutMS):this.hideTooltip())}),"true"!==this.attrs.tooltipDisableOnMouseOver&&t.on("mouseover",()=>{(this.windowSizeService.isLargeBreakpoint()||"true"===this.attrs.tooltipEnableOnMouseOverForAllBreakpoints)&&this.showTooltip()}),"true"!==this.attrs.tooltipDisableOnFocus&&(t.on("focus",()=>{r("body").hasClass("hide-focus-outline")||this.showTooltip()}),t.on("blur",()=>{this.hideTooltip()})),t.on("click",e=>{if(!r("body").hasClass("hide-focus-outline")){"true"===this.attrs.tooltipHideOnActivation&&this.hideTooltip(),e.stopPropagation();return}let t=this.windowSizeService.isSmallBreakpoint(),n=this.windowSizeService.isMediumBreakpoint();if("true"===this.attrs.tooltipOpenOnActivation||t||n){if("true"===this.attrs.tooltipDisableOnMediumDownBreakpoint&&(n||t))return;this.isTooltipVisible()?this.hideTooltip():(this.showTooltip(),e.stopPropagation())}else this.hideTooltip()}),t.on("keydown",e=>{e.which===u.hY&&this.isTooltipVisible()?(this.hideTooltip(),e.stopPropagation()):(e.which===u.L_||e.which===u.K5)&&("true"===this.attrs.tooltipOpenOnActivation?this.isTooltipVisible()?this.hideTooltip():(this.showTooltip(),e.stopPropagation()):"true"===this.attrs.tooltipHideOnActivation&&this.hideTooltip())})}}h.$inject=["scope","element","attrs",a.serviceName,l.H,c.HV],h.TOOLTIP_PIP_PADDING=20,h.TOOLTIP_VIEWPORT_EDGE_PADDING=20,h.ariaHideAllTooltips=s.throttle(()=>{r("body").find(".enhanced-tooltip").attr("aria-hidden","true")},500),h.instanceCount=0,h.initEnhancedTooltipEvents=()=>{h.instanceCount>0||(h.instanceCount+=1,document.addEventListener("scroll",h.ariaHideAllTooltips,!0),r(window).resize(h.ariaHideAllTooltips),r("body").click(h.ariaHideAllTooltips))},h.destroyTooltipEvents=()=>{h.instanceCount<=0||(h.instanceCount-=1,0===h.instanceCount&&(document.removeEventListener("scroll",h.ariaHideAllTooltips),r(window).off("resize",h.ariaHideAllTooltips),r("body").off("click",h.ariaHideAllTooltips),h.ariaHideAllTooltips.flush()))};class g{static ensureEvents(){g.eventHandlers||(g.eventHandlers={click:e,blur:e,keyup:function(t){let n=r.Event(t);n.keyCode===u.hY&&e()}},Object.keys(g.eventHandlers).forEach(e=>{document.addEventListener(e,g.eventHandlers[e],!0)}));function e(){o.element("span.tooltip:visible").hide(),o.element(".button-with-active-tooltip").removeClass("open")}}static unregisterEvents(){Object.keys(g.eventHandlers).forEach(e=>{document.removeEventListener(e,g.eventHandlers[e],!0)}),g.eventHandlers=null}constructor(e){this.$injector=e,this.restrict="A",this.scope={},this.link=(e,t,n)=>{d.F(n.enhancedTooltip)?e.tooltip=this.$injector.instantiate(h,{scope:e,element:t,attrs:n}):(g.instanceCount++,g.ensureEvents(),t.one("mouseover",e=>{let t=r(e.currentTarget);null==t.attr("data-tooltip")&&(t.attr("data-tooltip",""),t.parent().foundation({tooltip:{disable_for_touch:!0}}))}),e.$on("$destroy",()=>{g.instanceCount--,0===g.instanceCount&&g.unregisterEvents(),t.foundation("tooltip","off")}))}}}g.instanceCount=0,g.eventHandlers=null,g.$inject=["$injector"],o.module(m,[a.moduleName,l.e,c.e1]).directive("bbTooltip",["$injector",e=>e.instantiate(g)])},915047:function(e,t,n){"use strict";n.d(t,{e1:function(){return r}});var i=n(464027),s=n(291146);let r="ultra.components.directives.translateAttrsDirective",o="bbTranslateAttrs",a="translateAttrsValues";class l{updateAttrs(){return Object.assign(this.currentAttrs,this.scope.$eval(this.getAttrsString()))}isValuesStringDefined(){return null!=this.getOrigValuesString()}isOnetimeBind(e){return 0===e.indexOf("::")}translate(){let e={},t=this.bbLocalize.getLocale(this.scope);i.forEach(this.currentAttrs,(n,i)=>{e[i]=this.bbLocalize.translate({locale:t,key:n,params:this.currentValues,noWrap:!0,noEscape:!0})}),this.$q.all(e).then(e=>{Object.keys(e).forEach(t=>{this.attrs.$set(t,e[t],!0,t)})})}constructor(e,t,n,i,s,r){this.$q=e,this.bbLocalize=t,this.scope=n,this.element=i,this.attrs=s,this.origAttrs=r,this.currentAttrs={},this.currentValues={},this.getOrigAttrsString=()=>this.origAttrs[o],this.getOrigValuesString=()=>this.origAttrs[a],this.getAttrsString=()=>this.attrs[o],this.getValuesString=()=>this.attrs[a],this.updateValues=()=>Object.assign(this.currentValues,this.scope.$eval(this.getValuesString()));let l=!0;this.isOnetimeBind(this.getOrigAttrsString())?this.updateAttrs():(this.scope.$watch(this.updateAttrs.bind(this),this.translate.bind(this),!0),l=!1),this.isValuesStringDefined()&&!this.isOnetimeBind(this.getOrigValuesString())&&(this.scope.$watch(this.updateValues.bind(this),this.translate.bind(this),!0),l=!1);let c=n.$root.$on("$translateChangeSuccess",this.translate.bind(this));n.$on("$destroy",c),l&&this.translate()}}class c{constructor(e,t){this.$q=e,this.bbLocalize=t,this.restrict="A",this.scope=!1,this.compile=(e,t)=>(t[o],(e,n,i)=>new l(this.$q,this.bbLocalize,e,n,i,t))}}c.$inject=["$q",s.serviceName],i.module(r,[s.moduleName]).directive(o,["$injector",e=>e.instantiate(c)])},496037:function(e,t,n){"use strict";n.d(t,{e1:function(){return r}});var i=n(464027),s=n(291146);let r="ultra.directives.bbTranslate";class o{shouldUnwatch(e){if(0>e.indexOf(this.intSym)&&0>this.rawKey.indexOf(this.intSym)||e.indexOf("::")>=0&&this.rawKey.indexOf("::")>=0)return!0}unwatch(){this.attrWatcher(),this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher()}onTranslationIdUpdate(e){e&&(e=e.replace(/^\s+|\s+$/g,""),this.updateTranslation(e))}onAttrUpdate(e){if(e!==this.bbTranslateAttrValue){if(this.bbTranslateAttrValue=e,e.match(this.intSym)){this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher();let t=this.$interpolate(e);this.interpolatedAttrWatcher=this.scope.$watch(()=>t(this.scope),this.onTranslationIdUpdate.bind(this))}else this.onTranslationIdUpdate(e)}}updateTranslation(e=this.translationId){e&&(this.translationId=e,this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.scope),key:e,params:this.interpolateParams}).then(t=>{t===e?this.iElement.text(t):this.iElement.html(t),this.shouldUnwatch(this.bbTranslateAttrValue)&&this.unwatch()},()=>{this.iElement.text(e)}))}constructor(e,t,n,s,r,o,a,l,c){if(this.$parse=e,this.$rootScope=t,this.bbLocalize=n,this.$interpolate=s,this.scope=r,this.iElement=o,this.iAttr=a,this.rawKey=l,this.translateValuesExist=c,this.interpolateParams={},this.analyticsIdSet=!1,this.intSym="{{",a.bbTranslate=a.bbTranslate||o.text(),o.text(""),a.bbTranslate&&!a.bbTranslate.match(this.intSym)&&this.onAttrUpdate(a.bbTranslate),this.attrWatcher=a.$observe("bbTranslate",this.onAttrUpdate.bind(this)),this.translateValuesExist){let e;a.$observe("translateValues",t=>{if(t){e&&e();let n=this.$parse(t);e=r.$parent.$watch(n.bind(null,r.$parent),e=>{i.extend(this.interpolateParams,e),this.updateTranslation()},!0)}})}let d=this.$rootScope.$on("$translateChangeSuccess",()=>this.updateTranslation());r.$on("$destroy",()=>d())}}o.$inject=["$parse","$rootScope",s.serviceName,"$interpolate","scope","iElement","iAttr","rawKey","translateValuesExist"];class a{constructor(e){this.$injector=e,this.restrict="AE",this.scope=!0,this.compile=(e,t)=>{let n=t.bbTranslate=(t.bbTranslate||e.text()||"").replace(/^[\s\n]+|[\s\n]+$/g,"");if(!n)return;let i=t.translateValues?t.translateValues:void 0;return(e,t,s)=>this.$injector.instantiate(o,{scope:e,iElement:t,iAttr:s,rawKey:n,translateValuesExist:i})}}}a.$inject=["$injector"],i.module(r,[s.moduleName]).directive("bbTranslate",["$injector",e=>e.instantiate(a)])},796588:function(e,t,n){"use strict";n.d(t,{e1:function(){return d}}),n(904051);var i=n(464027),s=n(606592),r=n(529462),o=n(685414),a=n(305233),l=n(291146),c=n(84535);let d="ultra.components.directives.typeahead-search-box";class u{onSearchValueChange(){this.searchValue.length>0?this.typeAheadSearch(this.searchValue):this.clear()}itemSelected(e){let t=this.scope.itemSelected({item:e});this.showResults=!1,this.searchResults=[],i.isString(t)?this.searchValue=t:this.searchValue="",this.element.find("input").focus()}search(e){if(this.searchValue.length>0){let t=this.scope.search({searchText:e});t&&(this.showResults=!1,this.searchResults=[],i.isString(t)?this.searchValue=t:this.searchValue="")}}typeAheadSearch(e){this.scope.typeAheadSearch({searchText:e}).then(e=>{this.searchResults=e,this.showResults=e.length>0,this.getSearchResultsAlert(this.showResults)})}getSearchResultsAlert(e){let t=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:e?this.srResultsFound:this.srNoResultsFound,noWrap:!0,noEscape:!0});this.timeout(()=>{this.$rootScope.$broadcast(o.$N,t)},this.scope,1e3)}handleUpAndDownArrow(e){this.showResults||(this.showResults=!0);let t=i.element(e.target);t.hasClass("typeahead-search-entry")?(t=e.keyCode===s.WV?t.next():t.prev()).focus():this.element.find(".typeahead-search-entry:first").focus(),e.preventDefault()}onInputBoxKeyDown(e){e.keyCode===s.K5?this.search(this.searchValue):e.keyCode===s.WV||e.keyCode===s.UP?this.handleUpAndDownArrow(e):e.keyCode===s.hY&&this.showResults&&(this.showResults=!1,e.stopPropagation(),e.preventDefault())}onFocusInputBox(e){this.searchResults&&this.searchResults.length>0&&(this.showResults=!0)}onFocusClearBtn(e){this.isFocus=!0}onBlurClearBtn(e){document.activeElement!==e.currentTarget&&(this.showResults=!1,this.isFocus=!1)}onClickOutside(){this.showResults=!1}onInputBoxClick(){this.showResults=!0}onResultEntryKeyDown(e,t){e.keyCode===s.K5||e.keyCode===s.L_?this.itemSelected(t):e.keyCode===s.WV||e.keyCode===s.UP?this.handleUpAndDownArrow(e):e.keyCode===s.Mf?this.showResults=!1:e.keyCode===s.hY&&(this.showResults=!1,this.element.find("input").focus(),e.stopPropagation(),e.preventDefault())}onResultEntryClick(e,t){this.itemSelected(t)}clear(){let e=this.searchValue;this.showResults=!1,this.searchResults=[],this.searchValue="",this.timeout(()=>{(this.scope.clearSearch||i.noop)({searchText:e})},this.scope,50)}constructor(e,t,n,i,s){this.scope=e,this.$rootScope=t,this.element=n,this.timeout=i,this.bbLocalize=s,this.showResults=!1,this.searchValue="",this.isFocus=!1,this.srLabel=e.srLabel,this.inputPlaceholder=e.inputPlaceholder||"",this.srEmptyResults=e.srEmptyResults||"",this.srResultsFound=e.srResultsFound,this.srNoResultsFound=e.srNoResultsFound,this.clearAriaLabel=e.clearAriaLabel,this.icon=e.icon,this.randomElementId=this.scope.randomElementId||r.d(),this.srResultsFound&&this.srNoResultsFound&&this.clearAriaLabel||this.bbLocalize.loadBundle("components/directives/typeahead").then(()=>{this.srResultsFound="typeahead.resultsFound",this.srNoResultsFound="typeahead.noResultsFound",this.clearAriaLabel="typeahead.clear"}),e.$on("typeahead-search-box-clear",function(){e.typeaheadSearchBox.showResults=!1,e.typeaheadSearchBox.searchResults=[],e.typeaheadSearchBox.searchValue=""})}}u.$inject=["scope","$rootScope","element",a.H,l.serviceName];class p{constructor(e,t){this.$interpolate=e,this.$injector=t,this.restrict="E",this.template=c,this.scope={itemSelected:"&",search:"&",typeAheadSearch:"&",inputPlaceholder:"@?",clearSearch:"&",srEmptyResults:"@",srLabel:"@",srResultsFound:"@?",srNoResultsFound:"@?",clearAriaLabel:"@?",icon:"@?",randomElementId:"@?"},this.transclude=!0,this.replace=!0,this.link=(e,t)=>{e.typeaheadSearchBox=this.$injector.instantiate(u,{scope:e,element:t})}}}p.$inject=["$interpolate","$injector"],i.module(d,[]).directive("bbTypeaheadSearchBox",["$injector",e=>e.instantiate(p)]).directive("typeaheadInject",()=>({link(e,t,n,i,s){if(s){let n=e.$new();s(n,function(e){t.empty(),t.append(e),t.on("$destroy",function(){n.$destroy()})})}}}))},797344:function(e,t,n){"use strict";n.d(t,{e1:function(){return o}}),n(520905);var i=n(625506),s=n(464027),r=n(56832);let o="ultra.components.directives.typeahead-selected-options";class a{removeOption(e){this.scope.removeOption({item:e}),this.scope.focusElementId&&i("#typeahead-search-box-"+this.scope.focusElementId).focus()}constructor(e){this.scope=e}}a.$inject=["scope"];class l{constructor(e){this.$injector=e,this.restrict="E",this.replace=!0,this.template=r,this.scope={selectedOptions:"=",removeOption:"&",selectedOptionsListLabel:"@",focusElementId:"@?"},this.link=e=>{e.typeaheadSelectedOptions=this.$injector.instantiate(a,{scope:e})}}}l.$inject=["$injector"],s.module(o,[]).directive("bbTypeaheadSelectedOptions",["$injector",e=>e.instantiate(l)])},73268:function(e,t,n){"use strict";let i,s;n.d(t,{e1:function(){return b}});var r=n(464027),o=n(625506),a=n(276635),l=n(817446),c=n(190234),d=n(887833),u=n(168132),p=n(759485),m=n(288815),h=n(366880),g=n(918079),f=n(592281);let b="ultra.directives.user-avatar",v=r.module(b,[u.e1,h.e1]),y=g.replace(/\s+id="[^\"]+"\s*/," ").replace(/<svg /,'<svg stroke-width="3" stroke="#fff" ').replace(/\s+viewBox="(\d+ \d+ \d+ \d+)"/,function(e,...t){let[n,i,s,r]=t[0].split(" ").map(e=>parseInt(e,10));return' viewBox="'+[n-s/2,i-r/2,2*s,2*r].join(" ")+'"'}),C={avatar:{permanentUrl:"data:image/svg+xml;base64,"+l.codec.base64.fromBits(l.codec.utf8String.toBits(y))},lastModifiedAt:"",getInitials:a.noop},S=o('<style id="css-bb-user-avatar"></style>').appendTo("head"),E={},I=function(e){e.forEach(e=>{let t=e.id||e.$pk,n=E[t]=E[t]||{},i=null!=e.lastModifiedAt&&e.lastModifiedAt===n.lastModifiedAt;if(i||e.isPlaceHolder)return;n.avatarURL=void 0,n.isAvailable=e.isAvailable,n.lastModifiedAt=e.lastModifiedAt;let s=e.avatar&&"default"!==e.avatar.permanentUrl;if(s){let t=e.avatar.permanentUrl;if(e.avatar.permanentUrl.startsWith("http")){let n=(f.Z.isValidDate(e.lastModifiedAt)?e.lastModifiedAt:new Date).getTime();t=(0,p.Ou)(e.avatar.permanentUrl,"ts",n)}n.avatarURL=t}let r=(e.getInitials||a.noop).apply(e);n.initials=!s&&r?r:void 0}),i()};v.config([h.HV+"Provider",function(e){e.onStyleRefresh(function(e,t){t.isAvailable||(e.selector(`bb-user-avatar.u${t.userId}:after`).rule("display","block"),e.selector(`bb-user-avatar.u${t.userId} > div`).rule("opacity",".3"))})}]).run(["$rootScope",u.EA.HV,function(e,t){i=a.debounce(()=>{let e=new d.h;a.forEach(E,(t,n)=>{let i=e.selector(`bb-user-avatar.u${n}`);t.avatarURL?(i.selector(".image:after").rule("background-image",`url("${t.avatarURL}")`).rule("display","block"),i.selector(".image:before").rule("display","none")):t.initials&&(i.selector(".image").rule("display","none"),i.selector(".initials").rule("display","block"),i.selector(".initials:after").rule("content",`"${t.initials}"`)),!1===t.isAvailable&&e.selector(`bb-user-avatar.u${n}:after`).rule("display","block")});let t=e.build();S.text()!==t&&S.text(t)},200),s=a.once(function(){t.$mixHook("after-feed",function(){let e=Array.prototype.concat.call([],this);I(e)})})}]).directive("bbUserAvatar",function(){return{restrict:"E",template:m,scope:{user:"=?"},link(e,t){s(),t.addClass("avatar element-image"),e.$watch("user",(e,n)=>{e&&(c.n8(e)&&a.extend(e,C),t[0].className=t[0].className.split(/\s+/).filter(e=>!/^u\w+$/.test(e)).join(" "),t.addClass(`u${e.id||e.$pk}`),I([e]))})}}})},685772:function(e,t,n){"use strict";n.d(t,{e1:function(){return b}});var i=n(464027),s=n(579633),r=n(445218),o=n(389860),a=n(291146);let l="ultra.components.directives.react-toolkit.username",c={Class:o.K6,attributes:["subtext"],bindingNames:["user","format","showPronouns","showPronunciation","showAccommodation"],renderLocalized:!0,withProvider:!0,withErrorModalBoundary:!1};i.module(l,[a.moduleName]).component("bbUiUsername",(0,r.G5)(c));var d=n(366880),u=n(168132),p=n(717205),m=n(211796),h=n(305988),g=n(396277);function f(e,t){return function(n,i){t(n,i,e)}}let b="ultra.components.directives.bbUsername";class v{initialize(){this.unbind=this.$scope.$watchGroup(["user.id","user.familyName","user.givenName","user.title","user.email","user.pronouns","user.pronunciation","user.pronunciationAudio","user.preferredDisplayName","user.otherName"],()=>this.update())}update(){var e;if(!this.$scope.user)return;this.user=(e=this.$scope.user)&&{id:e.id,title:e.title,givenName:e.givenName,familyName:e.familyName,otherName:e.otherName,preferredDisplayName:e.preferredDisplayName,pronouns:(0,g.TZ)(e),pronunciation:e.pronunciation,pronunciationAudio:e.pronunciationAudio,email:e.email,ui:e.ui};let t=this.$scope.user;t.$asPromise&&!t.$resolved?t.$asPromise().then(()=>this.updateDom()):this.updateDom(),(null==this.attributes.autoUpdate||"false"===this.attributes.autoUpdate)&&this.unbind()}isAnonymousUser(e){return(0,p.TF)(e)}cleanUpClassNames(e){return e.split(/\s+/).filter(e=>!/^course_user.+$/.test(e)).join(" ")}updateDom(){let e=this.$scope.user;this.showInlineUsername="true"===this.attributes.showInlineUsername,this.showPronouns="true"===this.attributes.showPronouns,this.showPronunciation="true"===this.attributes.showPronunciation,this.isAnonymousUser(e)&&(e.givenName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"anonymous.postedName"}),e.familyName=""),this.element[0].className=this.cleanUpClassNames(this.element[0].className),e.id&&this.element.addClass("course_user"+e.id);let t=this.bbLocalize.getFormatId(s.ILocaleUsernameFormat,this.attributes.format);this.$scope.format=t;try{this.accessibilityName=this.bbLocalize.formatUsernameSync(e,t,this.$scope,{noWrap:!0,noEscape:!0}),this.textAccommodation=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"cr.components.username.accommodationAriaLabel",noWrap:!0})}catch(e){console.error(e)}}constructor(e,t,n,i){this.$scope=e,this.element=t,this.attributes=n,this.bbLocalize=i,t.addClass("username"),this.initialize()}}v=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([f(0,(0,m.tB)("$scope")),f(1,(0,m.tB)("$element")),f(2,(0,m.tB)("$attrs")),f(3,(0,m.tB)(a.serviceName))],v);class y{constructor(){this.controllerAs="un",this.scope={onUsernameClick:"<",user:"="},this.restrict="AE",this.template=h,this.controller=v}}i.module(b,[a.moduleName,d.e1,u.e1,l]).config([d.HV+"Provider",function(e){e.onStyleRefresh(function(e,t){var n,i;let s=t.permissions,r=null===(n=t.course)||void 0===n?void 0:null===(i=n.memberships)||void 0===i?void 0:i.permissions,o=(null==r?void 0:r.viewDueDateException)||(null==r?void 0:r.viewTimeLimitException),a=(null==s?void 0:s.editDueDateException)||(null==s?void 0:s.editTimeLimitException),l=t.accommodation().hasAccommodation&&(o||a);e.selector(`bb-username.course_user${t.userId}:before`).rule("display",l?"inline-block":"none!important").rule("vertical-align",l?"middle":"none"),l&&e.selector(`bb-username.course_user${t.userId} .username-accommodation-content .username-has-accommodation`).rule("display","inline"),e.selector(`bb-username.course_user${t.userId} bb-ui-username`).rule("width",l?"calc(100% - .75rem)":"100%"),e.selector(`.bb-group-user .highlight .course_user${t.userId}`).rule("overflow",l?"visible":"hidden"),e.selector(`.element-card .element-details .course_user${t.userId}`).rule("display",l?"flex":"inline"),e.selector(`.user-info bb-username.course_user${t.userId}`).rule("display",l?"flex":"block")})}]).directive("bbUsername",["$injector",e=>e.instantiate(y)])},925676:function(e,t,n){"use strict";n.d(t,{Ei:function(){return o},e1:function(){return r}});var i=n(464027),s=n(291146);let r="ultra.directives.validate.date",o="bbValidateDate";class a{constructor(e,t){this.$parse=e,this.bbLocalize=t,this.require="ngModel",this.restrict="A",this.getISODate=e=>e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),this.getDateParser=(e,t,n,i)=>r=>{let o;if(i.$isEmpty(r))return i.$setValidity("date",!0),null;try{o=this.bbLocalize.parseDateSync(r,s.ILocaleDateFormat.Short,e,i.$modelValue)}catch(e){return i.$setValidity("date",!1),i.$modelValue}return i.$setValidity("date",!0),"date"===n.type||(r=this.bbLocalize.formatDateSync(o,s.ILocaleDateFormat.Short,e))===i.$viewValue||(i.$setViewValue(r),t.is(":focus")||i.$render()),o},this.getMinDateValidator=(e,t,n,i)=>t=>{let r=this.$parse(n.min)(e),o=i.$isEmpty(t)||t.getTime()>r.getTime();return o?delete i.$error.minDate:i.$error.minDate={dateMin:this.bbLocalize.formatDateSync(r,s.ILocaleDateFormat.Short)},o},this.getMaxDateValidator=(e,t,n,i)=>t=>{let r=this.$parse(n.max)(e),o=i.$isEmpty(t)||t.getTime()<r.getTime();return o?delete i.$error.maxDate:i.$error.maxDate={dateMax:this.bbLocalize.formatDateSync(r,s.ILocaleDateFormat.Short)},o},this.getDateFormatter=(e,t,n,i)=>()=>{i.$setValidity("date",!0);let t=i.$modelValue;return i.$isEmpty(t)?"":"date"===n.type?this.getISODate(t):this.bbLocalize.formatDateSync(t,s.ILocaleDateFormat.Short,e)},this.link=(e,t,n,i)=>{i.$parsers.push(this.getDateParser(e,t,n,i)),i.$formatters.push(this.getDateFormatter(e,t,n,i)),n.min&&(i.$validators.minDateValidator=this.getMinDateValidator(e,t,n,i)),n.max&&(i.$validators.maxDateValidator=this.getMaxDateValidator(e,t,n,i)),t.on("blur",()=>{i.$render()})}}}a.$inject=["$parse",s.serviceName],i.module(r,[s.moduleName]).directive(o,["$parse",s.serviceName,(e,t)=>new a(e,t)])},231090:function(e,t,n){"use strict";n.d(t,{e1:function(){return d}}),n(481518),n(783822);var i=n(276635),s=n(625506),r=n(464027),o=n(291146),a=n(342005),l=n(305233),c=n(685414);let d="ultra.directives.validationMessages";class u{updateMessages(){this.scope.showOnsubmitErrors=!1,this.scope.showErrors=!1,this.scope.showImmediateErrors=!1,this.scope.showWarnings=!1,this.scope.labels.length=0;let e=[];if(this.form.$submitted){let t=i.filter(this.elements,e=>Object.keys(e.$error).length>0);e=i.map(t,"$label");let n=i.merge.apply(null,i.map(t,"$error"))||{},s=Object.keys(n);s.length>0&&(this.scope.showOnsubmitErrors=!0,this.scope.onsubmitErrors={},s.forEach(e=>{this.scope.onsubmitErrors[e+"Onsubmit"]=n[e]}),this.readAriaLiveMessage(this.element.find(".form-element-onsubmit-errors").text(),"alert"))}else{let t=document.activeElement,n=i.find(this.elements,{$name:t.name});if(n&&n.$errorImmediate&&Object.keys(n.$errorImmediate).length>0)return this.scope.showImmediateErrors=!0,this.scope.immediateErrors=n.$errorImmediate,this.readAriaLiveMessage(this.element.find(".form-element-immediate-errors").text(),"alert"),!0;if(!u.mouseIsDown||this.error||this.immediateUpdate){let n=this.immediateUpdate?this.elements:i.filter(this.elements,e=>(e.$touched||e.$dirty||this.scope.checkWhenInit&&this.scope.checkWhenInit())&&(t.name!==e.$name||this.scope.immediate&&this.scope.immediate())),s=i.filter(n,e=>Object.keys(e.$error).length>0),r=i.merge.apply(null,i.map(s,"$error"))||{};r&&Object.keys(r).length>0?(this.error=this.scope.showErrors=!0,this.scope.errors=r,e.push.apply(e,i.map(s,"$label")),this.readAriaLiveMessage(this.element.find(".form-element-errors").text(),"alert")):this.error=!1}if(!this.scope.showOnsubmitErrors&&!this.scope.showErrors){let e=i.filter(this.elements,e=>Object.keys(e.$warning).length>0),t=i.merge.apply(null,i.map(e,"$warning"))||{};t&&Object.keys(t).length>0&&(this.scope.showWarnings=!0,this.scope.warnings=t,this.readAriaLiveMessage(this.element.find(".form-element-warnings").text(),"status"))}}return this.scope.labels.push.apply(this.scope.labels,i.compact(e)),!0}readAriaLiveMessage(e,t){this.timeout(()=>{"alert"===t?this.scope.$root.$broadcast(c.i_,e.trim()):this.scope.$root.$broadcast(c.$N,e.trim())},this.scope,0,!1)}constructor(e,t,n,i,s,r){this.$rootScope=e,this.scope=t,this.element=n,this.attrs=i,this.form=s,this.timeout=r,this.error=!1,this.immediateUpdate=!1,this.elements=[],u._$rootScope=e,t.labels=[],u.onDirectiveAdded(),t.$on("$destroy",()=>{u.onDirectiveRemoved()});let o=i.for;if(!o)throw Error("`for` attribute is required.");o.split(",").forEach(e=>{let t=s[e];null==t.$warning&&(t.$warning={}),null==t.$errorImmediate&&(t.$errorImmediate={}),this.elements.push(t)}),t.$watch(this.updateMessages.bind(this)),t.$watch(()=>document.activeElement,(e,t)=>{e!==t&&this.updateMessages()}),t.$watch(()=>t.showErrors),this.elements&&this.elements.length&&t.$watch(()=>this.elements[0].$invalid,(e,t)=>{e&&e!==t?(this.immediateUpdate=!0,this.updateMessages()):this.immediateUpdate=!1})}}u.mouseIsDown=!1,u._directiveCount=0,u.onDirectiveAdded=()=>{let e=0===u._directiveCount;u._directiveCount++,e&&(u.mouseDownHandler||(u.mouseDownHandler=e=>{let t=s(e.target);(t.parents("ng-form").length||t.parents("form").length)&&u._$rootScope.$apply(()=>{t.is("[type=submit]")||(u.mouseIsDown=!0)})}),u.mouseUpHandler||(u.mouseUpHandler=e=>{let t=s(e.target);(t.parents("ng-form").length||t.parents("form").length)&&u._$rootScope.$apply(()=>{u.mouseIsDown=!1})}),s(document).on("mousedown",u.mouseDownHandler),s(document).on("mouseup",u.mouseUpHandler))},u.onDirectiveRemoved=()=>{let e=u._directiveCount<=1;u._directiveCount--,e&&(s(document).off("mousedown",u.mouseDownHandler),s(document).off("mouseup",u.mouseUpHandler))};class p{constructor(e,t,n){this.bbLocalize=e,this.$rootScope=t,this.timeout=n,this.scope={immediate:"&?",checkWhenInit:"&?"},this.require="^form",this.restrict="A",this.transclude=!0,this.link=(e,t,n,i)=>(this.bbLocalize.loadBundle("components/directives/validation-messages"),new u(this.$rootScope,e,t,n,i,this.timeout)),this.template=a}}r.module(d,["ngMessages",o.moduleName]).directive("bbValidationMessages",[o.serviceName,"$rootScope",l.H,(e,t,n)=>new p(e,t,n)]).directive("ngModel",()=>({restrict:"A",require:"ngModel",priority:-9999,link:(e,t,n,i)=>{let s=t[0],r=t.parents().last();if(s.hasAttribute("aria-label"))e.$watch(()=>s.getAttribute("aria-label"),e=>i.$label=e);else if(s.hasAttribute("aria-labelledby")){let t=s.getAttribute("aria-labelledby").split(" ")[0],n=r.find("#"+t)[0];n&&e.$watch(()=>n.textContent,e=>i.$label=e)}else{let t=r.find('label[for="'+s.id+'"]')[0];t&&e.$watch(()=>t.textContent,e=>i.$label=e)}}}))},168132:function(e,t,n){"use strict";n.d(t,{_F:function(){return S},YW:function(){return E},ds:function(){return I},oE:function(){return e2},UQ:function(){return w},YN:function(){return A},Sv:function(){return e6},Os:function(){return L},xd:function(){return N},hU:function(){return O},uZ:function(){return F},SF:function(){return e8},N7:function(){return ts},mH:function(){return x},vk:function(){return T},courseContent:function(){return tl},UK:function(){return D},aT:function(){return G},Bh:function(){return P},lZ:function(){return R},OI:function(){return B},Xs:function(){return th},XY:function(){return tG},xV:function(){return k},lR:function(){return M},jh:function(){return $},U_:function(){return tZ},Gn:function(){return V},Rp:function(){return tJ},zn:function(){return t3},uy:function(){return H},o6:function(){return U},Ct:function(){return _},WS:function(){return q},aw:function(){return z},Mj:function(){return W},ov:function(){return j},Ki:function(){return K},Fi:function(){return Z},e1:function(){return iC},JK:function(){return X},yc:function(){return ng},g8:function(){return Y},k:function(){return Q},YM:function(){return et},AA:function(){return ee},km:function(){return en},aW:function(){return J},SV:function(){return ei},hX:function(){return es},ih:function(){return eg},J9:function(){return el},it:function(){return er},tO:function(){return eu},JS:function(){return eh},FD:function(){return ep},R9:function(){return ed},lJ:function(){return em},lP:function(){return eo},pg:function(){return ec},HG:function(){return ea},Ut:function(){return ef},sO:function(){return eb},_e:function(){return ev},vn:function(){return nX},M:function(){return ey},Vw:function(){return eC},wg:function(){return eS},B5:function(){return eE},oP:function(){return eH},YY:function(){return eI},t4:function(){return ew},k8:function(){return eA},tV:function(){return ex},Kx:function(){return ek},Mt:function(){return eT},bU:function(){return eP},fW:function(){return eD},xJ:function(){return eG},U5:function(){return eR},_h:function(){return eB},L5:function(){return eL},lo:function(){return eN},S5:function(){return eO},BH:function(){return eM},rS:function(){return e$},mD:function(){return eF},EA:function(){return ty}});var i,s,r,o,a,l,c,d,u,p,m,h,g,f,b,v,y,C,S={};n.r(S),n.d(S,{H:function(){return ez}});var E={};n.r(E),n.d(E,{H:function(){return eZ}});var I={};n.r(I),n.d(I,{H:function(){return eX}});var w={};n.r(w),n.d(w,{H:function(){return e9}});var A={};n.r(A),n.d(A,{H:function(){return e5}});var k={};n.r(k),n.d(k,{H:function(){return tn}});var x={};n.r(x),n.d(x,{iQ:function(){return h},kF:function(){return m}});var T={};n.r(T),n.d(T,{H:function(){return tc}});var P={};n.r(P),n.d(P,{H:function(){return td}});var D={};n.r(D),n.d(D,{H:function(){return tC}});var G={};n.r(G),n.d(G,{H:function(){return tS}});var R={};n.r(R),n.d(R,{serviceName:function(){return tx},sortInstructorsMembership:function(){return tA}});var B={};n.r(B),n.d(B,{H:function(){return tT}});var L={};n.r(L),n.d(L,{H:function(){return t$}});var N={};n.r(N),n.d(N,{H:function(){return t_}});var O={};n.r(O),n.d(O,{H:function(){return tq}});var M={};n.r(M),n.d(M,{H:function(){return tz}});var $={};n.r($),n.d($,{H:function(){return tW}});var H={};n.r(H),n.d(H,{HV:function(){return tY}});var F={};n.r(F),n.d(F,{M:function(){return t1.Z}});var U={};n.r(U),n.d(U,{H:function(){return t9}});var V={};n.r(V),n.d(V,{H:function(){return t6}});var _={};n.r(_),n.d(_,{H:function(){return ni}});var q={};n.r(q),n.d(q,{H:function(){return na}});var z={};n.r(z),n.d(z,{H:function(){return nl}});var W={};n.r(W),n.d(W,{H:function(){return nc}});var j={};n.r(j),n.d(j,{gM:function(){return f},HV:function(){return nd}});var Z={};n.r(Z),n.d(Z,{H:function(){return nu}});var K={};n.r(K),n.d(K,{H:function(){return np}});var X={};n.r(X),n.d(X,{H:function(){return nm}});var Y={};n.r(Y),n.d(Y,{H:function(){return nb}});var Q={};n.r(Q),n.d(Q,{H:function(){return nC}});var J={};n.r(J),n.d(J,{H:function(){return nS}});var ee={};n.r(ee),n.d(ee,{H:function(){return nE}});var et={};n.r(et),n.d(et,{H:function(){return nw}});var en={};n.r(en),n.d(en,{H:function(){return nA}});var ei={};n.r(ei),n.d(ei,{adjustEngagement:function(){return nD},serviceName:function(){return nP}});var es={};n.r(es),n.d(es,{H:function(){return nR}});var er={};n.r(er),n.d(er,{H:function(){return nB}});var eo={};n.r(eo),n.d(eo,{H:function(){return nL}});var ea={};n.r(ea),n.d(ea,{H:function(){return nN}});var el={};n.r(el),n.d(el,{H:function(){return nO}});var ec={};n.r(ec),n.d(ec,{kh:function(){return nH},HV:function(){return nM}});var ed={};n.r(ed),n.d(ed,{H:function(){return nF}});var eu={};n.r(eu),n.d(eu,{H:function(){return nU}});var ep={};n.r(ep),n.d(ep,{H:function(){return nV}});var em={};n.r(em),n.d(em,{H:function(){return n_}});var eh={};n.r(eh),n.d(eh,{H:function(){return nq}});var eg={};n.r(eg),n.d(eg,{H:function(){return nz}});var ef={};n.r(ef),n.d(ef,{H:function(){return nW}});var eb={};n.r(eb),n.d(eb,{_:function(){return nZ},H:function(){return nj}});var ev={};n.r(ev),n.d(ev,{H:function(){return nK}});var ey={};n.r(ey),n.d(ey,{H:function(){return nY}});var eC={};n.r(eC),n.d(eC,{Bq:function(){return y},q0:function(){return v},HV:function(){return nQ}});var eS={};n.r(eS),n.d(eS,{H:function(){return nJ}});var eE={};n.r(eE),n.d(eE,{H:function(){return n0}});var eI={};n.r(eI),n.d(eI,{H:function(){return n1},A:function(){return n2}});var ew={};n.r(ew),n.d(ew,{H:function(){return n3}});var eA={};n.r(eA),n.d(eA,{H:function(){return n4}});var ek={};n.r(ek),n.d(ek,{H:function(){return n7}});var ex={};n.r(ex),n.d(ex,{H:function(){return n5}});var eT={};n.r(eT),n.d(eT,{H:function(){return n6}});var eP={};n.r(eP),n.d(eP,{H:function(){return n8}});var eD={};n.r(eD),n.d(eD,{H:function(){return ie}});var eG={};n.r(eG),n.d(eG,{H:function(){return it}});var eR={};n.r(eR),n.d(eR,{H:function(){return ii}});var eB={};n.r(eB),n.d(eB,{H:function(){return is}});var eL={};n.r(eL),n.d(eL,{H:function(){return ir}});var eN={};n.r(eN),n.d(eN,{H:function(){return io}});var eO={};n.r(eO),n.d(eO,{H:function(){return ia}});var eM={};n.r(eM),n.d(eM,{Xl:function(){return C},uY:function(){return il.Z},HV:function(){return ic}});var e$={};n.r(e$),n.d(e$,{H:function(){return iu}});var eH={};n.r(eH),n.d(eH,{H:function(){return ig}});var eF={};n.r(eF),n.d(eF,{H:function(){return iv}});var eU=n(486502);n(407537);var eV=n(18447),e_=n(148869),eq=n(512666);let ez=e_.fS,eW=eV.default.apiBasePath+"/v1";eU.Z.factory(ez,["restmod",eq.xQ,(e,t)=>e.model(eW).mix({$extend:{Model:{getAllyConfig(){return this.single(eW+"/ally/config").$fetch().$allow(["400-599"]).$asPromise().then(e=>e.isStatusCode(200)?e:{serviceAvailable:!1})},getAllyToken(e,t){let n=eW+`/courses/${e}`+(t?`/ally/content/${t}/token`:"/ally/token");return this.single(n).$fetch().$asPromise()}}}})]);var ej=n(464027);let eZ=e_.CS;eU.Z.factory(eZ,()=>{let e=eV.default.telemetryApiBasePath+"/v1/browser/interactions";return{$create(t){ej.element.ajax({type:"POST",url:e,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",timeout:eV.default.telemetryApiTimeoutMS})}}});let eK=e_.vv;eU.Z.factory(eK,["restmod",e=>e.model().mix({lastRun:{serialize:"date"},getRedirectUrl(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/redirectUrl"},function(e){this.$unwrap(e.data)}).$asPromise()}})]);let eX=e_.jB;eU.Z.factory(eX,["restmod",e=>{let t=eV.default.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{downloadWithAnnotations(e,t,n){return this.$build().$send({method:"GET",url:this.$url()+`/courses/${n}/assignments/attempts/files/${e}/downloadInfo?is_group=${t}`},function(e){return this.$unwrap(e.data)})}}}})}]);let eY=e_.vp;eU.Z.factory(eY,["restmod",eq.xQ,(e,t)=>e.model()]);let eQ=e_.dd;eU.Z.factory(eQ,["restmod",eq.xQ,(e,t)=>e.model().mix({lastModifiedDate:{serialize:"date"},answers:{hasMany:e_.nM},gradedQuestionAttempts:{hasMany:e_.ou,path:"answers/grades"},questions:{hasMany:e_.yu},ui:{mask:!0,init:()=>({})},exceptions:{hasMany:e_.eE,hooks:{"before-request":function(e){e.url=e.url.replace(eV.default.apiBasePath,eV.default.apiBasePath+"/public")}}},userExceptions:{hasMany:e_.eE,path:"exceptions/users"},groupExceptions:{hasMany:e_.eE,path:"exceptions/groups"}})]);var eJ=n(951248);let e0=e_.eE;eU.Z.factory(e0,["restmod","$q",eq.xQ,"$ngRedux",(e,t,n,i)=>e.model().mix({$url(e){if(this.$scope.$url(e))return this.$scope.$url(e).replace(eV.default.apiBasePath,eV.default.apiBasePath+"/public")+"/"+encodeURIComponent(this.$pk)},$hooks:{"after-request":e=>{if("DELETE"===e.config.method){let t=new URL(e.config.url),n=t.pathname,s=n.match(/\/courses\/([^\/]*)\/assessments\/([^\/]*)\/exceptions\/users\/([^\/]*)/);if(s){let e=s[1],t=s[2],n=s[3],r=eJ.Ys.courseMembership.getCourseMembershipByUserId(i.getState(),e,n),o=eJ.Ys.assessment.getAssessmentById(i.getState(),t);i.dispatch(eJ.Nwg.exceptionDetails.deleteExceptionDetailByColumnIdAndMembershipIdInStore(o.gradableItemId,r.id))}}}},$extend:{Record:{saveException(e){return this.$send({method:"POST",url:this.$url(),data:e}).$allow([404]).$asPromise()},deleteException(){return this.$send({method:"DELETE",url:this.$url()}).$allow([404]).$asPromise()}}}})]),n(594279),(i=p||(p={})).Student="STUDENT",i.InstructorComments="INSTRUCTOR_COMMENTS",i.InstructorNotes="INSTRUCTOR_NOTES";let e1=e_.nM;eU.Z.factory(e1,["restmod",eq.xQ,e=>e.model().mix({grade:{hasOne:e_.ou,path:"grades"}})]);var e2=n(404831);let e3=e_.IL;eU.Z.factory(e3,["restmod",eq.xQ,(e,t)=>e.model().mix({$hooks:{"after-request":function(e){null===e.data.results&&(e.data.results=[])}}})]);let e9=e_.cg;eU.Z.factory(e9,["restmod",e=>{let t=eV.default.apiBasePath+"/v1/brands",n=e.model(t).mix({$extend:{Model:{getCurrent(){return this.single(t+"/current").$fetch()}}}});return n}]);var e4=n(759485),e7=n(408027);let e5=e_.XN;eU.Z.factory(e5,["restmod","$q",(e,t)=>{let n=eV.default.apiBasePath+"/v1/calendars",i=e.model(n).mix({ui:{mask:!0,init:()=>({})},$extend:{Collection:{sortCalendars(){return this.$action(function(){this.sort(function(e,t){return e.labelLocalizable.languageKey&&t.labelLocalizable.languageKey||e.labelLocalizable.languageKey&&!t.labelLocalizable.languageKey?e.id===e7.J6F.Institution?1:-1:t.labelLocalizable.languageKey&&!e.labelLocalizable.languageKey?t.id===e7.J6F.Institution?-1:1:e.labelLocalizable.rawValue<t.labelLocalizable.rawValue?-1:1})})}},Model:{getOrRegenerateExportCalendarFeed(e){let n=t.defer();return this.$build().$send({method:e?"POST":"GET",url:e4.uI("/webapps/calendar/calendarFeed/url"),transformResponse:e=>e},function(e){n.resolve(e&&e.data)}),n.promise}}}});return i}]);var e6=n(176232),e8=n(540438);let te=e_.Zl;eU.Z.factory(te,["restmod",e=>e.model().mix({calendarItems:{hasMany:e_.zU},dueDateCalendarItems:{hasMany:e_.SO}})]);let tt=e_.zU;eU.Z.factory(tt,["restmod",e=>e.model().mix(e6.HV,{})]);let tn=e_.Oe;eU.Z.factory(tn,["restmod",e=>{let t=eV.default.apiBasePath+"/v1/calendars/dueDateCalendarItems",n=e.model(t).mix(e6.HV);return n}]);let ti=e_.SO;eU.Z.factory(ti,["restmod",e=>e.model().mix(tn,{})]);var ts=n(456141);let tr=e_.VI;(s=m||(m={})).CourseRoom="COURSE_ROOM",s.UserRoom="USER_ROOM",(r=h||(h={})).Apollo="APOLLO",r.Gemini="GEMINI",eU.Z.factory(tr,["restmod",eq.xQ,(e,t)=>e.model().mix({$extend:{Record:{getLaunchUrl(){return this.$send({method:"POST",url:this.$url()+"/launch",data:{}}).$asPromise().then(e=>eV.default.features.collab?e.$response.data.url:e.$response.data.launchUrl)}}}})]);let to=e_.LV;eU.Z.factory(to,["restmod",eq.xQ,(e,t)=>e.model().mix({sessions:{hasMany:e_.VI},$extend:{Record:{getVirtualClassroomSession(){return this.sessions.$search({sessionType:m.CourseRoom}).$asPromise().then(e=>e[0]||null)}}}})]);let ta=e_.ZP;eU.Z.factory(ta,["restmod",eq.xQ,(e,t)=>e.model().mix({sessions:{hasMany:e_.VI},$extend:{Record:{getAllCollabSessions(){return this.sessions.$search({expand:"sessionInstances",startTime:new Date().toISOString()}).$asPromise()},getCourseCollabInfo(){return this.sessions.$search({sessionCategory:"course",expand:"sessionInstances",startTime:new Date().toISOString()}).$asPromise()},enableCourseRoom(e){return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!0}},e=>this.$unwrap(e.data)).$asPromise()},disableCourseRoom(e){return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!1}},e=>this.$unwrap(e.data)).$asPromise()},launchDiscussionSession(e,t){return this.$send({method:"POST",url:this.$url()+"/sessions/forums/"+e+"/launch"+(t?"?groupId="+t:"")},e=>this.$unwrap(e.data)).$asPromise()}}}})]);var tl=n(179464);let tc=e_.Cg;eU.Z.factory(tc,["restmod",eq.xQ,(e,t)=>e.model().mix({})]);let td=e_.Nj;eU.Z.factory(td,["restmod",eq.xQ,(e,t)=>{let n=e.model().mix({data:{belongsTo:e_.xR},ui:{mask:!0,init:()=>({})},$hooks:{"before-fetch-many":function(e){e.params=e.params||{},e.params.fields?e.params.fields+=",-data":e.params.fields="-data"},"after-request":function({data:e}){e.results.forEach(e=>{let t={id:e.userId,isPlaceHolder:!0};e.data=t})}}});return n}]);let tu=e_.uD;eU.Z.factory(tu,["restmod",eq.xQ,(e,t)=>{let n=e.model().mix({counts:{hasOne:e_.Jz},messages:{hasMany:e_.nH},usercounts:{hasMany:e_.Nj},$extend:{Record:{save(){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url(),data:{"resource/x-bb-forumlink":{title:this.title}}},function(e){this.$unwrap(e.data["resource/x-bb-forumlink"])})}}}});return n}]);let tp=e_.Jz;eU.Z.factory(tp,["restmod",eq.xQ,(e,t)=>e.model()]);let tm=e_.iH;eU.Z.factory(tm,["restmod",eq.xQ,(e,t)=>{let n=e.model().mix({$config:{primaryKey:"cxFileId"},createDate:{serialize:"date"},expiryDate:{serialize:"date"}});return n}]);var th=n(580536);let tg=e_.M9;eU.Z.factory(tg,["restmod",eq.xQ,(e,t)=>{let n=e.model().mix({contents:{hasMany:e_.nH}});return n}]);let tf=e_.t6;eU.Z.factory(tf,["restmod",eq.xQ,(e,t)=>e.model()]);var tb=n(276635),tv=n(717205),ty=n(43223);let tC=e_.yB;eU.Z.factory(tC,["restmod",ty.HV,"$http","$q",(e,t,n,i)=>{let s=e.model().mix({courseId:{mask:"CU"},latestMessages:{mask:"U",map:"messages"},messages:{mask:"U",hasMany:e_.$c},participants:{mask:!0,hasMany:e_.xR},totalCount:{mask:"CU"},unreadCount:{mask:"CU"},createdDate:{mask:"CU",serialize:"date"},updatedDate:{mask:"CU",serialize:"date"},canBeRepliedTo:{mask:"U"},includesAllMembers:{mask:"U"},newParticipantIds:{mask:"R"},participantsWithoutSender:{mask:!0},participantsWithoutLatestSender:{mask:!0},creatorId:{mask:"CUD"},ui:{mask:!0,init:()=>({})},createConversation(e){return this.$decorate({"before-request":t=>{t.params={sendEmailToParticipants:e}}},function(){return this.$save()})},isCategoryIncluded(e){var t;return!!(null===(t=this.recipientCategory)||void 0===t?void 0:t.some(t=>t===e))},$hooks:{"before-request":function(e){if("GET"===e.method&&/conversations\/_\d+_\d+$/.exec(e.url)){e.params=e.params||{},e.params.fields=(e.params.fields||"")+",-participantIds";let t=i.all([n(tb.pick(e,"method","params","url")),this.participants.$fetch().$asPromise()]).then(e=>{let t=e[0];return delete t.data.participantIds,t});e.cache={get(){return t}},Object.defineProperty(this,"participantIds",{get(){return this.participants.map(e=>e.$pk)},set:tb.noop})}}}});return s.$extendRecord(function(e,n){if(!Object.prototype.hasOwnProperty.call(e,"latestSender")){let n=null;Object.defineProperty(e,"latestSender",{get(){let e=this.latestMessages[0].senderId;if(null!==n&&n.$pk===e)return n;let i=[()=>this.latestMessages[0].sender,()=>{if(this.participants.$resolved)return this.participants.find(e=>e.id===this.latestMessages[0].senderId)},()=>{if(eq.Id.isValid(this.latestMessages[0].senderId)){let e=t.$new(this.latestMessages[0].senderId);return e.$resolve(),e}let e=tv.s3();return this.latestMessages[0].senderId=e,t.$buildRaw({id:e})}];for(let e=0;e<i.length;e++){let t=i[e]();if(void 0!==t)return n=t,t}}})}return{}}),s}]),(o=g||(g={})).Normal="NORMAL",o.System="SYSTEM";let tS=e_.$c;eU.Z.factory(tS,["restmod",eq.xQ,(e,t)=>{let n=e.model().mix({conversationId:{mask:"CU"},courseId:{mask:"CU"},senderId:{mask:"CU"},isRead:{mask:"C",init:!1},postDate:{mask:"CU",serialize:"date"},type:{mask:"CU"},participants:{hasMany:e_.xR},ui:{mask:!0,init:()=>({})},isSystemMessage(){return g.System===this.type},createReply(e){return this.$decorate({"before-request":t=>{t.params={sendEmailToParticipants:e}}},function(){return this.$save()})}});return n}]);var tE=n(712303),tI=n(278784),tw=n(16379);function tA(e){e.sort((e,t)=>e.displayOrder&&t.displayOrder?e.displayOrder-t.displayOrder:e.displayOrder&&!t.displayOrder?-1:!e.displayOrder&&t.displayOrder?1:e.displayOrder||t.displayOrder?0:ty.Uf(e.user,t.user))}let tk=/courses\/(_\d+_\d+)/,tx=e_.YJ;eU.Z.factory(tx,["restmod","$q",eq.xQ,"$rootScope","$injector",(e,t,n,i,s)=>{let r;function o(){return r||(r=s.get("$ngRedux")),r}let a=e.model().mix({course:{belongsTo:e_.VH,key:"courseId"},user:{belongsTo:e_.xR,key:"userId"},officeHours:{hasMany:e_.jp},enrollmentDate:{serialize:"date"},isAvailable:{init:!0},lastAccessDate:{serialize:"date"},permissions:{init:{}},availabilityHasBeenBypassed(){return!!this.bypassCourseAvailabilityUntil},courseIsOpen(){return!this.courseIsPrivate()&&!1===this.course.isClosed},courseIsPrivate(){return"effectiveAvailability"in this.course?!this.course.effectiveAvailability:!this.course.isAvailable},courseIsComplete(){return!this.courseIsPrivate()&&!0===this.course.isClosed},isGuestMembership(){return this.role===e7.TsU.Guest},isStudentMembership(){let e=this.role===e7.TsU.Student;return!!(this.isInStudentPreview&&this.isInStudentPreview())||e},isStudentOrGuestMembership(){return this.isStudentMembership()||this.isGuestMembership()},isActAsInstructorMembership(){let e=this.courseRole&&this.courseRole.isActAsInstructor||this.role===e7.TsU.Instructor;return!(this.isInStudentPreview&&this.isInStudentPreview())&&e},isTeachingAssistantMembership(){return this.role===e7.TsU.TeachingAssistant},isInRoleBucket(e){return this.courseRole&&this.courseRole.roleBucket===e},isDueDateExcepted(){return this.accommodation().dueDate.hasAccommodation},accommodation(){return tw.sE.fromTypes(this.dueDateExceptionType,this.timeLimitExceptionType)},setAccommodation(e){e.dueDate.equals(this.dueDateExceptionType)||(this.dueDateExceptionType=e.dueDate.type),e.timeLimit.equals(this.timeLimitExceptionType)||(this.timeLimitExceptionType=this.toLearnTimeAccommodationType(e.timeLimit))},toLearnTimeAccommodationType(e){if(e.type===e7.rWm.Custom){var t;return null!==(t=e.value)&&void 0!==t?t:e7.rWm.NoAccommodation}return e.type},getCourseColorClass(){return tE.bb(this)},$extend:{Collection:{getMembershipCount(e){return this.getCounts(e).then(e=>e.count)},getCounts(e,n="/count"){let i=t.defer();return this.$collection().$send({method:"GET",url:this.$url()+n,params:e},e=>{i.resolve(e.data)},e=>{i.reject(e)}),i.promise},getDetailsCount(){return this.getCounts({membershipAvailable:"true"})},getRoleBucketCount(){return this.getCounts({groupBy:"roleBucket"},"/counts")},getAccommodatedMemberCount(){return this.getCounts({membershipAvailable:"true"}).then(e=>e.withAccommodationCount)},batchGetCollections(e){let n=t.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},e=>{n.resolve(e.data)},e=>{n.reject(e)}),n.promise}}},$hooks:{"before-fetch-many":function(e){let t=(tk.exec(this.$url())||[])[1];t&&i.$broadcast(`course-${t}-memberships-before-fetch`,e)},"after-fetch-many":function(){var e;this.forEach(e=>{1===e.displayOrder&&(e.ui||(e.ui={}),e.ui.isLeader=!0),e.user&&null==e.user.isAvailable&&(e.user.isAvailable=!0),e.course&&e.course.instructorsMembership&&e.course.instructorsMembership.length&&tA(e.course.instructorsMembership)});let t=o(),n=(0,tI.L)(this.$response.data),i=null!==(e=this.$response.config.params)&&void 0!==e?e:{},s=Object.keys(i).filter(e=>void 0!==i[e]&&null!==i[e]).map(e=>`${e}=${i[e]}`).join("&"),r=`${this.$url()}?${s}`,a=(0,eJ.RAR)(r);if(a){t.dispatch(eJ.Nwg.courseMembership.setCourseMembershipsInStore(a,n));return}let l=(0,eJ.qDZ)(r);l&&t.dispatch(eJ.Nwg.courseMembership.setUserMembershipsInStore(l,n))},"after-fetch":function(){1===this.displayOrder&&(this.ui||(this.ui={}),this.ui.isLeader=!0)},"after-feed":function(){var e;if(this.userId=this.userId||(this.user||{$pk:void 0}).$pk,null===(e=this.$response)||void 0===e?void 0:e.data){let e=o(),t=(0,tI.L)(this.$response.data);e.dispatch(eJ.Nwg.courseMembership.setMembershipInStore(t))}}}});return a}]);let tT=e_.Wi;eU.Z.factory(tT,["restmod",eq.xQ,(e,t)=>e.model().mix({$extend:{Record:{getEmailPreviewContent(){return this.$send({method:"GET",url:this.$scope.$url()+"/preview"},e=>this.$unwrap({emailBody:e.data.emailBody})).$asPromise()},getCourseInviteUrl(){return this.$send({method:"GET",url:this.$scope.$url()+"/inviteUrl"},e=>this.$unwrap({inviteUrl:e.data.inviteUrl})).$asPromise()}}}})]);let tP=e_.nc;eU.Z.factory(tP,["restmod","DSCacheFactory",eq.xQ,(e,t,n)=>e.model().mix({$config:{primaryKey:"key"},$extend:{Collection:{getPreference(e){return new tD(t,this).getPreference(e)},setPreference(e){return new tD(t,this).setPreference(e)},deletePreference(e){return new tD(t,this).deletePreference(e)}}}})]);class tD{setPreference(e){return this._setCachePreference({key:e.key,value:e.value.toString(),visibleToStudents:e.visibleToStudents}).$asPromise().then(t=>{let n={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.value){case"boolean":n.value="true"===t.value;break;case"number":n.value=Number(t.value)}return n})}_setCachePreference(e){let t=this._getPreferenceCacheForCourse(),n=this._setPreferenceOnBackend(e);return t.put(e.key,n),n}_setPreferenceOnBackend(e){if(e.key.length>247)throw Error("Preference key is too long!");if(e.value.length>255)throw Error("Preference value is too long!");let t=this.preferences.$new(e.key);return t.key=e.key,t.value=e.value,t.visibleToStudents=e.visibleToStudents,t.$save()}getPreference(e){let t;return"defaultValue"in e&&(t={value:e.defaultValue.toString(),visibleToStudents:!0}),this._getPreferenceWithDefaultAndCache({key:e.key,defaultPreference:t}).$asPromise().then(t=>{let n={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.defaultValue){case"boolean":n.value="true"===t.value;break;case"number":n.value=Number(t.value)}return n})}_getPreferenceWithDefaultAndCache(e){let t=this._getPreferenceCacheForCourse().get(e.key);return null==t&&(t=this._getPreferenceFromBackend(e),this._getPreferenceCacheForCourse().put(e.key,t)),t}_getPreferenceFromBackend(e){if(e.key.length>247)throw Error("Preference key is too long!");if(e.defaultPreference&&e.defaultPreference.value.length>255)throw Error("Default preference value is too long!");return this.preferences.$find(e.key).$allow([404]).$then(t=>{t.$response&&404===t.$response.status&&e.defaultPreference&&null!=e.defaultPreference.value&&null!=e.defaultPreference.visibleToStudents&&(t.value=e.defaultPreference.value,t.visibleToStudents=e.defaultPreference.visibleToStudents)})}_getPreferenceCacheForCourse(){if(!this.courseId)throw Error("No courseId has been provided");let e="course.preference.",t=this.DSCacheFactory.get(e+this.courseId);return null==t&&(t=this.DSCacheFactory.createCache(e+this.courseId,{capacity:100})),t}deletePreference(e){return this._deleteCachePreference(e).$asPromise().then(e=>{let t={key:e.key,value:e.value,visibleToStudents:e.visibleToStudents};return t})}_deleteCachePreference(e){let t=this._getPreferenceCacheForCourse(),n=t.get(e);if(n){t.remove(e);let n=this.preferences.$new(e);return n.$destroy().$allow([404])}return this.preferences.$new(e)}constructor(e,t){this.DSCacheFactory=e,this.preferences=t,this.courseId=t.$scope.$scope.id||t.$scope.$scope.$pk}}var tG=n(178975);let tR=e_.mH;eU.Z.factory(tR,["restmod",eq.xQ,(e,t)=>e.model().mix(e6.HV,{})]);let tB=(e,t)=>{let n="/learn/api/v1/courses/"+e+"/groupsets";return t&&(n+="/"+t),n},tL=e_.x9;eU.Z.factory(tL,["restmod","$q",eq.xQ,(e,t,n)=>{let i=e.model().mix({course:{belongsTo:e_.VH,key:"courseId"},modifiedDate:{serialize:"date"},isAvailable:{init:!1},batchUid:{mask:!0},collabSession:{hasMany:e_.VI,path:"collabultra/sessions"},$extend:{Record:{canDelete(){return!this.permissions||this.permissions.delete},canEdit(){return!this.permissions||this.permissions.modify}},Collection:{batchGetCollection(e,t){return this.findMany(e,t).$asPromise()},batchUpdate(e){return this.$collection().$send({method:"PUT",url:this.$url()+"/batchUpdate",data:e},function(e){let t=e.data.map(e=>e.statusCode>=200&&e.statusCode<300?ej.fromJson(e.body):e.body);return this.$unwrap({results:t})}).$asPromise()},getGroupsInGroupSet(e,t,n){let{expand:i,limit:s=1e3}=n;return this.$collection().$send({method:"GET",url:tB(e,t)+"/groups",params:{expand:i,limit:s}},function(e){let t=[];return e.data&&e.data.results&&(t=e.data.results),this.$unwrap({results:t})}).$asPromise()}}}});return i}]);let tN=e_.QA;eU.Z.factory(tN,["restmod",ts.H,(e,t)=>e.model().mix({groupAttempts:{hasMany:e_.br,hooks:{"after-fetch-many":function(){let e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];for(let n=0;n<this.length;n++)this[n]=t.$new(e).gradebook.groupAttempts.$buildRaw(this[n]),this[n].attempts&&this[n].attempts.length&&(this[n].attempts=t.$new(e).gradebook.attempts.$decode(this[n].attempts))}}}})]);let tO=e_.$K;eU.Z.factory(tO,["restmod",e=>e.model().mix({$hooks:{"before-request":e=>{e.headers={"Suppress-Session-Timestamp-Update":!0}}}})]);let tM=e_.Xk;eU.Z.factory(tM,["restmod",eq.xQ,(e,t)=>e.model().mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement(){return!!this.uid}}}})]);let t$=e_.O8;eU.Z.factory(t$,["restmod",eq.xQ,(e,t)=>{let n=e.model(eV.default.apiBasePath+"/v1/cloudstorages").mix({contents:{hasMany:e_.$w},me:{hasOne:e_._S},$config:{primaryKey:"name"}});return n}]);let tH=e_._S;eU.Z.factory(tH,["restmod",eq.xQ,(e,t)=>e.model()]);let tF=e_.$w;eU.Z.factory(tF,["restmod",eq.xQ,(e,t)=>{let n=e.model().mix({download:{hasOne:e_.gl,mask:!0},createdTime:{serialize:"date"},updatedTime:{serialize:"date"},ui:{mask:!0,init:()=>({})},$url(e){return this.$scope.$url(e)+"/"+encodeURIComponent(this.$pk)},$extend:{Record:{getChildren(e){return null==e&&(e={}),this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",params:e},function(e){this.$unwrap(e.data)},function(e){})}}}});return n}]);let tU=e_.gl,tV={};eU.Z.factory(tU,["restmod",eq.xQ,(e,t)=>{let n=e.model().mix(tV);return n}]);let t_=e_.QG;eU.Z.factory(t_,["restmod",eq.xQ,(e,t)=>{let n=e.model(eV.default.apiBasePath+"/v1/cloudstorages/tasks").mix(tV);return n}]);let tq=e_.dF;eU.Z.factory(tq,["restmod",eq.xQ,(e,t)=>e.model(eV.default.apiBasePath+"/v1/collabultra/ping").mix({$extend:{Record:{getCollabUltraInfo(){return this.$send({method:"GET",url:this.$scope.$url()},function(e){this.$unwrap(e.data)}).$allow([403,404]).$asPromise()}}}})]);let tz=e_.cj;eU.Z.factory(tz,["restmod",eq.xQ,(e,t)=>{let n=eV.default.apiBasePath+"/v1/utilities/entitlements";return e.model(n).mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement(){return!!this.uid}}}})}]);let tW=e_.uI;eU.Z.factory(tW,["restmod",e=>e.model(eV.default.apiBasePath+"/v1/externalCourses").mix({schedule:{hasMany:e_.mH},startDate:{serialize:"date"},endDate:{serialize:"date"},$extend:{Collection:{}},$hooks:{"before-request":function(e){eV.default.features.externalCourse||"GET"!==e.method||e.url!==`${eV.default.apiBasePath}/v1/externalCourses`||(e.cache={get(){return{paging:{nextPage:"",previousPage:"",count:0,limit:1e5,offset:0},permissions:null,results:[]}}})}}})]);let tj=e_.HB;eU.Z.factory(tj,["restmod",eq.xQ,(e,t)=>e.model().mix({ui:{mask:!0,init:()=>({})}})]);var tZ=n(776846),tK=n(889019),tX=n(619034);let tY=e_.br;eU.Z.factory(tY,["restmod",ts.H,eq.xQ,(e,t,n)=>e.model().mix(tZ.serviceName,{attempts:{ignore:"CU"},members:{ignore:"CU"},$extend:{Scope:{$destroyUrlFor(e){return eV.default.apiBasePath+"/v1/courses/"+tK.j(t,e.$scope)+"/gradebook/groupAttempts/"+e.id}},Record:{getFeedbackToUser(){return this.feedbackToUser},getLastFeedbackAuthor(){return this.lastFeedbackAuthor||this.attempts[0]&&this.attempts[0].lastFeedbackAuthor},getGradeAttempt(){return this.attempts&&this.attempts.length?1===this.attempts.length?this.attempts[0]:this.submittedBy?tb.find(this.attempts,e=>e.userId===this.submittedBy):tb.sortBy(this.attempts,["creationDate"])[0]:null},isPrePostGrade(){return!this.isCompleted()||!this.readyToPost},isDisplayablePostedGrade(){return this.isCompleted()&&this.readyToPost}},Collection:{getNumAttemptsSubmittedLate(e){return this.filter(t=>t.isSubmitted()&&tX(t.attemptDate).isAfter(e)).length},getNumAttemptsToGrade(){return this.filter(e=>e.isNeedsGrading()&&!e.isPostable()).length},getNumAttemptsToPost(){return this.filter(e=>e.isPostable()).length},getNumOfGradedAttempts(){return this.filter(e=>e.isGraded()).length},isAllGradedAndPosted(){return this.length>0&&this.every(e=>e.isCompleted())},isFirstAttemptPosted(){var e;return null===(e=this.getFirstAttempt())||void 0===e?void 0:e.isCompleted()},isLastSubmittedAttemptPosted(){var e;return null===(e=this.getLastSubmittedAttempt())||void 0===e?void 0:e.isCompleted()},getAttemptIndexById(e){return this.findIndex(t=>t.id===e)},getAttemptById(e){return tb.find(this,t=>t.id===e)},getFirstAttempt(){return this.length?this[0]:void 0},getLastSubmittedAttempt(){return this.length?this[this.length-1]:void 0}}},$hooks:{"after-update":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-fetch":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-feed":function(e){this.permissions&&(this.permissions.deleteAttempt=this.permissions.delete,this.permissions.editAttempt=this.permissions.editGrade),function(e){let t=e.toolAttemptDetail,n=e.attempts;if(!t||!n)return;let i=Object.keys(t)[0];i&&n.forEach(e=>{if(e.toolAttemptDetail)return;let n=e.id,s=tb.cloneDeep(t);if(!s[i])return;e.toolAttemptDetail=s;let r=e.toolAttemptDetail[i].questionAttempts;r&&r.forEach(e=>{e.attemptId=n})})}(this)}}})]);let tQ=e_.NC;eU.Z.factory(tQ,["restmod",eq.xQ,(e,t)=>e.model().mix({ui:{mask:!0,init:()=>({})},$hooks:{"after-feed":function(e){this.localizableTitle||(this.localizableTitle={bundle:"gradebook_type",languageKey:this.title,serviceLevel:null})}}})]);var tJ=n(454229),t0=n(529462),t1=n(519122);let t2=e_.kI;eU.Z.factory(t2,["$ngRedux","restmod",eq.xQ,ts.H,(e,t,n,i)=>t.model().mix({$hooks:{ui:{mask:!0,init:()=>({updateTimestamp:0})},"after-feed":function(){this.calculateDerivedSummaries(),e.dispatch(eJ.Nwg.columnSummary.invalidateColumnSummary(this.columnId))}},$extend:{Record:{calculateDerivedSummaries(){this.numNeedsGrading=eq.yA(this.numGroupsNeedsGrading,this.numStudentsNeedsGrading),this.numPosted=eq.yA(this.numGroupsPosted,this.numStudentsPosted),this.numEligibleToBeGraded=null!=this.numGroupsPosted?this.numGroupsEligibleToBeGraded:this.numStudentsEligibleToBeGraded,this.numSubmissionGradedNeedsPosting=eq.yA(this.numGroupsSubmissionGradedNeedsPosting,this.numStudentsSubmissionGradedNeedsPosting),this.numStudentsEligibleToBeGradedExternalSubmission=this.numStudentsEligibleToBeGraded-this.numStudentsGradedNeedsPosting-this.numStudentsPosted-this.numberOfOverriddenGradesToPost,this.numGroupsEligibleToBeGradedExternalSubmission=this.numGroupsEligibleToBeGraded-this.numGroupsGradedNeedsPosting-this.numGroupsPosted,null!=this.numGroupsGradedNeedsPosting?(this.numGradedNeedsPosting=this.numGroupsGradedNeedsPosting,this.numberOfStudentsOverriddenGradesToPost=this.numberOfOverriddenGradesToPost,this.numberOfOverriddenGradesToPost=0):this.numGradedNeedsPosting=this.numStudentsGradedNeedsPosting},isRestricted(){return this.restricted},getStatus(){return this.isRestricted()?t1.Z.Restricted:this.numNeedsGrading>0?t1.Z.NeedsGrading:this.totalNumberOfGradesToPost()>0?t1.Z.NeedsPosting:this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0?t1.Z.AllPosted:0===this.numSubmissionsTotal?t1.Z.NothingToGrade:0===this.numNeedsGrading?t1.Z.AllGraded:void 0},isAllGradedAndPosted(){return this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0},numStudentsGraded(){return this.numGradedNeedsPosting+this.numPosted+this.numberOfOverriddenGradesToPost},numStudentSubmissions(){return this.participantIds?this.participantIds.length:this.numGroupsSubmitted||this.numStudentsSubmitted},hasGradesToPost(){return null!=this.numGroupsGradedNeedsPosting?this.numGroupsGradedNeedsPosting>0:this.numGradedNeedsPosting>0||this.numberOfOverriddenGradesToPost>0},totalNumberOfGradesToPost(){return this.numGradedNeedsPosting+this.numberOfOverriddenGradesToPost}},Model:{inferKey(){return t0.d()},unpack(e,t){return tb.forOwn(e,(e,t,n)=>{tb.startsWith(t,"$")||"ui"===t||(n[t]=null)}),eq.SY(e,t)}},Collection:{expandingColumns(e,t){let n={},i=this.$collection().$on("after-fetch-many",i=>{let s=i.data.results;n=s.reduce((e,t)=>(e[t.columnId]=t,e),n),e.forEach(e=>{e.id in n?e.summary.$unwrap(n[e.id]):t&&e.summary.$unwrap(t)})});return i}}}})]);var t3=n(183209);let t9=e_.im;eU.Z.factory(t9,["restmod",eq.xQ,(e,t)=>e.model().mix({ui:{mask:!0,init:()=>({})},$extend:{Record:{getPossiblePoints(){if(this.scaleType===e7.aQo.Score)throw Error("Possible points must be entered by the user for schemas with a scale type of Score");return 100}}}})]);var t4=n(197196),t7=n(715419),t5=n(592281);let t6=e_.gw;eU.Z.factory(t6,["restmod",eq.xQ,"$injector","$ngRedux",(e,t,n,i)=>e.model().mix({$hooks:{"before-fetch":function(e){e.method="POST",tb.isString(e.params.membershipIds)&&(e.params.membershipIds=e.params.membershipIds.split(",")),tb.isString(e.params.gradeIds)&&(e.params.gradeIds=e.params.gradeIds.split(",")),tb.isString(e.params.columnIds)&&(e.params.columnIds=e.params.columnIds.split(",")),e.data={membershipIds:e.params.membershipIds,gradeIds:e.params.gradeIds,columnIds:e.params.columnIds},delete e.params.membershipIds,delete e.params.gradeIds,delete e.params.columnIds},"after-fetch":function(e){let t=n.get(ts.H),s=e.config.params.courseId,r=[];this.bulkViewUsers.forEach(e=>{if(e.exceptions&&e.exceptions.forEach(e=>{let t={...e,effectiveDueDate:e.effectiveDueDate?t5.Z.parseStringToDate(e.effectiveDueDate):null,fixedDueDate:e.fixedDueDate?t5.Z.parseStringToDate(e.fixedDueDate):null};r.push(t)}),e.grades){let n=e.grades.map(e=>{var t;let n=null===(t=e.attempts)||void 0===t?void 0:t.find(t=>new Date(t.attemptDate).getTime()===new Date(e.lastAttemptDate).getTime());return{...e.grade,lastAttemptId:null==n?void 0:n.id}});i.dispatch(eJ.Nwg.gradebookGrade.setGradesInStore(n)),e.grades.forEach(e=>{let n=e.grade;e.grade=t.$new(s).gradebook.columns.$new(e.columnId).grades.$buildRaw(n),e.lastAttemptDate&&(e.lastAttemptDate=new Date(e.lastAttemptDate)),e.attempts&&e.attempts.length>0&&(e.attempts.forEach(i=>{let r=t.$new(s).gradebook.columns.$new(e.columnId).grades.$new(n.id).attempts.$buildRaw(i);e.grade.attempts.$add(r)}),e.grade.ui.attempt=(0,t7.w)(e.grade.attempts,e.grade,e.grade.column)),e.grade.permissions=this.permissions,e.submissionResults&&e.submissionResults.results[t4.P]&&(e.originalityProcessed=e.submissionResults.results[t4.P].originalityProcessed,e.originalityScore=e.submissionResults.results[t4.P].originalityScore)})}}),r&&r.length>0&&i.dispatch(eJ.Nwg.exceptionDetails.setExceptionDetailInStore(r))}}})]);var t8=n(624930);let ne=e_.P7;class nt{static fromValue(e){return nt[e]}}nt.ALL={resetShowComments:()=>!0,getValue:()=>"ALL",validate:e=>!0},nt.BYCOLUMNS={resetShowComments:()=>!1,getValue:()=>"BYCOLUMNS",validate:e=>e&&!!e.length},nt.HISTORYLOG={resetShowComments:()=>!0,getValue:()=>"HISTORYLOG",validate:e=>!0};class nn{static fromValue(e){return nn[e]}}nn.MYDEVICE={resetContentCollection:()=>!0,getValue:()=>"MYDEVICE",validate:e=>!0,openUrl:e=>{let t=e4.mg();window.location.href=t+e}},nn.CONTENTCOLLECTION={resetContentCollection:()=>!1,getValue:()=>"CONTENTCOLLECTION",validate:e=>!!e,openUrl:e=>()=>{}},eU.Z.factory(ne,["restmod",eq.xQ,(e,t)=>e.model().mix({grades:{hasMany:e_.e5},columns:{hasMany:e_.WC},attempts:{hasMany:e_.Sp},categories:{hasMany:e_.NC},performancecodes:{hasMany:e_.Q5},schemas:{hasMany:e_.im},bulkView:{hasOne:e_.gw,path:"grades/bulkView"},settings:{hasOne:e_.SX},groupAttempts:{hasMany:e_.br},summaries:{hasMany:e_.kI},$extend:{Record:{getDownloadUrl(e){if(!e||!e.dataScopeType||!e.delimiterType)throw new t8.v({message:"dataScoreType and delimiterType must be set"});return this.$send({method:"POST",url:this.$url()+"/prepareDownload",data:{...e,dataScopeType:e.dataScopeType.getValue(),downloadTo:e.downloadTo.getValue()}},function(e){this.$unwrap(e.data)}).$asPromise()},validateCalculatedFormula(e){if(!e)throw new t8.v({message:"formula data must be set"});return this.$send({method:"POST",url:this.$url()+"/validateCalculatedFormula",data:e}).$allow([400]).$asPromise().then(e=>200===e.$response.status)},parseUploadedGradebook(e){return this.$send({method:"GET",url:this.$url()+"/parseUploadedGradebook",params:e},function(e){this.$unwrap(e.data)}).$allow([400,403,404]).$asPromise()},importGradebook(e){return this.$send({method:"POST",url:this.$url()+"/importGradebook",data:e},function(e){this.$unwrap(e.data)}).$allow([400,403,404]).$asPromise()}}}})]);let ni=e_.SX;eU.Z.factory(ni,["restmod",eq.xQ,(e,t)=>e.model()]);let ns=e_.ou;eU.Z.factory(ns,["restmod",e=>e.model().mix({$hooks:{"after-save":function(e){this.points=null,this.$unwrap(e.data),this.questionAttempt.visibleQuestionNumber=this.questionNumber},"before-save":function(e){e.url=e.url.substr(0,e.url.indexOf("/answers"))+"/answers/"+this.questionAttempt.id+"/grades",tb.merge(e.data,{questionType:this.questionAttempt.questionType}),this.questionNumber=this.questionAttempt.visibleQuestionNumber},"after-fetch-many":function(){this.forEach(e=>{e.permissions=this.permissions})}},$extend:{Collection:{setPostStatusAndGroupAttemptId(e){this.forEach(t=>{t.ui.isPosted=e.isCompleted(),e.groupAttemptId&&(t.ui.groupAttemptId=e.groupAttemptId)})}}},questionAttempt:{ignore:"CU"},ui:{init:()=>({}),mask:!0}})]);let nr=e_.Q5;eU.Z.factory(nr,["restmod","$q",eq.xQ,(e,t,n)=>{let i=e.model().mix({});return i}]);let no=e_.f3;eU.Z.factory(no,["restmod",eq.xQ,e=>e.model().mix({$extend:{hasAttachments(){return!tb.isUndefined(this.overallOriginalityProcessed)&&(this.attemptOriginality&&this.attemptOriginality.attachments.length||this.answerOriginalities.length&&this.answerOriginalities.some(e=>e.attachments.length))},canShowReportPanel(){return this.overallOriginalityProcessed&&this.hasAttachments()}},$hooks:{"after-request":function(e){e.data.results&&(e.data=e.data.results[t4.P])}}})]);let na=e_.XT;eU.Z.factory(na,["restmod",e=>{let t=eV.default.apiBasePath+"/v1/calendars/institution/calendarItems",n=e.model(t).mix(e6.HV);return n}]);let nl=e_.Q_;eU.Z.factory(nl,["restmod",eq.xQ,(e,t)=>{let n=eV.default.apiBasePath+"/v1/roles/institutionRoles";return e.model(n)}]);let nc=e_.a2;eU.Z.factory(nc,["restmod",eq.xQ,(e,t)=>{let n=eV.default.apiBasePath+"/v1/languages";return e.model(n).mix({})}]);let nd=e_.Dy;(a=f||(f={})).Approved="Approved",a.Excluded="Excluded",a.NeedsApproval="NeedsApproval",(l=b||(b={})).Never="Never",l.SSLOnly="SSLOnly",l.Always="Always",eU.Z.factory(nd,["restmod",e=>{let t=eV.default.apiBasePath+"/v1/lti/domainConfigs";return e.model(t).mix({$extend:{Model:{findByDomain(e){return this.$build().$send({method:"GET",url:this.$url()+"?domain="+e},function(e){return this.$unwrap(e.data)}).$allow([404]).$asPromise()}}}})}]);let nu=e_.Lt;eU.Z.factory(nu,["restmod",eq.xQ,e=>{let t=eV.default.apiBasePath+"/v1/lti/settings";return e.model(t).mix({$extend:{Model:{getSettings(){return this.$build().$send({method:"GET",url:this.$url()},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]);let np=e_.Lv;eU.Z.factory(np,["restmod",e=>{let t=eV.default.apiBasePath+"/public/v1/lti/placements";return e.model(t).mix({isAvailable(){return e7.y67.Yes===this.availability.available},$hooks:{"after-feed":function(e){this.iconUrl=e4.uI(this.iconUrl)}}})}]);let nm=e_.PF;eU.Z.factory(nm,["restmod",eq.xQ,(e,t)=>{let n=eV.default.apiBasePath+"/v1/users/me/preferences";return e.model(n).mix({$config:{primaryKey:"key"}})}]);let nh=e_.qq;eU.Z.factory(nh,["restmod",eq.xQ,e=>e.model()]);var ng=n(362368);let nf=e_.Si;eU.Z.factory(nf,["restmod",eq.xQ,e=>e.model()]);let nb=e_.lU;eU.Z.factory(nb,["restmod",eq.xQ,e=>e.model().mix({courseSettings:{hasMany:e_.Si},organizationSettings:{hasMany:e_.Si},$url:()=>eV.default.apiBasePath+"/v1/notification/settings"})]);let nv=e_.jp;eU.Z.factory(nv,["restmod",e=>e.model().mix(e6.HV,{})]);var ny=n(537749);let nC=e_.RL;eU.Z.factory(nC,["restmod",e=>{let t=eV.default.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getPartnersByType(e){return this.$build().$send({method:"GET",url:this.$url()+"/providerContent?course_id="+e},function(e){return this.$unwrap(e.data)}).$allow(["400-599"]).$asPromise()}}},$hooks:{"after-feed":function(e){let t=e=>{ej.isDefined(e.internalPovider)&&ej.isUndefined(e.internalProvider)&&(e.internalProvider=e.internalPovider)};tb.forEach(this.premierList,t),tb.forEach(this.signatureList,t),tb.forEach(this.otherList,t);let n=e=>!e.internalProvider||ny.a$(e);this.premierList=tb.filter(this.premierList,n),this.signatureList=tb.filter(this.signatureList,n),this.otherList=tb.filter(this.otherList,n)}}})}]);let nS=e_.hV;eU.Z.factory(nS,["restmod",e=>{let t=eV.default.partnerCloudBasePath+"/v1/status";return e.model(t).mix({$extend:{Model:{getStatus(e){return this.$build().$send({method:"GET",url:this.$url()+"?course_id="+e},function(e){return this.$unwrap(e.data)},function(){return this.$unwrap({enabled:!1,userCloudProvisioned:!1})}).$allow(["400-599"]).$asPromise()}}}})}]);let nE=e_.jh;eU.Z.factory(nE,["restmod",eq.xQ,(e,t)=>{let n=eV.default.partnerCloudBasePath+"/v1/courses";return e.model(n).mix({partnerLinkedCourses:{hasMany:e_.lb,path:"providerBindings"},$extend:{Record:{updateProvisioning(e){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.$pk+"/updateProvisioning/"+e},function(e){this.$unwrap(e.data)}).$allow(["400-599"]).$asPromise()}}}})}]);let nI=e_.lb;eU.Z.factory(nI,["restmod",eq.xQ,e=>e.model().mix({tools:{hasOne:e_.Xr,path:"tools"},id:{map:"@id"},$extend:{Model:{unpack:(e,t)=>t&&t.bindings}}})]);let nw=e_.iT;eU.Z.factory(nw,["restmod",e=>{let t=eV.default.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{getContentIds(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/"+e+"/linkRefId/"+t+"/content/ids"},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]),n(344429);let nA=e_.O2;eU.Z.factory(nA,["restmod",e=>{let t=eV.default.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getSettingsById(e){return this.$build().$send({method:"GET",url:this.$url()+"/providers/"+e+"/settings"},function(e){return this.$unwrap(e.data)}).$allow(["400-599"]).$asPromise()}}}})}]);let nk=e_.Xr;eU.Z.factory(nk,["restmod",eq.xQ,(e,t)=>e.model().mix({})]);let nx=e_.Ei;eU.Z.factory(nx,["restmod",e=>e.model().mix(e6.HV,{})]);var nT=n(291146);let nP=e_.Ky;function nD(e,t){e.activityDaily&&e.activityDaily.forEach(e=>{e.inCourseDuration=nG(e.inCourseDuration),e.ui={display:t.formatComposedDurationSync(e.inCourseDuration,nT.ILocaleComposedDurationFormat.HoursMinutes)}}),e.activityWeekly&&e.activityWeekly.forEach(e=>{e.inCourseDuration=nG(e.inCourseDuration),e.ui={display:t.formatComposedDurationSync(e.inCourseDuration,nT.ILocaleComposedDurationFormat.HoursMinutes)}})}function nG(e){return 900*Math.round(e/15)}eU.Z.factory(nP,["restmod",nT.serviceName,(e,t)=>{let n=eV.default.telemetryApiBasePath+"/v1/predict/courses";return e.model(n).mix({"activityDaily[].activityDate":{decode:"localDate"},"activityWeekly[].activityWeek":{decode:"localDate"},"assignments[].dueDate":{serialize:"date"},"assignmentGrades[].gradedDate":{serialize:"date"},"assignmentGrades[].submissionDate":{serialize:"date"},startDate:{serialize:"date"},endDate:{serialize:"date"},lastActivityDate:{serialize:"date"},"weeks[].weekOf":{decode:"localDate"},$hooks:{"after-fetch":function(){nD(this,t),this.instructors&&this.instructors.forEach(e=>{e.learnUser=nH})}}})}]);let nR=e_.EJ;eU.Z.factory(nR,["restmod",e=>e.model().mix({$extend:{Model:{$for(e,t){return this.$collection(t,{$urlFor(){return eV.default.telemetryApiBasePath+"/v1/predict/"+e}})}},Collection:{$decode(e){return this.push(...e),this}}}})]);let nB=e_.E6;eU.Z.factory(nB,["restmod",e=>{let t=eV.default.telemetryApiBasePath+"/v1/predict/favorites";return e.model(t).mix({$extend:{Model:{marketSnapshot(e,t){return this.$build().$send({method:"GET",params:t,url:this.$url()+"/"+e+"/marketSnapshot"},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]);let nL=e_.y1;eU.Z.factory(nL,["restmod",eq.xQ,(e,t)=>{let n=eV.default.telemetryApiBasePath+"/v1/predict/settings",i=e.model(n).mix({$extend:{Model:{get(){return this.single(n).$fetch().$allow([403]).$asPromise()}}},$hooks:{"after-fetch":function(){ej.isUndefined(this.advisorEmailEnabled)&&(this.advisorEmailEnabled=!0),ej.isUndefined(this.instructorEmailEnabled)&&(this.instructorEmailEnabled=!0);let e=tb.indexOf(this.fields,"probability");-1!==e&&(this.fields[e]="goodProbability")}}});return i}]);let nN=e_.BT;eU.Z.factory(nN,["restmod",eq.xQ,e=>{let t=eV.default.apiBasePath+"/v1/telemetry/predict/systemSettings",n=e.model(t).mix({$extend:{Model:{get(){return this.single(t).$fetch().$allow([404]).$asPromise()}}}});return n}]);let nO=e_.Cy;eU.Z.factory(nO,["restmod",e=>e.model().mix({$extend:{Model:{$for(e,t){return this.$collection(t,{$urlFor(){return eV.default.telemetryApiBasePath+"/v1/predict/"+e}})}},Collection:{$unwrap(e){return e.results||e.data?(e.data&&this.push(...e.data),e.results&&this.push(...e.results)):this.push(...e),this}}}})]);let nM=e_.WF;function n$(e){ej.isDefined(e.goodProbability)&&(e.goodProbability=Math.round(100*e.goodProbability)),ej.forEach(e.courses,e=>{e.prediction&&(e.prediction.goodProbability=Math.round(100*e.prediction.goodProbability)),e.previousPrediction&&(e.previousPrediction.goodProbability=Math.round(100*e.previousPrediction.goodProbability)),ej.forEach(e.weeks,e=>{e.goodProbability=Math.round(100*e.goodProbability)})})}function nH(){return ej.isUndefined(this.ui)&&(this.ui={}),ej.isUndefined(this.ui.learnUser)&&(this.ui.learnUser={givenName:this.firstName,familyName:this.lastName}),this.ui.learnUser}eU.Z.factory(nM,["restmod","$q",nT.serviceName,(e,t,n)=>{let i=eV.default.telemetryApiBasePath+"/v1/predict/students",s=eV.default.telemetryApiBasePath+"/v1/predict/courses/",r=eV.default.telemetryApiBasePath+"/v1/predict/studentSearch",o=eV.default.telemetryApiBasePath+"/v1/predict/message";eV.default.telemetryApiBasePath;let a=e.model(i).mix({academicHoldDate:{serialize:"date"},birthDate:{serialize:"date"},financialHoldDate:{serialize:"date"},lastActivityDate:{serialize:"date"},"plannerInterests[].chosenDate":{serialize:"date"},plannerLocationChosenDate:{serialize:"date"},"courses[].activityDaily[].activityDate":{decode:"localDate"},"courses[].activityWeekly[].activityWeek":{decode:"localDate"},"courses[].assignments[].dueDate":{serialize:"date"},"courses[].assignmentGrades[].gradedDate":{serialize:"date"},"courses[].assignmentGrades[].submissionDate":{serialize:"date"},"courses[].startDate":{serialize:"date"},"courses[].endDate":{serialize:"date"},"courses[].lastActivityDate":{serialize:"date"},"courses[].weeks[].weekOf":{decode:"localDate"},$extend:{Model:{getCourseStudent(e,t,n){return this.single(s+t+"/students/"+e).$fetch(n).$allow([403]).$asPromise()},getCourseStudents(e,t){return this.$collection(t,{$urlFor(){return s+e+"/students"}}).$fetch(t).$allow([403]).$asPromise()},getStudent(e,n){let s=t.defer();return this.$collection({studentId:e},{$urlFor(){return i}}).$fetch(n).$asPromise().then(e=>{s.resolve(e[0])}).catch(()=>{s.reject()}),s.promise},postInstructorMessage(e,t,n){return this.$build().$send({method:"POST",url:s+n+"/students/"+t+"/message/advisor",data:e}).$asPromise()},postAdvisorMessage(e,t){return this.$build().$send({method:"POST",url:i+"/"+t+"/message/student",data:e}).$asPromise()},postMessage(e){return this.$build().$send({method:"POST",url:`${o}`,data:e}).$asPromise()},postMessageToStudents(e){return this.$build().$send({method:"POST",url:`${i}/message`,data:e}).$asPromise()},postMessageToStudentsByFilter(e,t){return this.$build().$send({method:"POST",url:`${i}/messageByFilter`,data:e,params:t}).$asPromise()},typeaheadSearch(e,n="",i=6,o=!1){let a=t.defer(),l=r+"?query="+encodeURIComponent(e);return n&&(l=`${s}${n}/studentSearch?query=${encodeURIComponent(e)}`),this.$build().$send({method:"GET",url:l,params:{emailRequired:!0===o?"true":"false",limit:i}},function(e){e&&e.data&&e.data.results?a.resolve(e.data.results.map(e=>({firstName:e.firstName,lastName:e.lastName,studentDisplayId:e.studentDisplayId,lmsId:e.lmsId,avatar:{permanentUrl:e.avatarUrl},learnUser:nH,email:e.email,advisors:e.advisors}))):a.resolve([])}).$allow([403]),a.promise}},Record:{learnUser:nH}},$hooks:{"after-fetch":function(){n$(this),this.courses.forEach(e=>{nD(e,n)}),this.advisors&&this.advisors.forEach(e=>{e.learnUser=nH})},"after-fetch-many":function(){this.forEach(e=>{n$(e),e.courses.forEach(e=>{nD(e,n)}),e.advisors&&e.advisors.forEach(e=>{e.learnUser=nH})})}}});return a}]);let nF=e_.A5;eU.Z.factory(nF,["restmod",eq.xQ,(e,t)=>{let n=eV.default.telemetryApiBasePath+"/v1/predict/permissions",i=e.model(n).mix({$extend:{Model:{get(){return this.single(n).$fetch().$allow([403]).$asPromise()}}}});return i}]);let nU=e_.Kk;eU.Z.factory(nU,["restmod","$q",(e,t)=>{let n=eV.default.telemetryApiBasePath+"/v1/predict/ftue",i=eV.default.telemetryApiBasePath+"/v1/predict/ftues";return e.model(n).mix({$extend:{Model:{setFtue(e){return this.$build().$send({method:"POST",url:this.$url()+"/"+e}).$asPromise()},delFtue(e){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e}).$asPromise()},delFtues(){return this.$build().$send({method:"DELETE",url:this.$url()}).$asPromise()},getFtue(e){let n=t.defer();return this.$build().$send({method:"GET",url:i,params:{timestamp:new Date().getTime()}},function(t){if(t&&t.data&&t.data.length){let i=t.data.filter(t=>t.componentKey===e);i&&i.length?n.resolve({key:i[0].componentKey,value:""}):n.resolve(null)}else n.resolve(null)}),n.promise},getFtues(){let e=t.defer();return this.$build().$send({method:"GET",url:i,params:{timestamp:new Date().getTime()}},function(t){if(t&&t.data&&t.data.length){let n=[];t.data.forEach(e=>{n.push({key:e.componentKey,value:""})}),n&&n.length?e.resolve(n):e.resolve(null)}else e.resolve(null)}),e.promise}}}})}]);let nV=e_.x2;eU.Z.factory(nV,["restmod","$q",eq.xQ,(e,t,n)=>{let i=eV.default.telemetryApiBasePath+"/v1/predict/notes",s=e.model(i).mix({dateCreated:{serialize:"date"},dateModified:{serialize:"date"},isEdited:{mask:!0},isUndoing:{mask:!0},isAdding:{mask:!0},$extend:{Model:{getNotes(e,t){return(t=t||{}).timestamp=new Date().getTime(),this.$collection(t,{$urlFor(){return i+"/students/"+e}}).$fetch(t).$allow([403]).$asPromise()},postNote(e,t){return this.$build().$send({method:"POST",url:i,data:{note:e,recipient:{recipientId:t.recipientId,email:t.email}}},function(e){this.$unwrap(e.data)}).$asPromise()},updateNote(e,t){return this.$build().$send({method:"PUT",url:i,data:{noteId:e,note:t}},function(e){return this.$unwrap(e.data)}).$asPromise()},deleteNote(e){return this.$build().$send({method:"DELETE",url:i+"/"+e},function(e){this.$unwrap(e.data)}).$asPromise()},undoDeleteNote(e){return this.$build().$send({method:"PUT",url:`${i}/${e}`},function(e){return e}).$asPromise()}}},$hooks:{"after-fetch-many":function(){this.forEach(e=>{ej.isDefined(e.dateModified)?e.isEdited=e.dateCreated.getTime()<e.dateModified.getTime():e.isEdited=!1;let t=(0,tb.cloneDeep)(e.dateCreated);e.ui.dateCreated=t})}}});return s}]);let n_=e_.u2;eU.Z.factory(n_,["restmod","$q",(e,t)=>{let n=eV.default.telemetryApiBasePath+"/v1/predict/preferences";return e.model(n).mix({$extend:{Model:{setPreference(e,t){return this.$build().$send({method:"POST",url:this.$url(),data:{componentKey:e,preference:t}}).$allow([403]).$asPromise()},delPreference(e){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e}).$asPromise()},delPreferences(){return this.$build().$send({method:"DELETE",url:this.$url()}).$asPromise()},getPreference(e){let i=t.defer();return this.$build().$send({method:"GET",url:`${n}/${e}`,params:{timestamp:new Date().getTime()}},function(t){if(t&&t.data&&t.data.length){let n=t.data.filter(t=>t.componentKey===e);n&&n.length?i.resolve({componentKey:n[0].componentKey,value:n[0].value}):i.resolve(null)}else i.resolve(null)}).$allow([403]),i.promise},getPreferences(){let e=t.defer();return this.$build().$send({method:"GET",url:n,params:{timestamp:new Date().getTime()}},function(t){if(t&&t.data&&t.data.length){let n=[];t.data.forEach(e=>{n.push({componentKey:e.componentKey,preference:e.preference})}),n&&n.length?e.resolve(n):e.resolve([])}else e.resolve([])}).$allow([403]),e.promise}}}})}]);let nq=e_.iJ;eU.Z.factory(nq,["restmod","$q",(e,t)=>{let n=eV.default.telemetryApiBasePath+"/v1/predict/preferences/config";return e.model(n).mix({$extend:{Model:{getInstitutionPreference(e){let i=t.defer();return this.$build().$send({method:"GET",url:`${n}/${e}`},function(t){if(t&&t.data){let n=t.data;n.name===e?i.resolve(n):i.resolve(null)}else i.resolve(null)}).$allow([403]),i.promise}}}})}]);let nz=e_.dM;eU.Z.factory(nz,["restmod","$q",(e,t)=>{let n=eV.default.telemetryApiBasePath+"/v1/predict/customFieldSettings",i=e.model(n).mix({$extend:{Model:{getCustomFieldSettings(){let e=t.defer();return this.$build().$send({method:"GET",url:n},function(t){t&&t.data?e.resolve(t.data):e.resolve([])}),e.promise}}}});return i}]);let nW=e_.Bz;eU.Z.factory(nW,["restmod",eq.xQ,e=>{let t=eV.default.apiBasePath+"/public/v1/system/policies/privacy";return e.model(t).mix({$extend:{Model:{getPrivacyPolicy(){return this.$build().$send({method:"GET",url:this.$url()},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]);let nj=e_.CQ,nZ="Respondus";eU.Z.factory(nj,["restmod","$ngRedux",(e,t)=>{let n=eV.default.apiBasePath+"/public/v1/proctoring/services";return e.model(n).mix({$hooks:{"after-fetch-many":function(e){let n=e.data.results;t.dispatch(eJ.Nwg.proctoringServices.setProctoringServicesInStore(n))}}})}]);let nK=e_.RE;eU.Z.factory(nK,["restmod","$q",(e,t)=>{let n=eV.default.telemetryApiBasePath+"/v1/predict/courses/";return e.model(n).mix({$extend:{Model:{getRiskBucketDistribution(e){let i=t.defer();return this.$build().$send({method:"GET",url:`${n}${e}/riskBuckets`},function(e){if(e&&e.data){let t=e.data;i.resolve(t)}else i.resolve(null)}).$allow([403]),i.promise}}}})}]);var nX=n(383508);let nY=e_.AN;eU.Z.factory(nY,["restmod",eq.xQ,(e,t)=>{let n=e.model(eV.default.apiBasePath+"/v1/scheduledTasks").mix({$config:{primaryKey:"taskId"},startDate:{serialize:"date"},endDate:{serialize:"date"},isWaiting(){return e7.hRl.Waiting===this.taskStatus}});return n}]),(c=v||(v={})).Sender="SENDER",c.Receiver="RECEIVER",(d=y||(y={})).Completed="completed",d.InProgress="in_progress",d.Exempt="exempt",d.NeedsGrading="needs_grading";let nQ=e_.M;eU.Z.factory(nQ,["restmod",eq.xQ,(e,t)=>{let n=eV.default.apiBasePath+"/v1/streams";return e.model(n).mix({$extend:{Collection:{$fetch:()=>{throw Error("fetch StreamContent collection not supported")},$refresh:()=>{throw Error("refresh StreamContent collection not supported")},$create:()=>{throw Error("create StreamContent collection not supported")}},Record:{$fetch(e){return this.$decorate({"before-request":function(t){t.method="POST",t.data=e}},function(){return this.$super()})},$resolve:()=>{throw Error("resolve StreamContent not supported")},$save:()=>{throw Error("save StreamContent not supported")},$destroy:()=>{throw Error("destroy StreamContent not supported")}}},$hooks:{"before-request":e=>{e.timeout=3e4,e.headers={"Suppress-Session-Timestamp-Update":!0}}}})}]);let nJ=e_.SR;eU.Z.factory(nJ,["restmod",eq.xQ,(e,t)=>e.model().mix({now:{serialize:"date"},$url:()=>eV.default.apiBasePath+"/v1/utilities/systemInfo",$extend:{Record:{getLegacyToolUrl(e){if(e in this.classicUrls)return e4.uI(this.classicUrls[e]);throw Error("Key "+e+" is not found in systemInfo.classicUrls")}}}})]);let n0=e_.xI;eU.Z.factory(n0,["restmod",eq.xQ,(e,t)=>{let n=eV.default.apiBasePath+"/v1/systemPreferences";return e.model(n).mix({$config:{primaryKey:"key"}})}]),n(644439);let n1=e_.HT;function n2(e){return e/60}eU.Z.factory(n1,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return eV.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/activityVsGrade"},$hooks:{"after-fetch":function(){!function(e){e.data.forEach(e=>e.activity=n2(e.activity))}(this)}}})]);let n3=e_.pV;eU.Z.factory(n3,["restmod",e=>{let t=eV.default.apiBasePath+"/v1";return e.model(t).mix({$config:{primaryKey:"contentId"},available:{serialize:"date"},firstOpened:{serialize:"date"},firstSave:{serialize:"date"},lastSave:{serialize:"date"},startedTime:{serialize:"date"},"submissions[].date":{serialize:"date"},$extend:{Collection:{getContentActivityInDetail(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentContentActivityInDetail"},function(e){this.$unwrap(e.data)})}},Record:{containsInvalidData(){return this.ui&&this.ui.containsInvalidData||!1}}}})}]);let n9=e=>{let t=new Date(e);return new Date(t.getTime()+6e4*t.getTimezoneOffset())},n4=e_.xO;eU.Z.factory(n4,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return eV.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseActivity"},$hooks:{"after-fetch":function(){!function(e){e.courseActivity.forEach(e=>{e.date=n9(e.date),e.activity=n2(e.activity),e.minScore=n2(e.minScore),e.maxScore=n2(e.maxScore),e.stdDev=n2(e.stdDev)})}(this)}}})]);let n7=e_.hl;eU.Z.factory(n7,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},"currentStudent[].created":{serialize:"date"},"currentStudent[].dismissed":{serialize:"date"},$url(){return eV.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/notifications"}})]);let n5=e_.SN;eU.Z.factory(n5,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return eV.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseGrades"},$hooks:{"after-fetch":function(){!function(e){e.courseGrades.forEach(e=>{e.date=n9(e.date)})}(this)}}})]);let n6=e_.fT;eU.Z.factory(n6,["restmod",e=>{let t=eV.default.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionActivityReport(e,t,n){let i=n?this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity?groupId="+n:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity";return this.$build().$send({method:"GET",url:i},function(e){this.$unwrap(e.data)})}}}})}]);let n8=e_._;eU.Z.factory(n8,["restmod",e=>{let t=eV.default.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionXrayReport(e,t,n){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivityScore/"+n},function(e){this.$unwrap(e.data)})}}},modifyDate:{serialize:"date"}})}]);let ie=e_.BI;eU.Z.factory(ie,["restmod",e=>{let t=eV.default.apiBasePath+"/v1";return e.model(t).mix({lastOpened:{serialize:"date"},$extend:{Collection:{getMultimediaActivityInDetail(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaActivityInDetail"},function(e){this.$unwrap(e.data)})}}}})}]);let it=e_.b5;eU.Z.factory(it,["restmod",e=>{let t=eV.default.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getMultimediaStatistics(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaStatistics"},function(e){this.$unwrap(e.data)})}}}})}]);let ii=e_.j7;eU.Z.factory(ii,["restmod",eq.xQ,e=>e.model(eV.default.apiBasePath+"/v1/telemetry/notifications")]);let is=e_._n;eU.Z.factory(is,["restmod",eq.xQ,e=>e.model().mix({$config:{primaryKey:"notificationId"},$url(){return eV.default.apiBasePath+"/v1/telemetry/notifications/"+this.$pk+"/users"}})]);let ir=e_.se;eU.Z.factory(ir,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return eV.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentActivity"},$hooks:{"after-fetch":function(){!function(e){e.studentActivity.forEach(e=>{e.date=n9(e.date),e.activity=n2(e.activity)})}(this)}}})]);let io=e_.sL;eU.Z.factory(io,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return eV.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentGrades"},$hooks:{"after-fetch":function(){!function(e){e.studentGrades.forEach(e=>{e.date=n9(e.date)})}(this)}}})]);let ia=e_.LD;eU.Z.factory(ia,["restmod",eq.xQ,e=>e.model().mix({$url:()=>eV.default.apiBasePath+"/v1/telemetry/courses?filter=sufficientData"})]);var il=n(507234);(u=C||(C={})).CurrentTerm="current",u.UpcomingTerm="upcoming";let ic=e_.H;eU.Z.factory(ic,["restmod",eq.xQ,(e,t)=>{let n=e.model(eV.default.apiBasePath+"/v1/terms").mix({startDate:{serialize:"date"},endDate:{serialize:"date"}});return n}]);var id=n(913481);let iu=e_.C6,ip="UltraUI.";eU.Z.factory(iu,["restmod",eq.xQ,(e,t)=>{let n=eV.default.apiBasePath+"/v1/themes";return e.model(n).mix({ui:{mask:!0},getUsePrimaryColorOnAllBaseNav(){return id.F(this.ui.usePrimaryColorOnAllBaseNav)},setUsePrimaryColorOnAllBaseNav(e){this.ui.usePrimaryColorOnAllBaseNav=id.F(e)?"true":"false"},getUsePrimaryColorOnLogoBackground(){return id.F(this.ui.usePrimaryColorOnLogoBackground)},setUsePrimaryColorOnLogoBackground(e){this.ui.usePrimaryColorOnLogoBackground=id.F(e)?"true":"false"},$config:{primaryKey:"themeId"},$extend:{Record:{$fetch(){return this.$decorate({"before-request":function(e){e.url=n+`/${this.$pk.themeId}/settings`}},function(){return this.$super()})},$save(){return this.$decorate({"before-request":function(e){this.settings=[],Object.keys(this.ui).forEach(e=>{this.settings.push({key:ip+e,value:this.ui[e]})}),e.url=n+`/${this.$pk.themeId}/settings`,e.data.settings=this.settings}},function(){return this.$super()})}},Model:{getDefault(){return this.$new({themeId:"default"}).$fetch()}}},$hooks:{"after-feed":function(){this.settings.forEach(e=>{if(e&&e.key){let t=e.key.replace(ip,"");this.ui[t]=e.value}})}}})}]);let im=e_.h;eU.Z.factory(im,["restmod",e=>e.model().mix({$extend:{Collection:{getToolById(e){return tb.find(this,["identifier",e])},isToolAvailable(e){return this.$build().$send({method:"GET",url:`${this.$url()}/${e}`}).$allow([403]).$asPromise().then(e=>{var t;return!!(e.$response.data&&(null===(t=e.$response.data.toolEnabledSetting)||void 0===t?void 0:t.isAvailable))})}}}})]);let ih=e_.p5;eU.Z.factory(ih,["restmod",e=>e.model().mix({isTinCan(){return!!(this.learningStandard&&tl.mE.TINCAN===this.learningStandard)}})]);let ig=e_.Tk;eU.Z.factory(ig,["restmod",eq.xQ,(e,t)=>e.model(eV.default.apiBasePath+"/v1/tools")]);let ib=e_.QW;eU.Z.factory(ib,["restmod",eq.xQ,(e,t)=>e.model().mix({$hooks:{"after-destroy":function(){this.previewing=!1,this.user=null}}})]);let iv=e_.L9;eU.Z.factory(iv,["restmod",eq.xQ,(e,t)=>{let n=eV.default.apiBasePath+"/v1/trial/supportTickets";return e.model(n)}]);let iy=e_._K;eU.Z.factory(iy,["restmod",eq.xQ,(e,t)=>e.model().mix({})]);let iC=eU.Z.name},644439:function(e,t,n){"use strict";n.d(t,{H:function(){return a}}),n(407537);var i=n(18447),s=n(148869),r=n(486502),o=n(512666);let a=s.Cd;r.Z.factory(a,["restmod",o.xQ,(e,t)=>{let n=i.default.apiBasePath+"/v1/announcements";return e.model(n)}])},594279:function(e,t,n){"use strict";n.d(t,{H:function(){return a}}),n(407537);var i=n(148869),s=n(486502),r=n(512666),o=n(408027);let a=i.yu;s.Z.factory(a,["restmod",r.xQ,e=>e.model().mix({ui:{init:()=>({rendered:!1})},$extend:{Record:{getContentIdForGoalAlignment(){return`blackboard.data.qti.asi.AsiObject;${this.id}`},getContentTitleForGoalAlignment(){return this.title},isCurrentUserEligibleToAlignGoals(){return this.permissions&&!0===this.permissions.edit},saveAlignedGoals(e){return e&&(this.alignedGoals=e.map(e=>({goalId:e.id,isVisibleToStudent:!0,goal:e}))),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals,questionType:this.questionType}}).$then(()=>{this.$getPreviousVersion()&&(this.$getPreviousVersion().alignedGoals=this.alignedGoals)})},isPresentationOnly(){return o.QuestionType.PresentationOnly===this.questionType}},Collection:{getInsertIndex(e){let t=-1,n=e.positionBefore,i=e.positionAfter;return null!=n&&(t="start"===n.toLowerCase()?0:this.indexOfItemById(n)),t<0&&null!=i&&("end"===i.toLowerCase()?t=this.length:(t=this.indexOfItemById(i))>=0&&t++),t},indexOfItemById(e){return this.$indexOf(t=>t.id===e)}}}})])},176232:function(e,t,n){"use strict";n.d(t,{C8:function(){return i},HV:function(){return m},VY:function(){return g},jZ:function(){return h},ji:function(){return f}}),n(407537);var i,s,r=n(464027),o=n(18447),a=n(592281),l=n(148869),c=n(486502),d=n(451251),u=n(512666),p=n(408027);let m=l.WU;function h(e){return Object.values(p.VRt).find(t=>t.toLowerCase()===e.toLowerCase())}function g(){return Object.values(p.VRt)}function f(e){switch(e){case p.VRt.Sunday:return 0;case p.VRt.Monday:return 1;case p.VRt.Tuesday:return 2;case p.VRt.Wednesday:return 3;case p.VRt.Thursday:return 4;case p.VRt.Friday:return 5;case p.VRt.Saturday:return 6}}(s=i||(i={})).Course="Course",s.External="External",c.Z.factory(m,["restmod","RMUtils",u.xQ,(e,t,n)=>{let i=o.default.apiBasePath+"/v1/calendars/calendarItems",s=e.model(i).mix({startDate:{serialize:"date"},endDate:{serialize:"date"},"recurRules.until":{serialize:"date"},"recurRules.originalStart":{serialize:"date"},"recurRules.originalEnd":{serialize:"date"},ui:{mask:!0,init:()=>({})},$extend:{isDueItem(){return!!this.dynamicCalendarItemProps},isAllDayEvent(){return 0===this.startDate.getHours()&&0===this.startDate.getMinutes()&&23===this.endDate.getHours()&&59===this.endDate.getMinutes()},isConditionalRelease(){return!(this.permissions&&this.permissions.edit)&&p.hbA.Restricted===this.visibility},getTruncatedLocation(e){return d.Ne(this.location,e)},Record:{$buildUrl(e){return this.$pk&&this.$pk.itemSourceType&&this.$pk.itemSourceId?t.joinUrl(t.joinUrl(e.$url(),this.$pk.itemSourceType),this.$pk.itemSourceId):null}},Model:{inferKey(e){return{itemSourceType:e.itemSourceType,itemSourceId:e.itemSourceId}},unpack:(e,t)=>{let n=e.$response.config;if(e.$isCollection){if("PUT"===n.method&&Array.isArray(t))return t.map(e=>e.statusCode>=200&&e.statusCode<300?r.fromJson(e.body):e.body);e.paging=t&&t.paging,e.permissions=t&&t.permissions;let i=t&&t.results;return i&&i.forEach(e=>{e.recurRules&&!e.recurRules.timeZoneId&&(e.recurRules.timeZoneId=a.Z.getCurrentTimeZoneId())}),i}let i="POST"===n.method&&Array.isArray(t)?t[0]:t;return i.recurRules&&!i.recurRules.timeZoneId&&(i.recurRules.timeZoneId=a.Z.getCurrentTimeZoneId()),i}}}});return s}])},179464:function(e,t,n){"use strict";n.d(t,{$G:function(){return N},ContentHandler:function(){return m.GQk},e6:function(){return I.e6},eP:function(){return o},mE:function(){return l},uX:function(){return a},lY:function(){return M},HV:function(){return $}}),n(407537);var i,s,r,o,a,l,c=n(276635),d=n(464027),u=n(619034),p=n(18447),m=n(951248),h=n(408027),g=n(852512),f=n(867734),b=n(207069),v=n(168132),y=n(148869),C=n(512666),S=n(486502),E=n(684710),I=n(319434),w=n(58984),A=n(278784),k=n(426477),x=n(826055),T=n(837545);class P{async createContent(e){let t=e.$save().$then(e=>{e.ui.isUploading=!1,e.isAvailable=!1},e=>{if(507===e.$response.status)return this.$q.reject(e);console.error("An error occurred while creating the content:",e)}).$asPromise();await (0,T.h)(t)}constructor(e){this.$q=e,this.key=g.fz.CreateContentCourseModelOperations}}class D{deleteContentHelper(e){this.broadcastChildrenContentForDelete(e).then(()=>{(0,m.gUR)(e.courseId,e.id).then(t=>{t?e.getSoftLinks().$asPromise().then(t=>{t.length?this.$q.all(t.map(t=>this.CourseModel.$new(e.courseId).contents.$new(t.courseContent).$fetch().$asPromise().then(e=>{this.$rootScope.$broadcast("deleteContent",e,!1)}))).then(()=>{this.$rootScope.$broadcast("deleteContent",e)}):this.$rootScope.$broadcast("deleteContent",e)}):this.$rootScope.$broadcast("deleteContent",e)})})}broadcastChildrenContentForDelete(e){return e.isFolder()||e.isLearningModule()?e.getChildren({recursive:!0}).$then(e=>e.filter(e=>!e.isCourseLink()).forEach(e=>this.$rootScope.$broadcast("deleteContent",e,!1))).$asPromise():this.$q.when()}deleteContent(e){v.courseContent.ContentHandler.CourseLink.isEqualTo(e.contentHandler)?e.getLinkContentSource().$then(t=>{var n;let i=null==t?void 0:null===(n=t.contentHandler)||void 0===n?void 0:n.toString();h.DXv.Discussion===i?this.deleteContentHelper(t):this.deleteContentHelper(e)}):this.deleteContentHelper(e)}constructor(e,t,n){this.$q=e,this.$rootScope=t,this.CourseModel=n,this.key=g.fz.DeleteContentCourseModelOperations,this.$q=e,this.$rootScope=t,this.CourseModel=n}}class G{conditionalReleaseAsync(e,t,n,i,s){let r=e.conditionalReleaseAsync(t,n,i,s),o="function"==typeof r.$asPromise?r.$asPromise():r;return(0,T.h)(o)}async save(e,t,n=[]){let i={fields:"id",...n.length>0&&{expand:n.join(",")}},s=e.withParams(i).$save(t).$asPromise();await (0,T.h)(s)}constructor(){this.key=g.fz.ConditionalReleaseCourseModelOperations}}var R=n(938978);class B{refresh(e,t){this.scope.$applyAsync(()=>{this.scope.$broadcast(x.a,e,t)})}constructor(e){this.scope=e,this.key=g.fz.ContentFolderRefresher}}var L=n(443400);let N="create";(i=o||(o={})).OpenFolder="img-icon-folder-open",i.ClosedFolder="img-icon-folder";let O=e=>{if(d.isUndefined(e)||null==e)return null;let t=e.contentHandler.toString();if(v.courseContent.ContentHandler.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail&&e.contentDetail[t]&&e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings){let n=e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings;return{proctoringDownloadUrl:n.proctoringDownloadUrl,proctoringServiceHandle:n.proctoringServiceHandle,proctoringServiceVendor:n.proctoringServiceVendor,isSecureBrowserRequiredToTake:n.isSecureBrowserRequiredToTake,isSecureBrowserRequiredToReview:n.isSecureBrowserRequiredToReview,isWebcamRequired:n.isWebcamRequired}}return null};function M(e){if(e)return Object.values(a).find(t=>t.toLowerCase()===e.toLowerCase())}(s=a||(a={})).Score="SCORE",s.Completion="COMPLETION",s.Satisfaction="SATISFACTION",(r=l||(l={})).AICC="AICC",r.CMI5="CMI5",r.Scorm11="SCORM_11",r.Scorm12="SCORM_12",r.Scorm2004SecondEdition="SCORM_2004_2ND_EDITION",r.Scorm2004ThirdEdition="SCORM_2004_3RD_EDITION",r.Scorm2004Fourth="SCORM_2004_4TH_EDITION",r.TINCAN="TINCAN";let $=y.V1,H=y.VH;S.Z.factory($,["restmod",C.xQ,"$q","$rootScope","$ngRedux",H,b.HV,(e,t,n,i,s,r,o)=>{(0,g.gM)(new G),(0,g.gM)(new P(n)),(0,g.gM)(new D(n,i,r));let a=!1;o.createWaiter("feature.course.content.inline-render").then(e=>a=e),(0,g.gM)(new R.Y(n)),(0,g.gM)(new B(i));let d=e.model().mix({depth:{mask:!0},children:{mask:!0},softLinks:{mask:!0},"adaptiveReleaseRules.startDate":{serialize:"date"},"adaptiveReleaseRules.endDate":{serialize:"date"},position:{mask:"CU"},selfEnrollmentGroups:{mask:"CU"},positionBefore:{mask:"R"},positionAfter:{mask:"R"},hasMoreChildren:{mask:!0},launchInNewWindow:{init:!0},ui:{mask:!0,init:()=>({hasData:!1,isDeleted:!1,isOpen:!1})},$extend:{Record:{getDeployedAssessment(){var e;if(!this.contentDetail)return;let t=(0,h.S9c)(null===(e=this.contentHandler)||void 0===e?void 0:e.toString());if(t){let e=this.contentDetail[this.contentHandler.toString()];return e.gradingColumn?e:e[t]}},getAssociatedGradingColumn(e){let t=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];if(t&&t.gradingColumn)return t.gradingColumn;if(t){let e=this.getDeployedAssessment();if(e)return e.gradingColumn}},getDueDate(){return this.genericReadOnlyData&&this.genericReadOnlyData.dueDate},getContentHandlerByIconUrl(){let e=this.iconUrl.match("^/.*/(.*)_.*..*$"),t=m.GQk.Unknown;if(e)switch(e[1]){case"assignment":t=m.GQk.UltraAssignment;break;case"discussion":t=m.GQk.Discussion;break;case"file":t=m.GQk.File;break;case"folder":t=m.GQk.Folder;break;case"link":t=m.GQk.ExternalLink;break;case"test":t=m.GQk.TestLink}return t},setupAssessmentContentDetail(e,t){let n=this.contentHandler.toString(),i=(0,h.r9o)(n),s=(0,h.S9c)(n);if(i&&s){this.contentDetail={},this.contentDetail[n]={};let r=u(E.Z.getServerTime()).startOf("day").add({days:1}).toDate();this.contentDetail[n][s]={deployedAssessmentType:s,assessment:{title:this.title,type:i},deploymentSettings:{feedbackSettings:{[h.M6Z.AfterSubmission]:{options:[h.lrm.InstructorFeedback,h.lrm.UserAnswers,h.lrm.AllAnswers]},[h.M6Z.AfterAttemptGraded]:{options:[h.lrm.Score]}}},gradingColumn:{columnName:this.title,possible:0,visible:!1,gradebookCategoryId:t?t.id:null,gradebookCategory:t,gradingSchemaId:e,courseId:this.courseId,dueDate:r},permissions:{modify:!0}}}},createScormSettings(e){let t={method:"POST",url:this.$url()+"/scormSettings",data:e},i=n.defer();return this.$scope.$collection().$send(t,e=>{i.resolve(e.data)},e=>{i.reject(e)}),i.promise},conditionalReleaseAsync(e,t,n,i){let r=n?"/rules/"+n+"/conditions":"";i&&(r+=`/${i}`);let o={method:e,url:this.$url()+"/adaptiveReleaseRules"+r};if(t&&"DELETE"!==e&&(o.data=t),"GET"===e)return this.$scope.$collection().$send(o).$then(e=>e.$unwrap(e.$response.data));if("DELETE"===e){let e=m.GQk.CourseLink.isEqualTo(this.contentHandler)?this.contentDetail[m.GQk.CourseLink.toString()].linkSourceId:this.id;if(t&&t.type)s.dispatch(m.Nwg.content.deleteAdaptiveReleaseRuleInStore(e,t.type));else{if(this.isForcedSequenceItem())return this.removeNonForcedSequenceReleaseCriteria();s.dispatch(m.Nwg.content.deleteAdaptiveReleaseRulesInStore(e))}}return this.$scope.$collection().$send(o)},removeNonForcedSequenceReleaseCriteria(){let e=this.adaptiveReleaseRules.rules[0],t=m.GQk.CourseLink.isEqualTo(this.contentHandler)?this.contentDetail[m.GQk.CourseLink.toString()].linkSourceId:this.id,i=`/rules/${e.id}/conditions/`,r={method:"DELETE"},o=[];return e.criteria.filter(e=>e.type!==h.faN.ForcedSequence).forEach(e=>{s.dispatch(m.Nwg.content.deleteAdaptiveReleaseRuleInStore(t,e.type)),r.url=this.$url()+"/adaptiveReleaseRules"+i+e.id,o.push(this.$scope.$collection().$send(r).$asPromise())}),n.all(o).then(()=>{})},getChildren(e){e=e||{};let i=this,s=[];return this.timeout=n.defer(),this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",timeout:this.timeout.promise,params:{offset:e.offset,limit:e.limit,contentHandler:e.contentHandler,recursive:e.recursive,onlyUltraConvertableContents:e.onlyUltraConvertableContents,contentSearchMode:e.contentSearchMode,title:e.title,"courseLinkPickerParam.contentHandlerGroups":e.courseLinkPickerParamContentHandlerGroups,expand:"assignedGroups,selfEnrollmentGroups.group",sort:e.sort,"@view":"Summary"}}).$then(n=>{if(e.resolveLinks&&n.$response.data.results&&n.$response.data.results.length){let e=t.getDataMixin(n.findMany.bind(n),"linkSourceId","linkSource");if(n.$response.data.results.forEach(e=>{m.GQk.CourseLink.isEqualTo(e.contentHandler)&&e.contentDetail&&s.push({linkId:e.id,linkSourceId:e.contentDetail[m.GQk.CourseLink.toString()].linkSourceId})}),s.length)return e(s,{}).then(()=>n)}}).$then(e=>{e.$unwrap(e.$response.data);let t={};s.forEach(e=>{t[e.linkId]=e.linkSource}),e.forEach(e=>{e.depth=i.depth+1,t[e.id]&&(e.ui.linkSource=t[e.id])})})},cancelGetChildren(){this.timeout&&this.timeout.resolve()},getClassicContent(){return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url(),params:{onlyUltraConvertableContents:"true"}}).$then(e=>{e.$unwrap(e.$response.data)})},getLinkContentSource(e){if(e=e||{},m.GQk.CourseLink.isEqualTo(this.contentHandler)&&this.contentDetail){if(this.ui.linkSource&&this.ui.linkSource.$pk&&!e.fromServer)return this.ui.linkSource;let t=this.ui.linkSource;if(this.ui.linkSource=this.$scope.$new(this.contentDetail[m.GQk.CourseLink.toString()].linkSourceId),this.contentDetail[m.GQk.CourseLink.toString()].linkSourceId){let e=this.ui.linkSource.$fetch({expand:"assignedGroups,selfEnrollmentGroups.group"});return t&&(e.contentHandler=t.contentHandler,e.contentDetail=t.contentDetail),e}return this.ui.linkSource}},getChildrenCount(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/children/count"}).$asPromise().then(e=>e.$response.data.count)},hasGradedContentItems(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/hasGrades"}).$asPromise().then(e=>e.$response.data.result)},isCurrentUserEligibleToAlignGoals(){return this.permissions&&!0===this.permissions.createLearningStandardsAlignment&&this.permissions.edit},getContentIdForGoalAlignment(){return"blackboard.data.content.Content;"+this.id},getContentTitleForGoalAlignment(){return this.title},getSibling(e,t){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/"+e,params:{lessonContentId:t}}).$asPromise().then(e=>e.$response.data.id?this.$scope.$buildRaw(e.$response.data):null)},getAttemptCount(){let e=this.getAssociatedGradingColumn();return this.$scope.$collection().$send({method:"GET",url:e["@id"]+"/attempts/count"}).$suppressErrorDialog().$asPromise().then(e=>e.$response.data.count)},getTimeLimit(){let e=this.getDeployedAssessment()&&this.getDeployedAssessment().exceptions&&this.getDeployedAssessment().exceptions.length>0;return e?this.getDeployedAssessment().exceptions[0].timeLimit:this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings?this.getDeployedAssessment().deploymentSettings.timeLimit:void 0},getExtraTime(){let e=this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings;if(e&&e.softTimeLimit)return e.timeLimit-e.softTimeLimit},getTimedTestDetail(){let e=this.contentDetail&&this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings,t=null,n=null,i=null,s=e?this.getDeployedAssessment().deploymentSettings.softTimeLimit:null;e&&(n=this.getDeployedAssessment().deploymentSettings.timeLimit,t=this.getDeployedAssessment().deploymentSettings.timerCompletion,i=this.getDeployedAssessment().deploymentSettings.isDueDateEnforced?new Date(this.getAssociatedGradingColumn().dueDate):null);let r={timerCompletion:t,timeLimitSec:n?60*n:null,softLimitSec:s?60*s:null,dueDate:i};return new w.F1(r)},getSoftLinks(e){e=e||{};let t=this;return this.$scope.$collection().$send({method:"GET",url:this.$url()+"/softLinks",params:{offset:e.offset,limit:e.limit,label:e.label}},function(e){this.$unwrap(e.data),t.softLinks=this})},update(){let e=this.$scope.$build();for(let t of Object.keys(this))e[t]=this[t];return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id,data:e})},canEdit(){return m.AaE.canEdit(this)},canEditPartial(){let e=this.canEdit();if(this.contentDetail){let t=this.getDeployedAssessment();if(t){let n=t.permissions;n&&(e=e||n.modifyDueDate||n.view)}}return!!e},canEditAvailability(){return m.AaE.canEditAvailability(this)},canViewAsInstructor(){return this.canEdit()||this.permissions&&this.permissions.viewDesigner},canDelete(){return this.permissions&&this.permissions.delete},canUpdateReviewState(){var e;return null===(e=this.permissions)||void 0===e?void 0:e.canUpdateReviewState},hasConversation(){return!!this.attachedForumLink},hasDueDateException(){return null!=this.dueDateExceptionType&&this.dueDateExceptionType!==h.AVG.Normal},hasGradingColumn(){return!!this.getAssociatedGradingColumn()},hasDueDate(){return this.genericReadOnlyData&&this.genericReadOnlyData.hasGradeColumn},hasOnlyForcedSequenceConditionalReleaseCriteria(){return!!(!this.adaptiveReleaseRules&&this.isInForcedSequenceModule())||!!this.isForcedSequenceItem()&&1===this.adaptiveReleaseRules.rules[0].criteria.length},isVisible(){return this.visibility&&h.hbA.Visible===this.visibility},isRestricted(){return this.visibility&&h.hbA.Restricted===this.visibility},isStarted(){return this.state===h.aql.Started},isCompleted(){return this.state===h.aql.Completed},isHidden(){return this.visibility&&h.hbA.Hidden===this.visibility},isVisibleToStudents(){return m.AaE.isVisibleToStudents(this)},isHiddenFromStudents(){return m.AaE.isHiddenFromStudents(this)},isConditionalRelease(){return m.lzL.isConditionalRelease(this)},isForcedSequenceModule(){return this.isLearningModule()&&this.contentDetail[v.courseContent.ContentHandler.LearningModule.toString()].isSequential},isInForcedSequenceModule(){return this.inSequence},isForcedSequenceItem(){return this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules&&this.adaptiveReleaseRules.rules[0]&&!!c.find(this.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"})},isActiveForcedSequenceModule(){return this.isForcedSequenceModule()&&this.hasProgressed},applyForcedSequence(e){this.contentDetail[v.courseContent.ContentHandler.LearningModule.toString()].isSequential=e,this.children&&(this.children.forEach(t=>{t.inSequence=e,t.children&&t.children.forEach(t=>t.inSequence=e)}),this.children.forEach(t=>{t.isPartiallyVisible=e,e?c.has(t,"adaptiveReleaseRules.rules[0].criteria[0]")?t.adaptiveReleaseRules.rules[0].criteria.push({type:"Pre_Content"}):c.set(t,"adaptiveReleaseRules.rules[0].criteria[0]",{type:"Pre_Content"}):t.adaptiveReleaseRules&&t.adaptiveReleaseRules.rules&&t.adaptiveReleaseRules.rules[0].criteria.length&&(c.remove(t.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"}),t.adaptiveReleaseRules.rules[0].criteria.length&&(t.isAvailable=!0)),i.$broadcast("refresh-conditional-release-rules",t)}))},isConditionalReleaseWithVisibleButNotAccessible(){return this.isConditionalRelease()&&this.isPartiallyVisible},isConditionalReleaseWithHiddenFromStudent(){return this.isConditionalRelease()&&!this.isPartiallyVisible&&!this.hasOnlyForcedSequenceConditionalReleaseCriteria()},isConditionalReleaseLocked(){let e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isRestricted()},isConditionalReleaseUnlocked(){let e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isVisible()},containsCriteriaWithGradeColumnId(e){var t,n;return null===(t=this.adaptiveReleaseRules)||void 0===t?void 0:null===(n=t.rules)||void 0===n?void 0:n.some(t=>{var n;return null===(n=t.criteria)||void 0===n?void 0:n.some(t=>t.type===h.faN.Grade&&t.gradeColumnId===e)})},getVisibilityAsStudent(){return this.isVisibleToStudents()?h.hbA.Visible:this.isConditionalRelease()?h.hbA.Restricted:h.hbA.Hidden},getContentDisplay(){return f.dI.create(this,{supportsInlineRender:a})},saveAlignedGoals(e){return e&&(this.alignedGoals=e.map(e=>({goalId:e.id,isVisibleToStudent:!0,goal:e}))),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals}}).$then(()=>{this.$getPreviousVersion()&&(this.$getPreviousVersion().alignedGoals=this.alignedGoals)})},saveAssignedGroups(e=!1){let t=this.getDeployedAssessment(),n=this.contentHandler.toString(),i=(0,h.S9c)(n),s={assignedGroups:this.assignedGroups,isGroupContent:this.isGroupContent},r=!e&&t&&t.deploymentSettings&&t.deploymentSettings.id&&1===t.deploymentSettings.attemptCount;if(r){let e={id:t.deploymentSettings.id,attemptCount:t.deploymentSettings.attemptCount,feedbackSettings:t.deploymentSettings.feedbackSettings};s.contentDetail={[n]:{[i]:{deployedAssessmentType:i,deploymentSettings:e}}}}return this.withParams({expand:"assignedGroups,selfEnrollmentGroups.group"}).$send({method:"PATCH",url:this.$url(),data:s},function(e){this.isGroupContent=e.data.isGroupContent,this.assignedGroups=e.data.assignedGroups,this.selfEnrollmentGroups=e.data.selfEnrollmentGroups,r&&(t.gradingColumn.multipleAttempts=e.data.contentDetail[n][i].gradingColumn.multipleAttempts)}).$then(()=>{let e=this.$getPreviousVersion();if(e&&(e.isGroupContent=this.isGroupContent,e.assignedGroups=this.assignedGroups,e.selfEnrollmentGroups=this.selfEnrollmentGroups,r)){let s=e.contentDetail[n][i];s.deploymentSettings.attemptCount=t.deploymentSettings.attemptCount,s.gradingColumn.multipleAttempts=t.gradingColumn.multipleAttempts}})},removeTimeLimit(e){let t=this.contentHandler.toString(),n=(0,h.S9c)(t);if(e&&n)return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:{[t]:{[n]:{deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{attemptCount:e.attemptCount?e.attemptCount:1,timerCompletion:e.timerCompletion?e.timerCompletion:h.sez.Continual,timeLimit:null,softTimeLimit:null}}}}}},function(e){delete this.getDeployedAssessment().deploymentSettings.timeLimit,delete this.getDeployedAssessment().deploymentSettings.softTimeLimit,this.contentDetail[t].test.deploymentSettings.timerCompletion=e.data.contentDetail[t].test.deploymentSettings.timerCompletion}).$then(()=>{this.$getPreviousVersion()&&(delete this.$getPreviousVersion().contentDetail[t].test.deploymentSettings.timeLimit,delete this.$getPreviousVersion().contentDetail[t].test.deploymentSettings.softTimeLimit,this.$getPreviousVersion().contentDetail[t].test.deploymentSettings.timerCompletion=this.contentDetail[t].test.deploymentSettings.timerCompletion)})},patchProctoringService(e){let t=this.contentHandler.toString(),i=(0,h.S9c)(t),s=n.defer();return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:{[t]:{[i]:{deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{proctoringServiceHandle:e}}}}}},e=>s.resolve(e.data),()=>s.reject("Failed to change proctoring service.")),s.promise},updateProctoringSettings(e){let t=n.defer(),i=e=>{if(O(this)&&O(e)){let t=e.contentHandler.toString(),n=e.contentDetail[t].test.deploymentSettings,i=this.contentDetail[t].test.deploymentSettings;if(i.proctoringServiceHandle=n.proctoringServiceHandle,i.proctoringServiceVendor=n.proctoringServiceVendor,i.proctoringDownloadUrl=n.proctoringDownloadUrl,i.isSecureBrowserRequiredToTake=n.isSecureBrowserRequiredToTake,i.isSecureBrowserRequiredToReview=n.isSecureBrowserRequiredToReview,i.isWebcamRequired=n.isWebcamRequired,this.$getPreviousVersion()){let e=this.$getPreviousVersion().contentDetail[t].test.deploymentSettings;e.proctoringServiceHandle=n.proctoringServiceHandle,e.proctoringServiceVendor=n.proctoringServiceVendor,e.proctoringDownloadUrl=n.proctoringDownloadUrl,e.isSecureBrowserRequiredToTake=n.isSecureBrowserRequiredToTake,e.isSecureBrowserRequiredToReview=n.isSecureBrowserRequiredToReview,e.isWebcamRequired=n.isWebcamRequired}}};return e?(i(e),t.resolve(this)):this.withParams({fields:"contentHandler,contentDetail"}).$send({method:"GET",url:this.$url()},e=>{i(e.data),t.resolve(this)},()=>{t.reject("Failed to fetch latest when updating proctoring settings.")}),t.promise},updateProctoringAssociation(e){return this.patchProctoringService(e).then(e=>this.updateProctoringSettings(e))},getProctoringLaunchLink(e){let t=n.defer(),i=p.default.apiBasePath+"/v1/courses/"+this.courseId+"/contents/"+this.id;return e.attemptId&&(i+="/attempts/"+e.attemptId),i+="/proctoring/launchLink",e.password&&(i+=`?password=${encodeURIComponent(e.password)}`),this.$send({method:"GET",url:i},e=>{if(e){t.resolve(e.data.launchLink);return}t.reject("Failed to fetch assessment launch link.")}).$allow([h.oji.Unauthorized,h.oji.TooManyRequests]).$asPromise().then(e=>{t.reject(e.$response)}),t.promise},getProctoringServiceVendor(){let e=O(this);return null==e?null:e.proctoringServiceVendor||null},getProctoringServiceHandle(){let e=O(this);return null==e?null:e.proctoringServiceHandle||null},isSecureBrowserRequiredToTake(){let e=O(this);return null!=e&&!!(e.proctoringServiceHandle===k.j&&e.isSecureBrowserRequiredToTake)},isSecureBrowserRequiredToReview(){let e=O(this);return null!=e&&!!(e.proctoringServiceHandle===k.j&&e.isSecureBrowserRequiredToReview)},isWebcamRequired(){let e=O(this);return null!=e&&!!(e.proctoringServiceHandle===k.j&&e.isWebcamRequired)},getProctoringDownloadUrl(){let e=O(this);return null==e?null:e.proctoringDownloadUrl||null},userNeedsToSelfEnrollInGroup(){return this.isGroupContent&&this.assignedGroups&&0===this.assignedGroups.length&&this.selfEnrollmentGroups&&this.selfEnrollmentGroups.length>0},setVisibility(e,t=!0){switch(this.adaptiveReleaseRules={startDate:null,endDate:null},e){case h.hbA.Visible:this.isAvailable=!0,this.isPartiallyVisible=!1;break;case h.hbA.Hidden:this.isAvailable=!1,this.isPartiallyVisible=!1;break;case h.hbA.Restricted:this.isAvailable=!0,this.isPartiallyVisible=t}},setTitle(e){this.title=e;let t=this.getAssociatedGradingColumn();t&&(t.columnName=e);try{this.getDeployedAssessment().assessment.title=e}catch(e){}},isUiFolder(){return m.GQk.Folder.isEqualTo(this.contentHandler)&&!this.isBbPage()},isFolder(){return!!m.GQk.Folder.isEqualTo(this.contentHandler)||!!m.GQk.Unknown.isEqualTo(this.contentHandler)&&void 0},isBbPage(){if(this.contentDetail){let e=this.contentDetail[m.GQk.Folder.toString()];if(m.GQk.Folder.isEqualTo(this.contentHandler)&&e&&e.isBbPage)return!0;if(m.GQk.Unknown.isEqualTo(this.contentHandler))return}return!1},isRoot(){return I.e6.Root===this.$pk||I.e6.Interactive===this.$pk},isAssignment(){return m.GQk.UltraAssignment.isEqualTo(this.contentHandler)},isDocument(){return m.GQk.Folder.isEqualTo(this.contentHandler)&&this.isBbPage()},isFile(){return m.GQk.File.isEqualTo(this.contentHandler)},isJournal(){return m.GQk.Journal.isEqualTo(this.contentHandler)},isLink(){return m.GQk.ExternalLink.isEqualTo(this.contentHandler)},isCourseLink(){return m.GQk.CourseLink.isEqualTo(this.contentHandler)},isLtiLink(){return m.GQk.LtiLink.isEqualTo(this.contentHandler)},isLtiPlacement(){return m.GQk.LtiPlacement.startsWith(this.contentHandler)},isPartnerCloud(){return m.GQk.PartnerCloud.isEqualTo(this.contentHandler)},isPlaceHolderContent(){return this.isLink()||this.isLtiLink()||this.isLtiPlacement()||this.isPartnerCloud()},isTest(){return m.GQk.TestLink.isEqualTo(this.contentHandler)},isScorm(){return m.GQk.RusticiScorm.isEqualTo(this.contentHandler)},isGradedScorm(){return this.isScorm()&&!!this.getAssociatedGradingColumn()},isDiscussion(){return!!m.GQk.Discussion.isEqualTo(this.contentHandler)||m.GQk.CourseLink.isEqualTo(this.contentHandler)&&this.isDiscussionInOutline()},isLearningModule(){return!!m.GQk.LearningModule.isEqualTo(this.contentHandler)||!!m.GQk.Unknown.isEqualTo(this.contentHandler)&&void 0},isDiscussionInOutline(){return this.getContentHandlerByIconUrl().isEqualTo(m.GQk.Discussion)},getSafeAssignAttrs(){return this.contentDetail[this.contentHandler.toString()].safeAssignOptions},isSafeAssignOn(){return!!this.contentDetail&&!!this.contentDetail[this.contentHandler.toString()].safeAssignOptions},isSafeAssignEnabled(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().checkAttempts},canStudentViewReports(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().canStudentViewReports},canSubmitToGlobalReferenceDatabase(){return this.isSafeAssignOn()&&!this.getSafeAssignAttrs().excludeSubmissions&&this.getSafeAssignAttrs().globalSearch},canHaveAttempts(){return m.GQk.UltraAssignment.isEqualTo(this.contentHandler)||m.GQk.TestLink.isEqualTo(this.contentHandler)||m.GQk.LtiLink.isEqualTo(this.contentHandler)||m.GQk.LtiPlacement.startsWith(this.contentHandler)||m.GQk.PartnerCloud.isEqualTo(this.contentHandler)||m.GQk.Discussion.isEqualTo(this.contentHandler)||m.GQk.CourseLink.isEqualTo(this.contentHandler)||m.GQk.Journal.isEqualTo(this.contentHandler)||this.isScorm()},canHaveSharedGradingColumn(){return m.GQk.PartnerCloud.isEqualTo(this.contentHandler)},applyAvailabilitySettings(e){this.adaptiveReleaseRules=e.adaptiveReleaseRules,this.isAvailable=e.isAvailable,this.isPartiallyVisible=e.isPartiallyVisible},applyGroupSettings(e){this.isGroupContent=e.isGroupContent,this.assignedGroups=e.assignedGroups,this.selfEnrollmentGroups=e.selfEnrollmentGroups},addAndRevealAtIndex(e){this.$moveTo(e),this.$reveal()},findInTreeById(e,t){return this.findLoadedNodeByIdAndCache(e,t)},findLoadedNodeByIdAndCache(e,t,n=L.cY.getMaxCourseFolderDepth()+1){return(null==t||t.id!==e)&&(t=this.findLoadedNodeById(e,n)),t},findLoadedNodeById(e,t){if(t<0)return null;if(null==e&&null==this.id||e===this.id&&!Number.isNaN(this.depth))return this;if(this.children){t--;for(let n=0;n<this.children.length;n++){let i=this.children[n].findLoadedNodeById(e,t);if(i)return i}}},moveTo(e,t,n){if(this.id===t||this.id===n)return;let i=e.children.find(e=>e.id===this.id);i&&(e.children.$remove(i),e.children.fixPositions()),this.$scope.$remove(this),this.$scope.fixPositions(),null!=t&&(n=void 0);let s=e.children.getInsertionIndex(t,n,!1,e.hasMoreChildren);null!=t&&0===s&&(t="start"),null==n||s!==e.children.length||e.hasMoreChildren||(n="end"),e.children.$add(this,s),this.$scope=e.children,this.$scope.fixPositions(),this.positionBefore=t,this.positionAfter=n,this.parentId=e.id,this.depth=null!=e.depth?e.depth+1:void 0,function e(t,n){if(!n)return;let i=t+1;n.forEach(t=>{t.depth=i,e(i,t.children)})}(this.depth,this.children)},shouldRestrict(){return!this.canEdit()&&this.isRestricted()},isQuestionAnalysisAvailable(){return this.isAssignment()||this.isTest()},updateState(e,t=!1){var r;let o=n.when(this);return(null===(r=this.permissions)||void 0===r?void 0:r.canHaveReviewState)?(this.state=e,t&&(o=this.$send({method:"PATCH",url:`${this.$url()}/states/me`,data:{state:e}}).$asPromise()),o.then(()=>(i.$broadcast(x.G,this,e),s.dispatch(m.Nwg.contentReviewState.getContentReviewState(this.courseId,this.id,!0)),this))):o}},Collection:{indexOfItemById(e){return this.$indexOf(t=>(t.id===e||null==t.id&&null==e)&&!t.ui.importPlaceholder)},buildAndRevealAtPosition(e,t){let n=this.getInsertionIndex(e.positionBefore,e.positionAfter);if(n>-1){let i=this.$build(t);return i.addAndRevealAtIndex(n),null!=e.positionBefore&&(i.positionBefore=e.positionBefore),null!=e.positionAfter&&null==e.positionBefore&&(i.positionAfter=e.positionAfter),i}},getInsertionIndex(e,t,n,i){let s=null==n||n,r=-1;return null!=e&&(r="start"===e.toLowerCase()?0:this.indexOfItemById(e),!s&&r<0&&(r=0)),r<0&&null!=t&&("end"===t.toLowerCase()?null==i||i||(r=this.length):(r=this.indexOfItemById(t))>=0&&r++,!s&&r<0&&(r=this.length)),r},fixPositions(){for(let e=0;e<this.length;e++)this[e].position=e}}},$hooks:{"after-request":function(e){if(200===e.status&&(!e.config.params||!e.config.params.fields)&&(e.data.adaptiveReleaseRules||(this.adaptiveReleaseRules=null),"GET"===e.config.method||"JSONP"===e.config.method)){var t;if(null===(t=e.data)||void 0===t?void 0:t.results){let t=e.data.results.map(e=>(0,A.L)(e));s.dispatch(m.Nwg.content.setContents(t));return}if(e.data){let t=[(0,A.L)(e.data)];s.dispatch(m.Nwg.content.setContents(t))}}},"before-request":function(e){let t=["/ROOT","/count","/softLinks"].some(t=>c.endsWith(e.url,t));if(!t&&"DELETE"!==e.method){let t="gradebookCategory";e.params&&e.params.expand?c.includes(e.params.expand,t)||(e.params.expand+=`,${t}`):e.params={expand:t,...e.params}}("PATCH"===e.method||"PUT"===e.method)&&e.data&&e.data.title&&this.safeAssignOptions&&(e.data.safeAssignOptions=this.safeAssignOptions)},"before-render":function(e){if(e.contentDetail){let t=this.getDeployedAssessment.call(e);if(t){let e=t.gradingColumn;e&&!e.peerGrading&&t&&t.peerSettings&&delete t.peerSettings}}},"after-save":e=>{let t=(0,A.L)(e.data);s.dispatch(m.Nwg.content.persistContentSync(t))}}});return d.$extendRecord(function(e,t){if(t.contentHandler&&m.GQk.CourseLink.isEqualTo(t.contentHandler))return{getDueDate(){return this.getLinkContentSource()&&this.getLinkContentSource().getDueDate()},hasDueDate(){return this.getLinkContentSource()&&this.getLinkContentSource().hasDueDate()},hasReport(){return!1}}}),d.$extendRecord(function(e,t){if(t.contentHandler&&m.GQk.LtiLink.isEqualTo(t.contentHandler))return{getDueDate(){return this.getAssociatedGradingColumn()&&this.getAssociatedGradingColumn().dueDate},hasDueDate(){return this.hasGradingColumn()}}}),d.$extendRecord((e,t)=>{if(t.contentHandler&&m.GQk.RusticiScorm.isEqualTo(t.contentHandler))return{getAssociatedGradingColumn(e){let t=this.getScormGradebookItems(),n=null;return(n=e?t.find(t=>t.columnId===e):t.find(e=>e.root)||t[0])&&n.gradingColumn},getDueDate(){let e=this.getAssociatedGradingColumn();return e&&e.dueDate},hasDueDate(){return this.hasGradingColumn()},getScormGradebookItems(){let e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.gradebookItems||[]},getScormLearningStandard(){let e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.learningStandard||"UNKNOWN"},getScormAdvancedSettings(){let e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.advancedSettings||{}},getScormReport(){let e={method:"GET",url:this.$url()+"/scormReport"},t=n.defer();return this.$scope.$collection().$send(e,e=>{t.resolve(e.data)},e=>{t.reject(e)}),t.promise},isTinCan(){let e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return!!(e&&l.TINCAN===e.learningStandard)},hasReport(){return!this.isTinCan()&&!!this.getScormGradebookItems().length},setTitle(e){this.title=e;let t=this.getScormGradebookItems().find(e=>e.root);t&&(t.title=e,t.gradingColumn.columnName=e)}}}),d}])},938978:function(e,t,n){"use strict";n.d(t,{H:function(){return o},Y:function(){return a}});var i=n(852512),s=n(837545),r=n(408027);class o{isParentInLearningModule(e,t){var n;return!!(null===(n=t.children)||void 0===n?void 0:n.some(t=>e.parentId===t.id))}isInLearningModule(e,t){return e.parentId===t.id||this.isParentInLearningModule(e,t)}getParentFolderInLearningModule(e,t){var n;return null===(n=t.children)||void 0===n?void 0:n.find(t=>e.parentId===t.id)}updateCourseLinksForContents(e,t){e.forEach(e=>{var n,i,s;(null===(n=e.children)||void 0===n?void 0:n.length)?this.updateCourseLinksForContents(e.children,t):t.includes(null===(i=e.ui)||void 0===i?void 0:null===(s=i.linkSource)||void 0===s?void 0:s.id)&&e.visibility!==r.hbA.Visible&&e.$fetch().$asPromise().then(()=>{e.getLinkContentSource({fromServer:!0})})})}refreshCourseLinksVisibility(e,t,n=[]){return e.forEach(e=>{var i,s,o;if(null===(i=e.children)||void 0===i?void 0:i.length)return this.refreshCourseLinksVisibility(e.children,t,n);e.isCourseLink()&&e.visibility!==r.hbA.Visible&&t===(null===(s=e.ui)||void 0===s?void 0:null===(o=s.linkSource)||void 0===o?void 0:o.id)&&n.push(e.$fetch().$asPromise().then(()=>{e.getLinkContentSource({fromServer:!0})}))}),this.$q.all(n).then(()=>this.$q.resolve())}refreshCourseLinksWhichTargetIsInLearningModule(e,t,n){var i,s;return n&&(null==e?void 0:e.isInForcedSequenceModule())?this.refreshCourseLinksVisibility(t.$scope,null===(i=t.ui)||void 0===i?void 0:null===(s=i.linkSource)||void 0===s?void 0:s.id):this.$q.resolve()}refreshChildren(e,t,n){if(!e||!(null==t?void 0:t.children))return this.$q.resolve();let i=this.getParentFolderInLearningModule(e,t);if(e&&t.isForcedSequenceModule()&&n&&this.isInLearningModule(e,t)){var s,r;let n=[t.$fetch().$asPromise(),null===(s=t.getChildren({limit:t.children.length+1}))||void 0===s?void 0:s.$asPromise()];return(null==i?void 0:i.children)&&n.push(null===(r=i.getChildren({limit:i.children.length+1}))||void 0===r?void 0:r.$asPromise()),this.$q.all(n).then(([,n,s])=>{n.forEach((e,i)=>{var s,r;let o=null===(s=t.children)||void 0===s?void 0:s.findIndex(t=>t.id===e.id);o>=0&&(n[i].ui=null===(r=t.children[o])||void 0===r?void 0:r.ui,n[i]=Object.assign(t.children[o],n[i]))}),i&&s&&s.forEach((e,t)=>{let n=i.children.findIndex(t=>t.id===e.id);-1!==n&&(i.children[n]=Object.assign(i.children[n],s[t]))});let r=[e.id],o=t.children.findIndex(t=>t.id===e.id);-1!==o&&t.children[o+1]&&r.push(t.children[o+1].id),this.updateCourseLinksForContents(t.$scope,r.filter(Boolean))})}return this.$q.resolve()}constructor(e){this.$q=e}}class a{refreshChildren(e,t,n){let i=this.angularRefresher.refreshChildren(e,t,n);return(0,s.h)(i)}refreshCourseLinksWhichTargetIsInLearningModule(e,t,n){let i=this.angularRefresher.refreshCourseLinksWhichTargetIsInLearningModule(n,e,t);return(0,s.h)(i)}constructor(e){this.$q=e,this.key=i.fz.LearningModuleRefreshChildrenOperations,this.angularRefresher=new o(this.$q)}}},540438:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},ec:function(){return d},mA:function(){return r}});var i,s,r,o,a=n(148869),l=n(486502),c=n(512666);class d{getLocalizableCategoryNameKey(){return this.categoryKey}getMediumCategoryIconOrDefault(){return this.mediumIconsByCategory[this.category]||"document-blank"}getCategoryIconName(){return this.categoryImage?this.categoryImage:"document-blank"}toString(){return this.category}static parse(e){if(!e)return null;let t=Object.values(d);for(let n=0;n<t.length;n++)if(t[n].toString().toLowerCase()===e.toLowerCase())return t[n]}constructor(e,t,n){this.category=e,this.categoryKey=t,this.categoryImage=n,this.mediumIconsByCategory={Assessment:"test",Announcements:"announcements",Blog:"blog",Course:"course",CourseLink:"link",CourseSettings:"settings",DiscussionBoard:"discussion",Gradebook:"grades",Group:"groups",Message:"messages",ReleaseSettings:"settings",Rubric:"rubric",TableOfContents:"content-collection",Wiki:"wiki",Content:"document-blank"}}}d.Assessment=new d("Assessment","ultra.convert.category.assessment","test"),d.Announcements=new d("Announcements","ultra.convert.category.announcements","announcement"),d.Blog=new d("Blog","ultra.convert.category.blog","blog"),d.Collab=new d("Collab","ultra.convert.category.collab"),d.Course=new d("Course","ultra.convert.category.course","course"),d.CourseLink=new d("CourseLink","ultra.convert.category.courseLink","link"),d.CourseSettings=new d("CourseSettings","ultra.convert.category.courseSettings","settings"),d.Content=new d("Content","ultra.convert.category.content","document-blank"),d.ContentSettings=new d("ContentSettings","ultra.convert.category.contentSettings","settings"),d.DiscussionBoard=new d("DiscussionBoard","ultra.convert.category.discussionBoard","discussion"),d.Gradebook=new d("Gradebook","ultra.convert.category.gradebook","grades"),d.Group=new d("Group","ultra.convert.category.group","groups"),d.Message=new d("Message","ultra.convert.course.message.unsupported","messages"),d.ProgressTracking=new d("ProgressTracking","ultra.convert.category.progressTracking"),d.ReleaseSettings=new d("ReleaseSettings","ultra.convert.category.releaseSettings","settings"),d.Rubric=new d("Rubric","ultra.convert.category.rubric","rubric"),d.TableOfContents=new d("TableOfContents","ultra.convert.category.tableOfContents","content-collection"),d.Task=new d("Task","ultra.convert.category.task"),d.Wiki=new d("Wiki","ultra.convert.category.wiki","wiki"),(i=r||(r={})).Success="Success",i.Failure="Failure",i.Partial="Partial",i.Unavailable="Unavailable",(s=o||(o={})).Waiting="WAITING",s.Assigned="ASSIGNED",s.Running="RUNNING",s.Complete="COMPLETE",s.CompleteErrors="COMPLETE_ERRORS",s.Incomplete="INCOMPLETE";let u=a.oP;l.Z.factory(u,["restmod",c.xQ,(e,t)=>{let n=e.model().mix({$config:{primaryKey:"taskId"}});return n}])},456141:function(e,t,n){"use strict";n.d(t,{H:function(){return u}}),n(407537);var i=n(276635),s=n(18447),r=n(267328),o=n(148869),a=n(168132),l=n(486502),c=n(512666),d=n(408027);let u=o.VH;l.Z.factory(u,["restmod","$q","$http",c.xQ,(e,t,n,l)=>{let c=l.createHooksToFetchParent("course"),u=e.model(s.default.apiBasePath+"/v1/courses").mix({announcements:{hasMany:o.vp},assessments:{hasMany:o.dd},calendarItems:{hasMany:o.zU,path:"calendars/calendarItems"},calendars:{hasOne:o.Zl},collab:{hasOne:o.LV},collabUltra:{hasOne:o.ZP,path:"collabultra"},contents:{hasMany:o.V1},conversions:{hasMany:o.oP,path:"convertToUltra"},forums:{hasMany:o.uD,path:"discussionboards/default/forums"},entitlements:{hasMany:o.Xk},gradebook:{hasOne:o.P7},instructorsMembership:{mask:"CU",hasMany:o.YJ,path:"memberships?roleBucket="+d.O8v.Teaching},exports:{hasMany:o.iH},ltiPlacements:{hasMany:o.Lv},memberships:{hasMany:o.YJ,hooks:c},membershipInvites:{hasMany:o.Wi,path:"membershipInvites"},messageFolders:{hasMany:o.M9},conversations:{hasMany:o.yB},notifications:{hasMany:o.qq},preferences:{hasMany:o.nc},schedule:{hasMany:o.mH},term:{belongsTo:o.H,key:"termId"},users:{hasMany:o.YJ,hooks:c},groups:{hasMany:o.x9},rubrics:{hasMany:o.gg,path:"rubrics"},analyticsReports:{hasMany:o.vv,path:"analyticsReports"},tools:{hasMany:o.h,path:"tools"},contentHandlers:{hasMany:o.h,path:"contentHandlers"},indicators:{mask:!0,hasMany:o.$K,path:"contents/indicators"},startDate:{serialize:"date"},endDate:{serialize:"date"},scormReportItems:{hasMany:o.p5,path:"scormReportContents"},studentPreview:{hasOne:o.QW,path:"spreview"},conversationCounts:{hasOne:o.yB,path:"/conversations/counts"},ui:{mask:!0,init:()=>({convertToUltraTaskStatus:"?"})},isUndecided(){return d.S2N.Undecided===this.ultraStatus},isClassic(){return d.S2N.Undecided===this.ultraStatus||d.S2N.Classic===this.ultraStatus},isUltraConfirmed(){return d.S2N.Ultra===this.ultraStatus},isUltra(){return d.S2N.Ultra===this.ultraStatus||this.isUltraPreview()},isUltraPreview(){return d.S2N.UltraPreview===this.ultraStatus},setUltraStatusDecided(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:d.S2N.Ultra}},function(e){this.ultraStatus=e.data.ultraStatus}).$asPromise()},chooseClassicCourseView(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:d.S2N.Classic}},function(e){this.$unwrap(e.data)}).$asPromise()},isOpen(){return!0===this.isAvailable&&!1===this.isClosed},isOpenClassic(){return this.isOpen()&&this.isClassic()},isOpenNonClassic(){return this.isOpen()&&!this.isClassic()},isPrivate(){return!1===this.isAvailable},appearsAsPrivate(){return"effectiveAvailabilityUnprivileged"in this&&!this.effectiveAvailabilityUnprivileged},isComplete(){return!0===this.isAvailable&&!0===this.isClosed},getStatus(){return this.isAvailable?this.isClosed?r.D.Complete:r.D.Open:r.D.Private},setStatus(e,t){r.D.Complete===e?(this.isAvailable=!0,this.isClosed=!0,this.ui.status=r.D.Complete):r.D.Open===e?(this.isAvailable=!0,this.isClosed=!1,this.ui.status=r.D.Open):r.D.Private===e&&(this.isAvailable=!1,this.isClosed=!1,this.ui.status=r.D.Private),t&&(this.effectiveAvailability=t.effectiveAvailability,this.effectiveAvailabilityUnprivileged=t.effectiveAvailabilityUnprivileged)},canAccess(){return this.ui&&this.ui.isExternal?!!this.ui.externalUrl:this.isUndecided()?this.permissions&&this.permissions.chooseUltraStatus:this.effectiveAvailability},canChooseUltraStatus(){return this.permissions.chooseUltraStatus},canExport(){return this.permissions.export&&!this.isUltraPreview()},canArchive(){return this.permissions.archive&&!this.isUltraPreview()},canViewAutoArchive(){return this.permissions.viewAutoArchive},canCopy(){return this.permissions.copy},canImport(){return this.permissions.import},convertToUltraCourse(){return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra",data:{id:this.id}},e=>{this.ui.convertToUltraTaskId=e.data.taskId,this.ui.convertToUltraTaskStatus=e.data.taskStatus,this.ui.conversionTaskTitle=e.data.taskTitle,this.ui.showConversionInProgress=!0,this.ui.showConversionComplete=!1}).$asPromise()},undoCourseConversion(){return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/undo",data:{id:this.id}},e=>{this.ui.convertToUltraTaskId=e.data.taskId,this.ui.convertToUltraTaskStatus=e.data.taskStatus,this.ui.conversionTaskTitle=e.data.taskTitle,this.ui.showConversionInProgress=!0,this.ui.showConversionComplete=!1}).$allow([400,404]).$asPromise()},refreshConvertToUltraStatus(){return this.$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/conversionStatus"},e=>{this.ui.convertToUltraTaskId=e.data.taskId,this.ui.convertToUltraTaskStatus=e.data.taskStatus,this.ui.conversionTaskTitle=e.data.taskTitle}).$allow([404,403]).$asPromise()},getInstructors(){return(this.instructorsMembership||[]).map(e=>e.user)},getBaseRoute(){return this.isOrganization?"base.organizations":"base.courses"},importContents(e,t){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/imports?fileName="+encodeURIComponent(e)+"&fileLocation="+t,data:{cxAction:"CX_ACTION_IMPORT",includeItems:["alignments","announcement","availabilityRule","assessment","content","calendar","collabSessions","glossary","gradebookItems","groups","discussionBoard","settings","staffInformation","tasks","blog","journal","rubric","customArea(bb-retention)","customArea(bb-wiki)"]}},function(e){this.$unwrap(e.data)}).$asPromise()},copyCourse(e,t,n,i,s,r){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/copy",data:{srcCourseId:e,contentItems:t.contentItems,assessmentItems:t.assessmentItems,rubricItems:t.rubricItems,targetContentId:n,positionBefore:i,positionAfter:s,shouldSendNotifyEmail:r}},function(e){this.$unwrap(e.data)}).$asPromise()},getImportCopyTaskStatus(e){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/"+e},function(e){this.$unwrap(e.data)}).$allow([404]).$asPromise()},getGranularCopyTaskStatus(e=[]){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/ultraConversionReports?taskIds="+e.join()},function(e){this.$unwrap(e.data)}).$allow([404]).$asPromise()},getTaskErrorDetailMessages(e,t){return t=t||this.$scope.$url()+`/${this.id}/ultraConversionReports/${e}/messages`,this.$scope.$build().$send({method:"GET",url:t},function(e){this.$unwrap(e.data)}).$asPromise()},canConvert(){return this.permissions.convert},hasSchedule(){return!i.isEmpty(this.schedule)},getLocale(){return this.isLocaleEnforced&&this.locale},isToolAvailable(e){return this.tools.isToolAvailable(e)},getAnnouncementsCount(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/announcements/counts"},function(e){this.$unwrap(e.data)}).$asPromise()},getCourseGroupSetCount(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/groupsets/count"},function(e){this.$unwrap(e.data)}).$asPromise()},getChildrenCourses(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url().replace(s.default.apiBasePath,s.default.apiBasePath+"/public")+"/"+this.id+"/children?fields=id,childCourse.name"}).$allow([400]).$asPromise().then(e=>e.$response.data.results&&e.$response.data.results)},attendanceRecordsExist(){return this.$scope.$build().$send({method:"GET",url:`${this.$scope.$url()}/${this.$pk}/attendanceRecords`,params:{limit:"1"}}).$suppressErrorDialog().$asPromise().then(e=>e.$response.data.results&&e.$response.data.results.length>0)},$extend:{Model:{findCourseByCourseId(e,t=!1){let n=this.$collection().$send({method:"GET",url:this.$url()+"/find",params:{courseId:e}});return t&&(n=n.$allow([404])),n.$asPromise().then(e=>{if(e&&e.$response&&200===e.$response.status)return e.$response&&e.$response.data})}}},$hooks:{"after-fetch":function(){a.lZ.sortInstructorsMembership(this.instructorsMembership)},"after-feed":function(e){e.instructorsMembership&&this.instructorsMembership.$decode(e.instructorsMembership)}}});return u.mixinCourses=l.getDataMixin(u.findMany.bind(u),"courseId","course"),u}])},580536:function(e,t,n){"use strict";n.d(t,{Cs:function(){return o},HV:function(){return m},OO:function(){return p},z_:function(){return r}});var i,s,r,o,a=n(148869),l=n(486502),c=n(512666),d=n(64314),u=n(625506);function p(e){let t=parseInt(e,10)+1,n=Object.keys(o);return n.length<t&&(t=n.length-1),o[n[t]]}(i=r||(r={})).Published="PUBLISHED",i.Deleted="DELETED",i.Drafted="DRAFT",(s=o||(o={})).Discussion="0",s.Comment="1",s.Reply="2",s.ClassConversation="3";let m=a.nH;l.Z.factory(m,["restmod","$q",c.xQ,d.HV,(e,t,n,i)=>{let s=e.model().mix({replies:{mask:!0},parent:{mask:!0},states:{hasOne:a.t6},discussion:{mask:!0},type:{mask:!0},isAvailable:{mask:!0},user:{mask:!0},lastUpdateUser:{mask:!0},ui:{mask:!0,init:()=>({isEdit:!1})},postDate:{serialize:"date"},editDate:{serialize:"date"},"gradedColumn.dueDate":{serialize:"date"},$hooks:{"after-fetch-many":function(){"messages"===this.$scope.$partial&&this.forEach(e=>{e.type=o.Discussion,e.parent=e,e.discussion=e,e.states.readStateInd=e.messageStatus.isRead})},"after-destroy":function(e){e.data&&this.$unwrap(e.data)}},$extend:{Record:{getReplies(e,n){if(n&&0===this.messageStatus.numberOfChildren)return this.replies=this.$scope.$collection(),this.replies.$asPromise=()=>t(e=>e(this.replies)),this.replies;let i=this;return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/replies",params:{sort:e.sort,limit:e.limit,offset:e.offset,userId:e.userId,groupId:e.groupId,messageLifecycle:e.messageLifecycle}},function(e){this.$unwrap(e.data),i.replies=this,i.ui.count=e.data.paging.count,this.forEach(e=>{e.type=p(i.type),e.parent=i,e.discussion=i.discussion,e.states.readStateInd=e.messageStatus.isRead})})},saveReply(e,t={}){let n=this.$scope.$url()+"/"+this.id+"/replies?"+u.param(t);return this.$scope.$build().$send({method:"POST",url:n,data:e.$wrap()},function(e){this.$unwrap(e.data),this.replies=this.$scope.$collection()})},getRepliesCount(e={}){let t=this.$scope.$url()+"/"+this.id+"/replies/count?"+u.param(e),n=this;return this.$scope.$build().$send({method:"GET",url:t},function(e){n.ui.count=e.data.count},function(){n.ui.count=0})},updateMessageStatus(e,t={}){let n=this.$scope.$url()+"/"+this.id+"/states?"+u.param(t);return this.$scope.$build().$send({method:"PATCH",url:n,data:e.$wrap()},function(e){return this.states=this.$unwrap(e.data),this.states},function(e){400===e.status||e.$response&&e.$response.status})},copy(e){Object.getOwnPropertyNames(e).filter(e=>"$"!==e[0]).forEach(t=>{this[t]=e[t]})}},Collection:{batchGetReplies(e){let n="?";e&&Object.keys(e).forEach(t=>{n+=t+"="+e[t]+"&"});let s=t.defer(),r=[],o=n=>{let s=t.defer();return i.performBatch(()=>{t.all(n.map(t=>t.getReplies(e,!0).$asPromise())).then(s.resolve)}),s.promise.then(e=>(e.forEach((e,t)=>{let i=n[t];e.forEach(e=>{e.type=p(i.type),e.parent=i,e.discussion=i.discussion,e.states.readStateInd=e.messageStatus.isRead,r.push(e)})}),r))};return o(this).then(o).then(s.resolve),s.promise}}}});return s}])},16379:function(e,t,n){"use strict";n.d(t,{Et:function(){return s},sE:function(){return u}});var i,s,r=n(408027);(i=s||(s={})).Add="Add",i.Delete="Delete",i.ValueChange="ValueChange",i.NoChange="NoChange";class o{equals(e){return null==e?this.hasNoAccommodation():this.type===r.rWm.Custom?this.value===e.value:this===e||this.type===e.type}hasNoAccommodation(){return!1}get hasAccommodation(){return!this.hasNoAccommodation()}constructor(e,t){this.type=e,this.value=t}}class a extends o{compare(e){return this.equals(e)?s.NoChange:this.hasAccommodation?s.Add:s.Delete}}class l extends a{hasNoAccommodation(){return!0}constructor(){super(r.AVG.Normal)}}class c extends o{compare(e){return this.equals(e)?s.NoChange:this.hasAccommodation?e.hasAccommodation?s.ValueChange:s.Add:s.Delete}toKey(){switch(this.type){case r.rWm.NoAccommodation:return"NoAccommodation";case r.rWm.Unlimited:return"Unlimited";default:return"Custom"}}}class d extends c{hasNoAccommodation(){return!0}constructor(){super(r.rWm.NoAccommodation)}}class u{static fromTypes(e,t){let n=new u;return n.dueDate=null==e||e===r.AVG.Normal?new l:new a(e),n.timeLimit=function(e){if(null==e||e===r.rWm.NoAccommodation)return new d;if(e!==r.rWm.Unlimited){let t=parseInt(e+"",10);return new c(r.rWm.Custom,t)}return new c(e)}(t),n}clone(){return this.timeLimit.type===r.rWm.Custom?u.fromTypes(this.dueDate.type,this.timeLimit.value):u.fromTypes(this.dueDate.type,this.timeLimit.type)}equals(e){return e.dueDate.equals(this.dueDate)&&e.timeLimit.equals(this.timeLimit)}compare(e){return{dueDate:this.dueDate.compare(e.dueDate),timeLimit:this.timeLimit.compare(e.timeLimit)}}get hasAccommodation(){return this.dueDate.hasAccommodation||this.timeLimit.hasAccommodation}constructor(e,t){null!=e&&(this.dueDate=e),null!=t&&(this.timeLimit=t)}}},178975:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},M4:function(){return l},M9:function(){return c},rC:function(){return o}}),n(407537);var i=n(18447),s=n(486502),r=n(148869);let o=1e3,a={S:0,T:1,B:2,G:3,BB_FACILITATOR:4,P:5,U:6},l={S:"global.course.role.S",P:"global.course.role.P",BB_FACILITATOR:"global.course.role.BB_FACILITATOR",T:"global.course.role.T",B:"global.course.role.B",G:"global.course.role.G",U:"global.course.role.U"},c={S:"global.organization.role.S",P:"global.organization.role.P",BB_FACILITATOR:"global.organization.role.BB_FACILITATOR",T:"global.organization.role.T",B:"global.organization.role.B",G:"global.organization.role.G",U:"global.organization.role.U"},d=r.W8,u=i.default.apiBasePath+"/v1/roles/courseRoles";s.Z.factory(d,["restmod",e=>e.model(u).mix({localizedCourseName:{mask:!0},$extend:{Collection:{loadLocalizedNames(e){return this.forEach(t=>{t.isRemovable?e?t.localizedRoleName=t.orgName.rawValue:t.localizedRoleName=t.courseName.rawValue:e?t.localizedRoleName="global.organization.role."+t.identifier:t.localizedRoleName="global.course.role."+t.identifier}),this},sortByStudentFirst(e){return this.$action(function(){this.sort(function(t,n){let i,s;let r=t.identifier,o=n.identifier;return r in a&&o in a?a[r]-a[o]:r in a&&!(o in a)?-1:!(r in a)&&o in a?1:("organization"===e?(i=t.orgName.languageKey,s=n.orgName.languageKey):(i=t.courseName.languageKey,s=n.courseName.languageKey),i>s)?1:i<s?-1:0})})}}}})])},404831:function(e,t,n){"use strict";n.d(t,{CR:function(){return i},ed:function(){return r},jp:function(){return s},qS:function(){return o}});let i="bbml-updated",s="bb-bbml-editor-force-bbml-update",r="bb-bbml-editor-id-generated";class o{}},776846:function(e,t,n){"use strict";n.r(t),n.d(t,{ToolAttemptDetailItemEx:function(){return b},isGroupAttempt:function(){return C},moduleName:function(){return g},serviceName:function(){return f}}),n(407537);var i=n(276635),s=n(18447),r=n(456141),o=n(148869),a=n(486502),l=n(889019),c=n(619034),d=n(951248),u=n(512666),p=n(58984),m=n(278784),h=n(408027);let g="ultra.components.services.models.grade.gradeAttempt",f=o.Sp;class b{get elapsedDuration(){return c.duration(c(this.gradeAttempt.attemptDate).diff(c(this.gradeAttempt.creationDate)))}get elapsedSec(){return Math.ceil(this.elapsedDuration.asSeconds())}get softTimeLimitSecond(){return this.isTimerCompletionH()?this.toolAttemptDetailItem.softTimeLimitSeconds:this.toolAttemptDetailItem.timeLimitSeconds}needAttention(){return!i.isUndefined(this.toolAttemptDetailItem.timeLimitSeconds)&&(this.elapsedSec>this._graceTimeLimitSecond||this._isSubmittedInGracePeriod&&this._hasAnswerIsModifiedInGracePeriod)}getExceedTime(){return Math.floor(c.duration(this.elapsedSec-this.softTimeLimitSecond,"seconds").asMinutes())}isCompleted(){return this.gradeAttempt.isCompleted()}isTimerCompletionH(){return this.toolAttemptDetailItem.timerCompletion===h.sez.HardStop}isTimerCompletionC(){return this.toolAttemptDetailItem.timerCompletion===h.sez.Continual}getLastModifyTime(e){return i.maxBy(e.saveTimes,e=>e.date).date}isAnsweredAfterSoftTimeLimit(e){return!i.isEmpty(e.saveTimes)&&c(this.getLastModifyTime(e)).isAfter(this._softTimeLimitDate)}getQuestionsAnsweredAfterSoftTimeLimit(){return i.filter(this.toolAttemptDetailItem.questionAttempts,e=>this.isAnsweredAfterSoftTimeLimit(e))}constructor(e,t){this.gradeAttempt=e,this.toolAttemptDetailItem=t,this._softTimeLimitDate=c(this.gradeAttempt.creationDate).add(this.softTimeLimitSecond,"seconds").toDate(),this._graceTimeLimitSecond=this.softTimeLimitSecond+b.GRACE_PERIOD_SECOND,this._graceDate=c(this.gradeAttempt.creationDate).add(this._graceTimeLimitSecond,"seconds").toDate(),this._isSubmittedInGracePeriod=c(this.gradeAttempt.attemptDate).isBetween(c(this.gradeAttempt.creationDate),c(this._graceDate)),this._hasAnswerIsModifiedInGracePeriod=i.filter(this.toolAttemptDetailItem.questionAttempts,e=>!i.isEmpty(e.saveTimes)&&c(this.getLastModifyTime(e)).isBetween(this._softTimeLimitDate,this._graceDate)).length>0}}b.GRACE_PERIOD_SECOND=60;let v=function(e){i.forEach(e,(e,t)=>{e.timeLimitSec=e.timeLimitSec||e.timeLimitSeconds})},y=(e,t)=>{t.length>0&&e.dispatch(d.Nwg.questionAttempt.setQuestionAttemptsInStore(t))};function C(e){return void 0!==e.attempts}let S=e=>{var t,n,i;let s=e.toolAttemptDetail?Object.keys(e.toolAttemptDetail):[],r=null!==(n=s[0])&&void 0!==n?n:d.u$1.Test.toString(),o=null===(t=e.toolAttemptDetail)||void 0===t?void 0:t[r],a=null!==(i=null==o?void 0:o.questionAttempts)&&void 0!==i?i:[];return C(e)&&e.attempts.forEach(e=>{a=a.map(t=>({...t,groupAttemptId:t.attemptId,attemptId:e.id}))}),a};a.Z.factory(f,["restmod",u.xQ,r.H,"$ngRedux",(e,t,n,r)=>{let a=e.model().mix({creationDate:{serialize:"date"},modifiedDate:{serialize:"date"},attemptDate:{serialize:"date"},attemptFirstGradedDate:{serialize:"date"},attemptLastGradedDate:{serialize:"date"},"attemptReceipt.submissionDate":{serialize:"date"},originality:{hasOne:o.f3,path:"submissionResults"},assessment:{hasOne:o.dd,path:"assessment"},stagedAttemptGrades:{init(){return[]}},$hooks:{"after-fetch":function(){y(r,S(this)),v(this.toolAttemptDetail)},"after-fetch-many":function(){let e=[];i.forEach(this,t=>{e=e.concat(S(t)),v(t.toolAttemptDetail)}),y(r,e)},"after-save":e=>{let t=(0,m.L)(e.data);r.dispatch(d.Nwg.gradebookAttempt.setGradeAttemptInStore(t))}},$extend:{Scope:{$destroyUrlFor(e){return s.default.apiBasePath+"/v1/courses/"+l.j(n,e.$scope)+"/gradebook/attempts/"+e.id}},Record:{isPostable(){return this.readyToPost&&(h.I$9.NeedsGrading===this.status||h.I$9.NeedsMoreGrading===this.status)},isCompleted(){return h.I$9.Completed===this.status},isGraded(){return this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade)||this.readyToPost},isGradable(e){let t=this.getToolAttemptDetailItem(e);return t&&t.assessment&&!t.assessment.hasAnswerableQuestions},isInProgress(){return h.I$9.InProgress===this.status||h.I$9.InMoreProgress===this.status},isSubmitted(){return!this.isInProgress()},isNeedsGrading(){return h.I$9.NeedsGrading===this.status||h.I$9.NeedsMoreGrading===this.status},isReconciled(){return null!=this.reconciliationMode},getToolAttemptDetailItem(e){return this.toolAttemptDetail?this.toolAttemptDetail[e.toString()]:null},getToolAttemptDetailItemEx(e){let t=this.getToolAttemptDetailItem(e);return null!=t?new b(this,t):null},getTimedTestAttemptDetail(){let e=this.getTimedTestApiData();return e?new p.F1(e):null},getTimedTestAttemptDetailWithDueDate(e){return new p.F1({...this.getTimedTestApiData(),dueDate:e})},getTimedTestApiData(){let e=this.getToolAttemptDetailItem(d.u$1.Test);return null==e?null:{elapsedSec:e.elapsedSeconds,timeLimitSec:e.timeLimitSeconds,softLimitSec:e.softTimeLimitSeconds,timerCompletion:e.timerCompletion}},getFeedbackToUser(){return this.feedbackToUser},getGroupIndividualFeedbackToUser(){return this.groupAttemptId&&this.overrideStatus===h.c4$.FeedbackOverride?this.feedbackToUser:null},getLastFeedbackAuthor(){return this.lastFeedbackAuthor},isPrePostGrade(){return!this.isCompleted()||!this.readyToPost||!this.userId},isDisplayablePostedGrade(){return this.isCompleted()&&this.readyToPost&&null!=this.userId}},Collection:{getNumAttemptsToGrade(){return this.filter(e=>e.isNeedsGrading()&&!e.isPostable()).length},getNumAttemptsToReconcile(){return this.getNumAttemptsToGrade()},getNumAttemptsToPost(){return this.filter(e=>e.isPostable()).length},getNumAttemptsSubmittedLate(e){return this.filter(t=>t.isSubmitted()&&c(t.attemptDate).isAfter(e)).length},getNumAttemptsSubmitted(){return this.filter(e=>e.isSubmitted()).length},getNumOfGradedAttempts(){return this.filter(e=>e.isGraded()).length},isAllGradedAndPosted(){return this.length>0&&this.every(e=>e.isCompleted())},isAtLeastOneGradedAndPosted(){return this.length>0&&this.some(e=>e.isCompleted())},isFirstAttemptPosted(){var e;return null===(e=this.getFirstAttempt())||void 0===e?void 0:e.isCompleted()},isLastSubmittedAttemptPosted(){var e;return null===(e=this.getLastSubmittedAttempt())||void 0===e?void 0:e.isCompleted()},getAttemptIndexById(e){return i.findIndex(this,t=>{var n;return(null!==(n=t.groupAttemptId)&&void 0!==n?n:t.id)===e})},getFirstAttempt(){return this.length?this[0]:void 0},getLastSubmittedAttempt(){return this.length?this[this.length-1]:void 0}}}});return a}])},58984:function(e,t,n){"use strict";n.d(t,{F1:function(){return c},Ir:function(){return o},yP:function(){return r}});var i,s,r,o,a=n(408027),l=n(684710);class c{get testType(){if(!this.apiData.timeLimitSec)return this.apiData.dueDate?o.EnforcedDueDateTest:o.NotATimedTest;let e=this.apiData.timerCompletion||"";switch(e){case a.sez.Continual:return o.UnlimitedExtraTime;case a.sez.HardStop:return this.apiData.softLimitSec?o.LimitedExtraTime:o.NoExtraTime;default:return this.apiData.dueDate?o.EnforcedDueDateTest:o.NotATimedTest}}get adaptedTime(){switch(this.testType){case o.NoExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};case o.UnlimitedExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:Number.POSITIVE_INFINITY};case o.LimitedExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.softLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};case o.EnforcedDueDateTest:return{elapsedSeconds:l.Z.getServerTimeAsEpochTime(),softlimitSeconds:this.dueDateAsEpochTime,hardlimitSeconds:this.dueDateAsEpochTime};default:return{elapsedSeconds:NaN,softlimitSeconds:NaN,hardlimitSeconds:NaN}}}get dueDateAsEpochTime(){return this.apiData.dueDate?this.apiData.dueDate.getTime()/1e3:null}get stages(){if(this.dueDateAsEpochTime&&!this.withinDueDatelimit)return[r.StageE];switch(this.testType){case o.NoExtraTime:return this.getStagesForNoExtraTimeTest();case o.UnlimitedExtraTime:return this.getStagesForUnlimitedExtraTimeTest();case o.LimitedExtraTime:return this.getStagesForLimitedExtraTimeTest();case o.EnforcedDueDateTest:return this.getStagesForEnforcedDueDateTest()}}getStagesForNoExtraTimeTest(){return this.testType!==o.NoExtraTime?void 0:this.dueDateIsSoonerThanHardTimeLimit?[r.StageEnforcedDueDate]:this.withinHardlimit?[r.Stage0NoExtraTime]:[r.StageE]}getStagesForUnlimitedExtraTimeTest(){if(this.testType===o.UnlimitedExtraTime)return this.dueDateIsSoonerThanSoftTimeLimit?[r.StageEnforcedDueDate]:this.dueDateIsSoonerThanHardTimeLimit?this.withinLimit?[r.Stage0UnlimitedExtraTime,r.StageEnforcedDueDate]:[r.StageEnforcedDueDate]:this.withinLimit?[r.Stage0UnlimitedExtraTime,r.Stage1UnlimitedExtraTime]:[r.Stage1UnlimitedExtraTime]}getStagesForLimitedExtraTimeTest(){if(this.testType===o.LimitedExtraTime)return this.dueDateIsSoonerThanSoftTimeLimit?[r.StageEnforcedDueDate]:this.dueDateIsSoonerThanHardTimeLimit?this.withinLimit?[r.Stage0LimitedExtraTime,r.StageEnforcedDueDate]:[r.StageEnforcedDueDate]:this.withinLimit?[r.Stage0LimitedExtraTime,r.Stage1LimitedExtraTime]:this.withinHardlimit?[r.Stage1LimitedExtraTime]:[r.StageE]}getStagesForEnforcedDueDateTest(){return this.testType!==o.EnforcedDueDateTest?void 0:this.withinDueDatelimit?[r.StageEnforcedDueDate]:[r.StageE]}get hasTimeLimit(){return this.testType!==o.EnforcedDueDateTest&&this.testType!==o.NotATimedTest}get hasExtraTime(){return this.testType===o.LimitedExtraTime||this.testType===o.UnlimitedExtraTime}get hasLimitedExtraTime(){return this.testType===o.LimitedExtraTime}get hasUnlimitedExtraTime(){return this.testType===o.UnlimitedExtraTime}get withinLimit(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.softlimitSeconds}get withinHardlimit(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.hardlimitSeconds}get withinDueDatelimit(){return this.dueDateAsEpochTime&&l.Z.getServerTimeAsEpochTime()<this.dueDateAsEpochTime}get dueDateIsSoonerThanHardTimeLimit(){return this.dueDateIsSoonerThanTimeLimit(this.adaptedTime.hardlimitSeconds)}get dueDateIsSoonerThanSoftTimeLimit(){return this.dueDateIsSoonerThanTimeLimit(this.adaptedTime.softlimitSeconds)}dueDateIsSoonerThanTimeLimit(e){var t;return this.withinDueDatelimit&&this.dueDateAsEpochTime-l.Z.getServerTimeAsEpochTime()<e-(null!==(t=this.adaptedTime.elapsedSeconds)&&void 0!==t?t:0)}get willAutoSubmit(){return this.testType===o.NoExtraTime||this.testType===o.LimitedExtraTime||this.testType===o.EnforcedDueDateTest}get displayedTimeLimitSeconds(){return this.adaptedTime.softlimitSeconds}get displayedExtraTimeSeconds(){return this.adaptedTime.hardlimitSeconds-this.adaptedTime.softlimitSeconds}getSubmissionRuleText(e,t){switch(this.testType){case o.NoExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.autoSubmission"});case o.UnlimitedExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.unlimitExtraTime"});case o.LimitedExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.extraTimeInfo.plural",params:{allowExtraTime:Math.floor(this.displayedExtraTimeSeconds/60)}});default:return""}}constructor(e){this.apiData=e}}(i=r||(r={})).Stage0NoExtraTime="S0_NO_EXTRA",i.Stage0UnlimitedExtraTime="S0_UNLIMITED_EXTRA",i.Stage1UnlimitedExtraTime="S1_UNLIMITED_EXTRA",i.Stage0LimitedExtraTime="S0_LIMITED_EXTRA",i.Stage1LimitedExtraTime="S1_LIMITED_EXTRA",i.StageE="SE",i.StageEnforcedDueDate="S0_ENFORCED_DUE_DATE",(s=o||(o={})).NoExtraTime="NO_EXTRA",s.UnlimitedExtraTime="UNLIMITED_EXTRA",s.LimitedExtraTime="LIMITED_EXTRA",s.EnforcedDueDateTest="ENFORCED_DUE_DATE",s.NotATimedTest="NOT_TIMED"},454229:function(e,t,n){"use strict";n.r(t),n.d(t,{AttemptAggregationModel:function(){return i},CREATE_COLUMN_ID:function(){return S},defaultAttemptAggregationModel:function(){return A},getAttemptAggregationModelLabelKey:function(){return x},getAttemptAggregationModelStudentLabelKey:function(){return T},moduleName:function(){return y},parseAttemptAggregationModel:function(){return k},parseForumId:function(){return P},serviceName:function(){return C}}),n(407537);var i,s,r=n(276635),o=n(951248),a=n(408027),l=n(456141),c=n(183209),d=n(344429),u=n(148869),p=n(486502),m=n(619034),h=n(383508),g=n(684710),f=n(278784),b=n(197196),v=n(539210);let y="ultra.components.services.models.grade.gradeColumn",C=u.WC,S="create",E=Symbol("forceFetchSummary"),I=[a.oji.Unauthorized,a.oji.Forbidden,a.oji.TooManyRequests],w=e=>e&&"attemptDate"in e;(s=i||(i={})).Average="AVERAGE",s.First="FIRST",s.Highest="HIGHEST",s.Last="LAST",s.Lowest="LOWEST";let A=i.Average;function k(e){if(e)return Object.values(i).find(t=>t.toLowerCase()===e.toLowerCase())}function x(e){return"components.services.grade.aggregation-model."+e.toLowerCase()}function T(e){return"course.content.assessment.overview.gradeBasedOn."+e.toLowerCase()}function P(e){let t=e.split("/");return t[t.length-1]}p.Z.factory(C,["$http","$ngRedux","restmod","$rootScope","$q",l.H,d.H,c.H,(e,t,n,i,s,l,c,d)=>n.model().mix({grades:{hasMany:u.e5},summary:{hasOne:u.kI,hooks:{"before-request":function(e){!this.$owner[E]&&this.$owner.isCalculated()&&(e.cache={get(){return{}}})}}},groupAssociations:{hasMany:u.QA},anonymousGradingReleaseDate:{serialize:"date"},dueDate:{serialize:"date"},dateCreated:{serialize:"date"},dateModified:{serialize:"date"},peerReviewDueDate:{serialize:"date"},ui:{mask:!0,init:()=>({})},$hooks:{"before-request":function(e){if(this.$url()===e.url&&"DELETE"!==e.method){let t="gradebookCategory";e.params&&e.params.expand?r.includes(e.params.expand,t)||(e.params.expand+=`,${t}`):e.params={expand:t,...e.params}}},"before-save":e=>{e.params||(e.params={}),e.params.expand=["externalGrade","gradebookCategory","columnSummary"]},"after-request":function(e){var n,i,s;if(w(e.data)){let s=null===(n=e.data)||void 0===n?void 0:n.courseId;if(s&&(null===(i=e.config)||void 0===i?void 0:i.method)==="POST"){let n=e.data;t.dispatch(o.Nwg.gradebookAttempt.setGradeAttemptInStore(n,s,!0))}}else{if(e.data.externalGrade&&(null===(s=e.config)||void 0===s?void 0:s.method)==="PATCH"){let n=e.data.id,i=o.Ys.gradebookGrade.getGradebookGradesByColumnId(t.getState(),n);t.dispatch(o.Nwg.gradebookGrade.setInvalidatedGradesInStore(i))}e.data&&e.data.rubricAssociations&&e.data.rubricAssociations.forEach(e=>{h.F(e.rubricDefinition)})}let r=e.config&&e.config.params&&e.config.params.expand&&-1!==e.config.params.expand.indexOf("associatedRubrics");if(r){let n=(0,f.L)(e.data);t.dispatch(o.Nwg.gradebookColumn.setGradebookColumnInStore(n))}},"after-create":function(e){let n=(0,f.L)(e.data);t.dispatch(o.Nwg.gradebookColumn.addGradebookColumnToStore(n))}},$extend:{Record:{isTest(){return o.u$1.Test.isEqualTo(this.scoreProviderHandle)},isAssignment(){return o.u$1.UltraAssignment.isEqualTo(this.scoreProviderHandle)},isCalculated(){return a.eNW.NonCalculated!==this.calculationType},isOffline(){return this.userCreatedColumn},seemsAttemptBased(){return!this.isCalculated()&&!this.isOffline()&&!this.isAttendance()},isDiscussion(){return o.u$1.Discussion.isEqualTo(this.scoreProviderHandle)},isJournal(){return o.u$1.Journal.isEqualTo(this.scoreProviderHandle)},isScorm(){return o.u$1.Scorm.isEqualTo(this.scoreProviderHandle)},isScormSCO(){if(this.isScorm()){let e=this.ui&&this.ui.content||null,t=e&&!e.isConditionalReleaseLocked()&&e.getScormGradebookItems()||[],n=t&&t.find(e=>e.columnId===this.id);return!!(n&&!n.root)}return!1},isAttendance(){return o.u$1.Attendance.isEqualTo(this.scoreProviderHandle)},isVisible(){return this.visible},isHidden(){return!this.visible},isVisibleToStudents(){return this.isVisible()},isHiddenFromStudents(){return this.isHidden()},isGroupContent(){return this.groupContent},isMultipleAttempts(){return this.multipleAttempts>1||this.isUnlimitedAttempts()},isSingleAttempt(){return 1===this.multipleAttempts},isUnlimitedAttempts(){return 0===this.multipleAttempts},isCollectExternalSubmissions(){return!!this.collectExternalSubmissions},lateAttemptCreationDisallowed(){return!!this.isLateAttemptCreationDisallowed},getNumMissing(){return this.isOffline()?this.summary.numNeedsGrading:this.summary.numEligibleToBeGraded-this.summary.numStudentSubmissions()},getNumMissingIfLate(){return this.isCalculated()||!this.isLate()?NaN:this.getNumMissing()},getVisibilityAsStudent(){return this.isVisibleToStudents()?a.hbA.Visible:a.hbA.Hidden},setVisibility(e){switch(e){case a.hbA.Visible:this.visible=!0;break;case a.hbA.Hidden:this.visible=!1}},canEdit(){return this.permissions&&this.permissions.edit},postReadyGrades(){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},function(e){this.ui.numOfGradesPosted=e.data.count}).$asPromise().then(e=>e.ui.numOfGradesPosted)},postReadyGroupAttempts(e){return this.$send({method:"POST",url:this.$url()+"/groupAssociations/"+e.groupAssociationId+"/postReadyGroupGrades",data:{}},e=>{this.ui.numOfAttemptsPosted=e.data.count}).$asPromise().then(e=>e.ui.numOfAttemptsPosted)},getGroupGrade(t,n){let i=n?{expand:"instructorFeedback,groupMembersGrades"}:null;return e.get(this.$url()+"/groupAssociations/"+t+"/grades",i&&{params:i}).then(e=>{let t=d.$buildRaw(e.data);return delete t.id,t.groupMembersGrades&&(t.groupMembersGrades=t.groupMembersGrades.map(e=>this.grades.$buildRaw(e))),t})},getGroupAttemptByGroupAssociationId(e,t=!1,n){return this.groupAssociations.$new(e).groupAttempts.$fetch({expand:t?"attempts,toolAttemptDetail,viewUrl":"attempts,toolAttemptDetail",excludeUnavailableMembers:!0}).$asPromise().then(e=>{var t;let i;return e&&n&&(i=e.find(e=>e.id===n)),null!==(t=null!=i?i:e.find(e=>e.isInProgress()))&&void 0!==t?t:e[0]})},getGradeIdToAttempt(e,t){let n;let i={};return this.withParams(e).$send({method:"GET",url:this.$url()+(t?"/groupAttempts":"/attempts")},function(e){Object.keys(e.data.lookup).forEach(n=>{if(t)e.data.lookup[n]=this.grades.$new(n).groupAttempts.$decode(e.data.lookup[n]);else{let t=this.grades.$new(n).attempts.$decode(e.data.lookup[n]),s=t.some(e=>!e.deletedAttempt);s&&(i[n]=this.grades.$new(n).attempts.$decode(e.data.lookup[n]))}}),e.data.lookup=i,n=e.data}).$asPromise().then(()=>n)},loadReviewableAttempts(e){return e.reviewableAttemptsOnly=!0,this.getGradeIdToAttempt(e,!1)},getContentGroupIdToGroupAttempt(e){let t;return(e?this.withParams(e):this).$send({method:"GET",url:this.$url()+"/groupAttempts"},function(e){Object.keys(e.data.lookup).forEach(t=>{let n=e.data.lookup[t][0];n.submissionResults&&n.submissionResults.results[b.P]&&(n.originalityProcessed=n.submissionResults.results[b.P].originalityProcessed,n.originalityScore=n.submissionResults.results[b.P].originalityScore),e.data.lookup[t]=l.$new(this.courseId).gradebook.groupAttempts.$decode(e.data.lookup[t]),e.data.lookup[t].forEach(e=>{var t;e.attempts=l.$new(this.courseId).gradebook.attempts.$decode(null!==(t=e.attempts)&&void 0!==t?t:[])})}),t=e.data}).$asPromise().then(()=>t)},hasEvaluations(){return this.getGradeIdToAttempt({}).then(e=>{let t=!1;return e&&e.lookup&&r.each(Object.keys(e.lookup),n=>(r.each(e.lookup[n],e=>(e&&e.rubricEvaluation&&(t=!0),!t)),!t)),t})},launchAttempt(e,t,n,i){return n&&(e.groupId=i),this.$send({method:"POST",url:this.$url()+(n?"/groupAttempts":"/attempts"),data:e.$wrap&&e.$wrap()||e,params:t},function(e){n?this.createdAttempt=l.$new(this.courseId).gradebook.groupAttempts.$buildRaw(e.data):this.createdAttempt=l.$new(this.courseId).gradebook.attempts.$buildRaw(e.data)}).$allow(I).$asPromise().then(e=>{var t;return!(I.indexOf(null==e?void 0:null===(t=e.$response)||void 0===t?void 0:t.status)>-1)&&(null==e?void 0:e.createdAttempt)?e.createdAttempt:e})},countAttempts(){let e=s.defer();return this.$send({method:"GET",url:this.$url()+"/attempts/count"},t=>{let n=null;return t.data&&(n=t.data.count),e.resolve(n)},t=>e.reject(t)).$allow([403]),e.promise},timeUntilDueDate(e){if(this.dueDate){let t=m(this.dueDate),n=m(g.Z.getServerTime());return t.diff(n,e)}return null},daysUntilDueDate(){return this.timeUntilDueDate("days")},isLate(){return!!this.dueDate&&this.dueDate<=g.Z.getServerTime()},isUserReconciler(e){return!!(this.delegatedGrading&&this.delegatedGraders&&this.delegatedGraders.some(t=>t.userId===e&&t.canReconcile&&!t.isUnassigned))},isUserDelegatedGrader(e){return!!(this.delegatedGrading&&this.delegatedGraders&&this.delegatedGraders.some(t=>t.userId===e&&!t.canReconcile&&!t.isUnassigned))},forceDelete(){if(!this.contentId)return(o.u$1.PartnerCloud.isEqualTo(this.scoreProviderHandle)&&this.linkId?c.delete(this.courseId,this.linkId):this.withParams({onlyIfEmpty:!1}).$destroy().$asPromise()).then(()=>(i.$broadcast("bb-delete-column",this),t.dispatch(o.Nwg.gradebookColumn.removeGradebookColumnFromStore(this.id)),this));throw Error("Content based column must be deleted by deleting associated content")},hasRubricAssociation(){return null!=this.rubricAssociations&&this.rubricAssociations.length>0},getRubricAssociation(){return this.hasRubricAssociation()?this.rubricAssociations[0]:null},getAssociatedRubricId(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricId:null},getAssociatedRubric(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricDefinition:null},setRubricAssociation(e){e?this.rubricAssociations=[{rubricId:e}]:this.rubricAssociations=[]},setMaxPossiblePoints(e){Number.isFinite(e)?this.possible=e:this.possible=v.cQ.GRADE_DEFAULT_POINTS},forceResolveSummary(){return this[E]=!0,this.summary.$resolve().$then(()=>{delete this[E]})},forceFetchSummary(e={}){return this[E]=!0,this.summary.$fetch(e).$then(()=>{delete this[E]})},alwaysOverride(){let e=!1,t=[o.u$1.Test,o.u$1.UltraAssignment,o.u$1.Discussion,o.u$1.Scorm,o.u$1.PeerSubmissionsTest];return t.forEach(t=>{t.isEqualTo(this.scoreProviderHandle)&&(e=!0)}),e},isQuestionAnalysisAvailable(){return this.isAssignment()||this.isTest()},isAnonymousGrading(){return this.anonymousGrading},canSeeFinalGrade(e){return this.delegatedGrading?!this.anonymousGrading&&this.isUserReconciler(e.id):!this.anonymousGrading}},Collection:{attachRelatedContentsByScoreProviderHandle(e){if(!this.length)return s.when(this);let t=l.$new(this[0].courseId),n=this.filter(t=>e.isEqualTo(t.scoreProviderHandle)&&!t.restricted),i=new Set(n.map(e=>e.contentId)),r=Array.from(i.values()).map(e=>t.contents.$find(e).$suppressErrorDialog().$asPromise());return s.all(r).then(e=>(n.forEach(t=>{t.ui.content=e.find(e=>e.id===t.contentId)}),this))},indexOfItemById(e){return this.$indexOf(t=>t.id===e)}}}})])},183209:function(e,t,n){"use strict";n.d(t,{H:function(){return p}}),n(407537);var i=n(276635),s=n(464027),r=n(619034),o=n(148869),a=n(486502),l=n(684710),c=n(512666),d=n(951248),u=n(408027);let p=o.e5;a.Z.factory(p,["restmod",c.xQ,"$ngRedux",(e,t,n)=>e.model().mix({$hooks:{"after-request":function(){this.$response.data.results?n.dispatch(d.Nwg.gradebookGrade.setInvalidatedGradesInStore(this.$response.data.results)):"PATCH"===this.$response.config.method&&n.dispatch(d.Nwg.gradebookGrade.setGradesInStore([this.$response.data]))}},attempts:{hasMany:o.Sp,hooks:{"after-fetch-many":function(){this.forEach(e=>{e.permissions=this.permissions})}}},column:{ignore:"CU"},groupAttempts:{hasMany:o.br},user:{belongsTo:o.xR},ui:{mask:!0,init:()=>({currentAttemptIndex:0,isCommentBoxShown:!1,areAllAttemptsDeleted:!1})},lastOverrideDate:{serialize:"date"},$extend:{Record:{isMissing(e){return!!(!this.isGraded()&&(e||s.isUndefined(e)&&!this.isSubmitted()))&&!!this.column&&!!this.column.dueDate&&r(this.column.dueDate).isBefore(l.Z.getServerTime())},isGraded(){let e=null!=this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade&&""!==this.displayGrade.grade);return e},isOverrideGrade(){return u.WTZ.NoOverride!==this.manualStatus&&(null!=this.manualGrade||null!=this.manualScore)},isReadyToPost(){let e=u.WTZ.NoOverride===this.manualStatus&&this.isGraded()&&!this.hasGradeBeenPosted||u.WTZ.ReadyToPost===this.manualStatus;return e},isPosted(){let e=!this.isCalculatedColumnGrade&&(u.WTZ.NoOverride===this.manualStatus&&(this.hasGradeBeenPosted||!Object.prototype.hasOwnProperty.call(this,"hasGradeBeenPosted")&&this.isGraded())||u.WTZ.IsPosted===this.manualStatus);return e},isSubmitted(){return!!(this.column&&this.column.seemsAttemptBased())&&u.EyR.NeedsGrading===this.status},isUpcoming(){if(!this.isGraded()&&!this.isSubmitted()&&this.column){if(this.column.dueDate)return r(this.column.dueDate).isAfter(l.Z.getServerTime());if(this.column.seemsAttemptBased())return!0}return!1},isInProgress(){return u.WTZ.GradingInProgress===this.manualStatus},hasInstructorComments(){var e,t;let n,i;return!!this.isGraded()&&(this.column.seemsAttemptBased()&&(n=this.ui&&this.ui.attempt,i=this.attempts),!!((null==n?void 0:null===(e=n.feedbackToUser)||void 0===e?void 0:e.displayText)||(null==i?void 0:i.length)&&this.hasSomeFeedbackToUser(i))||null!==(t=this.instructorFeedback)&&void 0!==t&&!!t.displayText)},hasSomeFeedbackToUser(e){return e.some(e=>{var t;return!!(null===(t=e.feedbackToUser)||void 0===t?void 0:t.displayText)})},saveComment(e,t,n,s){let r=t?{userId:t}:{};return(n&&(r=i.merge(r,n)),i.isString(e)?this.instructorFeedback?this.instructorFeedback.rawText=e:this.instructorFeedback={rawText:e}:this.instructorFeedback=e,s)?this.$send({method:"PATCH",url:this.$url(),data:{instructorFeedback:this.instructorFeedback},params:r},function(e){this.instructorFeedback=e.data.instructorFeedback}):this.withParams(r).$save(["instructorFeedback"])},hasAttempts(){return!!this.firstAttemptId},postReadyGrades(e){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},function(e){this.ui.numOfGradesPosted=e.data.count}).$asPromise().then(e=>e.ui.numOfGradesPosted)},getScore(){return this.displayGrade&&null!=this.displayGrade.score?this.displayGrade.score.toString():""},isOverride(){var e,t;return null!==(t=null===(e=this.displayGrade)||void 0===e?void 0:e.isOverride)&&void 0!==t&&t},isPastDueZero(){return null!=this.displayGrade&&!0===this.displayGrade.scoredByAutomaticZero}},Collection:{},Model:{unpack(e,t){return t=this.$super(e,t),e.$isCollection?t.forEach(t=>{n(t,e.permissions)}):n(t,e.permissions),t;function n(e,t){e.permissions=t}}}}})])},148869:function(e,t,n){"use strict";n.d(t,{$K:function(){return j},$c:function(){return H},$w:function(){return Y},A5:function(){return eq},AN:function(){return B},BI:function(){return tt},BT:function(){return eU},Bz:function(){return eK},C6:function(){return tc},CQ:function(){return eX},CS:function(){return i},Cd:function(){return e3},Cg:function(){return G},Cy:function(){return eV},Dy:function(){return ey},E6:function(){return eM},EJ:function(){return eO},Ei:function(){return E},H:function(){return tl},HB:function(){return ei},HT:function(){return e9},IL:function(){return p},Jz:function(){return N},Kk:function(){return ez},Ky:function(){return eN},L9:function(){return tp},LD:function(){return ta},LV:function(){return w},Lt:function(){return eC},Lv:function(){return eS},M:function(){return eJ},M9:function(){return M},NC:function(){return eo},Nj:function(){return T},O2:function(){return eB},O8:function(){return X},Oe:function(){return y},P7:function(){return ep},PF:function(){return eE},Q5:function(){return eh},QA:function(){return W},QG:function(){return J},QW:function(){return e2},Q_:function(){return eb},RE:function(){return eZ},RL:function(){return ex},SN:function(){return e5},SO:function(){return v},SR:function(){return e0},SX:function(){return em},Si:function(){return eA},Sp:function(){return es},Tk:function(){return tu},V1:function(){return x},VH:function(){return I},VI:function(){return k},W8:function(){return _},WC:function(){return ea},WF:function(){return e_},WU:function(){return g},Wi:function(){return U},XN:function(){return h},XT:function(){return C},Xk:function(){return K},Xr:function(){return eL},YJ:function(){return F},ZP:function(){return A},Zl:function(){return f},_:function(){return te},_K:function(){return tm},_S:function(){return ee},_n:function(){return ts},a2:function(){return ev},b5:function(){return tn},br:function(){return er},cg:function(){return m},cj:function(){return en},dF:function(){return et},dM:function(){return ej},dd:function(){return l},e5:function(){return ec},eE:function(){return c},f3:function(){return ef},fS:function(){return a},fT:function(){return e8},gg:function(){return eY},gl:function(){return Q},gw:function(){return eu},h:function(){return td},hV:function(){return eT},hl:function(){return e6},iH:function(){return D},iJ:function(){return eH},iT:function(){return eG},im:function(){return ed},j7:function(){return ti},jB:function(){return r},jh:function(){return eP},jp:function(){return S},kI:function(){return el},lU:function(){return ek},lb:function(){return eD},mG:function(){return eR},mH:function(){return q},nH:function(){return O},nM:function(){return u},nc:function(){return V},oP:function(){return R},ou:function(){return eg},p5:function(){return eQ},pV:function(){return e4},q6:function(){return ew},qq:function(){return eI},sL:function(){return to},se:function(){return tr},t6:function(){return P},u2:function(){return e$},uD:function(){return L},uI:function(){return Z},vp:function(){return o},vv:function(){return s},x2:function(){return eW},x9:function(){return z},xI:function(){return e1},xO:function(){return e7},xR:function(){return th},y1:function(){return eF},yB:function(){return $},yu:function(){return d},zU:function(){return b}});let i="AnalyticsEventModel",s="AnalyticsForLearnModel",r="AnnotationsModel",o="AnnouncementModel",a="AllyModel",l="AssessmentDetail",c="AssessmentExceptionModel",d="Question",u="QuestionAttempt",p="BlockedUserModel",m="BrandModel",h="CalendarModel",g="CalendarItemModel",f="CourseCalendarsModel",b="CourseCalendarItemModel",v="CourseDueDateCalendarItemModel",y="DueDateCalendarItemModel",C="InstitutionCalendarItemModel",S="OfficeHoursModel",E="PersonalCalendarItemModel",I="CourseModel",w="CourseCollab",A="CourseCollabUltra",k="CourseCollabSession",x="CourseContentModel",T="CourseEngagementParticipant",P="CourseEngagementUserStateModel",D="CourseExportModel",G="CourseConditionalReleaseModel",R="ConversionTaskModel",B="ScheduledTaskModel",L="CourseForumModel",N="CourseForumCountModel",O="CourseMessageModel",M="CourseMessageFolderModel",$="CourseConversationModel",H="CourseConversationMessageModel",F="CourseMembershipModel",U="CourseMembershipInviteModel",V="CoursePreferenceModel",_="CourseRole",q="CourseScheduleModel",z="CourseGroupModel",W="CourseGroupAssociationModel",j="CourseIndicatorModel",Z="ExternalCourse",K="CourseEntitlementModel",X="CloudDriveModel",Y="CloudDriveContent",Q="CloudDriveDownloadMessage",J="CloudDriveTask",ee="CloudDriveMeModel",et="CollabUltraPing",en="EntitlementModel",ei="FileModel",es="GradeAttemptModel",er="GradeGroupAttemptModel",eo="GradeCategoryModel",ea="GradeColumnModel",el="ColumnSummaryModel",ec="GradeDetailModel",ed="GradeSchemaModel",eu="GradeBulkViewModel",ep="GradebookModel",em="GradebookSettingsModel",eh="GradeNotationModel",eg="GradedQuestionAttemptModel",ef="GradedOriginalityModel",eb="InstitutionRoleModel",ev="LanguagesModel",ey="LtiDomainConfigModel",eC="LtiSettingsModel",eS="LtiPlacementModel",eE="MyPreferenceModel",eI="NotificationModel",ew="NotificationGeneralSettingsModel",eA="NotificationSettingModel",ek="NotificationSettingsContainerModel",ex="PartnerModel",eT="PartnerStatusModel",eP="PartnerCourseModel",eD="PartnerLinkedCourseModel",eG="PartnerContentIdModel",eR="PartnerGradeModel",eB="PartnerSettingsModel",eL="PartnerToolModel",eN="PredictCourseModel",eO="PredictCourseSearch",eM="PredictFavoriteModel",e$="PredictPreferences",eH="PredictInstitutionPreference",eF="PredictSettingsModel",eU="PredictSystemSettingsModel",eV="PredictDynamicOptionModel",e_="PredictStudentModel",eq="PredictPermissionsModel",ez="PredictFtueModel",eW="PredictNoteModel",ej="PredictCustomFieldSettingsModel",eZ="RiskBucketDistributionModel",eK="PrivacyPolicyModel",eX="ProctoringServiceModel",eY="Rubric",eQ="ScormReportItemModel",eJ="StreamModel",e0="SystemInfoModel",e1="SystemPreferenceModel",e2="StudentPreviewModel",e3="TargetedNotificationModel",e9="TelemetryActivityVsGradeModel",e4="TelemetryContentActivityInDetailModel",e7="TelemetryCourseActivityModel",e5="TelemetryCourseGradesModel",e6="TelemetryCourseNotificationsModel",e8="TelemetryDiscussionActivityModel",te="TelemetryDiscussionXrayModel",tt="TelemetryMultimediaActivityInDetailModel",tn="TelemetryMultimediaStatisticsModel",ti="TelemetryNotificationsModel",ts="TelemetryNotificationUsersModel",tr="TelemetryStudentActivityModel",to="TelemetryStudentGradesModel",ta="TelemetrySufficientDataModel",tl="TermModel",tc="ThemeModel",td="ToolAvailabilityModel",tu="ToolsModel",tp="TrialSupportTicketsModel",tm="UploadingFile",th="UserModel"},486502:function(e,t,n){"use strict";n(407537),n(144152);var i=n(464027),s=n(512666),r=n(64314);let o=i.module("ultra.models",["restmod","angular-data.DSCacheFactory",s.e1,r.e1]);t.Z=o},362368:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},jj:function(){return r}}),n(407537);var i,s,r,o,a,l,c=n(18447),d=n(148869),u=n(486502),p=n(512666);(o=i||(i={})).Digest="D",o.Immediate="I",o.None="N",(a=s||(s={})).Enabled="A",a.Disabled="N",(l=r||(r={})).Everyone="E",l.Instructor="I";let m=d.q6;u.Z.factory(m,["restmod",p.xQ,e=>e.model().mix({$url:()=>c.default.apiBasePath+"/v1/notification/settings/generalSettings/course"})])},344429:function(e,t,n){"use strict";n.d(t,{H:function(){return o}}),n(407537);var i=n(18447),s=n(148869),r=n(486502);let o=s.mG;r.Z.factory(o,["restmod",e=>{let t=i.default.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{delete(e,t){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e+"/linkRefId/"+t},function(e){}).$asPromise()}}}})}])},383508:function(e,t,n){"use strict";n.d(t,{F:function(){return a},H:function(){return o}}),n(407537);var i=n(148869),s=n(486502),r=n(512666);let o=i.gg;function a(e){e.columnHeaders&&e.columnHeaders.length>0&&e.columnHeaders.sort((e,t)=>e.position-t.position),e.rows&&e.rows.length>0&&(e.rows.sort((e,t)=>e.position-t.position),e.rows.forEach(e=>{e.cells&&e.cells.length>0&&e.cells.sort((e,t)=>e.position-t.position)}))}function l(e){e.rows&&e.rows.length>0&&e.rows.forEach(t=>{t.isCurrentUserEligibleToAlignGoals=function(){return!0===e.permissions.edit&&!e.readOnly},t.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+t.id},t.getContentTitleForGoalAlignment=()=>t.header})}s.Z.factory(o,["restmod",r.xQ,(e,t)=>e.model().mix({$extend:{Record:{canDelete(){return this.permissions&&this.permissions.delete},isCurrentUserEligibleToAlignGoals(){return this.permissions&&!0===this.permissions.edit},getContentIdForGoalAlignment(){return"blackboard.plugin.rubric.api.core.data.Rubric;"+this.id},getContentTitleForGoalAlignment(){return this.title},saveAlignedGoals(e,t){let n;return t&&(n=t.map(e=>({goalId:e.id,isVisibleToStudent:!0,goal:e}))),e&&(this.rows=this.rows.map(t=>(t.id===e&&(t.alignedGoals=n),t))),this.$send({method:"PATCH",url:this.$url(),data:{rows:this.rows}}).$then(()=>{this.$getPreviousVersion()&&(this.$getPreviousVersion().rows=this.rows)})}}},$hooks:{"after-request":function(e){e&&e.data&&(e.data.rows&&e.data.columnHeaders?(a(e.data),l(e.data)):e.data.results&&e.data.results.length>0&&e.data.results.forEach(e=>{e.rows&&e.columnHeaders&&(a(e),l(e))}))},"before-save":function(e){e.data.columnHeaders&&e.data.columnHeaders.forEach((e,t)=>{e.position=t}),e.data.rows&&e.data.rows.forEach((e,t)=>{e.position=t,e.cells.forEach((e,t)=>{e.position=t})})}}})])},43223:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},Uf:function(){return p}}),n(407537);var i=n(276635),s=n(464027),r=n(18447),o=n(486502),a=n(148869),l=n(512666),c=n(451251),d=n(562060),u=n(408027);function p(e,t){if(!e&&!t)return 0;if(e&&!t)return -1;if(!e&&t)return 1;if(e&&t){if(e.familyName&&!t.familyName)return -1;if(!e.familyName&&t.familyName)return 1;if((e.familyName||t.familyName)&&e.familyName!==t.familyName){if(e.familyName&&t.familyName)return e.familyName.localeCompare(t.familyName)}else{if(!e.givenName&&!t.givenName)return 0;if(e.givenName&&!t.givenName)return -1;if(!e.givenName&&t.givenName)return 1;if((e.givenName||t.givenName)&&e.givenName!==t.givenName){if(e.givenName&&t.givenName)return e.givenName.localeCompare(t.givenName)}else{if(e.userName&&!t.userName)return -1;if(!e.userName&&t.userName)return 1;if(!e.userName&&!t.userName)return 0;if(e.userName&&t.userName)return e.userName.localeCompare(t.userName)}}}return 0}let m=a.xR,h=r.default.apiBasePath+"/v1/users";o.Z.factory(m,["$http","restmod","$q",l.xQ,(e,t,n,r)=>{let o=t.model(h).mix({calendarItems:{hasMany:a.Ei},memberships:{hasMany:a.YJ,hooks:{"before-fetch-many":function(t){t.params=t.params||{},i.isUndefined(t.params.includeCount)&&(t.params.includeCount=!0);let n=t.params.limit,r=t.params.offset,o=(t,i,a)=>e.get(t,{params:i}).then(e=>{if(!e||200!==e.status||!e.data||!e.data.results||!e.data.paging)return e;a=a||[];let i=e.data.results,l=e.data.paging;a=a.concat(i);let c=a.length>=n||i.length<l.limit;if(!c){let i=s.extend(s.copy(e.config.params),{offset:(r||0)+a.length});return a.length<n&&(i.limit=n-a.length),delete i.includeCount,o(t,i,a)}return e.data.results=a,e.data.paging.limit=n,e.data.paging.offset=r,e});t.cache={get:()=>o(t.url,t.params)}}}},blocks:{hasMany:a.IL},birthDate:{encode:e=>new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)),decode:e=>{let t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0,0)}},isGuest(){return Array.isArray(this.systemRoles)&&this.systemRoles[0]===u.LJK.Guest},isAnonymousStudent(){return this.ui&&this.ui.anonymousStudent},isInstructor(){return this.memberships.some(e=>e.isActAsInstructorMembership())},isStudent(){return this.memberships.some(e=>e.isStudentMembership())},getInitials(){if(this.givenName&&this.familyName&&!c.bj(this.givenName)&&!c.bj(this.familyName)&&!c.DR(this.givenName)&&!c.DR(this.familyName))return(""+this.givenName.charAt(0)+this.familyName.charAt(0)).toLowerCase()},$extend:{Collection:{batchGetCollection(e){let t=n.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},e=>{t.resolve(e.data)},e=>{t.reject(e)}),t.promise}}}});return o.getUserConfiguration=function(){let e=n.defer();return this.$collection().$send({method:"GET",url:this.$url()+"/fieldsConfiguration",params:{visibleOnly:!0,[d.n]:Number.MAX_VALUE}},t=>{e.resolve(t.data)},t=>{e.reject(t)}),e.promise},o.mixinUsers=r.getDataMixin((e,t)=>o.findMany(e,t,[404]),"userId","user"),o.getAnonymousStudent=e=>o.$build({id:e,familyName:"",givenName:"",ui:{anonymousStudent:!0,anonymousStudentId:e}}),o}])},512666:function(e,t,n){"use strict";let i;n.d(t,{GH:function(){return m},Id:function(){return v},SY:function(){return b},e1:function(){return h},xQ:function(){return g},yA:function(){return f}}),n(407537),n(9576),n(578352);var s=n(625506),r=n(464027),o=n(276635),a=n(592281),l=n(619930),c=n(834266),d=n(64314),u=n(822658),p=n(759485);let m=e=>e,h="ultra.model.utilities",g="ultra.model.utilities.Utilities";function f(e,t){return null!=e?e:t}function b(e,t){if(e.$isCollection){let n=e.$response.config;return"PUT"===n.method&&Array.isArray(t)?t.map(e=>e.statusCode>=200&&e.statusCode<300?r.fromJson(e.body):e.body):(e.paging=t&&t.paging,e.permissions=t&&t.permissions,t&&t.results)}return t}class v{static isValid(e){return!o.isEmpty(e)&&/^_\d+_\d+$/.test(e)}}r.module(h,["restmod",c.e1,d.e1,l.e1]).factory(g,["$http","$q",(e,t)=>{let n={getDataMixin:(e,n,i)=>(s,r)=>{r=r||{};let o=r.path||"",a=r.overrideIdKey,l=r.params;return t.when(s).then(s=>{let c=t.defer();if(null==s||0===s.length)return c.resolve(s),c.promise;let d={};s.forEach(e=>{let t=(o+"."+(a||n)).split(".").reduce((e,t)=>t?e&&e[t]:e,e);if(t){let n=d[t]=d[t]||[];n.push(e)}});let u=Object.keys(d);return e(u,l).$asPromise().then(e=>{e.forEach((e,t)=>{d[u[t]].forEach(t=>{!function(e,t,n){let i=t.split(".");for(let t=0;t<i.length-1;t++)i[t]&&(e=e&&e[i[t]]);e&&(e[i[i.length-1]]=n)}(t,o+"."+(r.overrideResultKey||i),e)})}),c.resolve(s)}),c.promise})},createHooksToFetchParent:function(){function n(n,i){n.cache={get:()=>t.all([e(o.omit(n,"cache")),i.$resolve().$asPromise()]).then(([e])=>e)}}let i={"before-fetch-many":function(e){let t=this.$scope.$scope;n(e,t)},"before-fetch":function(e){let t=this.$scope.$scope.$scope;n(e,t)}};return function(e){return{"after-fetch-many":function(){this.forEach(t=>t[e]=this.$scope.$scope)},"after-fetch":function(){this[e]=this.$scope.$scope.$scope},...i}}}()};return n}]).factory("DateSerializer",()=>({encode:e=>a.Z.parseDateToISOString(e),decode:e=>a.Z.parseStringToDate(e)})).filter("localDate",()=>e=>a.Z.convertToLocalDate(e)).factory("BbRestmodFindMany",["restmod","$q",d.HV,"restmod.Preload",(e,t,n)=>e.mixin({$extend:{"Scope.canCreate":function(){return this.permissions&&this.permissions.create},"Scope.canEdit":function(){return this.permissions&&this.permissions.edit},"Scope.canDelete":function(){return this.permissions&&this.permissions.delete},Scope:{findMany(e,i,s){let o=this.$collection();return o.$always(()=>n.performBatch(n=>t.all(e.map(e=>{let t=this.$new(e).$fetch(r.extend({[d.aA]:n},i));return(s||[]).length>0?t.$allow(s).$asPromise():t.$asPromise()}))).then(e=>{e.forEach(e=>o.push(e))}))}}},$hooks:{"before-find-many":function(e){e.method="PUT",e.data=(e.params&&e.params.ids||[]).map(t=>{let n=r.copy(e.params);delete n.ids;let i=n&&"?"+s.param(n)||"";return{method:"GET",relativeUrl:t+i}}),e.params&&delete e.params.ids}}})]).factory("BbApiStyle",["restmod",e=>e.mixin(function(){this.setProperty("style","BB").setProperty("primaryKey","id")})]).factory("BbEncodeUrl",["restmod","inflector",(e,t)=>e.mixin({$extend:{Model:{encodeUrlName(e){return t.camelize(e)}}}})]).factory("BbUi",["restmod",e=>e.mixin({ui:{mask:!0,init:()=>({})}})]).factory("BbWithParams",["restmod",e=>e.mixin({$extend:{Record:{withParams(e,t){let n=function(i){i.params||(i.params={}),Object.keys(e).forEach(n=>{t?i.params[n]=t(i.params[n],e[n],n):i.params[n]=e[n]}),this.$off("before-request",n)};return this.$on("before-request",n),this}}}})]).factory("BbApiErrorHandlerInjector",["restmod","$injector","$window","$rootScope",c.HV,l.HV,(e,t,n,i,s,r)=>e.mixin({$hooks:{"after-request-error":function(){this.__bb_suppressErrorDialog||setTimeout(()=>{this.$then(()=>{},r.handle)})}}})]).factory("BbCheckStatusCode",["restmod",e=>e.mixin({$extend:{Resource:{isStatusCode(e){return this.$response&&this.$response.status&&this.$response.status===e}}}})]).factory("BbPermissions",["restmod","restmod.Preload",e=>e.mixin({$extend:{Record:{canCreate(){return this.permissions&&this.permissions.create},canEdit(){return this.permissions&&this.permissions.edit},canDelete(){return this.permissions&&this.permissions.delete}}}})]).factory("BbPermissionsMask",["restmod",e=>e.mixin({permissions:{mask:"CU"}})]).factory("$ExtendRecord",["RMUtils",function(e){let t=Symbol("$extendRecord");return{$extend:{"Model.$extendRecord":function(e){return this[t]=this[t]||[],this[t].push(e),this},"Record.$decode":function(n,i){let s=this.$super.apply(this,arguments);if(void 0===this.$type)throw Error("NOT_FOUND_$MODEL");return(this.$type[t]||[]).some(t=>{let i=t(s,n);return!!i&&(e.extendOverriden(s,i),!0)}),s}}}}]).factory("BbExpandParams",["restmod",e=>{let t=function(e){return!!o.isString(e)&&""!==e.trim()},n=function(e){return Array.isArray(e)?e.filter(t):o.isString(e)?e.split(",").filter(t):[]},i=function(e){let t=e.config&&e.config.params&&e.config.params.expand,i=n(t);return new Set(i)},s=function(e,t=new Set){let i=n(e);return i.length<=0||i.every(e=>t.has(e))},r=Symbol("$expand_params"),a=function(e){let t=e&&e.expand||"",n=this[r];return s(t,n)?this.$resolve():this.$fetch(e)};return e.mixin({$hooks:{"after-request":function(e){this[r]=i(e)}},$extend:{"Record.$fetchIfNotExpanded":a,"Collection.$fetchIfNotExpanded":a}})}]).factory("BbExcludeCourseActivity",["restmod","$injector",(e,t)=>e.mixin({$hooks:{"before-request":function(e){let n=t.get(u.HV),i=e.url,s="GET"===e.method,r=!!n.courseId,o=/\/courses\/_\d+_1(\/gradebook\/(schemas|grades|columns|categories|summaries|attempts)|\/memberships|\/messageFolders|\/attendanceRecords|\/conversations|\/contents\/_\d)/.test(i);!r&&s&&o&&(e.url=(0,p.Ou)(i,"isExcludedFromCourseUserActivity","true"))}}})]).config(["restmodProvider",e=>{function t(e){e=e||[];let t=this.$promise=this.$promise||i.when(this),n=i.defer();return this.$promise=n.promise,t.then(e=>{n.resolve(e)},t=>{let i=e.some(e=>{let n=[0];if("number"==typeof e)n[0]=e;else if("string"==typeof e){let t=e.split("-");n[0]=parseInt(t[0],10),n[1]=parseInt(t[1]||t[0],10)}return n[1]=n[1]||n[0],t&&t.$response.status>=n[0]&&t.$response.status<=n[1]});i?n.resolve(t):n.reject(t)}),this}function n(){if(this.__bb_suppressErrorDialog=!0,!this.$promise)throw Error("suppressErrorDialog must be called after performing an action, such as $fetch or $resolve");return this.$finally(()=>{this.__bb_suppressErrorDialog=!1})}function s(e,t){let n=Object.create(null);return Object.keys(e).forEach(i=>{if("$"===i[0])return;let s=e[i];r.equals(s,t[i])||(n[i]=t[i])}),Object.keys(t).forEach(i=>{if("$"===i[0]||n[i])return;let s=t[i];r.equals(s,e[i])||(n[i]=s)}),function e(t,n){let i;let s=Object.keys(t),o=[];for(let a=0;a<s.length;a++)i=n?n+"."+s[a]:s[a],o.push(i),"$"!==s[a].charAt(0)&&t[s[a]]&&"object"==typeof t[s[a]]&&!r.isArray(t[s[a]])&&(o=o.concat(e(t[s[a]],i)));return o}(n,"")}e.rebase("BbRestmodFindMany"),e.rebase("BbPermissions"),e.rebase("BbPermissionsMask"),e.rebase("BbApiStyle"),e.rebase("BbApiErrorHandlerInjector"),e.rebase("BbEncodeUrl"),e.rebase("BbWithParams"),e.rebase("BbCheckStatusCode"),e.rebase("BbUi"),e.rebase("restmod.Preload"),e.rebase("restmod.FindMany"),e.rebase("$ExtendRecord"),e.rebase("BbExpandParams"),e.rebase("BbExcludeCourseActivity"),e.rebase({$extend:{"Model.$mixHook":function(e,t,n){let i=this,s="$mixHook_"+e,r=s+"_hook";i[s]=i[s]||[],i[s].push(t),i[r]=i[r]||(0,o.once)(function(){i.mix({$hooks:{[e](...e){(i[s]||[]).forEach(t=>t&&t.apply(this,e))}}})}),i[r]();let a=(0,o.once)(()=>{(0,o.remove)(i[s],e=>e===t)});return n&&n.$on("$destroy",a),a}}}),e.rebase({"Model.unpack":b,"Record.$allow":t,"Collection.$allow":t,"Record.$suppressErrorDialog":n,"Collection.$suppressErrorDialog":n,"Record.$revert":function(e){let t=e||this.$_ultra_previous_version,n=s(t,this.$encode("U")),i=this.constructor.$buildRaw(t);return n.forEach(e=>{this[e]=i[e]}),this},"Record.$snapshot":function(){return this.$_ultra_previous_version=this.$encode("U"),this.$_ultra_previous_version},"Record.$getChangedKeys":function(){return s(this.$_ultra_previous_version||{},this.$encode("U"))},"Record.$getPreviousVersion":function(){return this.$_ultra_previous_version},"Record.$patch":function(e){let t=s(this.$_ultra_previous_version||{},this.$encode("U"));if(e&&e.length>0&&e.forEach(e=>{-1===t.indexOf(e)&&t.push(e)}),t.length>0){this.$_ultra_patchHolder={data:this.$wrap("U"),changedKeys:t};let e=function(t){let n=this.$_ultra_patchHolder.changedKeys,i=this.$_ultra_patchHolder.data;n.forEach(e=>{t.data[e]=i[e]}),this.$off("before-update",e)};this.$on("before-update",e),this.$save(t)}else{let e={method:"PATCH",url:this.$url("update"),data:{}};this.$dispatch("before-request",[e])}return this},$hooks:{"after-feed":function(){this.$snapshot()}}}),e.rebase({$extend:{Collection:["slice","filter","concat"].reduce((e,t)=>(e["$"+t]=function(...e){let n=this.$collection();return n.push.apply(n,this[t].apply(this,e)),n},e),{})}})}]).run(["$q",e=>{i=e}])},612270:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c},t6:function(){return p}}),n(3744);var i=n(464027),s=n(625506),r=n(887545),o=n(606592),a=n(336),l=n(785268);let c="ultra.services.accessibility",d="accessibility";class u{applyAccessibilityHandlingForPanel(e){this._storeFocusedElement(),this._setActivePanel(e),this._applyTabCapture(),this.ariaHideBackgroundElements()}revertAccessibilityHandling(){this.ariaShowBackgroundElements(),this._revertTabCapture(this.currentPanelInfo),this._restoreActivePanel(),this._restoreFocusedElement()}_setActivePanel(e){this.activePanel=null,this.activePanel=e,this.currentPanelInfo={panelElement:e,overlayDisabled:e.hasClass("overlay-disabled"),panelFocusHandlingDisabled:e.hasClass("focus-handling-disabled")},this.panelInfoStack.push(this.currentPanelInfo),s(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()}_restoreActivePanel(){this.panelInfoStack.length<2&&(this._setActivePanel(s(document.body)),this._setActivePanel(s(document.body)));let e=this.panelInfoStack.pop();e.panelElement=null,this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=null,this.activePanel=this.currentPanelInfo.panelElement,s(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()}ariaHideBackgroundElements(e=!0){let t=s('.hide-in-background[aria-hidden!="true"]');t.attr("aria-hidden","true"),this.backgroundElementsStack.push(t),e&&this.activePanel.attr("aria-hidden","false")}ariaShowBackgroundElements(){if(this.backgroundElementsStack.length<1)throw s(".hide-in-background").attr("aria-hidden","false"),Error("Tried to set aria-hidden=false for background elements, but there were no background elements in the stack.");this.backgroundElementsStack.pop().attr("aria-hidden","false")}setFocusOverrideOnPanel(e,t){if(!t)throw Error("A panel selector is required to override focus on a panel");for(let n=this.panelInfoStack.length-1;n>=0;n--)if(this.panelInfoStack[n].panelElement.find(t).addBack(t).length){this.panelInfoStack[n].panelElement.data(this.FOCUS_SELECTOR_OVERRIDE,e);break}}_storeFocusedElement(){let e=s(document.activeElement);!p.isLastNavigationByKeyboard&&p.lastClickedElement&&p.lastClickedElement.length&&(e=p.lastClickedElement),this.activePanel.data(this.FOCUSED_ELEMENT,e)}_restoreFocusedElement(){if(this.isFocusDelayed=!1,this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)){let e=this.activePanel.find(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).addBack(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).first();e.length&&this.activePanel.data(this.FOCUSED_ELEMENT,e),this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE,"")}let e=this.activePanel.data(this.FOCUSED_ELEMENT);e&&0!==e.length&&e.focus(),e&&e.length&&s(document.activeElement).is(e)||this.focusCorrectElementOnPanel(this.activePanel),this.activePanel.removeData(this.FOCUSED_ELEMENT)}_applyTabCapture(){this.activePanel.on("keydown",e=>{if(e.keyCode===o.Mf&&!this.currentPanelInfo.tabCalled){let e=this.activePanel.data("axMutationObserver");e||((e=new MutationObserver(()=>{this.currentPanelInfo.tabCalled=!1})).observe(this.activePanel[0],{childList:!0,attributes:!0,subtree:!0}),this.activePanel.data("axMutationObserver",e));let t=s(this.activePanel).find("*").addBack();this._conditionallyUpdateSkipLinkFocus(),s(":tabbable, .ax-tabbable").not(".bb-ax-background-tabindex").add(s('a[tabindex!="-1"]').filter(function(){return 0===s(this).height()&&0===s(this).width()})).filter(function(){return 0===s(this).closest(".focus-handling-disabled").size()}).add(s('div.editor-element[tabindex!="-1"]')).not(t).not(s(".pagehelp-directive-link")).add(s('div.panel-wrap[tabindex!="-1"]')).each(function(){s(this).data("originalTabindex",this.getAttribute("tabindex"))}).attr("tabindex","-1").addClass("bb-ax-background-tabindex"),this.currentPanelInfo.tabCalled=!0}})}_revertTabCapture(e,t){let n=t||s(document);n.find(".bb-ax-background-tabindex").each(function(){let e=s(this);null==e.data("originalTabindex")?e.removeAttr("tabindex"):e.attr("tabindex",e.data("originalTabindex")),e.removeAttr("originalTabindex")}).removeClass("bb-ax-background-tabindex"),n.find("[data-ax-service-tab-capture-hack]").each(function(){let e=s(this);e.attr("tabindex",e.attr("data-ax-service-tab-capture-hack"))}),n.data("axMutationObserver")&&n.data("axMutationObserver").disconnect()}_revertTabCaptureForActivePanel(){this._revertTabCapture(this.currentPanelInfo)}_conditionallyUpdateSkipLinkFocus(){this.currentPanelInfo.overlayDisabled&&!this.currentPanelInfo.panelFocusHandlingDisabled&&this.panelInfoStack.length>1&&this._revertTabCapture(this.panelInfoStack[this.panelInfoStack.length-2],this.activePanel)}constructor(e){this.$rootScope=e,this.FOCUSED_ELEMENT="focusedElement",this.FOCUS_SELECTOR_OVERRIDE="focusSelectorOverride",this.isFocusDelayed=!1,this.panelInfoStack=[{panelElement:s(document.body)}],this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=this.currentPanelInfo.panelElement,this.isFocusedElementInFocusTrap=()=>{let e=s(document.activeElement).closest(".ms-FocusTrapZone");return!!e.length},this.focusCorrectElementOnPanel=function(e=this.activePanel){if(this.isFocusDelayed=!1,(0,l.I)())return;let t=s(".ms-Callout");if(t&&t.length)return;let n=s(".ms-Modal");if(n&&n.length)return;let i=s(".datepicker-dropdown");if(i&&i.length)return;let o=s('div[class*="MuiDialogcontainer"]');if(o&&o.length)return;let a=s('div[data-analytics-id="course.outline.oneDriveFilePickerLTIModal"]');if(null==a?void 0:a.length)return;let c=s('div[class*="MuiPopoverroot"]');if(null==c?void 0:c.length)return;let d=s('div[class*="MuiDrawerroot"]');if((null==d?void 0:d.length)||this.isFocusedElementInFocusTrap())return;let u=e.find("[bb-focus]");if(u&&u.length){let e=u.first();if(e.trigger("focus"),this.elementHasFocus(e))return}let p=e.find("h1").filter(":visible");if(p&&p.length){let e=p.first();if(r.Zl(e),this.elementHasFocus(e))return}let m=e.find(":tabbable:not(.bb-close, .non-first-focus):first");m&&m.length&&(m.trigger("focus"),this.elementHasFocus(m))||r.Zl(e)},this.elementHasFocus=e=>e.is(s(document.activeElement)),this.isElementInActivePanel=e=>e.hasClass("pagehelp-directive-link")||!!e.closest(".focus-handling-disabled").size()||this.isElementInPanel(this.activePanel,e),this.isElementInPanel=(e,t)=>e.is(t)||s.contains(e[0],s(t)[0]),this.applyFocusinHandler=()=>{s("body").off("focusin.axService"),s("body").on("focusin.axService",e=>{let t=s(e.target);this.isFocusDelayed||this.isElementInActivePanel(t)||this.focusCorrectElementOnPanel(this.activePanel)})},this.removeFocusinHandler=()=>{s("body").off("focusin.axService")},this.backgroundElementsStack=[],a.B(),this.applyFocusinHandler();let t=e=>{this.isElementInActivePanel(s(e.target))||this.removeFocusinHandler()};s("body").on("mousedown",t),e.$on("$destroy",()=>{s("body").off("mousedown",t)})}}u.isLastNavigationByKeyboard=!1,u.$inject=["$rootScope"];class p extends u{}i.module(c,[]).service(d,u)},460574:function(e,t,n){"use strict";n.d(t,{$_:function(){return u},Zh:function(){return d},e1:function(){return l},HV:function(){return c}});var i=n(464027),s=n(168132),r=n(456141),o=n(16379);class a{set groups(e){if(this.dueDateGroups=[],this.timeLimitGroups=[],null==e){this._groups=[];return}this._groups=e.filter(e=>(e.accommodation=o.sE.fromTypes(e.dueDateExceptionType,e.timeLimitExceptionType),e.accommodation.dueDate.hasAccommodation&&this.dueDateGroups.push(e),e.accommodation.timeLimit.hasAccommodation&&this.timeLimitGroups.push(e),e.accommodation.hasAccommodation))}get groups(){return this._groups}sortGroups(e){this._groups.sort(e),this.dueDateGroups.sort(e),this.timeLimitGroups.sort(e)}refreshGroups(){null!=this.content&&(this.groups=this.content.assignedGroups)}set memberships(e){if(this.dueDateMembers=[],this.timeLimitMembers=[],null==e){this._memberships=[];return}this._memberships=e.filter(e=>{let t=e.accommodation();return t.dueDate.hasAccommodation&&this.dueDateMembers.push(e),t.timeLimit.hasAccommodation&&this.timeLimitMembers.push(e),t.hasAccommodation})}get memberships(){return this._memberships}get nGroups(){return this.groups.length}get nGroupsDueDate(){return this.groups.filter(e=>e.accommodation.dueDate.hasAccommodation).length}get nGroupsTimeLimit(){return this.groups.filter(e=>e.accommodation.timeLimit.hasAccommodation).length}get nUsers(){return this.counts.withAccommodationCount}get nUsersDueDate(){return this.counts.dueDateAccommodationCount}get nUsersTimeLimit(){return this.counts.timeLimitAccommodationCount}get isGroupContent(){if(null==this.content)return!1;let e=this.content.assignedGroups&&0!==this.content.assignedGroups.length;return this.content.isGroupContent||e||0!==this.groups.length}get nInstances(){return this.isGroupContent?this.nGroups:this.nUsers}get nInstancesDueDate(){return this.isGroupContent?this.nGroupsDueDate:this.nUsersDueDate}get nInstancesTimeLimit(){return this.isGroupContent?this.nGroupsTimeLimit:this.nUsersTimeLimit}get nInstancesShown(){if(this.isGroupContent){if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nGroups;if(this.showDueDateAccommodation)return this.nGroupsDueDate;if(this.showTimeLimitAccommodation)return this.nGroupsTimeLimit}else{if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nUsers;if(this.showDueDateAccommodation)return this.nUsersDueDate;if(this.showTimeLimitAccommodation)return this.nUsersTimeLimit}}get showAccommodation(){return this.showDueDateAccommodation||this.showTimeLimitAccommodation}get showDueDateAccommodation(){if(null==this.content)return!1;let e=this.content.hasDueDate()&&this.content.getDueDate();return e&&this.hasDueDateAccommodation}get showTimeLimitAccommodation(){return null!=this.content&&this.content.getTimedTestDetail().hasTimeLimit&&this.hasTimeLimitAccommodation}get hasAccommodation(){return this.hasDueDateAccommodation||this.hasTimeLimitAccommodation}get hasDueDateAccommodation(){return this.nInstancesDueDate>0}get hasTimeLimitAccommodation(){return this.nInstancesTimeLimit>0}constructor(e){this.content=e,this._groups=[],this._memberships=[],this.counts={count:0,withAccommodationCount:0,dueDateAccommodationCount:0,timeLimitAccommodationCount:0,maxLimit:0},this.refreshGroups()}}let l="ultra.services.accommodation.Service",c="accommodationService",d=["id","isAvailable","role","user.*","userId","courseRole","dueDateExceptionType","timeLimitExceptionType","permissions","user.rowStatus"],u=[...d,"displayOrder"],p=["alignedGoals","assignedGroups","isGroupContent"];class m{createContentAccommodation(e){let t=new a(e);return null!=e&&e.id&&(e.assignedGroups&&!this._invalidCache[e.id]?t.refreshGroups():this.fetchGroupsOrCounts(t)),t}getContentAccommodation(e){return null==e?this.createContentAccommodation(e):((null==this._cache[e.id]||this._invalidCache[e.id])&&(this._cache[e.id]=this.createContentAccommodation(e),this._invalidCache[e.id]=!1),this._cache[e.id])}forceNewContentAccommodation(e){null!=e&&(this._invalidCache[e.id]=!0)}invalidateContentAccommodationOtherThan(e){null!=e&&Object.keys(this._cache).forEach(t=>{t!==e.id&&(this._invalidCache[t]=!0)})}refreshAccommodation(e){null!=e.content&&(e.isGroupContent?e.refreshGroups():this.fetchCount(e.content.courseId,e))}fetchGroupsOrCounts(e){if(null!=e.content){if(null!=e.content.isGroupContent&&!e.isGroupContent){this.fetchCount(e.content.courseId,e);return}e.content.$fetch({fields:p.join(","),expand:"selfEnrollmentGroups.group"}).$then(t=>{e.refreshGroups(),e.isGroupContent||this.fetchCount(t.courseId,e)})}}sortGroupsByTitle(e){e.sortGroups((e,t)=>e.groupTitle.localeCompare(t.groupTitle))}fetchCount(e,t){this.courseModel.$new(e).memberships.getDetailsCount().then(e=>{t.counts=e})}fetchMemberships(e,t){this.courseModel.$new(e).memberships.$refresh({fields:d.join(","),sort:"user.givenName"}).$then(e=>t.memberships=e)}constructor(e){this.courseModel=e,this._cache={},this._invalidCache={}}}m.$inject=[r.H],i.module(l,[s.e1]).service(c,class extends m{})},993795:function(e,t,n){"use strict";n.d(t,{HV:function(){return E},e1:function(){return S}});var i=n(276635),s=n(564470),r=n(822658),o=n(763674),a=n(805529),l=n(291146),c=n(18447),d=n(985536),u=n(168132),p=n(759485),m=n(211796),h=n(837545),g=n(852512),f=n(350383),b=n(319434),v=n(458733),y=n(429794);function C(e,t){return function(n,i){t(n,i,e)}}let S="ultra.service.ally",E="ally",I="privileged";class w{isAvailable(){return(0,h.h)(this.service.isAvailable())}isAllySupportedContentItem(e){return this.service.isAllySupportedContentItem(e)}getXythosIdFromContentItem(e){return this.service.getXythosIdFromContentItem(e)}update(e,t,n){this.service.update(e,t,n)}isAllyInstructor(){return this.service.isAllyInstructor()}constructor(e){this.service=e,this.key=g.fz.Ally}}class A{getContentById(e){let t=this.contextCourse.course,n=this.contentService.findRootNode(t,u.courseContent.e6.Root);return this.contentService.getContentInContentTree(n,t.courseId,e).then(e=>e.content)}downloadAlternativeFormat(e){window.open(e,"_blank","noopener")}updateReviewStateForLaunchedContent(e){(0,v.dZ)(e)}getAllySettings(){return this._allyConfig?this.$q.resolve(this._allyConfig):this.allyModel.getAllyConfig().then(e=>this._allyConfig=e)}getExpireMillisFromToken(e){return 1e3*d(e.authToken).exp}isAvailable(){return this.getAllySettings().then(e=>e.serviceAvailable)}getXythosIdFromContentFileUrl(e){let t=/(?:xid|_xy)-([^&]*)/.exec(e),n=t&&t[1];return n&&"_"!==n.substr(0,1)&&(n="_"+n),n}getXythosIdFromContentItem(e){let t=i.get(e,"contentDetail['resource/x-bb-file'].file.permanentUrl");if(t)return this.getXythosIdFromContentFileUrl(t)}isAllySupportedContentItem(e){return e.isFile()&&!e.isConditionalReleaseLocked()}disable(){this._allyConfig?this._allyConfig.serviceAvailable=!1:this._allyConfig={serviceAvailable:!1}}ensureAlly(){let e=this,t=this.$q.defer();return this.ally?t.resolve():this.getAllySettings().then(n=>{if(n.serviceAvailable){let i;let s=!1,r=(e,n)=>{s||(e?t.resolve():(this.disable(),n&&console.error(n),t.reject()),s=!0,this.$timeout.cancel(i))};i=this.$timeout(()=>{r(!1,"Ally initialization timed out.  Disabling Ally Service.")},c.default.allyInitializationTimeout||1e4),this.bbScriptLoader.getScript(n.javascriptUrl,{attributes:{"data-ally-loader":""},exports:"ally"}).then(t=>{e.ally=t;try{e.ally.ready(()=>{r(!0)})}catch(e){console.error(e),r(!1,"Ally initialization error.  Disabling Ally Service.")}}).catch(()=>{r(!1,"Failed to load ally.js.  Disabling Ally Service.")})}else t.resolve()}),t.promise}getRole(){return this.entitlementService.isEntitled(b.eo.ModifyContent)?I:"unprivileged"}isAllyInstructor(){return this.getRole()===I}destroyCurrentAllyInstance(){this.cachedTokensMap.clear();let e=this.$q.defer();return this._xythosIdToInstructorFeedbackUpdateCallbackMap.clear(),this.allyUI?this.allyUI.destroy().then(()=>{e.resolve()}):e.resolve(),e.promise}ensureAllyUI(e){if(this.allyLoadInProgressPromise)return this.allyLoadInProgressPromise;let t="string"==typeof e?e:this.bbLocalize.getLocale(e),n=this.$q.defer();return this.allyLoadInProgressPromise=n.promise,this.ensureAlly().then(()=>{this.getAllySettings().then(e=>{if(e.serviceAvailable&&(this.currentCourseId!==this.contextCourse.courseId||this.currentLocale!==t)){this.currentCourseId!==this.contextCourse.courseId&&(this._xythosIdToContentIdMap={}),this.currentCourseId=this.contextCourse.courseId,this.currentLocale=t;let i={alternativeformats:{callbacks:{closed(){},formatGenerated:e=>this.downloadAlternativeFormat(e.url),alternativeFormatAccessed:e=>{let t=e.contentId;return this.getContentById(t).then(e=>{this.updateReviewStateForLaunchedContent(e)})}}},client:{auth:this.getToken.bind(this),baseUrl:p.SV(e.ltiUrl),clientId:e.clientId},courseId:this.currentCourseId,locale:this.currentLocale,platformName:"learn",role:this.getRole(),instructorfeedback:{callbacks:{closed:()=>{this.allyUI.client.clearAllFromCache(),this.allyUI.update()},deleted:e=>void 0,replacedFile:(e,t)=>void 0,updated:e=>{this.instructorFeedbackUpdateCallback(e)},fixHtmlIssue:()=>void 0}}};c.default.features.devtools_allyMock&&(this.allyMock=this.ally.ui.$mock(this._mockCourses,void 0),i.client.jQuery=this.allyMock),this.destroyCurrentAllyInstance().then(()=>{this.allyUI=this.ally.ui(i),this.allyUI.autoUpdate({domWatch:c.default.allyAutoUpdateInterval||500}).then(()=>{this.allyLoadInProgressPromise=void 0,n.resolve()})})}else this.allyLoadInProgressPromise=void 0,n.resolve()})}).catch(()=>{this.allyLoadInProgressPromise=void 0,n.reject()}),this.allyLoadInProgressPromise}update(e,t,n){this.isAvailable().then(i=>{if(i){let i="string"==typeof e?e:this.bbLocalize.getLocale(e);this.ensureAllyUI(i).then(()=>{t&&n&&(this._xythosIdToContentIdMap[n]=t,this.allyUI.client.clearFileIdFromCache(n)),this.registerMockFileReference(n)})}})}registerMockFileReference(e){c.default.features.devtools_allyMock&&e&&(i.merge(this._mockCourses,{[this.currentCourseId]:{File:{[e]:{availableAlternativeFormats:["Tts","Epub","Translation","Braille","Html"],creator:null,decorative:null,description:"mock file",id:e,isVersioned:!1,libraryReference:null,name:"mockfile",producer:null,results:{},score:.75,size:12345,suggestions:{},type:"pdf"}},RichContent:{}}}),this.allyMock.set(this._mockCourses))}fileUploadEvent(){!this._clearCacheInterval&&this.isAllyInstructor()&&(this._clearCacheInterval=this.$interval(()=>{this.allyUI&&this.allyUI.client&&this.allyUI.client.clearAllFromCache()},c.default.allyClearCacheInterval||1e4,0,!1))}getIndexMapFromBbML(e){let t=new Map;if(!e)return t;let n=e.match(/(<a[^>]+)/gi)||[],i=0;return n.forEach(e=>{if(e.includes('data-bbfile="')){let n=e.match(/href="[^"]+xid-([0-9_]+)/)||[];n.length>=2&&("_"!==n[1].substr(0,1)&&(n[1]="_"+n[1]),t.set(n[1],i)),i++}}),t}instructorFeedbackUpdateCallback(e){let t=this._xythosIdToInstructorFeedbackUpdateCallbackMap.get(e.id);t&&t(e)}onUpdate(e,t,n){e===s.H1.InstructorFeedback&&this._xythosIdToInstructorFeedbackUpdateCallbackMap.set(t,n)}destroyListeners(e){this._xythosIdToInstructorFeedbackUpdateCallbackMap.delete(e)}getReactService(e){return{getXythosIdFromContentFileUrl:this.getXythosIdFromContentFileUrl.bind(this),update:(t,n)=>this.update(e,t,n),isAvailable:()=>(0,h.h)(this.isAvailable()),getIndexMapFromBbML:this.getIndexMapFromBbML.bind(this),onUpdate:this.onUpdate.bind(this),destroyListeners:this.destroyListeners.bind(this)}}constructor(e,t,n,i,s,r,o,a,l,c){this.$q=e,this.$timeout=t,this.$interval=n,this.allyModel=i,this.contextCourse=s,this.contextCourseMembership=r,this.bbLocalize=o,this.bbScriptLoader=a,this.entitlementService=l,this.contentService=c,this.cachedTokensMap=new Map,this._mockCourses={},this._xythosIdToContentIdMap={},this._xythosIdToInstructorFeedbackUpdateCallbackMap=new Map,this.getToken=e=>{let t=e?this._xythosIdToContentIdMap[e]:void 0;return this.cachedTokensMap.has(e)&&Date.now()<this.cachedTokensMap.get(e).exp?this.$q.resolve(this.cachedTokensMap.get(e).token):this.allyModel.getAllyToken(this.contextCourse.courseId,t).then(t=>{let n=this.getExpireMillisFromToken(t),i={bearer:t.authToken};return this.cachedTokensMap.set(e,{token:i,exp:n}),i})},(0,g.gM)(new w(this))}}A=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([C(0,(0,m.tB)("$q")),C(1,(0,m.tB)("$timeout")),C(2,(0,m.tB)("$interval")),C(3,(0,m.tB)(u._F.H)),C(4,(0,m.tB)(r.HV)),C(5,(0,m.tB)(o.HV)),C(6,(0,m.tB)(l.serviceName)),C(7,(0,m.tB)(a.HV)),C(8,(0,m.tB)(f.HV)),C(9,(0,m.tB)(y.HV))],A),angular.module(S,[r.e1,o.e1,l.moduleName,a.e1,f.e1,y.e1]).service(E,A)},873085:function(e,t,n){"use strict";n.d(t,{VL:function(){return i}});let i="ANALYTICS_HISTORY";t.ZP=new class{setStorage(e,t){return this.browserStorage=e,this.storageType=t,this.getHistoryFromStorage().then(e=>(e&&(this.analytics=e.concat(this.analytics),this.setMaxHistorySize(this.maxHistorySize)),e))}addHistory(e){this.analytics.push({action:e.action,analyticsId:e.analyticsId,screenDimension:e.screenDimension,timestamp:new Date().toUTCString()}),this.analytics.length>this.maxHistorySize&&this.analytics.shift(),this.browserStorage.saveToStorage(this.storageKey,this.analytics,this.storageType)}getHistoryFromStorage(){return this.historyRestoredPromise=Promise.resolve(this.browserStorage.getFromStorage(this.storageKey,this.storageType)),this.historyRestoredPromise}async getHistory(){return await this.historyRestoredPromise,this.analytics}clearHistory(){this.historyRestoredPromise=null,this.analytics=[],this.browserStorage.saveToStorage(this.storageKey,this.analytics,this.storageType)}setMaxHistorySize(e){e>0&&Number.isInteger(e)&&(this.maxHistorySize=e,this.analytics=this.analytics.slice(-this.maxHistorySize))}constructor(){this.analytics=[],this.maxHistorySize=30,this.storageKey=i}}},717716:function(e,t,n){"use strict";function i(e){var t;return!!(null==e?void 0:null===(t=e.closest)||void 0===t?void 0:t.call(e,"[data-no-angulartics-click]"))}function s(e){if(e&&e.length)return e.closest("[bb-click-to-invoke-child]").length>0?e.attr("analytics-id"):e.attr("analytics-id")||e.find("[analytics-id]").attr("analytics-id")}function r(e){if(!e||!e.length)return;let t=e.closest("[analytics-id]").attr("analytics-id");return t||(e.attr("[bb-click-to-invoke-child]")||e.closest("[bb-click-to-invoke-child]").length>0?e.find("[analytics-id]").attr("analytics-id")||e.closest("[bb-click-to-invoke-child]").find("[analytics-id]").attr("analytics-id"):void 0)}n.d(t,{$o:function(){return function e(t){if(t&&t.length)return t.attr("analytics-context")||e(t.parent())}},CY:function(){return function e(t){if(t&&t.length){let n=t.prop("tagName")||"";switch(n.toLowerCase()){case"a":case"input":case"button":return s(t);default:return e(t.parent())}}}},IK:function(){return s},X_:function(){return function e(t){if(t&&t.length){let n=t.hasClass("bb-editor");return n||t.is("[analytics-on]")||e(t.parent())}return!1}},c1:function(){return i},li:function(){return r}})},562060:function(e,t,n){"use strict";n.d(t,{e:function(){return o},n:function(){return a}});var i=n(464027),s=n(276635),r=n(18447);let o="ultra.components.services.angular.http.ease",a="shelfLifeInEase";class l{enqueue(e){e.shelfLifeInEase=(e.params||{})[a]||this.delay,(e.params||{})[a]=void 0;let t=this.$q.defer(),n=new Date().getTime(),i=s.some(this._queue,(i,s)=>{let r;return!!i&&(i.completedAt&&n-i.completedAt>i.shelfLifeInEase?(this._queue[s]=void 0,!1):((i.originalUrl||i.url)===(e.originalUrl||e.url)&&(r=this.isServableBy(i,e)),!!r&&(i.httpEaseResponseQ.promise.then(e=>{this.$q.when(r(e)).then(e=>{t.resolve(e)})}),!0)))});if(!i){let n="x"+this._queueSeq++;e.originalUrl=e.url,e.httpEaseResponseQ=this.$q.defer(),e.httpEaseResponseQ.promise.finally(()=>{e.completedAt=new Date().getTime()}),this._queue[n]=e,t.resolve()}return t.promise}getHttpInterceptor(){let e=e=>t=>{let n=t.config||t;return this.isDebouncable(n)?e(n,t):this.$q.when(t)};return{request:e(e=>e.cache?e:this.enqueue(e).then(t=>void 0===t?e:s.extend(e,{method:"JSONP",cache:{get:()=>t}}))),responseError:e=>{let t=e.config;return t.httpEaseResponseQ&&t.httpEaseResponseQ.resolve([e.status,JSON.parse(JSON.stringify(e.data)),{}]),this.$q.reject(e)},response:e((e,t)=>(e.httpEaseResponseQ&&e.httpEaseResponseQ.resolve([t.status,void 0===t.data?void 0:JSON.parse(JSON.stringify(t.data)),{}]),this.$q.when(t)))}}isDebouncable(e){return r.default.features.httpEase&&"GET"===e.method&&/^(http.+)?(\/learn\/api\/.*)$/.test(e.url)}isServableBy(e,t){let n=e.method===t.method;if(!n)return null;let i=(()=>{let n=e=>{let t=[];return s(e).keys().sortBy().value().forEach(n=>{"expand"!==n&&t.push(`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`)}),t.join("&")};return n(e.params)===n(t.params)})(),r=(()=>{let n={};return((e.params||{}).expand||"").split(",").forEach(e=>{""!==e&&(n[e]=e)}),((t.params||{}).expand||"").split(",").every(e=>""===e||Object.prototype.hasOwnProperty.call(n,e))})();if(i&&r)return this.$log.debug(`Eased ${t.url}`,e,t),e=>e;this.$log.warn(`Concurrent Requests Captured - "${t.method} ${t.url}" (with different parameters). Please consider to merge them for performance`)}constructor(e,t){this.$q=e,this.$log=t,this._queue={},this._queueSeq=0,this.delay=500}}l.$inject=["$q","$log"];let c=i.module(o,["ng"]);r.default.features.learnApiCaching||c.config(["$httpProvider",function(e){e.interceptors.push(["$injector",e=>{let t=e.instantiate(l);return t.getHttpInterceptor()}])}])},866688:function(e,t,n){"use strict";n.d(t,{HV:function(){return b},NZ:function(){return s},c$:function(){return E},dr:function(){return I},e:function(){return w},e1:function(){return f},l6:function(){return S},xU:function(){return C}});var i,s,r=n(276635),o=n(464027),a=n(168132),l=n(748157),c=n(291146),d=n(951248),u=n(408027),p=n(887833),m=n(211796),h=n(56227);function g(e,t){return function(n,i){t(n,i,e)}}let f="ultra.services.assessment",b="assessment",v="assessment-exception",y="components.services.assessment.feedbackModeDisplay.afterIndividualGradePosted",C="components.services.assessment.feedbackModeDisplay.noneSpecified",S="course.content.assessment.feedbackOption",E=[u.lrm.UserAnswers,u.lrm.InstructorFeedback,u.lrm.Score,u.lrm.CorrectAnswers],I={[u.lrm.UserAnswers]:{visible:"visible",invisible:"invisible"},[u.lrm.InstructorFeedback]:{visible:"feedback",invisible:"feedback"},[u.lrm.Score]:{visible:"grade",invisible:"grade"},[u.lrm.CorrectAnswers]:{visible:"check-circle",invisible:"check-circle"}};(i=s||(s={})).FOLDER="folder",i.ASSESSMENT="assessment",i.BANK="bank";class w{static isAssessment(e){return a.courseContent.ContentHandler.TestLink.isEqualTo(e.contentHandler)||a.courseContent.ContentHandler.SurveyLink.isEqualTo(e.contentHandler)}static isExternalSubmissionsAssessment(e){return d.AaE.isExternalSubmissionsAssessment(e)}static isExternalSubmissionByDeployedAssessment(e){var t;return!!(null==e?void 0:null===(t=e.deploymentSettings)||void 0===t?void 0:t.isCollectExternalSubmissions)}static getQuestionsForAttempt(e,t){if(!e.getToolAttemptDetailItem(t))return[];let n=e.getToolAttemptDetailItem(t).questionAttempts;return n&&n.length>0?n.map(e=>e.question):[]}static studentCanViewAttemptGradeAndFeedback(e,t){return t?!!(e&&e.isSubmitted()&&t.isPosted()):this.studentCanViewAttemptResults(e)}static studentCanViewAttemptResults(e){return!!(null==e?void 0:e.isCompleted())}static attemptHasFeedback(e){let t=e&&e.getFeedbackToUser();return!!t&&!!t.rawText}static groupAttemptHasIndividualFeedback(e){let t=e&&e.attempts&&e.attempts[0].getGroupIndividualFeedbackToUser();return!!t&&!!t.rawText}static canViewAssessmentException(e,t,n,i){return!e&&!t&&n&&!i}static getSubmissionListAllExceptions(e,t){return null==e||null==t?null:e.assessments.$buildRaw(t.getDeployedAssessment().assessment).exceptions.$resolve().$allow([404]).$asPromise()}static initAssessmentExceptionsIndicators(e,t){return null==e||null==t||void 0===t.getDeployedAssessment()?null:this.getSubmissionListAllExceptions(e,t).then(n=>this.generateCssStyle(e,t,n))}static generateCssStyle(e,t,n){let i={},s=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),r=this.setAssessmentExceptionStyleTag(s.id)();return n.length&&n.forEach(t=>{this.setAssessmentExceptionClass(r,e.id,t,!0,i)}),r}static updateAssessmentExceptionIndicator(e,t,n=!0,i){if(null==e||null==t)return;let s=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),r=this.setAssessmentExceptionStyleTag(s.id)();this.setAssessmentExceptionClass(r,e.id,i,n)}static setAssessmentExceptionStyleTag(e){let t="css_assessment_exceptions"+e;return r.once(()=>{let e=o.element(document).find(`#${t}`);return 0===e.length&&(e=o.element(`<style id="${t}"></style>`).appendTo("head")),e})}static setAssessmentExceptionClass(e,t,n,i=!0,s){let o;let a=new p.h,l=i?"inline-block":"none",c=n.target.id,d=n.target.type;d===u.Crd.User&&a.selector(`.cc${t} .${v} bb-username.course_user${c}:before`).rule("display",l),d===u.Crd.Group&&(a.selector(`.cc${t} .${v} .show-exceptions.submission_row_group${c}:before`).rule("display",l),a.selector(`.cc${t} .slick_title${c} .${v} .show-exceptions:before`).rule("display",l),a.selector(`.cc${t} .assign_group${c}.show-exceptions:before`).rule("display",l)),s&&(s[c]=a.build(),o=r(s).sortBy().map((e,t)=>e).join("\n")),o&&o!==e.text()&&e.text(o),o||(o=e.text(),e.text([o,a.build()].join("\n")))}static getSubmissionRowException(e,t,n,i){let s=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return n===u.Crd.Group?s.groupExceptions.$new(i).$resolve().$allow([404]).$asPromise():n===u.Crd.User?s.userExceptions.$new(i).$resolve().$allow([404]).$asPromise():void 0}static deleteException(e,t,n,i){let s=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return n===u.Crd.User?s.userExceptions.$new(i).deleteException():n===u.Crd.Group?s.groupExceptions.$new(i).deleteException():void 0}static setSubmissionRowException(e,t,n,i,s){let r=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),o={start:s.start,end:s.end,attempts:s.attempts};return n===u.Crd.User?r.userExceptions.$new(i).saveException(o):n===u.Crd.Group?r.groupExceptions.$new(i).saveException(o):void 0}static isFeedbackOptionEnabled(e,t){let{mode:n}=d.eu1.getFeedbackModeByOption(e,t);return null!=n}isUserAnswersOption(e){return e===u.lrm.UserAnswers}getFeedbackModeLabelByOption(e,t){let{mode:n,associatedDate:i}=d.eu1.getFeedbackModeByOption(e,t);return n?this.localizeService.loadBundle("components/services/assessment").then(()=>{switch(n){case u.M6Z.AfterAttemptGraded:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"components.services.assessment.feedbackModeDisplay.afterPosted"});case u.M6Z.AfterDueDate:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"components.services.assessment.feedbackModeDisplay.afterDueDate"});case u.M6Z.AfterSubmission:{let t=e===u.lrm.Score||e===u.lrm.CorrectAnswers;return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:t?y:"components.services.assessment.feedbackModeDisplay.afterSubmission"})}case u.M6Z.OnSpecifiedDate:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"components.services.assessment.feedbackModeDisplay.onSpecificDate",params:{date:i},noWrap:!0});case u.M6Z.AfterIndividualGradeIsPosted:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:y});default:console.error(`Feedback mode: ${n} is not yet supported`)}}):this.$q.resolve(null)}getFeedbackModeLabels(e,t){let n=e.map(e=>this.getFeedbackModeLabelByOption(e,t));return this.$q.all(n)}isAfterIndividualGradeIsPostedFeedbackMode(e,t){switch(e){case u.lrm.UserAnswers:return d.eu1.getFeedbackModeByOption(e,t).mode===u.M6Z.AfterIndividualGradeIsPosted;case u.lrm.CorrectAnswers:case u.lrm.Score:return d.eu1.getFeedbackModeByOption(e,t).mode===u.M6Z.AfterSubmission;default:return!1}}isAfterAllGradesArePostedFeedbackMode(e,t){return d.eu1.getFeedbackModeByOption(e,t).mode===u.M6Z.AfterAttemptGraded}isExternallyRefQuestionsAPIError(e){return 409===e.status&&r.includes(e.code,u.BnC)}openHasExternallyRefQuestionsModal(e){let t=this.$rootScope.$new();t.translateOpts={title:{key:`components.services.assessment.modal.error-external-questions.${e.toString()}.title`}},t.descriptionKey=`components.services.assessment.modal.error-external-questions.${e.toString()}.description`;let n={scope:t,template:h,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/services/assessment")]}};this.modal.open(n)}launchAttempt(e,t,n,i){let s={scoreProviderHandle:d.u$1.Test,status:u.I$9.InProgress,toolAttemptDetail:{"resource/x-bb-assessment":{type:u.IQK.Test,password:t}}},r=n?this.GroupAttemptModel.$build(s):this.AttemptModel.$build(s);return e.launchAttempt(r,{},n,i).then(e=>{var t,n;return(null==e?void 0:null===(t=e.$response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.status)===u.oji.Forbidden?e.$asPromise():e.$fetch({expand:"toolAttemptDetail,alignedGoals"}).$asPromise()})}constructor(e,t,n,i,s,r){this.modal=e,this.$rootScope=t,this.$q=n,this.localizeService=i,this.AttemptModel=s,this.GroupAttemptModel=r}}w=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([g(0,(0,m.tB)(l.HV)),g(1,(0,m.tB)("$rootScope")),g(2,(0,m.tB)("$q")),g(3,(0,m.tB)(c.serviceName)),g(4,(0,m.tB)(a.U_.serviceName)),g(5,(0,m.tB)(a.uy.HV))],w),o.module(f,[l.e1]).service(b,w)},100776:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},e1:function(){return d}});var i=n(464027),s=n(211796),r=n(470269),o=n(495175),a=n(247126),l=n(715419);function c(e,t){return function(n,i){t(n,i,e)}}let d="ultra.services.assessment.attemptSelectionService",u="attemptSelectionService";class p{goToMultipleAttemptsGrading(e,t){let{attemptId:n,groupAttemptId:i,columnId:s,courseId:o,gradeId:a,userId:c}=e,d=t.isGroupContent(),u=d?r.RK.GROUP_SUBMISSION_GRADING:r.RK.SUBMISSION_GRADING;if((n||i)&&a)return this.ultraStateService.goPeekState(u,{...e});let p=t.anonymousGrading?t.grades.$find(a).$asPromise():this.gradeService.loadGrade({columnId:s,courseId:o,userId:c,gradeQueryParams:{userId:c,includeUnpostedGrade:!0}},!1);return p.then(n=>n.attempts.$fetch().$asPromise().then(i=>{let s=(0,l.w)(i,n,t),r=d?s.groupAttemptId:s.id;return this.ultraStateService.goPeekState(u,{...e,attemptId:r,gradeId:n.id,groupAttemptId:d?r:void 0})}))}constructor(e,t){this.gradeService=e,this.ultraStateService=t}}p=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([c(0,(0,s.tB)(o.HV)),c(1,(0,s.tB)(a.HV))],p),i.module(d,[o.e1,a.e1]).service(u,p)},715419:function(e,t,n){"use strict";n.d(t,{m:function(){return r},w:function(){return o}});var i=n(454229);let s=e=>(0,i.parseAttemptAggregationModel)(e)||i.defaultAttemptAggregationModel,r=(e,t)=>{switch(e){case i.AttemptAggregationModel.Average:return t.lastAttemptId;case i.AttemptAggregationModel.First:return t.firstAttemptId;case i.AttemptAggregationModel.Highest:return t.highestAttemptId;case i.AttemptAggregationModel.Last:return t.lastAttemptId;case i.AttemptAggregationModel.Lowest:return t.lowestAttemptId;default:return t.lastAttemptId}},o=(e,t,n)=>{let o=e.filter(e=>!e.isInProgress()),a=o.filter(e=>{var t;return(null===(t=e.grade)||void 0===t?void 0:t.trim().length)===0}),l=0===a.length,c=l?o[o.length-1]:a[a.length-1];if(null==n?void 0:n.anonymousGrading)return c;let d=s(null==n?void 0:n.aggregationModel),u=r(d,t),p=o.find(e=>e.id===u);if(!p)return c;switch(d){case i.AttemptAggregationModel.Average:return c;case i.AttemptAggregationModel.Highest:case i.AttemptAggregationModel.Lowest:return l?p:c;case i.AttemptAggregationModel.First:case i.AttemptAggregationModel.Last:return p;default:return c}}},993558:function(e,t,n){"use strict";n.d(t,{YG:function(){return s},f8:function(){return r}});let i="peer-review-assigned";function s(e,t){return e.$broadcast(i,t.listIndex,t.reviewableAttempt)}function r(e,t){return e.$on(i,t)}},3870:function(e,t,n){"use strict";n.d(t,{HV:function(){return w},e1:function(){return I}});var i=n(592281),s=n(325135),r=n(464027),o=n(852512),a=n(837545),l=n(951248),c=n(408027),d=n(276635),u=n(118717),p=n(211796),m=n(470269),h=n(247126),g=n(372457),f=n(748157),b=n(291146),v=n(501),y=n(225663),C=n(993558);function S(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function E(e,t){return function(n,i){t(n,i,e)}}let I="ultra.components.services.assessment.peerReview",w="peerReview";class A{initPeerContentObject(){this.subscribeToReduxStore();let{courseId:e,contentId:t,columnId:n}=this,i=[];return this.content||i.push(this.loadContents({courseId:e,contentId:t}).then(()=>this)),this.column||i.push(this.loadGradebookColumn({courseId:e,columnId:n}).then(()=>this)),this.$q.all(i).then(()=>this)}subscribeToReduxStore(){this.unsubscribeFromReduxStore=this.$ngRedux.connect(e=>{var t;let n=this.courseId,i=this.columnId,s=this.contextUser.userId,r=(0,d.sortBy)(l.Ys.gradebookAttempt.getReviewableGradebookAttempts(e,n,i,s),["delegatedGraderOrder"]),o=l.Ys.gradebookAttempt.getDeletedReviewableGradebookAttempts(e,i),a=l.Ys.content.getContentById(e,this.contentId),c=l.Ys.gradebookColumn.getGradebookColumnById(e,i),u=null===(t=l.Ys.assessment.getAssessmentByContentId(e,this.contentId))||void 0===t?void 0:t.hasEnoughPeerSubmissions;return{reviewableAttemptsOnly:r,deletedAttemptsOnly:o,content:a,column:c,assessmentHasEnoughSubmissions:u}},e=>(0,u.DE)({assignNewAttemptForPeerReview:l.Nwg.gradebookAttempt.assignNewAttemptForPeerReview,loadGradebookAttemptsByColumnId:l.Nwg.gradebookAttempt.loadGradebookAttemptsByColumnId,loadGradebookColumn:l.Nwg.gradebookColumn.loadGradebookColumn,loadContents:l.Nwg.content.loadContents},e))(this)}canPeerViewAttempt(e,t){if(!this.peerGrading||!t)return!1;let n=this.reviewableAttempts.some(e=>e.id===t.id),i=this.contextUser.userId===t.userId;return!!(n||i)}canDelegatedReconcileAttempt(e){return e.delegatedGrading&&e.isUserReconciler(this.contextUser.userId)}canPeerReviewAttempt(e,t){return this.canPeerViewAttempt(e,t)&&t.userId!==this.contextUser.userId&&!this.canDelegatedReconcileAttempt(e)}canPeerAddFeedbackToAttempt(e,t){return this.canPeerReviewAttempt(e,t)&&!t.isReconciled()&&c.I$9.Completed!==t.status}get completedPeerReviews(){return this.peerGrading?this.reviewableAttempts.filter(e=>c.I$9.Completed===(null==e?void 0:e.status)).length:0}openNotEnoughStudentSubmissionsModal(){let e=this.$rootScope.$new();e.translateOpts={title:{key:"components.services.peer-review.modal.error-not-enough-submissions.title"}},e.descriptionKey="components.services.peer-review.modal.error-not-enough-submissions.description";let t={scope:e,template:y,resolve:{translations:[b.serviceName,e=>e.loadBundle("components/services/peer-review")]}};this.modal.open(t)}getReviewableAttemptByDelegatedGraderOrder(e){return this.reviewableAttempts.find(t=>t.delegatedGraderOrder===e)}assignNewPeerReview(){if(!this.peerGrading||this.reviewableAttempts.length===this.numOfPeerReviewsToComplete)return this.$q.resolve(null);let e=this.hasDeletedAttempts?this.deletedAttempts[0].delegatedGraderOrder:null;return this.$q.when(this.assignNewAttemptForPeerReview({courseId:this.column.courseId,columnId:this.column.id,userId:this.contextUser.userId})).then(()=>{let t=null!=e?e:this.reviewableAttempts.length-1;return(0,C.YG)(this.$rootScope,{listIndex:t,reviewableAttempt:this.reviewableAttempts[t]}),this.reviewableAttempts[t]}).catch(e=>{throw e instanceof l.jMP&&this.openNotEnoughStudentSubmissionsModal(),e})}navigateToPeerReview(e){if(!this.peerGrading)return this.$q.resolve();if(null===this.getReviewableAttemptByDelegatedGraderOrder(e))return this.$q.reject(Error("Cannot navigate to a row that does not exist"));let t=this.getReviewableAttemptByDelegatedGraderOrder(e),n={courseId:this.column.courseId,columnId:this.column.id,userId:this.contextUser.userId,attemptId:null==t?void 0:t.id,gradeId:null==t?void 0:t.gradeId,initialPeerIndex:e};return this.ultraState.goPeekState(`${m.eJ.ASSESSMENT_PEER_GRADING}`,n)}loadReviewableAttempts(){var e;return!this.peerGrading||this.loadReviewableAttemptsPromise||this.hasLoadedReviewableAttempts?null!==(e=this.loadReviewableAttemptsPromise)&&void 0!==e?e:this.$q.resolve(this):(this.loadReviewableAttemptsPromise=this.$q.when(this.loadGradebookAttemptsByColumnId({courseId:this.column.courseId,columnId:this.column.id,reviewableAttemptsOnly:!0})).then(()=>(this.hasLoadedReviewableAttempts=!0,this)),this.loadReviewableAttemptsPromise)}get reviewableAttempts(){var e;return this.peerGrading&&null!==(e=this.reviewableAttemptsOnly)&&void 0!==e?e:[]}get deletedAttempts(){var e;return this.peerGrading&&null!==(e=this.deletedAttemptsOnly)&&void 0!==e?e:[]}get hasEnoughSubmissionsForPeerAssessment(){var e;return null!==(e=this.assessmentHasEnoughSubmissions)&&void 0!==e&&e}get hasDeletedAttempts(){return this.deletedAttempts.length>0}get numberOfLatePeerReviews(){return this.peerGrading?this.reviewableAttempts.filter(e=>this.isAfterPeerReviewDueDate(e.attemptLastGradedDate)&&c.I$9.Completed===e.status).length:null}get numberOfStartedPeerReviews(){if(!this.peerGrading)return null;let e=this.reviewableAttempts.filter(e=>c.I$9.NeedsGrading===e.status).length,t=this.deletedAttempts.length;return e+t}get peerGrading(){var e;return!!(null===(e=this.column)||void 0===e?void 0:e.peerGrading)}get numOfPeerReviewsToComplete(){var e;return this.peerGrading?null===(e=this.content.peerSettings)||void 0===e?void 0:e.peerReviewsPerStudent:null}parseCurrentStringToDateAndMemoize(e){return i.Z.parseStringToDate(e)}get peerSubmissionDueDate(){return this.peerGrading?this.parseCurrentStringToDateAndMemoize(this.column.dueDate):null}get peerReviewDueDate(){var e;return this.peerGrading?this.parseCurrentStringToDateAndMemoize(null===(e=this.content.peerSettings)||void 0===e?void 0:e.peerReviewDueDate):null}get allowLatePeerReviews(){return!!this.peerGrading&&!!this.content.peerSettings.allowLatePeerReviews}get isPeerGradingConfigured(){return!!this.peerGrading&&null!=this.numOfPeerReviewsToComplete&&null!=this.peerReviewDueDate}get isInPeerReviewWindow(){return!this.isAfterPeerReviewDueDate()&&this.isAfterPeerSubmissionDueDate()}get isAfterPeerReviewWindow(){return this.isAfterPeerReviewDueDate()}isAfterPeerReviewDueDate(e){var t;if(!this.peerGrading)return!1;let n=null!==(t=i.Z.parseStringToDate(e))&&void 0!==t?t:new Date;return i.Z.isWithinDateRange(n,{end:null,start:this.peerReviewDueDate},!1)}isAfterPeerSubmissionDueDate(e){var t;if(!this.peerGrading)return!1;let n=null!==(t=i.Z.parseStringToDate(e))&&void 0!==t?t:new Date;return i.Z.isWithinDateRange(n,{end:null,start:this.peerSubmissionDueDate},!1)}constructor(e,t,n,i,s,r,o,a,l,c,d){this.$rootScope=e,this.$ngRedux=t,this.localizeService=n,this.contextUser=i,this.modal=s,this.ultraState=r,this.context=o,this.$q=a,this.courseId=l,this.contentId=c,this.columnId=d,this.reviewableAttemptsOnly=[],this.deletedAttemptsOnly=[],this.hasLoadedReviewableAttempts=!1}}S([(0,s.LRUMemoize)()],A.prototype,"parseCurrentStringToDateAndMemoize",null),A=S([E(0,(0,p.tB)("$rootScope")),E(1,(0,p.tB)("$ngRedux")),E(2,(0,p.tB)(b.serviceName)),E(3,(0,p.tB)(g.HV)),E(4,(0,p.tB)(f.HV)),E(5,(0,p.tB)(h.HV)),E(6,(0,p.tB)(v.HV)),E(7,(0,p.tB)("$q")),E(8,(0,p.tB)("courseId")),E(9,(0,p.tB)("contentId")),E(10,(0,p.tB)("columnId"))],A);class k{getOrCreatePeerContentFromContent(e){return(0,a.h)(this.service.getOrCreatePeerContentFromContent(e))}constructor(e){this.service=e,this.key=o.fz.PeerReview}}class x{getPeerContent(e){return this.peerContentMap.get(e)}createPeerContent(e,t,n){let i=this.$injector.instantiate(A,{courseId:e,contentId:t,columnId:n});return this.peerContentMap.set(t,i),i.initPeerContentObject()}getOrCreatePeerContent(e,t,n){let i=this.getPeerContent(t);return i?this.$q.resolve(i):this.createPeerContent(e,t,n)}getDeployedAssessment(e){return(null==e?void 0:e.contentDetail)&&e.getDeployedAssessment()}getOrCreatePeerContentFromContent(e){var t,n;if(!e)return this.$q.resolve(null);let{courseId:i,id:s}=e,r=null===(t=this.getDeployedAssessment(e))||void 0===t?void 0:null===(n=t.gradingColumn)||void 0===n?void 0:n.id;return i&&s&&r?this.getOrCreatePeerContent(i,s,r):this.$q.resolve(null)}getOrCreatePeerContentWithAttemptsFromContent(e){return this.getOrCreatePeerContentFromContent(e).then(e=>null==e?void 0:e.loadReviewableAttempts())}getOrCreatePeerContentFromColumn(e){if(!e)return this.$q.resolve(null);let{courseId:t,contentId:n,id:i}=e;return t&&n&&i?this.getOrCreatePeerContent(t,n,i):this.$q.resolve(null)}getOrCreatePeerContentWithAttemptsFromColumn(e){return this.getOrCreatePeerContentFromColumn(e).then(e=>null==e?void 0:e.loadReviewableAttempts())}isPeerEvaluationItem(e){return l.u$1.PeerEvaluationTest.isEqualTo(e)}wrapPeerEvaluationItemTitle(e,t){return this.localizeService.translateSync({locale:t,key:"components.services.peer-review.peerEvaluationTitleWrapper",params:{itemTitle:e},noWrap:!0,noEscape:!0})}constructor(e,t,n){this.$injector=e,this.$q=t,this.localizeService=n,this.peerContentMap=new Map,(0,o.gM)(new k(this))}}x=S([E(0,(0,p.tB)("$injector")),E(1,(0,p.tB)("$q")),E(2,(0,p.tB)(b.serviceName))],x),r.module(I,[b.moduleName,g.e1,f.e1,h.e1,v.e1]).service(w,x)},64314:function(e,t,n){"use strict";n.d(t,{e1:function(){return c},HV:function(){return d},aA:function(){return u}});var i=n(276635),s=n(464027),r=n(18447),o=n(305233);let a=[];function l(){return a[a.length-1]}let c="ultra.service.batch-utility-rest-api",d="ultra.service.batch-utility-rest-api.service",u="batch-utility-rest-api-param",p=[];function m(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}class h{constructor(e,t,n,i){this.position=e,this.deferred=t,this.reqConfig=n,this.token=i}}let g=0;s.module(c,["ng",o.e]).config(["$httpProvider",function(e){e.interceptors.push(["$injector","$log",(e,t)=>{let n={};return{request(o){let a=e.get("$q");if(o.params&&o.params[u]&&RegExp("^"+m(o.params[u].baseUrl)).test(o.url)){let c=a.defer(),d=o.params[u];if(delete o.params[u],d.trackId=d.trackId||""+g++,!Object.prototype.hasOwnProperty.call(n,d.trackId)){var l;n[d.trackId]={token:d,queue:[]},d.sendDeferred.promise.then((l=d.trackId,function(){let o=n[l],a=RegExp("^"+m(o.token.baseUrl));if((r.default.features.batchRestAPI||o.token.batchUrl!==r.default.apiBasePath+"/v1/utilities/batch")&&1!==o.queue.length)o.queue.length>1?e.get("$http")({method:"PUT",url:o.token.batchUrl,data:o.queue.map((e,n)=>{let s=e.reqConfig;return t.debug(`${s.method} ${s.url} will be sent by batch request "${o.token.batchUrl}?xb=${o.token.trackId}[${n}]"`),{method:s.method,relativeUrl:s.url.replace(a,"")+"?"+i(s.params).omitBy(i.isUndefined).map((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).value().join("&"),body:s.data}}),params:{xb:l}}).then(e=>{o.queue.forEach(t=>{let n=t.reqConfig,i=e.data[t.position];t.deferred.resolve(s.extend({},n,{method:"JSONP",cache:{get:()=>[i.statusCode,i.body,i.headers]}}))}),o.token.finalDeferred.resolve(e.data),delete n[l]}):(o.token.finalDeferred.resolve([]),delete n[l]);else{delete n[l];let t=e.get("$q");t.all(o.queue.map(t=>{let n=function(e){return t.deferred.resolve(s.extend({},t.reqConfig,{method:"JSONP",cache:{get:()=>[e.status,e.data,e.headers]}})),{statusCode:e.status,body:e.data,method:t.reqConfig.method,headers:{},relativeUrl:t.reqConfig.url.replace(r.default.apiBasePath+"/","")}};return e.get("$http")(t.reqConfig).then(n,n)})).then(e=>{o.token.finalDeferred.resolve(e)})}}))}return n[d.trackId].queue.push(new h(n[d.trackId].queue.length,c,o,d)),c.promise}return a.when(o)}}}])}]).config(["$provide",function(e){e.decorator("$http",["$delegate",function(e){let t=function(t){var n;return p.length>0&&(t.params=t.params||{},Object.prototype.hasOwnProperty.call(t.params,u)||(t.params[u]=i.last(p))),l()&&l().$emit("BEFORE_REQUEST",t),void 0!==(n=(t.params||{})[u])&&(n.totalRequests=(n.totalRequests||0)+1),e(t)};return!function(...e){i.each(e,function(e){t[e]=function(n,i){return t(s.extend({},i||{},{method:e,url:n}))}})}("get","delete","head","jsonp"),!function(...e){i.each(e,function(e){t[e]=function(n,i,r){return t(s.extend({},r||{},{method:e,url:n,data:i}))}})}("post","put","patch"),!function(...n){i.each(n,function(n){Object.defineProperty(t,n,{enumerable:!0,get(){return e[n]},set(t){e[n]=t}})})}("defaults","pendingRequests"),t}])}]).factory(d,["$rootScope","$q","$log",o.H,function(e,t,n,s){return{performBatch(e,t,n){let i=this.newToken.apply(this,Array.prototype.slice.call(arguments).splice(1));p.push(i);let s=this.awaitBatch(e);return i.autoSend=!0,s()},awaitBatch(e){if(0===p.length)throw Error("No batch token in current context! Please invoke in the callstack of performBatch");let s=i.last(p);return s.autoSend=!1,()=>{let r;i.last(p)!==s&&p.push(s),s.autoSend=!0;try{r=e(s)}catch(e){n.error(e)}return p.pop(),s.autoSend&&s.send(),r?t.resolve(r):s.finalDeferred.promise}},newToken(e=r.default.apiBasePath+"/v1/utilities/batch",n=r.default.apiBasePath+"/"){let i=t.defer(),s={send(){return this.totalRequests?this.sendDeferred.resolve():this.finalDeferred.resolve([]),this.finalDeferred.promise},sendDeferred:t.defer(),finalDeferred:i,batchUrl:e,baseUrl:n,autoSend:!1,promise:i.promise,totalRequests:0};return s}}}])},73738:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});let i=e=>{if(!e||""===e)return!1;let t=e.toLowerCase().replace("_","-");return t.startsWith("ar")||t.startsWith("he")||"en-sc"===t||"en-sa"===t}},291146:function(e,t,n){"use strict";n.d(t,{ILocaleUsernameFormat:function(){return a.ILocaleUsernameFormat},Service:function(){return v},localeQuerystringRegex:function(){return g},moduleName:function(){return p},providerName:function(){return h},serviceName:function(){return m}});var i=n(276635),s=n(464027),r=n(18447),o=n(692242),a=n(579633),l=n(73738),c=n(893254),d=n(693879);function u(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}n.o(a,"ILocaleComposedDurationFormat")&&n.d(t,{ILocaleComposedDurationFormat:function(){return a.ILocaleComposedDurationFormat}}),n.o(a,"ILocaleDateFormat")&&n.d(t,{ILocaleDateFormat:function(){return a.ILocaleDateFormat}}),n.o(a,"ILocaleDatetimeFormat")&&n.d(t,{ILocaleDatetimeFormat:function(){return a.ILocaleDatetimeFormat}}),n.o(a,"ILocaleTimeFormat")&&n.d(t,{ILocaleTimeFormat:function(){return a.ILocaleTimeFormat}}),n.o(a,"ILocaleTimezoneFormat")&&n.d(t,{ILocaleTimezoneFormat:function(){return a.ILocaleTimezoneFormat}}),n.o(a,"LocaleCategory")&&n.d(t,{LocaleCategory:function(){return a.LocaleCategory}}),n.o(a,"PreferredDisplayName")&&n.d(t,{PreferredDisplayName:function(){return a.PreferredDisplayName}});let p="ultra.services.BbLocalize",m="bbLocalize",h=m+"Provider",g=/setLang=([^&]*)/,f=function(e,t,n){let i=n.value;n.value=function(...e){return this.$q.when(i.apply(this,e))}};class b{isRTL(e){if(!r.default.features.rightToLeftSupport)return!1;let t=this.getAppLocale();return(0,l.$)(t)}getDecimalStringForScope(e){let t=this.getLocale(e);return this.frmt.number.getDecimalStringSync(t)}getGroupingStringForScope(e){let t=this.getLocale(e);return this.frmt.number.getGroupingStringSync(t)}setUltraLocaleData(e){this.frmt.setUltraLocaleData(this.normalizeLocaleData(e))}normalizeLocaleData(e){let t={};for(let n of Object.keys(e))t[this.preProcessFormatterLocale(n)]=e[n];return t}isValidNumber(e,t){let n=this.getLocale(t);return this.frmt.number.isValidSync(e,n)}loadBundle(e,t){return null==t&&(t=this.getLocale(null)),this.intl.addBundles("locales/[locale]/"+e+".json"),this.intl.loadBundles(t)}loadAllBundles(e){return this.intl.loadBundles(e)}insertLocaleData(e,t){return this.intl.storeLocaleData(e,t)}resetLocaleData(){return this.intl.reset()}translateSync(e){let t=e?{...e.params}:{};return Object.keys(t).forEach(e=>{void 0===t[e]&&(t[e]="")}),t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape}),this.intl.translateSync(e.locale||this.getLocale(null),e.key,t)}translate(e){let t=e?e.params:{};return t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape}),this.intl.translate(e.locale||this.getLocale(null),e.key,t)}_getFormatter(e){return this.frmt.getFormatterSync(e)}getAppLocale(){return this.intl.normalizeLocale(this.getUserLocale()||this.defaultLocale)}getAppLocaleISO(){return this.getUserLocale()||this.defaultLocale}getLocale(e){if(!e)return this.getAppLocale();let t=e.locale;for(;!t&&e.$parent;)t=(e=e.$parent).locale;return this.intl.normalizeLocale(t)||this.getAppLocale()}getUserLocale(){return this.userLocale}preProcessFormatterLocale(e){return this.frmt.preProcessFormatterLocale(e)}getPreferredLocales(e){return this.intl.normalizeLocales(this.frmt.getPreferredLocales(e))}validateLocale(e){try{this.intl.getMf("isLocaleExists",this.intl.normalizeLocale(e))}catch(e){return!1}return!0}setLocale(e,t){return t||(t=this.getAppLocale()),e&&(e.locale=t),this.loadLocale(t).then(()=>{this.$rootScope.$broadcast("$translateChangeSuccess",{language:t})})}setUserLocale(e){this.userLocale=e}setSystemDefaultLocale(e){this.defaultLocale=e}addOverride(e,t){this.overrideLoader.addOverrideBundle(e,t)}loadLocale(e){return this.frmt.loadLocale(e)}formatNumber(e,t,n){let i=this.getLocale(t);return this.frmt.number.format(e,i,n)}formatNumberSync(e,t,n){let i=this.getLocale(t);return this.frmt.number.formatSync(e,i,n)}regroupNumber(e,t){let n=this.getLocale(t);return this.frmt.number.regroup(e,n)}regroupNumberSync(e,t){let n=this.getLocale(t);return this.frmt.number.regroupSync(e,n)}parseNumber(e,t){let n=this.getLocale(t);return this.frmt.number.parse(e,n)}parseNumberSync(e,t){let n=this.getLocale(t);return this.frmt.number.parseSync(e,n)}formatDate(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatDate(e,t,i)}formatDateSync(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatDateSync(e,t,i)}parseDate(e,t,n,i){let s=this.getLocale(n);return this.frmt.datetime.parseDate(e,t,s,i)}parseDateSync(e,t,n,i){let s=this.getLocale(n);return this.frmt.datetime.parseDateSync(e,t,s,i)}formatTime(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatTime(e,t,i)}formatTimeSync(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatTimeSync(e,t,i)}getDayPeriodsFormatSync(e){return this.frmt.getFormatterSync(e).cldr.main("dates").calendars.gregorian.dayPeriods.format.abbreviated}getTimePattern(e,t){let n=this.getLocale(t);return this.frmt.datetime.getTimePattern(e,n)}getTimePatternSync(e,t){let n=this.getLocale(t);return this.frmt.datetime.getTimePatternSync(e,n)}parseTime(e,t,n,i){let s=this.getLocale(n);return this.frmt.datetime.parseTime(e,t,s,i)}parseTimeSync(e,t,n,i){let s=this.getLocale(n);return this.frmt.datetime.parseTimeSync(e,t,s,i)}formatDatetime(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatDatetime(e,t,i)}formatDatetimeSync(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatDatetimeSync(e,t,i)}formatDurationBetweenSync(e,t,n,i){let s=this.getLocale(n);return this.frmt.datetime.formatDurationBetweenSync(e,t,s,i)}formatDuration(e,t,n,i){let s=this.getLocale(t);return this.frmt.datetime.formatDuration(e,s,n,i)}formatComposedDurationSync(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatComposedDurationSync(e,t,i)}formatTimezone(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatTimezone(e,t,i)}formatTimezoneSync(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatTimezoneSync(e,t,i)}formatUsername(e,t,n,i){let s=this.getLocale(n);return this.frmt.username.format(e,t,s,i)}formatUsernameSync(e,t,n,i){let s=this.getLocale(n);return this.frmt.username.formatSync(e,t,s,i)}formatUsernameList(e,t,n,i){let s=this.getLocale(n);return this.frmt.username.formatList(e,t,s,i)}formatItems(e,t,n,i,s){let r=this.getLocale(n);return this.frmt.items.format(e,e.length,t,r,i,s)}formatItemsSync(e,t,n,i,s,r){let o=this.getLocale(i);return this.frmt.items.formatSync(e,t,n,o,s,r)}getFormatEnum(e,t){if(!t)return null;t=t.charAt(0).toUpperCase()+t.slice(1);let n=e[t];if(null==n)throw Error("Invalid format `"+t+"` is used");return n}getFormatId(e,t){if(null==t)return 0;t=t.charAt(0).toUpperCase()+t.toLowerCase().slice(1);let n=e[t];if(null==n)throw Error("Invalid format `"+t+"` is used");return n}formatPercentage(e,t){let n=this.getLocale(t);return this.frmt.number.format(e,n,{style:"percent"})}formatPercentageSync(e,t,n){let i=this.getLocale(t);return this.frmt.number.formatSync(e,i,{style:"percent",maximumFractionDigits:n})}formatCurrency(e,t,n,i){let s=this.getLocale(t);return this.frmt.currency.format(e,s,n,i)}formatCurrencySync(e,t,n,i){let s=this.getLocale(t);return this.frmt.currency.formatSync(e,s,n,i)}getReactBabelfishParams(e){return{locale:this.getLocale(e),babelfishInstance:this.intl,babelfishFormatter:this.frmt,isRtl:this.isRTL()}}constructor(e,t){this.$q=e,this.$rootScope=t,this.defaultLocale="en",this.percentageFormatters={},this.currencyFormatters={},this.bundlePromises={},this.intl=c.Z.getInstance(),this.frmt=new o.Z(this.intl,{production:b.production,urlRoot:b.urlRoot,defaultLocale:this.defaultLocale}),this.overrideLoader=d.h.getInstance()}}b.$inject=["$q","$rootScope"],b.production=!1,b.urlRoot=".",b.defaultDecimalPrecision=a.Number.defaultDecimalPrecision,b.minDecimalPrecision=1,b.maxDecimalPrecision=4,u([f],b.prototype,"loadBundle",null),u([f],b.prototype,"translate",null),u([f],b.prototype,"formatNumber",null),u([f],b.prototype,"regroupNumber",null),u([f],b.prototype,"parseNumber",null),u([f],b.prototype,"formatUsername",null),u([f],b.prototype,"formatUsernameList",null),u([f],b.prototype,"formatPercentage",null);class v extends b{}s.module(p,[]).provider(m,class{setOptions(e={}){i.forOwn(e,(e,t)=>{b[t]=e})}constructor(){this.$get=["$injector",e=>e.instantiate(b)]}})},335614:function(e,t,n){"use strict";n.r(t),n.d(t,{BbOffcanvasController:function(){return u},Controller:function(){return p},controllerName:function(){return l},moduleName:function(){return a},requireName:function(){return d},template:function(){return c}});var i=n(464027),s=n(335920),r=n(211796);function o(e,t){return function(n,i){t(n,i,e)}}let a="ultra.controllers.bbOffcanvas",l="BbOffcavasController",c="",d="components/services/bb-offcanvas/bb-offcanvas-controller";class u{constructor(e,t,n){let i=t.open({template:e.template,trapFocus:e.trapFocus,panelClass:e.panelClass||"peek",pageTitle:e.pageTitle,anchor:e.anchor,showType:e.showType,container:e.container,scope:e.scope||n,close:e.close,closed:e.closed,open:e.open,opened:e.opened,overlay:null==e.overlay||e.overlay,stateName:e.stateName,disableFocusHandling:!!e.disableFocusHandling,banner:e.banner});t.addBbOffcanvasElementPromise(i,e.stateName)}}u=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([o(0,(0,r.tB)("offCanvasArgs")),o(1,(0,r.tB)(s.HV)),o(2,(0,r.tB)("$scope"))],u);class p extends u{}i.module(a,[s.e1]).controller(l,u)},335920:function(e,t,n){"use strict";n.d(t,{AE:function(){return b},HV:function(){return m},e1:function(){return p},gQ:function(){return g},mP:function(){return h}}),n(80788);var i=n(625506),s=n(464027),r=n(18447),o=n(612270),a=n(291146),l=n(305233),c=n(404073),d=n(211796);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.services.BbOffcanvas",m="bbOffcanvas",h="OffCanvasPanelClosed",g="OffCanvasPanelOpened";class f{open(e){return this.openOffcanvas(e)}openOffcanvas(e){return this.$q.when(e.template).then(t=>{let n=i(t);if(n.length>1&&!r.default.production)throw Error("Current page has multiple root element! Please refactor the page to have only one root element");n.attr("data-base-state-name",e.stateName),0===this.openElements.length&&1===this.openElementsPromise.length&&n.addClass("first");let s=e.scope||this.$rootScope,a=(s.$newOffcanvasScope||s.$new).apply(s);this.$rootScope.bbOffcanvasOpened=!1,this.bbOffcanvasOpening=!0;let l=e.opened,d=e.close,u=this;if(e.trapFocus=!1,e.open=()=>{e.disableFocusHandling||u.accessibility.applyAccessibilityHandlingForPanel(n)},o.t6.isLastNavigationByKeyboard&&i("body").addClass("hide-focus-outline"),e.opened=function(){u.$compile(n)(a);let t=(...e)=>{u.$rootScope.bbOffcanvasOpened=!0,u.bbOffcanvasOpening=!1,l&&l.apply(this,e),o.t6.isLastNavigationByKeyboard&&i("body").removeClass("hide-focus-outline"),u.$rootScope.$broadcast(g)};u.$rootScope.$$phase?t():u.$rootScope.$apply(t),u.accessibility.isElementInActivePanel(i(document.activeElement))||u.accessibility.focusCorrectElementOnPanel(n),n.hasClass("peek")&&n.hasClass("overlay-disabled")&&!e.disableFocusHandling&&u.enableFocusSkipLinks(a)},e.close=(...t)=>(n.hasClass("peek")&&n.hasClass("overlay-disabled")&&!e.disableFocusHandling&&this.disableFocusSkipLinks(),d.apply(this,t)),e.closed=()=>{e.disableFocusHandling||this.accessibility.revertAccessibilityHandling(),this.$rootScope.$broadcast(h)},e.overlay||n.addClass("overlay-disabled"),e.disableFocusHandling){n.addClass("focus-handling-disabled"),n.attr("role","region"),n.attr("aria-label",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(a),key:"global.panel"}));let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(a),key:"global.focusJumpLink"});n.append('<button class="focus-skip-link focus-skip-link-disabled" tabindex="0">'+e+"</button>")}n.bbOffcanvas(e);let p=new b(n,this.accessibility);e.banner&&c.C.pushBanner({state:{stateName:e.stateName,panelClass:e.panelClass},orphan:()=>{p.setBanner()(void 0)},adopt:p.setBanner()}),p.open();let m=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(a),key:"global.close"}),f=n.find(".bb-close");return f&&f.length>0&&(f[0].setAttribute("aria-label",m),f[0].setAttribute("analytics-id",`bb-close.${e.pageTitle}`),n.find(".top-border").length>0&&f.addClass("has-top-border")),n.attr("data-page-title",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(a),key:e.pageTitle})),p})}addBbOffcanvasElement(e){this.openElements.push(e),this.synchronizeOffcanvasDepth()}addBbOffcanvasElementPromise(e,t){this.openElementsPromise.push(this.$q.when(e)),this.openElementsPromise[this.openElementsPromise.length-1].then(e=>{e.name=t,this.addBbOffcanvasElement(e),this.openElementsPromise.pop()},()=>{this.openElementsPromise.pop()})}close(e){for(;0!==this.openElements.length;){let t=this.openElements.pop();if(this.synchronizeOffcanvasDepth(),t.close(),this.$rootScope.bbOffcanvasOpened&&t.name===e)break}this.$rootScope.$broadcast(h)}synchronizeOffcanvasDepth(){i(this.document.body).attr("bb-offcanvas-depth",this.openElements.length)}getElement(e){return(this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then(()=>this.openElements.filter(t=>t.name===e)[0])}getTopElement(){return this.getNthElementFromTop(0)}getNthElementFromTop(e){let t=null;return this.openElementsPromise.length>e?t=this.openElementsPromise[this.openElementsPromise.length-e-1]:this.openElements.length>e&&(t=this.openElements[this.openElements.length-e-1]),this.$q.when(t)}getCoursePanel(){return(this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then(()=>this.openElements.filter(e=>{let t=e.name.match(/base\.[A-Za-z]+\.peek\.course\.[A-Za-z]+\.peek$/);return t&&0!==t.length})[0])}showTopPanelCloseButton(){this.getTopElement().then(e=>{e&&e.showCloseButton()})}expandTopPanel(){this.getTopElement().then(e=>{e&&!e.isPanelExpanded()&&e.expandPanel()})}shrinkTopPanel(){return this.getTopElement().then(e=>{e&&e.isPanelExpanded()&&e.expandPanel()})}safeFocus(e){if(this.bbOffcanvasOpening){let t=this.$rootScope.$watch(()=>this.bbOffcanvasOpening,n=>{!1===n&&(t(),this.timeout(()=>{e.focus()},this.$rootScope,0,!1))})}else this.timeout(()=>{e.focus()},this.$rootScope,0,!1);this.accessibility.isFocusDelayed=!1}enableFocusSkipLinks(e){this.$q.all([this.getTopElement(),this.getNthElementFromTop(1)]).then(t=>{let[n,i]=t;if(null!=n&&null!=i){let t=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:i.getElement().attr("data-page-title")}}),s=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:n.getElement().attr("data-page-title")}});n.enableFocusSkipLink(i,t),i.enableFocusSkipLink(n,s)}})}disableFocusSkipLinks(){this.getTopElement().then(e=>{e&&e.disableFocusSkipLink()}),this.getNthElementFromTop(1).then(e=>{e&&e.disableFocusSkipLink()})}constructor(e,t,n,i,s,r){this.$compile=e,this.$q=t,this.$rootScope=n,this.accessibility=i,this.bbLocalize=s,this.timeout=r,this.document=document,this.openElements=[],this.openElementsPromise=[]}}f=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,d.tB)("$compile")),u(1,(0,d.tB)("$q")),u(2,(0,d.tB)("$rootScope")),u(3,(0,d.tB)(o.HV)),u(4,(0,d.tB)(a.serviceName)),u(5,(0,d.tB)(l.H))],f);class b{getElement(){return this.element}open(){this.element.addClass("hide-in-background"),this.element.bbOffcanvas("open")}close(){this.element.bbOffcanvas("remove")}setBanner(){let e=i(this.element)[0];return e.setBanner}expandPanel(){this.element.bbOffcanvas("expandPanel")}isPanelExpanded(){return this.element.hasClass("full")}hideCloseButton(){this.element.find(".bb-close").addClass("bb-close-hide")}showCloseButton(){this.element.find(".bb-close.bb-close-hide").removeClass("bb-close-hide")}enableFocusSkipLink(e,t){this.element.find(".focus-skip-link").removeClass("focus-skip-link-disabled").attr("aria-label",t).on("click.focusSkip",()=>{this.element.hasClass("peek")?this.accessibility.revertAccessibilityHandling():(this.accessibility.applyAccessibilityHandlingForPanel(e.getElement()),this.accessibility.focusCorrectElementOnPanel(e.getElement()))})}disableFocusSkipLink(){this.element.find(".focus-skip-link").addClass("focus-skip-link-disabled").off("click.focusSkip")}constructor(e,t,n){this.element=e,this.accessibility=t,this.name=n}}s.module(p,[o.e1,a.moduleName,l.e]).service(m,f)},345e3:function(e,t,n){"use strict";n.d(t,{KC:function(){return f},e1:function(){return u},HV:function(){return p}});var i=n(464027),s=n(319434),r=n(451251),o=n(286531),a=n(759485),l=n(529462),c=n(555342),d=n(951248);let u="ultra.services.bbml-editor",p="bbMLEditorService",m="file",h="embedded-unsafe-html",g="http://localhost";class f{static get VERSION_INDICATOR_PREFIX(){return'<!-- {"bbMLEditorVersion":'}static get CURRENT_VERSION_INDICATOR(){return f.VERSION_INDICATOR_PREFIX+"1} -->"}static get EMBEDDED_LINK_PREFIX(){return"https://"}getBbMLFileType(e){let t=e.dataset;return(null==t?void 0:t.bbtype)||m}convertBbMLToContentBlocks(e){var t;let n=new Set,i=[],o=!1;r.Ny(e,f.VERSION_INDICATOR_PREFIX)&&(o=!0);let a=document.createElement("div");a.innerHTML=e;for(let e=0;e<a.children.length;e++){let r;let o=a.children[e];if("A"===o.tagName&&this.getBbMLFileType(o)===m)(r=this.convertBbMLToFileBlock(o)).blockType=s.Pq.File;else if("DIV"===o.tagName){let e=o.innerHTML.trim();e&&(r={blockType:s.Pq.Text,textBlock:e,id:this.getBlockIdFromBbML(o)})}else if("A"===o.tagName&&this.getBbMLFileType(o)===h){let e;let{dataset:n,href:i}=o;if(null==n?void 0:n.bbfile)try{e=null===(t=JSON.parse(n.bbfile))||void 0===t?void 0:t.linkName}catch(e){}r={blockType:s.Pq.Html,textBlock:"",fileBlock:{downloadUrl:i,file:{fileName:e}},id:this.getBlockIdFromBbML(o)}}r&&!n.has(r.id)&&(n.add(r.id),i.push(r))}return o||0!==i.length||(this.contains(e,f.EMBEDDED_LINK_PREFIX)||(o=!0),i.push({blockType:s.Pq.Text,textBlock:e,id:this.generateBlockId()})),{contentBlocks:i,isBbmlEditorCompliant:o}}contains(e,t){return(e||"").indexOf(t)>-1}convertBbMLToFileBlock(e){let t=e.dataset,n={file:{}},i=null;if(null==t?void 0:t.bbfile)try{var s;let e=JSON.parse(t.bbfile);n.isDecorative=e.isDecorative,n.alternativeText=e.alternativeText,n.linkName=e.linkName,n.currentMimeType=e.mimeType,n.render=null!==(s=e.render)&&void 0!==s?s:d.I_d.Inline,n.ui={isRenderedInline:(0,c.tq)(n.render)},n.viewerData={},e.bbFileUuid&&(n.viewerData.bbFileUuid=e.bbFileUuid),e.viewerUuid&&(n.viewerData.viewerUuid=e.viewerUuid),e.viewerUrl&&(n.viewerData.viewerUrl=e.viewerUrl),e.viewerTimeToWait&&(n.viewerData.viewerTimeToWait=parseInt(e.viewerTimeToWait+"",10))}catch(e){}n.linkName||(n.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),n.currentMimeType||(n.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1)),n.ui||(n.ui={isRenderedInline:this.fileViewer.shouldRenderInlineByDefault(n)}),i=this.getBlockIdFromBbML(e);let r=e.href;return 0===r.indexOf(g)&&(r=(0,a.uI)(r.substr(g.length))),n.downloadUrl=r,this.fileViewer.initUiField(n),{fileBlock:n,id:i}}getBlockIdFromBbML(e){let t=e.dataset;return(null==t?void 0:t.bbid)?t.bbid:e.id?e.id:this.generateBlockId()}convertContentBlocksToBbML(e,t){let n=document.createElement("div");if(e.forEach(e=>{var t,i;if(e.blockType===s.Pq.File){let t=document.createElement("a"),s=t.dataset;if(t.href=e.fileBlock.downloadUrl,s.bbid=e.id,e.fileBlock.ui){let t={};t.render=null!==(i=e.fileBlock.render)&&void 0!==i?i:d.I_d.Inline,null!=e.fileBlock.isDecorative&&(t.isDecorative=e.fileBlock.isDecorative),e.fileBlock.alternativeText&&(t.alternativeText=e.fileBlock.alternativeText),e.fileBlock.linkName&&(t.linkName=e.fileBlock.linkName),e.fileBlock.currentMimeType&&(t.mimeType=e.fileBlock.currentMimeType),e.fileBlock.viewerData&&(e.fileBlock.viewerData.bbFileUuid&&(t.bbFileUuid=e.fileBlock.viewerData.bbFileUuid),e.fileBlock.viewerData.viewerUuid&&(t.viewerUuid=e.fileBlock.viewerData.viewerUuid)),s.bbfile=JSON.stringify(t)}t.innerHTML=e.fileBlock.linkName,n.appendChild(t)}else if(e.blockType===s.Pq.Text&&e.textBlock){let t=document.createElement("div");t.dataset.bbid=e.id,t.innerHTML=e.textBlock,n.appendChild(t)}else if(e.blockType===s.Pq.Html&&(null==e?void 0:null===(t=e.fileBlock)||void 0===t?void 0:t.downloadUrl)){let t=document.createElement("a"),{downloadUrl:i,file:s}=e.fileBlock,{fileName:r}=s,o=t.dataset;o.bbid=e.id,o.bbfile=JSON.stringify({linkName:r}),o.bbtype=h,t.href=i,n.appendChild(t)}e.isNewToBbML&&delete e.isNewToBbML}),n.innerHTML){let i="";return t&&e&&e.length&&(i=f.CURRENT_VERSION_INDICATOR),i+n.innerHTML}return n.innerHTML}generateBlockId(){return"bbml-editor-id_"+l.V()}writeBbMLLink(e,t,n){if(0===n.length)return;let i="";n.length>1&&(i+="<ul>"),n.forEach(e=>{n.length>1&&(i+="<li>"),"lti"===e.type?i+='<a data-bbfile="'+e.data+'" data-bbtype="lti" href="#">'+e.title+"</a>":i+='<a href="'+e.url+'" target="_blank">'+e.title+"</a>",n.length>1&&(i+="</li>")}),n.length>1&&(i+="</ul>")}constructor(e,t,n){this.$q=e,this.DSCacheFactory=t,this.fileViewer=n}}f.$inject=["$q","DSCacheFactory",o.HV],i.module(u,["angular-data.DSCacheFactory",o.e1]).service(p,f)},739605:function(e,t,n){"use strict";n.d(t,{HV:function(){return g},e1:function(){return h}}),n(484769);var i=n(464027),s=n(951248),r=n(291146),o=n(429794),a=n(501),l=n(350383),c=n(176037),d=n(104485),u=n(168132),p=n(247126),m=n(443400);let h="ultra.service.blog",g="blogService";class f{subscribeToRedux(){this.$ngRedux.connect(null,e=>({loadBlog:t=>e(s.Nwg.blog.blogs.loadBlog(t)),persistContent:(t,n)=>e(s.Nwg.content.persistContent(t,n)),loadGradebookColumn:(t,n)=>e(s.Nwg.gradebookColumn.loadGradebookColumn({courseId:t,columnId:n.gradeColumnId})),persistGradebookColumn:(t,n)=>e(s.Nwg.gradebookColumn.persistGradebookColumn(t,n)),loadGradebookGrade:(t,n,i,r={})=>e(s.Nwg.gradebookGrade.loadBulkView(t,[n],[i],r))}))(this)}createContent(e){let{courseId:t,parentId:n,positionBefore:i,positionAfter:s,root:r}=e;return this.contentService.makeContentInContentTree(r,t,n,i,s)}updateContent(e,t,n){return e.$patch(n).$then(()=>{this.$rootScope.$broadcast("content-update",e),this.$rootScope.$broadcast("attempt-base-content-update",e,t)}).$asPromise()}fetchContent(e,t){return t.contents.$find(e,{expand:"alignedGoals,assignedGroups"}).$asPromise()}fetchBlog(e,t,n=!1){return this.$q.resolve(this.loadBlog({courseId:e,blogId:t,expandHasEntries:n})).then(e=>e.blog)}patchBlogContent(e,t,n,i){let s={id:t,courseId:e,contentDetail:{[c.Z.Journal.toString()]:{blog:n}}},r={id:t,courseId:e,contentDetail:{[c.Z.Journal.toString()]:{blog:i}}};return this.$q.resolve(this.persistContent(s,r)).then(e=>e.contents)}patchGradebookColumn(e,t){return this.$q.resolve(this.persistGradebookColumn(e,t)).then(e=>e.gradebookColumn)}patchBlogGrading(e,t,n,i,s,r){let o=!n.gradingAllowed&&!i.gradingAllowed,a=n.gradingAllowed&&!i.gradingAllowed,l=!n.gradingAllowed&&i.gradingAllowed,d=n.entryModificationAllowed!==i.entryModificationAllowed,u=n.commentModificationAllowed!==i.commentModificationAllowed;return!o||d||u?a||d||u?this.patchBlogContent(e,t,n,i).then(e=>null):l?this.patchBlogContent(e,t,n,i).then(n=>{let i=n[t],s=i.contentDetail[c.Z.Journal.toString()];return r.id=s.blog.gradeColumnId,r.courseId=e,this.patchGradebookColumn({},r)}):this.patchGradebookColumn(s,r):this.$q.resolve(null)}loadBlogGradebookColumn(e,t){return t&&t.gradeColumnId?this.$q.resolve(this.loadGradebookColumn(e,t).then(e=>e.gradebookColumn)):this.$q.resolve(null)}savePrompt(e,t){let n=e.description,i=[{tag:"table",replacementText:this.bbLocalize.translateSync({key:"course.content.tablePlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)})},{tag:"math",replacementText:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)}),replacementTextPlural:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder.plural",locale:this.bbLocalize.getLocale(this.$rootScope)})}],s=(0,m.BD)(t,i);return e.description=this.contentService.truncateDescription(s,o.t6.MAX_LENGTH_IN_CONTENT_ITEM),e.$patch(["contentDetail"]).$asPromise().then(()=>{this.$rootScope.$broadcast("content-update",e)}).catch(()=>{e.description=n})}loadBlogGradebookGrade(e,t,n,i={}){return this.$q.resolve(this.loadGradebookGrade(e,t,n,i))}constructor(e,t,n,i,s,r,o,a,l,c,d,u){this.bbLocalize=e,this.$rootScope=t,this.$q=n,this.$ngRedux=i,this.$modal=s,this.courseModel=r,this.UserModel=o,this.context=a,this.contentService=l,this.ultraState=c,this.gradebookPermissionService=d,this.entitlementService=u,this.subscribeToRedux()}}f.$inject=[r.serviceName,"$rootScope","$q","$ngRedux","$modal",u.N7.H,u.EA.HV,a.HV,o.HV,p.HV,d.HV,l.HV],i.module(h,[u.e1,r.moduleName,a.e1,o.e1,p.e1,d.e1,l.e1,u.e1]).service(g,f)},152625:function(e,t,n){"use strict";n.d(t,{HV:function(){return p},e1:function(){return u},iE:function(){return i}}),n(144152);var i,s,r=n(464027),o=n(942522),a=n(817446),l=n(501),c=n(247126),d=n(372457);let u="ultra.components.services.browserStorage",p="browserStorage";(s=i||(i={})).LocalStorage="localStorage",s.SessionStorage="sessionStorage";class m{serializeCurrentRouteScopes(e,t){return this.saveToStorage(this._getCurrentRouterStateObject(),t,e,function(e,t){if((!t||!(t instanceof Array)||!(t.length>=1e9))&&"_userModel"!==e&&(t&&t.$type&&t.$type===t.constructor&&"$pk"in t&&(t.ui.isRestModObject=!0),("_"!==e[0]||this.ui&&!0===this.ui.isRestModObject||t&&t.ui&&!0===t.ui.isRestModObject)&&("$"!==e[0]||-1!==["$viewValue","$modelValue"].indexOf(e))))return t})}deserializeCurrentRouteScopes(e,t){return this.getFromStorage(this._getCurrentRouterStateObject(),e)}deleteCurrentRouteScopes(e){return this.deleteFromStorage(this._getCurrentRouterStateObject(),e)}_getCurrentRouterStateObject(){return{componentState:this.ultraState.current.name.slice(this.ultraState.getBaseState().length+1),stateParams:this.ultraState.getCurrentUrlParams()}}saveToStorage(e,t,n,i){let s=this._getBrowserStorageCache(n);s.removeExpired();let r=o.stringify(t,i);return this._getUserEncryptionPassword().then(t=>this._encrypt(t,r).then(t=>{try{return s.put(this._toSortedKeyJSON(e),t)}catch(e){e.code&&e.code===this.QUOTA_EXCEEDED_ERR||e.code===this.QUOTA_EXCEEDED_ERR_FIREFOX?console.warn("Local storage is at capacity",e):console.warn("Local storage not permitted.",e),this.saveToStorage=(e,t,n)=>this.$q.when(void 0)}}))}getFromStorage(e,t,n){let i=this._getBrowserStorageCache(t),s=i.get(this._toSortedKeyJSON(e));return null!=s?this._getUserEncryptionPassword().then(e=>this._decrypt(e,s).then(e=>o.parse(e,n))):this.$q.when(void 0)}updateStorageKey(e,t,n,i){return this.getFromStorage(e,n).then(s=>{this.deleteFromStorage(e,n);let r=i||s;if(r)return this.saveToStorage(t,r,n)})}deleteFromStorage(e,t){let n=this._getBrowserStorageCache(t);return n.removeExpired(),!!n.remove(this._toSortedKeyJSON(e))}_toSortedKeyJSON(e){return JSON.stringify(e,(e,t)=>"object"!=typeof t?t:Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}))}_getBrowserStorageCache(e){let t=this.CACHE_PREFIX+"."+e.toString()+"."+this.contextUser.userId,n=this.DSCacheFactory.get(t);if(!n)switch(e){case i.LocalStorage:n=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,maxAge:this.BROWSER_STORAGE_RECORD_MAX_AGE,storageMode:i.LocalStorage.toString()});break;case i.SessionStorage:n=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,storageMode:i.SessionStorage.toString()})}return n}_getUserEncryptionPassword(){this._sjclForceReady();let e=this.sjcl.codec.base64.fromBits(this.sjcl.random.randomWords(6));return this.storageKeyPromise=this.storageKeyPromise||this.context.getPreference(this.BROWSER_STORAGE_PREFERENCE_KEY,e).then(e=>(e.value&&!e.$resolved&&e.$save(),e.value))}_sjclForceReady(){if(!this.sjcl.random.isReady()){let e=[];for(let t=0;t<32;t++)e.push(Math.floor(4294967296*Math.random()));this.sjcl.random.addEntropy(e,1024,"IE10 fallback entrophy")}}_encrypt(e,t){return this._isEncryptNativeSupported.then(n=>n?this._subtleCryptoEncrypt(e,t).then(e=>({SubtleCryptoEncrypted:e})):this.$q.when(this.sjcl.encrypt(e,t)).then(e=>({SjclCipherEncrypted:e})))}_decrypt(e,t){return this._isEncryptNativeSupported.then(n=>n?this._subtleCryptoDecrypt(e,t.SubtleCryptoEncrypted):this.$q.when(this.sjcl.decrypt(e,t.SjclCipherEncrypted)))}_subtleCryptoEncrypt(e,t){return this._subtleCryptoGetPasswordKey(e).then(e=>{let n=this.crypto.getRandomValues(new Uint8Array(16));return this.crypto.subtle.encrypt({name:"AES-CBC",iv:n},e,this._stringToArrayBuffer(t)).then(e=>({vector:this._arrayBufferToBase64(n),encrypted:this._arrayBufferToBase64(e)}))})}_subtleCryptoDecrypt(e,t){return this._subtleCryptoGetPasswordKey(e).then(e=>{let n=this._base64ToArrayBuffer(t.vector);return this.crypto.subtle.decrypt({name:"AES-CBC",iv:n},e,this._base64ToArrayBuffer(t.encrypted)).then(e=>this._arrayBufferToString(e))})}_subtleCryptoGetPasswordKey(e){return this.crypto.subtle.digest({name:"SHA-256"},this._stringToArrayBuffer(e)).then(e=>this.crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["encrypt","decrypt"]))}_arrayBufferToString(e,t){let n=t&&new Uint8Array(e)||new Uint16Array(e),i="";for(let e=0;e<n.length;e++)i+=String.fromCharCode(n[e]);return i}_arrayBufferToBase64(e){return window.btoa(this._arrayBufferToString(e,!0))}_stringToArrayBuffer(e,t){let n=t&&new ArrayBuffer(e.length)||new ArrayBuffer(2*e.length),i=t&&new Uint8Array(n)||new Uint16Array(n);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return n}_base64ToArrayBuffer(e){return this._stringToArrayBuffer(window.atob(e),!0)}constructor(e,t,n,i,s,r){this.$rootScope=e,this.$q=t,this.DSCacheFactory=n,this.context=i,this.ultraState=s,this.contextUser=r,this.QUOTA_EXCEEDED_ERR=22,this.QUOTA_EXCEEDED_ERR_FIREFOX=22,this.BROWSER_STORAGE_PREFERENCE_KEY="ultraui.browserstorage.key",this.CACHE_PREFIX="ultraui.browserstorage",this.sjcl=a,this.crypto=window.crypto,this.BROWSER_STORAGE_RECORD_MAX_AGE=864e5,this.BROWSER_STORAGE_RECORD_MAX_COUNT=10,this._isEncryptNativeSupported=this.crypto&&this.crypto.subtle?this.crypto.subtle.digest({name:"SHA-256"},this._stringToArrayBuffer("x")).then(()=>this.$q.when(!0)).catch(()=>this.$q.when(!1)):this.$q.when(!1)}}m.$inject=["$rootScope","$q","DSCacheFactory",l.HV,c.HV,d.HV],r.module(u,["angular-data.DSCacheFactory",l.e1,c.e1]).service(p,m)},322484:function(e,t,n){"use strict";n.d(t,{e1:function(){return y},HV:function(){return C}});var i,s,r=n(464027),o=n(805529),a=n(291146),l=n(168132),c=n(159212),d=n(864234),u=n(18447),p=n(759485);let m="cloud.account.tokens";(i=s||(s={}))[i.Uninitialized=0]="Uninitialized",i[i.Initialized=1]="Initialized",i[i.Failed=2]="Failed";class h{get isInitialized(){return this.status===s.Initialized}init(){let e=this.$q.defer(),t=this.loaderUrl||"https://cloud-storage-integration.blackboardcdn.com/loader/js/loader.js",n=t.substring(0,t.indexOf("/loader"));if(this.status===s.Initialized)e.resolve();else if(this.status===s.Failed)e.resolve();else{let i;let r=!1,o=s.Uninitialized,a=s.Uninitialized,l=()=>{r||o===s.Uninitialized||a===s.Uninitialized||(o===s.Initialized?(this.status=s.Initialized,e.resolve()):(this.status=s.Failed,e.resolve()),r=!0,this.$timeout.cancel(i))};i=this.$timeout(()=>{this.authenticator||(a=s.Failed,console.error("Authenticator initialization timed out. Disabling Authenticator Service.")),this.explorer||(o=s.Failed,console.error("CloudStorageIntegration initialization timed out.  Disabling CloudStorageIntegration Service.")),l()},u.default.cloudStorageIntegrationInitializationTimeout||1e4),this.$q.all({CloudStorageIntegration:this.bbScriptLoader.getScript(t,{exports:"CloudStorageIntegration"}).then(e=>{this.explorer=e.explorer,o=s.Initialized,l()}),CloudStorageIntegrationAuth:this.bbScriptLoader.getScript(n+"/authenticator/js/cloud-storage-integration-authenticator.js",{exports:"CloudStorageIntegration"}).then(e=>{this.authenticator=e.authenticator,a=s.Initialized,l()})}).catch(()=>{this.authenticator||(a=s.Failed,console.error("Failed to load cloudStorageIntegration authenticator. Disabling Authenticator Service.")),this.explorer||(o=s.Failed,console.error("Failed to load cloudStorageIntegration.  Disabling CloudStorageIntegration Service.")),l()})}return e.promise}getExplorer(e){let t=e?this.explorerInstance_multi:this.explorerInstance_single;if(!t){let n={app_id:this.clientId,retrieve_token:!0,multiselect:e,display_backdrop:!0,create_folder:!1,types:["files"],text_direction:this.bbLocalize.isRTL(this.$rootScope)?"rtl":"ltr",show_dummy_provider:this.showDummyProvider};(this.enabledServices||[]).length>0&&(n.services=this.enabledServices),this.apiUrl&&(n.base_url=p.SV(this.apiUrl)),this.useLoaderExplorer&&(n.use_loader_explorer=this.useLoaderExplorer),n.persist="none",(t=this.explorer(n)).on("success",e=>{this.currentChooserPromiseObject&&(this.currentChooserPromiseObject.resolve(e),this.currentChooserPromiseObject=null)}),t.on("cancel",()=>{this.currentChooserPromiseObject&&(this.currentChooserPromiseObject.resolve(),this.currentChooserPromiseObject=null)}),t.on("error",e=>{this.currentChooserPromiseObject&&(this.currentChooserPromiseObject.reject(e),this.currentChooserPromiseObject=null)}),t.on("addAccount",e=>{this.preference.getPreference(m).then(t=>{let n=this.deleteCloudStorageIntegrationAccount(JSON.parse(t.value),e.id);n.push(e),this.preference.setPreference(m,JSON.stringify(n))}).catch(()=>{let t=[];t.push(e),this.preference.setPreference(m,JSON.stringify(t))})}),t.on("deleteAccount",e=>{this.preference.getPreference(m).then(t=>{let n=this.deleteCloudStorageIntegrationAccount(JSON.parse(t.value),e);this.preference.setPreference(m,JSON.stringify(n))})}),e?this.explorerInstance_multi=t:this.explorerInstance_single=t}return t}openFilePicker(e,t){if(this.currentChooserPromiseObject){let e=this.$q.defer();return e.reject(Error("multiple explorer instances are not allowed")),e.promise}return this.currentChooserPromiseObject=this.$q.defer(),this.init().then(()=>{if(this.status===s.Initialized){let n=this.getExplorer(t);return this.preference.getPreference(m,"[]",!0).then(t=>{let i=JSON.parse(t.value).map(e=>e.bearer_token.key);n.update({locale:e,tokens:i}),n.choose()}).catch(t=>{console.error(t),n.update({locale:e,tokens:[]}),n.choose()})}}),this.currentChooserPromiseObject.promise}getCloudStorageIntegrationInfo(){return{client_id:this.clientId,base_url:this.apiUrl}}deleteCloudStorageIntegrationAccount(e,t){return e.filter(e=>e.id!==t)}constructor(e,t,n,i,r,o){this.$q=e,this.bbLocalize=t,this.$timeout=n,this.bbScriptLoader=i,this.preference=r,this.$rootScope=o,this.credentials={},this.status=s.Uninitialized,this.enabledServices=u.default.cloudStorageIntegrationServices,this.showDummyProvider=!1}}var g=n(211796),f=n(852512),b=n(837545);function v(e,t){return function(n,i){t(n,i,e)}}let y="ultra.service.cloud.drive",C="cloudDrive";class S{openFilePicker(e,t){return(0,b.h)(this.cloudDriveStorage.openFilePicker(e,t))}constructor(e){this.cloudDriveStorage=e}}class E{isCloudServiceAvailable(){return(0,b.h)(this.service.isCloudServiceAvailable())}get cloudDriveStorage(){return new S(this.service.cloudDriveStorage)}constructor(e,t,n){this.service=e,this.CloudDriveModel=t,this.CloudDriveTaskModel=n,this.key=f.fz.CloudDriveService}}class I{cloudDriveStorageFactory(e){let t=new h(this.$q,this.bbLocalize,this.$timeout,this.bbScriptLoader,this.preferences,this.$rootScope);return t.clientId=e.clientId,t.redirectUrl=e.redirectUrl,t.provider=e.name,t.apiUrl=e.apiUrl,t.loaderUrl=e.loaderUrl,t.useLoaderExplorer=e.useLoaderExplorer,t.persist=e.persist,t.tokens=e.tokens,t}getCloudDrivesInfo(){let e=this.$q.defer();return this.cloudDrivesInfo?e.resolve():this.CloudDriveModel.$collection().$fetch().$then(t=>{this.cloudDrivesInfo=t,r.forEach(this.cloudDrivesInfo,e=>{"cloudstorageintegration"===e.name&&(this.cloudDriveStorage=this.cloudDriveStorageFactory(e))}),e.resolve()},t=>{e.reject(t)}),e.promise}initializeCloudDrive(){let e=this.$q.defer();return this.getCloudDrivesInfo().then(()=>{this.cloudDriveStorage?this.cloudDriveStorage.isInitialized&&this.currentLocale===this.bbLocalize.getAppLocale()?e.resolve(this.cloudDriveStorage):(this.currentLocale=this.bbLocalize.getAppLocale(),this.cloudDriveStorage.init().then(()=>{e.resolve(this.cloudDriveStorage)})):e.reject("No such cloud drive!")}),e.promise}isCloudServiceAvailable(){let e=this.$q.defer();return this.initializeCloudDrive().then(t=>{e.resolve(t.isInitialized)}).catch(()=>{e.resolve(!1)}),e.promise}getDriveUserInfo(){let e=this.$q.defer(),t=this.cloudDriveStorage.driveUserInfo,n=this.cloudDriveStorage.accessToken;return t?e.resolve(t):n?e.resolve(this.CloudDriveModel.$new("CloudStorageIntegration").me.$fetch({accessToken:n}).$asPromise()):e.resolve(),e.promise}constructor(e,t,n,i,s,r,o,a,l){this.$rootScope=e,this.$q=t,this.$timeout=n,this.bbLocalize=i,this.CloudDriveModel=s,this.CloudDriveTaskModel=r,this.windowSize=o,this.bbScriptLoader=a,this.preferences=l,this.isGettingFilesInfo=!1,this.currentLocale=this.bbLocalize.getAppLocale(),(0,f.gM)(new E(this,s,r))}}I=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([v(0,(0,g.tB)("$rootScope")),v(1,(0,g.tB)("$q")),v(2,(0,g.tB)("$timeout")),v(3,(0,g.tB)(a.serviceName)),v(4,(0,g.tB)(l.Os.H)),v(5,(0,g.tB)(l.xd.H)),v(6,(0,g.tB)(c.HV)),v(7,(0,g.tB)(o.HV)),v(8,(0,g.tB)(d.HV))],I),r.module(y,[l.e1,c.e1,o.e1,d.e1]).service(C,I)},809226:function(e,t,n){"use strict";n.d(t,{HV:function(){return p},e1:function(){return u}});var i=n(464027),s=n(855819),r=n(247126),o=n(305233),a=n(470269),l=n(451251),c=n(211796);function d(e,t){return function(n,i){t(n,i,e)}}let u="ultraUi.components.services.contentCollection",p="ContentCollection";class m{handleContentCollectionResponse(e,t=null){this.postMessageDispatcherService.registerEventHandler("classic-picker-cancel",(t,n)=>{this.timeoutService(()=>{l.pn(this.stateService.current.name,"peek.content-collection-picker")&&this.stateService.leavePeekState(this.stateService.current.name),window!==n&&n.close()},e,0)},e),this.postMessageDispatcherService.registerEventHandler("classic-picker-submit",(n,i)=>{this.timeoutService(()=>{t?e.$emit("bb-bbml-editor-add-from-content-collection",t,n.items):this.getCcFilesDeferred.resolve(n.items),l.pn(this.stateService.current.name,"peek.content-collection-picker")&&this.stateService.leavePeekState(this.stateService.current.name),window!==i&&i.close()},e,0)},e,!0)}getOpenContentCollectionFunction(e){return t=>{this.handleContentCollectionResponse(e),this.getCcFilesDeferred=this.$q.defer(),this.getCcFilesDeferred.promise.then(e=>{t(e)}),this.stateService.goPeekState(a.xh.CONTENT_COLLECTION_PICKER,{pickerType:"File",multi:"true"})}}constructor(e,t,n,i){this.$q=e,this.postMessageDispatcherService=t,this.stateService=n,this.timeoutService=i}}m=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([d(0,(0,c.tB)("$q")),d(1,(0,c.tB)(s.HV)),d(2,(0,c.tB)(r.HV)),d(3,(0,c.tB)(o.H))],m),i.module(u,[]).service(p,m)},429794:function(e,t,n){"use strict";n.d(t,{$_:function(){return S},HV:function(){return I},Ro:function(){return w},e1:function(){return E},pr:function(){return k},t6:function(){return P}});var i=n(464027),s=n(276635),r=n(866688),o=n(108404),a=n(834266),l=n(168132),c=n(529462),d=n(759485),u=n(670278),p=n(951248),m=n(319434),h=n(916415),g=n(408027),f=n(555342),b=n(852512),v=n(837545),y=n(838700),C=n(359597);let S=9e5,E="ultra.services.content",I="contentService",w="content-update";class A extends u.v{static getInstance(){return A._instance}classConversationIndicatorRemoved(e,t,n,i){this.$emitEvent(A.CLASS_CONVERSATION_INDICATOR_REMOVED,e,t,n,i)}groupConversationIndicatorRemoved(e,t,n,i){this.$emitEvent(A.GROUP_CONVERSATION_INDICATOR_REMOVED,e,t,n,i)}$onClassConversationIndicatorRemoved(e){return super.$onEvent(A.CLASS_CONVERSATION_INDICATOR_REMOVED,e)}$onGroupConversationIndicatorRemoved(e){return super.$onEvent(A.GROUP_CONVERSATION_INDICATOR_REMOVED,e)}constructor(){if(A._instance)throw Error("Error: Instantiation failed: Use IndicatorCacheService.getInstance() instead of new.");super(),A._instance=this}}function k(e,t){return e.$on("rootNodeElementFetched",t)}A._instance=new A,A.CLASS_CONVERSATION_INDICATOR_REMOVED="class-conversation-indicator-removed",A.GROUP_CONVERSATION_INDICATOR_REMOVED="group-conversation-indicator-removed";class x{generateDeleteConfirmationKey(e,t,n){let i=this.service.generateDeleteConfirmationKey(e,t,n);return(0,v.h)(i)}constructor(e){this.service=e,this.key=b.fz.Content}}class T{subscribeToRedux(e){e.connect(null,e=>({deleteContentInStore:t=>e(p.Nwg.content.deleteContentInStore(t)),loadContents:t=>e(p.Nwg.content.loadContents(t))}))(this)}truncateDescription(e,t){if(t=t||T.MAX_LENGTH,!e||e.length<=t)return e;let n=" ...";t-=n.length;let i=e.lastIndexOf(" ",t);return i<=0&&(i=t),e.substr(0,i)+n}findRootNode(e,t,n){let i=this.getCacheKey(t,e.$pk)+(null!=n?n:""),s=this.rootNodeCache.get(i);return s||(s=e.contents.$find(t.toString()),this.rootNodeCache.put(i,s),function(e,t,n){e.$broadcast("rootNodeElementFetched",t,n)}(this.$rootScope,e.$pk,t)),s}findContentItem(e,t){return e.contents.$find(t,{expand:"alignedGoals,assignedGroups,selfEnrollmentGroups.group"}).$allow([403])}getCacheKey(e,t){return e.toString()+t}getSettings(e){return this.settingsCache.get(e)}putSettings(e,t){return this.settingsCache.put(e,t)}removeSettings(e){return this.settingsCache.remove(e)}getCourseIndicators(e){return this.indicatorsCache.get(`courseId_${e}`)}putCourseIndicators(e,t){return this.indicatorsCache.put(`courseId_${e}`,t)}removeCourseIndicators(e){return this.indicatorsCache.remove(`courseId_${e}`)}refreshContentInCache(e){if(!e)return;let t=e.courseId,n=(0,C.k)();for(let i=0;i<n.length;i++){let s=n[i],r=this.getCacheKey(s,t),o=this.rootNodeCache.get(r);if(o){let t=this.updateCachedContent(o,e);if(t){this.rootNodeCache.put(r,o);return}}}}updateCachedContent(e,t){if(e.id===t.id)return null!=t.isAvailable&&(e.isAvailable=t.isAvailable),null!=t.visibility&&(e.visibility=t.visibility),null!=t.isPartiallyVisible&&(e.isPartiallyVisible=t.isPartiallyVisible),null!=t.isGroupContent&&(e.isGroupContent=t.isGroupContent),null!=t.assignedGroups&&(e.assignedGroups=t.assignedGroups),t.adaptiveReleaseRules&&(e.adaptiveReleaseRules=t.adaptiveReleaseRules),e.title=t.title,e.attachedForumLink=t.attachedForumLink,e.ui&&(void 0===e.ui.hasConversationAttached||e.isScorm())&&(e.ui.hasConversationAttached=!!t.attachedForumLink),e.updateProctoringSettings(t),!0;if(e.children)for(let n=0;n<e.children.length;n++){let i=e.children[n];if(this.updateCachedContent(i,t))return!0}return!1}getOrMakeContentInContentTree(e,t,n,i,s,r){return n?this.getContentInContentTree(e,t,n):this.makeContentInContentTree(e,t,i,s,r)}getContentInContentTree(e,t,n){let i,s;return e.$asPromise().then(e=>(e.children=e.children||e.getChildren({limit:0,recursive:!0}),e.children.$asPromise())).then(()=>{if(n)return(i=e.findInTreeById(n))?!i.isSafeAssignOn()&&(i.isTest()||i.isAssignment())&&i.$fetch({fields:"safeAssignOptions"}):i=this.CourseModel.$new(t).contents.$find(n,{expand:"alignedGoals,assignedGroups,selfEnrollmentGroups.group"}).$allow([403]),i.$asPromise()}).then(()=>{if(i&&i.parentId)return(s=e.findInTreeById(i.parentId))||(s=this.CourseModel.$new(t).contents.$find(i.parentId)),s.$asPromise()}).then(()=>({content:i,parentFolder:s}))}makeContentInContentTree(e,t,n,i,s,r){let o,a;return e.$asPromise().then(e=>(e.children=e.children||e.getChildren({limit:0}),e.children.$asPromise())).then(()=>(a=this.getParentFolder(n,t,e)).$asPromise()).then(()=>(a.children=a.children||a.getChildren({limit:0}),a.children.$asPromise())).then(()=>{let e=a.children.indexOfItemById(void 0);return!r&&e>=0&&a.children[e].positionBefore===i&&a.children[e].positionAfter===s?o=a.children[e]:(o=a.children.$build(),(e=a.children.getInsertionIndex(i,s,!0,a.hasMoreChildren))>=0&&o.addAndRevealAtIndex(e),a.children.paging&&a.children.paging.count++),null!=i&&(o.positionBefore=i),null!=s&&null==i&&(o.positionAfter=s),o.parentId=n||a&&a.id,o.depth=a&&null!=a.depth?a.depth+1:void 0,o.courseId=t,{content:o,parentFolder:a}})}isCourseContentLinkWithLinkSourceId(e,t){if(!e.contentDetail)return!1;let n=e.contentDetail[e.contentHandler.toString()];return!!n&&e.isCourseLink()&&n.linkSourceId===t}addOrUpdateContentInCourseLink(e,t,n){var i,s;if(n>-1&&(null===(i=e.children)||void 0===i?void 0:i.length)>=n)return e.children.splice(n,0,t),e.children.paging.count++,this.$q.when();let r=[];return null===(s=e.children)||void 0===s||s.forEach(e=>{e.id===t.id&&r.push(e.$fetch().$asPromise())}),this.$q.when(r).then(()=>{})}getParentFolder(e,t,n){let i;return e?(i=n.findInTreeById(e))||(i=this.CourseModel.$new(t).contents.$find(e).$allow([g.oji.Forbidden])):i=n,i}makeSoftLinkContentInContentTree(e,t,n,i,s,r){return this.makeContentInContentTree(t,n,i,s,r).then(t=>{let n=t.content;return e&&e.$pk&&(n.contentHandler=l.courseContent.ContentHandler.CourseLink,n.ui.linkSource=e),n.id=null,n.description=e.description,n.title=e.title,n.courseId=e.courseId,n.isAvailable=e.isAvailable,n.visibility=e.visibility,n.contentDetail={"resource/x-bb-courselink":{linkSourceId:e.id,linkSourceTable:"CONTENT"}},n})}isEmpty(e){return!e||0===e.trim().length}parseForumId(e){let t=e.split("/");return t[t.length-1]}determineVisibility(e,t){return e?g.hbA.Visible:g.hbA.Hidden}generateDeleteConfirmationKey(e,t,n){let i=this.$q.defer();return e.ui.modalShowType=o.y_.UserChoice.toString(),(e.isFolder()||e.isLearningModule())&&!e.isRoot()?e.isBbPage()?(e.ui.deleteConfirmationKey=m.GQ.Page.toString(),(0,p.gUR)(e.courseId,e.id).then(t=>{t&&(e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+this.getHasCourseLinkSuffix(n),e.ui.modalShowType=o.y_.Always.toString())}).catch(()=>{}).finally(()=>{i.resolve(e)})):e.getChildren().$then(async s=>{if(s&&s.length>0){let r=await (0,p.gUR)(e.courseId,e.id);if(r)e.ui.deleteConfirmationKey=e.contentHandler+this.getHasCourseLinkSuffix(n)+"-and-content",i.resolve(e);else{let n=s.filter(e=>e&&e.isDiscussion()).length;e.hasGradedContentItems().then(r=>{r?e.ui.deleteConfirmationKey=e.contentHandler+"-contains-graded-items":n===s.length?e.ui.deleteConfirmationKey=e.contentHandler+"-all-discussions-"+t:n>0?t===y.m.Discussions?e.ui.deleteConfirmationKey=e.contentHandler+"-no-discussions":e.ui.deleteConfirmationKey=e.contentHandler+"-contains-discussions":e.ui.deleteConfirmationKey=e.contentHandler+"-no-discussions",i.resolve(e)})}}else(0,p.gUR)(e.courseId,e.id).then(t=>{t?(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.contentHandler+this.getHasCourseLinkSuffix(n)):e.ui.deleteConfirmationKey=e.contentHandler+"-empty",i.resolve(e)})}):e.canHaveSharedGradingColumn()&&e.hasGradingColumn()&&m.GQ.PartnerCloud.isEqualTo(e.contentHandler)?this.PartnerContentIdModel.getContentIds(e.courseId,e.linkRef).then(t=>{t.contentIds.length>1?(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-shared-grade-column",i.resolve(e)):this.checkForAttempts(e,i,n)}).catch(t=>{this.errorModal.handleApiError(t.$response),i.reject(e)}):this.checkForAttempts(e,i,n),i.promise}getHasCourseLinkSuffix(e){return e?"-has-org-links":"-has-course-links"}getCourseLinkSuffix(e){return e?"-org-link":"-course-link"}checkForAttempts(e,t,n){e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),(0,p.gUR)(e.courseId,e.id).then(t=>{t&&(e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+this.getHasCourseLinkSuffix(n),e.ui.modalShowType=o.y_.Always.toString())}).catch(()=>{}).finally(()=>{if(e.canHaveAttempts()&&e.hasGradingColumn())e.ui.modalShowType=o.y_.Always.toString(),e.getAttemptCount().then(n=>{n>0&&(e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-data"),t.resolve(e)}).catch(n=>{403===n.$response.status?(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-unknown",t.resolve(e)):(this.errorModal.handleApiError(n.$response),t.reject(e))});else if(m.GQ.Discussion.isEqualTo(e.contentHandler))e.$fetch().$then(n=>{var i;e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey();let s=n.contentDetail[m.GQ.Discussion.toString()];s&&(null===(i=n.genericReadOnlyData)||void 0===i?void 0:i.hasGradeColumn)&&(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-graded"),t.resolve(e)});else if(e.isJournal())e.$fetch().$then(n=>{let i=n.contentDetail[m.GQ.Journal.toString()].blog;i&&i.gradingAllowed&&(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-graded"),t.resolve(e)});else if(m.GQ.CourseLink.isEqualTo(e.contentHandler)){var i,s;let r=e.getLinkContentSource();if(m.GQ.Discussion.isEqualTo(null==r?void 0:r.contentHandler)){e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey();let t=r.contentDetail[m.GQ.Discussion.toString()];t&&(null===(i=r.genericReadOnlyData)||void 0===i?void 0:i.hasGradeColumn)&&(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-graded")}else{let t=this.getCourseLinkSuffix(n),i=(null==r?void 0:r.isBbPage())?e.ui.deleteConfirmationKey=m.GQ.Page.toString():null===(s=null==r?void 0:r.getContentDisplay())||void 0===s?void 0:s.deleteKey();i?e.ui.deleteConfirmationKey=i+t:e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+t}e.ui.modalShowType=o.y_.Always.toString(),t.resolve(e)}else t.resolve(e)})}deleteContent(e){if(e.id){e.ui.isDeleted=!0;let t={};return(e.isGroupContent||e.isFolder())&&(t.deleteGroups=!0),(e.canHaveAttempts()||e.isDiscussion()||e.isFolder())&&(t.deleteGrades=!0),e.withParams(t).$destroy().$suppressErrorDialog().$asPromise().then(t=>(this.deleteContentInStore&&this.deleteContentInStore(e.id),t)).catch(t=>{e.ui.isDeleted=!1;let n=t.$response;return this.assessment.isExternallyRefQuestionsAPIError(n.data)?this.assessment.openHasExternallyRefQuestionsModal(this.getExternallyRefQuestionsModalType(e.contentHandler)):this.errorModal.handleApiError(n),this.$q.reject(n)})}return this.$q.when()}getExternallyRefQuestionsModalType(e){return m.GQ.Folder.isEqualTo(e)?r.NZ.FOLDER:r.NZ.ASSESSMENT}canOnlyCreateDiscussion(e){return e&&e.children&&e.children.permissions&&!e.children.permissions.create&&e.children.permissions.contentHandlerPermissionMap&&e.children.permissions.contentHandlerPermissionMap.createDiscussion}canCreateAllContent(e){return e&&e.children&&e.children.permissions&&e.children.permissions.create}convertBbMLToAttemptFileContentBlocks(e){let t=[];return this.convertBbMLToContentBlocks(e).forEach(e=>{"attemptFileBlock"in e&&t.push(e.attemptFileBlock)}),t}convertAttemptFileContentBlocksToBbML(e){let t=[];return e.forEach(e=>{t.push({attemptFileBlock:e})}),this.convertContentBlocksToBbML(t,"question1 ")}convertBbMLToContentBlocks(e){let t=[],n=document.createElement("div");n.innerHTML=e;for(let e=0;e<n.children.length;e++){let i=n.children[e];if("A"===i.tagName)t.push(this.convertBbMLToFileBlock(i));else if("DIV"===i.tagName){let e=this.getBlockIdFromBbML(i);t.push({textBlock:i.innerHTML.trim(),id:e})}}return t}convertBbMLToFileBlock(e){let t={file:{}};if(e.dataset&&e.dataset.bbfile)try{let n=JSON.parse(e.dataset.bbfile);t.alternativeText=n.alternativeText,t.ui={isRenderedInline:(0,f.tq)(n.render)},t.linkName=n.linkName,t.currentMimeType=n.mimeType}catch(e){}else if(e.dataset&&e.dataset.bbmedia)try{let n=JSON.parse(e.dataset.bbmedia);t.alternativeText=n.alternativeText,t.ui={isRenderedInline:(0,f.tq)(n.render)}}catch(e){}t.linkName||(t.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),t.currentMimeType||(t.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1));let n=e.href;0===n.indexOf("http://localhost")&&(n=d.uI(n.substr(16))),t.downloadUrl=n;let i=n.match(/xid-(\d+_\d+)/);i&&(t.id=i[1]);let s=this.getBlockIdFromBbML(e);return{attemptFileBlock:t,id:s}}convertContentBlocksToBbML(e,t){let n=document.createElement("div");return e.forEach(e=>{if("attemptFileBlock"in e){let t=document.createElement("a");if(t.href=e.attemptFileBlock.downloadUrl,e.attemptFileBlock.ui){let n={};e.attemptFileBlock.ui.isRenderedInline?n.render=p.I_d.Inline:n.render=p.I_d.Attachment,e.attemptFileBlock.alternativeText&&(n.alternativeText=e.attemptFileBlock.alternativeText),e.attemptFileBlock.linkName&&(n.linkName=e.attemptFileBlock.linkName),e.attemptFileBlock.currentMimeType&&(n.mimeType=e.attemptFileBlock.currentMimeType),t.dataset.bbfile=JSON.stringify(n)}e.id&&(t.id=e.id),t.innerHTML=e.attemptFileBlock.linkName+"?"+e.attemptFileBlock.currentMimeType,n.appendChild(t)}else if("textBlock"in e){let t=document.createElement("div");e.id&&(t.id=e.id),t.innerHTML=e.textBlock,n.appendChild(t)}e.isNewToBbML&&delete e.isNewToBbML}),(t||"")+n.innerHTML}getBlockIdFromBbML(e){return e.id?e.id:this.generateBlockId()}generateBlockId(){return"bbml-editor-id_"+c.V()}fetchIndicatorsPerRequest(e){let t=this.fetchIndicatorsPromiseCache[e];return t||(t=this.CourseModel.$new(e).indicators.$fetch().$asPromise().then(t=>(this.putCourseIndicators(e,t),t),e=>{401!==e.$response.status&&(e.$response.status=null),console.error("Fetch indicators error!")}).finally(()=>{delete this.fetchIndicatorsPromiseCache[e]}),this.fetchIndicatorsPromiseCache[e]=t),t}fetchIndicators(e,t){if(t)return this.fetchIndicatorsPerRequest(e);let n=this.getCourseIndicators(e);return n?this.$q.when(n):this.fetchIndicatorsPerRequest(e)}getCourseContentCache(e,t){let n=this.getCourseIndicators(e);return n?n.filter(e=>e.contentId===t)[0]:null}setClassConversationHasIndicatorToFalseInCache(e,t,n){let i=this.getCourseIndicators(e);if(i){let r=s.find(i,e=>e.contentId===t);r&&(r.classConversationHasIndicator=!1,r.groupIds||(i=s.filter(i,e=>e.contentId!==t)),this.putCourseIndicators(e,i),this.indicatorCacheService.classConversationIndicatorRemoved(e,t,!!r.groupIds,n))}}removeGroupIdFromIndicatorCache(e,t,n,i){if(!n)return null;let r=this.getCourseIndicators(e);if(r){let o=s.find(r,e=>e.contentId===t);if(o){if(o.groupIds=s.filter(o.groupIds,e=>n!==e),o.groupIds&&0===o.groupIds.length){delete o.groupIds,o.classConversationHasIndicator||(r=s.filter(r,e=>e.contentId!==t)),this.putCourseIndicators(e,r),this.indicatorCacheService.groupConversationIndicatorRemoved(e,t,o.classConversationHasIndicator,i);return}this.putCourseIndicators(e,r)}}}clearContentGroups(e,t){let n=this.$q.defer();if(e.assignedGroups){if(e.assignedGroups.some(e=>!e.group))throw Error("Expected group to be expanded on content group assignments when clearing groups.");let i=e.assignedGroups.filter(e=>!e.group.groupSetId).map(e=>({method:"DELETE",relativeUrl:e.groupId}));i.length>0&&t.groups.batchUpdate(i),e.isGroupContent=!1,e.assignedGroups=[],e.saveAssignedGroups(!0).$asPromise().then(()=>{this.$rootScope.$broadcast(w,e),n.resolve(e)})}else n.resolve(e);return n.promise}updateVisibility(e){this.loadContents({courseId:e.courseId,contentId:l.courseContent.ContentHandler.CourseLink.isEqualTo(e.contentHandler)?e.getLinkContentSource().id:e.id,fetchAssociatedCourseLinks:!0})}constructor(e,t,n,i,s,r,o,a){this.$q=e,this.DSCacheFactory=t,this.CourseModel=n,this.PartnerContentIdModel=i,this.errorModal=s,this.assessment=r,this.$rootScope=o,this.$ngRedux=a,this.checkShouldAddOrUpdateChildInCourseLink=(e,t,n)=>{var i;return this.$q.when(null===(i=e.children)||void 0===i?void 0:i.filter(e=>!!e.children&&this.isCourseContentLinkWithLinkSourceId(e,t.parentId)).forEach(e=>{if(!e.children||!(e.children.filter(e=>this.isCourseContentLinkWithLinkSourceId(e,t.parentId)).length>0))return this.addOrUpdateContentInCourseLink(e,t,n);this.checkShouldAddOrUpdateChildInCourseLink(e,t,n)}))},this.rootNodeCache=t.createCache("rootNodes"),this.settingsCache=t.createCache("contentSettings"),this.indicatorsCache=t.createCache("indicators",{maxAge:S,deleteOnExpire:"aggressive"}),this.fetchIndicatorsPromiseCache={},this.indicatorCacheService=A.getInstance(),h.ZU.OnRootScope(o,"content-update",(e,t)=>this.refreshContentInCache(t)),this.subscribeToRedux(a),(0,b.gM)(new x(this))}}T.MAX_LENGTH=60,T.MAX_LENGTH_IN_CONTENT_ITEM=750,T.$inject=["$q","DSCacheFactory",l.N7.H,l.YM.H,a.HV,r.HV,"$rootScope","$ngRedux"];class P extends T{}i.module(E,["angular-data.DSCacheFactory",l.e1,a.e1,r.e1]).service(I,T)},501:function(e,t,n){"use strict";n.d(t,{HV:function(){return y},e1:function(){return v}});var i,s,r=n(276635),o=n(464027),a=n(319434),l=n(539210),c=n(350383),d=n(372457),u=n(822658),p=n(864234),m=n(763674),h=n(168132),g=n(684710),f=n(852512),b=n(837545);let v="ultra.service.context",y="context";(i=s||(s={})).Administrator="administrator",i.NonStudent="nonstudent",i.Student="student",i.ClassicNonStudent="classicnonstudent",i.ClassicStudent="classicstudent";class C{isTelemetryEnabled(){return(0,b.h)(this.service.isTelemetryEnabled())}constructor(e){this.service=e,this.key=f.fz.Context}}class S{get course(){return{model:this.currentCourse.course,membership:this.currentCourseMembership.courseMembership}}get courseId(){return this.currentCourse.courseId}set courseId(e){this.currentCourse.load(e)}registerCourseContextDetection(){let e=this;this.$rootScope.$on(u.An,(t,n)=>{e.courseId=n.id})}overrideHelpVariant(e){this.helpVariantOverride=e}guessHelpVariant(){let e=[];if(this.helpVariantOverride){let e=this.helpVariantOverride;return this.helpVariantOverride=null,this.$q.when([e])}return this.course&&this.course.membership&&!this.course.membership.isStudentOrGuestMembership()&&e.push(this.course.model.isClassic()?s.ClassicNonStudent:s.NonStudent),this.getHelpVariantDependencies().then(t=>{let n=t[0],i=t[1];if(n&&e.push(s.Administrator),this.course&&this.course.model)n&&e.push(this.course.model.isClassic()?s.ClassicNonStudent:s.NonStudent);else{let t=s.Student,n=i.some(e=>!e.isStudentOrGuestMembership());n&&(t=s.NonStudent),e.push(t)}return 0===e.length&&e.push(this.course&&this.course.model&&this.course.model.isClassic()?s.ClassicStudent:s.Student),r.uniq(e)})}getSystemInfo(){return this.systemInfo||(this.systemInfo=window.__initialContext&&window.__initialContext.systemInfo?this.SystemInfoModel.$buildRaw(window.__initialContext.systemInfo):this.SystemInfoModel.$new().$fetch().$suppressErrorDialog()),this.systemInfo}getTheme(){return this.theme||(this.theme=this.ThemeModel.$new({themeId:this.getBrand().themeId}).$fetch()),this.theme}getServerTime(){return g.Z.getServerTime()}getServerTimeAsEpochTime(){return g.Z.getServerTimeAsEpochTime()}getPrivacyPolicyUrls(){return this.privacyPolicy||(this.privacyPolicy=this.PrivacyPolicyModel.$new().$fetch().$suppressErrorDialog()),this.privacyPolicy}getCourseId(){return this.currentCourse.courseId}getCurrentUserId(){return this.currentUser.userId}userHasGradebookModificationEntitlement(){let e=this.getCourseId();return e?this.EntitlementService.hasCourseEntitlement(l.SE.ModifyGradebook,e).then(e=>e):this.$q.when(!1)}getBrand(){return this.brand||(this.brand=window.__initialContext&&window.__initialContext.brand?this.BrandModel.$buildRaw(window.__initialContext.brand):this.BrandModel.getCurrent()),this.brand}getUiVersion(){return window.__initialContext&&window.__initialContext.uiVersion||""}getPreference(e,t){return this.preferenceService.getPreference(e,t)}getPredictPreference(e,t){let n=this.$q.defer(),i=!Object.keys(this.preferenceService.preferences).some(e=>e.indexOf(".predict.")>0);if(i){if(this.predictInitialDefer)return this.predictInitialDefer.promise.then(()=>{n.resolve(this.preferenceService.preferences[e])}),n.promise;this.predictInitialDefer=n,this.PredictFtueModel.getFtues().then(i=>{if(i){let s=null;i.forEach(t=>{this.preferenceService.preferences[t.key]=t,e===t.key&&(s=t)}),s?n.resolve(s):(this.preferenceService._addPreferenceToCache(e,t),n.resolve(this.preferenceService.preferences[e]))}else{if(void 0===t){n.reject(i);return}this.preferenceService._addPreferenceToCache(e,t),n.resolve(this.preferenceService.preferences[e])}},e=>{n.reject(e)})}else Object.prototype.hasOwnProperty.call(this.preferenceService.preferences,e)||this.preferenceService._addPreferenceToCache(e,t),n.resolve(this.preferenceService.preferences[e]);return n.promise}getUltraConversionReportId(){return this.course.model.ultraConversionReportId}isTelemetryEnabled(){return this.getSystemInfo().$asPromise().then(e=>e.telemetryEnabled)}setPreference(e,t,n){return this.preferenceService.setPreference(e,t,n)}setPredictPreference(e,t,n){if(e.length>p.Cm)throw Error("Preference key is too long!");return this.preferenceService._addPreferenceToCache(e,t,n),this.PredictFtueModel.setFtue(e)}constructor(e,t,n,i,s,o,l,c,d,u,p,m){this.$rootScope=e,this.$q=t,this.currentUser=n,this.EntitlementService=i,this.currentCourse=s,this.currentCourseMembership=o,this.preferenceService=l,this.BrandModel=c,this.SystemInfoModel=d,this.PrivacyPolicyModel=u,this.PredictFtueModel=p,this.ThemeModel=m,this.helpVariantOverride=null,this.predictInitialDefer=null,this.getHelpVariantDependencies=r.memoize(function(){return this.$q.all([this.EntitlementService.hasSystemEntitlement(a.lP.ViewAdminTop),this.currentUser.getMemberships()])}),this.registerCourseContextDetection(),this._course=new class{get model(){return s.course}get membership(){return o.courseMembership}},(0,f.gM)(new C(this))}}S.$inject=["$rootScope","$q",d.HV,c.HV,u.HV,m.HV,p.HV,h.UQ.H,h.wg.H,h.Ut.H,h.tO.H,h.rS.H],o.module(v,[h.e1,d.e1,c.e1,u.e1,m.e1,p.e1]).service(y,S)},372457:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c}});var i=n(464027),s=n(168132),r=n(43223),o=n(603712),a=n(211796);function l(e,t){return function(n,i){t(n,i,e)}}let c="ultra.service.context.user",d="contextUser";class u{get userId(){return this.studentPreview.isInIframeOfPreviewMode()?this.studentPreview.previewStatus.user.id:this._userId||null}get userModel(){return this.studentPreview.isInIframeOfPreviewMode()?this.studentPreview.previewStatus.user:(this._userModel||(this._userModel=this.getInitialUserModel(),this._userId=this._userModel.id),this._userModel)}getMemberships(){return this._userModel||(this._userModel=this.getInitialUserModel()),this._userModel.memberships.$fetch({limit:1e4,expand:"course.effectiveAvailability,course.permissions,courseRole"}).$asPromise()}getRoles(){return this.UserModel.$find("me",{expand:"systemRoles,insRoles"}).$asPromise()}update(){return this.UserModel.$find("me",{expand:"systemRoles"}).$then(e=>this._setUserModel(e))}getInitialUserModel(){return this.$window.__initialContext?this.UserModel.$buildRaw(this.$window.__initialContext.user):this.UserModel.$find("me",{expand:"systemRoles"})}_setUserId(e){return this._userId=e,this._userId}_setUserModel(e){return this._userModel=e,this._userId=e?e.id:null,this._userModel}constructor(e,t,n){this.$window=e,this.UserModel=t,this.studentPreview=n}}u=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([l(0,(0,a.tB)("$window")),l(1,(0,a.tB)(r.HV)),l(2,(0,a.tB)(o.HV))],u),i.module(c,[s.e1,o.e1]).service(d,u)},867734:function(e,t,n){"use strict";n.d(t,{dI:function(){return R},s6:function(){return A}});var i,s,r=n(464027),o=n(276635),a=n(168132),l=n(176037),c=n(759485),d=n(470269),u=n(408027),p=n(951248),m=n(555342),h=n(810309);(i=s||(s={})).BbPage="resource/x-bb-page",i.LtiLaunch="ltilaunch",i.ScormLaunch="scormlaunch",i.ContentUrl="contenturl",i.FileUrl="fileurl",i.None="none";let g=e=>{switch(e){case s.BbPage:return s.BbPage;case s.LtiLaunch:return s.LtiLaunch;case s.ScormLaunch:return s.ScormLaunch;case s.ContentUrl:return s.ContentUrl;case s.FileUrl:return s.FileUrl;case s.None:return s.None}};class f{deleteKey(){return this.content.contentHandler.toString()}iconClass(){let e=l.Z.parse(this.content.contentHandler.toString());return null!=e?e.iconClass:null}linkAction(){let e=this.content.contentHandler;this.isFromCourseLink&&(e=l.Z.CourseLink);let t=g(e.toString());return t||e.toString()}viewHandler(){return this.content.contentHandler.toString()}getTargetCourseContentDisplay(){return null}getEditSref(){return null}getEditState(){return null}getEditStateParams(){return null}usesEditButton(){return null!=this.getEditSref()}canUseEditButton(){return this.usesEditButton()&&!!(this.content.permissions&&(this.content.permissions.edit||this.content.permissions.modifyAvailability))}canDownload(){return!1}isLtiLink(){return!1}contentUrl(){throw Error("contentUrl() is not supported for "+this.content.contentHandler.toString())}supportsConversations(){return!1}isXplorLtiLink(){return!1}getContentProgressRoute(){}constructor(e,t){this.content=e,this.isFromCourseLink=t}}class b extends f{getEditState(){return"gradebook-item.assignment"}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}}getEditSref(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'}}class v extends f{getEditState(){return"gradebook-item.assignment"}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}}getEditSref(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'}supportsConversations(){return!0}}class y extends f{deleteKey(){if(this.content.getAssociatedGradingColumn){let e=this.content.getAssociatedGradingColumn();if(e&&e.gradebookCategory)return e.gradebookCategory.title===u.bu3.Assignment?l.Z.UltraAssignment.toString():l.Z.TestLink.toString()}return this.content.contentHandler.toString()}getEditState(){return d.RK.GRADEBOOK_ITEM_ASSESSMENT}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details",assessmentType:"test"}}canUseEditButton(){let e=this.content.getDeployedAssessment(),t=e.permissions;return!!(t&&(t.modify||t.view))}getEditSref(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details",assessmentType: "test"})'}supportsConversations(){return!0}}class C extends f{getEditState(){return"discussion.view.with-grading"}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id}}getEditSref(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"}}class S extends f{getTargetCourseContentDisplay(){return this.targetContent&&this.targetContent.$resolved&&this.targetContent.contentHandler?R.normalize(this.targetContent.contentHandler.toString())===l.Z.Discussion.toString()?new C(this.targetContent,!0):new f(this.targetContent,!0):new f(this.content,!0)}constructor(e){super(e),this.content=e,e.contentDetail&&(this.targetContent=e.getLinkContentSource())}}class E extends f{getEditState(){return d.Re.EDIT_FILE}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}canDownload(){var e,t;if(p.AaE.isConditionalReleaseLocked(this.content))return!1;if(!(null===(e=this.options)||void 0===e?void 0:e.supportsInlineRender))return!0;let n=null===(t=this.content.contentDetail)||void 0===t?void 0:t[a.courseContent.ContentHandler.File.toString()];return(0,u.lMq)(null==n?void 0:n.fileAssociationMode)}linkAction(){var e;if(!this.content.contentDetail||!(null===(e=this.options)||void 0===e?void 0:e.supportsInlineRender))return s.ContentUrl;let t=this.content.contentDetail,n=t[a.courseContent.ContentHandler.File.toString()],i=null==n?void 0:n.fileAssociationMode,r=(null==n?void 0:n.file)&&(0,m.c1)(n.file,this.content.description);return r&&"LINK"!==i&&(0,m.Q)(r,!0)?s.FileUrl:s.ContentUrl}contentUrl(){var e,t;if(p.AaE.isConditionalReleaseLocked(this.content))return;let n=null===(e=this.content.contentDetail)||void 0===e?void 0:e[a.courseContent.ContentHandler.File.toString()];return c.uI(null==n?void 0:null===(t=n.file)||void 0===t?void 0:t.permanentUrl)}getContentProgressRoute(){return{stateName:d.Re.PREVIEW_FILE,args:{id:this.content.id,courseId:this.content.courseId,view:h.GJ.Progress}}}constructor(e,t){super(e),this.options=t}}class I extends f{getEditState(){return d.XO.EDIT_FOLDER}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class w extends f{getEditState(){return"content-manage.edit.learning-module"}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class A extends I{static get EDIT_STATE_SREF(){return d.XO.DOCUMENT}getEditState(){return A.EDIT_STATE_SREF}getIconClass(){return l.Z.Document.iconClass}supportsConversations(){return!0}linkAction(){return s.BbPage}viewHandler(){return l.Z.Page.toString()}getContentProgressRoute(){return{stateName:d.XO.DOCUMENT,args:{id:this.content.id,courseId:this.content.courseId,view:h.GJ.Progress}}}}class k extends f{getEditState(){return"content-manage.edit.link"}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}contentUrl(){let e=a.courseContent.ContentHandler.ExternalLink.toString(),t=(0,o.get)(this.content,["contentDetail",e,"url"],null);return t&&(t=(0,o.unescape)(t)),k.PROTOCOL_CHECK.test(t)?t:"http://"+t}linkAction(){return s.ContentUrl}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}k.PROTOCOL_CHECK=/^\w+\:{1}/;class x extends f{isCloudDocument(){var e;return this.content.contentDetail&&p.fq8.CloudDocument===(null===(e=this.getContentDetail())||void 0===e?void 0:e.itemOrigin)}getContentDetail(){var e;return this.content.contentDetail[null===(e=this.content.contentHandler)||void 0===e?void 0:e.toString()]}getEditState(){return this.isCloudDocument()?d.Z5.Lti.LTI_LAUNCH_PEEK:"content-manage.edit.lti"}getEditStateParams(){if(this.isCloudDocument()){var e;let t=c.uI(null===(e=this.getContentDetail())||void 0===e?void 0:e.launchLink);return t=c.Ou(t,"from_ultra","true"),{courseId:this.content.courseId,contentId:this.content.id,toolHref:t}}return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}linkAction(){return s.LtiLaunch}isLtiLink(){return!0}isXplorLtiLink(){var e,t,n,i,s;let r=null===(e=this.content)||void 0===e?void 0:null===(t=e.contentDetail)||void 0===t?void 0:null===(s=t[null===(n=this.content)||void 0===n?void 0:null===(i=n.contentHandler)||void 0===i?void 0:i.toString()])||void 0===s?void 0:s.url;return r&&r.indexOf("://xplor")>-1}supportsConversations(){return!0}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class T extends f{deleteKey(){return l.Z.LtiPlacement.toString()}getEditState(){return"content-manage.edit.placement"}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}linkAction(){return s.LtiLaunch}isLtiLink(){return!0}supportsConversations(){return!0}canUseEditButton(){return super.canUseEditButton()&&r.isDefined(this.content.contentDetail)&&r.isDefined(this.content.contentDetail[this.content.contentHandler.toString()])&&r.isDefined(this.content.contentDetail[this.content.contentHandler.toString()].placement)}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class P extends f{getEditState(){return"scorm-settings"}getEditStateParams(){return{contentId:this.content.id}}getEditSref(){return this.getEditState()+"({contentId:content.id})"}linkAction(){return s.ScormLaunch}supportsConversations(){return!0}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class D extends f{getEditState(){return d.Z5.Journal.JOURNAL_VIEW_WITH_PARTICIPATION}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id}}getEditSref(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"}}class G extends f{linkAction(){return s.LtiLaunch}isLtiLink(){return!0}}class R{static normalize(e){return null!=e&&0===e.indexOf(l.Z.LtiPlacement.toString())?l.Z.LtiPlacement.toString():e}static matchesHandlers(e,t){let n=this.normalize(e),i=(0,o.findIndex)(t,e=>n===e.toString());return i>=0}static create(e,t){switch(this.normalize(e.contentHandler.toString())){case l.Z.ClassicAssignment.toString():return new b(e);case l.Z.File.toString():return new E(e,t);case l.Z.Folder.toString():if(e.contentDetail){let t=e.contentDetail[l.Z.Folder.toString()];if(t&&t.isBbPage)return new A(e)}return new I(e);case l.Z.ExternalLink.toString():return new k(e);case l.Z.LtiLink.toString():return new x(e);case l.Z.LtiPlacement.toString():return new T(e);case l.Z.Page.toString():return new A(e);case l.Z.PartnerCloud.toString():return new G(e);case l.Z.TestLink.toString():return new y(e);case l.Z.RusticiScorm.toString():return new P(e);case l.Z.UltraAssignment.toString():return new v(e);case l.Z.Discussion.toString():return new C(e);case l.Z.CourseLink.toString():return new S(e).getTargetCourseContentDisplay();case l.Z.LearningModule.toString():return new w(e);case l.Z.Journal.toString():return new D(e);default:return new f(e)}}}},990126:function(e,t,n){"use strict";n.d(t,{HV:function(){return h},e1:function(){return m}});var i=n(464027),s=n(168132),r=n(266481),o=n(951248),a=n(408027),l=n(852512),c=n(837545),d=n(915121),u=n(211796);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultra.components.services.courseContentIconService",h="courseContentIconService",g="-a|-c|-o|-hc".replace(/-/g,""),f=RegExp(`-(${g})$`,"g");class b{getIconClass(e){return(0,c.h)(this.service.getIconClass(e))}constructor(e){this.service=e,this.key=l.fz.ContentIcon}}class v{matchLtiPlacementHandler(e){return o.ddT.isLtiPlacement(e)?a.DXv.LtiPlacement:e}getIconClass(e){let t;let n=s.courseContent.ContentHandler,i="";if(e&&e.contentHandler){let r=e.contentHandler.toString(),l=n.parse(this.matchLtiPlacementHandler(r));i=l&&l.iconClass;let c=e.getAssociatedGradingColumn?e.getAssociatedGradingColumn():null;if(c&&c.gradebookCategory&&c.gradebookCategory.title)i=this.getColumnIconClassAsString(c);else if(e.contentDetail){if(n.File.isEqualTo(l)){let t=e.contentDetail[n.File.toString()]&&e.contentDetail[n.File.toString()].file&&e.contentDetail[n.File.toString()].file.mimeType||"";i=v.fileMIMETypeToIconClass[t]=v.fileMIMETypeToIconClass[t]||(0,o.RMg)(t)}if(n.CourseLink.isEqualTo(l)&&(t=e.getLinkContentSource().$then(e=>{if(!e.contentHandler)return i;let t=n.parse(e.contentHandler.toString());i=t&&t.iconClass})),n.LtiLink.isEqualTo(l)){let t=o.ddT.isCloudDocument(e),s=o.ddT.getCloudDocumentType(e),r=s===a.rz_.CloudCollaboration&&t,l=s===a.rz_.Embedded&&t;r?i=n.CollaborativeCloudDocumentPlacement.iconClass:l&&(i=n.CloudDocumentPlacement.iconClass)}}n.Folder.isEqualTo(l)&&(i=e.contentDetail&&e.contentDetail[n.Folder.toString()]&&e.contentDetail[n.Folder.toString()].isBbPage?n.Document.iconClass:e.ui&&e.ui.isOpen?s.courseContent.eP.OpenFolder:s.courseContent.eP.ClosedFolder)}return t?t.$asPromise().then(()=>this.$q.when(i||v.DEFAULT_ICON_CLASS)):this.$q.when(i||v.DEFAULT_ICON_CLASS)}getColumnIconClassAsString(e){var t,n,i;let s="",l=(null===(t=e.isDiscussion)||void 0===t?void 0:t.call(e))||(null===(n=e.isJournal)||void 0===n?void 0:n.call(e));if(e.externalGrade?s=v.GRADE_OVERALL_ICON_CLASS:e.calculationType&&a.eNW.NonCalculated!==e.calculationType?s=v.GRADE_CALCULATIONS_ICON_CLASS:e.gradebookCategory&&e.gradebookCategory.title&&!l&&(s=this.gradeColumnCategory.getCategoryIcon(e.gradebookCategory)),(""===s||s===r.q6.DEFAULT_ICON_FOR_CATEGORY&&l)&&e.scoreProviderHandle){let t=o.u$1.parse(e.scoreProviderHandle.toString());null!=t&&(s=t.iconClass,(null===(i=e.isScormSCO)||void 0===i?void 0:i.call(e))&&(s+=v.SCORM_SCO_ICON_CLASS_SUFFIX))}return s}getColumnIconClass(e){var t;let n="";return n=(null===(t=e.scoreProviderHandle)||void 0===t?void 0:t.toString())===s.courseContent.ContentHandler.LtiLink.handle?o.u$1.LTILink.iconClass:this.getColumnIconClassAsString(e),this.$q.when(n||v.DEFAULT_ICON_CLASS)}getIconName(e){return e.replace("img-icon-","")}getIconNameForLocalization(e){return e.replace(f,"")}constructor(e,t,n){this.$q=e,this.gradeColumnCategory=t,this.ltiService=n,(0,l.gM)(new b(this))}}v.DEFAULT_ICON_CLASS="img-icon-document-blank",v.GRADE_OVERALL_ICON_CLASS="img-icon-overall-grade",v.GRADE_CALCULATIONS_ICON_CLASS="img-icon-calculation",v.SCORM_SCO_ICON_CLASS_SUFFIX="-sco",v.fileMIMETypeToIconClass=Object.create(null),v=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,u.tB)("$q")),p(1,(0,u.tB)(r.HV)),p(2,(0,u.tB)(d.HV))],v),i.module(m,[r.e1,d.e1]).service(h,v)},910741:function(e,t,n){"use strict";n.d(t,{HV:function(){return p},e1:function(){return u}});var i=n(276635),s=n(464027),r=n(168132),o=n(372457),a=n(495175),l=n(624930),c=n(408027),d=n(291146);let u="ultra.components.services.courseContent",p="courseContent";class m{loadContentAndGrades(e){let t;if(e.content)t=e.content.$asPromise&&e.content.$asPromise()||this.$q.when(e.content);else if(e.contentId){let n=e.contentExtraExpand?","+e.contentExtraExpand:"";t=e.course.contents.$find(e.contentId,{expand:"assignedGroups,selfEnrollmentGroups.group"+n}).$asPromise()}else throw new l.v({message:"Content or contentId must be provided."});if(!this.contextUser.userId)throw new l.v({message:"There is no userId in the context."});return t.then(t=>{let n=new h;return n.courseContent=t,n.groupMembers=[],e.column?n.gradingColumn=e.column:n.gradingColumn=e.course.gradebook.columns.$buildRaw(t.getAssociatedGradingColumn(e.columnId)),n.gradingColumn.rubricAssociations||n.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise().then(e=>{n.gradingColumn.rubricAssociations=e.rubricAssociations}),this.grade.loadGrade({attemptQueryParams:{expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",overrideAggregationModel:r.Rp.AttemptAggregationModel.Last},gradeQueryParams:{expand:"attemptsLeft"},courseId:e.course.id,column:n.gradingColumn,content:n.courseContent,userId:this.contextUser.userId},!0).then(s=>{if(n.submitter=this.contextUser.userModel,s){if(n.gradeDetail=s,n.attempt=s.ui.attempt,n.groupAttempt=s.ui.groupAttempt,t.isGroupContent)return this.getGroupMembers(e.course,t,n.groupAttempt).then(e=>(n.groupMembers=e,n.groupAttempt&&(n.submitter=i.find(e,e=>e.id===n.groupAttempt.submittedBy),!n.submitter&&(n.submitter=null,n.groupAttempt.submittedBy)))?this.UserModel.$find(n.groupAttempt.submittedBy).$then(e=>{n.submitter=e||null},e=>this.$log.error(e.$response)).$asPromise().then(()=>n):n)}else if(t.isGroupContent)return this.getGroupMembers(e.course,t).then(e=>(n.groupMembers=e,n));return n})})}getGroupMembers(e,t,n){return t.assignedGroups&&t.assignedGroups.length>0?e.groups.$find(t.assignedGroups[0].groupId,{expand:"memberships",excludeUnavailableMembers:!0}).$asPromise().then(t=>e.memberships.$refresh({fields:"id, user, courseRole",roleBucket:c.O8v.Taking}).$asPromise().then(e=>this.sortGroupMembers(e,t))):this.$q.when([])}sortGroupMembers(e,t){let n={},i=[],s=t.memberships||t.members;e.forEach(e=>{e.user&&(e.user.ui=e.user.ui||{},n[e.user.id]=e.user)});let r=[];return s.forEach(e=>{let t=e.userId||e,i=n[t];if(i){let e=this.bbLocalize.formatUsername(i,d.ILocaleUsernameFormat.Short,this.$rootScope);r.push(e),e.then(e=>{i.ui.formatUserName=e})}}),this.$q.all(r).then(()=>((s=s.filter(e=>!!n[e.userId||e])).sort((e,t)=>{let i=e.userId||e,s=t.userId||t;return n[i].ui.formatUserName.localeCompare(n[s].ui.formatUserName)}),s.forEach(e=>{let t=e.userId||e;n[t]&&(i.push(n[t]),delete n[t])}),i))}constructor(e,t,n,i,s,r,o){this.$q=e,this.$rootScope=t,this.$log=n,this.grade=i,this.contextUser=s,this.UserModel=r,this.bbLocalize=o,this.contentDataResult=new h}}m.$inject=["$q","$rootScope","$log",a.HV,o.HV,r.EA.HV,d.serviceName];class h{}s.module(u,[r.e1,o.e1]).service(p,m)},579188:function(e,t,n){"use strict";n.d(t,{IG:function(){return S},XN:function(){return g},e1:function(){return d},e2:function(){return p}});var i=n(211796),s=n(822658),r=n(247126),o=n(291146),a=n(443400);function l(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function c(e,t){return function(n,i){t(n,i,e)}}let d="ultra.service.course-context.title-handle",u="coursePageTitleHandling",p=u+"Provider",m={},h={};function g(e,t){h[e]={handlerClass:t}}function f(e){let t=h[e];if(!t)throw Error(`Handler '${e}' not registered`);return t}function b(e,t,n,i){e&&(n=n||[],Object.keys(e).forEach(s=>{if(i&&s in t||n.some(e=>s===e))return;let r=e[s];t[s]=r}))}class v{get provides(){return this.$args.provides||"BasePageTitleHandler"}get instance(){return this.$instance?this.$instance:this.getHandler()}get args(){return this.$args}config(e){return new y(this,e||{})}clean(){return this.instance.clean(),Object.keys(this.args).forEach(e=>{delete this.args[e]}),this.$instance=null,this}setDefaultHandler(e){return this.$args.provides=e,this.isInitialized()&&(this.$instance=this.getHandler(this.provides)),this}isInitialized(e){if(this.injector)return!0;if(e)throw Error("Provider not initialized")}registerHandler(e,t){g(e,t)}getHandlerRegistry(e){return f(e||this.provides)}getHandlerClass(e){var t;return null===(t=f(e||this.provides))||void 0===t?void 0:t.handlerClass}getHandler(e,t){if(this.isInitialized(!0)){let n=e||this.provides;if(n===this.$args.provides&&this.$instance)return this.$instance;let i=this.getHandlerRegistry(n);return i.handler||(i.handler=this.injector.instantiate(i.handlerClass),i.handler.getProviderConfig=()=>this.args,i.handler.args={...this.args}),t&&(this.$args.provides=n,this.$instance=i.handler),i.handler}}constructor(e){this.injector=e,this.providerName=u,this.$args={},this.$get=["$injector",e=>e.instantiate(v)]}}v=l([c(0,(0,i.tB)("$injector"))],v);class y{build(e){var t;let n=e.injector||this.provider.injector;if(delete e.injector,!n)throw Error("No injector to build Handler");let i=n.get(this.provider.providerName);return this.args.provides&&this.args.provides!==i.provides&&(i.instance.stopListeningOnAll(),i.setDefaultHandler(this.args.provides)),(null===(t=this.args.clean)||void 0===t||t)&&i.clean(),b(this.args,i.args,["clean"]),this.instance=i.instance.build(e),this}process(e,...t){return this.isBuilt(!0),this.instance.process(e,...t)}isBuilt(e){if(this.instance)return!0;if(e)throw Error("Handler not initialized")}constructor(e,t){this.provider=e,this.args=t}}class C{get pageTitle(){return this.args.pageTitle}set pageTitle(e){this.args.pageTitle=e}get name(){return this.args.name}set name(e){this.args.name=e}build(e){return b(e,this.args),b(this.getProviderConfig(),this.args),this.args.listenOn&&(Array.isArray(this.args.listenOn)?this.args.listenOn.forEach(e=>{this.listenOn(e)}):this.listenOn(this.args.listenOn)),this}clean(){return this.stopListeningOnAll(),Object.keys(this.args).forEach(e=>{delete this.args[e]}),this}getUltraPageName(){let e=this.pageTitle||"base.ultra";return this.args.resolveOrgCourseKey&&this.pageTitle?this.translateCourseOrg(e.substring(0,e.length-7)):this.translate(e)}translateCourseOrg(e){let t="organizations"===this.ultraState.getCurrentUrlParams().coursesOrOrganizations,n=(0,a.Df)(t,a.r9.AppendSection);return this.translate(n(e))}translate(e){return this.bbLocalize.translate({locale:this.$rootScope.index.locale,key:e})}process(e,...t){return this.getUltraPageName().then(e=>{this.$rootScope.index.title=`${e}`})}listenOn(e,t=!0){this.stopListeningOn(e);let n=null;n=Array.isArray(t)?(e,...n)=>{if(t.some(e=>this.ultraState.current.name===e))return this.process(e,...n)}:t?(e,...t)=>{if(this.name===this.ultraState.current.name)return this.process(e,...t)}:(e,...t)=>this.process(e,...t);let i=this.$rootScope.$on(e,n);return m[e]=i,i}stopListeningOn(e){if(Object.keys(m).includes(e))return m[e](),delete m[e],!0}stopListeningOnAll(){Object.keys(m).forEach(e=>{m[e](),delete m[e]})}constructor(e,t,n,i){this.$injector=e,this.$rootScope=t,this.ultraState=n,this.bbLocalize=i}}C=l([c(0,(0,i.tB)("$injector")),c(1,(0,i.tB)("$rootScope")),c(2,(0,i.tB)(r.HV)),c(3,(0,i.tB)(o.serviceName))],C);class S extends C{process(e,...t){return this.getUltraPageName().then(e=>{this.$rootScope.index.title=`${e} / ${this.currentCourse.course.name}`})}constructor(e,t,n,i,s){super(e,t,n,i),this.$injector=e,this.$rootScope=t,this.ultraState=n,this.bbLocalize=i,this.currentCourse=s}}S=l([c(0,(0,i.tB)("$injector")),c(1,(0,i.tB)("$rootScope")),c(2,(0,i.tB)(r.HV)),c(3,(0,i.tB)(o.serviceName)),c(4,(0,i.tB)(s.HV))],S),g("BasePageTitleHandler",C),g("CoursePageTitleHandler",S);let E=[r.e1,o.moduleName];angular.module(d,E).provider(u,class extends v{})},939284:function(e,t,n){"use strict";n.d(t,{AX:function(){return y},D$:function(){return v},H2:function(){return b},HV:function(){return h},e1:function(){return m},e2:function(){return g},gc:function(){return f}});var i=n(168132),s=n(560844),r=n(247126),o=n(822658),a=n(810309),l=n(408027),c=n(211796),d=n(916415),u=n(396184);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultra.service.course-context.content",h="currentContentModel",g=h+"Provider",f=s.uh,b=m,v=h,y=g;class C{get contentId(){return this._contentId}get content(){return this._content}connectToRedux(){this.$ngRedux.connect(null,e=>({dispatchContentOpened:t=>{e((0,a.sh)(t))},dispatchContentClosed:t=>{e((0,a.p7)(t))}}))(this)}setCurrentContent(e){e!==this.content&&(e||this.content)&&(this.content&&this.dispatchContentClosed(this.content),this._contentId=e?e.id:null,this._content=e,this.content&&this.dispatchContentOpened(this.content))}clear(){this.setCurrentContent(null)}load(e,t){return e?this.contentId===t&&this.content?this.content.$asPromise():this.loadContent(e,t).then(e=>(this.setCurrentContent(e),e.$asPromise())).catch(e=>this.$q.reject(e)):this.$q.when(null)}loadContent(e,t){return e.$find(t).$allow([404]).$asPromise().then(e=>{let n=e.$response;return n&&n.status===l.oji.NotFound?this.$q.reject(Error(`Content  ${t} not found`)):e.$asPromise()})}constructor(e,t,n){this.$q=e,this.$rootScope=t,this.$ngRedux=n,this.dispatchContentOpened=()=>{},this.dispatchContentClosed=()=>{},this.onStateHasContentInContextChanged=(e,t,n)=>{n&&!t&&this.clear()},this.connectToRedux(),d.ZU.OnRootScope(t,u.N.$stateHasContentInContextChanged,this.onStateHasContentInContextChanged)}}C=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,c.tB)("$q")),p(1,(0,c.tB)("$rootScope")),p(2,(0,c.tB)("$ngRedux"))],C);let S=[i.e1];angular.module(m,S).provider(h,class{constructor(){this.$get=["$injector",e=>e.instantiate(C)],this.name=f,this.resolve=["$q",r.HV,h,o.gc,(e,t,n,s)=>{var r;let o=null!==(r=t.nextParams.contentId)&&void 0!==r?r:t.nextParams.id;return o&&o!==i.courseContent.$G?n.load(s.contents,o):e.resolve(void 0)}]}})},763674:function(e,t,n){"use strict";n.d(t,{HV:function(){return g},e1:function(){return h},e2:function(){return f},gc:function(){return b}});var i=n(456141),s=n(168132),r=n(408027),o=n(916415),a=n(560844),l=n(211796),c=n(372457),d=n(603712),u=n(852512),p=n(822658);function m(e,t){return function(n,i){t(n,i,e)}}let h="ultra.service.course-context.membership",g="currentCourseMembership",f=g+"Provider",b=a.lZ;class v{isActAsInstructorMembership(){return this.service.isActAsInstructorMembership()}isStudentMembership(){return this.service.isStudentMembership()}constructor(e){this.service=e,this.key=u.fz.CurrentCourseMembership}}class y{get courseMembership(){return this._courseMembership}clear(){this._courseMembership=null}load(e){return e?this.currentUser.userId?this.courseMembership&&this.courseMembership.course&&this.courseMembership.userId===this.currentUser.userId?e.id!==this.courseMembership.course.id?this.$q.reject(Error("Cannot resolve course membership because given course does not match the one for the current course membership")):this.courseMembership.$asPromise():e.users.$find(this.currentUser.userId,{expand:"courseRole"}).$allow(["400-499"]).$asPromise().then(e=>(this._courseMembership=e,this._courseMembership.isInStudentPreview=()=>this.studentPreview.isInIframeOfPreviewMode(),e)):this.$q.reject(Error("Cannot resolve course membership because currentUser service has no userId")):this.$q.reject(Error("Cannot load course membership because no course model was provided"))}hasCourseMembership(){return!!(this.courseMembership&&this.courseMembership.$response.status!==r.oji.NotFound)}availabilityHasBeenBypassed(){return this.courseMembership&&this.courseMembership.availabilityHasBeenBypassed()}courseIsOpen(){return this.courseMembership&&this.courseMembership.courseIsOpen()}courseIsPrivate(){return this.courseMembership&&this.courseMembership.courseIsPrivate()}courseIsComplete(){return this.courseMembership&&this.courseMembership.courseIsComplete()}isStudentMembership(){return this.courseMembership&&this.courseMembership.isStudentMembership()}isGuestMembership(){return this.courseMembership&&this.courseMembership.isGuestMembership()}isStudentOrGuestMembership(){return this.courseMembership&&this.courseMembership.isStudentOrGuestMembership()}isActAsInstructorMembership(){return this.courseMembership&&this.courseMembership.isActAsInstructorMembership()}isTeachingAssistantMembership(){return this.courseMembership&&this.courseMembership.isTeachingAssistantMembership()}isInRoleBucket(e){return this.courseMembership&&this.courseMembership.isInRoleBucket(e)}isDueDateExcepted(){return this.courseMembership&&this.courseMembership.isDueDateExcepted()}constructor(e,t,n,i,s){this.$q=e,this.$rootScope=t,this.currentUser=n,this.studentPreview=i,this.CourseModel=s;let r=this;o.ZU.OnRootScope(t,p.An,(e,t,n)=>{(null==t||null===t.id)&&r.clear()}),(0,u.gM)(new v(this))}}y=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([m(0,(0,l.tB)("$q")),m(1,(0,l.tB)("$rootScope")),m(2,(0,l.tB)(c.HV)),m(3,(0,l.tB)(d.HV)),m(4,(0,l.tB)(i.H))],y);let C=[c.e1,s.e1,d.e1];angular.module(h,C).provider(g,class{constructor(){this.$get=["$injector",e=>e.instantiate(y)],this.name=b,this.resolve=[a.c6,d.HV,g,"$q",(e,t,n)=>t.init(e).then(()=>n.load(e))]}})},822658:function(e,t,n){"use strict";n.d(t,{An:function(){return S},e1:function(){return v},e2:function(){return C},gc:function(){return E},HV:function(){return y}});var i=n(168132),s=n(916415),r=n(396184),o=n(276635),a=n(408027);class l{destroy(){this._cache={},this.offHookUserModel()}miss(e){return e.filter(e=>!(e in this._cache))}hit(e){let t=[].concat(e),n=this.miss(t);return o.isEmpty(n)}get(e,t){let n=this._cache[e];return!n&&t?t:n}invalidate(e){delete this._cache[e]}cache(e,t){e&&t&&!t.isPlaceHolder&&(this._cache[e]=t)}fetchUsers(e,t,n){let i=n.defer(),s=this.miss([].concat(e));return o.isEmpty(s)?i.resolve(this):(this.offHookUserModelFunc||this.hookUserModel(t),t.findMany(s,{},[a.oji.NotFound]).$then(e=>{i.resolve(this)})),i.promise}offHookUserModel(){this.offHookUserModelFunc&&(this.offHookUserModelFunc(),this.offHookUserModelFunc=void 0)}constructor(){this._cache={},this.hookUserModel=o.once(e=>{let t=this;return this.offHookUserModelFunc||(this.offHookUserModelFunc=e.$mixHook("after-feed",function(){t.cache(this.id,this)})),this.offHookUserModelFunc})}}class c extends l{constructor(e){super(),this.courseId=e}}var d=n(211796),u=n(43223),p=n(456141),m=n(291146),h=n(870452),g=n(560844),f=n(623017);function b(e,t){return function(n,i){t(n,i,e)}}let v="ultra.service.course-context.course",y="currentCourseModel",C=y+"Provider",S=v+"."+y+".changed",E=g.c6;class I{get courseId(){return this._courseId}get course(){return this._courseModel}get usersCache(){return this._usersCache}load(e){return e?e&&this.courseId===e&&this.course?this.course.$asPromise():this.loadCourse(e).then(t=>this.$q.all([this.loadLocalizationBundle(t),this.entitlementCache.loadCourseEntitlements(e)]).then(()=>(this.update(e,t),this._courseModel)),e=>this.$q.reject(Object.assign(e||{},{goToBasePage:!0}))):this.$q.when(null)}loadCourse(e){return this.CourseModel.$find(e,{expand:"instructorsMembership, instructorsMembership.courseRole, effectiveAvailability, isChild"}).$allow([404]).$asPromise().then(t=>{let n=t.$response;if(n&&404===n.status){let t=Error("Course "+e+" not found");return Object.assign(t,{goToBasePage:!0,errorModalConfig:{response:n,template:f}}),this.$q.reject(t)}return t})}loadLocalizationBundle(e){let t;return t=e.isClassic()||!e.locale?this.bbLocalize.getLocale(this.$rootScope):e.locale,this.$q.all([this.bbLocalize.loadLocale(t),this.bbLocalize.loadBundle("features/course/course",t)])}clear(){this.update(null,null)}update(e,t){let n=this.courseId,i=this.course;this._courseId=e,this._courseModel=t,this._usersCache&&this._usersCache.courseId!==e&&(this._usersCache.destroy(),this._usersCache=null),e&&(this._usersCache=new c(e),this._usersCache.hookUserModel(this.UserModel)),this.$rootScope.$broadcast(S,{id:e,model:t},{id:n,model:i})}refreshStudentPreviewStatus(){return this._courseModel.studentPreview.$fetch()}constructor(e,t,n,i,o,a){this.$q=e,this.$rootScope=t,this.bbLocalize=n,this.entitlementCache=i,this.CourseModel=o,this.UserModel=a;let l=this;s.ZU.OnRootScope(t,r.N.$stateHasCourseInContextChanged,(e,t,n)=>{n&&!t&&l.clear()})}}I=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([b(0,(0,d.tB)("$q")),b(1,(0,d.tB)("$rootScope")),b(2,(0,d.tB)(m.serviceName)),b(3,(0,d.tB)(h.HV)),b(4,(0,d.tB)(p.H)),b(5,(0,d.tB)(u.HV))],I);let w=[i.e1,m.moduleName,h.e1];angular.module(v,w).provider(y,class{constructor(){this.$get=["$injector",e=>e.instantiate(I)],this.name=E,this.resolve=["$state",y,(e,t)=>{let n=e.nextParams.courseId;return t.load(n)}]}})},560844:function(e,t,n){"use strict";n.d(t,{c6:function(){return i},lZ:function(){return s},uh:function(){return r},vI:function(){return o}});let i="currentCourse",s="membership",r="currentContent",o="studentPreviewStatus"},104111:function(e,t,n){"use strict";n.d(t,{HV:function(){return c},e1:function(){return l}});var i=n(464027),s=n(18447),r=n(168132),o=n(814154),a=n(408027);let l="ultra.service.course.conversion",c="courseConversion";class d{_getConversionTask(e){return this.ScheduledTaskModel.$find(e)}isPreview(e){return!e.isOpen()&&e.isUltraPreview()}isConversionComplete(e){return!e||e===a.hRl.Complete||e===a.hRl.CompleteErrors}isConversionSuccess(e){return!e||e===a.hRl.Complete}setCheckConversionIntervalIfNotExist(e,t){let n=this.taskCache[e.courseId];n||this.setCheckConversionInterval(e,t)}setCheckConversionInterval(e,t){let n=this.cancelConversionInterval(e);this.removeQueuedTaskFromCache(e),void 0===t&&n&&(t=n.onCompleteCallback),e.refreshConvertToUltraStatus().then(n=>{this.queuedTaskCache[e.courseId]=n.ui.convertToUltraTaskId,this._getConversionTask(this.queuedTaskCache[e.courseId]).$then(n=>{this.setUpIntervalToPollForConversionTaskCompletion(n,e,t)})})}setUpIntervalToPollForConversionTaskCompletion(e,t,n){let i=e.taskTitle;if(i&&(i.indexOf("ConvertTOUltraQueuedOperation")>=0||i.indexOf("UndoUltraQueuedOperation")>=0)){let i;if(i=()=>{this._getConversionTask(e.taskId).$then(e=>{let n=e.taskStatus.toString(),i=this.isConversionComplete(n),s=this.isConversionSuccess(n);if(i){let r=this.cancelConversionInterval(t);this.removeQueuedTaskFromCache(t),r&&r.onCompleteCallback&&r.onCompleteCallback(n,{complete:i,success:s,taskId:e.taskId,taskTitle:e.taskTitle})}})},!this.taskCache[t.courseId]){let e=s.default.production?6e4:6e3;this.taskCache[t.courseId]={interval:this.interval(()=>{i()},this.$rootScope,e),onCompleteCallback:n}}}}cancelConversionInterval(e){let t=this.taskCache[e.courseId];return t&&(this.interval.cancel(t.interval),this.taskCache[e.courseId]=null),t}removeQueuedTaskFromCache(e){delete this.queuedTaskCache[e.courseId]}constructor(e,t,n,i,s,r){this.interval=e,this.CourseModel=t,this.$modal=n,this.$q=i,this.$rootScope=s,this.ScheduledTaskModel=r,this.showPreviewAlert=!0,this.taskCache={},this.queuedTaskCache={}}}d.$inject=[o.H,r.N7.H,"$modal","$q","$rootScope",r.M.H],i.module(l,[r.e1,o.e]).service(c,d)},720222:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},e1:function(){return p}});var i=n(464027),s=n(916415),r=n(717205),o=n(190234),a=n(168132),l=n(408027),c=n(951248),d=n(211796);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.service.courseMembership",m="courseMembership";class h{subscribeToRedux(){this.$ngRedux.connect(null,e=>({loadCourseMembershipByUserId:(t,n)=>e(c.Nwg.courseMembership.loadCourseMembershipByUserId(t,n))}))(this)}getMembershipByUserId(e,t){let n=c.Ys.courseMembership.getCourseMembershipByUserId(this.$ngRedux.getState(),e,t);return(null==n?void 0:n.courseRole)?this.$q.resolve(n):this.$q.when(this.loadCourseMembershipByUserId(e,t))}getUserCourseAvailabilities(e){if(this.userCourseAvailabilities[e])return this.$q.when(this.userCourseAvailabilities[e]);let t=this.$q.defer();return this.userCourseAvailabilities[e]={},this.CourseModel.$new(e).memberships.$refresh().$then(n=>{n.forEach(t=>{this.userCourseAvailabilities[e][t.userId]=t.isAvailable}),this.userCourseAvailabilities[e][o.fT()]=!0,this.userCourseAvailabilities[e][r.s3()]=!1,t.resolve(this.userCourseAvailabilities[e])}),t.promise}getMsgToolAvailability(e,t){if(!e)return;if(t||null==this.msgToolAvailability[e.id]){if(e.isUltra())this.msgToolAvailability[e.id]=!0;else{let t=this.fetchToolAvailabilityPromiseCache[e.id];return t||(t=e.tools.$find("messages").$asPromise().then(t=>(this.msgToolAvailability[e.id]=t.isVisible,t.isVisible),e=>{console.error("Fetch ToolAvailability error!")}).finally(()=>{delete this.fetchToolAvailabilityPromiseCache[e.id]}),this.fetchToolAvailabilityPromiseCache[e.id]=t),t}}let n=this.$q.defer();return n.resolve(this.msgToolAvailability[e.id]),n.promise}isUserCourseAvailable(e,t){return this.userCourseAvailabilities[e][t]}createGuestMembership(e,t){return this.CourseMembershipModel.$build({userId:t.id,course:e,user:t,role:l.TsU.Guest})}constructor(e,t,n,i,r){this.$q=e,this.$rootScope=t,this.$ngRedux=n,this.CourseModel=i,this.CourseMembershipModel=r,this.userCourseAvailabilities={},this.msgToolAvailability={},this.fetchToolAvailabilityPromiseCache={},this.subscribeToRedux(),s.ZU.OnRootScope(this.$rootScope,"membership.update",(e,t,n,i,s,r,o,a)=>{this.getUserCourseAvailabilities(a).then(()=>{this.userCourseAvailabilities[a][o.id]=t.isAvailable})}),s.ZU.OnRootScope(this.$rootScope,"deleteMembership",(e,t,n,i)=>{this.getUserCourseAvailabilities(i).then(()=>{this.userCourseAvailabilities[i][t.id]=!1})}),s.ZU.OnRootScope(this.$rootScope,"roster.enroll.new.membership",(e,t,n,i)=>{this.getUserCourseAvailabilities(n).then(()=>{this.userCourseAvailabilities[n][i]=t.isAvailable})})}}h=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,d.tB)("$q")),u(1,(0,d.tB)("$rootScope")),u(2,(0,d.tB)("$ngRedux")),u(3,(0,d.tB)(a.N7.H)),u(4,(0,d.tB)(a.lZ.serviceName))],h),i.module(p,[a.e1]).service(m,h)},959613:function(e,t,n){"use strict";n.d(t,{HV:function(){return a},e1:function(){return o}}),n(464027);var i,s=n(211796),r=n(305233);let o="debounceServiceModule",a="debounceService";class l{asDebounced(e,t,n){let i;return(...s)=>{i&&this.$timeout.cancel(i),i=this.$timeout(()=>{i=null,e(...s)},t,n)}}constructor(e){this.$timeout=e}}l=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(i=(0,s.tB)(r.H),function(e,t){i(e,t,0)})],l),angular.module(o,[r.e]).service(a,class extends l{})},691032:function(e,t,n){"use strict";var i=n(276635),s=n(873085),r=n(759485),o=n(18447);t.ZP=new class{getHistory(){return s.ZP.getHistory()}getSiteId(){return this.context?this.context.getSystemInfo().siteId:null}getUserAgent(){return navigator.userAgent}getUser(){return this.userService?this.userService.userModel:null}init(e,t,n,i){this.context=e,this.userService=t,s.ZP.setStorage(n,i)}async getDebugInfoRaw(){let e=this.getUser(),t=await this.getHistory();return{userAgent:this.getUserAgent(),siteId:this.getSiteId(),siteDomain:r.mg(),buildNumber:o.default.buildInfo.buildNumber,ultraVersion:o.default.buildInfo.ultraVersion,learnVersion:o.default.buildInfo.learnVersion,userId:e?e.id:null,userName:e?e.userName:null,analyticsHistory:t,generatedTime:new Date().toUTCString()}}async getDebugInfoFriendly(){let e=await this.getDebugInfoRaw(),t=[],n={innerHeight:null,innerWidth:null,outerHeight:null,outerWidth:null},s=!1;return t.push("===== Basic Session Info ===="),t.push(`Debug Exported at: ${e.generatedTime}`),t.push(`User Agent: ${e.userAgent}`),t.push(`Site Domain: ${e.siteDomain}`),t.push(`Build Number: ${e.buildNumber}`),t.push(`Ultra Version: ${e.ultraVersion}`),t.push(`Learn Version: ${e.learnVersion}`),e.siteId?t.push(`Learn Site ID: ${e.siteId}`):t.push("Learn Site ID: site id unavailable, no context provided"),e.userId?t.push(`User: ${e.userName} (${e.userId})`):t.push("User: user id unavailable, no context provided"),t.push("===== Recent Analytics History (oldest first) ====="),e.analyticsHistory.forEach(e=>{e.screenDimension&&!i.isEqual(n,e.screenDimension)&&(t.push(`${e.timestamp}: Screen Size ${s?"changed to ":"is "} ${e.screenDimension.innerHeight} x ${e.screenDimension.innerWidth}`),Object.assign(n,e.screenDimension),s=!0),"click"===e.action?t.push(`${e.timestamp}: clicked on ${e.analyticsId}`):"pageview"===e.action?t.push(`${e.timestamp}: navigated to ${e.analyticsId}`):"request error"===e.action&&t.push(`${e.timestamp}: Request error: ${e.analyticsId}`)}),t}}},573520:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c}});var i=n(464027),s=n(429794),r=n(319434),o=n(539210),a=n(350383),l=n(168132);let c="ultra.components.services.discussionPermission",d="discussionPermission";class u{canCreateAllContent(e){if(e){let t;let n=this.CourseModel.$new(e),i=this.content.findRootNode(n,l.courseContent.e6.Interactive);return i.$then(()=>{(t=i.children)||(t=i.getChildren({limit:0}))}).$asPromise().then(()=>t.$asPromise().then(()=>t.permissions&&t.permissions.create))}return this.$q.when(!1)}hasEditPermission(e){return this.entitlement.hasCourseEntitlement(r.eo.ModifyContent,e)}hasEditAvailabilityPermission(e){return this.entitlement.hasCourseEntitlement(r.eo.ModifyContentAvailability,e)}hasEditDueDatePermission(e){return this.entitlement.hasCourseEntitlement(o.SE.ModifyItemDueDate,e)}hasGradingPermission(e){return this.entitlement.hasCourseEntitlement(o.SE.ModifyGradebook,e)}canDeleteDiscussion(e,t){return t&&t.permissions?t.canDelete():e&&e.canDelete()}areAnyGroupEntitled(e){return this.entitlement.areAnyEntitled([r.pQ.CreateGroups,r.pQ.DeleteGroups,r.pQ.ManageGroupMembership,r.pQ.ModifyGroups,r.pQ.ViewGroups],e)}constructor(e,t,n,i){this.$q=e,this.content=t,this.CourseModel=n,this.entitlement=i}}u.$inject=["$q",s.HV,l.N7.H,a.HV],i.module(c,[s.e1,l.e1,a.e1]).service(d,u)},471915:function(e,t,n){"use strict";n.d(t,{HV:function(){return w},Qx:function(){return A},e1:function(){return I}});var i=n(276635),s=n(464027),r=n(319434),o=n(168132),a=n(291146),l=n(717205),c=n(18447),d=n(429794),u=n(501),p=n(822658),m=n(763674),h=n(372457),g=n(247126),f=n(350383),b=n(573520);n(484769);var v=n(211796),y=n(539210),C=n(408027),S=n(443400);function E(e,t){return function(n,i){t(n,i,e)}}let I="ultra.service.discussion",w="discussionService",A="default";class k{init(e){let t=this.ultraState.nextParams.contentId;if(this.initCount++,this.initCount>1){if(t===this.currentContentId)return this.$q.when();this.initCount=1,this.destroy(),this.initCount=1}return this.currentContentId=t,this.redirectedFromStream="base.recentActivity"===this.ultraState.getBaseState(),this.reloaded=!this.ultraState.current.name,this.currentCourseId=this.contextCourse.courseId?this.contextCourse.courseId:this.ultraState.nextParams.courseId,this.groupId=this.ultraState.nextParams.disGroupId||"",this.userCourseAvailabilities[l.s3()]=!0,this.courseMembershipsFetcher=e||this.courseModel.$new(this.currentCourseId).memberships,this.courseMembershipsFetcher.$resolve({limit:1e4}).$asPromise().then(e=>{e.forEach(e=>{let t=e.role.toString();t in o.XY.M4?this.userCourseRoles[e.userId]=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:o.XY.M4[t]}):this.userCourseRoles[e.userId]=t,this.userCourseAvailabilities[e.userId]=e.isAvailable})}),this.resolveCourse().then(e=>{let t;this.course=e,this.outlineRoot=this.contentService.findRootNode(this.course,o.courseContent.e6.Root),this.engagementRoot=this.contentService.findRootNode(this.course,o.courseContent.e6.Interactive);let n=this.ultraState.nextParams.columnId;t=n&&n!==o.Rp.CREATE_COLUMN_ID?this.course.gradebook.columns.$find(n,{expand:"associatedRubrics"}).$asPromise():this.$q.when();let i=this.$q.when();this.ultraState.getBaseState()===c.default.defaultBasePage&&(i=this.courseMembership.load(this.course));let s=this.course.id;return this.$q.all([t,this.entitlementService.hasCourseEntitlement(r.s7.ViewAssessment,s),this.discussionPermission.hasEditPermission(s),this.entitlementService.hasCourseEntitlement(y.SE.Observe,s),this.entitlementService.hasCourseEntitlement(y.SE.ViewGradebookMetaData,s),this.entitlementService.hasCourseEntitlement(y.SE.ViewAttempts,s),i])}).then(([e,t,n,i,s,r])=>{e&&(this.column=e),this.canViewAssessments=t,this.hasEditPermission=n,this.canObserveGradebook=i,this.canViewGradebook=s,this.canViewAttempts=r})}destroy(){this.persistNewDiscussionDefer?this.persistNewDiscussionDefer.promise.then(()=>{this.clearDiscussionOnExit()}):this.clearDiscussionOnExit()}clearDiscussionOnExit(){this.initCount--,this.initCount>0||(this.deleteEmptyDiscussionOnExit(),this.course=void 0,this.userCourseRoles={},this.userCourseAvailabilities={},this.currentContentId=void 0,this.hardLinkContent=void 0,this.softLinkContent=void 0,this.engagementRoot=void 0,this.outlineRoot=void 0,this.canObserveGradebook=void 0,this.canViewAssessments=void 0,this.canViewGradebook=void 0,this.canViewAttempts=void 0,this.currentDiscussion=void 0,this.groupId=void 0,this.currentCourseId=void 0,this.column=void 0,this.assignedGroupsFiltersArray=void 0,this.selectedGroup=void 0,this.participantCount=void 0,this.loadDiscussionP=void 0,this.loadHardContentP=void 0,this.loadSoftContentP=void 0,this.hasEditPermission=void 0,this.hasClassGroup=void 0,this.redirectedFromStream=void 0,this.reloaded=void 0)}loadDiscussion(e,t,n){return this.loadDiscussionP?this.loadDiscussionP:this.loadDiscussionP=this.loadHardContent().then(()=>this.loadSoftContent()).then(()=>(e&&(i.merge(this.hardLinkContent,e),!n&&this.hasGroups()?this.hardLinkContent.assignedGroups.some(e=>this.groupId===e.groupId)||(this.groupId=this.hardLinkContent.assignedGroups[0].groupId):this.groupId=""),this.doLoadDiscussion(t)))}doLoadDiscussion(e=this.forumId){return this.course.forums.$new(e).messages.$fetch().$asPromise().then(e=>{this.currentDiscussion=e.find(e=>!e.groupId)})}createDiscussion(){let e=this.ultraState.params,t=this.ultraState.includes("**.course.outline.**")?void 0:e.parentId;return this.loadDiscussionP=this.$q.all([this.buildDiscussion(),this.contentService.makeContentInContentTree(this.engagementRoot,this.contextCourse.courseId,t,e.positionBefore,e.positionAfter)]).then(([e,t])=>{this.currentDiscussion=e,this.hardLinkContent=t.content,this.hardLinkContent.contentHandler=o.courseContent.ContentHandler.Discussion,this.hardLinkContent.visibility=this.contentService.determineVisibility(this.hardLinkContent.isAvailable),this.hardLinkContent.isAvailable=this.currentDiscussion.isAvailable})}newDiscussionPersist(e){let t=[{tag:"table",replacementText:this.bbLocalize.translateSync({key:"course.content.tablePlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)})},{tag:"math",replacementText:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)}),replacementTextPlural:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder.plural",locale:this.bbLocalize.getLocale(this.$rootScope)})}],n=(0,S.BD)(this.currentDiscussion.body.rawText,t),i=this.contentService.truncateDescription(n,d.t6.MAX_LENGTH_IN_CONTENT_ITEM);return this.currentDiscussion.plaintextDescription=i,this.currentDiscussion.$patch(["body","plaintextDescription"]).$asPromise().then(()=>this.doLoadDiscussion(e)).then(()=>{this.hardLinkContent.description=i,this.softLinkContent&&(this.softLinkContent.description=i)})}loadHardContent(e=!1){if(this.loadHardContentP)return this.loadHardContentP;let t=`${e?"":"alignedGoals,"}assignedGroups.group,selfEnrollmentGroups.group`;return this.loadHardContentP=this.course.contents.$find(this.currentContentId,{expand:t}).$asPromise().then(e=>this.hardLinkContent=e)}loadSoftContent(){return this.hardLinkContent?this.loadSoftContentP?this.softLinkContent?this.$q.when(this.softLinkContent):this.loadSoftContentP:this.loadSoftContentP=this.hardLinkContent.getSoftLinks({label:"ROOT"}).$asPromise().then(e=>{if(e.length)return this.contentService.getOrMakeContentInContentTree(this.outlineRoot,this.course.id,e[0].courseContent).then(e=>this.softLinkContent=e.content)}):this.$q.when()}addOrUpdateDiscussionInCourseLink(e=!1){let t=-1;if(e){var n;return this.contentService.getContentInContentTree(this.outlineRoot,this.currentCourseId,null===(n=this.softLinkContent)||void 0===n?void 0:n.id).then(({parentFolder:e})=>{var n;return t=e.children.indexOfItemById(null===(n=this.softLinkContent)||void 0===n?void 0:n.id),this.contentService.checkShouldAddOrUpdateChildInCourseLink(this.outlineRoot,this.softLinkContent,t)})}return this.contentService.checkShouldAddOrUpdateChildInCourseLink(this.outlineRoot,this.softLinkContent,t)}async persistNew(){try{this.persistNewDiscussionDefer=this.$q.defer(),this.updateHardLinkContent(this.currentDiscussion);let e=await this.hardLinkContent.$save().$asPromise();this.currentContentId=e.id,this.currentDiscussion=this.updateDiscussion(this.forumId),await this.currentDiscussion.$save().$asPromise();let t=await this.discussionPermission.canCreateAllContent(this.currentCourseId);if(!t){await this.ultraState.search("contentId",this.currentContentId);return}let{parentId:n,positionBefore:i,positionAfter:s}=this.ultraState.params,r=this.ultraState.includes("**.course.engagement.**");r&&(n=this.outlineRoot.id,i=null,s=null);let o=await this.contentService.makeSoftLinkContentInContentTree(this.hardLinkContent,this.outlineRoot,this.contextCourse.courseId,n,i,s);o&&(this.softLinkContent=o,this.softLinkContent.title=this.hardLinkContent.title,await this.softLinkContent.$save().$asPromise()),await this.ultraState.search("contentId",this.currentContentId)}finally{this.persistNewDiscussionDefer.resolve(),await this.addOrUpdateDiscussionInCourseLink(!0)}}get body(){var e,t;return null===(e=this.currentDiscussion)||void 0===e?void 0:null===(t=e.body)||void 0===t?void 0:t.rawText}get discussion(){if(this.currentDiscussion&&this.currentDiscussion.ui){var e;return null===(e=this.currentDiscussion.ui)||void 0===e?void 0:e.replies}return""}deleteEmptyDiscussionOnExit(){var e,t,n;let i=(null===(e=this.softLinkContent)||void 0===e?void 0:e.title)||(null===(t=this.hardLinkContent)||void 0===t?void 0:t.title),s=!this.body&&(!this.discussion||this.discussion&&(null===(n=this.discussion)||void 0===n?void 0:n.length)===0),r=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$rootScope),key:"components.directives.header.placeholder.x-bb-forumlink",params:{date:this.context.getServerTime()},noWrap:!0});if(s&&r===i){let e=this.ultraState.includes("**.course.outline.**")||this.ultraState.includes("**.engagement.**");this.deleteEmptyDiscussion(e)}}deleteEmptyDiscussion(e){var t,n;this.softLinkContent&&this.softLinkContent.id&&this.$rootScope.$broadcast("deleteContent",this.softLinkContent,!1),(null===(t=this.currentDiscussion)||void 0===t?void 0:t.gradedColumn)&&(null===(n=this.currentDiscussion)||void 0===n?void 0:n.gradedColumn.id)&&this.$rootScope.$broadcast("bb-delete-column",this.currentDiscussion.gradedColumn),this.$rootScope.$broadcast("deleteContent",this.hardLinkContent,e)}expandUsersInParticipants(e,t=!1){if(i.isEmpty(e))return this.$q.when(e);let n=e[0];if(null==n||null==n.userId)return this.$q.when(e);let s=e.map(e=>e.userId);return(!t||this.contextCourse.usersCache.hit(s)?this.$q.when():this.courseMembershipsFetcher.$fetchIfNotExpanded({limit:1e4,expand:"user"}).$asPromise()).then(()=>this.contextCourse.usersCache.fetchUsers(s,this.UserModel,this.$q).then(t=>(e.forEach(e=>{e.data=t.get(e.userId)}),this.$q.when(e))))}getParticipantCount(e=null){return this.loadHardContent().then(()=>(e||(e=this.forumId),this.course.forums.$new(e).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING",groupId:this.groupId}).$then(e=>this.expandUsersInParticipants(e)).$asPromise())).then(e=>{this.participantCount=e.filter(e=>e.topLevelReplyCount+e.secondLevelReplyCount>0).length})}queryParticipants(e,t,n="",i=!1){let s={limit:t,q:n,offset:0,groupId:this.hasGroups()&&this.groupId||""};return this.course.forums.$new(e).usercounts.$fetch(s).$asPromise().then(e=>this.expandUsersInParticipants(e,i))}async queryParticipant(e,t){let n=await this.course.forums.$new(e).usercounts.$fetch({userIds:[t],offset:0}).$asPromise(),i=n.map(e=>e.userId),s=await this.contextCourse.usersCache.fetchUsers(i,this.UserModel,this.$q);return n.forEach(e=>{e.data=s.get(e.userId),e.data||(e.data=l.Bv(this.$rootScope,this.bbLocalize))}),this.$q.when(n[0])}isPostFirstSatisfied(e,t=this.forumId){return this.loadHardContent().then(()=>this.course.forums.$new(t).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING"}).$then(e=>this.expandUsersInParticipants(e)).$asPromise()).then(t=>{let n=t.find(t=>t.data.id===e);return!!(n&&n.topLevelReplyCount)})}refreshParticipationGrade(){if(this.hasNoGroups()){this.column=void 0;return}return this.resolveColumn().then(e=>{e&&(this.column=e,this.column.summary&&this.column.summary.$fetch&&(this.getParticipantCount(),this.column.summary.$fetch({groupId:this.groupId})))})}saveContent(){return this.hardLinkContent.$patch().$then(()=>(this.softLinkContent&&this.softLinkContent.id&&(this.softLinkContent.applyAvailabilitySettings(this.hardLinkContent),this.softLinkContent.$patch().$then(()=>{this.$rootScope.$broadcast("content-update",this.softLinkContent)})),this.$rootScope.$broadcast("content-update",this.hardLinkContent),this.$rootScope.$broadcast("attempt-base-content-update",this.hardLinkContent,this.course.id),this.addOrUpdateDiscussionInCourseLink())).$asPromise()}savePost(){this.currentDiscussion.plaintextDescription=this.contentService.truncateDescription(this.currentDiscussion.plaintextDescription,d.t6.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent&&(this.hardLinkContent.description=this.currentDiscussion.plaintextDescription,this.hardLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.hardLinkContent)),this.softLinkContent&&(this.softLinkContent.description=this.currentDiscussion.plaintextDescription,this.softLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.softLinkContent))}loadGroup(e,t){if(this.hasClassGroup=e,this.assignedGroupsFiltersArray=null,e){let e={name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:null!=t?t:"components.directives.conversation.classConversation"}),index:0,groupId:A,extraClass:""};this.assignedGroupsFiltersArray=Array(e),this.selectedGroup=e}if(this.hasGroups()){let t=!1,n=e?1:0,i=this.hardLinkContent.assignedGroups.map(i=>{let s={name:!e||this.hasEditPermission?i.groupTitle:this.bbLocalize.translateSync({locale:"",key:"components.directives.conversation.myGroup"}),index:n++,groupId:i.groupId,isInGroupSet:!!(i.group&&i.group.groupSetId)};return this.redirectedFromStream&&!this.reloaded&&this.redirectToNeedGradingGroup(i.groupId,s),this.groupId&&this.groupId===s.groupId&&(this.selectedGroup=s,t=!0),s});this.assignedGroupsFiltersArray=this.assignedGroupsFiltersArray?this.assignedGroupsFiltersArray.concat(i):i,t||!this.assignedGroupsFiltersArray.length||(this.selectedGroup=this.assignedGroupsFiltersArray[0],this.groupId=this.selectedGroup.groupId,e||this.refreshParticipationGrade())}else this.groupId=""}async redirectToNeedGradingGroup(e,t){this.$q.when((async()=>{await this.resolveColumn();let n=await this.column.summary.$fetch({groupId:e}).$asPromise();(null==n?void 0:n.numStudentsNeedsGrading)>0&&(this.groupId=e,this.selectedGroup=t,this.refreshParticipationGrade(),this.$rootScope.$broadcast("group-change",this.groupId))})())}clearGroups(){this.hardLinkContent&&this.contentService.clearContentGroups(this.hardLinkContent,this.course).then(()=>{this.groupId="",this.$rootScope.$broadcast("discussion-group-content-update",this.hardLinkContent),this.$rootScope.$broadcast("load-participants")})}isGroupDiscussion(){return!!(this.hardLinkContent&&this.hardLinkContent.isGroupContent&&this.hardLinkContent.assignedGroups)}hasGroups(){return this.isGroupDiscussion()&&!!this.hardLinkContent.assignedGroups.length}hasNoGroups(){return this.isGroupDiscussion()&&!this.hardLinkContent.assignedGroups.length}isOpenFromConversation(){return!!this.ultraState.current.url&&this.ultraState.current.url.indexOf("conversations")>0}get forumId(){return this.contentService.parseForumId(this.hardLinkContent.contentDetailUrl)}get alignedGoalsCount(){return this.hardLinkContent&&this.hardLinkContent.alignedGoals?this.hardLinkContent.alignedGoals.length:0}updateHardLinkContent(e){this.hardLinkContent.title=e.subject,this.hardLinkContent.description=this.contentService.truncateDescription(e.plaintextDescription,d.t6.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent.visibility=this.contentService.determineVisibility(this.hardLinkContent.isAvailable),this.hardLinkContent.contentDetail={"resource/x-bb-forumlink":{title:e.subject}}}buildDiscussion(){return this.engagementRoot.$asPromise().then(()=>{let e=!1;this.contentService.canOnlyCreateDiscussion(this.engagementRoot)&&(e=!0);let t=this.contextUser.userModel;return this.course.forums.$new().messages.$build({courseId:this.contextCourse.courseId,userId:t.id,postedName:t.userName,subject:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:"course.content.discussionTitlePlaceholder"}),body:{rawText:"",displayText:""},isDeleted:!1,isAvailable:e})})}stopActivityAfterDueDate(){var e,t,n,i,s;let r=this.context.getServerTime(),o=this.isGroupDiscussion()&&(null===(e=this.hardLinkContent)||void 0===e?void 0:e.dueDateExceptionType)===C.AVG.Unlimited,a=!this.isGroupDiscussion()&&this.courseMembership.isDueDateExcepted();return this.courseMembership.isStudentMembership()&&!o&&!a&&(null===(t=this.currentDiscussion)||void 0===t?void 0:null===(n=t.gradedColumn)||void 0===n?void 0:n.enforceDueDate)&&r>(null===(i=this.currentDiscussion)||void 0===i?void 0:null===(s=i.gradedColumn)||void 0===s?void 0:s.dueDate)}updateDiscussion(e){let t=this.context.getServerTime();return this.course.forums.$new(e).messages.$build({subject:this.currentDiscussion.subject,id:null,forumId:e,parentId:"{unset id}",courseId:this.currentDiscussion.courseId,userId:this.currentDiscussion.userId,postedName:this.currentDiscussion.postedName,body:this.currentDiscussion.body,isDeleted:!1,postDate:t,editDate:t,isAvailable:this.currentDiscussion.isAvailable})}resolveCourse(){return this.contextCourse.course?this.contextCourse.course.$asPromise():this.courseModel.$find(this.currentCourseId).$asPromise()}refetchColumn(){return this.column?this.column.$fetch({expand:"associatedRubrics"}).$asPromise():this.resolveColumn()}hasViewGradebookColumnPermission(){return this.canViewGradebook||this.canViewAttempts||this.canViewAssessments||this.canObserveGradebook}resolveColumn(){return this.column?this.column.$asPromise():this.loadDiscussion().then(()=>this.currentDiscussion.gradedColumn?this.hasViewGradebookColumnPermission()?this.course.gradebook.columns.$new(this.currentDiscussion.gradedColumn.id).$fetch({expand:"associatedRubrics"}).$asPromise():this.$q.when(this.currentDiscussion.gradedColumn):void 0)}get isGradedDiscussion(){return this.currentDiscussion&&this.currentDiscussion.allowGrading}set groupId(e){let t=this._groupId;s.isArray(e)?this._groupId=e[0]:this._groupId=e,this._groupId&&this._groupId!==t&&(this.hasClassGroup&&this.ultraState.search("groupId",this._groupId),this.ultraState.search("disGroupId",this._groupId))}get groupId(){return this._groupId===A?"":this._groupId}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m){this.bbLocalize=e,this.$rootScope=t,this.$q=n,this.$modal=i,this.courseModel=s,this.UserModel=r,this.context=o,this.contentService=a,this.ultraState=l,this.entitlementService=c,this.discussionPermission=d,this.contextUser=u,this.courseMembership=p,this.contextCourse=m,this.userCourseRoles={},this.userCourseAvailabilities={},this.canObserveGradebook=!1,this.canViewAssessments=!1,this.canViewGradebook=!1,this.canViewAttempts=!1,this.participantCount="-",this.hasEditPermission=!1,this.hasClassGroup=!1,this.initCount=0,this.$rootScope.$on("discussion-group-content-update",(e,t)=>{this.hardLinkContent&&(this.hardLinkContent.applyGroupSettings(t),this.softLinkContent&&this.softLinkContent.id&&this.softLinkContent.applyGroupSettings(this.hardLinkContent))})}}k=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([E(0,(0,v.tB)(a.serviceName)),E(1,(0,v.tB)("$rootScope")),E(2,(0,v.tB)("$q")),E(3,(0,v.tB)("$modal")),E(4,(0,v.tB)(o.N7.H)),E(5,(0,v.tB)(o.EA.HV)),E(6,(0,v.tB)(u.HV)),E(7,(0,v.tB)(d.HV)),E(8,(0,v.tB)(g.HV)),E(9,(0,v.tB)(f.HV)),E(10,(0,v.tB)(b.HV)),E(11,(0,v.tB)(h.HV)),E(12,(0,v.tB)(m.HV)),E(13,(0,v.tB)(p.HV))],k),s.module(I,[o.e1,a.moduleName,u.e1,d.e1,g.e1,f.e1,b.e1,o.e1]).service(w,k)},286806:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},Pw:function(){return s},e1:function(){return c},ns:function(){return u}});var i,s,r=n(276635),o=n(464027),a=n(291146),l=n(625506);let c="ultra.services.dragDrop",d="dragDropService";(i=s||(s={})).Top="TOP",i.Bottom="BOTTOM",i.Folder="FOLDER",i.Self="SELF";class u{createDropPlaceholderElement(e){this.dropPlaceholderElement=l('<div class="dragdropplaceholder js-no-file-drop" style="height: '+e.height()+"px; width: "+e.width()+'px"></div>')}setDropTarget(e){this.lastDropTargetId=this.currentDropTargetId,this.currentDropTargetId=e}clearDropTarget(){this.setDropTarget(void 0)}isCurrentDropTarget(e){return this.currentDropTargetId===e}isNotSameDropTarget(){return this.currentDropTargetId!==this.lastDropTargetId}scrollDragDropItemsContainer(e,t){let n=this._getScrollingContainerElement();if(n){let i=e<u.SCROLLING_CONSTANTS.scrollZoneHeight,s=e>n.height()-u.SCROLLING_CONSTANTS.scrollZoneHeight,r=n.scrollTop();i?n.scrollTop(r-t):s&&n.scrollTop(r+t)}}_getScrollingContainerElement(){let e=u.SCROLL_CONTAINERS_SELECTORS.map(e=>this.originalElement.closest(e));return r.find(e,e=>this._elementHasScrollbar(e))}_elementHasScrollbar(e){return e.get(0).scrollHeight>e.innerHeight()}constructor(e,t){this.$timeout=e,this.bbLocalize=t,this.dragHoverClass="dz-drag-hover",this.dragElementSelector=".drag-element",this.onFolderClass="on-folder",this.onNestedFolderClass="on-nested-folder",this.originalElementClass="drag-element-original",this.movableElementClass="drag-element-movable",this.queuedScreenReaderMessages="",this.bbLocalize.loadBundle("components/services/drag-drop").then(()=>{this.folderDepthMessageKey="components.services.drag-drop.folderDepthMessage"})}}u.SCROLLING_CONSTANTS={scrollZoneHeight:200,mouseInteractionDistanceToScroll:30,keyboardInteractionDistanceToScroll:200},u.SCROLL_CONTAINERS_SELECTORS=[".panel-wrap",".panel-content"],u.$inject=["$timeout",a.serviceName],o.module(c,[a.moduleName]).service(d,u)},675356:function(e,t,n){"use strict";n.d(t,{HV:function(){return a},e1:function(){return l}});var i,s=n(852512),r=n(211796),o=n(625506);let a="menuCloserService",l="ultra.services.menuCloser";class c{closeAnyOpenAngularMenus(){this.service.closeAnyOpenAngularMenus()}constructor(e){this.service=e,this.key=s.fz.AngularMenuCloserService}}class d{closeAnyOpenAngularMenus(){let e=o(".f-open-dropdown");e.length>0&&window.Foundation.libs.dropdown.close(e),this.$rootScope.$broadcast("foundation-offcanvas-close-panel")}constructor(e){this.$rootScope=e,(0,s.gM)(new c(this))}}d=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(i=(0,r.tB)("$rootScope"),function(e,t){i(e,t,0)})],d),angular.module(l,[]).service(a,d)},109205:function(e,t,n){"use strict";n.d(t,{H:function(){return c},e:function(){return l}});var i=n(464027),s=n(814154),r=n(887545),o=n(606592),a=n(625506);let l="ultra.services.dropdownInit",c="dropdownInitService";i.module(l,[s.e]).factory(c,[s.H,e=>{let t=(e,t)=>{t.focus()};return(n,i)=>{n.find("[data-dropdown]").each((n,s)=>{let l=a(s),c=l.attr("data-dropdown"),d=a("#"+c);if(!d.length)return;l.attr("aria-haspopup","true"),d.attr("role")||(d.attr("role","menu"),d.find("li a").each(function(){a(this).attr("role")||a(this).attr("role","menuitem")})),d.off("keydown.fndtn.dropdown"),d.on("keydown.fndtn.dropdown",e=>{if(d.hasClass("open")){let n,i=!0,s=d.find("li a:focus").closest("li");if(0===s.length&&(s=d.find(":focus"),i=!1),(e.keyCode!==o.hY||d.hasClass("bb-foundation-dropdown-close-esc-override"))&&(e.keyCode!==o.Mf||d.hasClass("bb-foundation-dropdown-tab-override"))){if(e.keyCode===o.WV||e.keyCode===o.UP||e.keyCode===o.Mf)return i?(e.keyCode!==o.WV&&(e.keyCode!==o.Mf||e.shiftKey)?e.keyCode!==o.UP&&(e.keyCode!==o.Mf||!e.shiftKey)||(n=s.prevAll().not(".scroll-control").find(":tabbable").last().closest("li"))&&0!==n.length||(n=d.find(":tabbable").closest("li").not(".scroll-control").last()):(n=s.nextAll().not(".scroll-control").find(":tabbable").first().closest("li"))&&0!==n.length||(n=d.find(":tabbable").closest("li").not(".scroll-control").first()),n.length>0&&n.find(":tabbable").focus()):e.keyCode!==o.WV&&(e.keyCode!==o.Mf||e.shiftKey)?(e.keyCode===o.UP||e.keyCode===o.Mf&&e.shiftKey)&&r.gW(d,s):r.Bv(d,s),!1}else l.click(),e.keyCode===o.hY&&(t(d,l),e.stopPropagation())}});let u=!0;d.off("keyup.fndtn.dropdown"),d.on("keyup.fndtn.dropdown",e=>{if((e.keyCode===o.K5||e.keyCode===o.L_)&&!d.hasClass("bb-foundation-dropdown-enter-override")){if(!u)return u=!0,!1;if(a(e.target).closest("input[type=checkbox]").length||a(e.target).closest("button").length||"-1"===a(e.target).attr("tabindex"))return!0;if(d.hasClass("open")){let e=d.find("li a:focus").closest("li");return e.length>0?e.find("a").click():l.click(),t(d,l),!1}}}),l.off("keydown.fndtn.dropdown"),l.on("keydown.fndtn.dropdown",e=>{if((e.keyCode===o.K5||e.keyCode===o.L_)&&!d.hasClass("open")){l.click(),u=!1;let e=d.find("li a:focus").closest("li");return 0===e.length&&(e=d.find("li").not(".scroll-control").find(":tabbable").first().closest("li")),e.find("a:visible").length?e.find("a:visible").focus():d.find(":tabbable").first().focus(),!1}}),l.off("click.fndtn.dropdown"),l.on("click.fndtn.dropdown",t=>{let n=d.find("li a:focus").closest("li");0===n.length&&(n=d.find("li").not(".scroll-control").find(":tabbable").first().closest("li"));let s=e(()=>{"false"===d.attr("aria-hidden")&&(n.find("a:visible").length?n.find("a:visible").focus():d.find("*:focus").length||d.find(":tabbable").first().focus(),e.cancel(s))},i,50,100,!1)})})}}])},870452:function(e,t,n){"use strict";n.d(t,{HV:function(){return o},cy:function(){return a},e1:function(){return r}});var i=n(464027),s=n(168132);let r="ultra.service.entitlementCache",o="entitlementCache",a="SYSTEM_ENTITLEMENTS";class l{fetchSystemEntitlements(){return this.EntitlementModel.$collection().$fetch().$asPromise()}fetchCourseEntitlements(e){return this.CourseModel.$new(e).entitlements.$fetch().$asPromise()}loadCourseEntitlements(e){if(!e||this.hasCachedCourseEntitlements(e))return this.$q.resolve();let t=this.$q.defer();return!this.entitlementDefers.has(e)&&(this.entitlementDefers.set(e,new Set),(e===a?this.fetchSystemEntitlements():this.fetchCourseEntitlements(e)).then(t=>{let n=t.filter(e=>e.hasEntitlement()).map(e=>e.uid);this.entitlements.set(e,new Set(n)),this.entitlementDefers.get(e).forEach(e=>e.resolve())},t=>this.entitlementDefers.get(e).forEach(e=>e.reject(t))).finally(()=>this.entitlementDefers.delete(e))),this.entitlementDefers.get(e).add(t),t.promise}getCachedCourseEntitlements(e){return this.hasCachedCourseEntitlements(e)?this.entitlements.get(e):new Set}hasCachedCourseEntitlements(e){return this.entitlements.has(e)}clearEntitlementCache(e){this.entitlements.delete(e)}constructor(e,t,n){this.$q=e,this.CourseModel=t,this.EntitlementModel=n,this.entitlements=new Map,this.entitlementDefers=new Map}}l.$inject=["$q",s.N7.H,s.lR.H],i.module(r,[s.e1]).service(o,l)},350383:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},e1:function(){return d}});var i=n(464027),s=n(18447),r=n(870452),o=n(822658),a=n(852512),l=n(837545),c=n(458733);let d="ultra.service.entitlement",u="entitlement";class p{hasSystemEntitlement(e){return(0,l.h)(this.service.hasSystemEntitlement(e))}constructor(e){this.service=e,this.key=a.fz.Entitlement}}class m{isEntitled(e,t=this.currentCourse.courseId){if(!t)return s.default.production||console.error(Error("There is no course in context. Check the configuration.")),!1;if(!s.default.production&&!this.entitlementCache.hasCachedCourseEntitlements(t))throw Error(`Cached entitlements should exist for course with ID, ${t}, but none were found.
        Make sure the entitlement resolver is configured for this route,
        or use async hasCourseEntitlement methods that guarantee the cache initializes.`);return this.entitlementCache.hasCachedCourseEntitlements(t)&&this.entitlementCache.getCachedCourseEntitlements(t).has(e.toString())}areAllEntitled(e,t=this.currentCourse.courseId){return e.every(e=>this.isEntitled(e,t))}areAnyEntitled(e,t=this.currentCourse.courseId){return e.some(e=>this.isEntitled(e,t))}hasCourseEntitlement(e,t=this.currentCourse.courseId){return this.entitlementCache.loadCourseEntitlements(t).then(()=>this.isEntitled(e,t))}hasAllCourseEntitlements(e,t=this.currentCourse.courseId){return this.entitlementCache.loadCourseEntitlements(t).then(()=>this.areAllEntitled(e,t))}hasAnyCourseEntitlement(e,t=this.currentCourse.courseId){return this.entitlementCache.loadCourseEntitlements(t).then(()=>this.areAnyEntitled(e,t))}hasSystemEntitlement(e){return this.entitlementCache.loadCourseEntitlements(r.cy).then(()=>this.isEntitled(e,r.cy))}hasAnySystemEntitlements(e){return this.entitlementCache.loadCourseEntitlements(r.cy).then(()=>this.areAnyEntitled(e,r.cy))}constructor(e,t){this.entitlementCache=e,this.currentCourse=t,this.isUserEntitledToRetrieveCourseProgressConfiguration=e=>this.isEntitled(c.NT.ViewConfiguration)||e,(0,a.gM)(new p(this))}}m.$inject=[r.HV,o.HV],i.module(d,[r.e1,o.e1]).service(u,m)},619930:function(e,t,n){"use strict";n.d(t,{HV:function(){return c},e1:function(){return l}});var i=n(464027),s=n(18447),r=n(834266),o=n(759485),a=n(951248);let l="ultra.service.errorHandler",c="errorHandler",d=e=>()=>{let t;let n=e.connect(e=>({}),a.Nwg.app)((e,n)=>{t=n});try{t&&t.clearError&&t.clearError()}finally{n()}},u=(e,t,n,i,r)=>a=>{if(a&&a.$response){if(401===a.$response.status){let n=e.get("$location"),i=n.url(),r=i?"/?new_loc="+encodeURIComponent(s.default.basePath+i):"/";t.location.href=o.uI(r)}else 403===a.$response.status?r.handleApiError(a.$response,()=>{n.$broadcast("no-permission-course"),d(i)()}):-2===a.$response.status?"undefined"!=typeof NREUM&&NREUM.noticeError(a.$response.data):r.handleApiError(a.$response,d(i))}},p=e=>t=>{let n;let i=e.subscribe(()=>{let i=a.Ys.app.getAppError(e.getState());if(i&&n!==i){let e={status:"api"===i.type?i.status:-2,data:i.originalException};t({$response:e})}n=i});return i};i.module(l,[]).factory(c,["$injector",e=>{let t=t=>e.invoke(["$injector","$window","$rootScope","$ngRedux",r.HV,u])(t);return{handle:t,subscribe:()=>e.invoke(["$ngRedux",e=>p(e)(t)])}}])},834266:function(e,t,n){"use strict";n.d(t,{B6:function(){return E},e1:function(){return R},HV:function(){return B}});var i=n(276635),s=n(464027),r=n(202784),o=n.n(r),a=n(18447),l=n(291146),c=n(748157),d=n(408027),u=n(410628),p=n(217347),m=n(238145),h=n.n(m),g=n(398435),f=n(42196);let b=e=>{let{sessionDebug:t}=e,n=(0,u.q)(),[i,s]=o().useState(!1);return i?o().createElement(o().Fragment,null,o().createElement(h(),null,n("supportPanel.sessionDebug.submissionButtonLabel"),o().createElement(g.AnalyticsTooltip,{analyticsId:"errorModal.sessionDebug.information.tooltip",title:n("supportPanel.sessionDebug.modalInformationText"),PopperProps:{style:{zIndex:1000100}}},o().createElement(g.AnalyticsIconButton,{analyticsId:"errorModal.sessionDebug.information.tooltip"},o().createElement(f.d,null)))),o().createElement(p.I,{sessionDebug:t})):o().createElement(g.AnalyticsLink,{tabIndex:0,analyticsId:"erroModal.sessionDebug.showInput.link",onClick:()=>s(!0)},n("supportPanel.sessionDebug.submissionButtonLabel"))};var v=n(445218),y=n(691032);let C="ultra.components.directives.sessionDebugModalButton";s.module(C,[l.moduleName]).component("bbSessionDebugModalButton",(0,v.G5)({Class:e=>{let[t,n]=r.useState("");return r.useEffect(()=>{y.ZP.getDebugInfoFriendly().then(e=>n(e.join("\r\n")))},[]),r.createElement(b,{sessionDebug:t})},renderLocalized:!0,withProvider:!0,withErrorModalBoundary:!1}));var S=n(643785),E=n(883912),I=n(279215),w=n(72026),A=n(453494),k=n(741278),x=n(364258),T=n(690778),P=n(592639),D=n(973016),G=n(589023);let R="ultra.components.services.errorModal",B="errorModal";class L{onErrorResponse(e){this.handlers.push(e)}handleApiError(e,t){var n,s,r,o,a,l;if(!e||null==e.status)return;let c=this.$window.document.getElementsByClassName("ms-Panel").length;if(c)return;let u={response:e,errorHandler:t};if(e.status===d.oji.Forbidden)(null===(n=e.data)||void 0===n?void 0:n.message)==="Question could not be created with existing attempt(s)"?u.template=S:u.template=E;else if(e.status===d.oji.NotFound)i.includes(null===(s=e.data)||void 0===s?void 0:s.message,"No course content found for content id")?u.template=I:u.template=w;else if(e.status===d.oji.Conflict)u.template=A;else if(507===e.status)u.template=k;else if(e.status>=400&&e.status<=599){if(e.status===d.oji.BadRequest&&(null===(r=e.data)||void 0===r?void 0:r.code)===L.COURSE_IS_CLOSED_CODE)u.template=x;else if(e.status===d.oji.BadRequest&&(i.includes(null===(o=e.data)||void 0===o?void 0:o.message,"The input was too large")||(null===(a=e.data)||void 0===a?void 0:a.code)===d.WYQ))u.template=D;else if((null===(l=e.data)||void 0===l?void 0:l.code)===d.bSh)u.template=T;else{let t;this.handlers.some(n=>(t=this.$injector.invoke(n,void 0,{response:e}))&&void 0!==t.tpl),u.template=t&&t.tpl||P,u.scope=t&&t.scope}}u.template&&this.openModal(u)}showDefaultErrorModal(){this.openModal({template:w})}handleError(e,t){e&&this.openModal({errorString:e,template:G,errorHandler:t})}getReactErrorBoundary(){return this.reactErrorBoundary}openModal(e){if(this.isModalClosed){if(!e||!e.template)throw Error("Modal configuration template was not supplied");let t=e.scope||this.$rootScope;a.default.errorDetails&&((t=this.$rootScope.$new()).response=e.response),t.errorString=e.errorString;let n={template:e.template,scope:t,resolve:{translations:[l.serviceName,e=>e.loadBundle("components/services/error-modal")]}};this.isModalClosed=!1,this.modalInstance=this.$modal.open(n),this.modalInstance.result.then(()=>{},()=>{this.isModalClosed=!0,e.errorHandler&&e.errorHandler()})}}constructor(){this.isModalClosed=!0,this.handlers=[],this.$get=[c.HV,"$rootScope","$q","$window","$injector",function(e,t,n,i,s){return this.$modal=e,this.$rootScope=t,this.$q=n,this.$injector=s,this.$window=i,window.addEventListener("show-debug-error-modal",()=>{this.showDefaultErrorModal()}),this}]}}L.COURSE_IS_CLOSED_CODE="bb-rest-course-is-closed",s.module(R,[l.moduleName,c.e1,C]).provider(B,L)},839650:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var i=n(464027),s=n(854108);let r="ultra.services.errorHandler",o=["$delegate","$injector",(e,t)=>{let n;return Object.assign(function(i,r){e(i,r),n||(n=t.get(s.HV)),"undefined"!=typeof NREUM&&NREUM.noticeError(i)},e)}];i.module(r,[s.e1]).config(["$provide",e=>{e.decorator("$exceptionHandler",o)}])},805529:function(e,t,n){"use strict";n.d(t,{HV:function(){return s},e1:function(){return i}});let i="external.script.loader",s="externalScriptLoader";class r{_createScriptElement(){return document.createElement("script")}_appendScriptElement(e){document.head.appendChild(e)}_getWindowProperty(e){return window[e]}getScript(e,t={}){if(this.scripts[e])return this.scripts[e];let n=this.$q.defer();try{this.scripts[e]=n.promise;let i=(e.indexOf("?")>=0?"&":"?")+"_"+Date.now(),s=this._createScriptElement();if(s.type="text/javascript",s.src=e+i,t.attributes)for(let e of Object.keys(t.attributes))s.setAttribute(e,t.attributes[e]);let r=this;s.onload=function(){t.exports?n.resolve(r._getWindowProperty(t.exports)):n.resolve()},s.onerror=function(){n.reject(Error(`error loading script: ${e}`))},this._appendScriptElement(s)}catch(e){n.reject(e)}return n.promise}constructor(e){this.$q=e,this.scripts={}}}r.$inject=["$q"],angular.module(i,[]).service(s,r)},207069:function(e,t,n){"use strict";n.d(t,{e1:function(){return a},HV:function(){return l}});var i=n(211796),s=n(951248);class r{wait(){if(!this.defered){let e=this.service.isFeatureEnabledStrict(this.flagKey);if(void 0!==e)return this.$q.resolve(e);this.deregister=this.scope.$on("feature-flag-values-updated",this.featureFlagsUpdated.bind(this)),this.service.loadFeatureFlagValue(this.flagKey),this.defered=this.$q.defer()}return this.defered.promise}featureFlagsUpdated(){let e=this.service.isFeatureEnabledStrict(this.flagKey);if(void 0!==e){var t,n;null===(t=this.deregister)||void 0===t||t.call(this),this.deregister=void 0,null===(n=this.defered)||void 0===n||n.resolve(e)}}constructor(e,t,n,i){this.flagKey=e,this.scope=i,this.$q=n,this.service=t}}function o(e,t){return function(n,i){t(n,i,e)}}let a="ultra.service.feature.flags",l="featureFlags";class c{subscribeToRedux(){let e=this.$ngRedux.connect(e=>{let t=s.Ys.featureFlags.getFeatureFlagValues(e);return{flagValues:t}},e=>({loadFeatureFlagValueByKey:t=>e(s.Nwg.featureFlags.loadFeatureFlagValueByKey({flagKey:t}))}))(this);this.$rootScope.$on("$destroy",e)}loadFeatureFlagValue(e){return this.loadFeatureFlagValueByKey(e)}isFeatureEnabled(e){var t;return(null===(t=this.flagValues)||void 0===t?void 0:t[e])?this.isFlagValueTrue(this.flagValues[e].flagValue):(this.loadFeatureFlagValue(e),!1)}isFeatureEnabledStrict(e){var t;if(null===(t=this.flagValues)||void 0===t?void 0:t[e])return this.isFlagValueTrueStrict(this.flagValues[e]);this.loadFeatureFlagValue(e)}isFlagValueTrue(e){return"true"===e}isFlagValueTrueStrict(e){if(e&&(void 0!==e.flagValue||!e.isLoading))return this.isFlagValueTrue(e.flagValue)}createWaiter(e){let t=new r(e,this,this.$q,this.$rootScope);return t.wait()}constructor(e,t,n){this.$rootScope=e,this.$q=t,this.$ngRedux=n,this.subscribeToRedux();let i=e.$watch(()=>this.flagValues,e=>this.$rootScope.$broadcast("feature-flag-values-updated",e));this.$rootScope.$on("$destroy",()=>i())}}c=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([o(0,(0,i.tB)("$rootScope")),o(1,(0,i.tB)("$q")),o(2,(0,i.tB)("$ngRedux"))],c),angular.module(a,[]).service(l,c)},4540:function(e,t,n){"use strict";n.d(t,{HV:function(){return c},e1:function(){return l}});var i=n(464027),s=n(951248),r=n(211796),o=n(118717);function a(e,t){return function(n,i){t(n,i,e)}}let l="ultra.service.upload.settings",c="uploadSettings";class d{fetchFileUploadSettings(){return this.$q.when(this.getFileUploadSettings())}subscribeToRedux(){this.$ngRedux.connect(e=>({fileUploadSettings:s.Ys.fileUploadSettings.getFileUploadSettings(e)}),e=>(0,o.DE)({getFileUploadSettings:s.Nwg.fileUploadSettings.loadFileUploadSettings},e))(this)}getSettings(){return this.fileUploadSettings}constructor(e,t){this.$q=e,this.$ngRedux=t,this.subscribeToRedux()}}d=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([a(0,(0,r.tB)("$q")),a(1,(0,r.tB)("$ngRedux"))],d),i.module(l,[]).service(c,d)},786121:function(e,t,n){"use strict";n.d(t,{e1:function(){return o},iK:function(){return l},xQ:function(){return a}});var i,s,r=n(291146);let o="fileUtility",a="FileUtilFactory";(i=s||(s={})).bytes="components.directives.fileUpload.bytes",i.GB="components.directives.fileUpload.GB",i.KB="components.directives.fileUpload.KB",i.MB="components.directives.fileUpload.MB";class l{getLocalizedSize(e,t,n=1){let i=this.calculateSize(e),r=this.bbLocalize.translateSync({locale:t,key:i.sizeLabel}),o=this.bbLocalize.translateSync({locale:t,key:"global.localizedNumber",params:{number:i.sizeLabel===s.bytes?i.size:parseFloat(i.size.toFixed(n))},noWrap:!0}),a=this.bbLocalize.translateSync({locale:t,key:"components.directives.fileUpload.sizeOutput",params:{size:o,label:r},noWrap:!0,noEscape:!0});return a}constructor(e,t){this.bbLocalize=e,this.$q=t,this.calculateSize=e=>{let t=s.bytes;return e>1e3&&(e/=1e3,t=s.KB,e>1e3&&(e/=1e3,t=s.MB,e>1e3&&(e/=1e3,t=s.GB))),{size:e,sizeLabel:t}}}}l.$inject=[r.serviceName,"$q"],angular.module(o,[r.moduleName]).factory(a,["$injector",e=>function(){return e.instantiate(l)}])},286531:function(e,t,n){"use strict";n.d(t,{HV:function(){return c},e1:function(){return l}});var i=n(464027),s=n(385270),r=n(951248),o=n(555342),a=n(625506);let l="ultra.components.services.fileViewer",c="fileViewer",d="audio",u="image",p="video";class m{constructor(e){this.$sce=e,this.canFileBeRenderedInline=e=>{if(!e)return!1;let t=this.getMediaSubType(e),n=this.getMediaType(e);switch(n){case u:return["jpeg","gif","png"].indexOf(t)>-1;case d:case p:{let t=document.createElement(n);return t.canPlayType&&!!t.canPlayType(e)}}return(0,o.ZO)(e)},this.getMediaSubType=e=>{var t;return null!==(t=null==e?void 0:e.substring(e.indexOf("/")+1))&&void 0!==t?t:null},this.getMediaType=e=>{var t;return null!==(t=null==e?void 0:e.substring(0,e.indexOf("/")))&&void 0!==t?t:null},this.isMediaFile=e=>a.inArray(e,[u,p,d])>=0,this.shouldRenderInlineByDefault=e=>{let t=!1,n=this.getMediaType(e.currentMimeType);return n?t=this.isMediaFile(n):(0,o.ZO)(e.currentMimeType)&&(t=!0),t},this.isAudioFile=e=>e===d,this.isImageFile=e=>e===u,this.isVideoFile=e=>e===p,this.initUiField=e=>{null==e.ui&&(e.ui={}),e.viewerData&&e.viewerData.viewerUrl&&(e.ui.trustedViewUrl=this.$sce.trustAsResourceUrl(e.viewerData.viewerUrl)),e.ui.iconClass=(0,r.RMg)(e.currentMimeType);let{currentMimeType:t}=e;e.ui.mediaType=this.getMediaType(t),e.ui.mediaSubtype=this.getMediaSubType(t),e.ui.canBeRenderedInline=this.canFileBeRenderedInline(t),e.ui.safeAltText=e.alternativeText?s.Z.HTML(e.alternativeText):""}}}m.$inject=["$sce"],i.module(l,[]).service(c,m)},548792:function(e,t,n){"use strict";let i;n.d(t,{U1:function(){return I},e1:function(){return S},HV:function(){return E}});var s,r=n(464027),o=n(335920),a=n(501),l=n(822658),c=n(305233),d=n(211796),u=n(451251),p=n(18447),m=n(445057);let h=p.default.features.devtools_disableFtue?-1:2,g="ftue.",f=".visited",b="hide",v="show";class y{shouldShow(e,t,n){return p.default.disableAllFtueGuidance?this.$q.when(!1):n?this.$q.when(this.isShownInCurrentSession(e)):this.$q.all([this.offCanvas.getElement(t),this.offCanvas.getTopElement(),this.getSessionNumber(e)]).then(t=>{let n=t[0],i=t[1],s=t[2];return i&&n!==i?this.$q.when(!1):this.shouldShowImpl(e,s)})}shouldShowImpl(e,t){if(t>h)return this.$q.when(!1);if(this.isLastSessionCurrent(e))return this.$q.when(this.isShownInCurrentSession(e));t++;let n=t<=h;return sessionStorage.setItem(this.getSessionStorageKey(e),n?v:b),this.setSessionNumber(e,t).then(()=>n),this.$q.when(n)}hide(e,t){sessionStorage.setItem(this.getSessionStorageKey(e),b),t&&this.getSessionNumber(e).then(t=>{this.setSessionNumber(e,++t)})}getSessionNumber(e){let t=g+e+f;return this.isPredictComponent(e)?this.context.getPredictPreference(t,"0").then(e=>{let t=parseInt(e.value,10);return Number.isNaN(t)?h:t}):this.context.getPreference(t,"0").then(e=>{let t=parseInt(e.value,10);return Number.isNaN(t)?0:t})}isLastSessionCurrent(e){let t=sessionStorage.getItem(this.getSessionStorageKey(e));return t===v||t===b}isShownInCurrentSession(e){let t=sessionStorage.getItem(this.getSessionStorageKey(e));return t!==b}setSessionNumber(e,t){let n=g+e+f;return this.isPredictComponent(e)?this.context.setPredictPreference(n,t.toString()):this.context.setPreference(n,t.toString())}getSessionStorageKey(e){return g+e+".show."+m.u(this.context.sessionId)}isPredictComponent(e){return!!e&&0===e.toLowerCase().indexOf("predict.")}constructor(e,t,n,i){this.$q=e,this.context=t,this.offCanvas=n,this.contextCourse=i}}class C extends y{shouldShowImpl(e,t){return this.courseId=this.contextCourse.courseId&&this.contextCourse.courseId.replace(/_/g,"."),this.getSessionNumber(e+this.courseId).then(n=>{if(t>h&&n>1)return this.$q.when(!1);if(this.isLastSessionCurrent(e+this.courseId))return this.$q.when(this.isShownInCurrentSession(e)||this.isShownInCurrentSession(e+this.courseId));let i=!1,s=!1;t++,n++,i=t<=h,sessionStorage.setItem(this.getSessionStorageKey(e),i?v:b),s=n<=1,sessionStorage.setItem(this.getSessionStorageKey(e+this.courseId),s?v:b);let r=[];return t<=h+1&&r.push(this.setSessionNumber(e,t)),n<=2&&r.push(this.setSessionNumber(e+this.courseId,n)),this.$q.all(r).then(()=>i||s),this.$q.when(i||s)})}hide(e){sessionStorage.setItem(this.getSessionStorageKey(e),b),this.courseId||(this.courseId=this.contextCourse.courseId&&this.contextCourse.courseId.replace(/_/g,".")),sessionStorage.setItem(this.getSessionStorageKey(e+this.courseId),b)}}let S="ultra.service.firstTimeHelper",E="firstTimeHelper",I=/[_-]/g,w=Symbol("default");class A{shouldShow(e,t,n){return this.convertAngularPromise((i.get(e)||i.get(w)).shouldShow(e,t,n))}hasBeenShown(e){return(i.get(e)||i.get(w)).getSessionNumber(e).then(e=>e>0)}hide(e,t){(i.get(e)||i.get(w)).hide(e,t)}fadeAddContentButton(e,t,n){this.shouldShow(t,n).then(t=>{let n=e.$on("add-content-button-ready",()=>{let i=t?this.TIME_TO_SHOW_FIRST_BUTTON:0;n(),this.timeout(()=>{e.$broadcast("always-show-time-expires")},e,i)})})}hasMultiTargetSupport(e){return!!e&&0===e.toLowerCase().indexOf("predict.")}convertAngularPromise(e){return new Promise((t,n)=>{e.then(t).catch(n)})}constructor(e){this.timeout=e,this.TIME_TO_SHOW_FIRST_BUTTON=5e3}}A=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(s=(0,d.tB)(c.H),function(e,t){s(e,t,0)})],A),r.module(S,[a.e1,l.e1,o.e1]).run(["$q",a.HV,l.HV,o.HV,(e,t,n,s)=>{let r=new C(e,t,s,n),o=new y(e,t,s,n);i=new Map().set(u.EY("components.features.course.content.assessment.ftue.group-conversation",I),r).set(w,o)}]).service(E,A)},98631:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c}});var i=n(464027),s=n(168132),r=n(211796),o=n(951248),a=n(118717);function l(e,t){return function(n,i){t(n,i,e)}}let c="ultra.service.gradable-item-user-option",d="gradableItemUserOptionService";class u{subscribeToRedux(){let e=this.$ngRedux.connect(null,e=>(0,a.DE)({persistGradableItemUserOption:o.Nwg.gradableItemUserOption.persistGradableItemUserOption,deleteGradableItemUserOption:o.Nwg.gradableItemUserOption.deleteGradableItemUserOption,fetchGradableItemUserOption:o.Nwg.gradableItemUserOption.fetchGradableItemUserOption,fetchGradableItemUserOptionCount:o.Nwg.gradableItemUserOption.fetchGradableItemUserOptionCount,fetchGradableItemUserOptionExceptions:o.Nwg.gradableItemUserOption.fetchGradableItemUserOptionExceptions},e))(this);this.$rootScope.$on("$destroy",e)}updateGradableItemUserOption(e,t){return this.$q.when(this.persistGradableItemUserOption(e,t)).then(e=>e.item)}removeGradableItemUserOption(e){return this.$q.when(this.deleteGradableItemUserOption(e)).then(e=>e)}getGradableItemUserOption(e,t,n){return this.$q.resolve(this.fetchGradableItemUserOption({courseId:e,columnId:t},{membershipIds:n}))}getGradableItemUserOptionExceptions(e,t,n,i){return this.$q.resolve(this.fetchGradableItemUserOptionExceptions({courseId:e,membershipId:t},{columnId:n,isExcludedFromCourseUserActivity:i}))}getGradableItemUserOptionCount(e,t){return this.$q.resolve(this.fetchGradableItemUserOptionCount({courseId:e,columnId:t},{}))}getGradableItemUserOptionByMembershipId(e,t){return o.Ys.gradableItemUserOption.getGradableItemUserOptionByColumnAndMembershipId(this.$ngRedux.getState(),e,t)}getGradableItemUserOptionByUserId(e,t,n){var i;let s=o.Ys.courseMembership.getCourseMembershipsByUserIds(this.$ngRedux.getState(),t,[n]),r=null===(i=s[0])||void 0===i?void 0:i.id;return o.Ys.gradableItemUserOption.getGradableItemUserOptionByColumnAndMembershipId(this.$ngRedux.getState(),e,r)}constructor(e,t,n){this.$rootScope=e,this.$q=t,this.$ngRedux=n,this.subscribeToRedux()}}u=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([l(0,(0,r.tB)("$rootScope")),l(1,(0,r.tB)("$q")),l(2,(0,r.tB)("$ngRedux"))],u),i.module(c,[s.e1]).service(d,u)},266481:function(e,t,n){"use strict";n.d(t,{HV:function(){return p},e1:function(){return u},q6:function(){return m}});var i=n(276635),s=n(464027),r=n(168132),o=n(211796),a=n(350383),l=n(539210),c=n(408027);function d(e,t){return function(n,i){t(n,i,e)}}let u="ultra.components.services.gradebookColumnCategory.Service",p="gradeColumnCategoryService";class m{getIconByGradebookCategory(e,t){let n=null;return null==e||((!1===t||e===c.bu3.Attendance)&&e in m.ICON_NAME_BY_CATEGORY_TITLE&&(n=m.ICON_NAME_BY_CATEGORY_TITLE[e]),n||(n=m.DEFAULT_ICON_FOR_CATEGORY)),n}getCategoryIcon(e){let t=m.DEFAULT_ICON_FOR_CATEGORY;return e&&e.title&&(t=this.getIconByGradebookCategory(e.title,e.isUserDefined)),t}loadGradeCategories(e){return this.CourseModel.$new(e).gradebook.categories.$fetch().$asPromise()}getOrLoadCategoriesForCourse(e,t){return this.userCanViewGradebookCategories(e).then(n=>(t||!this.categoriesByCourse[e])&&n?this.loadGradeCategories(e).then(t=>(this.reorderCategories(t,0),this.categoriesByCourse[e]=t,t)):this.categoriesByCourse[e])}userCanViewGradebookCategories(e){return this.entitlementService.hasAnyCourseEntitlement([l.SE.ViewGradebookMetaData,l.SE.ViewUserGrades],e)}getFilteredCategoriesForCourse(e,t){return this.getOrLoadCategoriesForCourse(e,!0).then(e=>i.filter(e,t))}updateCategoriesForCourse(e,t){if(this.categoriesByCourse[e]){let n=this.categoriesByCourse[e],s=i.findIndex(n,e=>e.id===t.id);-1===s?n.splice(0,0,t):n.splice(s,1,t)}}deleteCategoriesForCourse(e,t){if(this.categoriesByCourse[e]){let n=this.categoriesByCourse[e],s=i.findIndex(n,e=>e.id===t.id);s>-1&&n.splice(s,1)}}reorderCategories(e,t){let n=e.length;for(let i=t;i<n;++i){let t=e[i];t.isUserDefined&&(e.splice(i,1),e.unshift(t))}}constructor(e,t,n,i){this.$q=e,this.$rootScope=t,this.entitlementService=n,this.CourseModel=i,this.categoriesByCourse={}}}m.DEFAULT_ICON_FOR_CATEGORY="custom-item",m.ICON_NAME_BY_CATEGORY_TITLE=Object.freeze({[c.bu3.Assignment]:"assignment",[c.bu3.Attendance]:"attendance",[c.bu3.Blog]:"blog",[c.bu3.Discussion]:"discussion",[c.bu3.Exam]:"exam",[c.bu3.Homework]:"homework",[c.bu3.Journal]:"journal",[c.bu3.Presentation]:"presentation",[c.bu3.Quiz]:"quiz",[c.bu3.Survey]:"survey",[c.bu3.Test]:"test"}),m=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([d(0,(0,o.tB)("$q")),d(1,(0,o.tB)("$rootScope")),d(2,(0,o.tB)(a.HV)),d(3,(0,o.tB)(r.N7.H))],m),s.module(u,[a.e1]).service(p,m)},274371:function(e,t,n){"use strict";n.d(t,{FN:function(){return a},Ks:function(){return r},Pp:function(){return c},Z7:function(){return o},gZ:function(){return l}});let i="assessment:reload-on-attempt-feedback-save",s="single-attempt-grading-list:reload-on-feedback-save",r="grade-comment-update";function o(e,t,n){return e.$broadcast(i,t,n)}function a(e,t){return e.$on(i,t)}function l(e,t){return e.$broadcast(s,t)}function c(e,t){return e.$on(s,t)}},63001:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var i=n(512923),s=n(495175),r=n(408027);class o{init(e,t){this.column=e;let n=e=>{this.schema=e,this.scaleType=null==e?void 0:e.scaleType};return t?this.$q.when(n(t)):this.schemaService.loadGradeSchema(e).then(e=>{n(e)})}shouldShowTotalPoints(){var e,t;return(null!=this._displayValue||(null===(e=this.schema)||void 0===e?void 0:e.scaleType)===r.aQo.Score)&&(null===(t=this.schema)||void 0===t?void 0:t.scaleType)===r.aQo.Score&&!this.isDisplayValueTooLargeForTotalPoints()}isDisplayValueTooLargeForTotalPoints(){return this._displayValue&&this._displayValue.toString().length>s.t6.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL+s.t6.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL+2}set displayGrade(e){if(e){var t,n;if(this.displayValue=this.grade.getGradeToDisplay(e,this.scope,null===(t=this.schema)||void 0===t?void 0:t.scaleType),this._nonFormattedScore=e.score,this._perfCode=e.perfCode,this._perfCode){this.perfCodeDesc=this._perfCode.description,this._parsedValue=this.grade.getGradeToDisplay({perfCode:this._perfCode},this.scope,r.aQo.Score);return}switch(this.perfCodeDesc="",null===(n=this.schema)||void 0===n?void 0:n.scaleType){case r.aQo.Tabular:{let e=null;if(this.column.externalGrade&&this.gradeDetail&&this.gradeDetail.isOverrideGrade()){let t=this.gradeDetail.pointsPossible||this.column.possible||100,n=this._nonFormattedScore&&this._nonFormattedScore*t/100;e={score:n}}else e={score:this._nonFormattedScore};this._parsedValue=this.grade.getGradeToDisplay(e,this.scope,r.aQo.Score);break}case r.aQo.Percent:{let e=null;if(this.column.externalGrade)e={score:this._nonFormattedScore};else{let t=this._nonFormattedScore&&this._nonFormattedScore/100*this.column.possible;e={score:t}}this._parsedValue=this.grade.getGradeToDisplay(e,this.scope,r.aQo.Score);break}case r.aQo.Score:this._parsedValue=this.displayValue;break;case r.aQo.Complete:this._parsedValue=this.grade.getGradeToDisplay({...e,grade:null},this.scope,this.schema.scaleType);break;case r.aQo.Text:this._parsedValue=e.grade}}}get displayValue(){return this._displayValue}set displayValue(e){this.wasValueErased=this.grade.wasGradeCleared(this.displayValue,e),this._displayValue=e}get parsedValue(){return this._parsedValue}set parsedValue(e){this._parsedValue=e}get gradeDetail(){return this._gradeDetail}set gradeDetail(e){this._gradeDetail=e}hasPerfCode(){return!!this._perfCode}getGradeColor(){var e,t,n;return(null===(e=this.gradeDetail)||void 0===e?void 0:null===(t=e.displayGrade)||void 0===t?void 0:t.isOverride)&&this.column.externalGrade||this.scaleType===r.aQo.Text||(null===(n=this.gradeDetail)||void 0===n?void 0:n.isExempt)?"gray":this.displayValue?this.scaleType!==r.aQo.Percent?this.getGradeColorScoreSchema():this.grade.getPercentileColor(this._nonFormattedScore):void 0}getGradeColorScoreSchema(){let e=this.gradeDetail?this.gradeDetail.pointsPossible:this.column.possible;if(e>0){let t=this._nonFormattedScore/e*100;return this.grade.getPercentileColor(t)}return"na"}constructor(e,t,n,i,s){this.grade=e,this.$q=t,this._gradeDetail=n,this.scope=i,this.schemaService=s,this.wasValueErased=!1}}o.$inject=[s.HV,"$q","gradeDetail","scope",i.HV]},97478:function(e,t,n){"use strict";n.d(t,{HV:function(){return l},e1:function(){return a}});var i=n(276635),s=n(464027),r=n(916415),o=n(168132);let a="ultra.components.services.grade.gradeNotation.Service",l="gradeNotationService";class c{getGradeNotationsMap(e,t){if(t&&this.courseGradeNotationMap[e])return this.$q.when(this.courseGradeNotationMap[e]);let n=this.$q.defer();return this.CourseModel.$new(e).gradebook.performancecodes.$fetch().$then(t=>{this.courseGradeNotationMap[e]=t,n.resolve(t)}),n.promise}isValidPerformanceCodeGrade(e,t){return!(!t||i.isEmpty(e))&&!!i.find(e,e=>e.code===t)}constructor(e,t,n){this.$q=e,this.$rootScope=t,this.CourseModel=n,this.courseGradeNotationMap={},r.ZU.OnRootScope(t,"grade-notation-update",(e,t)=>{this.CourseModel.$new(t).gradebook.performancecodes.$fetch().$then(e=>{this.courseGradeNotationMap[t]=e,this.$rootScope.$broadcast("grade-notation-cache-update",t)})})}}c.$inject=["$q","$rootScope",o.N7.H],s.module(a,[]).service(l,c)},512923:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c}});var i=n(276635),s=n(464027),r=n(291146),o=n(624930),a=n(168132),l=n(408027);let c="ultra.components.services.grade.gradeSchema.Service",d="gradeSchemaService";class u{loadSchemas(e,t,n){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));let s=e.$pk||e.id;if(!s)throw new o.v({message:"A primary key or id must be set on the course model"});let r=e.gradebook.schemas.$fetch().$asPromise(),a=this.bbLocalize.loadBundle("components/services/grade"),c=this.$q.defer();return this.$q.all({gradeSchemas:r,bundle:a}).then(e=>{let t=i.filter(e.gradeSchemas,e=>{let t=e.scaleType===l.aQo.Text;return!t||n});t.forEach(e=>{if(e.localizableTitle){let t=e.localizableTitle.languageKey.replace(/[\W_]+/g,"_").toLowerCase();e.ui.displayTitleKey="components.services.grade.schema."+t}else e.ui.displayTitle=e.title}),c.resolve(t)}),(0,c.promise).then(e=>t&&t.length?e.filter(e=>t.some(t=>t===e.scaleType)):e)}loadSchemaForColumn(e){return this.loadSchemas(e.courseId).then(t=>{let n=i.find(t,t=>t.id===e.gradingSchemaId);return n})}loadGradeSchema(e){let t=e.courseId;if(t){let n=this.loadSchemas(t,[],!0);return this.$q.when(n).then(t=>i.find(t,t=>t.id===e.gradingSchemaId))}throw new o.v({message:"Valid grade column object not provided."})}constructor(e,t,n,i){this.$q=e,this.CourseModel=n,this.bbLocalize=i}}u.$inject=["$q","DSCacheFactory",a.N7.H,r.serviceName],s.module(c,["angular-data.DSCacheFactory"]).service(d,u)},495175:function(e,t,n){"use strict";n.d(t,{HV:function(){return M},JH:function(){return F},Lg:function(){return $},ML:function(){return K},S:function(){return H},U0:function(){return z},UF:function(){return q},Ui:function(){return U},Vo:function(){return V},e1:function(){return O},gB:function(){return Z},t6:function(){return X},wI:function(){return W},wM:function(){return _}});var i,s,r,o,a=n(276635),l=n(464027),c=n(790184),d=n(951248),u=n(64314),p=n(291146),m=n(100079),h=n(501),g=n(822658),f=n(372457),b=n(350383),v=n(624930),y=n(512923),C=n(104485),S=n(168132),E=n(619034),I=n(97478),w=n(674414),A=n(529462),k=n(247126),x=n(715419),T=n(211796),P=n(539210),D=n(408027),G=n(826055),R=n(454229),B=n(625506);function L(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function N(e,t){return function(n,i){t(n,i,e)}}let O="ultra.services.grade",M="grade",$="course.grades.gradebook-item.submission.grade-status-change",H="course.grades.gradebook-item.submission.grade-exempt-change",F="bb-update-column",U="bb-update-attendance-column",V="bb-update-attendance-as-grade",_="placeholder";(i=r||(r={})).Possible="possible",i.Text="text";class q{subscribeToRedux(){let e=this.$ngRedux.connect(e=>{let t=d.Ys.systemPreference.getSystemPreferenceByKey(e,"gradepill.color.preference.settings");return t&&t.value&&t.value!==this.colorSettings.colorPreference?{colorSettings:{colorPreference:t.value,...JSON.parse(t.value)}}:{}},e=>({loadColorPreference:()=>e(d.Nwg.systemPreference.loadSystemPreference({key:"gradepill.color.preference.settings"}))}))(this);this.$rootScope.$on("$destroy",e)}loadColumnsAndGrades(e){let t=this.CourseModel.$new(e.courseId),n=`associatedRubrics,collectExternalSubmissions${e.includeIsLateAttemptCreationDisallowed?",isLateAttemptCreationDisallowed":""}`,i=this.loadColumns(t,e.includeExternal,{expand:n,includeInvisible:!!e.includeInvisible}).then(t=>e&&e.attachContentsByScoreProviderHandle?t.attachRelatedContentsByScoreProviderHandle(e.attachContentsByScoreProviderHandle):t),s=this.loadGrades(t,e.userId,e.gradeQueryParams);return this.$q.all([i,s]).then(n=>{let i=n[0]||[],s=n[1]||[],r=[],o=a.keyBy(s,e=>e.columnId);return i.forEach(e=>{let t=o[e.id];t?t.column=e:t=this.GradeModel.$build({column:e}),r.push(t)}),this._loadAttempts(r,t,e.attemptQueryParams).then(e=>e)})}loadGrade(e,t){let n,i;let s=this.CourseModel.$new(e.courseId);if(e.column)i=e.column&&e.column.$asPromise&&e.column.$asPromise()||this.$q.when(e.column);else if(e.columnId)i=s.gradebook.columns.$find(e.columnId).$asPromise();else throw new v.v({message:"Column or columnId must be provided."});return i.then(i=>(a.merge(e.gradeQueryParams,{userId:e.userId}),i.grades.$search(e.gradeQueryParams).$allow([404]).$asPromise().then(r=>(n=r[0])?(n.column=i,t)?this.loadAttempt(n,s,e.attemptQueryParams,e.content):this.$q.when(n):this.$q.when(null))))}loadCurrentColumnsAndGrades(e,t,n,i,s){let r=e||this.contextCourse.courseId,o=s||this.contextUser.userId;return this.loadColumnsAndGrades({courseId:r,userId:o,includeExternal:!0,includeInvisible:!!t,includeIsLateAttemptCreationDisallowed:!!n,gradeQueryParams:{expand:"attemptsLeft"},attemptQueryParams:{overrideAggregationModel:S.Rp.AttemptAggregationModel.Last},attachContentsByScoreProviderHandle:i})}loadColumns(e,t,n){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));let i=e=>t?e:e.filter(e=>!e.externalGrade),s=e.gradebook.columns,r=s?s.length:0,o=n&&"offset"in n?n.offset:0;return r>o?s.$refresh(n).$asPromise().then(i):s.$fetch(n).$asPromise().then(i)}loadGrades(e,t,n){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));let i=a.merge({userId:t},n);return i.limit=100,e.gradebook.grades.$fetch(i).$asPromise().then(n=>n.paging.nextPage?(i.offset=n.paging.offset+n.paging.limit,this.loadGrades(e,t,i)):e.gradebook.grades)}loadColumnGrades(e,t){return e instanceof this.ColumnModel||(e=t.gradebook.columns.$new(e)),e.grades.$refresh().$asPromise()}loadColumn(e,t,n){return t instanceof this.CourseModel||(t=this.CourseModel.$new(t)),t.gradebook.columns.$find(e,{expand:"associatedRubrics"}).$allow(n?[D.oji.NotFound,D.oji.Forbidden]:[]).$asPromise().then(e=>{var t,i;return((null==e?void 0:null===(t=e.$response)||void 0===t?void 0:t.status)===D.oji.NotFound||(null==e?void 0:null===(i=e.$response)||void 0===i?void 0:i.status)===D.oji.Forbidden)&&n?null:e})}loadOverallGradeColumn(e){return this.loadColumn("finalGrade",e,!0)}loadRubricAssociation(e,t){return this.loadColumn(e,t).then(e=>e&&e.hasRubricAssociation()?t.rubrics.$find(e.getAssociatedRubricId()).$asPromise():null)}loadBulkViewRows(e,t,n,i,s){let r=[],o=[];e.forEach(e=>{o.push(e.id);let n=this.$injector.instantiate(j,{column:t});n.user=e.user,n.membership=e,n.dueDate=t.dueDate,n.hasDueDateException=e.isDueDateExcepted(),r.push(n)});let l=a.keyBy(r,e=>e.user.id),c={courseId:t.courseId,membershipIds:o,columnIds:[t.id]};return i&&(c=a.merge(c,i)),this.fetchBulkView(c).then(e=>this.processBulkViewRows(e,l,t,n,s))}loadAnonymousBulkViewRows(e,t,n,i,s){let r=[],o=[];e.forEach(e=>{o.push(e.id);let n=this.$injector.instantiate(j,{column:t});n.user=this.UserModel.getAnonymousStudent(e.id),n.grade=e,n.dueDate=t.dueDate,r.push(n)});let l=a.keyBy(r,e=>e.grade.id),c={courseId:t.courseId,gradeIds:o,columnIds:[t.id]};return i&&(c=a.merge(c,i)),this.fetchBulkView(c).then(e=>this.processBulkViewRows(e,l,t,n,s))}fetchBulkView(e){return this.CourseModel.$new(e.courseId).gradebook.bulkView.$fetch(e).$asPromise()}processBulkViewRows(e,t,n,i,s){e.bulkViewUsers.forEach(e=>{let r=n.anonymousGrading?e.gradeId:e.studentId,o=t[r];s&&!s(o)?delete t[r]:W(o,e,i)});let r=a.values(t);return this.originalityReportService.setOriginalityAverageScore(r,n.id),r}loadCustomizedBulkViewRows(e,t,n,i,s,r){if(d.u$1.Discussion.isEqualTo(t.scoreProviderHandle)){let s=this.$q.defer();return this.loadBulkViewRows(e,t,null,{expand:"grade.instructorFeedback,attempts"}).then(r=>{let o=a.merge(a.clone(i),{limit:e.length}),l=a.merge(a.clone(o),{dateBefore:t.dueDate}),c=(e,t)=>{if(e&&e.length){let n={};e.forEach(e=>{let i=e.data.id;n[i]=t?{totalComment:e.topLevelReplyCount,totalReply:e.secondLevelReplyCount}:{comment:e.topLevelReplyCount,reply:e.secondLevelReplyCount}}),r.forEach(e=>{if(n&&n[e.user.id]){e.participation||(e.participation={comment:0,reply:0,totalComment:0,totalReply:0});let i=n[e.user.id];t?(e.participation.totalComment=i.totalComment,e.participation.totalReply=i.totalReply):(e.participation.comment=i.comment,e.participation.reply=i.reply)}})}};this.$q.all([this.CourseModel.$find(t.courseId).forums.$new(n).usercounts.$fetch(l).$allow([400]).$then(e=>{c(e)}).$asPromise(),this.CourseModel.$find(t.courseId).forums.$new(n).usercounts.$fetch(o).$allow([400]).$then(e=>{c(e,!0)}).$asPromise()]).then(()=>s.resolve(r)).catch(s.reject)}).catch(s.reject),s.promise}let o="attempts";return s&&(o+=",submissionResults"),this.loadBulkViewRows(e,t,null,{expand:o,includeInProgress:!!r})}loadAnonymousStudentRows(e){return this.retrieveAnonymousStudentRows(e,null)}loadAnonymousStudentRowsNeedsGrading(e){return this.retrieveAnonymousStudentRows(e,{status:"NEEDS_GRADING",readyToPost:!1})}retrieveAnonymousStudentRows(e,t){let n={expand:"toolAttemptDetail,viewUrl",...t};return e.getGradeIdToAttempt(n).then(e=>e.lookup).then(t=>{let n=[];return Object.keys(t).forEach(i=>{let s=t[i];if(a.remove(s,e=>e.isInProgress()),s.length>0){let t=this.createAnonymousStudentRow(e,s,i);n.push(t)}}),n})}createBlankSubmissionListRow(e){let t=this.$injector.instantiate(j,{column:e});return t.user=this.UserModel.getAnonymousStudent(""),t.id=_,t}generatePeerRow(e,t,n){let i=this.createAnonymousStudentRowWithoutId(t,e,n);return e.length>0&&(i.delegatedGraderOrder=e[0].delegatedGraderOrder),i}createAnonymousStudentRow(e,t,n){return this.createAnonymousStudentRowImpl(e,t,n,n)}createAnonymousStudentRowWithoutId(e,t,n){return this.createAnonymousStudentRowImpl(e,t,n,"")}createAnonymousStudentRowImpl(e,t,n,i){let s=this.$injector.instantiate(j,{column:e}),r=t[t.length-1],o=t.reverse().find(e=>e.displayGrade&&null!=e.displayGrade.score);return s.user=this.UserModel.getAnonymousStudent(i),s.dueDate=e.dueDate,s.attemptCount=t.length,s.lastAttemptDate=r.attemptDate,s.grade=this.GradeModel.$build({id:n,user:s.user,attempts:t,displayGrade:o&&o.displayGrade||{},manualStatus:o&&o.status||D.WTZ.NoOverride}),s}loadAnonymousStudentGrade(e,t){let n=e.grades.$new(t).attempts,i=this.UserModel.getAnonymousStudent(t);return n.$fetch().$asPromise().then(n=>this.GradeModel.$build({pointsPossible:e.possible,id:t,user:i,attempts:n}))}loadGroupRows(e,t,n,i,s,r){let o={},l=[],c=a.keyBy(n,e=>e.user.id);return(i.ui&&i.ui.content&&i.ui.content.assignedGroups&&i.ui.content.assignedGroups.some(e=>!!e.groupAssociationId)?this.$q.when(i.ui.content):e.contents.$find(i.contentId,{expand:"assignedGroups"}).$asPromise()).then(n=>{let d={};return n&&n.assignedGroups&&n.assignedGroups.forEach(e=>{d[e.groupId]=e.groupAssociationId,!t&&r&&r===e.groupId&&(t=[e])}),l=t.map(t=>(o[t.groupId]={},e.groups.$find(t.groupId,{expand:"memberships"}).$then(e=>{let t=this.$injector.instantiate(j,{column:i});t.group=e,t.groupDetailsShown=!1,t.dueDate=i.dueDate,t.group.ui||(t.group.ui={}),t.group.ui.groupAssociationId=d[e.id],t.group.memberships&&(t.group.memberships=t.group.memberships.filter(e=>!!c[e.userId]&&(e.ui||(e.ui={}),e.ui.user=c[e.userId].user,e.ui.hasDueDateException=c[e.userId].isDueDateExcepted(),e.ui.courseRole=c[e.userId].courseRole,!0))),t.hasDueDateException=t.group.memberships.some(e=>c[e.userId].isDueDateExcepted()),o[e.id]=t}).$asPromise())),this.$q.all(l).then(()=>{let e="attempts,toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor";return s&&(e+=",submissionResults"),i.getContentGroupIdToGroupAttempt({expand:e}).then(e=>{let t;let n={};a.values(e.lookup).forEach(e=>{n[e[0].groupId]=e});let s=[];return this.batchService.performBatch(()=>{s=(t=a.values(o)).map(e=>{var t;let s=(null===(t=n[e.group.id])||void 0===t?void 0:t.length)>0?n[e.group.id].length-1:0;return this.updateOneGroupRow(e,i,{expand:!0,groupAttempts:n[e.group.id],currentAttemptIndex:s})})}),this.$q.all(s).then(()=>this.originalityReportService.setOriginalityAverageScore(t,i.id)),this.$q.all(s).then(()=>this.sortGroupMembers(t))})})})}getOverallGradeJson(e){let t=B(B.parseHTML(e)),n={};if("math"===t.prop("nodeName")){let e=t.children();if(e&&e.length>0){let t=B(e[0]);if("mi"===t.prop("nodeName")){let e=t.text();e=(e=e.replace("@X@BBCalColElem(","")).replace(")@X@","");let i=e.indexOf(":")+1,s=e.substring(i);n=JSON.parse(s)}}}return n}sortGroupMembers(e){let t=[];return e.forEach(e=>{let n=[];e.group.memberships&&(e.group.memberships.forEach(e=>{n.push(this.bbLocalize.formatUsername(e.ui.user,p.ILocaleUsernameFormat.Short,this.$rootScope).then(t=>{e.ui.formatUserName=t}))}),t.push(this.$q.all(n).then(()=>{e.group.memberships.sort((e,t)=>e.ui.formatUserName.localeCompare(t.ui.formatUserName)),e.group.ui.users=[],e.group.memberships.forEach(t=>{e.group.ui.users.push(t.ui.user)})})))}),this.$q.all(t).then(()=>e)}updateOneGroupRow(e,t,n={expand:!0}){return t.getGroupGrade(e.group.ui.groupAssociationId,n.expand).then(t=>{var i,s;let r=n.currentAttemptIndex||0,o=n.groupAttempts&&n.groupAttempts[r]||(null===(i=e.grade)||void 0===i?void 0:i.ui.groupAttempt);if(e.grade=t,(null==n?void 0:null===(s=n.groupAttempts)||void 0===s?void 0:s.length)>0){let t=0,i=0;n.groupAttempts.forEach(e=>{var n,s,r;(null===(n=e.originality)||void 0===n?void 0:null===(s=n.results)||void 0===s?void 0:null===(r=s[D._Nl])||void 0===r?void 0:r.originalityProcessed)&&(t+=e.originality.results[D._Nl].originalityScore,i+=1)}),i>0&&(e.originalityScore=t/i,e.originalityProcessed=!0)}else o&&(e.originalityScore=o.originalityScore,e.originalityProcessed=o.originalityProcessed);return this.setGroupAttemptsOnRow(e,n.groupAttempts||[o],n.grade,n.grades||t.groupMembersGrades,n.attempt,r),e})}setGroupAttemptsOnRow(e,t,n,i,s,r){let o,l={rawText:"",displayText:""};n&&n.instructorFeedback?l=n.instructorFeedback:i&&i.length&&i[0].instructorFeedback&&(l=i[0].instructorFeedback);let c=0;(null==t?void 0:t[r])?(t.forEach(t=>{e.grade.groupAttempts.push(t),(D.I$9.NeedsGrading===t.status||D.I$9.NeedsMoreGrading===t.status||D.I$9.Completed===t.status)&&(c+=1)}),o=t[r]):(o=this.GradeGroupAttemptModel.$buildRaw({}),e.grade.groupAttempts.push(o)),e.attemptCount=c,e.lastAttemptDate=o.attemptDate,e.grade.instructorFeedback=l,e.grade.ui={groupAttempt:o,currentAttemptIndex:r},e.isGroupGradeInProgress=e.grade.isInProgress(),e.grade.ui.isGroupGradeMultiple=e.grade.isMultipleGradesInGroup;let d=a.keyBy(e.group.memberships,e=>e.userId);if(i)i.forEach(e=>{let t=d[e.user.$pk];t&&(t.ui.gradeDetail=e)});else if(s){let t=o.attempts.map((e,t)=>{let n;return e.id===s.id?((n=s).userId=e.userId,d[n.userId].ui.gradeDetail.displayGrade=n.displayGrade,d[n.userId].ui.gradeDetail.ui.attempt=n):n=e,n});e.grade.isInProgress()&&(e.grade.ui.groupAttempt.status=D.I$9.NeedsGrading),e.grade.ui.groupAttempt.attempts=t}else n?e.group.memberships=e.group.memberships.map(e=>{let t=e.userId===n.user.$pk?n:e.ui.gradeDetail;return e.ui.gradeDetail=t,e}):o.attempts&&o.attempts.forEach(t=>{d[t.userId].ui.gradeDetail.displayGrade=t.displayGrade,d[t.userId].ui.gradeDetail.ui.attempt=t,d[t.userId].ui.gradeDetail.manualStatus=e.grade.manualStatus});e.group.memberships=a.values(d)}_loadAttempts(e,t,n){let i=[];return e.forEach(e=>{i.push(this.loadAttempt(e,t,n))}),this.$q.all(i)}loadAttempt(e,t,n={},i){let s;let r=a.clone(n);if(r&&r.attemptId)s=r.attemptId,delete r.attemptId;else{let t=S.Rp.parseAttemptAggregationModel(e.column&&e.column.aggregationModel);r&&r.overrideAggregationModel&&(t=r.overrideAggregationModel,delete r.overrideAggregationModel),s=(0,x.m)(t,e)}if(e.column&&D.eNW.NonCalculated===e.column.calculationType){let n;let o=t.gradebook.attempts,a=i&&i.isGroupContent,l=i&&i.assignedGroups&&i.assignedGroups.length&&i.assignedGroups[0].groupAssociationId;if(a&&!i.isDiscussion()){if(!l)return this.$q.when(e);n=e.column.getGroupAttemptByGroupAssociationId(l,!1,s)}else{if(!s)return this.$q.when(e);n=o.$find(s,r).$asPromise()}return n.then(t=>(a?t&&t.id&&(e.ui.groupAttempt=t,e.ui.attempt=t&&t.attempts&&t.attempts.length&&t.attempts[0]):e.ui.attempt=t,e))}return this.$q.when(e)}loadColumnAttempts(e,t={},n){return e.getGradeIdToAttempt(t,n)}loadUsersFinalGradeForCourse(e,t){return e.gradebook.grades.$search({userId:t,expand:"column",externalGrade:!0}).$asPromise().then(e=>e[0])}loadColumnSummary(e,t){return e.gradebook.columns.$find(t).summary.$fetch().$asPromise()}loadGradebookSettings(e){let t=this.gbSettingsCache.get(e);if(!t){let t=this.CourseModel.$new(e).gradebook.settings.$fetch().$asPromise();return this.gbSettingsCache.put(e,{promise:t}),t}return this.$q.when(t.promise)}loadDefaultGradebookSettings(){return this.GradebookSettingsModel.$build({afterDecimal:q.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,beforeDecimal:q.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL})}formatPoints(e,t,n,i){null==n&&(n=r.Text);let s=n;return this.bbLocalize.loadBundle("components/services/grade").then(()=>this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(t),key:"components.services.grade.points_"+s,params:{points:i,possible:e},noWrap:!0}))}parseGrade(e,t,n){if(!e)return"";if((null==t?void 0:t.scaleType)===D.aQo.Text)return e;let i=this.bbLocalize.parseNumberSync(e,n);return Number.isNaN(i)?e:i.toString()}getGradeToDisplay(e,t,n){if(!e)return null;if(e.grade)return e.grade;if(e.perfCode)return e.perfCode.code;if(null!=e.score){let i=this.bbLocalize.formatNumberSync(e.score,t,{round:"truncate",maximumFractionDigits:q.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL});return n&&n===D.aQo.Percent&&(i=this.bbLocalize.formatPercentageSync(e.score/100,t,q.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL)),i}}getHighestPossibleScore(e,t,n){let i=this.$q.defer();switch(e.scaleType){case D.aQo.Tabular:return i.resolve(e.symbols[0].symbol),i.promise;case D.aQo.Percent:return this.bbLocalize.formatPercentage(1,n);case D.aQo.Score:{let e=t.possible;return this.formatPoints(e,n,r.Text)}default:return i.resolve("N/A"),i.promise}}validateGrade(e,t,n){let i=this.loadDefaultGradebookSettings(),s=this.bbLocalize.loadBundle("components/services/grade"),r=this.notation.getGradeNotationsMap(e.courseId,!0);return this.$q.all([s,r]).then(s=>{let r=e.gradeValue.getGrade(),o=!1,a=s[1];return r?(o=this.isValidNumericGrade(r,i,t))||!e.column||!e.column.externalGrade||(o=this.notation.isValidPerformanceCodeGrade(a,r)):o=!(n&&n.notAllowEmptyString),o})}clearGroupGrade(e,t,n){let i=this.CourseModel.$new(e.id).gradebook.columns.$new(t.id);return this.batchService.performBatch(()=>this.$q.all(n.map(e=>{let t=i.grades.$new(e.ui.gradeDetail.id);return t.manualGrade=q.CLEAR_GRADE_CHARACTER,t.$patch(["manualGrade"]).$asPromise()}))).then(()=>i.grades)}saveGrade(e,t,n,i){if(!e.courseId||!e.column||!e.gradeValue)throw Error("A valid courseId, column, and grade value are required.");if(e.column.seemsAttemptBased()){let s=[],r=[];i&&i.group&&i.group.memberships&&i.group.memberships.forEach(t=>{t.ui&&t.ui.gradeDetail&&(s.push(t.ui.gradeDetail.id),(t.ui.gradeDetail.displayGrade&&t.ui.gradeDetail.displayGrade.isOverride||e.setGradeToEmpty)&&r.push(t.ui.gradeDetail.id))}),(null==n||null==n.id)&&t||n&&n.isInProgress()?(i.group?e.gradeIds=s:e.gradeId=t.id,!e.userId&&i.userId&&(e.userId=i.userId),e.clearGrade&&(e.setGradeToEmpty=!0)):n&&n.id&&t?(e.clearGrade&&(i.group||(e.gradeId=t.id),e.setAttemptToEmpty=!0,e.setGradeToEmpty=!0),n instanceof this.GradeAttemptModel?(e.attemptId=n.id,n.groupAttemptId&&(e.override=!0),e.setGradeToEmpty&&(e.gradeId=t.id)):(e.groupAttemptId=n.id,r.length&&(e.gradeIdsNeedClear=r))):i&&i.userId?e.userId=i.userId:i&&i.group&&i.group.id&&!(null==e?void 0:e.groupAttemptId)&&(e.gradeIds=s)}else e.column.externalGrade?t&&t.id?e.gradeId=t.id:e.userId=i.userId:null==t?e.userId=i.userId:(e.userId||(e.userId=i.userId),e.gradeId=t.id);return this._save(e)}save(e){return this._save(e)}_save(e){if(e.column.externalGrade)return e.gradeId?this.updateGrade(e):this.createGradeForUserAndSave(e);if(!this.canSaveGradeDetail(e))return this.updateAttempt(e);if(e.gradeId)return e.attemptId?(e.setGradeToEmpty=!0,this.updateGrade(e).then(()=>this.updateAttempt(e))):this.updateGrade(e);if(e.gradeIds)return this.createAndUpdateGradesForGroupMembers(e);if(e.gradeIdsNeedClear)return this.createAndUpdateGradesForGroupMembers(e).then(()=>this.updateGroupAttempt(e));if(e.attemptId)return this.updateAttempt(e);if(e.groupAttemptId)return this.updateGroupAttempt(e);if(e.userId)return this.createGradeForUserAndSave(e);throw Error("A valid userId must be specified when creating a new grade.")}canSaveGradeDetail(e){return!e.column.anonymousGrading&&(!e.column.delegatedGrading||this.isDelegatedAndEntitledReconciler(e))}createAndUpdateGradesForGroupMembers(e){let t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades;return e.gradeIdsNeedClear||e.gradeIds?this.batchService.performBatch(()=>this.$q.all((e.gradeIdsNeedClear||e.gradeIds).map(n=>{let i=t.$buildRaw({id:n});return t.$add(i),this.setGradeValueOnGrade(e,i,!!e.gradeIdsNeedClear||e.setGradeToEmpty),i.withParams({clearCommentsIfRevertOverrides:!1}).$patch().$asPromise()}))).then(()=>t.$asPromise()):t.$asPromise()}createGradeSubmission(e,t,n){return new c.Z(e,t,n)}wasGradeCleared(e,t){let n=e&&e.length,i=t&&t.length;return n>0&&!i}updateAttempt(e){if(!e.attemptId)throw Error("Attempt id is not set");let t=this.CourseModel.$new(e.courseId).gradebook.attempts.$new(e.attemptId);return this.setGradeOnAttempt(e,t),t.$patch().$asPromise()}updateGroupAttempt(e){if(!e.groupAttemptId)throw Error("Group attempt id is not set");let t=this.CourseModel.$new(e.courseId).gradebook.groupAttempts.$new(e.groupAttemptId);return this.setGradeOnAttempt(e,t),t.withParams({expand:"attempts"}).$patch().$asPromise()}isReadyToPost(e){return!e.delegatedGrading||e.isUserReconciler(this.contextUser.userId)}setGradeOnAttempt(e,t){e.setAttemptToEmpty?(t.score=null,t.status=D.I$9.NeedsGrading,t.grade=q.CLEAR_GRADE_CHARACTER,t.rubricEvaluation=null):(e.gradeValue.isNumeric?t.score=parseFloat(e.gradeValue.getGrade()):t.grade=e.gradeValue.getGrade(),e.rubricEvaluation&&(t.rubricEvaluation=e.rubricEvaluation),t.readyToPost=this.isReadyToPost(e.column),t.readyToPost||(t.status=D.I$9.Completed)),e.override&&(t.override=!0),this.isDelegatedAndEntitledReconciler(e)&&!e.setAttemptToEmpty&&(t.reconciliationMode=D.Kp$.Custom)}isDelegatedAndEntitledReconciler(e){return e.column.delegatedGrading&&e.column.isUserReconciler(this.contextUser.userId)}createGradeForUserAndSave(e){let t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new();return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.user=this.UserModel.$new(e.userId),t.withParams({userId:e.userId,clearCommentsIfRevertOverrides:!1}).$save().$asPromise()}updateGrade(e){let t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new(e.gradeId);return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.withParams({clearCommentsIfRevertOverrides:!1,includeUnpostedGrade:!0}).$patch().$asPromise()}setGradeValueOnGrade(e,t,n){if(n)t.manualGrade=q.CLEAR_GRADE_CHARACTER;else if(e.column.externalGrade&&e.perfCodeId)t.perfCodeId=e.perfCodeId;else{let n=e.gradeValue;n.isNumeric?(t.pointsPossible=e.pointsPossible,t.manualScore=parseFloat(n.getGrade())):t.manualGrade=n.getGrade()}}isValidNumericGrade(e,t,n){let i;let s=this.bbLocalize.parseNumberSync(e,n);if(Number.isNaN(s)||t&&null!=t.beforeDecimal&&(i=Math.floor(s).toString()).length>t.beforeDecimal)return!1;if(t&&null!=t.afterDecimal&&null!=i){let e=s.toString().substring(i.length+1);if(e.length>t.afterDecimal)return!1}return!0}static isValidFormat(e,t){let n=e.indexOf("."),i=0,s=e.length;return n>-1&&(i=s-n-1,s=0),s<=t.beforeDecimal&&n<=t.beforeDecimal&&i<=t.afterDecimal}static mapSchemaSymbols(e){if(e.scaleType===D.aQo.Tabular)return e.symbols.map(e=>e.symbol.toLocaleLowerCase())}findOverallGrade(e){return a.find(e,e=>e.externalGrade)}needsToSetupOverall(e,t){let n=this.findOverallGrade(e);return this.$q.when(!n)}fetchNeedsToSetupOverallGrade(e){let t=e instanceof this.CourseModel?e.id:e;return this.loadOverallGradeColumn(e).then(e=>this.needsToSetupOverall(e?[e]:[],t))}setDeleteConfirmationHandle(e){e.isOffline()?e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-column":e.isCalculated()&&(e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-calculation")}calculateRankingsMap(e,t){let n,i;let s={},r=e.length;for(let o=0;o<r;o++)i=o/r,n=t?10*Math.floor(10*i):Math.floor(100*i),s[e[o].displayGrade.score]=n;return s}getPercentileColor(e){return P.cQ.getPercentileColor(e,this.colorSettings.isColorEnabled)}isRubricGradeOverridden(e,t,n,i){let s=e&&e.displayGrade&&e.displayGrade.isOverride;i&&i.memberships&&i.memberships.forEach(e=>{e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.displayGrade&&e.ui.gradeDetail.displayGrade.isOverride&&(s=!0)});let r=null!=n.rubricAssociations&&n.rubricAssociations.length>0&&n.rubricAssociations[0],o=t&&t.rubricEvaluation,a=!!(t&&t.groupAttemptId);return!!t&&!a&&null!=t.score&&!!t.readyToPost&&!!r&&(!o||o.rubricAssociationId!==r.id||t.score!==o.totalScore)||s&&(r||!d.u$1.UltraAssignment.isEqualTo(n.scoreProviderHandle)&&!d.u$1.Discussion.isEqualTo(n.scoreProviderHandle))}canGrade(e){return this.gradebookPermissionService.canEnterGrades()&&this.gradebookPermissionService.canOverrideGrades()}canUserReconcile(e,t){return!e.isClosed&&t.isUserReconciler(this.contextUser.userId)}hasItemsToReconcile(e){return e.summary.numSubmissionsNeedsReconciling>0}canPostGrades(e,t){if(!this.gradebookPermissionService.canPostGrades(e.id,t))return!1;let n=!e.isComplete()&&t.summary.hasGradesToPost();return t.anonymousGrading?n&&this.gradebookPermissionService.canDeanonymizeGrades(e.id):n}getPostAllGradeConfirmationNeededStringsKey(e){if(e.anonymousGrading){if(e.summary.numNeedsGrading)return"x-bb-grade-anonymous-submissions-not-graded";if(!e.isLate()){if(e.getNumMissing()>0)return"x-bb-grade-anonymous-missing-submissions";if(e.isMultipleAttempts())return"x-bb-grade-anonymous-multiple-attempts"}return"x-bb-grade-anonymous-generic"}return"x-bb-grade-column-post-grades"}pointToPercentage(e,t){return 100*e/t}percentageToPoint(e,t){return e*t/100}gradeDetailToPercentage(e){if(!e)return e;let t=a.assignInWith({},e);if(e.displayGrade&&void 0!==e.manualScore){let n=this.pointToPercentage(e.manualScore,e.pointsPossible);t.manualScore=m.m(n,2),t.displayGrade.score=t.manualScore}return t.pointsPossible=100,t}percentageToGradeDetail(e,t){if(!e)return e;let n=e.manualScore;e.manualScore&&(n=this.percentageToPoint(e.manualScore,t));let i=a.assignInWith({},e);return i.manualScore=n,i.displayGrade.score=n,i.pointsPossible=t,i}truncateGradeDetail(e){let t=a.assignInWith({},e);return e.displayGrade&&void 0!==e.manualScore&&(t.manualScore=m.m(e.manualScore,2),t.displayGrade.score=t.manualScore),t}toFixedGradeDetail(e){let t=a.assignInWith({},e);return e.displayGrade&&void 0!==e.manualScore&&(t.manualScore=parseFloat(e.manualScore.toFixed(2)),t.displayGrade.score=t.manualScore),t}refreshCourseContents(e){this.loadGrade({courseId:e.courseId,columnId:e.getAssociatedGradingColumn().id,userId:this.contextUser.userId,includeExternal:!0},!0).then(e=>{e.isGraded()&&this.$rootScope.$broadcast(G.a)})}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f,b,v,y,C,S,E,I){this.$q=e,this.$rootScope=t,this.$injector=n,this.cacheFactory=i,this.$ngRedux=s,this.CourseModel=r,this.GradeAttemptModel=o,this.GradebookSettingsModel=a,this.GradeGroupAttemptModel=l,this.GradeModel=c,this.ColumnModel=d,this.UserModel=u,this.GradeBulkViewModel=p,this.context=m,this.bbLocalize=h,this.ultraState=g,this.batchService=f,this.entitlement=b,this.notation=v,this.schemaService=y,this.gradebookPermissionService=C,this.originalityReportService=S,this.contextUser=E,this.contextCourse=I,this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE="resource/x-bb-grade",this.loadColorPreference=()=>{},this.colorSettings={isColorEnabled:!0,colorPreference:""},this.gbSettingsCache=i.createCache("gbSettings"),this.subscribeToRedux(),this.loadColorPreference()}}function z(e,t,n){return(0,D.ZYv)(d.nPi,{courseId:e,columnId:t,groupId:n})}function W(e,t,n){let{peerReviewsCountsPerColumn:i,grades:[s]}=t;e.originalityProcessed=s.originalityProcessed,e.originalityScore=s.originalityScore,e.grade=s.grade,e.grade.user=e.user,e.attemptCount=s.attemptCount,e.lastAttemptDate=s.lastAttemptDate,e.attemptsReadyToPost=s.attemptsReadyToPost,(null==i?void 0:i[e.Column.id])&&(e.peerReviewCounts=null==i?void 0:i[e.Column.id]),(null==n?void 0:n.lookup[s.grade.id])&&(e.grade.attempts=n.lookup[s.grade.id])}q.TEXT_SCHEMA_CHARACTER_LENGTH=32,q.CLEAR_GRADE_CHARACTER="-",q.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL=5,q.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL=2,q=L([N(0,(0,T.tB)("$q")),N(1,(0,T.tB)("$rootScope")),N(2,(0,T.tB)("$injector")),N(3,(0,T.tB)("DSCacheFactory")),N(4,(0,T.tB)("$ngRedux")),N(5,(0,T.tB)(S.N7.H)),N(6,(0,T.tB)(S.U_.serviceName)),N(7,(0,T.tB)(S.Ct.H)),N(8,(0,T.tB)(S.uy.HV)),N(9,(0,T.tB)(S.zn.H)),N(10,(0,T.tB)(S.Rp.serviceName)),N(11,(0,T.tB)(S.EA.HV)),N(12,(0,T.tB)(S.Gn.H)),N(13,(0,T.tB)(h.HV)),N(14,(0,T.tB)(p.serviceName)),N(15,(0,T.tB)(k.HV)),N(16,(0,T.tB)(u.HV)),N(17,(0,T.tB)(b.HV)),N(18,(0,T.tB)(I.HV)),N(19,(0,T.tB)(y.HV)),N(20,(0,T.tB)(C.HV)),N(21,(0,T.tB)(w.HV)),N(22,(0,T.tB)(f.HV)),N(23,(0,T.tB)(g.HV))],q),(s=o||(o={}))[s.Graded=1]="Graded",s[s.MultiStatus=2]="MultiStatus",s[s.NeedGrade=3]="NeedGrade",s[s.Opened=4]="Opened",s[s.Unopend=5]="Unopend",s[s.Posted=6]="Posted",s[s.Completed=7]="Completed";class j{get numOfPeerReviewsCompleted(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.completed)&&void 0!==t?t:0}get numOfPeerReviewsCompletedLate(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.completedLate)&&void 0!==t?t:0}get numOfPeerReviewsStarted(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.started)&&void 0!==t?t:0}get Column(){return this.column}isCurrentUserReconciler(){return this.column&&this.column.isUserReconciler(this.contextUser.userId)}isCurrentUserDelegatedGrader(){return this.column&&this.column.isUserDelegatedGrader(this.contextUser.userId)}isDiscussion(){return this.column.isDiscussion()}isOverdue(){return this.column&&this.column.dueDate&&this.column.dueDate.getTime()-this.context.getServerTime().getTime()<0}getLateSubmissionCount(){var e,t;return l.isDefined(this.lateSubmissionCount)||(this.group?this.lateSubmissionCount=null===(e=this.grade)||void 0===e?void 0:e.groupAttempts.getNumAttemptsSubmittedLate(this.dueDate):this.lateSubmissionCount=null===(t=this.grade)||void 0===t?void 0:t.attempts.getNumAttemptsSubmittedLate(this.dueDate)),this.lateSubmissionCount}isStatusComplete(){var e;return this.isDiscussion()||this.grade&&!this.grade.attempts?this.isCompleted():this.checkIfStatusComplete(null===(e=this.grade)||void 0===e?void 0:e.attempts)}isGroupStatusComplete(e){var t;return e?this.isCompleted():this.checkIfStatusComplete(null===(t=this.grade)||void 0===t?void 0:t.groupAttempts)}checkIfStatusComplete(e){if(this.column.anonymousGrading)return!1;if(Z(this.column.aggregationModel))return this.isFirstOrLastAttemptWithAGradeAndCompleted();if(K(this.column.aggregationModel))return this.isLastAttemptWithAGradeAndCompleted();let t=this.assessmentException?this.assessmentException.attempts:this.column.multipleAttempts;return!!this.grade&&!!e&&(e.isAllGradedAndPosted()||this.grade.isPosted())&&e.getNumOfGradedAttempts()===t}shouldShowNothingToGradeStatus(){if((Z(this.column.aggregationModel)||K(this.column.aggregationModel))&&!this.column.anonymousGrading){var e;let t=null===(e=this.grade)||void 0===e?void 0:e.attempts;return!(t&&t.length&&t.find(e=>e.isCompleted()))}return!0}isFirstAttemptGradedAndPosted(){var e,t;let n=this.group?null===(e=this.grade)||void 0===e?void 0:e.groupAttempts:null===(t=this.grade)||void 0===t?void 0:t.attempts;return null==n?void 0:n.isFirstAttemptPosted()}isFirstAttemptGradedAndGradeObjectPosted(){var e,t,n,i;let s=this.group?null===(e=this.grade)||void 0===e?void 0:e.groupAttempts:null===(t=this.grade)||void 0===t?void 0:t.attempts;return(null===(n=null==s?void 0:s.getFirstAttempt())||void 0===n?void 0:n.isGraded())&&(null===(i=this.grade)||void 0===i?void 0:i.isPosted())}isLastAttemptGradedAndPosted(){var e,t;let n=this.group?null===(e=this.grade)||void 0===e?void 0:e.groupAttempts:null===(t=this.grade)||void 0===t?void 0:t.attempts;return null==n?void 0:n.isLastSubmittedAttemptPosted()}isLastAttemptGradedAndGradeObjectPosted(){var e,t,n,i;let s=this.group?null===(e=this.grade)||void 0===e?void 0:e.groupAttempts:null===(t=this.grade)||void 0===t?void 0:t.attempts;return(null===(n=null==s?void 0:s.getLastSubmittedAttempt())||void 0===n?void 0:n.isGraded())&&(null===(i=this.grade)||void 0===i?void 0:i.isPosted())}isStatusNothingToGrade(){return this.isDiscussion()?this.hasNoTotalParticipation():this.grade&&!this.grade.attempts.getNumAttemptsToGrade()}isGroupStatusNothingToGrade(){return this.grade&&!this.grade.groupAttempts.getNumAttemptsToGrade()}isFirstAttemptWithAGradeAndCompleted(){return Z(this.column.aggregationModel)&&(this.isFirstAttemptGradedAndPosted()||this.isFirstAttemptGradedAndGradeObjectPosted())}isLastAttemptWithAGradeAndCompleted(){return K(this.column.aggregationModel)&&(this.isLastAttemptGradedAndPosted()||this.isLastAttemptGradedAndGradeObjectPosted())}isFirstOrLastAttemptWithAGradeAndCompleted(){return this.isFirstAttemptWithAGradeAndCompleted()||this.isLastAttemptWithAGradeAndCompleted()}isStatusAttemptsToReconcile(){if(!this.isDiscussion()&&this.isCurrentUserReconciler())return!(!this.column.anonymousGrading&&this.isFirstOrLastAttemptWithAGradeAndCompleted())&&this.grade&&this.grade.attempts.getNumAttemptsToReconcile()>0}isStatusAttemptsToGrade(e){return this.isDiscussion()?(!this.hasNoParticipation()||this.hasLateParticipation())&&(!this.grade||this.grade&&!this.grade.isGraded()):e?!this.grade||this.grade.attempts.getNumAttemptsToGrade()>=0:this.isCurrentUserReconciler()?void 0:!(!this.column.anonymousGrading&&this.isFirstOrLastAttemptWithAGradeAndCompleted())&&this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0}isGroupStatusAttemptsToGrade(e){return e?this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>=0:!(!this.column.anonymousGrading&&this.isFirstOrLastAttemptWithAGradeAndCompleted())&&this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>0}hasGroupUsersForGrading(){var e,t;if(!(null===(e=this.group)||void 0===e?void 0:null===(t=e.memberships)||void 0===t?void 0:t.length))return!1;let n=this.group.memberships.some(e=>{var t,n;return!(null===(t=e.ui)||void 0===t?void 0:null===(n=t.gradeDetail)||void 0===n?void 0:n.isGraded())});return n}isStatusToPost(){return this.isDiscussion()?this.needsPosting():!this.column.anonymousGrading&&this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()}isGroupStatusToPost(){return this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()}overrideToPost(){return this.grade&&(this.grade.isOverrideGrade()||this.grade.displayGrade&&"MULTIPLE"===this.grade.displayGrade.grade)&&this.grade.isReadyToPost()}isMultipleStatus(){return this.group?this.isGroupStatusAttemptsToGrade()&&(this.isGroupStatusToPost()||this.overrideToPost()&&!this.isGroupStatusComplete()):(this.isStatusAttemptsToGrade()||this.isStatusAttemptsToReconcile())&&(this.isStatusToPost()||this.overrideToPost()&&!this.isStatusComplete())}isNothingToGradeStatus(e){let t=this.isStatusAttemptsToGrade()||this.isStatusAttemptsToReconcile(),n=this.isMultipleStatus()||this.isStatusToPost()||this.overrideToPost();return(!t||!!e)&&(!e||!!n||!t)&&n}hasGroupAttempts(){return this.grade&&this.grade.groupAttempts.length&&a.every(this.grade.groupAttempts,e=>!!e.id)}get RowStatus(){if(this.grade&&this.group){if(this.needsPosting())return 1;if(this.isGroupStatusAttemptsToGrade())return 3;if(this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade.groupAttempts[0].status&&!this.grade.hasGradeBeenPosted)return 5;if(this.grade.isPosted()&&!this.isGroupStatusComplete())return 6;if(this.isGroupStatusComplete())return 7}else{if(this.membership&&this.membership.isPreviewStudent)return 0;if(this.grade&&0===this.grade.attempts.getNumAttemptsToGrade()&&this.grade.isReadyToPost())return 1;if(this.grade&&this.grade.isGraded()&&this.grade.attempts.getNumAttemptsToGrade()>0&&this.grade.isReadyToPost())return 2;if(this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0&&0===this.grade.attempts.getNumAttemptsToPost()&&!this.grade.isPosted())return 3;if(this.hasNoSubmissions()&&this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade||!this.grade.hasGradeBeenPosted)return 5;if(this.grade&&this.grade.hasGradeBeenPosted&&!this.isStatusComplete())return 6;if(this.isStatusComplete())return 7}return 8}hasNoSubmissions(){return!this.attemptCount||0===this.attemptCount}hasNoParticipation(){return!this.participation||0===this.participation.comment&&0===this.participation.reply}hasNoTotalParticipation(){return!this.participation||0===this.participation.comment&&0===this.participation.reply&&0===this.participation.totalComment&&0===this.participation.totalReply}hasLateParticipation(){var e;return!(null===(e=this.grade)||void 0===e?void 0:e.isExempt)&&this.participation&&0===this.participation.comment&&0===this.participation.reply&&this.participation.totalComment+this.participation.totalReply!==0}inProgress(){return this.group?this.grade&&this.grade.ui&&this.grade.ui.groupAttempt&&D.I$9.InProgress===this.grade.ui.groupAttempt.status:this.grade&&this.grade.ui&&this.grade.ui.attempt&&D.I$9.InProgress===this.grade.ui.attempt.status}isLate(e){if(!this.hasDueDateException){let t=E(this.context.getServerTime()),n=null!=e?e:this.dueDate;return this.hasNoSubmissions()&&t.isAfter(n)||E(this.lastAttemptDate).isAfter(n)}return!1}isSubmittedLate(e){if(!this.hasDueDateException){let t=null!=e?e:this.dueDate;return!this.hasNoSubmissions()&&E(this.lastAttemptDate).isAfter(t)&&!this.inProgress()}return!1}isCompleted(){return!!(!this.group&&this.grade&&this.grade.isGraded()&&this.grade.isPosted())||!!this.group&&!!this.group.memberships&&this.group.memberships.length>0&&this.group.memberships.every(e=>e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.isPosted())}needsPosting(){if(!this.group)return!this.isCompleted()&&this.grade&&this.grade.isReadyToPost();if(this.group&&this.group.memberships){let e=0,t=0;if(this.group.memberships.forEach(n=>{n.ui&&n.ui.gradeDetail&&(n.ui.gradeDetail.isReadyToPost()?t++:n.ui.gradeDetail.isPosted()&&e++)}),t>0&&e+t===this.group.memberships.length)return!0}return!1}needsGrading(){return this.grade.groupAttempts&&this.grade.groupAttempts.length?this.grade.groupAttempts[0].isNeedsGrading()&&!this.grade.groupAttempts[0].isPostable():this.attemptCount>0&&this.grade.isSubmitted()}deleteAllAttempts(){this.grade.attempts.$fetch().$then(e=>{e.forEach(e=>{e.$destroy()}),this.attemptCount=0,this.lastAttemptDate=null})}getLastAttempt(){var e,t;if(null===(e=this.grade)||void 0===e?void 0:null===(t=e.attempts)||void 0===t?void 0:t.length)return this.grade.attempts[this.grade.attempts.length-1]}getLastGroupAttempt(){var e,t;if(null===(e=this.grade)||void 0===e?void 0:null===(t=e.groupAttempts)||void 0===t?void 0:t.length)return this.grade.groupAttempts[this.grade.groupAttempts.length-1]}constructor(e,t,n){this.column=e,this.context=t,this.contextUser=n,this.isCommentBoxShown=!1,this.hasBeenViewed=!1,this.id=A.d(),this.hasDueDateException=!1}}function Z(e){return(0,R.parseAttemptAggregationModel)(e)===R.AttemptAggregationModel.First}function K(e){return(0,R.parseAttemptAggregationModel)(e)===R.AttemptAggregationModel.Last}j=L([N(0,(0,T.tB)("column")),N(1,(0,T.tB)(h.HV)),N(2,(0,T.tB)(f.HV))],j);class X extends q{}l.module(O,["angular-data.DSCacheFactory",S.e1,h.e1,k.e1,I.e1,y.e1,C.e1,w.e1]).service(M,q)},790184:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(408027),s=class{getGrade(){return this.grade}constructor(e,t){(null==t?void 0:t.scaleType)===i.aQo.Text?this.isNumeric=!1:this.isNumeric=!Number.isNaN(parseFloat(e)),this.grade=e}},r=class{constructor(e,t,n){this.column=e,this.courseId=e.courseId,this.gradeValue=new s(t,n)}}},104485:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},e1:function(){return p}});var i=n(539210),s=n(464027),r=n(501),o=n(822658),a=n(372457),l=n(350383),c=n(319434),d=n(211796);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.components.services.gradebookPermission",m="gradebookPermission";class h{isEntitled(e,t){return this.entitlementService.isEntitled(e,t)}canDeanonymizeGrades(e){return this.isEntitled("course.gradebook-deanonymize.EXECUTE",e)}canEnterFeedback(e){return this.isEntitled("course.gradebook-grades.feedback.EXECUTE",e)}canEnterGrades(e){return this.canExecute(e)}canViewAssessmentException(e){return this.isEntitled(c.iL.ViewException,e)}canDelegatedEnterAttemptFeedback(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterFeedback()}canDelegatedEnterAttemptGrades(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterGrades()}canDelegatedModifyAttempt(e,t){return!!(!e.delegatedGrading||!t||e.isUserReconciler(this.currentUser.userId))||!t.isReconciled()}canDelegatedReconcileAttempt(e){return e.delegatedGrading&&e.isUserReconciler(this.currentUser.userId)}canExecute(e){return this.isEntitled("course.gradebook-grades.EXECUTE",e)}canModify(e){return this.isEntitled(i.SE.ModifyGradebook,e)}canModifyItemDueDate(e){return this.isEntitled("course.gradebook-item.duedate.MODIFY",e)}canObserve(e){return this.isEntitled(i.SE.Observe,e)}canOverrideGrades(e){return this.canExecute(e)}canPostGrades(e,t){let n=t||this.context.column,i=e||this.currentCourse.courseId;return n&&n.delegatedGrading?n.isUserReconciler(this.currentUser.userId)&&this.isEntitled("course.gradebook-grades.publish.EXECUTE",i):this.isEntitled("course.gradebook-grades.publish.EXECUTE",i)}canView(e){return this.isEntitled(i.SE.ViewGradebookMetaData,e)}hasItemExceptionView(e){return this.entitlementService.isEntitled(i.SE.ViewException,e)}hasAssessmentExceptionView(e){return this.entitlementService.isEntitled(c.iL.ViewException,e)}canViewAttempts(e){return this.isEntitled(i.SE.ViewAttempts,e)}canViewGrades(e){return this.isEntitled("course.gradebook-grades.VIEW",e)}canViewBulkDownload(e){return this.isEntitled(i.SE.ViewGrades,e)}constructor(e,t,n,i){this.context=e,this.currentCourse=t,this.currentUser=n,this.entitlementService=i}}h=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,d.tB)(r.HV)),u(1,(0,d.tB)(o.HV)),u(2,(0,d.tB)(a.HV)),u(3,(0,d.tB)(l.HV))],h),s.module(p,[l.e1,o.e1,r.e1]).service(m,h)},919038:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},e1:function(){return d}});var i,s,r=n(18447),o=n(759485),a=n(211796),l=n(501);function c(e,t){return function(n,i){t(n,i,e)}}let d="ultra.services.institutionApi",u="institutionApi";(i=s||(s={})).V1="1.0",i.V2="2.0";class p{importIP(){return Promise.all([n.e(98290),n.e(62101),n.e(22258)]).then(n.bind(n,189056)).then(({default:e})=>e)}canEditFetch(e){return this.$q.when(this.importIP().then(t=>t.pageService.canEditFetch(s.V2,e)))}getEffectivePageVariantId(e){return this.$q.when(this.importIP().then(t=>t.pageService.getEffectivePageVariantId(e)))}getModuleVisibility(e){return this.$q.when(this.importIP().then(t=>t.moduleService.getModuleVisibility(e)))}constructor(e,t,n){this.$http=e,this.$q=t,this.context=n,this.getUserCanEdit=e=>this.canEditFetch(e).then(({canEdit:e})=>e,()=>!1),this.getUserCanView=e=>this.canEditFetch(e).then(({ipHasVisible:e})=>e>0,()=>!1),this.getEffectiveVariantIdWithPermissions=()=>{let e=this.context.getBrand(),t=e.isDefault?null:e.portalBrandId;return this.getEffectivePageVariantId(t).then(e=>this.canEditFetch(e).then(({canEdit:t,ipHasVisible:n})=>({variantId:e,canEdit:t,canView:n>0}))).catch(()=>({variantId:void 0,canEdit:!1,canView:!1}))},this.getModuleIsVisible=e=>this.getModuleVisibility(e).then(({visible:e})=>e,()=>!1),this.getHealth=()=>{if(this.ipHealthPromise)return this.ipHealthPromise;let e=o.uI(r.default.institutionApiBasePath+"/health");return this.ipHealthPromise=this.$http.get(e,this._getConfig())},this._getConfig=()=>{let e=s.V2;return{headers:{Accept:`application/json; version=${e.toString()}`}}}}}p=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([c(0,(0,a.tB)("$http")),c(1,(0,a.tB)("$q")),c(2,(0,a.tB)(l.HV))],p),angular.module(d,[l.e1]).service(u,p)},404073:function(e,t,n){"use strict";n.d(t,{C:function(){return l}});var i=n(202784),s=n(928316),r=n(529462),o=n(292050);let a=()=>{let[e]=i.useState((0,r.V)()),[t,n]=i.useState(!1),s=i.useRef();return i.createElement("div",{ref:s,className:`course-banner-integration-container${t?"":" no-integration-content"}`},i.createElement(o.$2,{portalId:e,selector:"course.banner.top",onContentsChanged:e=>{n(!!e),s.current.dispatchEvent(new CustomEvent("banner-resize",{bubbles:!0}))}}))},l=new class{watchBanner(e){return this.subscriptions.push(e),setTimeout(()=>e(this.currentBanner)),()=>this.subscriptions=this.subscriptions.filter(t=>t!==e)}notifySubscribers(){this.subscriptions.forEach(e=>e(this.currentBanner))}constructor(){this.subscriptions=[],this.createBanner=()=>{if(this.currentBanner)return this.currentBanner;let e=document.createElement("div");return s.render(i.createElement(a,null),e),this.currentBanner=e,this.notifySubscribers(),this.currentBanner},this.destroyBanner=()=>{if(!this.currentBanner){console.warn("There is no integration banner present to unmount.");return}s.unmountComponentAtNode(this.currentBanner),this.currentBanner=null,this.notifySubscribers()},this.currentPanelBanner=()=>{if(this.bannerStack.length)return this.bannerStack[this.bannerStack.length-1].state},this.pushBanner=e=>{this.bannerStack.push(e),1!==this.bannerStack.length&&this.bannerStack[this.bannerStack.length-2].orphan()},this.popBanner=e=>{this.bannerStack=this.bannerStack.filter(t=>t.state.stateName!==e),this.bannerStack.length?this.bannerStack[this.bannerStack.length-1].adopt(this.currentBanner):this.destroyBanner()},this.bannerStack=[]}}},750442:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var i=n(202784),s=n(58904),r=n(957244),o=n(292050),a=n(398435),l=n(470269);let c=e=>{let[t,n]=(0,i.useState)("#");return(0,i.useEffect)(()=>{n(l.Nd.getHref(l.BJ.INTEGRATION_BASE,{routeName:e}))},[e]),t},d="integration",u=e=>{let{isRtl:t,to:n,analyticsId:s,className:r,children:o,...l}=e,u=c(n),p=s?`${d}.${s}`:`${d}.link`;return i.createElement(a.AnalyticsJssThemeProvider,{theme:"light",isRtl:t},i.createElement(a.AnalyticsLink,{...l,className:`uef-link ${r}`,analyticsId:p,href:u},o))},p="integration",m=e=>{let{analyticsId:t,children:n,isRtl:s,to:r,...o}=e,l=c(r),d=t?`${p}.${t}`:`${p}.button.link`;return i.createElement(a.AnalyticsJssThemeProvider,{theme:"light",isRtl:s},i.createElement(a.AnalyticsPrimaryButton,{...o,analyticsId:d,href:l,variant:"contained",color:"primary"},n))},h=/^[a-z0-9-]*$/i,g=new Map([["uef--base-nav-button","integration-navigation-button-content themed-background-primary-alt-fill-only theme-border-left-active"],["uef--base-nav-button-v2","integration-navigation-button-content-v2 themed-background-primary-alt-fill-only theme-border-left-active"],["uef--button","button button--primary"],["uef--button--secondary","button button--secondary"]]),f=new Map([["classname",e=>(0,o.PV)(e,g)]]);var b=new class{init(e){this.initializeWhitelist(),this.integrationService.addIntegrationMessageType(r.ul,this.onIntegrationRegistration),this.bbLocalize=e}initializeWhitelist(){o.yW.addGlobalComponent(r.EA.Link,{props:{to:!0,className:!1},isValid:(e,t)=>!!this.isRouteRegistered(e.props.to,t)||(console.warn(`${e.props.to} has not been registered`),!1),render:(e,t,n)=>i.createElement(u,{...t,isRtl:this.bbLocalize.isRTL(null)}," ",n," "),transformers:f}),o.yW.addGlobalComponent(r.EA.ButtonLink,{props:{to:!0,className:!1},isValid:(e,t)=>!!this.isRouteRegistered(e.props.to,t)||(console.warn(`${e.props.to} has not been registered`),!1),render:(e,t,n)=>i.createElement(m,{...t,isRtl:this.bbLocalize.isRTL(null)}," ",n," "),transformers:f})}onIntegrationAdded(e){return this.listeners.add(e),()=>{this.removeIntegrationAdded(e)}}removeIntegrationAdded(e){this.listeners.delete(e)}getRegisteredRecords(){return Array.from(this.registeredRoutes.values())}getRecordForRoute(e){let t=Array.from(this.registeredRoutes.values());return t.find(t=>t.routes.indexOf(e)>=0)}isValidRouteName(e){return h.test(e)}validateBaseNavigationRequest(e){return this.getRecordForRoute(e.routeName)?{type:r.ul,status:r.xR.Failure,error:r.Jg.ExistingRouteName,errorMessage:`${e.routeName} as already been registered`}:this.isValidRouteName(e.routeName)?{type:r.ul,status:r.xR.Success}:{type:r.ul,status:r.xR.Failure,error:r.Jg.InvalidRouteName,errorMessage:`${e.routeName} has invalid characters in it.`}}isRouteRegistered(e,t){var n;let i=null===(n=this.registeredRoutes.get(t))||void 0===n?void 0:n.routes;return!!i&&-1!==i.indexOf(e)}constructor(e){this.integrationService=e,this.onIntegrationRegistration=(e,t)=>{let n=this.validateBaseNavigationRequest(e);if(n.status!==r.xR.Success){this.integrationService.sendMessage(n,t);return}this.registeredRoutes.set(t.id,{integrationId:t.id,routes:[e.routeName],displayName:e.displayName,initialContents:e.initialContents}),this.listeners.forEach(e=>{try{e(this.registeredRoutes.get(t.id))}catch(e){console.error(e)}}),this.integrationService.sendMessage(n,t)},this.registeredRoutes=new Map,this.listeners=new Set}}(s.Z)},285179:function(e,t,n){"use strict";n.d(t,{G2:function(){return a}});var i=n(198022),s=n(58904),r=n(292050),o=n(957244);let a="course.outline.details",l={attributes:o.hj,classNameMappings:new Map(Object.entries({"uef--course-details--element":"element-details","uef--course-details--image":"element-image","uef--course-details--element-card":"element-card","uef--course-details--name":"name","uef--course-details--content":"content","uef--course-details--link":"blue-link","uef--course-details--container":"element-card-container","uef--course-details--menu-container":"select-wrapper content"}))},c={attributes:[...o.hj,"disabled"],classNameMappings:new Map(Object.entries({"uef--button":"button button--primary","uef--button--secondary":"button button--secondary","uef--button--course-details":"element-card","uef--button--disabled":"disabled"})),classNameDefault:"uef--button--classless"};t.ZP=new class{init(){this.integrationService.addIntegrationMessageType(o.eB,this.onIntegrationRegistration),this.initializeWhitelist()}onIntegrationAdded(e){return this.listeners.add(e),()=>{this.removeIntegrationAdded(e)}}removeIntegrationAdded(e){this.listeners.delete(e)}getRegisteredRecords(){return Array.from(this.registrations.values()).map(e=>({selectorData:{},registrationRecord:e}))}initializeWhitelist(){this.componentManager.setCustomWhiteList(a,"div",l),this.componentManager.setCustomWhiteList(a,"button",c)}notifyListeners(e){this.listeners.forEach(t=>{try{t(this.registrations.get(e))}catch(e){console.error(e)}})}hasRegistrationName(e){return Array.from(this.registrations.values()).some(t=>t.registrationName===e)}validateRegistrationRequest(e){return this.hasRegistrationName(e.registrationName)?{type:o.eB,registrationName:e.registrationName,error:o.IK.ExistingRegistration,status:o.OZ.Failure}:{type:o.eB,registrationName:e.registrationName,registrationId:(0,i.v4)(),status:o.OZ.Success}}constructor(e,t){this.registrations=new Map,this.listeners=new Set,this.onIntegrationRegistration=(e,t)=>{let n=this.validateRegistrationRequest(e);if(n.status!==o.OZ.Success){this.integrationService.sendMessage(n,t);return}this.registrations.set(n.registrationId,{integrationId:t.id,registrationId:n.registrationId,registrationName:n.registrationName}),this.notifyListeners(n.registrationId),this.integrationService.sendMessage(n,t)},this.integrationService=e,this.componentManager=t}}(s.Z,r.yW)},313021:function(e,t,n){"use strict";var i=n(58904),s=n(670278),r=n(957244),o=n(292050),a=n(300105),l=n(990318);class c extends s.v{init(){this.integrationService.addIntegrationMessageType(r.SC,this.registerAsHelpProvider),this.helpRequestMessenger=this.createMessenger(r.A0,{includeProcessingEvent:!1})}async sendHelp(e,t){await this.helpRequestMessenger.sendMessage({type:r.Fm,eventType:r.A0,helpUrl:t,currentRouteName:this.currentRoute},e)}constructor(e,t,n){super(),this.integrationService=e,this.routeListenerService=t,this.createMessenger=n,this.updateRoute=e=>{this.currentRoute=e},this.registerAsHelpProvider=(e,t)=>{let n=o.aJ.getHelpProvider(e.id);if(!e.id||n){n?console.warn(`Cannot register provider: Provider already exists with an id of ${e.id}`):console.warn("Cannot register provider: no id was specified"),this.integrationService.sendMessage({type:r.SC,id:e.id,status:r.xR.Failure},t);return}let i={iconUrl:e.iconUrl,providerId:e.id,providerType:e.providerType,integrationId:t.id,displayName:e.displayName};o.aJ.addHelpProvider(i),this.integrationService.sendMessage({type:r.SC,id:e.id,status:r.xR.Success,iconUrl:e.iconUrl},t);let s=o.aJ.getProviderByType(r._n.Auxiliary),a=o.aJ.getProviderByType(r._n.Primary);this.$emitEvent(this.helpChangedEvent,{auxiliaryProviders:s,primaryProviders:a})},this.helpChangedEvent="helpChanged",this.routeListenerService.subscribe(this.updateRoute)}}t.Z=new c(i.Z,a.ZP,l.ZP)},542728:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(58904),s=n(957244),r=n(951248),o=n(197196),a=n(118717),l=n(990318);let c=new class{init(e,t){this.integrationService.addIntegrationMessageType(s.m1,this.registerOriginalityProvider),this.ngRedux=t,this.subscribeToRedux(t),this.localizationService=e,this.integrationService.addIntegrationMessageType(s.m1,this.registerOriginalityProvider),this.saveSettingsMessenger=(0,l.ZP)(s.gQ,{})}subscribeToRedux(e){e.connect(()=>({}),e=>(0,a.DE)({loadSubmissionServices:r.Nwg.submissionServices.loadSubmissionServices,saveSubmissionService:r.Nwg.submissionServices.saveSubmissionService},e))(this)}addIntegration(e){this.listeners.set(e.submissionServicesUniqueHandle,e)}removeIntegration(e){this.listeners.delete(e.submissionServicesUniqueHandle)}async fetchDefaultOriginalityReportSubmissionService(e,t){await this.loadSubmissionServices(e,t);let n=r.Ys.submissionServices.getDefaultOriginalityReportSubmissionService(this.ngRedux.getState(),t);if(n&&(n.uniqueHandle===o.P||this.listeners.get(n.uniqueHandle)))return n}getOriginalityIntegrationByUniqueId(e){return this.listeners.get(e)}constructor(e){this.integrationService=e,this.registerOriginalityProvider=(e,t)=>{if(!e.submissionServicesUniqueHandle){console.warn("Cannot register provider: no submissionServicesUniqueHandle was specified"),this.integrationService.sendMessage({type:s.m1,submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,status:s.xR.Failure,errorMessage:"submissionServicesUniqueHandle should be provided"},t);return}let n={submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,integrationId:t.id};this.addIntegration(n),this.integrationService.sendMessage({type:s.m1,submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,status:s.xR.Success},t)},this.saveOriginalityConfiguration=async(e,t)=>{let n=this.listeners.get(t.uniqueHandle);if(!n)throw Error(`No listener registered for ${t.uniqueHandle}`);try{let r=await this.saveSettingsMessenger.sendMessage({type:s.gQ,contentId:e.id,contentHandle:e.contentHandler.toString(),enabled:t.capabilities.OriginalityReport.enabled},n.integrationId);if(r.success){var i;await this.saveSubmissionService(e.courseId,null===(i=e.getAssociatedGradingColumn())||void 0===i?void 0:i.id,t)}return r}catch(n){let e=this.localizationService.translateSync({key:"course.content.originalityReport.settings.errorSavingSettings",locale:this.localizationService.getAppLocale(),noWrap:!0,params:{integrationDisplayName:t.displayName}});return{success:!1,error:e}}},this.listeners=new Map}}(i.Z)},988266:function(e,t,n){"use strict";var i=n(118717),s=n(951248),r=n(957244),o=n(58904),a=n(990318);t.Z=new class{init(e){this.integrationService.addIntegrationMessageType(r.PO,this.registerProctoringProvider),this.correlatedMessenger=(0,a.ZP)(r.Ul,{}),this.ngRedux=e,this.subscribeToRedux(e)}getProctoringIntegration(e){return this.listeners.get(e)}addIntegration(e){this.listeners.set(e.proctoringPlacementHandle,e)}hasIntegration(e){return void 0!==this.getProctoringIntegration(e)}subscribeToRedux(e){e.connect(null,e=>(0,i.DE)({loadProctoringServices:s.Nwg.proctoringServices.loadProctoringServices},e))(this)}async loadAvailableProctoringServices(){return await this.loadProctoringServices(),s.Ys.proctoringServices.getAvailableProctoringServices(this.ngRedux.getState())}async loadAvailableProctoringServicesWithIntegration(){let e=await this.loadAvailableProctoringServices();return e.filter(e=>this.hasIntegration(e.handle))}async loadProctoringService(e){if(!e)return Promise.resolve(void 0);await this.loadProctoringServices();let t=s.Ys.proctoringServices.getProctoringServices(this.ngRedux.getState());return t.find(t=>t.handle===e)}async promptIntegrationToSaveSettings(e,t,n,i){let s=this.getProctoringIntegration(e);if(!s)throw Error(`No proctoring UEF integration registered for ${e}, or it is currently unavailable.`);return this.correlatedMessenger.sendMessage({type:r.Ul,courseUuid:t,contentId:n,enabled:i,proctoringPlacementHandle:e},s.integrationId)}constructor(e){this.integrationService=e,this.registerProctoringProvider=(e,t)=>{if(!e.proctoringPlacementHandle){console.warn("Cannot register provider: proctoringPlacementHandle was not specified"),this.integrationService.sendMessage({type:r.PO,proctoringPlacementHandle:e.proctoringPlacementHandle,status:r.xR.Failure,error:r.oi.MissingPlacementHandle,errorMessage:"proctoringPlacementHandle was not provided"},t);return}if(this.hasIntegration(e.proctoringPlacementHandle)){console.warn(`Cannot register provider: ${e.proctoringPlacementHandle} already registered`),this.integrationService.sendMessage({type:r.PO,proctoringPlacementHandle:e.proctoringPlacementHandle,status:r.xR.Failure,error:r.oi.ExistingRegistration,errorMessage:"proctoringPlacementHandle already registered"},t);return}this.addIntegration({proctoringPlacementHandle:e.proctoringPlacementHandle,integrationId:t.id}),this.integrationService.sendMessage({type:r.PO,proctoringPlacementHandle:e.proctoringPlacementHandle,status:r.xR.Success},t)},this.listeners=new Map}}(o.Z)},990318:function(e,t,n){"use strict";var i=n(58904),s=n(198022);let r={includeProcessingEvent:!0};class o{sendMessage(e,t){return new Promise((n,i)=>{let s=this.generateId(),r=this.createMessageTimeout(s,i);this.integrationService.sendMessage({...e,correlationId:s,timeout:5e3},t),this.activeMessages.set(s,{integrationId:t,timeoutId:r,resolvePromise:n,rejectPromise:i})})}correlatedMessageResponseCallback(e,t){let n=this.getCorrelatedMessage(e,t.id);n&&(this.activeMessages.delete(e.correlationId),window.clearTimeout(n.timeoutId),n.resolvePromise(e))}correlatedMessageProcessingCallback(e,t){let n=this.getCorrelatedMessage(e,t.id);n&&(window.clearTimeout(n.timeoutId),n.timeoutId=this.createMessageTimeout(e.correlationId,n.rejectPromise))}createMessageTimeout(e,t){return window.setTimeout(()=>{this.activeMessages.delete(e);let n=`Correlated message '${e}' timed out`;console.warn(n),t(Error(n))},5e3)}getCorrelatedMessage(e,t){let n=e.correlationId,i=this.activeMessages.get(n);return i?i.integrationId!==t?(console.error(`Correlated message '${n}' does not belong to '${t}'`),null):i:(console.error(`Couldn't find a correlated message with correlation id '${n}'`),null)}constructor(e,t,n,i){this.integrationService=e,this.generateId=t,this.activeMessages=new Map,this.integrationService.addIntegrationMessageType(`${n}:response`,this.correlatedMessageResponseCallback.bind(this)),i.includeProcessingEvent&&this.integrationService.addIntegrationMessageType(`${n}:processing`,this.correlatedMessageProcessingCallback.bind(this))}}t.ZP=(e,t={})=>new o(i.Z,s.v4,e,{...r,...t})},683356:function(e,t,n){"use strict";n.d(t,{HV:function(){return o},e1:function(){return r}});var i=n(464027),s=n(425372);let r="ultra.components.services.event-emitter",o="integration-event-emitter";i.module(r,[]).service(o,class{_triggerForceClick(e){i.element(e).trigger(s.Z.integrationForceClick)}constructor(){this.emitIntegrationEvent=e=>{e.originalEvent||(e.originalEvent=e.originalEvent||{}),e.originalEvent.manualFireFlag||(this._triggerForceClick(e.target),e.originalEvent.manualFireFlag=!0)},this.addIntegrationEventClickListener=e=>(e.on("click",this.emitIntegrationEventOnClickHandler),()=>{e.off("click",e.selector,this.emitIntegrationEventOnClickHandler)}),this.emitIntegrationEventOnClickHandler=e=>this.emitIntegrationEvent(e)}})},425372:function(e,t,n){"use strict";var i=n(464027),s=n(18447),r=n(58904),o=n(717716),a=n(957244),l=n(158550),c=n(625506);t.Z=new class{addClickListener(){s.default.unitTesting||(c(document).on("click",this.onClick),c(document).on(this.integrationForceClick,this.onClick))}addHoverListener(){s.default.unitTesting||c(document).on("mouseover",this.onHover)}_sendEventMessage(e,t){e&&this.integrationService.sendEventMessage({type:a.Fm,eventType:t,analyticsId:e})}constructor(e){this.integrationService=e,this.integrationForceClick="integration-force-click",this.onClick=e=>{if(e.originalEvent&&e.originalEvent.manualFireFlag)return;let t=i.element(e.target),n=(0,o.IK)(t)||(0,o.CY)(t.parent());this._sendEventMessage(n,a.Kj.Click)},this.onHover=e=>{let t=i.element(e.target),n=(0,o.li)(t);n!==this.lastHoverElementId&&(this.lastHoverElementId=n,this._sendEventMessage(n,a.Kj.Hover))},(0,l.subscribeToFramework)("Ultra",(e,t)=>{e===l.AnalyticsEventTypes.CLICK_EVENT?this._sendEventMessage(t.analyticsId,a.Kj.Click):e===l.AnalyticsEventTypes.HOVER_EVENT&&this._sendEventMessage(t.analyticsId,a.Kj.Hover)})}}(r.Z)},58904:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(276635),s=n(408027),r=n(951248),o=n(759485),a=n(278784),l=n(292050),c=n(957244);class d{constructor(){this.subscribeToEvents=(e,t)=>{let n=e.subscriptions;n.forEach(e=>{let n=this.checkIfValidSubscription(e);if(!n){console.warn(`Received subscription to invalid event type ${e}`);return}let i=this.subscriptions.get(e)||new Set;i.add(t),this.subscriptions.set(e,i);let s=this.subscribeCallbacks.get(e);s&&s.forEach(e=>e(t))})},this.unsubscribeFromEvents=(e,t)=>{let n=e.subscriptions;n.forEach(e=>{if(!this.subscriptions.has(e)){console.warn(`Integration is not subscribed to ${e}, not unsubscribing`);return}let n=this.subscriptions.get(e);n.delete(t),this.subscriptions.set(e,n);let i=this.unsubscribeCallbacks.get(e);i&&i.forEach(e=>e(t))})},this.onSubscriptionEventCallback=(e,t)=>{let n=this.subscribeCallbacks.get(e)||[];return n.push(t),this.subscribeCallbacks.set(e,n),()=>this.removeCallback(e,t,this.subscribeCallbacks)},this.onUnsubscriptionEventCallback=(e,t)=>{let n=this.unsubscribeCallbacks.get(e)||[];return n.push(t),this.unsubscribeCallbacks.set(e,n),()=>this.removeCallback(e,t,this.unsubscribeCallbacks)},this.getSubscribedIntegrations=e=>this.subscriptions.get(e)||new Set,this.checkIfValidSubscription=e=>Object.values(c.Kj).some(t=>t===e),this.removeCallback=(e,t,n)=>{if(!n.has(e))return;let i=n.get(e);i.splice(i.indexOf(t),1),n.set(e,i)},this.subscriptions=new Map,this.subscribeCallbacks=new Map,this.unsubscribeCallbacks=new Map}}var u=n(300105),p=n(625506),m=new class{async init(e){if(this.window=e,this.document=e.document,this.isSafeMode())return console.warn("In integration safe mode -- not loading integrations"),null;try{let e=await (0,s.yZB)(r.nPi,{query:{type:s.TK1.UltraUI}});return this.window.addEventListener("message",this.helloMessageListener),this.initIntegrationMessageTypes(),this.initIntegrationSubscriptionCallbacks(),this.loadIntegrations(e),e}catch(e){return null}}loadIntegrations(e){!e||this.integrations&&this.integrations.size>0||e.results.forEach(e=>{if(e.availability.available!==s.y67.Yes)return;let t=p(`<iframe id="${e.id}" src="${(0,o.uI)(e.launchLink)}"></iframe>`).hide();this.document.body.appendChild(t[0]),this.integrations.set(e.id,{id:e.id,hasAuthorized:!1,iframe:t[0],url:e.url,authScopes:new Set})})}isSafeMode(){let e=(0,o.re)("noExtensions",this.window.location.href);return"true"===e}addIntegrationMessageType(e,t){this.integrationMessageEvents.get(e)||this.integrationMessageEvents.set(e,t)}addSubscriptionEventCallback(e,t){return this.integrationSubscriptionManager.onSubscriptionEventCallback(e,t)}addUnsubscriptionEventCallback(e,t){return this.integrationSubscriptionManager.onUnsubscriptionEventCallback(e,t)}initIntegrationMessageTypes(){this.addIntegrationMessageType(c.RC,this.sendAuthorizedMessage),this.addIntegrationMessageType(c.c9,this.integrationSubscriptionManager.subscribeToEvents),this.addIntegrationMessageType(c.Vd,this.integrationSubscriptionManager.unsubscribeFromEvents)}initIntegrationSubscriptionCallbacks(){this.addSubscriptionEventCallback(c.Kj.PortalNew,e=>{l.hE.getUnownedPortals().forEach(t=>{e.integrationChannel.postMessage({type:c.Fm,eventType:c.Kj.PortalNew,portalId:t.portalId,selector:t.selector,selectorData:t.selectorData})})}),this.addSubscriptionEventCallback(c.Kj.Route,e=>{let t=u.ZP.getCurrentRoute();this.sendMessage({type:c.Fm,eventType:c.Kj.Route,routeName:t.currentRouteName,routeData:t.currentParams},e)})}sendEventMessage(e,t){let n=this.integrationSubscriptionManager.getSubscribedIntegrations(e.eventType);if(!n)return;let i=t?[this.findIntegration(t)]:n;i.forEach(t=>{t&&this.sendMessage((0,a.H)(e),t)})}findIntegration(e){return this.integrations.get(e)}sendMessage(e,t){((0,i.isString)(t)?this.findIntegration(t):t).integrationChannel.postMessage((0,a.H)(e))}constructor(){this.helloMessageListener=e=>{var t,n,i;let s=Array.from(this.integrations.values()).find(t=>t.iframe.contentWindow===e.source);if(!s&&(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.type)!==c.j6)return;if((null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.type)!==c.j6){console.warn(`Received unexpected postMessage. Expected event type [${c.j6}], but got [${null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.type}] instead`,e);return}if(!s){console.warn("Could not find a valid integration for message -- did the event come from an unexpected frame?");return}let r=(0,o.SV)(s.url);if((0,o.SV)(s.url)!==e.origin){console.warn(`Message came from origin [${e.origin}], but we were expecting [${r}]. Authorization requests must come from the same origin that was configured in the LTI placement.`);return}let a=new MessageChannel;s.integrationChannel=a.port1,s.integrationChannel.onmessage=e=>{this.onIntegrationMessage(e.data,s)},s.iframe.contentWindow.postMessage({type:c.j6},e.origin,[a.port2])},this.onIntegrationMessage=(e,t)=>{if(!e)return;let n=l.Md.authScopes.get(e.type);if(n){let i=n(e,t);if(!i)return}let i=this.integrationMessageEvents.get(e.type);i?i(e,t):console.warn(`No valid method to call with provided event type ${e.type}.`)},this.sendAuthorizedMessage=async(e,t)=>{if(!e||!e.token)return this.sendAuthorizationError(t,"Received authorized message without token");let n=e.token;try{let e=await (0,r._Ae)(n);if(null==e.scope){let e=`Could not authenticate, no auth scopes provided for ${t}`;return this.sendAuthorizationError(t,e)}let i=new Set(e.scope.split(/\s+/));this.checkPremiumAccess(t,i),t.authScopes=i,t.integrationChannel.postMessage({type:c.RC})}catch(r){let e=r.error&&r.error.error,n="invalid_request"===e,i=r.error&&r.error.error_description,s=n?"Expired or invalid token.":`Server side error occurred: ${e}, ${i}`;return this.sendAuthorizationError(t,s)}},this.checkPremiumAccess=(e,t)=>{t.has(c.hq)||this.sendAuthorizationError(e,"This integration does not have UEF access enabled.")},this.sendAuthorizationError=(e,t)=>{let n={type:c.Mi,errorInformation:t};this.sendMessage(n,e),this.removeIframe(e)},this.removeIframe=e=>{this.document.body.querySelector(`#${e.iframe.id}`).remove()},this.sendRouteEvent=e=>{let t=u.ZP.getCurrentRoute();this.sendMessage({type:c.Fm,eventType:c.Kj.Route,routeName:t.currentRouteName,routeData:t.currentParams},e)},this.integrations=new Map,this.integrationMessageEvents=new Map,this.integrationSubscriptionManager=new d}}},814154:function(e,t,n){"use strict";n.d(t,{H:function(){return o},e:function(){return r}});var i=n(464027),s=n(18447);let r="ultra.services.interval",o="interval";i.module(r,[]).factory(o,["$interval",e=>{let t=(t,n,i,r,o)=>{if(!s.default.production&&i<5e3&&!r&&(null==o||o)){if(i<1e3)throw Error("Short duration interval, repeating indefinitely, which invokes apply was registered!");console.warn("Short duration interval, repeating indefinitely, which invokes apply was registered!\n"+Error().stack)}let a=e(t,i,r,o);return a.__bb_unregister_scope_destroy__=n.$on("$destroy",()=>{e.cancel(a)}),a};return t.cancel=t=>{t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)},t}])},621945:function(e,t,n){"use strict";n.d(t,{HV:function(){return p},e1:function(){return u}});var i=n(464027),s=n(18447),r=n(211796),o=n(372457),a=n(864234),l=n(919038),c=n(247126);function d(e,t){return function(n,i){t(n,i,e)}}let u="ultra.service.context.landingPage",p="landingPageService",m="base.recentActivity";class h{navigateToLandingPage(){return this.getLandingPage().then(e=>this.ultraState.go(e))}getLandingPage(){return this.currentUser.userModel.$asPromise().then(e=>e.isGuest()?this.convertLandingPageToRoute():this.preferences.getPreference("ultraui.first.time.welcome.welcome.visited").then(()=>this.convertLandingPageToRoute(),e=>404===e.$response.status?s.default.features.devtools_disableFtue?this.convertLandingPageToRoute():"welcome":this.convertLandingPageToRoute()))}convertLandingPageToRoute(){return this.currentUser.userModel.$asPromise().then(e=>{switch(e.landingPage){case"ActivityStream":return"base.recentActivity";case"InstitutionPage":return this.getInstitutionPageRoute();case"CourseList":return"base.courses";default:return m}})}getInstitutionPageRoute(){let e=this.$q.defer(),t=this.$timeout(()=>e.resolve(m),6e3);return this.institutionApi.getHealth().then(()=>this.institutionApi.getEffectiveVariantIdWithPermissions()).then(({canEdit:e,canView:t})=>e?"base.institution-page-admin":t?"base.institution-page":m).catch(()=>m).then(n=>{this.$timeout.cancel(t),e.resolve(n)}),e.promise}constructor(e,t,n,i,s,r){this.$q=e,this.$timeout=t,this.currentUser=n,this.preferences=i,this.institutionApi=s,this.ultraState=r}}h=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([d(0,(0,r.tB)("$q")),d(1,(0,r.tB)("$timeout")),d(2,(0,r.tB)(o.HV)),d(3,(0,r.tB)(a.HV)),d(4,(0,r.tB)(l.HV)),d(5,(0,r.tB)(c.HV))],h),i.module(u,[o.e1,a.e1,l.e1,c.e1]).service(p,h)},102619:function(e,t,n){"use strict";n.d(t,{Dh:function(){return r},Q2:function(){return o},ks:function(){return s}});var i=n(276635);let s="learnApiCacheMessageService";class r{constructor(){this.listen=i.noop,this.clearCache=i.noop}}class o{constructor(e){this.$rootScope=e,this.init=()=>{this.clearCacheOnLearnScreenClose()},this.clearCacheOnLearnScreenClose=()=>this.$rootScope.$on("$stateChangeStart",(e,t,n,i)=>{-1!==["base.admin","base.courses.peek.course.classic.outline"].indexOf(i.name)&&this.clearCache()}),this.clearCache=e=>this.cacheServiceCallback({type:"clear",pattern:e}),this.listen=e=>{this.cacheServiceCallback=e},this.init()}}o.$inject=["$rootScope"]},215027:function(e,t,n){"use strict";n.d(t,{e:function(){return C}});var i=n(276635),s=n(102619);let r="learnApiCacheService",o="learnApiCache.CacheRules",a=["DELETE","PUT","POST","PATCH","JSONP"],l="/learn/api/v1",c="_\\d+_\\d+";function d(e=""){return Array.isArray(e)?e.sort().join(","):e.split(",").sort().join(",")}let u="ultra-session-event-existing-window",p="ultra-session-event-new-window",m="ultra-session-updating-storage",h=e=>[u,p].some(t=>t===e.key),g=e=>{if(e.newValue){if(e.key===u)null==window.sessionStorage.getItem(m)&&(window.sessionStorage.setItem(m,"updating"),setTimeout(()=>{window.localStorage.setItem(p,JSON.stringify(window.sessionStorage)),window.localStorage.removeItem(p),window.sessionStorage.removeItem(m)})),window.localStorage.setItem(p,JSON.stringify(window.sessionStorage));else if(e.key===p&&!window.sessionStorage.length){let t=JSON.parse(e.newValue);for(let e of Object.keys(t))window.sessionStorage.setItem(e,t[e])}}},f=()=>(window.addEventListener("storage",g,!1),()=>{window.removeEventListener("storage",g)}),b=()=>{localStorage.setItem(u,u),localStorage.removeItem(u)};var v=n(18447);let y="ultra.components.services.learn.api.cacheRules",C="ultra.components.services.learn.api.cache";angular.module(y,[]).constant(o,new class{constructor(){this.cacheTimes={DO_NOT_CACHE:0,INSTANT:500,SHORT:15e3,MEDIUM:6e4,LONG:6e5,PERPETUAL:1/0},this.rules=[{url:"calendars",methods:["GET"],duration:this.cacheTimes.SHORT},{url:"cloudstorages",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:`courses/${c}`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`courses/${c}`,methods:a,onUpdate:(e,t)=>{t(/users\/.*/)}},{url:`courses/${c}/contents/${c}`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/contents/ROOT/children`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/convertToUltra/conversionStatus`,methods:["GET"],duration:this.cacheTimes.INSTANT,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/convertToUltra`),s=n.match(i);t(RegExp(`courses/${s[1]}`))}},{url:`courses/${c}/tools`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`courses/${c}/assessments/${c}/questions`,methods:["GET"],duration:this.cacheTimes.MEDIUM},{url:`courses/${c}/discussionboards/default/forums/${c}/messages/${c}`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/discussionboards/default/forums/(${c})`),s=n.match(i);t(RegExp(`courses/${s[1]}/discussionboards/default/forums/${s[2]}/messages`))}},{url:`courses/${c}/gradebook/attempts/${c}`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/gradebook`),s=n.match(i);t(RegExp(`courses/${s[1]}/gradebook/.*`))}},{url:`courses/${c}/gradebook/attempts/${c}/assessment/answers/${c}/grades`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/gradebook`),s=n.match(i);t(RegExp(`courses/${s[1]}/gradebook/.*`))}},{url:`courses/${c}/gradebook/columns/${c}`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/gradebook/columns/${c}/grades`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/gradebook/columns/${c}/grades/${c}/attempts`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/gradebook/columns/${c}/.+`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/gradebook/columns/(${c})`),s=n.match(i);t(RegExp(`courses/${s[1]}/gradebook/columns/${s[2]}/.*`)),t(RegExp(`courses/${s[1]}/memberships.*`))}},{url:`courses/${c}/gradebook/columns/${c}/summary`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/gradebook/grades/bulkView`,methods:["GET"],duration:this.cacheTimes.DO_NOT_CACHE},{url:`courses/${c}/gradebook/groupAttempts/${c}/activities`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/gradebook/groupAttempts/(${c})`),s=n.match(i);t(RegExp(`courses/${s[1]}/gradebook/groupAttempts/${s[2]}/.*`)),t(RegExp(`courses/${s[1]}/gradebook/columns/.*`))}},{url:`courses/${c}/memberships/${c}`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/memberships`),s=n.match(i);t(RegExp(`courses/${s[1]}.*`)),t(RegExp(`users/${c}/memberships`))}},{url:`courses/${c}/memberships`,methods:["GET"],duration:this.cacheTimes.SHORT},{url:`courses/${c}/users/${c}`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`users/${c}`,methods:a,onUpdate:(e,t)=>{t(/users\/.*/)}},{url:`users/(?:me|${c})`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`users/${c}/memberships`,methods:["GET"],duration:this.cacheTimes.LONG},{url:"terms",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:".+",methods:["GET"],duration:this.cacheTimes.INSTANT}]}});let S=angular.module(C,[y]);v.default.features.learnApiCaching?S.provider(r,[o,class{getRule(e,t){return this.requestCachingRules.find(n=>{let i=n.urlRegex?n.urlRegex:RegExp(n.url+"$","i");return n.methods.indexOf(t.toUpperCase())>-1&&i.test(e)})}handleRequest(e){let t=this.resolveCachedEntry(e);return t||e}handleResponse(e){if(!this.isApiUrl(e.config.url)||e.config.url.match(/^blob/))return e;let t=e.config.method.toUpperCase(),n=e.config.url,i=this.getRule(n,t),s=this.makeKeyFromResponse(e);return i&&!this.requestCache.has(s)&&this.insertCacheEntry({...e},i.duration),this.resolveEasing(e),e}getCacheEntry(e){let t;let n=this.makeKeyFromRequest(e),i=this.lookupExpandedCacheEntry(e);if(i?t=i:this.requestCache.has(n)&&(t=this.requestCache.get(n)),t){if(!this.isCacheExpired(t))return t;this.removeCacheEntries(t.baseUrl)}return{}}getCleanUrl(e){return e.slice(e.indexOf(l)+l.length+1)}insertCacheEntry(e,t){let n=this.makeKeyFromResponse(e),i=e.config.url,s=URL.createObjectURL(new Blob([JSON.stringify(e.data)],{type:"application/json"})),r={documentUrl:s,baseUrl:i,fetchedAt:Date.now(),ttl:t};if(this.requestCache.set(n,r),e.config.params&&e.config.params.expand){let t=e.config.params.expand;if(this.cachedExpandedRequests.has(i)){let e=this.cachedExpandedRequests.get(i);this.cachedExpandedRequests.set(i,[...e,{cacheKey:n,expand:t}])}else this.cachedExpandedRequests.set(i,[{cacheKey:n,expand:t}])}}getEffectiveTTL(e){return this.cachingEnabled?e.ttl:Math.min(this.cacheRules.cacheTimes.INSTANT,e.ttl)}isCacheExpired(e){return Date.now()>e.fetchedAt+this.getEffectiveTTL(e)}isApiUrl(e){return e.indexOf(l)>-1}lookupExpandedCacheEntry(e){let t=e.url,n=e.params;if(n&&n.expand&&this.cachedExpandedRequests.has(t)){let e=this.cachedExpandedRequests.get(t),s=e.find(e=>{let t=n.expand.split(","),s=e.expand.split(",");return!i.difference(t,s).length});if(s)return this.requestCache.get(s.cacheKey)}}makeKeyFromRequest(e){let t=this.getCleanUrl(e.url);e.params=e.params||{};let{fields:n,expand:i,...s}=e.params,r=d(n),o=d(i);return JSON.stringify({url:t,expand:o,fields:r,rest:s})}makeKeyFromResponse(e){return this.makeKeyFromRequest(e.config)}resolveCachedEntry(e){if(e.url.match(/^blob/))return e;let t=this.getCacheEntry(e);return t&&t.documentUrl?{...e,url:t.documentUrl,params:{},headers:{originalUrl:e.url,originalParams:JSON.stringify(e.params)}}:e}resolveEasing(e){let t=this.makeKeyFromResponse(e),n=this.queuedRequests.get(t);if(n){let t=this.resolveCachedEntry(e.config);n.pendingRequestConfig.resolve(t)}}constructor(e){this.cacheRules=e,this.cachingEnabled=!0,this.cachedExpandedRequests=new Map,this.queuedRequests=new Map,this.requestCache=new Map,this.disableCaching=()=>{this.cachingEnabled=!1},this.$get=["$q","$log",s.ks,function(e,t,n){n.listen(e=>{"clear"===e.type&&this.removeCacheEntries(e.pattern||".*")});let i=n=>{let i=this.makeKeyFromRequest(n);if(!this.queuedRequests.has(i)){let t=e.defer();return t.promise.finally(()=>{this.queuedRequests.delete(i)}),this.queuedRequests.set(i,{pendingRequestConfig:t}),e.resolve(n)}return t.info(`Easing ${i}`),this.queuedRequests.get(i).pendingRequestConfig.promise};return{request:e=>{if("GET"!==e.method||!this.isApiUrl(e.url)||e.cache)return e;let t=this.handleRequest(e);return t.url.match(/^blob/)?t:i(t).then(e=>e)},requestError:n=>(t.error("requestError: ",n),e.reject(n)),response:e=>{if(e.config.url.match(/^blob/)){let t=e.config.headers;return e.config.url=t.originalUrl,e.config.params=JSON.parse(t.originalParams),e}return"GET"!==e.config.method||!this.isApiUrl(e.config.url)||e.config.cache?e:this.handleResponse(e)},responseError:t=>{if(!t||!t.config)return e.reject(t);let n=this.makeKeyFromResponse(t);return this.queuedRequests.has(n)&&this.queuedRequests.get(n).pendingRequestConfig.reject(t.data),e.reject(t)}}}],this.removeCacheEntries=e=>{this.requestCache.forEach((t,n)=>{let i=e instanceof RegExp?e:RegExp(`${e}$`);i.test(t.baseUrl)&&(this.requestCache.delete(n),this.cachedExpandedRequests.delete(t.baseUrl),this.queuedRequests.has(n)&&(this.queuedRequests.get(n).pendingRequestConfig.reject(`Canceled Easing: ${n}`),this.queuedRequests.delete(n)),URL.revokeObjectURL(t.documentUrl))})},this.requestCachingRules=e.rules,setInterval(()=>{this.requestCache.forEach(e=>{this.isCacheExpired(e)&&this.removeCacheEntries(e.baseUrl)})},this.cacheRules.cacheTimes.MEDIUM)}}]).service(s.ks,s.Q2).config(["$provide","$httpProvider","learnApiCacheServiceProvider",(e,t,n)=>{window.addEventListener("storage",e=>{h(e)&&n.disableCaching()}),f(),b(),e.decorator("$http",["$delegate",e=>{let t=function(t){if(null!=t.cache)return e(t);let i=n.getRule(t.url,t.method.toUpperCase());return i&&i.onUpdate&&"function"==typeof i.onUpdate&&i.onUpdate(t,n.removeCacheEntries),-1!==a.indexOf(t.method.toUpperCase())&&n.removeCacheEntries(t.url),e(t)};return function(...e){i.each(e,function(e){t[e]=function(n,i){return t(angular.extend({},i||{},{method:e,url:n}))}})}("delete","get","head","jsonp"),function(...e){i.each(e,function(e){t[e]=function(n,i,s){return t(angular.extend({},s||{},{method:e,url:n,data:i}))}})}("post","put","patch"),function(...n){i.each(n,function(n){Object.defineProperty(t,n,{enumerable:!0,get(){return e[n]},set(t){e[n]=t}})})}("defaults","pendingRequests"),t}]),URL&&Object.prototype.hasOwnProperty.call(URL,"createObjectURL")&&t.interceptors.push(r)}]):S.provider(r,[class{constructor(){this.$get=[function(){return{}}]}}]).service(s.ks,s.Dh)},854108:function(e,t,n){"use strict";n.d(t,{HV:function(){return a},e1:function(){return o}});var i=n(464027),s=n(18447),r=n(450100);let o="ultra.services.logger",a="logger";class l{logToServer(e,t,n){if(e){let i="string"==typeof e?Error(e):e,r={applicationId:s.default.telemetryAppId,component:"",message:i.message,data:n,cause:i.stack,level:t};r.cause||(r.cause="Stack trace is unavailable"),this.queue.enqueue(()=>this.$http.post(s.default.telemetryApiBasePath+"/v1/browser/logs",r,{timeout:s.default.telemetryApiTimeoutMS}).catch(e=>{console.error("Failed to send logs to server. \nResponse: "+e+" Status: "+e.status)}))}else console.error("Unable to send empty log entry to server")}debug(e,t){this.logToServer(e,"debug",t)}info(e,t){this.logToServer(e,"info",t)}error(e,t){this.logToServer(e,"error",t)}critical(e,t){this.logToServer(e,"critical",t)}warn(e,t){this.logToServer(e,"warn",t)}constructor(e,t){this.$http=e,this.promiseQueueService=t,this.$http=e,this.queue=t.getQueue("telemetry")}}l.$inject=["$http",r.HV],i.module(o,[r.e1]).service(a,l)},915121:function(e,t,n){"use strict";n.d(t,{HV:function(){return G},e1:function(){return D}});var i=n(276635),s=n(464027),r=n(168132),o=n(852512),a=n(867734),l=n(822658),c=n(291146),d=n(748157),u=n(855819),p=n(247126),m=n(319434),h=n(759485),g=n(372457),f=n(840721),b=n(520383),v=n(939284),y=n(350383),C=n(305233),S=n(529462),E=n(408027),I=n(144958),w=n(470269),A=n(537749),k=n(837545),x=n(951248),T=n(58904),P=n(957244);let D="ultra.components.services.lti",G="lti";class R{getDomainConfigStatusType(e){let t=this.service.getDomainConfigStatusType(e);return t?t.toString():null}getPlacements(e,t=!1){return(0,k.h)(this.service.getPlacements(e,t))}async ltiLaunch({courseId:e,contentId:t,content:n,showPreLaunchPanel:i}){return this.service.ltiLaunch({courseId:e,contentId:t,content:n,showPreLaunchPanel:i})}constructor(e){this.service=e,this.key=o.fz.Lti}}class B{configureAndInitInlineLaunch(e,t){var n;let i=this.$q.defer(),s=this.contextCourse.courseId||this.$stateParams.courseId,r=null!==(n=this.$stateParams.contentId)&&void 0!==n?n:this.$stateParams.id,o=(0,I.Ic)({bbFileData:e,courseId:s,contentId:r});if(o.linkType){if(!m.GQ.ExternalLink.isEqualTo(o.linkType)&&t&&t.preventDefault(),o.linkRefId)return this.ltiLaunch(o)}else i.reject({errorMessage:"Failed to render the iframe from src"});return i.promise}getPlacements(e,t=!1){if(t)return this.PlacementModel.$search(e).$asPromise();let n=this.placementsCache.get(s.toJson(e||{}));return n||(n={promise:this.PlacementModel.$search(e).$asPromise()},this.placementsCache.put(s.toJson(e||{}),n)),n.promise}getAvailablePlacements(e,t=!1){return this.getPlacements(e,t).then(e=>e.filter(e=>e.isAvailable()))}ltiLaunch(e){let t;let n=this.$q.defer();if(e.gradeDetail&&x.u$1.PartnerCloud.isEqualTo(e.gradeDetail.column.scoreProviderHandle)){var s;t=(null===(s=e.gradeDetail.ui)||void 0===s?void 0:s.attempt)?e.gradeDetail.ui.attempt.groupAttemptId?e.gradeDetail.ui.attempt.groupAttemptId:e.gradeDetail.ui.attempt.id:e.gradeDetail.lastAttemptId,this._getMembership(e.courseId).then(i=>{let s=(0,A.YD)({gradableItemId:e.gradeDetail.column.id,courseId:e.gradeDetail.column.courseId,attemptId:t,membershipId:i.id,linkId:e.gradeDetail.column.linkId});this.launch(s,!0),n.resolve()})}else this.$q.all([this.entitlement.hasCourseEntitlement(m.lP.ViewAdmin,e.courseId),this._getContent(e.courseId,e.content,e.contentId,e.linkType,e.linkRefId)]).then(([t,s])=>{if(!s||!e.showPreLaunchPanel||t)return this._ltiLaunch(i.merge(e,{content:s})).then(n.resolve,n.reject);this._getMembership(e.courseId).then(t=>{if(!(this._isGradable(s)&&this._isStudentInCourse(t)))return this._ltiLaunch(i.merge(e,{content:s})).then(n.resolve,n.reject);this.stateService.goPeekState(w.UM.LTI_LAUNCH,{courseId:s.courseId,contentId:s.id}).then(()=>{e.showPreLaunchPanel||this.markCompleted(s.id,s.courseId,s),n.resolve()}).catch(e=>{n.reject({errorMessage:"Failed to open the gradable lti launch panel",errorResponse:e})})})}).catch(e=>{n.reject({errorMessage:"Failed to get entitlement or course content",errorResponse:e})});return n.promise}markCompleted(e,t,n){let i=n?this.$q.resolve(n):this._getContent(t,null,e,null,null);return i.then(e=>{var t;return(this.currentContent.setCurrentContent(e),e&&(null===(t=e.permissions)||void 0===t?void 0:t.canHaveReviewState)&&e.state!==E.aql.Completed&&e.inSequence)?e.updateState(E.aql.Completed,!0):e})}launch(e,t=!1,n,i,s){e=h.uI(e),e=h.Ou(e,"from_ultra","true");let r=h.hi(e),o=this.contextCourse.courseId||this.$stateParams.courseId||r.course_id,a=this.$stateParams.contentId||this.$stateParams.id||r.content_id||r.parentId;if(t){var l,c;return T.Z.sendEventMessage({type:P.Fm,eventType:P.Kj.LtiLaunch,launchData:{courseId:o,coursesOrOrganizations:(null===(l=this.contextCourse)||void 0===l?void 0:null===(c=l.course)||void 0===c?void 0:c.isOrganization)?"organizations":"courses",isLaunchedInNewWindow:!0,toolHref:e}}),this.$window.open(e),this.timeout(()=>this.markCompleted(a,o),this.$rootScope,3e3),"lti-service: Link was launched in a new window."}return n?e:(i?this.stateService.goPeekState(w.UM.LTI_LAUNCH_PEEK,{toolHref:e,courseId:o,contentId:a}).then(()=>{s&&this.stateService.goPeekState(w.UM.LTI_EDIT_CLOUD_DOCUMENT)}):this.stateService.goPeekState(w.UM.LTI_LAUNCH_FRAME,{toolHref:e}),this.timeout(()=>this.markCompleted(a,o),this.$rootScope,3e3),"lti-service: Link was launched in a peek panel.")}_ltiLaunch(e){let t;if(e.content){t=this.getLaunchLinkFromContent(e.content);let n=this.getDomainConfigStatusType(e.content);if(!t){if(n&&r.ov.gM.NeedsApproval===n){let t=this.$rootScope.$new();return t.email=this._getSupportEmail(e.content),t.hasEmail=!!t.email,this.modalService.open({scope:t,template:f,resolve:{translations:[c.serviceName,e=>e.loadBundle("features/course/content/course-content")]}}),this.$q.resolve()}return this.$q.reject({errorMessage:"Attempted to launch an LTI link without a valid launchLink."})}if(void 0!==this.placementExists(e.content)&&!this.placementExists(e.content))return this.$q.reject({errorMessage:"The placement of this LTI Link does not exist"})}else t={link:this._getLaunchLinkFromLinkRef(e)};return this._initLaunchTarget(i.merge(e,{launchLink:t}))}_initLaunchTarget(e){let t=(0,I.Rl)(e.linkRefId);if(e.content)return this._launchFromContent(e.content,e.launchLink,t,e.launchSettings);if(m.GQ.LtiPlacement.isEqualTo(e.linkType))return this._getPlacementById(e.linkRefId).then(t=>{let n=e.launchLink.link,i=t.launchInNewWindow;return h.eY(t.url)||(n=h.Ou(n,"target_override","window"),i=!0),E.TK1.ContentItemMessage===t.type&&(m.i3.Inline!==this.$stateParams.mode?(this.$stateParams.position&&(n=h.Ou(n,"position",this.$stateParams.position)),this.$stateParams.parentId&&(n=h.Ou(n,"content_id",this.$stateParams.parentId)),n=h.Ou(n,"inline","false")):(n=h.Ou(n,"inline","true"),this.$stateParams.id&&(n=h.Ou(n,"content_id",this.$stateParams.id)))),this.launch(n,i)},()=>this.launch(e.launchLink.link));if(m.GQ.PartnerCloud.isEqualTo(e.linkType))return this.PartnerSettingsModel.getSettingsById(t).then(t=>this.launch(e.launchLink.link,!t.responsive));if(m.GQ.LtiLink.isEqualTo(e.linkType)){let t=e.launchLink.link;return!e.launchInNewWindow&&e.url&&h.eY(e.url)?this.$q.resolve(this.launch(t,!1,e.renderAsEmbed)):this.$q.resolve(this.launch(t,!0))}}_launchFromContent(e,t,n,i){let s=e.contentHandler;if(m.GQ.LtiPlacement.startsWith(s)||m.GQ.LtiLink.isEqualTo(s)){let n=x.fq8.CloudDocument===e.contentDetail[s.toString()].itemOrigin;return this.$q.resolve(this.launch(t.link,t.launchNewWindow,!1,n,i))}if(m.GQ.PartnerCloud.isEqualTo(s)){let i=e.contentDetail;return!n&&i&&i[m.GQ.PartnerCloud.handle]&&(n=i[m.GQ.PartnerCloud.handle].providerId),this.PartnerSettingsModel.getSettingsById(n).then(e=>this.launch(t.link,!e.responsive))}}getLaunchLinkFromContent(e){return(0,I.Qk)(e)}_getPlacementById(e){let t=this.placementCache.get(e);return t||(t={promise:this.PlacementModel.$find(e).$asPromise()}).promise.then(()=>{this.placementCache.put(e,t)}),t.promise}_getLaunchLinkFromLinkRef(e){return(0,I.Mo)(e)}getDomainConfigStatusType(e){var t,n,i;return(null===(t=e.contentDetail)||void 0===t?void 0:null===(n=t[e.contentHandler.toString()])||void 0===n?void 0:null===(i=n.domainConfig)||void 0===i?void 0:i.statusType)?e.contentDetail[e.contentHandler.toString()].domainConfig.statusType:null}ltiToolProviderExists(e){var t,n;return null===(t=e.contentDetail)||void 0===t?void 0:null===(n=t[e.contentHandler.toString()])||void 0===n?void 0:n.existsLTIProvider}placementExists(e){var t,n;return null===(t=e.contentDetail)||void 0===t?void 0:null===(n=t[e.contentHandler.toString()])||void 0===n?void 0:n.existsPlacement}ltiEditColumn(e){this._getContent(e.courseId,e.ui.content,e.contentId,null,null).then(t=>{e.ui.content=t;let n=a.dI.create(t).getEditState();this.stateService.goPeekState(n,{id:t.id})})}isLTILink(e){return null!=e.scoreProviderHandle&&(x.u$1.PartnerCloud.isEqualTo(e.scoreProviderHandle)||x.u$1.LTILink.isEqualTo(e.scoreProviderHandle))}populateNewPlacement(e,t){let n=r.courseContent.ContentHandler.LtiPlacement.handle+"-"+t.handle;e.isAvailable=!1,e.isPartiallyVisible=!1,e.visibility=E.hbA.Hidden,e.contentHandler=new r.courseContent.ContentHandler(n,null),e.permissions={edit:!0},e.contentDetail={},e.contentDetail[n]={},e.title=t.name.trim().substr(0,333),t.description&&t.description.length>0&&(e.description=t.description.trim().substr(0,250))}_isStudentInCourse(e){return e.isStudentMembership()}_isGradable(e){return!!e&&!!e.contentDetail&&!!e.contentDetail[e.contentHandler.toString()]&&!!e.contentDetail[e.contentHandler.toString()].gradingColumn&&!!e.contentDetail[e.contentHandler.toString()].gradingColumn}_getContent(e,t,n,i,s){return t?this.$q.when(t):n?this.CourseModel.$new(e).contents.$find(n).$asPromise():s&&m.GQ.PartnerCloud.isEqualTo(i)?this.PartnerContentIdModel.getContentIds(e,s).then(t=>t.contentIds&&t.contentIds.length>0?this.CourseModel.$new(e).contents.$find(t.contentIds[0]).$asPromise():this.$q.when(null)):this.$q.when(null)}_getMembership(e){return this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()}_getSupportEmail(e){return e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].supportEmail?e.contentDetail[e.contentHandler.toString()].supportEmail:null}convertInlineLTILinkToBbMLLink(e){return e.map(e=>{let t=e.data;if(m.GQ.LtiLink.isEqualTo(e.data.linkType)){var n,r;(null===(n=e.data)||void 0===n?void 0:null===(r=n.target)||void 0===r?void 0:r.toLowerCase())==="iframe"&&(t.bbtype="embedded-app",e.data.height&&(t.height=e.data.height),e.data.width&&(t.width=e.data.width),delete t.target),t.linkRefUuid||(t.linkRefUuid=(0,S.V)())}let o={type:s.isDefined(t)&&!m.GQ.ExternalLink.isEqualTo(t.linkType)?"lti":"external",title:e.title,url:"",data:i.escape(s.toJson(s.isDefined(t)?t:{}))};return s.isDefined(t)&&m.GQ.ExternalLink.isEqualTo(t.linkType)&&(o.url=t.url),o})}isEmbeddedGradable(e){let t=!1;return e.forEach(e=>{e.data.gradable&&(t=!0)}),t}returnToContentState(){let e=this.stateService.current.name.split(".peek."),t=1;e.length>2&&(t=e[e.length-2]===w.cw.CONTENT_MARKET?2:1);let n=e.splice(0,e.length-t).join(".peek.");this.stateService.goPeekState(n)}_registerEmbedLinkEventHandler(e,t){this.postMessageDispatcherService.registerEventHandler("embedded-links",(t,n)=>{window!==n&&n.close(),this.returnToContentState();let i=t=>{let n=this.convertInlineLTILinkToBbMLLink(t);e(n.map(e=>({data:e.data,type:e.type.includes("lti")?"lti":"external",url:e.url,title:e.title})))};this.isEmbeddedGradable(t.items)?this.showEmbeddedNotGradableModal(i,t.items):i(t.items)},t,!0)}getOpenContentMarketConf(e){return t=>{this._registerEmbedLinkEventHandler(t,e),this.stateService.goPeekState(w.cw.CONTENT_MARKET,{mode:"inline"})}}getOpenSystemContentMarketConf(e){return t=>{this._registerEmbedLinkEventHandler(t,e),this.stateService.goPeekState("system-content-market",{mode:"inline"})}}getEditorPluginOptions(e){return{getEmbedSrc:this.configureAndInitInlineLaunch.bind(this),openContentMarket:this.getOpenContentMarketConf(e)}}getYoutubeEditorPluginOptions(){return{courseId:this.contextCourse.courseId,getEmbedSrc:this.configureAndInitInlineLaunch.bind(this)}}showEmbeddedNotGradableModal(e,t){let n=this.$rootScope.$new(!0),i=this.modalService.open({scope:n,template:b,resolve:{translations:[c.serviceName,e=>e.loadBundle("features/course/content-market/content-market")]}});n.dismissCallback=()=>{e(t),i.dismiss()}}constructor(e,t,n,i,s,r,a,l,c,d,u,p,m,h,g,f,b,v){this.$q=e,this.$rootScope=t,this.$stateParams=n,this.$window=i,this.cacheFactory=s,this.contextCourse=r,this.bbLocalize=a,this.modalService=l,this.postMessageDispatcherService=c,this.stateService=d,this.CourseModel=u,this.PartnerContentIdModel=p,this.PartnerSettingsModel=m,this.PlacementModel=h,this.contextUser=g,this.currentContent=f,this.entitlement=b,this.timeout=v,this.shortMaxAge=5e3,this.thirtyMinuteMaxAge=18e5,this.placementCache=s.createCache("PlacementCache",{deleteOnExpire:"passive",maxAge:this.thirtyMinuteMaxAge}),this.placementsCache=s.createCache("PlacementsCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),(0,o.gM)(new R(this))}}B.$inject=["$q","$rootScope","$stateParams","$window","DSCacheFactory",l.HV,c.serviceName,d.HV,u.HV,p.HV,r.N7.H,r.YM.H,r.km.H,r.Ki.H,g.HV,v.HV,y.HV,C.H],s.module(D,[l.e1,u.e1,p.e1,v.e1,r.e1]).service(G,B).config(["$compileProvider",e=>{e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},934230:function(e,t,n){"use strict";n.d(t,{HV:function(){return r},e1:function(){return s}});var i=n(464027);let s="ultra.services.messaging",r="crossWindowMessaging";class o{_onMessage({data:e}){this.$rootScope.$broadcast(e.type,e.message)}postMessage(e,t){this.broadcastChannel.postMessage({type:e,message:t})}constructor(e){this.$rootScope=e,this.broadcastChannel=new BroadcastChannel("ultra.crossWindowMessagingService"),this.onMessage=this._onMessage.bind(this),this.broadcastChannel.addEventListener("message",this.onMessage),e.$on("$destroy",()=>{this.broadcastChannel.close(),this.broadcastChannel.removeEventListener("message",this.onMessage)})}}o.$inject=["$rootScope"],i.module(s,[]).service(r,o)},322121:function(e,t,n){"use strict";n.d(t,{HV:function(){return h},e1:function(){return m}});var i=n(464027),s=n(211796),r=n(350383),o=n(247126),a=n(207069),l=n(776517),c=n(319434),d=n(470269),u=n(951248);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultraUi.components.services.mobileEventHandlerService",h="mobileEventHandlerService";class g{registerHandler(e){(0,l.Dd)()&&this.featureFlagService.createWaiter(u.x40.CourseSettingsConsole).then(t=>{let n=this.entitlementService.isEntitled(c.s7.ViewCourseSettingsConsole),i={type:e,status:l.rJ.Success,permission:{showCourseSettingsPanel:t&&n}},s=(0,l.Rw)(i);this.correlationIds[e]=s.correlationId,s.response.subscribe(e=>{e.event===l.tw.OpenCourseSettings&&this.ultraStateService.goPeekState(d.Z5.Course.SETTINGS)})})}clearHandler(e){this.correlationIds[e]&&((0,l.GS)(this.correlationIds[e]),delete this.correlationIds[e])}constructor(e,t,n){this.featureFlagService=e,this.entitlementService=t,this.ultraStateService=n,this.correlationIds={}}}g=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,s.tB)(a.HV)),p(1,(0,s.tB)(r.HV)),p(2,(0,s.tB)(o.HV))],g),i.module(m,[]).service(h,g)},748157:function(e,t,n){"use strict";n.d(t,{e1:function(){return h},HV:function(){return g}});var i=n(464027),s=n(335920),r=n(612270),o=n(240231),a=n(632188),l=n(42530),c=n(837442),d=n(379614),u=n(311822);class p{get started(){return this._started}set started(e){this._started=e,this.startedCallback&&this.startedCallback(e)}start(){u.gk.getInstance().addOnModalDisplayingChanged(this.onReactModalChanged),this.modalStackedMap.addTopListener(this.onAngularModalChanged)}onStateChanged(e){this.startedCallback=e}updateGuidanceState(){this.started=!this.hasReactModal&&!this.hasAngularModal}constructor(e){this.modalStackedMap=e,this.hasAngularModal=!1,this.hasReactModal=!1,this._started=!0,this.onReactModalChanged=e=>{this.hasReactModal=e,this.updateGuidanceState()},this.onAngularModalChanged=e=>{this.hasAngularModal=!!e,this.updateGuidanceState()},d._k.addWatcher(this)}}var m=n(625506);let h="mm.foundation.modal",g="$modal";i.module(h,[s.e1]).directive("modalBackdrop",["$modalStack","$timeout",function(e,t){return{restrict:"EA",replace:!0,template:l,link(n){n.animate=!1,t(function(){n.animate=!0}),n.close=function(t){let n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,template:c,link(e,n,i){e.windowClass=i.windowClass||"",t(function(){e.animate=!0,n[0].querySelectorAll("[autofocus]").length>0?n[0].querySelectorAll("[autofocus]")[0].focus():n[0].querySelector("div").focus()})}}}]).factory("$modalStack",["$window","$timeout","$document","$compile","$rootScope",s.HV,r.HV,function(e,t,n,s,r,l,c){let d,u;let p="modal-open",h=a.Z,g={};function f(){let e=-1,t=h.keys();for(let n=0;n<t.length;n++)h.get(t[n]).value.backdrop&&(e=n);return e}function b(e,t){let i=n.find("body").eq(0),s=h.get(e).value;h.remove(e),v(s.modalDomEl,s.modalScope,300,function(){s.modalScope.$destroy(),i.toggleClass(p,h.length()>0),function(e){if(d&&-1===f()){let t=u;v(d,u,150,function(){t.$destroy(),t=null,e()}),d=void 0,u=void 0}else e()}(t),c.revertAccessibilityHandling()})}function v(e,n,i,s){let r=t(a,i);function a(){!a.done&&(a.done=!0,e.remove(),s&&s())}o.q(e,function(){t.cancel(r),a(),n.$apply()}),n.animate=!1}return r.$watch(f,function(e){u&&(u.index=e)}),g.open=function(t,o){h.add(t,{deferred:o.deferred,modalScope:o.scope,backdrop:o.backdrop,keyboard:o.keyboard});let a=n.find("body").eq(0),b=f();b>=0&&!d&&((u=r.$new(!0)).index=b,d=s("<div modal-backdrop></div>")(u),a.append(d));let v=i.element('<div class="reveal-modal" style="z-index:-1""></div>');a.append(v[0]);let y=parseInt(getComputedStyle(v[0]).top,10)||0;v.remove();let C=e.pageYOffset||0,S=C+y;function E(e){let t;27===e.which&&(t=h.top())&&t.value.keyboard&&r.$apply(function(){g.dismiss(t.key)})}return l.getTopElement().then(e=>{let n=i.element('<div modal-window style="visibility: visible; top:'+S+'px;"></div>');n.attr("window-class",o.windowClass),n.attr("index",h.length()-1),n.attr("animate","animate"),e&&e.name&&n.attr("data-base-state-name",e.name),n.append(o.content);let r=s(n)(o.scope);c.applyAccessibilityHandlingForPanel(r),h.top().value.modalDomEl=r,r&&!h.get(t).value.modalDomEl&&(h.get(t).value.modalDomEl=r),a.append(r),a.addClass(p)}),u&&(u.darkenBackdrop=o.darkenBackdrop),n.bind("keydown",E),o.scope.$on("$destroy",function(){m(document).off("keydown",E)}),h},g.close=function(e,t){if(!h.get(e))return;let n=h.get(e).value;n&&b(e,()=>{n.deferred.resolve(t)})},g.dismiss=function(e,t){if(!h.get(e))return;let n=h.get(e).value;n&&b(e,()=>{n.deferred.reject(t)})},g.dismissAll=function(e){let t=this.getTop();for(;t;)this.dismiss(t.key,e),t=this.getTop()},g.getTop=function(){return h.top()},g}]).provider(g,function(){let e={options:{backdrop:!0,keyboard:!0,darkenBackdrop:!1},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,s,r,o,l,c){let d=new p(a.Z);d.start();let u={};return u.open=function(r){let o=s.defer(),a=s.defer(),d={result:o.promise,opened:a.promise,close(e){c.close(d,e)},dismiss(e){c.dismiss(d,e)}};if((r=i.extend({},e.options,r)).resolve=r.resolve||{},!r.template)throw Error("Template is required. Use requireJs to load template string if needed.");let u=s.all([s.when(r.template)].concat(function(e){let n=[];return i.forEach(e,function(e,r){(i.isFunction(e)||i.isArray(e))&&n.push(s.when(t.invoke(e)))}),n}(r.resolve)));return u.then(function(e){let t=(r.scope||n).$new();t.$close=d.close,t.$dismiss=d.dismiss;let s={},a=1;r.controller&&(s.$scope=t,s.$modalInstance=d,i.forEach(r.resolve,function(t,n){s[n]=e[a++]}),l(r.controller,s)),c.open(d,{scope:t,deferred:o,content:e[0],backdrop:r.backdrop,keyboard:r.keyboard,windowClass:r.windowClass,darkenBackdrop:r.darkenBackdrop})},function(e){o.reject(e)}),u.then(function(){a.resolve(!0)},function(){a.reject(!1)}),d},u}]};return e})},632188:function(e,t,n){"use strict";let i=(()=>{let e=[],t=[];function n(){return e[e.length-1]}function i(){let e=n();t.forEach(t=>t(e))}return{add:function(t,n){e.push({key:t,value:n}),i()},addTopListener:function(e){t.push(e)},get:function(t){let n;for(let i=0;i<e.length;i++)if(t===e[i].key){n=e[i];break}return n},keys:function(){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].key);return t},top:n,remove:function(t){let n=-1;for(let i=0;i<e.length;i++)if(t===e[i].key){n=i;break}let s=e.splice(n,1)[0];return i(),s},removeTop:function(){let t=e.splice(e.length-1,1)[0];return i(),t},length:function(){return e.length}}})();t.Z=i},197196:function(e,t,n){"use strict";var i,s;n.d(t,{P:function(){return r},W:function(){return i}}),(s=i||(i={})).None="",s.SafeAssign="SafeAssign",s.Integration="Integration";let r="mdb-sa"},674414:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},e1:function(){return p}});var i=n(276635),s=n(464027),r=n(168132),o=n(291146),a=n(759485),l=n(542728),c=n(211796),d=n(197196);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.service.originalityReport",m="originalityReport";class h{setCourseContent(e,t){this.courseContent=e,this.isPrivileged=t}clearCourseContent(){this.courseContent=void 0,this.isPrivileged=void 0}updateReport(e,t,n){this.columnId=n,this.attempt=e,this.openOriginalityReport=!0,this.shouldFetchOriginality()&&(t&&(this.gradedQuestionAttempts=t.map(e=>i.pick(e,["questionAttempt.question.position","questionAttempt.visibleQuestionNumber"]))),this.fetchOriginality())}clearReport(){this.gradedQuestionAttempts=void 0,this.attempt=void 0,this.originality=void 0,this.openOriginalityReport=void 0,this.columnId=void 0,this.reports=void 0,this.personalMaxScore=void 0,this.personalMaxScoreReportName=void 0,this.personalAverageScore=void 0,this.classAverageScore=void 0}isSafeAssignEnabled(e){var t;return!!(null===(t=null!=e?e:this.courseContent)||void 0===t?void 0:t.isSafeAssignEnabled())}retrieveOriginalityIntegration(e){var t;let n=e||this.courseContent;return n?(this.setCourseContent(n,!0),this.$q.when(l.Z.fetchDefaultOriginalityReportSubmissionService(n.courseId,null===(t=n.getAssociatedGradingColumn())||void 0===t?void 0:t.id)).then(e=>(this.defaultOriginalityIntegrationService=e,this.portalIntegrationId=this.getOriginalityIntegrationByUniqueId(null==e?void 0:e.uniqueHandle),e))):this.$q.resolve(void 0)}fetchIsOriginalityIntegrationEnabled(e){return this.retrieveOriginalityIntegration(e).then(e=>e?this.isOriginalityIntegrationEnabled():this.$q.resolve(!1))}fetchIsOriginalityEnabled(e){return this.fetchIsOriginalityIntegrationEnabled(e).then(e=>e)}isOriginalityIntegrationEnabled(){var e,t;let n=this.defaultOriginalityIntegrationService;return!!(null==n?void 0:null===(e=n.capabilities)||void 0===e?void 0:null===(t=e.OriginalityReport)||void 0===t?void 0:t.enabled)}saveOriginalityConfiguration(e){return this.$q.when(l.Z.saveOriginalityConfiguration(this.courseContent,e))}isOriginalityReportEnabled(){return this.defaultOriginalityIntegrationService&&this.defaultOriginalityIntegrationService.uniqueHandle!==d.P?this.isOriginalityIntegrationEnabled():this.isSafeAssignEnabled()}getCurrentOriginalityReportProviderType(e){return e?e.uniqueHandle===d.P?d.W.SafeAssign:d.W.Integration:d.W.None}getOriginalityDisplayName(){var e;return null===(e=this.defaultOriginalityIntegrationService)||void 0===e?void 0:e.displayName}isOriginalityReportProviderActive(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)!==d.W.None}isSafeAssignActiveOriginalityProvider(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)===d.W.SafeAssign}isIntegrationActiveOriginalityProvider(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)===d.W.Integration}getOriginalityReportLinkAnalyticsId(){var e;let t=null===(e=this.defaultOriginalityIntegrationService)||void 0===e?void 0:e.uniqueHandle;return t?`course.content.originalityReport.settings.${t}.link`:"course.content.originalityReport.settings.link"}getOriginalityReportLinkText(e){let t=this.defaultOriginalityIntegrationService,n=null==t?void 0:t.displayName;return n?this.isOriginalityReportEnabled()?this.localizeProviderLinkText("course.content.originalityReport.settings.providerEnabled",n):e?this.localizeProviderLinkText("course.content.originalityReport.settings.enableProvider",n):this.localizeProviderLinkText("course.content.originalityReport.settings.providerDisabled",n):this.localize.translateSync({locale:this.localize.getAppLocale(),key:"course.content.originalityReport.settings.originalityDisabled",noWrap:!0})}localizeProviderLinkText(e,t){return this.localize.translateSync({locale:this.localize.getAppLocale(),key:e,noWrap:!0,params:{originalityProvider:t},noEscape:!0})}canStudentViewReports(){return this.courseContent&&this.courseContent.canStudentViewReports()}isReportSectionOpen(){var e;return this.openOriginalityReport&&((null===(e=this.originality)||void 0===e?void 0:e.canShowReportPanel())||this.isOriginalityIntegrationEnabled())}shouldFetchOriginality(){return this.isPrivileged&&this.isSafeAssignEnabled()||!this.isPrivileged&&this.canStudentViewReports()}setOriginalityAverageScore(e,t){let n=0,s=0;e.forEach(e=>{e.originalityProcessed&&!i.isUndefined(e.originalityScore)&&(n+=1,s+=e.originalityScore)}),n&&(this.columnOriginalityAverageScoreDict[t]=s/n)}fetchOriginality(){let e=this.attempt;e.originality.$fetch().$then(t=>{this.attempt===e&&(this.originality=t,this.generateReport())})}hasValidReports(){return this.reports&&this.reports.some(e=>!e.invalid)}generateReport(){let e=this.originality.answerOriginalities;if(this.gradedQuestionAttempts&&this.isPrivileged&&this.gradedQuestionAttempts.some((e,t)=>e.questionAttempt.question.position!==t+1)){let t=i.sortBy(this.gradedQuestionAttempts,e=>e.questionAttempt.question.position),n=[];i.map(t,"questionAttempt.visibleQuestionNumber").forEach((e,t)=>n[e-1]=t),e.forEach(e=>e.order=n[e.order-1]+1),e.sort((e,t)=>e.order-t.order)}this.reports=i.flatMap(e,e=>e.attachments.map(t=>({...t,isQuestionAnswerContent:!0,visibleQuestionNumber:e.order}))),this.originality.attemptOriginality&&this.reports.push(...this.originality.attemptOriginality.attachments),this.hasValidReports()&&this.calculateScore()}calculateScore(){let e=this.reports.filter(e=>!e.invalid),t=0;this.personalMaxScore=e[0].score,this.personalMaxScoreReportName=e[0].name,e.forEach(e=>{e.reportLink=(0,a.uI)(e.reportLink),this.personalMaxScore<e.score&&(this.personalMaxScore=e.score,this.personalMaxScoreReportName=e.name),t+=e.score}),this.personalAverageScore=Math.floor(t/e.length),i.isUndefined(this.columnOriginalityAverageScoreDict[this.columnId])||(this.classAverageScore=Math.floor(this.columnOriginalityAverageScoreDict[this.columnId]))}getOriginalityIntegrationByUniqueId(e){var t;return null===(t=l.Z.getOriginalityIntegrationByUniqueId(e))||void 0===t?void 0:t.integrationId}constructor(e,t){this.localize=e,this.$q=t,this.columnOriginalityAverageScoreDict={}}}h=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,c.tB)(o.serviceName)),u(1,(0,c.tB)("$q"))],h),s.module(p,[r.e1]).service(m,h)},83722:function(e,t,n){"use strict";n.d(t,{e1:function(){return m},HV:function(){return h}});var i=n(464027),s=n(168132),r=n(822658),o=n(834266),a=n(291146),l=n(247126),c=n(319434),d=n(537749),u=n(625506),p=n(759485);let m="ultra.components.services.partner",h="partner";class g{getPartnerCloudStatus(e,t=!1){if(u("body").hasClass("bb-within-uia-test"))return this.$q.when({enabled:!1,userCloudProvisioned:!1});if(t)return this.PartnerStatusModel.getStatus(e);let n=this.partnerStatusCache.get("status");return n||(n={promise:this.PartnerStatusModel.getStatus(e)},this.partnerStatusCache.put("status",n)),n.promise}resetPartnerCloudStatus(){this.partnerStatusCache.removeAll()}getPartners(e,t=!1){if(t)return this.PartnerModel.getPartnersByType(e);let n=this.partnersCache.get(e);return n||(n={promise:this.PartnerModel.getPartnersByType(e)},this.partnersCache.put(e,n)),n.promise}getLinkedPartners(e,t=!1){if(t)return this.PartnerCourseModel.$new(e).partnerLinkedCourses.$search().$allow(["400-599"]).$asPromise();let n=this.partnerLinkedCoursesCache.get(e);return n||(n={promise:this.PartnerCourseModel.$new(e).partnerLinkedCourses.$search().$allow(["400-599"]).$asPromise()},this.partnerLinkedCoursesCache.put(e,n)),n.promise}launchPartner(e,t){e.toolProvider.available?d.a$(e)?this._launchBrowseLink(e.browseContentLink):this._checkProvisioningAndLaunch(e,t):e.toolProvider.compatible?this.errorModalService.handleError(this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.errorProviderNotConfigured"})):this.errorModalService.handleError(this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.errorProviderIncompatible"}))}_checkProvisioningAndLaunch(e,t){this._getProvisioningCheckResult(e.providerId,t).then(t=>{let n;t.status?(n={partnerId:e.providerId,toolType:"browse",partnerTitle:d.Pr(e)},c.i3.Inline===this.$stateParams.mode?n.mode=this.$stateParams.mode:(n.partnerParentId=this.$stateParams.parentId,n.position=this.$stateParams.position)):(n={partnerId:e.providerId,toolType:"partnerProvisioning",partnerTitle:this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.partnerProvisioning"}),partnerParentId:this.$stateParams.parentId},this.ultraStateService.current.name.indexOf("peek.books-and-tools")>=0&&(n.returnState="base.courses.peek.course.outline.peek.books-and-tools")),this.ultraStateService.goPeekState("partner-tool.tool",n)})}_getProvisioningCheckResult(e,t){return i.isDefined(t)?this.$q.when({status:t}):this.PartnerCourseModel.$new(this.contextCourse.courseId).updateProvisioning(e)}_launchBrowseLink(e){let t=p.uI(e.url);switch(this.$stateParams.parentId&&(t=p.Ou(t,"content_id",this.$stateParams.parentId)),e.target){case"_self":this._windowLocationAssign(t);break;case"_blank":this.$window.open(t)}}_windowLocationAssign(e){this.$window.location.assign(e)}constructor(e,t,n,i,s,r,o,a,l,c,d,u){this.$q=e,this.$rootScope=t,this.$stateParams=n,this.$window=i,this.cacheFactory=s,this.contextCourse=r,this.errorModalService=o,this.localizeService=a,this.ultraStateService=l,this.PartnerCourseModel=c,this.PartnerModel=d,this.PartnerStatusModel=u,this.shortMaxAge=5e3,this.partnerStatusCache=s.createCache("PartnerStatusCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),this.partnersCache=s.createCache("PartnersCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),this.partnerLinkedCoursesCache=s.createCache("PartnerLinkedCoursesCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge})}}g.$inject=["$q","$rootScope","$stateParams","$window","DSCacheFactory",r.HV,o.HV,a.serviceName,l.HV,s.AA.H,s.k.H,s.aW.H],i.module(m,[r.e1,o.e1,a.moduleName,l.e1,s.e1]).service(h,g)},855819:function(e,t,n){"use strict";n.d(t,{HV:function(){return l},e1:function(){return a}});var i=n(276635),s=n(464027),r=n(529462),o=n(759485);let a="ultraUi.components.services.postMessageDispatcher",l="postMessageDispatcher";class c{callEventHandler(e,t){i.forOwn(this.eventHandlers,n=>{n.messageId===e&&n.eventHandler(t,window)})}registerEventHandler(e,t,n,s=!1){if(s){let t=[];i.forOwn(this.eventHandlers,(n,i)=>{n.messageId===e&&t.push(i)}),t.forEach(e=>{this.removeEventHandler(e)})}let o=r.d();this.eventHandlers[o]={eventHandler:t,messageId:e},this.handleEventListener(),n.$on("$destroy",()=>{this.removeEventHandler(o),this.handleEventListener()})}removeEventHandler(e){this.eventHandlers[e]&&delete this.eventHandlers[e]}getDispatcherStatus(){return{count:Object.keys(this.eventHandlers).length,bound:this.eventListenerBound}}testDispatcherEventHandler(e){this.superEventHandler(e)}handleEventListener(){Object.keys(this.eventHandlers).length>0?this.eventListenerBound||this.addEventListener():this.removeEventListener()}addEventListener(){this.$window.addEventListener("message",this.superEventHandler,!1),this.eventListenerBound=!0}removeEventListener(){this.$window.removeEventListener("message",this.superEventHandler),this.eventListenerBound=!1}constructor(e){this.$window=e,this.eventHandlers={},this.eventListenerBound=!1,this.superEventHandler=e=>{e.origin===o.mg()&&e.data&&e.data.messageId&&i.forOwn(this.eventHandlers,t=>{t.messageId===e.data.messageId&&t.eventHandler(e.data,e.source)})}}}c.$inject=["$window"],s.module(a,[]).service(l,c)},308587:function(e,t,n){"use strict";n.d(t,{HV:function(){return o},e1:function(){return r}});var i=n(464027),s=n(168132);let r="ultraUi.components.services.predict.institutionPreference",o="predictInstitutionPreference";class a{getInstitutionPreference(e){return this.predictInstitutionPreferenceModel.getInstitutionPreference(e)}constructor(e,t){this.$rootScope=e,this.predictInstitutionPreferenceModel=t}}a.$inject=["$rootScope",s.JS.H],i.module(r,[s.e1]).service(o,a)},864234:function(e,t,n){"use strict";n.d(t,{Cm:function(){return l},HV:function(){return a},e1:function(){return o}});var i=n(168132),s=n(211796);function r(e,t){return function(n,i){t(n,i,e)}}let o="ultra.service.preference",a="preferenceService",l=250;class c{getPreference(e,t,n){let i=this.$q.defer();return n||!Object.prototype.hasOwnProperty.call(this.preferences,e)?this.MyPreferenceModel.$find(e).$allow([404]).$asPromise().then(n=>{if(n.$response&&404===n.$response.status){if(void 0===t){i.reject(n);return}this._addPreferenceToCache(e,t),i.resolve(this.preferences[e])}else this.preferences[n.key]=n,i.resolve(n)},e=>{i.reject(e)}):i.resolve(this.preferences[e]),i.promise}_addPreferenceToCache(e,t,n){let i=this.MyPreferenceModel.$new(e);i.key=e,i.value=t,i.isRequired=!n,this.preferences[e]=i}setPreference(e,t,n){if(e.length>l)throw Error("Preference key is too long!");return this._addPreferenceToCache(e,t,n),this.preferences[e].$save().$asPromise()}constructor(e,t){this.$q=e,this.MyPreferenceModel=t,this.preferences={}}}c=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([r(0,(0,s.tB)("$q")),r(1,(0,s.tB)(i.JK.H))],c),angular.module(o,[i.e1]).service(a,c)},426477:function(e,t,n){"use strict";var i,s;n.d(t,{_:function(){return i},j:function(){return r}}),(s=i||(i={})).None="",s.Respondus="Respondus",s.IMS="IMS";let r="rs-lockdown"},952966:function(e,t,n){"use strict";n.d(t,{HV:function(){return E},e1:function(){return S}});var i=n(464027),s=n(168132),r=n(247126),o=n(759485),a=n(748157),l=n(291146),c=n(429794),d=n(822658),u=n(915121),p=n(988266),m=n(951248),h=n(408027),g=n(144958),f=n(470269),b=n(426477),v=n(211796);n(673600);var y=n(625506);function C(e,t){return function(n,i){t(n,i,e)}}let S="ultra.components.services.proctoring",E="proctoring",I={Respondus:"respondus"},w="components.services.proctoring.overview.",A="components.services.proctoring.delivery.",k="components.services.proctoring.settings.",x="components.services.proctoring.page.";class T{getBooksAndToolsDescription(e){return"components.services.proctoring.booksAndTools."+I[e.vendor]+".description"}getProctoringServices(){let e=this.$q.defer();return this.ProctoringServicesModel.$search({"availability.available":"Yes"}).$allow(["400-599"]).$asPromise().then(t=>{t.$response&&t.$response.status>=400?e.resolve([]):e.resolve(t)},()=>e.resolve([])),e.promise}getProctoringAssessmentSettingsText(e){return k+I[e]+".toolLink"}getProctoringAssessmentSettingsRequirementsText(e){return e.getProctoringServiceHandle()&&e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?k+I[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":k+I[e.getProctoringServiceVendor()]+".secureBrowserRequired":null}getProctoringOverviewBrowserText(e){return e.isSecureBrowserRequiredToTake()?w+I[e.getProctoringServiceVendor()]+".browser":null}getProctoringOverviewRequirementsText(e){return e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?w+I[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":w+I[e.getProctoringServiceVendor()]+".secureBrowserRequired":null}getProctoringOverviewDownloadText(e){return e.getProctoringDownloadUrl()?w+I[e.getProctoringServiceVendor()]+".downloadBrowser":null}openProctoringLTITool(e,t){let n="/webapps/assessment/controller/proctoring/launchProctoringSettings?proctoring_svc_id="+e.id+"&course_id="+this.contextCourse.courseId;t&&(n+="&content_id="+t.id);let i={toolHref:o.uI(n)};t&&t.title&&t.title.length>0&&(i.toolSubtitle=t.title),this.ultraState.goPeekState("proctoring-lti-tool",i)}getProctoringReviewButtonText(e){return A+"review."+I[e]+".reviewResults"}getProctoringReviewDownloadText(e){return A+"review."+I[e]+".download"}getProctoringPageRequirementsText(e){return x+I[e]+".requirements"}getProctoringPageDownloadText(e){return x+I[e]+".download"}getProctoringPageBrowserText(e){return x+I[e]+".browser"}getSecureBbEditorOptions(e){return this.ultraState.current.name===f.Zo.BASE_PROCTORING_ATTEMPT&&(e.attachment=!1,e.image=!1,e.youtubeVideo=!1,e.video=!1,e.contentMarket=!1),e}handleProctoredAssessmentClose(e,t){if("Respondus"===e.getProctoringServiceVendor())o.fL(o.uI("/ultra/proctoring/close?rldbsm=1&rldbxb=1"));else if(t){let t={handle:e.getProctoringServiceHandle(),linkType:m.GQk.LtiPlacement},n=(0,g.Mo)(t);n=o.Ou(n,"custom_proctoring_end_assessment_return","true"),n=o.Ou(n,"course_id",e.courseId),n=o.Ou(n,"content_id",e.id),n=o.Ou(n,"from_ultra","true"),this.ultraState.leavePeekState().then(()=>{this.ltiService.launch(n)})}else this.ultraState.goPeekState(f.eJ.ASSESSMENT_OVERVIEW,{contentId:e.id})}getProctoringServiceByHandle(e){return this.$q.resolve(p.Z.loadProctoringService(e))}fetchProctoringServices(){return this.$q.resolve(p.Z.loadAvailableProctoringServices())}fetchProctoringServiceIntegrations(){return this.$q.resolve(p.Z.loadAvailableProctoringServicesWithIntegration())}getCurrentProctoringProviderType(e){return e?e===b.j?b._.Respondus:b._.IMS:b._.None}isRespondusProctoringServiceProvider(e){return this.getCurrentProctoringProviderType(e.handle)===b._.Respondus}isIMSProctoringServiceProvider(e){return this.getCurrentProctoringProviderType(e.handle)===b._.IMS}isProctoringServiceUnavailable(e,t){return this.isProctoringPlacementUnavailable(e,t)||this.isProctoringUEFUnavailable(e,t)}isProctoringPlacementUnavailable(e,t){return!!e&&(null==t||t.availability.available===h.y67.No)}isProctoringUEFUnavailable(e,t){if(e){let e=!this.isRespondusProctoringServiceProvider(t);return e&&!this.getProctoringServiceIntegrationId(t)}return!1}getProctoringServiceIntegrationId(e){var t;if(e)return null===(t=p.Z.getProctoringIntegration(e.handle))||void 0===t?void 0:t.integrationId}promptIntegrationToSave(e,t,n,i){return this.$q.resolve(p.Z.promptIntegrationToSaveSettings(e,t,n,i))}openRespondusProctoringLaunchLink(e){let t="respondus-iframe",n="data:text/plain,";if(y(`#${t}`).remove(),e.startsWith(n)){let i=`<iframe src="data://text/plain,${e.substring(n.length)}" id="${t}" style="display:none"></iframe>`;this.createRespondusIFrameAndSetLocation(i)}else this.setRespondusWindowLocation(e)}createRespondusIFrameAndSetLocation(e){document.body.appendChild(y(e)[0])}setRespondusWindowLocation(e){this.$window.location.assign(e)}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p){this.$q=e,this.$rootScope=t,this.$sce=n,this.$window=i,this.CourseModel=s,this.CourseContentModel=r,this.ProctoringServicesModel=o,this.modal=a,this.contentService=l,this.contextCourse=c,this.localize=d,this.ultraState=u,this.ltiService=p}}T=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([C(0,(0,v.tB)("$q")),C(1,(0,v.tB)("$rootScope")),C(2,(0,v.tB)("$sce")),C(3,(0,v.tB)("$window")),C(4,(0,v.tB)(s.N7.H)),C(5,(0,v.tB)(s.courseContent.HV)),C(6,(0,v.tB)(s.sO.H)),C(7,(0,v.tB)(a.HV)),C(8,(0,v.tB)(c.HV)),C(9,(0,v.tB)(d.HV)),C(10,(0,v.tB)(l.serviceName)),C(11,(0,v.tB)(r.HV)),C(12,(0,v.tB)(u.HV))],T),i.module(S,["ngSanitize",c.e1,l.moduleName,a.e1,r.e1,d.e1,u.e1]).service(E,T)},450100:function(e,t,n){"use strict";n.d(t,{HV:function(){return r},e1:function(){return s}});var i=n(464027);let s="ultra.service.promiseQueue",r="promiseQueue";class o{enqueue(e){this.queue.length<this.MAX_QUEUE_LENGTH?(this.queue.push(e),this.processQueue()):console.error("Maximum queue length reached. Item was not enqueued.")}enqueueArray(e){if(this.queue.length>0)throw Error("Queue is not currently empty. Cannot queue new array.");if(e.length>this.MAX_QUEUE_LENGTH)throw Error("Too many items to queue. "+e.length+" exceeds maximum of "+this.MAX_QUEUE_LENGTH);e.forEach(e=>{this.queue.push(e)}),this.processQueue()}processQueue(e){if(this.processing)return;let t=this.queue.shift();if(t){this.processing=!0;let n=e;try{t(e).then(e=>{n=e}).finally(()=>{this.processing=!1,this.processQueue(n)})}catch(e){throw this.processing=!1,e}}}_processQueue(){return this.processQueue()}constructor(){this.queue=[],this.processing=!1,this.MAX_QUEUE_LENGTH=2e3}}i.module(s,[]).service(r,class{getQueue(e){let t=this.queues[e];return t||(t=this.queues[e]=new o),t}constructor(){this.queues=Object.create(null)}})},300105:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c},i$:function(){return r}});var i,s,r,o=n(464027),a=n(211796),l=n(396184);let c="ultra.components.services.route.routeListener",d="routeListener";class u{addRouteListener(){this.$rootScope.$on(l.N.$stateChangeSuccess,(e,t,n)=>{let i=t.name;p.emitRouteEvent(r.Changed,i,n)}),this.$rootScope.$on(l.N.$stateChangeStart,(e,t,n)=>{let i=t.name;p.emitRouteEvent(r.Changing,i,n)})}constructor(e){this.$rootScope=e}}u=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([(i=(0,a.tB)("$rootScope"),function(e,t){i(e,t,0)})],u),o.module(c,[]).service(d,u),(s=r||(r={}))[s.Changed=0]="Changed",s[s.Changing=1]="Changing";let p=new class{subscribe(e,t=r.Changed){return this.subscribers[t].push(e),()=>{this.subscribers[t]=this.subscribers[t].filter(t=>t!==e)}}emitRouteEvent(e,t,n){this.subscribers[e].forEach(e=>e(t,n))}getCurrentRoute(){return this.currentRoute}constructor(){this.subscribers={[r.Changed]:[],[r.Changing]:[]},this.subscribe((e,t)=>{this.currentRoute={currentRouteName:e,currentParams:t}})}};t.ZP=p},387679:function(e,t,n){"use strict";n.d(t,{S8:function(){return G},zf:function(){return P},iX:function(){return T},fY:function(){return D},MS:function(){return x},e1:function(){return A},HV:function(){return k}});var i=n(276635),s=n(464027),r=n(291146),o=n(501),a=n(822658),l=n(763674),c=n(372457),d=n(990126),u=n(495175),p=n(168132),m=n(247126),h=n(350383),g=n(790184),f=n(866688),b=n(539210),v=n(211796),y=n(529462),C=n(408027),S=n(512666),E=n(852512);class I{async persistRubricEvaluation(e){var t,n;let i=await this.rubricService.persistRubricEvaluation(e),s=(null===(t=i.attemptInfo)||void 0===t?void 0:null===(n=t.$response)||void 0===n?void 0:n.status)===200;return{success:s}}getRubricEvaluationPayload(){return this.rubricService.getBaseRubricEvaluationPayload()}async reset(e,t){await this.rubricService.loadRubricEvaluationData({columnId:e,...t})}constructor(e){this.rubricService=e,this.key=E.fz.Rubric}}function w(e,t){return function(n,i){t(n,i,e)}}let A="ultra.services.rubric",k="rubric",x="rubric-eval-save",T="remove-peek-override",P="remove-inline-override",D="rubric-grade-update",G=255,R=[{max:100,min:85},{max:84,min:75},{max:74,min:60},{max:60,min:0}];class B{resolveStateParams(){return{...this.ultraState.params,...this.loadParams}}loadRubricEvaluationData(e={}){this.loadParams=e,this.updateIsStudentView();let t=this.getParamsFromUrl();if(!t)return this.$q.resolve(void 0);let n=this.currentCourse.course.contents.$find(t.contentId,{expand:"assignedGroups"}).$asPromise(),i=this.currentCourse.course.gradebook.columns.$find(t.columnId,{expand:"associatedRubrics"}).$asPromise();return this.$q.all([n,i]).then(([e,n])=>(this.isGroupContent=!!t.groupIdParam,this.content=e,this.isExternalSubmission=f.e.isExternalSubmissionsAssessment(e),this.gradingColumn=n,this.currentUserId=this.isStudentView?this.contextUser.userId:t.userId,this.rubricAssociation=this.gradingColumn.getRubricAssociation(),this.gradebookSettings=this.grade.loadDefaultGradebookSettings(),this.course=this.currentCourse.course,this.$q.all([this.loadRowException(),this.gradingColumn.hasRubricAssociation()?this.loadRubricData():[]])))}loadRowException(){if(!this.gradingColumn.isDiscussion()&&!this.gradingColumn.isJournal()&&!this.isStudentView){let e,t;return this.isGroupContent?(t=this.resolveStateParams().groupId,e=C.Crd.Group):(t=this.resolveStateParams().userId,e=C.Crd.User),this.$q.when(f.e.getSubmissionRowException(this.course,this.content,e,t)).then(e=>{this.exceptionAttempts=!!e.attempts})}return this.$q.resolve()}loadRubricViewData(){this.updateIsStudentView();let e=this.getParamsFromUrl();if(!e)return this.$q.resolve(void 0);let t=this.currentCourse.course.contents.$find(e.contentId).$asPromise(),n=this.currentCourse.course.gradebook.columns.$find(e.columnId,{expand:"associatedRubrics"}).$asPromise();return this.$q.all([t,n]).then(([e,t])=>{this.content=e,this.gradingColumn=t})}getParamsFromUrl(){var e;let t=this.resolveStateParams(),{userId:n,columnId:i,assignmentId:s,groupId:r,disGroupId:o}=t,a=!r&&(n||this.isStudentView),l=null!==(e=t.contentId)&&void 0!==e?e:s;return a&&i&&l?{userId:n,columnId:i,contentId:l}:!a&&(r||o)&&l?{groupIdParam:r||o,contentId:l,columnId:i}:null}shouldRenderRubricEvaluation(){if(!this.isStudentView)return!0;if(this.gradingColumn&&this.gradingColumn.hasRubricAssociation()){let e=this.gradingColumn.getRubricAssociation().isWithEvaluations;return e&&(this.attempt&&this.attempt.isCompleted()||this.gradingColumn.isDiscussion()||this.gradingColumn.isJournal())}return!1}loadRubricData(){if(this.currentUserId&&(!this.isGroupContent||this.isStudentView)){if(this.group=null,this.gradingColumn.anonymousGrading){if(!this.shouldRenderRubricEvaluation())return;return this.grade.loadAnonymousStudentGrade(this.gradingColumn,this.currentUserId).then(e=>this.loadGradeData([e]))}return this.gradingColumn.grades.$refresh({userId:this.currentUserId}).$asPromise().then(e=>this.loadGradeData(e))}if(this.isGroupContent)return this.course.contents.$find(this.gradingColumn.contentId,{expand:"assignedGroups"}).$asPromise().then(e=>this.course.memberships.$fetch({expand:"user",roleBucket:"taking"}).$asPromise().then(t=>this.grade.loadGroupRows(this.course,e.assignedGroups,t,this.gradingColumn,e.isSafeAssignEnabled()).then(e=>{if(this.groupSubmission=i.find(e,e=>"grade"in e&&e.attemptCount>0&&(e.group.id===this.resolveStateParams().groupId||e.group.id===this.resolveStateParams().disGroupId)),this.groupSubmission){var t,n;this.group=this.groupSubmission.group,this.gradeDetail=this.groupSubmission.grade,this.isGradingInProgress=C.WTZ.GradingInProgress===this.gradeDetail.manualStatus;let e=null===(t=this.gradeDetail.groupAttempts)||void 0===t?void 0:t.getAttemptById(null===(n=this.resolveStateParams())||void 0===n?void 0:n.attemptId);if(e)return this.loadAttemptData(e)}})))}loadGradeData(e){if(e.length<=0&&(null!=this.resolveStateParams().gradeId||e[0].id!==this.resolveStateParams().gradeId))return;this.gradeDetail=e[0],this.isGradingInProgress=C.WTZ.GradingInProgress===this.gradeDetail.manualStatus,this.gradeDetail.column=this.gradingColumn;let t=this.resolveStateParams().attemptId&&!this.isGroupContent?{attemptId:this.resolveStateParams().attemptId}:{expand:"attempts"};return this.grade.loadAttempt(this.gradeDetail,this.course,t,this.content).then(e=>{var t,n;let i=(null===(t=e.ui)||void 0===t?void 0:t.groupAttempt)||(null===(n=e.ui)||void 0===n?void 0:n.attempt);if(i)return this.loadAttemptData(i)})}loadAttemptData(e){this.attempt=e,this.attempt.rubricEvaluation&&this.attempt.rubricEvaluation.rubricAssociationId===this.rubricAssociation.id||(this.attempt.rubricEvaluation=this.createRubricEvaluation(this.rubricAssociation.id,this.gradeDetail.userId,this.gradingColumn.possible)),this.rubricEvaluation={...this.attempt.rubricEvaluation,maxScore:this.gradeDetail.pointsPossible}}getBaseRubricEvaluationPayload(){return{maxScore:this.rubricEvaluation.maxScore,isEditable:this.isEditable(),isStudent:this.isStudentView,isOverrideAvailable:this.isOverrideAvailable(),grade:this.getGrade(),shouldUpdateCriterionFeedback:!1,isMultipleAttempts:this.isMultipleAttempts(),isGroupGradeMultiple:this.gradeDetail.ui.isGroupGradeMultiple,isGradingInProgress:this.isGradingInProgress,isExternalSubmission:this.isExternalSubmission,isGradeOverridden:this.isGradeOverridden(),isAnonymousGrading:this.gradingColumn.anonymousGrading,criteria:this.getCriteriaPayload(this.gradingColumn,this.rubricEvaluation),getGradingPillColor:this.getPercentileColor,contentIconName:this.getIconName(),smallTitle:this.content.title,shouldUndoOverride:!1,shouldEmptyRubric:!1,okConfirmationClicked:!1,isSavingRubric:!1,decimalsLength:u.UF.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,rubricType:this.gradingColumn.getAssociatedRubric().rubricType}}getBaseRubricViewPayload(){return{maxScore:this.gradingColumn.possible,criteria:this.getCriteriaPayload(this.gradingColumn),contentIconName:this.getIconName(),smallTitle:this.content.title,decimalsLength:u.UF.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,rubricType:this.gradingColumn.getAssociatedRubric().rubricType}}getIconName(){let e=this.contentIcon.getColumnIconClassAsString(this.gradingColumn);return this.contentIcon.getIconName(e)}isEditable(){return(!(this.gradingColumn.delegatedGrading&&this.attempt.isReconciled())||!!this.isDelegatedAndEntitledReconciler(this.gradingColumn))&&!this.isStudentView&&this.entitlement.isEntitled(b.SE.AllGrading,this.course.id)&&!this.course.isComplete()}isOverrideAvailable(){return(!this.gradingColumn.delegatedGrading||!!this.isDelegatedAndEntitledReconciler(this.gradingColumn))&&this.isEditable()&&this.entitlement.isEntitled(b.SE.OverrideGrade,this.course.id)}getGrade(){var e,t,n,i,s,r;if(this.isMultipleAttempts()||this.gradingColumn.anonymousGrading&&!this.isGradeOverridden())return(null===(s=this.attempt.displayGrade.score)||void 0===s?void 0:s.toString())?this.rubricEvaluation.totalScore.toString():"";if(this.isGradeOverridden()&&!(null===(e=this.gradeDetail.ui)||void 0===e?void 0:e.groupAttempt)&&!this.isGradingInProgress)return this.gradingColumn.anonymousGrading?this.gradeDetail.ui.attempt.grade.toString():this.gradeDetail.manualScore.toString();if(this.isGradeOverridden()&&(null===(t=this.gradeDetail.ui)||void 0===t?void 0:t.groupAttempt)&&!this.isGradingInProgress){let e=[...new Set(null===(r=this.gradeDetail.groupMembersGrades)||void 0===r?void 0:r.map(e=>e.manualScore))];return 1===e.length?e[0].toString():this.gradeDetail.displayGrade.score.toString()}return(null===(n=this.rubricEvaluation)||void 0===n?void 0:null===(i=n.cells)||void 0===i?void 0:i.length)>0&&this.rubricEvaluation.totalScore?this.rubricEvaluation.totalScore.toString():""}isMultipleAttempts(){return(this.gradingColumn.isMultipleAttempts()||this.exceptionAttempts)&&!this.gradingColumn.isDiscussion()&&!this.gradingColumn.isJournal()}isGradeOverridden(){return this.grade.isRubricGradeOverridden(this.gradeDetail,this.attempt,this.gradingColumn)}createRubricCopy(e){let t=this.CourseModel.$new(e.courseId),n={courseId:e.courseId,title:this.incrementTitle(e.title,t.locale),columnHeaders:this.cloneHeaders(e.columnHeaders),rows:this.cloneRows(e.rows),permissions:i.clone(e.permissions),rubricType:e.rubricType};return t.rubrics.$build(n)}cloneRows(e){return i.map(e,e=>({cells:this.cloneCells(e.cells),header:e.header,percentage:e.percentage,position:e.position,rowPoints:e.rowPoints}))}cloneCells(e){return i.map(e,e=>({position:e.position,description:e.description,percentage:e.percentage,percentageMin:e.percentageMin,percentageMax:e.percentageMax,startPointRange:e.startPointRange,endPointRange:e.endPointRange,numericPoints:e.numericPoints}))}cloneHeaders(e){return i.map(e,e=>({position:e.position,header:e.header}))}incrementTitle(e,t){return this.bbLocalize.translateSync({locale:t,key:"components.services.rubric.newCopyTitle",params:{rubricTitle:e,date:this.bbLocalize.formatDateSync(new Date,r.ILocaleDateFormat.Short)},noWrap:!0,noEscape:!0}).substring(0,G)}processColumnHeader(e,t){for(let n=0;n<B.templateColumnCount;n++)e.push({position:n,header:this.bbLocalize.translateSync({locale:t,key:"components.services.rubric.template.column"+(n+1)})})}processRow(e,t,n){for(let i=0;i<B.templateRowCount;i++){let s=[];this.processCell(n,s),e.push({position:i,header:this.bbLocalize.translateSync({locale:null!=t?t:this.bbLocalize.getAppLocale(),key:"components.services.rubric.template.criteria",params:{idx:i+1},noWrap:!0}),percentage:Math.floor(100/B.templateRowCount),cells:s})}}updateRubricRows(e,t){let n=this.cloneRows(e);for(let e=0;e<n.length;e++)switch(t){case C.Tgr.PERCENTAGE:n[e].percentage=this.generateCriterionPercentage(n.length,e),n[e].cells=this.processPercentageCells(n[e].cells);break;case C.Tgr.PERCENTAGE_RANGE:n[e].percentage=this.generateCriterionPercentage(n.length,e),n[e].cells=this.processPercentageRangeCells(n[e].cells);break;case C.Tgr.POINTS:n[e].rowPoints=0,n[e].cells=this.processPointsCells(n[e].cells);break;case C.Tgr.POINTS_RANGE:n[e].rowPoints=0,n[e].cells=this.processPointsRangeCells(n[e].cells);break;default:this.unrecognizedRubric()}return n}processPercentage(e,t){return Math.floor(100-100/e*t)}generateCriterionPercentage(e,t){return t+1===e?Math.floor(100/e)+100%e:Math.floor(100-100/e*(e-1))}processPercentageRangeCells(e){let t=this.cloneCells(e),n=e.length;for(let e=0;e<n;e++)t[e]={position:e,description:t[e].description,percentageMin:this.processPercentage(n,e+1),percentageMax:this.processPercentage(n,e)};return t}processPercentageCells(e){let t=this.cloneCells(e),n=e.length;for(let e=0;e<n;e++)t[e]={position:e,description:t[e].description,percentage:this.processPercentage(n,e)};return t}processPointsCells(e){let t=this.cloneCells(e),n=e.length;for(let e=0;e<n;e++)t[e]={position:e,description:t[e].description,numericPoints:0};return t}processPointsRangeCells(e){let t=this.cloneCells(e),n=e.length;for(let e=0;e<n;e++)t[e]={position:e,description:t[e].description,startPointRange:0,endPointRange:0};return t}processCell(e,t){switch(e){case C.Tgr.PERCENTAGE:for(let e=0;e<B.templateColumnCount;e++)t.push({position:e,description:"",percentage:this.processPercentage(B.templateColumnCount,e)});break;case C.Tgr.PERCENTAGE_RANGE:R.forEach((e,n)=>{t.push({position:n,description:"",percentageMin:e.min,percentageMax:e.max})});break;default:this.unrecognizedRubric()}}generateDefaultRubric(e){if(null!=this.rubricTemplate&&this.rubricTemplate.courseId===e.id){let t=i.cloneDeep(this.rubricTemplate);return e.rubrics.$build(t).$asPromise()}return this.bbLocalize.loadBundle("components/services/rubric").then(()=>{this.rubricTemplate={courseId:e.id,title:"",rows:[],columnHeaders:[],permissions:{edit:!0,delete:!0},rubricType:C.Tgr.PERCENTAGE},this.processColumnHeader(this.rubricTemplate.columnHeaders,e.locale),this.processRow(this.rubricTemplate.rows,e.locale,this.rubricTemplate.rubricType);let t=i.cloneDeep(this.rubricTemplate);return e.rubrics.$build(t).$asPromise()})}getCriteriaPayload(e,t){let n=e.getAssociatedRubric(),s=this.isPointsOrPointsRangeRubric(n)?n.rows.filter(e=>i.isFinite(e.rowPoints)).reduce((e,t)=>e+t.rowPoints,0):100;return n.rows.map(i=>{var r;let o;let a=0;a=this.isPointsOrPointsRangeRubric(n)?0===s?0:e.possible*i.rowPoints/s:e.possible*i.percentage/s,(null==t?void 0:t.cells)&&(o=t.cells.find(e=>e.rubricRowId===i.id));let l=this.getAchievementsPayload(i.cells,n,a,s,o,e),c=this.isPointsOrPointsRangeRubric(n)?a:i.percentage;return{id:i.id,title:i.header,value:c,feedback:null==o?void 0:null===(r=o.feedback)||void 0===r?void 0:r.rawText,achievements:l}})}getAchievementsPayload(e,t,n,i,s,r){return e.map((e,o)=>{let a=(null==s?void 0:s.rubricCellId)===e.id,l={id:e.id,title:t.columnHeaders[o].header,description:e.description,isSelected:a};switch(t.rubricType){case C.Tgr.PERCENTAGE:l.value=e.percentage,l.score=n*e.percentage/i;break;case C.Tgr.POINTS:l.value=e.numericPoints,l.score=0===i?0:r.possible*e.numericPoints/i;break;case C.Tgr.PERCENTAGE_RANGE:l.rangeScore={minValue:e.percentageMin,maxValue:e.percentageMax},l.rangeScoreValue=a?s.selectedPercent:null;break;case C.Tgr.POINTS_RANGE:l.rangeScore={minValue:0===i?0:r.possible*e.startPointRange/i,maxValue:0===i?0:r.possible*e.endPointRange/i},l.rangeScoreValue=a?n*s.selectedPercent:null;break;default:this.unrecognizedRubric()}return l})}isPointsOrPointsRangeRubric(e){return e.rubricType===C.Tgr.POINTS||e.rubricType===C.Tgr.POINTS_RANGE}isPercentageOrPercentageRangeRubric(e){return e.rubricType===C.Tgr.PERCENTAGE||e.rubricType===C.Tgr.PERCENTAGE_RANGE}changeRubricType(e,t){e.rows=this.updateRubricRows(e.rows,e.rubricType)}insertNewCriteriaAt(e,t){if(e.rows.length>=15)throw Error("Cannot add more than 15 criteria rows");let n=this.generateNewRow(e.rubricType,e.rows[0].cells);return e.rows.splice(t,0,n),e.rows.forEach((e,t)=>{e.position=t}),e}deleteCriteriaAt(e,t){if(1===e.rows.length)throw Error("Cannot delete last criteria row");return e.rows.splice(t,1),e.rows.forEach((e,t)=>{e.position=t}),e}balanceCriteriaPercentages(e){e.rows.forEach(t=>{t.percentage=Math.floor(100/e.rows.length)}),i.last(e.rows).percentage+=100-e.rows.reduce((e,t)=>e+t.percentage,0)}insertNewColumnAt(e,t){if(e.columnHeaders.length>=15)throw Error("Cannot add more than 15 columns");return e.columnHeaders.splice(t,0,{position:t,header:""}),e.rows.forEach(n=>{switch(e.rubricType){case C.Tgr.PERCENTAGE:this.insertNewPercentRubricColumn(n,t);break;case C.Tgr.PERCENTAGE_RANGE:this.insertNewPercentRangeRubricColumn(n,t);break;case C.Tgr.POINTS:this.insertNewPointsRubricColumn(n,t);break;case C.Tgr.POINTS_RANGE:this.insertNewPointsRangeRubricColumn(n,t);break;default:this.unrecognizedRubric()}}),e}deleteColumnAt(e,t){if(1===e.columnHeaders.length)throw Error("Cannot remove last column");return e.columnHeaders.splice(t,1),e.rows.forEach(n=>{if(n.cells.splice(t,1),e.rubricType!==C.Tgr.PERCENTAGE)return e;0===t&&(n.cells[0].percentage=100)}),e}createRubricEvaluation(e,t,n){return{rubricAssociationId:e,userId:t,maxScore:n,totalScore:0,cells:[]}}initiateUiState(e,t){e.ui&&(e.ui.editingCells=!1,e.ui.canEdit=t,e.ui.editingCriteria=!1,e.ui.invalidCriteriaPercentageSum=!1,e.ui.criteriaLimit=15,e.ui.columnLimit=15)}mapRubricToGrid(e){null==e.ui.columnHeaders&&(e.ui.columnHeaders=[]),e.columnHeaders.forEach((t,n)=>{e.ui.columnHeaders[n]?e.ui.columnHeaders[n].uuid||(e.ui.columnHeaders[n].uuid=(0,y.V)()):e.ui.columnHeaders[n]={uuid:(0,y.V)()}}),null==e.ui.rows&&(e.ui.rows=[]),e.rows.forEach((t,n)=>{e.ui.rows[n]?e.ui.rows[n].uuid||(e.ui.rows[n].uuid=(0,y.V)()):e.ui.rows[n]={uuid:(0,y.V)()}});let t=e.rows.map((t,n)=>({id:e.ui.rows[n].uuid,data:t})),n=e.columnHeaders.map((t,n)=>({id:e.ui.columnHeaders[n].uuid,data:t}));return{rows:t,columns:n}}insertNewPercentRubricColumn(e,t){let n=t<e.cells.length?e.cells[t].percentage:e.cells[t-1].percentage;if(e.cells.splice(t,0,{position:0,description:"",percentage:n}),e.cells.forEach((e,t)=>{e.position=t}),0===t)return;let i=e.cells[t+1]?e.cells[t+1].percentage:0,s=Math.floor((e.cells[t-1].percentage-i)/2);e.cells[t].percentage=e.cells[t-1].percentage-s}insertNewPercentRangeRubricColumn(e,t){let n=t<e.cells.length?e.cells[t].percentageMin:e.cells[t-1].percentageMin,i=t<e.cells.length?e.cells[t].percentageMax:e.cells[t-1].percentageMax;if(e.cells.splice(t,0,{position:t,description:"",percentageMin:n,percentageMax:i}),e.cells.forEach((e,t)=>{e.position=t}),0===t)return;let s=e.cells[t+1]?e.cells[t+1].percentageMin:0,r=e.cells[t+1]?e.cells[t+1].percentageMax:0;e.cells[t].percentageMin=e.cells[t-1].percentageMin-Math.floor((e.cells[t-1].percentageMin-s)/2),e.cells[t].percentageMax=e.cells[t-1].percentageMax-Math.floor((e.cells[t-1].percentageMax-r)/2)}insertNewPointsRubricColumn(e,t){let n=t<e.cells.length?e.cells[t].numericPoints:e.cells[t-1].numericPoints;if(e.cells.splice(t,0,{position:0,description:"",numericPoints:n}),e.cells.forEach((e,t)=>{e.position=t}),0===t)return;let i=e.cells[t+1]?e.cells[t+1].numericPoints:0;e.cells[t].numericPoints=Math.round((e.cells[t-1].numericPoints+i)*50)/100}insertNewPointsRangeRubricColumn(e,t){e.cells.splice(t,0,{position:t,description:"",startPointRange:0,endPointRange:0}),e.cells.forEach((e,t)=>{e.position=t})}generateNewRow(e,t){switch(e){case C.Tgr.PERCENTAGE:return this.generateNewPercentageRow(t);case C.Tgr.PERCENTAGE_RANGE:return this.generateNewPercentageRangeRow(t);case C.Tgr.POINTS:case C.Tgr.POINTS_RANGE:return this.generateNewPointsTypeRow(t);default:this.unrecognizedRubric()}}generateNewPercentageRangeRow(e){let t={header:"",percentage:0,cells:[]};return e.forEach((e,n)=>{t.cells.push({position:n,description:"",percentageMin:e.percentageMin,percentageMax:e.percentageMax})}),t}generateNewPercentageRow(e){let t={header:"",percentage:0,cells:[]};return e.forEach((e,n)=>{t.cells.push({position:n,description:"",percentage:e.percentage})}),t}generateNewPointsTypeRow(e){let t={header:"",rowPoints:0,cells:[]};return e.forEach((e,n)=>{t.cells.push({position:n,description:"",numericPoints:e.numericPoints,startPointRange:e.startPointRange,endPointRange:e.endPointRange})}),t}unrecognizedRubric(){throw Error("Invalid rubric type, please go check RubricType for more detail")}persistRubricEvaluation(e){return this.$q(t=>this.performPersistRubricEvaluation(e).then(e=>{let n={gradingColumn:this.gradingColumn,attemptInfo:e};t(n)}))}rubricFeedbackIsInvalidForSave(e){return e.some(e=>"number"!=typeof e.scoreValue&&e.hasUnsavedFeedback&&""!==e.feedback&&null!=e.feedback)}rubricHasUnsavedFeedback(e){return e.some(e=>"number"==typeof e.scoreValue&&e.hasUnsavedFeedback)}performPersistRubricEvaluation(e){let t="grade"in e&&""===e.grade;if(t)return this.attempt.score=null,this.persistCleared(e);let n="isGradeOverridden"in e;if(n&&e.isGradeOverridden&&!this.gradingColumn.anonymousGrading)return this.persistOverriden(e);let i="grade"in e&&"criteria"in e,s="criterionFeedbackWasUpdated"in e&&i,r=n&&!e.isGradeOverridden&&i;return r||i||s||this.gradingColumn.anonymousGrading?(this.attempt.score=e.grade,this.persistRubricEvaluationData(e)):this.$q.resolve(void 0)}persistCleared(e){var t;let n=this.rubricEvaluation;n.cells=this.getCells(e);let i=new g.Z(this.gradingColumn,null);return i.clearGrade=!0,i.setGradeToEmpty=!0,i.rubricEvaluation=n,this.grade.saveGrade(i,this.gradeDetail,this.attempt,{userId:this.currentUserId,group:null!==(t=this.group)&&void 0!==t?t:void 0})}persistOverriden(e){let t=!this.gradingColumn.anonymousGrading&&this.gradeDetail.displayGrade.isOverride,n=this.group?this.CourseModel.$new(this.course.id).gradebook.groupAttempts.$new(this.attempt.id):this.CourseModel.$new(this.course.id).gradebook.attempts.$new(this.attempt.id),i=(0,S.GH)(n);i.rubricEvaluation=this.rubricEvaluation;let s=new g.Z(this.gradingColumn,String(e.grade));return this.isDelegatedAndEntitledReconciler(s.column)?this.saveOverridenGrade(s):this.gradingColumn.isDiscussion&&t?i.$asPromise().then(()=>this.saveOverridenGrade(s)):i.$patch().$asPromise().then(()=>this.saveOverridenGrade(s))}isDelegatedAndEntitledReconciler(e){return e.delegatedGrading&&e.isUserReconciler(this.contextUser.userId)}persistRubricEvaluationData(e){let t=this.rubricEvaluation;t.totalScore=e.rubricGrade,t.cells=this.getCells(e),t.overrideScore=-1;let n=new g.Z(this.gradingColumn,String(this.attempt.score));return(n.rubricEvaluation=t,this.isSingleAttempt()?n.setGradeToEmpty=!0:(n.setGradeToEmpty=!1,this.isGroupContent||(n.attemptId=this.attempt.id)),null==this.attempt.score&&(n.clearGrade=!0),this.isSingleAttempt())?this.grade.saveGrade(n,this.gradeDetail,this.attempt,{userId:this.currentUserId,group:this.group}):this.grade.saveGrade(n,this.gradeDetail,this.attempt)}getCells(e){var t;let n=[];return null===(t=e.criteria)||void 0===t||t.forEach(t=>{t.achievements.forEach(i=>{if(i.isSelected){var s;let r=null!==(s=i.rangeScoreValue)&&void 0!==s?s:i.value;e.rubricType===C.Tgr.POINTS_RANGE&&(r=0===t.value?0:i.rangeScoreValue/t.value),n.push({rubricCellId:i.id,rubricRowId:t.id,selectedPercent:r,feedback:{rawText:t.feedback}})}})}),n}updateIsStudentView(){var e;this.isStudentView=null!==(e=this.isStudentView)&&void 0!==e?e:this.membership.isStudentMembership()}isSingleAttempt(){return this.gradingColumn&&(this.gradingColumn.isSingleAttempt()&&!this.exceptionAttempts||this.gradingColumn.isDiscussion()||this.gradingColumn.isJournal())}saveOverridenGrade(e){return this.gradingColumn.anonymousGrading?this.$q.resolve(void 0):this.grade.saveGrade(e,this.gradeDetail,void 0,{userId:this.currentUserId,group:this.group}).then(()=>{if((this.gradingColumn.isAssignment()||this.gradingColumn.isDiscussion())&&this.gradeDetail.isPosted&&this.gradeDetail.isPosted()&&this.attempt.readyToPost)return this.group?this.gradingColumn.postReadyGroupAttempts({groupAssociationId:this.attempt.groupAssociationId}):this.gradeDetail.postReadyGrades()})}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p){this.$rootScope=e,this.$q=t,this.context=n,this.bbLocalize=i,this.CourseModel=s,this.RubricModel=r,this.grade=o,this.currentCourse=a,this.membership=l,this.ultraState=c,this.contextUser=d,this.entitlement=u,this.contentIcon=p,this.getPercentileColor=e=>this.grade.getPercentileColor(e),this.bbLocalize.loadBundle("components/services/rubric"),this.updateIsStudentView(),(0,E.gM)(new I(this))}}B.templateRowCount=4,B.templateColumnCount=4,B=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([w(0,(0,v.tB)("$rootScope")),w(1,(0,v.tB)("$q")),w(2,(0,v.tB)(o.HV)),w(3,(0,v.tB)(r.serviceName)),w(4,(0,v.tB)(p.N7.H)),w(5,(0,v.tB)(p.vn.H)),w(6,(0,v.tB)(u.HV)),w(7,(0,v.tB)(a.HV)),w(8,(0,v.tB)(l.HV)),w(9,(0,v.tB)(m.HV)),w(10,(0,v.tB)(c.HV)),w(11,(0,v.tB)(h.HV)),w(12,(0,v.tB)(d.HV))],B),s.module(A,[o.e1,r.moduleName,p.e1,u.e1,d.e1]).service(k,B)},873518:function(e,t,n){"use strict";n.d(t,{HV:function(){return y},e1:function(){return v},tU:function(){return s}});var i,s,r=n(464027),o=n(470269),a=n(168132),l=n(951248),c=n(247126),d=n(104485),u=n(372457),p=n(211796),m=n(866688),h=n(207069),g=n(408027);function f(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function b(e,t){return function(n,i){t(n,i,e)}}let v="ultra.components.services.scoreProviderHelper",y="scoreProviderHelper";function C(e){return!e.getScore()||e.isOverrideGrade()}function S(e){var t,n;if(!(null==e?void 0:e.attempts)&&!(null==e?void 0:e.groupAttempts))return!1;let i=null==e?void 0:null===(t=e.attempts)||void 0===t?void 0:t.some(e=>null==e?void 0:e.isSubmitted()),s=null==e?void 0:null===(n=e.groupAttempts)||void 0===n?void 0:n.some(e=>(null==e?void 0:e.id)&&(null==e?void 0:e.isSubmitted()));return i||s}(i=s||(s={}))[i.GenerateStateParams=0]="GenerateStateParams",i[i.GenerateStateRef=1]="GenerateStateRef",i[i.GoToState=2]="GoToState";class E{getScoreProviderHandle(){return null}openStateRef(e,t){return null}studentViewStateRef(e,t){return null}editStateRef(e,t){return null}gradingStateRef(e,t,n,i){return null}gradingWithRubricStateRef(e,t){return null}gradingWithFeedbackStateRef(e,t){return null}getSubmissionsListStateRef(e,t){return null}getAttemptReceiptSearchStateRef(e,t){return null}supportsOverall(){return!1}supportsEdit(){return!0}supportsViewItem(){return!1}supportsExternalEdit(){return!1}takeActionOnStateRef(e,t,n){switch(n){case s.GoToState:this.ultraState.goPeekState(e,t);break;case s.GenerateStateParams:return r.toJson({state:e,args:t});case s.GenerateStateRef:default:return this.generateStateRef(e,t)}}generateStateRef(e,t){return t?e+"("+r.toJson(t)+")":e}isFlexGradingAvailable(e){var t;return null!==(t=!(null==e?void 0:e.groupId)&&this.featureFlags.isFeatureEnabledStrict(l.x40.FlexibleAttemptGradingM1))&&void 0!==t&&t}constructor(e,t){this.ultraState=e,this.featureFlags=t}}E=f([b(0,(0,p.tB)(c.HV)),b(1,(0,p.tB)(h.HV))],E);class I extends E{getScoreProviderHandle(){return[l.u$1.Test,l.u$1.PeerSubmissionsTest,l.u$1.PeerEvaluationTest]}openStateRef(e,t){return this.takeActionOnStateRef("assessment.open",e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(e.state||"assessment.overview",e,t)}editStateRef(e,t){return e.assessmentType="test",e.gradeitemView="details",this.takeActionOnStateRef(o.RK.GRADEBOOK_ITEM_ASSESSMENT,e,t)}gradingStateRef(e,t,n,i){var s,r,a;let l=t,c=null==n?void 0:n.hasAttempts(),d=this.isFlexGradingAvailable(t),u=d?o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:o.RK.SUBMISSION_GRADING,p=S(n),h=m.e.isExternalSubmissionsAssessment(null==e?void 0:null===(s=e.ui)||void 0===s?void 0:s.content),g=null==e?void 0:e.isUserReconciler(this.currentUser.userId),f=(null==n?void 0:null===(r=n.attempts)||void 0===r?void 0:r.length)>e.multipleAttempts,b=!d&&(e.isMultipleAttempts()||f)&&p;if(b&&!(null==t?void 0:t.attemptId))return this.takeActionOnStateRef(o.BQ.COURSE_GRADES_MULTIPLE_ATTEMPT,t,i);b&&(l=null);let v=this.gradebookPermissionService.canExecute()&&!g;return h?p||!v?((null==t?void 0:t.groupId)&&(u=o.RK.GROUP_SUBMISSION_GRADING),this.takeActionOnStateRef(u,l,i)):this.takeActionOnStateRef(o.RK.CREATE_OFFLINE_ATTEMPT,t,i):(!g||!c||(null==e?void 0:e.peerGrading)||(null===(a=this.ultraState.current.peekViewName)||void 0===a?void 0:a.startsWith(o.RK.RECONCILE_GRADE))?(null==t?void 0:t.groupId)&&p?u=o.RK.GROUP_SUBMISSION_GRADING:n&&!p&&(c||!c&&(!(null==n?void 0:n.isSubmitted())||C(n)))&&(u=o.RK.GRADE_AND_FEEDBACK):u=o.RK.RECONCILE_GRADE,this.takeActionOnStateRef(u,l,i))}gradingWithFeedbackStateRef(e,t){let n=e&&e.groupId,i=n?o.RK.GROUP_SUBMISSION_GRADING:o.RK.SUBMISSION_GRADING;return this.takeActionOnStateRef(this.isFlexGradingAvailable(e)?o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:`${i}.assessment-submission-feedback-tab`,e,t)}gradingWithRubricStateRef(e,t){let n=(null==e?void 0:e.groupId)?o.RK.GROUP_SUBMISSION_GRADING:o.RK.SUBMISSION_GRADING;return this.takeActionOnStateRef(this.isFlexGradingAvailable(e)?o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:`${n}.inline-rubric`,null,t)}getSubmissionsListStateRef(e,t){return e.assessmentType="test",e.gradeitemView="students",(null==e?void 0:e.needsGrading)&&(delete e.needsGrading,e.gradingStatus=g.qr.NeedsGrading),this.takeActionOnStateRef(o.RK.GRADEBOOK_ITEM_ASSESSMENT,e,t)}getAttemptReceiptSearchStateRef(e,t){let n=this.isFlexGradingAvailable(e)?o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:o.RK.SUBMISSION_GRADING;return(null==e?void 0:e.groupId)&&(n=o.RK.GROUP_SUBMISSION_GRADING),this.takeActionOnStateRef(n,e,t)}supportsOverall(){return!0}constructor(e,t,n,i){super(e,t),this.gradebookPermissionService=n,this.currentUser=i,t.loadFeatureFlagValue(l.x40.FlexibleAttemptGradingM1)}}I.$inject=[],I=f([b(0,(0,p.tB)(c.HV)),b(1,(0,p.tB)(h.HV)),b(2,(0,p.tB)(d.HV)),b(3,(0,p.tB)(u.HV))],I);class w{buildDelegateMap(e,t){if(this.delegates[e.toString()])throw Error("There is already a registered delegate for "+e.toString());this.delegates[e.toString()]=t,e.contentHandlers.forEach(n=>{if(this.contentHandlerToDelegateMap[n]){if(this.contentHandlerToDelegateMap[n]!==t)throw Error("There is already a registered delegate for "+e.toString())}else this.contentHandlerToDelegateMap[n]=t})}getDelegate(e){return e&&this.delegates[e.toString()]||A.NULL_DELEGATE}getDelegateByContentHandler(e){return e&&this.contentHandlerToDelegateMap[e.toString()]||A.NULL_DELEGATE}isSupported(e){return e&&null!=this.getDelegate(e).getScoreProviderHandle()}getSupportedHandles(){return Object.keys(this.delegates).map(e=>l.u$1.parse(e))}openStateRef(e,t,n){return this.getDelegateByContentHandler(e).openStateRef(t,n)}getSubmissionListStateRef(e,t,n){return this.getDelegate(e).getSubmissionsListStateRef(t,n)}getSubmissionListStateRefByContentHandler(e,t,n){return this.getDelegateByContentHandler(e).getSubmissionsListStateRef(t,n)}getAttemptReceiptSearchStateRef(e,t,n){return this.getDelegate(null==e?void 0:e.scoreProviderHandle).getAttemptReceiptSearchStateRef(t,n)}studentViewStateRef(e,t,n){return this.getDelegate(e).studentViewStateRef(t,n)}editStateRef(e,t,n){return this.getDelegate(e).editStateRef(t,n)}gradingStateRef(e,t,n,i){return this.getDelegate(null==e?void 0:e.scoreProviderHandle).gradingStateRef(e,n,t,i)}gradingWithRubricStateRef(e,t,n){return this.getDelegate(e).gradingWithRubricStateRef(t,n)}gradingWithFeedbackStateRef(e,t,n){return this.getDelegate(e).gradingWithFeedbackStateRef(t,n)}getNeedsGradingIconByContentHandler(e){let t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?(Array.isArray(t)&&(t=t[0]),t.needsGradingIcon):null}getNeedsReconcilingIconByContentHandler(e){let t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?(Array.isArray(t)&&(t=t[0]),t.needsReconcilingIcon):null}supportsOverall(e){return this.getDelegate(e).supportsOverall()}supportsEdit(e){return this.getDelegate(e).supportsEdit()}supportsViewItem(e){return this.getDelegate(e).supportsViewItem()}supportsExternalEdit(e){return!!e&&!!(a.courseContent.ContentHandler.PartnerCloud.isEqualTo(e.toString())||a.courseContent.ContentHandler.LtiLink.isEqualTo(e.toString()))&&this.getDelegate(e).supportsExternalEdit()}isFlexGradingAvailable(e,t){return this.getDelegate(e.scoreProviderHandle).isFlexGradingAvailable(t)}constructor(e,t){this.$rootScope=e,this.$injector=t,this.delegates=Object.create(null),this.contentHandlerToDelegateMap=Object.create(null),w.SCORE_PROVIDER_DELEGATES.forEach(e=>{let t=this.$injector.instantiate(e),n=t.getScoreProviderHandle();Array.isArray(n)?n.forEach(e=>{this.buildDelegateMap(e,t)}):this.buildDelegateMap(n,t)})}}w.$inject=["$rootScope","$injector"],w.SCORE_PROVIDER_DELEGATES=[class extends E{getScoreProviderHandle(){return l.u$1.UltraAssignment}openStateRef(e,t){return this.takeActionOnStateRef("assignment.router",{courseId:e.courseId,assignmentId:e.contentId},t)}studentViewStateRef(e,t){return this.takeActionOnStateRef("assignment.view",{courseId:e.courseId,assignmentId:e.contentId},t)}editStateRef(e,t){return e.gradeitemView="details",this.takeActionOnStateRef("gradebook-item.assignment",e,t)}gradingStateRef(e,t,n,i){t.gradeitemView="students";let s="assignment-grading",r=null==n?void 0:n.hasAttempts(),a=S(n);return!n||(!r||a)&&(r||(null==n?void 0:n.isSubmitted())||a)||(s=o.RK.GRADE_AND_FEEDBACK),this.takeActionOnStateRef(s,t,i)}getSubmissionsListStateRef(e,t){return e.gradeitemView="students",(null==e?void 0:e.needsGrading)&&(delete e.needsGrading,e.gradingStatus=g.qr.NeedsGrading),this.takeActionOnStateRef("gradebook-item.assignment",e,t)}supportsOverall(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.Attendance}openStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef("attendance-student-view",e,t)}editStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}gradingStateRef(e,t,n,i){return this.takeActionOnStateRef("attendance",t,i)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}supportsEdit(){return!1}supportsOverall(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.Discussion}openStateRef(e,t){return this.takeActionOnStateRef(o.Jy.DISCUSSION_VIEW_WITH_GRADING,e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(o.Jy.DISCUSSION_VIEW_WITH_GRADING,e,t)}gradingStateRef(e,t,n,i){return this.takeActionOnStateRef(o.Jy.SUBMISSION_LIST,t,i)}editStateRef(e,t){return this.takeActionOnStateRef(o.Jy.DISCUSSION_VIEW_WITH_GRADING,e,t)}getSubmissionsListStateRef(e,t){return e.view="participants",(null==e?void 0:e.needsGrading)&&(delete e.needsGrading,e.gradingStatus=g.qr.NeedsGrading),this.takeActionOnStateRef(o.Jy.DISCUSSION_VIEW_WITH_GRADING,e,t)}supportsOverall(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.Journal}openStateRef(e,t){return this.takeActionOnStateRef(o.Eg.JOURNAL_VIEW_WITH_PARTICIPATION,e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(o.Eg.JOURNAL_VIEW_WITH_PARTICIPATION,{...e,view:"journal"},t)}editStateRef(e,t){return this.takeActionOnStateRef(o.Eg.JOURNAL_VIEW_WITH_PARTICIPATION,e,t)}getSubmissionsListStateRef(e,t){return(null==e?void 0:e.needsGrading)&&(delete e.needsGrading,e.gradingStatus=g.qr.NeedsGrading),this.takeActionOnStateRef(o.Eg.JOURNAL_VIEW_WITH_PARTICIPATION,{...e,view:"participants"},t)}gradingStateRef(e,t,n,i){var s;let r=n.memberId,a=e.contentId,l=(null==n?void 0:n.memberId)||t.membershipId,c=(null==n?void 0:null===(s=n.user)||void 0===s?void 0:s.$pk)||(null==n?void 0:n.userId)||t.userId;return this.takeActionOnStateRef(o.Eg.JOURNAL_PARTICIPATION_DETAIL,{...t,participantId:r,contentId:a,singleMembershipId:l,singleUserId:c},i)}supportsOverall(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.LTILink}openStateRef(e,t){return this.takeActionOnStateRef(o.UM.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(o.UM.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef(o.UM.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}supportsOverall(){return!0}supportsExternalEdit(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.PartnerCloud}openStateRef(e,t){return this.takeActionOnStateRef(o.UM.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}studentViewStateRef(e,t){let n;return n=e.linkRef?{courseId:e.courseId,linkRef:e.linkRef,linkType:l.u$1.PartnerCloud.toString()}:{courseId:e.courseId,contentId:e.contentId},this.takeActionOnStateRef(o.UM.LTI_LAUNCH,n,t)}editStateRef(e,t){return this.takeActionOnStateRef("content-manage.edit.partnercloud",{courseId:e.courseId,id:e.contentId},t)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef(o.UM.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}supportsOverall(){return!0}supportsViewItem(){return!0}supportsEdit(){return!1}supportsExternalEdit(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.Scorm}studentViewStateRef(e,t){return this.takeActionOnStateRef("scorm-overview.student",e,t)}openStateRef(e,t){return this.takeActionOnStateRef("scorm.open",e,t)}editStateRef(e,t){return this.takeActionOnStateRef("scorm-settings",e,t)}gradingStateRef(e,t,n,i){var s;let r=o.RK.SUBMISSION_GRADING,a=null==n?void 0:n.hasAttempts(),l=S(n),c=(null==n?void 0:null===(s=n.attempts)||void 0===s?void 0:s.length)>e.multipleAttempts;if(n&&!l&&(a||!a&&(!(null==n?void 0:n.isSubmitted())||C(n))))r=o.RK.GRADE_AND_FEEDBACK;else if(this.isFlexGradingAvailable(t))r=o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING;else if((e.isMultipleAttempts()||c)&&l){if(t.attemptId)return this.takeActionOnStateRef(r,null,i);r=o.BQ.COURSE_GRADES_MULTIPLE_ATTEMPT}return this.takeActionOnStateRef(r,t,i)}gradingWithFeedbackStateRef(e,t){return this.takeActionOnStateRef("submission-grading.peek.assessment-submission-feedback",e,t)}getSubmissionsListStateRef(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.scorm-submissions",e,t)}supportsOverall(){return!0}isFlexGradingAvailable(e){return!1}},I],w.NULL_DELEGATE=new class extends E{}(null,null);class A extends w{}r.module(v,[c.e1,d.e1,u.e1]).service(y,w)},815372:function(e,t,n){"use strict";n.d(t,{HV:function(){return I},e1:function(){return E},sq:function(){return w}});var i=n(276635),s=n(464027),r=n(168132),o=n(852512),a=n(867734),l=n(763674),c=n(748157),d=n(247126),u=n(495175),p=n(873518),m=n(319434),h=n(759485),g=n(372457),f=n(951248),b=n(211796),v=n(810309),y=n(826055),C=n(118717);function S(e,t){return function(n,i){t(n,i,e)}}let E="ultra.components.services.scorm",I="scorm",w="geolocation *; microphone *; camera *; midi *; encrypted-media *";class A{scormLaunch({contentId:e,courseId:t,content:n,showPreLaunchPanel:i}){return this.service.scormLaunch({contentId:e,courseId:t,content:n,showPreLaunchPanel:i})}constructor(e){this.service=e,this.key=o.fz.Scorm}}class k{subscribeToReduxChanges(){this.$ngRedux.connect(null,e=>(0,C.DE)({updateContentReviewState:f.Nwg.contentReviewState.persistContentReviewState},e))(this)}isScormAvailable(e){let t=this.scormAvailabilityCache[e];if(t){var n;return this.$q.when(null===(n=t.toolEnabledSetting)||void 0===n?void 0:n.isAvailable)}return this.CourseModel.$new(e).contentHandlers.$find(m.GQ.RusticiScorm.toString()).$allow([403]).$asPromise().then(t=>{var n;return null===(n=(this.scormAvailabilityCache[e]=t).toolEnabledSetting)||void 0===n?void 0:n.isAvailable})}async scormLaunch(e){let t=this.$q.defer(),[n,r]=await this.$q.all([this.getContent(e.courseId,e.content,e.contentId),e.showPreLaunchPanel?this.getMembership(e.courseId):null]);if(e.showPreLaunchPanel&&this.isGradable(n)){if(n.canEdit()){let n=s.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(f.u$1.Scorm,{courseId:e.courseId,contentId:e.contentId},p.tU.GenerateStateParams));this.ultraState.goPeekState(n.state,n.args).then(()=>{t.resolve()}).catch(e=>{t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})})}else this.isStudentInCourse(r)&&this.ultraState.goPeekState("scorm-overview.student",{courseId:n.courseId,contentId:n.id}).then(()=>{t.resolve()}).catch(e=>{t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})})}else this.launchScormLink(i.merge(e,{content:n}),t);return t.promise}refreshContents(e,t){this.getContent(e,null,t).then(e=>{this.gradeService.refreshCourseContents(e)})}markContentAsViewed(e,t){return t?this.getContent(e,null,t).then(e=>{var t;if(!(null===(t=e.permissions)||void 0===t?void 0:t.canHaveReviewState))return;let n=(0,v.w4)(e);n&&(this.updateContentReviewState(e.courseId,e.id,n),e.inSequence&&this.$rootScope.$broadcast(y.G,e,n))}):this.$q.when()}launch(e,t,n,i=!1){e=h.uI(e),e=h.Ou(e,"from_ultra","true"),i?(this.$window.open(e),this.markContentAsViewed(t,n)):this.ultraState.goPeekState("scorm-launch-frame",{toolHref:e,courseId:t,contentId:n}).then(()=>{this.markContentAsViewed(t,n)})}launchScormLink(e,t){let n;e.content&&(n=this.getLaunchLinkFromContent(e.content)),n&&(this.determineLaunchTarget(i.merge(e,{launchLink:n})),t.resolve())}determineLaunchTarget(e){e.content&&e.content.isScorm()&&this.launch(e.launchLink,e.content.courseId,e.content.id,e.content.launchInNewWindow)}getLaunchLinkFromContent(e){let t=e.contentDetail&&e.contentDetail[e.contentHandler.toString()];return t&&t.launchUrl||null}scormEditColumn(e){this.getContent(e.courseId,e.ui.content,e.contentId).then(t=>{e.ui.content=t;let n=a.dI.create(t).getEditState();this.ultraState.goPeekState(n,{contentId:t.id})})}isStudentInCourse(e){return e.isStudentMembership()}isGradable(e){return!!e.getScormGradebookItems().length}getContent(e,t,n){return t?this.$q.when(t):n?this.CourseModel.$new(e).contents.$find(n).$asPromise():this.$q.when(null)}getMembership(e){return this.contextCourseMembership.courseMembership?this.$q.when(this.contextCourseMembership.courseMembership):this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()}loadScormGrade({courseId:e,column:t,grade:n}){return(n?n.$asPromise&&n.$asPromise()||this.$q.when(n):this.gradeService.loadGrade({gradeQueryParams:{},courseId:e,column:t,userId:this.contextUser.userId},!1)).then(t=>t&&t.attempts.$fetch({fields:"id,status,attemptDate"}).$asPromise().then(e=>e.length&&e.reduce((e,t)=>e.attemptDate>t.attemptDate?e:t)).then(e=>e&&e.id).then(n=>{if(!n)return t;let i=this.CourseModel.$new(e);return this.gradeService.loadAttempt(t,i,{expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",attemptId:n})}))}constructor(e,t,n,i,s,r,a,l,c,d,u,p){this.$q=e,this.$rootScope=t,this.$window=n,this.$ngRedux=i,this.cacheFactory=s,this.contextCourseMembership=r,this.modalService=a,this.ultraState=l,this.gradeService=c,this.scoreProviderHelper=d,this.CourseModel=u,this.contextUser=p,this.scormAvailabilityCache={},this.subscribeToReduxChanges(),(0,o.gM)(new A(this))}}k=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([S(0,(0,b.tB)("$q")),S(1,(0,b.tB)("$rootScope")),S(2,(0,b.tB)("$window")),S(3,(0,b.tB)("$ngRedux")),S(4,(0,b.tB)("DSCacheFactory")),S(5,(0,b.tB)(l.HV)),S(6,(0,b.tB)(c.HV)),S(7,(0,b.tB)(d.HV)),S(8,(0,b.tB)(u.HV)),S(9,(0,b.tB)(p.HV)),S(10,(0,b.tB)(r.N7.H)),S(11,(0,b.tB)(g.HV))],k),s.module(E,[l.e1,d.e1,p.e1,u.e1,r.e1]).service(I,k).config(["$compileProvider",e=>{e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},206745:function(e,t,n){"use strict";n.d(t,{e1:function(){return a},HV:function(){return l}});var i=n(625506),s=n(276635);class r{start(){this.state="start",this.frame=1,this.startCallback=i.noop,this.nextFrame()}loadComplete(){this.afterWaiting(()=>{this.state="success",this.frame=1,this.nextFrame()})}loadError(){this.afterWaiting(()=>{this.state="error",this.frame=1,this.nextFrame()})}reset(){this.state="reset",this.frame=20,this.nextFrame()}afterWaiting(e){"start"===this.state&&20===this.frame||"reset"===this.state?e():this.startCallback=()=>{e(),this.startCallback=null}}constructor(e,t){this.element=e,this.settings=t,this.nextFrame=s.throttle(()=>{window.requestAnimationFrame(()=>{e.setAttribute("keyframe",this.state+"-"+("00"+(this.frame=Math.min(this.frame+1,20))).substr(-2)),this.frame<20?this.nextFrame():(this[this.state+"Callback"]||this.settings[this.state+"Callback"]||i.noop)()})},50),this.settings=i.extend({successCallback:i.noop,errorCallback:i.noop,canvasSize:54},t),i(e).width(this.settings.canvasSize).height(this.settings.canvasSize)}}i.fn.inlineLoader=function(e){return this.addClass("xloader2").each(function(){this.InlineLoader=new r(this,e)}),this};var o=n(464027);let a="ultra.components.services.spinner",l="spinner";class c{initInlineLoader(e,t){return e.inlineLoader(t),new d(e,this.$rootScope)}constructor(e){this.$rootScope=e}}c.$inject=["$rootScope"];class d{start(){this.element[0].InlineLoader.start()}complete(){this.element[0].InlineLoader.loadComplete()}error(){this.element[0].InlineLoader.loadError()}reset(){this.element[0].InlineLoader.reset()}animate(e){this.start(),e.then(()=>{this.complete()},()=>{this.error()})}constructor(e,t){this.element=e,this.$rootScope=t}}o.module(a,[]).service(l,c)},578332:function(e,t,n){"use strict";n.d(t,{HV:function(){return h},e1:function(){return m}});var i=n(168132),s=n(864234),r=n(372457),o=n(936472),a=n(408027),l=n(211796),c=n(916415),d=n(712303),u=n(951248);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultra.service.stream.settings",h="streamSettings",g="ultraui.stream.settings.v2",f={Calendar:"CAL",NewContentAdded:"CON",NewAssessmentsAdded:"CON",CourseAvailable:"CRS",BlogEntryPosted:"DIS",BlogEntryEdited:"DIS",BlogEntryComment:"DIS",DiscussionReply:"DIS",NewDiscussionForum:"DIS",NewMessages:"MES",NewGradeableItems:"SUB",StudentActivityAvailable:"GRB",StudentGradeDataAvailable:"GRB",StudentsFallingBehind:"GRB",StudentsFallingBehindAbsent:"GRB",StudentsFallingBehindFailing:"GRB",StudentsFallingBehindAbsentFailing:"GRB",NoRecentActivity:"TEL",LowActivity:"TEL",HighActivity:"TEL",GradeAtRisk:"TEL",LowGrade:"TEL",GradeLowered:"TEL",PerformanceIncreased:"TEL",HighGrade:"TEL"};class b{initializeSettings(){return this.$q.all([this._getUserMemberships(),this.loadAdminNotificationSettings()]).then(()=>this._loadUserSettings())}subscribeToRedux(){let e=this.store.connect(e=>{let t=u.Ys.notificationMethodSetting.getAdminNotificationMethodSettings(e),n=u.Ys.systemPreference.getSystemPreferenceByKey(e,o.uZ),i=this._transformRegistrySettings(n);return{adminNotificationSettings:t.concat(i)}},e=>({loadAdminNotificationSettings:()=>this.$q.all([e(u.Nwg.notificationMethodSetting.loadAdminNotificationMethodSettings()),e(u.Nwg.systemPreference.loadSystemPreference({key:o.uZ,shouldLoadWhilePending:!0}))])}))(this);this.$rootScope.$on("$destroy",e)}_transformRegistrySettings(e){let t=o.xZ;e&&e.value&&(t=JSON.parse(e.value));let n=[];return t.settings.forEach(e=>{n.push({context:a.afs.Course,source:o.sF,event:e.id,method:"DA",isEditable:e.isEditable,isEnabled:e.isEnabled})}),n}_getUserMemberships(){return this.userMemberships?this.$q.resolve(Object.values(this.userMemberships)):this.currentUserService.getMemberships().then(e=>(this.userMemberships=e.reduce((e,t)=>({...e,[t.id]:t}),{}),Object.values(this.userMemberships)))}reloadStreamMemberships(){return this.userMemberships=null,this._getUserMemberships()}save(e){if(!e)return this.$q.resolve();Object.keys(e).forEach(t=>{e[t].definition||(e[t].definition=o.zt.find(e=>e.id===t))});let t=Object.keys(e).map(t=>({id:e[t].definition.id,isEnabled:e[t].isEnabled}));return this.preferenceService.setPreference(g,angular.toJson({version:3,settings:t})).then(()=>this._loadUserSettings())}_loadLegacyUserSettings(){return this.preferenceService.getPreference("ultraui.stream.settings",null).then(e=>{if(!e||!e.value)return!1;let t=angular.fromJson(e.value);return this.userSettings=o.zt.reduce((e,n)=>{let i=f[n.id];return{...e,[n.id]:{definition:n,isEnabled:!!i&&"N"!==t[i]}}},{}),!0})}_loadUserSettings(){return this.preferenceService.getPreference(g,null).then(e=>{if(!e||!e.value)return this._loadLegacyUserSettings().then(e=>{if(!e)return this._loadDefaultSettings()});let t=angular.fromJson(e.value);this.userSettings={},t.settings.forEach(e=>{let t=o.zt.find(t=>t.id===e.id);t&&(this.userSettings[e.id]={isEnabled:e.isEnabled,definition:t})})})}_loadDefaultSettings(){return this.loadAdminNotificationSettings().then(()=>{this.userSettings=o.zt.reduce((e,t)=>{let n=t.defaultSetting(this.adminNotificationSettings);return e[t.id]={isEnabled:n,definition:t},e},{})})}getUserSettings(){return this._hasUserSettings()?this.$q.resolve(this.userSettings):this._loadUserSettings().then(()=>this.userSettings)}_hasUserSettings(){return null!==this.userSettings}_updateMembership(e){this.userMemberships={...this.userMemberships,[e.id]:{...this.userMemberships[e.id],...e}}}hidden(e){if(!e)return!1;let t=!!this.userMemberships,n=t?Object.values(this.userMemberships).find(t=>t.course.$pk===e.courseId):null,i=n&&n.userHasHidden;if(i)return!0;if(n&&(e.courseColorClass=(0,d.bb)(n)),!this.userSettings||!this.adminNotificationSettings)return!1;let s=!1;for(let t of Object.keys(this.userSettings)){let n=this.userSettings[t];if(n.definition.canHandle(e)&&(s=!0,n.definition.isStreamEntryVisible(n.isEnabled,this.adminNotificationSettings)))return!1}return s}constructor(e,t,n,i,s,r){this.$rootScope=e,this.$q=t,this.preferenceService=n,this.UserModel=i,this.currentUserService=s,this.store=r,this.userSettings=null,c.ZU.OnRootScope(this.$rootScope,"membership-hidden-status-update",(e,t)=>{this._updateMembership(t),this.$rootScope.$broadcast("stream-settings-updated")}),this.subscribeToRedux()}}b=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,l.tB)("$rootScope")),p(1,(0,l.tB)("$q")),p(2,(0,l.tB)(s.HV)),p(3,(0,l.tB)(i.EA.HV)),p(4,(0,l.tB)(r.HV)),p(5,(0,l.tB)("$ngRedux"))],b),angular.module(m,[s.e1]).service(h,b)},603712:function(e,t,n){"use strict";n.d(t,{HV:function(){return b},SA:function(){return C},e1:function(){return f},e2:function(){return v},gc:function(){return y}});var i=n(211796),s=n(916415),r=n(759485),o=n(396184),a=n(43223),l=n(560844),c=n(748157),d=n(291146),u=n(870452),p=n(369695),m=n(287633),h=n(776517);function g(e,t){return function(n,i){t(n,i,e)}}let f="ultra.service.studentPreview",b="studentPreview",v=b+"Provider",y=l.vI,C="TOGGLE-PREVIEW",S="in-preview-mode-parent";class E{get course(){return this._course}get previewStatus(){return this._previewStatus}get previewUrl(){return this._previewUrl}load(){return this.course.studentPreview.$fetch().$asPromise().then(e=>(this._previewStatus=e,this.updateClasses(),e.courseMembershipId)?this.course.memberships.$new(e.courseMembershipId).$fetch().$asPromise().then(t=>(e.user=this.UserModel.$buildRaw(e.user),e.user.memberships.push(this.course.memberships.$buildRaw(t)),e)):this.$q.when(e))}init(e){var t;return(null===(t=this.course)||void 0===t?void 0:t.id)===e.id&&this.previewStatus?this.$q.resolve(this.previewStatus):(this._course=e,this.setPreviewUrl(),this.load())}setPreviewUrl(){let e=(0,r.uI)(`/ultra/courses/${this.course.id}/outline/?inPreviewMode=true`);this._previewUrl=this.$sce.trustAsResourceUrl(e)}openStartPreviewModal(){let e=this.$rootScope.$new();return e.courseOrgTokenPrefix=this.course.isOrganization?"components.services.organization":"components.services",document.body.classList.add("dialog-pop-up-in-preview-mode"),this.modal.open({scope:e,template:m,resolve:{translations:[d.serviceName,e=>e.loadBundle("components/services/student-preview")]}}).result}updateClasses(){var e;(null===(e=this.previewStatus)||void 0===e?void 0:e.previewing)?document.body.classList.add(S):(document.body.classList.remove(S),document.body.classList.remove("has-footer-in-preview-mode"))}showToastNotification(e){this.toast.show({messageKey:e,icon:"icon-check",toastStatus:"success"})}exitPreviewMode(e=!1){return this.entitlementCache.clearEntitlementCache(this.course.id),this.$q.all([this.course.studentPreview.withParams({discardData:e}).$destroy().$asPromise(),this.localize.loadBundle("components/services/student-preview")]).then(e=>this.entitlementCache.loadCourseEntitlements(this.course.id).then(()=>{this.$rootScope.$broadcast(C,!1),this.setPreviewUrl(),this.showToastNotification("components.services.studentPreview.previewEnded"),this._previewStatus=e[0],this.updateClasses(),(0,h.sA)(h.Cs.StudentPreviewClosed)}))}launchPreviewMode(){return this.openStartPreviewModal().then(()=>this.course.studentPreview.$save().$asPromise().then(e=>{this._previewStatus=e,this.$rootScope.$broadcast(C,!0),this.updateClasses(),(0,h.sA)(h.Cs.StudentPreviewOpened)}))}resetPreviewMode(){return this.course.studentPreview.withParams({discardData:!0}).$destroy().$asPromise().then(()=>this.course.studentPreview.$save().$asPromise().then(()=>{this.setPreviewUrl(),this.showToastNotification("components.services.studentPreview.activityReset")}))}isInIframeOfPreviewMode(){var e;return(null===(e=this.previewStatus)||void 0===e?void 0:e.previewing)&&window.top!==window}constructor(e,t,n,i,r,a,l,c){this.$q=e,this.$rootScope=t,this.$sce=n,this.entitlementCache=i,this.localize=r,this.modal=a,this.toast=l,this.UserModel=c,s.ZU.OnRootScope(this.$rootScope,o.N.$stateHasCourseInContextChanged,(e,t,n)=>{var i;n&&!t&&(null===(i=this.previewStatus)||void 0===i?void 0:i.previewing)&&this.exitPreviewMode()})}}E=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([g(0,(0,i.tB)("$q")),g(1,(0,i.tB)("$rootScope")),g(2,(0,i.tB)("$sce")),g(3,(0,i.tB)(u.HV)),g(4,(0,i.tB)(d.serviceName)),g(5,(0,i.tB)(c.HV)),g(6,(0,i.tB)(p.HV)),g(7,(0,i.tB)(a.HV))],E),angular.module(f,[u.e1,d.moduleName,c.e1,p.e1]).provider(b,class{constructor(){this.$get=["$injector",e=>e.instantiate(E)],this.name=y,this.resolve=[l.c6,b,(e,t)=>t.init(e)]}})},677076:function(e,t,n){"use strict";n.d(t,{HV:function(){return h},e1:function(){return m}});var i=n(276635),s=n(464027),r=n(350383),o=n(319434),a=n(539210),l=n(291146),c=n(168132),d=n(619034),u=n(470269),p=n(866688);let m="ultra.service.telemetry",h="telemetry";class g{loadActivityVsGradeData(e){return this.ActivityVsGradeModel.$find(e).$allow([404]).$asPromise()}loadStudentGradeData(e,t){return this.StudentGradesModel.$find(e,t?{userId:t}:{}).$allow([404,400]).$asPromise()}loadCourseGradeData(e){return this.CourseGradesModel.$find(e).$allow([404,400]).$asPromise()}loadStudentActivityData(e,t){return this.StudentActivityModel.$find(e,t?{userId:t}:{}).$allow([400]).$asPromise()}loadContentActivityInDetailData(e,t){let n=this.ContentActivityInDetailModel.$collection();return n.getContentActivityInDetail(e,t).$asPromise()}loadMultimediaActivityInDetailData(e,t){let n=this.MultimediaActivityInDetailModel.$collection();return n.getMultimediaActivityInDetail(e,t).$asPromise()}loadMultimediaStatisticsData(e,t){return this.MultimediaStatisticsModel.getMultimediaStatistics(e,t).$asPromise()}loadCourseActivityData(e){return this.CourseActivityModel.$find(e).$allow([400]).$asPromise()}loadNotificationUsers(e,t,n){let s={};return t&&(s.limit=t),n&&(s.offset=n),this.NotificationUsers.$find(e,s).$asPromise().then(e=>i.keyBy(e.users,"userId"))}loadNotifications(e,t,n,i){return this.getNotificationsPromise(e,t,n,i).promise}loadDiscussionActivityData(e,t,n){return n?this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t,n).$asPromise():this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t).$asPromise()}loadDiscussionXrayReport(e,t,n){return this.TelemetryDiscussionXrayModel.getDiscussionXrayReport(e,t,n).$asPromise()}hasSufficientActivityData(e){return this.getSufficientDataPromise().promise.then(t=>!!t&&!!t.coursesWithActivity&&i.includes(t.coursesWithActivity,e))}hasSufficientGradeData(e){return this.getSufficientDataPromise().promise.then(t=>!!t&&!!t.coursesWithGrades&&i.includes(t.coursesWithGrades,e))}canViewAllUserData(e){return this.entitlement.hasCourseEntitlement(a.SE.ViewGrades,e)}formatMessageRecipients(e){return(e||[]).map(e=>e.id).join(",")}determineContentSupportsActivityData(e){let t=this.$q.defer();return p.e.isExternalSubmissionsAssessment(e)?t.resolve(!1):this.contentSupportsActivityData(e)?this.canViewAllUserData(e.courseId).then(e=>{t.resolve(e)}).catch(e=>{t.reject(e)}):t.resolve(!1),t.promise}contentSupportsActivityData(e){return(o.GQ.TestLink.isEqualTo(e.contentHandler)||o.GQ.UltraAssignment.isEqualTo(e.contentHandler))&&e.hasGradingColumn()}determinePanelSref(e,t){return this.canViewAllUserData(e).then(n=>n?this.createPanelSref(u.s6.INSTRUCTOR_CLASS,e,t):this.createPanelSref(u.s6.STUDENT_PROGRESS,e,t))}createPanelSref(e,t,n){let i=e.toString(),s='({ courseId: "'+t+'"';return n&&(s+=', notificationId: "'+n+'"'),i+(s+=" })")}exportFilename(e,t,n,i,s){let r="";e&&(r=e.courseId+"_");let o=this.bbLocalize.formatDateSync(new Date,l.ILocaleDateFormat.ISO).replace(/[^0-9]/g,""),a="";t&&n&&t.id!==n.id&&(a=t.userName+"_");let c="";return s&&(c=s.replace(/\s+/g,"_")+"_"),r+a+c+o+(i?"_"+i:"")}getSufficientDataPromise(){let e=this.sufficientDataCache.get(this.SUFFICIENT_DATA_KEY);return e||(e={promise:this.SufficientDataModel.$new().$fetch().$allow([404,400]).$asPromise()},this.sufficientDataCache.put(this.SUFFICIENT_DATA_KEY,e)),e}getNotificationsPromise(e,t,n,i){let s=e+t+n+i,r=this.notificationsCache.get(s);if(!r){let o={};t&&(o.userId=t),n&&(o.includeDismissed=n),i&&(o.notificationType=i),(r={promise:this.CourseNotificationsModel.$find(e,o).$asPromise()}).promise.then(e=>(e.currentStudent.forEach(e=>{e.ui={createdDay:d.utc(e.created).startOf("day").toDate()}}),e)),this.notificationsCache.put(s,r)}return r}constructor(e,t,n,i,s,r,o,a,l,c,d,u,p,m,h,g,f){this.cacheFactory=e,this.$q=t,this.entitlement=n,this.bbLocalize=i,this.ActivityVsGradeModel=s,this.ContentActivityInDetailModel=r,this.CourseActivityModel=o,this.CourseGradesModel=a,this.CourseNotificationsModel=l,this.MultimediaActivityInDetailModel=c,this.MultimediaStatisticsModel=d,this.NotificationUsers=u,this.StudentActivityModel=p,this.StudentGradesModel=m,this.SufficientDataModel=h,this.TelemetryDiscussionActivityModel=g,this.TelemetryDiscussionXrayModel=f,this.SUFFICIENT_DATA_KEY="SufficientData",this.sufficientDataCache=e.createCache("sufficientTelemetryData"),this.notificationsCache=e.createCache("notifications")}}g.$inject=["DSCacheFactory","$q",r.HV,l.serviceName,c.YY.H,c.t4.H,c.k8.H,c.tV.H,c.Kx.H,c.fW.H,c.xJ.H,c._h.H,c.L5.H,c.lo.H,c.S5.H,c.Mt.H,c.bU.H],s.module(m,[c.e1,r.e1]).service(h,g)},305233:function(e,t,n){"use strict";n.d(t,{H:function(){return r},e:function(){return s}});var i=n(464027);let s="ultra.services.timeout",r="timeout";i.module(s,[]).factory(r,["$timeout",e=>{let t=(t,n,i,s)=>{let r=e(function(...e){return r.__bb_unregister_scope_destroy__&&(r.__bb_unregister_scope_destroy__(),r.__bb_unregister_scope_destroy__=null),t.apply(this,e)},i,s);return r.__bb_unregister_scope_destroy__=n.$on("$destroy",()=>{e.cancel(r)}),r};return t.cancel=t=>(t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)),t}])},369695:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},e1:function(){return d}});var i=n(464027),s=n(240231),r=n(291146),o=n(702991),a=n(685414),l=n(742203),c=n(48042);let d="ultra.services.toast",u="toast";class p{show(e){if(!e)throw Error("args is required");if(!e.messageKey)throw Error("messageKey is required");this.setUpToast({bundlePromise:e.bundle?this.localize.loadBundle(e.bundle):this.$q.when(),createScope:()=>{let t=this.$rootScope.$new(!0);return t.message=this.localize.translateSync({locale:e.locale||this.localize.getLocale(t),key:e.messageKey,params:e.translationParams,noWrap:!0,noEscape:!0}),t.shortMessage=e.shortMessageKey&&this.localize.translateSync({locale:e.locale||this.localize.getLocale(t),key:e.shortMessageKey,params:e.translationParams,noWrap:!0,noEscape:!0}),t.icon=e.icon||"icon-alert-triangle",t.toastClass=e.toastClass,t.toastStatus=e.toastStatus,t},triggerToastClose:(t,n,i,s)=>{n.$root.$broadcast(a.$N,n.message);let r=()=>{if(n.isActive){let n=e.durationMS||p.DEFAULT_DISPLAY_MS;this.toastQueue.length>1&&(n=Math.min(p.RUSH_DISPLAY_MS,n)),new Date().getTime()-t.startTime>=n?s():this.$timeout(r,1e3,!1)}};r(),this.$timeout(()=>{i.addClass("is-active")},0,!1)},onCloseToast:this.closeToast,template:l})}showLoading(e){if(!e)throw Error("args is required");if(!e.trayId)throw Error("messageKey is required");return e.promise.then(()=>e.promise.done=!0),this.setUpToast({bundlePromise:this.$q.when(),createScope:()=>{let t=this.$rootScope.$new(!0);return t.trayId=e.trayId,t.trayLocalizationKeysPrefix=e.trayLocalizationKeysPrefix,t},triggerToastClose:(t,n,i,s,r)=>{e.promise.then(()=>{s()},()=>{r()}),n.$root.$broadcast(o.gJ.LoadMoreResults.eventName,e.trayId,e.promise,null,!0,e.delayTime)},template:c,footerCss:e.footerCss,promise:e.promise})}setUpToast(e){let t;let n=this.$q.defer(),s=this.toastQueue[this.toastQueue.length-1]||this.$q.when();return this.toastQueue.push(n.promise),this.$q.all([s,e.bundlePromise]).then(()=>{let s;if(n.startTime=new Date().getTime(),e.promise&&e.promise.done){n.resolve();return}let r=e.createScope(),o=()=>{e.onCloseToast&&e.onCloseToast(r,s),this.cleanUpToast(n,r,s)};return t=()=>{this.cancelToast(n,r,s)},r.isActive=!0,r.toastClicked=()=>{o()},s=this.$compile(e.template)(r),i.element(document.body).append(s),s.addClass(e.footerCss),e.triggerToastClose(n,r,s,o,t),n.promise}).then(()=>{this.toastQueue.shift()}),()=>t&&t()}closeToast(e,t){e.isActive&&t.removeClass("is-active")}cleanUpToast(e,t,n){t.isActive&&(t.isActive=!1,s.c(n,()=>{this.cancelToast(e,t,n)}))}cancelToast(e,t,n){e.resolve(),n.remove(),t.$destroy()}constructor(e,t,n,i,s){this.$compile=e,this.$q=t,this.$rootScope=n,this.$timeout=i,this.localize=s,this.toastQueue=[]}}p.DEFAULT_DISPLAY_MS=6e3,p.RUSH_DISPLAY_MS=3e3,p.$inject=["$compile","$q","$rootScope","$timeout",r.serviceName],i.module(d,[r.moduleName,o.e1]).service(u,p)},81234:function(e,t,n){"use strict";let i,s;var r=n(445057);class o{static getBasePageStorageKey(){return i||(i="ultra.ui.basepage."+r.u(o.userId)),i}static getPeekPageStorageKey(){return s||(s="ultra.ui.peekpage."+r.u(o.userId)),s}}t.Z=o},513174:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},e1:function(){return p},e2:function(){return g},gc:function(){return h}});var i=n(464027),s=n(211796),r=n(408027),o=n(822658),a=n(247126),l=n(470269),c=n(951248),d=n(207069);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.service.canActivateState",m="canActivateState",h="canActivateStateResolve",g=m+"Provider";class f{subscribeToReduxChanges(){let e=this.$ngRedux.connect(null,e=>({loadCourseToolConfiguration:(t,n)=>e(c.Nwg.courseTools.loadCourseToolConfiguration(t,n)),loadUltraSetting:()=>e(c.Nwg.ultraSettings.loadUltraSetting())}))(this);this.$scope.$on("$destroy",e)}byToolIdAvailability(e){let t=this.$q.defer(),n=c.Ys.courseTools.getCourseTool(this.$ngRedux.getState(),this.currentCourse.courseId,e);return n&&n.toolEnabledSetting.isAvailable?(t.resolve(),t.promise):n&&!n.toolEnabledSetting.isAvailable?(this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),t.resolve(),t.promise):(this.loadCourseToolConfiguration(this.currentCourse.courseId,r.XF0.Messages).then(({toolEnabledSetting:e})=>{e.isAvailable||(this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),t.resolve())}).catch(()=>{this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),t.reject("Error loading course tool configuration")}),t.promise)}byFeatureFlag(e){this.featureFlagService.createWaiter(e).then(e=>{e||this.ultraState.goCurrentBasePage()}).catch(()=>{this.ultraState.goCurrentBasePage()})}byMessageToolAvailableForAnyCourse(){let e=this.$q.defer(),t=c.Ys.ultraSettings.getUltraSettings(this.$ngRedux.getState());return t.ultraSettings&&t.ultraSettings.isCourseMessagesToolEnabledInAnyCourses?(e.resolve(),e.promise):t.ultraSettings&&!t.ultraSettings.isCourseMessagesToolEnabledInAnyCourses?(this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),e.resolve(),e.promise):(this.loadUltraSetting().then(({ultraSettings:t})=>{t.isCourseMessagesToolEnabledInAnyCourses||this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),e.resolve()}).catch(()=>{this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),e.reject("Error loading ultra settings")}),e.promise)}constructor(e,t,n,i,s,r){this.$scope=e,this.ultraState=t,this.$ngRedux=n,this.$q=i,this.featureFlagService=s,this.currentCourse=r,this.subscribeToReduxChanges()}}f=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,s.tB)("$rootScope")),u(1,(0,s.tB)(a.HV)),u(2,(0,s.tB)("$ngRedux")),u(3,(0,s.tB)("$q")),u(4,(0,s.tB)(d.HV)),u(5,(0,s.tB)(o.HV))],f),i.module(p,[a.e1,o.e1,d.e1]).provider(m,class{constructor(){this.$get=["$injector",e=>e.instantiate(f)],this.name=h,this.resolve=[m,e=>e.byMessageToolAvailableForAnyCourse()]}})},396184:function(e,t,n){"use strict";var i,s,r,o;n.d(t,{G:function(){return s},N:function(){return i}}),(r=i||(i={})).$stateChangeError="$stateChangeError",r.$stateChangeStart="$stateChangeStart",r.$stateChangeSuccess="$stateChangeSuccess",r.$stateNotFound="$stateNotFound",r.$stateHasCourseInContextChanged="$stateHasCourseInContextChanged",r.$stateHasContentInContextChanged="$stateHasContentInContextChanged",(o=s||(s={})).$locationChangeStart="$locationChangeStart",o.$locationChangeSuccess="$locationChangeSuccess"},247126:function(e,t,n){"use strict";n.d(t,{HV:function(){return A},e1:function(){return w},e2:function(){return k},qt:function(){return T}}),n(788093),n(84683);var i=n(276635),s=n(464027),r=n(916415),o=n(81234),a=n(291146),l=n(335614),c=n(335920),d=n(18447),u=n(501),p=n(560844),m=n(350383),h=n(305233),g=n(834266),f=n(396184),b=n(759485),v=n(776517),y=n(168955),C=n(404073),S=n(470269),E=n(837545),I=n(625506);let w="ultra.router",A="ultraState",k=A+"Provider",x="DefaultBasePage",T=".peek.";function P(e){e&&Object.keys(e).forEach(t=>{let n=e[t];Array.isArray(n)&&(e[t]=Array.from(new Set(n)),1===e[t].length&&(e[t]=n[0]))})}function D(e,t){let n=/^(\^)?(\??)(\w+)/.exec(e),i={searchParents:!1,optional:!1,name:t};return n&&(i.searchParents="^"===n[1],i.optional="?"===n[2],i.name=n[3]?n[3]:t),i}class G{baseState(e,t){window.top!==window&&b.re("inPreviewMode",window.location.href)&&(t.require=()=>n.e(86061).then(n.bind(n,886061)),t.peekViewName=void 0),t=this.getStateWithName(e,t),this.baseStates.push(t);let i=t.resolve=t.resolve||{};return i.childrenStates=[()=>{this.registerPeekStates(t)}],this.$stateProvider.state(t),this}peekState(e,t){t=this.getStateWithName(e,t);let n=t.name.split(".")[0];return this.peekStates[n]=this.peekStates[n]&&this.peekStates[n].concat(t)||[t],this}state(e,t){return t=this.getStateWithName(e,t),this.$stateProvider.state(t),this}registerPeekStates(e){if(e&&e.peekStates){let t={};if(t.name=e.name+".peek",!(Object.prototype.hasOwnProperty.call(this.addedStates,t.name)||null!=this.$state.get(t.name))){let i;t.onExit=[c.HV,A,(e,n)=>{i&&C.C.popBanner(t.name),e.close(t.name)}],t.resolve={offCanvasArgs:[A,n=>{let s=G.getPanelStateNameFromNextState(n.next.name,t.name),r=n.get(s),o=C.C.currentPanelBanner(),a=o&&"full"!==o.panelClass&&"full"===r.panelClass;return(2===s.split(T).length||a)&&(i=C.C.createBanner()),{banner:i,panelClass:r&&r.panelClass||"peek",pageTitle:r&&r.pageTitle,template:y.replace("{0}",this._getPanelName(e)),close:()=>(this.$rootScope.bbOffcanvasOpened&&n.go(e.name),!1),stateName:t.name,overlay:null==r||null==r.overlay||r.overlay}}]},e.peekViewName?(t.views={},t.views[e.peekViewName]={require:()=>Promise.resolve().then(n.bind(n,335614))}):t.require=()=>Promise.resolve().then(n.bind(n,335614)),this.$stateProvider.state(t)}this.createAllPeekStates(e,e.peekStates)}}createAllPeekStates(e,t){let n=e.name+T;t.forEach(t=>{let i=this.peekStates[t]||[];i.forEach(t=>{this._checkAbsoluteUrl(t);let i=n+t.name;if(Object.prototype.hasOwnProperty.call(this.addedStates,i)||null!=this.$state.get(i))return;let r=s.copy(t);r.name=i,r.abstract||(r.urlHandler=["$location",A,"$match",(t,n,s)=>{var r,a;let l=e=>{let t=e.split("."),n=i.split(".");return t.forEach((e,t)=>{n[t]=e}),n.join(".")};if(!(null==n.$current.navigable||n.includes(e.name))&&(null===(r=n.get(n.$current.name))||void 0===r||!r.onChildStateEnter)&&(null===(a=n.get(i))||void 0===a||!a.onChildStateEnter))return!1;{let e;e=this._isAbsoluteUrl(t.url())?l(sessionStorage.getItem(o.Z.getBasePageStorageKey())||this.defaultBasePage):i,null==n.get(e)&&(e=l(this.defaultBasePage)),n.$current.name!==e&&n.transitionTo(e,s,{location:!1})}}]),r.views||(r.views={},r.views[this._getPanelName(e)]={template:r.template,controller:r.controller,require:r.require}),delete r.template,delete r.controller,delete r.require,r.getPageTitle&&(r.pageTitle=r.getPageTitle());let a=()=>{r.peekStates&&r.peekStates.length>0&&("full"===r.panelClass||r.allowChildPeekStates?this.registerPeekStates(r):this.createAllPeekStates(e,r.peekStates))};if(this.initAllStates)this.$stateProvider.state(r),a();else{let t=r.resolve=r.resolve||{};t.childrenStates=[a],this.$stateProvider.state(r),r.peekStates&&r.peekStates.length>0&&!("full"===r.panelClass||r.allowChildPeekStates)&&this.createAllPeekStates(e,r.peekStates)}})})}static getPanelStateNameFromNextState(e,t){let n=e.indexOf(T,t.length);return -1!==n?e.substr(0,n):e}_getPanelName(e){return e.name.split(".").join("-").concat("-panel@")}_checkAbsoluteUrl(e){if(e.url&&0===e.url.indexOf("^")){let t=e.url.match(/\/:[a-zA-Z]+/),n=e.url;t&&(n=n.substring(0,t.index)),n=n.substring(1);let i=n.match(/\(\?:([^\)]*)/);i?i[1].split("|").forEach(e=>{this.absoluteUrls.push(`/${e}`)}):-1===this.absoluteUrls.indexOf(n)&&this.absoluteUrls.push(n)}}_isAbsoluteUrl(e){return i.find(this.absoluteUrls,t=>0===e.indexOf(t))}createAllStates(){this.baseStates&&this.baseStates.length>0&&this.baseStates.forEach(e=>{this.registerPeekStates(e)})}createAllStatesOnInit(){this.initAllStates=!0}getStateWithName(e,t){return s.isObject(e)?t=e:t.name=e,this._initStateEntitlements(t),t}_initStateEntitlements(e){this._initSystemEntitlementChecks(e),this._initCourseEntitlementChecks(e)}_initSystemEntitlementChecks(e){e.systemEntitlement&&(e.resolve||(e.resolve={}),e.resolve.systemEntitlement=["$q",m.HV,(t,n)=>n.hasSystemEntitlement(e.systemEntitlement).then(this._configureStateChangeCallback(t))])}_configureStateChangeCallback(e){return t=>{let n=e.defer();return t?n.resolve():n.reject({userNotEntitled:!0}),n.promise}}_ensureCourseIdParam(e,t){return t.nextParams.courseId?e.resolve():e.reject("Cannot check course entitlements when the state does not have a courseId parameter.")}_guardEntitlementInjectable(e){let t=Array.isArray(e)?e.slice(0,e.length-1):[];return["$q","$injector",A,...t,(n,s,r,...o)=>{let a=i.zipObject(t,o);return this._ensureCourseIdParam(n,r).then(()=>{try{return s.invoke(e,void 0,a)}catch(e){return n.reject(e)}}).then(this._configureStateChangeCallback(n)).catch(()=>n.reject({userNotEntitled:!0}))}]}_getDefaultEntitlementInjectable(e){return[m.HV,A,(t,n)=>"string"==typeof e?t.hasCourseEntitlement(e,n.nextParams.courseId):t.hasAnyCourseEntitlement(e,n.nextParams.courseId)]}_initCourseEntitlementChecks(e){let t;e.courseEntitlement&&(t=this._getDefaultEntitlementInjectable(e.courseEntitlement)),e.resolve&&Object.prototype.hasOwnProperty.call(e.resolve,"courseEntitlement")&&(t=e.resolve.courseEntitlement),t&&(e.resolve||(e.resolve={}),e.resolve.courseEntitlement=this._guardEntitlementInjectable(t))}constructor(e,t){this.$stateProvider=e,this.addedStates={},this.initAllStates=!1,this.$get=["$rootScope","$state","$injector","$sce","$window",c.HV,u.HV,x,h.H,g.HV,(e,t,n,i,s,a,l,c,u,p)=>{this.$state=t,this.$rootScope=e,this.defaultBasePage=c,this.context=l,this.timeout=u;let m=this.baseStates.map(e=>e.name);if(r.ZU.OnRootScope(e,f.N.$stateChangeSuccess,(e,t)=>{let n=s.top===s.self;n&&-1!==m.indexOf(t.name)&&(l.basePage=t.name,sessionStorage.setItem(o.Z.getBasePageStorageKey(),l.basePage))}),r.ZU.OnRootScope(e,f.N.$stateChangeSuccess,(e,t,n,i,s)=>{if(i.name&&t.name&&i.name.split(T).length<t.name.split(T).length)return;let r=""===i.name,o=i.panelClass||"peek",l=t.panelClass||"peek";this.timeout(()=>{"peek"!==o||"full"!==l||r||a.expandTopPanel(),"full"===o&&"peek"===l&&a.shrinkTopPanel()},this.$rootScope,0,!1)}),r.ZU.OnRootScope(e,f.N.$stateChangeStart,(e,i,s,r,o)=>{t.next=i,P(s),t.nextParams=s,r&&(t.prev={name:r.name}),P(o),t.prevParams=o,i.routingFunction&&(e.preventDefault(),n.invoke(i.routingFunction))}),r.ZU.OnRootScope(e,f.N.$stateChangeError,(e,n,s,r,o,a)=>{a.errorModalConfig&&p.openModal(a.modalConfig);let l=a&&a.userNotEntitled;if(l)t.go(c);else if(a.goToBasePage)t.goCurrentBasePage();else{if(b.re("inPreviewMode",window.location.href)){let e=i.trustAsResourceUrl(b.uI(`/ultra/courses/${t.nextParams.courseId}/outline/?inPreviewMode=true`));I(window.parent.document).find("#preview-iframe").attr("src",e)}if(!d.default.production)throw console.error("$stateChangeError when moving from "+r.name+" to "+n.name),a}}),this.initAllStates)this.createAllStates();else{this.registerPeekStates(t.get(this.defaultBasePage));let e=t.get(sessionStorage.getItem(o.Z.getBasePageStorageKey())||this.defaultBasePage);e&&e.name!==this.defaultBasePage&&this.registerPeekStates(e)}return t}],this.baseStates=[],this.peekStates={},this.absoluteUrls=[],e.decorator("resolve",function(e,t){let n=t?t(e):e.resolve;return n.childrenStates&&n.childrenStates.length>0&&n.childrenStates.push(i.once(n.childrenStates.pop())),n}),e.decorator("resolve",function(e,t){let n=t?t(e):e.resolve;for(let e of Object.keys(n)){let t=n[e],s=D(e,e);s.optional&&(delete n[e],n[e=s.name]=t);let r=function(e){if(i.isString(e))return e;let t=e[e.length-1];return i.isString(t)?t:""}(t);if(r){let t=D(r,e);t.searchParents?n[e]=[t.name,e=>e&&e.isLazy?e():e]:console.error("Illegal resolve format. Did you forget to prepend ^?")}if(s.optional){let t=n[e],s=t.slice?t.slice(0,t.length-1):[];n[e]=["$injector",...s,(e,...n)=>{let r=i.once(()=>{let i={};for(let e=0;e<s.length;e++)i[s[e]]=n[e];return e.invoke(t,void 0,i)});return r.isLazy=!0,r}]}}return n}),e.decorator("url",function(e,n){let i=n(e);return i&&(i.exec=function(n,...r){let o=this.regexp.source;RegExp(o.substr(0,o.length-1)+"/").test(n)&&t.invoke(e.resolve.childrenStates||[s.noop]);let a=r?[n].concat(r):[n];return i.constructor.prototype.exec.apply(this,a)}),i}),(t=>{let n=this;e.state=function(...e){return n.addedStates["string"==typeof e[0]?e[0]:e[0].name]=!0,t.apply(this,e)}})(e.state)}}G.$inject=["$stateProvider","$injector"],s.module(w,["ui.router","oc.lazyLoad",u.e1,c.e1,l.moduleName,h.e]).provider(A,G).constant(x,d.default.defaultBasePage).config(["$provide","$ocLazyLoadProvider",(e,t)=>{e.decorator("$state",["$injector","$delegate","$resolve","$q","$$animateJs","$ocLazyLoad","$rootScope",u.HV,c.HV,(e,t,n,r,o,l,d,u,m)=>{t.goPeekState=(...e)=>{if(t.current.onChildStateEnter){let n=e[0],i=t.current.onChildStateEnter(t,n);if(i)return t.go(i.stateName,{...i.args,...e[1]},e[2])}return m.getTopElement().then(n=>{let i=n&&n.name||u.basePage;return t.getPeekStateName(e[0],i).then(n=>(e[0]=n,t.go.apply(t,e)))})},t.leavePeekState=e=>{null==e&&(e=t.current.name);let n=e.lastIndexOf(T);return -1!==n?t.go(e.substring(0,n)):r.when()},t.peekHref=(e,n,i)=>{let s=i?r.when(new c.AE(null,null,i)):m.getTopElement();return s.then(s=>(i=s&&s.name||u.basePage,t.getPeekStateName(e,i).then(e=>t.href(e,n))))},t.isPeekPanelOpen=()=>-1!==t.current.name.indexOf(".peek."),t.getPeekStateName=(n,i)=>i===u.basePage?r.when(i+T+n):m.getElement(i).then(()=>{let e=G.getPanelStateNameFromNextState(t.current.name,i),s=e.lastIndexOf(T),r=t.current.name.substring(s+T.length).split(".")[0],o=n.split(".")[0];if(r===o)return t.current.name.substring(0,s+T.length)+n;let a=n.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),l=RegExp("(^|\\.)"+a+"(\\.|$)"),c=e.search(l);if(-1!==c){let t=RegExp("(^|\\.)"+a+"(\\.)");return c=e.search(t)?c+1:c,e.substring(0,c+n.length)}let d=t.get(e);return"full"===d.panelClass||d.allowChildPeekStates&&-1!==d.peekStates.indexOf(o)?e+T+n:e.substring(0,s+T.length)+n}).then(n=>{let i=function(n){if(!t.get(n.join("."))){let e=n.pop();i(n),n.push(e)}e.invoke((t.get(n.join("."))&&t.get(n.join(".")).resolve||{}).childrenStates||[s.noop])};return i(n.replace(/\n/g,"").replace(/(^[^\(\)]*)\(.*\)$/,"$1").split(".")),n}),t.goCurrentBasePage=()=>t.go(t.getBaseState()),t.goToRoute=(e,n)=>t.go(e,n),t.getBaseState=()=>u.basePage,t.search=(e,n,i)=>{let r=t.params;if(s.isString(e)&&n?r[e]=n:Object.keys(e).forEach(t=>{r[t]=e[t]}),t.current.name)return t.go(t.current.name,r,i)},t.getCurrentUrlParams=()=>{let e=t.$current.url.parameters(),n=Object.create(null);return e.forEach(e=>{t.params[e]&&(n[e]=t.params[e])}),n},t.requireAllStates=function(){let e=this,t=this.get(),n=[];return t.forEach(t=>{t&&null!=t.name&&n.push(e.requireState(t.name))}),r.all(n)},t.requireState=function(e){let t=this,n=e.split("."),o=[];for(let e=0;e<n.length;e++)o.push(n.slice(0,e+1).join("."));let c=()=>{let e=o.shift();if(null==e)return!0;let n=t.get(e);if(!n)return c();let d=[],u=[];if(n.require&&(s.isArray(n.require)||(n.require=[n.require]),d=d.concat(n.require),u.push(n)),n.views&&s.isObject(n.views)&&Object.keys(n.views).forEach(e=>{let t=n.views[e];t.require&&(s.isArray(t.require)||(t.require=[t.require]),d=d.concat(t.require),u.push(t))}),d.length<1)return c();let p=r.defer(),m=[],h=new Map,g=d.map(e=>e().then(t=>(h.set(e,t),t)));return r.all(i.compact(g)).then(()=>{u.forEach(e=>{s.isArray(e.require)&&(e.require.forEach(t=>{let i=h.get(t),r=i.panelDefinition||{},o=r&&r.moduleName||i.moduleName;o&&m.push(l.load({name:o}));let c=r&&r.template||i.template;c&&!e.template&&(e.template=c);let d=r&&r.templateProvider||i.templateProvider;d&&(e.templateProvider=d);let u=r&&r.controllerName||i.controllerName;u&&!e.controller&&(e.controller=u);let p=r&&r.resolve;p&&(e.resolve=s.extend(e.resolve||{},p));let g=r&&r.translations;g&&(e.resolve=s.extend(e.resolve||{},{loadedTranslations:["$q",a.serviceName,(e,t)=>e.all(g.map(e=>t.loadBundle(e)))]}));let f=r&&r.pageTitle;f&&!n.pageTitle&&(n.pageTitle=f)}),e.require=!1)}),r.all(i.compact(m)).then(()=>{p.resolve(c())},e=>{p.reject(e)})},e=>{p.reject(e)}),p.promise};return c()};let h=t.transitionTo;t.transitionTo=function(...e){let t=this,n=e[0];return s.isObject(n)&&(n=n.self.name),r.all([this.requireState(n)]).then(()=>h.apply(t,e))};let g=t.href;t.href=(e,t,n)=>g(e,t,s.extend(n||{},{absolute:!0})),t.getCurrentResolvedValues=function(){return t.$current&&t.$current.locals&&t.$current.locals.resolve?t.$current.locals.resolve.$$values:{}};let b=(e,n)=>{if(!n||!n.name)return!1;if(e===p.c6&&"resolve"in n&&e in n.resolve||e===p.uh&&"resolve"in n&&e in n.resolve)return!0;let s=t.get(i.dropRight(n.name.split(".")).join("."));return b(e,s)};return t.hasCourseInContext=e=>b(p.c6,e),t.hasContentInContext=e=>b(p.uh,e),S.Nd.setRouteHandler({goPeekState:(e,...n)=>(0,E.h)(t.goPeekState(e,...n)),goToRoute:(e,n)=>(0,E.h)(t.goToRoute(e,n)),leavePeekState:e=>(0,E.h)(t.leavePeekState(e)),getPeekHref:(e,n,i)=>(0,E.h)(t.peekHref(e,n,i)),getHref:(e,n,i)=>t.href(e,n,i),search:(e,n)=>(0,E.h)(t.search(e,null,n)),onRouteChanging:e=>{let t=d.$on(f.N.$stateChangeStart,(t,n,i,s,r)=>{let o={toState:n,toParams:i,fromState:s,fromParams:r,preventRouteChange:t.preventDefault.bind(t)};e(o)});return t}}),t}])}]),s.module(w).run(["$rootScope",A,u.HV,x,function(e,t,n,i){let s=sessionStorage.getItem(o.Z.getBasePageStorageKey());s?n.basePage=s:n.basePage=i,e.$on(f.N.$stateChangeSuccess,(n,i,s,r,o)=>{let a=t.hasCourseInContext(r),l=t.hasCourseInContext(i);a!==l&&e.$broadcast(f.N.$stateHasCourseInContextChanged,l,a);let c=t.hasContentInContext(r),d=t.hasContentInContext(i);c!==d&&e.$broadcast(f.N.$stateHasContentInContextChanged,d,c);let u=i.name&&(0,v.zb)(i.name),p=r.name&&(0,v.zb)(r.name);(0,v.ku)(u,p)})}])},675820:function(e,t,n){"use strict";n.d(t,{HV:function(){return c},e1:function(){return l}});var i=n(501),s=n(350383),r=n(211796),o=n(319434);function a(e,t){return function(n,i){t(n,i,e)}}let l="ultra.components.services.unsafe-html",c="unsafe-html";class d{hasEditUnsafeHtmlPermission(e){return e?this.entitlementService.hasSystemEntitlement(o.jx.Modify):this.entitlementService.hasCourseEntitlement(o.jx.Modify)}isAlternateDomainConfigured(){return this.contextService.getSystemInfo().alternateDomainConfigured}canEditUnsafeHtml(e=!1){return this.hasEditUnsafeHtmlPermission(e).then(e=>e&&this.isAlternateDomainConfigured())}constructor(e,t){this.contextService=e,this.entitlementService=t}}d=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([a(0,(0,r.tB)(i.HV)),a(1,(0,r.tB)(s.HV))],d),angular.module(l,[i.e1,s.e1]).service(c,d)},159212:function(e,t,n){"use strict";n.d(t,{HV:function(){return l},e1:function(){return a}});var i=n(464027),s=n(276635),r=n(948319),o=n(625506);let a="ultra.services.windowSize",l="windowSizeService";class c{isSmallBreakpoint(){return this.currentWindowSizeEm<=r.YJ}isMediumBreakpoint(){return this.currentWindowSizeEm>r.YJ&&this.currentWindowSizeEm<=r.MR}isLargeBreakpoint(){return this.currentWindowSizeEm>r.MR}getBreakpointSize(){return this.currentWindowSizeEm<=r.YJ?"small":this.currentWindowSizeEm<=r.MR?"medium":"large"}isWindowSizeAtLeast(e){return this.currentWindowSizeEm>=e}constructor(e){this.$rootScope=e,this.hasQueuedRefreshWindowSizeEm=!1,this.currentWindowSizeEm=o(window).width()/parseFloat(o("html").css("font-size"));let t=(0,s.throttle)(()=>{let e=window.innerWidth/parseFloat(o("html").css("font-size"));e!==this.currentWindowSizeEm&&this.$rootScope.$apply(()=>{this.currentWindowSizeEm=e,this.$rootScope.$broadcast("window-resize",this.currentWindowSizeEm)})},100);window.addEventListener("resize",t)}}c.$inject=["$rootScope"],i.module(a,[]).service(l,c)},613392:function(e,t,n){"use strict";var i,s;n.d(t,{E:function(){return i}}),(s=i||(i={})).ASCENDING="ascending",s.DESCENDING="descending",s.NONE="none",s.OTHER="other"},30918:function(e,t){"use strict";var n,i;(i=n||(n={})).ModifyException="course.assessment.exceptions.MODIFY",i.ViewException="course.assessment.exceptions.VIEW",t.Z=n},519122:function(e,t){"use strict";var n,i;(i=n||(n={})).NothingToGrade="NOTHING_TO_GRADE",i.NeedsGrading="NEEDS_GRADING",i.NeedsPosting="NEEDS_POSTING",i.AllPosted="ALL_POSTED",i.AllGraded="ALL_GRADED",i.Restricted="RESTRICTED",t.Z=n},176037:function(e,t,n){"use strict";var i=n(951248);t.Z=i.GQk},359597:function(e,t,n){"use strict";var i,s;n.d(t,{k:function(){return r}}),(s=i||(i={})).Root="ROOT",s.Interactive="INTERACTIVE",s.Indirect="INDIRECT";let r=()=>Object.values(i);t.Z=i},167745:function(e,t){"use strict";var n,i;(i=n||(n={})).DeleteAdaptiveRelease="course.adaptiverelease.DELETE",i.ModifyAdaptiveRelease="course.adaptiverelease.MODIFY",i.ViewAdaptiveRelease="course.adaptiverelease.VIEW",i.ModifyAdaptiveReleaseDates="course.adaptiverelease.dates.MODIFY",i.DeleteAssessment="course.assessment.DELETE",i.ModifyAssessment="course.assessment.MODIFY",i.ViewAssessment="course.assessment.VIEW",i.ModifyAttendance="course.attendance.MODIFY",i.ViewAttendance="course.attendance.VIEW",i.ViewChildCourse="course.children.VIEW",i.ModifyAllowConversationReplies="course.conversations.allow-replies.MODIFY",i.MessageAllMembersInCourse="course.conversations.message-all-members.CREATE",i.MessageAllActAsInstructorInCourse="course.conversations.message-all-act-as-instructor-roles.CREATE",i.MessageAllStudentsInCourse="course.conversations.message-all-students.CREATE",i.ModifyTimeLimitAccomodation="course.timelimit-exception.MODIFY",i.ModifyDueDateException="course.duedate-exception.MODIFY",i.ViewTimeLimitAccomodation="course.timelimit-exception.VIEW",i.ViewDueDateException="course.duedate-exception.VIEW",i.ViewPreviewStudent="course.user-impersonate.EXECUTE",i.ModifyBannerImage="course.banner.MODIFY",i.ModifyBannerVisibility="course.banner.visibility.MODIFY",i.ViewAnalyticsInstructorReport="course.statistics.report.VIEW",i.ViewAnalyticsStudentReport="course.tools.VIEW",i.ViewCourseSettingsConsole="course.configure-properties.EXECUTE",i.DurationConfiguration="course.configure-duration.EXECUTE",i.ToolConfiguration="system.configure-tools.EXECUTE",t.Z=n},775366:function(e,t,n){"use strict";var i,s;n.d(t,{L:function(){return r}}),(s=i||(i={})).Discussions="discussions",s.Participants="participants",s.StudentActivity="studentActivity";let r=e=>Object.values(i).find(t=>t.toLowerCase()===e.toLowerCase());t.Z=i},515480:function(e,t){"use strict";var n,i;(i=n||(n={})).Assign="assign",i.Unassign="unassign",i.Delete="delete",i.Retain="retain",t.Z=n},319434:function(e,t,n){"use strict";n.d(t,{mV:function(){return z},iL:function(){return W.Z},Pq:function(){return L},uo:function(){return j},MN:function(){return N.Z},eo:function(){return Z},GQ:function(){return O.Z},e6:function(){return M.Z},MQ:function(){return H},s7:function(){return K.Z},hI:function(){return x},b0:function(){return X},kZ:function(){return F.Z},Zg:function(){return Y},pQ:function(){return Q},i3:function(){return U.Z},e3:function(){return V},GZ:function(){return q},lP:function(){return ee.Z},dF:function(){return et},ZG:function(){return _},jH:function(){return en},jx:function(){return J}}),(g=f||(f={})).Text="textBlock",g.Html="htmlBlock",g.File="fileBlock",g.AttemptFile="attemptFileBlock";var i,s,r,o,a,l,c,d,u,p,m,h,g,f,b,v,y,C,S,E,I,w,A,k,x,T,P,D,G,R,B,L=f;(i=b||(b={})).SingleText="SingleText",i.SingleFile="SingleFile",i.TextAndFiles="TextAndFiles",(s=v||(v={})).Add="ADD",s.Subtract="SUBTRACT",s.Multiply="MULTIPLY",s.Divide="DIVIDE",s.Open_Parenthesis="OPEN_PARENTHESIS",s.Close_Parenthesis="CLOSE_PARENTHESIS",s.Value="VALUE";var N=n(519122),O=n(176037),M=n(359597);class ${constructor(e,t){this.keys=t,this.value=e,this.keys.buttonKey||(this.keys.buttonKey="base.courses.conversion.ok")}}$.ConversionInProgress=new $("ConversionInProgress",{titleKey:"base.courses.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.courses.conversion.beingConvertedAlert"}),$.ConversionComplete=new $("ConversionComplete",{titleKey:"base.courses.conversion.hasBeenConverted",bodyKey:"base.courses.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.courses.conversion.hasBeenConvertedAlert"}),$.OrgConversionInProgress=new $("OrgConversionInProgress",{titleKey:"base.organizations.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.organizations.conversion.beingConvertedAlert"}),$.OrgConversionComplete=new $("OrgConversionComplete",{titleKey:"base.organizations.conversion.hasBeenConverted",bodyKey:"base.organizations.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.organizations.conversion.hasBeenConvertedAlert"}),$.StudentTryAgain=new $("StudentTryAgain",{titleKey:"base.courses.noAccess.studentCurrentlyNoAccess",bodyKey:"base.courses.noAccess.studentTryAgain"}),$.StudentNoLongerAccessible=new $("StudentNoLongerAccessible",{titleKey:"base.courses.noAccess.studentCourseHasEnded",bodyKey:"base.courses.noAccess.studentNoLongerAccess"}),$.ParticipantTryAgain=new $("ParticipantTryAgain",{titleKey:"base.organizations.noAccess.studentCurrentlyNoAccess",bodyKey:"base.organizations.noAccess.studentTryAgain"}),$.ParticipantNoLongerAccessible=new $("ParitcipantNoLongerAccessible",{titleKey:"base.organizations.noAccess.studentCourseHasEnded",bodyKey:"base.organizations.noAccess.studentNoLongerAccess"}),$.None=new $("None",{titleKey:"",bodyKey:""});var H=$,F=n(775366);(r=y||(y={})).Assignment="Assignment",r.Test="Test",r.Exam="Exam",r.Homework="Homework",r.Presentation="Presentation",r.Quiz="Quiz",(o=C||(C={})).Letter="Letter",o.Percentage="Percentage",o.Points="Points",o.Text="Text";var U=n(705898);(a=S||(S={})).Email="email",a.Mobile="mobile",a.SMS="sms",a.Voice="voice",a.Dashboard="dashboard";var V=S;n(30380),(l=E||(E={})).Available="AVAILABLE",l.Opened="OPENED",l.Started="STARTED",l.Saved="SAVED",l.Submitted="SUBMITTED";var _=E;n(507234),(c=I||(I={})).SingleOccurrence="S",c.PeriodicOccurrence="P";var q=I;(d=w||(w={})).ViewPostedCourseAnnouncement="course.announcements.VIEW",d.ViewUnpostedCourseAnnouncement="course.announcements.admin.VIEW",d.CreateCourseAnnouncement="course.announcements.CREATE",d.ModifyCourseAnnouncement="course.announcements.MODIFY",d.DeleteCourseAnnouncement="course.announcements.DELETE",d.ViewPostedSystemAnnouncement="system.announcements.VIEW",d.ViewUnpostedSystemAnnouncement="system.announcements.admin.VIEW",d.CreateSystemAnnouncement="system.announcements.CREATE",d.ModifySystemAnnouncement="system.announcements.MODIFY",d.DeleteSystemAnnouncement="system.announcements.DELETE";var z=w,W=n(30918);(A||(A={})).ViewCalendar="course.calendar.VIEW";var j=A;(u=k||(k={})).CreateContent="course.content.CREATE",u.DeleteContent="course.content.DELETE",u.ModifyContent="course.content.MODIFY",u.ViewContent="course.content.VIEW",u.ViewAsDesigner="course.content.designer.VIEW",u.DeployAssessment="course.content.assessment.deploy.EXECUTE",u.ModifyContentAvailability="course.content.availability.MODIFY";var Z=k,K=n(167745);(x||(x={})).CourseExportArchiveWithPassword="course.archive.user.password.EXECUTE",(p=T||(T={})).CreateRubrics="course.rubrics.CREATE",p.ModifyRubrics="course.rubrics.MODIFY",p.ViewRubrics="course.rubrics.VIEW";var X=T;(P||(P={})).EmailAllUsers="course.email-all-users.EXECUTE";var Y=P;(m=D||(D={})).CreateGroups="course.groups.CREATE",m.DeleteGroups="course.groups.DELETE",m.ModifyGroups="course.groups.MODIFY",m.ViewGroups="course.groups.VIEW",m.ViewGroupsAsAdmin="course.groups.admin.VIEW",m.ManageGroupMembership="course.group-user.manage.EXECUTE";var Q=D;(G||(G={})).Modify="content.embedded-iframe.MODIFY";var J=G,ee=n(301256);(h=R||(R={})).CreatePortalOptionsModuleManagement="system.portaloptions.managemodules.CREATE",h.ModifyPortalOptionsModuleManagement="system.portaloptions.managemodules.MODIFY",h.ViewBrand="system.portaloptions.brand.VIEW",h.CreateBrand="system.portaloptions.brand.CREATE",h.ModifyBrand="system.portaloptions.brand.MODIFY",h.DeleteBrand="system.portaloptions.brand.DELETE",h.ModifyUltraThemeData="system.ultra.themedata.MODIFY",h.ViewBuildingBlock="system.buildingblocks.VIEW";var et=R;(B||(B={})).ModifyContent="content.trustedcontent.MODIFY";var en=B},705898:function(e,t){"use strict";var n,i;(i=n||(n={})).Outline="outline",i.Inline="inline",t.Z=n},30380:function(e,t){"use strict";var n,i;(i=n||(n={})).NotStarted="NotStarted",i.Started="Started",i.Completed="Completed",i.PastDue="PastDue",i.Unavailable="Unavailable",t.Z=n},821005:function(e,t){"use strict";var n,i;(i=n||(n={})).CcAdvisors="CC_ADVISORS",i.DisableAdvisorViewAllStudents="DISABLE_ADVISOR_VIEW_ALL_STUDENTS",i.EmailBranding="EMAIL_BRANDING",i.EmailSender="EMAIL_SENDER",i.EnableLogOut="ENABLE_LOG_OUT",i.InstructorViewMajorDegreeColumn="INSTRUCTOR_VIEW_MAJOR_DEGREE_COLUMN",i.OverrideLanguagePack="OVERRIDE_LANGUAGE_PACK",i.TypeaheadCourseLimit="TYPEAHEAD_COURSE_LIMIT",i.TypeaheadStudentLimit="TYPEAHEAD_STUDENT_LIMIT",t.Z=n},301256:function(e,t){"use strict";var n,i;(i=n||(n={})).ViewAdmin="system.admin.VIEW",i.ViewAdminTop="system.administration.top.VIEW",i.ViewAdminSupportPanel="system.admin.support.panel.VIEW",i.ModifyCustomCss="system.ultra.customCSS.MODIFY",i.ViewBrands="system.portaloptions.brand.VIEW",i.CreateBrand="system.portaloptions.brand.CREATE",i.ModifyBrand="system.portaloptions.brand.MODIFY",i.DeleteBrand="system.portaloptions.brand.DELETE",t.Z=n},507234:function(e,t){"use strict";var n,i;(i=n||(n={})).Continuous="CONTINUOUS",i.DateRange="DATE_RANGE",i.FixedNumDays="FIXED_NUM_DAYS",t.Z=n},811339:function(e,t,n){"use strict";n.d(t,{e:function(){return h}}),n(788093);var i=n(625506),s=n(464027),r=n(319434),o=n(291146),a=n(919038),l=n(168132),c=n(578332),d=n(247126),u=n(513174),p=n(759485),m=n(470269);let h="ultra.base.routes";s.module(h,[o.moduleName,l.e1,u.e1]).config([d.e2,u.e2,(e,t)=>{e.baseState("base.calendar",{url:"^/calendar",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")],"?courseMembershipsLoader":s.noop},peekStates:[m.Z5.Calendar.CALENDAR_SETTINGS,m.Z5.Calendar.CREATE_EVENT,m.Z5.Calendar.EDIT_EVENT,m.Z5.Calendar.VIEW_EVENT,m.Z5.Calendar.COURSE_SCHEDULE,m.Z5.Calendar.OFFICE_HOURS,"content-manage","assignment","assessment","course",m.Z5.Lti.LTI,"scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview"],require:()=>Promise.all([n.e(19644),n.e(19166),n.e(31189),n.e(27742),n.e(68366)]).then(n.bind(n,250230)),pageTitle:"base.nav.calendar"}).baseState("base.deadline",{url:"^/deadline",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")],"?courseMembershipsLoader":s.noop},peekStates:[m.Z5.Calendar.CALENDAR_SETTINGS,m.Z5.Calendar.CREATE_EVENT,m.Z5.Calendar.EDIT_EVENT,m.Z5.Calendar.VIEW_EVENT,m.Z5.Calendar.COURSE_SCHEDULE,m.Z5.Calendar.OFFICE_HOURS,m.Z5.Lti.LTI,m.Z5.Lti.LTI_LAUNCH_PEEK,"content-manage","assignment","course","assessment","scorm-overview"],require:()=>Promise.all([n.e(19644),n.e(19166),n.e(31189),n.e(27742),n.e(68366)]).then(n.bind(n,250230)),pageTitle:"base.nav.calendar"}).baseState("base.courses",{url:"^/course?enrollmentMessage",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/courses/base-courses")]},peekStates:["course","external",m.Z5.Calendar.COURSE_SCHEDULE,m.Z5.Course.EDIT_BANNER],peekViewName:"courses-base",require:()=>Promise.all([n.e(25900),n.e(21235),n.e(51361),n.e(77457),n.e(33196)]).then(n.bind(n,113757)),pageTitle:"base.nav.courses"}).baseState("base.grades",{url:"^/grades",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/grades/base-grades")],"?courseMembershipsLoader":[s.noop]},require:()=>Promise.all([n.e(25900),n.e(21235),n.e(97809),n.e(19166),n.e(66985),n.e(35996)]).then(n.bind(n,940647)),peekStates:["assessment","assignment",m.Z5.Grade.GRADE_AND_FEEDBACK,"gradebook-item","telemetry","course","discussion",m.Z5.Lti.LTI,"scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview",m.Z5.Journal.JOURNAL,m.Z5.Telemetry.INSTRUCTOR_CLASS,m.Z5.Telemetry.INSTRUCTOR_DETAILS,m.Z5.Telemetry.STUDENT_PROGRESS,"overall-grade-student","attendance","attendance-student-view"],pageTitle:"base.nav.grades"}).baseState("base.messages",{url:"^/messages",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/messages/base-messages")],[u.gc]:t.resolve},require:()=>Promise.all([n.e(25900),n.e(27459),n.e(21235),n.e(8988),n.e(6216),n.e(60311)]).then(n.bind(n,866333)),peekStates:["create-message","edit-message",m.Z5.Course.COURSE_MESSAGE,"course"],pageTitle:"base.nav.messages"}).baseState("base.organizations",{url:"^/organization?enrollmentMessage",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/courses/base-courses")]},peekStates:["course","external",m.Z5.Calendar.COURSE_SCHEDULE,m.Z5.Course.EDIT_BANNER],peekViewName:"courses-base",require:()=>Promise.all([n.e(25900),n.e(21235),n.e(51361),n.e(77457),n.e(33196)]).then(n.bind(n,113757)),pageTitle:"base.nav.organizations"}).baseState(m.Z5.Profile.PROFILE_BASE,{url:"^/profile",resolve:{userConfiguration:[l.EA.HV,e=>e.getUserConfiguration()],translations:[o.serviceName,e=>e.loadBundle("features/base/profile/base-profile")],isMobileDistributorActive:["$q",l.g8.H,(e,t)=>t.$build().courseSettings.$new(r.e3.Mobile).$fetch().$allow([400]).$then(e=>!!e.settings)],memberships:[c.HV,e=>e.reloadStreamMemberships()]},require:()=>Promise.all([n.e(4729),n.e(49273),n.e(26217),n.e(77564),n.e(68864)]).then(n.bind(n,207859)),peekStates:["notification-settings",m.Z5.Profile.UPDATE_AVATAR_PEEK,m.Z5.Profile.UPDATE_PROFILE_PEEK,m.Z5.Profile.UPDATE_LANGUAGE_PEEK,m.Z5.Profile.UPDATE_PASSWORD_PEEK,"privacy"],pageTitle:"base.nav.profile",onEnter:["$location",e=>{e.search("noCache",null)}]}).baseState("base.recentActivity",{resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/stream/base-stream")],memberships:[c.HV,e=>e.reloadStreamMemberships()],"?courseMembershipsLoader":s.noop},peekStates:["announcement",m.Z5.Announcement.ANNOUNCEMENT_DETAIL,"assignment","assessment","content-manage","content-group","course","discussions",m.Z5.Calendar.EDIT_EVENT,m.Z5.Calendar.VIEW_EVENT,"gradebook-item","stream-message","telemetry",m.Z5.Lti.LTI,"content-group-enroll","notification-create","notification-settings","scorm-overview","scorm-launch-frame","scorm",m.Z5.Telemetry.INSTRUCTOR_CLASS,m.Z5.Telemetry.INSTRUCTOR_DETAILS,m.Z5.Telemetry.STUDENT_HIGH_PERFORMANCE,m.Z5.Telemetry.STUDENT_LOW_ACTIVITY,m.Z5.Telemetry.STUDENT_LOW_GRADES,m.Z5.Telemetry.STUDENT_PROGRESS,m.Z5.Telemetry.STUDENT_FIND_A_STUDY_PARTNER],peekViewName:"base-recentActivity-base",url:"^/stream",require:()=>Promise.all([n.e(90917),n.e(19620),n.e(24956),n.e(5426)]).then(n.bind(n,281113)),pageTitle:"base.nav.recentActivity"}).baseState("base.tools",{url:"^/tools",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/tools/base-tools")]},peekStates:[m.Z5.Lti.LTI],require:()=>n.e(81099).then(n.bind(n,781099)),pageTitle:"base.nav.tools"}).baseState("base.admin",{resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/admin/base-admin")]},systemEntitlement:r.lP.ViewAdmin,onEnter:()=>{i("body").addClass("base-admin-open")},onExit:()=>{i("body").removeClass("base-admin-open")},url:"^/admin",require:()=>n.e(18229).then(n.bind(n,318229)),peekStates:["course","localization","brands","notification-admin",m.Z5.Admin.ULTRA_SETTINGS_PEEK,m.Z5.Admin.ULTRA_EDIT_APPROVED_PRONOUNS_PEEK],pageTitle:"base.nav.admin"}).peekState("localization",{url:"/localization?launchUrl",require:()=>n.e(34705).then(n.bind(n,734705)),pageTitle:"base.nav.localization",panelClass:"full",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/admin/localization")],enterCheck:[d.HV,"$stateParams",(e,t)=>{if(!t.launchUrl)return e.goToRoute("base.admin")}]}}).peekState(m.Z5.Admin.ULTRA_SETTINGS_PEEK,{url:"/ultra-settings",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(66350),n.e(22258),n.e(90119),n.e(17200)]).then(n.bind(n,341097)),pageTitle:"base.nav.ultra-settings-admin",panelClass:"full"}).peekState("notification-admin",{url:"/notification",require:()=>n.e(23462).then(n.bind(n,723462)),pageTitle:"base.nav.notification-admin",panelClass:"full"}).peekState(m.Z5.Admin.ULTRA_EDIT_APPROVED_PRONOUNS_PEEK,{url:"/edit-pronouns",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(66350),n.e(22258),n.e(90119),n.e(78506)]).then(n.bind(n,633885)),pageTitle:"base.nav.edit-pronouns-admin",panelClass:"peek"}).baseState("base.redirect",{url:"^/redirect?userId&contentId&courseId&eventType&sourceType&sourceId&redirectType&legacyUrl&parentId&screen",require:()=>n.e(50809).then(n.bind(n,650809))}).baseState("base.institution-page",{url:"^/institution-page",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(62072)]).then(n.bind(n,362072)),peekStates:["allLinks",m.Z5.Lti.LTI],pageTitle:"base.nav.institutionPage",resolve:{ipVariantId:[a.HV,d.HV,(e,t)=>e.getEffectiveVariantIdWithPermissions().then(({variantId:e,canView:n})=>{if(n)return e;t.goToRoute("base.recentActivity")},()=>t.goToRoute("base.recentActivity"))]}}).baseState("base.institution-page-admin",{url:"^/institution-page/admin/:variantId",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(62072)]).then(n.bind(n,362072)),peekStates:["allLinks","editModule","editPageImage","createModule",m.Z5.Lti.LTI,"brand-detail"],pageTitle:"base.nav.institutionPage",params:{variantId:"default"},resolve:{ipVariantId:[a.HV,d.HV,"$stateParams",(e,t,n)=>e.getUserCanEdit("default").then(e=>(e||t.goToRoute("base.recentActivity"),n.variantId),()=>t.goToRoute("base.recentActivity"))],testResolver:["ipVariantId",e=>e]}}).state("institution",{onEnter:()=>{window.location.href=p.uI("/institution")}}).baseState("base.course-catalog",{url:"^/catalog",require:()=>n.e(69785).then(n.bind(n,469785)),pageTitle:"base.nav.catalog",peekStates:["course"],resolve:{translations:[o.serviceName,e=>e.loadBundle("features/course/course-catalog")]}}).baseState("base.organization-catalog",{url:"^/organization-catalog",require:()=>n.e(69785).then(n.bind(n,469785)),pageTitle:"base.nav.orgCatalog",peekStates:["course"],resolve:{translations:[o.serviceName,e=>e.loadBundle("features/course/course-catalog")]}}).baseState(m.Z5.Integration.INTEGRATION_BASE,{url:"^/integration/:routeName?params",require:()=>n.e(14525).then(n.bind(n,114525))})}])},11407:function(e,t,n){"use strict";n.d(t,{BP:function(){return l},Kn:function(){return i},Mc:function(){return o},dX:function(){return a},j7:function(){return r},sg:function(){return s}});let i="EVENT_ATTEMPT_SAVING_START",s="EVENT_ATTEMPT_SAVING_DONE",r="EVENT_ATTEMPT_SUBMITTING_START",o="EVENT_ATTEMPT_SUBMITTING_DONE",a="EVENT_ATTEMPT_TRIGGER_SAVE",l="bb-assessment-persist-pending-saves"},838044:function(e,t,n){"use strict";n.d(t,{db:function(){return c},e1:function(){return l},ef:function(){return d}});var i=n(464027),s=n(291146),r=n(346523),o=n(247126),a=n(662142);let l="ultra.course.content.assessment.question-goal-alignment",c="question-goal-alignment",d="question-goal-alignment-for-student",u=["course","goal-alignment","goal"];class p extends a.Z{resolveGoalAlignableContent(){return["$q","currentContent","currentCourse",s.serviceName,o.HV,"$injector",(e,t,n,i,s,o)=>void 0!==t&&void 0===t.id?e.when([]):e.when(null).then(()=>{if(void 0===t)return o.invoke(r.Z.currentContent,null,{currentCourse:n,translations:{}}).then(e=>{t=e})}).then(()=>e.all([n.assessments.$buildRaw({id:t.getDeployedAssessment().assessment.id}).questions.$find(s.nextParams.questionId,{expand:"alignedGoals"}).$asPromise(),i.loadBundle(`features/${u.join("/")}`)]).then(([e])=>this.setupGoalAlignableContent(e,i,s)))]}getPeekStateName(){return c}getOverrideSubTitle(){return[s.serviceName,o.HV,(e,t)=>e.translateSync({locale:null,key:"components.directives.assessment-question.question-title",params:{index:t.nextParams.questionIndex},noWrap:!0})]}setupGoalAlignableContent(e,t,n){return[{getContentTitleForGoalAlignment:()=>t.translateSync({locale:null,key:`${u.join(".")}.goalsAlignedWithThisQuestion`}),getContentIdForGoalAlignment(){return e.getContentIdForGoalAlignment()},isCurrentUserEligibleToAlignGoals(){return e.isCurrentUserEligibleToAlignGoals()},alignedGoals:e.alignedGoals.map(t=>(t.content=e,t))}]}constructor(...e){super(...e),this.url="/goalAlignment/:questionId/:questionIndex",this.panelClass="peek assessment-question-goal-peek"}}p.$inject=["$injector","$q"];class m extends p{resolveGoalAlignableContent(){return["$q","currentCourse","contentData",s.serviceName,o.HV,(e,t,n,s,r)=>{let o=e.when(null);return n.courseContent.isGroupContent&&n.groupAttempt?o=t.gradebook.groupAttempts.$find(n.groupAttempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise():!n.courseContent.isGroupContent&&n.attempt&&(o=t.gradebook.attempts.$find(n.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),e.all([o,s.loadBundle(`features/${u.join("/")}`),s.loadBundle("components/directives/assessment/assessment-question")]).then(([e])=>{let t={};if(e){let s=e.getToolAttemptDetailItem(n.gradingColumn.scoreProviderHandle);(s&&s.questionAttempts||[]).forEach(e=>{e.question&&e.question.id===r.nextParams.questionId&&(t=i.extend(e.question,{getContentIdForGoalAlignment(){return`blackboard.data.qti.asi.AsiObject;${e.question.id}`},isCurrentUserEligibleToAlignGoals(){return!1}}))})}return this.setupGoalAlignableContent(t,s,r)})}]}getPeekStateName(){return d}}i.module(l,[o.e1,s.moduleName]).config([o.e2,e=>{[new p,new m].forEach(t=>{e.peekState(t.getPeekStateName(),t)})}])},396685:function(e,t,n){"use strict";n.d(t,{e:function(){return l}}),n(788093);var i=n(464027),s=n(291146),r=n(822658),o=n(247126),a=n(470269);let l="ultra.course.contentCreate.routes";i.module(l,[s.moduleName,r.e1,o.e1]).config([o.e2,r.e2,(e,t)=>{e.peekState("content-manage.create.document",{panelClass:"full",resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")],[r.gc]:t.resolve},reloadOnSearch:!1,peekViewName:"document-peek@",url:"/document",require:()=>Promise.all([n.e(62101),n.e(27459),n.e(9263),n.e(74511)]).then(n.bind(n,497739)),peekStates:[a.XO.DOCUMENT,"document-settings","conversations","edit-file-settings",a.BQ.COURSE_MESSAGE,a.UM.LTI,a.cw.CONTENT_MARKET,a.xh.CONTENT_COLLECTION,a.XO.CONDITIONAL_RELEASE_PEEK_PANEL,a.xh.CONTENT_COLLECTION_PICKER],pageTitle:"course.content.document.title"}).peekState(a.XO.DOCUMENT,{panelClass:"full",resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")],[r.gc]:t.resolve},peekViewName:"document-peek@",url:"/document/:id?courseId&view",require:()=>Promise.all([n.e(62101),n.e(27459),n.e(9263),n.e(74511)]).then(n.bind(n,497739)),peekStates:["document-settings","conversations","edit-file-settings",a.BQ.COURSE_MESSAGE,a.UM.LTI,a.cw.CONTENT_MARKET,a.XO.CONDITIONAL_RELEASE_PEEK_PANEL,a.xh.CONTENT_COLLECTION_PICKER,a.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES],pageTitle:"course.content.document.title"}).peekState(a.rJ.WEB_LINK_LAUNCH_FRAME,{panelClass:"full",resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")],[r.gc]:t.resolve},url:"/launchFrame?contentId&toolHref",require:()=>n.e(2407).then(n.bind(n,402407)),pageTitle:"courseCore.course.webLinkLaunchFrame.title"}).peekState("document-settings",{resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/document-settings/:id",params:{focusEleId:null},require:()=>Promise.all([n.e(9263),n.e(44666)]).then(n.bind(n,44666)),peekViewName:"document-settings-peek",allowChildPeekStates:!0,peekStates:[a.mL.ADD_GOALS],pageTitle:"course.content.document.settings.header"}),e.peekState("content-manage",{abstract:!0,peekStates:["gradebook-item"]}).peekState(a.XO.CREATE_CONTENT_PEEK_PANEL,{url:"/create?parentId&positionBefore&positionAfter&id",resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")]},peekStates:["discussion","gradebook-item",a.Eg.JOURNAL],require:[()=>Promise.all([n.e(9263),n.e(38374)]).then(n.bind(n,638374)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],pageTitle:"course.content.createItem"}).peekState("content-manage.create.folder",{resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/folder",require:[()=>Promise.all([n.e(9263),n.e(51080)]).then(n.bind(n,751080)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],pageTitle:"course.content.createFolder"}).peekState(a.XO.CREATE_LEARNING_MODULE_PEEK_PANEL,{resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/learning-modules",require:[()=>Promise.all([n.e(9263),n.e(75552)]).then(n.bind(n,375552)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],pageTitle:"course.content.createLearningModule"}).peekState("content-manage.create.link",{panelClass:"full",resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/link",require:[()=>Promise.all([n.e(9263),n.e(57906),n.e(66514)]).then(n.bind(n,457906)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:[a.mL.ADD_GOALS],pageTitle:"course.content.createLink"}).peekState("content-manage.create.link.legacyVersion",{panelClass:"peek",resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/link",require:[()=>Promise.all([n.e(9263),n.e(57906),n.e(66514)]).then(n.bind(n,457906)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:[a.mL.ADD_GOALS],pageTitle:"course.content.createLink"}).peekState("content-manage.create.lti",{resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/lti",require:[()=>Promise.all([n.e(9263),n.e(80528),n.e(26498)]).then(n.bind(n,380528)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:[a.mL.ADD_GOALS],pageTitle:"course.content.createLti"}).peekState("content-manage.create.file",{resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/file",require:[()=>Promise.all([n.e(9263),n.e(74925),n.e(37802)]).then(n.bind(n,474925)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],pageTitle:"course.content.fileTitlePlaceholder"}).peekState("content-manage.edit",{abstract:!0,resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/goal-alignment/goal")]},url:"/edit"}).peekState("content-manage.edit.folder",{resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/folder/:id?focusEleId",require:[()=>Promise.all([n.e(9263),n.e(51080)]).then(n.bind(n,751080)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],peekStates:[a.XO.CONDITIONAL_RELEASE_PEEK_PANEL],allowChildPeekStates:!0,pageTitle:"course.content.editFolder"}).peekState(a.XO.EDIT_LEARNING_MODULE_PEEK_PANEL,{resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/learning-modules/:id?focusEleId",require:[()=>Promise.all([n.e(9263),n.e(75552)]).then(n.bind(n,375552)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],peekStates:[a.XO.CONDITIONAL_RELEASE_PEEK_PANEL],allowChildPeekStates:!0,pageTitle:"course.content.editLearningModule"}).peekState("content-manage.edit.file",{resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/file/:id?focusEleId",require:[()=>Promise.all([n.e(9263),n.e(74925),n.e(37802)]).then(n.bind(n,474925)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],peekViewName:"file-goal-peek",allowChildPeekStates:!0,peekStates:[a.mL.ADD_GOALS,a.XO.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.file"}).peekState("content-manage.edit.link",{resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/link/:id?focusEleId",require:[()=>Promise.all([n.e(9263),n.e(57906),n.e(66514)]).then(n.bind(n,457906)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:[a.mL.ADD_GOALS,a.XO.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.editLink"}).peekState("content-manage.edit.lti",{resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/lti/:id?focusEleId",require:[()=>Promise.all([n.e(9263),n.e(80528),n.e(26498)]).then(n.bind(n,380528)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:[a.mL.ADD_GOALS,a.XO.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.editLti"}).peekState("content-manage.edit.placement",{resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/placement/:id",require:[()=>Promise.all([n.e(9263),n.e(75004)]).then(n.bind(n,875004)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],peekViewName:"placement-goal-peek",peekStates:[a.mL.ADD_GOALS,a.XO.CONDITIONAL_RELEASE_PEEK_PANEL],allowChildPeekStates:!0,pageTitle:"course.content.editPlacement"}).peekState("content-manage.import",{resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/import/content-import"),t.loadBundle("features/course/content/course-content")])]},url:"/import?parentId&targetCourseId&positionBefore&positionAfter",require:[()=>n.e(1200).then(n.bind(n,1200)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],pageTitle:"course.content.import.title"}).peekState(a.XO.COPY_CONTENT_PEEK_PANEL,{resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/copy/content-copy"),t.loadBundle("features/course/content/course-content")])]},url:"/copy?parentId&targetCourseId&positionBefore&positionAfter",require:[()=>Promise.all([n.e(21235),n.e(27649),n.e(91237)]).then(n.bind(n,827649)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],pageTitle:"course.content.copy.title",panelClass:"full"}).peekState(a.XO.IMPORT_REPORT_PEEK_PANEL,{resolve:{translations:[s.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},url:"/importReport/:id",require:()=>Promise.all([n.e(87942),n.e(70415)]).then(n.bind(n,539360)),pageTitle:"ultra.convert.analysis.importDetailsTitle"}).peekState(a.XO.COPY_REPORT_PEEK_PANEL,{resolve:{translations:[s.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},url:"/copyReport/:id",require:()=>Promise.all([n.e(87942),n.e(33243)]).then(n.bind(n,471281)),pageTitle:"ultra.convert.analysis.copyDetailsTitle"}).peekState(a.XO.COPY_DETAILS_PEEK_PANEL,{resolve:{translations:[s.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},url:"/copyDetails",require:()=>Promise.all([n.e(87942),n.e(33243)]).then(n.bind(n,471281)),pageTitle:"ultra.convert.analysis.copyDetailsTitle"}).peekState(a.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,{panelClass:"full",resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/progress/:id",require:()=>Promise.all([n.e(9263),n.e(4754)]).then(n.bind(n,404754)),pageTitle:"course.content.progress.pageTitle",peekStates:[a.BQ.COURSE_MESSAGE,a.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES],allowChildPeekStates:!0,peekViewName:"progress-peek@"})}])},376095:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},Ze:function(){return p},_b:function(){return m},e1:function(){return d}});var i=n(276635),s=n(464027),r=n(291146),o=n(346523),a=n(247126),l=n(662142),c=n(408027);let d="ultra.course.content.assessment.content-goal-alignment",u="ultra.course.content.assessment.content-goal-alignment.service",p="content-goal-alignment",m="content-goal-alignment-for-student",h=["course","goal-alignment","goal"],g="refreshCache";class f{isReady(){return null!==this.cachedGoalAlignment||this.isLoading}updataState(){this.cachedGoalAlignment=null,this.isLoading=!0}getData(){if(null===this.cachedGoalAlignment){this.defers=this.defers||[];let e=this.$q.defer();return this.defers.push(e),e.promise}return this.cachedGoalAlignment}updateData(e){return this.cachedGoalAlignment=e,this.isLoading=!1,(this.defers||[]).forEach(e=>{e.resolve(this.cachedGoalAlignment)}),this.defers=null,this.cachedGoalAlignment}cleanData(){this.cachedGoalAlignment=null,this.isLoading=!1}constructor(e){this.$q=null,this.defers=null,this.cachedGoalAlignment=null,this.isLoading=!1,this.$q=e}}class b extends l.Z{getCache(e){return b.cache=b.cache||new f(e)}resolveGoalAlignableContent(){return["$q","currentContent","currentCourse","currentColumn",r.serviceName,"$injector",g,(e,t,n,i,r,a,l=!1)=>{if(t&&!t.id)return e.when([]);let d=this.getCache(e);return!l&&d.isReady()?e.when(d.getData()):(d.updataState(),e.when(null).then(()=>{if(!t)return a.invoke(o.Z.currentContent,null,{currentCourse:n,translations:{}}).then(e=>{t=e})}).then(()=>{if(!i)return a.invoke(o.Z.currentColumn,null,{currentCourse:n,currentContent:t}).then(e=>{i=e})}).then(()=>e.all([n.contents.$find(t.id,{expand:"alignedGoals,permissions"}).$asPromise(),n.assessments.$buildRaw({id:t.getDeployedAssessment().assessment.id}).questions.$fetch({expand:"alignedGoals"}).$asPromise(),n.gradebook.columns.$find(i.id,{expand:"associatedRubrics,rubricAssociations.rubricDefinition.alignedGoals,rubricAssociations.rubricDefinition.permissions,rubricAssociations.rubricDefinition.rows.alignedGoals"}).$asPromise(),r.loadBundle(`features/${h.join("/")}`)]).then(([e,t,i])=>{let o=1,a=t.map(e=>{if(c.QuestionType.PresentationOnly!==e.questionType){let t=o++;return s.extend(e,{getContentTitleForGoalAlignment:()=>r.translateSync({locale:n.locale,key:"components.directives.assessment-question.question-title",params:{index:t}})})}return e});return this.groupGoals(n.contents.$buildRaw(e),a,i,r)})).then(e=>d.updateData(e)))}]}getPeekStateName(){return p}groupGoals(e,t,n,r){let o=n.rubricAssociations&&n.rubricAssociations.length>0?n.rubricAssociations[0].rubricDefinition:{},a=e.isTest()?"goalsAlignedWithTest":"goalsAlignedWithAssignment";return[{getContentTitleForGoalAlignment:()=>r.translateSync({locale:null,key:`${h.join(".")}.${a}`}),getContentIdForGoalAlignment:s.bind(e,e.getContentIdForGoalAlignment),isCurrentUserEligibleToAlignGoals:s.bind(e,e.isCurrentUserEligibleToAlignGoals),alignedGoals:e.alignedGoals?e.alignedGoals.map(t=>(t.content=e,t)):[],coreContent:e},{getContentTitleForGoalAlignment:()=>r.translateSync({locale:null,key:`${h.join(".")}.goalsAlignedWithQuestions`}),getContentIdForGoalAlignment(){return e.getContentIdForGoalAlignment()+".all.questions"},isCurrentUserEligibleToAlignGoals(){return!1},alignedGoals:i.flatten(t.map(e=>e.alignedGoals?e.alignedGoals.map(t=>(t.content=e,t)):[]))},{getContentTitleForGoalAlignment:()=>r.translateSync({locale:null,key:`${h.join(".")}.goalsAlignedWithRubric`}),getContentIdForGoalAlignment(){return e.getContentIdForGoalAlignment()+".all.rubricrows"},isCurrentUserEligibleToAlignGoals(){return!1},alignedGoals:i.flatten((o.rows||[]).map(e=>e.alignedGoals.map(t=>(e.getContentTitleForGoalAlignment=()=>e.header,e.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+this.id},t.content=e,t))))}]}getOverrideSubTitle(){return["currentCourse","currentContent",(e,t)=>t.id?e.contents.$find(t.id).$asPromise().then(e=>e.title):""]}constructor(...e){super(...e),this.panelClass="peek content-assessment-goal-peek"}}b.$inject=["$injector","$q"];class v extends b{resolveGoalAlignableContent(e){return["$q","currentCourse","contentData",r.serviceName,(t,n,i,r)=>{let o=t.when(null);return e?o=t.when(e):i.courseContent.isGroupContent&&i.groupAttempt?o=i.gradingColumn.getGroupAttemptByGroupAssociationId(i.courseContent.assignedGroups[0].groupAssociationId):!i.courseContent.isGroupContent&&i.attempt&&(o=n.gradebook.attempts.$find(i.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),t.all([i.courseContent.alignedGoals?i.courseContent.$asPromise():n.contents.$find(i.courseContent.id,{expand:"alignedGoals"}).$asPromise(),o,n.gradebook.columns.$find(i.gradingColumn.id,{expand:"associatedRubrics,rubricAssociations.rubricDefinition.alignedGoals,rubricAssociations.rubricDefinition.permissions,rubricAssociations.rubricDefinition.rows.alignedGoals"}).$allow([c.oji.Forbidden]).$asPromise(),r.loadBundle(`features/${h.join("/")}`),r.loadBundle("components/directives/assessment/assessment-question")]).then(([e,t,o])=>{let a=[];if(t&&t.$pk){let e=t.getToolAttemptDetailItem(i.gradingColumn.scoreProviderHandle);(e&&e.questionAttempts||[]).forEach(e=>{a.push(s.extend(e.question,{getContentTitleForGoalAlignment:()=>r.translateSync({locale:n.locale,key:"components.directives.assessment-question.question-title",params:{index:e.visibleQuestionNumber}}),getContentIdForGoalAlignment(){return`blackboard.data.qti.asi.AsiObject;${this.id}`},isCurrentUserEligibleToAlignGoals(){return!1}}))})}return this.groupGoals(e,a,o,r)})}]}getPeekStateName(){return m}getOverrideSubTitle(){return["contentData",e=>e.courseContent&&e.courseContent.title||""]}}s.module(d,[a.e1,r.moduleName]).config([a.e2,e=>{[new b,new v].forEach(t=>{e.peekState(t.getPeekStateName(),t)})}]).value(g,!1).service(u,["$injector",r.serviceName,function(e){return{alignedGoalsCount:-1,resolveGoalAlignableContents(t,n,s,r=!1){return e.invoke(new b().resolveGoalAlignableContent(),null,{currentCourse:t,currentContent:n,currentColumn:s,[g]:r}).then(e=>(this.alignedGoalsCount=i.flatten(i.compact(e.map(e=>e.alignedGoals))).length,[e,this.alignedGoalsCount]))},resolveGoalAlignableContentsForStudent(t,n,s){return e.invoke(new v().resolveGoalAlignableContent(s),null,{currentCourse:t,contentData:n}).then(e=>[e,i.flatten(i.compact(e.map(e=>e.alignedGoals))).length])}}}])},551669:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(464027),s=n(445218),r=n(291146),o=n(903054);let a="ultra.components.directives.moving-member-alert",l={Class:o.LI,renderLocalized:!0,withProvider:!0};i.module(a,[r.moduleName]).component("bbMovingMemberAlertBanner",(0,s.G5)(l))},411475:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},Rn:function(){return u},e1:function(){return c}});var i=n(276635),s=n(464027),r=n(291146),o=n(168132),a=n(247126),l=n(662142);let c="ultra.course.engagement.course-no-grade-content-goal-alignment",d="ultra.course.engagement.course-no-grade-content-goal-alignment.service",u="no-grade-content-goal-alignment",p=["course","goal-alignment","goal"];class m extends l.Z{resolveGoalAlignableContent(){return["$q",r.serviceName,"$injector",a.HV,o.N7.H,(e,t,n,i,s)=>{let r,o;let a=null;return(i.nextParams&&i.nextParams.contentId&&(a=i.nextParams.contentId),i.nextParams&&i.nextParams.id&&(a=i.nextParams.id),a&&"create"!==a)?s.$find(i.nextParams.courseId).$asPromise().then(e=>(r=e,e.contents.$find(a).$asPromise())).then(e=>{o=e}).then(()=>e.all([r.contents.$find(o.id,{expand:"alignedGoals,permissions"}).$asPromise(),t.loadBundle(`features/${p.join("/")}`)]).then(([e])=>this.groupGoals(r.contents.$buildRaw(e),t))):e.when([])}]}getPeekStateName(){return u}groupGoals(e,t){let n="alignedGoalsDefaultTitle";return e.isDiscussion()?n="goalsAlignedWithDiscussion":e.isDocument()?n="goalsAlignedWithDocument":e.isFile()?n="goalsAlignedWithFile":e.isLink()?n="goalsAlignedWithLink":e.isLtiLink()?n="goalsAlignedWithLtiLink":e.isLtiPlacement()&&(n="goalsAlignedWithLtiPlacement"),[{getContentTitleForGoalAlignment:()=>t.translateSync({locale:null,key:`${p.join(".")}.${n}`}),getContentIdForGoalAlignment:s.bind(e,e.getContentIdForGoalAlignment),isCurrentUserEligibleToAlignGoals:s.bind(e,e.isCurrentUserEligibleToAlignGoals),alignedGoals:e.alignedGoals?e.alignedGoals.map(t=>(t.content=e,t)):[],coreContent:e}]}getOverrideSubTitle(){return[a.HV,o.N7.H,(e,t)=>{let n=null;return(e.nextParams&&e.nextParams.contentId&&(n=e.nextParams.contentId),e.nextParams&&e.nextParams.id&&(n=e.nextParams.id),n)?t.$find(e.nextParams.courseId).$asPromise().then(e=>e.contents.$find(n).$asPromise()).then(e=>e.title):""}]}constructor(...e){super(...e),this.panelClass="peek no-grade-content-goal-peek"}}m.$inject=["$injector","$q"],s.module(c,[a.e1,r.moduleName]).config([a.e2,e=>{let t=new m;e.peekState(t.getPeekStateName(),t)}]).service(d,["$injector",r.serviceName,function(e){return{resolveGoalAlignableContents(){return e.invoke(new m().resolveGoalAlignableContent(),null,{}).then(e=>[e,i.flatten(i.compact(e.map(e=>e.alignedGoals))).length])}}}])},379688:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(464027),s=n(291146),r=n(247126);let o="ultra.course.conversion.router";i.module(o,[r.e1,s.moduleName]).config([r.e2,e=>{e.peekState("conversion-analysis",{url:"/conversionAnalysis",resolve:{translations:[s.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},require:()=>Promise.all([n.e(87942),n.e(82529)]).then(n.bind(n,649218)),pageTitle:"ultra.convert.analysis.pageTitle"}).peekState("conversion-risk-analysis",{url:"/conversionRiskAnalysis",resolve:{translations:[s.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},require:[()=>Promise.all([n.e(96090),n.e(42957),n.e(5325)]).then(n.bind(n,842957)),()=>Promise.all([n.e(96090),n.e(42957),n.e(36053)]).then(n.bind(n,611338))],pageTitle:"ultra.convert.analysis.pageTitle"})}])},366880:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c}});var i=n(464027),s=n(276635),r=n(887833),o=n(247126),a=n(335920),l=n(168132);let c="ultra.course.coursemembershipmarkups",d="ultra.course.coursemembershipmarkups.service",u="bbCourseMembershipMarkups";i.module(c,[l.e1,o.e1,a.e1]).run([a.HV,o.HV,l.lZ.serviceName,"$rootScope",function(e,t,n,i){i.$on(a.gQ,()=>{t.params.courseId&&e.getTopElement().then(e=>{e.getElement().addClass("cc"+t.params.courseId)})}),n.$mixHook("after-fetch-many",function(){let e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];e&&i.$broadcast(`course-${e}-memberships-after-fetch`,Array.prototype.slice.apply(this))})}]).provider(d,class{onStyleRefresh(e){this.fn.push(e)}$get(){return this}constructor(){this.fn=[]}}).directive(u,[d,function(e){return{restrict:"A",scope:!1,link(t,n,o){let a=o[u],l=`css_course_${a}_membership`,c={},d=s.once(()=>{let e=i.element(document).find(`#${l}`);return 0===e.length&&(e=i.element(`<style id="${l}"></style>`).appendTo("head"),t.$on("$destroy",()=>{e.remove()})),e});t.$root.$on(`course-${a}-memberships-after-fetch`,(t,n)=>{t.preventDefault();let i=d();(n=s(n).filter(e=>null!=(e.userId||e.user.id)).map(e=>(e.userId=e.userId||e.user.id,e)).value()).forEach(t=>{let n=new r.h,i=n.selector(`.cc${a}`);e.fn.forEach(e=>{e(i,t)}),c[t.id]=n.build()});let o=s(c).sortBy().map((e,t)=>e).join("\n");o!==i.text()&&i.text(o)}),t.$on(`course-${a}-memberships-before-fetch`,(e,t)=>{e.preventDefault();let n=t.params||{};n.fields&&(n.fields+=",courseId,dueDateExceptionType,timeLimitExceptionType")})}}}])},260644:function(e,t,n){"use strict";n.d(t,{e:function(){return G}});var i=n(464027),s=n(319434),r=n(291146),o=n(335920),a=n(429794),l=n(104111),c=n(226464),d=n(720222),u=n(168132),p=n(247126),m=n(822658),h=n(579188),g=n(763674),f=n(102619),b=n(513174),v=n(870452),y=n(470269),C=n(603712),S=n(962389),E=n(633714),I=n(207069),w=n(350383),A=n(372457),k=n(408027),x=n(776517),T=n(322121),P=n(951248),D=n(625506);let G="ultra.course.routes";i.module(G,[c.e1,d.e1,m.e1,g.e1,C.e1,h.e1,b.e1,T.e1]).config([p.e2,m.e2,g.e2,C.e2,h.e2,(e,t,i,c,d)=>{e.peekState(y.Z5.Course.COURSE,{abstract:!0,url:"^/{coursesOrOrganizations:(?:courses|organizations)}/:courseId",panelClass:"full",require:()=>Promise.all([n.e(21235),n.e(8988),n.e(85200),n.e(26158)]).then(n.bind(n,285200)),resolve:{currentColumn:()=>null,[m.gc]:t.resolve,[g.gc]:i.resolve,currentCourseId:["$state",e=>e.nextParams.courseId],courseEntitlementsLoader:["currentCourseId",v.HV,(e,t)=>t.loadCourseEntitlements(e)],"?courseMembershipsLoader":["currentCourseId",u.N7.H,(e,t)=>t.$new(e).memberships.$fetch({limit:1e4}).$asPromise()],isOrganization:[m.gc,p.HV,(e,t)=>(t.nextParams.coursesOrOrganizations=e.isOrganization?"organizations":"courses",e.isOrganization)],[C.gc]:c.resolve},onEnter:[g.HV,e=>{var t,n;let i=null==e?void 0:null===(t=e.courseMembership)||void 0===t?void 0:null===(n=t.courseRole)||void 0===n?void 0:n.identifier;i&&((0,S.sI)({courseRole:i}),(0,E.Aq)({courseRole:i}))}],onExit:["$rootScope","$stateParams","membership",r.serviceName,o.HV,m.HV,l.HV,f.ks,A.HV,g.HV,(e,t,n,i,s,r,o,a,l,c)=>{e.bbOffcanvasOpened=!1,s.close("course");let d=r.course;d.isClassic()&&e.$broadcast("reloadCourse",t.courseId);let u=n.isStudentMembership(),p=!l.userModel.isGuest();!u&&p&&c.courseMembership.$fetch().$allow([404]).$asPromise().then(e=>{e.isStudentMembership()&&a.clearCache("users/"+l.userId+"/memberships")}),o.showPreviewAlert=!0,D(window.parent.document).find("body").removeClass("has-footer-in-preview-mode"),(0,S.pl)(),(0,E.xH)()}]}).peekState(y.Z5.Course.COURSE_ANNOUNCEMENT_LIST,{url:"/announcements",views:{"course@":{require:[()=>Promise.all([n.e(19620),n.e(28145)]).then(n.bind(n,928145))],resolve:{"announcement-translations":[r.serviceName,e=>e.loadBundle("features/course/announcements/announcement-list")]}}},peekStates:[y.Z5.Announcement.ANNOUNCEMENT_DETAIL,y.Z5.Course.SETTINGS],panelClass:"full",peekViewName:"announcement-panel-base",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.outline.announcements.title",onEnter:[T.HV,e=>{e.registerHandler(x.Cs.AnnouncementListOpened)}],onExit:[T.HV,e=>{e.clearHandler(x.Cs.AnnouncementListOpened)}]}).peekState(y.Z5.Course.COURSE_ANALYTICS,{url:"/analytics",views:{"course@":{require:[()=>Promise.all([n.e(25900),n.e(26292),n.e(4695),n.e(54638)]).then(n.bind(n,671121)),()=>Promise.all([n.e(21235),n.e(8988),n.e(85200),n.e(26158)]).then(n.bind(n,285200))],resolve:{"analytics-translations":[r.serviceName,e=>e.loadBundle("features/course/analytics/course-analytics")]}}},panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.analytics.headerLabel"}).peekState(y.Z5.Course.COURSE_ANALYTICS_PREDICT_INSTRUCTOR,{url:"/predict?resetFTUE",views:{"analytics@":{require:()=>Promise.all([n.e(12821),n.e(41273),n.e(89038),n.e(74610)]).then(n.bind(n,674610)),resolve:{"predict-translations":[r.serviceName,e=>e.loadBundle("features/predict/predict")]}}},pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"predict.course.title",peekStates:["predictCourseStudentPanel"],panelClass:"full"}).peekState(y.Z5.Course.COURSE_ANALYTICS_PREDICT_STUDENT,{url:"/predict/:studentId",views:{"analytics@":{require:()=>Promise.all([n.e(12821),n.e(35195),n.e(41273),n.e(68297),n.e(49812),n.e(57066),n.e(54398)]).then(n.bind(n,254398)),resolve:{"predict-translations":[r.serviceName,e=>e.loadBundle("features/predict/predict")]}}},peekStates:["predictMessagingPanel"],pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.title.predictStudent",panelClass:"full"}).peekState(y.Z5.Course.COURSE_ANALYTICS_REPORTS,{url:"/reports",views:{"analytics@":{require:[()=>Promise.all([n.e(25900),n.e(4695),n.e(68165)]).then(n.bind(n,304726)),()=>Promise.all([n.e(25900),n.e(26292),n.e(4695),n.e(54638)]).then(n.bind(n,671121)),()=>Promise.all([n.e(21235),n.e(8988),n.e(85200),n.e(26158)]).then(n.bind(n,285200))],resolve:{"analytics-translations":[r.serviceName,e=>e.loadBundle("features/course/analytics/course-analytics")]}}},panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.analytics.premiumReportsHeaderLabel",onEnter:[T.HV,e=>{e.registerHandler(x.Cs.CourseAnalyticsPremiumReportsOpened)}],onExit:[T.HV,e=>{e.clearHandler(x.Cs.CourseAnalyticsPremiumReportsOpened)}],peekStates:[y.Z5.Course.SETTINGS]}).peekState(y.Z5.Course.COURSE_ANALYTICS_SCORM_REPORTS,{url:"/scormReports",resolve:{[m.gc]:t.resolve},views:{"analytics@":{require:[()=>n.e(8355).then(n.bind(n,708355)),()=>Promise.all([n.e(25900),n.e(26292),n.e(4695),n.e(54638)]).then(n.bind(n,671121))],resolve:{"scorm-report-analytics-translations":[r.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]}}},onEnter:[T.HV,e=>{e.registerHandler(x.Cs.QuestionAnalyticsScormReportOpened)}],onExit:[T.HV,e=>{e.clearHandler(x.Cs.QuestionAnalyticsScormReportOpened)}],peekStates:["scorm-analytics-report",y.Z5.Course.SETTINGS],panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.analytics.title.scormReports"}).peekState(y.Z5.Course.COURSE_ANALYTICS_QUESTION_ANALYSIS,{url:"/questionAnalysis",views:{"analytics@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(37901),n.e(35303)]).then(n.bind(n,702440)),resolve:{"question-analysis-translations":[r.serviceName,e=>e.loadBundle("features/course/question-analysis")]}}},peekViewName:"question-analysis-report-list",onEnter:[T.HV,e=>{e.registerHandler(x.Cs.QuestionAnalysisOpened)}],onExit:[T.HV,e=>{e.clearHandler(x.Cs.QuestionAnalysisOpened)}],peekStates:["question-analysis",y.Z5.Course.SETTINGS],panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.question-analysis.report-list.pageTitle"}).peekState(y.Z5.Course.COURSE_ANALYTICS_ACTIVITY,{url:"/courseActivity",views:{"analytics@":{require:()=>Promise.all([n.e(12821),n.e(35195),n.e(90917),n.e(68297),n.e(88541),n.e(26292),n.e(31221),n.e(59727),n.e(43752)]).then(n.bind(n,643752)),resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[m.gc]:t.resolve}}},peekStates:[y.BQ.COURSE_MESSAGE,"event-create","telemetry-settings",y.vs.INSTRUCTOR_DETAILS,y.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,y.Z5.Course.SETTINGS],onEnter:[T.HV,e=>{e.registerHandler(x.Cs.CourseActivityAnalyticsOpened)}],onExit:[T.HV,e=>{e.clearHandler(x.Cs.CourseActivityAnalyticsOpened)}],peekViewName:"telemetry-instructor-class-base@",panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler",resolveOrgCourseKey:!0}),pageTitle:"components.directives.telemetry.courseActivityHeaderTitle.course"}).peekState(y.Z5.Course.COURSE_CALENDAR,{url:"/calendar",views:{"course@":{require:[()=>Promise.all([n.e(19644),n.e(21235),n.e(8988),n.e(19166),n.e(85200),n.e(27742),n.e(67786)]).then(n.bind(n,789545)),()=>Promise.all([n.e(21235),n.e(8988),n.e(85200),n.e(26158)]).then(n.bind(n,285200))],resolve:{"calendar-translations":[r.serviceName,e=>e.loadBundle("features/course/calendar/course-calendar")]}}},courseEntitlement:s.uo.ViewCalendar,onEnter:[T.HV,e=>{e.registerHandler(x.Cs.CourseCalendarOpened)}],onExit:[T.HV,e=>{e.clearHandler(x.Cs.CourseCalendarOpened)}],peekStates:[y.Z5.Calendar.CREATE_EVENT,y.Z5.Calendar.EDIT_EVENT,y.Z5.Calendar.VIEW_EVENT,y.Z5.Calendar.COURSE_SCHEDULE,y.Z5.Calendar.OFFICE_HOURS,y.Z5.Lti.LTI,y.Z5.Lti.LTI_LAUNCH_PEEK,"conversion-analysis","content-manage","assignment","grade-item","assessment","scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview",y.Z5.Course.SETTINGS],panelClass:"full",peekViewName:"calendar-panel-base",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.calendar.headerLabel"}).peekState(y.Z5.Course.COURSE_ENGAGEMENT,{url:"/engagement",resolve:{"engagement-translations":[r.serviceName,e=>e.loadBundle("features/course/engagement/course-engagement")]},views:{"course@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6355),n.e(25062),n.e(54777),n.e(12546),n.e(21054),n.e(68362),n.e(79389),n.e(42652),n.e(98353)]).then(n.bind(n,319003))}},panelClass:"full",onEnter:[T.HV,e=>{e.registerHandler(x.Cs.DiscussionBoardOpened)}],onExit:[T.HV,e=>{e.clearHandler(x.Cs.DiscussionBoardOpened)}],peekStates:["content-manage","conversion-analysis","discussion",y.Z5.Content.CONDITIONAL_RELEASE_PEEK_PANEL,"content-group-enroll","discussion-settings",y.Z5.Telemetry.DISCUSSION_FORUM_INSIGHTS,"course-group","discussions-settings",y.Z5.Course.SETTINGS],peekViewName:"engagement-panel-base",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.engagement.headerLabel"}).peekState(y.Z5.Course.COURSE_GRADES,{url:`/grades?${y.fI.join("&")}`,views:{"course@":{require:[()=>Promise.all([n.e(27459),n.e(97809),n.e(6355),n.e(25062),n.e(98318),n.e(66985),n.e(29219)]).then(n.bind(n,627377)),()=>Promise.all([n.e(21235),n.e(8988),n.e(85200),n.e(26158)]).then(n.bind(n,285200))],resolve:{"grades-translations":[r.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]}}},resolve:{courseEntitlement:["$q","membership",w.HV,(e,t,n)=>t.isStudentMembership()?e.resolve(!0):n.isEntitled("course.gradebook-metadata.VIEW")]},onEnter:[T.HV,e=>{e.registerHandler(x.Cs.CourseGradeOpened)}],onExit:[T.HV,e=>{e.clearHandler(x.Cs.CourseGradeOpened)}],peekStates:[y.Z5.Course.ACCOMMODATION,"assignment","assessment","gradebook-item","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview",y.Z5.Course.COURSE_GRADES_MULTIPLE_ATTEMPT,"assignment-grading",y.Z5.Grade.SUBMISSION_GRADING,y.eJ.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,"group-submission-grading","grade-item","grade-setting",y.Z5.Grade.GRADING_SCHEMA,"grade-download-setting","grade-upload-setting",y.Z5.Grade.GRADE_AND_FEEDBACK,"conversion-analysis","content-manage",y.Z5.Lti.LTI,"discussion","submission-list","rubric","overall-grade","overall-grade-student","attendance","attendance-student-records","attendance-student-view","question-analysis",y.Z5.Grade.RECONCILE_GRADE,"grades-bulk-download",y.Z5.Grade.DOWNLOAD_TEST_RESULTS,y.Z5.Grade.PER_GRADABLE_ITEM_SETTINGS,y.Z5.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,y.Z5.Journal.JOURNAL_PARTICIPATION_DETAIL,y.Z5.Grade.GRADEBOOK_GRID_ADVANCED_FILTERS,y.Z5.Grade.ATTEMPT_RECEIPT_SEARCH,y.Z5.Course.SETTINGS,y.Z5.Grade.PER_ASSESSMENT_SETTINGS],panelClass:"full",peekViewName:"grades-panel-base",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.grades.instructorHeaderLabel"}).peekState(y.Z5.Course.COURSE_MESSAGES,{url:"/messages",views:{"course@":{require:[()=>Promise.all([n.e(25900),n.e(27459),n.e(21235),n.e(8988),n.e(71173),n.e(6216),n.e(42780)]).then(n.bind(n,991659)),()=>Promise.all([n.e(21235),n.e(8988),n.e(85200),n.e(26158)]).then(n.bind(n,285200))],resolve:{"messages-translations":[r.serviceName,e=>e.loadBundle("features/course/messages/course-messages")],canActivate:[b.HV,e=>{e.byToolIdAvailability(k.XF0.Messages)}]}}},panelClass:"full",onEnter:[T.HV,e=>{e.registerHandler(x.Cs.CourseMessageListOpened)}],onExit:[T.HV,e=>{e.clearHandler(x.Cs.CourseMessageListOpened)}],peekStates:["create-message","edit-message","conversion-analysis",y.Z5.Course.SETTINGS],pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.messages.headerLabel"}).peekState(y.Z5.Course.COURSE_OUTLINE,{url:"/outline?legacyUrl?enrollmentMessage?inPreviewMode?search",views:{"course@":{require:[()=>Promise.all([n.e(27459),n.e(21235),n.e(90917),n.e(19620),n.e(19166),n.e(24956),n.e(71173),n.e(12546),n.e(93759),n.e(69610),n.e(75585),n.e(76990)]).then(n.bind(n,947459)),()=>Promise.all([n.e(21235),n.e(8988),n.e(85200),n.e(26158)]).then(n.bind(n,285200))],resolve:{isClassicCourse:[m.gc,p.HV,(e,t)=>{if(!e.isUltra())return t.goPeekState("course.classic.outline",{courseId:e.id,legacyUrl:t.nextParams.legacyUrl})}],translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/outline/course-outline"),t.loadBundle("features/course/course-overview/course-overview")])]}}},onEnter:[T.HV,e=>{e.registerHandler(x.Cs.CourseContentOpened)}],onExit:["$rootScope",p.HV,T.HV,(e,t,n)=>{"base.calendar"===t.getBaseState()&&e.$broadcast("deadline-refresh"),n.clearHandler(x.Cs.CourseContentOpened)}],peekStates:[y.Z5.Announcement.ANNOUNCEMENT_DETAIL,"assignment","assessment-settings","question-analysis","question-banks","assessment-safe-assign-settings","bulk-edit-content",y.Re.PREVIEW_FILE,y.Z5.Calendar.COURSE_SCHEDULE,"content-group-enroll","content-manage","conversion-analysis","conversion-risk-analysis","description",y.Z5.Calendar.VIEW_EVENT,"exports","gradebook-item","import-report",y.Z5.Course.COURSE_MESSAGE,"roster","collab","stream-message","assessment",y.Z5.ContentMarket.CONTENT_MARKET,y.Z5.ContentCollection.CONTENT_COLLECTION,"document-settings","partner-tool",y.Z5.Lti.LTI,y.Z5.Lti.LTI_LAUNCH_PEEK,"discussion-settings","conversations","books-and-tools","rubric",y.Z5.Telemetry.CONTENT_ACTIVITY_IN_DETAIL,y.Z5.Telemetry.DISCUSSION_FORUM_INSIGHTS,"overall-grade","attendance","attendance-student-view","course-group-enroll",y.Z5.Content.CONDITIONAL_RELEASE_PEEK_PANEL,"course-group","scorm-settings","gradebook-item.scorm-submissions","group-set-detail","group-set-list","scorm-launch-frame","scorm-overview","content-navigator-transition-peek","content-navigator-transition-full","content-navigator-placeholder","scorm-analytics-report",y.Z5.Course.EDIT_BANNER,y.Z5.CourseTasks.COURSE_TASKS_LOGS,y.Z5.Group.IMPORT_GROUP_SET,y.Z5.Group.EXPORT_GROUP_SET,y.Z5.Group.IMPORT_GROUP_MEMBERS,y.Z5.Group.GROUP_MEMBERS_LIST,y.Z5.Course.SETTINGS,y.Z5.Content.CONTENT_SEARCH],peekViewName:"content-create-base",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("content-navigator-transition-peek",{url:"/content-navigator-transition-peek",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"peek"}).peekState("content-navigator-transition-full",{url:"/content-navigator-transition-full",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"full"}).peekState("content-navigator-placeholder",{url:"/link/{contentId:_[0-9]+_1}",require:()=>n.e(60682).then(n.bind(n,60682)),panelClass:"full",peekStates:[y.Z5.Lti.LTI],resolve:{currentContent:[p.HV,m.gc,"$q",(e,t,n)=>{let i=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(i&&i!==u.courseContent.$G)return t.contents.$find(i).$asPromise()}]}}).peekState(y.Z5.Content.CONDITIONAL_RELEASE_PEEK_PANEL,{url:"/conditionalRelease?contentId",pageTitle:"course.conditionalRelease.panelTitle",require:[()=>n.e(87823).then(n.bind(n,887823)),()=>Promise.all([n.e(27459),n.e(21235),n.e(90917),n.e(19620),n.e(19166),n.e(24956),n.e(71173),n.e(12546),n.e(93759),n.e(69610),n.e(75585),n.e(76990)]).then(n.bind(n,947459))],panelClass:"peek",peekStates:["group-set-list"],peekViewName:"conditional-release-peek",allowChildPeekStates:!0,resolve:{[m.gc]:t.resolve,currentContent:[p.HV,"currentCourse",a.HV,(e,t,n)=>{let i=e.nextParams.contentId,s=n.findRootNode(t,u.courseContent.e6.Root);return n.getOrMakeContentInContentTree(s,t.id,i).then(e=>e.content)}],translations:[r.serviceName,e=>e.loadBundle("features/course/conditional-release/conditional-release")]}}).peekState(y.Z5.Course.COURSE_CLASSIC,{abstract:!0,url:"/cl"}).peekState("course.classic.outline",{url:"/outline?legacyUrl?enrollmentMessage",require:[()=>Promise.all([n.e(21235),n.e(8988),n.e(85200),n.e(26158)]).then(n.bind(n,285200))],resolve:{"outline-translations":[r.serviceName,e=>e.loadBundle("features/course/outline/course-outline")]},peekStates:[y.Z5.Telemetry.CONTENT_ACTIVITY_IN_DETAIL],peekViewName:"course-classic-peek",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState(y.BQ.COURSE_CLASSIC_OUTLINE_ULTRA_COURSE_SELF_ENROLL,{url:"/ultra-course-self-enroll?legacyUrl?enrollmentMessage",require:[()=>n.e(50138).then(n.bind(n,250138))],peekViewName:"ultra-course-self-enroll-peek",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("edit-file-settings",{require:[()=>n.e(27663).then(n.bind(n,327663))],resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/media-widget/media-widget")]},url:"/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&isDecorative&alternativeText&mediaType&mimeType&bbmlEditorId"}).peekState("bulk-edit-content",{url:"/bulkEditContent",require:[()=>n.e(18337).then(n.bind(n,18337))],pageTitle:"course.outline.bulkEditHeaderLabel",panelClass:"full",courseEntitlement:s.eo.ViewAsDesigner}).peekState(y.XO.GENERATE_STRUCTURE,{url:"/generate?positionBefore?positionAfter",require:[()=>n.e(97651).then(n.bind(n,997651))],pageTitle:"course.outline.operation.generateStructure",panelClass:"full",courseEntitlement:s.eo.ViewAsDesigner}).peekState(y.Re.PREVIEW_FILE,{url:"/file/:id?view",require:[()=>Promise.all([n.e(82082),n.e(9263),n.e(34139)]).then(n.bind(n,634139))],pageTitle:"course.content.file",panelClass:"full",allowChildPeekStates:!0,peekViewName:"file-preview-peek",peekStates:[y.Re.PREVIEW_FILE_EDIT,y.BQ.COURSE_MESSAGE,y.Z5.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES]}).peekState(y.Re.PREVIEW_FILE_EDIT,{resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/edit",require:[()=>Promise.all([n.e(9263),n.e(74925),n.e(37802)]).then(n.bind(n,474925)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))],allowChildPeekStates:!0,peekViewName:"file-goal-peek",peekStates:["goal-picker-legacy",y.XO.CONDITIONAL_RELEASE_PEEK_PANEL],panelClass:"peek",pageTitle:"course.content.file"}).peekState(y.Z5.Course.EDIT_BANNER,{url:"/editBanner?id",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/edit-banner/edit-banner")]},require:()=>Promise.all([n.e(21235),n.e(30602)]).then(n.bind(n,930602)),pageTitle:"course.editBanner.panelTitle"}).peekState(y.Z5.Course.SETTINGS,{url:"/{courseOrOrganization:(?:course-settings|organization-settings)}",peekViewName:"course-settings-base",require:()=>n.e(99600).then(n.bind(n,399600)),panelClass:"full",pageTitle:"course.settings.headerLabel",courseEntitlement:[s.s7.ViewCourseSettingsConsole],resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/settings/settings")],isOrganization:[m.gc,p.HV,(e,t)=>{let n=e.isOrganization?"organization":"course";t.next.pageTitle=`${n}.settings.headerLabel`,t.nextParams.courseOrOrganization=`${n}-settings`}]},onEnter:[p.HV,I.HV,(e,t)=>{t.createWaiter(P.x40.CourseSettingsConsole).then(t=>{t||e.goCurrentBasePage()})}]}).peekState(y.Z5.Content.CONTENT_SEARCH,{url:"/content-search",require:()=>Promise.all([n.e(12546),n.e(67207)]).then(n.bind(n,167207)),pageTitle:"courseCore.components.contentSearch.searchBox.contentSearchMenu",peekStates:["gradebook-item","content-manage","assessment","assignment","conversations",y.Re.PREVIEW_FILE,y.Z5.Lti.LTI,y.Z5.Lti.LTI_LAUNCH,y.Z5.Lti.LTI_LAUNCH_PEEK,y.Z5.Lti.LTI_LAUNCH_FRAME,y.Z5.Scorm.GRADEBOOK_ITEM_SCORM_SUBMISSIONS,y.Z5.Scorm.SCORM_LAUNCH_FRAME,y.Z5.Scorm.SCORM_OVERVIEW_STUDENT,y.Z5.Content.DOCUMENT,y.Z5.Journal.JOURNAL],peekViewName:"content-search-panel",allowChildPeekStates:!0,panelClass:"full",onExit:[p.HV,e=>{let{nextParams:t}=e;t.search=void 0,t.isOutlineSearch=void 0}]})}])},855019:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(464027),s=n(291146),r=n(247126);let o="ultra.course.description.router";i.module(o,[r.e1,s.moduleName]).config([r.e2,e=>{e.peekState("description",{url:"/description",resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/description/course-description")]},require:()=>n.e(74799).then(n.bind(n,974799)),pageTitle:"course.description.header"})}])},996011:function(e,t,n){"use strict";n.d(t,{e:function(){return h}});var i=n(464027),s=n(291146),r=n(822658),o=n(411475),a=n(573520),l=n(168132),c=n(247126),d=n(471915),u=n(335920),p=n(470269),m=n(939284);let h="ultra.course.engagement.router";i.module(h,[s.moduleName,c.e1,a.e1,o.e1,d.e1,r.e1,m.e1]).config([c.e2,r.e2,m.e2,(e,t,i)=>{e.peekState(p.Jy.DISCUSSION,{abstract:!0,url:"/discussion",resolve:{translations:["$q",s.serviceName,(e,t)=>{let n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("features/course/content/course-content")),n.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(n)}],[r.gc]:t.resolve,canCreateAllContent:[a.HV,c.HV,(e,t)=>e.canCreateAllContent(t.nextParams.courseId)],hasEditAvailabilityPermission:[a.HV,c.HV,(e,t)=>e.hasEditAvailabilityPermission(t.nextParams.courseId)]}}).peekState(p.Jy.DISCUSSION_VIEW,{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter",panelClass:"full",pageTitle:"course.content.discussion",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(25900),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(21235),n.e(97809),n.e(8988),n.e(6355),n.e(25062),n.e(54777),n.e(42652),n.e(65561),n.e(13298),n.e(67182)]).then(n.bind(n,757022)),resolve:{translations:["$q",s.serviceName,(e,t)=>{let n=[];return n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),e.all(n)}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[d.HV,"currentCourseMemberships",(e,t)=>e.init(t)]},onExit:[d.HV,e=>{e.destroy()}]}).peekState(p.Jy.DISCUSSION_VIEW_WITH_GRADING,{url:"?view&disGroupId&gradingStatus&submissionStatus",panelClass:"full",views:{"engagement-edit@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(97809),n.e(6355),n.e(25062),n.e(54777),n.e(21054),n.e(68362),n.e(79389),n.e(99049)]).then(n.bind(n,599049))},"engagement-grade@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(87217),n.e(80783)]).then(n.bind(n,675638))},"engagement-analytics@":{require:()=>n.e(30276).then(n.bind(n,30276))}},onEnter:[c.HV,u.HV,(e,t)=>{e.isPeekPanelOpen()&&t.expandTopPanel()}],onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],peekStates:[p.XO.CONDITIONAL_RELEASE_PEEK_PANEL,p.cw.CONTENT_MARKET,"course-group","discussion-details","discussion-participants","discussion-settings",o.Rn,p.UM.LTI,p.BQ.COURSE_MESSAGE,"rubric","rubric-evaluation","rubric-view","submission-list","view-exceptions","discussion-feedback","discussions-settings",p.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,p.BQ.EDIT_ENROLLMENT,p.RK.PER_GRADABLE_ITEM_SETTINGS],peekViewName:"discussion-peek@",pageTitle:"course.content.discussion",resolve:{[m.gc]:i.resolve,currentColumn:[c.HV,r.gc,(e,t)=>{let n=e.nextParams.columnId;if(n&&n!==l.Rp.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n).$asPromise()}]}}).peekState(p.Jy.SUBMISSION_LIST,{url:"/grading/:columnId/detail?participantId&contentId&disGroupId",panelClass:"full",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(21235),n.e(97809),n.e(8988),n.e(25062),n.e(21054),n.e(68362),n.e(41095)]).then(n.bind(n,693994)),resolve:{translations:["$q",s.serviceName,(e,t)=>{let n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("components/directives/grade/submission-list")),n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),n.push(t.loadBundle("components/directives/discussion")),e.all(n)}],[r.gc]:t.resolve,currentColumn:[c.HV,r.gc,(e,t)=>{let n=e.nextParams.columnId;if(n&&n!==l.Rp.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n,{expand:"associatedRubrics"}).$asPromise()}],[m.gc]:i.resolve,memberships:[r.gc,e=>(e.memberships.$clear(),e.memberships.$fetch({expand:"user",roleBucket:"taking"}).$asPromise())]},pageTitle:"course.engagement.submissionTitle",peekStates:[p.BQ.COURSE_MESSAGE,"discussion-feedback","rubric-evaluation",p.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,p.BQ.EDIT_ENROLLMENT],peekViewName:"engagement-submissions-peek@"}).peekState(p.Jy.DISCUSSION_SETTINGS,{url:"/settings?contentId&focusEleId",require:()=>Promise.all([n.e(27459),n.e(97809),n.e(6355),n.e(25062),n.e(54777),n.e(65561),n.e(50054)]).then(n.bind(n,432027)),resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/engagement/discussion-settings")])],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[d.HV,"currentCourseMemberships",(e,t)=>e.init(t)]},onExit:[d.HV,e=>{e.destroy()}],pageTitle:"course.engagement.discussionSettingsTitle",peekViewName:"discussion-group",allowChildPeekStates:!0,peekStates:["course-group","goal-picker-legacy","rubric","rubric-view"]}).peekState(p.Jy.DISCUSSION_PARTICIPANTS,{url:"/participants",require:()=>n.e(97980).then(n.bind(n,197980)),pageTitle:"course.engagement.participantsTitle"}).peekState("discussion-details",{url:"/details",require:()=>Promise.all([n.e(97809),n.e(4579)]).then(n.bind(n,232307)),pageTitle:"course.engagement.discussionDetailsTitle",peekStates:["discussion-feedback"]}).peekState("discussion-feedback",{url:"/feedback?forumId&isReadOnlyPanel&columnId",require:[()=>Promise.all([n.e(9687),n.e(77648)]).then(n.bind(n,377648)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(87217),n.e(80783)]).then(n.bind(n,675638))],resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")],offCanvasArgs:["offCanvasArgs",e=>(e.overlay=!1,e.disableFocusHandling=!0,e)],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[d.HV,"currentCourseMemberships",(e,t)=>e.init(t)]},onExit:[d.HV,e=>{e.destroy()}],pageTitle:"course.engagement.grade.feedback.viewFeedbackTitle"}).peekState("discussions-settings",{url:"/discussions-settings",require:()=>Promise.all([n.e(42652),n.e(89030)]).then(n.bind(n,653217))})}])},57292:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(464027),s=n(291146),r=n(247126);let o="ultra.course.exports.router";i.module(o,[r.e1,s.moduleName]).config([r.e2,e=>{e.peekState("exports",{url:"/exportsPanel",resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/exports/course-export")]},require:()=>Promise.all([n.e(93759),n.e(7575)]).then(n.bind(n,493759)),pageTitle:"course.export.exportPanel.head"})}])},662142:function(e,t,n){"use strict";var i=n(276635),s=n(291146);t.Z=class{getOverrideSubTitle(){return[()=>null]}constructor(){this.panelClass="peek",this.url="/goalAlignment",this.require=()=>n.e(1392).then(n.bind(n,901392)),this.pageTitle="course.goal-alignment.goal.header",this.allowChildPeekStates=!0,this.peekViewName="goal-alignment-peek",this.params={noAutoGo:!1},this.peekStates=["goal-picker-legacy"],this.resolve={translations:[s.serviceName,e=>e.loadBundle("features/course/goal-alignment/goal")],goalAlignableContents:(()=>{let e=this.resolveGoalAlignableContent(),t=e[e.length-1];return e[e.length-1]=function(...e){return t.apply(null,e).then(e=>i.isArray(e)?e:[e])},e})(),overrideSubTitle:this.getOverrideSubTitle()}}}},802698:function(e,t,n){"use strict";n.d(t,{e:function(){return S}});var i=n(464027),s=n(470269),r=n(319434),o=n(539210),a=n(335920),l=n(501),c=n(376095),d=n(838044),u=n(346523),p=n(291146),m=n(168132),h=n(247126),g=n(822658),f=n(763674),b=n(579188),v=n(153504),y=n(197923),C=n(213778);let S="ultra.course.grades.router";i.module(S,[p.moduleName,h.e1,c.e1,d.e1,g.e1,b.e1]).config([h.e2,g.e2,f.e2,b.e2,(e,t,i,b)=>{e.peekState("gradebook-item",{abstract:!0,require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(8988),n.e(12546),n.e(87357)]).then(n.bind(n,987357)),resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/gradebook-item/gradebook-item")],[g.gc]:t.resolve,currentColumn:u.Z.currentColumn,currentContent:u.Z.currentContent}}).peekState("gradebook-item.assignment-create",{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])]},onEnter:[a.HV,h.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],url:"/assignment?id&parentId&positionBefore&positionAfter&gradeitemView",views:{"gradebook-item-details@":{require:[()=>Promise.all([n.e(9263),n.e(17154),n.e(81179)]).then(n.bind(n,517154)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))]},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(87217),n.e(60419)]).then(n.bind(n,806639))}},peekStates:["assignment-grading","assessment-settings","conversations",s.Z5.Course.COURSE_MESSAGE,"course-group","editAssignmentFileAttachment",c.Ze,"rubric","rubric-list","rubric-evaluation","view-exceptions"],peekViewName:"gradebook-item-panel@",pageTitle:"course.content.assignmentCreate"}).peekState("gradebook-item.assignment",{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])]},onEnter:[a.HV,h.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],url:"/assignment/:contentId?courseId&gradeitemView",views:{"gradebook-item-details@":{require:[()=>Promise.all([n.e(9263),n.e(17154),n.e(81179)]).then(n.bind(n,517154)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(66692),n.e(3835),n.e(44801),n.e(27649),n.e(90814),n.e(57906),n.e(17154),n.e(80528),n.e(74925),n.e(38374),n.e(19476)]).then(n.bind(n,854618))]},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(87217),n.e(60419)]).then(n.bind(n,806639))}},peekStates:["assignment-grading","assessment-settings","conversations",s.Z5.Course.COURSE_MESSAGE,"course-group","editAssignmentFileAttachment",c.Ze,"rubric","rubric-list","rubric-evaluation","view-exceptions"],params:{},peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assignment.edit"}).peekState("editAssignmentFileAttachment",{require:()=>n.e(27663).then(n.bind(n,327663)),resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/content/media-widget/media-widget")]},url:"/assignment/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&alternativeText&mediaType&bbmlEditorId"}).peekState(s.Z5.Course.COURSE_GRADES_MULTIPLE_ATTEMPT,{panelClass:"peek",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],[g.gc]:t.resolve,currentContent:u.Z.nullContent,currentColumn:u.Z.currentColumn},url:"/multiple-attempt-grading?columnId&gradeId&userId&groupId",params:{hasException:!1},reloadOnSearch:!1,require:[()=>Promise.all([n.e(21235),n.e(8988),n.e(92154),n.e(83801)]).then(n.bind(n,892154)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(97809),n.e(8988),n.e(82578),n.e(217),n.e(92154),n.e(10099)]).then(n.bind(n,989498))],pageTitle:"course.grades.multiple-attempt-grading.title",peekStates:[s.Z5.Grade.SUBMISSION_GRADING,s.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING]}).peekState(s.Z5.Grade.RECONCILE_GRADE,{panelClass:"full",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],[g.gc]:t.resolve,currentContent:u.Z.nullContent,currentColumn:u.Z.currentColumn},url:"/reconcile-grade?columnId&gradeId&userId",require:[()=>n.e(73).then(n.bind(n,100073)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(82578),n.e(217),n.e(3972)]).then(n.bind(n,803972))],pageTitle:"course.grades.reconcile-grade.title",peekStates:[s.Z5.Grade.SUBMISSION_GRADING,s.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING],peekViewName:"reconcile-grade-peek"}).peekState(s.Z5.Grade.PER_ASSESSMENT_SETTINGS,{panelClass:"peek",courseEntitlement:o.SE.ModifyGradebook,resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],currentContent:u.Z.currentContent,currentColumn:u.Z.currentColumn,[g.gc]:t.resolve},url:"/per-assessment-settings?userId&columnId&membershipId&contentId",require:[()=>Promise.all([n.e(8769),n.e(43793)]).then(n.bind(n,843793)),()=>Promise.all([n.e(52493),n.e(8769),n.e(67447)]).then(n.bind(n,55260))],pageTitle:"course.grades.per-assessment-settings.title"}).peekState(s.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,{panelClass:"peek",courseEntitlement:o.SE.ModifyGradebook,resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],currentContent:u.Z.currentContent,currentColumn:u.Z.currentColumn,[g.gc]:t.resolve},url:"/per-assessment-group-settings?groupId&columnId&userId&contentId",require:[()=>Promise.all([n.e(8769),n.e(2461)]).then(n.bind(n,402461)),()=>Promise.all([n.e(52493),n.e(8769),n.e(67447)]).then(n.bind(n,55260))],pageTitle:"course.grades.per-assessment-settings.title"}).peekState(s.Z5.Grade.PER_GRADABLE_ITEM_SETTINGS,{panelClass:"peek",courseEntitlement:o.SE.ModifyGradebook,url:"/per-gradable-item-settings?userId&columnId&courseId",require:()=>n.e(26961).then(n.bind(n,626961)),pageTitle:"components.directives.grade.submission-list-row.per-gradable-item.title",template:"<gradable-item-exempt-settings>"}).peekState("originality-report",{panelClass:"peek",url:"/originality-report",require:()=>n.e(27430).then(n.bind(n,227430)),peekViewName:"originality-report-peek"}).peekState(s.Z5.Grade.SUBMISSION_GRADING,{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])],[f.gc]:i.resolve,currentColumn:u.Z.currentColumn,currentContent:u.Z.currentContent},url:"/submission-grading?columnId&gradeId&userId&attemptId&contentId&membershipId",onEnter:[a.HV,h.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],reloadOnSearch:!1,require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(21235),n.e(8988),n.e(83011),n.e(13514)]).then(n.bind(n,783011)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(25900),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(21235),n.e(97809),n.e(8988),n.e(6521),n.e(82578),n.e(217),n.e(3835),n.e(19438),n.e(41547),n.e(75377),n.e(83011),n.e(77457),n.e(69752),n.e(79500)]).then(n.bind(n,810913))],pageTitle:"course.grades.submission-grading.title",params:{commentPanelInitiallyOpen:!1},peekViewName:"submission-grading-peek",peekStates:[s.Z5.Assessment.ASSESSMENT_SETTINGS,s.Z5.Grade.SUBMISSION_DEEP_LINK,s.Z5.Grade.PER_ASSESSMENT_SETTINGS,s.Z5.Grade.PER_GRADABLE_ITEM_SETTINGS,"assessment-submission-feedback","originality-report",s.Z5.ContentMarket.CONTENT_MARKET]}).peekState(s.Z5.Grade.SUBMISSION_GRADING_FEEDBACK_TAB,{url:"/inline-feedback?mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${s.Z5.Grade.SUBMISSION_GRADING}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712)]).then(n.bind(n,789825))}},peekStates:[s.Z5.Grade.PER_ASSESSMENT_SETTINGS,s.Z5.Lti.LTI,s.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState(s.Z5.Grade.SUBMISSION_GRADING_RUBRICS_TAB,{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{[`${s.Z5.Grade.SUBMISSION_GRADING}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(90970)]).then(n.bind(n,490970))}},peekStates:[s.Z5.Grade.PER_ASSESSMENT_SETTINGS,s.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState(s.Z5.Grade.SUBMISSION_GRADING_ORIGINALITY_TAB,{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{[`${s.Z5.Grade.SUBMISSION_GRADING}@`]:{require:()=>n.e(92992).then(n.bind(n,192992))}},peekStates:[s.Z5.Grade.PER_ASSESSMENT_SETTINGS,s.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState(s.Z5.Grade.GROUP_SUBMISSION_GRADING,{panelClass:"full",params:{userId:null},resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])],currentColumn:u.Z.currentColumn,currentContent:u.Z.currentContent},url:"/group-submission-grading?columnId&gradeId&groupId&contentId&attemptId&groupAttemptId&userId",onEnter:[a.HV,h.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],reloadOnSearch:!1,require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(69752)]).then(n.bind(n,69752)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(25900),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(21235),n.e(97809),n.e(8988),n.e(6521),n.e(82578),n.e(217),n.e(3835),n.e(19438),n.e(41547),n.e(75377),n.e(83011),n.e(77457),n.e(69752),n.e(79500)]).then(n.bind(n,810913))],pageTitle:"course.grades.submission-grading.title",peekViewName:"submission-grading-peek",peekStates:[s.Z5.Assessment.ASSESSMENT_SETTINGS,s.Z5.Grade.SUBMISSION_DEEP_LINK,s.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,"originality-report",s.Z5.ContentMarket.CONTENT_MARKET]}).peekState(s.Z5.Grade.GROUP_SUBMISSION_GRADING_FEEDBACK_TAB,{url:"/inline-feedback?attemptId&userId&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${s.Z5.Grade.GROUP_SUBMISSION_GRADING}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712)]).then(n.bind(n,789825))}},peekStates:[s.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,s.Z5.Lti.LTI,s.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState(s.Z5.Grade.GROUP_SUBMISSION_GRADING_RUBRICS_TAB,{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{[`${s.Z5.Grade.GROUP_SUBMISSION_GRADING}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(90970)]).then(n.bind(n,490970))}},peekStates:[s.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,s.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState(s.Z5.Grade.GROUP_SUBMISSION_GRADING_ORIGINALITY_TAB,{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{[`${s.Z5.Grade.GROUP_SUBMISSION_GRADING}@`]:{require:()=>n.e(92992).then(n.bind(n,192992))}},peekStates:[s.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,s.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState("assignment-grading",{panelClass:"full",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/submissions-grading")],currentColumn:["currentColumn",m.N7.H,h.HV,(e,t,n)=>{if(null!=e)return e.$asPromise();let i=n.nextParams.columnId,s=n.nextParams.courseId;return t.$find(s).gradebook.columns.$find(i,{expand:"associatedRubrics,externalGrade"}).$asPromise()}]},url:"/grading?columnId&gradeId&groupId",reloadOnSearch:!1,require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(75377),n.e(15854)]).then(n.bind(n,275377)),()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(25900),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(21235),n.e(97809),n.e(8988),n.e(6521),n.e(82578),n.e(217),n.e(3835),n.e(19438),n.e(41547),n.e(75377),n.e(83011),n.e(77457),n.e(69752),n.e(79500)]).then(n.bind(n,810913))],pageTitle:"course.grades.submissions-grading.title",peekViewName:"assignment-grading-peek",peekStates:["rubric-evaluation"]}).peekState("gradebook-item.offline",{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/course-grades"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])]},url:"/offline-grades/:columnId?courseId&q&limit&page&gradeitemView",views:{"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(59891)]).then(n.bind(n,127291))}},peekStates:[s.RK.OFFLINE_GRADE_AND_FEEDBACK],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.instructorHeaderLabel"}).peekState(s.RK.OFFLINE_GRADE_AND_FEEDBACK,{panelClass:"peek",url:"/offline-feedback?userId",require:()=>n.e(67827).then(n.bind(n,867827)),pageTitle:"course.grades.gradebook-item.non-attempt-grades.pageTitle"}).peekState("gradebook-item.calculation",{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/gradebook-item/calculation"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])]},url:"/calculation/:columnId?courseId&gradeitemView&isOverallGrade&positionBefore&positionAfter",params:{columnId:m.Rp.CREATE_COLUMN_ID},views:{"gradebook-item-details@":{require:()=>Promise.all([n.e(17097),n.e(57877)]).then(n.bind(n,157877))},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(59891)]).then(n.bind(n,127291))}},courseEntitlement:o.SE.ViewGradebookMetaData,pageTitle:"course.grades.gradebook-item.title.calculation"}).peekState(s.RK.GRADEBOOK_ITEM_ASSESSMENT,{panelClass:"full",courseEntitlement:[r.s7.ViewAssessment,o.SE.ViewAttempts],resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])]},onEnter:[a.HV,h.HV,"currentColumn",l.HV,(e,t,n,i)=>{i.column=n,t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",l.HV,(e,t)=>{e.$broadcast("deadline-refresh"),t.column=null}],url:"/assessment/:assessmentType/{contentId:_[0-9]+_1|create}?courseId&gradeitemView&parentId&positionBefore&positionAfter&gradebookCategoryId&autoPostGrades&gradingStatus&submissionStatus",params:{contentId:m.courseContent.$G,isCreateState:!1},views:{"gradebook-item-details@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(6355),n.e(9263),n.e(52493),n.e(47048),n.e(6521),n.e(7152),n.e(66692),n.e(90814),n.e(62300)]).then(n.bind(n,505039))},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(87217),n.e(60419)]).then(n.bind(n,806639))},"gradebook-item-student-activity@":{require:()=>Promise.all([n.e(12821),n.e(90917),n.e(88541),n.e(35300)]).then(n.bind(n,435300))},"gradebook-item-question-analysis@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(37901),n.e(95484)]).then(n.bind(n,849796)),resolve:{"question-analysis-translations":[p.serviceName,e=>e.loadBundle("features/course/question-analysis")]}}},peekStates:[s.Z5.Grade.CREATE_OFFLINE_ATTEMPT,"assessment-settings","question-analysis","question-analysis-report",s.Z5.Grade.RECONCILE_GRADE,"multiple-attempt-grading",s.Z5.Grade.SUBMISSION_GRADING,"group-submission-grading",s.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,"course-group",s.XO.CONDITIONAL_RELEASE_PEEK_PANEL,c.Ze,d.db,"conversations",s.Z5.Course.COURSE_MESSAGE,"edit-file-settings","rubric","rubric-list","rubric-evaluation","view-exceptions",s.Z5.ContentMarket.CONTENT_MARKET,s.Z5.Lti.LTI,"proctoring-lti-tool",s.Z5.Grade.PER_ASSESSMENT_SETTINGS,s.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,s.Z5.Grade.PER_GRADABLE_ITEM_SETTINGS,"grades-bulk-download"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assessment"}).peekState("grade-item",{abstract:!0,url:"/item"}).peekState("grade-item.create",{url:"/create?positionBefore&positionAfter",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/course-grades")])]},require:()=>Promise.all([n.e(52493),n.e(71417)]).then(n.bind(n,586703)),pageTitle:"course.grades.gradeItem.addItem"}).peekState("grade-item.edit",{url:"/edit/:id",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]},require:()=>Promise.all([n.e(52493),n.e(71417)]).then(n.bind(n,586703)),pageTitle:"course.grades.gradeItem.editItem"}).peekState(s.Z5.Grade.GRADE_ITEM_OVERALL_GRADE,{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/overall-grade"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])]},onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],url:"/overallGrade?columnId&gradeitemView",views:{"gradebook-item-details@":{require:()=>Promise.all([n.e(17097),n.e(53822)]).then(n.bind(n,953822))},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(97809),n.e(59891)]).then(n.bind(n,127291))}},peekStates:["overall-grade-settings"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.overallGrade.pageTitle"}).peekState("overall-grade-settings",{url:"/overallGradeSettings",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/overall-grade")]},panelClass:"peek",require:()=>n.e(35240).then(n.bind(n,635240)),pageTitle:"course.grades.overallGrade.settings.pageTitle"}).peekState("overall-grade-student",{url:"/overallGradeStudent?courseId&courseName",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/overall-grade")]},panelClass:"peek",require:()=>n.e(19244).then(n.bind(n,419244)),pageTitle:"course.grades.overallGrade.pageTitle"}).peekState(s.Z5.Grade.GRADE_DOWNLOAD_SETTINGS,{url:"/grade-download-setting",require:()=>n.e(92764).then(n.bind(n,792764)),pageTitle:"course.grades.settings.title",peekViewName:"grades-download-peek",peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-upload-setting",{resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/grades-upload-settings/grades-upload-settings")],contentCollectionAvailability:[m.oP.H,e=>e.$new("bbcms").$resolve().$asPromise()]},url:"/grade-upload-setting",require:()=>n.e(25381).then(n.bind(n,225381)),pageTitle:"course.grades.settings.title",peekViewName:"grade-upload-setting-peek",courseEntitlement:o.SE.ModifyGradebook,peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-setting",{resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]},url:"/grade-settings",require:()=>n.e(96735).then(n.bind(n,396735)),pageTitle:"course.grades.settings.title",peekViewName:"grade-setting-peek",peekStates:["rubric",s.Z5.Grade.GRADEBOOK_ITEM,s.Z5.Telemetry.INSTRUCTOR_CLASS,s.Z5.Grade.GRADING_SCHEMA],allowChildPeekStates:!0}).peekState(s.Z5.Grade.GRADE_AND_FEEDBACK,{resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/grade-and-feedback")],[g.gc]:t.resolve,currentColumn:[g.gc,h.HV,(e,t)=>{let n=t.nextParams.columnId;return e.gradebook.columns.$find(n).$asPromise()}]},url:"/grade-and-feedback?columnId?userId?courseId",require:()=>Promise.all([n.e(21235),n.e(8988),n.e(82578),n.e(41547),n.e(46310)]).then(n.bind(n,222949)),pageTitle:"course.grades.grade-and-feedback.title"}).peekState("course-group",{panelClass:"full",url:"/group?groupCourseId&groupContentId&groupColumnId",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/content/group/course-group")]},courseEntitlement:r.pQ.ViewGroupsAsAdmin,require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(27459),n.e(21235),n.e(8988),n.e(63564),n.e(98906)]).then(n.bind(n,798906)),pageTitle:"course.content.courseGroup.title",peekStates:[s.Z5.Course.COURSE_MESSAGE,s.xp.IMPORT_GROUP_MEMBERS,s.xp.EXPORT_GROUP_SET],peekViewName:"group-message-peek"}).peekState("rubric-list",{url:"/rubricList?gradeColumnId",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/content/assignment/rubric-list")],[g.gc]:t.resolve,currentContent:u.Z.currentContent},panelClass:"peek",require:()=>Promise.all([n.e(6355),n.e(45207)]).then(n.bind(n,291938)),pageTitle:"course.content.assignmentSettings.rubricList.title",peekViewName:"rubric-list-peek",peekStates:["rubric"],allowChildPeekStates:!0}).peekState("view-exceptions",{panelClass:"peek",pageTitle:"course.content.exceptions.peekPanel.title",url:"/view-exceptions",require:()=>n.e(9346).then(n.bind(n,509346)),resolve:{[g.gc]:t.resolve,currentContent:u.Z.currentContent},allowChildPeekStates:!0,peekStates:["roster"],peekViewName:"exceptions-peek"}).peekState("grades-bulk-download",{url:"/grades-bulk-download?columnId",require:[()=>n.e(53436).then(n.bind(n,853436))],pageTitle:"course.grades.grades-bulk-download.pageTitle",panelClass:"full"}).peekState(s.Z5.Grade.DOWNLOAD_TEST_RESULTS,{url:"/download-test-results?columnId",require:[()=>n.e(43063).then(n.bind(n,643063))],pageTitle:"course.grades.download-test-results.pageTitle",panelClass:"peek"}).peekState(s.Z5.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,{url:"/individual-grades?userId&membershipId&studentTabId",require:[()=>Promise.all([n.e(27459),n.e(97809),n.e(25062),n.e(98318),n.e(25125)]).then(n.bind(n,82608))],courseEntitlement:"course.gradebook-metadata.VIEW",peekStates:[s.Z5.Course.ACCOMMODATION,"assignment","assessment","gradebook-item","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview","multiple-attempt-grading",s.Z5.Grade.PER_GRADABLE_ITEM_SETTINGS,"assignment-grading",s.Z5.Grade.SUBMISSION_GRADING,s.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,"group-submission-grading","grade-item","grade-setting","grade-download-setting","grade-upload-setting",s.Z5.Grade.GRADE_AND_FEEDBACK,s.Z5.Grade.CREATE_OFFLINE_ATTEMPT,"conversion-analysis","content-manage",s.Z5.Lti.LTI,"discussion","submission-list","rubric","overall-grade","overall-grade-student","attendance","attendance-student-records","attendance-student-view","question-analysis",s.Z5.Grade.RECONCILE_GRADE,"grades-bulk-download",s.Z5.Journal.JOURNAL_PARTICIPATION_DETAIL,s.vs.INSTRUCTOR_DETAILS,s.Z5.Grade.PER_ASSESSMENT_SETTINGS,s.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING],panelClass:"full",pageTitle:"course.grades.instructorHeaderLabel",pageTitleHandler:b.config({listenOn:v.BY,provides:v.mV}),onChildStateEnter:(e,t)=>{let n=e.current.name;if(null==n?void 0:n.includes(".peek.course.grades.peek."))return;let i=n.match(/^base\.([a-z]+)\.peek\.course\./),s=i&&i[1]?`base.${i[1]}`:"base.recentActivity",r=`${s}.peek.course.grades.peek.view-individual-grades`;return{stateName:`${r}.peek.${t}`,args:{...e.params,gradebookView:C.dT.List,listViewType:y.VE.id,studentTabId:o.$O.Grades}}},resolve:{preRegisterCourseGradeRoutes:[h.HV,t=>{let n=["courses","recentActivity","messages","admin"].map(e=>`base.${e}`).reduce((e,t)=>[...e,t,`${t}.peek.course.grades`,`${t}.peek.course.grades.peek.view-individual-grades`],[]);for(let i of n){let n=t.get(i);e.registerPeekStates(n)}}]}}).peekState(s.Z5.Grade.SUBMISSION_DEEP_LINK,{url:"/submission-deep-link?deepLinkAttemptId&peerIndex",panelClass:"full",require:[()=>n.e(67527).then(n.bind(n,267527)),()=>n.e(67204).then(n.bind(n,567204))],peekStates:["assessment-submission-feedback"],peekViewName:"submission-deep-link"}).peekState(s.Z5.Grade.SUBMISSION_DEEP_LINK_FEEDBACK_TAB,{url:"/inline-feedback?mode&deepLinkAttemptId",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${s.Z5.Grade.SUBMISSION_DEEP_LINK}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(88510),n.e(82082),n.e(28835),n.e(31640),n.e(53695),n.e(9687),n.e(39712),n.e(63550)]).then(n.bind(n,963550))}},peekStates:[s.Z5.Grade.PER_ASSESSMENT_SETTINGS,s.Z5.Lti.LTI]}).peekState(s.Z5.Grade.ATTEMPT_RECEIPT_SEARCH,{url:"/attempt-receipt-search",resolve:{[g.gc]:t.resolve,translations:[p.serviceName,e=>e.loadBundle("features/course/grades/attempt-receipt-search")]},peekStates:[s.Z5.Grade.SUBMISSION_GRADING,s.Z5.Grade.GROUP_SUBMISSION_GRADING,s.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING],allowChildPeekStates:!0,panelClass:"peek",require:()=>Promise.all([n.e(97809),n.e(82136)]).then(n.bind(n,590837)),pageTitle:"course.grades.attempt-receipt-search.pageTitle",peekViewName:"attempt-receipt-search-peek"}),e.peekState(s.Z5.Grade.GRADEBOOK_GRID_ADVANCED_FILTERS,{panelClass:"peek",url:"/filters",require:()=>n.e(74041).then(n.bind(n,874041)),pageTitle:"course.grades.gradebookGrid.advancedFilters",peekViewName:"gradebook-grid-advanced-filters-peek"}),e.peekState(s.Z5.Grade.GRADING_SCHEMA,{resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]},url:"/grading-schema",require:()=>n.e(86644).then(n.bind(n,386644)),pageTitle:"course.grades.grading-schema.title",panelClass:"full"})}])},346523:function(e,t,n){"use strict";var i=n(276635),s=n(464027),r=n(429794),o=n(822658),a=n(939284),l=n(512923),c=n(266481),d=n(291146),u=n(168132),p=n(247126),m=n(408027),h=n(539210),g=n(470269);class f{}f.currentColumn=[p.HV,o.gc,"currentContent",(e,t,n)=>{if(n){let i=e.params.columnId||e.nextParams.columnId;return t.gradebook.columns.$buildRaw(n.getAssociatedGradingColumn(i)).$asPromise().then(e=>null==e.rubricAssociations?e.$fetch({expand:"associatedRubrics,externalGrade"}).$asPromise().then(e=>e.$asPromise()):e.$asPromise())}let i=e.nextParams.columnId;if(i&&i!==u.Rp.CREATE_COLUMN_ID)return t.gradebook.columns.$find(i,{expand:"associatedRubrics,externalGrade"}).$asPromise()}],f.assignmentContent=[o.gc,p.HV,a.HV,(e,t,n)=>{let i=t.nextParams.contentId?t.nextParams.contentId:t.nextParams.id;if(i){let t=e.contents.$find(i,{expand:"alignedGoals,assignedGroups,isGroupContent,permissions"});return n.setCurrentContent(t),t.$asPromise()}}],f.assessmentContent=[o.gc,"$q",d.serviceName,r.HV,p.HV,l.HV,c.HV,a.HV,(e,t,n,r,o,a,l,c)=>{if(o.nextParams.contentId!==u.courseContent.$G)return r.getContentInContentTree(r.findRootNode(e,u.courseContent.e6.Root),e.id,o.nextParams.contentId).then(e=>(c.setCurrentContent(e.content),e.content.$asPromise()));let d=t.defer();return a.loadSchemas(e).then(t=>{r.getOrMakeContentInContentTree(r.findRootNode(e,u.courseContent.e6.Root),e.id,void 0,o.nextParams.parentId,o.nextParams.positionBefore,o.nextParams.positionAfter).then(r=>{let a=r.content;c.setCurrentContent(a);let p=i.find(t,e=>e.scaleType===m.aQo.Score),g=o.nextParams.gradebookCategoryId,f=null;l.getOrLoadCategoriesForCourse(e.id).then(e=>{f=i.find(e,e=>e.id===g)}).then(()=>{let t;a.courseId=e.id,a.contentHandler=u.courseContent.ContentHandler.TestLink,a.body={},t=f?f.isUserDefined?"custom":f.title:"test";let i=f&&f.isUserDefined?{today:new Date,title:f.title}:{today:new Date};a.title=n.translateSync({locale:e&&e.locale,key:"course.grades.gradebook-item.title.default."+t,params:i,noWrap:!0}),a.setupAssessmentContentDetail(p.id,f),a.setVisibility(m.hbA.Hidden),a.getAssociatedGradingColumn().visible=!1,a.getAssociatedGradingColumn().possible=h.cQ.GRADE_DEFAULT_POINTS,(t===m.bu3.Test||"true"===o.nextParams.autoPostGrades)&&(a.getAssociatedGradingColumn().autoPostGrades=!0),a.ui.hasConversationAttached=!1,a.permissions={edit:!0},a.$save().$asPromise().then(()=>{d.reject(),o.go(o.next.name,s.extend(o.nextParams,{contentId:a.id,gradeitemView:"details",isCreateState:!0,parentId:void 0,positionBefore:void 0,positionAfter:void 0}))})})})}),d.promise}],f.currentContent=[o.gc,"$injector",p.HV,"translations",(e,t,n)=>-1===n.next.name.indexOf(g.RK.GRADEBOOK_ITEM_ASSESSMENT)&&-1===n.next.name.indexOf("gradebook-item.scorm-submissions")?t.invoke(f.assignmentContent,null,{currentCourse:e}):t.invoke(f.assessmentContent,null,{currentCourse:e})],f.nullContent=[()=>null],t.Z=f},122490:function(e,t,n){"use strict";n.d(t,{CQ:function(){return T},CS:function(){return x},Ve:function(){return A},sC:function(){return P},y8:function(){return k}});var i=n(464027),s=n(211796),r=n(509310),o=n(319434),a=n(515480),l=n(512923),c=n(266481),d=n(606592),u=n(291146),p=n(305233),m=n(247126),h=n(963341),g=n(447397),f=n(350383),b=n(104485),v=n(501),y=n(495175),C=n(470269),S=n(690349),E=n(408027),I=n(198022);function w(e,t){return function(n,i){t(n,i,e)}}let A="ultra.features.course.grades.gradesSettings.controller",k="update-telemetry-settings",x="bb-update-grade-settings-overall-grade",T="refresh-after-update-settings";class P{loadOverallGradeColumn(e){e.loadColumns(this.courseId,!0).then(e=>{let t=e.find(e=>e.externalGrade);t&&!this.overallGradeColumnId?(this.hasOverallGradeColumn=!0,this.overallGradeColumnId=t.id):this.hasOverallGradeColumn=!1})}loadTelemetrySettings(e){e.preferences.getPreference(P.INITIAL_FAILING_PREF_ARGS).then(e=>{this.studentFailingThreshold=e.value&&!Number.isNaN(Number(e.value))?Number(e.value):void 0}),e.preferences.getPreference(P.INITIAL_ABSENT_PREF_ARGS).then(e=>{null==e.value?this.studentAbsentThreshold=P.STUDENT_ABSENT_DEFAULT:0===Number(e.value)||Number.isNaN(Number(e.value))?this.studentAbsentThreshold=void 0:this.studentAbsentThreshold=Number(e.value)}),e.preferences.getPreference(P.INITIAL_ENABLE_PREF_ARGS).then(e=>{this.studentAlertsEnabled=e.value})}set postOption(e){this.gradebookSettings.promptUserToPostWhenDone="true"===e}get postOption(){return this.gradebookSettings&&this.gradebookSettings.promptUserToPostWhenDone?"true":"false"}switchView(e,t){this.isShowSettingPage=e,t&&(this.currentViewSchema=t,this.originCurrentViewSchema=i.copy(this.currentViewSchema))}goToTelemetryView(){this.ultraState.goPeekState(C.vs.INSTRUCTOR_CLASS)}toggleSchemaTitleEditable(){!this.course.isComplete()&&(!this.isSchemaTitleEditable||this.currentViewSchema.title&&this.currentViewSchema.title.length>0)&&(this.isSchemaTitleEditable?this.currentViewSchema.ui.displayTitle=this.currentViewSchema.title:this.currentViewSchema.localizableTitle?this.currentViewSchema.title=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$scope),key:this.originCurrentViewSchema.ui.displayTitleKey}):this.currentViewSchema.title=this.originCurrentViewSchema.ui.displayTitle,this.isSchemaTitleEditable=!this.isSchemaTitleEditable)}adjustLowerBound(e,t){if(t<this.currentViewSchema.symbols.length-1){let n=this.currentViewSchema.symbols[t+1];n.upperBound=e.lowerBound,n.absoluteTranslation=(n.lowerBound+n.upperBound)/2}e.absoluteTranslation=(e.lowerBound+e.upperBound)/2}isValidSymbolStr(e){let t=0;for(let n=0;n<this.currentViewSchema.symbols.length;n++)this.currentViewSchema.symbols[n].symbol===e.symbol&&t++;return 1===t}addSymbol(e,t){if(t<this.currentViewSchema.symbols.length-1){let n=this.currentViewSchema.symbols[t+1],i=(n.lowerBound+n.upperBound)/2;this.currentViewSchema.symbols.splice(t+1,0,{id:(0,I.v4)(),schemaId:e.schemaId,lowerBound:i,upperBound:n.upperBound,absoluteTranslation:(i+n.upperBound)/2,symbol:void 0}),n.upperBound=i,n.absoluteTranslation=(n.lowerBound+n.upperBound)/2,this.currentViewSchema.symbols[t+2]=n,this.timeout(()=>{this.$scope.$broadcast("bb-grades-schema-symbol-change",{action:"add",index:t+1})},this.$scope)}else throw Error("Can not add a symbol to the last symbol in the array.")}deleteSymbol(e,t){if(t!==this.currentViewSchema.symbols.length-1&&this.currentViewSchema.symbols.length>2){let n=this.currentViewSchema.symbols[t+1];n.upperBound=e.upperBound,n.absoluteTranslation=(n.lowerBound+n.upperBound)/2,this.currentViewSchema.symbols.splice(t,1),this.timeout(()=>{this.$scope.$broadcast("bb-grades-schema-symbol-change",{action:"delete",index:t})},this.$scope)}else throw Error("Can not delete the two last symbols in the array.")}validate(){var e;return null===(e=this.$scope.gradeSchemasPanelForm)||void 0===e?void 0:e.$valid}cancel(){i.copy(this.originCurrentViewSchema.symbols,this.currentViewSchema.symbols),this.currentViewSchema.title=this.originCurrentViewSchema.title,this.currentViewSchema.localizableTitle?this.currentViewSchema.ui.displayTitle=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$scope),key:this.originCurrentViewSchema.ui.displayTitleKey}):this.currentViewSchema.ui.displayTitle=this.originCurrentViewSchema.ui.displayTitle,this.$scope.gradeSchemasPanelForm.$setPristine()}save(){this.currentViewSchema.$patch().$then(e=>{this.$rootScope.$broadcast("bb-grades-schema-save",e),this.originCurrentViewSchema=i.copy(this.currentViewSchema),this.originCurrentViewSchema.title=this.currentViewSchema.title,this.$scope.gradeSchemasPanelForm.$setPristine()})}validateTelemetrySettings(){var e;return null===(e=this.$scope.telemetrySettingsForm)||void 0===e?void 0:e.$valid}saveTelemetrySettings(){if(!this.course||!this.canViewTelemetrySettingsUI)return this.$q.when(!0);let e={key:P.STUDENT_FAILING_PREFERENCE_KEY,value:this.studentFailingThreshold,visibleToStudents:!0},t={key:P.STUDENT_ABSENT_PREFERENCE_KEY,value:this.studentAbsentThreshold?this.studentAbsentThreshold:P.DISABLE_ABSENT_NOTICES,visibleToStudents:!0},n={key:P.STUDENT_ALERTS_ENABLED,value:this.studentAlertsEnabled,visibleToStudents:!0};return null!=this.studentFailingThreshold?this.$q.all([this.course.preferences.setPreference(e),this.course.preferences.setPreference(t),this.course.preferences.setPreference(n)]):this.$q.all([this.course.preferences.deletePreference(P.STUDENT_FAILING_PREFERENCE_KEY),this.course.preferences.setPreference(t),this.course.preferences.setPreference(n)])}getCourseColor(){return this.$scope.course.courseColorClass}addNewCategory(){this.currentEditedCategory&&this.cancelEditCategory(this.currentEditedCategory),this.isInputBluredByCancelAdd=!1,this.showAddNewCategory=!0,this.timeout(()=>{i.element("#add-new-category-input").on("keydown",e=>{e.keyCode!==d.Mf||e.shiftKey||(this.isInputBluredByCancelAdd=!0)});let e=i.element("#cancel-add-category-button");e.on("mousedown",()=>{this.isInputBluredByCancelAdd=!0}),e.on("keydown",e=>{e.keyCode===d.Mf&&e.shiftKey?this.isInputBluredByCancelAdd=!1:e.keyCode===d.Mf&&(this.isInputBluredByCancelAdd=!1,this.validateAndAddCategory())})},this.$scope,0,!1)}cancelAddNewCategory(){this.newCategoryName="",this.showAddNewCategory=!1,this.clearValidationForAddCategory()}editCategory(e){this.showAddNewCategory&&this.cancelAddNewCategory(),this.currentEditedCategory&&this.cancelEditCategory(this.currentEditedCategory),this.switchEditMode(e,!0),e.isUserDefined&&this.timeout(()=>{i.element("#cancel-update-category-button-"+e.id).on("mousedown",()=>{this.isInputBlurredByCancelButton=!0})},this.$scope)}cancelEditCategory(e){this.switchEditMode(e,!1),this.clearValidationForUpdateCategory(e)}switchEditMode(e,t){this.timeout(()=>{this.isInputBlurredByCancelButton=!t,this.currentEditedCategory=t?e:null,this.newCategoryName=t?e.localizableTitle.languageKey:"",e.ui.isEditMode=t},this.$scope),t&&this.timeout(()=>{this.addEventHandlerForEditCategory(e)},this.$scope)}validateCategory(e,t){let n=this.validationManager,i=n.execute("isEmpty",this.newCategoryName),s=!i&&n.execute("isCategoryDuplicate",this.newCategoryName,t),r=t?t.ui.form[e+t.id]:this.$scope.addCategoryForm[e];return r&&(i||s)&&(r.$setValidity("required",!i),r.$setValidity("nameDuplicate",!s),r.$setDirty()),!i&&!s}createCategory(){this.isInputBluredByCancelAdd||this.course.gradebook.categories.$create({title:this.newCategoryName}).$then(e=>{let t=this.categories.length;if(t>0){this.categoryService.reorderCategories(this.categories,t-1),this.cancelAddNewCategory();let n=this.$scope.addCategoryForm["add-new-category-input"];n&&n.$setPristine(),this.categoryService.updateCategoriesForCourse(this.course.id,e),e.permissions={delete:!0,edit:!0},this.timeout(()=>{this.addEventHandlerForEditCategory(e)},this.$scope)}})}addEventHandlerForEditCategory(e){i.element("#update-category-input-"+e.id).on("keydown",e=>{e.keyCode!==d.Mf||e.shiftKey||(this.isInputBlurredByCancelButton=!0)});let t=i.element("#cancel-update-category-button-"+e.id);t.on("mousedown",e=>{this.isInputBlurredByCancelButton=!0}),t.on("keydown",t=>{t.keyCode===d.Mf&&t.shiftKey?this.isInputBlurredByCancelButton=!1:t.keyCode===d.Mf&&(this.isInputBlurredByCancelButton=!1,this.validateAndUpdateCategory(e))})}deleteCategory(e){let t=this.categories[e];this.categories[e].$destroy().$allow(["400"]).$asPromise().then(e=>{e&&e.$response&&e.$response.data&&400===e.$response.data.status?this.$modal.open({template:S,scope:this.$scope,resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]}}):this.categoryService.deleteCategoriesForCourse(this.course.id,t)})}updateCategory(e){this.isInputBlurredByCancelButton||(e.localizableTitle.languageKey=this.newCategoryName,e.title=e.localizableTitle.languageKey,e.$save(["title"]).$then(()=>{this.switchEditMode(e,!1),this.categoryService.updateCategoriesForCourse(this.course.id,e)}))}getCategoryIcon(e){return this.categoryService.getCategoryIcon(e)}validateAndAddCategory(){this.validateCategory("add-new-category-input")&&this.createCategory()}validateAndUpdateCategory(e){this.validateCategory("update-category-input-",e)&&this.updateCategory(e)}getCategoryMaxLength(){return 64}getCategoryMaxLengthDiff(){let e=this.$scope.addCategoryForm["add-new-category-input"].$error;return e&&e.maxlength?e.maxlength.diff:0}getCategoryMaxLengthDiffUpdate(e){let t=e.ui.form["update-category-input-"+e.id].$error;return t&&t.maxlength?t.maxlength.diff:0}showOptionsForCategory(e){return e.title!==E.bu3.Attendance&&(!e.permissions||e.permissions.delete||e.permissions.edit)}getCategoryOverflowMenu(e){let t=[];return e.permissions&&e.permissions.edit&&t.push({icon:"draw",onClick:()=>{this.editCategory(e)},labelKey:"global.edit"}),e.permissions&&e.permissions.delete&&t.push({icon:"trash",onClick:()=>{this.deleteCategory(this.categories.indexOf(e))},confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>this.$q.when(h.Hz("x-bb-category-delete"))},labelKey:"global.delete"}),t}clearValidationForAddCategory(){let e=this.$scope.addCategoryForm["add-new-category-input"];e&&(e.$setValidity("required",!0),e.$setValidity("nameDuplicate",!0),e.$setPristine())}clearValidationForUpdateCategory(e){let t=e.ui.form["update-category-input-"+e.id];t&&(t.$setValidity("required",!0),t.$setValidity("nameDuplicate",!0),t.$setPristine())}getCodeOverflowMenu(e){let t=[];return e.model.permissions&&e.model.permissions.update&&t.push({icon:"draw",onClick:this.updateNotation.bind(this,e),labelKey:"global.edit"}),e.model.permissions&&e.model.permissions.delete&&t.push({icon:"trash",onClick:this.deleteNotation.bind(this,e),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>this.$q.when(h.Hz("x-bb-grade-notation"))},labelKey:"global.delete"}),t}get isNotationEditing(){return this.notations.some(e=>e.isEditing)}get activeNotation(){return this.notations.filter(e=>e.isEditing)[0]}showOptionsForNotation(e){let t=e.model.permissions;return!t||t.delete||t.update}createNotation(e){this.isNotationEditing||(e.stopPropagation(),this.buildNewNotation())}updateNotation(e){e.model.permissions.update&&!this.isNotationEditing&&(e.code=e.model.code,e.description=e.model.description,this.timeout(()=>{e.isEditing=!0},this.$scope))}leaveEditMode(e,t){this.isNotationEditing&&("cancel"===t?this.cancelEdit(e):(this.validateNotation(e),this.confirmEdit(e)),this.$scope.$broadcast("focus",this.focusNotationEventName))}confirmEdit(e){let t=this.isCodeValidate,n=!1;if((e.model.code!==e.code||e.model.description!==e.description)&&(n=!0),t)e.isEditing=!1,e.model.code=e.code,e.model.description=e.description,e.model.id?n&&e.model.$save().$then(e=>{this.$scope.$emit("grade-notation-update",this.course.id),this.$rootScope.$broadcast("bb-reload-grid-view")}):this.course.gradebook.performancecodes.$create(e.model).$then(t=>{e.model=t,this.$scope.$emit("grade-notation-update",this.course.id),this.$rootScope.$broadcast("bb-reload-grid-view")});else{let t=e.form["title-"+e.id],n=e.form["detail-"+e.id];t.$setTouched(),n.$setTouched()}}cancelEdit(e){e.isEditing=!1,(""===e.model.code||""===e.model.description)&&this.deleteNotation(e)}validateNotation(e){let t=e.form["title-"+e.id],n=e.form["detail-"+e.id],i=this.validationManager,s=i.execute("isEmpty",e.code),r=i.execute("isNotationNumberOnly",e.code),o=i.execute("isEmpty",e.description),a=i.execute("isNotationExist",e),l=i.execute("isNotationSchemaDuplicate",e),c=e=>{t.$setValidity("required","isNotationEmpty"!==e),t.$setValidity("notationNumberOnly","isNotationNumberOnly"!==e),t.$setValidity("notationExist","isNotationExist"!==e),t.$setValidity("notationSchemaDuplicate","isNotationSchemaDuplicate"!==e),n.$setValidity("required","descriptionEmpty"!==e)};s?c("isNotationEmpty"):r?c("isNotationNumberOnly"):a?c("isNotationExist"):l?c("isNotationSchemaDuplicate"):o?c("descriptionEmpty"):c(),t.$setDirty(),n.$setDirty(),this.isCodeValidate=!(s||r||o||a||l)}deleteNotation(e){let t=this.notations.indexOf(e);e.model.$destroy().$allow(["400"]).$asPromise().then(e=>{this.$scope.$emit("grade-notation-update",this.course.id),this.notations.splice(t,1),this.$rootScope.$broadcast("bb-reload-grid-view")})}buildNewNotation(){let e={id:this.generateNotationId(),code:"",description:"",model:this.GradeNotationModel.$build({code:"",description:"",permissions:{delete:!0,update:!0}}),isEditing:!0};return this.notations.push(e),e}generateNotationId(){return"grade_notation_"+P.uid++}pastDueCheckboxEvent(){this.$scope.$broadcast(g.OI,this.isPastZeroAssigned)}automaticZeroConfirm(e){let t;this.isPastZeroAssigned?(t={countUnsubmittedWorkAsZero:!0},delete this.gradebookSettings.retainAutoZero):(a.Z.Retain===e.choice&&(t={countUnsubmittedWorkAsZero:!1,retainAutoZero:!0}),a.Z.Delete===e.choice&&(t={countUnsubmittedWorkAsZero:!1,retainAutoZero:!1})),this.updatePastDueZero(t)}automaticZeroCancel(){this.isPastZeroAssigned=!this.isPastZeroAssigned}updatePastDueZero(e){Object.assign(this.gradebookSettings,e),this.gradebookSettings.$patch().$then(()=>{this.$rootScope.$broadcast(T)})}constructor(e,t,n,s,a,l,c,d,u,p,m,h,g,f,b){this.$scope=e,this.$rootScope=t,this.$q=n,this.course=s,this.$modal=a,this.localizeService=l,this.timeout=c,this.GradeNotationModel=d,this.ultraState=u,this.schemaService=p,this.categoryService=m,this.gradebookPermissionService=h,this.entitlementService=g,this.context=f,this.grade=b,this.isShowSettingPage=!0,this.isSchemaTitleEditable=!1,this.notations=[],this.isCodeValidate=!0,this.hasTelemetryData=!1,this.showAddNewCategory=!1,this.newCategoryName="",this.isInputBluredByCancelAdd=!1,this.isInputBlurredByCancelButton=!1,this.currentEditedCategory=null,this.focusNotationEventName="add-notation-button-focus",this.isPastZeroAssigned=!0,e.gradesSettings=this,this.courseId=this.ultraState.nextParams.courseId,this.hasGradebookModifyAccess=this.gradebookPermissionService.canModify(),this.hasContentDeleteAccess=this.entitlementService.isEntitled(o.eo.DeleteContent,this.courseId),this.hasContentModifyAccess=this.entitlementService.isEntitled(o.eo.ModifyContent,this.courseId),this.hasContentCreateAccess=this.entitlementService.isEntitled(o.eo.CreateContent,this.courseId),this.canViewTelemetrySettingsUI=this.hasContentDeleteAccess&&this.hasContentModifyAccess&&this.hasContentCreateAccess,s&&(p.loadSchemas(s).then(e=>{e.forEach(e=>{e.localizableTitle&&(e.ui.displayTitle=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$scope),key:e.ui.displayTitleKey}))}),this.schemas=e.filter(e=>e.scaleType===E.aQo.Tabular)}),s.gradebook.settings.$resolve().$then(e=>{this.gradebookSettings=e,this.isPastZeroAssigned=e.countUnsubmittedWorkAsZero,this.isPastZeroCompleted=this.course.isComplete()}),this.categoryService.getOrLoadCategoriesForCourse(s.id,!0).then(e=>{this.categories=e}),s.gradebook.performancecodes.$refresh().$then(e=>{e.forEach(e=>{let t={model:e,id:this.generateNotationId(),isEditing:!1,code:e.code,description:e.description};this.notations.push(t)}),this.notations.permissions=e.permissions}),this.loadOverallGradeColumn(b),this.loadTelemetrySettings(s),this.$scope.$on(k,(e,t)=>{this.studentFailingThreshold=t.studentFailingThreshold,this.studentAbsentThreshold=t.studentAbsentThreshold,this.studentAlertsEnabled=t.studentAlertsEnabled}),this.$scope.$on(x,(e,t,n)=>{this.hasOverallGradeColumn=n,this.overallGradeColumnId=t})),this.validationManager={isEmpty:e=>!e,isNotationNumberOnly:e=>!Number.isNaN(Number(e)),isNotationExist:e=>this.notations.some(t=>t!==e&&t.code===e.code),isNotationSchemaDuplicate:e=>this.schemas[0].symbols.some(t=>t.symbol===e.code),isCategoryDuplicate:(e,t)=>this.categories.some(n=>{if(n===t)return!1;let i=n.localizableTitle.languageKey;return n.isUserDefined||(i=i.substr(0,i.indexOf("."))),i.toLocaleLowerCase()===e.toLocaleLowerCase()}),execute:(e,...t)=>{let n=this.validationManager;return n[e]&&n[e].apply(n,[].slice.call(t,0))}},this.validationManager.execute(),this.entitlementService.hasCourseEntitlement(o.b0.CreateRubrics,this.courseId).then(t=>{e.hasRubricCreateAccess=t}),this.context.getSystemInfo().$asPromise().then(e=>{e.telemetryEnabled&&(this.hasTelemetryData=!0)}),e.$on("$stateChangeStart",(t,n,i,s,o)=>{if(s.name.endsWith(C.RK.GRADE_SETTING)&&!n.name.endsWith(C.RK.GRADE_SETTING)&&e.gradesSettings.saveTelemetrySettings(),s.name===n.name||e.gradeSchemasPanelForm&&(!e.gradeSchemasPanelForm||e.gradeSchemasPanelForm.$dirty)){if(n.name.indexOf("rubric.mode")>1&&r.e.Copy===r.J(i.mode))return!0;t.preventDefault()}else this.leaveEditMode(this.activeNotation,"confirm")}),e.$watch("gradeSchemasPanelForm.$dirty",()=>{this.isShowSettingPage||(e.gradeSchemasPanelForm&&e.gradeSchemasPanelForm.$dirty?(i.element(".bb-offcanvas-panel.peek .bb-close").hide(),i.element(".bb-offcanvas-panel.peek .panel-wrap").addClass("has-footer")):(i.element(".bb-offcanvas-panel.peek .bb-close").show(),i.element(".bb-offcanvas-panel.peek .panel-wrap").removeClass("has-footer")))})}}P.STUDENT_FAILING_PREFERENCE_KEY="telem.threshold.failing.grade",P.STUDENT_ABSENT_PREFERENCE_KEY="telem.threshold.days.absent",P.STUDENT_ALERTS_ENABLED="telem.student.alerts.enabled",P.STUDENT_ABSENT_DEFAULT=5,P.DISABLE_ABSENT_NOTICES=0,P.INITIAL_FAILING_PREF_ARGS={key:P.STUDENT_FAILING_PREFERENCE_KEY},P.INITIAL_ABSENT_PREF_ARGS={key:P.STUDENT_ABSENT_PREFERENCE_KEY},P.INITIAL_ENABLE_PREF_ARGS={key:P.STUDENT_ALERTS_ENABLED,defaultValue:"true"},P.uid=0,P=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}([w(0,(0,s.tB)("$scope")),w(1,(0,s.tB)("$rootScope")),w(2,(0,s.tB)("$q")),w(3,(0,s.tB)("currentCourse")),w(4,(0,s.tB)("$modal")),w(5,(0,s.tB)(u.serviceName)),w(6,(0,s.tB)(p.H)),w(7,(0,s.tB)("GradeNotationModel")),w(8,(0,s.tB)(m.HV)),w(9,(0,s.tB)(l.HV)),w(10,(0,s.tB)(c.HV)),w(11,(0,s.tB)(b.HV)),w(12,(0,s.tB)(f.HV)),w(13,(0,s.tB)(v.HV)),w(14,(0,s.tB)(y.HV))],P)},949237:function(e,t,n){"use strict";n.d(t,{UM:function(){return y},Ve:function(){return v},o3:function(){return C}});var i=n(464027),s=n(291146),r=n(247126),o=n(369695),a=n(855819),l=n(305233),c=n(451251),d=n(748157),u=n(793423),p=n(495175),m=n(110324),h=n(869374),g=n(813710),f=n(592178),b=n(625506);let v="ultra.features.course.grades.gradesUploadSettings.controller",y="refresh-after-upload";class C{parseUploadGradebook(e){this.course.gradebook.parseUploadedGradebook(e).then(t=>{if(400===t.$response.status)return this.showErrorModal(m),!1;this.timeoutService(()=>{c.pn(this.ultraState.current.name,"peek.content-collection-picker")&&this.closePanel()},this.$scope,0),this.hasDroppedClass=!0,this.invalidUserNames=t.invalidUserNames,this.invalidUserNamesCount=this.invalidUserNames&&this.invalidUserNames.split(",").filter(e=>e.trim()).length,this.fileName=e.name,this.changedList=t.changedList,this.selectAll=!0,this.checkAll(!0)})}checkAll(e){this.columnList=[],this.errorColumnList=[],i.forEach(this.changedList,t=>{if(!t.columnTitle)return!1;t.isError?(t.message.languageKey=t.message.languageKey.replace(/\./g,"_"),t.message.params&&this.getColumnErrorMessage(t.message),t.message.translatedLanguageKey=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:t.message.languageKey,params:{data:t.message.detailErrorMessageKey},noWrap:!0,noEscape:!0}),this.errorColumnList.push(t)):(t.checked=e,t.clearGradeOption=t.needOverrideAndAttemptsChoices?"OVERRIDE":"DO_NOTHING",this.updateColumnList(t,t.checked))})}updateColumnList(e,t){t?this.columnList.push(e):this.columnList.splice(this.columnList.indexOf(e),1)}validate(){return this.columnList&&this.columnList.length>0}cancelClicked(){this.closePanel()}chooseDestination(){this.ultraState.goPeekState("content-collection-picker",{pickerType:"File",multi:"false"})}closePanel(){this.ultraState.leavePeekState(this.ultraState.current.name)}deleteFile(){this.hasDroppedClass=!1,this.columnList=[],this.changedList=[],this.errorColumnList=[],this.selectAll=!1}showErrorModal(e){this.modalService.open({scope:this.modalScope,template:e})}confirmToClose(){this.confirmedToClose=!0,this.ultraState.leavePeekState(this.ultraState.current.name)}registerStateChangeListener(){this.stateChangeListener=this.$scope.$on("$stateChangeStart",(e,t,n,i,s)=>{0>t.name.indexOf("grade-upload-setting")&&this.hasDroppedClass&&!this.afterImported&&!this.confirmedToClose&&(e.preventDefault(),this.$scope.$broadcast("show-confirmation","grades-upload-setting"))})}importGradebook(e){if(this.invalidUserNames&&!e)return this.$scope.$broadcast("show-confirmation","grades-upload-continue-with-errors"),!1;let t={changedList:this.columnList};this.course.gradebook.importGradebook(t).then(e=>{if(this.afterImported=!0,"bb-rest-course-is-closed"===e.$response.data.code)return this.showErrorModal(h),!1;e.errorItem?(this.modalScope.failedItems=e.errorItem,this.modalScope.failedItemsCount=e.errorItem&&e.errorItem.split(",").filter(e=>e.trim()).length,this.showErrorModal(f),this.ultraState.leavePeekState(this.ultraState.current.name)):(this.$rootScope.$broadcast(y,e.savedItemsIds),this.ultraState.leavePeekState(this.ultraState.current.name),this.toast.show({messageKey:"course.grades.grades-upload-settings.complete",icon:"icon-check",toastStatus:"success"}))})}getColumnErrorMessage(e){e.params[0].rawValue?e.detailErrorMessageKey=e.params[0].rawValue:e.params.forEach(t=>{e.languageKey===t.localizableMessage.languageKey.replace(/\./g,"_")&&(e.detailErrorMessageKey=t.localizableMessage.params?t.localizableMessage.params[0].rawValue:"")})}constructor(e,t,n,i,s,r,o,a,l,d,p){this.$scope=e,this.$rootScope=t,this.postMessageDispatcher=n,this.timeoutService=i,this.course=s,this.ultraState=r,this.toast=o,this.modalService=a,this.contentCollectionAvailability=l,this.bbLocalize=d,this.grade=p,this.confirmedToClose=!1,this.fileName="",this.hasDroppedClass=!1,this.selectAll=!1,this.showErrorDetail=!1,this.afterImported=!1,this.showContentCollection=!1,this.uploadErrorFileTypeTemplate=g,this.invalidUserNames="",this.invalidUserNamesCount=0,this.failedItems="",this.failedItemsCount=0,e.gradesUploadSettings=this,this.showContentCollection=this.contentCollectionAvailability.toolEnabledSetting.isAvailable,this.modalScope=this.$rootScope.$new(),e.$on(u.Ei,(e,t,n,i)=>{if(i===u.mb.Uploaded){this.source="LOCAL";let e={source:this.source,name:n.fileName,location:n.fileLocation};this.parseUploadGradebook(e),b(".upload-gradebook-panel .help-link").focus()}}),this.postMessageDispatcher.registerEventHandler("classic-picker-submit",e=>{let t=e.items[0];if(!/(\.xls|\.csv)$/i.exec(t.linkTitle))return this.showErrorModal(g),!1;this.source="CONTENT_COLLECTION";let n=t&&t.url||"",i=n.substr(n.lastIndexOf("/")),s={source:this.source,name:t.linkTitle||"",location:i};this.parseUploadGradebook(s)},this.$scope),this.postMessageDispatcher.registerEventHandler("classic-picker-cancel",(e,t)=>{this.timeoutService(()=>{c.pn(this.ultraState.current.name,"peek.content-collection-picker")&&this.closePanel(),window!==t&&t.close()},this.$scope,0)},this.$scope),this.uploadAction=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"course.grades.grades-upload-settings.upload"}),this.completedModalTitleKey=`${this.course.isOrganization?"course":"organization"}.grades.grades-upload-settings.courseComplete.title`,this.registerStateChangeListener()}}C.$inject=["$scope","$rootScope",a.HV,l.H,"currentCourse",r.HV,o.HV,d.HV,"contentCollectionAvailability",s.serviceName,p.HV]},509310:function(e,t,n){"use strict";var i,s;function r(e){if(e)return Object.values(i).find(t=>t.toLowerCase()===e.toLowerCase())}n.d(t,{J:function(){return r},e:function(){return i}}),(s=i||(i={})).None="none",s.Create="create",s.Edit="edit",s.Copy="copy"},754018:function(e,t,n){"use strict";n.d(t,{El:function(){return l},e1:function(){return a}});var i=n(464027),s=n(662142),r=n(291146),o=n(247126);let a="ultra.course.rubric.rubric-goal-alignment",l="rubric-goal-alignment",c=["course","goal-alignment","goal"];class d extends s.Z{resolveGoalAlignableContent(){return["$q","currentCourse","currentRubric",r.serviceName,o.HV,(e,t,n,i,s)=>e.when(i.loadBundle(`features/${c.join("/")}`)).then(()=>t.rubrics.$find(n.id,{expand:"rows.alignedGoals,permissions"}).$asPromise().then(e=>{e.rows.forEach(e=>{e.id&&s.nextParams&&s.nextParams.rowId&&e.id===s.nextParams.rowId&&(this.rubricRow=e)})})).then(()=>this.rubricRow?this.setupGoalAlignableContent(this.rubricRow,i):e.when([]))]}getPeekStateName(){return l}getOverrideSubTitle(){return["currentRubric",o.HV,(e,t)=>{let n="";return e.rows.forEach(e=>{e.id&&t.nextParams&&t.nextParams.rowId&&e.id===t.nextParams.rowId&&(n=e.header)}),n}]}setupGoalAlignableContent(e,t){return[{getContentTitleForGoalAlignment:()=>t.translateSync({locale:null,key:`${c.join(".")}.goalsAlignedWithRubricCriteria`}),getContentIdForGoalAlignment(){return e.getContentIdForGoalAlignment()},isCurrentUserEligibleToAlignGoals(){return e.isCurrentUserEligibleToAlignGoals()},alignedGoals:e.alignedGoals.map(t=>(t.content=e,t))}]}constructor(...e){super(...e),this.url="/goalAlignment/:rowId",this.panelClass="peek rubric-goal-peek"}}d.$inject=["$injector","$q"],i.module(a,[o.e1,r.moduleName]).config([o.e2,e=>{let t=new d;e.peekState(t.getPeekStateName(),t)}])},934366:function(e,t,n){"use strict";n.d(t,{e:function(){return h}});var i=n(464027),s=n(291146),r=n(822658),o=n(939284),a=n(763674),l=n(509310),c=n(387679),d=n(754018),u=n(247126),p=n(159212),m=n(470269);let h="ultra.course.rubrics.router";i.module(h,[s.moduleName,u.e1,p.e1,d.e1,r.e1,o.e1,a.e1]).config([u.e2,r.e2,a.e2,o.e2,(e,t,i,o)=>{e.peekState(m.Z5.Rubric.RUBRIC,{abstract:!0,url:"/rubric",resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric"),t.loadBundle("features/course/goal-alignment/goal")])],[r.gc]:t.resolve,mode:()=>l.e.None}}).peekState(m.Z5.Rubric.RUBRIC_MODE,{url:"?rubricId&mode",panelClass:"full",pageTitle:"course.rubric.title",peekStates:[d.El],peekViewName:"rubric-grid-peek@",require:()=>Promise.all([n.e(55331),n.e(80497),n.e(9358)]).then(n.bind(n,749959)),resolve:{currentRubric:[r.gc,c.HV,u.HV,(e,t,n)=>{let i=n.nextParams&&n.nextParams.mode.toLowerCase();switch(i){case l.e.Create:return t.generateDefaultRubric(e);case l.e.Edit:return n.nextParams.rubricId?e.rubrics.$find(n.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise():null;case l.e.Copy:return e.rubrics.$find(n.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise().then(e=>t.createRubricCopy(e));default:return null}}],hasEvaluations:["currentColumn",u.HV,(e,t)=>{let n=t.nextParams&&t.nextParams.mode.toLowerCase();return n===l.e.Edit&&(e?e.hasEvaluations():null)}],mode:[u.HV,e=>{let t=e.nextParams&&e.nextParams.mode.toLowerCase();switch(t){case l.e.Create:return l.e.Create;case l.e.Edit:return l.e.Edit;case l.e.Copy:return l.e.Copy;default:return l.e.None}}]}}).peekState(m.Z5.Rubric.RUBRIC_EVALUATION,{url:"/rubric-evaluation?userId&columnId",panelClass:"peek",pageTitle:"course.rubricEvaluation.title",params:{columnId:null,groupId:null,userId:{array:!1}},require:()=>Promise.all([n.e(82082),n.e(15403)]).then(n.bind(n,315403)),resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric")])],[a.gc]:i.resolve,offCanvasArgs:["offCanvasArgs",p.HV,(e,t)=>(e.overlay=!t.isLargeBreakpoint(),e)]}}).peekState(m.Z5.Rubric.RUBRIC_VIEW,{url:"/rubric-view?columnId",panelClass:"peek",pageTitle:"course.rubricView.title",params:{columnId:null},require:()=>Promise.all([n.e(82082),n.e(23193)]).then(n.bind(n,523193)),resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/directives/rubric/rubric-view"),t.loadBundle("components/services/rubric")])],offCanvasArgs:["offCanvasArgs",p.HV,(e,t)=>(e.overlay=!t.isLargeBreakpoint(),e)]}})}])},226443:function(e,t,n){"use strict";n.d(t,{e:function(){return u}});var i=n(464027),s=n(291146),r=n(335920),o=n(168132),a=n(372457),l=n(247126),c=n(308587),d=n(821005);let u="ultra.predict.routes";i.module(u,[s.moduleName,r.e1,o.e1,a.e1,l.e1,c.e1]).config([l.e2,e=>{var t;e.baseState("predictBase",{abstract:!0,require:()=>Promise.all([n.e(4729),n.e(19003)]).then(n.bind(n,719003)),resolve:(t=["components/directives/telemetry/telemetry","components/services/telemetry-chart","features/predict/predict","features/locations","features/course/course","global"],{user:[a.HV,e=>e.userModel.$asPromise()],localize:["$q","$rootScope","user","$window",s.serviceName,c.HV,(e,n,i,r,o,a)=>{a.getInstitutionPreference(d.Z.OverrideLanguagePack).then(a=>{let l=a.value||i.locale||"en",c=r.location.href.match(s.localeQuerystringRegex);c&&(l=c[1]),l=o.validateLocale(l)?l:"en",o.setUserLocale(l);let d=[o.setLocale(n,l),...t.map(e=>o.loadBundle(e))];return e.all(d)})}]})}).baseState("predictBase.predictAdvisorStudents",{url:"/predict/advisor/students?customFields&resetFTUE",require:()=>Promise.all([n.e(55331),n.e(41273),n.e(49812),n.e(13532),n.e(80497),n.e(60357)]).then(n.bind(n,671065)),pageTitle:"predict.advisor.title",peekStates:["predictAdvisorStudentsFilter","predictMessagingPanel","predictAdvisorStudentProfilePanel","predictCourseStudentPanel"]}).baseState("predictBase.predictCourseBase",{url:"/predict/courses/:courseId",require:()=>Promise.all([n.e(12821),n.e(41273),n.e(89038),n.e(87185)]).then(n.bind(n,687185)),pageTitle:"predict.course.title"}).baseState("predictBase.predictCourseStudentBase",{url:"/predict/instructor/students/:studentId/course/:courseId",require:()=>Promise.all([n.e(12821),n.e(35195),n.e(41273),n.e(68297),n.e(49812),n.e(57066),n.e(53005)]).then(n.bind(n,253005)),peekStates:["predictMessagingPanel"],pageTitle:"predict.instructor.title"}).peekState("predictAdvisorStudentProfilePanel",{url:"/profile/:studentId",require:()=>Promise.all([n.e(27459),n.e(41273),n.e(49812),n.e(32113),n.e(13348),n.e(72549)]).then(n.bind(n,672549)),panelClass:"full",peekStates:["predictMessagingPanel","predictCourseStudentPanel","predictFavoritesPanel","predictAdvisorStudentProfilePanel.course-performance","predictAdvisorStudentProfilePanel.advisor-notes","predictAdvisorStudentProfilePanel.interests"],pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.course-performance",{url:"/outline",views:{"student-details-tabs-content@":{require:()=>Promise.all([n.e(41273),n.e(32113),n.e(14975)]).then(n.bind(n,846736))}},peekStates:["predictCourseStudentPanel","predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.advisor-notes",{url:"/notes-contributors",views:{"student-details-tabs-content@":{require:()=>Promise.all([n.e(27459),n.e(41273),n.e(49812),n.e(32113),n.e(13348),n.e(96774)]).then(n.bind(n,596774))}},peekStates:["predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.interests",{url:"/interests",views:{"student-details-tabs-content@":{require:()=>n.e(99397).then(n.bind(n,99397))}},peekStates:["predictFavoritesPanel","predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictCourseStudentPanel",{url:"/courses/:courseId/students/:studentId",require:()=>Promise.all([n.e(12821),n.e(35195),n.e(41273),n.e(68297),n.e(49812),n.e(57066),n.e(81854)]).then(n.bind(n,581854)),panelClass:"full",peekStates:["predictMessagingPanel"],pageTitle:"predict.instructor.title"}).peekState("predictAdvisorStudentsFilter",{url:"/filter",require:()=>Promise.all([n.e(41273),n.e(13532),n.e(46124)]).then(n.bind(n,719611)),panelClass:"peek",pageTitle:"predict.advisor.title"}).peekState("predictMessagingPanel",{url:"/messagingPanel?messageStudentId&messageCourseId&messageType&messageLaunchOrigin",require:()=>Promise.all([n.e(41273),n.e(13974)]).then(n.bind(n,313974)),panelClass:"peek",pageTitle:"predict.messagingPanel.title"}).peekState("predictFavoritesPanel",{url:"/favorites/:favoriteId?favoriteCategory?city&state&region&country",require:()=>n.e(99520).then(n.bind(n,599520)),panelClass:"peek",pageTitle:"predict.favoritesPanel.title"})}])},916415:function(e,t,n){"use strict";n.d(t,{ZU:function(){return o},wA:function(){return a}});var i=n(464027),s=n(276635),r=n(625506);class o{static OnRootScope(e,t,n){return o.unbindOnDestroy(e,e.$root.$on(t,n))}static OnScope(e,t,n){return o.unbindOnDestroy(e,e.$on(t,n))}static unbindOnDestroy(e,t){return e.$on("$destroy",t),t}static OnWindow(e,t,n){let i=r(window);i.on(e,t);let a=(0,s.once)(()=>i.off(e,t));return o.unbindOnDestroy(n,a),a}}function a(e){return t=>{if(!e.module&&!e.moduleName)throw Error("Component must define a module or moduleName");let n=e.module?e.module:i.module(e.moduleName,e.requireModules||[]);n.component(e.componentName,i.extend(e,{controller:t}))}}},719151:function(e,t,n){"use strict";n.d(t,{f:function(){return r},z:function(){return s}});var i=n(613392);function s(e,t){return t&&e===t.columnName?t.sortType===i.E.ASCENDING?t.sortType=i.E.DESCENDING:t.sortType===i.E.DESCENDING?t.sortType=i.E.NONE:t.sortType=i.E.ASCENDING:t={columnName:e,sortType:i.E.ASCENDING},t}function r(e,t){return(null==t?void 0:t.columnName)===e?t.sortType:i.E.NONE}},274711:function(e,t,n){"use strict";var i,s;n.d(t,{F:function(){return i}}),(s=i||(i={})).NoChanges="noChanges",s.NotSaved="notSaved",s.Saved="saved",s.Saving="saving",s.Cancelling="cancelling",s.Deleting="deleting"},717205:function(e,t,n){"use strict";n.d(t,{Ah:function(){return a},Bv:function(){return r},TF:function(){return o},s3:function(){return s}});let i="anonymousId";function s(){return i}function r(e,t){let n=t.translateSync({locale:t.getLocale(e),key:"components.directives.avatar.anonymous",noWrap:!0,noEscape:!0});return{id:i,givenName:n,familyName:"",userName:void 0}}function o(e){return(null==e?void 0:e.id)===i}function a(e){var t;let n=null==e?void 0:e.givenName,i=null==e?void 0:e.familyName;return e&&(i||n)?{avatarUrl:null===(t=e.avatar)||void 0===t?void 0:t.permanentUrl,givenName:n,familyName:i,otherName:e.otherName,preferredDisplayName:e.preferredDisplayName,pronouns:e.pronouns,pronunciation:e.pronunciation,pronunciationAudio:e.pronunciationAudio}:null}},913481:function(e,t,n){"use strict";function i(e){if(null==e)return!1;if("boolean"==typeof e)return e;if("string"==typeof e){let t=e.trim();return"true"===t.toLowerCase()||"1"===t}if("number"==typeof e)return 0!==e;throw Error('Cannot convert "'+e+'" to boolean')}n.d(t,{F:function(){return i}})},948319:function(e,t,n){"use strict";let i;n.d(t,{$U:function(){return b},EG:function(){return v},EL:function(){return y},MR:function(){return d},Ov:function(){return c},Ru:function(){return s},T$:function(){return C},YJ:function(){return l},_H:function(){return f},bc:function(){return g},le:function(){return p},nS:function(){return h},w5:function(){return w},wN:function(){return S}}),n(914602);var s,r,o=n(625506),a=n(945209);let l=39.9375,c=40,d=63.9375,u=e=>e*parseFloat(o("html").css("font-size"));(r=s||(s={})).Small="small",r.Medium="medium",r.Large="large",r.Xlarge="xlarge",r.Xxlarge="xxlarge";let p=function(){return i||(i={small:{start:0,end:u(l)},medium:{start:u(l),end:u(d)},large:{start:u(d),end:u(89.9375)},xlarge:{start:u(89.9375),end:u(119.9375)},xxlarge:{start:u(119.9375),end:999999999}}),i},m=null;o(window).resize(()=>{m=null});let h=function(){return null==m&&(m=o(window).width()),m};function g(){let e=p(),t=h();return t>=e.small.start&&t<e.small.end?s.Small:t>=e.medium.start&&t<e.medium.end?s.Medium:t>=e.large.start&&t<e.large.end?s.Large:t>=e.xlarge.start&&t<e.xlarge.end?s.Xlarge:s.Xxlarge}function f(){return g()===s.Small}function b(){return g()===s.Medium}function v(){return g()===s.Large}function y(){return g()===s.Xlarge}function C(){return g()===s.Xxlarge}function S(){return v()||y()||C()}function E(e){return e.replace("@media","").trim()}let I={smallUp:window.matchMedia(E(a.BbMediaQueries.smallUp)),smallOnly:window.matchMedia(E(a.BbMediaQueries.smallOnly)),mediumUp:window.matchMedia(E(a.BbMediaQueries.mediumUp)),mediumOnly:window.matchMedia(E(a.BbMediaQueries.mediumOnly)),largeUp:window.matchMedia(E(a.BbMediaQueries.largeUp)),largeOnly:window.matchMedia(E(a.BbMediaQueries.largeOnly)),xlargeUp:window.matchMedia(E(a.BbMediaQueries.xLargeUp)),xlargeOnly:window.matchMedia(E(a.BbMediaQueries.xLargeOnly)),xxlargeUp:window.matchMedia(E(a.BbMediaQueries.xXLargeUp))},w={smallUp:I.smallUp,smallOnly:I.smallOnly,mediumUp:I.mediumUp,mediumOnly:I.mediumOnly,largeUp:I.largeUp,largeOnly:I.largeOnly,xlargeUp:I.xlargeUp,xlargeOnly:I.xlargeOnly,xxlargeUp:I.xxlargeUp,"small-up":I.smallUp,"small-only":I.smallOnly,"medium-up":I.mediumUp,"medium-only":I.mediumOnly,"large-up":I.largeUp,"large-only":I.largeOnly,"xlarge-up":I.xlargeUp,"xlarge-only":I.xlargeOnly,"xxlarge-up":I.xxlargeUp}},712303:function(e,t,n){"use strict";n.d(t,{AA:function(){return c},b1:function(){return l},bb:function(){return a},wu:function(){return d}});let i="course-color-",s=e=>(void 0===e&&(e=0),e%10+1),r=(e=0)=>(void 0===e&&(e=0),e%20+1),o=(e,t,n)=>{let i=r(e);return`static/images/default-banners/${t?"structure":"nature"}${i}${n?"_thumb":""}.jpg`},a=e=>e.course&&e.course.isClassic()?l():i+s(e.courseCardColorIndex),l=()=>i+"classic",c=(e,t)=>o(e,t,!1),d=(e,t)=>o(e,t,!0)},267328:function(e,t,n){"use strict";var i,s;n.d(t,{D:function(){return i}}),(s=i||(i={})).Open="OPEN",s.Complete="COMPLETE",s.Private="PRIVATE",s.PrivateDuration="PRIVATE_DURATION",s.PrivateDurationClassic="PRIVATE_DURATION_CLASSIC",s.OpenTermClassic="OPEN_TERM_CLASSIC",s.PrivateTermClassic="PRIVATE_CLASSIC",s.TermOpen="OPEN_TERM",s.TermComplete="COMPLETE_TERM",s.TermPrivate="PRIVATE_TERM",s.OpenClassic="OPEN_CLASSIC"},240231:function(e,t,n){"use strict";function i(e,t){r(e,t,"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")}function s(e,t){r(e,t,"webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend")}function r(e,t,n){if(!window.Modernizr.csstransitions)return t({data:{noTransitions:!0}});let i=function(s){let r;s.data||(s.data={});try{r=t(s)}finally{void 0===r&&e.off(n,i)}};e.on(n,i)}n.d(t,{c:function(){return i},q:function(){return s}})},887833:function(e,t,n){"use strict";n.d(t,{V:function(){return s},h:function(){return r}});var i=n(276635);function s(e){return e&&`${e/16}rem`||"0"}class r{selector(e){let t=new r(this);return t.curSelector=e,t}rule(e,t){return this.subRule(null,e,t),this}build(){return i.map(this.pool,(e,t)=>{let n=[];return e.forEach(e=>n.push(e)),`${n.join(",")}{${t}}`}).join("\n")}subRule(e,t,n){let s=i.compact([this.curSelector,e]).join(" ");if(null!=this.parent)this.parent.subRule(s,t,n);else{let e=`${t}:${n}`;this.pool[e]=this.pool[e]||new Set,this.pool[e].add(s)}}constructor(e){this.parent=e,this.curSelector=null,null==e?this.pool={}:this.pool=null}}},592281:function(e,t,n){"use strict";let i;var s=n(623048),r=n(619034),o=n(276635);class a{static isValidDate(e){return(0,o.isDate)(e)&&!Number.isNaN(e.getTime())}static isWithinDateRange(e,t,n=!0){let i=!0,s=!0;return t.start&&(i=n?t.start<=e:t.start<e),t.end&&(s=n?t.end>=e:t.end>e),i&&s}static testWithinDateRange(e,t,n=!0){let i=e=>{let t=new Date(e.getTime());return t.setSeconds(0,0),t},s={when:e&&i(e),range:{start:t&&t.start&&i(t.start),end:t&&t.end&&i(t.end)}},o=!s.when||!s.range||a.isWithinDateRange(s.when,{end:s.range.end,start:s.range.start},n),l=!0;if(!o){let e=!0;s.range.start&&a.isSameDay(s.range.start,s.when)&&(e=n?r(s.when).isSameOrAfter(s.range.start,"minute"):r(s.when).isAfter(s.range.start,"minute"));let t=!0;s.range.end&&a.isSameDay(s.range.end,s.when)&&(t=n?r(s.when).isSameOrBefore(s.range.end,"minute"):r(s.when).isBefore(s.range.end,"minute")),l=e&&t}let c=!l||o;return{isValidDate:c,isValidTime:l}}static isSameDay(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}static getCurrentTimeZoneId(){return i||(i=s.determine().name()),i}static parseStringToDate(e){return(0,o.isDate)(e)?e:null==e||""===e?null:new Date(e)}static convertToLocalDate(e){let t=a.parseStringToDate(e);return null!==t&&t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),t}static parseDateToISOString(e){return null==e||Number.isNaN(Number(e.getDate()))?"":e.toISOString()}static compareDates(e,t,n=!0){return e&&t?[e,t].sort((e,t)=>e.getTime()-t.getTime())[n?0:1]:e||t}static breakdownSeconds(e){let t=e/60,n=t/60;return{days:Math.floor(n/24),hours:Math.floor(n%24),minutes:Math.floor(t%60),seconds:Math.floor(e%60)}}}t.Z=a},211796:function(e,t,n){"use strict";n.d(t,{K4:function(){return s},aM:function(){return r},bv:function(){return a},tB:function(){return o}});var i=n(276635);let s=function(e){return function(e,...t){let n=Symbol(e.name);return function(i,s,r){let o=r.value;r.value=function(...i){return this[n]=this[n]||e.apply(null,[o].concat(t||[])),this[n].apply(this,i)}}}(i.debounce,e)},r=function(...e){return function(t,n,s){let r=s.value,o=Symbol("@ScopeOnce("+t.constructor.name+"."+n+")"),a=Symbol("@ScopeOnce("+t.constructor.name+"."+n+")");s.value=function(...t){let n=this,s=n.$scope||n.scope;if(!s)throw Error("NO_SCOPE_FOUND");return(0,i.isEmpty)(e)||(n[a]=n[a]||(0,i.once)(()=>{s.$watchGroup(e,()=>{n[o]=null})}),n[a]()),n[o]=n[o]||(0,i.once)(function(...e){return r.apply(n,e)}),n[o].apply(n,t)}}},o=function(e){if(!e)throw Error("Empty name is not accepted");return function(t,n,i){if("function"!=typeof t)throw Error("@Inject only supports constructor arguments");t.$inject=t.$inject||[],t.$inject[i]=e}},a=function(){return function(e,t,n){let i=n.value;n.value=function(...e){let t=i.apply(this,e),n=this.$injector;if(!n)throw Error("$injector NotFound, the decorator requires $injector to be injected into class.");n.invoke(["$rootScope","$q",(e,n)=>{n.when(t).then(()=>e.$applyAsync())}])}}}},270679:function(e,t){"use strict";t.Z=class{static detect(){let e={},t=window.navigator.userAgent.toLowerCase(),n=function(e){return -1!==t.indexOf(e)};return e.ios=function(){return e.iphone()||e.ipod()||e.ipad()},e.iphone=function(){return!e.windows()&&n("iphone")},e.ipod=function(){return n("ipod")},e.ipad=function(){return n("ipad")},e.android=function(){return!e.windows()&&n("android")},e.androidPhone=function(){return e.android()&&n("mobile")},e.androidTablet=function(){return e.android()&&!n("mobile")},e.blackberry=function(){return n("blackberry")||n("bb10")||n("rim")},e.blackberryPhone=function(){return e.blackberry()&&!n("tablet")},e.blackberryTablet=function(){return e.blackberry()&&n("tablet")},e.windows=function(){return n("windows")},e.windowsPhone=function(){return e.windows()&&n("phone")},e.windowsTablet=function(){return e.windows()&&n("touch")&&!e.windowsPhone()},e.fxos=function(){return(n("(mobile;")||n("(tablet;"))&&n("; rv:")},e.fxosPhone=function(){return e.fxos()&&n("mobile")},e.fxosTablet=function(){return e.fxos()&&n("tablet")},e.meego=function(){return n("meego")},e.mobile=function(){return e.androidPhone()||e.iphone()||e.ipod()||e.windowsPhone()||e.blackberryPhone()||e.fxosPhone()||e.meego()},e.tablet=function(){return e.ipad()||e.androidTablet()||e.blackberryTablet()||e.windowsTablet()||e.fxosTablet()},e.desktop=function(){return!e.tablet()&&!e.mobile()},e.portrait=function(){return window.innerHeight/window.innerWidth>1},e.landscape=function(){return window.innerHeight/window.innerWidth<1},e}}},614682:function(e,t,n){"use strict";let i;n.d(t,{$Q:function(){return o},YX:function(){return b},_y:function(){return p},ed:function(){return v},fG:function(){return f},hO:function(){return g},mA:function(){return h},mq:function(){return C},nj:function(){return a},wj:function(){return m}});var s,r,o,a,l=n(625506),c=n(336),d=n(609582);let u="has-applied-locale-text-direction";function p(e){let t=l(e),n=0;for(;t.length;){if(t.is(".bb-close"))n++;else if(t.is(".bb-offcanvas-panel, #main-content-inner")){if(n<=0)return t[0];n--}t=t.parent()}return document.body}function m(){let e=l(".reveal-modal-bg, .wrs_modal_overlay");return e&&e.length}function h(e){let t=(e||"0").split(" ");return{top:parseInt(t[0],10),right:parseInt(t[1]||t[0],10),bottom:parseInt(t[2]||t[0],10),left:parseInt(t[3]||t[1]||t[0],10)}}function g(e){let t=e.view,n=e.el;e.viewHeight=null==e.viewHeight?t.get(0).clientHeight:e.viewHeight,e.viewWidth=null==e.viewWidth?t.get(0).clientWidth:e.viewWidth,e.height=null==e.height?n.height():e.height,e.width=null==e.width?n.width():e.width;let i=t.offset(),s=n.offset(),r=t.scrollTop(),o=t.scrollLeft(),a=s.top-i.top-e.padding.top,l=s.left-i.left-e.padding.left,c=s.top+e.height+e.padding.bottom-i.top-e.viewHeight,d=s.left+e.width+e.padding.right-i.left-e.viewWidth;e.height<=e.viewHeight?a<0?t.scrollTop(r+a):c>0&&t.scrollTop(r+c):a>0?t.scrollTop(r+a):c<0&&t.scrollTop(r+c),e.width<=e.viewWidth?l<0?t.scrollLeft(o+l):d>0&&t.scrollLeft(o+d):l>0?t.scrollLeft(o+l):d<0&&t.scrollLeft(o+d)}function f(e){e.attr("aria-hidden","true"),c.B(),e.find(":tabbable").each(function(){let e=l(this);e.addClass("bb-element-inaccessible"),e.data("bb-element-inaccessible",{tabindex:e.attr("tabindex")}),e.attr("tabindex","-1")})}function b(e){e.removeAttr("aria-hidden"),e.find(".bb-element-inaccessible").each(function(){let e=l(this);e.removeClass("bb-element-inaccessible"),e.data("bb-element-inaccessible")&&(null!=e.data("bb-element-inaccessible").tabindex?e.attr("tabindex",e.data("bb-element-inaccessible").tabindex):e.removeAttr("tabindex"))})}function v(){if(i)return i;let e=document.createElement("div");e.id="rtl-browser-detector",document.body.appendChild(e);try{e.innerHTML=`
      <div dir="rtl" style="width: 1px; height: 1px; overflow: hidden; position: fixed; left: 0; top: 0">
        <div style="width: 2px; height: 1px; white-space: nowrap">
          <span style="width: 1px; height: 1px; display: inline-block">&nbsp;</span>
          <span style="width: 1px; height: 1px; display: inline-block">&nbsp;</span>
        </div>
      </div>
    `;let t=e.children[0];t.children[0].children[1].scrollIntoView(),i=t.scrollLeft>=0?a.Positive:a.Negative}catch(e){console.error("Error retrieving scroll direction",e),i=a.Negative}finally{document.body.removeChild(e)}return i}(s=o||(o={})).LeftToRight="ltr",s.RightToLeft="rtl",(r=a||(a={}))[r.Positive=0]="Positive",r[r.Negative=1]="Negative";class y{static getInstance(){return y.instance||(y.instance=new y),y.instance}getCSSLoadedPromise(){return this._rtlCSSLoadedPromise}initialize(e){(0,d.setRTL)(e===o.RightToLeft);let t=document.getElementsByTagName("html")[0],n=[];if(t.hasAttribute(u))this._rtlCSSLoadedResolve();else{if(t.setAttribute("dir",e),t.setAttribute(u,""),e===o.RightToLeft){let e=Array.from(document.getElementsByClassName("initial-css-link"));for(let t=0;t<e.length;t++){let i=l(e[t]),s=i.attr("href");i.attr("href","");let r=l(i).clone();r.attr("href",s.replace(".css",".rtl.css")),i.removeClass("initial-css-link"),r.appendTo("head"),n.push(new Promise(e=>{r[0].onload=()=>e()}))}Promise.all(n).then(()=>{this._rtlCSSLoadedResolve()})}else this._rtlCSSLoadedResolve();let i=new CustomEvent("initializePageDirection",{detail:{isRtl:e===o.RightToLeft}});document.dispatchEvent(i)}}constructor(){this._rtlCSSLoadedPromise=new Promise(e=>{this._rtlCSSLoadedResolve=e})}}let C=y.getInstance()},790330:function(e,t){"use strict";class n extends Error{constructor(e){let t="string"==typeof e?e:"";e&&e.message&&(t=e.message),super(t),this.name="Exception",this.message=t,this.stack=Error().stack;let i=Error;e&&e.stack?this.stack=e.stack:i.captureStackTrace&&i.captureStackTrace(this,n)}}t.Z=n},624930:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var i=n(790330);class s extends i.Z{constructor(e){super(e),this.name="InvalidArgumentsError"}}},385270:function(e,t,n){"use strict";var i=n(625506),s=n(507660),r=n.n(s);class o extends r(){static text(e){return i("<div></div>").html(e).text()}}Object.setPrototypeOf(o,r()),t.Z=o},670278:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var i=n(276635);class s{$onEvent(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),i.once(()=>{i.remove(this.events[e],e=>e===t)})}$emitEvent(e,...t){let n={type:e};(this.events[e]||[]).forEach(e=>{e.call(this,n,...t)})}constructor(){this.events=Object.create(null)}}},887545:function(e,t,n){"use strict";n.d(t,{Bv:function(){return r},Zl:function(){return a},gW:function(){return o}});var i=n(625506),s=n(336);function r(e,t){s.B();let n=e?e.find(":tabbable"):i(":tabbable"),r=t||i(document.activeElement),o=0;if(1===r.length){let e=n.index(r);e+1<n.length&&(o=e+1)}n.eq(o).focus()}function o(e,t){s.B();let n=e?e.find(":tabbable"):i(":tabbable"),r=t||i(document.activeElement),o=n.length-1;if(1===r.length){let e=n.index(r);e>0&&(o=e-1)}n.eq(o).focus()}function a(e,t,n){s.B(),e.is(":tabbable")||null!=e.attr("tabindex")?e.is(":tabbable")&&"-1"===e.attr("tabindex")&&e.removeAttr("tabindex"):e.attr("tabindex","-1"),n&&e.closest(n).removeClass("ng-hide"),t?t(e):e.focus()}},524852:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var i=n(276635),s=n(464027);function r(e,t,n,r){let o={};return e.$watchCollection(()=>t,(t,a)=>{let l=Object.keys(t).filter(e=>!Object.prototype.hasOwnProperty.call(o,e)&&t[e]&&Object.prototype.hasOwnProperty.call(t[e],"$viewValue")&&(!r||!(r.indexOf(e)>-1)));s.forEach(l,s=>{o[s]=e.$watch(()=>t[s].$viewValue,(e,r)=>{!t[s].$dirty&&(null==r||Number.isNaN(Number(r)))||i.isEqual(e,r)||n(e,r)})});let c=Object.keys(a).filter(e=>!Object.prototype.hasOwnProperty.call(t,e)&&a[e]&&Object.prototype.hasOwnProperty.call(a[e],"$viewValue"));s.forEach(c,e=>{o[e](),delete o[e]})}),()=>{s.forEach(o,e=>{e()})}}},962389:function(e,t,n){"use strict";function i(e,t,n){"function"==typeof aptrinsic&&t.getRoles().then(t=>{let i=e.getSystemInfo();return function(e,t,n){var i,s,r;let o=null!==(i=t.locale)&&void 0!==i?i:n.getAppLocale(),a={id:`${e.siteId}_${t.uuid}`,insRoles:t.insRoles,systemRole:t.systemRole,systemRoles:t.systemRoles,locale:o},l={id:e.siteId,institutionName:e.institutionName,institutionType:e.institutionType,country:e.country,region:e.region,acceptSurveys:null!==(s=e.acceptSurveys)&&void 0!==s&&s,productUpdates:null!==(r=e.productUpdates)&&void 0!==r&&r};aptrinsic("identify",a,l)}(i,t,n),t})}function s(e){"function"==typeof aptrinsic&&aptrinsic("set","globalContext",e)}function r(){"function"==typeof aptrinsic&&aptrinsic("remove","globalContext",["courseRole"])}n.d(t,{pl:function(){return r},sI:function(){return s},tp:function(){return i}})},188314:function(e,t,n){"use strict";n.d(t,{Fl:function(){return u},KZ:function(){return p},Lw:function(){return c},NB:function(){return a},OF:function(){return s},T2:function(){return l},Vr:function(){return i},WQ:function(){return h},ap:function(){return r},j0:function(){return d},zM:function(){return o},zm:function(){return g}});let i=1,s="#c575d2",r="#1874a4",o="#333333",a="#666666",l="#e5e5e5",c="#cdcdcd",d="#ffffff",u="#f0f0f0",p="Open Sans",m="12px",h=`600 ${m} ${p}`,g=`700 ${m} ${p}`},445057:function(e,t,n){"use strict";function i(e){if(!e)return 0;let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return t>>>0}n.d(t,{u:function(){return i}})},606592:function(e,t,n){"use strict";n.d(t,{HP:function(){return A},K5:function(){return l},Ku:function(){return g},L_:function(){return v},Mf:function(){return y},OC:function(){return s},RL:function(){return u},Sd:function(){return d},Tw:function(){return T},UP:function(){return C},VM:function(){return h},WV:function(){return o},Wl:function(){return k},YG:function(){return E},ZH:function(){return i},aI:function(){return f},aO:function(){return I},dS:function(){return m},hY:function(){return c},i_:function(){return P},pX:function(){return b},qc:function(){return w},rH:function(){return p},tH:function(){return x},uR:function(){return a},xE:function(){return S},yY:function(){return r}});let i=8,s=188,r=46,o=40,a=35,l=13,c=27,d=36,u=37,p=110,m=108,h=34,g=33,f=190,b=39,v=32,y=9,C=38,S=48,E=53,I=57,w=96,A=105;function k(e){let t=e.keyCode;return t===C||t===o||t===u||t===b}function x(e){return e.keyCode===l||e.keyCode===m}function T(e){return e.keyCode===y&&!e.shiftKey}function P(e){return e.keyCode===y&&e.shiftKey}},889019:function(e,t,n){"use strict";n.d(t,{j:function(){return function e(t,n){if(n instanceof t)return n.$pk;if(!n.$scope||"object"!=typeof n.$scope)throw Error("model_utility.findModelPkInScope could not find $scope object on "+n);return e(t,n.$scope)}}})},190234:function(e,t,n){"use strict";var i,s;n.d(t,{Ac:function(){return v},CE:function(){return b},G$:function(){return u},G7:function(){return c},HH:function(){return g},QW:function(){return d},br:function(){return f},fT:function(){return l},fg:function(){return a},fy:function(){return p},gb:function(){return i},l0:function(){return y},l9:function(){return m},n8:function(){return h}}),(s=i||(i={})).AllCourseMembers="allCourseMembers",s.AllCourseInstructors="allCourseInstructors",s.AllCourseStudents="allCourseStudents";let r={[i.AllCourseMembers]:"all",[i.AllCourseInstructors]:"rolebucket:TEACHING",[i.AllCourseStudents]:"rolebucket:TAKING"},o={all:i.AllCourseMembers,"rolebucket:TEACHING":i.AllCourseInstructors,"rolebucket:TAKING":i.AllCourseStudents},a=Array.from(Object.keys(r));function l(){return r[i.AllCourseMembers]}function c(){return r[i.AllCourseInstructors]}function d(){return r[i.AllCourseStudents]}function u(e,t,n){let i="",s="";return e&&t&&n&&(s=r[n.split(".").pop()],i=t.translateSync({locale:t.getLocale(e),key:n,noWrap:!0,noEscape:!0})),{id:s,givenName:i,familyName:"",userName:void 0}}function p(e,t,n){let i=[];return null==e||e.forEach(e=>{a.indexOf(e.split(".").pop())>=0&&i.push(u(t,n,e))}),i}function m(){return{id:l(),givenName:"",familyName:"",userName:void 0}}function h(e){return(null==e?void 0:e.id)===l()}function g(e){return(null==e?void 0:e.id)===c()}function f(e){return(null==e?void 0:e.id)===d()}function b(e){return h(e)||g(e)||f(e)}function v(e){return Object.values(i).includes(e)}function y(e){return o[e]}},100079:function(e,t,n){"use strict";function i(e){let t=[],n=0;e.forEach((e,i)=>{n+=Math.floor(e),t.push({integer:Math.floor(e),remainder:e-Math.floor(e),index:i})});let i=100-n;if(i>0){t.sort((e,t)=>t.remainder-e.remainder);let e=0;for(;i>0;)t[e].integer>0||t[e].remainder>0?(t[e].integer+=1,e++,i-=1):e++,e===t.length&&(e=0);t.sort((e,t)=>e.index-t.index)}return t.map(e=>e.integer)}function s(e,t){let n=e.toString(),i=n.indexOf(".");if(i>0&&n.length-i-1>t){let e=n.slice(0,i+t+1);return parseFloat(e)}return e}n.d(t,{c:function(){return i},m:function(){return s}})},537749:function(e,t,n){"use strict";n.d(t,{Pr:function(){return v},Sx:function(){return u},Wp:function(){return C},Xi:function(){return c},YD:function(){return m},_y:function(){return l},a$:function(){return S},jD:function(){return f},lu:function(){return h},nH:function(){return g},o_:function(){return y},tx:function(){return d},ur:function(){return b},xR:function(){return E},z5:function(){return p}});var i=n(276635),s=n(759485),r=n(18447);let o=["xplor-connector"];function a(e){return s.uI(r.default.partnerCloudBasePath+e)}function l(e){let t=e.baseUrl+"/ultra/features/course/partner-tool/partner-tool-return-page.html",n="/launch/lti?returnUrl="+encodeURIComponent(t)+"&uri_uri="+encodeURIComponent("ACTION:cloudProvisioning")+"&content_id="+encodeURIComponent(e.parentId||"")+"&window=false&disclaimer=true&provider_id=CLOUD1&uri_scheme=ACTION&custom_error_url="+encodeURIComponent(t)+"&action=cloudProvisioning&uri_id="+new Date().getTime().toString()+"&course_id="+encodeURIComponent(e.courseId||"")+"&public=true&ignore_partner_settings=false&target=_self";return a(n)}function c(e){let t="/content"+(e.displayInIframe?"/ultra":""),n=t+"?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId);return e.parentId&&(n+="&content_id="+encodeURIComponent(e.parentId)),e.position&&(n+="&position="+encodeURIComponent(e.position)),e.mode&&(n+="&mode="+encodeURIComponent(e.mode)),a(n)}function d(e){let t="/content/return?provider_id="+encodeURIComponent(e.providerId)+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.contentId)+"&parentId="+encodeURIComponent(e.parentId)+"&position="+encodeURIComponent(e.position);return a(t+=e.itemIds?"&itemIds="+encodeURIComponent(e.itemIds):"&root=true")}function u(e){let t=e.baseUrl+"/webapps/blackboard/execute/blti/launchReturn",n="/launch/lti?window=false&action=provisioning&ignore_partner_settings=false&uri_scheme=ACTION&target=_self&uri_id="+new Date().getTime().toString()+"&uri_uri="+encodeURIComponent("ACTION:provisioning")+"&b2Uri="+encodeURIComponent("/webapps/partner-cloud/")+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.parentId||"")+"&provider_id="+encodeURIComponent(e.partnerId)+"&returnUrl="+encodeURIComponent(t)+"&custom_error_url="+encodeURIComponent(t);return a(n)}function p(e){let t="/course/tools?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId);return a(t)}function m(e){let t="/gradeLink/grade?outcomeDefinitionId="+encodeURIComponent(e.gradableItemId)+"&linkRefId="+encodeURIComponent(e.linkId)+"&course_id="+encodeURIComponent(e.courseId)+"&attempt_id="+encodeURIComponent(e.attemptId)+"&courseMembershipId="+encodeURIComponent(e.membershipId)+"&cancelGradeUrl";return a(t)}function h(e){let t="/diagnostics/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false";return a(t)}function g(e){let t="/contentRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false";return a(t)}function f(e){let t="/gradeRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false";return a(t)}function b(e){let t="/course/roster/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false";return a(t)}function v(e){return e?e&&e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.name?e.toolProvider.toolProviderProfile.name:e&&e.portfolio&&e.portfolio.name?e.portfolio.name:e.providerId:""}function y(e,t){if(!e)return"";let n=t?e.iconUrl:e.associatedIconUrl;return n?s.gj(n):""}function C(e){let t;return e?(e.toolProvider&&e.toolProvider.toolProviderProfile&&(t=e.toolProvider.toolProviderProfile.description),t||""):""}function S(e){return e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor&&i.includes(o,e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor.handle)||!1}function E(e){let t=[];return Array.prototype.push.apply(t,e.premierList),Array.prototype.push.apply(t,e.signatureList),Array.prototype.push.apply(t,e.otherList),t.forEach(e=>{e.childProviders&&Array.prototype.push.apply(t,e.childProviders)}),i.keyBy(t,"providerId")}},633714:function(e,t,n){"use strict";function i(){return"object"==typeof pendo}async function s(e,t,n){if(i())try{let[i,s]=await Promise.all([t.getRoles(),e.getSystemInfo()]);!function(e,t,n){var i;let s=null!==(i=t.locale)&&void 0!==i?i:n.getAppLocale(),r={id:`${e.siteId}_${t.uuid}`,systemRole:t.systemRole,insRoles:t.insRoles,systemRoles:t.systemRoles,locale:s},o={id:e.siteId,institutionName:e.institutionName,institutionType:e.institutionType,country:e.country,region:e.region};pendo.initialize({visitor:r,account:o,excludeAllText:!0})}(s,i,n)}catch(e){console.error("Error retrieving user roles:",e)}}function r(e){i()&&pendo.updateOptions({visitor:{courseRole:e.courseRole}})}function o(){i()&&pendo.updateOptions({visitor:{courseRole:""}})}n.d(t,{Aq:function(){return r},E4:function(){return s},xH:function(){return o}})},837545:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});let i=e=>new Promise((t,n)=>{e.then(e=>t(e)).catch(e=>n(e))})},529462:function(e,t,n){"use strict";n.d(t,{V:function(){return r},d:function(){return s}});let i=0;function s(){return"id_"+ ++i}function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},445218:function(e,t,n){"use strict";n.d(t,{G5:function(){return w}});var i=n(18447),s=n(276635),r=n(202784),o=n(928316),a=n(291146),l=n(834266);class c extends r.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("ErrorBoundary caught exception",e),"undefined"!=typeof NREUM&&NREUM.noticeError(e),this.props.errorModalService.showDefaultErrorModal()}render(){return this.state.hasError?r.createElement("div"):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}var d=n(822658),u=n(852512),p=n(458733),m=n(174897),h=n(667408),g=n(44432),f=n(228357),b=n(470269);class v{$onChanges(e){let t=this.props,n=(0,s.mapValues)(e,"currentValue"),i=(0,s.assign)({},this.props,n);if(this.__isFirstRender)(0,s.assign)(this,{props:i}),this.componentWillMount(),this.render(),this.__isFirstRender=!1;else{if(!this.didPropsChange(n,t))return;this.componentWillReceiveProps(i);let e=this.shouldComponentUpdate(i,this.state);if((0,s.assign)(this,{props:i}),!e)return;this.componentWillUpdate(this.props,this.state),this.render(),this.componentDidUpdate(this.props,this.state)}}$postLink(){this.componentDidMount()}$onDestroy(){this.componentWillUnmount()}didPropsChange(e,t){return(0,s.some)(e,(e,n)=>e!==t[n])}componentWillMount(){}componentDidMount(){}componentWillReceiveProps(e){}shouldComponentUpdate(e,t){return!0}componentWillUpdate(e,t){}componentDidUpdate(e,t){}componentWillUnmount(){}render(){}constructor(){this.__isFirstRender=!0,this.state={},this.props={}}}function y(e){return e.withProvider}function C(e){return e.withThemeProvider||!!e.renderLocalized}function S(e){return C(e)||!!e.withTransitScope}function E(e){return!1!==e.withErrorModalBoundary}function I(e){return e.withCurrentCourse}function w(e){var t;e.injectNames=e.injectNames||[],e.withThemeProvider=null===(t=e.withThemeProvider)||void 0===t||t;let n=e.bindingNames||e.Class.propTypes&&Object.keys(e.Class.propTypes)||[],w=e.attributes||[],A=[];E(e)&&A.push(l.HV),C(e)&&A.push(a.serviceName),S(e)&&A.push("$scope"),y(e)&&A.push("$ngRedux"),I(e)&&A.push(d.HV);let k=(0,s.uniq)([...A,...e.injectNames]);return{bindings:{...(0,s.fromPairs)(n.map(e=>[e,"<"])),...(0,s.fromPairs)(w.map(e=>[e,"@"]))},controller:["$element",...k,class extends v{render(){let t={};y(e)&&(t.store=this.injectedModules.$ngRedux),E(e)&&(t.errorModalService=this.injectedModules[l.HV]),C(e)&&(t.localize=this.injectedModules[a.serviceName]),S(e)&&(t.$scope=this.injectedModules.$scope),I(e)&&(t.currentCourseService=this.injectedModules[d.HV]);let n=r.createElement(e.Class,{...this.injectedProps,...this.props},null);n=function(e,t,n){var s,o,a,l,d,v,y;let C=e;if(t.renderLocalized){let e;let{localize:a,$scope:l}=n,c={locale:a.getLocale(l),babelfishInstance:a.intl,babelfishFormatInstance:a.frmt,isRtl:a.isRTL()},d=t.renderLocalized;"object"==typeof d&&(c={...c,...d}),s=C,o=c,i.default.unitTesting&&(e=(0,h.G)()),C=r.createElement(m.g,{...o,mockLocalize:e},s)}if(t.withProvider){let{store:e}=n;a=C,C=r.createElement(g.zt,{store:e},a)}if(t.withThemeProvider&&(C=function(e,t){let n={theme:"light",isRtl:t.isRTL(),cssReset:"none",zIndex:{modal:1350}};return r.createElement(f.Q,n,e)}(C,n.localize)),t.withBaseStateNameProvider&&(l=C,C=r.createElement(b.f8,{},l)),!1!==t.withErrorModalBoundary){let{errorModalService:e}=n;d=C,C=r.createElement(c,{errorModalService:e},d)}if(t.withCurrentCourse){let{currentCourseService:e}=n;v=C,C=r.createElement(p.kQ.Provider,{value:e.courseId},v)}if(t.withTransitScope){let{$scope:e}=n;y=C,C=r.createElement(u.ir,{value:e},y)}return C}(n,e,t),(0,o.render)(n,this.$element[0])}componentWillUnmount(){(0,o.unmountComponentAtNode)(this.$element[0])}constructor(t,...n){super(),this.$element=t,this.injectedProps={},this.injectedModules={},k.forEach((e,t)=>{this.injectedModules[e]=n[t]}),(e.injectNames||[]).forEach(e=>{this.injectedProps[e]=this.injectedModules[e]})}}]}}},482819:function(e,t,n){"use strict";n.d(t,{D:function(){return r},F:function(){return s}});let i="[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,24}\\s*",s=RegExp("^"+i+",?$","i"),r=RegExp("^"+i+"(,+\\s*\\n*"+i+")*,*\\s*$","i")},283927:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});let i=/<!--[^\r\n]*?-->|<[^\r\n]*?>/g},861001:function(e,t,n){"use strict";let i;n.d(t,{I:function(){return r}});var s=n(625506);function r(){if(null==i){let e=s('<div style="width:100px; height:100px; overflow:hidden; position:absolute; top:-200px; left:-200px;"><div class="inner" style="height:200px;"></div>'),t=e.find(".inner");s("body").append(e);let n=t.innerWidth();e.css("overflow","auto");let r=t.innerWidth();s(e).remove(),i=n-r}return i}},278784:function(e,t,n){"use strict";n.d(t,{H:function(){return r},L:function(){return function e(t){return Array.isArray(t)?t.map(t=>e(t)):(0,i.isPlainObject)(t)?(0,i.mapValues)(t,t=>e(t)):(0,s.YUt)(t)}}});var i=n(276635),s=n(951248);function r(e){let t=new Set;return JSON.parse(JSON.stringify(e,(e,n)=>"object"==typeof n&&t.has(n)?void 0:("object"!=typeof n||t.add(n),n)))}},684710:function(e,t){"use strict";class n{static getServerTime(){return new Date(new Date().getTime()+n.clientTimeDifferenceMS)}static getServerTimeAsEpochTime(){return this.getServerTime().getTime()/1e3}static setClientOffset(e){n.clientTimeDifferenceMS=e}}n.clientTimeDifferenceMS=0,t.Z=n},451251:function(e,t,n){"use strict";function i(e,t,n){return e=e.trim(),n=n||"...",e.length>t&&(e=e.slice(0,t)+n),e}function s(e,t,n){e=e.trim(),n=n||"...";let i=RegExp(`^(.{0,${t}})\\b.*$`),s=e.trim().replace(i,"$1");return e.length>t?s+n:s}function r(e,t,n){return n=n||"",e?e.replace(t,n):""}function o(e,t){return e&&t&&e.substring(e.length-t.length,e.length)===t||!1}function a(e,t){return 0===(e||"").indexOf(t)}n.d(t,{DR:function(){return p},EY:function(){return r},Ne:function(){return i},Ny:function(){return a},_X:function(){return d},aV:function(){return c},bj:function(){return u},pn:function(){return o},u0:function(){return s}});let l=document.createElement("textarea");function c(e){return l.innerHTML=e,l.value}function d(e){return null==e?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<")}function u(e){return null!=e.match(/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf\uac00-\ud7af]/)}function p(e){return null!=e.match(/[\-\s]/)}},336:function(e,t,n){"use strict";n.d(t,{B:function(){return s}});var i=n(625506);function s(){return i.extend(i.expr[":"],{tabbable(e){let t=i.attr(e,"tabindex"),n=null!=t;return(!n||t>=0)&&function(e,t){let n,s,r,o,a;let l=e.nodeName.toLowerCase();return"area"===l?(s=(n=e.parentNode).name,!!e.href&&!!s&&"map"===n.nodeName.toLowerCase()&&(r=i("img[usemap='#"+s+"']")).length>0&&r.is(":visible")):(/^(input|select|textarea|button|object)$/.test(l)?(o=!e.disabled)&&(a=i(e).closest("fieldset")[0])&&(o=!a.disabled):o="a"===l&&e.href||t,o&&i(e).is(":visible"))}(e,n)}})}},759485:function(e,t,n){"use strict";n.d(t,{AH:function(){return i.AH},G1:function(){return i.G1},Ou:function(){return i.Ou},RR:function(){return i.RR},SV:function(){return i.SV},Yo:function(){return i.Yo},ZN:function(){return a},_Y:function(){return i._Y},eJ:function(){return o},eY:function(){return i.eY},fL:function(){return i.fL},gj:function(){return i.gj},hi:function(){return i.hi},iI:function(){return r},ih:function(){return i.ih},mg:function(){return i.mg},re:function(){return i.re},uI:function(){return i.uI},xx:function(){return i.xx}});var i=n(443400),s=n(625506);function r(e){let t="";return e&&(t=decodeURIComponent(e).trim()),t.length>0&&"/"===t[0]&&t||null}function o(e,t,n){return encodeURIComponent(e+"/"+t+"?"+s.param(n))}function a(e){return(0,i.uI)("/webapps/blackboard/execute/ultraFramePassThrough?redirectTo="+encodeURIComponent((0,i.uI)(e)))}},1674:function(){}},c={};function d(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={id:e,loaded:!1,exports:{}};return l[e].call(n.exports,n,n.exports,d),n.loaded=!0,n.exports}d.m=l,d.amdD=function(){throw Error("define cannot be used indirect")},d.amdO={},e=[],d.O=function(t,n,i,s){if(n){s=s||0;for(var r=e.length;r>0&&e[r-1][2]>s;r--)e[r]=e[r-1];e[r]=[n,i,s];return}for(var o=1/0,r=0;r<e.length;r++){for(var n=e[r][0],i=e[r][1],s=e[r][2],a=!0,l=0;l<n.length;l++)o>=s&&Object.keys(d.O).every(function(e){return d.O[e](n[l])})?n.splice(l--,1):(a=!1,s<o&&(o=s));if(a){e.splice(r--,1);var c=i();void 0!==c&&(t=c)}}return t},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},d.t=function(e,i){if(1&i&&(e=this(e)),8&i||"object"==typeof e&&e&&(4&i&&e.__esModule||16&i&&"function"==typeof e.then))return e;var s=Object.create(null);d.r(s);var r={};t=t||[null,n({}),n([]),n(n)];for(var o=2&i&&e;"object"==typeof o&&!~t.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach(function(t){r[t]=function(){return e[t]}});return r.default=function(){return e},d.d(s,r),s},d.d=function(e,t){for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.f={},d.e=function(e){return Promise.all(Object.keys(d.f).reduce(function(t,n){return d.f[n](e,t),t},[]))},d.u=function(e){return""+(({659:"cldrdata-ms",2576:"cldrdata-de-DE",6363:"cldrdata-zh-Hant",6387:"cldrdata-ja-JP",9962:"cldrdata-th-TH",11819:"locale-en-gb",12669:"cldrdata-sv-SE",12803:"locale-ms-my",14526:"locale-nn-no",14788:"locale-pt-pt",15153:"cldrdata-cy",16323:"cldrdata-cs",18448:"cldrdata-ru",19246:"locale-ar-sa",19361:"locale-ko-kr",19877:"cldrdata-ar-SA",21684:"cldrdata-he-IL",22258:"institution-page",22551:"cldrdata-tr",23125:"cldrdata-pt-BR",23941:"locale-az-az",24441:"cldrdata-zh",24625:"datepicker-locales",25656:"cldrdata-nn-NO",26157:"cldrdata-en-GB",26921:"locale-it-it",27457:"cldrdata-zh-Hans-CN",27986:"cldrdata-en-US",28405:"cldrdata-pl-PL",30252:"locale-th-th",31411:"cldrdata-ja",32096:"cldrdata-pl",32713:"locale-nb-no",33174:"cldrdata-da-DK",36032:"cldrdata-cy-GB",36550:"cldrdata-he",37072:"cldrdata-tr-TR",38746:"cldrdata-zh-Hans",40412:"locale-pt-br",41770:"locale-zh-cn",41874:"locale-en",42953:"courses",45374:"locale-uk-ua",45475:"cldrdata-nl",46179:"locale-nl-nl",46711:"cldrdata-cs-CZ",47329:"cldrdata-pt",47363:"cldrdata-ko-KR",47996:"locale-es-es",48850:"cldrdata-it",49486:"cldrdata-pt-PT",51940:"cldrdata-ru-RU",53423:"cldrdata-fr-CA",54870:"cldrdata-nn",55399:"cldrdata-zh-Hant-TW",56291:"cldrdata-da",58110:"locale-cs-cz",58270:"locale-en-us-k12",59250:"cldrdata-ar-AE",63020:"cldrdata-fr",68785:"locale-en-us-pro",68916:"locale-ru-ru",70370:"cldrdata-sv",70533:"cldrdata-es",71023:"cldrdata-it-IT",73065:"locale-fr-fr",74662:"locale-da-dk",75221:"cldrdata-es-ES",75238:"locale-en-au",76922:"locale-cy-gb",77075:"cldrdata-nl-NL",78682:"locale-ja-jp",83099:"cldrdata-nb",83442:"cldrdata-ar",83554:"cldrdata-ko",83761:"cldrdata-fr-FR",86083:"cldrdata-th",86202:"locale-de-de",86212:"locale-fr-ca",87714:"locale-he-il",89800:"cldrdata-de",92823:"cldrdata-en-AU",92921:"locale-zh-tw",94459:"app_develop",95054:"locale-sv-se",97399:"locale-pl-pl",99315:"locale-tr-tr",99686:"cldrdata-en",99852:"cldrdata-nb-NO"})[e]||e)+"-"+d.h()+".js"},d.miniCssF=function(e){return""+e+"-"+d.h()+".css"},d.h=function(){return"f0947f3fb5e7edf5"},d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i={},s="@learn-ultra-apps/ultra:",d.l=function(e,t,n,r){if(i[e]){i[e].push(t);return}if(void 0!==n)for(var o,a,l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==s+n){o=u;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,d.nc&&o.setAttribute("nonce",d.nc),o.setAttribute("data-webpack",s+n),o.src=e),i[e]=[t];var p=function(t,n){o.onerror=o.onload=null,clearTimeout(m);var s=i[e];if(delete i[e],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(function(e){return e(n)}),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),a&&document.head.appendChild(o)},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){d.g.importScripts&&(e=d.g.location+"");var e,t=d.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&!e;)e=n[i--].src}if(!e)throw Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),d.p=e}(),function(){if("undefined"!=typeof document){var e=function(e,t,n,i,s){var r=document.createElement("link");return r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=function(n){if(r.onerror=r.onload=null,"load"===n.type)i();else{var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||t,l=Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=a,r.parentNode.removeChild(r),s(l)}},r.href=t,n?n.parentNode.insertBefore(r,n.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var s=n[i],r=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(r===e||r===t))return s}for(var o=document.getElementsByTagName("style"),i=0;i<o.length;i++){var s=o[i],r=s.getAttribute("data-href");if(r===e||r===t)return s}},n={32143:0};d.f.miniCss=function(i,s){let r=function(){n[i]?s.push(n[i]):0!==n[i]&&({73:1,217:1,1200:1,1392:1,2407:1,3105:1,3554:1,3972:1,4146:1,4579:1,4729:1,4754:1,5325:1,5426:1,6521:1,7152:1,7575:1,8243:1,8344:1,8355:1,8724:1,8992:1,9346:1,9358:1,9773:1,9804:1,10099:1,13201:1,13313:1,13348:1,13974:1,14525:1,14975:1,15440:1,15854:1,17200:1,17530:1,18229:1,18337:1,19244:1,19476:1,19620:1,19644:1,20342:1,21054:1,21865:1,22258:1,22674:1,23528:1,23962:1,25125:1,25326:1,25381:1,25876:1,26158:1,26498:1,26842:1,27430:1,27459:1,27663:1,27742:1,28115:1,28145:1,28653:1,28920:1,29219:1,29348:1,29636:1,30276:1,30531:1,30602:1,31613:1,31640:1,33196:1,33243:1,34139:1,34705:1,35240:1,35300:1,35303:1,35766:1,35996:1,36053:1,36426:1,37802:1,38182:1,38394:1,39115:1,39485:1,39571:1,39712:1,40030:1,40232:1,41095:1,41771:1,42152:1,42780:1,42953:1,44251:1,44666:1,45207:1,45819:1,46124:1,46310:1,47048:1,48754:1,49082:1,49536:1,50054:1,51231:1,51377:1,51985:1,53005:1,53822:1,53979:1,54398:1,54638:1,55022:1,55163:1,55425:1,55542:1,55850:1,56372:1,57066:1,57308:1,57534:1,57877:1,59380:1,59727:1,59891:1,60311:1,60357:1,60419:1,60682:1,62072:1,62300:1,62577:1,63564:1,64265:1,65301:1,66514:1,66764:1,66985:1,67182:1,67207:1,67248:1,67447:1,67786:1,68165:1,68366:1,68864:1,69634:1,70415:1,71417:1,71995:1,72549:1,73061:1,73570:1,74379:1,74511:1,74610:1,74799:1,75004:1,75552:1,75585:1,75698:1,78108:1,78506:1,78584:1,79389:1,79500:1,80045:1,80260:1,80783:1,81099:1,81179:1,81854:1,82136:1,82529:1,83801:1,85665:1,85793:1,86969:1,87185:1,87357:1,87823:1,89030:1,89038:1,89461:1,89615:1,89894:1,91237:1,91712:1,91867:1,92992:1,93875:1,94099:1,94850:1,95484:1,96735:1,97980:1,98353:1,99144:1,99397:1,99520:1,99761:1,99778:1})[i]&&s.push(n[i]=new Promise(function(n,s){var r=d.miniCssF(i);r="rtl"===document.getElementsByTagName("html")[0].getAttribute("dir")?r.replace(".css",".rtl.css"):r;var o=d.p+r;if(t(r,o))return n();e(i,o,null,n,s)}).then(function(){n[i]=0},function(e){throw delete n[i],e}))};document.getElementsByTagName("html")[0].hasAttribute("has-applied-locale-text-direction")?r():document.addEventListener("initializePageDirection",r)}}}(),r={32143:0},d.f.j=function(e,t){var n=d.o(r,e)?r[e]:void 0;if(0!==n){if(n)t.push(n[2]);else if(/^(5(325|5850|6372)|(1585|2105|9914)4|42953|47048|65301|66985|7152|7575|81179|91237)$/.test(e))r[e]=0;else{var i=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=i);var s=d.p+d.u(e),o=Error();d.l(s,function(t){if(d.o(r,e)&&(0!==(n=r[e])&&(r[e]=void 0),n)){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,n[1](o)}},"chunk-"+e,e)}}},d.O.j=function(e){return 0===r[e]},o=function(e,t){var n,i,s=t[0],o=t[1],a=t[2],l=0;if(s.some(function(e){return 0!==r[e]})){for(n in o)d.o(o,n)&&(d.m[n]=o[n]);if(a)var c=a(d)}for(e&&e(t);l<s.length;l++)i=s[l],d.o(r,i)&&r[i]&&r[i][0](),r[i]=0;return d.O(c)},(a=self.webpackChunk_learn_ultra_apps_ultra=self.webpackChunk_learn_ultra_apps_ultra||[]).forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a));var u=d.O(void 0,[15047,35401,66512],function(){return d(220794)});d.O(u)}();