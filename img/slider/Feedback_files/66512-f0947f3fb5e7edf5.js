(self.webpackChunk_learn_ultra_apps_ultra=self.webpackChunk_learn_ultra_apps_ultra||[]).push([[66512],{320922:function(e,t,n){var r={"./ar-sa/_combined":[810733,19246],"./ar-sa/_combined.json":[810733,19246],"./az-az/_combined":[551324,23941],"./az-az/_combined.json":[551324,23941],"./cs-cz/_combined":[301948,58110],"./cs-cz/_combined.json":[301948,58110],"./cy-gb/_combined":[508846,76922],"./cy-gb/_combined.json":[508846,76922],"./da-dk/_combined":[246685,74662],"./da-dk/_combined.json":[246685,74662],"./de-de/_combined":[593990,86202],"./de-de/_combined.json":[593990,86202],"./en-au/_combined":[557276,75238],"./en-au/_combined.json":[557276,75238],"./en-gb/_combined":[132768,11819],"./en-gb/_combined.json":[132768,11819],"./en-us-k12/_combined":[846851,58270],"./en-us-k12/_combined.json":[846851,58270],"./en-us-pro/_combined":[912856,68785],"./en-us-pro/_combined.json":[912856,68785],"./en-us/_combined":[991115,91115],"./en-us/_combined.json":[991115,91115],"./en/_combined":[370526,41874],"./en/_combined.json":[370526,41874],"./es-es/_combined":[703636,47996],"./es-es/_combined.json":[703636,47996],"./fr-ca/_combined":[197662,86212],"./fr-ca/_combined.json":[197662,86212],"./fr-fr/_combined":[517037,73065],"./fr-fr/_combined.json":[517037,73065],"./he-il/_combined":[783224,87714],"./he-il/_combined.json":[783224,87714],"./it-it/_combined":[279521,26921],"./it-it/_combined.json":[279521,26921],"./ja-jp/_combined":[122552,78682],"./ja-jp/_combined.json":[122552,78682],"./ko-kr/_combined":[125799,19361],"./ko-kr/_combined.json":[125799,19361],"./ms-my/_combined":[652224,12803],"./ms-my/_combined.json":[652224,12803],"./nb-no/_combined":[879462,32713],"./nb-no/_combined.json":[879462,32713],"./nl-nl/_combined":[94664,46179],"./nl-nl/_combined.json":[94664,46179],"./nn-no/_combined":[20940,14526],"./nn-no/_combined.json":[20940,14526],"./pl-pl/_combined":[703301,97399],"./pl-pl/_combined.json":[703301,97399],"./pt-br/_combined":[27882,40412],"./pt-br/_combined.json":[27882,40412],"./pt-pt/_combined":[588386,14788],"./pt-pt/_combined.json":[588386,14788],"./ru-ru/_combined":[804868,68916],"./ru-ru/_combined.json":[804868,68916],"./sv-se/_combined":[299961,95054],"./sv-se/_combined.json":[299961,95054],"./th-th/_combined":[140343,30252],"./th-th/_combined.json":[140343,30252],"./tr-tr/_combined":[290115,99315],"./tr-tr/_combined.json":[290115,99315],"./uk-ua/_combined":[808613,45374],"./uk-ua/_combined.json":[808613,45374],"./zh-cn/_combined":[888727,41770],"./zh-cn/_combined.json":[888727,41770],"./zh-tw/_combined":[753005,92921],"./zh-tw/_combined.json":[753005,92921]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return n.e(t[1]).then(function(){return n.t(i,17)})}i.keys=function(){return Object.keys(r)},i.id=320922,e.exports=i},178823:function(e,t,n){var r={"./ar-AE/_combined.json":[496211,59250],"./ar-SA/_combined.json":[889991,19877],"./ar/_combined.json":[490715,83442],"./cs-CZ/_combined.json":[841039,46711],"./cs/_combined.json":[558102,16323],"./cy-GB/_combined.json":[977867,36032],"./cy/_combined.json":[299197,15153],"./da-DK/_combined.json":[118533,33174],"./da/_combined.json":[350112,56291],"./de-DE/_combined.json":[319836,2576],"./de/_combined.json":[765629,89800],"./en-AU/_combined.json":[495332,92823],"./en-GB/_combined.json":[300997,26157],"./en-US/_combined.json":[411580,27986],"./en/_combined.json":[225925,99686],"./es-ES/_combined.json":[664892,75221],"./es/_combined.json":[820544,70533],"./fr-CA/_combined.json":[915346,53423],"./fr-FR/_combined.json":[784783,83761],"./fr/_combined.json":[280340,63020],"./he-IL/_combined.json":[989920,21684],"./he/_combined.json":[64666,36550],"./it-IT/_combined.json":[182475,71023],"./it/_combined.json":[102874,48850],"./ja-JP/_combined.json":[997401,6387],"./ja/_combined.json":[551941,31411],"./ko-KR/_combined.json":[373454,47363],"./ko/_combined.json":[883623,83554],"./ms/_combined.json":[45735,659],"./nb-NO/_combined.json":[611485,99852],"./nb/_combined.json":[836580,83099],"./nl-NL/_combined.json":[781590,77075],"./nl/_combined.json":[22839,45475],"./nn-NO/_combined.json":[208289,25656],"./nn/_combined.json":[53394,54870],"./pl-PL/_combined.json":[428728,28405],"./pl/_combined.json":[344695,32096],"./pt-BR/_combined.json":[806671,23125],"./pt-PT/_combined.json":[745036,49486],"./pt/_combined.json":[678496,47329],"./ru-RU/_combined.json":[549732,51940],"./ru/_combined.json":[25593,18448],"./sv-SE/_combined.json":[196953,12669],"./sv/_combined.json":[894680,70370],"./th-TH/_combined.json":[469047,9962],"./th/_combined.json":[143561,86083],"./tr-TR/_combined.json":[334526,37072],"./tr/_combined.json":[891906,22551],"./zh-Hans-CN/_combined.json":[58660,27457],"./zh-Hans/_combined.json":[469092,38746],"./zh-Hant-TW/_combined.json":[315954,55399],"./zh-Hant/_combined.json":[848672,6363],"./zh/_combined.json":[63231,24441]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return n.e(t[1]).then(function(){return n.t(i,17)})}i.keys=function(){return Object.keys(r)},i.id=178823,e.exports=i},955546:function(e,t,n){"use strict";var r=n(202784);t.Z=({contentId:e,fileId:t,filePreviewUrl:n})=>r.createElement("a",{"data-ally-content-id":e,"data-ally-file-eid":t,"data-ally-file-preview-url":n,style:{display:"none"}})},469996:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r,i,s=n(202784),o=n(438501),a=n(927335),l=n(398435),u=n(158550);(r=i||(i={}))[r.ScoreIndicator=0]="ScoreIndicator",r[r.AlternativeFormats=1]="AlternativeFormats",t.Z=({contentRef:e,widgetType:t,text:n,ariaLabel:r,iconSize:d})=>{let c={"data-ally-content-ref":e},p={},E=s.useRef(null),m=s.useRef(null),h="components.directives.allyWidget";r&&(p["aria-label"]=r),n||(p.style={width:"100%"}),p.style={display:"none"};let b=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.CLICK_EVENT,()=>{},h+".score"),g=s.useCallback(e=>{b(e)},[b]),f=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.HOVER_EVENT,()=>{},h+".score"),I=s.useCallback(e=>{f(e)},[f]),y=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.CLICK_EVENT,()=>{},h+".alternative"),S=s.useCallback(e=>{y(e)},[y]),T=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.HOVER_EVENT,()=>{},h+".alternative"),_=s.useCallback(e=>{T(e)},[T]),O=s.useCallback(e=>{E.current&&E.current.removeEventListener("click",g),e&&e.addEventListener("click",g,!0),E.current=e},[g]),A=s.useCallback(e=>{m.current&&m.current.removeEventListener("click",S),e&&e.addEventListener("click",S,!0),m.current=e},[S]);switch(s.useEffect(()=>()=>{E.current&&E.current.removeEventListener("click",g),m.current&&m.current.removeEventListener("click",S)},[g,S]),t){case i.ScoreIndicator:if(c["data-ally-invoke"]="instructorfeedback",c["data-ally-show"]="instructorfeedback",!n)return s.createElement("span",{...c,...p,"data-ally-scoreindicator":"circle",ref:O,onMouseOver:I,"data-analytics-id":h+".score",onKeyDown:e=>{32===e.keyCode&&e.target.dispatchEvent(new Event("click"))}});break;case i.AlternativeFormats:if(c["data-ally-invoke"]="alternativeformats",c["data-ally-show"]="alternativeformats",r&&(c["data-ally-tooltip"]="",p.title=r),!n)return s.createElement("button",{...c,...p,ref:A,onMouseOver:_,"data-analytics-id":h+".alternative"},"medium"===d?s.createElement(a.AllyDownload,{id:"icon-solid-medium-ally-download"}):s.createElement(o.AllyDownload,{id:"icon-solid-small-ally-download"}))}return s.createElement(l.AnalyticsLink,{...p,...c,analyticsId:"components.directives.allyWidget.link"},n)}},739803:function(e,t,n){"use strict";n.d(t,{Z:function(){return t1}});var r=n(202784),i=n.n(r),s=n(928316),o=n.n(s),a=n(213980),l=n.n(a),u=n(367281),d=n.n(u),c=n(906277),p=n(692475),E=n(555342),m=n(545178),h=n(740121),b=n(763384),g=n(574515),f=n.n(g),I=n(552063),y=n(254199),S=n(948638),T=n(828516);let _=m.Z.import("parchment");var O=class extends I.ZP{constructor(e,t){super(e,t),this.quill.root.addEventListener("cut",this.onCut.bind(this))}convert(e){let t=this.isHTMLManuallyLoaded;if(e?this.isHTMLManuallyLoaded=!0:delete this.isHTMLManuallyLoaded,e&&(e=e.replace("<pre></pre>","<pre>&nbsp;</pre>")),!e&&!t){Array.from(this.container.querySelectorAll("img")).forEach(e=>("string"!=typeof e.src||/^(blob|data|file):.*/.test(e.src)&&void 0===e.attributes["data-mathml"])&&e.remove()),Array.from(this.container.querySelectorAll("span.sr-only")).forEach(e=>"Wirisformula"===e.previousSibling.className&&e.remove()),Array.from(this.container.querySelectorAll('[data-bbtype="image"]')).forEach(e=>("string"!=typeof e.getAttribute("href")||/^(blob|data|file):.*/.test(e.getAttribute("href")))&&e.remove()),this.container.innerHTML=this.container.innerHTML.replace(/<br\s?\/?>\r?\n/g,"<br>");let e=this.container.querySelector("pre");e&&!this.isCodeBlockButtonActive()&&e.appendChild(document.createElement("br")),Array.from(this.container.querySelectorAll('[data-bbtype="attachment"]')).forEach(e=>{e.setAttribute("data-bbtype","reinsertAttachment"),e.getAttribute("href").includes("/sessions/")&&e.remove()}),Array.from(this.container.querySelectorAll("[data-bbfile]")).forEach(e=>{e.parentNode.insertBefore(document.createElement("p").appendChild(document.createElement("br")),e)})}return this.handleCodeBlockFormatting(t),super.convert(e)}onPaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;let t=this.quill.getSelection(),n=new(f())().retain(t.index).delete(t.length),r=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(m.Z.sources.SILENT),setTimeout(()=>{n=n.concat(this.convert());let e="",i=this.quill.scroll.length(),s=null;if(i-t.index>1&&(n.ops.forEach(t=>{var n;(null===(n=t.attributes)||void 0===n?void 0:n.color)==="#ffffff"&&(t.insert=" \n",e+=" ")}),e.length>0)){let r=this.quill.getLeaf(t.index)[0],i="text"===r.statics.blotName;for(;null!=r&&!(r instanceof y.Z||r instanceof S.Z);)s=r,r=r.parent;if(["TD","TH"].includes(r.domNode.nodeName)){for(;null!=r&&!(r instanceof S.Z);)s=r,r=r.parent;t.index=this.quill.getIndex(s.next),n.ops[0].retain=t.index}i&&0!==t.index&&(this.quill.insertText(t.index,"\n","silent"),n.ops[0].retain+=1,t.index+=1),s=s.next,r.insertBefore(_.create("text","\n"),s),n.ops.push({delete:2}),this.quill.insertText(t.index,e,"silent")}if(this.quill.updateContents(n,m.Z.sources.USER),s){let e=this.quill.getIndex(s);-1===e&&(e=this.quill.getIndex(s.next)),this.quill.setSelection(e,"silent")}else this.quill.setSelection(n.length()-t.length,m.Z.sources.SILENT);this.quill.scrollingContainer.scrollTop=r,this.quill.focus(),this.quill.notifyPluginsOfPropChanges()},1)}onCut(e){if(e.defaultPrevented||!this.quill.isEnabled())return;let t=this.quill.getSelection();setTimeout(()=>{this.quill.setSelection(t.index,m.Z.sources.SILENT)},1)}dangerouslyPasteHTML(e){let t=e.replace(/\s*[\n]\s*/g,"");return t=(t=t.replace(/<h(\d)\s*><\/h\d\s*>/g,"<h$1><br></h$1>")).replace(/<h(\d)\s*\/>/g,"<h$1><br></h$1>"),this.quill.setContents(this.convert(t))}handleCodeBlockFormatting(e){if(e&&this.isCodeBlockButtonActive()){let e=this.quill.getLength();this.quill.insertText(e,"\n","silent"),this.quill.setSelection(e,0)}}isCodeBlockButtonActive(){let e=this.quill.getFormat(this.quill.selection.savedRange.index);return e[T.Z.blotName]}},A=n(384285),C=n(436073),v=class extends A.Z{undo(){if(!this.stack)return;this.stack.undo=this.stack.undo.filter(e=>!e.redo.ops.find(e=>{var t;return null===(t=e.attributes)||void 0===t?void 0:t.td})&&!e.undo.ops.find(e=>{var t;return null===(t=e.attributes)||void 0===t?void 0:t.td}));let e=this.undoAroundTables(this.stack.undo);e.length>0&&(e[e.length-1].undo.ops=e[e.length-1].undo.ops.filter(e=>0!==e.retain),this.stack.undo=e),super.undo()}redo(){}getTableIndexes(){let e=[...document.getElementsByClassName("ql-editor")].find(e=>"true"===e.contentEditable),t=e.getElementsByTagName("table"),n=[];for(let e=0;e<t.length;e++){let r=t[e],i=this.quill.getIndex(C.ZP.find(r))-1,s=this.quill.getIndex(C.ZP.find(r.nextSibling));n=[...n,{index:i,endIndex:s}]}return n}getLastSetOfOps(e){let t=[];for(let n=e.length-1;n>=0;n--){let r=e.pop();if(t=[r,...t],r.retain)break;0!==n||r.retain||(t=[{retain:0},...t])}return t}getOpsLength(e){let t=0;return e.forEach(e=>{var n,r,i,s;t+=(null!==(n=e.retain)&&void 0!==n?n:0)+(null!==(i=null===(r=e.insert)||void 0===r?void 0:r.length)&&void 0!==i?i:0)+(null!==(s=e.delete)&&void 0!==s?s:0)}),t}addOffsetToTableIndexes(e,t){e.forEach(e=>{e.index+=t,e.endIndex+=t})}undoAroundTables(e){var t;let n=null===(t=e[e.length-1])||void 0===t?void 0:t.undo.ops,r=this.getTableIndexes();if(0===r.length||!n)return e;for(;r.length>0;){let e=r.shift(),t=this.getLastSetOfOps(n),i=this.getOpsLength(n);for(;t.length>0;){let s=t.shift();if(void 0!==s.retain)i+s.retain>=e.index&&s.retain<e.endIndex?(s.retain=s.retain+e.endIndex-e.index+1,n.push(s,...t),t.length=0):s.retain<e.index?(i+=s.retain,0!==s.retain&&n.push(s)):(n.push(s,...t),t.length=0);else if(s.delete){if(s.delete+i>e.index){let r=s.delete+i-e.index;s.delete=s.delete-r,n.push(s,{retain:e.endIndex-e.index+1},{delete:r},...t),t.length=0}else i+=s.delete,n.push(s)}else s.insert&&(i+=s.insert.length,this.addOffsetToTableIndexes(r,s.insert.length),n.push(s))}}return e}},R=n(315573),L=n(42711),P=n(884089);let N=C.ZP.import("parchment");class D extends R.Z{static register(){C.ZP.register(P.pj,!0),C.ZP.register(P.ss,!0),C.ZP.register(P.SC,!0),C.ZP.register(P.RM,!0),C.ZP.register(P.xJ,!0),C.ZP.register(P.ie,!0)}constructor(...e){super(...e),this.listenBalanceTables()}balanceTables(){let e=this.quill.scroll.descendants(P.xJ),t=this.checkTablesMerge(e);if(0===t.length)return;e=e.filter(e=>t.includes(e.formats().table));for(let t=e.length-1;t>=0;t--){let n=e[t],r=n.children.tail;for(;r.prev;)this.quill.scroll.insertBefore(r.prev,n);let i=r.children.tail,s=n.prev;for(;s&&!s.formats().tablebr&&!s.prev.formats().table;)i.insertBefore(s,i.children.head),s=n.prev;i.children.tail.remove(),n.next.domNode.remove(),this.quill.scroll.removeChild(n.next)}e[e.length-1].next||this.quill.scroll.appendChild(N.create("text","\n"));let n=null,r=null;e.forEach(e=>{let t=e.children.head,i=t.formats();if(n!==i.tr)n=i.tr,r=t;else{let e=t.children.head;r.appendChild(e)}});let i=null,s=null;e.forEach(e=>{let t=e.formats();if(i!==t.table)i=t.table,s=e;else{let t=e.children.head;s.appendChild(t)}})}checkTablesMerge(e=this.quill.scroll.descendants(P.xJ)){let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r].domNode.getAttribute("table_id");t.includes(i)&&!n.includes(i)&&n.push(i),e[r].prev.formats().tablebr||n.includes(i)||n.push(i),t.push(i)}return n}deleteColumn(){let[e,,t]=this.getTable();if(null==t)return;let n=e.children.tail.children.head instanceof P.ss;if(!t.next&&t.prev){let e=t.prev.getIndexAndOffset()[1];this.quill.setSelection(e,C.ZP.sources.SILENT)}e.deleteColumn(t.getIndexAndOffset()[0]),n&&this.updateHeaderCol(!0),this.quill.update(C.ZP.sources.USER)}deleteRow(){let[,e,t]=this.getTable();if(null==e)return;let n=e.children.tail instanceof P.ss,r=t.getIndexAndOffset()[0],i=0,s=null,o=!1;for(!e.next&&e.prev?s=e.prev.children.head:e.next||e.prev?s=e.next.children.head:(s=e.children.head,o=!0);s.next&&i<r&&!o;)s=s.next,i+=1;this.quill.setSelection(s.getIndexAndOffset()[1],C.ZP.sources.SILENT),e.remove(),n&&this.updateHeaderRow(!0),this.quill.update(C.ZP.sources.USER)}deleteTable(){var e;let[t]=this.getTable();if(null==t)return;let n=t.offset()-1;(null===(e=t.prev)||void 0===e?void 0:e.statics.blotName)===P.ie.blotName&&t.prev.domNode.getAttribute("table_id")===t.domNode.getAttribute("table_id")&&t.prev.remove(),t.remove(),this.quill.update(C.ZP.sources.USER),this.quill.setSelection(n,C.ZP.sources.SILENT)}getTable(e=this.quill.getSelection()){if(null==e)return[null,null,null,-1];let[t,n]=this.quill.getLine(e.index),r=this.getCellOfContent(t);if(null==r)return[null,null,null,-1];let i=r.parent,s=i.parent;return[s,i,r,n]}getCells(){let[e]=this.getTable();return e?e.getCells():[]}getCellOfContent(e){if(!e)return null;let t=e.parent;for(;t;){if(t.statics.blotName===P.pj.blotName||t.statics.blotName===P.ss.blotName)return t;t=t.parent}return null}getTableData(e=!1,t=!1,n=this.quill.getSelection()){let r=this.getTable(n)[0],i=this.getTableColumnsCount(r),s=this.getTableRowsCount(r);if(e!==t)return{columnCount:i,rowCount:s,headerRow:e,headerColumn:t};let o=this.getTableHeadersValue(e,t);return{columnCount:i,rowCount:s,headerRow:o.row,headerColumn:o.column}}getTableColumnsCount(e){return 0>=this.getTableRowsCount(e)||!e.children.head.children?0:e.children.head.children.length}getTableRowsCount(e){return(null==e?void 0:e.children)?e.children.length:0}getTableHeadersValue(e=!1,t=!1,n=this.quill.getSelection()){let r=this.getTable(n)[0],i={row:!1,column:!1},s=this.getTableColumnsCount(r),o=this.getTableRowsCount(r);return 0>=this.getTableRowsCount(r)||!r.children.head.children?i:1===s&&1===o?(!this.isHeaderCell(r.children.tail.children.head)||(i.row=e,i.column=t,e||t||(i.row=!0,t=!1)),i):1!==o||!(s>1)||e||t?1!==s||!(o>1)||e||t?(this.isHeaderCell(r.children.tail.children.head)&&(i.column=!0),this.isHeaderCell(r.children.head.children.tail)&&(i.row=!0),i):(this.isHeaderCell(r.children.head.children.tail)&&(i.row=!0,i.column=!1),this.isHeaderCell(r.children.tail.children.head)&&(i.row=!1,i.column=!0),i):(this.isHeaderCell(r.children.tail.children.head)&&(i.row=!1,i.column=!0),this.isHeaderCell(r.children.head.children.tail)&&(i.row=!0,i.column=!1),i)}isHeaderCell(e){return e.domNode.localName.toLowerCase()===P.ss.tagName.toLowerCase()}insertColumn(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i)return;let s=i.getIndexAndOffset()[0];n.insertColumn(s,e),this.quill.update(C.ZP.sources.USER);let o=n.children.head.children.map(e=>e)[s+e];this.quill.setSelection(o.offset(this.quill.scroll),0,C.ZP.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i)return;let s=r.rowOffset()[0];n.insertRow(s,e),this.quill.update(C.ZP.sources.USER);let o=n.children.map(e=>e)[s+e].children.head;this.quill.setSelection(o.offset(this.quill.scroll),0,C.ZP.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertColumns(e,t){let n=this.quill.getSelection(),[r,i]=this.getTable(n),s=r.getLastCell();if(null==s)return;let o=s.getIndexAndOffset()[0];for(let n=0;n<e;n++)r.insertColumn(o,t);this.quill.update(C.ZP.sources.USER);let a=i.rowOffset()[0];0===t&&(a+=1),this.quill.setSelection(n.index+a,n.length,C.ZP.sources.SILENT)}insertRows(e,t){let n=this.quill.getSelection(),[r]=this.getTable(n),i=r.getLastCell(),s=i.parent;if(null==i||null==s)return;let o=s.rowOffset()[0];for(let n=0;n<e;n++)r.insertRow(o,t);this.quill.update(C.ZP.sources.USER),1===t?this.quill.setSelection(n,C.ZP.sources.SILENT):this.quill.setSelection(n.index+s.children.length,n.length,C.ZP.sources.SILENT)}deleteColumns(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i||null==r)return;let s=i.getIndexAndOffset()[0],o=r.children.length-1-e;for(let t=0;t<e;t++){let e=r.children.length-1;n.deleteColumn(e),this.quill.update(C.ZP.sources.USER)}if(o<s){let e=r.children.tail.getIndexAndOffset()[1];this.quill.setSelection(e,t.length,C.ZP.sources.SILENT)}this.quill.update(C.ZP.sources.USER)}deleteRows(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i||null==r)return;let s=r.rowOffset()[0],o=i.getIndexAndOffset()[0],a=n.children.length-e-1;for(let t=0;t<e;t++){let e=n.children.tail;e.remove(),this.quill.update(C.ZP.sources.USER)}if(a<s){let e=n.children.tail.children.head;for(let t=0;t<o;t++)e=e.next;let r=e.getIndexAndOffset()[1];this.quill.setSelection(r,t.length,C.ZP.sources.SILENT)}this.quill.update(C.ZP.sources.USER)}insertTable(e,t,n,r){this.quill.history.cutoff();let i=this.quill.getSelection();if(null==i)return;let s=(0,P.z5)("table"),o=N.create(P.xJ.blotName,s);for(let n=0;n<e;n++){let e=N.create(P.SC.blotName,(0,P.z5)("row"));for(let n=0;n<t;n++){let t=N.create(P.pj.blotName,(0,P.z5)("cell")),n=N.create("block");n.appendChild(N.create("text","\n")),t.appendChild(n),e.appendChild(t)}o.appendChild(e)}o.updateHeaderCol(r),o.updateHeaderRow(n),this.insertBlot(i,o),this.quill.update(C.ZP.sources.USER);let a=this.quill.history.stack.undo.pop();this.quill.history.stack.undo.forEach(e=>{var t,n,r;let i=null!==(t=a.undo.ops[0].retain)&&void 0!==t?t:0,s=null!==(r=null!==(n=a.undo.ops[0].delete)&&void 0!==n?n:a.undo.ops[1].delete)&&void 0!==r?r:0;e.undo.ops.forEach(e=>{e.retain&&e.retain>=i&&(e.retain+=s)})}),i.index+=1,this.quill.setSelection(i),o.parent.insertBefore(N.create(P.ie.blotName,s),o)}editTable(e,t){let n=this.getTableData(),r=this.quill.getSelection();if(null==r)return;let i=t-n.columnCount,s=e-n.rowCount;s>0?this.insertRows(s,1):s<0&&this.deleteRows(Math.abs(s)),i>0?this.insertColumns(i,1):i<0&&this.deleteColumns(Math.abs(i)),this.updateNullSelection()}insertBlot(e,t){let n=this.quill.getLeaf(e.index)[0],r=n.statics.blotName===L.Z.blotName,i=null;for(;null!=n&&!(n instanceof y.Z||n instanceof S.Z);)i=n,n=n.parent;if(r){let e=N.create("text","\n");i.next?(n.insertBefore(e,i.next),n.insertBefore(t,i.next)):(n.appendChild(t),n.appendChild(e,i));return}n.insertBefore(t,i)}listenBalanceTables(){this.quill.on(C.ZP.events.SCROLL_OPTIMIZE,e=>{let t=!0;for(let n=0;n<e.length&&t;n++)["TH","TD","TR","TABLE"].includes(e[n].target.tagName)&&(this.balanceTables(),t=!1)})}updateHeaderRow(e){let t=this.getTable()[0],n=this.quill.getSelection();null!==t&&(t.updateHeaderRow(e),this.quill.setSelection(n))}updateHeaderCol(e){let t=this.getTable()[0],n=this.quill.getSelection();null!==t&&(t.updateHeaderCol(e),this.quill.setSelection(n))}updateNullSelection(){null===this.quill.getSelection()&&this.quill.setSelection(this.quill.selection.savedRange)}deltaHasTable(e){return e.ops.some(e=>e.attributes&&(e.attributes["table-container"]||e.attributes["table-cell"]))}deltaHasDangerousContent(e){let t=!1;for(let n=0;n<e.ops.length&&!t;n++){let r=e.ops[n];r.attributes&&(t=["header","src","list"].some(e=>Object.keys(r.attributes).includes(e))),!r.insert||t||(t=["inlineImage"].some(e=>Object.keys(r.insert).includes(e)))||(t=r.insert.includes("\n","cJ","\n","\f","\r"))}return t}}var U=n(898008),k=n(942548),w=n(611997),M=n(902813),B=n(262348),G=n(268973),x=n.n(G);let V=new(x()).Attributor.Style("custom-indent","padding-left",{scope:x().Scope.BLOCK}),q=new(x()).Attributor.Style("custom-indent-rtl","padding-right",{scope:x().Scope.BLOCK});var Z=n(330217),F=n(932576),H=n(271154),j=n(150465),K=n(204445),Q=n(470276),Y=n(577099),z=n(449806),W=n(383568),$=n(13417),X=n(814816),J=n(212401);class ee extends J.Z{constructor(e,t){super(e,t),e.style.color=e.color;let n=this.replaceWith(new J.Z(J.Z.create()));return n.children.forEach(e=>{var t,r;null===(t=e.attributes)||void 0===t||t.copy(n),null===(r=e.unwrap)||void 0===r||r.call(e)}),this.remove(),n}}ee.blotName="customColor",ee.tagName="FONT";var et=n(474115),en=n(633739);class er extends J.Z{static value(e){return(0,en.u9)(e,this.blotAttributes)}static formats(e){return(0,en.u9)(e,this.blotAttributes,!0)}format(e,t){return e===this.statics.blotName&&t?(0,en.KT)(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}er.blotName="inline",er.tagName="span";var ei=n(555331);class es extends ei.i2{static value(e){return(0,en.u9)(e,this.blotAttributes)}static formats(e){return(0,en.u9)(e,this.blotAttributes,!0)}detach(){this.domNode.unmountComponent&&this.domNode.unmountComponent(),super.detach()}format(e,t){return e===this.statics.blotName&&t?(0,en.KT)(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}es.blotName="embed",es.tagName="div";var eo=n(378886);class ea extends eo.Z{static value(e){return(0,en.u9)(e,this.blotAttributes)}static formats(e){return(0,en.u9)(e,this.blotAttributes,!0)}detach(){this.domNode.unmountComponent&&this.domNode.unmountComponent(),super.detach()}format(e,t){return e===this.statics.blotName&&t?(0,en.KT)(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}ea.blotName="embedInline",ea.tagName="span";var el=n(278218),eu=n(378780);class ed extends T.Z{replaceWith(e){this.domNode.textContent=this.domNode.textContent,this.attach(),super.replaceWith(e)}highlight(e){let t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}static formats(){return!0}delta(){let e=this.domNode.textContent;if(e.endsWith("\n")&&(e=e.slice(0,-1)),(0,eu.w)(this.parent)){let t=(0,eu.A)(this.parent);return e.split("\n").reduce((e,n)=>e.insert(n).insert("\n",t),new(f()))}return e.split("\n").reduce((e,t)=>e.insert(t).insert("\n",this.formats()),new(f()))}format(e,t){if(e===this.statics.blotName&&t)return;let[n]=this.descendant(L.Z,this.length()-1);null!=n&&n.deleteAt(n.length()-1,1),this.descendants(L.Z).forEach(e=>{e.parent instanceof J.Z&&e.parent.moveChildren(e.parent.parent,e.parent)}),super.format(e,t)}}ed.className="ql-syntax";let ec=new(x()).Attributor.Class("token","hljs",{scope:x().Scope.INLINE});var ep=class extends el.ZP{static register(){C.ZP.register(ec,!0),C.ZP.register(ed,!0)}highlight(){if(this.quill.selection.composing)return;this.quill.update(C.ZP.sources.USER);let e=this.quill.getSelection();this.quill.scroll.descendants(T.Z).forEach(e=>{e.highlight(this.options.highlight)}),this.quill.update(C.ZP.sources.SILENT),null!=e&&this.quill.hasFocus()&&this.quill.setSelection(e,C.ZP.sources.SILENT)}};let eE={inline:er,embed:es,embedInline:ea},em={"formats/header":U.Z,"formats/font":k.ZP,"formats/size":w.ZP,"formats/color":M.Z,"formats/list":Z.aV,"formats/list/item":Z.DF,"formats/align":F.ZP,"formats/bold":H.Z,"formats/italic":j.Z,"formats/underline":K.Z,"formats/code-block":X.Z,"formats/strike":Q.Z,"formats/superscript":Y.Z,"formats/subscript":z.Z,"formats/indent":b.a,"formats/lineheight":W.ZP,"formats/direction":$.ZP,"formats/customcolor":ee,"modules/clipboard":O,"modules/history":v,"modules/table":D,"modules/syntax":ep},eh=e=>{let t="formats/";Object.keys(e).forEach(n=>{if(n.startsWith(t)){let r=n.replace(t,"");et.Z.registerConverter(r,e[n])}})},eb=(e,t,n)=>{let r={},i={},s={};e.forEach(e=>{if(e.formatter){let s=e.formatter.blotName||e.pluginId;if(i[s]=class extends eE[e.formatter.type]{constructor(t,n){super(t,n),e.formatter.onBlotInit&&e.formatter.onBlotInit(t,this)}},i[s].create=n=>{let r=document.createElement(e.formatter.tagName);return e.formatter.renderDomNode(r,e.formatter.attributes,n,t)},i[s].blotAttributes=e.formatter.attributes,i[s].blotName=s,i[s].className=e.formatter.className||s,i[s].tagName=e.formatter.tagName,i[s].split=e.split,i[s].toBbML=e.toBbML,i[s].toBbMLAsync=e.toBbMLAsync,r[`formats/${s}`]=i[s],"function"==typeof e.onLoad)try{e.onLoad(n)}catch(e){console.error(e)}}if(e.module){let t=e.pluginId;s[`modules/${t}`]=e.module}});let o={...em,...r,...s};m.Z.register(o,!0),eh(o)},eg=m.Z.import("parchment");eg.register(B.d,V,q);var ef=m.Z,eI=n(113923),ey=n(729233),eS=n(215571),eT=n(133961),e_=n(365516),eO=n(363201),eA=n(175805),eC=n(517801),ev=n(320393),eR=n(205693),eL=n(372769),eP=n(18350),eN=n(714719),eD=n(721586),eU=n(37574);eI.Z.registerLanguage("c",ey.Z),eI.Z.registerLanguage("csharp",eS.Z),eI.Z.registerLanguage("cpp",eT.Z),eI.Z.registerLanguage("css",e_.Z),eI.Z.registerLanguage("go",eO.Z),eI.Z.registerLanguage("java",eA.Z),eI.Z.registerLanguage("javascript",eC.Z),eI.Z.registerLanguage("kotlin",ev.Z),eI.Z.registerLanguage("php",eR.Z),eI.Z.registerLanguage("python",eL.Z),eI.Z.registerLanguage("r",eP.Z),eI.Z.registerLanguage("ruby",eN.Z),eI.Z.registerLanguage("swift",eD.Z),eI.Z.registerLanguage("xml",eU.Z);let ek=["td","th","tr","table","tablebr"];var ew={keyboard:{bindings:{tab:{key:9,prefix:/\t$/,handler:()=>{}},"remove tab":{key:9,shiftKey:!0,prefix:/\t$/,handler:()=>{}},"list autofill":{prefix:/^\s*?(\d+\.|-|\*)$/},contextBackspace:{key:"Backspace",shiftKey:null,context:{format:ek},handler:(e,t)=>{var n;if(!Array.isArray(t.format.td)&&(t.offset>0||!t.collapsed))return!0;let r=document.getSelection().baseNode;for(;!(null===(n=r.parentNode.classList)||void 0===n?void 0:n.contains("ql-editor"))&&![P.ss.tagName.toLowerCase(),P.pj.tagName.toLowerCase()].includes(r.parentNode.nodeName.toLowerCase());)r=r.parentNode;if(r.previousSibling&&"TABLE"===r.previousSibling.nodeName){document.getSelection().removeAllRanges();let e=document.createRange();return e.setStartBefore(r.previousSibling),e.setEnd(r.firstChild,0),document.getSelection().addRange(e),!1}return!!r.previousSibling||Array.isArray(t.format.td)&&(0===e.index||r.previousSibling.previousSibling)}},contextDelete:{key:"Delete",context:{format:ek},handler:(e,t)=>{if(!Array.isArray(t.format.td)&&(t.suffix.length>0||!t.collapsed))return!0;let n=document.getSelection().baseNode;if("#text"===n.nodeName&&(n=n.parentNode),n.nextSibling&&"TABLE"===n.nextSibling.nodeName){document.getSelection().removeAllRanges();let e=document.createRange();return e.setStartAfter(n.lastChild),e.setEnd(n.nextSibling.nextSibling.firstChild,0),document.getSelection().addRange(e),!1}return!!n.nextSibling}},shiftDelete:{key:"Delete",shiftKey:"true",context:{format:ek},handler:()=>!1},undoTables:{key:90,shortKey:"true",handler:(e,t)=>!t.format.table}}},history:{delay:1e3,maxStack:50,userOnly:!1},table:!0,syntax:{highlight:e=>eI.Z.highlightAuto(e).value}};let eM=["\xb7","o","\xa7","v","\xd8","\xfc"],eB=(e,t)=>e.compose(new(f())().retain(e.length(),t)),eG=()=>Math.random().toString(36).slice(2,6),ex=(e,t,n)=>"string"!=typeof t?Object.keys(t).reduce((e,n)=>ex(e,n,t[n]),e):e.reduce((e,r)=>{if(r.attributes&&r.attributes[t])return e.push(r);if(r.attributes){let i=n?{[t]:n}:{};return e.insert(r.insert,{...i,...r.attributes})}let i=n&&("table-cell"===t||"table-head"===t)?{[t]:n}:{};return e.insert(r.insert,{...i,...r.attributes})},new(f())),eV={selector:Node.ELEMENT_NODE,func:(e,t)=>{let n=[];return t.ops.forEach(e=>{e.insert&&"string"==typeof e.insert&&n.push({insert:e.insert})}),t.ops=n,t}},eq=e=>(t,n)=>{let r=n&&n.ops&&n.ops[n.ops.length-1],i=r&&"string"==typeof r.insert&&"\n"===r.insert.slice(-1);0!==n.ops.length&&i||n.insert("\n");let s=ex(n,`table-${e}`,`${e}-${eG()}`);return s},eZ=e=>{var t;let n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.attributes&&"table-container"in i.attributes&&(n===i.attributes["table-head"]||n===i.attributes["table-cell"]?e.splice(r,1):(n=null!==(t=i.attributes["table-head"])&&void 0!==t?t:i.attributes["table-cell"],e.splice(r+1,0,{insert:" ",attributes:{color:"#ffffff",dummy:"true"}})))}return e},eF=e=>{let t=["table-container","tablebr","dummy"];return e.ops=e.ops.filter(e=>!e.attributes||t.reduce((t,n)=>t&&!(n in e.attributes),!0)),e},eH=[{selector:"li",func:(e,t)=>t.ops.length?eB(t):new(f())([{insert:"\n"}])},{selector:"h1",func:(e,t)=>eB(t,{header:4})},{selector:"h2",func:(e,t)=>eB(t,{header:4})},{selector:"h3",func:(e,t)=>eB(t,{header:4})},{selector:"del",func:(e,t)=>eB(t,{strike:!0})},{selector:"pre",func:(e,t)=>eB(t,{underline:!1,"code-block":!0})},{selector:"strike",func:(e,t)=>eB(t,{strike:!0})},{selector:'span[style*="line-through"]',func:(e,t)=>eB(t,{strike:!0})},{selector:'span[style*="underline"]',func:(e,t)=>eB(t,{underline:!0})},{selector:"table",func:(e,t)=>{let n=`table-${eG()}`,r=ex(eF(t),"table-container",n),i=" ";for(let e=0;e<r.ops.length;e++){let t=r.ops[e];if(t.attributes&&"table-container"in t.attributes){let n="\n"!==t.insert.length?t.insert:" \n";i+=" ",t.insert=i+"\n";let s=["table-container","table-row","table-cell","table-head"],o=Object.keys(t.attributes).filter(e=>!s.includes(e)).reduce((e,n)=>(e[n]=t.attributes[n],e),{});r.ops.splice(e,0,{insert:n,attributes:o}),e+=1,t.attributes=Object.keys(t.attributes).filter(e=>s.includes(e)).reduce((e,n)=>(e[n]=t.attributes[n],e),{})}}return r.ops.unshift({insert:"\n",attributes:{tablebr:n}}),r.ops=eZ(r.ops),r}},{selector:"tr",func:(e,t)=>ex(t,"table-row",`row-${eG()}`)},{selector:"th",func:eq("head")},{selector:"td",func:eq("cell")},{selector:"p.MsoTitle",func:(e,t)=>eB(t,{header:4})},{selector:"p[class^=MsoListParagraph]",func:e=>{let t=eM.includes(e.textContent.charAt(0)),n=e.textContent.trim(),r=t?n.indexOf("node.textContent.charAt(0)")+2:n.indexOf(".")+1;n=n.substring(r,e.textContent.length).replace(/\n/g,"").replace(/\u00a0/g,"").trim();let i=0,s=e.getAttribute("style");if(s){let e=s.match(/level(\d+)/);e&&(i=Number(e[1])-1)}return new(f())([{insert:n},{insert:"\n",attributes:{list:t?"bullet":"ordered",indent:i}}])}}],ej=e=>{let t=e.filter(e=>e&&e.formatter&&"embed"===e.formatter.type).map(e=>e.matchers),n=e=>t.length&&e.parentNode&&Array.from(e.parentNode.querySelectorAll(t)).indexOf(e)>-1;return(e,t)=>{let r=t&&t.ops&&t.ops[t.ops.length-1],i=r&&"string"==typeof r.insert&&"\n"===r.insert.slice(-1);return!i&&e.nextSibling&&n(e.nextSibling)&&t.insert("\n"),t}};var eK=n(443400);let eQ={EDITOR:"editor",TOOLBAR:"toolbar"},eY={CTRL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",META:"metaKey"};class ez{static hasModifierKey(e){return Object.keys(eY).some(t=>e[eY[t]])}static hasRegularKey(e){return!!e.keyCode}constructor(){this.keyDownEventScope=eQ.EDITOR,this.keyDownHandlers=[],this.enableEditorScope=this.enableEditorScope.bind(this),this.enableToolbarScope=this.enableToolbarScope.bind(this),this.inToolbarScope=this.inToolbarScope.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.addKeyDownHandler=this.addKeyDownHandler.bind(this)}enableEditorScope(){this.keyDownEventScope=eQ.EDITOR}enableToolbarScope(){this.keyDownEventScope=eQ.TOOLBAR}inToolbarScope(){return this.keyDownEventScope===eQ.TOOLBAR}handleKeyDown(e){let t=!1,n=this.constructor.hasModifierKey(e);return this.keyDownHandlers.forEach(r=>{r.scope!==this.keyDownEventScope||r.keyCode!==e.keyCode||(r.modifierName||n)&&!e[r.modifierName]||(r.callback(e),t=!0)}),t}addKeyDownHandler(e,t,n,r){return this.keyDownHandlers.push({keyCode:e,modifierName:t,callback:n,scope:r}),()=>{this.keyDownHandlers=this.keyDownHandlers.filter(i=>!(i.keyCode===e&&i.modifierName===t&&i.callback===n&&i.scope===r))}}}var eW=n(729941);let e$=["insertLocalFile","math","image","video"];var eX=(e,t,n)=>{let r=[].concat(...e),i=r.reduce((e,t)=>e.some(e=>e.pluginId===t.pluginId)?e:e.concat(t),[]);return!function(e){let t=e$.map(t=>e.findIndex(e=>e.pluginId===t));if(t.length>0){for(let n=0;n<e$.length;n++)if(-1!==t[n]&&e$[n]!==e[n].pluginId){let r=e[n];e[n]=e[t[n]],e[t[n]]=r}}}(i),i.forEach(e=>{e.fileDropHandler&&n.registerDropHandler(e.fileDropHandler)}),i.filter(e=>e.buttonConfig&&e.buttonConfig.checkAvailabilityAsPromise).forEach(e=>{let n=e.buttonConfig;delete e.buttonConfig,n.checkAvailabilityAsPromise().then(r=>{r&&(e.buttonConfig=n,t())})}),i},eJ=(e,t)=>{let n={...e};return n.attachment&&t.insert&&t.insert["embedded-app"]&&delete n.attachment,e["embedded-app"]&&t.insert&&t.insert.attachment&&delete n["embedded-app"],n},e0=n(12434),e1=function(e,t,n){let r=[],i=t;function s(e,t){return n(!0),(0,e0.Z)(e,t,i)}return{setLocaleProps:e=>{i=e},onFileDrop:t=>{if(t.preventDefault(),0===r.length)return;let n=[...t.dataTransfer.files];r.forEach(t=>{t(n,e,s,i.locale)}),t.dataTransfer.files?t.dataTransfer.files.clear():t.dataTransfer.clearData()},onFileDragOver:e=>{e.preventDefault()},registerDropHandler:e=>{"function"==typeof e&&0>r.findIndex(t=>t===e)&&r.push(e)},hasDropHandlers:()=>r.length>0}},e2=n(797529),e5=n(352909);let e7="is-disabled";function e4(e,t){t&&!e.contains(e7)?e.add(e7):!t&&e.contains(e7)&&e.remove(e7)}let e3="is-read-only";function e6(e,t){t&&!e.contains(e3)?e.add(e3):!t&&e.contains(e3)&&e.remove(e3)}let e8="is-active";function e9(e,t){t&&!e.contains(e8)?e.add(e8):!t&&e.contains(e8)&&e.remove(e8)}let te="has-focus";function tt(e,t){t&&!e.contains(te)?e.add(te):!t&&e.contains(te)&&e.remove(te)}let tn="has-error";function tr(e,t){t&&!e.contains(tn)?e.add(tn):!t&&e.contains(tn)&&e.remove(tn)}let ti="has-keyboard-focus";function ts(e,t){t&&!e.contains(ti)?e.add(ti):!t&&e.contains(ti)&&e.remove(ti)}var to=n(50635),ta=n(158550),tl=function e(t,n,r,s){let o=function(e,t,n){let r=[];return i().Children.forEach(e,(e,t)=>{(i().Component.isPrototypeOf(e.type)||"function"==typeof e.type&&null!==e.type({...e.props,index:t,parentIndex:void 0})||!e.props.isHideable||e.props.isActive)&&r.push(e)}),r.length?r:null}(t);return i().Children.map(o,(t,o)=>{o+=s;let a={...n};return a.children=e(t.props.children,n,o,0),i().cloneElement(t,{...t.props,...a,index:o,parentIndex:r})})},tu=n(825501),td=e=>{let t;let n=e.filter(e=>!!t||!e.props.isHideable||(e.props.pluginButtons.some(n=>!!(tu.N6.some(t=>e.id===t.id&&n.id===t.id)&&n.isActive&&n.isActive(e.props.editorFormat))&&(t=e,!0)),!1));return t&&n.push(t),n};class tc{constructor(e,t,n,r,i){this.currentMenuIndex=-1,this.currentSubmenuIndex=-1,this.isSubmenuToolbar=!1,this.isSubToolbarOpen=!1,this.hasAdditionalToolbar=!1,this.isAdditionalToolbarVisible=!1,this.hasDisabledButtons=!1,this.toolbarButtons=e,this.additionalToolbarButtons=[],this.addKeyDownHandler=t,this.onClose=n,this.onChange=r,this.onResetSubmenu=i,this.events=[],this.resetAllMenus=this.resetAllMenus.bind(this),this.selectFirstButton=this.selectFirstButton.bind(this),this.updateToolbarButtons=this.updateToolbarButtons.bind(this),this.getMenuButtonCount=this.getMenuButtonCount.bind(this),this.getSubmenuButtonCount=this.getSubmenuButtonCount.bind(this),this.getIndexes=this.getIndexes.bind(this),this.setIndexes=this.setIndexes.bind(this),this.registerEventListeners=this.registerEventListeners.bind(this),this.destroy=this.destroy.bind(this),this.moveLeft=this.moveLeft.bind(this),this.moveRight=this.moveRight.bind(this),this.moveUp=this.moveUp.bind(this),this.moveDown=this.moveDown.bind(this),this.openSubmenu=this.openSubmenu.bind(this),this.forceOpenSubmenu=this.forceOpenSubmenu.bind(this),this.setSubmenuToolbar=this.setSubmenuToolbar.bind(this),this.setSubToolbarOpen=this.setSubToolbarOpen.bind(this),this.closeAllMenus=this.closeAllMenus.bind(this),this.registerEventListeners()}updateToolbarButtons(e,t){if(t){this.additionalToolbarButtons=e;return}this.toolbarButtons=e,this.hasDisabledButtons=this.toolbarButtons.some(e=>{var t;return null===(t=null==e?void 0:e.props)||void 0===t?void 0:t.isButtonDisabled})}setOnAdditionalChange(e){this.onAdditionalChange=e}getMenuButtonCount(){return this.toolbarButtons?this.additionalToolbarButtons&&this.isAdditionalToolbarVisible?this.toolbarButtons.length+this.additionalToolbarButtons.length:this.toolbarButtons.length:0}getSubmenuButtonCount(e){var t,n;let r=this.toolbarButtons.length,i=r+this.additionalToolbarButtons.length;if(e>-1){if(e<r&&(null===(t=this.toolbarButtons[e])||void 0===t?void 0:t.props.children))return this.toolbarButtons[e].props.children.length;if(e>=r&&e<i&&(null===(n=this.additionalToolbarButtons[e])||void 0===n?void 0:n.props.children))return this.additionalToolbarButtons[e].props.children.length}return 0}getIndexes(){return{currentMenuIndex:this.currentMenuIndex,currentSubmenuIndex:this.currentSubmenuIndex}}setIndexes(e,t){this.currentMenuIndex=e,this.currentSubmenuIndex=t,this.onChange&&this.onChange(this.getIndexes()),this.onAdditionalChange&&this.onAdditionalChange(this.getIndexes())}resetAllMenus(...e){this.setIndexes(-1,-1),this.onClose&&this.onClose(...e)}selectFirstButton(){var e;this.isAdditionalToolbarVisible&&this.isSubToolbarOpen&&this.onResetSubmenu();let t=0;this.hasDisabledButtons&&(null===(e=this.toolbarButtons[0])||void 0===e?void 0:e.props.isButtonDisabled)&&(t=this.getNextAvailableItem(0,this.getMenuButtonCount())),this.setIndexes(t,-1)}registerEventListeners(){let{addKeyDownHandler:e}=this,{TOOLBAR:t}=eQ,{SHIFT:n}=eY,r=(e,t="any")=>n=>{n.preventDefault(),n.stopPropagation();let{currentMenuIndex:r,currentSubmenuIndex:i}=this,s=this.getSubmenuButtonCount(r);return("any"===t||"main"===t&&-1===i||"main-no-children"===t&&-1===i&&0===s||"sub"===t&&-1!==i)&&e(n),!1};this.events.push(e(d().LEFT,null,r(this.moveLeft,"main"),t)),this.events.push(e(d().LEFT,null,r(this.moveUp,"sub"),t)),this.events.push(e(d().TAB,n,r(this.moveLeft,"main"),t)),this.events.push(e(d().TAB,n,r(this.moveUp,"sub"),t)),this.events.push(e(d().RIGHT,null,r(this.moveRight,"main"),t)),this.events.push(e(d().RIGHT,null,r(this.moveDown,"sub"),t)),this.events.push(e(d().TAB,null,r(this.moveRight,"main"),t)),this.events.push(e(d().TAB,null,r(this.moveDown,"sub"),t)),this.events.push(e(d().UP,null,r(this.moveLeft,"main"),t)),this.events.push(e(d().UP,null,r(this.moveUp,"sub"),t)),this.events.push(e(d().DOWN,null,r(this.moveDown,"sub"),t)),this.events.push(e(d().DOWN,null,r(this.moveDown,"main"),t)),this.events.push(e(d().DOWN,null,r(this.moveRight,"main-no-children"),t)),this.events.push(e(d().ESC,null,r(this.closeAllMenus),t))}destroy(){this.events.forEach(e=>e())}getPreviousAvailableItem(e,t){var n,r;for(let t=e-1;t>=0;t--)if(!(null===(n=this.toolbarButtons[t])||void 0===n?void 0:n.props.isButtonDisabled))return t;for(let n=t-1;n>e;n--)if(!(null===(r=this.toolbarButtons[n])||void 0===r?void 0:r.props.isButtonDisabled))return n;return e}moveLeft(){let{currentMenuIndex:e}=this,t=this.getMenuButtonCount();e=this.hasDisabledButtons?this.getPreviousAvailableItem(e,t):e-1<=-1?t-1:e-1,this.setIndexes(e,-1)}getNextAvailableItem(e,t){var n,r;for(let r=e+1;r<t;r++)if(!(null===(n=this.toolbarButtons[r])||void 0===n?void 0:n.props.isButtonDisabled))return r;for(let t=0;t<e;t++)if(!(null===(r=this.toolbarButtons[t])||void 0===r?void 0:r.props.isButtonDisabled))return t;return e}moveRight(){let{currentMenuIndex:e}=this,t=this.getMenuButtonCount();e=this.hasDisabledButtons?this.getNextAvailableItem(e,t):e+1===t?0:e+1,this.setIndexes(e,-1)}moveUp(){let{currentMenuIndex:e}=this,{currentSubmenuIndex:t}=this,n=this.getSubmenuButtonCount(e);n&&(t=t-1<=-1?n-1:t-1),this.setIndexes(e,t)}moveDown(){let{currentMenuIndex:e}=this,{currentSubmenuIndex:t}=this,n=this.getSubmenuButtonCount(e);n&&(t=t+1===n?0:t+1),this.setIndexes(e,t)}openSubmenu(e){let{currentMenuIndex:t,currentSubmenuIndex:n}=this,r=this.getSubmenuButtonCount(e);r&&t!==e&&-1!==n||r&&-1===n?this.setIndexes(e,0):this.resetAllMenus()}forceOpenSubmenu(e,t){this.setIndexes(e,t)}setAdditionalToolbar(e){this.hasAdditionalToolbar=e}setAdditionalToolbarVisible(e){this.isAdditionalToolbarVisible=e}setSubmenuToolbar(e){this.isSubmenuToolbar=e}setSubToolbarOpen(e){this.isSubToolbarOpen=e}closeAllMenus(){let{currentMenuIndex:e,currentSubmenuIndex:t,isSubmenuToolbar:n,isSubToolbarOpen:r,isAdditionalToolbarVisible:i}=this;if(-1===t){if(n){if(!this.isSubToolbarOpen&&i){this.resetAllMenus(!0);return}this.onResetSubmenu&&this.onResetSubmenu();return}if(!r){this.resetAllMenus(!0);return}}this.setIndexes(e,-1)}}class tp extends i().Component{constructor(e){if(super(e),this.onNavigatorChange=this.onNavigatorChange.bind(this),e.sharedNavigator){this.navigator=e.sharedNavigator;let t=e.children.filter(e=>!e.props.isHideable);this.navigator.updateToolbarButtons(t,this.props.useSharedNavigator),this.navigator.setOnAdditionalChange(this.onNavigatorChange)}else this.navigator=new tc(e.children,e.addKeyDownHandler,e.toolbarActionComplete,this.onNavigatorChange,e.resetMenu),e.shareNavigator&&e.shareNavigator(this.navigator);this.state=this.navigator.getIndexes()}componentDidMount(){this.toolbarRoot.addEventListener("mousedown",eW.p),this.props.isSubmenuToolbar&&this.props.hasKeyboardFocus&&this.navigator.selectFirstButton()}UNSAFE_componentWillReceiveProps(e){let{currentMenuIndex:t}=this.state,{hasKeyboardFocus:n,editorHasTableSelected:r}=e,{useSharedNavigator:i}=this.props;this.navigator.setSubmenuToolbar(this.props.isSubmenuToolbar),this.navigator.setSubToolbarOpen(this.props.isSubToolbarOpen),this.navigator.setAdditionalToolbar(i),this.navigator.setAdditionalToolbarVisible(r),this.props.hasKeyboardFocus!==n&&n&&!i?this.navigator.selectFirstButton():this.props.hasKeyboardFocus===n||n?!1===this.props.hasKeyboardFocus&&-1!==t&&this.navigator.resetAllMenus():this.navigator.resetAllMenus()}componentWillUnmount(){this.toolbarRoot.removeEventListener("mousedown",eW.p),this.props.useSharedNavigator||this.navigator.destroy()}onNavigatorChange(e){this.toolbarRoot&&this.setState(e)}render(){let e={toolbarActionComplete:this.navigator.resetAllMenus,openSubmenu:this.navigator.openSubmenu,forceOpenSubmenu:this.navigator.forceOpenSubmenu,closeAllMenus:this.navigator.closeAllMenus},t=0,n=[];this.props.useSharedNavigator?(n=this.props.children.filter(e=>!e.props.isHideable),t=this.navigator.getMenuButtonCount()-n.length):n=this.props.children.filter(e=>!!e);let r=tl(n,{...{...this.props,...this.state,...e}},null,t);this.navigator.updateToolbarButtons(td(r),this.props.useSharedNavigator);let{toolbarId:s,editorId:o,t:a}=this.props,l=(0,c.Z)({"bb-editor-toolbar no-select":!0,"is-disabled":this.props.isDisabled,"is-hidden":this.props.isHidden,"bb-editor-submenu-toolbar":this.props.isSubmenuToolbar});return i().createElement("div",{className:l,role:"toolbar","aria-label":s?a(`bbmlEditor.toolbar.${s}.axAriaText`):"Text Formatting","aria-controls":o,ref:e=>{this.toolbarRoot=e}},r)}}tp.propTypes={children:l().array,addKeyDownHandler:l().func.isRequired,editorId:l().string,toolbarId:l().string,toolbarActionComplete:l().func.isRequired,hasKeyboardFocus:l().bool,isDisabled:l().bool,isRtl:l().bool,isSubmenuToolbar:l().bool,isSubToolbarOpen:l().bool,useSharedNavigator:l().bool},tp.defaultProps={children:null,editorId:null,toolbarId:null,hasKeyboardFocus:!1,isDisabled:!1,isRtl:!1,isSubmenuToolbar:!1,isSubToolbarOpen:!1,useSharedNavigator:!1};var tE=(0,to.H)((0,ta.withAnalytics)(tp)),tm=n(924980),th=n(398435);let tb=()=>i().createElement("div",{className:"bb-editor-toolbar-button-separator"});var tg=n(462966),tf=n(704695);class tI extends i().Component{static newState(e){let t=e.isActive&&e.isActive(e.editorFormat),n=e.isButtonDisabled,r=!n&&e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index||e.hasKeyboardFocus&&e.currentSubmenuIndex>-1&&e.currentMenuIndex===e.parentIndex&&e.currentSubmenuIndex===e.index,i=e.children&&e.currentMenuIndex===e.index&&e.currentSubmenuIndex>-1;return{isActive:t,isDisabled:n,hasKeyboardFocus:r,isSubmenuOpen:i}}constructor(e){super(e),this.state=this.constructor.newState(e),this.focusOnCurrentButton=this.focusOnCurrentButton.bind(this),this.triggerAction=this.triggerAction.bind(this),this.containerClasses=this.containerClasses.bind(this),this.buttonClasses=this.buttonClasses.bind(this),this.buttonIconClasses=this.buttonIconClasses.bind(this),this.buttonNode=null,this.state.submenuStyles={}}componentDidMount(){this.focusOnCurrentButton(this.props)}UNSAFE_componentWillReceiveProps(e){let t=this.constructor.newState(e);this.setState(t,()=>this.focusOnCurrentButton(e))}componentDidUpdate(){this.adjustSubmenuPosition()}adjustMarginOffset(e){let t=e.substring(0,2),n=e.substring(2);return"px"!==n&&(t=0),t=parseInt(t,10)}adjustSubmenuPosition(){if(this.containerRef){let e=this.containerRef.getElementsByClassName("bb-editor-toolbar-submenu")[0];if(!e||this.adjustingMenu)return;let t=this.containerRef.getBoundingClientRect(),n=this.props.getEditorRect(),r=e.getBoundingClientRect(),i=t.bottom+r.height,s=window.innerHeight||window.screen.height||document.body.offsetHeight,o=t.top+window.scrollY-r.height>=0,a={};n&&(r.left<n.left?a={right:r.left-n.left}:r.right>n.right&&(a={left:n.right-r.right}));let l=window.getComputedStyle(e).getPropertyValue("margin-bottom"),u=this.adjustMarginOffset(l);i>s&&r.top>=0&&o?(this.adjustingMenu=!0,this.setState({submenuStyles:{bottom:`${t.height}px`,top:`-${r.height+u}px`,...a}},()=>{this.adjustingMenu=!1})):Object.keys(a).length>0&&(this.adjustingMenu=!0,this.setState({submenuStyles:a},()=>{this.adjustingMenu=!1}))}}focusOnCurrentButton(e){(e.currentMenuIndex===e.index&&-1===e.currentSubmenuIndex||e.currentMenuIndex===e.parentIndex&&e.currentSubmenuIndex===e.index)&&this.buttonNode&&this.buttonNode.focus()}triggerAction(e){if(e.preventDefault(),e.stopPropagation(),this.props.isDisabled||this.state.isDisabled||!this.props.onClick)this.props.isDisabled||this.state.isDisabled||this.setState({submenuStyles:{display:"relative"}},()=>{this.props.setEditorFocusStateToolbar(!1),this.props.openSubmenu(this.props.parentIndex||this.props.index)});else{let{buttonNode:e}=this,{isActive:t}=this.state,{editorFormat:n,editorLastContent:r,editorLastRawSelection:i,currentLocale:s,localize:o,isRtl:a}=this.props;this.props.isSubmenu&&this.props.forceOpenSubmenu(this.props.index,0);let l=this.props.bbEditorId;this.props.onClick({applyChange:(e,t)=>{this.props.applyChange(e,t),this.props.toolbarActionComplete(!e||this.props.hasKeyboardFocus)},quillModuleAction:e=>this.props.quillModuleAction(e),closeAllMenus:()=>this.props.closeAllMenus(),useSharedNavigator:!0,editorFormat:n,editorLastContent:r,editorLastRawSelection:i,isActive:t,locale:s,preventBlur:()=>{this.props.setEditorFocusStateToolbar(!0)},showModal:(e,t)=>(this.props.setEditorFocusStateToolbar(!0),(0,e0.Z)(e,t,o.getLocalePropsForClone())),buttonNode:e,isRtl:a,bbEditorId:l})}return!1}containerClasses(){return(0,c.Z)({"bb-editor-toolbar-button-container":!0,"bb-editor-toolbar-dropdown-container":this.state.isSubmenuOpen})}buttonClasses(){return(0,c.Z)({"bb-editor-toolbar-button":!0,"bb-editor-toolbar-button--left-separator":this.props.leftSeparator,"bb-editor-toolbar-button--double-separator":this.props.doubleSeparator,"bb-editor-toolbar-button--non-separator":!this.props.separator&&!this.props.doubleSeparator&&!this.props.leftSeparator,"bb-editor-toolbar-button--main":null===this.props.parentIndex,"bb-editor-submenu-is-open":this.state.isSubmenuOpen||this.props.isToolbarOpen,"bb-editor-submenu-is-closed":!this.state.isSubmenuOpen||!this.props.isToolbarOpen,"is-disabled":this.props.isDisabled||this.state.isDisabled,"is-focused":this.state.hasKeyboardFocus,"bb-editor-toolbar-text":this.props.textOnly||!(this.props.iconName||this.props.iconComponent),"bb-editor-toolbar-icon-text":!this.props.textOnly&&!this.props.iconOnly&&(this.props.iconName||this.props.iconComponent),"bb-editor-toolbar-dropdown":this.props.children||this.props.isSubmenu&&!this.props.hiddenChevron,"bb-editor-submenu-button":this.props.isSubmenu,"bb-editor-submenu-button-active":this.props.isToolbarOpen,padded:!this.props.iconOnly&&!this.props.children,"text-active":this.state.isActive||this.state.isSubmenuOpen,[`${this.props.cssClass}-active`]:this.state.isActive,[`${this.props.cssClass}-normal`]:!this.state.isActive})}buttonIconClasses(){return(0,c.Z)({icon:!!this.props.iconName,[`${this.props.iconName}-active-icon`]:this.props.iconName&&(this.state.isActive||this.state.isSubmenuOpen)||this.props.isToolbarOpen,[`${this.props.iconName}-normal-icon`]:this.props.iconName&&!this.state.isActive,"color-picker":this.props.isColorPicker})}buttonIcon(){if(null!==this.props.iconComponent){let e=this.props.iconComponent;return i().createElement(e,null)}return this.props.isColorPicker?i().createElement(tg.ZP,{color:this.props.color,cssClass:this.props.cssClass,editorFormat:this.props.editorFormat}):i().createElement(tf.l,null)}haspopup(){return this.props.isDialog?"dialog":this.props.children?!!this.props.children:null}innerButton(){let{isSubmenuOpen:e,isActive:t}=this.state,{analyticsEventAugmentor:n,children:r,localize:s,isSubmenu:o,isDialog:a,isToolbarOpen:l,isSubToolbarOpen:u,parentIndex:d,toggleButton:c}=this.props,p=this.buttonClasses(),E=this.buttonIconClasses(),m=this.haspopup(),h=n(ta.AnalyticsEventTypes.CLICK_EVENT,this.triggerAction,`editor.toolbar.${this.props.id}.button`);return i().createElement("button",{tabIndex:0===this.props.index?"0":"-1","data-analytics-id":`editor.toolbar.${this.props.id}.button`,className:p,"aria-checked":d?t:null,"aria-expanded":o||r?e||l:null,"aria-controls":o&&(e||u)?this.props.id:null,"aria-haspopup":m,"aria-pressed":!(d||o||e||r||a)&&c?!!t:null,"aria-label":s.translate(`bbmlEditor.toolbar.${this.props.id}.axAriaText`),onClick:h,ref:e=>{this.buttonNode=e}},i().createElement("span",{"aria-hidden":"true"},this.props.textOnly||i().createElement("span",{className:E},this.buttonIcon()),this.props.iconOnly||s.translate(`bbmlEditor.toolbar.${this.props.id}.label`)))}render(){let{isSubmenuOpen:e,isActive:t,isToolbarOpen:n}=this.state,{localize:r,isHideable:s,separator:o}=this.props,a=this.containerClasses(),l=this.innerButton();return s&&!t?null:i().createElement("div",{role:"presentation",className:a,ref:e=>{this.containerRef=e}},(this.props.iconOnly||this.children)&&i().createElement(th.AnalyticsTooltip,{placement:"top",title:r.translate(`bbmlEditor.toolbar.${this.props.id}.label`)},l),!(this.props.iconOnly||this.children)&&l,e&&!n&&this.props.children&&i().createElement("ul",{id:this.props.id,role:"menu",className:"bb-editor-toolbar bb-editor-toolbar-submenu","aria-orientation":"horizontal",tabIndex:"-1",style:this.state.submenuStyles},this.props.children.map(e=>i().createElement("li",{key:e.key,role:"menuitemradio","aria-checked":e.props.isActive,tabIndex:"-1"},e))),o?i().createElement(tb,null):null)}}tI.propTypes={children:l().array,cssClass:l().string,iconName:l().string,iconComponent:l().object,iconOnly:l().bool,toggleButton:l().bool,isDisabled:l().bool,isHideable:l().bool,isRtl:l().bool,isSubmenu:l().bool,isToolbarOpen:l().bool,textOnly:l().bool,index:l().number,parentIndex:l().number,onClick:l().func,applyChange:l().func,quillModuleAction:l().func,toolbarActionComplete:l().func,openSubmenu:l().func,editorFormat:l().shape(),editorLastContent:l().arrayOf(l().shape({insert:l().oneOfType([l().string,l().object]),attributes:l().instanceOf(Object)})),editorLastRawSelection:l().shape(),id:l().string.isRequired,hasKeyboardFocus:l().bool,setEditorFocusStateToolbar:l().func,getEditorRect:l().func,isColorPicker:l().bool,color:l().string,...tm.Z},tI.defaultProps={children:null,cssClass:"no-format",iconName:null,iconComponent:null,iconOnly:!1,toggleButton:!0,isDisabled:!1,isHideable:!1,isRtl:!1,isSubmenu:!1,isToolbarOpen:!1,textOnly:!1,index:-1,parentIndex:null,onClick:null,applyChange:null,quillModuleAction:null,toolbarActionComplete:null,openSubmenu:null,editorFormat:{},editorLastContent:[],editorLastRawSelection:new h.e(0,0),hasKeyboardFocus:!1,setEditorFocusStateToolbar:null,getEditorRect:()=>null,isColorPicker:!1,color:null};let ty=(0,p.h)((0,ta.withAnalytics)(tI));var tS=n(941386),tT=n(410628);function t_(e){let t=(0,c.Z)({"table-creator-cell":!0,selected:e.isSelected});return i().createElement("div",{className:"table-cell",role:"cell"},i().createElement("button",{index:e.index,tabIndex:"-1",className:t,"aria-labelledby":"tableGridCreator",onClick:()=>e.handleClick(e.rowIndex,e.columnIndex),onMouseEnter:()=>e.handleHover(e.rowIndex,e.columnIndex)}))}function tO(e){let[t,n]=(0,r.useState)({rowCount:0,columnCount:0}),s=(0,tT.q)(),o=(r,i)=>{e.quillModuleAction({module:"quill.table",action:"saved-selection"}),n({rowCount:r,columnCount:i}),e.quillModuleAction({module:"quill.table",action:"insert-table",rowCount:parseInt(t.rowCount,10)+1,columnCount:parseInt(t.columnCount,10)+1,headerRow:!1,headerColumn:!1})},a=(e,t)=>{n({rowCount:e,columnCount:t})};return i().createElement("div",{className:"table-creator"},i().createElement("span",{id:"tableGridCreator",className:"table-info"},s("bbmlEditor.toolbar.tableCreator.info",{rowCount:parseInt(t.rowCount,10)+1,columnCount:parseInt(t.columnCount,10)+1})),i().createElement("div",{"aria-labelledby":"tableGridCreator",role:"grid"},i().createElement("div",{className:"table-creator-grid",role:"row"},(()=>{let n=[];for(let r=0;r<10;r++)for(let s=0;s<10;s++)n.push(i().createElement(t_,{...e,index:10*r+s,key:`${r}_${s}`,rowIndex:r,columnIndex:s,isSelected:r<=t.rowCount&&s<=t.columnCount,handleHover:a,handleClick:o}));return n})())))}t_.propTypes={isSelected:l().bool.isRequired,rowIndex:l().number.isRequired,columnIndex:l().number.isRequired,index:l().number.isRequired,handleHover:l().func.isRequired,handleClick:l().func.isRequired},tO.propTypes={quillModuleAction:l().func.isRequired};var tA=(0,ta.withAnalytics)(tO);let tC=e=>{let{analyticsId:t,id:n,label:s,value:o}=e,a=(0,r.useRef)(null),l=(0,tT.q)();return(0,r.useEffect)(()=>{e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index&&a.current&&a.current.focus()}),i().createElement(th.AnalyticsFormControlLabel,{analyticsId:t,className:(0,c.Z)({"bb-editor-toolbar-checkbox":!0,"is-focused":e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index}),label:l(`bbmlEditor.toolbar.${s}.label`),control:i().createElement(th.AnalyticsCheckbox,{analyticsId:t,id:n,className:"inner-checkbox",value:o,checked:o}),htmlFor:n,onChange:t=>{e.onChange(t,e)},ref:a})};tC.propTypes={id:l().string.isRequired,label:l().string.isRequired,hasKeyboardFocus:l().bool,index:l().number,value:l().bool,currentMenuIndex:l().number.isRequired,currentSubmenuIndex:l().number.isRequired,onChange:l().func.isRequired},tC.defaultProps={hasKeyboardFocus:!1,index:-1,currentSubmenuIndex:-1,value:!1};var tv=(0,ta.withAnalytics)(tC),tR=n(438501),tL=n(958299);function tP(e){let t;let{title:n,placement:s,ariaLabel:o}=e;return(0,r.useEffect)(()=>{e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index&&t&&t.focus()}),i().createElement(th.AnalyticsTooltip,{className:(0,c.Z)({"is-focused":e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index}),title:n,placement:s},i().createElement(tL.AnalyticsIconButton,{className:"bb-editor-toolbar-tooltip-icon-button","aria-label":o,ref:e=>{t=e},analyticsId:"bbml-editor.toolbar.tooltip"},i().createElement(tR.Information,null)))}tP.propTypes={ariaLabel:l().string.isRequired,hasKeyboardFocus:l().bool,index:l().number,placement:l().string,title:l().string.isRequired},tP.defaultProps={hasKeyboardFocus:!1,index:-1,placement:"top"};var tN=(0,ta.withAnalytics)(tP);function tD(e){let{isSmallToolbar:t,tableHasHeaderColumn:n,tableHasHeaderRow:s}=e,o=(0,tT.q)();return(0,r.useEffect)(()=>{let t=e.quillModuleAction({module:"quill.table",action:"get-headers"});e.setHeaders(t.row,t.column)},[]),i().createElement(tE,{...tS.gO,...e,isSubmenuToolbar:!0},i().createElement(ty,{...tS.Zp,iconOnly:!0}),i().createElement(ty,{...tS.wR,iconOnly:!0}),i().createElement(ty,{...tS.VV,iconOnly:!0}),i().createElement(ty,{...tS.km,iconOnly:!0}),i().createElement(ty,{...tS.Ag,iconOnly:!0}),i().createElement(ty,{...tS.yj,iconOnly:!0}),i().createElement(ty,{...tS.wj,iconOnly:!0}),i().createElement(tv,{id:"checkboxRow",label:"table-dialog-headers-row",value:s,onChange:(e,t)=>{t.quillModuleAction({module:"quill.table",action:"set-header-row",setHeader:e.target.checked}),e.target.checked||t.quillModuleAction({module:"quill.table",action:"set-header-col",setHeader:n}),t.setHeaders(e.target.checked,n)},isHideable:t}),i().createElement(tv,{id:"checkboxColumn",label:"table-dialog-headers-column",value:n,onChange:(e,t)=>{t.quillModuleAction({module:"quill.table",action:"set-header-col",setHeader:e.target.checked}),e.target.checked||t.quillModuleAction({module:"quill.table",action:"set-header-row",setHeader:s}),t.setHeaders(s,e.target.checked)},isHideable:t}),i().createElement(tN,{title:o("bbmlEditor.toolbar.table-dialog-tooltip.label"),placement:"top",ariaLabel:o("bbmlEditor.toolbar.table-dialog-tooltip.axAriaText"),isHideable:t}))}tD.propTypes={children:l().array,addKeyDownHandler:l().func.isRequired,editorId:l().string,toolbarActionComplete:l().func.isRequired,hasKeyboardFocus:l().bool,isDisabled:l().bool,isRtl:l().bool,isSubmenuToolbar:l().bool,isSubToolbarOpen:l().bool,isSmallToolbar:l().bool},tD.defaultProps={children:null,editorId:null,hasKeyboardFocus:!1,isDisabled:!1,isRtl:!1,isSubmenuToolbar:!1,isSubToolbarOpen:!1,isSmallToolbar:!1};var tU=(0,ta.withAnalytics)(tD);let tk={[tu.mt.default]:{[tu.mZ.small]:["link","editAttachment","editYoutubeVideo"],[tu.mZ.medium]:["link","insertLocalFile","editAttachment","editYoutubeVideo"],[tu.mZ.large]:["link","insertLocalFile","editAttachment","editYoutubeVideo"]},[tu.mt.minimal]:{[tu.mZ.small]:["math","link","image","editAttachment","editYoutubeVideo"],[tu.mZ.medium]:["math","link","image","editAttachment","editYoutubeVideo"],[tu.mZ.large]:["math","link","image","editAttachment","editYoutubeVideo"]}},tw=(e,t,n)=>e.filter(e=>!tk[t][n].some(t=>e.id===t)).length>0;var tM=(e,t,n)=>e.pluginButtons.filter(e=>!tk[t][n].some(t=>e.id===t)&&!e.isHidden).map(e=>i().createElement(ty,{...e}));function tB(e){let t=e.pluginButtons.find(e=>"link"===e.id);return t?i().createElement(ty,{...t,...e}):null}function tG(e){let t=e.pluginButtons.find(e=>"editAttachment"===e.id);return t?i().createElement(ty,{...t,...e}):null}function tx(e){let t=e.pluginButtons.find(e=>"editYoutubeVideo"===e.id);return t?i().createElement(ty,{...t,...e}):null}function tV(e){let t=e.pluginButtons.find(e=>"insertLocalFile"===e.id);return t?i().createElement(ty,{...t,...e}):null}tB.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired},tG.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired},tx.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired},tV.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired};let tq={None:"",TextOptionsMenu:"textOptionsMenu",ListMenu:"listMenu"};function tZ(e){let[t,n]=(0,r.useState)(tq.None),[s,o]=(0,r.useState)(),a=e=>{n(t=>t===e?tq.None:e)},l=()=>{a(tq.None)};return i().createElement("div",null,i().createElement(tE,{...e,isSubToolbarOpen:t!==tq.None,resetMenu:l,shareNavigator:e=>{o(e)}},i().createElement(ty,{...tS.pn,iconOnly:!0},tS.Qi.map(e=>i().createElement(ty,{key:e.key,...e,textOnly:!0}))),i().createElement(ty,{...tS.DQ,iconOnly:!0},i().createElement(ty,{...tS.l2,textOnly:!0}),i().createElement(ty,{...tS.dr,textOnly:!0}),i().createElement(ty,{...tS.K3,textOnly:!0}),i().createElement(ty,{...tS.wk,textOnly:!0}),i().createElement(ty,{...tS.sg,textOnly:!0}),i().createElement(ty,{...tS.Cg,textOnly:!0}),i().createElement(ty,{...tS.AW,textOnly:!0})),i().createElement(ty,{...tS.yH,iconOnly:!0},i().createElement(ty,{...tS.rA,textOnly:!0}),i().createElement(ty,{...tS.nl,textOnly:!0}),i().createElement(ty,{...tS.xj,textOnly:!0,isActive:t=>t.size===w.SC||!e.isRtl&&!t.size}),i().createElement(ty,{...tS.B2,textOnly:!0,isActive:t=>t.size===w.gJ||e.isRtl&&!t.size}),i().createElement(ty,{...tS.Fo,textOnly:!0}),i().createElement(ty,{...tS.AV,textOnly:!0}),i().createElement(ty,{...tS.jU,textOnly:!0})),i().createElement(ty,{...tS.zH,iconOnly:!0,separator:!0},i().createElement(ty,{...tS.gu}),i().createElement(ty,{...tS.dK}),i().createElement(ty,{...tS.Ol}),i().createElement(ty,{...tS.JZ}),i().createElement(ty,{...tS.yx}),i().createElement(ty,{...tS.BU})),i().createElement(ty,{...tS.d8,iconOnly:!0}),i().createElement(ty,{...tS.Tx,iconOnly:!0}),i().createElement(ty,{...tS.v6,iconOnly:!0}),i().createElement(ty,{...tS.c0,onClick:()=>a(tq.TextOptionsMenu),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===tq.TextOptionsMenu,separator:!0}),e.editorHasTableSelected?i().createElement(ty,{...tS.OR,iconOnly:!0}):i().createElement(ty,{...tS.SN,iconOnly:!0},i().createElement(tA,{...e.quillModuleAction}),i().createElement(ty,{...tS.cM,...e.closeAllMenus})),i().createElement(ty,{...tS.v2,iconOnly:!0},i().createElement(ty,{...tS.Ni}),i().createElement(ty,{...tS.Un}),i().createElement(ty,{...tS.EL}),i().createElement(ty,{...tS.IH})),i().createElement(ty,{...tS.sc,onClick:()=>a(tq.ListMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tq.ListMenu,separator:!0}),i().createElement(ty,{...tS.WP,iconOnly:!0,isButtonDisabled:e.editorHasTableSelected}),i().createElement(ty,{...tS.XM,iconOnly:!0,separator:!0}),i().createElement(tB,{pluginButtons:e.pluginButtons,iconOnly:!0}),i().createElement(tV,{pluginButtons:e.pluginButtons,iconOnly:!0}),tw(e.pluginButtons,tu.mt.default,tu.mZ.large)&&i().createElement(ty,{...tS.t0,iconOnly:!0},tM(e,tu.mt.default,tu.mZ.large)),i().createElement(tG,{id:tu.M$.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),i().createElement(tx,{id:tu.HC.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===tq.TextOptionsMenu&&i().createElement(tE,{...e,...tS.MO,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tq.None,resetMenu:l},i().createElement(ty,{...tS.Re,iconOnly:!0}),i().createElement(ty,{...tS.$2,iconOnly:!0}),i().createElement(ty,{...tS.ar,iconOnly:!0}),i().createElement(ty,{...tS.GY,iconOnly:!0})),t===tq.ListMenu&&i().createElement(tE,{...e,...tS.AU,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tq.None,resetMenu:l},i().createElement(ty,{...tS.QI,iconOnly:!0}),i().createElement(ty,{...tS.GS,iconOnly:!0}),i().createElement(ty,{...tS.L3,iconOnly:!0},i().createElement(ty,{...tS.yz,textOnly:!0}),i().createElement(ty,{...tS.MP,textOnly:!0}),i().createElement(ty,{...tS.aj,textOnly:!0}),i().createElement(ty,{...tS.QA,textOnly:!0})),e.isRtl&&i().createElement(ty,{...tS.rG,iconOnly:!0,isActive:t=>t.direction===$.hn||!t.direction&&e.isRtl}),i().createElement(ty,{...tS.jy,iconOnly:!0,isActive:t=>t.direction===$.TM||!t.direction&&!e.isRtl}),!e.isRtl&&i().createElement(ty,{...tS.rG,iconOnly:!0,isActive:t=>t.direction===$.hn||!t.direction&&e.isRtl})),e.editorHasTableSelected&&i().createElement(tU,{...e,useSharedNavigator:!0,sharedNavigator:s,isAdditionalToolbarVisible:e.editorHasTableSelected}))}tZ.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired,editorHasTableSelected:l().bool},tZ.defaultProps={editorHasTableSelected:!1};let tF={None:"",TextStylingMenu:"textStylingMenu",TextOptionsMenu:"textOptionsMenu",ListMenu:"listMenu"};function tH(e){let[t,n]=(0,r.useState)(tF.None),[s,o]=(0,r.useState)(),a=e=>{n(t=>t===e?tF.None:e)},l=()=>{a(tF.None)};return i().createElement("div",null,i().createElement(tE,{...e,isSubToolbarOpen:t!==tF.None,resetMenu:l,shareNavigator:e=>{o(e)}},i().createElement(ty,{...tS.tM,onClick:()=>a(tF.TextStylingMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tF.TextStylingMenu,separator:!0}),i().createElement(ty,{...tS.d8,iconOnly:!0}),i().createElement(ty,{...tS.Tx,iconOnly:!0}),i().createElement(ty,{...tS.v6,iconOnly:!0}),i().createElement(ty,{...tS.c0,onClick:()=>a(tF.TextOptionsMenu),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===tF.TextOptionsMenu,separator:!0}),i().createElement(ty,{...tS.v2,iconOnly:!0},i().createElement(ty,{...tS.Ni}),i().createElement(ty,{...tS.Un}),i().createElement(ty,{...tS.EL}),i().createElement(ty,{...tS.IH})),i().createElement(ty,{...tS.sc,onClick:()=>a(tF.ListMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tF.ListMenu,separator:!0}),i().createElement(ty,{...tS.WP,isButtonDisabled:e.editorHasTableSelected,iconOnly:!0}),i().createElement(ty,{...tS.XM,iconOnly:!0,separator:!0}),i().createElement(tB,{pluginButtons:e.pluginButtons,iconOnly:!0}),i().createElement(tV,{pluginButtons:e.pluginButtons,iconOnly:!0}),tw(e.pluginButtons,tu.mt.default,tu.mZ.medium)&&i().createElement(ty,{...tS.t0,iconOnly:!0},tM(e,tu.mt.default,tu.mZ.medium)),i().createElement(tG,{id:tu.M$.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),i().createElement(tx,{id:tu.HC.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===tF.TextStylingMenu&&i().createElement(tE,{...tS.nk,...e,isSubmenuToolbar:!0,resetMenu:l},i().createElement(ty,{...tS.pn,iconOnly:!0},tS.Qi.map(e=>i().createElement(ty,{key:e.key,...e,textOnly:!0}))),i().createElement(ty,{...tS.DQ,iconOnly:!0},i().createElement(ty,{...tS.l2,textOnly:!0}),i().createElement(ty,{...tS.dr,textOnly:!0}),i().createElement(ty,{...tS.K3,textOnly:!0}),i().createElement(ty,{...tS.wk,textOnly:!0}),i().createElement(ty,{...tS.sg,textOnly:!0}),i().createElement(ty,{...tS.Cg,textOnly:!0}),i().createElement(ty,{...tS.AW,textOnly:!0})),i().createElement(ty,{...tS.yH,iconOnly:!0},i().createElement(ty,{...tS.rA,textOnly:!0}),i().createElement(ty,{...tS.nl,textOnly:!0}),i().createElement(ty,{...tS.xj,textOnly:!0,isActive:t=>t.size===w.SC||!e.isRtl&&!t.size}),i().createElement(ty,{...tS.B2,textOnly:!0,isActive:t=>t.size===w.gJ||e.isRtl&&!t.size}),i().createElement(ty,{...tS.Fo,textOnly:!0}),i().createElement(ty,{...tS.AV,textOnly:!0}),i().createElement(ty,{...tS.jU,textOnly:!0})),i().createElement(ty,{...tS.zH,iconOnly:!0},i().createElement(ty,{...tS.gu}),i().createElement(ty,{...tS.dK}),i().createElement(ty,{...tS.Ol}),i().createElement(ty,{...tS.JZ}),i().createElement(ty,{...tS.yx}),i().createElement(ty,{...tS.BU}))),t===tF.TextOptionsMenu&&i().createElement(tE,{...tS.MO,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tF.None,resetMenu:l},i().createElement(ty,{...tS.Re,iconOnly:!0}),i().createElement(ty,{...tS.$2,iconOnly:!0}),i().createElement(ty,{...tS.ar,iconOnly:!0}),i().createElement(ty,{...tS.GY,iconOnly:!0})),t===tF.ListMenu&&i().createElement(tE,{...tS.AU,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tF.None,resetMenu:l},i().createElement(ty,{...tS.QI,iconOnly:!0}),i().createElement(ty,{...tS.GS,iconOnly:!0}),i().createElement(ty,{...tS.L3,iconOnly:!0},i().createElement(ty,{...tS.yz,textOnly:!0}),i().createElement(ty,{...tS.MP,textOnly:!0}),i().createElement(ty,{...tS.aj,textOnly:!0}),i().createElement(ty,{...tS.QA,textOnly:!0})),e.editorHasTableSelected?i().createElement(ty,{...tS.OR,iconOnly:!0}):i().createElement(ty,{...tS.SN,iconOnly:!0},i().createElement(tA,{...e.quillModuleAction}),i().createElement(ty,{...tS.cM,...e.closeAllMenus})),e.isRtl&&i().createElement(ty,{...tS.rG,iconOnly:!0,isActive:t=>t.direction===$.hn||!t.direction&&e.isRtl}),i().createElement(ty,{...tS.jy,iconOnly:!0,isActive:t=>t.direction===$.TM||!t.direction&&!e.isRtl}),!e.isRtl&&i().createElement(ty,{...tS.rG,iconOnly:!0,isActive:t=>t.direction===$.hn||!t.direction&&e.isRtl})),e.editorHasTableSelected&&i().createElement(tU,{...e,useSharedNavigator:!0,sharedNavigator:s,isAdditionalToolbarVisible:e.editorHasTableSelected}))}tH.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired,editorHasTableSelected:l().bool},tH.defaultProps={editorHasTableSelected:!1};let tj={None:"",TextStylingMenu:"textStylingMenu",TextOptionsMenu:"textOptionsMenu",ListMenu:"listMenu"};function tK(e){let[t,n]=(0,r.useState)(tj.None),[s,o]=(0,r.useState)(),a=e=>{n(t=>t===e?tj.None:e)},l=()=>{a(tj.None)};return i().createElement("div",null,i().createElement(tE,{...e,isSubToolbarOpen:t!==tj.None,resetMenu:l,shareNavigator:e=>{o(e)}},i().createElement(ty,{...tS.tM,onClick:()=>a(tj.TextStylingMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tj.TextStylingMenu,separator:!0}),i().createElement(ty,{...tS.c0,onClick:()=>a(tj.TextOptionsMenu),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===tj.TextOptionsMenu,separator:!0}),i().createElement(ty,{...tS.sc,onClick:()=>a(tj.ListMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tj.ListMenu,separator:!0}),i().createElement(ty,{...tS.WP,isButtonDisabled:e.editorHasTableSelected,iconOnly:!0}),i().createElement(tB,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&i().createElement(ty,{...tS.t0,iconOnly:!0},tM(e,tu.mt.default,tu.mZ.small)),i().createElement(tG,{id:tu.M$.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),i().createElement(tx,{id:tu.HC.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===tj.TextStylingMenu&&i().createElement(tE,{...tS.nk,...e,isSubmenuToolbar:!0,resetMenu:l},i().createElement(ty,{...tS.pn,iconOnly:!0},tS.Qi.map(e=>i().createElement(ty,{key:e.key,...e,textOnly:!0}))),i().createElement(ty,{...tS.DQ,iconOnly:!0},i().createElement(ty,{...tS.l2,textOnly:!0}),i().createElement(ty,{...tS.dr,textOnly:!0}),i().createElement(ty,{...tS.K3,textOnly:!0}),i().createElement(ty,{...tS.wk,textOnly:!0}),i().createElement(ty,{...tS.sg,textOnly:!0}),i().createElement(ty,{...tS.Cg,textOnly:!0}),i().createElement(ty,{...tS.AW,textOnly:!0})),i().createElement(ty,{...tS.yH,iconOnly:!0},i().createElement(ty,{...tS.rA,textOnly:!0}),i().createElement(ty,{...tS.nl,textOnly:!0}),i().createElement(ty,{...tS.xj,textOnly:!0,isActive:t=>t.size===w.SC||!e.isRtl&&!t.size}),i().createElement(ty,{...tS.B2,textOnly:!0,isActive:t=>t.size===w.gJ||e.isRtl&&!t.size}),i().createElement(ty,{...tS.Fo,textOnly:!0}),i().createElement(ty,{...tS.AV,textOnly:!0}),i().createElement(ty,{...tS.jU,textOnly:!0})),i().createElement(ty,{...tS.zH,iconOnly:!0},i().createElement(ty,{...tS.gu}),i().createElement(ty,{...tS.dK}),i().createElement(ty,{...tS.Ol}),i().createElement(ty,{...tS.JZ}),i().createElement(ty,{...tS.yx}),i().createElement(ty,{...tS.BU}))),t===tj.TextOptionsMenu&&i().createElement(tE,{...tS.MO,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tj.None,resetMenu:l},i().createElement(ty,{...tS.d8,iconOnly:!0}),i().createElement(ty,{...tS.Tx,iconOnly:!0}),i().createElement(ty,{...tS.v6,iconOnly:!0}),i().createElement(ty,{...tS.Re,iconOnly:!0}),i().createElement(ty,{...tS.$2,iconOnly:!0}),i().createElement(ty,{...tS.ar,iconOnly:!0}),i().createElement(ty,{...tS.XM,iconOnly:!0}),i().createElement(ty,{...tS.GY,iconOnly:!0})),t===tj.ListMenu&&i().createElement(tE,{...tS.AU,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tj.None,resetMenu:l},i().createElement(ty,{...tS.v2,iconOnly:!0},i().createElement(ty,{...tS.Ni}),i().createElement(ty,{...tS.Un}),i().createElement(ty,{...tS.EL}),i().createElement(ty,{...tS.IH})),i().createElement(ty,{...tS.QI,iconOnly:!0}),i().createElement(ty,{...tS.GS,iconOnly:!0}),i().createElement(ty,{...tS.L3,iconOnly:!0},i().createElement(ty,{...tS.yz,textOnly:!0}),i().createElement(ty,{...tS.MP,textOnly:!0}),i().createElement(ty,{...tS.aj,textOnly:!0}),i().createElement(ty,{...tS.QA,textOnly:!0})),e.editorHasTableSelected?i().createElement(ty,{...tS.OR,iconOnly:!0}):i().createElement(ty,{...tS.cM,iconOnly:!0}),e.isRtl&&i().createElement(ty,{...tS.rG,iconOnly:!0,isActive:t=>t.direction===$.hn||!t.direction&&e.isRtl}),i().createElement(ty,{...tS.jy,iconOnly:!0,isActive:t=>t.direction===$.TM||!t.direction&&!e.isRtl}),!e.isRtl&&i().createElement(ty,{...tS.rG,iconOnly:!0,isActive:t=>t.direction===$.hn||!t.direction&&e.isRtl})),e.editorHasTableSelected&&i().createElement(tU,{...e,isSmallToolbar:!0,useSharedNavigator:!0,sharedNavigator:s,isAdditionalToolbarVisible:e.editorHasTableSelected}))}function tQ(e){let t=e.pluginButtons.find(e=>"image"===e.id);return t?i().createElement(ty,{...t,...e}):null}function tY(e){let t=e.pluginButtons.find(e=>"math"===e.id);return t?i().createElement(ty,{...t,...e}):null}function tz(e){let t=e.pluginButtons.find(e=>"collab_video"===e.id);return t?i().createElement(ty,{...t,...e}):null}tK.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired,editorHasTableSelected:l().bool},tK.defaultProps={editorHasTableSelected:!1},tQ.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired},tY.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired},tz.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired};let tW=e=>i().createElement(tE,{...e},i().createElement(ty,{...tS.d8,iconOnly:!0}),i().createElement(ty,{...tS.Tx,iconOnly:!0}),i().createElement(ty,{...tS.v6,iconOnly:!0}),i().createElement(tY,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&i().createElement(ty,{...tS.t0,iconOnly:!0,separator:!0},i().createElement(tB,{pluginButtons:e.pluginButtons}),i().createElement(tQ,{pluginButtons:e.pluginButtons}),i().createElement(tz,{pluginButtons:e.pluginButtons}),tM(e,tu.mt.minimal,tu.mZ.small)),i().createElement(tG,{id:tu.M$.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),i().createElement(tx,{id:tu.HC.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}));tW.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired};let t$=e=>i().createElement(tE,{...e},i().createElement(ty,{...tS.c0,iconOnly:!0},i().createElement(ty,{...tS.d8}),i().createElement(ty,{...tS.Tx}),i().createElement(ty,{...tS.v6})),i().createElement(tY,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&i().createElement(ty,{...tS.t0,iconOnly:!0,separator:!0},i().createElement(tB,{pluginButtons:e.pluginButtons}),i().createElement(tQ,{pluginButtons:e.pluginButtons}),i().createElement(tz,{pluginButtons:e.pluginButtons}),tM(e,tu.mt.minimal,tu.mZ.small)),i().createElement(tG,{id:tu.M$.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),i().createElement(tx,{id:tu.HC.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}));t$.propTypes={pluginButtons:l().arrayOf(l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,iconName:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired})).isRequired};var tX=n(198022);class tJ extends i().Component{constructor(e){super(e);let t=new h.e(0,0);this.editorInitialContent=null,this.isBbmlDirty=!1,this.bbEditorId="BB_Editor_ID_"+(0,tX.v4)(),this.state={isApplyingChanges:!1,editorFormat:{text:"",selection:t},editorLastFormat:{},editorLastContent:[],editorLastSelection:t,editorLastRawSelection:t,toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!1,editorHasTableSelected:!1,tableHasHeaderRow:!1,tableHasHeaderColumn:!1,toolbar:tK},this.quill=null,this.storedStack=null,this.editorContainer=null,this.editorRoot=null,this.keyDownHandler=new ez,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyDownOutsideEditor=this.onKeyDownOutsideEditor.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.extendSelection=null,this.registerAccessibilityHandlers=this.registerAccessibilityHandlers.bind(this),this.unregisterAccessibilityHandlers=this.unregisterAccessibilityHandlers.bind(this),this.setToolbarKeyboardFocused=this.setToolbarKeyboardFocused.bind(this),this.setEditorKeyboardFocused=this.setEditorKeyboardFocused.bind(this),this.setEditorMouseFocused=this.setEditorMouseFocused.bind(this),this.updateAriaAttributes=this.updateAriaAttributes.bind(this),this.addAxLabels=this.addAxLabels.bind(this),this.editorContainsElement=this.editorContainsElement.bind(this),this.editorHasFocus=this.editorHasFocus.bind(this),this.editorHasKeyboardFocus=this.editorHasKeyboardFocus.bind(this),this.setEditorFocusState=this.setEditorFocusState.bind(this),this.setEditorFocusStateToolbar=this.setEditorFocusStateToolbar.bind(this),this.isEditorFocusState=this.isEditorFocusState.bind(this),this.editorFocusState=tu.xB.BLURRED,this.onFocusHandler=this.onFocusHandler.bind(this),this.onFocusDebounce=null,this.onBlurHandler=this.onBlurHandler.bind(this),this.onBlurDebounce=null,this.initializeQuill=this.initializeQuill.bind(this),this.updateQuillEnable=this.updateQuillEnable.bind(this),this.updateQuillPlaceholder=this.updateQuillPlaceholder.bind(this),this.restoreQuillPlaceholder=this.restoreQuillPlaceholder.bind(this),this.unloadPlugins=this.unloadPlugins.bind(this),this.notifyPluginsOfPropChanges=this.notifyPluginsOfPropChanges.bind(this),this.onToolbarActionComplete=this.onToolbarActionComplete.bind(this),this.onEditorChange=this.onEditorChange.bind(this),this.getEditorSelection=this.getEditorSelection.bind(this),this.getEditorFormat=this.getEditorFormat.bind(this),this.updateFormatWithBlotSelection=this.updateFormatWithBlotSelection.bind(this),this.selectEmbeddedBlot=this.selectEmbeddedBlot.bind(this),this.unselectEmbeddedBlots=this.unselectEmbeddedBlots.bind(this),this.applyEditorChange=this.applyEditorChange.bind(this),this.applyChangeAndSetEditorFocused=this.applyChangeAndSetEditorFocused.bind(this),this.quillModuleAction=this.quillModuleAction.bind(this),this.setHeaders=this.setHeaders.bind(this),this.onBbMLInputChange=this.onBbMLInputChange.bind(this),this.onBbMLOutputChange=this.onBbMLOutputChange.bind(this),this.makeEmbedsEasierToEditAfter=this.makeEmbedsEasierToEditAfter.bind(this),this.updateToolbar=this.updateToolbar.bind(this),this.setToolbarState=this.setToolbarState.bind(this),this.getPluginButtons=this.getPluginButtons.bind(this),this.getEditorRect=this.getEditorRect.bind(this),this.onDragEnter=this.onDragEnter.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDrop=this.onDrop.bind(this),this.dragCount=0,this.fileDragDropUtil=e1(this.applyChangeAndSetEditorFocused,this.props.localize.getLocalePropsForClone(),this.setEditorFocusStateToolbar),this.plugins=eX(e.plugins,()=>this.forceUpdate(),this.fileDragDropUtil)}componentDidMount(){this.initializeQuill(),this.registerAccessibilityHandlers(),this.updateToolbar(),window.addEventListener("resize",this.updateToolbar)}componentDidUpdate(e){if(this.props.isDisabled!==e.isDisabled||this.props.isReadOnly!==e.isReadOnly){let e=!this.props.isDisabled&&!this.props.isReadOnly;this.updateQuillEnable(e),e9(this.editorRoot.classList,e),e||(tt(this.editorRoot.classList,!1),ts(this.editorRoot.classList,!1))}this.props.placeholder!==e.placeholder&&this.updateQuillPlaceholder(this.props.placeholder),this.props.isDisabled!==e.isDisabled&&e4(this.editorRoot.classList,this.props.isDisabled),this.props.isReadOnly!==e.isReadOnly&&(e6(this.editorRoot.classList,this.props.isReadOnly),this.updateQuillPlaceholder(this.props.placeholder),this.quillModuleAction({module:"plugins",action:"read-only-change",value:this.props.isReadOnly})),this.props.errorMessage!==e.errorMessage&&tr(this.editorRoot.classList,!!this.props.errorMessage),this.updateAriaAttributes(e),(this.props.isReadOnly!==e.isReadOnly||this.props.isToolbarHidden!==e.isToolbarHidden||this.props.toolbarSet!==e.toolbarSet)&&this.updateToolbar(),(this.props.isReadOnly!==e.isReadOnly||this.props.isDisabled!==e.isDisabled||this.props.isToolbarHidden!==e.isToolbarHidden)&&this.quill.history.clear(),this.props!==e&&((this.props.bbml!==e.bbml||this.isBbmlDirty)&&this.onBbMLInputChange(this.props.bbml),this.notifyPluginsOfPropChanges()),this.props.mediaQuery!==e.mediaQuery&&this.getPluginModules().forEach(e=>{"function"==typeof e.onBreakpointChange&&e.onBreakpointChange(this.props.mediaQuery)}),(this.props.currentLocale!==e.currentLocale||this.props.isRtl!==e.isRtl)&&this.fileDragDropUtil.setLocaleProps(this.props.localize.getLocalePropsForClone()),this.editorRoot.firstChild.classList.remove(`size-${e.size}`),this.setEditorSize()}componentWillUnmount(){this.quill.history.clear(),this.unloadPlugins(),this.unregisterAccessibilityHandlers(),this.removeTimers(),window.removeEventListener("resize",this.updateToolbar),this.quill.off(m.Z.events.EDITOR_CHANGE,this.onEditorChange),this.editorRoot.remove(),delete this.editorContainer,delete this.editorRoot,delete this.quill}removeTimers(){this.requestAnimationFrameID&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.requestAnimationFrameID=null),clearTimeout(this.extendSelection),clearTimeout(this.debounceWindowResizeToolbar),clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),clearTimeout(this.axTooltipTimeout),clearTimeout(this.keyFocusTimeout),clearTimeout(this.autoSaveTimeout)}registerAccessibilityHandlers(){document.addEventListener("keydown",this.onKeyDownOutsideEditor),this.editorContainer.addEventListener("focusin",this.onFocusHandler),this.editorContainer.addEventListener("focusout",this.onBlurHandler),this.editorRoot.addEventListener("mousedown",this.onMouseDown),this.editorContainer.addEventListener("mousedown",eW.Z),this.editorContainer.addEventListener("focusout",eW.Z),this.updateAriaAttributes(),this.keyDownHandler.addKeyDownHandler(d().F10,eY.ALT,this.setToolbarKeyboardFocused,eQ.EDITOR)}unregisterAccessibilityHandlers(){document.removeEventListener("keydown",this.onKeyDownOutsideEditor),this.editorContainer.removeEventListener("focusin",this.onFocusHandler),this.editorContainer.removeEventListener("focusout",this.onBlurHandler),this.editorRoot.removeEventListener("mousedown",this.onMouseDown),this.editorContainer.removeEventListener("mousedown",eW.Z),this.editorContainer.removeEventListener("focusout",eW.Z)}addAxLabels(){let{editorId:e,ariaLabelledBy:t,ariaDescribedBy:n}=this.props,r=this.editorRoot.firstChild;this.editorRoot.querySelector(".ql-clipboard").setAttribute("aria-hidden","true"),e&&r.setAttribute("id",e),t&&r.setAttribute("aria-labelledby",t),n&&r.setAttribute("aria-describedby",n)}updateAriaAttributes(e){let t=!1;!e||e.isReadOnly||e.isDisabled||(t=!0);let n=!this.props.isReadOnly&&!this.props.isDisabled;t!==n&&(n?(this.editorRoot.firstChild.setAttribute("role","textbox"),this.editorRoot.firstChild.setAttribute("aria-multiline","true"),this.editorRoot.firstChild.setAttribute("aria-required",this.props.ariaRequired?"true":"false")):(this.editorRoot.firstChild.removeAttribute("role"),this.editorRoot.firstChild.removeAttribute("aria-multiline"),this.editorRoot.firstChild.removeAttribute("aria-required")))}setToolbarKeyboardFocused(){this.keyDownHandler.enableToolbarScope(),this.setState({toolbarHasKeyboardFocus:!0,editorHasKeyboardFocus:!1}),tt(this.editorRoot.classList,!1),ts(this.editorRoot.classList,!1)}setEditorKeyboardFocused(e){this.keyDownHandler.enableEditorScope(),this.setState({toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!0},"function"==typeof e?e:null),tt(this.editorRoot.classList,!0),ts(this.editorRoot.classList,!0)}setEditorMouseFocused(e){this.keyDownHandler.enableEditorScope(),this.setState({toolbarHasKeyboardFocus:!1},"function"==typeof e?e:null),tt(this.editorRoot.classList,!0)}onMouseDown(e){this.editorHasFocus()&&!this.quill.hasFocus()&&this.onToolbarActionComplete(!this.toolbarHasFocus()),2===e.button&&(clearTimeout(this.extendSelection),this.extendTableSelection()),this.props.isDisabled||this.props.isReadOnly||setTimeout(()=>this.selectEmbeddedBlot(e.target))}onKeyDown(e){if(!this.props.isDisabled&&!this.props.isReadOnly){let t=this.keyDownHandler.handleKeyDown(e),n=ez.hasModifierKey(e),r=ez.hasRegularKey(e);clearTimeout(this.extendSelection),this.extendTableSelection(),e.keyCode===d().ENTER&&this.quill.history.cutoff(),(t||n&&r)&&this.onEditorChange(m.Z.events.TEXT_CHANGE)}}onKeyDownOutsideEditor(e){e.keyCode!==d().TAB||this.props.isDisabled||this.props.isReadOnly||this.editorHasFocus()||(this.keyFocusTimeout=setTimeout(()=>{this.editorHasFocus()&&this.setEditorKeyboardFocused()}))}editorContainsElement(e,t){let n=this.editorContainer;return t&&(n=n.querySelector(t)),n&&n.contains(e)}toolbarHasFocus(){return(this.editorContainsElement(document.activeElement,".bb-editor-toolbar")||this.editorContainsElement(document.activeElement,".bb-editor-submenu-toolbar"))&&!this.props.isDisabled&&!this.props.isReadOnly}editorHasFocus(){return(this.editorContainsElement(document.activeElement)||this.quill.hasFocus())&&!this.props.isDisabled&&!this.props.isReadOnly}editorHasKeyboardFocus(){return this.editorHasFocus()&&(this.state.editorHasKeyboardFocus||this.editorRoot.classList.contains("has-keyboard-focus"))}onToolbarActionComplete(e=!1){let t=!0===e?()=>this.quill.focus():()=>{};this.setEditorFocusState(tu.xB.FOCUSED),this.state.toolbarHasKeyboardFocus?this.setEditorKeyboardFocused(t):this.setEditorMouseFocused(t)}setEditorFocusState(e){this.editorFocusState=e}setEditorFocusStateToolbar(e=!1){tt(this.editorRoot.classList,!1),e&&this.setEditorFocusState(tu.xB.TOOLBAR)}isEditorFocusState(e){return this.editorFocusState===e}onBlurHandler(){clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),this.onBlurDebounce=setTimeout(()=>{!this.editorHasFocus()&&this.isEditorFocusState(tu.xB.FOCUSED)&&this.setState({toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!1},()=>{this.getPluginModules().forEach(e=>{"function"==typeof e.onFormatChange&&e.onFormatChange(null)}),this.setEditorFocusState(tu.xB.BLURRED),this.restoreQuillPlaceholder(),tt(this.editorRoot.classList,!1),ts(this.editorRoot.classList,!1),this.props.onBlur&&this.props.onBlur()})},100)}onFocusHandler(e){clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),e&&e.target&&!this.props.isDisabled&&!this.props.isReadOnly&&(this.selectEmbeddedBlot(e.target),this.editorContainer.removeEventListener("focusin",this.onFocusHandler),e.target.focus({preventScroll:!0}),this.editorContainer.addEventListener("focusin",this.onFocusHandler)),this.onFocusDebounce=setTimeout(()=>{this.editorHasFocus()&&this.isEditorFocusState(tu.xB.BLURRED)&&(window.getSelection().focusNode===this.editorRoot.firstChild&&this.quill.setSelection(0,0),this.setEditorFocusState(tu.xB.FOCUSED),this.toolbarHasFocus()||tt(this.editorRoot.classList,!0),this.editorHasKeyboardFocus()&&ts(this.editorRoot.classList,!0),this.toolbarHasFocus()||this.quill.hasFocus()||this.quill.focus(),this.props.onFocus&&this.props.onFocus())},100)}initializeQuill(){eb([...this.plugins],this.props,this.editorRoot),this.editorRoot.classList.add("bb-editor-container"),this.quill=new m.Z(this.editorRoot,{placeholder:!this.props.isReadOnly&&this.props.placeholder,readOnly:this.props.isDisabled||this.props.isReadOnly,modules:{...ew,...this.getPluginModulesConfig()}}),this.getPluginModules().forEach(e=>{"function"==typeof e.onInit&&e.onInit(this.props.localize.getLocalePropsForClone(),this.applyEditorChange)}),this.quill.notifyPluginsOfPropChanges=this.notifyPluginsOfPropChanges.bind(this),this.editorRoot.firstChild.classList.add(tu.Eq),this.setEditorSize(),this.editorContainer.shouldEnableDemoMashup=!!this.props.plugins.reduce((e,t)=>t.length?[...e,...t]:[...e,t],[]).find(e=>e&&"demoMashup"===e.pluginId),this.editorContainer.shouldEnableDemoMashup&&(0,e2.d)(),this.addAxLabels(),this.props.disablePasteFormat?this.quill.clipboard.addMatcher(eV.selector,eV.func):eH.forEach(e=>{this.quill.clipboard.addMatcher(e.selector,e.func)}),function(e,t){t.forEach(n=>{if(n.matchers){let t;n.matchers.forEach(r=>{t="function"==typeof n.deltaModifier?n.deltaModifier:(e,t)=>{let r;let i=n.formatter&&n.formatter.blotName,s=i||n.pluginId;return(["embed","embedInline"].includes(n.formatter.type)?r={insert:{[s]:(0,en.u9)(e,n.formatter.attributes)},attributes:(0,en.u9)(e,n.formatter.attributes)}:"inline"===n.formatter.type&&((r={insert:e.textContent,attributes:(0,en.u9)(e,n.formatter.attributes)}).attributes[s]=(0,en.u9)(e,n.formatter.attributes)),"link"===i&&e.textContent&&e.textContent.trim().length)?eB(t,r.attributes):new(f())([r])},e.clipboard.addMatcher(r,t)})}e.clipboard.addMatcher(Node.TEXT_NODE,ej(t))})}(this.quill,this.plugins),e9(this.editorRoot.classList,!this.props.isDisabled&&!this.props.isReadOnly),e4(this.editorRoot.classList,this.props.isDisabled),e6(this.editorRoot.classList,this.props.isReadOnly),tr(this.editorRoot.classList,!!this.props.errorMessage),this.onBbMLInputChange(this.props.bbml),this.notifyPluginsOfPropChanges(),this.quill.on(m.Z.events.EDITOR_CHANGE,this.onEditorChange),this.quill.history.clear()}updateQuillEnable(e=!1){e&&!this.quill.isEnabled()?this.quill.enable(!0):!e&&this.quill.isEnabled()&&this.quill.enable(!1)}updateQuillPlaceholder(e){"string"==typeof e&&this.quill.root.setAttribute("data-placeholder",e)}restoreQuillPlaceholder(){1===this.quill.getContents().ops.length&&"string"==typeof this.quill.getContents().ops[0].insert&&"\n"===this.quill.getContents().ops[0].insert&&this.quill.setText("")}unloadPlugins(){this.plugins.forEach(e=>{if("function"==typeof e.onUnload)try{e.onUnload()}catch(e){console.error(e)}}),(0,e0.u)(this.bbEditorId)}notifyPluginsOfPropChanges(){let e=Array.from(this.editorRoot.querySelectorAll(".wants-props-update"));e.forEach(e=>{e.formatComponent&&e.formatComponent(this.props)})}onEditorChange(e,t,n,r){e!==m.Z.events.SELECTION_CHANGE&&this.state.isApplyingChanges||e===m.Z.events.SELECTION_CHANGE&&"silent"===r||e===m.Z.events.TEXT_CHANGE&&"silent"===r||o().unstable_batchedUpdates(()=>{if(this.editorInitialContent||(this.editorInitialContent=this.quill.getContents().ops),e===m.Z.events.SELECTION_CHANGE&&"user"===r&&(clearTimeout(this.extendSelection),this.extendSelection=setTimeout(()=>{this.extendTableSelection()},400)),e!==m.Z.events.SELECTION_CHANGE||"user"!==r||this.state.isApplyingChanges||this.setState({editorLastContent:this.quill.getContents().ops}),e===m.Z.events.TEXT_CHANGE){let e=this.quill.getContents().ops;this.onBbMLOutputChange(e),this.setState({editorLastContent:e})}if(this.editorContainsElement(document.activeElement)&&!this.props.isDisabled&&!this.props.isReadOnly&&e&&!this.state.isApplyingChanges){let e=t&&t.ops&&t.ops[t.ops.length-1].insert,r="string"==typeof e&&e.includes("\n"),i=this.getEditorFormat(),s={};if(r){let e=Object.values(tu.I2);e.forEach(e=>{i[e]&&(s[e]=i[e])}),s.selection=new h.e(i.selection.index+1,0)}let o=this.getEditorHasTableSelected(),a=!1;if(o)this.storedStack||(this.storedStack=this.quill.history.stack,this.quill.history.clear()),a=this.isDifferentTableSelected(n);else if(this.storedStack){let e=this.quill.history.stack,t=this.getDeltaChangeLength(e);this.storedStack.undo.forEach(e=>{e.undo.ops.forEach(e=>{e.retain&&e.retain>t.lowestRetain&&(e.retain+=t.offset)})}),this.quill.history.stack=this.storedStack,this.storedStack=void 0}a?this.resetTableSubtoolbar():this.setState({editorHasTableSelected:o}),this.setState({editorFormat:i,editorLastFormat:s,editorLastSelection:i.selection,editorLastRawSelection:i.rawSelection,toolbarHasKeyboardFocus:this.keyDownHandler.inToolbarScope()}),this.getPluginModules().forEach(e=>{"function"==typeof e.onFormatChange&&e.onFormatChange(i)})}})}getEditorSelection(){return this.quill.getSelection()||this.state.editorLastSelection}getEditorFormat(){let e=this.getEditorSelection(),t=this.quill.getText(e),n=this.quill.getContents(e),r=this.quill.getFormat(e),i={};return Object.keys(this.state.editorLastFormat).length?((i=this.state.editorLastFormat).selection=e,i.rawSelection=e):(0===e.length?i=r:e.length>0&&(i=n.ops.reduce((e,t)=>({...eJ(e,t),...t.attributes,..."object"==typeof t.insert?t.insert:{}}),r)),(i=this.updateFormatWithBlotSelection(i,t,e)).rawSelection=e),i}updateFormatWithBlotSelection(e,t,n){let r=0;return Object.keys(e).forEach(t=>{let n=e[t].domNode;if(n){let t=m.Z.find(n);e.text=n.innerText,e.selection=new h.e(t.offset(this.quill.scroll),t.length()),r+=1}}),(1!==r||n.index<e.selection.index||n.index+n.length>e.selection.index+e.selection.length)&&(e.text=t,e.selection=n),e}selectEmbeddedBlot(e){let t;let n=eg.find(e,!0),r=n&&n.constructor&&Object.getPrototypeOf(n.constructor).blotName;"embed"===r?(this.quill.setSelection(n.offset(this.quill.scroll)-1,2,m.Z.sources.SILENT),this.onEditorChange(m.Z.events.SELECTION_CHANGE),(t=n.domNode.querySelector("span > div:first-child")||n.domNode).classList.add("ql-embed-selected","no-select")):"embedInline"===r&&(this.quill.setSelection(n.offset(this.quill.scroll),1,m.Z.sources.SILENT),this.onEditorChange(m.Z.events.SELECTION_CHANGE),(t=n.domNode).classList.add("ql-embed-selected","no-select")),this.unselectEmbeddedBlots(t)}unselectEmbeddedBlots(e){let t=Array.from(this.editorRoot.querySelectorAll(".ql-embed-selected"));t.length&&t.forEach(t=>{t!==e&&t.classList.remove("ql-embed-selected","no-select")})}makeEmbedsEasierToEditAfter(){var e;let t=this.quill.getContents().ops,n=t.length-1;(t[n]&&"object"==typeof t[n].insert||t[n]&&"string"==typeof t[n].insert&&"\n"!==t[n].insert.substr(-1,1)||t[n]&&"string"==typeof t[n].insert&&"\n"===t[n].insert&&(null===(e=t[n].attributes)||void 0===e?void 0:e.table))&&this.quill.insertText(this.quill.scroll.length,"\n",m.Z.events.SILENT)}applyEditorChange(e,t){this.setState({isApplyingChanges:!0},()=>{!function(e,t,n,r){let i=t.update?t.update.index:t.index,s=t.update?t.update.length:t.length;if(!e){n.setSelection(i,s,ef.sources.USER);return}let o=Array.isArray(e)?e:[e];if("object"==typeof t.raw&&o.length>0&&!t.update){let e=t.raw.index,r=t.raw.length,a=o.reduce((e,t)=>{let n=Object.keys("object"==typeof t.format?t.format:t);return n.forEach(t=>e[t]=!0),e},{}),l=Object.keys(n.getFormat(e,r)),u=l.length>0&&l.some(e=>e in a),d=o.length>0&&o.some(e=>!!e.insert),c=d&&!u&&0===r;c&&(i=e,s=r)}o.forEach(e=>{let t=!!e.insert,o=t&&s>0,a="string"==typeof e.insert?e.insert:"",l=a.length>0,u="object"==typeof e.format?e.format:{},d=Object.keys(u).length>0;if(o&&n.deleteText(i,s,ef.sources.SILENT),t&&l&&!d)n.insertText(i,a),i+=a.length,s=0,n.setSelection(i,s,ef.sources.USER);else if(d){let e=Object.keys(u).filter(e=>"object"!=typeof u[e]),o=Object.keys(u).filter(e=>"object"==typeof u[e]),d=o.length>0?o.shift():null,E=d&&u[d];if(t&&l){if(d){if(n.insertText(i,a,d,E,ef.sources.USER),"latex"===d){let e=n.getFormat(i,a.length),t=Object.keys(e).filter(e=>"latex"!==e).reduce((e,t)=>(e[t]=!1,e),{});n.formatText(i,a.length,t,ef.sources.SILENT)}}else n.insertText(i,a,ef.sources.USER);s=a.length,n.setSelection(i,s,ef.sources.USER)}else if(t&&!l&&(n.insertEmbed(i,d,E,ef.sources.USER),i+=1,s=0,n.setSelection(i,s,ef.sources.USER),d&&n.format(d,!1,ef.sources.USER),/firefox/i.test(navigator.userAgent)||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))){var c,p;c=n.container,p=()=>n.focus(),setTimeout(()=>{let e=document.createElement("input");e.style.width=0,e.style.height=0,e.style.opacity=0,e.setAttribute("aria-hidden","true"),e.tabIndex=-1,c.appendChild(e),e.focus(),e.remove(),p()},0)}e.length&&(s>0||!t)&&e.forEach(e=>{let t=u[e];n.format(e,t,ef.sources.USER)}),t&&l?(i+=a.length,s=0,n.setSelection(i,s,ef.sources.USER),d?n.insertText(i," ",d,!1,ef.sources.USER):n.insertText(i," ",ef.sources.USER),n.deleteText(i,1,ef.sources.USER),d&&(n.format(d,!1,ef.sources.USER),r(ef.events.TEXT_CHANGE))):r(ef.events.TEXT_CHANGE)}})}(e,{...this.state.editorLastSelection,raw:this.state.editorLastRawSelection,update:t},this.quill,this.onEditorChange),this.notifyPluginsOfPropChanges(),this.setState({isApplyingChanges:!1},()=>{this.onEditorChange(m.Z.events.TEXT_CHANGE)})})}applyChangeAndSetEditorFocused(e){this.applyEditorChange(e),this.onToolbarActionComplete(!0)}quillModuleAction(e){let t;if("quill.history"===e.module&&(t=this.quill.history,"undo"===e.action)){t.undo();return}if("quill.table"===e.module)switch(t=this.quill.getModule("table"),e.action){case"insert-table":e.rowCount&&e.columnCount&&(t.insertTable(e.rowCount,e.columnCount,e.headerRow,e.headerColumn),this.setState({editorHasTableSelected:this.getEditorHasTableSelected()}));break;case"edit-table":e.rowCount&&e.columnCount&&t.editTable(e.rowCount,e.columnCount);break;case"get-table-info":return t.getTableData(this.state.tableHasHeaderRow,this.state.tableHasHeaderColumn);case"insert-row-above":t.insertRowAbove();break;case"insert-row-below":t.insertRowBelow();break;case"insert-col-left":t.insertColumnLeft();break;case"insert-col-right":t.insertColumnRight();break;case"delete-table":t.deleteTable();break;case"delete-row":t.deleteRow();break;case"delete-column":t.deleteColumn();break;case"set-header-row":t.updateHeaderRow(e.setHeader);break;case"set-header-col":t.updateHeaderCol(e.setHeader);break;case"saved-selection":t.updateNullSelection();break;case"get-headers":return this.setState({editorHasTableSelected:this.getEditorHasTableSelected()}),t.getTableHeadersValue();case"reset-table-subtoolbar":this.resetTableSubtoolbar()}if("plugins"===e.module){let t=this.getPluginModules();"read-only-change"===e.action&&t.forEach(t=>{t.onReadOnlyChange&&(t.onReadOnlyChange(e.value,this.props.currentLocale),t.quill.blur())})}if(e.module||"clearFormat"!==e.action)return;let n=this.quill.getSelection();!(null==n?void 0:n.length)>0||(tu.$L.forEach(e=>{this.quill.formatText(n.index,n.length,e,!1)}),tu.ee.forEach(e=>{this.quill.format(e,!1)}))}onBbMLInputChange(e){"string"!=typeof e||(this.quill.clipboard.dangerouslyPasteHTML(e),this.quillModuleAction({module:"plugins",action:"read-only-change",value:this.props.isReadOnly}),this.makeEmbedsEasierToEditAfter(),""!==e||this.editorInitialContent||(this.editorInitialContent=this.quill.getContents().ops))}onBbMLOutputChange(e){let{editorLastContent:t}=this.state,{autoSaveCallback:n,autoSaveMilliseconds:r,onChange:i}=this.props,s=!(0,eK.vZ)(e,t);this.isBbmlDirty=!(0,eK.vZ)(e,this.editorInitialContent)&&("\n"!==e[0].insert||"\n"!==this.editorInitialContent[0].insert||e.length>1||this.editorInitialContent.length>1);let o=n&&"number"==typeof r;if((i||o)&&s){let t={toBbML:et.Z.toBbML.bind(null,e,this.props.isRtl),isDirty:this.isBbmlDirty,setPristine:e=>{this.setState({editorFormat:{text:"",selection:new h.e(0,0)}}),this.onBbMLInputChange(e),this.editorInitialContent=this.quill.getContents().ops,this.onEditorChange(m.Z.events.TEXT_CHANGE)}};i&&i(t),o&&(clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout(()=>{n(t)},r))}}setToolbarState(e){let t=e.getBoundingClientRect().width,n=function(e,t){let n=tK;switch(t){case tu.mt.default:n=e>=tu.ED?tZ:e>=tu.l$?tH:tK;break;case tu.mt.minimal:n=e>=tu.KU?tW:t$;break;default:n=tK}return n}(t,this.props.toolbarSet);n!==this.state.toolbar&&this.setState({toolbar:n})}updateToolbar(e){if(this.editorContainer){let t=this.editorContainer,n=t.getBoundingClientRect().width;n<=0&&window.requestAnimationFrame?this.requestAnimationFrameID=window.requestAnimationFrame(this.updateToolbar):e&&"resize"===e.type?(clearTimeout(this.debounceWindowResizeToolbar),this.debounceWindowResizeToolbar=setTimeout(()=>this.setToolbarState(t),100)):this.setToolbarState(t)}}getPluginButtons(){return this.plugins.filter(e=>e.buttonConfig).map(e=>e.buttonConfig).map(e=>(e.key=e.id,e))}getPluginModules(){return this.plugins.map(e=>this.quill.getModule(e.pluginId)).filter(e=>!!e)}getPluginModulesConfig(){return this.plugins.reduce((e,t)=>(t.module&&(e[t.pluginId]=t.moduleParams||!0),e),{})}getEditorRect(){return this.editorContainer?this.editorContainer.getBoundingClientRect():null}isFileDropEnabled(){return!this.props.isDisabled&&!this.props.isReadOnly&&this.fileDragDropUtil.hasDropHandlers()}isFileOnEvent(e){return void 0!==e.dataTransfer.files&&e.dataTransfer.files.length>0}onDragEnter(){this.isFileDropEnabled()&&(this.dragCount+=1,ts(this.editorRoot.classList,!0))}onDragLeave(){this.isFileDropEnabled()&&(this.dragCount-=1,0===this.dragCount&&ts(this.editorRoot.classList,!1))}onDrop(e){this.isFileDropEnabled()&&this.isFileOnEvent(e)&&(this.dragCount=0,ts(this.editorRoot.classList,!1),this.fileDragDropUtil.onFileDrop(e))}getWordCount(){if(!this.quill)return 0;let e=this.quill.getText().trim();return 0===e.length?0:e.split(/\s+/).length}getDeltaChangeLength(e){let t=0,n=Number.MAX_SAFE_INTEGER;return e.undo.forEach(e=>{e.undo.ops.forEach(e=>{var r,i,s;e.retain&&(n=Math.min(n,e.retain)),t+=null!==(r=e.delete)&&void 0!==r?r:0,t-=null!==(s=null===(i=e.insert)||void 0===i?void 0:i.length)&&void 0!==s?s:0})}),n===Number.MAX_SAFE_INTEGER&&(n=0),{lowestRetain:n,offset:t}}getEditorHasTableSelected(){let e=this.getEditorSelection(),t=this.quill.getFormat(e);return"table"in t}isDifferentTableSelected(e){if(e){let t=this.quill.getFormat(e);if("table"in t){let e=this.getEditorSelection(),n=this.quill.getFormat(e);return n.table!==t.table}}return!1}extendTableSelection(){var e,t;let n=document.getSelection();if("Range"!==n.type)return;let r=n.anchorNode;r.nodeType!==Node.ELEMENT_NODE&&(r=r.parentElement),r=null!==(e=r.closest("TD"))&&void 0!==e?e:r.closest("TH");let i=n.focusNode;if(i.nodeType!==Node.ELEMENT_NODE&&(i=i.parentElement),i=null!==(t=i.closest("TD"))&&void 0!==t?t:i.closest("TH"),!r&&!i)return;let s=n.anchorNode.compareDocumentPosition(n.focusNode)===Node.DOCUMENT_POSITION_FOLLOWING;if(r===i)return;let o=n.anchorNode,a=n.anchorOffset,l=n.focusNode,u=n.focusOffset;r&&(o=s?r.closest("TABLE"):r.closest("TABLE").nextSibling,a=0),i&&(l=s?i.closest("TABLE").nextSibling:i.closest("TABLE"),u=0),n.setBaseAndExtent(o,a,l,u)}resetTableSubtoolbar(){this.setState({editorHasTableSelected:!1,tableHasHeaderRow:void 0,tableHasHeaderColumn:void 0}),setTimeout(()=>this.setState({editorHasTableSelected:!0}))}setHeaders(e,t){this.setState({tableHasHeaderRow:e,tableHasHeaderColumn:t})}setEditorSize(){this.props.size&&-1!==tu.Qw.indexOf(this.props.size)&&this.editorRoot.firstChild.classList.add(`size-${this.props.size}`)}focusEditor(){var e,t;null===(t=null===(e=this.editorRoot)||void 0===e?void 0:e.querySelector(`.${tu.Eq}`))||void 0===t||t.focus()}render(){let{localize:e}=this.props,t=this.state.toolbar,n=this.getPluginButtons(),r=!this.props.isToolbarHidden&&!this.props.isReadOnly,s=r&&this.state.editorHasKeyboardFocus,o=(0,c.Z)({"keyboard-tooltip-container":!0,"no-toolbar":!r,"is-rtl":this.props.isRtl});return i().createElement("div",{ref:e=>{this.editorContainer=e},className:"bb-editor-root",role:"presentation",onKeyDown:this.onKeyDown,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onDragOver:this.fileDragDropUtil.onFileDragOver},r&&i().createElement(t,{isDisabled:this.props.isDisabled||this.props.isReadOnly,isRtl:this.props.isRtl,bbEditorId:this.bbEditorId,editorFormat:this.state.editorFormat,editorLastContent:this.state.editorLastContent,editorLastRawSelection:this.state.editorLastRawSelection,editorId:this.props.editorId,addKeyDownHandler:this.keyDownHandler.addKeyDownHandler,applyChange:this.applyEditorChange,quillModuleAction:this.quillModuleAction,toolbarActionComplete:this.onToolbarActionComplete,hasKeyboardFocus:this.state.toolbarHasKeyboardFocus,setEditorFocusStateToolbar:this.setEditorFocusStateToolbar,pluginButtons:n,getEditorRect:this.getEditorRect,editorHasTableSelected:this.state.editorHasTableSelected,setHeaders:this.setHeaders,tableHasHeaderRow:this.state.tableHasHeaderRow,tableHasHeaderColumn:this.state.tableHasHeaderColumn}),i().createElement("div",{className:o},s&&i().createElement("span",{role:"status","aria-live":"polite",className:"sr-only"},e.translate("bbmlEditor.editor.accessibilityAriaMessage")),s&&i().createElement("div",{className:"keyboard-tooltip"},e.translate("bbmlEditor.editor.accessibilityMessage")),i().createElement("div",{ref:e=>{this.editorRoot=e},role:"presentation"})),this.props.errorMessage&&i().createElement("span",{className:"error-message"},this.props.errorMessage),this.props.showWordCount&&!this.props.isReadOnly&&r&&i().createElement("span",{className:"word-count"},e.translate("bbmlEditor.editor.wordCount",{count:this.getWordCount()})))}}let t0=l().shape({buttonConfig:l().shape({id:l().string.isRequired,cssClass:l().string.isRequired,isActive:l().func.isRequired,onClick:l().func.isRequired}),formatter:l().shape({type:l().oneOf(["inline","embed","embedInline"]),tagName:l().string,attributes:l().shape(),renderDomNode:l().func}),matchers:l().arrayOf(l().string),onLoad:l().func,onUnload:l().func,pluginId:l().string,toBbML:l().func,toBbMLAsync:l().func});tJ.propTypes={ally:e5.H,ariaLabelledBy:l().string,ariaDescribedBy:l().string,ariaRequired:l().bool,autoSaveCallback:l().func,autoSaveMilliseconds:l().number,bbml:l().string,disablePasteFormat:l().bool,editorId:l().string,errorMessage:l().string,expandInlineFilesOnLoad:l().bool,isDisabled:l().bool,isReadOnly:l().bool,isRtl:l().bool,isToolbarHidden:l().bool,mediaQuery:l().bool,onChange:l().func,onBlur:l().func,onFocus:l().func,placeholder:l().string,plugins:l().arrayOf(l().oneOfType([t0,l().arrayOf(t0)])),size:l().oneOf(["small","medium"]),showWordCount:l().bool,toolbarSet:l().oneOf(["default","minimal"])},tJ.defaultProps={ally:e5.C,ariaLabelledBy:null,ariaDescribedBy:null,ariaRequired:!1,autoSaveCallback:null,autoSaveMilliseconds:null,bbml:null,disablePasteFormat:!1,editorId:"bb-editor-textbox",errorMessage:null,isDisabled:!1,isReadOnly:!1,isRtl:!1,isToolbarHidden:!1,mediaQuery:!1,onChange:null,onFocus:null,onBlur:null,placeholder:null,plugins:[],size:null,showWordCount:!1,toolbarSet:"default",expandInlineFilesOnLoad:!1};var t1=(0,p.h)((0,E.u3)({query(e){return e.breakpoints.down("sm")}})(tJ))},633739:function(e,t,n){"use strict";function r(e,t,n){let r=e;return Object.keys(t).forEach(e=>{var i;let s=n[e.replace("data-","")],o=t[e];i=r,(s||o)&&i.setAttribute(e,s||o),r=i}),r}function i(e,t,n){return Object.keys(t).forEach(r=>{let i=n[r.replace("data-","")],s=t[r];i||s?e.setAttribute(r,i||s):void 0!==i&&("close"===r||"open"===r)&&e.setAttribute(r,i)}),e}function s(e,t,n=!1){let r=n?{domNode:e}:{};return Object.keys(t).reduce((t,n)=>{if(e.hasAttribute(n)){let r=e.getAttribute(n);"string"==typeof r&&r.slice(0,3)===encodeURIComponent("{")&&(r=decodeURIComponent(r)),t[n.replace("data-","")]=r}return t},r)}n.d(t,{KT:function(){return r},u9:function(){return s},vh:function(){return i}})},932576:function(e,t,n){"use strict";n.d(t,{gg:function(){return o},jm:function(){return i},w3:function(){return s},x2:function(){return a},xM:function(){return r.HE}});var r=n(5044);let i="left",s="center",o="right",a="justify";r.HE.whitelist=[i,s,o,a],r.HE.createChange=(e=i)=>({format:{align:e}}),t.ZP=r.HE},271154:function(e,t,n){"use strict";var r=n(374556);r.Z.createChange=(e=!0)=>({format:{bold:e}}),t.Z=r.Z},814816:function(e,t,n){"use strict";var r=n(828516);r.Z.createChange=(e=!0)=>({format:{"code-block":e}}),t.Z=r.Z},902813:function(e,t,n){"use strict";var r=n(789841),i=n(462966);r.HQ.createChange=(e=i.O9.Black)=>({format:{color:e}}),t.Z=r.HQ},262348:function(e,t,n){"use strict";n.d(t,{D:function(){return l},d:function(){return o}});var r=n(178463),i=n(268973),s=n.n(i);let o=new(s()).Attributor.Style("bullet-size","font-size",{scope:s().Scope.BLOCK});function a(e){let t=parseFloat(e.match(/[+-]?\d+(\.\d+)?/g)),n=`${(.6715*t+.7315).toFixed(3)}rem`;return n}class l extends r.H{optimize(e){var t,n;if(super.optimize(e),this.children.length>0){let e=this.children.head,r=e.attributes;if(r&&r.attributes.size){let t=r.attributes.size.value(e.domNode),n=a(t);super.format("bullet-size",t),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",n);return}if(null===(n=null===(t=this.children.head.domNode)||void 0===t?void 0:t.style)||void 0===n?void 0:n.fontSize){let e=this.children.head.domNode.style.fontSize,t=a(e);super.format("bullet-size",e),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",t)}}else Object.prototype.hasOwnProperty.call(this.attributes,"bullet-size")&&super.format("bullet-size",null)}remove(){super.format("bullet-size",null),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",null),super.remove()}}},13417:function(e,t,n){"use strict";n.d(t,{Nm:function(){return r.IF},TM:function(){return o},hn:function(){return s}});var r=n(791174),i=n(932576);let s="rtl",o="ltr";r.IF.whitelist=[o,s],r.IF.createChange=(e=o)=>({format:{direction:e,align:"rtl"===e?i.gg:i.jm}}),t.ZP=r.IF},942548:function(e,t,n){"use strict";n.d(t,{KZ:function(){return l},MW:function(){return i},Ol:function(){return o},VT:function(){return d},Zx:function(){return r.H},eL:function(){return s},gt:function(){return u},z2:function(){return a}});var r=n(499713);let i="Arial",s="Comic Sans MS",o="Courier New",a="Noto",l="Open Sans",u="Times New Roman",d="Verdana";r.H.whitelist=[i,s,o,a,l,u,d];let c=r.H.value;r.H.value=function(e){if(e.style)return c.call(r.H,e);if(e.getAttribute("style")){let t=e.getAttribute("style"),n=/font-family:([^;]+);?/g.exec(t);if(n&&n[1])return n[1].trim()}return""},r.H.createChange=(e=l)=>({format:{font:e}}),t.ZP=r.H},898008:function(e,t,n){"use strict";var r=n(663642);r.Z.createChange=(e=4)=>({format:{header:e}}),t.Z=r.Z},150465:function(e,t,n){"use strict";var r=n(738282);r.Z.createChange=(e=!0)=>({format:{italic:e}}),t.Z=r.Z},383568:function(e,t,n){"use strict";n.d(t,{ee:function(){return s},g:function(){return i},j4:function(){return o},kG:function(){return u},uD:function(){return a}});var r=n(545178);let i="1",s="1.15",o="1.5",a="2",l=r.Z.import("parchment"),u=new l.Attributor.Style("lineheight","line-height",{scope:l.Scope.BLOCK,whitelist:[i,s,o,a]});u.createChange=e=>({format:{lineheight:e}}),t.ZP=u},330217:function(e,t,n){"use strict";n.d(t,{DF:function(){return i.D},aV:function(){return r.Z}});var r=n(178463),i=n(262348);let s={ORDERED:"ordered",UNORDERED:"bullet"};r.Z.createChange=(e=!0)=>{let t=e?s.UNORDERED:s.ORDERED;return{format:{list:t}}},t.ZP=r.Z},611997:function(e,t,n){"use strict";n.d(t,{$u:function(){return r.Z},B3:function(){return d},SC:function(){return o},SG:function(){return u},X4:function(){return i},Yf:function(){return l},gJ:function(){return a},r_:function(){return s}});var r=n(702834);let i="0.625rem",s="0.75rem",o="0.875rem",a="1.125rem",l="1.5rem",u="2.25rem",d="3rem";r.Z.whitelist=[i,s,o,a,l,u,d,"0.714em","0.857em","1em","1.286em","1.714em","2.571em","3.429em"],r.Z.createChange=(e=o)=>({format:{size:e}}),t.ZP=r.Z},470276:function(e,t,n){"use strict";var r=n(184285);r.Z.createChange=(e=!0)=>({format:{strike:e}}),t.Z=r.Z},449806:function(e,t,n){"use strict";var r=n(212401);class i extends r.Z{static create(){return document.createElement(i.tagName)}static formats(){return i.tagName}}i.createChange=(e=!0)=>({format:{superscript:!1,subscript:e}}),i.blotName="subscript",i.tagName="sub",t.Z=i},577099:function(e,t,n){"use strict";var r=n(212401);class i extends r.Z{static create(){return document.createElement(i.tagName)}static formats(){return i.tagName}}i.createChange=(e=!0)=>({format:{subscript:!1,superscript:e}}),i.blotName="superscript",i.tagName="sup",t.Z=i},884089:function(e,t,n){"use strict";n.d(t,{RM:function(){return m},SC:function(){return E},ie:function(){return d},pj:function(){return c},ss:function(){return p},xJ:function(){return h},z5:function(){return g}});var r=n(254199),i=n(436073),s=n(987814),o=n(42711),a=n(212401),l=n(555331);let u=i.ZP.import("parchment");class d extends l.ZP{static create(e=g()){let t=super.create(this.tagName);return t.setAttribute("table_id",e),t}formats(){return{tablebr:this.domNode.getAttribute("table_id")}}}d.blotName="tablebr",d.tagName="p",d.className="tablebr";class c extends r.Z{static create(e=g()){let t=super.create(this.tagName);return t.setAttribute("cell_id",e),t}static formats(e){if(e.hasAttribute("cell_id"))return e.getAttribute("cell_id")}formats(){return{...this.domNode.hasAttribute("cell_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("cell_id")}:{}}}getIndexAndOffset(){return this.parent?f(this,this.parent.children):-1}format(e,t){e===this.blotName&&t?this.domNode.setAttribute("cell_id",t):super.format(e,t)}formatAt(e,t,n,r){(n!==this.domNode.nodeName||r!==this.formats(this.domNode))&&super.formatAt(e,t,n,r)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}c.blotName="table-cell",c.tagName="td";class p extends c{}p.blotName="table-head",p.tagName="th";class E extends r.Z{static create(e=g()){let t=super.create(this.tagName);return t.setAttribute("row_id",e),t}formats(){return{...this.domNode.hasAttribute("row_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("row_id")}:{}}}formatAt(e,t,n,r){(n!==this.blotName||r!==this.domNode.getAttribute("row_id"))&&super.formatAt(e,t,n,r)}rowOffset(){return this.parent?f(this,this.parent.children):-1}table(){return this.parent&&this.parent.parent}}E.blotName="table-row",E.tagName="tr";class m extends r.Z{}m.blotName="table-body",m.tagName="TBODY";class h extends r.Z{static create(e){let t=super.create(this.tagName);return t.setAttribute("table_id",e),t}formats(){return{...this.domNode.hasAttribute("table_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("table_id")}:{}}}formatAt(e,t,n,r){(n!==this.blotName||r!==this.domNode.getAttribute("table_id"))&&super.formatAt(e,t,n,r)}balanceRows(){let e=this.descendants(E);if(!this.checkRowsMerge(e))return;let t={};e.forEach(e=>{let n=e.domNode.getAttribute("row_id");if(!n)return;let r=!t[n];r&&(t[n]={row:e,columns:{}});let i=t[n].columns;e.children.forEach(e=>{let r=e.domNode.getAttribute("cell_id"),s=!i[r];if(s){let s=this.createCell(e.statics.blotName,e.domNode.getAttribute("cell_id"),!1);i[r]={rowCell:s},t[n].row.appendChild(s)}let o=i[r].rowCell;e.children.forEach(e=>{"header"===e.statics.blotName?o.appendChild(e):o.children.head.appendChild(e)}),e.remove()}),r||e.remove()})}checkRowsMerge(e=this.descendants(E)){let t=[];if(e.length<=1)return!0;for(let n=0;n<e.length;n++){let r=e[n].domNode.getAttribute("row_id");if(t.includes(r))return!0;t.push(r)}return!1}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){if(null==this.children.head||e<0)return;let t=this.children.head;for(;null!==t;){let n=y(t,e);null!=n&&n.remove(),t=t.next}}createCell(e="td",t=g(),n=!0){let r=u.create(e,t),i=u.create("block");return n&&i.appendChild(u.create("text","\n")),r.appendChild(i),r}insertColumn(e,t){let n=0===e&&0===t&&this.hasHeaderCol(),r=n?p.blotName:c.blotName;n&&this.updateHeaderCol(!1),this.children.forEach(n=>{let i=this.createCell(r);I(i,e,t,n)}),this.hasHeaderRow()&&this.checkHeaderRowConsistency()}insertRow(e,t){let n=u.create(E.blotName,g("row")),r=0===e&&0===t&&this.hasHeaderRow(),i=r?p.blotName:c.blotName,s=this.children.head.children.length;for(;s>0;){let e=this.createCell(i);n.appendChild(e),s-=1}r&&this.updateHeaderRow(!1),I(n,e,t,this),this.hasHeaderCol()&&this.checkHeaderColConsistency()}rows(){let e=this.children.head;return null==e?[]:e.children.map(e=>e)}updateHeaderRow(e=!0){let t=this.children.head,n=t.children.head;for(;null!==n;){let t=n.replaceWith(e?p.blotName:c.blotName,n.domNode.getAttribute("cell_id"));t.scroll&&t.formatAt(0,t.scroll.length(),e?p.tagName:c.tagName,n.domNode.getAttribute("cell_id")),n=t.next}this.checkHeaderIntersection()}updateHeaderCol(e=!0){let t=this.children.head;for(;null!==t;){let n=t.children.head,r=n.replaceWith(e?p.blotName:c.blotName,n.domNode.getAttribute("cell_id"));r.scroll&&r.formatAt(0,r.scroll.length(),e?p.tagName:c.tagName,n.domNode.getAttribute("cell_id")),t=t.next}this.checkHeaderIntersection()}hasHeaderRow(){var e;return this.children.head.children&&(this.children.head.children.tail.statics.blotName===p.blotName||(null===(e=this.children.head.children.head.next)||void 0===e?void 0:e.statics.blotName)===p.blotName)}hasHeaderCol(){var e;return this.children.tail.children&&(this.children.tail.children.head.statics.blotName===p.blotName||(null===(e=this.children.head.next)||void 0===e?void 0:e.children.head.statics.blotName)===p.blotName)}checkHeaderIntersection(){if(this.hasHeaderRow()||this.hasHeaderCol()){let e=this.children.head,t=e.children.head;t.statics.blotName!==p.blotName&&t.replaceWith(p.blotName,t.domNode.getAttribute("cell_id"))}}checkHeaderRowConsistency(){let e=this.children.head,t=e.children.head;for(;null!==t;)t.statics.blotName!==p.blotName&&t.replaceWith(p.blotName,t.domNode.getAttribute("cell_id")),t=t.next}checkHeaderColConsistency(){let e=this.children.head;for(;null!==e;){let t=e.children.head;t.statics.blotName!==p.blotName&&t.replaceWith(p.blotName,t.domNode.getAttribute("cell_id")),e=e.next}}getLastCell(){if(this.children&&this.children.head.children)return this.children.tail.children.tail}}h.blotName="table-container",h.tagName="table";let b=[...r.Z.allowedChildren,o.Z,a.Z,s.Z];function g(e="cell"){let t=Math.random().toString(36).slice(2,6);return`${e}-${t}`}function f(e,t){let n=0,r=t.head;for(;r!==e&&null!==r;)r=r.next,n+=1;return[n,r.offset(t)]}function I(e,t,n,r){if(r.children&&t+n>r.children.length-1)r.appendChild(e);else{let i=y(r,t+n);r.insertBefore(e,i)}}function y(e,t){let n=0,r=e.children.head;for(;n<e.children.length&&null!=r;){if(n===t)return r;r=r.next,n+=1}return null}h.allowedChildren=[m,E,...b],h.scope=u.Scope.BLOCK_BLOT,m.allowedChildren=[E,...b],m.requiredContainer=h,m.scope=u.Scope.BLOCK_BLOT,E.allowedChildren=[c,p,...b],E.requiredContainer=m,E.scope=u.Scope.BLOCK_BLOT,c.allowedChildren=[...b],c.requiredContainer=E,c.scope=u.Scope.BLOCK_BLOT,p.allowedChildren=[...b],p.requiredContainer=E,p.scope=u.Scope.BLOCK_BLOT},204445:function(e,t,n){"use strict";var r=n(89526);r.Z.createChange=(e=!0)=>({format:{underline:e}}),t.Z=r.Z},961406:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(202784),i=n.n(r),s=n(410628),o=n(213980),a=n.n(o),l=n(438501),u=n(398435),d=n(158550);function c(e){let{onChange:t,onEnterKey:n,type:o,value:a,minValue:d,maxValue:c}=e,p=(0,s.q)(),[E,m]=(0,r.useState)(a),h=e=>!(e>c)&&!(e<d),b=()=>{let e=E+1;h(e)&&(m(e),t(e))},g=()=>{let e=E-1;h(e)&&(m(e),t(e))};return i().createElement("span",{className:"table-dialog-input-spinner"},i().createElement(u.AnalyticsIconButton,{"aria-label":p("column"===o?"bbmlEditor.toolbar.table-dialog-columns-spinner-minus-button.label":"bbmlEditor.toolbar.table-dialog-rows-spinner-minus-button.label"),onClick:g},i().createElement(l.Minus,null)),i().createElement(u.AnalyticsTextField,{id:`analyticTextField-${o}`,className:"table-dialog-input-spinner-text-field",placeholder:String(E),value:E,onChange:e=>{let n=Number(e.target.value);if(!Number.isNaN(n)){if(h(n))m(n),t(n);else if(n>c){let e=c.toString().length,r=Number(n.toString().substr(0,e-1));e<n.toString().length&&(r=c),m(r),t(r)}}},onKeyDown:e=>{switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation(),n();break;case"ArrowUp":b();break;case"ArrowDown":g()}}}),i().createElement(u.AnalyticsIconButton,{"aria-label":p("column"===o?"bbmlEditor.toolbar.table-dialog-columns-spinner-add-button.label":"bbmlEditor.toolbar.table-dialog-rows-spinner-add-button.label"),onClick:b},i().createElement(l.Add,null)))}c.propTypes={onChange:a().func,onEnterKey:a().func,type:a().string,value:a().number,minValue:a().number,maxValue:a().number},c.defaultProps={onChange:null,onEnterKey:null,type:"",value:1,minValue:1,maxValue:10};var p=(0,d.withAnalytics)(c);function E(e){let t="table-dialog",{isEditingTable:n,quillModuleAction:o,editProps:a,closeAllMenus:d}=e,c=(0,s.q)(),[E,m]=(0,r.useState)({checkboxColumn:a.headerColumn,checkboxRow:a.headerRow,numberColumns:a.columns,numberRows:a.rows}),h=()=>{d(),e.destroy()},b=()=>{o({module:"quill.table",action:"saved-selection"}),n?(o({module:"quill.table",action:"edit-table",rowCount:E.numberRows,columnCount:E.numberColumns}),e.editProps.headerColumn===E.checkboxColumn||(o({module:"quill.table",action:"set-header-col",setHeader:E.checkboxColumn}),E.checkboxRow||o({module:"quill.table",action:"set-header-column",setHeader:E.checkboxColumn})),e.editProps.headerRow===E.checkboxRow||(o({module:"quill.table",action:"set-header-row",setHeader:E.checkboxRow}),E.checkboxColumn||o({module:"quill.table",action:"set-header-row",setHeader:E.checkboxRow})),o({module:"quill.table",action:"reset-table-subtoolbar"})):(o({module:"quill.table",action:"insert-table",rowCount:E.numberRows,columnCount:E.numberColumns,headerRow:E.checkboxRow,headerColumn:E.checkboxColumn}),d()),h()},g=e=>{m({...E,checkboxColumn:e.target.checked})},f=e=>{m({...E,checkboxRow:e.target.checked})};return i().createElement(u.AnalyticsDialog,{open:!0,maxWidth:"sm",onClose:h,"aria-labelledby":`${t}-dialog-title`},i().createElement(u.AnalyticsDialogTitle,{onClose:h,id:`${t}-dialog-title`},c(n?"bbmlEditor.toolbar.table-dialog-title-edit.label":"bbmlEditor.toolbar.table-dialog-title-insert.label")),i().createElement(u.AnalyticsDialogContent,null,i().createElement("label",{htmlFor:"analyticTextField-column",className:`${t}-columns-content`},i().createElement("span",null,c("bbmlEditor.toolbar.table-dialog-columns.label")),i().createElement(p,{onChange:e=>{m({...E,numberColumns:e})},type:"column",value:E.numberColumns,maxValue:n?Math.max(10,a.columns):10,onEnterKey:b})),i().createElement("label",{htmlFor:"analyticTextField-row",className:`${t}-rows-content`},c("bbmlEditor.toolbar.table-dialog-rows.label"),i().createElement(p,{onChange:e=>{m({...E,numberRows:e})},type:"row",value:E.numberRows,maxValue:n?Math.max(10,a.rows):10,onEnterKey:b})),i().createElement("span",{className:`${t}-header-selector`},i().createElement(u.AnalyticsFormControlLabel,{label:c("bbmlEditor.toolbar.table-dialog-headers-row.label"),control:i().createElement(u.AnalyticsCheckbox,{checked:E.checkboxRow,id:"dialogCheckboxRow"}),htmlFor:"dialogCheckboxRow",onChange:e=>{f(e)}}),i().createElement(u.AnalyticsFormControlLabel,{label:c("bbmlEditor.toolbar.table-dialog-headers-column.label"),control:i().createElement(u.AnalyticsCheckbox,{checked:E.checkboxColumn,id:"dialogCheckboxColumn"}),htmlFor:"dialogCheckboxColumn",onChange:e=>{g(e)}}),i().createElement(u.AnalyticsTooltip,{className:"info-tooltip",title:c("bbmlEditor.toolbar.table-dialog-tooltip.label"),placement:"top"},i().createElement(u.AnalyticsIconButton,{className:"info-tooltip","aria-label":c("bbmlEditor.toolbar.table-dialog-tooltip.axAriaText")},i().createElement(l.Information,null))))),i().createElement(u.AnalyticsDialogActions,null,i().createElement(u.AnalyticsDefaultButton,{onClick:h},c("bbmlEditor.buttons.cancel")),i().createElement(u.AnalyticsPrimaryButton,{onClick:b,id:"create-edit-table-primary-btn"},c(n?"bbmlEditor.buttons.save":"bbmlEditor.buttons.insert"))))}E.propTypes={quillModuleAction:a().func.isRequired,closeAllMenus:a().func.isRequired,isEditingTable:a().bool,editProps:a().shape({columns:a().number,rows:a().number,headerColumn:a().bool,headerRow:a().bool})},E.defaultProps={isEditingTable:!1,editProps:{columns:1,rows:1,headerColumn:!1,headerRow:!1}};var m=(0,d.withAnalytics)(E)},462966:function(e,t,n){"use strict";n.d(t,{O9:function(){return d}});var r=n(202784),i=n.n(r),s=n(217628),o=n(398435),a=n(158550),l=n(213980),u=n.n(l);let d={Black:"#000000",Grey:"#666666",Purple:"#a234b5",Blue:"#046ef6",Green:"#1c8845",Red:"#e72218"};class c extends i().Component{render(){let{editorFormat:e,color:t,cssClass:n}=this.props;return i().createElement(o.AnalyticsListItemIcon,{classes:{root:`picker-color ${n}`}},(t===d.Black&&!e.color||e.color===t)&&i().createElement(s.f,null))}}c.propTypes={editorFormat:u().shape(),color:u().string,cssClass:u().string},c.defaultProps={editorFormat:{},color:null,cssClass:null},t.ZP=(0,a.withAnalytics)(c)},12434:function(e,t,n){"use strict";n.d(t,{u:function(){return u}});var r=n(398435),i=n(174897),s=n(202784),o=n.n(s),a=n(928316),l=n.n(a);function u(e){let t=document.querySelector(`#${e}`);null!=t&&(l().unmountComponentAtNode(t),t.remove())}t.Z=(e,t,n)=>{setTimeout(()=>{let s="bb-editor-modal";if(document.querySelector(`div.${s}`))return;let a=document.createElement("div");a.classList.add(s),t.bbEditorId&&(a.id=t.bbEditorId),document.body.appendChild(a),l().render(o().createElement(r.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:n.isRtl,zIndex:{modal:1350}},o().createElement(i.g,{...n},o().createElement(e,{destroy:()=>{l().unmountComponentAtNode(a),a.remove(),t.applyChange&&t.applyChange()},...t}))),a)},250)}},729941:function(e,t,n){"use strict";function r(e){e.stopImmediatePropagation(),e.stopPropagation()}function i(e){return e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),!1}n.d(t,{Z:function(){return r},p:function(){return i}})},378780:function(e,t,n){"use strict";n.d(t,{A:function(){return s},w:function(){return i}});var r=n(884089);function i(e){return!!e&&function(e){var t,n,i,s;let o=e instanceof HTMLElement?e:null==e?void 0:e.domNode;return(null===(t=null==o?void 0:o.tagName)||void 0===t?void 0:t.toLowerCase())===(null===(n=r.pj.tagName)||void 0===n?void 0:n.toLowerCase())||(null===(i=null==o?void 0:o.tagName)||void 0===i?void 0:i.toLowerCase())===(null===(s=r.ss.tagName)||void 0===s?void 0:s.toLowerCase())}(e)&&function(e){var t,n,i;let s=e instanceof HTMLElement?e.parentElement:null===(t=null==e?void 0:e.parent)||void 0===t?void 0:t.domNode;return(null===(n=null==s?void 0:s.tagName)||void 0===n?void 0:n.toLowerCase())===(null===(i=r.SC.tagName)||void 0===i?void 0:i.toLowerCase())}(e)&&function(e){var t,n,i,s,o;let a=e instanceof HTMLElement?null===(t=e.parentElement)||void 0===t?void 0:t.parentElement:null===(i=null===(n=null==e?void 0:e.parent)||void 0===n?void 0:n.parent)||void 0===i?void 0:i.domNode;return(null===(s=null==a?void 0:a.tagName)||void 0===s?void 0:s.toLowerCase())===(null===(o=r.xJ.tagName)||void 0===o?void 0:o.toLowerCase())}(e)}function s(e){var t,n;let r={"code-block":!0};if(i(e)){let i=null==e?void 0:e.domNode,s=null===(t=e.parent)||void 0===t?void 0:t.domNode,o=null===(n=e.parent.parent)||void 0===n?void 0:n.domNode;r[i.tagName.toLowerCase()]=null==i?void 0:i.getAttribute("cell_id"),r[s.tagName.toLowerCase()]=null==s?void 0:s.getAttribute("row_id"),r[o.tagName.toLowerCase()]=null==o?void 0:o.getAttribute("table_id")}return r}},825501:function(e,t,n){"use strict";n.d(t,{Eq:function(){return g},Qw:function(){return f},ee:function(){return u},M$:function(){return r},HC:function(){return i},xB:function(){return h},N6:function(){return s},aW:function(){return o},I2:function(){return a},$L:function(){return l},ED:function(){return p},EK:function(){return b.Z},l$:function(){return E},KU:function(){return m},mZ:function(){return d},mt:function(){return c}});let r={id:"editAttachment",type:"attachment"},i={id:"editYoutubeVideo",type:"embedded-app"},s=[r,i];var o={maxFileMB:2500,maxFileSize:262144e4};let a={Bold:"bold",Italic:"italic",Underline:"underline",Superscript:"superscript",Strike:"strike",Subscript:"subscript",List:"list"},l=["font","bold","italic","size","color","strike","underline","superscript","subscript"],u=["header","list","align","lineheight","direction"],d={small:"small",medium:"medium",large:"large"},c={default:"default",minimal:"minimal"},p=676,E=554,m=268;var h={BLURRED:"blurred",FOCUSED:"focused",TOOLBAR:"toolbar"},b=n(219121);n(656890);let g="bb-editor",f=["small","medium"]},656890:function(e,t){"use strict";t.Z={outgoing:{initContent:"init_content"},incoming:{pageLoaded:"page_loaded",canceled:"content_canceled",contentReady:"content_ready"}}},291683:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var r=n(396375),i=n(725390),s=n(951248),o=n(134641);let a="contentCollection",l=e=>[{pluginId:a,buttonConfig:{id:a,cssClass:a,iconName:"content-collection",iconComponent:o.C,isDialog:!0,isActive:()=>!1,onClick:t=>{e.getOpenContentCollectionFunction(n=>{!function(e,t,n){let o=e.map(e=>{let t=decodeURIComponent(e.name),n=e.fullUrl;return{href:n,bbfile:{alternativeText:t,linkName:t,mimeType:e.type,render:s.I_d.Inline,fileSize:"number"==typeof e.size?e.size:parseInt(e.size,10)},originalFile:e}}),a=[];o.length>1?(o.forEach(({href:e,bbfile:t})=>{a=a.concat((0,i.Z)(e,t,!0))}),n.applyChange(a)):(0,r.zU)(o[0].bbfile,n.showModal,t,n,o[0].href)}(n,e,t)})}}}]},245111:function(e,t){"use strict";t.Z=e=>`<html>
<head>
    <title>Demo Mashup</title>
    <script>

    function getParentOrigin() {
        const parentOrigin = '${e}';
        return parentOrigin;

        // Actual external demos should use the referrer
        // However in a sourceDoc-generated mashup the referrer is empty
        // const url = new URL(document.referrer);
        // return url.origin;
    }
        window.addEventListener('message', receiveMessage);
        window.onload = () => {
            window.URL.revokeObjectURL(window.location.href);
            window.parent.postMessage({ messageType: 'page_loaded' }, getParentOrigin());
        }
        window.onunload = () => {
            window.removeEventListener('message', receiveMessage);
        }
        const MESSAGE_LINK = {
            dataType: 'link',
            dataContent: {
                src: 'www.blackboard.com',
                alt: 'Test Link',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_IMAGE = {
            dataType: 'image',
            dataContent: {
                src: '',
                alt: 'Test Image',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_VIDEO = {
            dataType: 'video',
            dataContent: {
                src: 'https://www.w3schools.com/tags/movie.mp4',
                alt: 'Test Video',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_AUDIO = {
            dataType: 'audio',
            dataContent: {
                src: 'https://www.w3schools.com/TAGS/horse.mp3',
                alt: 'Test Audio',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_IFRAME = {
            dataType: 'embedded-app',
            dataContent: {
                src: '',
                alt: 'Test IFrame',
                embeddedAppConfig: {
                    id: 'demoMashup',
                    isEditable: undefined,
                },
            },
            messageType: 'content_ready',
        };

        const ROBO_HASH_URL = "https://robohash.org/";

        function receiveMessage(event) {
            if (event.data.messageType != 'init_content' || event.origin !== getParentOrigin()) {
                return;
            }

            const { dataToDisplay } = event.data;
            const mode = dataToDisplay ? dataToDisplay.mode : 'create';
            document.querySelector('#' + mode + '-container').classList.toggle('hide-container');
            if (mode === 'view') {
                let text = 'Robohash for ' +  dataToDisplay.content.dataContent.src.split('/')[3];
                document.querySelector('#view-container h4').innerText = text;
                document.querySelector('#view-container img').src = dataToDisplay.content.dataContent.src;
            }
            if (mode === 'edit') {
                document.querySelector('#edit-container input').value = dataToDisplay.content.dataContent.src.split('/')[3];
                document.querySelector('#edit-container button').onclick = () => {
                    const message = getEmbeddedAppMessage(true);
                    message.dataContent.src = ROBO_HASH_URL + document.querySelector('#edit-container input').value;
                    window.parent.postMessage(message, getParentOrigin());
                };
            }
        }

        function getRandomString(length) {
            var text = "";
            var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

            for (var i = 0; i < length; i++)
                text += possible.charAt(Math.floor(Math.random() * possible.length));

            return text;
        }

        function getRandomRoboHashURL() {
            return ROBO_HASH_URL + getRandomString(6);
        }

        function getEmbeddedAppMessage(isEditable) {
            let newMessage = MESSAGE_IFRAME;
            newMessage.dataContent.src = getRandomRoboHashURL();
            newMessage.dataContent.embeddedAppConfig.isEditable = isEditable;
            return newMessage;
        }

        function getImageMessage() {
            let newMessage = MESSAGE_IMAGE;
            newMessage.dataContent.src = getRandomRoboHashURL() + ".png";
            return newMessage;
        }

        function sendMessage(mashupType) {
            switch (mashupType) {
                case 'link':
                    window.parent.postMessage(MESSAGE_LINK, getParentOrigin());
                    break;
                case 'image':
                    window.parent.postMessage(getImageMessage(), getParentOrigin());
                    break;
                case 'video':
                    window.parent.postMessage(MESSAGE_VIDEO, getParentOrigin());
                    break;
                case 'audio':
                    window.parent.postMessage(MESSAGE_AUDIO, getParentOrigin());
                    break;
                case 'edit-embedded-app':
                    window.parent.postMessage(getEmbeddedAppMessage(true), getParentOrigin());
                    break;
                case 'nonedit-embedded-app':
                    window.parent.postMessage(getEmbeddedAppMessage(false), getParentOrigin());
                    break;
                default:
                    break;
            }
        }
    </script>
</head>
<style>
    .hide-container {
        display: none;
    }
</style>

<body>
    <div id="create-container" class="hide-container">
        <h3>This is a sample app to demonstrate posting messages from this content provider iFrame to the parent window (ie.
            Blackboard Learn/Ultra).</h3>
        <br />
        <h4>Click an anchor tag to post the respective message</h4>
        <br />
        <ul>
            <li>
                <a href="" onClick="sendMessage('link')">link</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('image')">image</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('video')">video</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('audio')">audio</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('edit-embedded-app')">editable embedded-app</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('nonedit-embedded-app')">non-editable embedded-app</a>
            </li>
        </ul>
    </div>
    <div id="view-container" class="hide-container">
    <h4></h4>
    <img></img>
    </div>
    <div id="edit-container" class="hide-container">
    <h4>Change Robohash Text</h4>
    <input/>
    <button type="submit">Save</button>
    </div>
</body>
</html>
`},725390:function(e,t,n){"use strict";function r(e,t,n){let r=[{insert:!0,format:{attachment:{bbtype:"attachment",bbfile:JSON.stringify(t),href:e}}}];return r.unshift({insert:"\n"}),n||r.push({insert:"\n"}),r}n.d(t,{Z:function(){return r}})},802832:function(e,t,n){"use strict";n.d(t,{ZP:function(){return L}});var r=n(202784),i=n.n(r),s=n(213980),o=n(236351),a=n(951248),l=n(555342),u=n(438501),d=n(564470),c=n(198022),p=n(352909);class E extends r.Component{constructor(e){super(e),this.state={isAllyAvailable:!1,contentId:"",xythosId:"",isMediaVisible:!1}}componentDidMount(){let{ally:e,fileViewerProps:t,rootContentId:n}=this.props;if(e&&e.service){let r=e.service;r.isAvailable().then(e=>{e&&this.setState({isAllyAvailable:e,contentId:(0,c.v1)(),xythosId:r.getXythosIdFromContentFileUrl(t.file.resourceUrl)},()=>{r.update(n,this.state.xythosId)})})}}render(){let{ally:e,fileViewerProps:t,localize:n}=this.props,{isAllyAvailable:i,contentId:s,xythosId:o}=this.state,{file:c,inlineMediaAdditionalAttributes:p}=t,E=(0,l.CO)((0,l.V4)(c))&&(0,l.Q)(c),m=(0,l.NU)((0,l.V4)(c))&&(0,l.Q)(c),h=E&&((0,l.f5)(c)||this.state.isMediaVisible),b=null,g={...null!=p?p:{}};(E||m)&&(g={...g,height:c.height,width:c.width,"data-bbtype":c.bbtype}),i&&t.showContextMenu&&(b=r.createElement("div",{className:"ally-icons"},r.createElement("span",{className:"score-indicator"},r.createElement(d.Wq,{contentRef:s,widgetType:d.l9.ScoreIndicator})),c.render!==a.I_d.InlineOnly?r.createElement("span",{className:"alternative-formats"},r.createElement(d.Wq,{contentRef:s,widgetType:d.l9.AlternativeFormats,ariaLabel:n.translate("bbmlEditor.fileViewer.downloadAlternativeFormats")})):void 0)),i&&h&&(g["data-ally-content-id"]=s,g["data-ally-file-eid"]=o,g["data-ally-file-preview-url"]=c.resourceUrl,e.indexMap&&o&&e.indexMap.has(o)&&(g["data-ally-richcontent-index"]=e.indexMap.get(o)));let f=[];i&&(f.push({key:"instructorfeedback",icon:r.createElement(u.AllyScore,null),name:n.translate("bbmlEditor.fileViewer.instructorFeedback"),additionalAttributes:{"data-ally-show":"instructorfeedback","data-ally-content-ref":s,"data-ally-invoke":"instructorfeedback"},style:{display:"none"}}),c.render!==a.I_d.InlineOnly&&f.push({key:"alternativeformats",icon:r.createElement(u.AllyDownload,null),name:n.translate("bbmlEditor.fileViewer.downloadAlternativeFormats"),additionalAttributes:{"data-ally-show":"alternativeformats","data-ally-content-ref":s,"data-ally-invoke":"alternativeformats"},style:{display:"none"}}));let I={};return i&&E&&(0,l.f5)(c)&&(I.minHeight="6rem"),r.createElement(r.Fragment,null,!!i&&!h&&r.createElement(d.J9,{contentId:s,fileId:o,filePreviewUrl:c.resourceUrl}),r.createElement("div",{className:"bb-editor-file-viewer",style:I},r.createElement(l.$p,{...t,widgets:b,inlineMediaAdditionalAttributes:g,additionalContextualMenuItems:f,isAllyEnabled:i,onToggleMediaPreview:e=>this.setState({isMediaVisible:e})})))}}E.propTypes={ally:p.H,fileViewerProps:s.object,rootContentId:s.string},E.defaultProps={ally:p.C,fileViewerProps:null,rootContentId:null};let m=(0,o.X)(E);var h=n(359895),b=n(309988),g=n(194210),f=n(242454),I=n(303109),y=n(825501),S=n(192900),T=n(822382);let _="editAttachment",O="attachment",A=[`[data-bbtype=${O}][data-bbfile]`,"[data-bbfile]:not([data-bbtype])"],C="bb-edit-attachment-remove",v={type:"embed",blotName:O,tagName:"div",attributes:{"data-bbtype":_,"data-bbfile":null,href:null},renderDomNode:(0,S.H)({processValues:e=>{let t;let n=JSON.parse(e.bbfile),{href:r,metadata:i}=(0,b.Z)(e.href,n),s=(0,l.V4)(n);return((0,l.NU)(s)||(0,l.CO)(s)&&(0,l.f5)(n))&&!(0,l.iT)(n)&&(t=["bb-file","ql-embed-selected--hidden"]),{...e,href:r,bbfile:JSON.stringify({...i,render:n.render||n.displayInline?i.render:void 0}),additionalRootClasses:t}},component:e=>{let t,n,r;let{editorProps:s,values:o,node:u}=e,d=i().useMemo(()=>JSON.parse(o.bbfile),[o.bbfile]),{href:c,metadata:p}=(0,b.Z)(o.href,d),E=(0,f.Z)(p.linkName,p.mimeType);p.width&&p.height&&(t=p.width,n=p.height);let h=(0,l.V4)(d);!(0,l.CO)(h)||t&&n?(0,l.NU)(h)&&!s.isReadOnly&&(r={controls:!1,tabIndex:0}):r={className:"image--default"};let g={resourceUrl:c,fileName:E,fileSize:p.fileSize,viewerUrl:p.viewerUrl,render:p.render,alternativeText:p.alternativeText||p.linkName,displayName:p.linkName,mimeType:p.mimeType,isDecorative:p.isDecorative||!1,height:n,width:t};g.render||(g.render=(0,l.Q)(g,s.supportsInlineDocumentRender)?a.I_d.Inline:a.I_d.Attachment);let I={disableMediaModal:!s.isReadOnly,file:g,readOnly:s.isReadOnly||s.isDisabled,showContextMenu:s.isReadOnly&&!s.isDisabled,onDelete:()=>u.dispatchEvent(new CustomEvent(C)),expandInlineFilesOnLoad:s.expandInlineFilesOnLoad,supportsInlineDocumentRender:s.supportsInlineDocumentRender,inlineMediaAdditionalAttributes:r};return i().createElement(m,{fileViewerProps:I,ally:s.ally,rootContentId:s.rootContentId})},onUnmountComponent:e=>e.removeEventListener(C,e.customDeleteEventHandler)}),onBlotInit:(e,t)=>{e.customDeleteEventHandler=()=>t.remove(),e.addEventListener(C,e.customDeleteEventHandler)}};function R(e,t){let n=JSON.parse(t.bbfile);return`<a href="${t.href}" data-bbtype="${O}" data-bbfile="${(0,h.ZP)(t.bbfile)}">${n.linkName||n.alternativeText}</a>`}var L=e=>({pluginId:_,buttonConfig:{id:_,cssClass:_,iconName:"edit",iconComponent:I.I,isDialog:!0,isActive:e=>!!e[y.M$.type],onClick:({showModal:t,editorFormat:n,...r})=>{let i=JSON.parse(n[O].bbfile);t(g.Z,{isEdit:!0,editorFormat:n,file:i,...e,...r,href:n[O].href})}},matchers:A,module:T.C,formatter:v,toBbML:R})},413513:function(e,t,n){"use strict";var r=n(202784),i=n.n(r),s=n(928316),o=n.n(s),a=n(315109),l=n(613360),u=n(673252),d=n(755657),c=n(623572),p=n(73793),E=n(359895),m=n(825501),h=n(648153),b=n(656890),g=n(549487),f=n(464357);let I="editYoutubeVideo",y="embedded-app",S=[`a[data-bbtype="${y}"]`],T="geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *",_=e=>({editorFormat:t,showModal:n,buttonNode:r,...i})=>new Promise((n,i)=>{let s=t.bbfile?JSON.parse(t.bbfile):{},{embeddedAppConfig:o}=s,{id:a}=o;(0,u.Z)(a,e,r).then(e=>{e?n(e.srcURL):i()})}).then(r=>{let s=JSON.parse(t.bbfile);n(c.Z,{goBack:()=>{},srcURL:r,editingData:s,...e,...i})}).catch(()=>{n(d.Z,{destroy:i.destroy,messageType:"mashupNotAvailable"})});function O(e){if(e.data.messageType!==b.Z.incoming.pageLoaded)return;let t=Array.from(this.querySelectorAll(".embedded-app-container")).find(t=>t.contentWindow===e.source);t&&t.onEmeddedAppLoaded&&t.onEmeddedAppLoaded(e)}function A(e){window.addEventListener("message",O.bind(e))}function C(){window.removeEventListener("message",O)}let v=e=>({type:"embed",blotName:y,tagName:"div",attributes:{"data-bbtype":I,"data-bbfile":null},renderDomNode(t,n,r,s){let d=JSON.parse(r.bbfile),{embeddedAppConfig:c,linkRefId:E}=d,{id:m}=c||{id:`content_market${E}_${Math.floor(1e3*Math.random())}`},b=(0,p.Z)(t,n,r),g=document.createElement("div"),f=document.createElement("div"),I=document.createElement("div"),y={allow:T,className:"embedded-app-container hidden no-select",frameBorder:0,id:m,tabIndex:!s.isReadOnly||s.isDisabled?"-1":"0",width:"100%"};g.classList.add("bb-embedded-app"),d.width&&d.height&&(g.style.width=`${d.width}px`,g.style.height=`${d.height}px`),b.contentEditable=!1,b.classList.add("wants-props-update"),b.style.paddingBottom=".1rem",b.style.overflow="hidden",b.style.display="flex",b.style.backgroundColor="#f8f8f8",b.style.justifyContent="center",I.classList.add("embedded-app-overlay"),f.classList.add("loading-container"),b.appendChild(g),o().render(i().createElement(a.Spinner,{size:a.SpinnerSize.large}),f);let S=s.localize.getLocalePropsForClone(),_={title:d.title||s.localize.translate("bbmlEditor.editor.lightboxDefaultTitle"),fullScreenButtonText:s.localize.translate("bbmlEditor.editor.fullScreenButtonText")},O=new l.Z(g,S,y,{localizedStrings:_,firstFocusableContentSelector:`.${y.id}`}),A=g.childNodes[0]||g.appendChild(document.createElement("div"));return A.classList.add("no-longtext"),g.appendChild(f),g.appendChild(I),b.formatComponent=e=>{O.update(S,{tabIndex:!e.isReadOnly||e.isDisabled?"-1":"0"},{})},c?(0,u.Z)(m,e,t).then(t=>{let n=t.srcURL;O.update(S,{onEmeddedAppLoaded:t=>{f.classList.replace("loading-container","hidden"),O.update(S,{className:"embedded-app-container no-select",src:n},{});let r=new URL(n,window.origin),i=t.origin===r.origin;if(i){let n={apiBasePath:e.apiBasePath,xsrfToken:e.xsrfToken,locale:S.locale},r=(0,h.JG)(n,d);t.source.postMessage(r,t.origin)}}},{})}):e.getEmbedSrc(d).then(e=>{f.classList.remove("loading-container"),f.classList.add("hidden"),O.update(S,{src:e,allow:"autoplay *; fullscreen *; microphone *; encrypted-media *",className:"embedded-app-container no-select"},{})}),b}});function R(e,t){let n=JSON.parse(t.bbfile);return`<a href="${n.src}" data-bbtype="${y}" data-bbfile="${(0,E.ZP)(t.bbfile)}">${n.alt}</a>`}t.Z=e=>({pluginId:I,buttonConfig:{id:I,cssClass:I,iconName:"app",iconComponent:g.g,isDialog:!0,isActive:e=>{let t=e.bbfile?JSON.parse((0,f.A)(e.bbfile)):{};return!!e[m.HC.type]&&t&&t.embeddedAppConfig&&t.embeddedAppConfig.isEditable},onClick:_(e)},formatter:v(e),matchers:S,toBbML:R,onLoad:A,onUnload:C,IFRAME_ALLOW:T})},486537:function(e,t,n){"use strict";function r(e,t,n){let r=[{insert:!0,format:{image:{bbtype:"image",bbfile:JSON.stringify(t),href:e}}}];return r.unshift({insert:"\n"}),n||r.push({insert:"\n"}),r}n.d(t,{Z:function(){return r}})},396375:function(e,t,n){"use strict";n.d(t,{bq:function(){return h},zU:function(){return E}});var r=n(213980),i=n.n(r),s=n(194210),o=n(725390),a=n(802832),l=n(367668),u=n(482994),d=n(12434),c=n(646343);let p="insertLocalFile";function E(e,t,n,r,i){(t=t||d.Z)(s.Z,{file:e,...n,...r,href:i},r.localeProps)}function m(e,t,n,r){var i;let s=[];e.length>1?(e.forEach(({href:e,bbfile:t})=>{s=s.concat((0,o.Z)(e,t,!0))}),r.applyChange(s),null===(i=null==n?void 0:n.onNewAttachmentSavePressed)||void 0===i||i.call(n)):E(e[0].bbfile,t,n,r,e[0].href)}let h=i().shape({apiBasePath:i().string,xsrfToken:i().string,courseId:i().string,fileLocation:i().string,webLocation:i().string,onUploadSuccess:i().func,supportsInlineDocumentRender:i().bool});t.ZP=e=>[(0,a.ZP)(e),{pluginId:p,buttonConfig:{id:e&&e.buttonId||p,cssClass:p,iconName:"attachment",iconComponent:c.P,isDialog:!0,isActive:()=>!1,onClick:({showModal:t,...n})=>{(0,u.ZP)({...e,...n,multiple:!0,showModal:t}).then(r=>{m(r,t,e,n)})}},fileDropHandler:(t,n,r)=>{(0,u.ZP)({applyChange:n,multiple:!0,...e,showModal:r},()=>Promise.resolve(t)).then(t=>{m(t,r,e,{applyChange:n})})}},(0,l.Z)(e)]},962682:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},J:function(){return o}});var r=n(486537),i=n(417357),s=n(947413);function o(e,t){let n={...e,alt:e.alt||e.src},r=[{insert:!0,format:{"embedded-app":{bbtype:"embedded-app",bbfile:JSON.stringify(n)}}}];return r.unshift({insert:"\n"}),t||r.push({insert:"\n"}),r}function a(e){switch(e.dataType){case"embedded-app":return o(e.dataContent);case"image":return(0,r.Z)(e.dataContent.src,{alt:e.dataContent.alt});case"link":return(0,i.Z)(e.dataContent.src,e.dataContent.alt);case"video":return(0,s.Z)({src:e.dataContent.src,alt:e.dataContent.alt});case"audio":return function(e="",t=!0,n){let r=!0===t||"string"==typeof t&&0===t.length?e:t,i=[{insert:!0,format:{audio:{bbtype:"audio",bbfile:JSON.stringify({alt:r,src:e})}}}];return i.unshift({insert:"\n"}),i.push({insert:"\n"}),i}(e.dataContent.src,e.dataContent.alt);default:return null}}},623572:function(e,t,n){"use strict";var r=n(202784),i=n.n(r),s=n(213980),o=n.n(s),a=n(692475),l=n(345479),u=n(962682),d=n(656890),c=n(648153);class p extends i().Component{constructor(e){super(e),this.origin=new URL(e.srcURL).origin,this.postBackMashupInitConfig=this.postBackMashupInitConfig.bind(this),this.receiveMessage=this.receiveMessage.bind(this),this.onCancel=this.onCancel.bind(this),this.onInsert=this.onInsert.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.state={isOpen:!1,content:null}}UNSAFE_componentWillMount(){window.addEventListener("message",this.receiveMessage,!1),setTimeout(()=>this.setState({isOpen:!0}))}componentWillUnmount(){window.removeEventListener("message",this.receiveMessage)}postBackMashupInitConfig(){let e;let{apiBasePath:t,xsrfToken:n,localize:{locale:r,isRtl:i},editingData:s}=this.props;this.iframeEl||(this.iframeEl=this.iframeContainerEl.getElementsByTagName("iframe")[0]);let o={apiBasePath:t,xsrfToken:n,locale:r,isRtl:i()};e=s?(0,c.Gu)(o,s):(0,c.AU)(o),this.iframeEl.contentWindow.postMessage(e,this.origin)}receiveMessage(e){let t=new URL(this.props.srcURL);if(t.origin===e.origin)switch(e.data.messageType){case d.Z.incoming.pageLoaded:this.postBackMashupInitConfig();break;case d.Z.incoming.canceled:this.onCancel();break;case d.Z.incoming.contentReady:this.onInsert(e.data)}}onCancel(){this.setState({isOpen:!1})}onInsert(e){this.setState({isOpen:!1,content:e})}onAnimationComplete(){this.state.content&&this.props.applyChange((0,u.Z)(this.state.content)),this.props.destroy()}render(){let{srcURL:e,localize:t}=this.props;return i().createElement(l.Modal,{containerClassName:"modal-youtube-video-provider",isBlocking:!1,isOpen:this.state.isOpen,onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},i().createElement("div",{className:"iframe-container",ref:e=>{this.iframeContainerEl=e}},this.state.isOpen&&i().createElement("iframe",{title:t.translate("bbmlEditor.dialogs.youtubeVideoProviderModal.title"),src:e,frameBorder:0,className:"js-editor-video-container"})))}}p.propTypes={apiBasePath:o().string.isRequired,applyChange:o().func.isRequired,destroy:o().func.isRequired,editingData:o().shape(),srcURL:o().string.isRequired,xsrfToken:o().string.isRequired},p.defaultProps={editingData:null},t.Z=(0,a.h)(p)},797529:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});let r=!1;t.Z=e=>{if(!r)return!1;let t=Array.from(document.querySelectorAll(".bb-editor-root")).find(t=>t.contains(e));return t&&t.shouldEnableDemoMashup};let i=()=>{r=!0}},417357:function(e,t){"use strict";let n=/^\w+:\/\/|^mailto:/;function r(e,t){return t?{[e]:t}:null}t.Z=function(e,t,i,s){if(e.length<1)return{insert:t};let o=e;n.test(o)||(o=`http://${o}`);let a=t||o;return{insert:a,format:{link:{href:o,...r("bbfile",i),...r("bbtype",s)}}}}},435107:function(e,t,n){"use strict";n.d(t,{ZP:function(){return A},bq:function(){return O}});var r=n(213980),i=n.n(r),s=n(574515),o=n.n(s),a=n(275454),l=n(415802),u=n(397280),d=n(633739);let c={math:{xmlns:null,style:null,mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,display:null,maxwidth:null,overflow:null,altimg:null,"altimg-width":null,"altimg-height":null,"altimg-valign":null,alttext:null,cdgroup:null},maction:{mathcolor:null,mathbackground:null,actiontype:null,selection:null},maligngroup:{mathcolor:null,mathbackground:null,groupalign:null},malignmark:{mathcolor:null,mathbackground:null,edge:null},menclose:{mathcolor:null,mathbackground:null,notation:null},merror:{mathcolor:null,mathbackground:null},mfenced:{mathcolor:null,mathbackground:null,open:null,close:null,separators:null},mfrac:{mathcolor:null,mathbackground:null,linethickness:null,numalign:null,denomalign:null,bevelled:null},mi:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mlongdiv:{mathcolor:null,mathbackground:null,longdivstyle:null},mmultiscripts:{mathcolor:null,mathbackground:null,subscriptshift:null,superscriptshift:null},mn:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mo:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,form:null,fence:null,separator:null,lspace:null,rspace:null,"stretc hy":null,symmetric:null,maxsize:null,minsize:null,largeop:null,movablelimits:null,accent:null,linebreak:null,lineleading:null,linebreakstyle:null,linebreakmultchar:null,indentalign:null,indentshift:null,indenttarget:null,indentalignfirst:null,indentshiftfirst:null,indentalignlast:null,indentshiftlast:null},mover:{mathcolor:null,mathbackground:null,accent:null,align:null},mpadded:{mathcolor:null,mathbackground:null,height:null,depth:null,width:null,lspace:null,voffset:null},mphantom:{mathcolor:null,mathbackground:null},mprescripts:{},mroot:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mrow:{mathcolor:null,mathbackground:null,dir:null},ms:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,lquote:null,rquote:null},mscarries:{mathcolor:null,mathbackground:null,position:null,location:null,crossout:null,scriptsizemultiplier:null},mscarry:{mathcolor:null,mathbackground:null,location:null,crossout:null},msgroup:{mathcolor:null,mathbackground:null,position:null,shift:null},msline:{mathcolor:null,mathbackground:null,position:null,length:null,leftoverhang:null,rightoverhang:null,mslinethickness:null},mspace:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,indentalign:null,indentshift:null,indenttarget:null,indentalignfirst:null,indentshiftfirst:null,indentalignlast:null,indentshiftlast:null,width:null,height:null,depth:null,linebreak:null},msqrt:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},msrow:{mathcolor:null,mathbackground:null,position:null},mstack:{mathcolor:null,mathbackground:null,align:null,stackalign:null,charalign:null,charspacing:null},mstyle:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,scriptlevel:null,displaystyle:null,scriptsizemultiplier:null,scriptminsize:null,infixlinebreakstyle:null,decimalpoint:null},msub:{mathcolor:null,mathbackground:null,subscriptshift:null},msubsup:{mathcolor:null,mathbackground:null,subscriptshift:null,superscriptshift:null},msup:{mathcolor:null,mathbackground:null,superscriptshift:null},mtable:{mathcolor:null,mathbackground:null,align:null,rowalign:null,columnalign:null,groupalign:null,alignmentscope:null,columnwidth:null,width:null,rowspacing:null,columnspacing:null,rowlines:null,columnlines:null,frame:null,framespacing:null,equalrows:null,equalcolumns:null,displaystyle:null,side:null,minlabelspacing:null},mtd:{mathcolor:null,mathbackground:null,rowspan:null,columnspan:null,rowalign:null,columnalign:null,groupalign:null},mtext:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mtr:{mathcolor:null,mathbackground:null,rowalign:null,columnalign:null,groupalign:null},munder:{mathcolor:null,mathbackground:null,accentunder:null,align:null},munderover:{mathcolor:null,mathbackground:null,accent:null,accentunder:null,align:null},none:{},semantics:{definitionURL:null,encoding:null},annotation:{definitionURL:null,encoding:null,cd:null,name:null,src:null},"annotation-xml":{definitionURL:null,encoding:null,cd:null,name:null,src:null}};function p(e){return{...c[e]}}var E=n(541502),m=n(758546);let h="math",b={"data-mathml":null},g=!1;function f(e,t=!1,n=""){return t?{insert:!0}:""===n?{insert:!0,format:{[h]:{mathml:e}}}:{insert:`$$${n}$$`,format:{[l.aw]:{mathml:e}}}}let I=[...function(){let e=Object.keys(c);return e}(),"img[data-mathml]"],y=(e,t)=>{let n=e.tagName.toLowerCase(),r=p(n);return new(o())("img"===n?[{insert:{[h]:(0,d.u9)(e,b)},attributes:(0,d.u9)(e,b)}]:[{insert:{[n]:{...(0,d.u9)(e,r),children:t.ops}},attributes:(0,d.u9)(e,r)}])};function S(e,t){return t.mathml}function T(e){e&&e.forEach(e=>{_(e.target,e.target.alt)})}function _(e,t){if(g)e.setAttribute("role","img");else{let n=document.createElement("span");n.classList.add("sr-only"),e.parentElement.appendChild(n),n.textContent=t}}let O=i().shape({apiBasePath:i().string,xsrfToken:i().string,courseId:i().string,locale:i().string});var A=e=>{let t=new m.q7(e);return[{pluginId:h,buttonConfig:{id:h,cssClass:h,iconName:"insert_formula",iconComponent:E.k,isDialog:!0,isActive:e=>!!e[h]&&!!e[h].mathml,onClick:({showModal:t,...n})=>{t(a.Z,{createChange:f,...e,...n})}},matchers:I,deltaModifier:y,formatter:function(e){let t=new MutationObserver(T);return{type:"embedInline",blotName:h,tagName:"span",attributes:b,renderDomNode:(n,r,i,s)=>{let o=null;if(i.mathml)o=(0,u.F)(i.mathml);else if(i.children&&Array.isArray(i.children)){let e=document.createElement("math");e=(0,d.KT)(e,p("math"),i),i.children.forEach(t=>(function e(t,n){if("string"==typeof n.insert){let e=document.createTextNode(n.insert);t.appendChild(e)}else if("object"==typeof n.insert){let r=Object.keys(n.insert).find(e=>void 0!==c[e]);if(r){let i=document.createElement(r),s=p(r);i="mfenced"===r?(0,d.vh)(i,s,n.attributes||{}):(0,d.KT)(i,s,n.attributes||{});let o=n.insert[r].children;o&&Array.isArray(o)&&o.forEach(t=>e(i,t)),t.appendChild(i)}}})(e,t)),o=e.outerHTML}return(0,d.KT)(n,r,{...i,...o?{mathml:o}:null}),n.classList.add("formula-container"),n.innerHTML=o,t.observe(n,{subtree:!0,attributes:!0,attributeFilter:["alt"]}),n.classList.add("wants-props-update"),n.formatComponent=e=>{var t;g=e.isReadOnly;let r=n.parentElement.getElementsByClassName("Wirisformula");for(let e of r)e.nextSibling||(null===(t=e.nextSibling)||void 0===t?void 0:t.getAttribute()("sr-only"))||_(e,e.alt)},e.parseElement(n),n}}}(t),toBbML:S,onLoad:function(){t.load()}},(0,l.ZP)(e)]}},19228:function(e,t,n){"use strict";var r=n(789644),i=n.n(r),s=n(74621),o=n(188391),a=n.n(o),l=n(4264);let u=null,d=!1;function c(e,t){let n={language:t,fontFamily:"stix"};return e&&(n.mml=e),com.wiris.jsEditor.JsEditor.newInstance(n)}t.Z=({courseId:e,apiBasePath:t,xsrfToken:n,locale:r})=>{let o=e?`/courses/${e}`:"",p=(0,l.uI)(`${t}/v1${o}/editor/v4/configurations`),E=(0,l.uI)(`${t}/v1${o}/mathEditor/v3/mathMLToImage`);function m(e){return{wirisEditorUrl:(0,l.uI)(e.editorUrl)}}return{getAltText:function(e){if(!u)return Promise.reject();let t=s.stringify({service:"mathml2accessible",mml:e,lang:r});return i()({url:u,method:"POST",headers:{"X-Blackboard-XSRF":n,"Content-type":"application/x-www-form-urlencoded"},data:t})},getMathMLToImageURL:function(e){return new Promise((t,r)=>{i()({url:E,method:"POST",headers:{"X-Blackboard-XSRF":n},data:{mathML:e}}).then(e=>t(e.data.mathMLImageURL)).catch(r)})},newInstance:function(e){return new Promise((t,n)=>{d?t(c(e,r)):i()({url:p,method:"GET"}).then(s=>{var o;(o=s.data.contextPath,i()({url:`${o}app/configurationjs`,method:"GET"})).then(i=>{let{wirisEditorUrl:s}=m(i.data);u=(0,l.uI)("/webapps/vtbe-tinymce/app/service"),new Promise((t,n)=>{a()(s,()=>{try{d=!0,t(c(e,r))}catch(e){d=!1,n()}})}).then(e=>t(e)).catch(n)}).catch(n)}).catch(n)})},parseConfiguration:m,getLaTeXFromMathML:function(e){let t=s.stringify({service:"mathml2latex",mml:e,lang:r});return new Promise((e,r)=>{i()({url:u,method:"POST",headers:{"X-Blackboard-XSRF":n,"Content-type":"application/x-www-form-urlencoded"},data:t}).then(t=>e(t)).catch(r)})}}}},433097:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});class r{constructor(e){this.overlay=e.overlay,this.elem=e.elem,this.quillRoot=e.quill.root,this.blotRoot=e.blotRoot,this.localeProps=e.localeProps,this.editorFormat=e.editorFormat,this.isSmallBreakpoint=e.isSmallBreakpoint,this.requestUpdate=e.onUpdate,this.startChange=e.onStartChange,this.stopChange=e.onStopChange,this.applyChange=e.applyChange}onCreate(){}onDestroy(){}onUpdate(){}}},593279:function(e,t,n){"use strict";n.d(t,{P:function(){return f}});var r=n(398435),i=n(202784),s=n.n(i),o=n(928316),a=n.n(o),l=n(433097),u=n(281699),d=n(578485),c=n(438501),p=n(410628),E=n(17108);function m(e){return{filetype:e.formatType?e.formatType:"media",fileDisplayName:e.alternativeText?e.alternativeText:""}}let h=({onClick:e,buttonAccessibleProps:t})=>{let n=(0,p.q)(),r=m(t);return s().createElement(d.Q,{analyticsId:"media-content.delete",title:n("bbmlEditor.buttons.deleteMedia.label"),"aria-label":n("bbmlEditor.buttons.deleteMedia.axAriaText",r),onClick:e,value:""},s().createElement(c.Trash,null))},b=({videoURL:e,buttonAccessibleProps:t})=>{let n=(0,p.q)(),r=m(t);return s().createElement(d.Q,{analyticsId:"media-content.preview.button",title:n("bbmlEditor.buttons.PreviewMedia.label"),"aria-label":n("bbmlEditor.buttons.PreviewMedia.axAriaText",r),onClick:()=>{window.open(e,"_blank","noopener,noreferrer")},value:""},s().createElement(c.OpenInNewWindow,null))};var g=n(174897);class f extends l.j{constructor(){var e;let t,n;super(...arguments),this.container=document.createElement("div"),this.shouldShowPreviewButton=(this.elem instanceof HTMLIFrameElement||this.elem instanceof HTMLVideoElement)&&this.elem.src,this.buttonAccessibleProps=(e=this.editorFormat,(0,E.kG)(e)?{alternativeText:JSON.parse(e.video.bbfile).alt,formatType:e.video.bbtype}:(0,E.R4)(e)?{alternativeText:JSON.parse(e.image.bbfile).alt,formatType:e.image.bbtype}:(0,E.Dw)(e)?{alternativeText:JSON.parse(e.attachment.bbfile).displayName,formatType:e.attachment.bbtype}:{alternativeText:t,formatType:n}),this.handleOnDelete=()=>{this.applyChange(null)}}onCreate(){this.container.classList.add("options-container"),this.overlay.appendChild(this.container),a().render(s().createElement(r.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:this.localeProps.isRtl},s().createElement(g.g,{...this.localeProps},this.shouldShowPreviewButton&&s().createElement(u.Box,null,s().createElement(b,{videoURL:this.elem.src,buttonAccessibleProps:this.buttonAccessibleProps})),s().createElement(u.Box,null,s().createElement(h,{onClick:this.handleOnDelete,buttonAccessibleProps:this.buttonAccessibleProps})))),this.container)}onDestroy(){a().unmountComponentAtNode(this.container)}}},426571:function(e,t,n){"use strict";n.d(t,{F:function(){return d}});var r,i,s=n(276635),o=n(31307),a=n(433097),l=n(378780);(r=i||(i={})).TopLeft="tl",r.TopRight="tr",r.BottomRight="br",r.BottomLeft="bl";let u=Number.MAX_SAFE_INTEGER;class d extends a.j{constructor(e){super(e),this.currentDragHandle=null,this.tl=null,this.tr=null,this.br=null,this.bl=null,this.originalSize=null,this.aspectRatio=1,this.minWidth=200,this.maxWidth=1e3,this.minHeight=200,this.maxHeight=u,this.dragStart=null,this.size={width:0,height:0},this.keyboardDelta=0,this.hasValidResize=!1,this.isResizeInProgress=!1,this.lastRequestAnimationFrameId=0,this.lastCursor="",this.handleMouseDown=e=>{if(!this.elem)return;let t=e.target;if(!(t instanceof HTMLDivElement))return;let n=t.getAttribute("data-corner");(function(e){let t=[i.TopLeft,i.TopRight,i.BottomRight,i.BottomLeft];return null!==e&&t.includes(e)})(n)&&(this.currentDragHandle={corner:n,element:t},this.dragStart={x:e.clientX,y:e.clientY},document.addEventListener("mousemove",this.handleMouseMove,!1),document.addEventListener("mouseup",this.handleMouseUp,!1),this.hasValidResize=!1,this.setCursor(n),this.setUserSelect(!0),this.startChange(),e.preventDefault(),e.stopPropagation())},this.handleMouseMove=e=>{var t;let n;if(!this.dragStart)return;let r=e.clientX-this.dragStart.x;switch(null===(t=this.currentDragHandle)||void 0===t?void 0:t.corner){case i.TopLeft:case i.BottomLeft:n=-r;break;case i.TopRight:case i.BottomRight:n=r;break;default:n=0}this.resize(n),e.preventDefault(),e.stopPropagation()},this.handleMouseUp=e=>{this.hasValidResize&&this.applyChange(this.size),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.clearCursor(),this.setUserSelect(!1),this.stopChange(),e.preventDefault(),e.stopPropagation()},this.handleKeyDown=e=>{if(!e.shiftKey||!this.isValidResizeKeyEvent(e))return;let t=10;e.altKey&&(t=1),this.currentDragHandle=this.currentDragHandle={corner:i.BottomRight,element:this.br},this.isResizeInProgress||(this.hasValidResize=!1,this.setUserSelect(!0),this.startChange(),this.isResizeInProgress=!0),e.key===o.s.ArrowLeft||e.key===o.s.ArrowUp?this.keyboardDelta=this.clampDelta(this.keyboardDelta-t):(e.key===o.s.ArrowRight||e.key===o.s.ArrowDown)&&(this.keyboardDelta=this.clampDelta(this.keyboardDelta+t)),this.resize(this.keyboardDelta),e.stopPropagation(),e.preventDefault()},this.handleKeyUp=e=>{(!this.isResizeInProgress||!e.shiftKey)&&(this.isResizeInProgress||this.isValidResizeKeyEvent(e))&&(this.hasValidResize&&this.applyChange(this.size),this.setUserSelect(!1),this.isResizeInProgress=!1,this.stopChange(),e.stopPropagation(),e.preventDefault())},this.container=document.createElement("div"),this.container.classList.add("resize-container")}clampDelta(e){if(!this.originalSize)return(0,s.clamp)(e,this.minWidth,this.maxWidth);let t=this.originalSize.width+e,n=(0,s.clamp)(t,this.minWidth,this.maxWidth),r=n-this.originalSize.width;return r}resize(e){if(!this.originalSize)return;let t=this.originalSize.width+e,n=(0,s.clamp)(t,this.minWidth,this.maxWidth),r=n/this.aspectRatio,o={};this.size.width=n,this.size.height=r,this.hasValidResize=!0,cancelAnimationFrame(this.lastRequestAnimationFrameId),this.lastRequestAnimationFrameId=requestAnimationFrame(()=>{var n;let r,s;if(this.originalSize){switch(this.minWidth<=t&&t<=this.maxWidth?(s=`${-e/this.aspectRatio}px`,r=`${-e}px`):t>this.maxWidth?(s=`${(this.originalSize.width-this.maxWidth)/this.aspectRatio}px`,r=`${this.originalSize.width-this.maxWidth}px`):(s=`${(this.originalSize.width-this.minWidth)/this.aspectRatio}px`,r=`${this.originalSize.width-this.minWidth}px`),null===(n=this.currentDragHandle)||void 0===n?void 0:n.corner){case i.TopLeft:o.top=s,o.left=r;break;case i.TopRight:o.top=s,o.right=r;break;case i.BottomLeft:o.bottom=s,o.left=r;break;case i.BottomRight:o.bottom=s,o.right=r;break;default:throw TypeError("Could not detect a valid corner type")}Object.assign(this.container.style,o)}}),this.requestUpdate()}isValidResizeKeyEvent(e){return e.key===o.s.ArrowLeft||e.key===o.s.ArrowUp||e.key===o.s.ArrowRight||e.key===o.s.ArrowDown}addDragHandle(e){var t;let n=`resize-drag-handle--${e}`,r=document.createElement("div");return r.classList.add("resize-drag-handle",n),r.setAttribute("data-corner",e),r.addEventListener("mousedown",this.handleMouseDown),null===(t=this.container)||void 0===t||t.appendChild(r),r}setUserSelect(e){e?(this.quillRoot.classList.add("no-select"),document.documentElement.classList.add("no-select")):(this.quillRoot.classList.remove("no-select"),document.documentElement.classList.remove("no-select"))}setCursor(e){let t=`resize-cursor-${e}`;this.lastCursor.length>0?(document.body.classList.replace(this.lastCursor,t),this.elem.classList.replace(this.lastCursor,t)):(document.body.classList.add(t),this.elem.classList.add(t)),this.lastCursor=t}clearCursor(){this.lastCursor.length>0&&(document.body.classList.remove(this.lastCursor),this.elem.classList.remove(this.lastCursor)),this.lastCursor=""}onCreate(){let{elemWidth:e,elemHeight:t}=function(e){let t=e.getBoundingClientRect(),n=t.width,r=t.height;return e instanceof HTMLImageElement?(n||(n=e.naturalWidth),r||(r=e.naturalHeight)):e instanceof HTMLVideoElement&&(n||(n=e.videoWidth),r||(r=e.videoHeight)),{elemWidth:n,elemHeight:r}}(this.elem);this.originalSize={width:e,height:t},this.aspectRatio=e/t;let n=this.quillRoot.getBoundingClientRect();this.minWidth=Math.max(200,.25*n.width),this.maxWidth=n.width,this.minHeight=200,this.maxHeight=u,this.aspectRatio<1?this.minHeight=Math.max(this.minHeight,this.minWidth/this.aspectRatio):this.aspectRatio>1&&(this.minWidth=Math.max(this.minWidth,this.aspectRatio*this.minHeight)),this.isSmallBreakpoint||(0,l.w)(this.blotRoot.parentElement)||(this.tl=this.addDragHandle(i.TopLeft),this.tr=this.addDragHandle(i.TopRight),this.br=this.addDragHandle(i.BottomRight),this.bl=this.addDragHandle(i.BottomLeft),this.blotRoot.addEventListener("keydown",this.handleKeyDown),this.blotRoot.addEventListener("keyup",this.handleKeyUp)),this.overlay.appendChild(this.container)}onDestroy(){this.hasValidResize=!1,this.originalSize=null,this.aspectRatio=1,this.blotRoot.removeEventListener("keydown",this.handleKeyDown),this.blotRoot.removeEventListener("keyup",this.handleKeyUp),this.clearCursor()}}},326483:function(e,t,n){"use strict";function r({src:e,title:t,alt:n,uuid:r,availabilityMessage:i,bbfile:s}){return[{insert:"\n"},{insert:!0,format:{collab_video:{src:e,title:t,alt:n,bbfile:s||JSON.stringify({video_uuid:r}),info:null!=i?i:null}}},{insert:"\n"}]}n.d(t,{Z:function(){return r}})},340757:function(e,t,n){"use strict";n.d(t,{Z:function(){return u},d:function(){return l}});var r=n(202784),i=n.n(r),s=n(213980),o=n.n(s),a=n(142895);function l(){let e=document.querySelector("div.modal-video-everywhere-contents > iframe");e&&(e.height=`${e.offsetWidth*(700/1200)}px`)}class u extends i().Component{constructor(e){super(e),this.state={isOpen:!1},this.onCancel=this.onCancel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this)}UNSAFE_componentWillMount(){this.timer=setTimeout(()=>{this.setState({isOpen:!0},()=>{window.addEventListener("resize",l)})})}UNSAFE_componentWillReceiveProps(e){!e.isOpen&&this.state.isOpen&&this.onCancel()}componentWillUnmount(){clearTimeout(this.timer),window.removeEventListener("resize",l)}onCancel(){this.setState({isOpen:!1})}onAnimationComplete(){this.props.destroy&&this.props.destroy()}getAllowAttribute(){return this.props.allowMedia?"geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *":null}render(){return i().createElement(a.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:this.props.title,type:a.DialogType.fullHeaderFooter,showCloseButton:this.props.showCloseButton},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete,containerClassName:"modal-video-everywhere"},onDismiss:this.onCancel,firstFocusableSelector:"ms-Dialog-title"},i().createElement("div",{className:"modal-video-everywhere-contents"},this.props.src&&i().createElement("iframe",{tabIndex:"0",title:this.props.title,src:this.props.src,frameBorder:"0",width:"100%",height:"100%",scrolling:"no",allow:this.getAllowAttribute(),allowFullScreen:!0,onLoad:l})))}}u.propTypes={allowMedia:o().bool,destroy:o().func,isOpen:o().bool,showCloseButton:o().bool,src:o().string,title:o().string.isRequired},u.defaultProps={allowMedia:!1,destroy:null,isOpen:!1,showCloseButton:!0,src:null}},406733:function(e,t,n){"use strict";var r=n(202784),i=n.n(r),s=n(50635),o=n(213980),a=n.n(o),l=n(340757),u=n(816390);class d extends i().Component{constructor(e){super(e),this.state={isOpen:!1}}UNSAFE_componentWillMount(){this.promise=(0,u.Z)(this.props.service.getPlaybackLink(this.props.videoId)).then(e=>{this.setState({src:e.data.result,isOpen:!0},l.d)})}componentWillUnmount(){this.promise.cancel()}render(){let{destroy:e,t,showCloseButton:n}=this.props;return i().createElement(l.Z,{destroy:e,showCloseButton:n,src:this.state.src,isOpen:this.state.isOpen,title:t("bbmlEditor.dialogs.collab_video.playbackTitle")})}}d.propTypes={destroy:a().func,videoId:a().string.isRequired,service:a().shape({getPlaybackLink:a().func.isRequired}).isRequired,showCloseButton:a().bool},d.defaultProps={destroy:null,showCloseButton:!0},t.Z=(0,s.H)(d)},854666:function(e,t){"use strict";t.Z="collab_video"},820487:function(e,t){"use strict";t.Z=[".mp4"]},947413:function(e,t,n){"use strict";function r(e,t){let n=[{insert:!0,format:{video:{bbtype:"video",bbfile:JSON.stringify(e)}}}];return n.unshift({insert:"\n"}),t||n.push({insert:"\n"}),n}n.d(t,{Z:function(){return r}})},648798:function(e,t,n){"use strict";var r=n(819549),i=n(73793),s=n(359895),o=n(820487),a=n(645885),l=n(464357),u=n(485544);let d="video",c=e=>!(!e.isReadOnly||e.isDisabled),p=({bbFile:e,editorProps:t})=>{let n=document.createElement("iframe");return n.frameBorder=0,n.setAttribute("allowFullScreen",""),n.tabIndex=c(t)?"0":"-1",n.title=e.alt,n.src=e.src,n.classList.add("no-select"),e.width&&e.height&&(n.height=e.height,n.width=e.width),n},E=({bbFile:e,editorProps:t})=>{let{isReadOnly:n,isDisabled:r}=t,i=document.createElement("video");return i.autoplay=!1,i.controls=!(!n||r),i.playsinline=!0,i.ariaLabel=e.alt,i.src=e.src,i.classList.add("no-select"),e.width&&e.height&&(i.height=e.height,i.width=e.width),i},m=[`[data-bbtype="${d}"][data-bbfile]`],h={type:"embed",tagName:"div",attributes:{"data-bbtype":d,"data-bbfile":null},renderDomNode:(e,t,n,r)=>{let s;let a=JSON.parse((0,l.A)(n.bbfile)),u=!o.Z.some(e=>a.src&&a.src.toLowerCase().endsWith(e)),{isReadOnly:d}=r,m=document.createElement("span");m.classList.add("sr-only"),m.textContent=a.alt;let h=document.createElement("div");h.tabIndex=0,h.classList.add("video-placeholder"),h.classList.add("no-select"),d&&h.classList.add("hidden"),h.appendChild(m),s=u?p({bbFile:a,editorProps:r}):E({bbFile:a,editorProps:r});let b=document.createElement("div");b.classList.add("bb-video-embed"),a.width&&a.height?b.classList.add("bb-video-embed--resize"):b.classList.add("bb-video-embed--default"),b.appendChild(h),b.appendChild(s);let g=(0,i.Z)(e,t,n);return g.contentEditable=!1,g.classList.add("bb-video"),g.classList.add("wants-props-update"),g.classList.add("ql-embed-selected--hidden"),g.formatComponent=e=>{s.tabIndex=!e.isReadOnly||e.isDisabled?"-1":"0",s.controls=!(!e.isReadOnly||e.isDisabled),h.tabIndex=!e.isReadOnly||e.isDisabled?"0":"-1",c(e)?h.classList.add("hidden"):h.classList.remove("hidden")},g.formatComponent(r),g.appendChild(b),g}};function b(e,t){let n=JSON.parse((0,l.A)(t.bbfile));return`<a href="${n.src}" data-bbtype="${d}" data-bbfile="${(0,s.ZP)(t.bbfile)}">${n.alt}</a>`}t.Z=e=>({pluginId:d,buttonConfig:{id:d,cssClass:`${d}`,iconName:"video",iconComponent:a.n,isDialog:!0,isActive:e=>!!e[d],onClick:({showModal:t,...n})=>{t(r.Z,{...e,...n})}},matchers:m,module:u.Z,formatter:h,toBbML:b})},322846:function(e,t){"use strict";t.Z=(e,t)=>new Promise((n,r)=>{let i=document.getElementById("browseForFiles");i&&i.remove();let s=document.createElement("input");s.id="browseForFiles",s.classList.add("sr-only"),s.tabIndex="-1",s.role="presentation",s.type="file",(null==t?void 0:t.length)>0&&(s.accept=t.join(",")),s.multiple=!!e,s.onchange=e=>{let t=e.target.files;s.remove(),n(t)},document.body.appendChild(s);let o=document.querySelector(".data-e2e-simulate-file-input");o||s.click()})},148330:function(e,t,n){"use strict";n.d(t,{C:function(){return r},p:function(){return i}});class r extends Error{constructor(e,t){super(t),this.errorData=e}getErrorFiles(){return this.errorData.errorFiles}getAllowedFiles(){return this.errorData.allowedFiles}}class i{constructor(e){this.sizeLimitInBytes=e}validate(e){let t=this.findBiggerThanLimit(e),n=this.findSmallerThanLimit(e);if(t.length>0)throw new r({errorFiles:t,allowedFiles:n},"File is larger than the maximum file size")}findBiggerThanLimit(e){return e.filter(e=>e.size>this.sizeLimitInBytes)}findSmallerThanLimit(e){return e.filter(e=>e.size<=this.sizeLimitInBytes)}}},587987:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(202784),i=n.n(r),s=n(692475),o=n(213980),a=n.n(o),l=n(906277),u=n(844156),d=n(142895),c=n.n(d),p=n(158550),E=n(789644),m=n.n(E),h=n(4264);function b(e,t,n){return m()({url:n,method:"GET",headers:{"X-Blackboard-XSRF":t},cancelToken:new(m()).CancelToken(t=>{e.cancelInternal=t})})}class g{constructor(e,t){if(e.cloudStorageIntegrationAccessToken){this.progressTick=0,this.file=e;let n=(0,h.uI)(`${t.apiBasePath}/v1/cloudstorages`),r=(0,h.uI)(`${n}/cloudstorageintegration/contents/${encodeURIComponent(e.id)}/download?accessToken=${e.cloudStorageIntegrationAccessToken}&expand=mimeType,isMedia`);b(this,t.xsrfToken,r).then(e=>this.queryDownload(e,n,t.xsrfToken)).catch(e=>this.onError(e))}else{this.progressTick=0,this.file=e;let n=(0,h.uI)(`${t.apiBasePath}/v1/files?expand=mimeType,isMedia`);t.courseId&&(n=`${n}&courseId=${t.courseId}`),Number.isFinite(t.resizeImageWidth)&&(n=`${n}&resizeImageWidth=${t.resizeImageWidth}`);let r=new FormData;r.append("file",e,encodeURIComponent(e.name)),r.append("webLocation",t.webLocation||""),r.append("fileLocation",t.fileLocation||""),m()({url:n,method:"POST",headers:{"Content-Type":"image/jpeg","X-Blackboard-XSRF":t.xsrfToken},data:r,cancelToken:new(m()).CancelToken(e=>{this.cancelInternal=e}),onUploadProgress:e=>this.onProgress(e)}).then(e=>this.onSuccess(e)).catch(e=>this.onError(e))}}onSuccess(e){this.cachedResponse=e,this.successCallback&&this.successCallback(this.file,e.data)}onProgress(e,t){if(this.cachedProgress=e,this.progressCallback){if(t){this.progressCallback(this.file.name,Math.floor(e));return}e.lengthComputable&&this.progressCallback(this.file.name,Math.floor(100*e.loaded/e.total))}}onError(e){this.cachedError=e,this.errorCallback&&this.errorCallback(this.file,e)}queryDownload(e,t,n){return new Promise(r=>{"COMPLETE"===e.data.status?(this.cloudStorageIntegrationTimer&&clearTimeout(this.cloudStorageIntegrationTimer),r(this.onSuccess(e))):this.cloudStorageIntegrationTimer=setTimeout(()=>{this.onProgress(+e.data.completePercentage,!0);let i=`${t}/tasks/${e.data.taskId}?accessToken=${this.file.cloudStorageIntegrationAccessToken}&expand=mimeType,isMedia`;r(b(this,n,i).then(e=>this.queryDownload(e,t,n)).catch(e=>this.onError(e)))},500)})}cancel(){delete this.errorCallback,delete this.progressCallback,delete this.successCallback,this.cachedResponse||this.cachedError||this.cancelInternal()}progress(e){return this.progressCallback=e,this.cachedProgress&&this.onProgress(this.cachedProgress),this}success(e){return this.successCallback=e,this.cachedResponse&&this.onSuccess(this.cachedResponse),this}error(e){return this.errorCallback=e,this.cachedError&&this.onError(this.cachedError),this}}var f=n(924980);class I extends i().Component{constructor(e){super(e),this.state={files:[],fileGroup:{}},this.uploadServices={},this.progressTimers={},this.failedUploads=[],this.successfulUploads=[],this.updateProgress=this.updateProgress.bind(this),this.onCancel=this.onCancel.bind(this),this.onCancelAll=this.onCancelAll.bind(this),this.onDismiss=this.onDismiss.bind(this),this.onUploadSuccess=this.onUploadSuccess.bind(this),this.onUploadError=this.onUploadError.bind(this),this.finishUploading=this.finishUploading.bind(this)}UNSAFE_componentWillMount(){let{files:e}=this.props;this.setState({files:e}),e.forEach(e=>{var t;let n=!1;this.uploadServices[e.name]=(t={apiBasePath:this.props.apiBasePath,xsrfToken:this.props.xsrfToken,webLocation:this.props.webLocation,fileLocation:this.props.fileLocation,resizeImageWidth:this.props.resizeImageWidth,courseId:this.props.courseId},new g(e,t)).progress((t,r)=>{r>=100?(clearTimeout(this.progressTimers[e.name]),this.updateProgress(t,100)):n||(n=!0,this.progressTimers[e.name]=setTimeout(()=>{let e=!!this.state.fileGroup[t]&&this.state.fileGroup[t].uploadComplete,i=e?100:r;n=!1,this.updateProgress(t,i)},5))}).success(this.onUploadSuccess).error(this.onUploadError)})}onCancel(e){let t=this.state.files;this.uploadServices[e].cancel(),t=t.filter(t=>t.name!==e),this.failedUploads=this.failedUploads.filter(t=>t.name!==e),this.successfulUploads=this.successfulUploads.filter(t=>t.name!==e),t.length>0?this.setState({files:t},()=>{this.finishUploading()}):this.onDismiss()}onCancelAll(){this.props.files.forEach(e=>{this.uploadServices[e.name].cancel()}),this.onDismiss()}onDismiss(){this.props.destroy()}onUploadSuccess(e,t){this.successfulUploads.push(e),this.props.onUploadSuccess&&this.props.onUploadSuccess(t),this.setState(n=>({fileGroup:{...n.fileGroup,[e.name]:{...n.fileGroup[e.name]||{},uploadComplete:!0,successResponse:t}}}),()=>{this.finishUploading()})}onUploadError(e,t){var n;let{localize:r,onUploadError:i}=this.props;this.uploadServices[e.name].cancel(),this.failedUploads.push(e),clearTimeout(this.progressTimers[e.name]);let s=(null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.status)===422;i&&i(t),this.setState(t=>({fileGroup:{...t.fileGroup,[e.name]:{...t.fileGroup[e.name]||{},errorResponse:r.translate(`bbmlEditor.dialogs.insertLocalFile.${s?"securityThreat":"networkError"}`),progress:0,uploadComplete:!1}}}),()=>{this.finishUploading()})}updateProgress(e,t){let n=this.state.fileGroup;(!this.state.fileGroup[e]||void 0===this.state.fileGroup[e].progress||t>this.state.fileGroup[e].progress)&&(n[e]={...this.state.fileGroup[e]||{},progress:t},this.setState({fileGroup:n}))}finishUploading(){if(this.state.files.length-this.failedUploads.length===this.successfulUploads.length){let{fileGroup:e}=this.state,t=[];Object.keys(e).forEach(n=>{e[n].successResponse&&t.push(e[n].successResponse)}),0!==t.length&&setTimeout(()=>{this.props.destroy(),this.props.createChange(t)},350)}}render(){let{fileGroup:e}=this.state,{localize:t,analyticsEventAugmentor:n}=this.props,r=t.translate("bbmlEditor.buttons.cancel"),s="cloudStorageIntegration"===this.props.fileSource?t.translate("bbmlEditor.dialogs.insertCloudStorageIntegrationFile.titleInsert"):t.translate("bbmlEditor.dialogs.insertLocalFile.titleInsert");return i().createElement(c(),{hidden:!1,onDismiss:this.onDismiss,dialogContentProps:{title:s,showCloseButton:!1,type:d.DialogType.fullHeaderFooter},modalProps:{containerClassName:"modal-insert-file"},firstFocusableSelector:"ms-Dialog-title",analyticsId:"cloudStorageIntegration"===this.props.fileSource?"editor.dialogs.insertCloudStorageIntegrationFile.titleInsert":"editor.dialogs.insertLocalFile.titleInsert"},this.state.files.map(r=>{let s=e[r.name]?e[r.name].progress:0,o=!!e[r.name]&&e[r.name].uploadComplete,a=s>=100&&!o,u=43*Math.PI,d=s>0?u-u/100*s:u,c=(0,l.Z)({"loading-circle-svg":!0,processing:a}),E="";return this.state.fileGroup[r.name]&&(E=this.state.fileGroup[r.name].errorResponse||""),i().createElement("div",{key:r.name,className:"file-group"},i().createElement("div",{className:"file-progress-container"},o?i().createElement("div",{className:"indicator complete"}):i().createElement("div",{className:"indicator"},i().createElement("svg",{className:c,height:49,width:49,viewBox:"0 0 46 46"},i().createElement("circle",{className:"back",cx:23,cy:23,r:21.5,fill:"none",strokeWidth:3,strokeDasharray:u,strokeDashoffset:d}),i().createElement("circle",{className:"bar",cx:23,cy:23,r:21.5,fill:"none",strokeWidth:3,strokeDasharray:a?6:u,strokeDashoffset:d})),s.toString(),"%"),i().createElement("div",{className:"file-name no-longtext no-select"},r.name),i().createElement("button",{type:"button","aria-label":t.translate("bbmlEditor.dialogs.insertLocalFile.cancelUploadButton"),className:"cancel-upload",onClick:n(p.AnalyticsEventTypes.CLICK_EVENT,()=>this.onCancel(r.name),"editor.dialogs.insertLocalFile.cancelUploadButton"),"data-analytics-id":"editor.dialogs.insertLocalFile.cancelUploadButton"},"X")),i().createElement("div",{className:"upload-error-message"},E))}),i().createElement("br",null),i().createElement(d.DialogFooter,null,i().createElement(u.AnalyticsDefaultButton,{onClick:this.onCancelAll,analyticsId:"editor.modalInsertFile.cancel"},r)))}}I.propTypes={apiBasePath:a().string.isRequired,createChange:a().func.isRequired,destroy:a().func.isRequired,files:a().arrayOf(a().shape({lastModified:a().number,name:a().string,size:a().number,type:a().string}).isRequired).isRequired,fileLocation:a().string,fileSource:a().oneOf(["local","cloudStorageIntegration"]),onUploadError:a().func,onUploadSuccess:a().func,webLocation:a().string,xsrfToken:a().string.isRequired,...f.Z},I.defaultProps={fileLocation:"",fileSource:"local",onUploadError:null,onUploadSuccess:null,webLocation:""};let y=(0,s.h)((0,p.withAnalytics)(I));var S=y},540535:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(202784),i=n.n(r),s=n(50635),o=n(213980),a=n.n(o),l=n(398435),u=n(281699);class d extends i().Component{constructor(e){super(e),this.onDismiss=this.onDismiss.bind(this)}onDismiss(){var e;this.props.destroy(),null===(e=this.props)||void 0===e||e.executeCallback()}convertToMiB(e){return e/1048576}render(){let{t:e,files:t,maxFileSize:n,fileUploadSettings:r,classes:s}=this.props,{displayRecommendedAlternatives:o,displaySupportLink:a,supportLink:u,recommendedAlternatives:d}=r,c=i().createElement(l.AnalyticsLink,{analyticsId:"bbmlEditor.dialogs.fileUpload.linkAnalytics",href:u,target:"_blank",rel:"noreferrer"},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.supportLink"));return i().createElement(l.AnalyticsDialog,{open:!0,maxWidth:"md",onClose:this.onDismiss,analyticsId:"editor.dialogs.fileUpload.maxSizeWarning.title",className:"max-size-warning-modal",PaperProps:{role:"alertdialog"},"aria-labelledby":"alert-upload-error"},i().createElement(l.AnalyticsDialogTitle,{id:"alert-upload-error",onClose:this.onDismiss},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.title")),i().createElement(l.AnalyticsDialogContent,null,i().createElement("div",{className:"warning-message"},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.message",{maxFileSize:this.convertToMiB(n)})),i().createElement("ul",{className:s.filesUL},t.map(t=>i().createElement("li",{className:"file-info",key:t.name},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.files",{fileName:t.name,fileSize:this.convertToMiB(t.size)})))),i().createElement("p",{className:"alternate-storage-info"},o||""!==d?e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.alternateStorage",{alternateStorage:d}):e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.noAlternateStorage"),(a||""!==u)&&i().createElement("span",null," ",e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.supportLinkText",{supportLinkAnchor:c})))),i().createElement(l.AnalyticsDialogActions,null,i().createElement(l.AnalyticsPrimaryButton,{onClick:this.onDismiss,analyticsId:"editor.modalMaxFileSizeError.cancel"},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.primary"))))}}d.propTypes={destroy:a().func.isRequired,files:a().arrayOf([{name:a().string,size:a().number}]),maxFileSize:a().number.isRequired,executeCallback:a().func},d.defaultProps={fileUploadSettings:{displayRecommendedAlternatives:!1,displaySupportLink:!1,supportLink:"",recommendedAlternatives:""}};var c=(0,s.H)((0,u.withStyles)(()=>(0,u.createStyles)({filesUL:{overflowY:"auto",maxHeight:"8.25rem",paddingLeft:"1rem",marginLeft:0}}))(d))},309988:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(951248);function i(e,t){let n=t.linkName||t.displayName||t.title,i=t.render;return i||!0!==t.displayInline||(i=r.I_d.Inline),{href:e||t.resourceUrl||t.webLocation+t.fileName,metadata:{...t,linkName:n,render:i}}}},73793:function(e,t){"use strict";t.Z=function(e,t,n){let r=e;return Object.keys(t).forEach(e=>{var i;let s=n[e.replace("data-","")],o=t[e];i=r,(s||o)&&i.setAttribute(e,s||o),r=i}),r}},988860:function(e,t){"use strict";t.Z=e=>new Promise(t=>{setTimeout(()=>{t(e)},200)})},242454:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let r={"application/msword":["doc","dot"],"application/pdf":["pdf"],"application/excel":["xls"],"application/mspowerpoint":["ppt"],"application/powerpoint":["ppt"],"application/x-mspowerpoint":["ppt"],"application/vnd.ms-excel":["xls","xlt","xla"],"application/vnd.ms-excel.addin.macroEnabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroEnabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroEnabled.12":["xlsm"],"application/vnd.ms-excel.template.macroEnabled.12":["xltm"],"application/vnd.ms-powerpoint":["ppt","pot","pps","ppa"],"application/vnd.ms-powerpoint.addin.macroEnabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroEnabled.12":["pptm","potm"],"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":["ppsm"],"application/vnd.ms-word.document.macroEnabled.12":["docm"],"application/vnd.ms-word.template.macroEnabled.12":["dotm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/x-excel":["xls","xll"],"application/x-compressed":["zip"],"application/x-zip-compressed":["zip"],"application/zip":["zip"],"audio/midi":["mid"],"audio/mpeg":["mp3"],"audio/mpeg3":["mp3"],"audio/x-mpeg":["mp3"],"audio/x-mpeg3":["mp3"],"audio/x-midi":["mid"],"audio/aiff":["aiff","aif","aifc"],"audio/x-aiff":["aiff","aif","aifc"],"audio/wav":["wav"],"audio/x-wav":["wav"],"image/bmp":["bmp","bm"],"image/x-windows-bmp":["bmp"],"image/gif":["gif"],"image/x-icon":["ico"],"image/jpeg":["jpg","jpeg"],"image/png":["png"],"image/tiff":["tif","tiff"],"image/x-tiff":["tif","tiff"],"multipart/x-zip":["zip"],"text/plain":["txt"],"video/avi":["avi"],"video/mpeg":["mpeg","mp4"],"video/msvideo":["avi"],"video/quicktime":["mov","moov"]};function i(e,t){return!r[t]||r[t].some(t=>e.endsWith(`.${t}`))?e:`${e}.${r[t][0]}`}},17108:function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e&&"video"in e}function i(e){return null!=e&&"object"==typeof e&&"image"in e}function s(e){return null!=e&&"object"==typeof e&&"attachment"in e}n.d(t,{Dw:function(){return s},R4:function(){return i},kG:function(){return r}})},816390:function(e,t){"use strict";t.Z=e=>{let t=!1,n=new Promise((n,r)=>{e.then(e=>t||n(e)).catch(e=>t||r(e))});return{then(e){return n.then(e),this},catch(e){return n.catch(e),this},cancel(){t=!0}}}},359895:function(e,t,n){"use strict";function r(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function i(e){return e.replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function s(e){let t=new DOMParser;return t.parseFromString(e,"text/html")}n.d(t,{ZP:function(){return r},qo:function(){return i},rg:function(){return s}})},4264:function(e,t,n){"use strict";n.d(t,{d0:function(){return o},uI:function(){return l}});var r=n(594421),i=n.n(r),s=n(359895);async function o(e){let t=e=function(e){let t=/\<iframe.+src\=(?:\"|\')(.+?)(?:\"|\')(?:.+?)\>/;return t.test(e)?e.match(t)[1]:e}(e);if(t.includes("://")||(e=`https://${t}`),(t=t.toLowerCase()).includes("m.youtube"))return e.replace(/(m.youtube)/i,"youtube");if(t.includes("youtube.com")&&!t.includes(".com/embed"))return(e=e.replace(/(watch\?v=)/i,"").replace(/(.com\/)/i,".com/embed/")).split(/(&feature=youtu.be)/i)[0];if(t.includes("//youtu.be/"))return e.replace(/(\/\/youtu.be\/)/i,"//youtube.com/embed/");if(t.includes("vimeo.com")&&!t.includes("player.vimeo")){e=e.endsWith("/")?e.replace(/\/+$/g,""):e;let t=e.split("/").slice(-1)[0];return e.replace(/vimeo/i,"player.vimeo").replace(/(.com\/).*$/i,`.com/video/${t}`)}if(t.includes("vidgrid.com/view")&&!t.includes("embed"))return(e=e.replace(/(view)/i,"embed")).replace(/(?=\/\?).+/i,"");if(t.includes("kaltura.com")&&!t.includes("embed"))return e=e.replace(/media\/.[^\/]*\//i,"embed/secure/iframe/entryId/");if(t.includes("panopto.com")&&!t.includes("Embed"))return e.replace(/Viewer/i,"Embed");if(t.includes("flipgrid.com")&&!t.includes("embed=true"))return t.includes("admin")&&(e=e.replace(/admin/i,"shorts").replace(/manage\/shorts/i,"watch")),e=e.replace(/\?\w+$/i,"?embed=true");if(t.includes("prezi.com")&&!t.includes("embed")){if(!t.includes("view")){let t=e.split("/");e=(t=t.splice(0,5)).join("/")}return e.endsWith("/")||(e=e.concat("/")),e.concat("embed")}return t.includes("voicethread.com")&&!t.includes("/app/player/?threadId=")?e.replace(/\/myvoice\/thread\//i,"/app/player/?threadId=").replace(/(\/[0-9]+){2}$/,""):t.includes("spotify.com")&&!t.includes("embed/")?(t.includes("track")?e=e.replace(/track/i,"embed/track"):t.includes("album")?e=e.replace(/album/i,"embed/album"):t.includes("playlist")?e=e.replace(/playlist/i,"embed/playlist"):t.includes("artist")?e=e.replace(/artist/i,"embed/artist"):t.includes("show")?e=e.replace(/show/i,"embed-podcast/show"):t.includes("episode")&&(e=e.replace(/episode/i,"embed-podcast/episode")),e.replace(/\?.+$/i,"")):t.includes("genial.ly")?e.replace(/\/[\w-]+$/i,""):t.includes("nearpod.com")?e.replace(/command\?puid/i,"?pin").replace(/&[=\w]+$/i,"&he=true"):t.includes("quizlet.com")&&!t.includes("/embed")?e.replace(/(.*\/\/quizlet.com\/)([a-zA-Z]+\/)?(\d+)\/.*/,"$1$3/flashcards/embed"):t.includes("edpuzzle.com")&&!t.includes("embed/media")?e.replace(/media/i,"embed/media"):t.includes("soundcloud.com")&&!t.includes("embed_code/key")||t.includes("slideshare.net")&&!t.includes("//api")?a(t):t.includes("h5p.org")&&!t.includes("/embed")?e.replace(/node/i,"h5p/embed"):t.includes("h5p.com")&&!t.includes("/embed")?e.concat("/embed"):t.includes("sharepoint.com")?t.includes("action=")?e.replace(/action=\w*/i,"action=embedview"):e+"&action=embedview":t.includes("microsoftstream.com")&&!t.includes("/embed/")?e.replace(/video/,"embed/video"):t.includes("miro.com")&&!t.includes("/live-embed/")?e.replace(/board/,"live-embed"):e}async function a(e){return e.includes("soundcloud.com")?i().get(`https://soundcloud.com/oembed?format=json&url=${e}`).then(e=>(0,s.rg)(e.data.html).getElementsByTagName("iframe")[0].src):e.includes("slideshare.net")?i().jsonp(`https://www.slideshare.net/api/oembed/2?url=${e}&format=jsonp`).then(e=>(0,s.rg)(e.html).getElementsByTagName("iframe")[0].src):void 0}function l(e,t){let n=e;return e&&0>e.indexOf("//")&&("/"!==e[0]&&(n=`/${e}`),n=t?t+e:window.location.origin+e),n}},682267:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});let r=[/edpuzzle/i,/flipgrid/i,/genial\.ly/i,/h5p/i,/kaltura/i,/microsoftstream/i,/miro/i,/nearpod/i,/panopto/i,/prezi/i,/quizlet/i,/sharepoint.+\/\:[pwx]\:/i,/slideshare/i,/soundcloud/i,/spotify/i,/vidgrid/i,/vimeo\.com/i,/voicethread/i,/youtu\.be/i,/youtube\.com/i,/yuja\.com/i],i=e=>r.some(t=>t.test(e))},352909:function(e,t,n){"use strict";n.d(t,{C:function(){return o},H:function(){return s}});var r=n(213980),i=n(564470);let s=r.shape({service:i.XJ,indexMap:r.shape({get:r.func,has:r.func,set:r.func})}),o={service:null,indexMap:new Map}},924980:function(e,t,n){"use strict";var r=n(213980);let i={analyticsEventAugmentor:r.PropTypes.func.isRequired};t.Z=i},409780:function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}n.d(t,{Z:function(){return r}})},296755:function(e,t,n){"use strict";n.d(t,{X:function(){return f}});var r=n(202784),i=n.n(r),s=n(570528),o=n(398435),a=n(408687),l=n(441365),u=n(438501),d=n(410628),c=n(755755),p=n(528187),E=n(685014),m=n(663761),h=n(31307),b=n(906277);let g=e=>{let t=i().useRef();return i().useEffect(()=>{t.current=e}),t.current},f=e=>{let t=(0,s.y)(),{firstDayOfWeek:n,strings:r,navigatedDate:f,dateRangeType:I,selectedDate:y,dateTimeFormatter:S,onNavigateDate:T,onHeaderSelect:_,onDismiss:O,analyticsId:A,navigatedDayRef:C}=e,v=(0,d.q)(),{formatNumber:R}=(0,c.h)(),L="DatePickerDay-dayPicker",P="DatePickerDay-month",N="DatePickerDay-year",D=i().useCallback(()=>{T((0,p.Z)(f,1),!1)},[f,T]),U=i().useCallback(()=>{T((0,p.Z)(f,-1),!1)},[f,T]),k=i().useCallback(t=>{let{onSelectDate:n,dateRangeType:r,firstDayOfWeek:i,navigatedDate:s,autoNavigateOnSelection:o}=e,l=(0,a.e0)(t,r,i);if(n&&n(t,l),o&&t.getMonth()!==s.getMonth()){let e=(0,a.NJ)(t,s);e<0?U():e>0&&D()}},[e,D,U]),w=i().useCallback(e=>{let{navigatedDate:t,selectedDate:n,dateRangeType:r,firstDayOfWeek:i,today:s}=e,o=new Date(t.getFullYear(),t.getMonth(),1),l=s||new Date,u=[];for(;o.getDay()!==i;)o.setDate(o.getDate()-1);let d=!1,c=(0,a.e0)(n,r,i);for(let e=0;!d;e++){let e=[];d=!0;for(let n=0;n<7;n++){let n=new Date(o.toString()),r={key:o.toString(),date:o.getDate().toString(),originalDate:n,isInMonth:o.getMonth()===t.getMonth(),isToday:(0,a.aN)(l,o),isSelected:(0,a.le)(o,c),onSelected:()=>k(n)};e.push(r),r.isInMonth&&(d=!1),o.setDate(o.getDate()+1)}d||u.push(e)}return u},[k]),M="DatePickerDay-active",[B,G]=i().useState(w(e)),x=g(e);function V(e,t){(t.key===h.s.Enter||" "===t.key)&&(t.preventDefault(),e())}return i().useEffect(()=>{x!==e&&G(w(e))},[e,w,x]),i().createElement("div",{"data-analytics-id":A,className:t.dayPicker,id:L},i().createElement("div",null,i().createElement("div",{className:t.currentDecadeYear,id:N},S.formatYear(f,R)),i().createElement("div",{className:t.navContainer},i().createElement(o.AnalyticsIconButton,{className:(0,b.Z)(t.nextPrevMonth,t.prevNext),"aria-controls":L,"aria-label":r.prevMonthAriaLabel,onClick:U,onKeyDown:function(e){e.key===h.s.Tab&&e.shiftKey&&O&&O({lostFocus:!0,focusNext:!1}),V(U,e)},analyticsId:`${A}.prevMonth.button`},i().createElement(u.TriangleLeft,null)),i().createElement("div",{className:t.header},i().createElement("div",{className:t.headerAxContainer,role:"status","aria-live":"assertive","aria-relevant":"text","aria-atomic":"true",id:P},_?null:i().createElement("div",{className:t.month},S.formatMonth(f,r))),_?i().createElement(o.AnalyticsDefaultButton,{className:t.headerToggleView,onClick:()=>_(!0),"aria-describedby":N,analyticsId:`${A}monthPicker`},S.formatMonth(f,r)):null),i().createElement(o.AnalyticsIconButton,{className:(0,b.Z)(t.nextPrevMonth,t.prevNext),"aria-controls":L,"aria-label":r.nextMonthAriaLabel,onClick:D,onKeyDown:function(e){V(D,e)},analyticsId:`${A}.nextMonth.button`},i().createElement(u.TriangleRight,null)))),i().createElement("table",{className:t.table,"aria-readonly":"true","aria-multiselectable":I===l.NU.Week?"true":"false","aria-labelledby":P,"aria-activedescendant":M,role:"grid"},i().createElement("thead",null,i().createElement("tr",null,r.shortDays.map((e,s)=>i().createElement("th",{className:t.weekday,scope:"col",key:s,"aria-label":r.days[(s+n)%7],role:"columnheader",id:`th${s}`},i().createElement("abbr",null,r.shortDays[(s+n)%7]))))),i().createElement("tbody",null,B.map((e,n)=>i().createElement("tr",{key:n},e.map((e,n)=>{var s;return i().createElement("td",{key:e.key,role:"gridcell"},i().createElement("div",{className:(0,b.Z)(t.day,{[t.dayIsFocused]:e.isInMonth,[t.dayIsUnfocused]:!e.isInMonth,[t.dayIsToday]:e.isToday,[t.dayIsHighlighted]:e.isSelected&&I===l.NU.Day}),role:"button","data-analytics-id":`${A}.daySelected`,onClick:e.onSelected,onKeyDown:(s=e.originalDate,e=>{let t;t=s,e.key===h.s.ArrowUp?t=(0,E.Z)(s,-1):e.key===h.s.ArrowDown?t=(0,E.Z)(s,1):e.key===h.s.ArrowRight?t=(0,m.Z)(s,1):e.key===h.s.ArrowLeft?t=(0,m.Z)(s,-1):e.altKey&&e.key===h.s.PageUp?t=(0,p.Z)(s,-12):e.altKey&&e.key===h.s.PageDown?t=(0,p.Z)(s,12):e.key===h.s.PageUp?t=(0,p.Z)(s,-1):e.key===h.s.PageDown?t=(0,p.Z)(s,1):e.key===h.s.Home?t=(0,a.pU)(s):e.key===h.s.End&&(t=(0,a.D7)(s)),T(t,!0),e.preventDefault()}),"aria-current":e.isToday?"date":void 0,"aria-label":function(e,t){let n=S.formatMonthDayYear(e.originalDate,r);return t?v("cr.components.calendar.ariaSelectedDayLabel",{selectedDate:n}):n}(e,e.isSelected),"aria-describedby":`th${n}`,id:(0,a.aN)(f,e.originalDate)?M:void 0,"data-is-focusable":!0,ref:(0,a.aN)(f,e.originalDate)?C:null,key:(0,a.aN)(f,e.originalDate)?"navigatedDay":void 0},i().createElement("span",null,S.formatDay(e.originalDate,R))))}))))))}},655642:function(e,t,n){"use strict";n.d(t,{C:function(){return b}});var r=n(202784),i=n.n(r),s=n(408687),o=n(852946),a=n(22110),l=n(528187),u=n(398435),d=n(410628),c=n(570528),p=n(158550),E=n(438501),m=n(31307),h=n(906277);let b=(0,p.withAnalytics)(e=>{let t=(0,c.y)(),{navigatedDate:n,strings:r,today:b,highlightCurrentMonth:g,dateTimeFormatter:f,navigatedMonthRef:I,analyticsEventAugmentor:y,onNavigateDate:S,analyticsId:T}=e,_=(0,d.q)(),O=[],A="year_";function C(e,t,n){return(null==n?void 0:n.getFullYear())===t&&n.getMonth()===e}function v(e,t){(t.key===m.s.Enter||" "===t.key)&&e()}function R(){let{navigatedDate:t,onNavigateDate:n}=e;n((0,o.Z)(t,1),!1)}function L(){let{navigatedDate:t,onNavigateDate:n}=e;n((0,o.Z)(t,-1),!1)}function P(){let{onHeaderSelect:t}=e;t&&t(!0)}return r.shortMonths.map((t,n)=>O[n]=()=>(function(t){let{navigatedDate:n,onNavigateDate:r,onHeaderSelect:i}=e;i&&i(!0),r((0,a.Z)(n,t),!0)})(n)),i().createElement("div",{"data-analytics-id":T,className:t.monthPicker},i().createElement("div",{className:t.navContainer},i().createElement(u.AnalyticsIconButton,{className:(0,h.Z)(t.prevNext,t.nextPrevMonth),"aria-label":r.prevYearAriaLabel,onClick:L,onKeyDown:function(e){v(L,e)},analyticsId:`${T}.prevYear.button`},i().createElement(E.TriangleLeft,null)),i().createElement("div",{className:t.header},i().createElement("div",{role:e.onHeaderSelect?"button":void 0,tabIndex:e.onHeaderSelect?0:-1,onClick:e.onHeaderSelect?P:void 0,"data-analytics-id":`${T}.headerToggle`,onKeyDown:e.onHeaderSelect?y(p.AnalyticsEventTypes.CLICK_EVENT,P,`${T}.headerToggle`):void 0,className:e.onHeaderSelect?t.headerToggleView:(0,h.Z)(t.currentDecadeYear,t.monthPickerCurrentYear),id:A},f.formatYear(n))),i().createElement(u.AnalyticsIconButton,{className:(0,h.Z)(t.nextPrevMonth,t.prevNext),"aria-label":r.nextYearAriaLabel,onClick:R,onKeyDown:function(e){v(R,e)},analyticsId:`${T}nextYear.button`},i().createElement(E.TriangleRight,null))),i().createElement("div",{className:t.optionGrid,onFocus:function(){I.current&&(I.current.tabIndex=0,I.current.focus())},tabIndex:0},r.shortMonths.map((e,o)=>i().createElement("span",{role:"button",className:(0,h.Z)(t.monthOption,t.yearMonthOption,{[t.monthIsCurrentMonth]:g&&C(o,n.getFullYear(),b),[t.monthIsHighlighted]:g&&n.getMonth()===o}),key:o,onClick:y(p.AnalyticsEventTypes.CLICK_EVENT,O[o],`${T}.monthSelected`),onKeyDown:e=>{let t;t=n,e.key===m.s.ArrowUp?t=(0,l.Z)(n,-4):e.key===m.s.ArrowDown?t=(0,l.Z)(n,4):e.key===m.s.ArrowRight?t=(0,l.Z)(n,1):e.key===m.s.ArrowLeft?t=(0,l.Z)(n,-1):e.altKey&&e.key===m.s.PageUp?t=(0,l.Z)(n,-12):e.altKey&&e.key===m.s.PageDown?t=(0,l.Z)(n,12):e.key===m.s.PageUp?t=(0,l.Z)(n,-12):e.key===m.s.PageDown?t=(0,l.Z)(n,12):e.key===m.s.Home?t=(0,s.pU)(n):e.key===m.s.End&&(t=(0,s.D7)(n)),S(t,!0),e.preventDefault()},"data-analytics-id":`${T}.monthSelected`,"aria-current":C(o,n.getFullYear(),b)?"date":void 0,"aria-label":function(e,t){let r=n.getMonth()===e,i=function(e,t){let n=new Date(2019,e,1),r=f.formatMonth(n,t);return r}(e,t);return r?_("cr.components.calendar.ariaSelectedDateLabel",{selectedDate:i}):i}(o,r),"aria-describedby":A,"data-is-focusable":!0,ref:n.getMonth()===o?I:void 0},e))))})},570528:function(e,t,n){"use strict";n.d(t,{y:function(){return l}});var r=n(281699);let i="24px",s="28px",o="10px",a="40px",l=(0,r.makeStyles)(e=>(0,r.createStyles)({picker:{color:e.palette.primary.main,fontSize:e.typography.fontSizeMedium,backgroundColor:e.palette.common.white,position:"relative",textAlign:"left"},holder:{WebkitOverflowScrolling:"touch",boxSizing:"border-box",display:"none",[e.breakpoints.up("sm")]:{width:"224px"}},pickerIsOpened:{position:"relative","& $holder":{boxSizing:"border-box",display:"block"}},frame:{padding:"1px",position:"relative"},wrap:{margin:"-1px",padding:"10px",display:"flex"},dayPicker:{display:"block"},header:{display:"inline-flex",height:i,lineHeight:"44px",[e.breakpoints.up("sm")]:{lineHeight:i,flex:1,display:"flex",justifyContent:"center",alignItems:"center"}},headerAxContainer:{[e.breakpoints.up("sm")]:{display:"flex",justifyContent:"center",alignItems:"center"}},month:{display:"inline-block",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.dark,cursor:"pointer"},[e.breakpoints.up("sm")]:{fontSize:"18px",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.main,cursor:"default"}}},year:{marginLeft:"10px",display:"inline-block",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.dark,cursor:"pointer"},[e.breakpoints.up("sm")]:{fontSize:"18px",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.main,cursor:"default"}}},table:{textAlign:"center",borderCollapse:"collapse",borderSpacing:"0",tableLayout:"fixed",fontSize:"inherit",marginTop:"5px",borderTop:`1px solid ${e.palette.border.main}`,"& td":{margin:0,padding:0,border:"1px solid transparent",background:"transparent",textAlign:"center","&:hover":{outline:"1px solid transparent"}}},day:{width:s,height:i,padding:0,lineHeight:i,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.fontSizeDefault,color:e.palette.primary.main,borderRadius:"2px"},weekday:{width:s,height:"30px",padding:0,lineHeight:i,fontSize:e.typography.fontSizeDefault,color:e.palette.primary.main,fontWeight:e.typography.fontWeightBold,"& > abbr[title]":{textDecoration:"none"}},dayIsToday:{fontWeight:e.typography.fontWeightBold,backgroundColor:"inherit",color:e.palette.primary.dark,border:"transparent",[e.palette.highContrastOnly.main]:{border:`1px solid ${e.palette.secondary.main}`},"& $dayIsHighlighted[aria-selected=true]":{color:e.palette.common.white,backgroundColor:e.palette.common.black,fontWeight:e.typography.fontWeightSemiBold,border:`2px solid ${e.palette.common.black}`}},dayIsDisabled:{"&:before":{borderTopColor:e.palette.secondary.light},"&:hover":{background:e.palette.secondary.light}},dayIsUnfocused:{color:e.palette.action.disabled,fontWeight:e.typography.fontWeightRegular,"&:hover":{cursor:"pointer",background:e.palette.secondary.light},"&:active":{backgroundColor:e.palette.focus.dark,border:`2px solid ${e.palette.common.black}`,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold}},dayIsFocused:{"&:hover":{cursor:"pointer",background:e.palette.secondary.light},"&:active":{backgroundColor:e.palette.focus.dark,border:`2px solid ${e.palette.common.black}`,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold}},dayIsHighlighted:{backgroundColor:e.palette.focus.dark,border:`2px solid ${e.palette.common.black}`,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold,"&:hover":{backgroundColor:e.palette.secondary.light,[e.palette.highContrastOnly.main]:{border:`1px solid ${e.palette.secondary.main}`}}},pickerIsFocused:{"& $dayIsHighlighted":{cursor:"pointer",backgroundColor:e.palette.brand.main,"&:hover":{backgroundColor:e.palette.border.dark,[e.palette.highContrastOnly.main]:{border:`1px solid ${e.palette.secondary.main}`}}}},monthComponents:{display:"inline-flex",marginLeft:"3px"},yearComponents:{display:"inline-flex",marginLeft:"3px"},decadeComponents:{display:"inline-flex",marginLeft:"3px"},prevNext:{width:s,height:i,display:"block",textAlign:"center",lineHeight:i,fontSize:e.typography.fontSizeMedium,color:e.palette.primary.dark,position:"relative","&:hover":{color:e.palette.primary.dark,cursor:"pointer",outline:"1px solid transparent"},[e.breakpoints.up("sm")]:{fontSize:e.typography.fontSizeMedium,width:"24px",minHeight:"24px",lineHeight:"24px"}},headerToggleView:{height:i,position:"absolute",width:"130px",cursor:"pointer",backgroundColor:"transparent",color:e.palette.primary.dark,fontSize:"20px",left:"auto",top:"auto",textAlign:"center",fontWeight:e.typography.fontWeightRegular,"&:focus":{backgroundColor:"transparent",position:"absolute"},"&:hover":{backgroundColor:"transparent"}},navContainer:{display:"flex",justifyContent:"center",padding:"0 10px"},currentDecadeYear:{display:"block",fontSize:"14px",color:e.palette.primary.main,lineHeight:"14px",marginBottom:"2px",textAlign:"center"},monthPickerCurrentYear:{display:"flex",alignItems:"center",fontSize:"18px",lineHeight:"1.4",marginBottom:0},optionGrid:{position:"relative",height:"210px",margin:"12px 0 0 0"},yearMonthOption:{width:"60px",height:"60px",lineHeight:"60px",cursor:"pointer",float:"left",margin:"0 10px 10px 0",fontSize:e.typography.fontSizeSmall,color:e.palette.primary.light,textAlign:"center",[e.breakpoints.up("sm")]:{width:a,height:a,lineHeight:a,margin:"0 11px 11px 0","&:hover":{outline:"1px solid transparent"},"&:nth-child(4n+4)":{margin:"0 0px 11px 0"}},"&:active":{backgroundColor:e.palette.primary.dark,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold},"&:hover":{color:e.palette.primary.dark,outline:"1px solid transparent"}},goToday:{bottom:"9px",cursor:"pointer",color:e.palette.primary.main,height:"30px",lineHeight:"30px",padding:"0 10px",position:"absolute",right:"13px",width:"auto",fontSize:e.typography.fontSizeSmall,"&:hover":{color:e.palette.brand.main,outline:"1px solid transparent"},"&:active":{color:e.palette.primary.dark}},goTodaySpacing:{marginBottom:"30px"},isPickingYears:{"& $dayPicker":{display:"none"},"& $monthComponents":{display:"none"},"& $monthPicker":{display:"none"}},monthPickerVisible:{"& $dayPicker":{margin:`-${o} 0`,padding:`${o} 0`,boxSizing:"border-box",borderRight:`1px solid, ${e.palette.primary.light}`,width:"214px"},"& $monthPicker":{display:"block"},"& $optionGrid":{height:"150px"},"& $goToday":{boxSizing:"border-box",fontSize:"12px",height:i,lineHeight:i,padding:"0 10px",right:"10px",textAlign:"right",top:"199px"},"& $isPickingYears":{"& $dayPicker":{display:"block"},"& $monthComponents":{display:"block"},"& $monthPicker":{display:"none"}}},calendarsInline:{"& $wrap":{padding:"10px"},"& $holder":{width:"440px",height:"auto"},"& $table":{marginRight:"10px"},"& $monthPicker":{marginLeft:"10px"},"& $goToday":{right:"13px"}},nextPrevMonth:{display:"inline-block"},monthIsHighlighted:{backgroundColor:e.palette.primary.dark,color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold,"&:hover":{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold}},monthIsCurrentMonth:{fontWeight:e.typography.fontWeightSemiBold,color:e.palette.primary.contrastText,backgroundColor:e.palette.brand.main,"&:hover":{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold}},monthOption:{"&:active":{backgroundColor:e.palette.primary.dark,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold}},topLeftCornerDate:{borderRadius:0},topRightCornerDate:{borderRadius:0},bottomLeftCornerDate:{borderRadius:0},bottomRightCornerDate:{borderRadius:0},singleTopDate:{borderRadius:0},singleBottomDate:{borderRadius:0},monthPicker:{},root:{boxSizing:"border-box",boxShadow:"none"}}))},408687:function(e,t,n){"use strict";n.d(t,{NJ:function(){return d},aN:function(){return u},e0:function(){return c},D7:function(){return l},pU:function(){return a},le:function(){return p}});var r=n(441365),i=n(663761),s=n(528187),o={MillisecondsInOneDay:864e5,MillisecondsIn1Sec:1e3,MillisecondsIn1Min:6e4,MillisecondsIn30Mins:18e5,MillisecondsIn1Hour:36e5,MinutesInOneDay:1440,MinutesInOneHour:60,DaysInOneWeek:7,MonthInOneYear:12};function a(e){return new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0)}function l(e){return new Date(e.getFullYear(),e.getMonth()+1,0,0,0,0,0)}function u(e,t){return!e&&!t||!!e&&!!t&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function d(e,t){return m(e)-m(t)}function c(e,t,n,a){let l,d;let c=[],p=null;switch(a||(a=[r.eO.Monday,r.eO.Tuesday,r.eO.Wednesday,r.eO.Thursday,r.eO.Friday]),t){case r.NU.Day:l=E(e),p=(0,i.Z)(l,1);break;case r.NU.Week:case r.NU.WorkWeek:var m;(d=n-(m=E(e)).getDay())>0&&(d-=o.DaysInOneWeek),l=(0,i.Z)(m,d),p=(0,i.Z)(l,o.DaysInOneWeek);break;case r.NU.Month:l=new Date(e.getFullYear(),e.getMonth(),1),p=(0,s.Z)(l,1);break;default:return function(e){throw Error("Unexpected object: "+e)}(t)}let h=l;do t!==r.NU.WorkWeek?c.push(h):a.includes(h.getDay())&&c.push(h),h=(0,i.Z)(h,1);while(!u(h,p));return c}function p(e,t){for(let n of t)if(u(e,n))return!0;return!1}function E(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function m(e){return e.getDate()+(e.getMonth()<<5)+(e.getFullYear()<<9)}},441365:function(e,t,n){"use strict";var r,i,s,o,a,l,u,d;n.d(t,{NU:function(){return o},eO:function(){return r}}),(a=r||(r={}))[a.Sunday=0]="Sunday",a[a.Monday=1]="Monday",a[a.Tuesday=2]="Tuesday",a[a.Wednesday=3]="Wednesday",a[a.Thursday=4]="Thursday",a[a.Friday=5]="Friday",a[a.Saturday=6]="Saturday",(l=i||(i={}))[l.January=0]="January",l[l.February=1]="February",l[l.March=2]="March",l[l.April=3]="April",l[l.May=4]="May",l[l.June=5]="June",l[l.July=6]="July",l[l.August=7]="August",l[l.September=8]="September",l[l.October=9]="October",l[l.November=10]="November",l[l.December=11]="December",(u=s||(s={}))[u.FirstDay=0]="FirstDay",u[u.FirstFullWeek=1]="FirstFullWeek",u[u.FirstFourDayWeek=2]="FirstFourDayWeek",(d=o||(o={}))[d.Day=0]="Day",d[d.Week=1]="Week",d[d.Month=2]="Month",d[d.WorkWeek=3]="WorkWeek"},247802:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(202784),i=n(609582),s=n(906277),o=n(372351),a=n(491407);let l=e=>{let t;let n=(0,a.y)();return e.file.viewerUrl?t=n.fileViewerContainerIframe:"image"===(0,o.V4)(e.file)&&(t=n.fileViewerContainerImage),r.createElement("div",{className:(0,s.Z)(n.fileViewerContainer,t)},function(e){let{file:t,disableMediaModal:n,analyticsId:s,inlineMediaAdditionalAttributes:a}=e;if(t.viewerUrl)return r.createElement("iframe",{src:t.viewerUrl,allowFullScreen:!0,allow:"clipboard-write *",...t.alternativeText?{title:t.isDecorative?"":t.alternativeText}:null,...a});switch((0,o.V4)(t)){case"image":return r.createElement(i.MediaGallery,{disabled:n,analyticsId:`${s}.media-gallery`},t.isDecorative?r.createElement("img",{src:t.resourceUrl,...a,alt:""}):t.alternativeText?r.createElement("img",{src:t.resourceUrl,...a,alt:t.alternativeText}):r.createElement("img",{src:t.resourceUrl,...a}));case"video":return r.createElement(i.VideoPlayer,{videoSrc:t.resourceUrl,altText:t.alternativeText,additionalAttributes:a});case"audio":return r.createElement(i.AudioPlayer,{audioSrc:t.resourceUrl,altText:t.alternativeText,additionalAttributes:a});default:return r.createElement(r.Fragment,null)}}(e))}},688580:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var r=n(755755);let i=()=>{let{babelfishFormat:e,locale:t}=(0,r.h)(),n=e.getFormatterSync(t);return n.cldr.main("listPatterns/listPattern-type-standard")};var s=n(305163),o=n(325135);let a=/\{[01]\}/;class l{parse(e){return{2:e["2"].split(a),start:e.start.split(a),middle:e.middle.split(a),end:e.end.split(a)}}}(0,s.gn)([(0,o.LRUMemoize)(),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[Object]),(0,s.w6)("design:returntype",Object)],l.prototype,"parse",null);let u=new l,d=()=>{let e=i();return u.parse(e)}},49678:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(281699);let i=(0,r.makeStyles)(e=>({button:{color:e.palette.link.active,textDecoration:"underline",verticalAlign:"baseline","&:hover":{color:e.palette.link.focus},"&:focus":{color:e.palette.link.hover}},close:{marginInlineStart:"6px"}}))},553239:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var r=n(281699),i=n(346304);let s=(0,r.makeStyles)(()=>({localizedNumberInput:e=>{let{locale:t,displayWesternNumbers:n,inlineLabel:r}=e,s=(0,i.sh)(t,n),o=s?"right":"inherit";return{flip:!s,textAlign:o,display:r?"inline-block":"block","& label":{display:r?"inline-block":"block"},'& input[type="text"], & input[type="text"]:focus':{flip:!s,textAlign:o,margin:"0",background:"transparent",height:"auto",boxShadow:"none",minHeight:"34px",border:"none",outline:"none"}}}}))},337486:function(e,t,n){"use strict";n.d(t,{Di:function(){return o},GM:function(){return c},Il:function(){return u},UZ:function(){return d},Z3:function(){return a},hN:function(){return l}});var r=n(202784),i=n(755755),s=n(346304);let o=e=>e.indexOf("E")>-1||e.indexOf("e")>-1,a=(e,t)=>(0,s.sh)(e,t)?"en-us":e,l=(e,t)=>(0,s.sh)(e,t)?"ltr":void 0,u=e=>{e=e.indexOf("E")>0?e.replace("E","e"):e;let t=e.substring(e.indexOf("e")),n=e.substring(0,e.length-t.length);return{integer:n,exponentialNotation:t}},d=(e,t,n,r,i={})=>{var a,l;if(null==t||!Number.isFinite(t))return"";let u=o(t.toString())?"scientific":"standard",d=(0,s.sh)(e,n),c={...i,notation:u};d&&(c.numberingSystem="latn");let p=null===(l=null===(a=null==r?void 0:r.getFormatterSync)||void 0===a?void 0:a.call(r,e).cldr)||void 0===l?void 0:l.locale,E=[];if(p){E.push(p);let e=p.split("-");E.push(`${e[0]}-${e[1]}`)}E.push("en-US");let m=e=>{let n=new Intl.NumberFormat(e,{...c}).formatToParts(t);return n.map(t=>{switch(t.type){case"decimal":return"٫"!==r.number.getDecimalStringSync(e)&&d||!d?r.number.getDecimalStringSync(e):t.value;case"group":return"٬"!==r.number.getGroupingStringSync(e)&&d||!d?r.number.getGroupingStringSync(e):t.value;default:return t.value}}).join("")},h=E.shift();for(;h;)try{return m(h)}catch(e){h=E.shift()}return t.toString()},c=({value:e,numberFormatOptions:t,displayWesternNumbers:n=!1})=>{let{babelfishFormat:s,locale:o}=(0,i.h)(),[a,l]=r.useState(d(o,e,n,s,t)),[u,c]=r.useState(e);return r.useEffect(()=>{e!==u&&(c(e),l(d(o,e,n,s,t)))},[e,l,t,c,u,o,n,s]),{displayValue:a,setDisplayValue:l,numericValue:u,setNumericValue:c}}},729094:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var r=n(202784),i=n(276635),s=n(854230),o=n(398435);let a=r.memo(({analyticsId:e,item:t,onChange:n})=>{let i=(0,s.y)();return r.createElement(o.AnalyticsListItem,{analyticsId:`${e}.listItem`,className:i.listItem,disableGutters:!0},r.createElement(o.AnalyticsFormControlLabel,{analyticsId:`${e}.formControlLabel`,label:t.label,htmlFor:`ind-checkbox-${t.value}`,control:r.createElement(o.AnalyticsCheckbox,{analyticsId:`${e}.multiSelectItem.input.checkbox`,id:`ind-checkbox-${t.value}`,checked:t.checked,value:t.value,onChange:n})}))},i.isEqual)},854230:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(281699);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({multiSelectContainer:{backgroundColor:e.palette.background.b1,paddingLeft:"12px",overflowX:"hidden",maxHeight:"130px","&.with-scroll":{overflowY:"scroll"}},divider:{marginRight:"0",marginBottom:"3px"},MultiselectCheckbox:{width:"100%","& fieldset":{width:"100%"}},multiselectFormControl:{"&.MuiFormControl-root":{width:"100%"}},list:{width:"100%"},listItem:{paddingTop:"0",paddingBottom:"0"}}))},883608:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(281699);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({panelHeaderControlsRoot:t=>({"& a:focus":{color:e.palette.secondary.main},"& a:hover":{color:e.palette.primary.contrastText},minWidth:t.minWidth?`${t.minWidth}px`:"auto",flex:1,display:"flex",justifyContent:"flex-end",[e.breakpoints.up("md")]:{display:"block",flex:0,justifyContent:"center",marginLeft:0}}),panelHeaderControlsWrapper:{display:"flex"}}))},587913:function(e,t,n){"use strict";var r=n(281699),i=n(906277),s=n(202784),o=n.n(s);let a=(0,r.makeStyles)({body:{display:"flex",flexDirection:"column",padding:"0 30px"}});(0,s.forwardRef)(function(e,t){let{children:n,className:r,...s}=e,l=a();return o().createElement("div",{className:(0,i.Z)(l.body,r),ref:t,...s},n)})},83590:function(e,t,n){"use strict";n(202784),(0,n(281699).makeStyles)(()=>({clampText:{display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical",overflow:"hidden"},toggleTruncateButtonContainer:{marginTop:"20px"},internalTextContent:{cursor:"text",margin:0,wordBreak:"break-word",overflowWrap:"anywhere"}})),n(884391),n(198022),n(124860)},165856:function(e,t,n){"use strict";n.d(t,{v:function(){return m}});var r,i,s=n(202784),o=n(958299),a=n(438501),l=n(619034),u=n.n(l),d=n(664071),c=n(755755);(r=i||(i={}))[r.Up=1]="Up",r[r.Down=-1]="Down";let p=new Map([[d.d.Hour,"h"],[d.d.Minute,"m"],[d.d.AmPm,"h"]]),E=e=>{e.stopPropagation();let t=e.which;(t===d.m.Up||t===d.m.Down||t===d.m.Home||t===d.m.End||t===d.m.Left||t===d.m.Right||t===d.m.Pageup||t===d.m.Pagedown)&&e.preventDefault()},m=e=>{let{formatNumber:t,parseNumber:n,isRtl:r}=(0,c.h)(),l=p.get(e.type),m=()=>{let{type:t,is24hr:n}=e;return t===d.d.Hour?n?0:1:0},h=()=>{let{type:t,is24hr:n}=e;return t===d.d.Hour?n?23:12:59},b=t=>{let{date:n,onChangeValue:r}=e,i=u()(n);e.type===d.d.AmPm?i.add(12*t,l):i.add(1*t,l),r(i.toDate())},g=(t,n)=>{let{closeSpinner:r,onChangeValue:i}=e;E(t);let s=t.which;s===d.m.Esc?r():(s===d.m.Up||s===d.m.Down||s===d.m.Home||s===d.m.End||s===d.m.Left||s===d.m.Right||s===d.m.Pageup||s===d.m.Pagedown)&&i(n.add(12,"h").toDate())},f=s.useCallback(t=>{let{onChangeValue:n,closeSpinner:i,type:s,is24hr:o,date:a}=e,c=u()(a);if(s===d.d.AmPm){g(t,c);return}switch(E(t),t.which){case d.m.Esc:i();break;case d.m.Right:{let e=r()?-1:1;n(c.add(e,l).toDate());break}case d.m.Up:n(c.add(1,l).toDate());break;case d.m.Left:{let e=r()?1:-1;n(c.add(e,l).toDate());break}case d.m.Down:n(c.add(-1,l).toDate());break;case d.m.Pageup:s===d.d.Hour?n(c.add(3,l).toDate()):s===d.d.Minute&&n(c.add(10,l).toDate());break;case d.m.Pagedown:s===d.d.Hour?n(c.add(-3,l).toDate()):s===d.d.Minute&&n(c.add(-10,l).toDate());break;case d.m.Home:s===d.d.Hour?n(c.hour(o?23:12).toDate()):s===d.d.Minute&&n(c.minute(59).toDate());break;case d.m.End:s===d.d.Hour?n(c.hour(o?0:1).toDate()):s===d.d.Minute&&n(c.minute(0).toDate())}},[e.date]),I=(e,r)=>{let i=n(e),s=m(),o=h();return Number.isNaN(i)?n(r).toString():i>=s&&i<=o?e:i<s?t(s):t(o)},y=s.useCallback(t=>{let{type:n,value:r,updateTimeInput:i}=e,s=t.target.value;if(n===d.d.AmPm){i({amPm:s.toUpperCase()});return}let o=I(s,r);i(n===d.d.Hour?{hour:o}:{minute:o})},[e.value]),S=s.useCallback(t=>{E(t),t.which===d.m.Esc&&e.closeSpinner()},[]);return s.createElement("div",{className:e.className},s.createElement(o.AnalyticsIconButton,{"aria-label":e.ariaLabel.upButton,className:"spinner-btn",onKeyUp:S,onClick:()=>b(i.Up),onKeyDown:E,title:e.ariaLabel.upButton,analyticsId:e.analyticsId.upButton,"data-testid":"add-btn"},s.createElement(a.ArrowUp,null)),s.createElement("input",{type:"text",className:e.className+"-input",ref:e.inputRef,"aria-label":e.ariaLabel.input,value:e.value,role:"spinbutton","aria-valuenow":parseInt(e.value,10),"aria-valuemax":h(),"aria-valuemin":m(),onChange:y,onFocus:e=>e.target.select(),onKeyUp:f,onKeyDown:E,onKeyPress:t=>{t.which===d.m.Enter&&e.closeSpinner()},onClick:e.onInputClick,"data-analytics-id":e.analyticsId.input}),s.createElement(o.AnalyticsIconButton,{"aria-label":e.ariaLabel.downButton,className:"spinner-btn",onClick:()=>b(i.Down),onKeyUp:S,onKeyDown:E,title:e.ariaLabel.downButton,analyticsId:e.analyticsId.downButton,"data-testid":"sub-btn"},s.createElement(a.ArrowDown,null)))}},664071:function(e,t,n){"use strict";var r,i,s,o;n.d(t,{d:function(){return r},m:function(){return i}}),(s=r||(r={})).Hour="hour",s.Minute="minute",s.AmPm="amPm",(o=i||(i={}))[o.Pageup=33]="Pageup",o[o.Pagedown=34]="Pagedown",o[o.End=35]="End",o[o.Home=36]="Home",o[o.Left=37]="Left",o[o.Up=38]="Up",o[o.Right=39]="Right",o[o.Down=40]="Down",o[o.Esc=27]="Esc",o[o.Enter=13]="Enter"},346304:function(e,t,n){"use strict";n.d(t,{AO:function(){return o},Lk:function(){return i},U_:function(){return s},nM:function(){return a},sh:function(){return r}});let r=(e,t)=>e.toLowerCase().startsWith("ar-sa")&&t,i=(e,t,n,i,s,o)=>{r(s,o)&&(e=e.replace(/,/g,""));let a=i(e.substring(t,e.length-n));return 1===t&&(a*=-1),{value:a,integerString:e}},s=(e,t)=>{if(e.charAt(e.length-1)===t){let n=e.match(RegExp(`\\${t}`,"g"));return n&&n.length<=1}return!1},o=e=>{let t=0;for(;t<e.length;){let n=e.charCodeAt(t);if(![8207,8206,1564].includes(n))break;t+=1}return e.substring(t)},a=e=>45===e.charCodeAt(0)||8722===e.charCodeAt(0)},239849:function(e,t,n){"use strict";n.d(t,{g6:function(){return s},jI:function(){return o}});var r=n(416599),i=n(458874);async function s(e){var t,n;await e.validate();let i=e.toRequest(),s=await fetch(i),o=e.getSession();if((null==o?void 0:o.cookies)!=null){let e=null!==(t=(0,r.ej)(s))&&void 0!==t?t:"";o.cookies=o.cookies?(0,r.dn)(e,null!==(n=o.cookies)&&void 0!==n?n:""):e}return s.ok||await e.failed(s),s}async function o(e){var t;let n=await s(e),r=null!==(t=n.headers.get("Content-Type"))&&void 0!==t?t:"";return r.startsWith("application/json")||console.warn(`Expected API response to be of type "application/json" but its actual Content-Type is ${r}`,JSON.stringify(e)),(0,i.F)(n)}},784019:function(e,t,n){"use strict";n.d(t,{A:function(){return r.A},c:function(){return r.c}});var r=n(298433)},458874:function(e,t,n){"use strict";n.d(t,{F:function(){return s},b:function(){return i}});let r=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{3})?Z$/;function i(e){return JSON.parse(e,(e,t)=>"string"==typeof t&&r.test(t)?new Date(t):t)}async function s(e){let t=await e.text();return i(t)}},137301:function(e,t,n){"use strict";n.d(t,{N:function(){return d}});var r=n(416599),i=n(458874),s=n(784019);class o extends s.A{constructor(){super(s.c.Aborted)}}class a{setXhrRequest(e){this.xhr=e}abort(){var e;null===(e=this.xhr)||void 0===e||e.abort()}}class l{constructor(){this.subscribers=[]}subscribe(e){return this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);t>=0&&this.subscribers.splice(t)}}clear(){this.subscribers=[]}push(e){this.subscribers.forEach(t=>{t(e)})}}async function u(e,t,n){await e.validate();let i=e.toXhr();return n.setXhrRequest(i),new Promise((n,s)=>{i.upload.addEventListener("progress",e=>{t.push({lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})}),i.addEventListener("load",()=>{var o,a;let l=e.getSession();if((null==l?void 0:l.cookies)!=null){let e=null!==(o=(0,r.mC)(i))&&void 0!==o?o:"";l.cookies=l.cookies?(0,r.dn)(e,null!==(a=l.cookies)&&void 0!==a?a:""):e}t.clear(),(i.status<200||i.status>=300)&&s(e.xhrFailed(i.response)),n({response:i.response,request:i})}),i.addEventListener("abort",()=>{t.clear(),s(new o)}),i.upload.addEventListener("error",()=>{t.clear(),s(e.xhrFailed())}),i.send(e.xhrBody())})}function d(e){let t=new l,n=new a,r=u(e,t,n).then(({response:t,request:n})=>{var r;let s=null!==(r=n.getResponseHeader("Content-Type"))&&void 0!==r?r:"";return s.startsWith("application/json")||console.warn(`Expected API response to be of type "application/json" but its actual Content-Type is ${s}`,e.toString()),(0,i.b)(t)});return{result:r,progress:t,abort:n}}},416599:function(e,t,n){"use strict";function r(e){var t;if(!e.headers.raw)return null!==(t=e.headers.get("Set-Cookie"))&&void 0!==t?t:"";let n=e.headers.raw()["set-cookie"];return n.map(e=>e.split(";")[0]).join(";")}function i(e){var t;return null!==(t=e.getResponseHeader("Set-Cookie"))&&void 0!==t?t:""}function s(e,t){let n=e.split(";");return t.split(";").forEach(e=>{var t;let r=e.split("=");t=r[0],n.some(e=>e.split("=")[0]===t)||n.push(`${r[0]}=${r[1]}`)}),n.join(";")}n.d(t,{dn:function(){return s},ej:function(){return r},mC:function(){return i}})},447006:function(e,t,n){"use strict";n.d(t,{w$:function(){return o},oj:function(){return s},AT:function(){return l.AT},cw:function(){return l.cw},g6:function(){return l.g6},jI:function(){return l.jI},Nz:function(){return l.Nz},qU:function(){return a.Z}});var r,i,s,o,a=n(128747),l=n(722556);(r=s||(s={}))[r.Ok=200]="Ok",r[r.Created=201]="Created",r[r.Accepted=202]="Accepted",r[r.NoContent=204]="NoContent",r[r.BadRequest=400]="BadRequest",r[r.Unauthorized=401]="Unauthorized",r[r.Forbidden=403]="Forbidden",r[r.NotFound=404]="NotFound",r[r.Conflict=409]="Conflict",r[r.TooManyRequests=429]="TooManyRequests",r[r.InternalServerError=500]="InternalServerError",(i=o||(o={})).Get="GET",i.Delete="DELETE",i.Patch="PATCH",i.Post="POST",i.Put="PUT"},523984:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var r=n(517216);let i="bb-auto-resize",s={className:i,html:()=>`
<script class="${r.FX} ${i}" type="text/javascript">
  document.documentElement.style.height = 0;
  var resizeFunc = () => {
    var height = document.documentElement.scrollHeight;
    var source = new URL(document.referrer).origin;
    var w = window;
    while (w !== top) {
      w = w.parent;
      w.postMessage({ type: '${i}', height }, source);
    }
  }
  window.addEventListener('load', resizeFunc);
  window.addEventListener('resize', resizeFunc);
</script>
`,listener:e=>{let t=t=>{var n;if((null===(n=t.data)||void 0===n?void 0:n.type)===i&&e.contentWindow===t.source){let{height:n}=t.data;Number.isNaN(n)||(e.height=String(n))}};return window.addEventListener("message",t,!1),()=>window.removeEventListener("message",t)}}},911209:function(e,t,n){"use strict";n(753031),n(447006)},485293:function(e,t,n){"use strict";n(753031),n(447006),n(348834).Buffer},448999:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var r=n(753031);class i extends r.wx{constructor(){super("v1/utilities/batch")}}var s=n(447006);async function o(e,t){let n=t.map(e=>({method:e.method,relativeUrl:e.getRelativeUrl(),body:e.getBody()})),r=new i().withSession(e).withBody(n);return(0,s.jI)(r)}},364854:function(e,t,n){"use strict";n(753031),n(447006)},211010:function(e,t,n){"use strict";n(447006),n(753031)},552766:function(e,t,n){"use strict";n(753031)},71888:function(e,t,n){"use strict";n(447006),n(552766)},546242:function(e,t,n){"use strict";n(753031)},56084:function(e,t,n){"use strict";n(546242),n(447006)},648191:function(e,t,n){"use strict";n.d(t,{B3:function(){return o},dv:function(){return s},vk:function(){return i}});var r=n(753031);class i extends r.Ds{constructor(){super("/v1/courses")}}class s extends r.SB{constructor(e){super("/v1/courses/%courseId%",e)}}class o extends r.t9{constructor(e){super("/v1/courses/%courseId%",e)}}},906743:function(e,t,n){"use strict";n(447006),n(268295),n(753031)},14796:function(e,t,n){"use strict";n.d(t,{LT:function(){return i},eL:function(){return s},gC:function(){return a},o2:function(){return o}});var r=n(753031);class i extends r.B_{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class s extends r.Ds{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class o extends r.$v{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class a extends r.B_{constructor(e){super("/v1/courses/%courseId%/groupsets/import",e)}}},375571:function(e,t,n){"use strict";n.d(t,{C0:function(){return o},MQ:function(){return a},lZ:function(){return l},uV:function(){return s}});var r=n(447006),i=n(14796);async function s(e,t,n,s){let o=new i.LT({courseId:t,groupSetId:n}).withSession(e).withBody(s);return(0,r.g6)(o)}async function o(e,t,n,s){let o=new i.eL({courseId:t,groupSetId:n}).withSession(e);return s.paging&&o.withPaging(s.paging),s.sort&&o.withSort(...s.sort),(0,r.jI)(o)}async function a(e,t,n,s){let o=new i.o2({courseId:t,groupSetId:n}).withSession(e).withQueryParams(s);return(0,r.g6)(o)}async function l(e,t,n){let s=new i.gC({courseId:t}).withSession(e).withBody(n);return(0,r.g6)(s)}},989014:function(e,t,n){"use strict";n.d(t,{$p:function(){return i}});var r=n(753031);class i extends r.Ds{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/assignedGroups",e)}}},848245:function(e,t,n){"use strict";n(753031)},431190:function(e,t,n){"use strict";n(848245),n(447006)},276314:function(e,t,n){"use strict";n(447006),n(753031),n(961702)},111519:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(753031);class i extends r.SB{constructor(e){super("v1/courses/%courseId%/users/%userId%",e)}}},554141:function(e,t,n){"use strict";n(447006),n(753031)},805801:function(e,t,n){"use strict";n.d(t,{K:function(){return s},l:function(){return o}});var r=n(753031);let i="/v1/courses/%courseId%/tools/%toolId%";class s extends r.SB{constructor(e){super(i,e)}}class o extends r.t9{constructor(e){super(i,e)}}},367991:function(e,t,n){"use strict";n.d(t,{LQ:function(){return a},NR:function(){return o},Wx:function(){return l}});var r,i,s=n(753031);(r=i||(i={})).Landscape="landscape",r.Portrait="portrait",r.Squarish="squarish";class o extends s.SB{constructor(e){super("/v1/courses/%courseId%/unsplash/search",e)}}class a extends s.B_{constructor(e){super("/v1/courses/%courseId%/unsplash/downloadNotify",e)}}class l extends s.SB{constructor(e){super("/v1/courses/%courseId%/unsplash/settings",e)}}},96823:function(e,t,n){"use strict";n.d(t,{In:function(){return o},LX:function(){return a},Y0:function(){return s},i7:function(){return i}});var r=n(372730);class i extends r.Ds{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes",e)}}class s extends r.B_{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes",e)}}class o extends r.t9{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes/%noteId%",e)}}class a extends r.$v{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes/%noteId%",e)}}},60519:function(e,t,n){"use strict";n(791855),n(753031),n(447006)},148591:function(e,t,n){"use strict";n.d(t,{ab:function(){return o},mH:function(){return i},qh:function(){return s}});var r=n(753031);class i extends r.Ds{constructor(){super("/v1/featureFlags")}}class s extends r.SB{constructor(e){super("/v1/featureFlags/%flagKey%",e)}}class o extends r.wx{constructor(e){super("/v1/featureFlags/%flagKey%",e)}}},744819:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(753031);class i extends r.SB{constructor(e){super("/v1/courses/%courseId%/gradebook/memberships/%membershipId%/exceptions",e)}}},995867:function(e,t,n){"use strict";n(753031)},876558:function(e,t,n){"use strict";n(995867),n(447006)},802077:function(e,t,n){"use strict";n(753031)},219604:function(e,t,n){"use strict";n(802077),n(447006)},567053:function(e,t,n){"use strict";n(753031)},70854:function(e,t,n){"use strict";n(567053),n(447006)},249873:function(e,t,n){"use strict";n(753031)},871750:function(e,t,n){"use strict";n(249873),n(447006)},596130:function(e,t,n){"use strict";n(753031)},299541:function(e,t,n){"use strict";n.d(t,{AD:function(){return o},YW:function(){return u},_2:function(){return a},j7:function(){return l},r:function(){return d}});var r=n(753031);let i="/v1/courses/%courseId%/gradebook/schemas",s=`${i}/%schemaId%`;class o extends r.SB{constructor(e){super(i,e)}}class a extends r.SB{constructor(e){super(s,e)}}class l extends r.B_{constructor(e){super(i,e)}}class u extends r.t9{constructor(e){super(s,e)}}class d extends r.$v{constructor(e){super(s,e)}}},709663:function(e,t,n){"use strict";n.d(t,{Pe:function(){return i},RF:function(){return a},W8:function(){return l},ZD:function(){return s},jd:function(){return o}});var r=n(753031);class i extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers",e)}}class s extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/questions/%questionId%/answers",e)}}class o extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/grades",e)}}class a extends r.t9{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%",e)}}class l extends r.t9{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%/grades",e)}}},150223:function(e,t,n){"use strict";n.d(t,{L:function(){return i},U:function(){return s}});var r=n(753031);class i extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/questions/grading-status/summaries",e)}}class s extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/%questionBlockId%/questions/grading-status/summaries",e)}}},407619:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(753031);class i extends r.SB{constructor(e){super("webapps/partner-cloud/app/v1/providers/%providerId%/settings",e)}}var s=n(447006);async function o(e,t){let n=new i({providerId:t}).withSession(e);return(0,s.jI)(n)}},961338:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(753031);class i extends r.SB{constructor(e){super("v1/scheduledTasks/%taskId%/",e)}}},178829:function(e,t,n){"use strict";n.d(t,{h3:function(){return s},ke:function(){return i}});var r=n(753031);class i extends r.SB{constructor(e){super("v1/users/%userId%",e)}}class s extends r.SB{constructor(e){super("v1/courses/%courseId%/spreview",e)}}},675663:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(753031);class i extends r.SB{constructor(e){super("/public/v1/attemptReceipts/%receiptId%",e)}}},238479:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=n(753031);class i extends r.SB{constructor(){super("/public/v1/uploads/settings")}}},998863:function(e,t,n){"use strict";n.d(t,{GS:function(){return o.G},C9:function(){return r.C},QK:function(){return d},yZ:function(){return c},rj:function(){return E},_B:function(){return p}});var r=n(826423),i=n(753031),s=n(447006),o=n(851890),a=n(655294);class l extends i.Ds{constructor(e){super("/public/v1/lti/placements",e)}}class u extends i.B_{constructor(){super("/public/v1/lti/placements")}}function d(e,t){let n=new a.Z({}).withSession(e);return t&&n.withPaging(t),(0,s.jI)(n)}function c(e,t){var n,r;let i=new l({}).withSession(e);return(null===(n=null==t?void 0:t.filter)||void 0===n?void 0:n.paging)&&i.withPaging(t.filter.paging),(null===(r=null==t?void 0:t.filter)||void 0===r?void 0:r.sort)&&i.withSort(...t.filter.sort),(null==t?void 0:t.query)&&i.withQueryParams(t.query),(0,s.jI)(i)}function p(e,t){let n=new u().withSession(e);return n.withBody(t),(0,s.jI)(n)}function E(e,t){let n=new a.q().withSession(e);return n.withBody(t),(0,s.jI)(n)}},671071:function(e,t,n){"use strict";n.d(t,{Gr:function(){return o},Qh:function(){return s}});var r=n(447006),i=n(791855);let s="Content-Type";class o{constructor(e,t,n){this.pathParams={},this.session=void 0,this.method=e,this.path=t,this.query=new URLSearchParams,this.headers=new Headers,n&&this.withPathParams(n)}getRelativeUrl(){let e=this.path;if(this.pathParams)for(let[t,n]of Object.entries(this.pathParams))e=e.replace(`%${t}%`,encodeURIComponent(n));let t=this.getQueryString();return t&&(e+=`?${t}`),e}getUrl(){return r.qU.getUrl(this.getRelativeUrl())}getQueryString(){return this.query.toString()}withPathParams(e){return Object.assign(this.pathParams,null!=e?e:{}),this}withQuery(e){for(let[t,n]of Object.entries(e))Array.isArray(n)?this.query.set(t,n.join(",")):void 0!==n&&this.query.set(t,String(n));return this}withQueryParams(e){return this.withQuery(e)}withExpand(...e){return this.withQuery({expand:e})}getSession(){return this.session}withSession(e){return this.session=e,e.xsrfToken&&this.headers.set("X-Blackboard-XSRF",e.xsrfToken),e.cookies&&this.headers.set("Cookie",e.cookies),this}requiresSession(){return!1}validate(){return Promise.resolve().then(()=>{var e;if(this.requiresSession()&&!this.session)throw new i.jf("Request requires session but no session info was added");let t=(null!==(e=this.path.match(/%\w+%/g))&&void 0!==e?e:[]).map(e=>e.slice(1,-1)),n=t.filter(e=>!this.pathParams[e]);if(n.length>0)throw new i.jf(`Request is missing required path params: [${n}]`)})}async failed(e){throw new i.VL(await e.text(),e.status,this.getUrl())}getRequestInit(){return{credentials:"same-origin",method:this.method,headers:this.headers}}toRequest(e){return new Request(null!=e?e:this.getUrl(),this.getRequestInit())}toString(){return`[LearnRequest: ${this.method} ${this.getUrl()}]`}}},310242:function(e,t,n){"use strict";function r(e,t){if(0===t.length)return"";let n=e.split("?"),r=n[0].split("/"),i=r.indexOf(t);return i+1<r.length?r[i+1]:""}n.d(t,{S:function(){return r}})},791855:function(e,t,n){"use strict";n.d(t,{jf:function(){return i},Hy:function(){return s.H},VL:function(){return o}});class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class i extends r{}var s=n(627482);class o extends Error{constructor(e,t,n){super(`HTTP ${t}: ${n}`),this.response=e,this.status=t,Object.setPrototypeOf(this,new.target.prototype)}get statusCode(){return this.status}get responseMessage(){return this.response}}},22156:function(e,t,n){"use strict";var r,i;(i=r||(r={})).CourseName="N",i.CourseId="I",i.CourseNameAndId="NI",i.CourseIdAndName="IN",i.UltraCourseIdAndName="UIN"},513855:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Enabled="0",i.SoftDelete="1",i.Disabled="2",i.DeletePending="3",i.CopyPending="4"},810910:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Group="group",i.User="user"},328694:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Success="SUCCESS",i.Incomplete="INCOMPLETE",i.Error="ERROR"},580940:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});let r="mdb-sa"},988747:function(e,t,n){"use strict";var r,i;n.d(t,{D:function(){return r}}),(i=r||(r={})).Attendance="resource/x-bb-attendance",i.Audio="resource/x-bb-audio",i.Blog="resource/x-bb-bloglink",i.ClassicAssignment="resource/x-bb-assignment",i.CourseLink="resource/x-bb-courselink",i.Discussion="resource/x-bb-forumlink",i.Document="resource/x-bb-document",i.ExternalLink="resource/x-bb-externallink",i.File="resource/x-bb-file",i.Folder="resource/x-bb-folder",i.LearningModule="resource/x-bb-lesson",i.Image="resource/x-bb-image",i.Journal="resource/x-bb-journallink",i.Kaltura="resource/x-osv-kaltura/mashup",i.LtiLink="resource/x-bb-blti-link",i.LtiPlacement="resource/x-bb-bltiplacement",i.Page="resource/x-bb-page",i.PartnerCloud="resource/x-bbgs-partner-cloud",i.RusticiScorm="resource/x-plugin-scormengine",i.SurveyLink="resource/x-bb-asmt-survey-link",i.TestLink="resource/x-bb-asmt-test-link",i.UltraAssignment="resource/x-bb-asmt-agn-link",i.Unknown="resource/x-bb-unknown",i.Video="resource/x-bb-video",i.Wiki="resource/x-bb-wiki"},123314:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Score="SCORE",i.Completion="COMPLETION",i.Satisfaction="SATISFACTION"},478220:function(e,t,n){"use strict";var r,i;n.d(t,{y:function(){return r}}),(i=r||(r={})).Yes="Yes",i.No="No"},562111:function(e,t,n){"use strict";var r,i,s,o;(s=r||(r={})).Approved="Approved",s.Excluded="Excluded",s.NeedsApproval="NeedsApproval",(o=i||(i={})).Never="Never",o.SslOnly="SSLOnly",o.Always="Always"},662594:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var r=n(44432);let i=r.I0},11931:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var r=n(44432);let i=r.v9},610171:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(951248),i=n(11931);let s=e=>(0,i.a)(t=>{if(e)return r.Ys.content.getContentById(t,e)})},102381:function(e,t,n){"use strict";n(610171)},473321:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(951248),i=n(202784),s=n(662594),o=n(610171);let a=(e,t)=>{let n=(0,s.L)(),a=(0,o.N)(t);return(0,i.useEffect)(()=>{t&&!a&&e&&n(r.Nwg.content.loadContents({courseId:e,contentId:t}))},[a,e,t,n]),a}},182596:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var r=n(951248),i=n(202784),s=n(662594),o=n(11931);let a=(e,t)=>{let n=(0,s.L)(),a=(0,o.a)(e=>{var t;return null===(t=r.Ys.app.getRoute(e).params)||void 0===t?void 0:t.courseId}),l=(0,o.a)(e=>{if(a)return r.Ys.course.getCourseById(e,a)});(0,i.useEffect)(()=>{a&&!l&&n(r.Nwg.course.fetchCourse(a))},[l,a,n]);let u=null==l?void 0:l.isOrganization;return n=>u&&n.startsWith(e)?n.replace(e,t):n}},66127:function(e,t,n){"use strict";n(202784),n(443400),n(388632)},440943:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(951248),i=n(202784),s=n(662594),o=n(11931);let a=e=>{let t=(0,s.L)();return(0,i.useEffect)(()=>{e&&t(r.Nwg.course.fetchCourse(e))},[t]),(0,o.a)(t=>e?r.Ys.course.getCourseById(t,e):void 0)}},236932:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(951248),i=n(11931);let s=e=>(0,i.a)(t=>r.Ys.featureFlags.getFeatureFlagValue(t,e))},662976:function(e,t,n){"use strict";n(202784),n(662594),n(951248),n(383242)},183168:function(e,t,n){"use strict";n(202784),n(951248),n(662594),n(11931)},890529:function(e,t,n){"use strict";n(951248),n(202784),n(662594),n(11931)},337767:function(e,t,n){"use strict";function r(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((e,n)=>t[n]===e)}function i(e,t){return e===t||JSON.stringify(e)===JSON.stringify(t)}function s(e,t){if(e===t)return!0;let n=Object.keys(e);if(!r(n,Object.keys(t)))return!1;for(let r of n)if(e[r]!==t[r])return!1;return!0}n.d(t,{AD:function(){return i},TO:function(){return r},yZ:function(){return s}})},176726:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(560985),i=n(715655),s=n(337767);let o=(0,r.wN)(i.PW,s.TO)},491288:function(e,t,n){"use strict";n.d(t,{T2:function(){return d},jQ:function(){return a},nP:function(){return u},vc:function(){return l}});var r=n(408027);let i={apiBasePath:"",xsrf:"",partnerCloudBasePath:""},s={userName:"",xsrfToken:""},o={fetchFoundationsToken:void 0,fetchFoundationsContext:void 0,cookies:void 0,foundationsToken:void 0,foundationsTokenContext:void 0};function a(e){Object.assign(i,e),Object.assign(s,{xsrfToken:e.xsrf,cookies:e.cookies}),Object.assign(o,e.foundationsApiSession),function(e){var t,n,i;let s;s=null!==(n=null===(t=null==globalThis?void 0:globalThis.location)||void 0===t?void 0:t.href)&&void 0!==n?n:e.apiBasePath;let o=/^[^\/]*\/\/[^\/]+/.exec(s);s=null!==(i=null==o?void 0:o[0])&&void 0!==i?i:s,r.qUl.setBaseUrl(s)}(e)}let l=i,u=s,d=o},809347:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return c},Ys:function(){return p}});var r=n(408027),i=n(715729),s=n(777339),o=n(830095),a=n(550161);let l={AI_SETTINGS_LOAD:"aisettings.load"};var u=n(771300);let d={available:!1,canGenerateBannerKeywords:!1,canGenerateDocuments:!1,canGenerateOutlines:!1,canGenerateQuestions:!1,canGenerateThumbnails:!1},c=(0,a.Lq)({byCourseId:{}},{[l.AI_SETTINGS_LOAD]:(e,t)=>(0,i.ZP)(e,e=>{let n=e.byCourseId[t.courseId];n||(n={aiSettings:d,isLoaded:!1,isLoading:!0},e.byCourseId[t.courseId]=n),n.isLoading=!0}),[(0,a.ok)(l.AI_SETTINGS_LOAD)]:(e,t)=>{let n=t.data;return(0,i.ZP)(e,e=>{let r=e.byCourseId[t.courseId];r||(r={aiSettings:n,isLoaded:!0,isLoading:!1},e.byCourseId[t.courseId]=r),r.aiSettings=n,r.isLoaded=!0,r.isLoading=!1})},[(0,a.bG)(l.AI_SETTINGS_LOAD)]:(e,t)=>(0,i.ZP)(e,e=>{let n=e.byCourseId[t.courseId];n&&(n.isLoading=!1)})}),p={getAiSettings:(e,t)=>{var n,r;return null!==(r=null===(n=e.ai.byCourseId[t])||void 0===n?void 0:n.aiSettings)&&void 0!==r?r:d}},E={getAiSettings:e=>(0,a.c3)(async(t,n)=>{let i=n().ai.byCourseId[e];if((null==i?void 0:i.isLoaded)||(null==i?void 0:i.isLoading))return p.getAiSettings(n(),e);t((0,a.aU)(l.AI_SETTINGS_LOAD,{courseId:e}));try{let n=await (0,s.I8)(e);return t((0,a.aU)((0,a.ok)(l.AI_SETTINGS_LOAD),{courseId:e,data:n})),n}catch(n){if((0,u.Kn)((0,u.Gt)(n),[r.oji.NotFound]))return t((0,a.aU)((0,a.ok)(l.AI_SETTINGS_LOAD),{courseId:e,data:d})),d;throw t((0,a.aU)((0,a.bG)(l.AI_SETTINGS_LOAD),{courseId:e,err:n})),t((0,a.aU)((0,a.ok)(o.Z.APP_ERROR),{error:n})),{err:n}}})}},283531:function(e,t,n){"use strict";n.d(t,{Nw:function(){return S},I6:function(){return y}});var r=n(715729),i=n(276635),s=n(550161),o=n(408027),a=n(830095),l=n(491288),u=n(758219);let d={ANNOUNCEMENT_LOAD:"announcement.load",ANNOUNCEMENT_LOAD_MORE:"announcement.load.more",ANNOUNCEMENT_SAVE:"announcement.save",ANNOUNCEMENT_REMOVE:"announcement.remove",ANNOUNCEMENT_SEARCH:"announcement.search",ANNOUNCEMENT_CLEAR:"announcement.clear",GET_ANNOUNCEMENTS_COUNTS:"get.announcements.counts",GET_COURSE_CONTEXT:"get.course.context",CHANGE_SEARCH_INPUT_STATE:"change.search.input.state",GET_AN_ANNOUNCEMENT:"get.an.announcement",REMOVE_FROM_RECENT_UPDATED:"remove.from.recent.updated",CHANGE_ANNOUNCEMENT_PANEL_STATE:"change.announcement.panel.state",SWITCH_SORT_CRITERIA:"switch.sort.criteria"};function c(e){let{results:t,paging:n}=e;return{announcements:(0,u.MO)(t),paging:n}}let p=(e,t)=>{let{searchText:n="",paging:r={offset:0,limit:10},sort:i}=t,{offset:s,limit:a}=r;if(n){let t=new o.SJR({courseId:e}).withSession(l.nP).withPaging({offset:s,limit:a}).withQueryParams({q:n});return i&&t.withSort(...i),(0,o.jIs)(t).then(c)}return(0,o.D0l)(l.nP,e,{offset:s,limit:a},i).then(e=>c(e))},E=(e,t)=>(t.id?(0,o.L$6)(l.nP,e,t.id,t):(0,o.Vwz)(l.nP,e,t)).then(e=>({announcement:e})),m=(e,t)=>(0,o.WVZ)(l.nP,e,t),h=e=>(0,o.y2J)(l.nP,e).then(e=>({announcementsCounts:e}));async function b(e){let t=new o.pHC({courseId:e}).withSession(l.nP).withQueryParams({membershipAvailable:!0});return(0,o.jIs)(t)}let g=e=>{let t=(0,o.WnB)(l.nP,e),n=b(e);return Promise.all([t,n]).then(e=>{let t=e.shift(),{count:n}=e.shift();return{courseContext:{...t,membershipCount:n}}})},f=(e,t)=>(0,o.ECF)(l.nP,e,t).then(e=>({announcement:e})),I={announcements:{},isLoading:!1,isSearchingSuccessful:null,searchInputState:{searchText:"",isCollapsed:!0},paging:null,announcementsCounts:{},courseContext:{id:"",courseId:"",permissions:{chooseUltraStatus:!1,export:!1,archive:!1,viewAutoArchive:!1,edit:!1,editName:!1,editAvailability:!1,editClosed:!1,editBanner:!1,editBannerVisibility:!1,copy:!1,convert:!1,import:!1,editLocale:!1,editDuration:!1,editTerm:!1,delete:!1,viewEnrollments:!1,messagesEnabled:!1}},announcement:null,detailPanelState:{},sortCriteria:[{field:o.SNh.StartDateRestriction,direction:o.SrV.Descending}],listener:{refreshAnnouncementsCounts:!1,refreshAnnouncements:!1,resetSearchSetting:!1,resetSortSetting:!1},recentUpdatedAnnouncementIds:[]},y=(0,s.Lq)(I,{[d.ANNOUNCEMENT_LOAD]:(e,t)=>(0,s.K4)(e,t,{isSearchingSuccessful:null}),[(0,s.ok)(d.ANNOUNCEMENT_LOAD)]:(e,t)=>(0,s.f2)(e,t,{announcements:t.announcements,paging:t.paging,listener:{...e.listener,refreshAnnouncements:!1,resetSearchSetting:!1,resetSortSetting:!1}}),[(0,s.ok)(d.ANNOUNCEMENT_LOAD_MORE)]:(e,t)=>(0,s.f2)(e,t,{announcements:{...e.announcements,...t.announcements}}),[(0,s.ok)(d.ANNOUNCEMENT_SEARCH)]:(e,t)=>(0,s.f2)(e,t,{isSearchingSuccessful:!0}),[(0,s.bG)(d.ANNOUNCEMENT_LOAD)]:(e,t)=>(0,s.sT)(e,t,{announcements:{},paging:null}),[(0,s.bG)(d.ANNOUNCEMENT_SEARCH)]:(e,t)=>(0,s.sT)(e,t,{isSearchingSuccessful:!1}),[d.CHANGE_SEARCH_INPUT_STATE]:(e,t)=>({...e,searchInputState:t.searchInputState}),[d.CHANGE_ANNOUNCEMENT_PANEL_STATE]:(e,t)=>({...e,detailPanelState:t.detailPanelState}),[(0,s.ok)(d.ANNOUNCEMENT_SAVE)]:(e,t)=>{let n=e.recentUpdatedAnnouncementIds;return t.announcement&&-1===n.indexOf(t.announcement.id)&&(n=[...e.recentUpdatedAnnouncementIds,t.announcement.id]),(0,s.f2)(e,t,{announcement:t.announcement,listener:{...e.listener,refreshAnnouncementsCounts:!0,resetSortSetting:!0,refreshAnnouncements:!0},recentUpdatedAnnouncementIds:n})},[(0,s.bG)(d.ANNOUNCEMENT_SAVE)]:(e,t)=>(0,s.sT)(e,t,{}),[(0,s.ok)(d.ANNOUNCEMENT_REMOVE)]:(e,t)=>(0,s.f2)(e,t,{announcements:i.omit(e.announcements,t.announcementId),listener:{...e.listener,refreshAnnouncementsCounts:!0}}),[(0,s.bG)(d.ANNOUNCEMENT_REMOVE)]:(e,t)=>(0,s.sT)(e,t,{}),[(0,s.ok)(d.GET_ANNOUNCEMENTS_COUNTS)]:(e,t)=>(0,s.f2)(e,t,{announcementsCounts:t.announcementsCounts,listener:{...e.listener,refreshAnnouncementsCounts:!1}}),[(0,s.bG)(d.GET_ANNOUNCEMENTS_COUNTS)]:(e,t)=>(0,s.sT)(e,t,{announcementsCounts:{}}),[(0,s.ok)(d.GET_COURSE_CONTEXT)]:(e,t)=>(0,s.f2)(e,t,{courseContext:t.courseContext}),[(0,s.bG)(d.GET_COURSE_CONTEXT)]:(e,t)=>(0,s.sT)(e,t,{courseContext:{}}),[(0,s.ok)(d.GET_AN_ANNOUNCEMENT)]:(e,t)=>(0,s.f2)(e,t,{announcement:t.announcement}),[(0,s.bG)(d.GET_AN_ANNOUNCEMENT)]:(e,t)=>(0,s.sT)(e,t,{announcement:{}}),[d.SWITCH_SORT_CRITERIA]:(e,t)=>({...e,sortCriteria:t.sortCriteria}),[d.ANNOUNCEMENT_CLEAR]:(e,t)=>({...I}),[d.REMOVE_FROM_RECENT_UPDATED]:(e,t)=>(0,r.ZP)(e,e=>{e.recentUpdatedAnnouncementIds.length>0&&i.remove(e.recentUpdatedAnnouncementIds,e=>e===t.id)})}),S={loadAnnouncements:(e,t,n=!1)=>(0,s.c3)((r,i)=>T(i())?(r((0,s.aU)(d.ANNOUNCEMENT_LOAD)),p(e,t).then(e=>(n?r((0,s.aU)((0,s.ok)(d.ANNOUNCEMENT_LOAD_MORE),{...e})):(r((0,s.aU)((0,s.ok)(d.ANNOUNCEMENT_LOAD),{...e})),t.searchText&&r((0,s.aU)((0,s.ok)(d.ANNOUNCEMENT_SEARCH)))),e),e=>(r((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e})),r((0,s.aU)((0,s.bG)(d.ANNOUNCEMENT_LOAD),{err:e})),t.searchText&&r((0,s.aU)((0,s.bG)(d.ANNOUNCEMENT_SEARCH))),Promise.resolve(null)))):Promise.resolve(null)),changeSearchInputState:e=>(0,s.aU)(d.CHANGE_SEARCH_INPUT_STATE,{searchInputState:e}),saveAnnouncement:(e,t)=>(0,s.c3)((n,r)=>E(e,t).then(e=>{n((0,s.aU)((0,s.ok)(d.ANNOUNCEMENT_SAVE),{...e}))},e=>{n((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e})),n((0,s.aU)((0,s.bG)(d.ANNOUNCEMENT_SAVE),{err:e}))})),removeAnnouncement:(e,t)=>(0,s.c3)((n,r)=>m(e,t).then(e=>{n((0,s.aU)((0,s.ok)(d.ANNOUNCEMENT_REMOVE),{announcementId:t}))},e=>{n((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e})),n((0,s.aU)((0,s.bG)(d.ANNOUNCEMENT_REMOVE),{err:e}))})),getAnnouncementsCounts:e=>(0,s.c3)((t,n)=>h(e).then(e=>{t((0,s.aU)((0,s.ok)(d.GET_ANNOUNCEMENTS_COUNTS),{...e}))},e=>{t((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e})),t((0,s.aU)((0,s.bG)(d.GET_ANNOUNCEMENTS_COUNTS),{err:e}))})),getCourseContext:e=>(0,s.c3)((t,n)=>g(e).then(e=>{t((0,s.aU)((0,s.ok)(d.GET_COURSE_CONTEXT),{...e}))},e=>{t((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e})),t((0,s.aU)((0,s.bG)(d.GET_COURSE_CONTEXT),{err:e}))})),getAnnouncement:(e,t)=>(0,s.c3)((n,r)=>f(e,t).then(e=>{n((0,s.aU)((0,s.ok)(d.GET_AN_ANNOUNCEMENT),{...e}))},e=>{n((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e})),n((0,s.aU)((0,s.bG)(d.GET_AN_ANNOUNCEMENT),{err:e}))})),changeAnnouncementPanelState:e=>(0,s.aU)(d.CHANGE_ANNOUNCEMENT_PANEL_STATE,{detailPanelState:e}),switchSortCriteria:e=>(0,s.aU)(d.SWITCH_SORT_CRITERIA,{sortCriteria:e}),clearAnnouncements:()=>(0,s.aU)(d.ANNOUNCEMENT_CLEAR),removeFromRecentUpdated:e=>(0,s.aU)(d.REMOVE_FROM_RECENT_UPDATED,{id:e})},T=e=>!e.announcement.isLoading},830095:function(e,t){"use strict";t.Z={ROUTER_STATE_CHANGE_SUCCESS:"router.state.change.success",ROUTER_LOCATION_CHANGE_SUCCESS:"router.location.change.success",APP_ERROR:"app.error",APP_ERROR_CLEAR:"app.error.clear"}},16529:function(e,t,n){"use strict";n.d(t,{I6:function(){return U},Nw:function(){return k},Ys:function(){return w}});var r=n(715729),i=n(276635),s=n(550161),o=n(112027),a=n(766991),l=n(771117),u=n(879844),d=n(408027),c=n(830095),p=n(624859),E=n(227982),m=n(299380),h=n(491288),b=n(981533),g=n(316282),f=n(76701),I=n(391819),y=n(847880);let S=0,T=(e,t,n)=>{let r=S;return S+=1,e((0,s.aU)(g.V.ASSESSMENT_FILE_UPLOAD_TASK_ADD,{courseId:t,fileName:n,taskId:r})),r},_=(e,t,n,r)=>{let i=e[t];i?i[n]=r:e[t]={[n]:r}},O=(e,t,n)=>{let r=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]},A=e=>["views","byCourseId",e.courseId],C=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},o=Object.keys(r).find(e=>{let n=r[e];if("assessmentId"in n.query)return"assessmentId"in t&&t.assessmentId===n.query.assessmentId&&t.courseId===n.query.courseId;if("assessmentId"in t)return!1;let s=i.isEqual(n.query.paging,t.paging),o=i.isEqual(n.query.filter,t.filter),a=i.isEqual(n.query.sort,t.sort);return s&&a&&o});return o?{id:o,view:r[o]}:s.LW},v=(e,t)=>{let n=(0,y.GE)(t);if(!n)return;let{id:r}=n;if(!r)return;let i=e.byAssessmentId[r];e.byAssessmentId[r]={...i,...n,api:{...null==i?void 0:i.api,isInvalidated:!1,isDeleting:!1,isUpdating:!1}}};function R(e,t){var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})}let L=(e,t)=>e.assessment.importTasksByCourseId[t]||{},P=e=>`questionBanksImportShowTaskStatus${e.replace(/\_/g,".")}`,N=(e,t)=>({key:P(e),isRequired:!0,value:JSON.stringify(Object.keys(t).reduce((e,t)=>({...e,[t]:!0}),{}))}),D=new Set([d.hRl.Complete,d.hRl.CompleteErrors]),U=(0,s.Lq)({byAssessmentId:{},fileUploadTasksByCourseId:{},importTasksByCourseId:{},permissions:null,paging:null,isLoading:!1,views:{byCourseId:{}}},{[a.V.CONTENT_LOAD]:s.K4,[(0,s.ok)(a.V.CONTENT_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,n=>{if(!i.has(t,"assessments"))return;let{assessments:r}=t;Object.keys(r).forEach(t=>{var i,s;n.byAssessmentId[t]={...r[t],api:{isUpdating:!1,isDeleting:!1},ui:null!==(s=null===(i=e.byAssessmentId[t])||void 0===i?void 0:i.ui)&&void 0!==s?s:{}}})});return(0,s.f2)(n,t)},[(0,s.bG)(a.V.CONTENT_LOAD)]:s.sT,[g.V.ASSESSMENT_LOAD]:(0,s.Li)(C,A),[(0,s.ok)(g.V.ASSESSMENT_LOAD)]:(e,t)=>{if(!t||!t.data)return(0,s.f2)(e,t);let{data:n}=t,{assessmentIds:o,byAssessmentId:a,paging:l,permissions:u}=n,d=(0,r.ZP)(e,t=>{Object.keys(a).forEach(n=>{let r=e.byAssessmentId[n],s=i.pickBy({contentId:null==r?void 0:r.contentId,permissions:null==r?void 0:r.permissions,ui:null==r?void 0:r.ui});t.byAssessmentId[n]={...a[n],ui:{},...s,api:{isUpdating:!1,isDeleting:!1}}})});return(0,s.NV)(d,t,{viewResolver:C,viewsPathResolver:A,paging:l,permissions:u,values:o})},[(0,s.bG)(g.V.ASSESSMENT_LOAD)]:(0,s.HT)(C,A),[g.V.ASSESSMENT_PERSIST]:(e,t)=>(0,r.ZP)(e,e=>{var n;let r=t.assessment.id;e.byAssessmentId[r]||(e.byAssessmentId[r]={});let i=null!==(n=e.byAssessmentId[r].api)&&void 0!==n?n:{};e.byAssessmentId[r].api=i,i.isUpdating=!0}),[(0,s.ok)(g.V.ASSESSMENT_PERSIST)]:(e,t)=>{let{updatedAssessment:n}=t,i={...n,api:{...e.byAssessmentId[n.id].api,isUpdating:!1},ui:e.byAssessmentId[n.id]&&e.byAssessmentId[n.id].ui};return(0,r.ZP)(e,e=>{e.byAssessmentId[i.id]=i,R(e,i.courseId)})},[(0,s.bG)(g.V.ASSESSMENT_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{var n;let r=null!==(n=e.byAssessmentId[t.assessment.id].api)&&void 0!==n?n:{};e.byAssessmentId[t.assessment.id].api=r,r.isUpdating=!1}),[g.V.ASSESSMENT_DELETE]:(e,t)=>(0,r.ZP)(e,e=>{var n;let r=null!==(n=e.byAssessmentId[t.assessmentId].api)&&void 0!==n?n:{};e.byAssessmentId[t.assessmentId].api=r,r.isDeleting=!0}),[(0,s.ok)(g.V.ASSESSMENT_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{delete e.byAssessmentId[t.assessmentId],R(e,t.courseId)}),[(0,s.bG)(g.V.ASSESSMENT_DELETE)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{var n;let r=null!==(n=e.byAssessmentId[t.assessmentId].api)&&void 0!==n?n:{};e.byAssessmentId[t.assessmentId].api=r,r.isDeleting=!1});return(0,s.sT)(n,t)},[(0,s.ok)(g.V.ASSESSMENT_CREATE)]:(e,t)=>(0,r.ZP)(e,n=>{let r={...e.byAssessmentId},i={...t.assessment,api:{isDeleting:!1,isUpdating:!0}};r[i.id]=i,n.byAssessmentId=r,R(n,i.courseId)}),[(0,s.ok)(l.V.QUESTION_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n,question:r}=t;(null==n?void 0:n.id)&&0===n.id.indexOf(o.dc)&&R(e,r.courseId)}),[(0,s.ok)(l.V.QUESTIONS_COPY)]:(e,t)=>(0,r.ZP)(e,e=>{R(e,t.courseId)}),[l.V.QUESTIONS_COPY_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,e=>{R(e,t.courseId)}),[(0,s.ok)(l.V.QUESTION_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{R(e,t.prevQuestion.courseId)}),[(0,s.ok)(a.V.CONTENT_DELETE)]:(e,t)=>{let n=(0,r.ZP)(e,n=>{let{results:r}=t;r.forEach(t=>{let r=i.findKey(e.byAssessmentId,{contentId:t});if(r){let t=e.byAssessmentId[r];delete n.byAssessmentId[r],R(n,t.courseId)}})});return n},[(0,s.ok)(a.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>{let{contentId:n}=t,s=i.findKey(e.byAssessmentId,{contentId:n});return s?(0,r.ZP)(e,t=>{let n=e.byAssessmentId[s];delete t.byAssessmentId[s],R(t,n.courseId)}):e},[(0,s.ok)(a.V.CONTENT_IMPORT_COMPLETE)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{R(e,n)})},[g.V.ASSESSMENT_FILE_UPLOAD_TASK_ADD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r,fileName:i}=t;_(e.fileUploadTasksByCourseId,n,r,{taskId:r,fileName:i,progress:0})}),[g.V.ASSESSMENT_FILE_UPLOAD_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r,progress:i,fileLocation:s}=t,o=e.fileUploadTasksByCourseId[n][r];e.fileUploadTasksByCourseId[n][r]={...o,progress:i,fileLocation:s}}),[g.V.ASSESSMENT_FILE_UPLOAD_TASK_REMOVE]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r}=t;O(e.fileUploadTasksByCourseId,n,r)}),[g.V.ASSESSMENT_IMPORT_TASKS_LOAD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,queueTasks:r}=t,s=e.importTasksByCourseId[n];s?r.forEach(e=>{s[e.taskId]=e}):e.importTasksByCourseId[n]=i.keyBy(r,"taskId")}),[g.V.ASSESSMENT_IMPORT_TASK_ADD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,queueTask:r}=t;_(e.importTasksByCourseId,n,r.taskId,r)}),[g.V.ASSESSMENT_IMPORT_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,n=>{let{courseId:r,queueTasks:i}=t;i.forEach(i=>{var s;n.importTasksByCourseId[r][i.taskId]=i;let o=null===(s=e.importTasksByCourseId[r])||void 0===s?void 0:s[i.taskId];i.taskStatus!==(null==o?void 0:o.taskStatus)&&D.has(i.taskStatus)&&R(n,t.courseId)})}),[(0,s.ok)(g.V.ASSESSMENT_IMPORT_TASK_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r}=t;O(e.importTasksByCourseId,n,r)}),[(0,s.bG)(g.V.ASSESSMENT_IMPORT_TASK_REMOVE)]:(e,t)=>(0,s.sT)(e,t),[f.V.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{R(e,n)})},[(0,s.ok)(I.V.GRADEBOOK_ATTEMPT_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{v(e,t.attempt)}),[(0,s.ok)(I.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>(0,r.ZP)(e,e=>{v(e,t.attempt)})}),k={loadAssessments:e=>{let{courseId:t,types:n,offset:r,limit:i}=e;return k.loadAssessmentsByQuery({courseId:t,...n?{filter:{types:n}}:null,paging:{offset:null!=r?r:0,limit:null!=i?i:20}})},loadAssessmentsByQuery:e=>(0,s.c3)(t=>(t((0,s.aU)(g.V.ASSESSMENT_LOAD,{query:e})),(0,u.DA)(e).then(n=>(t((0,s.aU)((0,s.ok)(g.V.ASSESSMENT_LOAD),{data:n,query:e})),{...n})).catch(n=>{throw t((0,s.aU)((0,s.ok)(c.Z.APP_ERROR),{error:n})),t((0,s.aU)((0,s.bG)(g.V.ASSESSMENT_LOAD),{query:e})),n}))),loadAssessmentById:({courseId:e,assessmentId:t})=>(0,s.c3)(n=>{let r={assessmentId:t,courseId:e};return n((0,s.aU)(g.V.ASSESSMENT_LOAD,{query:r})),(0,u.sn)({courseId:e,assessmentId:t}).then(e=>(n((0,s.aU)((0,s.ok)(g.V.ASSESSMENT_LOAD),{data:{assessmentIds:[e.id],byAssessmentId:{[e.id]:e}},query:r})),e)).catch(e=>{throw n((0,s.aU)((0,s.ok)(c.Z.APP_ERROR),{error:e})),n((0,s.aU)((0,s.bG)(g.V.ASSESSMENT_LOAD),{query:r})),e})}),deleteAssessment:({courseId:e,assessmentId:t})=>(0,s.c3)(n=>(n((0,s.aU)(g.V.ASSESSMENT_DELETE,{assessmentId:t,courseId:e})),(0,d.A1x)(h.nP,e,t).then(()=>(n((0,s.aU)((0,s.ok)(g.V.ASSESSMENT_DELETE),{assessmentId:t,courseId:e})),{assessmentId:t})).catch(r=>{throw n((0,s.aU)((0,s.bG)(g.V.ASSESSMENT_DELETE),{assessmentId:t,courseId:e})),r instanceof d.h0v||n((0,s.aU)((0,s.ok)(c.Z.APP_ERROR),{error:r})),r}))),createAssessment:e=>(0,s.c3)(t=>(t((0,s.aU)(g.V.ASSESSMENT_CREATE,e)),(0,u.Be)(e).then(e=>(t((0,s.aU)((0,s.ok)(g.V.ASSESSMENT_CREATE),{assessment:e})),{assessment:e})).catch(e=>{throw t((0,s.aU)((0,s.ok)(c.Z.APP_ERROR),{error:e})),e}))),uploadAssessmentFile:e=>(0,s.c3)((t,n)=>{let{courseId:r,file:i,fileName:o,fileType:a}=e;t((0,s.aU)(g.V.ASSESSMENT_FILE_UPLOAD,e));let l=T(t,r,o);(0,p.O)({fileType:a,fileName:o,file:i}).then(e=>{let i=n().assessment.fileUploadTasksByCourseId[r];if(!(null==i?void 0:i[l]))return;let{fileLocation:o}=e;t((0,s.aU)(g.V.ASSESSMENT_FILE_UPLOAD_TASK_UPDATE,{courseId:r,taskId:l,progress:100,fileLocation:o}))}).catch(e=>{t((0,s.aU)((0,s.ok)(c.Z.APP_ERROR),{error:e}))})}),removeAssessmentFileUploadTask:(e,t)=>(0,s.c3)(async n=>{n((0,s.aU)(g.V.ASSESSMENT_FILE_UPLOAD_TASK_REMOVE,{courseId:e,taskId:t}))}),importAssessment:e=>(0,s.c3)((t,n)=>{let{courseId:r,fileName:i,fileLocation:o}=e;t((0,s.aU)(g.V.ASSESSMENT_IMPORT,e)),(0,E.V)({courseId:r,fileName:i,fileLocation:o},{cxAction:"CX_ACTION_IMPORT",includeItems:["cxConfigArea_POOL"]}).then(e=>{t((0,s.aU)(g.V.ASSESSMENT_IMPORT_TASK_ADD,{courseId:r,queueTask:e}));let i=N(r,L(n(),r));(0,b.p)(i)}).catch(e=>{throw t((0,s.aU)((0,s.ok)(c.Z.APP_ERROR),{error:e})),e})}),updateImportTaskStatus:(e,t)=>(0,s.c3)(async n=>{let r=await Promise.all(t.map(e=>(0,m.j)(e)));return n((0,s.aU)(g.V.ASSESSMENT_IMPORT_TASK_UPDATE,{courseId:e,queueTasks:r})),r}),loadAssessmentImportTasks:e=>(0,s.c3)(async t=>{let n=await (0,b._)({key:P(e)});if(!n)return;let r={};try{r=JSON.parse(n.value)}catch(t){let e=Error(`Parsing of preference value failed: ${n.value}`);console.error(e.message),console.error(t);return}let i=Object.entries(r).filter(([e,t])=>!0===t&&"string"==typeof e).map(([e])=>e);if(!i.length)return;let o=i.map(e=>(0,m.j)(e)),a=await Promise.all(o);t((0,s.aU)(g.V.ASSESSMENT_IMPORT_TASKS_LOAD,{courseId:e,queueTasks:a}))}),removeAssessmentImportTask:(e,t)=>(0,s.c3)((n,r)=>{let o=i.omit(L(r(),e),t),a=N(e,o);return(0,b.p)(a).then(()=>{n((0,s.aU)((0,s.ok)(g.V.ASSESSMENT_IMPORT_TASK_REMOVE),{courseId:e,taskId:t}))}).catch(r=>{n((0,s.aU)((0,s.bG)(g.V.ASSESSMENT_IMPORT_TASK_REMOVE),{courseId:e,taskId:t})),n((0,s.aU)((0,s.ok)(c.Z.APP_ERROR),{error:r}))})}),persistAssessment:(e,t)=>(0,s.c3)(n=>(n((0,s.aU)(g.V.ASSESSMENT_PERSIST,{assessment:e})),(0,u.nO)(e,{...t,assessmentId:e.id}).then(t=>(n((0,s.aU)((0,s.ok)(g.V.ASSESSMENT_PERSIST),{assessment:e,updatedAssessment:t})),{assessment:e})).catch(t=>{throw n((0,s.aU)((0,s.bG)(g.V.ASSESSMENT_PERSIST),{assessment:e})),n((0,s.aU)((0,s.ok)(c.Z.APP_ERROR),{error:t})),t})))},w={getAssessmentById:(e,t)=>i.find(e.assessment.byAssessmentId,{id:t}),getAssessmentByContentId:(e,t)=>i.find(e.assessment.byAssessmentId,{contentId:t}),getAssessmentsByCourseId:(e,t,n)=>{let r=i.filter(e.assessment.byAssessmentId,{courseId:t});return n&&(r=r.filter(e=>n.includes(e.type))),r},getAssessmentByCourseAndGradableItemId:(e,t,n)=>i.find(e.assessment.byAssessmentId,{courseId:t,gradableItemId:n}),getAssessmentsByQuery:(e,t)=>{let{view:n}=C(e.assessment,t);return n?(n.values||[]).map(t=>w.getAssessmentById(e,t)).filter(e=>!!e):[]},getAssessmentsByQueries:(e,t)=>{let n=new Set([]);return t.reduce((t,r)=>{let{view:i}=C(e.assessment,r);return[...t,...((null==i?void 0:i.values)||[]).map(t=>w.getAssessmentById(e,t)).filter(e=>!(!(null==e?void 0:e.id)||n.has(e.id))&&(n.add(e.id),!0))]},[])},getAssessmentViewStateByQuery:(e,t)=>{var n;let{view:r}=C(e.assessment,t);return r?{isLoading:r.isLoading,isValid:r.isValid,paging:null!==(n=r.paging)&&void 0!==n?n:null,permissions:r.permissions}:null},getAssessmentViewStatusByQueries:(e,t)=>t.reduce((t,n)=>{var r;let{view:i}=C(e.assessment,n),s=null;return i&&(s={isLoading:i.isLoading,isValid:i.isValid,paging:null!==(r=i.paging)&&void 0!==r?r:null,permissions:i.permissions}),[...t,{query:n,view:s}]},[]),getAssessmentFileUploadTasks:e=>t=>t.assessment.fileUploadTasksByCourseId[e]||{},getAssessmentImportTasks:e=>t=>t.assessment.importTasksByCourseId[e]||{}}},316282:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={ASSESSMENT_LOAD:"assessment.load",ASSESSMENT_PERSIST:"assessment.persist",ASSESSMENT_DELETE:"assessment.delete",ASSESSMENT_CREATE:"assessment.create",ASSESSMENT_FILE_UPLOAD:"assessment.file.upload",ASSESSMENT_FILE_UPLOAD_TASK_ADD:"assessment.fileUploadTask.add",ASSESSMENT_FILE_UPLOAD_TASK_UPDATE:"assessment.fileUploadTask.update",ASSESSMENT_FILE_UPLOAD_TASK_REMOVE:"assessment.fileUploadTask.remove",ASSESSMENT_IMPORT:"assessment.import",ASSESSMENT_IMPORT_TASKS_LOAD:"assessment.importTasks.load",ASSESSMENT_IMPORT_TASK_ADD:"assessment.importTask.add",ASSESSMENT_IMPORT_TASK_UPDATE:"assessment.importTask.update",ASSESSMENT_IMPORT_TASK_REMOVE:"assessment.importTask.remove"}},232154:function(e,t,n){"use strict";n.d(t,{Nw:function(){return u},I6:function(){return l},Ys:function(){return d}});var r=n(715729),i=n(348231),s=n(550161),o=n(408027);let a={ATTEMPT_RECEIPT_LOAD:"attempt-receipt.load"},l=(0,s.Lq)({byAttemptReceiptId:{},isLoading:!1},{[a.ATTEMPT_RECEIPT_LOAD]:s.K4,[(0,s.ok)(a.ATTEMPT_RECEIPT_LOAD)]:(e,t)=>{let{receiptId:n}=t,i=(0,r.ZP)(e,e=>{e.byAttemptReceiptId[n]=t});return(0,s.f2)(i,t)},[(0,s.cI)(a.ATTEMPT_RECEIPT_LOAD)]:s.f2,[(0,s.bG)(a.ATTEMPT_RECEIPT_LOAD)]:s.sT}),u={loadAttemptReceipt:e=>(0,s.PH)(a.ATTEMPT_RECEIPT_LOAD,async()=>{try{return await (0,i.B)(e)}catch(e){throw{err:e}}},null,[o.oji.NotFound])},d={getAttemptReceipt:(e,t)=>e.attemptReceipt.byAttemptReceiptId[t],isLoading:e=>e.attemptReceipt.isLoading}},961978:function(e,t,n){"use strict";n.d(t,{I6:function(){return l},Nw:function(){return u},Ys:function(){return d}});var r=n(276635),i=n(715729),s=n(550161),o=n(972519),a=n(169767);let l=(0,s.Lq)({byId:{},paging:null,permissions:{canDeleteAnyComment:!1},isLoading:!1},{[a.V.BLOG_ENTRY_COMMENTS_LOAD]:s.K4,[(0,s.ok)(a.V.BLOG_ENTRY_COMMENTS_LOAD)]:(e,t)=>{let{byId:n,paging:r,permissions:o}=t,a=(0,i.Uy)(e,e=>{r&&(e.paging=r),o&&(e.permissions=o),n&&(e.byId=n,Object.keys(n).forEach(t=>{e.byId[t].api={isUpdating:!1,isDeleting:!1}}))});return(0,s.f2)(a,t)},[(0,s.bG)(a.V.BLOG_ENTRY_COMMENTS_LOAD)]:s.sT,[a.V.BLOG_COMMENT_ADD]:(e,t)=>(0,i.Uy)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api={isUpdating:!0,isDeleting:!0}}),[(0,s.ok)(a.V.BLOG_COMMENT_ADD)]:(e,t)=>{let{comment:n}=t,r=e;return n&&(r=(0,i.Uy)(e,e=>{e.byId[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}}})),(0,s.f2)(r,t)},[(0,s.bG)(a.V.BLOG_COMMENT_ADD)]:s.sT,[a.V.BLOG_COMMENT_MODIFY]:(e,t)=>(0,i.Uy)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isUpdating=!0}),[(0,s.ok)(a.V.BLOG_COMMENT_MODIFY)]:(e,t)=>{let{comment:n}=t,r=e;return n&&(r=(0,i.Uy)(e,e=>{e.byId[n.id]={...n,api:{isUpdating:!1}}})),(0,s.f2)(r,t)},[(0,s.bG)(a.V.BLOG_COMMENT_MODIFY)]:(e,t)=>(0,i.Uy)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isUpdating=!1}),[a.V.BLOG_COMMENT_REMOVE]:(e,t)=>(0,i.Uy)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isDeleting=!0}),[(0,s.bG)(a.V.BLOG_COMMENT_REMOVE)]:(e,t)=>(0,i.Uy)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isDeleting=!1}),[(0,s.ok)(a.V.BLOG_COMMENT_REMOVE)]:(e,t)=>(0,i.Uy)(e,e=>{delete e.byId[t.commentId]})}),u={loadEntryComments:(e,t,n,r={})=>(0,s.PH)(a.V.BLOG_ENTRY_COMMENTS_LOAD,async()=>{try{return await o.oc(e,t,n,r)}catch(e){throw{err:e}}}),addComment:e=>(0,s.PH)(a.V.BLOG_COMMENT_ADD,async()=>{let t;try{t=await o.Ir(e)}catch(e){throw{err:e}}return{comment:t}}),modifyComment:e=>(0,s.PH)(a.V.BLOG_COMMENT_MODIFY,async()=>{let t;try{t=await o.p5(e)}catch(e){throw{err:e}}return{comment:t}}),deleteComment:e=>(0,s.PH)(a.V.BLOG_COMMENT_REMOVE,async t=>{let{commentId:n}=e;try{let r=d.getCommentById(t(),n);return await o.YF(e),{commentId:n,comment:r}}catch(e){throw{err:e}}},{commentId:e.commentId})},d={getCommentsByEntryId:(e,t)=>(0,r.filter)(e.blog.comments.byId,{entryId:t}),getCommentById:(e,t)=>e.blog.comments.byId[t]}},169767:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={BLOG_COMMENT_ADD:"blog.comment.add",BLOG_ENTRY_COMMENTS_LOAD:"blog.entry.comments.load",BLOG_COMMENT_REMOVE:"blog.comment.remove",BLOG_COMMENT_MODIFY:"blog.comment.modify"}},491791:function(e,t,n){"use strict";n.d(t,{I6:function(){return u},Nw:function(){return d},Ys:function(){return c}});var r=n(276635),i=n(550161),s=n(715729),o=n(766991),a=n(972519),l=n(463279);let u=(0,i.Lq)({byId:{},isLoading:!1},{[(0,i.ok)(o.V.CONTENT_LOAD)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{let{blogs:n}=t;Object.keys(n||{}).forEach(t=>{e.byId[t]={...n[t],api:{isUpdating:!1,isDeleting:!1}}})});return(0,i.f2)(n,t)},[l.V.BLOG_LOAD]:i.K4,[(0,i.ok)(l.V.BLOG_LOAD)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{let{blog:n}=t;n&&(e.byId[n.id]=n)});return(0,i.f2)(n,t)},[(0,i.bG)(l.V.BLOG_LOAD)]:i.sT,[(0,i.ok)(o.V.CONTENT_PERSIST)]:(e,t)=>{let n=(0,s.ZP)(e,n=>{let{blogs:r}=t;Object.values(r||{}).forEach(t=>{let r=e.byId[t.id];n.byId[t.id]={...(0,i.PM)(r,t),api:{isUpdating:!1,isDeleting:!1}}})});return(0,i.f2)(n,t)}}),d={loadBlog:e=>(0,i.PH)(l.V.BLOG_LOAD,async()=>{try{let t=await a.Xi(e);return{blog:t}}catch(e){throw{err:e}}})},c={getBlogById:(e,t)=>(0,r.find)(e.blog.blogs.byId,{id:t}),canCreateEntry:(e,t)=>{let n=e.blog.blogs.byId[t];return n&&n.permissions.createEntry},canDeleteBlog:(e,t)=>{let n=e.blog.blogs.byId[t];return n&&n.permissions.delete},canModifyBlog:(e,t)=>{let n=e.blog.blogs.byId[t];return n&&n.permissions.modify}}},463279:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={BLOG_LOAD:"blog.load"}},989609:function(e,t,n){"use strict";n.d(t,{I6:function(){return O},Nw:function(){return A},Ys:function(){return L}});var r=n(715729),i=n(550161),s=n(169767),o=n(972519),a=n(276635),l=n(830095),u=n(560985),d=n(715655),c=n(337767),p=n(836204),E=n(176726);let m={byId:{},views:{byBlogId:{}}},h=(e,t)=>t&&t.byId?(0,r.ZP)(e,e=>{Object.keys(t.byId||{}).forEach(n=>{e[n]={...e[n],...t.byId[n]}})}):e,b=(e,t)=>t&&t.data.byId?(0,r.ZP)(e,e=>{Object.keys(t.data.byId||{}).forEach(n=>{e.byId[n]={...e.byId[n],...t.data.byId[n]}})}):e,g=(e,t)=>{let{blogId:n}=t,r=e.views.byBlogId[n];r&&Object.values(r).forEach(e=>{e.isValid=!1})},f=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=(null===(n=e.views)||void 0===n?void 0:n.byBlogId[t.blogId])||{},i=Object.keys(r).find(e=>{let n=r[e],i=(0,a.isEqual)(n.query.assignedUserId,t.assignedUserId),s=(0,a.isEqual)(n.query.expand,t.expand),o=(0,a.isEqual)(n.query.paging,t.paging);return i&&s&&o});return{id:i,view:i?r[i]:null}},I=e=>["views","byBlogId",e.blogId],y=(e,t)=>{let{view:n}=f(e.blog.entries,t);return!n||!n.isLoading&&!n.isValid},S=(0,i.Lq)(m.byId,{[(0,i.ok)(p.V.BLOG_ENTRY_ADD)]:(e,t)=>(0,r.ZP)(e,e=>{Object.keys(t.byId||{}).forEach(n=>{e[n]=t.byId[n],e[n].api||(e[n].api={}),e[n].userStatus||(e[n].userStatus={commentCount:0}),e[n].api.isUpdating=!1,e[n].api.isDeleting=!1})}),[p.V.BLOG_ENTRY_MODIFY]:(e,t)=>(0,r.ZP)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!0}),[(0,i.bG)(p.V.BLOG_ENTRY_MODIFY)]:(e,t)=>(0,r.ZP)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!1}),[(0,i.ok)(p.V.BLOG_ENTRY_MODIFY)]:(e,t)=>{let n=h(e,t);return(0,r.ZP)(n,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!1})},[p.V.BLOG_ENTRY_REMOVE]:(e,t)=>(0,r.ZP)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isDeleting=!0}),[(0,i.bG)(p.V.BLOG_ENTRY_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isDeleting=!1}),[(0,i.ok)(p.V.BLOG_ENTRY_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{delete e[t.entryId]}),[(0,i.ok)(s.V.BLOG_COMMENT_ADD)]:(e,t)=>{let n=t.comment.entryId,i=e[n];return i&&i.userStatus?(0,r.ZP)(e,e=>{e[n]||(e[n]={}),e[n].userStatus||(e[n].userStatus={}),e[n].userStatus.commentCount=i.userStatus.commentCount+1}):e},[(0,i.ok)(s.V.BLOG_COMMENT_REMOVE)]:(e,t)=>{let n=t.comment,i=e[n.entryId];return i&&i.userStatus?(0,r.ZP)(e,e=>{e[n.entryId]||(e[n.entryId]={}),e[n.entryId].userStatus||(e[n.entryId].userStatus={}),e[n.entryId].userStatus.commentCount=i.userStatus.commentCount-1;let t=new Date(n.createdDate),r=new Date(i.userStatus.commentLastSeenDate);t>r&&(e[n.entryId].userStatus.unreadCommentCount=i.userStatus.unreadCommentCount-1)}):e}}),T=(0,i.Lq)(m,{[p.V.BLOG_ENTRIES_LOAD]:(0,i.Li)(f,I),[(0,i.ok)(p.V.BLOG_ENTRIES_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,i.f2)(e,t);let{paging:r,entriesId:s}=n;return e=b(e,t),(0,i.NV)(e,t,{viewResolver:f,viewsPathResolver:I,paging:r,values:s})},[(0,i.bG)(p.V.BLOG_ENTRIES_LOAD)]:(0,i.HT)(f,I),[(0,i.ok)(p.V.BLOG_ENTRY_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{let{entry:n}=t;g(e,n)}),[(0,i.ok)(p.V.BLOG_ENTRY_ADD)]:(e,t)=>(0,r.ZP)(e,e=>{let n=Object.keys(t.byId||{}).map(e=>t.byId[e])[0];g(e,n)})}),_=(0,i.UY)({byId:S}),O=(0,i.vn)(T,_,m),A={loadBlogEntriesByQuery:e=>async(t,n)=>{let r=!y(n(),e);if(!r){t((0,i.aU)(p.V.BLOG_ENTRIES_LOAD,{query:e}));try{let n=await o.s3(e);t((0,i.aU)((0,i.ok)(p.V.BLOG_ENTRIES_LOAD),{query:e,data:n}))}catch(n){t((0,i.aU)((0,i.bG)(p.V.BLOG_ENTRIES_LOAD),{query:e})),t((0,i.aU)((0,i.ok)(l.Z.APP_ERROR),{error:n}))}}},addBlogEntry:e=>(0,i.PH)(p.V.BLOG_ENTRY_ADD,async()=>{let{nextEntry:t}=e;try{let n=await o.p2(e),r=t.assignedUserId;return{...n,entryId:t.id,assignedUserId:r}}catch(e){throw{entryId:t.id,err:e}}},{entryId:e.nextEntry.id}),modifyBlogEntry:e=>(0,i.PH)(p.V.BLOG_ENTRY_MODIFY,async()=>{let{nextEntry:t}=e;try{let n=await o.wc(e),r=t.assignedUserId;return{...n,entryId:t.id,assignedUserId:r}}catch(e){throw{entryId:t.id,err:e}}},{entryId:e.nextEntry.id}),removeBlogEntry:e=>(0,i.PH)(p.V.BLOG_ENTRY_REMOVE,async t=>{let{entryId:n}=e;try{let r=L.getBlogEntryById(t(),n),i=await o.Y2(e);return{...i,entryId:n,entry:r}}catch(e){throw{entryId:n,err:e}}})},C=(0,u.wN)(d.PW,c.AD),v=C((e,t)=>{let{view:n}=f(e.blog.entries,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e),R=(0,E.U)((e,t)=>{let{view:n}=f(e.blog.entries,t);return n?(n.values||[]).map(t=>e.blog.entries.byId[t]):[]},e=>e),L={getBlogEntriesByQuery:R,getBlogEntriesViewStatusByQuery:v,getBlogEntryById:(e,t)=>e.blog.entries.byId[t]}},836204:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={BLOG_ENTRIES_LOAD:"blog.entries.load",BLOG_ENTRY_ADD:"blog.entry.add",BLOG_ENTRY_MODIFY:"blog.entry.modify",BLOG_ENTRY_REMOVE:"blog.entry.remove"}},505548:function(e,t,n){"use strict";n.d(t,{I6:function(){return I},Nw:function(){return y},Ys:function(){return S}});var r=n(550161),i=n(408027),s=n(715729),o=n(972519),a=n(463279),l=n(836204),u=n(391819),d=n(53925),c=n(404518),p=n(830095),E=n(276635),m=n(592771);let h=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byBlogId[t.blogId]||{},r=Object.keys(n).find(e=>{let r=n[e],i=(0,E.isEqual)(r.query.paging,t.paging),s=(0,E.isEqual)(r.query.searchText,t.searchText)||!r.query.searchText&&!t.searchText,o=(0,E.isEqual)(r.query.submissionStatus,t.submissionStatus)||!r.query.submissionStatus&&!t.submissionStatus,a=(0,E.isEqual)(r.query.gradingStatus,t.gradingStatus)||!r.query.gradingStatus&&!t.gradingStatus,l=(0,E.isEqual)(r.query.sortColumn,t.sortColumn)||!r.query.sortColumn&&!t.sortColumn,u=(0,E.isEqual)(r.query.sortDirection,t.sortDirection)||!r.query.sortDirection&&!t.sortDirection;return i&&s&&o&&a&&l&&u});return{id:r,view:r?n[r]:null}},b=e=>["views","byBlogId",e.blogId],g=(e,t)=>{let{view:n}=h(e.blog.participants,t);return!n||!n.isLoading&&!n.isValid},f=(e,t,n)=>{let r=e.views.byBlogId[n];Object.keys(r).forEach(e=>{t.views.byBlogId[n][e].isValid=!1})},I=(0,r.Lq)({byBlogId:{},gradeColumnToBlog:{},views:{byBlogId:{}},isLoading:!1},{[m.V.BLOG_PARTICIPANTS_LOAD]:(0,r.Li)(h,b),[(0,r.ok)(m.V.BLOG_PARTICIPANTS_LOAD)]:(e,t)=>{let{data:n,query:i}=t,{byCourseMembershipId:o,paging:a}=n,l=(0,s.ZP)(e,e=>{let t=i.blogId;e.byBlogId[t]||(e.byBlogId[t]={}),Object.keys(o).forEach(t=>{let n=o[t];e.byBlogId[i.blogId][t]={courseMembershipId:t,userId:n.user.id,attemptStatus:n.attemptStatus,entriesCount:n.entriesCount,lastAttemptDate:n.lastAttemptDate,hasNewActivity:n.hasNewActivity}})});return(0,r.NV)(l,t,{viewResolver:h,viewsPathResolver:b,paging:a,values:Object.keys(o)})},[(0,r.bG)(m.V.BLOG_PARTICIPANTS_LOAD)]:(0,r.HT)(h,b),[m.V.BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG]:(e,t)=>{let{participantId:n,blogId:r}=t;return n&&r?(0,s.ZP)(e,e=>{var t;let i=null===(t=e.byBlogId[r])||void 0===t?void 0:t[n];i&&(i.hasNewActivity=!1)}):e},[(0,r.ok)(a.V.BLOG_LOAD)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{let{blog:n}=t;n&&(e.gradeColumnToBlog[n.gradeColumnId]=n.id)});return n},[(0,r.ok)(l.V.BLOG_ENTRY_REMOVE)]:(e,t)=>{let{entry:n}=t;if(n.assignedUserId!==n.creatorId)return e;let r=e.byBlogId[n.blogId];if(!r)return e;let o=r[n.assignedUserId];return o?(0,s.ZP)(e,e=>{let t=e.byBlogId[n.blogId][n.assignedUserId];t.entriesCount-=1,0===t.entriesCount&&t.attemptStatus===i.I$9.NeedsGrading&&(t.attemptStatus=null)}):e},[(0,r.ok)(d.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{let{grade:n}=t,r=e.gradeColumnToBlog[n.columnId],o=e.byBlogId[r];if(!o)return e;let a=e.byBlogId[r][n.memberId];return a?(0,s.ZP)(e,t=>{t.byBlogId[r][n.memberId].attemptStatus=i.I$9.Completed,f(e,t,r)}):e},[(0,r.ok)(d.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{let{grade:n}=t,r=e.gradeColumnToBlog[n.columnId],o=e.byBlogId[r];if(!o)return e;let a=e.byBlogId[r][n.memberId];return a?(0,s.ZP)(e,t=>{if(n.lastAttemptId){let e=n.displayGrade.score?i.I$9.Completed:i.I$9.NeedsGrading;t.byBlogId[r][n.memberId].attemptStatus=e}else{let e=n.manualScore?i.I$9.Completed:null;t.byBlogId[r][n.memberId].attemptStatus=e}f(e,t,r)}):e},[(0,r.ok)(u.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>(0,s.ZP)(e,n=>{for(let[r,i]of Object.entries(e.views.byBlogId))Object.keys(i).forEach(e=>{n.views.byBlogId[r][e].query.courseId===t.attempt.courseId&&(n.views.byBlogId[r][e].isValid=!1),t.attempt.courseId||(n.views.byBlogId[r][e].isValid=!1)})}),[(0,r.ok)(c.V.STUDENT_PREVIEW_EXIT)]:(e,t)=>(0,s.ZP)(e,t=>{for(let[n,r]of Object.entries(e.views.byBlogId))Object.keys(r).forEach(e=>{t.views.byBlogId[n][e].isValid=!1})})}),y={loadParticipantList:e=>(0,r.c3)(async(t,n)=>{let i=!g(n(),e);if(!i){t((0,r.aU)(m.V.BLOG_PARTICIPANTS_LOAD,{query:e}));try{let n=await o.Ut(e);t((0,r.aU)((0,r.ok)(m.V.BLOG_PARTICIPANTS_LOAD),{query:e,data:n}))}catch(n){t((0,r.aU)((0,r.bG)(m.V.BLOG_PARTICIPANTS_LOAD),{query:e})),t((0,r.aU)((0,r.ok)(p.Z.APP_ERROR),{error:n}))}}}),updateParticipantActivity:(e,t)=>(0,r.aU)(m.V.BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG,{participantId:e,blogId:t})},S={getBlogParticipantByMembershipId:(e,t,n)=>{let r=e.blog.participants.byBlogId[t];return r?r[n]:null},getBlogParticipantsByQuery:(e,t)=>{let{view:n}=h(e.blog.participants,t);return n&&n.values?n.values.map(n=>e.blog.participants.byBlogId[t.blogId][n]):null},getPagingByQuery:(e,t)=>{let{view:n}=h(e.blog.participants,t);return n?n.paging:null},isLoading:(e,t)=>{let{view:n}=h(e.blog.participants,t);return n?n.isLoading:null}}},592771:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={BLOG_PARTICIPANTS_LOAD:"blog.participants.load",BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG:"blog.participants.clear.ActivityFlag"}},552728:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(550161),i=n(972519),s=n(715729),o=n(276635);let a={BLOG_PARTICIPATION_SUMMARY_LOAD:"blog.participation.summary.load"},l={[a.BLOG_PARTICIPATION_SUMMARY_LOAD]:r.K4,[(0,r.ok)(a.BLOG_PARTICIPATION_SUMMARY_LOAD)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{let{byBlogId:n}=t;Object.keys(n).forEach(t=>{e.byBlogId[t]=n[t]})});return(0,r.f2)(n,t)},[(0,r.bG)(a.BLOG_PARTICIPATION_SUMMARY_LOAD)]:r.sT},u=(0,r.Lq)({byBlogId:{},isLoading:!1},l),d={loadParticipationSummary:(e,t)=>(0,r.PH)(a.BLOG_PARTICIPATION_SUMMARY_LOAD,()=>(0,i.JC)(e,t).then(e=>e).catch(e=>{throw{err:e}}))},c={getSummaryByBlogId:(e,t)=>(0,o.find)(e.blog.summary.byBlogId,{id:t}),isLoading:e=>e.blog.summary.isLoading}},517721:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return d},Ys:function(){return p}});var r=n(715729),i=n(550161),s=n(332011),o=n(408027),a=n(112027);let l={CALENDARS_LOAD:"calendars.load",CALENDAR_UPDATE:"calendar.update",CALENDARS_BATCH_UPDATE:"calendars.batch.update",CALENDAR_CLEAR_IN_STORE:"calendar.clear.in.store"},u=e=>{e.sort((e,t)=>e.labelLocalizable.languageKey&&t.labelLocalizable.languageKey||e.labelLocalizable.languageKey&&!t.labelLocalizable.languageKey?e.id===o.J6F.Institution?1:-1:t.labelLocalizable.languageKey&&!e.labelLocalizable.languageKey?t.id===o.J6F.Institution?-1:1:e.labelLocalizable.rawValue<t.labelLocalizable.rawValue?-1:1)},d=(0,i.Lq)({byId:{},isLoading:!1},{[l.CALENDARS_LOAD]:i.K4,[(0,i.ok)(l.CALENDARS_LOAD)]:(e,t)=>{let{byId:n}=t,s=(0,r.Uy)(e,t=>{Object.keys(n).forEach(r=>{let i={...n[r],api:{isUpdating:!1,isDeleting:!1},ui:e.byId[r]&&e.byId[r].ui};t.byId[i.id]=i})});return(0,i.f2)(s,t)},[(0,i.bG)(l.CALENDARS_LOAD)]:i.sT,[l.CALENDAR_UPDATE]:(e,t)=>{let{id:n}=t;return(0,r.Uy)(e,e=>{e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!0})},[(0,i.ok)(l.CALENDAR_UPDATE)]:(e,t)=>{let{calendar:n}=t;return(0,r.Uy)((0,i.f2)(e,t),t=>{t.byId[n.id]={...e.byId[n.id],...n,api:{...e.byId[n.id].api,isUpdating:!1},ui:e.byId[n.id]&&e.byId[n.id].ui}})},[(0,i.bG)(l.CALENDAR_UPDATE)]:(e,t)=>{let{id:n}=t;return(0,r.Uy)(e,e=>{e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1})},[l.CALENDARS_BATCH_UPDATE]:(e,t)=>{let{byId:n}=t;return(0,r.Uy)(e,e=>{Object.keys(n).forEach(t=>{e.byId[t]||(e.byId[t]={}),e.byId[t].api||(e.byId[t].api={}),e.byId[t].api.isUpdating=!0})})},[(0,i.ok)(l.CALENDARS_BATCH_UPDATE)]:(e,t)=>{let{byId:n}=t,s=e;return Object.keys(n).forEach(t=>{s=(0,r.Uy)(s,r=>{r.byId[t]={...s.byId[t],...n[t],api:{...e.byId[t].api,isUpdating:!1},ui:s.byId[t]&&s.byId[t].ui}})}),(0,i.f2)(s,t)},[(0,i.bG)(l.CALENDARS_BATCH_UPDATE)]:(e,t)=>{let{byId:n}=t,i=e;return Object.keys(n).forEach(e=>{i=(0,r.Uy)(i,t=>{t.byId[e]||(t.byId[e]={}),t.byId[e].api||(t.byId[e].api={}),t.byId[e].api.isUpdating=!1})}),i},[l.CALENDAR_CLEAR_IN_STORE]:e=>(0,r.Uy)(e,e=>{e.byId={}})}),c={fetchCalendars:()=>(0,i.PH)(l.CALENDARS_LOAD,()=>(0,s.jX)().then(e=>e).catch(e=>{throw{err:e}})),updateCalendar:(e,t)=>(0,i.PH)(l.CALENDAR_UPDATE,()=>(0,s.NE)(e,t).then(e=>({calendar:e})).catch(t=>{throw{id:e,err:t}}),{id:e}),batchUpdateCalendar:e=>(0,i.PH)(l.CALENDARS_BATCH_UPDATE,()=>(0,s._F)(e).then(e=>e).catch(t=>{throw{byId:(0,a.MO)(e),err:t}}),{byId:(0,a.MO)(e)}),clearCalendarsInStore:()=>(0,i.aU)(l.CALENDAR_CLEAR_IN_STORE)},p={getCalendarsSortedByType:e=>{let t=Object.values(e.calendar.byId);return u(t),t}}},940612:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return p},Ys:function(){return m}});var r=n(276635),i=n(715729),s=n(550161),o=n(822907);let a={COLUMN_SUMMARY_LOAD:"column-summary.load",COLUMN_SUMMARY_LOAD_MULTIPLE:"column-summary.multiple.load",COLUMN_SUMMARY_INVALIDATE:"column-summary-invalidate"};var l=n(53925),u=n(846935),d=n(391819);let c=(e,t)=>(0,i.ZP)(e,e=>{let n=e.columnSummaries[t];n&&(e.columnSummaries[t]={...n,api:{...null==n?void 0:n.api,isInvalidated:!0}})}),p=(0,s.Lq)({columnSummaries:{},isLoading:!1},{[a.COLUMN_SUMMARY_LOAD]:s.K4,[a.COLUMN_SUMMARY_INVALIDATE]:(e,t)=>{let n=t.columnId;return c(e,n)},[(0,s.ok)(l.V.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID)]:(e,t)=>{let n=t.grade.columnId;return c(e,n)},[(0,s.ok)(l.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{let n=t.grade.columnId;return c(e,n)},[(0,s.ok)(u.V.GRADEBOOK_COLUMN_POST_READY_GRADES)]:(e,t)=>{let n=t.columnId;return c(e,n)},[(0,s.ok)(l.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{let n=t.grade.columnId;return c(e,n)},[(0,s.ok)(a.COLUMN_SUMMARY_LOAD)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{let n=t.columnSummary;n&&(e.columnSummaries[n.columnId]=n)});return(0,s.f2)(n,t)},[(0,s.bG)(a.COLUMN_SUMMARY_LOAD)]:s.sT,[a.COLUMN_SUMMARY_LOAD_MULTIPLE]:s.K4,[(0,s.ok)(a.COLUMN_SUMMARY_LOAD_MULTIPLE)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{let{columnSummaries:n}=t;n&&Object.keys(n).forEach(t=>{let r=n[t];e.columnSummaries[r.columnId]=r})});return(0,s.f2)(n,t)},[(0,s.bG)(a.COLUMN_SUMMARY_LOAD_MULTIPLE)]:s.sT,[(0,s.ok)(d.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{attempt:n}=t;return c(e,n.columnId)}}),E={loadColumnSummary:({courseId:e,columnId:t})=>(0,s.PH)(a.COLUMN_SUMMARY_LOAD,async n=>{var r;let i=null;return n(),{columnSummary:i=await (0,o.g)(e,t)}}),loadColumnSummaries:({courseId:e,columnIds:t})=>(0,s.PH)(a.COLUMN_SUMMARY_LOAD_MULTIPLE,async n=>{var r;return n(),(0,o.Q)(e,t)}),invalidateColumnSummary:e=>(0,s.aU)(a.COLUMN_SUMMARY_INVALIDATE,{columnId:e})},m={getColumnSummaryByColumnId:(e,t)=>r.find(e.columnSummary.columnSummaries,{columnId:t}),getColumnSummariesByCourseId:(e,t)=>r.filter(e.columnSummary.columnSummaries,{courseId:t}),isLoading:e=>e.columnSummary.isLoading}},613573:function(e,t,n){"use strict";n.d(t,{I6:function(){return _},Nw:function(){return O},Ys:function(){return C}});var r=n(715729),i=n(276635),s=n(550161),o=n(112027),a=n(830095),l=n(846935),u=n(422890),d=n(766991),c=n(408027),p=n(463380),E=n(560985),m=n(771300);function h(e,t){var n;e.contents[t]||(e.contents[t]={});let r=null!==(n=e.contents[t].api)&&void 0!==n?n:{};return e.contents[t].api=r,r}function b(e,t,n){e.adaptiveRelease.byCriteriaId[t]||(e.adaptiveRelease.byCriteriaId[t]={}),e.adaptiveRelease.byCriteriaId[t].api||(e.adaptiveRelease.byCriteriaId[t].api={isUpdating:n}),e.adaptiveRelease.byCriteriaId[t].api.isUpdating=n}function g(e,t){(0,i.forEach)(e.views.byCourseId,(n,r)=>{(0,i.forEach)(n,(n,i)=>{var s;(null===(s=n.values)||void 0===s?void 0:s.includes(t))&&delete e.views.byCourseId[r][i]})})}let f=(e,t)=>{let n=t.contents[e.id];return n?{...n,...e,permissions:{...n.permissions,...e.permissions},ui:null==n?void 0:n.ui}:e},I=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.filter.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e];return(0,i.isEqual)(r.query,t)});return r?{id:r,view:n[r]}:s.LW},y=e=>["views","byCourseId",e.filter.courseId],S={[d.V.CONTENT_LOAD]:s.K4,[(0,s.ok)(d.V.CONTENT_LOAD)]:(e,t)=>{let{contents:n}=t;return n=(0,o.MO)(Object.values(n||{}).map(t=>f({...t,api:{isUpdating:!1,isDeleting:!1}},e))),(0,s.f2)(e,t,{contents:{...e.contents,...n}})},[(0,s.bG)(d.V.CONTENT_LOAD)]:s.sT,[d.V.CONTENT_PERSIST]:(e,t)=>(0,r.ZP)(e,e=>{let n=h(e,t.prevContent.id);n.isUpdating=!0}),[(0,s.ok)(d.V.CONTENT_PERSIST)]:(e,t)=>(0,r.ZP)(e,n=>{let{contents:r}=t;Object.values(r||{}).forEach(t=>{let r=e.contents[t.id];n.contents[t.id]={...r,...t,api:{...null==r?void 0:r.api,isUpdating:!1}}})}),[(0,s.bG)(d.V.CONTENT_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{let n=h(e,t.prevContent.id);n.isUpdating=!1}),[d.V.CONTENT_PERSIST_MULTIPLE]:(e,t)=>(0,r.ZP)(e,e=>{let{prevContents:n}=t;(0,i.each)(n,t=>{let n=h(e,t.content.id);n.isUpdating=!0})}),[(0,s.ok)(d.V.CONTENT_PERSIST_MULTIPLE)]:(e,t)=>(0,r.ZP)(e,n=>{let{contents:r}=t;Object.keys(r).forEach(t=>{let i=r[t];if(i.isOk)n.contents[t]={...i.result,api:{isUpdating:!1,isDeleting:!1},ui:e.contents[t]&&e.contents[t].ui};else{let e=h(n,t);e.isUpdating=!1}})}),[(0,s.bG)(d.V.CONTENT_PERSIST_MULTIPLE)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevContents:n}=t;(0,i.each)(n,t=>{let n=h(e,t.content.id);n.isUpdating=!1})}),[d.V.CONTENT_DELETE]:(e,t)=>(0,r.ZP)(e,e=>{let{contents:n}=t;n.forEach(t=>{let n=h(e,t);n.isDeleting=!0})}),[(0,s.ok)(d.V.CONTENT_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{results:n}=t;n.forEach(t=>{delete e.contents[t],g(e,t)})}),[(0,s.bG)(d.V.CONTENT_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{results:n}=t;n.forEach(t=>{let n=h(e,t);n.isDeleting=!1})}),[(0,s.ok)(d.V.CONTENT_UPDATE_IN_STORE)]:(e,t)=>(0,r.ZP)(e,e=>{let{nextContent:n}=t;e.contents[n.id]=n}),[(0,s.ok)(d.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>(0,r.ZP)(e,e=>{let{contentId:n}=t;delete e.contents[n],g(e,n)}),[(0,s.ok)(d.V.CONTENT_MOVE_IN_STORE)]:(e,t)=>{let{originalContent:n,movedContent:s,sortedTargetSiblings:o}=t;return n?(0,r.ZP)(e,t=>{let r=n.parentId===s.parentId,a=R(o,s.position);if(t.contents={...t.contents,...a.contents},t.contents[s.id]=s,!r){let r=(0,i.filter)(e.contents,e=>e.parentId===n.parentId&&e.id!==n.id),s=R(r);t.contents={...t.contents,...s.contents}}}):e},[d.V.CONTENT_SEARCH_LOAD]:(0,s.Li)(I,y),[(0,s.ok)(d.V.CONTENT_SEARCH_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,s.f2)(e,t);let{contents:i,paging:a}=n,l=Object.keys(i);return e=(0,r.ZP)(e,t=>{let n=(0,o.MO)(Object.values(i||{}).map(t=>f({...t,api:{isUpdating:!1,isDeleting:!1}},e)));t.contents={...e.contents,...n}}),(0,s.NV)(e,t,{viewResolver:I,viewsPathResolver:y,paging:a,values:l})},[(0,s.bG)(d.V.CONTENT_SEARCH_LOAD)]:(0,s.HT)(I,y),[(0,s.ok)(l.V.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>(0,r.ZP)(e,n=>{let{gradebookColumn:r}=t;if(r&&r.contentId){let t=(0,i.find)(e.contents,{id:r.contentId});t&&(n.contents[t.id].genericReadOnlyData={...e.contents[t.id].genericReadOnlyData,hasGradeColumn:!0,dueDate:r.dueDate})}}),[(0,s.ok)(u.V5.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentStates:n}=t;return(0,r.ZP)(e,t=>{if(n){let r=(0,o.MO)(Object.values(n).map(t=>f({id:t.contentId,state:t.state},e)));t.contents={...e.contents,...r}}})}},T={[(0,s.ok)(d.V.CONTENT_LOAD)]:(e,t)=>{let{adaptiveRelease:n}=t;return n?(0,r.ZP)(e,e=>{Object.keys(n).forEach(t=>{let r=n[t];e.adaptiveRelease.byCriteriaId[t]={api:{isUpdating:!1},criteria:{...r}}})}):e},[d.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE]:(e,t)=>(0,r.ZP)(e,e=>{let{criteriaList:n}=t;(0,i.each)(n,t=>{b(e,t.id,!0)})}),[(0,s.ok)(d.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:(e,t)=>(0,r.ZP)(e,n=>{let{results:r}=t;Object.keys(r).forEach(t=>{let i=r[t];i.isOk?n.adaptiveRelease.byCriteriaId[t]={criteria:{...e.adaptiveRelease.byCriteriaId[t].criteria,...i.result},api:{isUpdating:!1}}:b(n,t,!1)})}),[(0,s.bG)(d.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevContents:n}=t;(0,i.forEach)(n,t=>{b(e,t.id,!1)})}),[d.V.CONTENT_DELETE_ADAPTIVE_RELEASE]:(e,t)=>(0,r.ZP)(e,n=>{let{contents:r}=t;r.reduce((t,n)=>t.concat((0,i.filter)(e.adaptiveRelease.byCriteriaId,{criteria:{contentId:n.id}})),[]).forEach(e=>{b(n,e.criteria.id,!0)})}),[(0,s.ok)(d.V.CONTENT_DELETE_ADAPTIVE_RELEASE)]:(e,t)=>(0,r.ZP)(e,n=>{let{results:r}=t;(0,i.forEach)((0,i.values)(r),t=>{let r=t.id,s=(0,i.filter)(e.adaptiveRelease.byCriteriaId,{criteria:{contentId:r}});s.forEach(e=>{t.isOk?delete n.adaptiveRelease.byCriteriaId[e.criteria.id]:b(n,e.criteria.id,!1)})})}),[(0,s.bG)(d.V.CONTENT_DELETE_ADAPTIVE_RELEASE)]:(e,t)=>(0,r.ZP)(e,n=>{let{contents:r}=t;r.reduce((t,n)=>t.concat((0,i.filter)(e.adaptiveRelease.byCriteriaId,{criteria:{contentId:n.id}})),[]).forEach(e=>{b(n,e.criteria.id,!1)})}),[(0,s.ok)(d.V.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE)]:(e,t)=>(0,r.ZP)(e,n=>{let{contentId:r}=t;(0,i.forEach)(e.adaptiveRelease.byCriteriaId,e=>{e.criteria.contentId===r&&delete n.adaptiveRelease.byCriteriaId[e.criteria.id]})}),[(0,s.ok)(d.V.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE)]:(e,t)=>(0,r.ZP)(e,n=>{let{contentId:r,ruleType:s}=t;(0,i.forEach)(e.adaptiveRelease.byCriteriaId,e=>{e.criteria.contentId===r&&e.criteria.type===s&&delete n.adaptiveRelease.byCriteriaId[e.criteria.id]})}),[(0,s.ok)(u.V5.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{let{contentStates:n}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let n=e.contents[t.contentId];n&&(n.state=t.state,t.completion&&(n.stateCompletion=t.completion))})})},[(0,s.ok)(u.V5.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentStates:n}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let n=e.contents[t.contentId];n&&(n.state=t.state,t.completion&&(n.stateCompletion=t.completion))})})}},_=(0,s.Lq)({contents:{},adaptiveRelease:{byCriteriaId:{}},permissions:null,paging:void 0,isLoading:!1,views:{byCourseId:{}}},S,T),O={loadContents:e=>(0,s.PH)(d.V.CONTENT_LOAD,t=>{var n;return t(),p.d_(e).then(t=>({filter:e,...t})).catch(e=>{throw{err:e}})}),setContents:e=>(0,s.aU)((0,s.ok)(d.V.CONTENT_LOAD),p.dc(e)),createContent:e=>(0,s.PH)(d.V.CONTENT_PERSIST,async()=>await p.K1(e),{prevContent:{}}),persistContent:(e,t)=>(0,s.PH)(d.V.CONTENT_PERSIST,()=>p.YU(e,t).then(e=>e).catch(t=>{throw{prevContent:e,err:t}}),{prevContent:e,nextContent:t}),persistContentSync:e=>(0,s.aU)((0,s.ok)(d.V.CONTENT_PERSIST),p.dc([e])),persistContents:e=>(0,s.PH)(d.V.CONTENT_PERSIST_MULTIPLE,()=>p._b(e).then(t=>({prevContents:e,...t})).catch(t=>{throw{prevContents:e,err:t}}),{contents:e}),deleteContents:(e,t)=>(0,s.c3)((n,r)=>{let i=r(),o={};return e.forEach(e=>{let t=v(e.id,i);o[e.id]=t,n((0,s.aU)(d.V.CONTENT_DELETE,{contents:t}))}),p.Hl(e,t).then(e=>(Object.keys(e.results).forEach(r=>{let a=e.results[r],l=o[a.id];if(a.isOk){let e={};o[r].forEach(t=>{if(!i.content.contents[t])return;let{assessmentId:n,courseId:r}=i.content.contents[t];n&&r&&e[r]?e[r]=[...e[r],n]:r&&!e[r]&&(e[r]=n?[n]:[])}),n((0,s.aU)((0,s.ok)(d.V.CONTENT_DELETE),{courseAssessmentIds:Object.keys(e).length>0?e:void 0,results:o[r],deletedGrades:!t||!!(null==t?void 0:t.shouldDeleteGrades)}))}else n((0,s.aU)((0,s.bG)(d.V.CONTENT_DELETE),{results:l}))}),e)).catch(t=>{throw e.forEach(e=>{let t=o[e.id];n((0,s.aU)((0,s.bG)(d.V.CONTENT_DELETE),{results:t}))}),n((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:t})),{contents:e,err:t}})}),updateContentInStore:e=>(0,s.PH)(d.V.CONTENT_UPDATE_IN_STORE,()=>Promise.resolve({nextContent:e}),{nextContent:e}),deleteContentInStore:e=>(0,s.c3)((t,n)=>{let r=n(),i=v(e,r);i.forEach(e=>{var n,i;t((0,s.aU)(d.V.CONTENT_DELETE_IN_STORE,{contentId:e})),t((0,s.aU)((0,s.ok)(d.V.CONTENT_DELETE_IN_STORE),{assessmentId:null===(n=r.content.contents[e])||void 0===n?void 0:n.assessmentId,courseId:null===(i=r.content.contents[e])||void 0===i?void 0:i.courseId,contentId:e}))})}),moveContentInStore:(e,t,n)=>(0,s.PH)(d.V.CONTENT_MOVE_IN_STORE,r=>{let s=r(),o=C.getContentById(s,e);if(!o)return Promise.resolve({});let a=C.getContentsByParentContentId(s,t),l=(0,i.sortBy)((0,i.filter)(a,t=>t.id!==e),["position"]),u={...o,parentId:t,position:n};return Promise.resolve({originalContent:o,movedContent:u,sortedTargetSiblings:l})},{contentId:e,targetFolderId:t,targetPosition:n}),persistAdaptiveReleaseCriteria:e=>(0,s.PH)(d.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE,()=>p.BE(e).then(t=>({prevContents:e,...t})).catch(t=>{throw{prevContents:e,err:t}}),{criteriaList:e}),deleteAdaptiveReleaseRules:e=>(0,s.PH)(d.V.CONTENT_DELETE_ADAPTIVE_RELEASE,()=>p.ID(e).then(e=>e).catch(t=>{throw{contents:e,err:t}}),{contents:e}),deleteAdaptiveReleaseRulesInStore:e=>(0,s.aU)((0,s.ok)(d.V.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE),{contentId:e}),deleteAdaptiveReleaseRuleInStore:(e,t)=>(0,s.aU)((0,s.ok)(d.V.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE),{contentId:e,ruleType:t}),notifyContentImportComplete:e=>(0,s.aU)((0,s.ok)(d.V.CONTENT_IMPORT_COMPLETE),{courseId:e}),loadContentsByQuery:e=>(0,s.PH)(d.V.CONTENT_SEARCH_LOAD,()=>p.dU({filter:{contentId:c.x1x.Root,contentSearchMode:c.Ius.courseContent,...e.filter},params:e.params}).then(t=>({query:e,data:t})).catch(t=>{throw{query:e,err:t.error||t.type?t:new m.F7(t.message)}}),{query:e})},A=(0,E.P1)(e=>e.content.adaptiveRelease,(e,t)=>t,(e,t)=>(0,i.filter)(e.byCriteriaId,{criteria:{contentId:t}})),C={getContentByAssessmentId:(e,t)=>(0,i.find)(e.content.contents,{assessmentId:t}),getContentById:(e,t)=>(0,i.find)(e.content.contents,{id:t}),getContentsByParentContentId:(e,t)=>(0,i.filter)(e.content.contents,{parentId:t}),getRootFolderByCourseId:(e,t)=>(0,i.find)(e.content.contents,{title:"ROOT",courseId:t}),getContentLinksByLinkedContentId:(e,t)=>(0,i.filter)(e.content.contents,{contentDetail:{[o.GQ.CourseLink.toString()]:{linkSourceId:t}}}),getHasContentLinksByLinkedContentId:(e,t)=>Object.values(e.content.contents).some(e=>{var n,r,i;return(null===(n=e.contentDetail)||void 0===n?void 0:n[o.GQ.CourseLink.toString()])&&(null===(i=null===(r=e.contentDetail)||void 0===r?void 0:r[o.GQ.CourseLink.toString()])||void 0===i?void 0:i.linkSourceId)===t}),getAdaptiveReleaseCriteriaByContentId:A,getContentsBySearchCriteria:(e,t)=>{var n,r;let{view:s}=I(e.content,t);return s&&null!==(r=null===(n=s.values)||void 0===n?void 0:n.map(t=>(0,i.find)(e.content.contents,{id:t})))&&void 0!==r?r:[]},getCountBySearchCriteria:(e,t)=>{var n,r;let{view:i}=I(e.content,t);return i&&null!==(r=null===(n=i.paging)||void 0===n?void 0:n.count)&&void 0!==r?r:0},isLoading:(e,t)=>{let{view:n}=I(e.content,t);return n?n.isLoading:e.content.isLoading}};function v(e,t){let n=C.getContentsByParentContentId(t,e).map(e=>e.id),r=[e].concat(n).map(e=>C.getContentLinksByLinkedContentId(t,e).map(e=>e.id)).reduce((e,t)=>t.concat(e),[]);return[e].concat(n).concat(r)}function R(e,t){let n={contents:{}};return(0,i.forEach)(e,(e,r)=>{n.contents[e.id]={...e,position:void 0!==t&&t>=0&&r>=t?r+1:r}}),n}},766991:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={CONTENT_LOAD:"content.load",CONTENT_PERSIST:"content.persist",CONTENT_PERSIST_MULTIPLE:"content.persist.multiple",CONTENT_DELETE:"content.delete",CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE:"content.persist.adaptive.release.multiple",CONTENT_DELETE_ADAPTIVE_RELEASE:"content.delete.adaptive.release",CONTENT_UPDATE_IN_STORE:"content.update.in.store",CONTENT_DELETE_IN_STORE:"content.delete.in.store",CONTENT_MOVE_IN_STORE:"content.move.in.store",CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE:"content.delete.adaptive.release.in.store",CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE:"content.delete.adaptive.release.in.store.individual",CONTENT_IMPORT_COMPLETE:"content.import.complete",CONTENT_SEARCH_LOAD:"content.search.load"}},546514:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return d},Ys:function(){return E}});var r=n(550161),i=n(846409);async function s(e){let t=await (0,i.U2)((0,i.Q2)("/v1/courses/%courseId%/contents/indicators",{courseId:e})),{results:n}=t;return{indicators:n}}var o=n(715729),a=n(276635),l=n(417548);let u={[l.V.CONTENT_INDICATORS_LOAD]:(e,t)=>(0,o.ZP)(e,e=>{let{courseId:n}=t;e.dateLoadedByCourseId[n]||(e.dateLoadedByCourseId[n]={}),e.dateLoadedByCourseId[n].isLoading=!0}),[(0,r.ok)(l.V.CONTENT_INDICATORS_LOAD)]:(e,t)=>(0,o.ZP)(e,e=>{let{indicators:n,courseId:r}=t;e.dateLoadedByCourseId[r]||(e.dateLoadedByCourseId[r]={}),n&&(n.forEach(t=>{e.byContentId[t.contentId]=t}),e.contentIdsByCourseId[r]=new Set(n.map(e=>e.contentId)),e.dateLoadedByCourseId[r].dateLoaded=new Date),e.dateLoadedByCourseId[r].isLoading=!1}),[(0,r.bG)(l.V.CONTENT_INDICATORS_LOAD)]:(e,t)=>(0,o.ZP)(e,e=>{let{courseId:n}=t;e.dateLoadedByCourseId[n]||(e.dateLoadedByCourseId[n]={}),e.dateLoadedByCourseId[n].isLoading=!1}),[l.V.DISABLE_CLASS_CONVERSATION_INDICATOR]:(e,t)=>(0,o.ZP)(e,e=>{let{contentId:n}=t;e.byContentId[n]||(e.byContentId[n]={}),e.byContentId[n].classConversationHasIndicator=!1}),[l.V.REMOVE_GROUPID_FROM_INDICATORS]:(e,t)=>(0,o.ZP)(e,e=>{let{contentId:n,groupId:r}=t;e.byContentId[n]||(e.byContentId[n]={});let i=e.byContentId[n].groupIds;i&&(e.byContentId[n].groupIds=i.filter(e=>e!==r))})},d=(0,r.Lq)({byContentId:{},contentIdsByCourseId:{},dateLoadedByCourseId:{}},u),c=(e,t,n)=>{let r=e.contentIndicators.dateLoadedByCourseId[t];if(!r)return!0;let{isLoading:i,dateLoaded:s}=r;return!i&&(!!n||!s||Date.now()-s.getTime()>l.m)},p={loadIndicators:(e,t)=>(0,r.PH)(l.V.CONTENT_INDICATORS_LOAD,n=>c(n(),e,t)?s(e).then(t=>({courseId:e,...t})).catch(t=>{throw{courseId:e,err:t}}):Promise.resolve({courseId:e}),{courseId:e}),removeGroupIdFromIndicatorCache:(e,t)=>(0,r.aU)(l.V.REMOVE_GROUPID_FROM_INDICATORS,{contentId:e,groupId:t}),setClassConversationHasIndicatorToFalseInCache:e=>(0,r.aU)(l.V.DISABLE_CLASS_CONVERSATION_INDICATOR,{contentId:e})},E={getIndicatorByContentId:(e,t)=>(0,a.find)(e.contentIndicators.byContentId,{contentId:t})}},417548:function(e,t,n){"use strict";n.d(t,{V:function(){return r},m:function(){return i}});let r={CONTENT_INDICATORS_LOAD:"indicators.load",REMOVE_GROUPID_FROM_INDICATORS:"indicators.removeGroupId",DISABLE_CLASS_CONVERSATION_INDICATOR:"indicators.disableClassConversationIndicator"},i=9e5},422890:function(e,t,n){"use strict";n.d(t,{I6:function(){return g},Nw:function(){return f},V5:function(){return d},Ys:function(){return S}});var r=n(276635),i=n(112027),s=n(550161),o=n(715729),a=n(207490),l=n(766991),u=n(560985);let d={CONTENT_REVIEW_STATE_PERSIST:"content-review-state.persist",CONTENTS_REVIEW_STATES_GET:"contents-review-states-get",CONTENTS_REVIEW_STATES_USERS_GET:"contents-review-states-users-get",CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET:"contents-review-states-users-reports-states-get",CONTENTS_REVIEW_STATES_USER_CONTENT_GET:"contents-review-states-user-content-get"},c=(e,t)=>{var n;if(!t)return{id:null,view:null};let i=(null===(n=e.contentReviewState.byContentId[t.contentId])||void 0===n?void 0:n.byViewId)||{},s=Object.keys(i).find(e=>{let n=i[e];return r.isEqual(n.query,t)});return{id:null!=s?s:null,view:void 0!==s?i[s]:null}},p=(e,t)=>{var n;if(!t)return{id:null,view:null};let i=(null===(n=e.contentReviewState.byUserId[t.userId])||void 0===n?void 0:n.byViewId)||{},s=Object.keys(i).find(e=>{let n=i[e];return r.isEqual(n.query,t)});return{id:null!=s?s:null,view:void 0!==s?i[s]:null}},E=e=>["contentReviewState","byContentId",e.contentId,"byViewId"],m=e=>["contentReviewState","byUserId",e.userId,"byViewId"];function h(e,t){e.contentReviewState.byContentId[t]||(e.contentReviewState.byContentId[t]={byUserId:{},byViewId:{},reports:{}})}function b(e){return(0,o.ZP)(e,e=>{e.contentReviewState.byUserId={}})}let g=(0,s.Lq)({contentReviewState:{byContentId:{},byUserId:{}}},{[d.CONTENT_REVIEW_STATE_PERSIST]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,o.ZP)(e,e=>{h(e,n),e.contentReviewState.byContentId[n].byUserId[r]||(e.contentReviewState.byContentId[n].byUserId[r]={status:null,isLoading:!0}),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!0})},[(0,s.ok)(d.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{let{contentId:n,contentStates:r,userId:i}=t;return(0,o.ZP)(e,e=>{e.contentReviewState.byContentId[n].byUserId[i].isLoading=!1,r&&Object.values(r).forEach(t=>{let r=t.contentId;h(e,n),e.contentReviewState.byContentId[r].byUserId[i]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}})})},[(0,s.bG)(d.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,o.ZP)(e,e=>{h(e,n),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!1})},[d.CONTENTS_REVIEW_STATES_GET]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,o.ZP)(e,e=>{h(e,n),e.contentReviewState.byContentId[n].byUserId[r]||(e.contentReviewState.byContentId[n].byUserId[r]={status:null,isLoading:!0}),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!0})},[(0,s.ok)(d.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentStates:n,contentId:r,userId:i}=t;return(0,o.ZP)(e,e=>{n&&Object.values(n).forEach(t=>{let n=t.contentId;h(e,n),e.contentReviewState.byContentId[n].byUserId[i]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}}),e.contentReviewState.byContentId[r].byUserId[i].isLoading=!1})},[(0,s.bG)(d.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,o.ZP)(e,e=>{h(e,n),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!1})},[d.CONTENTS_REVIEW_STATES_USERS_GET]:(e,t)=>{let n=(0,o.ZP)(e,e=>{h(e,t.query.contentId)});return(0,s.Li)(c,E)(n,t)},[(0,s.ok)(d.CONTENTS_REVIEW_STATES_USERS_GET)]:(e,t)=>{let{data:n,query:r}=t,i=(0,o.ZP)(e,e=>{h(e,r.contentId),void 0===r.fields&&n.results.forEach(t=>{e.contentReviewState.byContentId[r.contentId].byUserId[t.courseMembership.userId]={status:t.status,isLoading:!1}}),e.contentReviewState.byContentId[r.contentId].permissions=n.permissions});return(0,s.NV)(i,t,{viewResolver:c,viewsPathResolver:E,paging:n.paging,values:n.results.map(e=>e.courseMembership.userId)})},[(0,s.bG)(d.CONTENTS_REVIEW_STATES_USERS_GET)]:(0,s.HT)(c,E),[d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET]:(e,t)=>{let n=(0,o.ZP)(e,n=>{e.contentReviewState.byUserId[t.query.userId]||(n.contentReviewState.byUserId[t.query.userId]={byContentId:{},byViewId:{}})});return(0,s.Li)(p,m)(n,t)},[(0,s.ok)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET)]:(e,t)=>{let{data:n,query:r}=t,i=(0,o.ZP)(e,e=>{n.results.forEach(t=>{e.contentReviewState.byUserId[r.userId].byContentId[t.contentId]=t})});return(0,s.NV)(i,t,{viewResolver:p,viewsPathResolver:m,paging:n.paging,values:n.results.map(e=>e.contentId)})},[(0,s.bG)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET)]:(0,s.HT)(p,m),[d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET]:(e,t)=>(0,o.ZP)(e,e=>{h(e,t.query.contentId),e.contentReviewState.byContentId[t.query.contentId].reports.states={isLoading:!0,states:void 0}}),[(0,s.ok)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET)]:(e,t)=>{let{data:n,query:{contentId:r}}=t;return(0,o.ZP)(e,e=>{h(e,r),e.contentReviewState.byContentId[r].reports.states.isLoading=!1,e.contentReviewState.byContentId[r].reports.states.states=n.states})},[(0,s.bG)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET)]:(e,t)=>(0,o.ZP)(e,e=>{e.contentReviewState.byContentId[t.query.contentId].reports.states.isLoading=!1}),[(0,s.ok)(l.V.CONTENT_LOAD)]:(e,t)=>{let{contents:n}=t;return n=(0,i.MO)(Object.values(n||{})),(0,o.ZP)(e,e=>{Object.values(n).forEach(t=>{let n=t.id;h(e,n),e.contentReviewState.byContentId[n].byUserId[a.Ep]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}})})},[(0,s.ok)(l.V.CONTENT_DELETE)]:b,[(0,s.ok)(l.V.CONTENT_DELETE_ADAPTIVE_RELEASE)]:b,[(0,s.ok)(l.V.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE)]:b,[(0,s.ok)(l.V.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE)]:b,[(0,s.ok)(l.V.CONTENT_DELETE_IN_STORE)]:b,[(0,s.ok)(l.V.CONTENT_PERSIST)]:b,[(0,s.ok)(l.V.CONTENT_PERSIST_MULTIPLE)]:b,[(0,s.ok)(l.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:b,[(0,s.ok)(l.V.CONTENT_MOVE_IN_STORE)]:b,[(0,s.ok)(l.V.CONTENT_UPDATE_IN_STORE)]:b}),f={persistContentReviewState:(e,t,n)=>(0,s.PH)(d.CONTENT_REVIEW_STATE_PERSIST,async()=>{try{let r={courseId:e,contentId:t,userId:a.Ep,state:n};await (0,a.MG)(r);let i=await (0,a.Pb)({courseId:e,contentId:t,includeRelated:!0,includeNextIncompleteChild:!1});return{contentStates:i.contentStates,contentId:t,userId:a.Ep}}catch(n){let e={contentId:t,userId:a.Ep,err:n};throw e}},{contentId:t,userId:a.Ep}),getContentReviewState:(e,t,n,r=!1)=>(0,s.PH)(d.CONTENTS_REVIEW_STATES_GET,async()=>{try{let i=await (0,a.Pb)({courseId:e,contentId:t,includeRelated:n,includeNextIncompleteChild:r});return{contentStates:i.contentStates,contentId:t,userId:a.Ep}}catch(n){let e={contentId:t,userId:a.Ep,err:n};throw e}},{contentId:t,userId:a.Ep}),fetchContentReviewUserStatesByQuery:e=>(0,s.PH)(d.CONTENTS_REVIEW_STATES_USERS_GET,async()=>{try{let t=await (0,a.Wm)(e);return{data:t,query:e}}catch(t){throw{query:e,err:t}}},{query:e}),fetchContentReviewStateUsersReportStates:e=>(0,s.PH)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET,async()=>{try{let t=await (0,a.Gs)(e);return{data:t,query:e}}catch(t){throw{query:e,err:t}}},{query:e}),fetchMoreContentReviewStateUserContent:e=>(0,s.PH)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET,async()=>{try{let t=await (0,a.Cv)(e);return{data:t,query:e}}catch(t){throw{query:e,err:t}}},{query:e})},I=(0,u.P1)([(e,t)=>e.contentReviewState.contentReviewState.byUserId[t.userId],(e,t)=>t],(e,t)=>{var n;return{byViewId:null!==(n=null==e?void 0:e.byViewId)&&void 0!==n?n:{},query:t}}),y=(0,u.P1)(I,({byViewId:e,query:t})=>{let n=Object.values(e).filter(e=>e.query.courseId===t.courseId&&e.query.contentId===t.contentId).sort((e,t)=>{var n,r,i,s;return(null!==(r=null===(n=t.query.paging)||void 0===n?void 0:n.offset)&&void 0!==r?r:0)-(null!==(s=null===(i=e.query.paging)||void 0===i?void 0:i.offset)&&void 0!==s?s:0)});return{views:n,query:t}}),S={getContentReviewStateForContextUser:(e,t)=>{var n,r,i;return null===(i=null===(r=null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.byUserId[a.Ep])||void 0===r?void 0:r.status)||void 0===i?void 0:i.state},getLoadingStatusForContentReviewStateForContextUser:(e,t)=>{var n,r;return null===(r=null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.byUserId[a.Ep])||void 0===r?void 0:r.isLoading},getContentReviewStateUsersByQuery:(e,t)=>{var n;let{view:r}=c(e.contentReviewState,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(n=>{let r=e.contentReviewState.contentReviewState.byContentId[t.contentId].byUserId[n];return{contentId:t.contentId,status:r.status,courseMembership:Object.values(e.courseMembership.byCourseMembershipId).find(e=>e.courseId===t.courseId&&e.userId===n)}}):[]},getContentReviewStateUsersStatusByQuery:(e,t)=>{let{view:n}=c(e.contentReviewState,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getContentReviewStateUsersPermissions:(e,t)=>{var n;return null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.permissions},getContentReviewStateUsersReportStates:(e,t)=>{var n;return null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.reports.states},hasMoreContentReviewStateUserContent:(0,u.P1)(y,({views:e,query:t})=>{var n,r;if(0===e.length)return{isLoading:!1,canLoadMore:!0,nextOffset:0};let i=e[0],s=!!(null===(n=i.paging)||void 0===n?void 0:n.nextPage),o=s?i.paging.offset+t.limit:void 0;return{isLoading:i.isLoading,canLoadMore:s,nextOffset:o,count:null===(r=i.paging)||void 0===r?void 0:r.count}}),getContentReviewStateFirstUserContent:(0,u.P1)([(e,t)=>{var n,r;return null!==(r=null===(n=e.contentReviewState.contentReviewState.byUserId[t.userId])||void 0===n?void 0:n.byContentId)&&void 0!==r?r:{}},(e,t)=>t],(e,t)=>Object.values(e).filter(e=>e.content.parentId===t.contentId&&(!t.visibility||t.visibility.includes(e.content.visibility))).sort((e,t)=>e.content.position-t.content.position))}},619281:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return c},Ys:function(){return E}});var r=n(715729),i=n(550161),s=n(846409);let o="/public/v1/courses/%courseId%/children",a=`${o}/%childCourseId%`;async function l(e){let t;try{t=await (0,s.U2)((0,s.Q2)(o,e))}catch(e){if(e.error.code&&"bb-blackboard-core-course-has-no-children"===e.error.code)t={results:[]};else throw e.error}return t}async function u(e){let t=await (0,s.U2)((0,s.Q2)(a,{courseId:e.parentCourseId,childCourseId:e.childCourseId,fields:e.fields}));return t}let d={CHILD_COURSES_LOAD:"child-courses.load",CHILD_COURSE_LOAD:"child-course.load"},c=(0,i.Lq)({byParentCourseId:{},byChildCourseId:{}},{[d.CHILD_COURSES_LOAD]:i.K4,[(0,i.ok)(d.CHILD_COURSES_LOAD)]:(e,t)=>{let n=t.childCourses,s=t.courseId;return(0,r.Uy)(e,t=>(t.byParentCourseId[s]=n.map(e=>e.id),n.forEach(n=>{let r=e.byChildCourseId[n.id];t.byChildCourseId[n.id]={...(0,i.PM)(r,n)}}),t))},[(0,i.bG)(d.CHILD_COURSES_LOAD)]:i.sT,[(0,i.ok)(d.CHILD_COURSE_LOAD)]:(e,t)=>{let{childCourse:n}=t;return(0,r.Uy)(e,t=>{let r=e.byChildCourseId[n.id];t.byChildCourseId[n.id]={...(0,i.PM)(r,n)}})}}),p={loadChildCourses:e=>(0,i.PH)(d.CHILD_COURSES_LOAD,async()=>{try{let t=await l({courseId:e,fields:["id","childCourse"]});return{courseId:e,childCourses:t.results}}catch(e){throw{err:e}}}),loadChildCourse:(e,t)=>(0,i.PH)(d.CHILD_COURSE_LOAD,async()=>{try{let n=await u({parentCourseId:e,childCourseId:t,fields:["id","childCourse"]});return{childCourseId:t,childCourse:n}}catch(e){throw{err:e}}})},E={byParentCourseId:(e,t)=>{let n=e.courseChildren.byParentCourseId[t];if(n)return n.map(t=>e.courseChildren.byChildCourseId[t])},byChildCourseId:(e,t)=>e.courseChildren.byChildCourseId[t]}},64818:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return d},Ys:function(){return p}});var r=n(715729),i=n(276635),s=n(550161),o=n(846409);async function a(e){let t=await (0,o.U2)((0,o.Q2)("/v1/courses/%courseId%/ultraConversionReports/%taskId%/summary",e));return{courseId:t.courseId,courseName:t.courseName,tasks:{[t.taskId]:{risks:t.risks.reduce((e,t)=>(e[t.riskClassification.toLowerCase()]={count:t.count,messages:t.exceptionMessages.reduce((e,t)=>(e[t.name]={count:t.count},e),{})},e),{})}}}}async function l(e){let t=await (0,o.U2)((0,o.Q2)("/v1/courses/%courseId%/ultraConversionReports/%taskId%/messages",e)),n=t.results;for(;t.paging.nextPage;)t=await (0,o.U2)("/"+t.paging.nextPage.split("/").slice(3).join("/")),n=n.concat(t.results);return{courseId:e.courseId,tasks:{[e.taskId]:n.reduce((e,t)=>{let n=t.riskClassification?t.riskClassification.toLowerCase():"null";return e[n]=e[n]||{},e[n][t.message]=e[n][t.message]||[],e[n][t.message].push(t),e},{})}}}let u={CONVERSION_SUMMARY_LOAD:"conversion.summary.load",CONVERSION_MESSAGES_LOAD:"conversion.messages.load"},d=(0,s.Lq)({conversionSummaries:{},conversionMessages:{},isLoading:!1},{[u.CONVERSION_SUMMARY_LOAD]:(e,t)=>(0,s.K4)(e,t),[(0,s.ok)(u.CONVERSION_SUMMARY_LOAD)]:(e,t)=>{let n={};return t&&t.data&&(n={conversionSummaries:{[t.data.courseId]:t.data}}),(0,r.Uy)((0,s.f2)(e,t),e=>{i.merge(e,n)})},[(0,s.bG)(u.CONVERSION_SUMMARY_LOAD)]:(e,t)=>(0,s.sT)(e,t),[u.CONVERSION_MESSAGES_LOAD]:(e,t)=>(0,s.K4)(e,t),[(0,s.ok)(u.CONVERSION_MESSAGES_LOAD)]:(e,t)=>{let n={};return t&&t.data&&(n={conversionMessages:{[t.data.courseId]:t.data}}),(0,r.Uy)((0,s.f2)(e,t),e=>{i.merge(e,n)})},[(0,s.cI)(u.CONVERSION_MESSAGES_LOAD)]:(e,t)=>{let{courseId:n,taskId:i}=t,o=(0,r.Uy)(e,e=>{e.conversionMessages[n]&&e.conversionMessages[n].tasks||(e.conversionMessages[n]={courseId:n,tasks:{}}),e.conversionMessages[n].tasks[i]={}});return(0,s.f2)(o,t)},[(0,s.bG)(u.CONVERSION_MESSAGES_LOAD)]:(e,t)=>(0,s.sT)(e,t)}),c={loadSummary:e=>(0,s.PH)(u.CONVERSION_SUMMARY_LOAD,t=>{var n;let{courseId:r,taskId:i}=e;return(n=t()).courseConversion.conversionSummaries[r]&&n.courseConversion.conversionSummaries[r].tasks[i]?Promise.resolve(null):a({courseId:r,taskId:i}).then(e=>({data:e}))}),loadMessages:(e,t)=>(0,s.PH)(u.CONVERSION_MESSAGES_LOAD,t=>{var n;let{courseId:r,taskId:i}=e;return(n=t()).courseConversion.conversionMessages[r]&&n.courseConversion.conversionMessages[r].tasks[i]?Promise.resolve(null):l({courseId:r,taskId:i}).then(e=>({courseId:r,taskId:i,data:e})).catch(e=>{throw{err:e}})},e,t)},p={getConversionSummaryById:(e,t,n)=>e.courseConversion.conversionSummaries[t]&&e.courseConversion.conversionSummaries[t].tasks[n],getConversionMessagesById:(e,t,n)=>e.courseConversion.conversionMessages[t]&&e.courseConversion.conversionMessages[t].tasks[n],getRawConversionMessagesByTaskIds:(e,t,n)=>{let r=e.courseConversion.conversionMessages[t]&&e.courseConversion.conversionMessages[t].tasks;return i.transform(r,(e,t,r)=>{if(n.indexOf(r)>-1){let n=i.transform(t,(e,t)=>{let n=i.values(t);i.flatten(n).forEach(t=>{e.push(t)})},[]);e[r]=n}},{})}}},41205:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(715729),i=n(276635),s=n(550161),o=n(438929),a=n(186093);let l={COURSE_LOAD:"course.load",COURSES_LOAD_ALL:"courses.load",COURSE_UPDATE:"course.update",COURSE_LOAD_STUDENT_COUNT:"course.load.student.count"},u=(0,s.Lq)({courses:{},permissions:null,paging:null,isLoading:!1},{[l.COURSES_LOAD_ALL]:s.K4,[(0,s.ok)(l.COURSES_LOAD_ALL)]:(e,t)=>{if(!t||!t.courses)return(0,s.f2)(e,t);let{courses:n,permissions:i,paging:o}=t;return(0,r.Uy)(e,t=>{Object.keys(n).forEach(r=>{let i={...n[r],api:{isUpdating:!1,isDeleting:!1},ui:e.courses[r]&&e.courses[r].ui};t.courses[i.id]=i}),t.isLoading=!1,t.paging=o,t.permissions=i})},[(0,s.bG)(l.COURSES_LOAD_ALL)]:s.sT,[l.COURSE_LOAD]:s.K4,[(0,s.ok)(l.COURSE_LOAD)]:(e,t)=>{if(!t||!t.course)return(0,s.f2)(e,t);let{course:n}=t,i=(0,r.Uy)(e,e=>{e.courses[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}}});return(0,s.f2)(i,t)},[(0,s.bG)(l.COURSE_LOAD)]:s.sT,[l.COURSE_UPDATE]:(e,t)=>{let{nextCourse:n}=t;return(0,r.Uy)(e,e=>{e.courses[n.id]||(e.courses[n.id]={}),e.courses[n.id].api||(e.courses[n.id].api={}),e.courses[n.id].api.isUpdating=!0})},[(0,s.ok)(l.COURSE_UPDATE)]:(e,t)=>{let{course:n}=t;return(0,r.Uy)(e,t=>{t.courses[n.id]={...n,api:{...e.courses[n.id].api,isUpdating:!1},ui:e.courses[n.id]&&e.courses[n.id].ui}})},[(0,s.bG)(l.COURSE_UPDATE)]:(e,t)=>{let{prevCourse:n}=t;return(0,r.Uy)(e,e=>{e.courses[n.id]||(e.courses[n.id]={}),e.courses[n.id].api||(e.courses[n.id].api={}),e.courses[n.id].api.isUpdating=!1})},[l.COURSE_LOAD_STUDENT_COUNT]:s.K4,[(0,s.ok)(l.COURSE_LOAD_STUDENT_COUNT)]:(e,t)=>{if(!t||!t.courseId)return(0,s.f2)(e,t);let{courseId:n,studentCount:i}=t,o=(0,r.Uy)(e,e=>{e.courses[n]&&(e.courses[n].studentCount=i)});return(0,s.f2)(o,t)},[(0,s.bG)(l.COURSE_LOAD_STUDENT_COUNT)]:s.sT,[(0,s.ok)(a.V.USER_MEMBERSHIPS_LOAD)]:(e,t)=>{var n;let i=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.courses;return i?(0,r.Uy)(e,e=>{e.courses={...e.courses,...i}}):e}}),d={fetchCourses:()=>(0,s.PH)(l.COURSES_LOAD_ALL,e=>{var t;return(t=e()).course.isLoading||null!=t.course.paging?Promise.resolve(null):(0,o.Vv)()}),fetchCourse:e=>(0,s.PH)(l.COURSE_LOAD,async t=>{var n;if(n=t(),c.getCourseById(n,e))return null;let r=await (0,o.uH)(e);return{course:r}}),updateCourse:(e,t)=>(0,s.PH)(l.COURSE_UPDATE,()=>(0,o.Hf)(e,t).then(e=>({course:e})).catch(t=>{throw{prevCourse:e,err:t}}),{nextCourse:t}),fetchCourseStudentCount:e=>(0,s.PH)(l.COURSE_LOAD_STUDENT_COUNT,async()=>{let t=await (0,o.oi)(e);return{courseId:e,studentCount:t}}),setCourseInStore:e=>(0,s.aU)((0,s.ok)(l.COURSE_LOAD),{course:e})},c={getCourseById:(e,t)=>i.find(e.course.courses,{id:t}),getAvailableCourses:e=>i.filter(e.course.courses,{isAvailable:!0}),getCourseStudentCount:(e,t)=>e.course.courses[t]?e.course.courses[t].studentCount:0}},835098:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={COURSE_ENTITLEMENTS_LOAD:"courseEntitlements.load"}},796143:function(e,t,n){"use strict";n.d(t,{I6:function(){return P},Nw:function(){return N},Ys:function(){return D}});var r=n(715729),i=n(276635),s=n(550161),o=n(771300),a=n(830095),l=n(54971),u=n(762765),d=n(928659),c=n(125920),p=n(139366),E=n(304239),m=n(112027),h=n(613573),b=n(766991),g=n(815532);let f={groups:{byId:{},byGroupSetId:{},views:{byCourseId:{},byContentId:{}},loadingStatus:g.S.HasNotStarted},groupMemberships:{},isLoading:!1},I=(0,s.Lq)(f,{[b.V.CONTENT_LOAD]:s.K4,[(0,s.ok)(b.V.CONTENT_LOAD)]:(e,t)=>{if(i.has(t,"groups")){let n=(0,r.ZP)(e,e=>{let{groups:n}=t;Object.keys(n).forEach(t=>{var r;let i=null!==(r=e.groups.byId[t])&&void 0!==r?r:{};e.groups.byId[t]={...i,...n[t],api:{isUpdating:!1,isDeleting:!1}}})});return(0,s.f2)(n,t)}return(0,s.f2)(e,t)},[(0,s.bG)(b.V.CONTENT_LOAD)]:s.sT,[l.Z.GROUPS_LOAD_BY_CONTENT_ID]:s.K4,[(0,s.ok)(l.Z.GROUPS_LOAD_BY_CONTENT_ID)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{contentId:n,groups:r}=t;Object.keys(r).forEach(t=>{e.groups.byId[t]={...r[t],contentId:n}})});return(0,s.f2)(n,t)},[(0,s.bG)(l.Z.GROUPS_LOAD_BY_CONTENT_ID)]:s.sT,[l.Z.GROUP_DELETE_BATCH]:(e,t)=>(0,r.ZP)(e,e=>{let{deletedGroups:n}=t;n.forEach(t=>{e.groups.byId[t.id]||(e.groups.byId[t.id]={}),e.groups.byId[t.id].api||(e.groups.byId[t.id].api={}),e.groups.byId[t.id].api.isDeleting=!0})}),[(0,s.ok)(l.Z.GROUP_DELETE_BATCH)]:(e,t)=>{let{deletedGroups:n,groupSetId:i}=t;return(0,r.ZP)(e,e=>{var r,s;n.forEach(t=>{delete e.groups.byId[t.id]}),n.length&&A(e.groups);let o=null!=i?i:null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.groupSetId;if(!o)return;let a=null!==(s=e.groups.byGroupSetId[o])&&void 0!==s?s:[],l=new Set(t.deletedGroups.map(e=>e.id)),u=a.filter(e=>!l.has(e));e.groups.byGroupSetId[i]=u})},[(0,s.bG)(l.Z.GROUP_DELETE_BATCH)]:(e,t)=>(0,r.ZP)(e,e=>{let{deletedGroups:n}=t;n.forEach(t=>{e.groups.byId[t.id].api.isDeleting=!1})}),[(0,s.ok)(l.Z.GROUP_LOAD_BY_ID)]:(e,t)=>{let{group:n,groupId:i}=t;return(0,r.ZP)(e,t=>{let r=e.groups.byId[i];t.groups.byId[i]={...(0,s.PM)(r,n)}})}}),y=(e,t)=>Object.keys(e).find(n=>{let r=e[n],s=i.isEqual(r.query.paging,t.paging),o=i.isEqual(r.query.filter,t.filter);return s&&o}),S=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.courseId]||{},r=y(n,t);return r?{id:r,view:n[r]}:s.LW},T=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byContentId[t.contentId]||{},r=y(n,t);return r?{id:r,view:r?n[r]:null}:{id:null,view:null}},_=e=>["views","byCourseId",e.courseId],O=e=>["views","byContentId",e.contentId],A=e=>{let t=Object.keys(e.views.byCourseId);t.forEach(t=>{let n=e.views.byCourseId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})})},C=(e,t)=>(0,r.ZP)(e,e=>{let n=!1;Object.keys(t).forEach(r=>{var i;e.byId[r]||(n=!0),e.byId[r]={...e.byId[r],...t[r],ui:{...null===(i=e.byId[r])||void 0===i?void 0:i.ui}},delete e.byId[r].groupSet}),n&&A(e)}),v=(0,s.Lq)(f.groups,{[l.Z.GROUPS_LOAD]:(e,t)=>(0,s.K4)(e,t,{loadingStatus:g.S.Loading}),[(0,s.ok)(l.Z.GROUPS_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{let{groups:n}=t;Object.keys(n).forEach(t=>{let r=n[t];if(e.byId[t]={...r,api:{isUpdating:!1,isDeleting:!1}},!r.groupSetId)return;let i=new Set(e.byGroupSetId[r.groupSetId]).add(r.id);e.byGroupSetId[r.groupSetId]=Array.from(i)}),e.loadingStatus=g.S.Loaded}),[(0,s.bG)(l.Z.GROUPS_LOAD)]:e=>(0,r.ZP)(e,e=>{e.loadingStatus=g.S.Error}),[l.Z.GROUPS_LOAD_BY_QUERY]:(0,s.Li)(S,_),[(0,s.bG)(l.Z.GROUPS_LOAD_BY_QUERY)]:(0,s.HT)(S,_),[(0,s.ok)(l.Z.GROUPS_LOAD_BY_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,s.f2)(e,t);let{groupIds:r,paging:i,groups:o}=n;return e=C(e,o),(0,s.NV)(e,t,{viewResolver:S,viewsPathResolver:_,paging:i,values:r})},[l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY]:(0,s.Li)(T,O),[(0,s.bG)(l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY)]:(0,s.HT)(T,O),[(0,s.ok)(l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,s.f2)(e,t);let{groupIds:r,paging:i,groups:o}=n;return e=C(e,o),(0,s.NV)(e,t,{viewResolver:T,viewsPathResolver:O,paging:i,values:r})},[(0,s.ok)(c.V.GROUP_SET_REMOVE)]:(e,t)=>(0,r.ZP)(e,n=>{let{groupSetId:r}=t;Object.keys(e.byId).forEach(t=>{let i=e.byId[t];i.groupSetId===r&&delete n.byId[t]}),A(n)}),[(0,s.ok)(c.V.GROUP_SET_MODIFY)]:(e,t)=>(0,r.ZP)(e,n=>{let{groupSet:r}=t,i=e.byGroupSetId[r.id];null==i||i.forEach(e=>n.byId[e].isAvailable=r.isAvailable)}),[(0,s.ok)(l.Z.GROUPS_ADD)]:(e,t)=>{let{addedGroupsById:n,groupSetId:i}=t,s=C(e,n);return i&&t.addedCourseGroupIds&&(s=(0,r.ZP)(s,n=>{var r;let s=null!==(r=e.byGroupSetId[i])&&void 0!==r?r:[],o=new Set([...t.addedCourseGroupIds,...s]);n.byGroupSetId[i]=Array.from(o)})),s},[(0,s.ok)(l.Z.GROUPS_UPDATE)]:(e,t)=>{let{updatedGroupsById:n}=t;return C(e,n)},[(0,s.bG)(l.Z.GROUPS_UPDATE)]:s.sT,[(0,s.ok)(l.Z.GROUP_STUDENT_COUNT_LOAD)]:(e,t)=>(0,r.ZP)(e,n=>{let{groups:r}=t;Object.keys(r).forEach(t=>{n.byId[t]={...e.byId[t],...r[t]}})}),[(0,s.ok)(l.Z.ADD_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.ZP)(e,n=>{let{groupId:r,userId:s}=t,o=e.byId[r];!o||!o.memberships||i.findIndex(o.memberships,["userId",s])>=0||(n.byId[r]={...o,memberships:[...o.memberships,{groupId:r,userId:s}],studentCount:o.studentCount+1})}),[(0,s.ok)(l.Z.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.ZP)(e,n=>{let{userId:r,enrolledGroupId:s}=t,o=e.byId[s];if(!o||!o.memberships||-1===i.findIndex(o.memberships,["userId",r]))return;let a=o.memberships.filter(e=>e.userId!==r);n.byId[o.id]={...o,memberships:a,studentCount:o.studentCount-1}})}),R=(0,s.Lq)(f.groupMemberships,{[(0,s.ok)(l.Z.GROUP_MEMBERSHIPS_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{let{memberships:n}=t;Object.keys(n).forEach(t=>{e[t]={...n[t]}})}),[(0,s.ok)(l.Z.ADD_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.ZP)(e,n=>{let{groupId:r,userId:s}=t,o=Array.from(e[r]||[]);i.findIndex(o,["userId",s])>=0||(n[r]=[...o,{groupId:r,userId:s}])}),[(0,s.ok)(l.Z.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.ZP)(e,n=>{let{userId:r,enrolledGroupId:s}=t,o=e[s];o&&-1!==i.findIndex(o,["userId",r])&&(n[s]=o.filter(e=>e.userId!==r))})}),L=(0,s.UY)({groups:v,groupMemberships:R}),P=(0,s.vn)(I,L,f),N={deleteByContentId:e=>(0,s.c3)((t,n)=>{let r=D.getGroupsByContentId(n(),e),i=h.Ys.getContentById(n(),e).courseId;t((0,s.aU)(l.Z.GROUP_DELETE_BATCH,{deletedGroups:r}));let o=()=>{let t=h.Ys.getContentById(n(),e),r={...t,isGroupContent:!1,assignedGroups:[]};return{prevContent:t,nextContent:r}};return(0,E.Y)(i,r).then(()=>{let{prevContent:e,nextContent:n}=o();return t(h.Nw.persistContent(e,n))}).then(()=>{let{nextContent:e}=o();return t(h.Nw.persistContentSync(e))}).then(()=>{t((0,s.aU)((0,s.ok)(l.Z.GROUP_DELETE_BATCH),{deletedGroups:r}))}).catch(e=>{throw t((0,s.aU)((0,s.bG)(l.Z.GROUP_DELETE_BATCH),{deletedGroups:r})),t((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e})),{err:e}})}),loadGroupsByQuery:e=>(0,s.PH)(l.Z.GROUPS_LOAD_BY_QUERY,async()=>{try{let t=await (0,E.EL)(e);return{data:t,query:e}}catch(t){throw{err:t,query:e}}},{query:e}),loadByContentId:(e,t)=>(0,s.PH)(l.Z.GROUPS_LOAD_BY_CONTENT_ID,n=>t||U(n(),e.contentId)?(0,E.G3)(e).catch(e=>{throw{err:e}}):Promise.resolve({groups:{}})),loadByContentIdAndQuery:e=>(0,s.c3)(async(t,n)=>{let{view:r}=T(n().group.groups,e);if(null==r||!r.isLoading){t((0,s.aU)(l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY,{query:e}));try{let n=await (0,E.d3)(e);t((0,s.aU)((0,s.ok)(l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY),{data:n,query:e}))}catch(n){t((0,s.aU)((0,s.bG)(l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY),{err:n,query:e})),t((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:n}))}}}),loadByGroupSetId:(e,t,n)=>(0,s.c3)(async(r,i)=>{if(!d.Ys.isLoading(i(),t))try{r((0,s.aU)(l.Z.GROUPS_LOAD,{groupSetId:t}));let i=await p.K0(e,t,n),o=Object.keys(i.groups);r((0,s.aU)((0,s.ok)(l.Z.GROUPS_LOAD),{...i,groupSetId:t,assignedGroups:o}))}catch(e){r((0,s.aU)((0,s.bG)(l.Z.GROUPS_LOAD),{err:e})),r((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e}))}}),loadGroupsByCourse:e=>(0,s.PH)(l.Z.GROUPS_LOAD,()=>(0,E.DV)(e).catch(e=>{throw{err:e}})),loadMembershipsByGroupSetId:(e,t)=>(0,s.PH)(l.Z.GROUP_MEMBERSHIPS_LOAD,async()=>{let n=await p.W$(e,t),r=n.memberships;return{...n,groupSetId:t,memberships:r}}),addGroupMembership:e=>(0,s.c3)(async(t,n)=>{t((0,s.aU)(l.Z.ADD_GROUP_MEMBERSHIP)),t((0,s.aU)(l.Z.REMOVE_GROUP_MEMBERSHIP));try{let n=await (0,E.iJ)(e);return t((0,s.aU)((0,s.ok)(l.Z.ADD_GROUP_MEMBERSHIP),n)),t((0,s.aU)((0,s.ok)(l.Z.REMOVE_GROUP_MEMBERSHIP),{userId:n.userId,enrolledGroupId:e.enrolledGroupId,courseId:e.courseId})),await t(u.Nw.loadUser(n.userId)),n}catch(e){if(t((0,s.aU)((0,s.bG)(l.Z.ADD_GROUP_MEMBERSHIP),e)),t((0,s.aU)((0,s.bG)(l.Z.REMOVE_GROUP_MEMBERSHIP),e)),e instanceof o.hq||e instanceof o.S6||e instanceof o.hm||e instanceof o.e9||e instanceof o.UP||e instanceof o.PG)throw e;return t((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e})),null}}),loadStudentCountByGroupSetId:(e,t)=>(0,s.PH)(l.Z.GROUP_STUDENT_COUNT_LOAD,async()=>{let n=await p.Fh(e,t),r=n.groups,i=Object.keys(r).reduce((e,t)=>e+r[t].studentCount,0);return{...n,groupSetId:t,groups:r,groupSetStudentCount:i}}),addByGroupSetId:(e,t)=>{if(!e)throw Error("Expected an existing group set id");let n=(0,m.MO)(t);return(0,s.aU)((0,s.ok)(l.Z.GROUPS_ADD),{addedGroupsById:n,groupSetId:e,addedCourseGroupIds:Object.keys(n)})},updateByGroupSetId:(e,t,n)=>{if(!e)throw Error("Expected an existing group set id");let r=(0,m.MO)(t);return(0,s.aU)((0,s.ok)(l.Z.GROUPS_UPDATE),{updatedGroupsById:r,groupSetId:e,courseId:n})},deleteByGroupSetId:(e,t)=>{if(!e)throw Error("Expected an existing group set id");return(0,s.aU)((0,s.ok)(l.Z.GROUP_DELETE_BATCH),{deletedGroups:t,groupSetId:e})},removeGroupsFromStore:e=>(0,s.aU)((0,s.ok)(l.Z.GROUP_DELETE_BATCH),{deletedGroups:e}),loadGroupById:(e,t)=>(0,s.PH)(l.Z.GROUP_LOAD_BY_ID,async()=>{let n=await E.zW(e,t);return(0,s.aU)((0,s.ok)(l.Z.GROUP_LOAD_BY_ID),{group:n,courseId:e,groupId:t})})},D={getGroupsByQuery:(e,t)=>{var n;let{view:r}=S(e.group.groups,t);if(!r||!r.isValid||r.isLoading)return[];let i=(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{var n,r;let i=e.group.groups.byId[t];if(!i)return null;let s={...i},o=null===(r=null===(n=e.groupWorkspace)||void 0===n?void 0:n.groupSets)||void 0===r?void 0:r.byId[i.groupSetId];return s.groupSet=o,s}).filter(e=>e);return i},getGroupByGroupId:(e,t)=>e.group.groups.byId[t],getCourseGroupsByIds:(e,t)=>t.map(t=>e.group.groups.byId[t]),getCourseGroupViewStatusByQuery:(e,t)=>{let{view:n}=S(e.group.groups,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getGroupsByContentId:(e,t)=>i.filter(e.group.groups.byId,{contentId:t}),getGroupsByContentIdAndQuery:(e,t)=>{var n;let{view:r}=T(e.group.groups,t);if(!r||!r.isValid||r.isLoading)return[];let i=(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{let n;let r=e.group.groups.byId[t];if(!r)return null;let i={...r};return r.groupSetId&&(n=d.Ys.getGroupSetById(e,r.groupSetId)),i.groupSet=n,i}).filter(e=>!!e);return i},getGroupsByGroupSetId:(e,t)=>{var n,r;return null!==(r=null===(n=e.group.groups.byGroupSetId[t])||void 0===n?void 0:n.map(t=>e.group.groups.byId[t]))&&void 0!==r?r:[]},getGroupMembershipsByGroupSetId:(e,t)=>{if(!t||!e.groupWorkspace.groupSets.byId.hasOwnProperty(t))return[];let n=e.group.groups.byGroupSetId[t];return Array.isArray(n)?n.map(t=>e.group.groupMemberships[t]):[]},hasJoined:(e,t)=>{let n=i.filter(e.group.groups.byId,{...t.contentId&&{contentId:t.contentId},...t.groupSetId&&{groupSetId:t.groupSetId}});return i.some(n,e=>!!e.memberships&&i.find(e.memberships,{userId:t.userId}))},getGroupsLoadingStatus:e=>e.group.groups.loadingStatus,isLoading:e=>e.group.isLoading},U=(e,t)=>0===D.getGroupsByContentId(e,t).length},815532:function(e,t,n){"use strict";var r,i;n.d(t,{S:function(){return r}}),(i=r||(r={})).HasNotStarted="hasNotStarted",i.Loading="loading",i.Loaded="loaded",i.Error="error"},928659:function(e,t,n){"use strict";n.d(t,{I6:function(){return A},Nw:function(){return C},Ys:function(){return v}});var r=n(715729),i=n(276635),s=n(550161),o=n(112027),a=n(830095),l=n(54971),u=n(139366),d=n(125920);let c={groupSets:{byId:{},byCourseId:{}},permissions:{},paging:{count:0},status:{isLoading:!1,loadingGroupSetIds:[]},totalGroupCount:0,lastGroupSetId:"",ui:{newGroupSetIds:[]},views:{byCourseId:{}}},p=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=(null===(n=e.views)||void 0===n?void 0:n.byCourseId[t.courseId])||{},s=Object.keys(r).find(e=>{let n=r[e],s=i.isEqual(n.query.paging,t.paging);return s});return{id:s,view:s?r[s]:null}},E=e=>["views","byCourseId",e.courseId],m=(e,t)=>{let{groupSets:n}=t;return(0,r.ZP)(e,e=>{let t=Object.values(n.byId),r=Object.values(e.groupSets.byId),i=[...r,...t];e.groupSets.byId=(0,o.MO)(i)})},h=(e,t)=>{let n=e.loadingGroupSetIds.filter(e=>e!==t.groupSetId);return{...e,loadingGroupSetIds:n}},b=(0,s.Lq)(c.groupSets,{[(0,s.ok)(d.V.GROUP_SET_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{e.byId[t.groupSetId]={...e.byId[t.groupSetId],...t.groupSet}}),[(0,s.ok)(d.V.GROUP_SETS_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{var n;e.byId=t.groupSets.byId;let r=null!==(n=e.byCourseId[t.courseId])&&void 0!==n?n:[];e.byCourseId[t.courseId]=[...new Set([...Object.keys(t.groupSets.byId),...r])]}),[(0,s.ok)(d.V.GROUP_SETS_LOAD_MORE)]:(e,t)=>(0,r.ZP)(e,e=>{var n;i.merge(e.byId,t.groupSets.byId);let r=null!==(n=e.byCourseId[t.courseId])&&void 0!==n?n:[];e.byCourseId[t.courseId]=[...new Set([...r,...Object.keys(t.groupSets.byId)])]}),[(0,s.ok)(d.V.GROUP_SET_ADD)]:(e,t)=>(0,r.ZP)(e,e=>{var n;let{groupSet:r,courseId:i}=t;e.byId[r.id]=r;let s=null!==(n=e.byCourseId[i])&&void 0!==n?n:[];e.byCourseId[i]=[...new Set([...s,r.id])]}),[d.V.GROUP_SET_MODIFY]:(e,t)=>(0,r.ZP)(e,e=>{let n=t.groupSet.id;e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!0}),[(0,s.ok)(d.V.GROUP_SET_MODIFY)]:(e,t)=>(0,r.ZP)(e,e=>{let n=t.groupSet.id;e.byId[n]=t.groupSet,e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1}),[(0,s.bG)(d.V.GROUP_SET_MODIFY)]:(e,t)=>(0,r.ZP)(e,e=>{let n=t.groupSet.id;e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1}),[(0,s.ok)(d.V.GROUP_SET_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{let{groupSetId:n,courseId:r}=t;delete e.byId[t.groupSetId],e.byCourseId[r]=e.byCourseId[r].filter(e=>e!==n)}),[(0,s.ok)(l.Z.GROUPS_ADD)]:(e,t)=>{var n;let i=null!==(n=e.byId[t.groupSetId].groupCount)&&void 0!==n?n:0;return(0,r.ZP)(e,e=>{e.byId[t.groupSetId].groupCount=i+t.addedCourseGroupIds.length})},[(0,s.ok)(l.Z.GROUPS_LOAD_BY_QUERY)]:(e,t)=>(0,r.ZP)(e,e=>{let n=Object.values(t.data.groups),r=n.map(e=>(e.groupSet.permissions=e.permissions,e.groupSet)),i=Object.values(e.byId),s=[...r,...i];e.byId=(0,o.MO)(s)}),[(0,s.ok)(l.Z.GROUP_DELETE_BATCH)]:(e,t)=>{var n,i;let s=t.groupSetId||(null===(i=null===(n=t.deletedGroups)||void 0===n?void 0:n[0])||void 0===i?void 0:i.groupSetId),o=e.byId[s];if(s&&o){let n=o.groupCount||0;return(0,r.ZP)(e,e=>{e.byId[s].groupCount=n-t.deletedGroups.length})}return e},[(0,s.ok)(l.Z.GROUP_STUDENT_COUNT_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{e.byId[t.groupSetId]||(e.byId[t.groupSetId]={}),e.byId[t.groupSetId].studentCount=t.groupSetStudentCount})}),g=(0,s.Lq)(c.status,{[d.V.GROUP_SETS_LOAD]:s.K4,[d.V.GROUP_SET_LOAD]:(e,t)=>{let n=e.loadingGroupSetIds.concat(t.groupSetId);return{...e,loadingGroupSetIds:n}},[(0,s.ok)(d.V.GROUP_SETS_LOAD)]:s.f2,[(0,s.ok)(d.V.GROUP_SET_LOAD)]:h,[(0,s.bG)(d.V.GROUP_SETS_LOAD)]:s.sT,[(0,s.bG)(d.V.GROUP_SET_LOAD)]:h,[(0,s.ok)(d.V.GROUP_SETS_LOAD_MORE)]:s.f2,[l.Z.GROUPS_LOAD]:(e,t)=>{let n=e.loadingGroupSetIds.concat(t.groupSetId);return{...e,loadingGroupSetIds:n}},[(0,s.ok)(l.Z.GROUPS_LOAD)]:h,[(0,s.bG)(l.Z.GROUPS_LOAD)]:h}),f=(0,s.Lq)(c.permissions,{[(0,s.ok)(d.V.GROUP_SETS_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>({...e,...t.permissions})),[(0,s.bG)(d.V.GROUP_SETS_LOAD)]:(e,t)=>({}),[(0,s.ok)(d.V.GET_GROUP_AND_SET_COUNT)]:(e,t)=>(0,r.ZP)(e,e=>({...e,...t.permissions})),[(0,s.bG)(d.V.GET_GROUP_AND_SET_COUNT)]:(e,t)=>({})}),I=(0,s.Lq)(c.paging,{[(0,s.ok)(d.V.GROUP_SETS_LOAD)]:(e,t)=>t.paging,[(0,s.ok)(d.V.GROUP_SETS_LOAD_MORE)]:(e,t)=>t.paging,[(0,s.ok)(d.V.GROUP_SET_ADD)]:(e,t)=>(0,r.ZP)(e,e=>{e.count+=1}),[(0,s.ok)(d.V.GROUP_SET_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{e.count-=1}),[(0,s.ok)(d.V.GET_GROUP_AND_SET_COUNT)]:(e,t)=>t.paging,[(0,s.bG)(d.V.GROUP_SETS_LOAD)]:(e,t)=>c.paging,[d.V.GROUP_WORKSPACE_RESET_COUNT]:(e,t)=>c.paging}),y=(0,s.Lq)(c.totalGroupCount,{[(0,s.ok)(d.V.GET_GROUP_AND_SET_COUNT)]:(e,t)=>t.results.map(e=>e.groupCount).reduce((e,t)=>e+t,0),[(0,s.ok)(d.V.GROUP_SET_REMOVE)]:(e,t)=>e-t.groupCount,[(0,s.ok)(l.Z.GROUPS_ADD)]:(e,t)=>e+t.addedCourseGroupIds.length,[(0,s.ok)(l.Z.GROUPS_UPDATE)]:(e,t)=>e,[(0,s.ok)(l.Z.GROUP_DELETE_BATCH)]:(e,t)=>{var n,r;let i=t.groupSetId||(null===(r=null===(n=t.deletedGroups)||void 0===n?void 0:n[0])||void 0===r?void 0:r.groupSetId);return i?e-t.deletedGroups.length:e},[d.V.GROUP_WORKSPACE_RESET_COUNT]:(e,t)=>c.totalGroupCount}),S=(0,s.Lq)(c.lastGroupSetId,{[(0,s.ok)(d.V.GROUP_SET_ADD)]:(e,t)=>t.groupSet.id,[(0,s.ok)(d.V.GROUP_SET_MODIFY)]:(e,t)=>t.groupSet.id}),T=(0,s.Lq)(c.ui,{[(0,s.ok)(d.V.GROUP_SET_ADD)]:(e,t)=>{let n=t.groupSet.id;return -1===e.newGroupSetIds.indexOf(n)?(0,r.ZP)(e,t=>{t.newGroupSetIds=[...e.newGroupSetIds,n]}):e},[(0,s.ok)(d.V.GROUP_SET_MODIFY)]:(e,t)=>{let n=t.groupSet.id;return -1===e.newGroupSetIds.indexOf(n)?(0,r.ZP)(e,t=>{t.newGroupSetIds=[...e.newGroupSetIds,n]}):e},[d.V.GROUP_SET_MARK_AS_OLD]:(e,t)=>(0,r.ZP)(e,n=>{n.newGroupSetIds=e.newGroupSetIds.filter(e=>e!==t.groupSetId)})}),_=(0,s.Lq)(c,{[d.V.GROUP_SETS_LOAD_BY_QUERY]:(0,s.Li)(p,E),[(0,s.ok)(d.V.GROUP_SETS_LOAD_BY_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,s.f2)(e,t);let{groupSets:r,paging:i}=n;return e=m(e,n),(0,s.NV)(e,t,{viewResolver:p,viewsPathResolver:E,paging:i,values:Object.keys(r.byId)})},[(0,s.bG)(d.V.GROUP_SETS_LOAD_BY_QUERY)]:(0,s.HT)(p,E)}),O=(0,s.UY)({groupSets:b,permissions:f,paging:I,status:g,totalGroupCount:y,lastGroupSetId:S,ui:T}),A=(0,s.vn)(_,O,c),C={loadGroupSetsByQuery:e=>(0,s.PH)(d.V.GROUP_SETS_LOAD_BY_QUERY,async()=>{try{let t=await u.fG(e);return{data:t,query:e}}catch(t){throw{err:t,query:e}}},{query:e}),loadGroupSets:(e,t,n=!1)=>(0,s.c3)(async(r,i)=>{if(!v.isLoading(i()))try{r((0,s.aU)(d.V.GROUP_SETS_LOAD));let i=await u.jC(e,t);r(n?(0,s.aU)((0,s.ok)(d.V.GROUP_SETS_LOAD_MORE),{...i,courseId:e}):(0,s.aU)((0,s.ok)(d.V.GROUP_SETS_LOAD),{...i,courseId:e}))}catch(e){r((0,s.aU)((0,s.bG)(d.V.GROUP_SETS_LOAD),{err:e})),r((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e}))}}),loadGroupSetById:(e,t)=>(0,s.c3)(async(n,r)=>{if(!v.isLoading(r(),t))try{n((0,s.aU)(d.V.GROUP_SET_LOAD,{groupSetId:t}));let r=await u.RD(e,t);n((0,s.aU)((0,s.ok)(d.V.GROUP_SET_LOAD),{...r,groupSetId:t}))}catch(e){n((0,s.aU)((0,s.bG)(d.V.GROUP_SET_LOAD),{groupSetId:t,err:e})),n((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e}))}}),saveGroupSet:(e,t)=>(0,s.PH)(t.id?d.V.GROUP_SET_MODIFY:d.V.GROUP_SET_ADD,async()=>{try{let n=t.id&&"permissions,groupCount,studentCount,hasAssociatedContent",r=await u.AG(e,t,n);return{groupSet:r,courseId:e}}catch(e){throw{groupSet:t,err:e}}},{groupSet:t}),removeGroupSet:(e,t)=>(0,s.PH)(d.V.GROUP_SET_REMOVE,async n=>{try{return await u.wI(e,t),{groupSetId:t,groupCount:v.getGroupsCountByGroupSetId(n(),t),courseId:e}}catch(e){throw{err:e}}}),getGroupAndSetCount:e=>(0,s.PH)(d.V.GET_GROUP_AND_SET_COUNT,async()=>{try{let t=await u.at(e);return{...t}}catch(e){throw{err:e}}}),markAsOld:e=>(0,s.aU)(d.V.GROUP_SET_MARK_AS_OLD,{groupSetId:e}),reset:()=>(0,s.aU)(d.V.GROUP_WORKSPACE_RESET_COUNT)},v={getGroupsSetsByQuery:(e,t)=>{let{view:n}=p(e.groupWorkspace,t);return n?(n.values||[]).map(t=>e.groupWorkspace.groupSets.byId[t]):[]},getCourseGroupSetsViewStatusByQuery:(e,t)=>{let{view:n}=p(e.groupWorkspace,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getLastCreatedGroupSetId:e=>e.groupWorkspace.lastGroupSetId,getGroupSetById:(e,t)=>t&&e.groupWorkspace.groupSets.byId.hasOwnProperty(t)?e.groupWorkspace.groupSets.byId[t]:null,getGroupsCountByGroupSetId:(e,t)=>{var n,r;return t&&null!==(r=null===(n=e.groupWorkspace.groupSets.byId[t])||void 0===n?void 0:n.groupCount)&&void 0!==r?r:0},getTotalGroupSetCount:e=>e.groupWorkspace.paging&&e.groupWorkspace.paging.count,getTotalGroupCount:e=>e.groupWorkspace.totalGroupCount,isLoading:(e,t)=>t?-1!==e.groupWorkspace.status.loadingGroupSetIds.indexOf(t):e.groupWorkspace.status.isLoading,canCreate:e=>e.groupWorkspace.permissions.createGroups,isNew:(e,t)=>-1!==e.groupWorkspace.ui.newGroupSetIds.indexOf(t)}},125920:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GROUP_SETS_LOAD:"group.sets.load",GROUP_SETS_LOAD_BY_QUERY:"group.sets.load.by.query",GROUP_SETS_LOAD_MORE:"group.sets.load.more",GROUP_SETS_SWITCH_SORT_CRITERIA:"group.sets.switch.sort.criteria",GROUP_SET_ADD:"group.set.add",GROUP_SET_MODIFY:"group.set.modify",GROUP_SET_REMOVE:"group.set.remove",GROUP_SET_MARK_AS_OLD:"group.set.mark.as.old",GROUP_SET_LOAD:"group.set.load",GET_COURSE_CONTEXT:"get.course.context",GET_GROUP_AND_SET_COUNT:"get.group.and.set.count",GET_GROUP_MEMBERSHIP_COUNT:"get.group.membership.count",GROUP_WORKSPACE_RESET_COUNT:"group.workspace.reset.count"}},732305:function(e,t,n){"use strict";n.d(t,{Nw:function(){return f},I6:function(){return g},Ys:function(){return T}});var r=n(276635),i=n(715729),s=n(939737),o=n(830095),a=n(550161);let l={COURSE_LOGS_LOAD:"course-logs.load",COURSE_LOGS_DELETE:"course-logs.delete",COURSE_LOGS_INVALIDATE:"course-logs.invalidate"};var u=n(560985),d=n(715655),c=n(337767),p=n(176726);let E=(e,t)=>{var n;if(!t)return{id:null,view:null};let i=e.views.byCourseId[t.courseId]||{},s=null!==(n=Object.keys(i).find(e=>{let n=i[e],s=r.isEqual(n.query.paging,t.paging),o=r.isEqual(n.query.queryParams,t.queryParams);return s&&o}))&&void 0!==n?n:null;return{id:s,view:s?i[s]:null}},m=e=>["views","byCourseId",e.courseId],h=(e,t)=>{let{view:n}=E(e.courseLogs,t);return!n||!n.isLoading&&!n.isValid},b=(e,t)=>e=(0,i.Uy)(e,e=>{var n;let r=null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{};Object.keys(r).forEach(e=>{r[e].isValid=!1})}),g=(0,a.Lq)({byCourseLogId:{},views:{byCourseId:{}}},{[l.COURSE_LOGS_LOAD]:(0,a.Li)(E,m),[(0,a.ok)(l.COURSE_LOGS_LOAD)]:(e,t)=>{let{data:n}=t;n||(0,a.f2)(e,t);let{logIds:r,logs:s,paging:o}=n;return e=(0,i.Uy)(e,e=>{Object.keys(s).forEach(t=>{e.byCourseLogId[t]={...e.byCourseLogId[t],...s[t]}})}),(0,a.NV)(e,t,{viewResolver:E,viewsPathResolver:m,paging:o,values:r})},[(0,a.bG)(l.COURSE_LOGS_LOAD)]:(0,a.HT)(E,m),[l.COURSE_LOGS_DELETE]:(e,t)=>(0,i.Uy)(e,e=>{let n={...e.byCourseLogId[t.logId].api,isDeleting:!0};e.byCourseLogId[t.logId].api=n}),[(0,a.ok)(l.COURSE_LOGS_DELETE)]:(e,t)=>b(e,t.courseId),[(0,a.bG)(l.COURSE_LOGS_DELETE)]:(e,t)=>(e=(0,i.Uy)(e,e=>{let n={...e.byCourseLogId[t.logId].api,isDeleting:!1};e.byCourseLogId[t.logId].api=n}),(0,a.sT)(e,t)),[l.COURSE_LOGS_INVALIDATE]:(e,t)=>b(e,t.courseId)}),f={loadCourseLogsByQuery:e=>(0,a.c3)(async(t,n)=>{let r=!h(n(),e);if(!r){t((0,a.aU)(l.COURSE_LOGS_LOAD,{query:e}));try{let n=await (0,s.v)(e);t((0,a.aU)((0,a.ok)(l.COURSE_LOGS_LOAD),{query:e,data:n}))}catch(n){throw t((0,a.aU)((0,a.bG)(l.COURSE_LOGS_LOAD),{query:e})),t((0,a.aU)((0,a.ok)(o.Z.APP_ERROR),{error:n})),{error:n}}}}),deleteCourseLogByLogId:(e,t)=>(0,a.c3)(async n=>{n((0,a.aU)(l.COURSE_LOGS_DELETE,{courseId:t,logId:e}));try{await (0,s.a)(e,t),n((0,a.aU)((0,a.ok)(l.COURSE_LOGS_DELETE),{courseId:t,logId:e}))}catch(r){throw n((0,a.aU)((0,a.bG)(l.COURSE_LOGS_DELETE),{courseId:t,logId:e})),n((0,a.aU)((0,a.ok)(o.Z.APP_ERROR),{error:r})),{error:r}}}),invalidateCourseLogViews:e=>(0,a.c3)(async t=>{t((0,a.aU)(l.COURSE_LOGS_INVALIDATE,{courseId:e}))})},I=(0,u.wN)(d.PW,c.AD),y=I((e,t)=>{let{view:n}=E(e.courseLogs,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e),S=(0,p.U)((e,t)=>{let{view:n}=E(e.courseLogs,t);return n?(n.values||[]).map(t=>e.courseLogs.byCourseLogId[t]):[]},e=>e),T={getCourseLogsByQuery:S,getCourseLogViewStatusByQuery:y}},137841:function(e,t,n){"use strict";n.d(t,{I6:function(){return P},Nw:function(){return N},Ys:function(){return D}});var r=n(276635),i=n(715729),s=n(550161),o=n(408027),a=n(836204),l=n(404518),u=n(53925),d=n(54971),c=n(422890),p=n(843730),E=n(830095),m=n(186093),h=n(391819),b=n(393950);function g(e){return!!e.sort&&0!==e.sort.length}let f=e=>null==e||Array.isArray(e)&&0===e.length,I=(e,t)=>{let{courseId:n}=t,i=e.views.byCourseId[n];return Object.keys(i).filter(e=>{let n=i[e],s=!g(t)&&!g(n.query)||r.isEqual(n.query.sort,t.sort);if(!s)return!1;let o=function(e,t){if(!e.filter)return!t.filter||Object.values(t.filter).every(f);if(!t.filter)return Object.values(e.filter).every(f);let n=Array.from(new Set([...Object.keys(e.filter),...Object.keys(t.filter)]));return n.every(n=>{let i=e.filter[n],s=t.filter[n];return!!(i===s||r.isEqual(i,s))||f(i)&&f(s)})}(n.query,t);return o})},y=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.courseId]||{},i=Object.keys(n).find(e=>{let i=n[e],s=r.isEqual(i.query.columnId,t.columnId),o=r.isEqual(i.query.paging,t.paging),a=r.isEqual(i.query.filter,t.filter),l=r.isEqual(i.query.sort,t.sort);return o&&l&&a&&s});return{id:i,view:i?n[i]:null}},S=e=>["views","byCourseId",e.courseId],T=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byUserId[t.userId]||{},r=Object.keys(n).find(e=>{let r=n[e],i=r.query.userId===t.userId;return i});return{id:r,view:r?n[r]:null}},_=e=>["views","byUserId",e.userId],O=(e,t)=>{let{view:n}=y(e.courseMembership,t);return!n||!n.isLoading&&!n.isValid},A=(e,t,n=!0)=>{let r=e.courseMembership.byCourseMembershipId[t];return n?!(null==r?void 0:r.user):!r},C=(e,t,n,r=!0)=>{let i=Object.values(e.courseMembership.byCourseMembershipId).find(e=>e.courseId===t&&e.userId===n);return r?!(null==i?void 0:i.user):!i},v=(e,t)=>{if(!t)return;let n=new Set(Object.values(t).map(e=>e.courseId)),r=e=>null==e;n.forEach(n=>{let i=Object.keys(t).reduce((n,i)=>{var s,o,a,l;let u=t[i],d=e.byCourseMembershipId[i];if(!d||!u)return n;let c=!r(u.dueDateExceptionType)&&!r(d.dueDateExceptionType)&&u.dueDateExceptionType!==d.dueDateExceptionType,p=!r(u.isAvailable)&&!r(d.isAvailable)&&u.isAvailable!==d.isAvailable,E=!r(u.role)&&!r(d.role)&&u.role!==d.role||!r(null===(s=u.user)||void 0===s?void 0:s.systemRole)&&!r(null===(o=d.user)||void 0===o?void 0:o.systemRole)&&(null===(a=u.user)||void 0===a?void 0:a.systemRole)!==(null===(l=d.user)||void 0===l?void 0:l.systemRole),m=!r(u.timeLimitExceptionType)&&!r(d.timeLimitExceptionType)&&u.timeLimitExceptionType!==d.timeLimitExceptionType,h=d.displayOrder!==u.displayOrder;return{accommodationChanged:n.accommodationChanged||c,availabilityChanged:n.availabilityChanged||p,roleChanged:n.roleChanged||E,timeLimitExceptionChanged:n.timeLimitExceptionChanged||m,displayOrderChanged:n.displayOrderChanged||h}},{});n&&R(e,n,i)})},R=(e,t,n)=>{var r;let i=n.accommodationChanged||n.availabilityChanged||n.roleChanged||n.timeLimitExceptionChanged||n.displayOrderChanged||n.gradesChanged||n.groupsChanged||n.studentPreviewStatusChanged||n.studentAttemptStatusChanged,s=null===(r=e.views.byCourseId)||void 0===r?void 0:r[t];i&&s&&Object.values(s).forEach(e=>{var t,r,i,s,a,l,u;if(!e.isValid)return;let d=(null===(t=e.query)||void 0===t?void 0:t.filter)&&(0,b.zE)(null===(r=e.query)||void 0===r?void 0:r.filter)?null===(i=e.query)||void 0===i?void 0:i.filter:void 0,c=(null==d?void 0:d.hasDueDateExceptionOnly)&&n.accommodationChanged,p=n.availabilityChanged,E=(null==d?void 0:d.roleBucket)&&n.roleChanged,m=(null==d?void 0:d.hasTimeLimitExceptionOnly)&&n.timeLimitExceptionChanged,h=n.displayOrderChanged,g=n.gradesChanged&&(null===(s=e.query.sort)||void 0===s?void 0:s.some(e=>e.field===o.PJt.Grade)),f=(null===(a=e.query)||void 0===a?void 0:a.filter)&&(0,b.Sh)(null===(l=e.query)||void 0===l?void 0:l.filter)?(null===(u=e.query)||void 0===u?void 0:u.filter.statusFilter)&&n.studentAttemptStatusChanged:void 0;(p||E||c||m||h||g||f||n.groupsChanged||n.studentPreviewStatusChanged)&&(e.isValid=!1)})},L=(e,t)=>{t&&(v(e,t),Object.keys(t).forEach(n=>{var r,i;e.byCourseMembershipId[n]={...e.byCourseMembershipId[n],...t[n],displayOrder:t[n].displayOrder,assignedBlogEntries:(null===(r=e.byCourseMembershipId[n])||void 0===r?void 0:r.assignedBlogEntries)||[],ui:{...null===(i=e.byCourseMembershipId[n])||void 0===i?void 0:i.ui}}}))},P=(0,s.Lq)({byCourseMembershipId:{},permissions:{byCourseId:{}},paging:null,isLoading:!1,views:{byCourseId:{},byUserId:{}}},{[(0,s.ok)(a.V.BLOG_ENTRIES_LOAD)]:(e,t)=>(0,i.ZP)(e,e=>{e.byCourseMembershipId[t.query.assignedUserId]||(e.byCourseMembershipId[t.query.assignedUserId]={}),e.byCourseMembershipId[t.query.assignedUserId].assignedBlogEntries=Object.keys(t.data.byId)}),[(0,s.ok)(a.V.BLOG_ENTRY_ADD)]:(e,t)=>{let{assignedUserId:n}=t,r=e.byCourseMembershipId[n];if(r&&t&&t.byId){let s=[...Object.keys(t.byId),...r.assignedBlogEntries];return(0,i.ZP)(e,e=>{e.byCourseMembershipId[n]||(e.byCourseMembershipId[n]={}),e.byCourseMembershipId[n].assignedBlogEntries=s})}return e},[(0,s.ok)(a.V.BLOG_ENTRY_REMOVE)]:(e,t)=>{let n=e.byCourseMembershipId[t.assignedUserId];if(n){let s=r.filter(n.assignedBlogEntries,e=>e!==t.entryId);return(0,i.ZP)(e,e=>{e.byCourseMembershipId[t.assignedUserId]||(e.byCourseMembershipId[t.assignedUserId]={}),e.byCourseMembershipId[t.assignedUserId].assignedBlogEntries=s})}return e},[(0,s.ok)(c.V5.CONTENTS_REVIEW_STATES_USERS_GET)]:(e,t)=>(0,i.ZP)(e,e=>{void 0===t.query.fields&&t.data.results.forEach(t=>{e.byCourseMembershipId[t.courseMembership.id]=t.courseMembership})}),[(0,s.ok)(u.V.GRADEBOOK_GRADES_LOAD)]:(e,t)=>{let n=new Set(t.grades.map(e=>e.courseId));return n.size?(0,i.ZP)(e,e=>{n.forEach(t=>{R(e,t,{gradesChanged:!0})})}):e},[(0,s.ok)(u.V.GRADEBOOK_GRADES_INVALIDATE)]:(e,t)=>{let n=new Set(t.grades.map(e=>e.courseId));return n.size?(0,i.ZP)(e,e=>{n.forEach(t=>{R(e,t,{gradesChanged:!0})})}):e},[(0,s.ok)(u.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{var n;return(null===(n=null==t?void 0:t.grade)||void 0===n?void 0:n.courseId)?(0,i.ZP)(e,e=>{R(e,t.grade.courseId,{gradesChanged:!0})}):e},[(0,s.ok)(m.V.COURSE_MEMBERSHIP_LOAD)]:(e,t)=>{let{data:n}=t;return(0,i.ZP)(e,e=>{L(e,{[n.id]:n})})},[(0,s.ok)(m.V.COURSE_MEMBERSHIP_SET)]:(e,t)=>{let{data:n}=t;return(0,i.ZP)(e,e=>{L(e,{[n.id]:n})})},[m.V.COURSE_MEMBERSHIPS_LOAD]:(0,s.Li)(y,S),[(0,s.ok)(m.V.COURSE_MEMBERSHIPS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,s.f2)(e,t);let{membershipIds:r,paging:o,courseId:a,permissions:l}=n;return e=(0,i.ZP)(e,e=>{L(e,n.byCourseMembershipId),e.permissions.byCourseId[a]=l}),(0,s.NV)(e,t,{viewResolver:y,viewsPathResolver:S,paging:o,values:r})},[(0,s.bG)(m.V.COURSE_MEMBERSHIPS_LOAD)]:(0,s.HT)(y,S),[m.V.USER_MEMBERSHIPS_LOAD]:(0,s.Li)(T,_),[(0,s.ok)(m.V.USER_MEMBERSHIPS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,s.f2)(e,t);let{membershipIds:r,paging:o}=n;return e=(0,i.ZP)(e,e=>{L(e,n.byMembershipId)}),(0,s.NV)(e,t,{viewResolver:T,viewsPathResolver:_,paging:o,values:r})},[(0,s.bG)(m.V.USER_MEMBERSHIPS_LOAD)]:(0,s.HT)(T,_),[(0,s.bG)(m.V.COURSE_MEMBERSHIP_USERS_LOAD)]:(0,s.HT)(y,S),[m.V.COURSE_MEMBERSHIP_USERS_LOAD]:(0,s.Li)(y,S),[(0,s.ok)(m.V.COURSE_MEMBERSHIP_USERS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,s.f2)(e,t);let{paging:r,permissions:i,userIds:o}=n;return(0,s.NV)(e,t,{viewResolver:y,viewsPathResolver:S,paging:r,permissions:i,values:o})},[(0,s.ok)(l.V.STUDENT_PREVIEW_EXIT)]:(e,t)=>(0,i.ZP)(e,e=>{R(e,t.data.courseId,{studentPreviewStatusChanged:!0})}),[(0,s.ok)(d.Z.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>{let{courseId:n}=t;return(0,i.ZP)(e,e=>{R(e,n,{groupsChanged:!0})})},[(0,s.ok)(d.Z.GROUPS_UPDATE)]:(e,t)=>{let{courseId:n}=t;return(0,i.ZP)(e,e=>{R(e,n,{groupsChanged:!0})})},[(0,s.ok)(h.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{courseId:n,studentAttemptStatusChanged:r}=t;return(0,i.ZP)(e,e=>{r&&R(e,n,{studentAttemptStatusChanged:!0})})}}),N={loadCourseMembershipsByCourseId:e=>(0,s.c3)(async(t,n)=>{let{courseId:r,limit:i,offset:s,roleBucket:o}=e,a={courseId:r,paging:{...i?{limit:i}:{},...s?{offset:s}:{}},sort:null,filter:{...o?{roleBucket:[o]}:{}}};return t(N.loadCourseMembershipsByQuery(a))}),loadCourseMembershipsByQuery:e=>(0,s.c3)(async(t,n)=>{let r=!O(n(),e);if(!r){t((0,s.aU)(m.V.COURSE_MEMBERSHIPS_LOAD,{query:e}));try{let n=await (0,p.D8)(e);t((0,s.aU)((0,s.ok)(m.V.COURSE_MEMBERSHIPS_LOAD),{data:n,query:e}))}catch(n){throw t((0,s.aU)((0,s.bG)(m.V.COURSE_MEMBERSHIPS_LOAD),{query:e})),t((0,s.aU)((0,s.ok)(E.Z.APP_ERROR),{error:n})),{err:n}}}}),loadCourseMembershipUserIdsByCourseIdWithFields:e=>(0,s.c3)(async t=>{var n,r;let{courseId:i,roleBucket:o,fields:a,statusFilter:l,columnId:u,searchString:d}=e,c={courseId:i,filter:{...o?{roleBucket:[o]}:{},...a?{fields:a}:"",...l?{statusFilter:l}:"",...d?{searchString:d}:""},columnId:u};t((0,s.aU)(m.V.COURSE_MEMBERSHIP_USERS_LOAD,{query:c}));try{let e;let i=[],o=0;do{let t={...c,paging:{limit:5e3,offset:o}},s=await (0,p.Dv)(t),a=s.paging;e=null!==(n=null==a?void 0:a.nextPage)&&void 0!==n?n:"",i.push(s),o=(null!==(r=null==a?void 0:a.offset)&&void 0!==r?r:0)+5e3}while(e);let a=(0,p.Nv)(i,c);t((0,s.aU)((0,s.ok)(m.V.COURSE_MEMBERSHIP_USERS_LOAD),{data:a,query:c}))}catch(e){throw t((0,s.aU)((0,s.bG)(m.V.COURSE_MEMBERSHIP_USERS_LOAD),{query:c})),t((0,s.aU)((0,s.ok)(E.Z.APP_ERROR),{error:e})),{err:e}}}),loadCourseMembershipByMemberId:(e,t,n=!0)=>(0,s.c3)(async(r,i)=>{if(!A(i(),t,n))return D.getCourseMembershipByMembershipId(i(),t);try{r((0,s.aU)(m.V.COURSE_MEMBERSHIP_LOAD,{courseId:e}));let i=await (0,p.ZJ)(e,t,n);return r((0,s.aU)((0,s.ok)(m.V.COURSE_MEMBERSHIP_LOAD),{data:i,courseId:e})),i}catch(e){throw r((0,s.aU)((0,s.ok)(E.Z.APP_ERROR),{error:e})),{err:e}}}),loadCourseMembershipByUserId:(e,t)=>(0,s.c3)(async(n,r)=>{if(!C(r(),e,t,!0))return D.getCourseMembershipByUserId(r(),e,t);try{n((0,s.aU)(m.V.COURSE_MEMBERSHIP_LOAD,{courseId:e}));let r=await (0,p.zJ)(e,t);return n((0,s.aU)((0,s.ok)(m.V.COURSE_MEMBERSHIP_LOAD),{data:r,courseId:e})),r}catch(e){if(e instanceof o.Hy0&&404===e.body.status)throw{err:e};throw n((0,s.aU)((0,s.ok)(E.Z.APP_ERROR),{error:e})),{err:e}}}),setCourseMembershipsInStore:(e,t)=>{let n=(0,p.jQ)(t,e);return(0,s.aU)((0,s.ok)(m.V.COURSE_MEMBERSHIPS_LOAD),{data:n,query:e})},setUserMembershipsInStore:(e,t)=>{let n=(0,p.Rc)(t,e);return(0,s.aU)((0,s.ok)(m.V.USER_MEMBERSHIPS_LOAD),{data:n,query:e})},setMembershipInStore:e=>(0,s.c3)(async t=>{t((0,s.aU)((0,s.ok)(m.V.COURSE_MEMBERSHIP_SET),{data:e}))})},D={getCourseMembershipsByQuery:(e,t)=>{let{view:n}=y(e.courseMembership,t);return n?(n.values||[]).map(t=>e.courseMembership.byCourseMembershipId[t]):[]},getCourseMembershipsByCourseId:(e,t,n,r,i)=>{let s={courseId:t,paging:{...r?{limit:r}:{},...i?{offset:i}:{}},sort:null,filter:{...n?{roleBucket:[n]}:{}}};return D.getCourseMembershipsByQuery(e,s)},getCourseMembershipUserIdsByCourseId:(e,t)=>{var n;let{courseId:r,roleBucket:i,fields:s,statusFilter:o,columnId:a,searchString:l}=t,u={courseId:r,filter:{...i?{roleBucket:[i]}:{},...s?{fields:s}:"",...o?{statusFilter:o}:"",...l?{searchString:l}:""},columnId:a},{view:d}=y(e.courseMembership,u);return d?null!==(n=d.values)&&void 0!==n?n:[]:null},isLoading:(e,t)=>{let{view:n}=y(e.courseMembership,t);return n?n.isLoading:e.courseMembership.isLoading},getCourseMembershipViewStatusByQuery:(e,t)=>{let{view:n}=y(e.courseMembership,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getCourseMembershipByMembershipId:(e,t)=>e.courseMembership.byCourseMembershipId[t],getCourseMembershipsByMembershipIds:(e,t)=>t.map(t=>e.courseMembership.byCourseMembershipId[t]),getUserFromMembershipId:(e,t)=>{let n=e.courseMembership.byCourseMembershipId[t];return n?n.user?n.user:n.userId?e.user.byId[n.userId]:void 0:void 0},getUsersFromMembershipIds:(e,t)=>t.map(t=>D.getUserFromMembershipId(e,t)),getMembershipPermissions:(e,t)=>e.courseMembership.permissions.byCourseId[t],getCourseMembershipsByUserIds:(e,t,n)=>n.map(n=>r.find(e.courseMembership.byCourseMembershipId,e=>t===e.courseId&&n===e.userId)),getCourseMembershipByUserId:(e,t,n)=>Object.values(e.courseMembership.byCourseMembershipId).find(e=>t===e.courseId&&n===e.userId),getLatestViewWithMembershipId:(e,t,n)=>{let{courseId:r}=n;if(!(t in e.courseMembership.byCourseMembershipId)||!(r in e.courseMembership.views.byCourseId))return null;let i=I(e.courseMembership,n),s=i.map(n=>{var i,s,o;let a=e.courseMembership.views.byCourseId[r][n];if(a.isLoading||!a.isValid)return{viewId:n,indexInView:-1,indexInCollection:-1,lastFetched:-1};let l=null!==(i=a.values.indexOf(t))&&void 0!==i?i:-1,u={viewId:n,indexInView:l,indexInCollection:l,lastFetched:a.lastFetched};return l<0||(u.indexInCollection=(null!==(o=null===(s=a.paging)||void 0===s?void 0:s.offset)&&void 0!==o?o:0)+l),u}),o=s.filter(e=>e.indexInView>-1);if(0===o.length)return null;let a=o.reduce((e,t)=>e.lastFetched>t.lastFetched?e:t,o[0]);return a}}},186093:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={COURSE_MEMBERSHIPS_LOAD:"course.memberships.load",USER_MEMBERSHIPS_LOAD:"user.memberships.load",COURSE_MEMBERSHIP_SET:"course.membership.set",COURSE_MEMBERSHIP_LOAD:"course.membership.load",COURSE_MEMBERSHIP_USERS_LOAD:"course.membership.users.load"}},598547:function(e,t,n){"use strict";n.d(t,{Nw:function(){return u},I6:function(){return l},Ys:function(){return d}});var r=n(715729),i=n(846409);async function s(e){let t=(0,i.Q2)("/v1/courses/conversations/counts",{});return e?(0,i.U2)(t,e):(0,i.U2)(t)}var o=n(550161);let a={COURSE_MESSAGE_COUNT_LOAD_ALL:"course.message.count.load.all"},l=(0,o.Lq)({counts:{overall:{totalCount:0,unreadCount:0}},isLoading:!1},{[a.COURSE_MESSAGE_COUNT_LOAD_ALL]:o.K4,[(0,o.ok)(a.COURSE_MESSAGE_COUNT_LOAD_ALL)]:(e,t)=>{if(!(null==t?void 0:t.count))return(0,o.f2)(e,t);let n=(0,r.ZP)(e,e=>{e.counts.overall=t.count});return(0,o.f2)(n,t)},[(0,o.bG)(a.COURSE_MESSAGE_COUNT_LOAD_ALL)]:o.sT}),u={loadOverallCourseMessageCount:e=>(0,o.PH)(a.COURSE_MESSAGE_COUNT_LOAD_ALL,async()=>{try{let t=await s(e);return{count:t}}catch(e){throw{err:e}}})},d={getOverallUnreadMessageCount:e=>{var t,n,r,i;return null!==(i=null===(r=null===(n=null===(t=e.courseMessage)||void 0===t?void 0:t.counts)||void 0===n?void 0:n.overall)||void 0===r?void 0:r.unreadCount)&&void 0!==i?i:0}}},257724:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(715729),i=n(276635),s=n(408027),o=n(550161),a=n(25439);let l={COURSE_PREFERENCE_LOAD:"course-preference.load",COURSE_PREFERENCE_PERSIST:"course-preference.persist",COURSE_PREFERENCE_DELETE:"course-preference.delete"},u=(0,o.Lq)({byCourseId:{},isLoading:!1},{[l.COURSE_PREFERENCE_LOAD]:o.K4,[(0,o.ok)(l.COURSE_PREFERENCE_LOAD)]:(e,t)=>{let{courseId:n}=t,{coursePreference:s}=t,a=i.get(e,["byCourseId",n],{});s={...s,api:{isUpdating:!1,isDeleting:!1},ui:i.get(a,[s.key,"ui"])};let l=(0,r.Uy)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][s.key]=s});return(0,o.f2)(l,t)},[(0,o.cI)(l.COURSE_PREFERENCE_LOAD)]:o.f2,[(0,o.bG)(l.COURSE_PREFERENCE_LOAD)]:o.sT,[l.COURSE_PREFERENCE_PERSIST]:(e,t)=>(0,r.Uy)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key]||(e.byCourseId[t.courseId][t.nextCoursePreference.key]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api||(e.byCourseId[t.courseId][t.nextCoursePreference.key].api={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api.isUpdating=!0}),[(0,o.ok)(l.COURSE_PREFERENCE_PERSIST)]:(e,t)=>{let{courseId:n}=t,{coursePreference:s}=t,o=i.get(e,["byCourseId",n],{});return s={...s,api:{...i.get(o,[s.key,"api"]),isUpdating:!1},ui:i.get(o,[s.key,"ui"])},(0,r.Uy)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][s.key]=s})},[(0,o.bG)(l.COURSE_PREFERENCE_PERSIST)]:(e,t)=>(0,r.Uy)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key]||(e.byCourseId[t.courseId][t.nextCoursePreference.key]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api||(e.byCourseId[t.courseId][t.nextCoursePreference.key].api={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api.isUpdating=!1}),[l.COURSE_PREFERENCE_DELETE]:(e,t)=>(0,r.Uy)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.coursePreferenceKey]||(e.byCourseId[t.courseId][t.coursePreferenceKey]={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api||(e.byCourseId[t.courseId][t.coursePreferenceKey].api={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api.isDeleting=!0}),[(0,o.ok)(l.COURSE_PREFERENCE_DELETE)]:(e,t)=>{let{courseId:n,coursePreferenceKey:s}=t,o=i.get(e,["byCourseId",n],{});return o=(0,r.Uy)(o,e=>{delete e[s]}),(0,r.Uy)(e,e=>{e.byCourseId[n]=o})},[(0,o.bG)(l.COURSE_PREFERENCE_DELETE)]:(e,t)=>{let n=(0,r.Uy)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.coursePreferenceKey]||(e.byCourseId[t.courseId][t.coursePreferenceKey]={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api||(e.byCourseId[t.courseId][t.coursePreferenceKey].api={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api.isDeleting=!1});return(0,o.sT)(n,t)}}),d={loadCoursePreference:e=>(0,o.PH)(l.COURSE_PREFERENCE_LOAD,t=>{var n;return t(),(0,a.xN)(e).then(t=>({coursePreference:t,courseId:e.courseId})).catch(e=>{throw{err:e}})},null,[s.oji.NotFound]),persistCoursePreference:(e,t)=>(0,o.PH)(l.COURSE_PREFERENCE_PERSIST,()=>(0,a.RB)(e,{courseId:t}).then(e=>({coursePreference:e,courseId:t})).catch(e=>{throw{err:e}}),{nextCoursePreference:e,courseId:t}),deleteCoursePreference:e=>(0,o.PH)(l.COURSE_PREFERENCE_DELETE,()=>(0,a.oN)(e).then(()=>({coursePreferenceKey:e.key,courseId:e.courseId})).catch(e=>{throw{err:e}}),{coursePreferenceKey:e.key,courseId:e.courseId})},c={getCoursePreferenceByKeyAndCourseId:(e,t,n)=>{var r,i,s;return null===(s=null===(i=null===(r=null==e?void 0:e.coursePreference)||void 0===r?void 0:r.byCourseId)||void 0===i?void 0:i[n])||void 0===s?void 0:s[t]},isPreferenceLoading:e=>e.coursePreference.isLoading}},654448:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return c},Ys:function(){return E}});var r=n(550161),i=n(768033),s=n(715729),o=n(830095),a=n(76701);let l={COURSE_PROGRESS_CONFIGURATION_LOAD:"course-progress.configuration.load",COURSE_PROGRESS_CONFIGURATION_PERSIST:"course-progress.configuration.persist",COURSE_PROGRESS_CONFIGURATION_INVALIDATE:"course-progress.configuration.invalidate"},u={courseProgressConfiguration:void 0,isLoading:!1,isValid:!1,hasError:!1},d=(e,t)=>(0,s.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[t]?e.courseProgressConfiguration.byCourseId[t].isValid=!1:e.courseProgressConfiguration.byCourseId[t]={...u}}),c=(0,r.Lq)({courseProgressConfiguration:{byCourseId:{}}},{[l.COURSE_PROGRESS_CONFIGURATION_LOAD]:(e,t)=>{let{courseId:n}=t;return(0,s.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!0:e.courseProgressConfiguration.byCourseId[n]={...u,isLoading:!0}})},[(0,r.ok)(l.COURSE_PROGRESS_CONFIGURATION_LOAD)]:(e,t)=>{let{courseId:n,courseProgressConfiguration:r}=t;return(0,s.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]={...u,courseProgressConfiguration:r,isValid:!0}})},[(0,r.bG)(l.COURSE_PROGRESS_CONFIGURATION_LOAD)]:(e,t)=>{let{courseId:n}=t;return(0,s.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?(e.courseProgressConfiguration.byCourseId[n].isLoading=!1,e.courseProgressConfiguration.byCourseId[n].hasError=!0):e.courseProgressConfiguration.byCourseId[n]={...u}})},[l.COURSE_PROGRESS_CONFIGURATION_PERSIST]:(e,t)=>{let{courseId:n}=t;return(0,s.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!0:e.courseProgressConfiguration.byCourseId[n]={...u,isLoading:!0}})},[(0,r.ok)(l.COURSE_PROGRESS_CONFIGURATION_PERSIST)]:(e,t)=>{let{courseId:n,updatedCourseProgressConfiguration:r}=t;return(0,s.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]={...u,courseProgressConfiguration:r,isValid:!0}})},[(0,r.bG)(l.COURSE_PROGRESS_CONFIGURATION_PERSIST)]:(e,t)=>{let{courseId:n}=t;return(0,s.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!1:e.courseProgressConfiguration.byCourseId[n]={...u}})},[l.COURSE_PROGRESS_CONFIGURATION_INVALIDATE]:(e,t)=>{let{courseId:n}=t;return d(e,n)},[a.V.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return d(e,n)}}),p={loadCourseProgressConfiguration:e=>async(t,n)=>{if(!function(e,t){var n,r;let i=!!(null===(n=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===n?void 0:n.isLoading),s=!!(null===(r=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===r?void 0:r.isValid);return!i&&!s}(n(),e.courseId)){let t=E.getCourseProgressConfiguration(n(),e.courseId);return t}t((0,r.aU)(l.COURSE_PROGRESS_CONFIGURATION_LOAD,{courseId:e.courseId}));try{let n=await (0,i.f)(e);return t((0,r.aU)((0,r.ok)(l.COURSE_PROGRESS_CONFIGURATION_LOAD),{courseProgressConfiguration:n,courseId:e.courseId})),n}catch(n){throw t((0,r.aU)((0,r.bG)(l.COURSE_PROGRESS_CONFIGURATION_LOAD),{courseId:e.courseId,err:n})),t((0,r.aU)((0,r.ok)(o.Z.APP_ERROR),{error:n})),n}},persistCourseProgress:(e,t)=>(0,r.PH)(l.COURSE_PROGRESS_CONFIGURATION_PERSIST,async()=>{try{let n=await (0,i.o)(e,{courseId:t});return{updatedCourseProgressConfiguration:n,courseId:t}}catch(e){throw{err:e}}},{courseId:t}),invalidateCourseProgressConfiguration:e=>(0,r.aU)(l.COURSE_PROGRESS_CONFIGURATION_INVALIDATE,{courseId:e})},E={getCourseProgressConfiguration:(e,t)=>{var n;return null===(n=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===n?void 0:n.courseProgressConfiguration},getCourseProgressConfigurationView:(e,t)=>e.courseProgress.courseProgressConfiguration.byCourseId[t]}},279020:function(e,t,n){"use strict";n.d(t,{Nw:function(){return f},I6:function(){return g},Ys:function(){return T}});var r=n(276635),i=n(715729),s=n(989399),o=n(830095),a=n(550161);let l={COURSE_TASKS_LOAD:"course-tasks.load",COURSE_TASK_DELETE:"course-tasks.delete",COURSE_TASK_INVALIDATE:"course-tasks.invalidate"};var u=n(560985),d=n(715655),c=n(337767),p=n(176726);let E=(e,t)=>e=(0,i.Uy)(e,e=>{var n;let r=null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{};Object.keys(r).forEach(e=>{r[e].isValid=!1})}),m=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.courseId]||{},i=Object.keys(n).find(e=>{let i=n[e],s=r.isEqual(i.query.paging,t.paging),o=r.isEqual(i.query.queryParams,t.queryParams);return s&&o});return{id:i,view:i?n[i]:null}},h=e=>["views","byCourseId",e.courseId],b=(e,t)=>{let{view:n}=m(e.courseTasks,t);return!n||!n.isLoading&&!n.isValid},g=(0,a.Lq)({byCourseTaskId:{},views:{byCourseId:{}}},{[l.COURSE_TASKS_LOAD]:(0,a.Li)(m,h),[(0,a.ok)(l.COURSE_TASKS_LOAD)]:(e,t)=>{let{data:n}=t;n||(0,a.f2)(e,t);let{tasksIds:r,tasks:s,paging:o}=n;return e=(0,i.Uy)(e,e=>{Object.keys(s).forEach(t=>{e.byCourseTaskId[t]={...e.byCourseTaskId[t],...s[t]}})}),(0,a.NV)(e,t,{viewResolver:m,viewsPathResolver:h,paging:o,values:r})},[(0,a.bG)(l.COURSE_TASKS_LOAD)]:(0,a.HT)(m,h),[l.COURSE_TASK_DELETE]:(e,t)=>(0,i.Uy)(e,e=>{let n={...e.byCourseTaskId[t.taskId].api,isDeleting:!0};e.byCourseTaskId[t.taskId].api=n}),[(0,a.ok)(l.COURSE_TASK_DELETE)]:(e,t)=>E(e,t.courseId),[(0,a.bG)(l.COURSE_TASK_DELETE)]:(e,t)=>(e=(0,i.Uy)(e,e=>{let n={...e.byCourseTaskId[t.taskId].api,isDeleting:!1};e.byCourseTaskId[t.taskId].api=n}),(0,a.sT)(e,t)),[l.COURSE_TASK_INVALIDATE]:(e,t)=>E(e,t.courseId)}),f={deleteTaskByCourseIdAndTaskId:(e,t)=>(0,a.c3)(async n=>{n((0,a.aU)(l.COURSE_TASK_DELETE,{courseId:e,taskId:t}));try{await (0,s.Z)(e,t),n((0,a.aU)((0,a.ok)(l.COURSE_TASK_DELETE),{courseId:e,taskId:t}))}catch(r){throw n((0,a.aU)((0,a.bG)(l.COURSE_TASK_DELETE),{courseId:e,taskId:t})),n((0,a.aU)((0,a.ok)(o.Z.APP_ERROR),{error:r})),{error:r}}}),loadCourseTasksByQuery:e=>(0,a.c3)(async(t,n)=>{let r=!b(n(),e);if(!r){t((0,a.aU)(l.COURSE_TASKS_LOAD,{query:e}));try{let n=await (0,s.m)(e);t((0,a.aU)((0,a.ok)(l.COURSE_TASKS_LOAD),{query:e,data:n}))}catch(n){throw t((0,a.aU)((0,a.bG)(l.COURSE_TASKS_LOAD),{query:e})),t((0,a.aU)((0,a.ok)(o.Z.APP_ERROR),{error:n})),{error:n}}}}),invalidateCourseTaskViews:e=>(0,a.c3)(async t=>{t((0,a.aU)(l.COURSE_TASK_INVALIDATE,{courseId:e}))})},I=(0,u.wN)(d.PW,c.AD),y=I((e,t)=>{let{view:n}=m(e.courseTasks,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e),S=(0,p.U)((e,t)=>{let{view:n}=m(e.courseTasks,t);return n?(n.values||[]).map(t=>e.courseTasks.byCourseTaskId[t]):[]},e=>e),T={getCourseTasksById:(e,t)=>(0,r.find)(e.courseTasks.byCourseTaskId,{taskId:t}),getCourseTasksByQuery:S,getCourseTaskViewStatusByQuery:y}},87647:function(e,t,n){"use strict";n.d(t,{Nw:function(){return u},I6:function(){return l},Ys:function(){return d}});var r=n(408027),i=n(491288);let s={COURSE_TOOL:"course-tool",COURSE_TOOL_SET_VISIBILITY:"course-tool-set-visibility"};var o=n(550161),a=n(715729);let l=(0,o.Lq)({byCourseId:{}},{[(0,o.ok)(s.COURSE_TOOL)]:(e,t)=>{let{courseId:n,toolId:r,toolEnabledSetting:i}=t;return(0,a.ZP)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][r]={toolEnabledSetting:i}})},[(0,o.ok)(s.COURSE_TOOL_SET_VISIBILITY)]:(e,t)=>{let{courseId:n,toolId:r,toolEnabledSetting:i}=t;return(0,a.ZP)(e,e=>{e.byCourseId[n][r]={toolEnabledSetting:i}})},[(0,o.cI)(s.COURSE_TOOL)]:(e,t)=>{let{courseId:n,toolId:r}=t;return(0,a.ZP)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][r]={toolEnabledSetting:{isAvailable:!1,isLocked:!0}}})},[(0,o.bG)(s.COURSE_TOOL)]:(e,{toolConfiguration:t})=>{let{courseId:n,toolId:r}=t;return(0,a.ZP)(e,e=>{delete e.byCourseId[n][r]})}}),u={loadCourseToolConfiguration:(e,t)=>(0,o.PH)(s.COURSE_TOOL,async()=>{try{let{toolEnabledSetting:n}=await (0,r.HU8)({courseId:e,toolId:t},i.nP);return{toolEnabledSetting:n,courseId:e,toolId:t}}catch(n){throw{err:n,courseId:e,toolId:t}}},{courseId:e,toolId:t},[r.oji.Forbidden]),setCourseToolConfiguration:(e,t,n)=>(0,o.PH)(s.COURSE_TOOL_SET_VISIBILITY,async()=>{let{toolEnabledSetting:s}=await (0,r.sUQ)({courseId:e,toolId:t},i.nP,n);return{toolEnabledSetting:s,courseId:e,toolId:t}})},d={getCourseTool:(e,t,n)=>{let r=e.courseTools.byCourseId[t];if(r)return r[n]}}},591526:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return c},Ys:function(){return E}});var r=n(550161);let i={COURSE_USER_NOTES_GET:"course.user.notes.get",COURSE_USER_NOTES_CREATE:"course.user.notes.create",COURSE_USER_NOTES_UPDATE:"course.user.notes.update",COURSE_USER_NOTES_DELETE:"course.user.notes.delete"};var s=n(408027),o=n(491288),a=n(715729),l=n(830095);let u=Object.freeze({hasError:!1,hasLoaded:!1,isLoading:!1,notes:[],totalNotes:void 0});function d(e,t,n){var r,i;let s=e.byCourseId[t]=null!==(r=e.byCourseId[t])&&void 0!==r?r:{byUserId:{}},o=s.byUserId[n]=null!==(i=s.byUserId[n])&&void 0!==i?i:{...u};return o}let c=(0,r.Lq)({byCourseId:{}},{[i.COURSE_USER_NOTES_GET]:(e,t)=>(0,a.ZP)(e,e=>{let{courseId:n,userId:r}=t,i=d(e,n,r);i&&(i.isLoading=!0,i.hasLoaded=!1,i.hasError=!1)}),[(0,r.ok)(i.COURSE_USER_NOTES_GET)]:(e,t)=>{let{courseId:n,userId:r,response:{results:i,paging:s,permissions:o}}=t;return(0,a.ZP)(e,e=>{let t=d(e,n,r);return t.isLoading=!1,t.hasLoaded=!0,t.notes=t.notes.concat(i),t.totalNotes=null==s?void 0:s.count,t.permissions=o,e})},[(0,r.bG)(i.COURSE_USER_NOTES_GET)]:(e,t)=>(0,a.ZP)(e,e=>{let{courseId:n,userId:r}=t,i=d(e,n,r);i.isLoading=!1,i.hasLoaded=!0,i.hasError=!0}),[(0,r.ok)(i.COURSE_USER_NOTES_CREATE)]:(e,t)=>(0,a.ZP)(e,e=>{var n;let{courseId:r,userId:i,note:s}=t,o=d(e,r,i);o.notes.push(s),o.totalNotes=(null!==(n=o.totalNotes)&&void 0!==n?n:0)+1}),[(0,r.ok)(i.COURSE_USER_NOTES_UPDATE)]:(e,t)=>(0,a.ZP)(e,e=>{let{courseId:n,userId:r,note:i}=t,s=d(e,n,r),o=s.notes.findIndex(e=>e.id===i.id);-1!==o&&(s.notes[o]=i)}),[(0,r.ok)(i.COURSE_USER_NOTES_DELETE)]:(e,t)=>(0,a.ZP)(e,e=>{var n;let{courseId:r,userId:i,noteId:s}=t,o=d(e,r,i);o.notes=o.notes.filter(e=>e.id!==s),o.totalNotes=(null!==(n=o.totalNotes)&&void 0!==n?n:1)-1})}),p={fetchNotes:e=>(0,r.c3)(async(t,n)=>{var a,u;let{courseId:d,userId:c,limit:p}=e,E=null===(a=n().courseUserNotes.byCourseId[d])||void 0===a?void 0:a.byUserId[c];if((null==E?void 0:E.isLoading)||(null==E?void 0:E.hasError))return Promise.resolve(null);let m=i.COURSE_USER_NOTES_GET,h=null!==(u=null==E?void 0:E.notes.length)&&void 0!==u?u:0,b={courseId:d,userId:c};t((0,r.aU)(m,b));try{let e=await (0,s.hIc)(o.nP,b,{offset:h,limit:p},void 0);return t((0,r.aU)((0,r.ok)(m),{courseId:d,userId:c,response:e})),e}catch(n){throw t((0,r.aU)((0,r.bG)(m),{...e,err:n})),t((0,r.aU)((0,r.ok)(l.Z.APP_ERROR),{error:n})),n}}),createNote:(e,t,n)=>(0,r.PH)(i.COURSE_USER_NOTES_CREATE,async()=>{let r=await (0,s.JXy)(o.nP,{courseId:e,userId:t},n);return{courseId:e,userId:t,note:r}},{courseId:e,userId:t}),updateNote:(e,t,n,a)=>{let l={courseId:e,userId:t,noteId:n};return(0,r.PH)(i.COURSE_USER_NOTES_UPDATE,async()=>{let e=await (0,s.klr)(o.nP,l,a);return{...l,note:e}},l)},deleteNote:(e,t,n)=>{let a={courseId:e,userId:t,noteId:n};return(0,r.PH)(i.COURSE_USER_NOTES_DELETE,async()=>(await (0,s.fyg)(o.nP,a),a),a)}},E={getNotes:(e,t,n)=>{var r;let i=null===(r=e.courseUserNotes.byCourseId[t])||void 0===r?void 0:r.byUserId[n];return null!=i?i:u}}},670663:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD:"completed.delegatedAttemptGradeByGraderLoad",COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD:"completed.delegatedAttemptGradeOnAttemptLoad",PATCH_DELEGATED_ATTEMPT_GRADE:"patch.delegatedAttemptGrade",INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT:"instructor-submission-list-attempt-deleted-event",TOGGLE_VISIBILITY_DELEGATED_ATTEMPT_GRADE:"toggle.visibility.delegatedAttemptGrade"}},251291:function(e,t,n){"use strict";n.d(t,{I6:function(){return d},Nw:function(){return c},Ys:function(){return E}});var r=n(715729),i=n(553387),s=n(550161),o=n(762765),a=n(670663),l=n(830095);let u=(e,t)=>{let n=(0,r.ZP)(e,e=>{Object.keys(t.byStagedAttemptId).forEach(n=>{e.byStagedAttemptId[n]={...t.byStagedAttemptId[n],api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}}})});return n},d=(0,s.Lq)({byStagedAttemptId:{}},{[(0,s.ok)(a.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD)]:u,[(0,s.ok)(a.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD)]:u,[(0,s.ok)(a.V.PATCH_DELEGATED_ATTEMPT_GRADE)]:(e,t)=>{let n=t.stagedAttempt,i=(0,r.ZP)(e,e=>{let t=e.byStagedAttemptId[n.stagedAttemptId];e.byStagedAttemptId[n.stagedAttemptId]={...t,...n,api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}}});return i},[(0,s.ok)(a.V.INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT)]:(e,t)=>{let n=Object.values(e.byStagedAttemptId);return(0,r.ZP)(e,e=>{let{attemptId:r}=t;n.forEach(t=>{t.attemptId===r&&delete e.byStagedAttemptId[t.stagedAttemptId]})})}}),c={loadCompletedDelegatedAttemptGradesByGrader:e=>(0,s.PH)(a.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD,async()=>{try{let t=await (0,i.z9)(e);return t}catch(e){throw{err:e}}}),loadDelegatedAttemptGradesOnAttempt:e=>(0,s.PH)(a.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD,async()=>{try{let t=await (0,i.FA)(e);return t}catch(e){throw{err:e}}}),patchDelegatedAttemptGrade:e=>(0,s.PH)(a.V.PATCH_DELEGATED_ATTEMPT_GRADE,async()=>{try{let t=await (0,i.Xg)(e);return t}catch(e){throw{err:e}}}),deleteDelegatedAttemptsOnDeletedSubmission:e=>(0,s.aU)((0,s.ok)(a.V.INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT),{attemptId:e.attemptId}),toggleVisibilityOfDelegatedAttemptGrade:e=>(0,s.c3)(async(t,n)=>{try{let r=n().delegatedAttemptGrade.byStagedAttemptId[e];if(r){let{columnId:e,attemptId:o,stagedAttemptId:l}=r,{courseId:u,gradeId:d}=n().gradebookAttempt.byGradebookAttemptId[o],c=await (0,i.Xg)({courseId:u,columnId:e,gradeId:d,attemptId:o,stagedAttemptId:l,updatedProperties:{showFeedbackToStudent:!r.showFeedbackToStudent}});t((0,s.aU)((0,s.ok)(a.V.PATCH_DELEGATED_ATTEMPT_GRADE),c))}}catch(e){throw t((0,s.aU)((0,s.ok)(l.Z.APP_ERROR),{error:e})),{err:e}}})},p=(e,t)=>{let{graderId:n,userBeingGradedId:r}=t,i={...t,grader:n?o.Ys.getUserById(e,n):null,userBeingGraded:r?o.Ys.getUserById(e,r):null};return i},E={getCompletedDelegatedAttemptGradesByGrader:(e,t,n)=>Object.values(e.delegatedAttemptGrade.byStagedAttemptId).filter(e=>e.graderId===t&&e.columnId===n).map(t=>p(e,t)),getCompletedDelegatedAttemptGradesOnAttempt:(e,t)=>Object.values(e.delegatedAttemptGrade.byStagedAttemptId).filter(e=>e.attemptId===t).map(t=>p(e,t)),getDelegatedAttemptByStagedAttemptId:(e,t)=>p(e,Object.values(e.delegatedAttemptGrade.byStagedAttemptId).find(e=>e.stagedAttemptId===t))}},105232:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return c},Ys:function(){return p}});var r=n(715729),i=n(276635),s=n(550161),o=n(846409);let a="/v1/courses/%courseId%/discussionboards/settings";async function l(e){return(0,o.U2)((0,o.Q2)(a,e))}async function u(e,t,n){let r=(0,o.T8)(e,t);return(0,i.isEmpty)(r)?t:(0,o.r$)((0,o.Q2)(a,n),r)}let d={DISCUSSIONBOARD_SETTINGS_LOAD:"discussionboard-settings.load",DISCUSSIONBOARD_SETTINGS_PERSIST:"discussionboard-settings.persist"},c=(0,s.Lq)({byCourseId:{},isLoading:!1},{[d.DISCUSSIONBOARD_SETTINGS_LOAD]:(e,t)=>(0,s.K4)(e,t),[(0,s.ok)(d.DISCUSSIONBOARD_SETTINGS_LOAD)]:(e,t)=>{let{discussionSettings:n,courseId:i}=t,o=(0,r.ZP)(e,e=>{let t={...n,api:{isUpdating:!1,isDeleting:!1}};e.byCourseId[i]=t});return(0,s.f2)(o,t)},[(0,s.bG)(d.DISCUSSIONBOARD_SETTINGS_LOAD)]:(e,t)=>(0,s.sT)(e,t),[d.DISCUSSIONBOARD_SETTINGS_PERSIST]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{let t=e.byCourseId[n];e.byCourseId[n]={...t,api:{...null==t?void 0:t.api,isUpdating:!0}}})},[(0,s.ok)(d.DISCUSSIONBOARD_SETTINGS_PERSIST)]:(e,t)=>{let{discussionSettings:n,courseId:i}=t,o=(0,r.ZP)(e,e=>{let t={...n,api:{isUpdating:!1,isDeleting:!1}};e.byCourseId[i]=t});return(0,s.f2)(o,t)},[(0,s.bG)(d.DISCUSSIONBOARD_SETTINGS_PERSIST)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{e.byCourseId[n].api.isUpdating=!1})}}),p={getDiscussionboardSettings:(e,t)=>(0,i.get)(e,["discussionBoardSettings","byCourseId",t],{allowStudentsToCreateDiscussionContent:!1}),isSettingLoading:e=>(0,i.get)(e,["discussionBoardSettings","isLoading"])},E={loadDiscussionboardSetting:e=>(0,s.PH)(d.DISCUSSIONBOARD_SETTINGS_LOAD,async t=>{var n,r;if(n=t(),r=e.courseId,p.isSettingLoading(n)&&null!=n.discussionBoardSettings.byCourseId[r])return Promise.resolve(null);try{let t=await l(e);return{discussionSettings:t,courseId:e.courseId}}catch(e){throw{err:e}}}),persistDiscussionSettings:e=>(0,s.PH)(d.DISCUSSIONBOARD_SETTINGS_PERSIST,t=>{let n=(0,i.get)(t(),["discussionBoardSettings","byCourseId",e.courseId],{});return u(n,e.settings,{courseId:e.courseId}).then(t=>({discussionSettings:t,courseId:e.courseId})).catch(t=>{throw{err:t,courseId:e.courseId}})},{courseId:e.courseId})}},54225:function(e,t,n){"use strict";n.d(t,{I6:function(){return l},Nw:function(){return u},Ys:function(){return d}});var r=n(715729),i=n(305641),s=n(339821),o=n(438202),a=n(550161);let l=(0,a.Lq)({byCourseMembershipId:{},isLoading:!1},{[s.V.EXCEPTION_DETAILS_LOAD]:a.K4,[(0,a.ok)(s.V.EXCEPTION_DETAILS_LOAD)]:(e,t)=>{let{learnExceptionDetails:n}=t,i=(0,r.Uy)(e,e=>{n&&n.length>0&&n.forEach(t=>{var n;let r=null!==(n=e.byCourseMembershipId[t.membershipId])&&void 0!==n?n:{byColumnId:{}};r.byColumnId[t.columnId]=t,e.byCourseMembershipId[t.membershipId]=r})});return(0,a.f2)(i,t)},[(0,a.bG)(s.V.EXCEPTION_DETAILS_LOAD)]:a.sT,[(0,a.ok)(o.V5.GRADABLE_USER_OPTION_ITEM_DELETE)]:(e,t)=>(0,r.Uy)(e,e=>{var n,r;(null===(n=e.byCourseMembershipId[t.membershipId])||void 0===n?void 0:n.byColumnId[t.columnId])&&(null===(r=e.byCourseMembershipId[t.membershipId])||void 0===r||delete r.byColumnId[t.columnId])})}),u={fetchExceptionDetails:(e,t)=>(0,a.PH)(s.V.EXCEPTION_DETAILS_LOAD,()=>(0,i.G)(e,t)),deleteExceptionDetailByColumnIdAndMembershipIdInStore:(e,t)=>(0,a.aU)((0,a.ok)(o.V5.GRADABLE_USER_OPTION_ITEM_DELETE),{columnId:e,membershipId:t}),setExceptionDetailInStore:e=>(0,a.aU)((0,a.ok)(s.V.EXCEPTION_DETAILS_LOAD),{learnExceptionDetails:e})},d={getExceptionDetailsMembershipId:(e,t)=>e.exceptionDetails.byCourseMembershipId[t]}},339821:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={EXCEPTION_DETAILS_LOAD:"exception.details.load"}},45216:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return u},Ys:function(){return d}});var r=n(830288),i={},s=n(550161),o=n(715729),a=n(408027);let l={FEATURE_FLAG_LOAD_ALL:"feature.flags.load.all",FEATURE_FLAG_GET_VALUE_BY_KEY:"feature.flags.get.by.key",FEATURE_FLAG_UPDATE_VALUE_BY_KEY:"feature.flags.update.by.key"},u=(0,s.Lq)({featureFlags:{byKey:{}},featureFlagValues:{byKey:{}},isLoading:!1},{[l.FEATURE_FLAG_LOAD_ALL]:s.K4,[(0,s.ok)(l.FEATURE_FLAG_LOAD_ALL)]:(e,t)=>{if(!t||!t.featureFlags)return(0,s.f2)(e,t);let{featureFlags:n}=t;return(0,o.ZP)(e,e=>{let t={};Object.keys(n.byKey).forEach(e=>{let r={...n.byKey[e],api:{isUpdating:!1,isDeleting:!1}};t[e]=r}),e.featureFlags.byKey=t,e.isLoading=!1})},[(0,s.bG)(l.FEATURE_FLAG_LOAD_ALL)]:s.sT,[l.FEATURE_FLAG_GET_VALUE_BY_KEY]:(e,t)=>(0,o.ZP)(e,e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!0}),[(0,s.ok)(l.FEATURE_FLAG_GET_VALUE_BY_KEY)]:(e,t)=>{if(!t||!t.flagKey||!t.flagValue)return(0,s.f2)(e,t);let{flagKey:n,flagValue:r}=t;return(0,o.ZP)(e,e=>{e.featureFlagValues.byKey[n]={...e.featureFlagValues.byKey[n],flagKey:n,flagValue:r},e.featureFlagValues.byKey[n].isLoading=!1})},[(0,s.cI)(l.FEATURE_FLAG_GET_VALUE_BY_KEY)]:(e,t)=>(0,o.ZP)(e,e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!1}),[(0,s.bG)(l.FEATURE_FLAG_GET_VALUE_BY_KEY)]:(e,t)=>(0,o.ZP)(e,e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!1}),[l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY]:(e,t)=>(0,o.ZP)(e,e=>{e.featureFlags.byKey[t.flagKey].api||(e.featureFlags.byKey[t.flagKey].api={}),e.featureFlags.byKey[t.flagKey].api.isUpdating=!0}),[(0,s.ok)(l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY)]:(e,t)=>{if(!t||!t.flagKey||!t.flagValue)return(0,s.f2)(e,t);let{flagKey:n,flagValue:r}=t,a={...e.featureFlags.byKey[n],flagValue:{...e.featureFlags.byKey[n].flagValue,value:r},api:{...e.featureFlags.byKey[n].api,isUpdating:!1}},l={...e.featureFlagValues.byKey[n],flagKey:n,flagValue:i[n]?i[n]:r};return(0,o.ZP)(e,e=>{e.featureFlags.byKey[n]=a,e.featureFlagValues.byKey[n]=l})},[(0,s.bG)(l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY)]:(e,t)=>(0,o.ZP)(e,e=>{e.featureFlags.byKey[t.flagKey].api||(e.featureFlags.byKey[t.flagKey].api={}),e.featureFlags.byKey[t.flagKey].api.isUpdating=!1})}),d={getFeatureFlags:e=>e.featureFlags.featureFlags.byKey,getFeatureFlagValues:e=>e.featureFlags.featureFlagValues.byKey,getFeatureFlagValue:(e,t)=>e.featureFlags.featureFlagValues.byKey[t],isLoading:e=>e.featureFlags.isLoading},c={loadFeatureFlags:()=>(0,s.PH)(l.FEATURE_FLAG_LOAD_ALL,()=>r.Vw()),loadFeatureFlagValueByKey:e=>(0,s.c3)((t,n)=>{if(function(e,t){let n=e.featureFlags.featureFlagValues.byKey[t.flagKey];return!n||!1===n.isLoading}(n(),e)){if(t((0,s.aU)(l.FEATURE_FLAG_GET_VALUE_BY_KEY,e)),i[e.flagKey]){let n={flagKey:e.flagKey,flagValue:i[e.flagKey]};t((0,s.aU)((0,s.ok)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),n));return}r.Y1(e).then(e=>t((0,s.aU)((0,s.ok)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),e))).catch(n=>{var r;if((null===(r=null==n?void 0:n.body)||void 0===r?void 0:r.status)===a.oji.NotFound){t((0,s.aU)((0,s.cI)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),{flagKey:e.flagKey}));return}t((0,s.aU)((0,s.bG)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),{err:n,flagKey:e.flagKey}))})}}),updateFeatureFlagValueByKey:e=>(0,s.PH)(l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY,()=>r.ep(e),{flagKey:e.flagKey,flagValue:e.flagValue})}},960369:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return l},Ys:function(){return u}});var r=n(550161),i=n(830095),s=n(408027),o=n(491288);let a={FILE_UPLOAD_SETTINGS_LOAD:"file-upload-settings.load"},l=(0,r.Lq)({fileUploadSettings:{},isLoading:!1},{[a.FILE_UPLOAD_SETTINGS_LOAD]:r.K4,[(0,r.ok)(a.FILE_UPLOAD_SETTINGS_LOAD)]:(e,t)=>(0,r.f2)(e,t,{fileUploadSettings:t}),[(0,r.cI)(a.FILE_UPLOAD_SETTINGS_LOAD)]:r.f2,[(0,r.bG)(a.FILE_UPLOAD_SETTINGS_LOAD)]:r.sT}),u={getFileUploadSettings:e=>e.fileUploadSettings.fileUploadSettings,isFileUploadSettingsLoading:e=>e.fileUploadSettings.isLoading},d={loadFileUploadSettings:()=>(0,r.c3)(async(e,t)=>{if(!function(e){let{maxUploadSizeInBytes:t}=u.getFileUploadSettings(e);return void 0===t&&!u.isFileUploadSettingsLoading(e)}(t()))return u.getFileUploadSettings(t());try{let t=await (0,s.GSC)(o.nP);return e((0,r.aU)((0,r.ok)(a.FILE_UPLOAD_SETTINGS_LOAD),{...t})),t}catch(n){e((0,r.aU)((0,r.ok)(i.Z.APP_ERROR),{error:n})),e((0,r.aU)((0,r.bG)(a.FILE_UPLOAD_SETTINGS_LOAD),{err:n}));let t={maxUploadSizeInBytes:2684354560,recommendedAlternatives:"",supportLink:""};return e((0,r.aU)((0,r.ok)(a.FILE_UPLOAD_SETTINGS_LOAD),t)),t}})}},933410:function(e,t,n){"use strict";n.d(t,{I6:function(){return g},LD:function(){return S},Nw:function(){return p},Ys:function(){return f}});var r=n(408027),i=n(103528),s=n(714772),o=n(550161),a=n(624859),l=n(125107),u=n(715729),d=n(960369);function c(e){return`${e}.aborted`}let p={updateDirectoryUploadStatus:(e,t)=>({type:l.V5.DIRECTORY_UPLOAD_STATUS,meta:{groupId:e,status:t}}),filesUploadRequest:(e,t,n={skipMaxSizeCheck:!1})=>(0,o.c3)(async(r,i)=>{let s=i();if(t){let e=s.fileUpload.byGroupId[t];if((null==e?void 0:e.status)===l.XX.Canceled)return}let o=e;n.skipMaxSizeCheck||(o=await m(r,e,t)),o.forEach(({file:e,queryParams:n,correlationId:i})=>{r(p.fileUploadRequest({file:e},{correlationId:i,groupId:t},n))})}),cloudFilesUploadRequest:(e,t,n={skipMaxSizeCheck:!1})=>(0,o.c3)(async r=>{let i=e;n.skipMaxSizeCheck||(i=await m(r,e,t)),i.forEach(({file:e,accessToken:n,correlationId:i})=>{r(p.cloudFileUploadRequest(e,n,{correlationId:i,groupId:t}))})}),fileUploadRequest:(e,t,n)=>({type:l.V5.FILE_UPLOAD_REQUEST,payload:{file:e,queryParams:n},meta:{uploadId:t}}),cloudFileUploadRequest:(e,t,n)=>({type:l.V5.CLOUD_FILE_UPLOAD_REQUEST,payload:{file:e,accessToken:t},meta:{uploadId:n}}),invalidFileUpload:(e,t,n)=>({type:l.V5.INVALID_FILE_UPLOAD,payload:{file:e,isCloudUpload:n},meta:{uploadId:t}}),startFileUpload:(e,t)=>({type:l.V5.FILE_UPLOAD,payload:{aborter:t},meta:{uploadId:e}}),updateFileUploadProgress:(e,t)=>({type:l.V5.FILE_UPLOAD,payload:{progress:t},meta:{uploadId:e}}),fileUploadSuccess:(e,t)=>({type:(0,o.ok)(l.V5.FILE_UPLOAD),payload:{file:t},meta:{uploadId:e}}),fileUploadFailure:(e,t,n)=>({type:(0,o.bG)(l.V5.FILE_UPLOAD),payload:{error:t,errorCode:n},meta:{uploadId:e}}),fileUploadAborted:e=>({type:c(l.V5.FILE_UPLOAD),meta:{uploadId:e}}),canUpdateFileDetails:e=>({type:l.V5.CAN_UPDATE_FILE_DETAILS,meta:{uploadId:e}}),fileDetailsUpdated:(e,t=!1)=>({type:l.V5.UPDATED_FILE_DETAILS,meta:{uploadId:e},payload:{cancelled:t}}),abortGroupUploads:e=>(0,o.c3)((t,n)=>{let r=n(),i=r.fileUpload.byGroupId[e];i&&(i.pendingUploads.forEach(n=>{t(p.abortUpload({groupId:e,correlationId:n}))}),t(p.updateDirectoryUploadStatus(e,l.XX.Canceled)))}),abortUpload:e=>(0,o.c3)((t,n)=>{let r=n(),i=r.fileUpload.byId[e.correlationId];if(!i)return;let s=i.uploadProgress.aborter;s?s.abort():i.status===l.XX.Queued&&t(p.fileUploadAborted(e))}),overSizedFiles:(e,t)=>({type:l.V5.FILE_UPLOAD_OVERSIZED,payload:t,meta:{groupUploadId:e}})};async function E(e,t){var n;let r=await e(d.Nw.loadFileUploadSettings()),i=null!==(n=r.maxUploadSizeInBytes)&&void 0!==n?n:2684354560,s=[],o=[];return t.forEach(e=>{let{file:t}=e;t.size>i?s.push(e):o.push(e)}),{oversizedRequests:s,validRequests:o}}async function m(e,t,n){let{validRequests:r,oversizedRequests:i}=await E(e,t);return i.length>0&&e(p.overSizedFiles(n,i)),r}function h(e,t,n){var r;let{correlationId:i,groupId:s}=t,o={...e.byId[i],filename:n.name,filesize:n.size,groupId:s,status:l.XX.InProgress,uploadProgress:{},isCloudUpload:!1};if(e.byId[i]=o,s){let t=null!==(r=e.byGroupId[s])&&void 0!==r?r:{groupId:s,pendingUploads:[],uploads:[],oversizedFiles:[],status:l.XX.InProgress};t.uploads.push(i),t.pendingUploads.push(i),e.byGroupId[s]=t}return o}function b(e,t,n){let r=n&&e.byGroupId[n];if(r){let e=r.pendingUploads.indexOf(t);r.pendingUploads.splice(e,1),r.pendingUploads.length||r.status!==l.XX.InProgress||(r.status=l.XX.Complete)}}let g=(0,o.Lq)({byGroupId:{},byId:{}},{[l.V5.DIRECTORY_UPLOAD_STATUS]:(e,t)=>(0,u.ZP)(e,e=>{!function(e,t,n){if(t){let r=e.byGroupId[t]?{...e.byGroupId[t],status:n}:{groupId:t,pendingUploads:[],uploads:[],oversizedFiles:[],status:n};e.byGroupId[t]=r}}(e,t.meta.groupId,t.meta.status)}),[l.V5.FILE_UPLOAD_REQUEST]:(e,t)=>(0,u.ZP)(e,e=>{let n=t.payload.file.file;h(e,t.meta.uploadId,n);let r=e.byId[t.meta.uploadId.correlationId];r&&(r.status=l.XX.Queued)}),[l.V5.CLOUD_FILE_UPLOAD_REQUEST]:(e,t)=>(0,u.ZP)(e,e=>{let{file:n}=t.payload,r=h(e,t.meta.uploadId,n);r.isCloudUpload=!0}),[l.V5.INVALID_FILE_UPLOAD]:(e,t)=>{let n=(0,u.ZP)(e,e=>{let{file:n,isCloudUpload:r}=t.payload,{correlationId:i,groupId:s}=t.meta.uploadId,o=h(e,t.meta.uploadId,n);o.status=l.XX.Failed,o.error={errorType:l.Te.Invalid},r&&(o.isCloudUpload=!0),b(e,i,s)});return(0,o.sT)(n,t)},[l.V5.FILE_UPLOAD]:(e,t)=>{let n=(0,u.ZP)(e,e=>{var n;let{progress:r,aborter:i}=t.payload,{correlationId:s}=t.meta.uploadId,o=null!==(n=e.byId[s])&&void 0!==n?n:h(e,t.meta.uploadId,{});o&&(o.status=l.XX.InProgress,o.uploadProgress.progress=r,i&&(o.uploadProgress.aborter=i))});return(0,o.K4)(n,t)},[(0,o.ok)(l.V5.FILE_UPLOAD)]:(e,t)=>{let n=(0,u.ZP)(e,e=>{var n;let{file:r}=t.payload,{correlationId:i,groupId:s}=t.meta.uploadId,o=e.byId[i],a=null===(n=e.byId[i])||void 0===n?void 0:n.uploadProgress;a&&(delete a.progress,delete a.aborter),o&&(o.status=l.XX.Complete,o.uploadedFile=r),b(e,i,s)});return(0,o.f2)(n,t)},[(0,o.bG)(l.V5.FILE_UPLOAD)]:(e,t)=>{let n=(0,u.ZP)(e,e=>{var n;let{correlationId:r,groupId:i}=t.meta.uploadId,s=e.byId[r],o=null===(n=e.byId[r])||void 0===n?void 0:n.uploadProgress;o&&(delete o.progress,delete o.aborter),s&&(s.status=l.XX.Failed,s.error={errorType:t.payload.error,errorCode:t.payload.errorCode}),b(e,r,i)});return(0,o.sT)(n,t)},[c(l.V5.FILE_UPLOAD)]:(e,t)=>{let n=(0,u.ZP)(e,e=>{var n;let{correlationId:r,groupId:i}=t.meta.uploadId,s=e.byId[r],o=null===(n=e.byId[r])||void 0===n?void 0:n.uploadProgress;o&&(delete o.progress,delete o.aborter),s&&(s.status=l.XX.Canceled),b(e,r,i)});return(0,o.sT)(n,t)},[l.V5.CAN_UPDATE_FILE_DETAILS]:(e,t)=>(0,u.ZP)(e,e=>{let{correlationId:n}=t.meta.uploadId,r=e.byId[n];r&&(r.uploadDetails={canUpdateFileDetails:!0})}),[l.V5.UPDATED_FILE_DETAILS]:(e,t)=>(0,u.ZP)(e,e=>{let{correlationId:n}=t.meta.uploadId,r=e.byId[n];(null==r?void 0:r.uploadDetails)&&(r.uploadDetails.canUpdateFileDetails=!1)}),[l.V5.FILE_UPLOAD_OVERSIZED]:(e,t)=>(0,u.ZP)(e,e=>{let{groupUploadId:n}=t.meta;t.payload.forEach(({correlationId:t,file:r})=>{h(e,{correlationId:t,groupId:n},r),function(e,t,n){let r=e.byId[t];r&&(r.status=l.XX.Failed,r.error={errorType:l.Te.Oversized});let i=n&&e.byGroupId[n];i&&(i.oversizedFiles.push(t),b(e,t,n))}(e,t,n)})})}),f={getFileUploadById:(e,t)=>{var n;return null===(n=e.fileUpload)||void 0===n?void 0:n.byId[t]},getGroupStatusById:(e,t)=>{var n;return null===(n=e.fileUpload)||void 0===n?void 0:n.byGroupId[t]},getAllFileUploads:e=>{var t,n;let r=Object.entries(null!==(n=null===(t=e.fileUpload)||void 0===t?void 0:t.byId)&&void 0!==n?n:{});return r.map(([e,t])=>({correlationId:e,...t}))}};function*I(e,t,n,o){let u=yield(0,s.Ys)(f.getFileUploadById,t);if((null==u?void 0:u.status)===l.XX.Canceled)return;let{result:d,progress:c,abort:E}=(0,a.b)(e,o,["mimeType","isMedia"]);yield(0,s.gz)(p.startFileUpload({correlationId:t,groupId:n},E));let m=(0,i.GG)(e=>{let s=c.subscribe(r=>{e(p.updateFileUploadProgress({correlationId:t,groupId:n},r))});return d.then(r=>{e(p.fileUploadSuccess({correlationId:t,groupId:n},r)),e(i.uR)}).catch(()=>{}),d.catch(s=>{if(s.errorType===r.cwi.Aborted)e(p.fileUploadAborted({correlationId:t,groupId:n}));else{let i;s instanceof r.srx&&(i=s.status),e(p.fileUploadFailure({correlationId:t,groupId:n},l.Te.Api,i))}e(i.uR)}),s});for(;;){let e=yield(0,s.qn)(m);yield(0,s.gz)(e)}}function*y(e){for(;;){let t=yield(0,s.qn)(e),{file:n,queryParams:r}=t.payload,{correlationId:i,groupId:o}=t.meta.uploadId;yield(0,s.RE)(I,n,i,o,r)}}function*S(){let e=yield(0,s.RE)(i.CE);for(let t=0;t<5;t++)yield(0,s.rM)(y,e);for(;;){let t=yield(0,s.qn)(l.V5.FILE_UPLOAD_REQUEST);yield(0,s.gz)(e,t)}}},125107:function(e,t,n){"use strict";var r,i,s,o;n.d(t,{Te:function(){return i},V5:function(){return a},XX:function(){return r}});let a={FILE_UPLOAD_REQUEST:"file-upload.request",CLOUD_FILE_UPLOAD_REQUEST:"cloud.file-upload.request",INVALID_FILE_UPLOAD:"invalid-file-upload",FILE_UPLOAD:"file-upload",FILE_UPLOAD_ABORT:"file-upload.abort",FILE_UPLOAD_GROUP_ABORT:"file-upload.group.abort",FILE_UPLOAD_OVERSIZED:"file-upload.oversized",CAN_UPDATE_FILE_DETAILS:"file-upload.can-update-file-details",UPDATED_FILE_DETAILS:"file-upload.updated-file-details",DIRECTORY_UPLOAD_STATUS:"file-upload.status"};(s=r||(r={})).Queued="QUEUED",s.InProgress="IN PROGRESS",s.Complete="COMPLETE",s.Failed="FAILED",s.Canceled="CANCELED",(o=i||(i={})).Api="API",o.Oversized="OVERSIZED",o.Invalid="INVALID"},156765:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a},Ys:function(){return u}});var r=n(715729),i=n(550161),s=n(653729);let o={FTUE_REGISTER:"ftue.register",FTUE_DISPLAY_NEXT:"ftue.displayNext",FTUE_PAUSE:"ftue.pause",FTUE_RESUME:"ftue.resume"},a=(0,i.Lq)({ftueCollectionMap:{}},{[(0,i.ok)(o.FTUE_REGISTER)]:(e,t)=>{let n=e;if(e.ftueCollectionMap[t.collectionKey]){let i=[...e.ftueCollectionMap[t.collectionKey].ftueKeys,t.ftueKey];n=(0,r.Uy)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].ftueKeys=i})}else{let i=[t.ftueKey],s={isPaused:!1,ftueKeys:i};n=(0,r.Uy)(e,e=>{e.ftueCollectionMap[t.collectionKey]=s})}return(0,i.f2)(n,t)},[(0,i.bG)(o.FTUE_REGISTER)]:i.sT,[(0,i.ok)(o.FTUE_DISPLAY_NEXT)]:(e,t)=>{let n=Array(...e.ftueCollectionMap[t.collectionKey].ftueKeys);return n.shift(),(0,r.Uy)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].ftueKeys=n})},[(0,i.bG)(o.FTUE_DISPLAY_NEXT)]:i.sT,[(0,i.ok)(o.FTUE_PAUSE)]:(e,t)=>(0,r.Uy)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].isPaused=!0}),[(0,i.bG)(o.FTUE_PAUSE)]:i.sT,[(0,i.ok)(o.FTUE_RESUME)]:(e,t)=>(0,r.Uy)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].isPaused=!1}),[(0,i.bG)(o.FTUE_RESUME)]:i.sT}),l={registerFtue:(e,t)=>(0,i.c3)(async n=>{let r,a;let l=`${e}.${t}`;try{r=await n(s.Nw.loadUserPreference({key:l}))}catch(e){e&&"error"in e&&(a=e.error)}let u=null==r?void 0:r.userPreference;(u&&2>parseInt(u.value,10)||a&&404===a.status)&&n((0,i.aU)((0,i.ok)(o.FTUE_REGISTER),{collectionKey:e,ftueKey:t}))}),markCurrentFtueAsShown:e=>(0,i.c3)((t,n)=>{let r=u.getCurrentFtueKey(n(),e);if(!r)return t((0,i.aU)((0,i.bG)(o.FTUE_DISPLAY_NEXT))),Promise.resolve(null);let a=`${e}.${r}`;t((0,i.aU)((0,i.ok)(o.FTUE_DISPLAY_NEXT),{collectionKey:e}));let l=s.Ys.getUserPreferenceByKey(n(),a),d=l?parseInt(l.value,10)+1:1;return t(s.Nw.persistUserPreference({key:a,value:`${d}`}))}),pauseFtueSequence:e=>(0,i.aU)((0,i.ok)(o.FTUE_PAUSE),{collectionKey:e}),resumeFtueSequence:e=>(0,i.aU)((0,i.ok)(o.FTUE_RESUME),{collectionKey:e})},u={getCurrentFtueKey:(e,t)=>{let n=e.ftue.ftueCollectionMap[t];if(n){let{ftueKeys:e,isPaused:t}=n;return!t&&e?e[0]:null}return null}}},438202:function(e,t,n){"use strict";n.d(t,{I6:function(){return l},Nw:function(){return u},V5:function(){return a},Ys:function(){return d}});var r=n(550161),i=n(765371),s=n(715729),o=n(339821);let a={GRADABLE_USER_OPTION_ITEM_PUT:"gradable.user.option.item.put",GRADABLE_USER_OPTION_ITEM_DELETE:"gradable.user.option.item.delete",GRADABLE_USER_OPTION_ITEM_LOAD:"gradable.item.user.option.load",GRADABLE_USER_OPTION_COUNT_ITEM_LOAD:"gradable.item.user.option.count.load",GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD:"gradable.item.user.option.exceptions.load"},l=(0,r.Lq)({byColumnId:{},isLoading:!1,exceptionsCount:{fixedDueDateExceptionCount:void 0,relativeDueDateExceptionCount:void 0,unlimitedDueDateExceptionCount:void 0,withDueDateExceptionCount:void 0}},{[a.GRADABLE_USER_OPTION_ITEM_PUT]:r.K4,[(0,r.ok)(a.GRADABLE_USER_OPTION_ITEM_PUT)]:(e,t)=>{let{item:n}=t,i=(0,s.ZP)(e,e=>{e.byColumnId[n.columnId]||(e.byColumnId[n.columnId]={byCourseMembershipId:{}}),e.byColumnId[n.columnId].byCourseMembershipId[n.membershipId]={columnId:n.columnId,membershipId:n.membershipId,deltaDueDate:n.deltaDueDate,fixedDueDate:n.fixedDueDate,dueDateExceptionType:n.dueDateExceptionType,effectiveDueDate:n.effectiveDueDate}});return(0,r.f2)(i,t)},[(0,r.bG)(a.GRADABLE_USER_OPTION_ITEM_PUT)]:r.sT,[a.GRADABLE_USER_OPTION_ITEM_DELETE]:r.K4,[(0,r.ok)(a.GRADABLE_USER_OPTION_ITEM_DELETE)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{e.byColumnId[t.columnId]&&delete e.byColumnId[t.columnId]});return(0,r.f2)(n,t)},[(0,r.bG)(a.GRADABLE_USER_OPTION_ITEM_DELETE)]:r.sT,[a.GRADABLE_USER_OPTION_ITEM_LOAD]:r.K4,[(0,r.ok)(a.GRADABLE_USER_OPTION_ITEM_LOAD)]:(e,t)=>{let{columnId:n,byCourseMembershipId:i}=t,o=(0,s.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]={byCourseMembershipId:{}}),Object.keys(i).forEach(t=>{let r=i[t];e.byColumnId[n].byCourseMembershipId[t]={columnId:r.columnId,membershipId:r.membershipId,deltaDueDate:r.deltaDueDate,fixedDueDate:r.fixedDueDate,dueDateExceptionType:r.dueDateExceptionType,effectiveDueDate:r.effectiveDueDate}})});return(0,r.f2)(o,t)},[(0,r.bG)(a.GRADABLE_USER_OPTION_ITEM_LOAD)]:r.sT,[a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD]:r.K4,[(0,r.ok)(a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{e.exceptionsCount=t.results});return(0,r.f2)(n,t)},[(0,r.bG)(a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD)]:r.sT,[a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD]:r.K4,[(0,r.ok)(a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD)]:(e,t)=>{let{membershipId:n,byColumnId:i}=t,o=(0,s.ZP)(e,e=>{Object.keys(i).forEach(t=>{let r=i[t];(null==r?void 0:r.hasDueDateException)&&(e.byColumnId[t]||(e.byColumnId[t]={byCourseMembershipId:{}}),e.byColumnId[t].byCourseMembershipId[n]=r)})});return(0,r.f2)(o,t)},[(0,r.ok)(o.V.EXCEPTION_DETAILS_LOAD)]:(e,t)=>{let{learnExceptionDetails:n}=t;return(0,s.ZP)(e,e=>{n&&n.length>0&&n.forEach(t=>{e.byColumnId[t.columnId]||(e.byColumnId[t.columnId]={byCourseMembershipId:{}}),(null==t?void 0:t.hasDueDateException)&&(e.byColumnId[t.columnId].byCourseMembershipId[t.membershipId]=t)})})},[(0,r.bG)(a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD)]:r.sT}),u={persistGradableItemUserOption:(e,t)=>(0,r.PH)(a.GRADABLE_USER_OPTION_ITEM_PUT,()=>(0,i.GI)(e,t).then(e=>({item:e})).catch(e=>{throw{err:e}}),{}),deleteGradableItemUserOption:e=>(0,r.PH)(a.GRADABLE_USER_OPTION_ITEM_DELETE,async()=>{try{return await (0,i.ZW)(e),{columnId:e.columnId,membershipId:e.membershipId,byCourseMembershipId:{}}}catch(e){throw{err:e}}}),fetchGradableItemUserOption:(e,t)=>(0,r.PH)(a.GRADABLE_USER_OPTION_ITEM_LOAD,async()=>{try{let n=await (0,i.TL)(e,t);return{columnId:n.columnId,byCourseMembershipId:n.byCourseMembershipId}}catch(e){throw{err:e}}}),fetchGradableItemUserOptionCount:(e,t)=>(0,r.PH)(a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD,async()=>{try{return await (0,i.sH)(e)}catch(e){throw{err:e}}}),fetchGradableItemUserOptionExceptions:(e,t)=>(0,r.PH)(a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD,async()=>{try{return await (0,i.nH)(e,t)}catch(e){throw{err:e}}})},d={getGradableItemUserOptionByColumnAndMembershipId:(e,t,n)=>{let r=e.gradableItemUserOption.byColumnId[t];return r&&r.byCourseMembershipId[n]}}},847880:function(e,t,n){"use strict";n.d(t,{GE:function(){return m},I6:function(){return b},Nw:function(){return g},Ys:function(){return f}});var r=n(715729),i=n(276635),s=n(150713),o=n(830095),a=n(550161),l=n(86604),u=n(112027),d=n(771300),c=n(391819);let p=e=>["views","byColumnId",e.columnId],E=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return"attemptId"in n.query&&"attemptId"in t&&t.attemptId===n.query.attemptId});return{id:i,view:i?r[i]:null}},m=e=>{var t,n;return null===(n=null===(t=e.toolAttemptDetail)||void 0===t?void 0:t[u.u$.Test.toString()])||void 0===n?void 0:n.assessment},h=(e,t)=>{var n;let r=null===(n=m(t))||void 0===n?void 0:n.id;r&&(e.byGradebookAttemptId[t.id].assessmentId=r)},b=(0,a.Lq)({views:{byColumnId:{}},byGradebookAttemptId:{},deletedAttemptsByColumnId:{},paging:null,isLoading:!1},{[c.V.GRADEBOOK_ATTEMPT_LOAD]:(0,a.Li)(E,p),[c.V.GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED]:(e,t)=>{let{attemptId:n}=t,i=(0,r.ZP)(e,t=>{let r=e.byGradebookAttemptId[n];if(r){let e={...r};delete e.studentSubmissionViewUrlExpanded,t.byGradebookAttemptId[n]=e}});return i},[(0,a.ok)(c.V.GRADEBOOK_ATTEMPT_LOAD)]:(e,t)=>{let{attempt:n,courseId:i,columnId:s,viewUrlRequested:o}=t,l=(0,r.ZP)(e,t=>{if(n){let r=e.byGradebookAttemptId[n.id];t.byGradebookAttemptId[n.id]={...r,...n,studentSubmissionViewUrlExpanded:o?n.studentSubmission:null==r?void 0:r.studentSubmissionViewUrlExpanded,courseId:i,columnId:s},h(t,n)}});return(0,a.NV)(l,t,{viewResolver:E,viewsPathResolver:p,values:[n.id]})},[(0,a.bG)(c.V.GRADEBOOK_ATTEMPT_LOAD)]:(0,a.HT)(E,p),[c.V.GRADEBOOK_ATTEMPTS_LOAD]:a.K4,[(0,a.ok)(c.V.GRADEBOOK_ATTEMPTS_LOAD)]:(e,t)=>{let{byGradebookAttemptId:n,deletedAttempts:i,courseId:s,columnId:o,viewUrlRequested:l}=t,u=(0,r.ZP)(e,t=>{o&&(t.deletedAttemptsByColumnId[o]=[...i].sort((e,t)=>e.delegatedGraderOrder<t.delegatedGraderOrder?-1:e.delegatedGraderOrder>t.delegatedGraderOrder?1:0)),Object.values(n||{}).forEach(n=>{let r=e.byGradebookAttemptId[n.id];t.byGradebookAttemptId[n.id]={...r,...n,studentSubmissionViewUrlExpanded:l?n.studentSubmission:null==r?void 0:r.studentSubmissionViewUrlExpanded,courseId:s,columnId:o},(0,a.o_)(t,(0,a.NV)(t,{type:c.V.GRADEBOOK_ATTEMPTS_LOAD,query:{columnId:o,attemptId:n.id}},{viewResolver:E,viewsPathResolver:p,values:[n.id]}))})});return(0,a.f2)(u,t)},[(0,a.bG)(c.V.GRADEBOOK_ATTEMPTS_LOAD)]:a.sT,[c.V.GRADEBOOK_ATTEMPT_UPDATE]:(e,t)=>{let{attemptId:n}=t;return(0,r.ZP)(e,e=>{e.byGradebookAttemptId[n]={...e.byGradebookAttemptId[n],api:{isUpdating:!0}}})},[(0,a.ok)(c.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{attempt:n}=t,{byGradebookAttemptId:i}=e;return e=(0,r.ZP)(e,e=>{let t=i[n.id];t?e.byGradebookAttemptId[n.id]={...t,...n,api:{...t.api,isUpdating:!1}}:e.byGradebookAttemptId[n.id]={...n,api:{isDeleting:!1,isUpdating:!1}},h(e,n)}),(0,a.f2)(e,t)},[(0,a.bG)(c.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{attemptId:n}=t;return n?(0,r.ZP)(e,e=>{e.byGradebookAttemptId[n]={...e.byGradebookAttemptId[n],api:{isUpdating:!1}}}):e},[(0,a.ok)(l.V.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{columnId:n,questionAttempt:i}=t.data,{attemptId:s}=i;if(!s)throw Error("Attempt ID expected in question attempt object");return(0,r.ZP)(e,e=>{let t=e.byGradebookAttemptId[s];if(t&&n){let{view:r}=E(e,{columnId:n,attemptId:s});r&&(r.isValid=!1),t.api={...t.api,isInvalidated:!0}}})}}),g={loadGradebookAttemptByAttemptId:e=>(0,a.PH)(c.V.GRADEBOOK_ATTEMPT_LOAD,async()=>{var t;try{let n=await (0,s.AN)(e),r=i.includes(null===(t=e.expand)||void 0===t?void 0:t.split(","),"viewUrl");return{...n,query:e,viewUrlRequested:r}}catch(t){throw{err:t,query:e}}},{query:e}),clearSubmissionTextWithViewUrlByAttemptId:e=>(0,a.aU)(c.V.GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED,{attemptId:e}),loadGradebookAttemptsByColumnId:e=>(0,a.PH)(c.V.GRADEBOOK_ATTEMPTS_LOAD,async t=>{var n;try{let t=await (0,s.KV)(e),r=i.includes(null===(n=e.expand)||void 0===n?void 0:n.split(","),"viewUrl");return{...t,viewUrlRequested:r}}catch(e){throw{err:e}}}),updateAttemptById:e=>(0,a.PH)(c.V.GRADEBOOK_ATTEMPT_UPDATE,async(t,n)=>{let{attemptId:r}=e;try{return await (0,s.Oc)(e)}catch(e){throw n((0,a.aU)((0,a.bG)(c.V.GRADEBOOK_ATTEMPT_UPDATE),{attemptId:r})),e}},{attemptId:e.attemptId,courseId:e.courseId,studentAttemptStatusChanged:!!e.payload.status}),assignNewAttemptForPeerReview:e=>(0,a.c3)(async t=>{try{let n=await (0,s.gA)(e),r={courseId:e.courseId,columnId:e.columnId,gradeId:n.gradeId,reviewableAttemptsOnly:!0};return await t(g.loadGradebookAttemptsByColumnId(r)),{...n}}catch(e){throw e instanceof d.jM||t((0,a.aU)((0,a.ok)(o.Z.APP_ERROR),{error:e})),e}}),setGradeAttemptInStore:(e,t,n)=>(0,a.aU)((0,a.ok)(c.V.GRADEBOOK_ATTEMPT_UPDATE),{attempt:e,courseId:t,studentAttemptStatusChanged:n})},f={getGradebookAttemptByAttemptId:(e,t)=>e.gradebookAttempt.byGradebookAttemptId[t],getGradebookAttemptsByColumnId:(e,t,n)=>i.filter(e.gradebookAttempt.byGradebookAttemptId,{courseId:t,columnId:n}),getGradebookAttemptsByUserId:(e,t,n,r)=>i.filter(e.gradebookAttempt.byGradebookAttemptId,{courseId:t,columnId:n,userId:r}),getReviewableGradebookAttempts:(e,t,n,r)=>i.filter(e.gradebookAttempt.byGradebookAttemptId,e=>e.userId!==r&&e.courseId===t&&e.columnId===n),getDeletedReviewableGradebookAttempts:(e,t)=>{var n;return null!==(n=e.gradebookAttempt.deletedAttemptsByColumnId[t])&&void 0!==n?n:[]},isLoading:e=>e.gradebookAttempt.isLoading,getGradebookAttemptViewStateByQuery:(e,t)=>{let{view:n}=E(e.gradebookAttempt,t);if(!n)return null;let{query:r,...i}=n;return i}}},391819:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GRADEBOOK_ATTEMPTS_LOAD:"gradebook-attempts.load",GRADEBOOK_ATTEMPT_LOAD:"gradebook-attempt.load",GRADEBOOK_ATTEMPT_UPDATE:"gradebook-attempt.update",GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED:"gradebook-attempt.clear-student-submission-with-view-url-expanded"}},502448:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a},Ys:function(){return u}});var r=n(715729),i=n(550161),s=n(413952);let o={GRADEBOOK_CATEGORIES_LOAD_BY_COURSE:"gradebook-categories.load.by.course.id",GRADEBOOK_CATEGORY_LOAD_BY_ID:"gradebook-categories.load.by.id"},a=(0,i.Lq)({byCourseId:{},byId:{}},{[(0,i.ok)(o.GRADEBOOK_CATEGORIES_LOAD_BY_COURSE)]:(e,t)=>{let{courseId:n,response:s}=t;return(0,r.ZP)(e,t=>{t.byCourseId[n]=s.results.map(e=>e.id),s.results.forEach(n=>{let r=e.byId[n.id];t.byId[n.id]={...(0,i.PM)(r,n)}})})},[(0,i.ok)(o.GRADEBOOK_CATEGORY_LOAD_BY_ID)]:(e,t)=>{let{response:n}=t;return(0,r.ZP)(e,t=>{let r=e.byId[n.id];t.byId[n.id]={...(0,i.PM)(r,n)}})}}),l={loadGradebookCategoriesByCourseId:e=>(0,i.PH)(o.GRADEBOOK_CATEGORIES_LOAD_BY_COURSE,async()=>{try{let t=await s.X(e);return{courseId:e,response:t}}catch(e){throw{err:e}}})},u={getGradebookCategoriesByCourseId:(e,t)=>{let n=e.gradebookCategory.byCourseId[t];if(n)return n.map(t=>e.gradebookCategory.byId[t])},getGradebookCategoryById:(e,t)=>e.gradebookCategory.byId[t]}},444112:function(e,t,n){"use strict";n.d(t,{I6:function(){return f},Nw:function(){return I},Ys:function(){return _}});var r=n(715729),i=n(276635),s=n(550161),o=n(253275),a=n(16529),l=n(766991),u=n(830095),d=n(846935),c=n(560985),p=n(715655),E=n(337767);let m=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e],s=i.isEqual(r.query.paging,t.paging),o=i.isEqual(r.query.filter,t.filter),a=i.isEqual(r.query.sort,t.sort);return s&&a&&o});return{id:r,view:r?n[r]:null}},h=e=>["views","byCourseId",e.courseId],b=(e,t)=>{let{view:n}=m(e.gradebookColumn,t);return!n||!n.isLoading&&!n.isValid},g=(e,t,n)=>{let{courseId:r,id:i}=t,s=e.views.byCourseId[r];s&&Object.values(s).forEach(e=>{let t=e.values.some(e=>e===i);(n&&t||!n&&!t)&&(e.isValid=!1)})},f=(0,s.Lq)({byColumnId:{},permissions:{byCourseId:{}},isLoading:!1,views:{byCourseId:{}}},{[d.V.GRADEBOOK_COLUMN_LOAD]:s.K4,[(0,s.ok)(d.V.GRADEBOOK_COLUMN_LOAD)]:(e,t)=>{let{gradebookColumn:n}=t,i=(0,r.ZP)(e,e=>{if(!n)return;let r={...t.gradebookColumn,api:{isUpdating:!1,isDeleting:!1}};e.byColumnId[n.id]=r});return(0,s.f2)(i,t)},[(0,s.cI)(d.V.GRADEBOOK_COLUMN_LOAD)]:e=>(0,r.ZP)(e,e=>{e.isLoading=!1}),[(0,s.bG)(d.V.GRADEBOOK_COLUMN_LOAD)]:s.sT,[d.V.GRADEBOOK_COLUMN_LOAD_MULTIPLE]:s.K4,[(0,s.ok)(d.V.GRADEBOOK_COLUMN_LOAD_MULTIPLE)]:(e,t)=>{let{gradebookColumns:n}=t,i=(0,r.ZP)(e,e=>{n&&Object.keys(n).forEach(t=>{let r={...n[t],api:{isUpdating:!1,isDeleting:!1}};e.byColumnId[r.id]=r})});return(0,s.f2)(i,t)},[(0,s.bG)(d.V.GRADEBOOK_COLUMN_LOAD_MULTIPLE)]:s.sT,[d.V.GRADEBOOK_COLUMN_PERSIST]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let n=t.nextColumn.id||t.prevColumn&&t.prevColumn.id;if(!n)return;let r=e.byColumnId[n];r||(r={}),r.api||(r.api={}),r.api={isUpdating:!0}});return(0,s.f2)(n,t)},[(0,s.ok)(d.V.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{if(!t.gradebookColumn)return;g(e,t.gradebookColumn,!1);let n={...t.gradebookColumn,api:{isUpdating:!1,isDeleting:!1}};e.byColumnId[n.id]=n});return(0,s.f2)(n,t)},[(0,s.bG)(d.V.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let n=t.nextColumn&&t.nextColumn.id||t.prevColumn&&t.prevColumn.id;if(!n)return;let r=e.byColumnId[n];if(r.api){r.api.isUpdating=!1;return}r.api={isUpdating:!1}});return(0,s.sT)(n,t)},[d.V.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE]:s.K4,[(0,s.ok)(d.V.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t,i=(0,r.ZP)(e,e=>{e.byColumnId[n.id].rubricAssociations=n.rubricAssociations});return i},[(0,s.bG)(d.V.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE)]:s.sT,[d.V.GRADEBOOK_COLUMN_DELETE]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=(0,r.ZP)(e,e=>{e.byColumnId[n.id]||(e.byColumnId[n.id]={api:{}}),e.byColumnId[n.id].api||(e.byColumnId[n.id].api={}),e.byColumnId[n.id].api.isDeleting=!0})),e},[(0,s.ok)(d.V.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=(0,r.ZP)(e,e=>{let t=e.byColumnId[n.id];t&&(g(e,t,!0),delete e.byColumnId[n.id])})),(0,s.f2)(e,t)},[(0,s.bG)(d.V.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=(0,r.ZP)(e,e=>{e.byColumnId[n.id]||(e.byColumnId[n.id]={api:{}}),e.byColumnId[n.id].api||(e.byColumnId[n.id].api={}),e.byColumnId[n.id].api.isDeleting=!1})),e},[(0,s.ok)(l.V.CONTENT_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,n=>{let{columns:r}=t;Object.values(r||{}).forEach(t=>{let r=e.byColumnId[t.id];n.byColumnId[t.id]={...(0,s.PM)(r,t),api:{isUpdating:!1,isDeleting:!1},ui:e.byColumnId[t.id]&&e.byColumnId[t.id].ui}})});return(0,s.f2)(n,t)},[(0,s.ok)(l.V.CONTENT_DELETE)]:(e,t)=>{if(!t.deletedGrades)return e;let n=(0,r.ZP)(e,n=>{t.results.forEach(t=>{let r=(0,i.find)(e.byColumnId,{contentId:t});r&&(g(n,r,!0),delete n.byColumnId[r.id])})});return n},[(0,s.ok)(l.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>(0,r.ZP)(e,n=>{let{contentId:r}=t,s=(0,i.find)(e.byColumnId,{contentId:r});s&&(g(n,s,!0),delete n.byColumnId[s.id])}),[(0,s.ok)(l.V.CONTENT_PERSIST)]:(e,t)=>(0,r.ZP)(e,n=>{let{columns:r,contents:i}=t;Object.values(r||{}).forEach(t=>{let r=e.byColumnId[t.id];n.byColumnId[t.id]={...(0,s.PM)(r,t),api:{isDeleting:!1,isUpdating:!1}}}),Object.values(null!=i?i:{}).forEach(e=>{var t,r;let{title:i,id:s}=null!==(t=e.result)&&void 0!==t?t:e;if(!i)return;let o=null===(r=Object.values(n.byColumnId).find(e=>e.contentId===s))||void 0===r?void 0:r.id;o&&(n.byColumnId[o].columnName=i,n.byColumnId[o].effectiveColumnName=i,n.byColumnId[o].localizedColumnName&&(n.byColumnId[o].localizedColumnName={...n.byColumnId[o].localizedColumnName,languageKey:i}))})}),[d.V.GRADEBOOK_COLUMNS_LOAD]:(0,s.Li)(m,h),[(0,s.ok)(d.V.GRADEBOOK_COLUMNS_LOAD)]:(e,t)=>{let{data:n,query:{courseId:i}}=t;if(!n)return(0,s.f2)(e,t);let{results:o,paging:a,permissions:l}=n;return e=(0,r.ZP)(e,t=>{o.forEach(n=>{let r=e.byColumnId[n.id];t.byColumnId[n.id]={...(0,s.PM)(r,n)}}),t.permissions.byCourseId[i]=l}),(0,s.NV)(e,t,{viewResolver:m,viewsPathResolver:h,paging:a,values:o.map(e=>e.id)})},[(0,s.bG)(d.V.GRADEBOOK_COLUMNS_LOAD)]:(0,s.HT)(m,h)}),I={loadGradebookColumn:({courseId:e,columnId:t,allowedErrors:n})=>(0,s.PH)(d.V.GRADEBOOK_COLUMN_LOAD,async n=>{var r;let i=null;n();try{i=await (0,o.gI)(e,t)}catch(e){throw{err:e}}return{gradebookColumn:i}},void 0,n),loadGradebookColumns:({courseId:e,columnIds:t})=>(0,s.PH)(d.V.GRADEBOOK_COLUMN_LOAD_MULTIPLE,async n=>{var r;return n(),(0,o.HA)(e,t)}),loadGradebookColumnsByCourseId:e=>(0,s.PH)(d.V.GRADEBOOK_COLUMN_LOAD_MULTIPLE,async t=>{var n;return t(),(0,o.YM)(e)}),loadGradebookColumnByContentId:({courseId:e,contentId:t})=>(0,s.PH)(d.V.GRADEBOOK_COLUMN_LOAD,async n=>{var r;let i=null;return n(),{gradebookColumn:i=await (0,o.Vh)({courseId:e,contentId:t})}}),loadGradebookColumnsByQuery:e=>async(t,n)=>{let r=!b(n(),e);if(!r){t((0,s.aU)(d.V.GRADEBOOK_COLUMNS_LOAD,{query:e}));try{let n=await (0,o.$J)(e);t((0,s.aU)((0,s.ok)(d.V.GRADEBOOK_COLUMNS_LOAD),{data:n,query:e}))}catch(n){throw t((0,s.aU)((0,s.bG)(d.V.GRADEBOOK_COLUMNS_LOAD),{query:e})),t((0,s.aU)((0,s.ok)(u.Z.APP_ERROR),{error:n})),{err:n}}}},setGradebookColumnInStore:e=>(0,s.aU)((0,s.ok)(d.V.GRADEBOOK_COLUMN_LOAD),{gradebookColumn:e}),persistGradebookColumn:(e,t)=>(0,s.PH)(d.V.GRADEBOOK_COLUMN_PERSIST,()=>(0,o.Rc)(e,t).then(e=>({gradebookColumn:e})).catch(t=>{throw{prevColumn:e,err:t}}),{prevColumn:e,nextColumn:t}),postReadyGradesByColumnId:(e,t)=>(0,s.PH)(d.V.GRADEBOOK_COLUMN_POST_READY_GRADES,async()=>{try{let n=await (0,o.mo)(e,t);return n}catch(e){throw{err:e}}},null),persistGradebookColumns:(e,t)=>(0,s.c3)(async n=>{e.forEach(e=>{n((0,s.aU)(d.V.GRADEBOOK_COLUMN_PERSIST,{prevColumn:e.prevColumn,nextColumn:e.nextColumn}))});let r=await (0,o.Mq)(e,t);return Object.keys(r.columns).forEach(e=>{let t=r.columns[e];t.isOk?n((0,s.aU)((0,s.ok)(d.V.GRADEBOOK_COLUMN_PERSIST),{gradebookColumn:t.result})):(n((0,s.aU)((0,s.bG)(d.V.GRADEBOOK_COLUMN_PERSIST),{prevColumn:t.previous,err:t.error})),n((0,s.aU)((0,s.ok)(u.Z.APP_ERROR),{error:t.error})))}),r}),removeRubricAssociations:e=>(0,s.PH)(d.V.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE,async t=>{let n=_.getGradebookColumnById(t(),e);return{gradebookColumn:n=await (0,o.QI)(n.courseId,n.id)}}),removeGradebookColumnFromStore:e=>(0,s.aU)((0,s.ok)(d.V.GRADEBOOK_COLUMN_DELETE),{gradebookColumn:{id:e}}),addGradebookColumnToStore:e=>(0,s.aU)((0,s.ok)(d.V.GRADEBOOK_COLUMN_PERSIST),{gradebookColumn:e}),removeColumn:e=>(0,s.PH)(d.V.GRADEBOOK_COLUMN_DELETE,async t=>{let n=_.getGradebookColumnById(t(),e);return await (0,o.XS)(n.courseId,n.id),{gradebookColumn:n}})},y=(0,c.wN)(p.PW,E.TO),S=(0,c.wN)(p.PW,E.AD),T=(0,c.P1)([e=>e.gradebookColumn.byColumnId,(e,t)=>t],(e,t)=>(0,i.filter)(e,{courseId:t})),_={getGradebookColumnById:(e,t)=>(0,i.find)(e.gradebookColumn.byColumnId,{id:t}),getGradebookColumnsByIds:(e,t)=>{let n={};return t.forEach(t=>n[t]=e.gradebookColumn.byColumnId[t]),n},getGradebookColumnByContentId:(e,t)=>{let n=a.Ys.getAssessmentByContentId(e,t);return n?e.gradebookColumn.byColumnId[n.gradableItemId]:(0,i.find)(e.gradebookColumn.byColumnId,{contentId:t})},getGradebookColumnsByCourseId:T,getGradebookColumnsByQuery:y((e,t)=>{let{view:n}=m(e.gradebookColumn,t);return n&&n.isValid?(n.values||[]).map(t=>e.gradebookColumn.byColumnId[t]):[]},e=>e),isLoading:(e,t)=>{let{view:n}=m(e.gradebookColumn,t);return n?n.isLoading:e.gradebookColumn.isLoading},getGradebookColumnViewStatusByQuery:S((e,t)=>m(e.gradebookColumn,t),({view:e})=>e?{isLoading:e.isLoading,isValid:e.isValid,paging:e.paging}:null)}},846935:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GRADEBOOK_COLUMN_LOAD:"gradebook-column.load",GRADEBOOK_COLUMN_LOAD_MULTIPLE:"gradebook-column.multiple.load",GRADEBOOK_COLUMN_PERSIST:"gradebook-column.persist",GRADEBOOK_COLUMN_POST_READY_GRADES:"gradebook-column.ready.grades.post",GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE:"gradebook-column.rubricAssociations.delete",GRADEBOOK_COLUMN_DELETE:"gradebook-column.delete",GRADEBOOK_COLUMNS_LOAD:"gradebook-columns.load"}},53925:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GRADEBOOK_GRADE_LOAD_BY_COLUMN:"gradebook-grade.load.by.column.id",GRADEBOOK_BULKVIEW_LOAD:"gradebook-grade-bulk-view.load",GRADEBOOK_GRADES_LOAD:"gradebook-grades.load",GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID:"gradebook-grade.persist.by.grade.id",GRADEBOOK_GRADE_PERSIST_BY_USER_ID:"gradebook-grade.persist.by.user.id",GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID:"gradebook-grade.post.grade.by.grade.id",GRADEBOOK_GRADES_INVALIDATE:"gradebook-grades.invalidate"}},71841:function(e,t,n){"use strict";n.d(t,{Q:function(){return u},y:function(){return d}});var r=n(276635),i=n.n(r),s=n(560985),o=n(715655),a=n(176726);let l=(0,s.wN)(o.PW,(e,t)=>e===t||JSON.stringify(Object.keys(e))===JSON.stringify(Object.keys(t))),u=(0,a.U)((e,t,n)=>{let r=e.gradebookGrade.byColumnId[t];return r?n.filter(e=>{if(!i().has(r.byMemberId,e))return!0;let t=r.byMemberId[e];if(!t)return!1;let n=r.grades[t];return!n||!n.api||n.api.isInvalidated}):n},e=>e),d=l((e,t,n)=>{let r=e.gradebookGrade.byColumnId[t];if(!r)return{};let i=r.byMemberId,s=r.grades,o={};return n.forEach(e=>{let t=i[e];t&&(o[e]=s[t])}),o},e=>e)},36011:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(715729),i=n(550161),s=n(276635),o=n(201600);let a={GRADEBOOK_SCHEMA_LOAD:"gradebook-schema.load",GRADEBOOK_SCHEMAS_LOAD_BY_COURSE:"gradebook-schema.load.by.course.id",GRADEBOOK_SCHEMA_PERSIST_BY_COURSE:"gradebook-schema.persist.by.course.id",GRADEBOOK_SCHEMA_UPDATE_BY_COURSE:"gradebook-schema.update.by.course.id",GRADEBOOK_SCHEMA_DELETE_BY_COURSE:"gradebook-schema.delete.by.course.id",GRADEBOOK_SCHEMAS_INVALIDATE_DATA:"gradebook-schema.invalidate.data"};function l(e,t){let n=t.schema,s=(0,r.ZP)(e,e=>{(null==n?void 0:n.id)&&(e.byId[n.id]=n)});return(0,i.f2)(s,t)}let u=(0,i.Lq)({byId:{},isLoading:!1,isValid:!1,paging:null,permissions:{createGradingSchemas:!1}},{[a.GRADEBOOK_SCHEMA_LOAD]:i.K4,[a.GRADEBOOK_SCHEMAS_LOAD_BY_COURSE]:i.K4,[(0,i.ok)(a.GRADEBOOK_SCHEMA_LOAD)]:l,[(0,i.ok)(a.GRADEBOOK_SCHEMA_PERSIST_BY_COURSE)]:l,[(0,i.ok)(a.GRADEBOOK_SCHEMA_UPDATE_BY_COURSE)]:l,[(0,i.bG)(a.GRADEBOOK_SCHEMA_LOAD)]:i.sT,[(0,i.bG)(a.GRADEBOOK_SCHEMAS_LOAD_BY_COURSE)]:i.sT,[(0,i.ok)(a.GRADEBOOK_SCHEMAS_LOAD_BY_COURSE)]:(e,t)=>{let{byId:n,paging:s,permissions:o}=t,a=(0,r.ZP)(e,e=>{for(let t of Object.keys(n||{}))e.byId[t]=n[t];s&&(e.paging=s),o&&(e.permissions=o),e.isLoading=!1,e.isValid=!0});return(0,i.f2)(a,t)},[(0,i.ok)(a.GRADEBOOK_SCHEMA_DELETE_BY_COURSE)]:(e,t)=>{let{schemaId:n}=t,s=(0,r.ZP)(e,e=>{delete e.byId[n]});return(0,i.f2)(s,t)},[(0,i.ok)(a.GRADEBOOK_SCHEMAS_INVALIDATE_DATA)]:(e,t)=>(0,i.f2)((0,r.ZP)(e,e=>{e.isValid=!1}),t),[(0,i.bG)(a.GRADEBOOK_SCHEMAS_LOAD_BY_COURSE)]:i.sT}),d={loadGradebookSchema:({courseId:e,schemaId:t})=>(0,i.PH)(a.GRADEBOOK_SCHEMA_LOAD,async()=>({schema:await o.yx(e,t)})),loadGradebookSchemasByCourseId:({courseId:e,offset:t,limit:n})=>(0,i.PH)(a.GRADEBOOK_SCHEMAS_LOAD_BY_COURSE,async()=>await o.QM(e,t,n)),persistGradebookSchema:({courseId:e,schema:t})=>(0,i.PH)(a.GRADEBOOK_SCHEMA_PERSIST_BY_COURSE,async()=>({schema:await o.Ew(e,t)})),updateGradebookSchema:({courseId:e,schema:t})=>(0,i.PH)(a.GRADEBOOK_SCHEMA_UPDATE_BY_COURSE,async()=>({schema:await o.ov(e,t)})),deleteGradebookSchema:({courseId:e,schemaId:t})=>(0,i.PH)(a.GRADEBOOK_SCHEMA_DELETE_BY_COURSE,async()=>(await o.uV(e,t),{schemaId:t})),invalidateData:()=>(0,i.c3)(e=>e((0,i.aU)((0,i.ok)(a.GRADEBOOK_SCHEMAS_INVALIDATE_DATA))))},c={areGradebookSchemasLoading:e=>e.gradebookSchema.isLoading,getGradebookSchemaById:(e,t)=>(0,s.find)(e.gradebookSchema.byId,{id:t}),getGradebookSchemasByCourseId:(e,t)=>(0,s.filter)(e.gradebookSchema.byId,{courseId:t}),isGradebookSchemaDataValid:e=>e.gradebookSchema.isValid}},76701:function(e,t,n){"use strict";n.d(t,{N:function(){return s},V:function(){return i}});var r=n(550161);let i={GRANULAR_CONTENT_COPY_COMPLETE:"granular.content.copy.complete"},s={notifyGCCCompleted:e=>(0,r.aU)(i.GRANULAR_CONTENT_COPY_COMPLETE,{courseId:e})}},54971:function(e,t){"use strict";t.Z={GROUP_DELETE_BATCH:"group.delete.batch",GROUPS_LOAD:"groups.load",GROUPS_LOAD_BY_CONTENT_ID:"groups.load.by.content.id",GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY:"groups.load.by.content.id.by.query",GROUPS_LOAD_BY_QUERY:"groups.load.by.query",GROUPS_ADD:"groups.add",GROUPS_UPDATE:"groups.update",GROUP_LOAD_BY_ID:"groups.load.by.id",GROUP_MEMBERSHIPS_LOAD:"group.memberships.load",ADD_GROUP_MEMBERSHIP:"group.membership.add",REMOVE_GROUP_MEMBERSHIP:"group.membership.remove",GROUP_STUDENT_COUNT_LOAD:"group.student.count.load"}},610239:function(e,t,n){"use strict";n.d(t,{I6:function(){return a},Nw:function(){return l},Ys:function(){return u}});var r=n(335748),i=n(550161),s=n(715729),o=n(12402);let a=(0,i.Lq)({byCourseId:{},isLoading:!1},{[r.V.IMPORT_GROUP_MEMBERS]:i.K4,[(0,i.ok)(r.V.IMPORT_GROUP_MEMBERS)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"SUCCESS"}});return(0,i.f2)(n,t)},[(0,i.bG)(r.V.IMPORT_GROUP_MEMBERS)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR",responseCode:t.err.body.code}});return(0,i.sT)(n,t)},[(0,i.ok)(r.V.CLEAR_IMPORT_GROUP_MEMBERS_STATUS)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"NONE",responseCode:void 0}});return(0,i.f2)(n,t)},[(0,i.bG)(r.V.FILE_UPLOAD_GROUP_MEMBERS_ERROR)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR"}});return(0,i.sT)(n,t)}}),l={importGroupMembers:(e,t)=>(0,i.PH)(r.V.IMPORT_GROUP_MEMBERS,async()=>{try{return await (0,o.i7$)(e,t),{courseId:e}}catch(t){throw{err:t,courseId:e}}}),clearImportGroupMembersStatus:e=>(0,i.aU)((0,i.ok)(r.V.CLEAR_IMPORT_GROUP_MEMBERS_STATUS),{courseId:e}),setFileUploadGroupMembersError:(e,t)=>(0,i.aU)((0,i.bG)(r.V.FILE_UPLOAD_GROUP_MEMBERS_ERROR),{courseId:e,error:t})},u={getImportGroupMembersStatus:(e,t)=>e.groupMembersImport.byCourseId[t]}},303062:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a},Ys:function(){return u}});var r=n(550161),i=n(715729);let s={EXPORT_GROUP_SET:"export.group.set",CLEAR_EXPORT_GROUP_SET_STATUS:"clear.export.group.set.status",GET_EXPORTED_FILES:"get.exported.files",DELETE_EXPORTED_FILE:"delete.exported.file"};var o=n(12402);let a=(0,r.Lq)({byCourseId:{},isLoading:!1},{[s.EXPORT_GROUP_SET]:r.K4,[(0,r.ok)(s.EXPORT_GROUP_SET)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"SUCCESS",ui:{source:t.source}}});return(0,r.f2)(n,t)},[(0,r.bG)(s.EXPORT_GROUP_SET)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"ERROR",ui:{source:t.source}}});return(0,r.sT)(n,t)},[(0,r.ok)(s.CLEAR_EXPORT_GROUP_SET_STATUS)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"NONE",ui:{source:t.source}}});return(0,r.f2)(n,t)},[s.GET_EXPORTED_FILES]:r.K4,[(0,r.ok)(s.GET_EXPORTED_FILES)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={byGroupSetId:{}}),e.byCourseId[t.courseId].byGroupSetId[t.groupSetId]={files:t.payload.results,paging:t.payload.paging}});return(0,r.f2)(n,t)},[(0,r.bG)(s.GET_EXPORTED_FILES)]:r.sT,[s.DELETE_EXPORTED_FILE]:r.K4,[(0,r.ok)(s.DELETE_EXPORTED_FILE)]:r.f2,[(0,r.bG)(s.DELETE_EXPORTED_FILE)]:r.sT}),l={exportGroupSet:(e,t,n,i)=>(0,r.PH)(s.EXPORT_GROUP_SET,async()=>{try{return await (0,o.siz)(e,t,n),{courseId:e,groupSetId:t,source:i}}catch(n){throw{err:n,courseId:e,groupSetId:t,source:i}}}),clearExportGroupSetStatus:e=>(0,r.aU)((0,r.ok)(s.CLEAR_EXPORT_GROUP_SET_STATUS),{courseId:e}),getExportedFiles:(e,t,n)=>(0,r.PH)(s.GET_EXPORTED_FILES,async()=>{try{let r=await (0,o.GTb)(e,t,n);return{courseId:e,groupSetId:t,payload:r}}catch(n){throw{err:n,courseId:e,groupSetId:t}}}),deleteFile:(e,t,n)=>(0,r.PH)(s.DELETE_EXPORTED_FILE,async()=>{try{await (0,o.vWI)(e,t,n)}catch(e){throw{err:e}}})},u={getExportGroupSet:(e,t)=>e.groupSetExport.byCourseId[t]}},585999:function(e,t,n){"use strict";n.d(t,{I6:function(){return a},Nw:function(){return l},Ys:function(){return u}});var r=n(335748),i=n(550161),s=n(715729),o=n(12402);let a=(0,i.Lq)({byCourseId:{},isLoading:!1},{[r.V.IMPORT_GROUP_SET]:i.K4,[(0,i.ok)(r.V.IMPORT_GROUP_SET)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"SUCCESS"}});return(0,i.f2)(n,t)},[(0,i.bG)(r.V.IMPORT_GROUP_SET)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR",responseCode:t.err.body.code}});return(0,i.sT)(n,t)},[(0,i.ok)(r.V.CLEAR_IMPORT_GROUP_SET_STATUS)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"NONE",responseCode:void 0}});return(0,i.f2)(n,t)},[(0,i.bG)(r.V.FILE_UPLOAD_GROUP_SET_ERROR)]:(e,t)=>{let n=(0,s.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR"}});return(0,i.sT)(n,t)}}),l={importGroupSet:(e,t)=>(0,i.PH)(r.V.IMPORT_GROUP_SET,async()=>{try{return await (0,o.i7$)(e,t),{courseId:e}}catch(t){throw{err:t,courseId:e}}}),clearImportGroupSetStatus:e=>(0,i.aU)((0,i.ok)(r.V.CLEAR_IMPORT_GROUP_SET_STATUS),{courseId:e}),setFileUploadGroupSetError:(e,t)=>(0,i.aU)((0,i.bG)(r.V.FILE_UPLOAD_GROUP_SET_ERROR),{courseId:e,error:t})},u={getImportGroupSetStatus:(e,t)=>e.groupSetImport.byCourseId[t]}},335748:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={IMPORT_GROUP_SET:"import.group.set",CLEAR_IMPORT_GROUP_SET_STATUS:"clear.import.group.set",FILE_UPLOAD_GROUP_SET_ERROR:"file.upload.group.set.error",IMPORT_GROUP_MEMBERS:"import.group.members",CLEAR_IMPORT_GROUP_MEMBERS_STATUS:"clear.import.group.members.status",FILE_UPLOAD_GROUP_MEMBERS_ERROR:"file.upload.group.members.error"}},586750:function(e,t,n){"use strict";n.d(t,{I6:function(){return p},Nw:function(){return h},Ys:function(){return b}});var r=n(715729),i=n(276635),s=n(550161),o=n(916225),a=n(408027),l=n(830095),u=n(70825),d=n(179155),c=n(771300);let p=(0,s.Lq)({institutionBrands:{byId:{}},brandAssociations:{byId:{}},brandHosts:{hostnames:[],paging:null,isLoading:!1},paging:null,permissions:null,isLoading:!1},{[u.V.INSTITUTION_BRANDS_LOAD]:s.K4,[(0,s.ok)(u.V.INSTITUTION_BRANDS_LOAD)]:(e,t)=>{if(!t||!t.institutionBrands)return(0,s.f2)(e,t);let{permissions:n,paging:i}=t,o=m(e,t);return(0,r.ZP)(o,e=>{e.isLoading=!1,e.paging=i,e.permissions=n})},[(0,s.bG)(u.V.INSTITUTION_BRANDS_LOAD)]:s.sT,[u.V.INSTITUTION_BRAND_LOAD]:s.K4,[(0,s.ok)(u.V.INSTITUTION_BRAND_LOAD)]:(e,t)=>(t&&t.institutionBrands&&(e=m(e,t)),(0,s.f2)(e,t)),[(0,s.bG)(u.V.INSTITUTION_BRAND_LOAD)]:s.sT,[(0,s.ok)(u.V.INSTITUTION_BRAND_CREATE)]:(e,t)=>m(e,t),[(0,s.bG)(u.V.INSTITUTION_BRAND_CREATE)]:s.sT,[u.V.INSTITUTION_BRANDS_UPDATE]:(e,t)=>{let{ultraBranding:n,brandAssociations:s}=t,o=n.id,a=e;a=(0,r.ZP)(a,e=>{e.institutionBrands.byId[o]||(e.institutionBrands.byId[o]={}),e.institutionBrands.byId[o].api||(e.institutionBrands.byId[o].api={}),e.institutionBrands.byId[o].api.isUpdating=!0});let l=(0,i.filter)(e.brandAssociations.byId,{brandId:o});return l.forEach(e=>{a=(0,i.find)(s,{id:e.id})?(0,r.ZP)(a,t=>{t.brandAssociations.byId[e.id]||(t.brandAssociations.byId[e.id]={}),t.brandAssociations.byId[e.id].api||(t.brandAssociations.byId[e.id].api={}),t.brandAssociations.byId[e.id].api.isUpdating=!0}):(0,r.ZP)(a,t=>{t.brandAssociations.byId[e.id]||(t.brandAssociations.byId[e.id]={}),t.brandAssociations.byId[e.id].api||(t.brandAssociations.byId[e.id].api={}),t.brandAssociations.byId[e.id].api.isDeleting=!0})}),a},[(0,s.ok)(u.V.INSTITUTION_BRANDS_UPDATE)]:(e,t)=>{let{institutionBrands:n,brandAssociations:s}=t,o=Object.keys(n.byId)[0],a=e,l=(0,i.chain)(e.brandAssociations.byId).filter({brandId:o}).filter(e=>!s.byId[e.id]).value();return m(a=(0,r.ZP)(a,e=>{l.forEach(t=>{delete e.brandAssociations.byId[t.id]})}),t)},[(0,s.bG)(u.V.INSTITUTION_BRANDS_UPDATE)]:(e,t)=>{let{brandWithAssociations:n}=t,o=e;if(n){let t=n.ultraBranding.id,s=(0,i.filter)(e.brandAssociations.byId,{brandId:t});o=(0,r.ZP)(o,e=>{s.forEach(t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api={isDeleting:!1,isUpdating:!1}}),e.institutionBrands.byId[t]||(e.institutionBrands.byId[t]={}),e.institutionBrands.byId[t].api||(e.institutionBrands.byId[t].api={}),e.institutionBrands.byId[t].api.isUpdating=!1})}return(0,s.sT)(o,t)},[u.V.INSTITUTION_BRAND_DELETE]:(e,t)=>{let{brandId:n}=t,s=(0,i.filter)(e.brandAssociations.byId,{brandId:n});return(0,r.ZP)(e,e=>{s.forEach(t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api||(e.brandAssociations.byId[t.id].api={}),e.brandAssociations.byId[t.id].api.isDeleting=!0}),e.institutionBrands.byId[n]||(e.institutionBrands.byId[n]={}),e.institutionBrands.byId[n].api||(e.institutionBrands.byId[n].api={}),e.institutionBrands.byId[n].api.isDeleting=!0})},[(0,s.ok)(u.V.INSTITUTION_BRAND_DELETE)]:(e,t)=>{let{brandId:n}=t,s=(0,i.filter)(e.brandAssociations.byId,{brandId:n});return(0,r.ZP)(e,e=>{s.forEach(t=>{delete e.brandAssociations.byId[t.id]}),delete e.institutionBrands.byId[n]})},[(0,s.bG)(u.V.INSTITUTION_BRAND_DELETE)]:(e,t)=>{let{brandId:n}=t,o=(0,i.filter)(e.brandAssociations.byId,{brandId:n}),a=e;return a=(0,r.ZP)(a,e=>{o.forEach(t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api||(e.brandAssociations.byId[t.id].api={}),e.brandAssociations.byId[t.id].api.isDeleting=!1}),e.institutionBrands.byId[n]||(e.institutionBrands.byId[n]={}),e.institutionBrands.byId[n].api||(e.institutionBrands.byId[n].api={}),e.institutionBrands.byId[n].api.isDeleting=!1}),(0,s.sT)(a,t)},[u.V.DEFAULT_INSTITUTION_BRAND_LOAD]:s.K4,[(0,s.ok)(u.V.DEFAULT_INSTITUTION_BRAND_LOAD)]:(e,t)=>(t&&t.institutionBrands&&(e=m(e,t)),(0,s.f2)(e,t)),[(0,s.bG)(u.V.DEFAULT_INSTITUTION_BRAND_LOAD)]:s.sT,[u.V.INSTITUTION_BRAND_HOSTNAMES_LOAD]:(e,t)=>(0,r.ZP)(e,e=>{e.brandHosts.isLoading=!0}),[(0,s.ok)(u.V.INSTITUTION_BRAND_HOSTNAMES_LOAD)]:(e,t)=>{if(!t||!t.hostnames)return(0,r.ZP)(e,e=>{e.brandHosts.isLoading=!1});let{hostnames:n,paging:i}=t;return(0,r.ZP)(e,e=>{e.brandHosts.hostnames=n,e.brandHosts.paging=i,e.brandHosts.isLoading=!1})},[(0,s.bG)(u.V.INSTITUTION_BRAND_HOSTNAMES_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{e.brandHosts.isLoading=!1})}),E=e=>(0,i.find)(e.institutionBrand.institutionBrands.byId,{isDefault:!0}),m=(e,t)=>{let{institutionBrands:n,brandAssociations:i}=t;return(0,r.ZP)(e,e=>{Object.keys(n.byId).forEach(t=>{let r=n.byId[t],i={...r,api:{isUpdating:!1,isDeleting:!1}};e.institutionBrands.byId[i.id]=i}),Object.keys(i.byId).forEach(t=>{let n={...i.byId[t],api:{isUpdating:!1,isDeleting:!1}};e.brandAssociations.byId[n.id]=n})})},h={createBrand:e=>(0,s.PH)(u.V.INSTITUTION_BRAND_CREATE,()=>(0,o.Vb)(e).catch(t=>{throw{err:t,brandWithAssociations:e}})),updateBrand:e=>(0,s.PH)(u.V.INSTITUTION_BRANDS_UPDATE,()=>(0,o.yL)(e.ultraBranding.id,e).catch(t=>{throw{err:t,brandWithAssociations:e}}),e),fetchInstitutionBrand:e=>(0,s.c3)((t,n)=>{var r;return t((0,s.aU)(u.V.INSTITUTION_BRAND_LOAD)),((r=n(),b.getInstitutionBrandById(r,e))?Promise.resolve(null):(0,o.gM)(e).catch(t=>{throw{err:t,brandId:e}})).then(e=>t((0,s.aU)((0,s.ok)(u.V.INSTITUTION_BRAND_LOAD),e))).catch(e=>{let n=(0,d.Gt)(e);if(t((0,s.aU)((0,s.bG)(u.V.INSTITUTION_BRAND_LOAD),e)),!(0,c.Kn)(n,[a.oji.NotFound]))return t((0,s.aU)((0,s.ok)(l.Z.APP_ERROR),{error:n})),null;throw n.originalException})}),fetchInstitutionBrands:()=>(0,s.PH)(u.V.INSTITUTION_BRANDS_LOAD,e=>null!=e().institutionBrand.paging?Promise.resolve(null):(0,o.N3)().catch(e=>{throw{err:e}})),deleteInstitutionBrand:e=>(0,s.PH)(u.V.INSTITUTION_BRAND_DELETE,()=>(0,o.GN)(e).then(()=>({brandId:e})).catch(t=>{throw{err:t,brandId:e}}),{brandId:e}),fetchDefaultInstitutionBrand:()=>(0,s.PH)(u.V.DEFAULT_INSTITUTION_BRAND_LOAD,e=>{var t;return(t=e(),b.getDefaultInstitutionBrand(t))?Promise.resolve(null):(0,o.gM)("default").catch(e=>{throw{err:e}})}),fetchInstitutionBrandHostnames:()=>(0,s.PH)(u.V.INSTITUTION_BRAND_HOSTNAMES_LOAD,e=>null!=e().institutionBrand.brandHosts.paging?Promise.resolve(null):(0,o.k9)().catch(e=>{throw{err:e}}))},b={getInstitutionBrandById:(e,t)=>t===u.v?E(e):(0,i.find)(e.institutionBrand.institutionBrands.byId,{id:t}),getAssociationsByBrandId:(e,t)=>{let n=E(e),r=t===u.v?n&&n.id:t;return(0,i.filter)(e.institutionBrand.brandAssociations.byId,{brandId:r})},getAllAssociationsByBrandId:e=>(0,i.groupBy)(e.institutionBrand.brandAssociations.byId,"brandId"),getDefaultInstitutionBrand:e=>E(e)}},70825:function(e,t,n){"use strict";n.d(t,{V:function(){return r},v:function(){return i}});let r={INSTITUTION_BRAND_CREATE:"institution.brand.create",INSTITUTION_BRANDS_UPDATE:"institution.brand.update",INSTITUTION_BRAND_DELETE:"institution.brand.delete",INSTITUTION_BRAND_LOAD:"institution.brand.load",INSTITUTION_BRANDS_LOAD:"institution.brands.load",DEFAULT_INSTITUTION_BRAND_LOAD:"institution.brands.default.load",INSTITUTION_BRAND_HOSTNAMES_LOAD:"institution.brand.hostnames.load",INSTITUTION_CUSTOM_CSS_UPSERT:"institution.custom.css.upsert"},i="default"},149631:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return u},Ys:function(){return p}});var r=n(715729),i=n(276635),s=n(550161),o=n(425750),a=n(70825);let l={INSTITUTION_ROLE_LOAD:"institution.role.load",INSTITUTION_ROLES_LOAD:"institution.roles.load"},u=(0,s.Lq)({institutionRoles:{byId:{}},paging:null,isLoading:!1},{[l.INSTITUTION_ROLES_LOAD]:s.K4,[(0,s.ok)(l.INSTITUTION_ROLES_LOAD)]:(e,t)=>{if(!t||!t.institutionRoles)return(0,s.f2)(e,t);let{institutionRoles:n,paging:i}=t,o=e;return Object.keys(n.byId).forEach(e=>{let t={...n.byId[e],api:{isUpdating:!1,isDeleting:!1}};o=(0,r.ZP)(o,e=>{e.institutionRoles.byId[t.id]=t})}),(0,r.ZP)(o,e=>{e.isLoading=!1,e.paging=i})},[(0,s.bG)(l.INSTITUTION_ROLES_LOAD)]:s.sT,[l.INSTITUTION_ROLE_LOAD]:s.K4,[(0,s.ok)(l.INSTITUTION_ROLE_LOAD)]:(e,t)=>{if(!t||!t.institutionRole)return(0,s.f2)(e,t);let{institutionRole:n}=t;return(0,s.f2)(e,t,{institutionRoles:{byId:(0,r.ZP)(e.institutionRoles.byId,e=>{e[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}}})}})},[(0,s.bG)(l.INSTITUTION_ROLE_LOAD)]:s.sT,[(0,s.ok)(a.V.INSTITUTION_BRANDS_LOAD)]:d,[(0,s.ok)(a.V.INSTITUTION_BRAND_LOAD)]:d});function d(e,t){if(!t||!t.institutionRoles)return e;let{institutionRoles:n}=t,i=e;return Object.keys(n).forEach(e=>{i=(0,r.ZP)(i,t=>{t.institutionRoles.byId[e]={...n[e],api:{isUpdating:!1,isDeleting:!1}}})}),i}let c={fetchInstitutionRole:e=>(0,s.PH)(l.INSTITUTION_ROLE_LOAD,t=>{var n;return(n=t(),p.getInstitutionRoleById(n,e))?Promise.resolve(null):(0,o.pS)(e).then(e=>({institutionRole:e})).catch(e=>{throw{err:e}})}),fetchInstitutionRoles:()=>(0,s.PH)(l.INSTITUTION_ROLES_LOAD,e=>null!=e().institutionRole.paging?Promise.resolve(null):(0,o.B)().then(e=>e).catch(e=>{throw{err:e}}))},p={getInstitutionRoleById:(e,t)=>(0,i.find)(e.institutionRole.institutionRoles.byId,{id:t}),getAllInstitutionRolesById:e=>e.institutionRole.institutionRoles.byId}},611734:function(e,t,n){"use strict";n.d(t,{Nw:function(){return m},I6:function(){return E},Ys:function(){return h}});var r=n(715729),i=n(276635),s=n(846409);async function o(e){return null==e.locale&&(e.locale="en_US"),(0,s.U2)((0,s.Q2)("/v1/locales/%locale%?exactMatch=false",e))}var a=n(408027),l=n(830095),u=n(550161);let d={LOCALE_SETTINGS_LOAD:"locale.load"};var c=n(179155),p=n(702028);let E=(0,u.Lq)({byLocale:{},isLoading:!1},{[d.LOCALE_SETTINGS_LOAD]:(e,t)=>(0,u.K4)(e,t),[(0,u.ok)(d.LOCALE_SETTINGS_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{localeSettings:n}=t;e.byLocale[n.languageTag]=n});return(0,u.f2)(n,t)},[(0,u.bG)(d.LOCALE_SETTINGS_LOAD)]:(e,t)=>(0,u.sT)(e,t),[(0,u.cI)(d.LOCALE_SETTINGS_LOAD)]:(e,t)=>(0,u.f2)(e,t)}),m={getLocaleSettings:e=>(0,u.c3)((t,n)=>{var r,s;return(r=n(),s=e.locale,i.isEmpty(h.getLocaleSettings(r,s))&&!h.isLocaleLoading(r))?(t((0,u.aU)(d.LOCALE_SETTINGS_LOAD)),o(e).then(e=>(e&&(e.calendar.firstDayOfWeek=a.r5d[e.calendar.firstDayOfWeek]),t((0,u.aU)((0,u.ok)(d.LOCALE_SETTINGS_LOAD),{localeSettings:e})),{localeSettings:e})).catch(e=>{let n=(0,c.Gt)(e);(0,p.K)(n,[a.oji.NotFound])?t((0,u.aU)((0,u.cI)(d.LOCALE_SETTINGS_LOAD))):(t((0,u.aU)((0,u.bG)(d.LOCALE_SETTINGS_LOAD),e)),t((0,u.aU)((0,u.ok)(l.Z.APP_ERROR),{error:e})))})):Promise.resolve(null)})},h={getLocaleSettings:(e,t)=>i.get(e,["locale","byLocale",t],{}),isLocaleLoading:e=>i.get(e,["locale","isLoading"])}},220854:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return p},Ys:function(){return m}});var r=n(276635),i=n(715729),s=n(550161),o=n(408027),a=n(491288);let l={DOMAINS_LOAD:"lti.domains.load",DOMAIN_CREATE:"lti.domain.create"};var u=n(176726);let d=(e,t)=>{let n=Object.keys(e.views).find(n=>{let i=e.views[n];return(0,r.isEqual)(i.query,t)});return{id:n,view:n?e.views[n]:null}},c=()=>["views"],p=(0,s.Lq)({views:{},byDomainId:{}},{[l.DOMAINS_LOAD]:(0,s.Li)(d,c),[(0,s.bG)(l.DOMAINS_LOAD)]:(0,s.HT)(d,c),[(0,s.ok)(l.DOMAINS_LOAD)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{t.data.results.forEach(t=>{e.byDomainId[t.id]=t})});return(0,s.NV)(n,t,{viewResolver:d,viewsPathResolver:c,paging:t.data.paging,values:t.data.results.map(e=>e.id)})}}),E={loadDomains:e=>(0,s.c3)(async t=>{try{t((0,s.aU)(l.DOMAINS_LOAD,{query:e}));let n=await (0,o.QK1)(a.nP,e);return t((0,s.aU)((0,s.ok)(l.DOMAINS_LOAD),{query:e,data:n})),{query:e,data:n}}catch(n){throw t((0,s.aU)((0,s.bG)(l.DOMAINS_LOAD),{query:e,error:n})),n}}),createDomain:e=>(0,s.c3)(async t=>{try{t((0,s.aU)(l.DOMAIN_CREATE,{data:e}));let n=await (0,o.rjU)(a.nP,e);return t((0,s.aU)((0,s.ok)(l.DOMAIN_CREATE),{data:n})),n}catch(e){throw t((0,s.aU)((0,s.bG)(l.DOMAIN_CREATE),e)),e}})},m={shouldLoadView:(e,t)=>{let n=d(e.ltiDomain,t);return!n.view||!n.view.isValid&&!n.view.isLoading},domains:(0,u.U)((e,t)=>{var n,r,i;let s=d(e.ltiDomain,t);return null!==(i=null===(r=null===(n=s.view)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(t=>e.ltiDomain.byDomainId[t]))&&void 0!==i?i:[]},e=>e)}},788652:function(e,t,n){"use strict";n.d(t,{Nw:function(){return h},I6:function(){return E},Ys:function(){return m}});var r=n(276635),i=n(715729),s=n(550161),o=n(408027),a=n(491288);let l={PLACEMENTS_LOAD:"lti.placements.load",PLACEMENT_CREATE:"lti.placement.create"};var u=n(830095),d=n(176726);let c=(e,t)=>{let n=Object.keys(e.views).find(n=>{let i=e.views[n];return(0,r.isEqual)(i.query,t)});return{id:n,view:n?e.views[n]:null}},p=()=>["views"],E=(0,s.Lq)({views:{},byPlacementId:{}},{[l.PLACEMENTS_LOAD]:(0,s.Li)(c,p),[(0,s.bG)(l.PLACEMENTS_LOAD)]:(0,s.HT)(c,p),[(0,s.ok)(l.PLACEMENTS_LOAD)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{t.data.results.forEach(t=>{e.byPlacementId[t.id]=t})});return(0,s.NV)(n,t,{viewResolver:c,viewsPathResolver:p,paging:t.data.paging,values:t.data.results.map(e=>e.id)})}}),m={shouldLoadView:(e,t)=>{let n=c(e.ltiPlacement,t);return!n.view||!n.view.isValid&&!n.view.isLoading},getPlacementsByQuery:(0,d.U)((e,t)=>{var n,r,i;let s=c(e.ltiPlacement,t);return null!==(i=null===(r=null===(n=s.view)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(t=>e.ltiPlacement.byPlacementId[t]))&&void 0!==i?i:[]},e=>e),getPlacementById:(e,t)=>e.ltiPlacement.byPlacementId[t]},h={loadPlacements:e=>(0,s.c3)(async(t,n)=>{if(!m.shouldLoadView(n(),e))return{query:e,data:m.getPlacementsByQuery(n(),e)};try{t((0,s.aU)(l.PLACEMENTS_LOAD,{query:e}));let n=await (0,o.yZB)(a.nP,e);return t((0,s.aU)((0,s.ok)(l.PLACEMENTS_LOAD),{query:e,data:n})),{query:e,data:n}}catch(n){throw t((0,s.aU)((0,s.bG)(l.PLACEMENTS_LOAD),{query:e,error:n})),t((0,s.aU)((0,s.ok)(u.Z.APP_ERROR),{error:n})),n}}),createPlacement:e=>(0,s.c3)(async t=>{try{t((0,s.aU)(l.PLACEMENT_CREATE,{data:e}));let n=await (0,o._Bo)(a.nP,e);t((0,s.aU)((0,s.ok)(l.PLACEMENT_CREATE),{data:n}))}catch(e){t((0,s.aU)((0,s.bG)(l.PLACEMENT_CREATE),e))}})}},237368:function(e,t,n){"use strict";n.d(t,{Nw:function(){return h},I6:function(){return m},Ys:function(){return b}});var r=n(715729),i=n(550161),s=n(846409);let o=e=>{let t={};return e.forEach(e=>{let n=e.context.toString()+"_"+e.source+"_"+e.event;t[n]?t[n].distributionMethods.push({method:e.method,isEnabled:e.isEnabled,isEditable:e.isEditable}):t[n]={context:e.context,source:e.source,event:e.event,distributionMethods:[{method:e.method,isEnabled:e.isEnabled,isEditable:e.isEditable}]}}),Object.values(t)},a=e=>{let t=[];return e.forEach(e=>{e.distributionMethods&&e.distributionMethods.forEach(n=>{let r={context:e.context,source:e.source,event:e.event,...n};t.push(r)})}),t},l=e=>{let t=e.courseId||"",n=e.ownerId||"";return e.context.toString()+"_"+e.source+"_"+e.event+"_"+e.method+"_"+t+"_"+n},u=e=>e.reduce((e,t)=>(e[l(t)]=t,e),{}),d="/public/v1/administration/notifications/settings";async function c(){let e=await (0,s.U2)((0,s.Q2)(d,{})),t=e.results;for(;e.paging&&e.paging.nextPage;)e=await (0,s.U2)("/"+e.paging.nextPage.split("/").slice(3).join("/")),t=t.concat(e.results);return{notificationMethodSettings:u(a(t))}}async function p(e){let t=await (0,s.r$)((0,s.Q2)(d,{}),o(e)),n=t.results;return{notificationMethodSettings:u(a(n))}}let E={NOTIFICATION_METHOD_SETTINGS_LOAD_ALL:"notification.method.settings.load.all",NOTIFICATION_METHOD_SETTINGS_MULTIPLE_UPDATE:"notification.method.settings.multiple.update"},m=(0,i.Lq)({byId:{},isLoading:!1},{[E.NOTIFICATION_METHOD_SETTINGS_LOAD_ALL]:i.K4,[(0,i.ok)(E.NOTIFICATION_METHOD_SETTINGS_LOAD_ALL)]:(e,t)=>{let n=e;return t.notificationMethodSettings&&(n=(0,r.ZP)(n,e=>{Object.entries(t.notificationMethodSettings).forEach(t=>{e.byId[t[0]]=t[1]})})),(0,i.f2)(n,t)},[(0,i.bG)(E.NOTIFICATION_METHOD_SETTINGS_LOAD_ALL)]:i.sT,[E.NOTIFICATION_METHOD_SETTINGS_MULTIPLE_UPDATE]:(e,t)=>{let{toUpdate:n}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{e.byId[l(t)]||(e.byId[l(t)]={}),e.byId[l(t)].api||(e.byId[l(t)].api={}),e.byId[l(t)].api.isUpdating=!0})})},[(0,i.ok)(E.NOTIFICATION_METHOD_SETTINGS_MULTIPLE_UPDATE)]:(e,t)=>{let{notificationMethodSettings:n}=t;return(0,r.ZP)(e,e=>{Object.entries(n).forEach(t=>{e.byId[t[0]]=t[1],e.byId[t[0]].api||(e.byId[t[0]].api={}),e.byId[t[0]].api.isUpdating=!1})})},[(0,i.bG)(E.NOTIFICATION_METHOD_SETTINGS_MULTIPLE_UPDATE)]:(e,t)=>{let{toUpdate:n}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{e.byId[l(t)]||(e.byId[l(t)]={}),e.byId[l(t)].api||(e.byId[l(t)].api={}),e.byId[l(t)].api.isUpdating=!1})})}}),h={loadAdminNotificationMethodSettings:()=>(0,i.PH)(E.NOTIFICATION_METHOD_SETTINGS_LOAD_ALL,e=>g(e())?c():Promise.resolve(null)),persistAdminNotificationMethodSettings:e=>(0,i.PH)(E.NOTIFICATION_METHOD_SETTINGS_MULTIPLE_UPDATE,()=>p(e).then(e=>({...e})).catch(t=>{throw{toUpdate:e,err:t}}),{toUpdate:e})},b={getAdminNotificationMethodSettings:e=>Object.values(e.notificationMethodSetting.byId).filter(e=>!e.courseId&&!e.ownerId),isLoading:e=>e.notificationMethodSetting.isLoading},g=e=>0===b.getAdminNotificationMethodSettings(e).length},955370:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a},Ys:function(){return u}});var r=n(715729),i=n(550161);let s={PARTNER_CLOUD_SETTINGS_LOAD:"partner.cloud.settings.load"};var o=n(12402);let a=(0,i.Lq)({byId:{},isLoading:!1},{[s.PARTNER_CLOUD_SETTINGS_LOAD]:i.K4,[(0,i.ok)(s.PARTNER_CLOUD_SETTINGS_LOAD)]:(e,t)=>{let{providerId:n,settings:s}=t,o=e;return n&&s&&(o=(0,r.ZP)(e,e=>{e.byId[n]={settings:s}})),(0,i.f2)(o,t)},[(0,i.bG)(s.PARTNER_CLOUD_SETTINGS_LOAD)]:i.sT}),l={loadProviderSettings:e=>(0,i.PH)(s.PARTNER_CLOUD_SETTINGS_LOAD,t=>{var n;return(n=t(),u.getProviderSettingsById(n,e))?Promise.resolve(null):(0,o.iyb)(e).then(t=>({providerId:e,settings:t}))})},u={getProviderSettingsById:(e,t)=>{var n;return null===(n=e.partnerCloud.byId[t])||void 0===n?void 0:n.settings}}},843376:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return d},Ys:function(){return p}});var r=n(715729),i=n(550161),s=n(846409);async function o(){let e=await (0,s.U2)("/public/v1/proctoring/services");return e.results}var a=n(408027);let l={PROCTORING_SERVICES_LOAD:"proctoringServices.load"},u=e=>e.reduce((e,t)=>({...e,[t.handle]:t}),{}),d=(0,i.Lq)({byHandle:{},isLoading:!1},{[l.PROCTORING_SERVICES_LOAD]:i.K4,[(0,i.ok)(l.PROCTORING_SERVICES_LOAD)]:(e,t)=>{let{proctoringServices:n}=t;if(null===n)return(0,i.f2)(e,t);let s=(0,r.ZP)(e,e=>{e.byHandle=n});return(0,i.f2)(s,t)},[(0,i.bG)(l.PROCTORING_SERVICES_LOAD)]:i.sT}),c={loadProctoringServices:()=>(0,i.PH)(l.PROCTORING_SERVICES_LOAD,async e=>{if(0!==Object.keys(e().proctoringServices.byHandle).length)return Promise.resolve({proctoringServices:p.getProctoringServices(e())});try{let e=await o(),t=u(e);return{proctoringServices:t}}catch(e){throw{err:e}}}),setProctoringServicesInStore:e=>(0,i.aU)((0,i.ok)(l.PROCTORING_SERVICES_LOAD),{proctoringServices:u(e)})},p={getAvailableProctoringServices:e=>{let t=e.proctoringServices.byHandle;return Object.values(t).filter(e=>e.availability.available===a.y67.Yes)},getProctoringServices:e=>Object.values(e.proctoringServices.byHandle)}},676285:function(e,t,n){"use strict";n.d(t,{I6:function(){return a},Nw:function(){return l},Ys:function(){return u}});var r=n(715729),i=n(276635),s=n(550161),o=n(207564);let a=(0,s.Lq)({isLoading:!1,byId:{}},{[o.V.QUESTION_DETAILS_LOAD]:s.K4,[(0,s.ok)(o.V.QUESTION_DETAILS_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{questionDetails:n}=t;e.byId=n});return(0,s.f2)(n,t)},[(0,s.bG)(o.V.QUESTION_DETAILS_LOAD)]:s.sT}),l={},u={getByAnalysisId:(e,t)=>i.filter(e.questionAnalysis.questionDetails.byId,{analysisId:t})}},207564:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={QUESTION_DETAILS_LOAD:"question-analysis.question-details.load"}},127613:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return p},Ys:function(){return m}});var r=n(715729),i=n(276635),s=n(550161),o=n(830095),a=n(207564),l=n(408027),u=n(12402),d=n(771300);let c={REPORTS_LOAD:"question-analysis.reports.load",REPORT_CREATE:"question-analysis.reports.create"},p=(0,s.Lq)({byId:{},isLoading:!1},{[c.REPORTS_LOAD]:s.K4,[(0,s.ok)(c.REPORTS_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{reports:n}=t;e.byId=n});return(0,s.f2)(n,t)},[(0,s.bG)(c.REPORTS_LOAD)]:s.sT,[(0,s.ok)(c.REPORT_CREATE)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{report:n}=t;e.byId[n.id]=n});return(0,s.f2)(n,t)},[(0,s.bG)(c.REPORT_CREATE)]:s.sT}),E={fetchReports:(e,t)=>(0,s.c3)((n,r)=>(n((0,s.aU)(c.REPORTS_LOAD)),(0,u.RC3)(e,t).then(e=>{n((0,s.aU)((0,s.ok)(c.REPORTS_LOAD),e)),n((0,s.aU)((0,s.ok)(a.V.QUESTION_DETAILS_LOAD),e))}).catch(e=>{n((0,s.aU)((0,s.ok)(o.Z.APP_ERROR),{error:e})),n((0,s.aU)((0,s.bG)(c.REPORTS_LOAD))),n((0,s.aU)((0,s.bG)(a.V.QUESTION_DETAILS_LOAD)))}))),fetchReport:(e,t)=>(0,s.c3)((n,r)=>!function(e,t){let n=m.getMostRecentByAssessmentId(e,t);return!h(e)&&(null==n||n.analysisReportDetails.state===l.dPk.InProgress)}(r(),t)?Promise.resolve(null):(n((0,s.aU)(c.REPORTS_LOAD)),(0,u.OH6)(e,t).then(e=>(n((0,s.aU)((0,s.ok)(c.REPORTS_LOAD),e)),n((0,s.aU)((0,s.ok)(a.V.QUESTION_DETAILS_LOAD),e)),{...e})).catch(e=>{n((0,s.aU)((0,s.ok)(o.Z.APP_ERROR),{error:e})),n((0,s.aU)((0,s.bG)(c.REPORTS_LOAD))),n((0,s.aU)((0,s.bG)(a.V.QUESTION_DETAILS_LOAD)))}))),fetchMultipleReports:(e,t)=>(0,s.c3)((n,r)=>h(r())?Promise.resolve(null):(n((0,s.aU)(c.REPORTS_LOAD)),(0,u.KFz)(e,t).then(e=>(n((0,s.aU)((0,s.ok)(c.REPORTS_LOAD),e)),n((0,s.aU)((0,s.ok)(a.V.QUESTION_DETAILS_LOAD),e)),{...e})).catch(e=>{n((0,s.aU)((0,s.ok)(o.Z.APP_ERROR),{error:e})),n((0,s.aU)((0,s.bG)(c.REPORTS_LOAD))),n((0,s.aU)((0,s.bG)(a.V.QUESTION_DETAILS_LOAD)))}))),generateReport:(e,t)=>(0,s.PH)(c.REPORT_CREATE,()=>(0,u.OEz)(e,t).then(e=>({...e})).catch(e=>{throw{err:(0,d.xh)(e)}}))},m={getById:(e,t)=>i.find(e.questionAnalysis.reports.byId,{id:t}),getMostRecentByAssessmentId:(e,t)=>{let n=i.filter(e.questionAnalysis.reports.byId,{assessmentId:t});return i.reduce(n,(e,t)=>{let n=e.analysisReportDetails.executionTimeStamp,r=t.analysisReportDetails.executionTimeStamp;return null==e||r>n?t:e})},getByCourseId:(e,t)=>i.filter(e.questionAnalysis.reports.byId,{courseId:t})};function h(e){return e.questionAnalysis.reports.isLoading}},489785:function(e,t,n){"use strict";n.d(t,{Nw:function(){return f},I6:function(){return b},Ys:function(){return I}});var r=n(715729),i=n(550161),s=n(560985);let o=e=>e.questionAttempt.questionAttemptsById,a=(0,s.P1)(o,(e,t)=>t,(e,t)=>e[t]),l=(0,s.P1)(o,(e,t)=>e.questionAttempt.questionAttemptsByAttemptIds[t],(e,t)=>null==t?void 0:t.map(t=>e[t]));var u=n(408027),d=n(642768),c=n(610590),p=n(86604);let E=(e,t)=>{let n=(e,t,n)=>{if(!t||!n)return;let r=e.questionAttemptsByAttemptIds[t];if(r){let e=r.includes(n);e||r.push(n)}else e.questionAttemptsByAttemptIds[t]=[n]};"groupAttemptId"in t&&n(e,t.groupAttemptId,t.id),n(e,t.attemptId,t.id)},m=(e,t)=>(0,r.ZP)(e,e=>{t.forEach(t=>{var n;let r=e.questionAttemptsById[t.id];E(e,t),!t.questionType&&(null===(n=t.question)||void 0===n?void 0:n.questionType)&&(t.questionType=t.question.questionType),e.questionAttemptsById[t.id]={...r,...t}})}),h=(e,t)=>({...e,id:e.id||"",attemptId:t||""}),b=(0,i.Lq)({questionAttemptsById:{},questionAttemptsByAttemptIds:{}},{[(0,i.ok)(c.V.QUESTION_ATTEMPT_SET)]:(e,t)=>{let{data:n}=t;return m(e,[n])},[(0,i.ok)(c.V.QUESTION_ATTEMPTS_SET)]:(e,t)=>{let{data:n}=t;return m(e,n)},[(0,i.ok)(c.V.QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{data:n}=t;return m(e,[n])},[p.V.GRADED_QUESTION_ATTEMPTS_LOAD]:i.K4,[(0,i.ok)(p.V.GRADED_QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{results:n,attemptId:r}=t.data;return m(e,n.map(e=>h(e.questionAttempt,r)))},[(0,i.ok)(p.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(e,t)=>{let{data:{results:n}}=t;return m(e,(n||[]).map((e,t)=>h(e.questionAttempt,n[t].questionAttempt.attemptId)))},[(0,i.ok)(c.V.QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return m(e,n)},[(0,i.ok)(c.V.QUESTION_ATTEMPTS_PERSIST)]:(e,t)=>{let{data:n}=t,r=Object.values(n).filter(e=>e.isOk).map(e=>e.result);return m(e,r)}}),g=(e,t,n,r)=>{let i=n.map(t=>{if((null==t?void 0:t.id)===void 0)throw Error("no attempt id present");let n=I.getQuestionAttemptById(e(),t.id);return{questionType:n.questionType,attemptId:n.attemptId,...t}});return(0,d.Ay)(r,i)},f={loadQuestionAttemptsByAttemptId:(e,t)=>(0,i.PH)(c.V.QUESTION_ATTEMPTS_LOAD,()=>(0,d.Bj)(t,e).then(t=>{if(t.results.length<1||t.results[0].attemptId===e)return{data:t};let n=t.results.map(t=>({...t,groupAttemptId:t.attemptId,attemptId:e}));return{data:{...t,results:n}}}).catch(e=>{throw{err:e}})),setQuestionAttemptInStore:e=>(0,i.aU)((0,i.ok)(c.V.QUESTION_ATTEMPT_SET),{data:e}),setQuestionAttemptsInStore:e=>(0,i.aU)((0,i.ok)(c.V.QUESTION_ATTEMPTS_SET),{data:e}),persistQuestionAttempts:(e,t)=>(0,i.PH)(c.V.QUESTION_ATTEMPTS_PERSIST,(n,r)=>g(n,r,e,t),{data:e}),markQuestionAttemptsMovedOn(e,t){let n=e.map(e=>({id:e,attemptStatus:u.I$9.InProgress}));return this.persistQuestionAttempts(n,t)}},I={getQuestionAttemptById:a,getQuestionAttemptsByAttemptId:l}},610590:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={QUESTION_ATTEMPT_PERSIST:"question.attempt.persist",QUESTION_ATTEMPT_SET:"question.attempt.set",QUESTION_ATTEMPTS_LOAD:"question.attempts.load",QUESTION_ATTEMPTS_SET:"question.attempts.set",QUESTION_ATTEMPTS_PERSIST:"question.attempts.persist"}},58405:function(e,t,n){"use strict";n.d(t,{Nw:function(){return C},I6:function(){return A},Ys:function(){return v}});var r=n(715729),i=n(550161),s=n(642768),o=n(86604),a=n(560985),l=n(715655),u=n(337767),d=n(276635),c=n.n(d);let p=e=>["views","byQuestionId",e.questionId],E=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byQuestionId[t.questionId];if(!n)return{id:null,view:null};let r=Object.keys(n).find(e=>{let r=n[e],i=["assessmentId","courseId","questionId","paging"];return c().isEqual(c().pick(r.query,i),c().pick(t,i))});return{id:null!=r?r:null,view:r?n[r]:null}},m=(0,a.wN)(l.PW,u.AD);function h(e){return e.allQuestionAttemptGrades[e.questionAttemptId]}let b=e=>e.questionAttemptGrade.questionAttemptGradeById,g=(0,a.P1)(b,(e,t)=>t,(e,t)=>h({questionAttemptId:t,allQuestionAttemptGrades:e})),f=(0,a.P1)(b,(e,t)=>e.questionAttemptGrade.questionAttemptIdsByAttemptIds[t],(e,t)=>null==t?void 0:t.map(t=>h({questionAttemptId:t,allQuestionAttemptGrades:e}))),I=m((e,t)=>t.map(t=>{var n;if(!t)return;let r=E(e.questionAttemptGrade,t);if(null==r?void 0:r.view)return{...r.view,values:(null!==(n=r.view.values)&&void 0!==n?n:[]).map(t=>g(e,t)).filter(e=>!!e)}}),e=>e);var y=n(16529),S=n(60049),T=n(847880);let _=(e,t,n)=>{e.questionAttemptGradeById[t]={...e.questionAttemptGradeById[t]||null,...n}},O=(e,t,n,r=!0)=>{let i=e.questionAttemptIdsByAttemptIds[t];i?-1===i.indexOf(n)&&i.push(n):r&&(e.questionAttemptIdsByAttemptIds[t]=[n])},A=(0,i.Lq)({questionAttemptGradeById:{},views:{byQuestionId:{}},questionAttemptIdsByAttemptIds:{}},{[(0,i.ok)(o.V.GRADED_QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{attemptId:n,results:i}}=t;return(0,r.ZP)(e,e=>{i.forEach(t=>{let r=t.questionAttempt.id;if(!r)throw Error("Graded Question Attempts Load reducer failed: Question attempt has no `id` value");_(e,r,{...t,attemptId:n,questionAttemptId:r}),O(e,n,r)})})},[o.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID]:(0,i.Li)(E,p),[(0,i.bG)(o.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(0,i.HT)(E,p),[(0,i.ok)(o.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(e,t)=>{let{data:{results:n,paging:s,permissions:o}}=t,a=(0,r.ZP)(e,e=>{n.forEach(t=>{let{questionAttempt:n,...r}=t,i=n.id;if(!i)throw Error("Graded Question Attempts Load reducer failed: Question attempt has no `id` value");let s=t.questionAttempt.attemptId;if(!s)throw Error("Graded Question Attempts Load reducer failed: Attempt has no `id` value");_(e,i,{...r,attemptId:s,questionAttemptId:i})})});return(0,i.NV)(a,t,{viewResolver:E,viewsPathResolver:p,paging:s,permissions:o,values:n.map(e=>e.questionAttempt.id).filter(e=>!!e)})},[(0,i.ok)(o.V.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{points:n,questionAttempt:i}=t.data;return(0,r.ZP)(e,e=>{let{id:t,attemptId:r}=i;if(!t||!r)throw Error("Expected question attempt ID and attempt ID on question attmempt object");_(e,t,{points:n,manualPoints:n,attemptId:r,questionAttemptId:t}),O(e,r,t,!1)})}}),C={loadGradedQuestionAttemptsByAttemptId:(e,t,n)=>(0,i.PH)(o.V.GRADED_QUESTION_ATTEMPTS_LOAD,()=>s._p(e,t,n).then(e=>({data:{...e,attemptId:t}}))),updateGradedQuestionAttempt:(e,t,n)=>(0,i.PH)(o.V.GRADED_QUESTION_ATTEMPT_PERSIST,async(r,i)=>{var o;let a=await s.XE(e,t,n),{attemptId:l,questionId:u}=a.questionAttempt;if(!l)throw Error("Expected Attempt ID in question attempt object");let{columnId:d,gradeId:c,assessmentId:p}=T.Ys.getGradebookAttemptByAttemptId(r(),l),E=null!=p?p:d?null===(o=y.Ys.getAssessmentByCourseAndGradableItemId(r(),e,d))||void 0===o?void 0:o.id:void 0;return E&&u&&i(S.Nw.refreshCachedQuestionGradeStatusesByQuestionId(e,E,u)),{data:{...a,columnId:d,gradeId:c}}}),loadGradedQuestionAttemptsByQuestionIdQuery:e=>(0,i.PH)(o.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID,async()=>{let t=await (0,s.ks)(e.courseId,e.assessmentId,e.questionId,{paging:e.paging});return{data:t,query:e}},{query:e})},v={getQuestionAttemptGradesByAttemptId:e=>t=>f(t,e),getQuestionAttemptGradeById:e=>t=>g(t,e),getQuestionAttemptGradesByQuestionIdQuery:(...e)=>t=>I(t,e)}},86604:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GRADED_QUESTION_ATTEMPTS_LOAD:"question.gradedAttempts.load",GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID:"question.gradedAttempts.load.by.questionId",GRADED_QUESTION_ATTEMPT_PERSIST:"question.gradedAttempts.persist"}},677105:function(e,t,n){"use strict";n.d(t,{Nw:function(){return G},I6:function(){return B},Ys:function(){return x}});var r=n(715729),i=n(276635),s=n(550161),o=n(112027),a=n(408027),l=n(299380),u=n(474755),d=n(16529),c=n(316282),p=n(766991),E=n(76701),m=n(830095),h=n(771117),b=n(610590),g=n(560985);let f=(0,g.P1)(e=>e.question.questions,(e,t)=>t,(e,t)=>i.filter(e,{assessmentId:t,questionType:a.QuestionType.PageBreak}));var I=n(86604),y=n(234166),S=n(198022),T=n.n(S),_=n(981533);function O(e){a.QuestionType.Matching===(null==e?void 0:e.questionType)&&e.answers.forEach(e=>{var t;(null===(t=null==e?void 0:e.ui)||void 0===t?void 0:t.id)||(e.ui={...e.ui,id:T().v4()})})}let A=(e,t,n,r)=>{let i=e[t];i?i[n]=r:e[t]={[n]:r}},C=(e,t,n)=>{let r=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]},v=e=>["views","byCourseId",e.courseId],R=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},o=Object.keys(r).find(e=>{let n=r[e];return"questionId"in n.query?"questionId"in t&&t.questionId===n.query.questionId&&t.courseId===n.query.courseId:!("questionId"in t)&&function(e,t){var n,r,s,o,a;let{assessmentId:l,courseId:u,filter:d,paging:c,refreshState:p,useSearch:E}=t,m=i.isEqual(c,e.paging),h=m&&l===e.assessmentId&&u===e.courseId&&p===e.refreshState&&E===e.useSearch;if(!e.filter)return h;if(!h)return!1;let{assessmentIds:b,categoryIds:g,excludeAssessmentIds:f,keywords:I,questionTypes:y}=d;return(!b||!!q(b,null===(n=e.filter)||void 0===n?void 0:n.assessmentIds))&&(!g||!!q(g,null===(r=e.filter)||void 0===r?void 0:r.categoryIds))&&(!f||!!q(f,null===(s=e.filter)||void 0===s?void 0:s.excludeAssessmentIds))&&(!I||!!q(I,null===(o=e.filter)||void 0===o?void 0:o.keywords))&&(!y||!!q(y,null===(a=e.filter)||void 0===a?void 0:a.questionTypes))}(t,n.query)});return o?{id:o,view:r[o]}:s.LW},L=(e,t,n,r)=>{let i=e[t];i?i[n]=r:e[t]={[n]:r}},P=(e,t,n)=>{let r=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]};function N(e,t){var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})}function D(e,t,n){if(!t||!e.views.byCourseId[t])return;let r=Object.values(e.questions).filter(e=>(null==e?void 0:e.assessmentId)&&(null==n?void 0:n.includes(e.assessmentId))).map(e=>null==e?void 0:e.id);(!n||n.length<=0||r.length<=0)&&N(e,t),Object.values(e.views.byCourseId[t]).forEach(e=>{(null==e?void 0:e.values)&&e.values.find(e=>r.includes(e))&&(e.isValid=!1)})}let U=(e,t,n)=>{var r;return null===(r=e.question.copyQuestionsTaskByCourseId[t])||void 0===r?void 0:r[n].queueTask},k=e=>`questionsCopyShowTaskStatus${e.replace(/\_/g,".")}`,w=(e,t)=>({key:k(e),isRequired:!0,value:JSON.stringify({[t.taskId]:!0})}),M=new Set([a.hRl.Complete,a.hRl.CompleteErrors]),B=(0,s.Lq)({copyQuestionsTaskByCourseId:{},fileUploadTasksByCourseId:{},importTasksByCourseId:{},isLoading:!1,paging:null,permissions:null,questions:{},views:{byCourseId:{}}},{[h.V.QUESTION_LOAD]:(0,s.Li)(R,v),[(0,s.ok)(h.V.QUESTION_LOAD)]:(e,t)=>{if(!t||!t.data)return(0,s.f2)(e,t);let{data:n}=t,{paging:o,permissions:a,questionIds:l,questions:u}=n,d=(0,r.ZP)(e,t=>{Object.keys(u).forEach(n=>{let r=e.questions[n],s=i.pickBy({contentId:null==r?void 0:r.contentId,permissions:null==r?void 0:r.permissions,ui:null==r?void 0:r.ui,questionIdsInBlock:null==r?void 0:r.questionIdsInBlock,sourceInfo:null==r?void 0:r.sourceInfo});O(u[n]),t.questions[n]={...u[n],ui:{},...s,api:{isUpdating:!1,isDeleting:!1}}})});return(0,s.NV)(d,t,{viewResolver:R,viewsPathResolver:v,paging:o,permissions:a,values:l})},[(0,s.bG)(h.V.QUESTION_LOAD)]:(0,s.HT)(R,v),[(0,s.ok)(h.V.QUESTION_CREATE)]:(e,t)=>{let n=(0,r.ZP)(e,n=>{let{nextQuestion:r}=t;O(r),"start"!==r.positionAfter&&(r={...r,position:e.questions[r.positionAfter].position+1});let i=e.questions[r.positionAfter]?e.questions[r.positionAfter].position+1:1,s=V(e.questions,r.assessmentId,!0,i);s.questions[r.id]=r,n.questions={...n.questions,...s.questions}});return n},[h.V.QUESTION_PERSIST]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isUpdating:!0}})}),[(0,s.ok)(h.V.QUESTION_PERSIST)]:(e,t)=>(0,r.ZP)(e,n=>{var r;let{prevQuestion:i,question:s}=t;if(!(null==i?void 0:i.id)||!(null==s?void 0:s.id))return;if(O(s),0===i.id.indexOf(o.dc)){let e={...s,api:{isUpdating:!1,isDeleting:!1}};n.questions[s.id]=e,delete n.questions[i.id],N(n,e.courseId);return}let a=e.questions[s.id],l={...s,...a.questionIdsInBlock&&{questionIdsInBlock:a.questionIdsInBlock},...a.sourceInfo&&{sourceInfo:a.sourceInfo},api:{...a.api,isUpdating:!1},...a.ui&&{ui:a.ui}};if((null==i?void 0:i.position)&&(null==l?void 0:l.position)&&i.position!==l.position){let t=l.position<i.position,s=t?l.position:i.position+1,o=t?i.position-1:l.position,a=V(e.questions,null!==(r=null==l?void 0:l.assessmentId)&&void 0!==r?r:"",t,s,o);n.questions={...n.questions,...a.questions}}n.questions={...n.questions,[l.id]:l},N(n,l.courseId)}),[(0,s.bG)(h.V.QUESTION_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isUpdating:!1}})}),[(0,s.ok)(h.V.QUESTIONS_COPY_QUEUED)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,assessmentId:r,queueTask:i}=t;L(e.copyQuestionsTaskByCourseId,n,i.taskId,{queueTask:i,assessmentId:r,questionCount:t.questionCount})}),[(0,s.ok)(h.V.QUESTIONS_COPY_TASK_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r}=t;P(e.copyQuestionsTaskByCourseId,n,r)}),[(0,s.bG)(h.V.QUESTIONS_COPY_TASK_REMOVE)]:(e,t)=>(0,s.sT)(e,t),[h.V.QUESTIONS_COPY_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,n=>{let{courseId:r,queueTask:i}=t;n.copyQuestionsTaskByCourseId[r][i.taskId].queueTask=i;let s=e.copyQuestionsTaskByCourseId[r][i.taskId].queueTask;i.taskStatus!==(null==s?void 0:s.taskStatus)&&M.has(i.taskStatus)&&N(n,t.courseId)}),[(0,s.ok)(h.V.QUESTIONS_COPY)]:(e,t)=>(0,r.ZP)(e,e=>{N(e,t.courseId)}),[h.V.QUESTION_DELETE]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&e.questions[n.id]&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isDeleting:!0}})}),[(0,s.ok)(h.V.QUESTION_DELETE)]:(e,t)=>(0,r.ZP)(e,n=>{var r,s,o;let{prevQuestion:l}=t;if(!(null==l?void 0:l.id))return;let u=(s=e.questions,o=null==l?void 0:l.id,i.filter(s,e=>{let t=a.QuestionType.QuestionBlock===e.questionType;return t&&i.includes(e.questionIdsInBlock,o)})),d=function(e,t){let n={};return e.forEach(e=>{let r=e.questionIdsInBlock&&e.questionIdsInBlock.filter(e=>e!==t),i={...e,questionIdsInBlock:r};n[i.id]=i}),n}(u,null==l?void 0:l.id);n.questions={...n.questions,...d};let c=V(n.questions,null!==(r=null==l?void 0:l.assessmentId)&&void 0!==r?r:"",!1,l.position+1);n.questions={...n.questions,...c.questions};let p=n.questions[l.id];delete n.questions[l.id],N(n,p.courseId)}),[(0,s.bG)(h.V.QUESTION_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isDeleting:!1}})}),[(0,s.ok)(c.V.ASSESSMENT_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{assessmentId:n,courseId:r}=t;D(e,r,n?[n]:[])}),[(0,s.ok)(p.V.CONTENT_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseAssessmentIds:n}=t;n&&Object.keys(n).forEach(t=>{let r=n[t].filter(e=>!!e);D(e,t,r)})}),[(0,s.ok)(p.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>(0,r.ZP)(e,e=>{let{assessmentId:n,courseId:r}=t;D(e,r,n?[n]:[])}),[(0,s.ok)(p.V.CONTENT_IMPORT_COMPLETE)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{N(e,n)})},[h.V.QUESTION_BLOCK_LOAD_QUESTIONS]:s.K4,[(0,s.ok)(h.V.QUESTION_BLOCK_LOAD_QUESTIONS)]:(e,t)=>{let n=(0,r.ZP)(e,n=>{let{questions:r,questionBlockId:i}=t,s=e.questions[i];s||(s={id:i,api:{isUpdating:!1,isDeleting:!1}}),Object.keys(r).forEach(t=>{let i=e.questions[t];O(r[t]),n.questions[t]={...r[t],api:{isUpdating:!1,isDeleting:!1},ui:i&&i.ui},s={...s,questionIdsInBlock:Array.from(new Set([...s.questionIdsInBlock||[],t]))}}),n.questions[s.id]=s});return(0,s.f2)(n,t)},[(0,s.ok)(h.V.QUESTION_BLOCK_DELETE_QUESTION)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n,questionBlockId:r}=t,s=e.questions[r];e.questions[r].questionIdsInBlock=i.without(s.questionIdsInBlock,n.id),N(e,n.courseId)}),[(0,s.ok)(h.V.QUESTION_BLOCK_ADD_QUESTIONS)]:(e,t)=>{let n=(0,r.ZP)(e,n=>{let{questionBlockId:r}=t,i=e.questions[r];i||(i={id:r,api:{isUpdating:!1,isDeleting:!1}}),t.results.forEach(t=>{if(t.isOk){let r=t.result,s=e.questions[r.id];O(r={...r,api:{isUpdating:!1,isDeleting:!1},ui:s&&s.ui}),i={...i,questionIdsInBlock:Array.from(new Set([...i.questionIdsInBlock||[],r.id]))},n.questions={...n.questions,...(0,o.MO)([r,i])},N(n,r.courseId)}})});return(0,s.f2)(n,t)},[(0,s.ok)(h.V.QUESTIONS_FILE_UPLOAD)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n}=t;N(e,n)}),[(0,s.ok)(b.V.QUESTION_ATTEMPT_SET)]:(e,t)=>{let{data:{question:n}}=t;return n?(0,r.ZP)(e,e=>{let t=e.questions[n.id];O(n),e.questions[n.id]={api:{isUpdating:!1,isDeleting:!1},...t,...n}}):e},[(0,s.ok)(b.V.QUESTION_ATTEMPTS_SET)]:(e,t)=>{let{data:n}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{question:n}=t;if(n){let t=e.questions[n.id];O(n),e.questions[n.id]={api:{isUpdating:!1,isDeleting:!1},...t,...n}}})})},[(0,s.ok)(b.V.QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{question:n}=t;O(n);let r=e.questions[n.id];e.questions[n.id]={api:{isUpdating:!1,isDeleting:!1},...r,...n}})})},[(0,s.ok)(I.V.GRADED_QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{questionAttempt:n}=t,{question:r}=n;if(O(r),r){let t=e.questions[r.id];e.questions[r.id]={api:{isUpdating:!1,isDeleting:!1},...t,...r}}})})},[(0,s.ok)(I.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{questionAttempt:n}=t,{question:r}=n;if(r){let t=e.questions[r.id];e.questions[r.id]={...t,...r}}})})},[(0,s.ok)(y.V.QUESTIONS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{question:n}=t;if(n){let t=e.questions[n.id];e.questions[n.id]={...t,...n}}})})},[(0,s.ok)(y.V.QUESTION_BLOCKS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{question:n}=t;if(n){let t=e.questions[n.id];e.questions[n.id]={...t,...n}}})})},[c.V.ASSESSMENT_FILE_UPLOAD_TASK_ADD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r,fileName:i}=t;A(e.fileUploadTasksByCourseId,n,r,{taskId:r,fileName:i,progress:0})}),[c.V.ASSESSMENT_FILE_UPLOAD_TASK_REMOVE]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r}=t;C(e.fileUploadTasksByCourseId,n,r)}),[c.V.ASSESSMENT_FILE_UPLOAD_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r,progress:i,fileLocation:s}=t,o=e.fileUploadTasksByCourseId[n][r];e.fileUploadTasksByCourseId[n][r]={...o,progress:i,fileLocation:s}}),[c.V.ASSESSMENT_IMPORT_TASK_ADD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,queueTask:r}=t;A(e.importTasksByCourseId,n,r.taskId,r)}),[c.V.ASSESSMENT_IMPORT_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,n=>{let{courseId:r,queueTasks:i}=t;i.forEach(i=>{var s;n.importTasksByCourseId[r][i.taskId]=i;let o=null===(s=e.importTasksByCourseId[r])||void 0===s?void 0:s[i.taskId];i.taskStatus!==(null==o?void 0:o.taskStatus)&&M.has(i.taskStatus)&&N(n,t.courseId)})}),[(0,s.ok)(c.V.ASSESSMENT_IMPORT_TASK_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r}=t;C(e.importTasksByCourseId,n,r)}),[E.V.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{N(e,n)})}}),G={loadQuestion:e=>{let{assessmentId:t,courseId:n,questionId:r}=e;return G.loadQuestionById({assessmentId:t,courseId:n,questionId:r})},loadQuestions:e=>{let{assessmentId:t,courseId:n,offset:r,refreshState:i}=e;return G.loadQuestionsByQuery({assessmentId:t,courseId:n,paging:{offset:r,limit:100},refreshState:i})},loadQuestionById:({courseId:e,assessmentId:t,questionId:n})=>(0,s.c3)(r=>{let i={assessmentId:t,courseId:e,questionId:n};return r((0,s.aU)(h.V.QUESTION_LOAD,{query:i})),(0,u.Hy)({assessmentId:t,courseId:e,questionId:n}).then(e=>(r((0,s.aU)((0,s.ok)(h.V.QUESTION_LOAD),{data:{questions:{[e.id]:e},questionIds:[e.id]},query:i})),e)).catch(e=>{throw r((0,s.aU)((0,s.ok)(m.Z.APP_ERROR),{error:e})),r((0,s.aU)((0,s.bG)(h.V.QUESTION_LOAD),{query:i})),e})}),loadQuestionsByQuery:e=>(0,s.c3)(async(t,n)=>{var r;let{view:o}=R(null===(r=n())||void 0===r?void 0:r.question,e);return!function(e,t,n=!1,r){let s=i.isEmpty(x.getQuestionsByCourseId(e,t));if(r)return!r.isLoading&&(s||n);let o=e.question.views.byCourseId[t],a=!1;if(o){let e=Object.keys(o);a=e.some(e=>!0===o[e].isLoading)}return!a&&(s||n)}(n(),e.courseId,null==e?void 0:e.refreshState,o)?Promise.resolve(null):(t((0,s.aU)(h.V.QUESTION_LOAD,{query:e})),(0,u.HC)(e).then(n=>(t((0,s.aU)((0,s.ok)(h.V.QUESTION_LOAD),{data:n,query:e})),{...n})).catch(n=>{throw t((0,s.aU)((0,s.ok)(m.Z.APP_ERROR),{error:n})),t((0,s.aU)((0,s.bG)(h.V.QUESTION_LOAD),{query:e})),n}))}),persistQuestion:(e,t,n)=>(0,s.PH)(h.V.QUESTION_PERSIST,r=>{let i=d.Ys.getAssessmentById(r(),n.assessmentId),s=i?i.courseId:t.courseId;return(0,u.PR)(e,t,{...n,courseId:s}).then(t=>({prevQuestion:e,question:{...t,assessmentId:n.assessmentId,courseId:s}})).catch(t=>{throw{prevQuestion:e,err:t}})},{prevQuestion:e}),createQuestion:(e,t,n,r)=>(0,s.c3)(async(i,o)=>{i((0,s.aU)(h.V.QUESTION_CREATE,{assessmentId:e,positionAfter:t,questionType:n,questionOptions:r}));let a=d.Ys.getAssessmentById(o(),e);return(0,u.CB)(a.id,a.courseId,t,n,r).then(e=>(i((0,s.aU)((0,s.ok)(h.V.QUESTION_CREATE),{nextQuestion:e})),{nextQuestion:e})).catch(e=>{throw i((0,s.aU)((0,s.bG)(h.V.QUESTION_CREATE),e)),i((0,s.aU)((0,s.ok)(m.Z.APP_ERROR),{error:e})),e})}),removeCopyQuestionsTask:(e,t)=>(0,s.PH)(h.V.QUESTIONS_COPY_TASK_REMOVE,async n=>{let r=U(n(),e,t),i=w(e,r);return await (0,_.p)(i),{courseId:e,taskId:t}}),updateCopyTaskStatus:(e,t)=>(0,s.c3)(async n=>{let r=await (0,l.j)(t);return n((0,s.aU)(h.V.QUESTIONS_COPY_TASK_UPDATE,{courseId:e,queueTask:r})),r}),copyQuestionsQueued:(e,t)=>(0,s.PH)(h.V.QUESTIONS_COPY_QUEUED,async()=>{let n=await (0,u._v)(e),r=w(e.courseId,n);return(0,_.p)(r),{courseId:e.courseId,assessmentId:e.assessmentId,queueTask:n,questionCount:t}}),copyQuestions:e=>(0,s.PH)(h.V.QUESTIONS_COPY,async()=>{let{type:t,...n}=await (0,u.DF)(e);return{...n,courseId:e.courseId}}),copyQuestionsCompleted:e=>(0,s.c3)(t=>{t((0,s.aU)((0,s.ok)(h.V.QUESTIONS_COPY),{courseId:e}))}),deleteQuestion:e=>(0,s.PH)(h.V.QUESTION_DELETE,t=>{let n=d.Ys.getAssessmentById(t(),e.assessmentId);return(0,u.Km)(e,{courseId:n.courseId,assessmentId:n.id}).then(()=>({prevQuestion:e})).catch(t=>{throw{prevQuestion:e,err:t}})},{prevQuestion:e}),deleteQuestions:e=>(0,s.c3)((t,n)=>{let r=d.Ys.getAssessmentById(n(),e[0].assessmentId);return(0,u.Ri)(e,{courseId:r.courseId,assessmentId:r.id}).then(n=>{let r=new Map(e.map(e=>[e.id,e]));return Object.keys(n.results).forEach(e=>{let i=n.results[e],o=r.get(i.id);i.isOk?t((0,s.aU)((0,s.ok)(h.V.QUESTION_DELETE),{prevQuestion:o})):t((0,s.aU)((0,s.bG)(h.V.QUESTION_DELETE),{prevQuestion:o}))}),n})}),loadQuestionsFromQuestionBlock:e=>(0,s.c3)((t,n)=>{var r;return n(),t((0,s.aU)(h.V.QUESTION_BLOCK_LOAD_QUESTIONS)),(0,u.ad)(e).then(e=>(t((0,s.aU)((0,s.ok)(h.V.QUESTION_BLOCK_LOAD_QUESTIONS),{...e})),e)).catch(e=>{t((0,s.aU)((0,s.bG)(h.V.QUESTION_BLOCK_LOAD_QUESTIONS),e)),t((0,s.aU)((0,s.ok)(m.Z.APP_ERROR),{error:e}))})}),addQuestionsToQuestionBlock:(e,t)=>(0,s.c3)(async n=>{let r;try{r=await (0,u.qE)(e,t),n((0,s.aU)((0,s.ok)(h.V.QUESTION_BLOCK_ADD_QUESTIONS),r))}catch(e){throw n((0,s.aU)((0,s.bG)(h.V.QUESTION_BLOCK_ADD_QUESTIONS),e)),n((0,s.aU)((0,s.ok)(m.Z.APP_ERROR),{error:e})),e}let{assessmentId:i,courseId:o,questionBlockId:a}=t;return await n(G.loadQuestionById({courseId:o,assessmentId:i,questionId:a})),r}),updateQuestionsInQuestionBlock:(e,t,n,r)=>(0,s.c3)(async i=>{let o;try{o=await (0,u.jG)(e,t,n,r),i((0,s.aU)((0,s.ok)(h.V.QUESTION_BLOCK_UPDATE_QUESTIONS),o))}catch(e){throw i((0,s.aU)((0,s.bG)(h.V.QUESTION_BLOCK_UPDATE_QUESTIONS),e)),i((0,s.aU)((0,s.ok)(m.Z.APP_ERROR),{error:e})),e}return await i(G.loadQuestionById({courseId:e,assessmentId:t,questionId:n})),o}),deleteQuestionFromQuestionBlock:(e,t)=>(0,s.c3)(async n=>{let r={prevQuestion:e,questionBlockId:t.questionBlockId};try{await (0,u.jh)(e,t),n((0,s.aU)((0,s.ok)(h.V.QUESTION_BLOCK_DELETE_QUESTION),r))}catch(e){throw n((0,s.aU)((0,s.bG)(h.V.QUESTION_BLOCK_DELETE_QUESTION),e)),n((0,s.aU)((0,s.ok)(m.Z.APP_ERROR),{error:e})),e}let{assessmentId:i,courseId:o}=t;return await n(G.loadQuestionsByQuery({courseId:o,assessmentId:i})),r}),uploadQuestionsFromFile:e=>(0,s.c3)(async t=>{let{courseId:n,assessmentId:r}=e;t((0,s.aU)(h.V.QUESTIONS_FILE_UPLOAD,{args:e}));try{let i=await (0,u.EX)(e);return t(i.success>0?(0,s.aU)((0,s.ok)(h.V.QUESTIONS_FILE_UPLOAD),{...i,courseId:n,assessmentId:r}):(0,s.aU)((0,s.bG)(h.V.QUESTIONS_FILE_UPLOAD),{...i,courseId:n,assessmentId:r})),i}catch(e){throw t((0,s.aU)((0,s.ok)(m.Z.APP_ERROR),{error:e})),t((0,s.aU)((0,s.bG)(h.V.QUESTIONS_FILE_UPLOAD),{courseId:n,assessmentId:r})),e}})},x={getByQuestionId:(e,t)=>i.find(e.question.questions,{id:t}),getQuestionsByAssessmentId:(e,t)=>i.filter(e.question.questions,{assessmentId:t}),getPageBreakQuestionsByAssessmentId:f,getQuestionByPosition:(e,t)=>i.find(e.question.questions,{position:t}),getQuestionsByContentId:(e,t)=>{let n=d.Ys.getAssessmentByContentId(e,t);return n?i.filter(e.question.questions,{assessmentId:n.id,api:{isDeleting:!1}}):[]},getQuestionsByCourseId:(e,t)=>{let n=d.Ys.getAssessmentsByCourseId(e,t);return i.filter(e.question.questions,e=>i.includes(i.map(n,"id"),e.assessmentId))},getQuestionsByQuery:(e,t)=>{let{view:n}=R(e.question,t);return n?(n.values||[]).map(t=>x.getByQuestionId(e,t)).filter(e=>!!e):[]},getQuestionsByQueries:(e,t)=>{let n=new Set;return t.reduce((t,r)=>{let{view:i}=R(e.question,r);return[...t,...((null==i?void 0:i.values)||[]).map(t=>x.getByQuestionId(e,t)).filter(e=>!(!(null==e?void 0:e.id)||n.has(e.id))&&(n.add(e.id),!0))]},[])},getQuestionViewStatusByQuery:(e,t)=>{var n;let{view:r}=R(e.question,t);return r?{isLoading:r.isLoading,isValid:r.isValid,paging:null!==(n=r.paging)&&void 0!==n?n:null,permissions:r.permissions}:null},getQuestionViewStatusByQueries:(e,t)=>t.reduce((t,n)=>{var r;let{view:i}=R(e.question,n),s=null;return i&&(s={isLoading:i.isLoading,isValid:i.isValid,paging:null!==(r=i.paging)&&void 0!==r?r:null,permissions:i.permissions}),[...t,{query:n,view:s}]},[]),getQuestionsByQuestionBlockId:(e,t)=>{let n=i.find(e.question.questions,{id:t}),r=[];return(null==n?void 0:n.questionIdsInBlock)?(n.questionIdsInBlock.forEach(t=>{let n=e.question.questions[t];n&&r.push(n)}),i.sortBy(r,Z,F)):r},getCopyQuestionsTask:(e,t)=>e.question.copyQuestionsTaskByCourseId[t]};function V(e,t,n,r,s,a=1){var l;let u={questions:{}},d=(l={assessmentId:t,minPosition:r,maxPosition:s},i.filter(i.values(e),e=>{var t;return e.assessmentId===l.assessmentId&&(null===(t=e.id)||void 0===t?void 0:t.indexOf(o.dc))===-1&&e.position>=l.minPosition&&(!l.maxPosition||e.position<=l.maxPosition)}));return d.forEach(t=>{let r=t.id;u.questions[r]={...e[r],position:n?t.position+a:t.position-a}}),u}function q(e,t){return void 0===e&&void 0===t||void 0!==e&&void 0!==t&&(null==e?void 0:e.length)===(null==t?void 0:t.length)&&e.every(e=>t.includes(e))}function Z(e){return parseInt(H(e.id)[0],10)}function F(e){return parseInt(H(e.id)[1],10)}function H(e){return e.split("_").slice(1)}},771117:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={QUESTION_LOAD:"question.load",QUESTION_CREATE:"question.create",QUESTIONS_COPY:"questions.copy",QUESTIONS_COPY_QUEUED:"questions.copy.queued",QUESTIONS_COPY_TASK_ADD:"questions.copyTask.add",QUESTIONS_COPY_TASK_REMOVE:"questions.copyTask.remove",QUESTIONS_COPY_TASK_LOAD:"questions.copyTask.load",QUESTIONS_COPY_TASK_UPDATE:"questions.copyTask.update",QUESTION_PERSIST:"question.persist",QUESTION_DELETE:"question.delete",QUESTIONS_DELETE:"questions.delete",QUESTIONS_FILE_UPLOAD:"questions.upload",QUESTION_BLOCK_ADD_QUESTIONS:"question.block.add.questions",QUESTION_BLOCK_LOAD_QUESTIONS:"question.block.load.questions",QUESTION_BLOCK_DELETE_QUESTION:"question.block.delete.questions",QUESTION_BLOCK_UPDATE_QUESTIONS:"question.block.update.questions"}},60049:function(e,t,n){"use strict";n.d(t,{Nw:function(){return L},I6:function(){return R},Ys:function(){return P}});var r=n(550161),i=n(234166),s=n(715729),o=n(408027),a=n(491288),l=n(276635),u=n.n(l),d=n(560985),c=n(715655),p=n(337767);let E=(0,d.wN)(c.PW,p.yZ);function m(e){return e.allQuestionGradeStatuses[e.asiObjectId]}let h=e=>e.questionGradeStatus.questionGradeStatusByAsiObjectId,b=E((e,t)=>t.reduce((t,n)=>{var r;return{...t,[n]:null===(r=e.questionGradeStatus.questionIdsByQuestionBlockId[n])||void 0===r?void 0:r.ids}},{}),e=>e),g=(e,t)=>{var n;return(null===(n=e.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===n?void 0:n.isLoading)===!0},f=(0,d.P1)(h,(e,t)=>{var n;return null===(n=e.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===n?void 0:n.ids},(e,t)=>Array.isArray(t)?t.map(t=>m({asiObjectId:t,allQuestionGradeStatuses:e})):void 0),I=E((e,t)=>t.reduce((t,n)=>{var r;return{...t,[n]:(null===(r=e.questionGradeStatus.questionIdsByQuestionBlockId[n])||void 0===r?void 0:r.isLoading)===!0}},{}),e=>e),y=E(h,b,(e,t)=>u().mapValues(t,t=>Array.isArray(t)?t.map(t=>m({asiObjectId:t,allQuestionGradeStatuses:e})):void 0)),S=(e,t)=>(0,s.ZP)(e,e=>{e.questionIdsByAssessmentId[t]?e.questionIdsByAssessmentId[t].isLoading=!0:e.questionIdsByAssessmentId[t]={ids:void 0,isLoading:!0}}),T=(e,t,n)=>(0,s.ZP)(e,e=>{C(e,n,t),t.forEach(t=>{A(e,{...t})})}),_=(e,t,n,r)=>(0,s.ZP)(e,e=>{v(e,r,t),t.forEach(t=>{A(e,{...t})})}),O=(e,t,n)=>(0,s.ZP)(e,e=>{e.questionIdsByQuestionBlockId[n]?e.questionIdsByQuestionBlockId[n].isLoading=!0:e.questionIdsByQuestionBlockId[n]={ids:void 0,isLoading:!0}}),A=(e,t)=>{t.id&&(e.questionGradeStatusByAsiObjectId[t.id]={...e.questionGradeStatusByAsiObjectId[t.id]||null,...t})},C=(e,t,n)=>{e.questionIdsByAssessmentId[t]={ids:n.map(e=>e.id).filter(e=>!!e),isLoading:!1}},v=(e,t,n)=>{e.questionIdsByQuestionBlockId[t]={ids:n.map(e=>e.id).filter(e=>!!e),isLoading:!1}},R=(0,r.Lq)({questionGradeStatusByAsiObjectId:{},questionIdsByAssessmentId:{},questionIdsByQuestionBlockId:{}},{[i.V.QUESTIONS_GRADE_STATUS_LOAD]:(e,{assessmentId:t})=>S(e,t),[(0,r.ok)(i.V.QUESTIONS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{assessmentId:n,results:r}}=t;return T(e,r,n)},[i.V.QUESTION_BLOCKS_GRADE_STATUS_LOAD]:(e,{assessmentId:t,questionBlockId:n})=>O(e,t,n),[(0,r.ok)(i.V.QUESTION_BLOCKS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{assessmentId:n,questionBlockId:r,results:i}}=t;return _(e,i,n,r)}}),L={loadQuestionGradeStatusesByAssessmentId:(e,t)=>(0,r.PH)(i.V.QUESTIONS_GRADE_STATUS_LOAD,()=>(0,o.xTX)(a.nP,{courseId:e,assessmentId:t}).then(e=>({data:{...e,assessmentId:t}})),{assessmentId:t}),loadQuestionGradingStatusesByQuestionBlockId:(e,t,n)=>(0,r.PH)(i.V.QUESTION_BLOCKS_GRADE_STATUS_LOAD,()=>(0,o.sPL)(a.nP,{courseId:e,assessmentId:t,questionBlockId:n}).then(e=>({data:{...e,assessmentId:t,questionBlockId:n}})),{assessmentId:t,questionBlockId:n}),refreshCachedQuestionGradeStatusesByQuestionId:(e,t,n)=>(0,r.PH)(i.V.QUESTIONS_GRADE_STATUS_REFRESH,async(r,i)=>{var s,o;let a=r(),l=null!==(o=null===(s=a.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===s?void 0:s.ids)&&void 0!==o?o:[];if(l.includes(n)){await i(L.loadQuestionGradeStatusesByAssessmentId(e,t));return}let u=l.find(e=>{var t;let r=null===(t=a.questionGradeStatus.questionIdsByQuestionBlockId[e])||void 0===t?void 0:t.ids;return null==r?void 0:r.includes(n)});u&&await i(L.loadQuestionGradingStatusesByQuestionBlockId(e,t,u))})},P={getQuestionGradeStatusesByAssessmentId:e=>t=>f(t,e),isQuestionGradeStatusesLoadingByAssessmentId:e=>t=>g(t,e),getQuestionGradeStatusesByQuestionBlockIds:e=>t=>y(t,e),isQuestionGradeStatusesLoadingByQuestionBlockIds:e=>t=>I(t,e)}},234166:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={QUESTIONS_GRADE_STATUS_LOAD:"questions.gradeStatus.load",QUESTION_BLOCKS_GRADE_STATUS_LOAD:"questionsBlocks.gradeStatus.load",QUESTIONS_GRADE_STATUS_REFRESH:"questions.gradeStatus.refresh"}},620698:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return p},Ys:function(){return m}});var r=n(715729),i=n(424851),s=n(830095),o=n(771117);let a={QUESTION_TAG_LOAD:"question.tag.load"};var l=n(550161);let u=(e,t)=>{var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})},d=e=>["views","byCourseId",e.courseId],c=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return"courseId"in n.query&&"courseId"in t&&(null==t?void 0:t.limit)===n.query.limit&&(null==t?void 0:t.offset)===n.query.offset});return{id:i,view:i?r[i]:null}},p=(0,l.Lq)({isLoading:!1,paging:null,permissions:null,questionTags:{},views:{byCourseId:{}}},{[a.QUESTION_TAG_LOAD]:(0,l.Li)(c,d),[(0,l.ok)(a.QUESTION_TAG_LOAD)]:(e,t)=>{let{paging:n,permissions:i,questionTagIds:s,questionTags:o}=t.data,a=(0,r.ZP)(e,e=>{Object.keys(o).forEach(t=>{e.questionTags[t]={...o[t]}})});return(0,l.NV)(a,t,{viewResolver:c,viewsPathResolver:d,paging:n,permissions:i,values:s})},[(0,l.bG)(a.QUESTION_TAG_LOAD)]:(0,l.HT)(c,d),[(0,l.ok)(o.V.QUESTION_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n}=t.prevQuestion;u(e,n)})}),E={loadQuestionTags:e=>(0,l.c3)(t=>(t((0,l.aU)(a.QUESTION_TAG_LOAD,{query:e})),(0,i.k)(e).then(n=>(t((0,l.aU)((0,l.ok)(a.QUESTION_TAG_LOAD),{data:n,query:e})),{...n})).catch(n=>{throw t((0,l.aU)((0,l.ok)(s.Z.APP_ERROR),{error:n})),t((0,l.aU)((0,l.bG)(a.QUESTION_TAG_LOAD),{query:e})),n})))},m={getByTagId:(e,t)=>Object.values(e.questionTag.questionTags).find(e=>e.id===t),getQuestionTagsByQuery:(e,t)=>{let{view:n}=c(e.questionTag,t);return n?(n.values||[]).map(t=>m.getByTagId(e,t)).filter(e=>!!e):[]},getQuestionTagsByQueries:(e,t)=>{let n=new Set;return t.reduce((t,r)=>{let{view:i}=c(e.questionTag,r);return[...t,...((null==i?void 0:i.values)||[]).map(t=>m.getByTagId(e,t)).filter(e=>!(!(null==e?void 0:e.id)||n.has(e.id))&&(n.add(e.id),!0))]},[])},getQuestionTagViewStatusByQuery:(e,t)=>{let{view:n}=c(e.questionTag,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging,permissions:n.permissions}:null},getQuestionTagViewStatusByQueries:(e,t)=>t.reduce((t,n)=>{let{view:r}=c(e.questionTag,n),i=null;return r&&(i={isLoading:r.isLoading,isValid:r.isValid,paging:r.paging,permissions:r.permissions}),[...t,{query:n,view:i}]},[])}},225707:function(e,t,n){"use strict";n.d(t,{Nw:function(){return u},I6:function(){return l},Ys:function(){return d}});var r=n(715729),i=n(900860),s=n(771117);let o={QUESTION_TYPE_LOAD:"question.type.load"};var a=n(550161);let l=(0,a.Lq)({permissions:null,questionTypes:{byCourseId:{}}},{[o.QUESTION_TYPE_LOAD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n}=t,r=e.questionTypes.byCourseId[n];if(r){r.isLoading=!0;return}e.questionTypes.byCourseId[n]={isLoading:!0,isValid:!1,lastFetched:null,paging:null,permissions:null,values:[]}}),[(0,a.ok)(o.QUESTION_TYPE_LOAD)]:(e,t)=>{let{courseId:n,paging:i,permissions:s,questionTypes:o}=t;return(0,r.ZP)(e,e=>{e.questionTypes.byCourseId[n]={isLoading:!1,isValid:!0,lastFetched:new Date,paging:i,permissions:s,values:null!=o?o:[]}})},[(0,a.bG)(o.QUESTION_TYPE_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n}=t;e.questionTypes.byCourseId[n].isLoading=!1}),[(0,a.ok)(s.V.QUESTION_DELETE)]:(e,t)=>(0,r.ZP)(e,n=>{let{courseId:r}=t.prevQuestion;r&&e.questionTypes.byCourseId[r]&&(n.questionTypes.byCourseId[r].isValid=!1)}),[(0,a.ok)(s.V.QUESTION_PERSIST)]:(e,t)=>(0,r.ZP)(e,n=>{let{courseId:r,questionType:i}=t.question,s=r?e.questionTypes.byCourseId[r]:void 0;r&&i&&s&&!s.values.includes(i)&&(n.questionTypes.byCourseId[r].isValid=!1)})}),u={loadQuestionTypes:e=>(0,a.PH)(o.QUESTION_TYPE_LOAD,()=>(0,i.Q)(e).catch(e=>{throw{err:e}}),{courseId:e.courseId})},d={getQuestionTypesByCourseId:(e,t)=>e.questionType.questionTypes.byCourseId[t.courseId]}},967589:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(715729),i=n(550161),s=n(408027),o=n(12402);let a={SESSION_DEBUG_SUBMIT:"sessionDebug.submit",SESSION_DEBUG_RESET_STATE:"sessionDebug.resetState"},l={logCode:"",isUpdating:!1,submissionErrorCode:0},u=(0,i.Lq)(l,{[a.SESSION_DEBUG_SUBMIT]:(e,t)=>(0,r.Uy)(e,e=>{e.isUpdating=!0}),[(0,i.bG)(a.SESSION_DEBUG_SUBMIT)]:(e,t)=>{var n,r;return(0,i.sT)(e,t,{submissionErrorCode:(null===(r=null===(n=null==t?void 0:t.err)||void 0===n?void 0:n.error)||void 0===r?void 0:r.status)||s.oji.BadRequest})},[(0,i.ok)(a.SESSION_DEBUG_SUBMIT)]:(e,t)=>(0,r.Uy)(e,e=>{e.logCode=t.logCode}),[a.SESSION_DEBUG_RESET_STATE]:(e,t)=>(0,r.Uy)(e,e=>{(0,i.o_)(e,l)})}),d={submitSessionDebug:e=>(0,i.PH)(a.SESSION_DEBUG_SUBMIT,()=>(0,o.mTj)(e).catch(e=>{throw{err:e}})),resetSessionDebugState:()=>(0,i.aU)(a.SESSION_DEBUG_RESET_STATE)},c={getLogCode:e=>e.sessionDebug.logCode,isUpdating:e=>e.sessionDebug.isUpdating,getSubmissionErrorCode:e=>e.sessionDebug.submissionErrorCode}},333734:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(715729),i=n(491288),s=n(408027),o=n(550161),a=n(404518);let l={isLoading:!1,previewing:void 0,courseMembershipId:void 0,user:void 0},u=(0,o.Lq)(l,{[a.V.STUDENT_PREVIEW_LOAD]:o.K4,[(0,o.ok)(a.V.STUDENT_PREVIEW_LOAD)]:(e,t)=>{let{studentPreviewInfo:n}=t,i=e;return i=(0,r.ZP)(e,e=>{e.previewing=!!(null==n?void 0:n.previewing),e.user=null==n?void 0:n.user,e.courseMembershipId=null==n?void 0:n.courseMembershipId}),(0,o.f2)(i,t)},[(0,o.bG)(a.V.STUDENT_PREVIEW_LOAD)]:o.sT,[(0,o.ok)(a.V.STUDENT_PREVIEW_EXIT)]:e=>(0,r.ZP)(e,e=>{e.courseMembershipId=l.courseMembershipId,e.previewing=l.previewing,e.user=l.user})}),d={exitStudentPreview:e=>(0,o.c3)(t=>(t((0,o.aU)((0,o.ok)(a.V.STUDENT_PREVIEW_EXIT),{data:{courseId:e}})),Promise.resolve(null))),loadStudentPreviewUser:e=>(0,o.PH)(a.V.STUDENT_PREVIEW_LOAD,t=>{var n;return(n=t(),void 0===c.getIsPreviewing(n))?(0,s.R5$)(i.nP,e).then(e=>({studentPreviewInfo:e})):Promise.resolve({studentPreviewInfo:c.getStudentPreviewUserInfo(t())})})},c={getStudentPreviewUserInfo:e=>{let t={previewing:e.studentPreview.previewing,courseMembershipId:e.studentPreview.courseMembershipId,user:e.studentPreview.user};return t},getIsPreviewing:e=>e.studentPreview.previewing}},404518:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={STUDENT_PREVIEW_EXIT:"studentPreview.exit",STUDENT_PREVIEW_LOAD:"studentPreview.load"}},816785:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return d},Ys:function(){return c}});var r=n(715729),i=n(550161),s=n(408027),o=n(347229),a=n(766991);let l={SUBMISSION_SERVICES_LOAD:"submissionServices.load",SUBMISSION_SERVICE_SAVE:"submissionService.save"};function u(e){let t=e();if(t)return Object.values(t).find(e=>{var t,n;return(null==e?void 0:e.available)&&(null===(n=null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.OriginalityReport)||void 0===n?void 0:n.default)})}let d=(0,i.Lq)({byColumnId:{},isLoading:!1},{[l.SUBMISSION_SERVICES_LOAD]:i.K4,[(0,i.ok)(l.SUBMISSION_SERVICES_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{e.byColumnId={...e.byColumnId,...t.submissionServices}});return(0,i.f2)(n,t)},[(0,i.bG)(l.SUBMISSION_SERVICES_LOAD)]:i.sT,[l.SUBMISSION_SERVICE_SAVE]:i.K4,[(0,i.ok)(l.SUBMISSION_SERVICE_SAVE)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{submissionServices:n}=t;Object.keys(n).forEach(t=>{Object.keys(n[t]||{}).forEach(r=>{e.byColumnId[t][r]=n[t][r]})})});return(0,i.f2)(n,t)},[(0,i.bG)(l.SUBMISSION_SERVICE_SAVE)]:i.sT,[(0,i.ok)(a.V.CONTENT_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{let{contents:n,assessments:r}=t;Object.values(n||{}).forEach(t=>{var n,i;if((null==t?void 0:t.safeAssignOptions)&&(null==t?void 0:t.assessmentId)&&r[t.assessmentId]&&r[t.assessmentId].gradableItemId){let{safeAssignOptions:o}=t,a=r[t.assessmentId].gradableItemId,l=u(()=>{var t;return null===(t=e.byColumnId)||void 0===t?void 0:t[a]});l&&l.uniqueHandle===s._Nl&&(null===(i=null===(n=null==l?void 0:l.capabilities)||void 0===n?void 0:n.OriginalityReport)||void 0===i?void 0:i.enabled)!==(null==o?void 0:o.checkAttempts)&&(l.capabilities.OriginalityReport.enabled=o.checkAttempts,e.byColumnId[a]={[l.uniqueHandle]:l})}})})}),c={getDefaultOriginalityReportSubmissionService:(e,t)=>u(()=>{var n;return null===(n=e.submissionServices.byColumnId)||void 0===n?void 0:n[t]})},p={loadSubmissionServices:(e,t)=>(0,i.PH)(l.SUBMISSION_SERVICES_LOAD,async n=>{var r;if(null===(r=n().submissionServices.byColumnId)||void 0===r?void 0:r[t])return;let i=await (0,o.y)(e,t),s=i.reduce((e,t)=>({...e,[t.uniqueHandle]:t}),{});return{submissionServices:{[t]:s}}},null,[s.oji.Forbidden]),saveSubmissionService:(e,t,n)=>(0,i.PH)(l.SUBMISSION_SERVICE_SAVE,async()=>{let r=await (0,o.G)(e,t,n);return{submissionServices:{[t]:{[r.uniqueHandle]:r}}}})}},749505:function(e,t,n){"use strict";n.d(t,{Nw:function(){return f},I6:function(){return b},Ys:function(){return g}});var r=n(715729),i=n(550161),s=n(846409),o=n(230267),a=n(276635),l=n(408027);class u extends o.Y{constructor(e){super(e,"SystemPreferenceValueMissing")}}let d=e=>{var t,n;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.status)===l.oji.NotFound&&(0,a.includes)(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message,"No value was found for given preference key")?new u(e.error):e},c="/v1/systemPreferences/%key%";async function p(e){try{return await (0,s.U2)((0,s.Q2)(c,e))}catch(e){throw d(e)}}async function E(e){let t=(0,s.Q2)(c,{key:e.key});return(0,s.gz)(t,e)}var m=n(830095);let h={SYSTEM_PREFERENCE_LOAD:"system-preference.load",SYSTEM_PREFERENCE_PERSIST:"system-preference.persist"},b=(0,i.Lq)({systemPreferences:{}},{[h.SYSTEM_PREFERENCE_LOAD]:(e,t)=>(0,r.ZP)(e,e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api.isLoading=!0}),[(0,i.ok)(h.SYSTEM_PREFERENCE_LOAD)]:(e,t)=>{let{systemPreference:n}=t;return(0,r.ZP)(e,e=>{var t;e.systemPreferences[n.key]={...n,api:{isUpdating:!1,isDeleting:!1,isLoading:!1},ui:null===(t=e.systemPreferences[n.key])||void 0===t?void 0:t.ui}})},[(0,i.cI)(h.SYSTEM_PREFERENCE_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api.isLoading=!1}),[(0,i.bG)(h.SYSTEM_PREFERENCE_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api||(e.systemPreferences[t.key].api={}),e.systemPreferences[t.key].api.isLoading=!1}),[h.SYSTEM_PREFERENCE_PERSIST]:(e,t)=>(0,r.ZP)(e,e=>{e.systemPreferences[t.nextSystemPreference.key]||(e.systemPreferences[t.nextSystemPreference.key]={}),e.systemPreferences[t.nextSystemPreference.key].api||(e.systemPreferences[t.nextSystemPreference.key].api={}),e.systemPreferences[t.nextSystemPreference.key].api.isUpdating=!0}),[(0,i.ok)(h.SYSTEM_PREFERENCE_PERSIST)]:(e,t)=>{let{systemPreference:n}=t,i={...n,api:{...e.systemPreferences[n.key].api,isUpdating:!1},ui:e.systemPreferences[n.key]&&e.systemPreferences[n.key].ui};return(0,r.ZP)(e,e=>{e.systemPreferences[i.key]=i})},[(0,i.bG)(h.SYSTEM_PREFERENCE_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{e.systemPreferences[t.nextSystemPreference.key]||(e.systemPreferences[t.nextSystemPreference.key]={}),e.systemPreferences[t.nextSystemPreference.key].api||(e.systemPreferences[t.nextSystemPreference.key].api={}),e.systemPreferences[t.nextSystemPreference.key].api.isUpdating=!1})}),g={getSystemPreferenceByKey:(e,t)=>{var n,r;return null===(r=null===(n=null==e?void 0:e.systemPreference)||void 0===n?void 0:n.systemPreferences)||void 0===r?void 0:r[t]},isSystemPreferenceLoading:(e,t)=>{var n,r;return!!(null===(r=null===(n=g.getSystemPreferenceByKey(e,t))||void 0===n?void 0:n.api)||void 0===r?void 0:r.isLoading)}},f={loadSystemPreference:e=>(0,i.c3)(async(t,n)=>{let{key:r,shouldLoadWhilePending:s}=e;if(!function(e,t,n){let r=!!g.getSystemPreferenceByKey(e,t),i=g.isSystemPreferenceLoading(e,t);return(!r||!!i)&&(!r||n)}(n(),r,s)){let t=g.getSystemPreferenceByKey(n(),e.key);return{systemPreference:t}}t((0,i.aU)(h.SYSTEM_PREFERENCE_LOAD,{key:r}));try{let n=await p(e);return t((0,i.aU)((0,i.ok)(h.SYSTEM_PREFERENCE_LOAD),{key:r,systemPreference:n})),{systemPreference:n}}catch(e){if(e instanceof u)return t((0,i.aU)((0,i.cI)(h.SYSTEM_PREFERENCE_LOAD),{key:r})),null;throw t((0,i.aU)((0,i.bG)(h.SYSTEM_PREFERENCE_LOAD),{key:r})),t((0,i.aU)((0,i.ok)(m.Z.APP_ERROR),{error:e})),e}}),persistSystemPreference:e=>(0,i.PH)(h.SYSTEM_PREFERENCE_PERSIST,()=>E(e).then(e=>({systemPreference:e})).catch(e=>{throw{err:e}}),{nextSystemPreference:e})}},316279:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a}});var r=n(715729),i=n(550161),s=n(277313);let o={THEME_CREATE:"theme.create",THEME_DELETE:"theme.delete"},a=(0,i.Lq)({themes:{byId:{}},paging:null,isLoading:!1},{[(0,i.ok)(o.THEME_CREATE)]:(e,t)=>{let n={...t.theme,api:{isUpdating:!1,isDeleting:!1}};return(0,r.ZP)(e,e=>{e.themes.byId[n.id]=n})},[(0,i.bG)(o.THEME_CREATE)]:i.sT,[o.THEME_DELETE]:(e,t)=>(0,r.ZP)(e,e=>{e.themes.byId[t.id].api.isDeleting=!0}),[(0,i.ok)(o.THEME_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{delete e.themes.byId[t.id]}),[(0,i.bG)(o.THEME_DELETE)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{e.themes.byId[t.id].api.isDeleting=!1});return(0,i.sT)(n,t)}}),l={createTheme:e=>(0,i.PH)(o.THEME_CREATE,()=>(0,s.jG)(e).catch(e=>{throw{err:e}})),deleteTheme:e=>(0,i.PH)(o.THEME_DELETE,()=>(0,s.fR)(e).then(()=>({id:e})).catch(e=>{throw{err:e}}),{id:e})}},843979:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return l},Ys:function(){return u}});var r=n(715729),i=n(276635),s=n(550161),o=n(4281);let a={ULTRA_SETTINGS_LOAD:"ultra-settings.load",ULTRA_SETTINGS_PERSIST:"ultra-settings.persist"},l=(0,s.Lq)({ultraSettings:null,isLoading:!1},{[a.ULTRA_SETTINGS_LOAD]:(e,t)=>(0,s.K4)(e,t),[(0,s.ok)(a.ULTRA_SETTINGS_LOAD)]:(e,t)=>{let{ultraSettings:n}=t,i=(0,r.ZP)(e,e=>{let t={...n,api:{isUpdating:!1}};e.ultraSettings=t});return(0,s.f2)(i,t)},[(0,s.bG)(a.ULTRA_SETTINGS_LOAD)]:(e,t)=>(0,s.sT)(e,t),[a.ULTRA_SETTINGS_PERSIST]:(e,t)=>(0,r.ZP)(e,e=>{let t=e.ultraSettings;e.ultraSettings={...t,api:{...null==t?void 0:t.api,isUpdating:!0}}}),[(0,s.ok)(a.ULTRA_SETTINGS_PERSIST)]:(e,t)=>{let{ultraSettings:n}=t,i=(0,r.ZP)(e,e=>{let t={...n,api:{isUpdating:!1}};e.ultraSettings=t});return(0,s.f2)(i,t)},[(0,s.bG)(a.ULTRA_SETTINGS_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{e.ultraSettings.api.isUpdating=!1})}),u={getUltraSettings:e=>e.ultraSettings,isSettingLoading:e=>(0,i.get)(e,["ultraSettings","isLoading"])},d={loadUltraSetting:()=>(0,s.PH)(a.ULTRA_SETTINGS_LOAD,async e=>{try{let e=await (0,o.X)();return{ultraSettings:e}}catch(e){throw{err:e}}}),persistUltraSettings:e=>(0,s.PH)(a.ULTRA_SETTINGS_PERSIST,()=>(0,o.I)(e).then(e=>({ultraSettings:e})).catch(e=>{throw{err:e}}),{ultraSettings:e})}},333189:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return d},Ys:function(){return c}});var r=n(408027),i=n(715729),s=n(771300),o=n(815006),a=n(830095),l=n(550161);let u={SETTINGS_LOAD:"unsplash.settings.load"};(0,l.ok)(u.SETTINGS_LOAD),(0,l.bG)(u.SETTINGS_LOAD);let d=(0,l.Lq)({settings:{byCourseId:{}}},{[u.SETTINGS_LOAD]:(e,t)=>(0,i.ZP)(e,e=>{let n=t.meta.courseId;e.settings.byCourseId[n]?e.settings.byCourseId[n].isLoading=!0:e.settings.byCourseId[n]={isLoading:!0}}),[(0,l.ok)(u.SETTINGS_LOAD)]:(e,t)=>(0,i.ZP)(e,e=>{e.settings.byCourseId[t.meta.courseId]={value:t.payload.settings,isLoading:!1}}),[(0,l.bG)(u.SETTINGS_LOAD)]:(e,t)=>(0,i.ZP)(e,e=>{let n=t.meta.courseId;e.settings.byCourseId[n]?e.settings.byCourseId[n].isLoading=!1:e.settings.byCourseId[n]={isLoading:!1}})}),c={getSettings:(e,t)=>{var n;return null===(n=e.unsplash.settings.byCourseId[t])||void 0===n?void 0:n.value},isLoadingSettings:(e,t)=>{var n,r;return null!==(r=null===(n=e.unsplash.settings.byCourseId[t])||void 0===n?void 0:n.isLoading)&&void 0!==r&&r}},p={getSettings:e=>(0,l.c3)(async(t,n)=>{if(!(c.isLoadingSettings(n(),e)||c.getSettings(n(),e)))try{let n={type:u.SETTINGS_LOAD,meta:{courseId:e}};t(n);let r=await (0,o.jC)(e),i={type:(0,l.ok)(u.SETTINGS_LOAD),payload:{settings:r},meta:{courseId:e}};t(i)}catch(i){if((0,s.Kn)((0,s.Gt)(i),[r.oji.NotFound])){let n={type:(0,l.ok)(u.SETTINGS_LOAD),payload:{settings:{applicationId:"",available:!1}},meta:{courseId:e}};t(n);return}let n={type:(0,l.bG)(u.SETTINGS_LOAD),meta:{courseId:e}};t(n),t((0,l.aU)((0,l.ok)(a.Z.APP_ERROR),{error:i}))}})}},14857:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={USER_LOAD:"user.load",USER_LOAD_ME:"user.load.me"}},653729:function(e,t,n){"use strict";n.d(t,{Nw:function(){return u},I6:function(){return l},Ys:function(){return d}});var r=n(715729),i=n(408027),s=n(550161),o=n(981533);let a={USER_PREFERENCE_LOAD:"user-preference.load",USER_PREFERENCE_PERSIST:"user-preference.persist"},l=(0,s.Lq)({userPreferences:{},isLoading:!1},{[a.USER_PREFERENCE_LOAD]:(e,t)=>(0,r.Uy)(e,e=>{e.isLoading=!0}),[(0,s.ok)(a.USER_PREFERENCE_LOAD)]:(e,t)=>{let{userPreference:n}=t,r={...e.userPreferences};return r[n.key]={...n,api:{isUpdating:!1,isDeleting:!1},ui:e.userPreferences[n.key]&&e.userPreferences[n.key].ui},(0,s.f2)(e,t,{userPreferences:r})},[(0,s.cI)(a.USER_PREFERENCE_LOAD)]:s.f2,[(0,s.bG)(a.USER_PREFERENCE_LOAD)]:(e,t)=>(0,r.Uy)(e,e=>{e.isLoading=!1}),[a.USER_PREFERENCE_PERSIST]:(e,t)=>(0,r.Uy)(e,e=>{e.userPreferences[t.nextUserPreference.key]||(e.userPreferences[t.nextUserPreference.key]={}),e.userPreferences[t.nextUserPreference.key].api||(e.userPreferences[t.nextUserPreference.key].api={}),e.userPreferences[t.nextUserPreference.key].api.isUpdating=!0}),[(0,s.ok)(a.USER_PREFERENCE_PERSIST)]:(e,t)=>{let{userPreference:n}=t,i={...n,api:{...e.userPreferences[n.key].api,isUpdating:!1},ui:e.userPreferences[n.key]&&e.userPreferences[n.key].ui};return(0,r.Uy)(e,e=>{e.userPreferences[i.key]=i})},[(0,s.bG)(a.USER_PREFERENCE_PERSIST)]:(e,t)=>(0,r.Uy)(e,e=>{e.userPreferences[t.nextUserPreference.key]||(e.userPreferences[t.nextUserPreference.key]={}),e.userPreferences[t.nextUserPreference.key].api||(e.userPreferences[t.nextUserPreference.key].api={}),e.userPreferences[t.nextUserPreference.key].api.isUpdating=!1})}),u={loadUserPreference:e=>(0,s.PH)(a.USER_PREFERENCE_LOAD,t=>{var n,r;if(n=t(),r=e.key,d.getUserPreferenceByKey(n,r)){let n=d.getUserPreferenceByKey(t(),e.key);return Promise.resolve({userPreference:n})}return(0,o._)(e).then(e=>({userPreference:e})).catch(e=>{throw{err:e}})},null,[i.oji.NotFound]),persistUserPreference:(e,t)=>(0,s.PH)(a.USER_PREFERENCE_PERSIST,()=>(0,o.p)(e,t?{userId:t}:void 0).then(e=>({userPreference:e})).catch(t=>{throw{err:t,nextUserPreference:e}}),{nextUserPreference:e})},d={getUserPreferenceByKey:(e,t)=>{var n,r;return null===(r=null===(n=null==e?void 0:e.userPreference)||void 0===n?void 0:n.userPreferences)||void 0===r?void 0:r[t]},isUserPreferenceLoading:e=>{var t;return null===(t=null==e?void 0:e.userPreference)||void 0===t?void 0:t.isLoading}}},685573:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return c},Ys:function(){return E}});var r=n(715729),i=n(550161),s=n(408027),o=n(801674),a=n(771300),l=n(830095);let u={USER_PRONOUNS_LOAD:"user-pronouns.load",USER_PRONOUN_ADD:"user-pronoun.add",USER_PRONOUN_DELETE:"user-pronoun.delete"},d=(e,t)=>(0,r.Uy)(e,n=>{let r={...e.approvedPronounsById},i={...e.pendingPronounsById};t.forEach(e=>{let t={...e,api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}};e.status===s.xN_.Approved?(r[t.id]=t,delete i[t.id]):(i[t.id]=t,delete r[t.id])}),n.approvedPronounsById=r,n.pendingPronounsById=i}),c=(0,i.Lq)({approvedPronounsById:{},pendingPronounsById:{},isLoading:!1},{[u.USER_PRONOUNS_LOAD]:(e,t)=>(0,i.K4)(e,t),[(0,i.ok)(u.USER_PRONOUNS_LOAD)]:(e,t)=>{let n=t.results;return(0,i.f2)(d(e,n),t)},[(0,i.ok)(u.USER_PRONOUN_ADD)]:(e,t)=>{let n=t.pronoun.id?[t.pronoun]:[];return d(e,n)},[(0,i.ok)(u.USER_PRONOUN_DELETE)]:(e,t)=>{let n=t.pronounId;return(0,r.Uy)(e,t=>{let r={...e.approvedPronounsById},i={...e.pendingPronounsById};delete r[n],delete i[n],t.approvedPronounsById=r,t.pendingPronounsById=i})}}),p={loadSystemPronouns:e=>(0,i.PH)(u.USER_PRONOUNS_LOAD,async()=>{try{return await (0,o.n5)(e)}catch(e){throw{err:e}}}),addSystemPronoun:e=>(0,i.c3)(async t=>{let n;try{return t((0,i.aU)(u.USER_PRONOUN_ADD,{pronoun:e})),n=await (0,o.PB)(e),t((0,i.aU)((0,i.ok)(u.USER_PRONOUN_ADD),{pronoun:n})),{pronoun:n}}catch(e){if(e instanceof a.IK)throw e;throw t((0,i.aU)((0,i.ok)(l.Z.APP_ERROR),{error:e})),e}}),deleteSystemPronoun:e=>(0,i.PH)(u.USER_PRONOUN_DELETE,async()=>{try{return await (0,o.hJ)(e),{pronounId:e}}catch(e){throw{err:e}}})},E={getApprovedPronouns:e=>Object.values(e.userPronouns.approvedPronounsById),getPendingPronouns:e=>Object.values(e.userPronouns.pendingPronounsById),getAllPronouns:e=>[...E.getApprovedPronouns(e),...E.getPendingPronouns(e)]}},179155:function(e,t,n){"use strict";n.d(t,{Gt:function(){return a}});var r=n(408027),i=n(426368);let s=e=>!!e&&"object"==typeof e&&("status"in e||"message"in e)&&"number"==typeof e.status,o=e=>{if(!e||"object"!=typeof e||!("type"in e)||"string"!=typeof e.type)return!1;let{type:t}=e;return"api"===t||"runtime"===t},a=e=>e?"object"!=typeof e?{type:"runtime",message:String(e),originalException:e}:o(e)?e:e instanceof r.Hy0?{type:"api",message:e.body.message,status:e.body.status,code:e.body.code,originalException:e}:e instanceof r.srx?{type:"api",message:e.apiError.body.message,status:e.status,code:e.apiError.body.code,originalException:e}:e instanceof i.F?{type:"network",message:e.message,originalException:e}:s(e)?{type:"api",message:e.message,status:e.status,code:e.code,originalException:e}:e instanceof Error?{type:"runtime",message:e.message,originalException:e}:"err"in e&&e.err?a(e.err):"error"in e&&e.error?a(e.error):{type:"runtime",message:"message"in e?String(e.message):"",originalException:e}:null},702028:function(e,t,n){"use strict";n.d(t,{K:function(){return r},n:function(){return i}});let r=(e,t)=>(null==e?void 0:e.type)==="api"&&t.includes(e.status),i=e=>(null==e?void 0:e.type)==="network"},785613:function(e,t,n){"use strict";n.d(t,{RF:function(){return o},jM:function(){return s}});var r=n(408027),i=n(230267);class s extends i.Y{constructor(e){super(e,"AssessmentConflictNotEnoughPeerReviews")}}function o(e){return e.error.status===r.oji.Conflict&&"bb-assessment-conflict-not-enough-peer-reviews"===e.error.code?new s(e.error):e}},839248:function(e,t,n){"use strict";n.d(t,{PG:function(){return d},QK:function(){return p},S6:function(){return o},UP:function(){return c},e9:function(){return u},hm:function(){return l},hq:function(){return a}});var r,i,s=n(230267);(r=i||(i={})).GROUP_ENROLLMENT_EXPIRED_ERROR_CODE="enrollmentEndDateViolation",r.GROUP_IS_FULL_ERROR_CODE="maximumEnrollmentsExceeded",r.SOURCE_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE="sourceGroupContainsAttempt",r.TARGET_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE="targetGroupContainsAttempt",r.SOURCE_GROUP_GRADE_ERROR_CODE="sourceGroupContainsGrade",r.TARGET_GROUP_GRADE_ERROR_CODE="targetGroupContainsGrade";class o extends s.Y{constructor(e){super(e,"GroupEnrollmentExpiredError")}}class a extends s.Y{constructor(e){super(e,"GroupFullError")}}class l extends s.Y{constructor(e){super(e,"TargetGroupSubmittedAttemptError")}}class u extends s.Y{constructor(e){super(e,"SourceGroupSubmittedAttemptError")}}class d extends s.Y{constructor(e){super(e,"SourceGroupGradesError")}}class c extends s.Y{constructor(e){super(e,"TargetGroupGradesError")}}function p(e){var t;switch(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.code){case i.GROUP_ENROLLMENT_EXPIRED_ERROR_CODE:return new o(e.error);case i.GROUP_IS_FULL_ERROR_CODE:return new a(e.error);case i.TARGET_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE:return new l(e.error);case i.SOURCE_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE:return new u(e.error);case i.TARGET_GROUP_GRADE_ERROR_CODE:return new c(e.error);case i.SOURCE_GROUP_GRADE_ERROR_CODE:return new d(e.error);default:return e}}},426368:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});class r extends Error{}},828270:function(e,t,n){"use strict";n.d(t,{xh:function(){return a}});var r=n(276635),i=n(408027),s=n(230267);class o extends s.Y{constructor(e){super(e,"QuestionAnalysisNoSubmittedAttemptsError")}}function a(e){return e.error.status===i.oji.BadRequest&&(r.includes(e.error.message,"Item Analysis can only be run once there are submitted attempts")||r.includes(e.error.message,"There are no questions"))?new o(e.error):e}},230267:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});class r extends Error{constructor(e,t,n){super(n),this.error=e,Object.setPrototypeOf(this,new.target.prototype),this.name=t}}},954135:function(e,t,n){"use strict";n.d(t,{A:function(){return a},I:function(){return o}});var r=n(230267),i=n(276635),s=n(408027);class o extends r.Y{constructor(e){super(e,"UserPronounsUnsafeName")}}let a=e=>{var t,n;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.status)===s.oji.BadRequest&&(0,i.includes)(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.code,s.Vez)?new o(e.error):e}},455217:function(e,t,n){"use strict";n(125107)},758219:function(e,t,n){"use strict";n.d(t,{MO:function(){return o},QN:function(){return i},dc:function(){return r}});let r="new_",i=e=>!!e.id;function s(e,t){return t&&t.id&&(e[t.id]=t),e}function o(e,t){let n=t||s;return e.reduce(n,{})}},623776:function(e,t,n){"use strict";var r=n(408027),i=n(491288);(0,n(487783).W)(r.tq_,i.nP)},348231:function(e,t,n){"use strict";n.d(t,{B:function(){return s}});var r=n(491288),i=n(408027);function s(e){return(0,i.C9P)(r.nP,e)}},972519:function(e,t,n){"use strict";n.d(t,{Ir:function(){return y},JC:function(){return A},Ut:function(){return O},Xi:function(){return h},Y2:function(){return I},YF:function(){return T},oc:function(){return _},p2:function(){return g},p5:function(){return S},s3:function(){return b},wc:function(){return f}});var r=n(276635),i=n(846409),s=n(758219);let o="/v1/courses/%courseId%/journals",a=`${o}/%blogId%`,l=`${o}/%blogId%/entries`,u=`${l}/membership/%assignedUserId%`,d=`${l}/%entryId%`,c=`${d}/comments`,p=`${c}/%commentId%`,E=`${o}/%blogId%/participants`,m=`${o}/%blogId%/summary`;async function h(e){let{courseId:t,blogId:n,expandHasEntries:r,options:s}=e,o=(0,i.Q2)(a,{courseId:t,blogId:n,expand:r?"hasEntries":null}),l=await (0,i.U2)(o,s);return l}async function b(e){let t=function(e){let{courseId:t,paging:n,expand:r,assignedUserId:i,blogId:s}=e,o=n?{limit:n.limit,offset:n.offset}:{};return{...o,assignedUserId:i,blogId:s,courseId:t,expand:r}}(e),{results:n,paging:r,permissions:o}=await (0,i.U2)((0,i.Q2)(u,t));return{byId:(0,s.MO)(n),entriesId:n.map(e=>e.id),paging:r,permissions:o}}async function g(e,t="permissions"){let{courseId:n,blogId:r,nextEntry:o}=e,a=await (0,i.v_)((0,i.Q2)(`${l}?expand=%expand%`,{courseId:n,blogId:r,expand:t}),o);return{byId:(0,s.MO)([a])}}async function f(e){let{courseId:t,blogId:n,nextEntry:o,prevEntry:a}=e,l=(0,i.T8)(a,o);if((0,r.isEmpty)(l))return null;let u=(0,i.Q2)(d,{courseId:t,blogId:n,entryId:null==o?void 0:o.id}),c=await (0,i.r$)(u,o);return{byId:(0,s.MO)([c])}}let I=e=>{let{courseId:t,blogId:n,entryId:r}=e;return(0,i.Od)((0,i.Q2)(d,{courseId:t,blogId:n,entryId:r}))};async function y(e){let{courseId:t,blogId:n,entryId:r,nextComment:s}=e,o=(0,i.Q2)(c,{courseId:t,blogId:n,entryId:r}),a=await (0,i.v_)(o,s);return a}async function S(e){let{courseId:t,blogId:n,entryId:s,nextComment:o,prevComment:a}=e,l=(0,i.T8)(a,o);if((0,r.isEmpty)(l))return null!=a?a:null;let u=(0,i.Q2)(p,{courseId:t,blogId:n,entryId:s,commentId:null==o?void 0:o.id}),d=await (0,i.r$)(u,o);return d}let T=async e=>{let{courseId:t,blogId:n,entryId:r,commentId:s}=e,o=(0,i.Q2)(p,{courseId:t,blogId:n,entryId:r,commentId:s});return(0,i.Od)(o)};async function _(e,t,n,r={}){let{permissions:o,results:a,paging:l}=await (0,i.U2)((0,i.Q2)(c,{courseId:e,blogId:t,entryId:n,...r}));return{paging:l,permissions:o,byId:(0,s.MO)(a)}}async function O(e,t="user"){var n,r;let s=[];e.sortColumn&&e.sortDirection&&s.push({field:e.sortColumn,direction:e.sortDirection});let o={limit:null===(n=e.paging)||void 0===n?void 0:n.limit,offset:null===(r=e.paging)||void 0===r?void 0:r.offset,searchText:e.searchText,submissionStatus:e.submissionStatus,gradingStatus:e.gradingStatus,blogId:e.blogId,courseId:e.courseId,expand:t,sort:(0,i.C4)(s)},{results:a,paging:l}=await (0,i.U2)((0,i.Q2)(E,o));return{paging:l,byCourseMembershipId:a.reduce((e,t)=>(e[t.membershipId]=t,e),{})}}async function A(e,t){let n=await (0,i.U2)((0,i.Q2)(m,{courseId:e,blogId:t}));return{byBlogId:(0,s.MO)([n])}}},822907:function(e,t,n){"use strict";n.d(t,{Q:function(){return o},g:function(){return i}});var r=n(846409);function i(e,t,n){let i=(0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/summary",{courseId:e,columnId:t});return(0,r.U2)(i,n).then(n=>({...n,columnId:t,courseId:e}))}let s="fetchColumnSummaries";async function o(e,t){(0,r.Zt)(s);let n=[];for(let r of t)n.push(i(e,r,{batchKey:s}));return{columnSummaries:(await Promise.all(n)).reduce((e,t)=>(e[t.columnId]=t,e),{})}}},227982:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(846409);async function i(e,t){let n=(0,r.Q2)("/v1/courses/%courseId%/imports",e);return(0,r.v_)(n,t)}},438929:function(e,t,n){"use strict";n.d(t,{Hf:function(){return l},Vv:function(){return a},oi:function(){return d},uH:function(){return u}});var r=n(846409),i=n(758219),s=n(408027),o=n(491288);function a(){return(0,s.LU0)(o.nP).then(e=>({...e,courses:(0,i.MO)(e.results)}))}function l(e,t){let n=(0,r.T8)(e,t);return n.hasOwnProperty("startDate")&&!n.startDate?n.startDate="":n.hasOwnProperty("durationType")&&"DATE_RANGE"===n.durationType&&(n.startDate=t.startDate),n.hasOwnProperty("endDate")&&!n.endDate?n.endDate="":n.hasOwnProperty("durationType")&&"DATE_RANGE"===n.durationType&&(n.endDate=t.endDate),(0,s.TZe)(o.nP,t.id,{...n,id:t.id})}function u(e){return(0,s.WnB)(o.nP,e)}async function d(e){let t=await (0,s.p8Q)(o.nP,e),{STUDENT:n}=t.results;return n}},664045:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(846409);function i(e){return(0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/entitlements",{courseId:e})).then(t=>({entitlements:t.results,courseId:e}))}},939737:function(e,t,n){"use strict";n.d(t,{a:function(){return a},v:function(){return o}});var r=n(408027),i=n(491288),s=n(112027);async function o(e){var t;let{results:n,paging:o}=await (0,r.E8D)(i.nP,e.courseId,null!==(t=e.queryParams)&&void 0!==t?t:{},e.paging);return{logs:(0,s.MO)(n,(e,t)=>(t&&(e[t.logId]=t),e)),logIds:n.map(e=>e.logId),paging:o}}function a(e,t){return(0,r.lzM)(i.nP,e,t)}},25439:function(e,t,n){"use strict";n.d(t,{RB:function(){return o},oN:function(){return a},xN:function(){return s}});var r=n(846409);let i="/v1/courses/%courseId%/preferences/%key%";function s(e){return(0,r.U2)((0,r.Q2)(i,e))}function o(e,t){let n=(0,r.Q2)(i,{courseId:t.courseId,key:e.key});return(0,r.gz)(n,e)}function a(e){return(0,r.Od)((0,r.Q2)(i,e))}},768033:function(e,t,n){"use strict";n.d(t,{f:function(){return s},o:function(){return o}});var r=n(846409);let i="/v1/courses/%courseId%/progress/configuration",s=e=>(0,r.U2)((0,r.Q2)(i,e)),o=(e,t)=>{let n=(0,r.Q2)(i,{courseId:t.courseId});return(0,r.r$)(n,e)}},989399:function(e,t,n){"use strict";n.d(t,{Z:function(){return o},m:function(){return a}});var r=n(408027),i=n(491288),s=n(112027);function o(e,t){return(0,r.yYO)(i.nP,e,t)}async function a(e){var t;let{results:n,paging:o}=await (0,r.J_U)(i.nP,e.courseId,null!==(t=e.queryParams)&&void 0!==t?t:{},e.paging);return{tasks:(0,s.MO)(n,(e,t)=>(t&&(e[t.taskId]=t),e)),tasksIds:n.map(e=>e.taskId),paging:o}}},553387:function(e,t,n){"use strict";n.d(t,{FA:function(){return u},Xg:function(){return d},z9:function(){return l}});var r=n(846409),i=n(112027);let s="/v1/courses/%courseId%/gradebook/columns/%columnId%/grades/%gradeId%/attempts/%attemptId%/stagedAttemptGrades",o=`${s}/%stagedAttemptId%`,a=(e,t)=>{let{paging:n,permissions:r,results:s}=t,o={},a=(0,i.MO)(s,(t,n)=>{let{grader:r,userBeingGraded:i,...s}=n;return s.columnId=e,s.graderId=null==r?void 0:r.id,s.userBeingGradedId=null==i?void 0:i.id,r&&!o[r.id]&&(o[r.id]={...r}),i&&!o[i.id]&&(o[i.id]={...i}),t[n.stagedAttemptId]=s,t});return{paging:n,permissions:r,users:o,byStagedAttemptId:a}},l=async e=>{let{columnId:t}=e,n=await (0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/grader/%userId%/peerReviews",e));return a(t,n)},u=async e=>{let{columnId:t}=e,n=await (0,r.U2)((0,r.Q2)(s,e)),i={results:n.stagedAttemptGrades};return a(t,i)},d=async e=>{let{updatedProperties:t}=e,n={courseId:e.courseId,columnId:e.columnId,gradeId:e.gradeId,attemptId:e.attemptId,stagedAttemptId:e.stagedAttemptId},i=await (0,r.r$)((0,r.Q2)(o,n),t);return{stagedAttempt:i}}},305641:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(408027),i=n(491288);async function s(e,t){var n,s;let o;let a=[],l=t.limit,u=t.offset;do{let{results:d,paging:c}=await (0,r.i8y)(i.nP,e,{...t,limit:l,offset:u});o=null!==(n=null==c?void 0:c.nextPage)&&void 0!==n?n:"",u=(null!==(s=null==c?void 0:c.offset)&&void 0!==s?s:0)+l,a=a.concat(d)}while(o);return{learnExceptionDetails:a}}},830288:function(e,t,n){"use strict";n.d(t,{Vw:function(){return s},Y1:function(){return o},ep:function(){return a}});var r=n(408027),i=n(491288);function s(){return(0,r.j2)(i.nP).then(e=>{let{results:t}=e,n={};return t.forEach(e=>{n[e.flagKey]=e}),{featureFlags:{byKey:n}}})}function o(e){return(0,r.HQE)(i.nP,e.flagKey)}function a(e){return(0,r.CV7)(i.nP,e.flagKey,e)}},624859:function(e,t,n){"use strict";n.d(t,{O:function(){return s},b:function(){return o}});var r=n(491288),i=n(408027);async function s(e,t={},n){return(0,i.WiT)(r.nP,e,t,n)}function o(e,t={},n){return(0,i.ZX5)(r.nP,e,t,n)}},765371:function(e,t,n){"use strict";n.d(t,{GI:function(){return s},TL:function(){return a},ZW:function(){return o},nH:function(){return l},sH:function(){return u}});var r=n(408027),i=n(491288);function s(e,t){return(0,r.wJ)(i.nP,e,t)}function o(e){return(0,r.pjy)(i.nP,e)}async function a(e,t){let{results:n}=await (0,r.DN0)(i.nP,e,t);return{columnId:e.columnId,byCourseMembershipId:n.reduce((e,t)=>(void 0!==t.membershipId&&(e[t.membershipId]=t),e),{})}}async function l(e,t){let{results:n}=await (0,r.v7Q)(i.nP,e,t);return{membershipId:e.membershipId,byColumnId:n.reduce((e,t)=>(e[t.columnId]=t,e),{})}}function u(e){return(0,r.YHn)(i.nP,e)}},150713:function(e,t,n){"use strict";n.d(t,{AN:function(){return a},KV:function(){return l},Oc:function(){return u},gA:function(){return d}});var r=n(846409),i=n(112027),s=n(771300);let o="/v1/courses/%courseId%/gradebook/attempts/%attemptId%";function a(e){let{courseId:t,columnId:n}=e;return(0,r.U2)((0,r.Q2)(o,e)).then(e=>({courseId:t,columnId:n,attempt:e}))}function l(e){let{courseId:t,columnId:n}=e;return(0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/attempts",e)).then(e=>{let{lookup:r,paging:s}=e,o=[],a=[];return r&&Object.values(r).forEach(e=>{e.forEach(e=>{e.deletedAttempt?a.push(e):o.push(e)})}),{courseId:t,columnId:n,byGradebookAttemptId:(0,i.MO)(o),deletedAttempts:a,paging:s}})}async function u(e){let{courseId:t,columnId:n,attemptId:i,payload:s}=e,a=(0,r.Q2)(o,{courseId:t,attemptId:i}),l=await (0,r.r$)(a,s);return l.courseId=t,n&&(l.columnId=n),{attempt:l}}function d(e){return(0,r.v_)((0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/grader/%userId%/users",e),{}).catch(e=>{throw(0,s.RF)(e)})}},413952:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(846409);let i=async e=>{let t=(0,r.Q2)("/v1/courses/%courseId%/gradebook/categories",{courseId:e}),{paging:n,permissions:i,results:s}=await (0,r.U2)(t);return{results:s,paging:n,permissions:i}}},201600:function(e,t,n){"use strict";n.d(t,{Ew:function(){return d},QM:function(){return l},ov:function(){return c},uV:function(){return p},yx:function(){return a}});var r=n(408027),i=n(112027),s=n(491288);function o(e){if(e.localizableTitle){let t=e.localizableTitle.languageKey.replace(/[\W_]+/g,"_").toLowerCase();e.ui={displayTitleKey:`components.services.grade.schema.${t}`}}else e.ui={displayTitle:e.title}}async function a(e,t){let n=await (0,r.YCr)(s.nP,{courseId:e,schemaId:t});return o(n),n}async function l(e,t,n){let a=await (0,r.zpx)(s.nP,{courseId:e},t||n?{offset:t,limit:n}:void 0),{paging:l,permissions:u,results:d}=a;for(let e of d)o(e);return{byId:(0,i.MO)(d),paging:l,permissions:u}}async function u(e,t){let n;let i=t.id;n=i?(0,r.N02)(s.nP,{courseId:e,schemaId:i},t):(0,r.dYx)(s.nP,{courseId:e},t);let a=await n;return o(a),a}async function d(e,t){return u(e,t)}async function c(e,t){return u(e,t)}async function p(e,t){return(0,r.Im$)(s.nP,{courseId:e,schemaId:t})}},742165:function(e,t,n){"use strict";n.d(t,{GT:function(){return o},i7:function(){return l},si:function(){return s},vW:function(){return a}});var r=n(491288),i=n(408027);async function s(e,t,n){return(0,i.uVV)(r.nP,e,t,n)}async function o(e,t,n){return(0,i.C0A)(r.nP,e,t,n)}async function a(e,t,n){return(0,i.MQp)(r.nP,e,t,n)}async function l(e,t){return(0,i.lZD)(r.nP,e,t)}},916225:function(e,t,n){"use strict";n.d(t,{GN:function(){return d},N3:function(){return o},Vb:function(){return l},gM:function(){return s},k9:function(){return a},yL:function(){return u}});var r=n(846409);let i="/v1/brands";async function s(e){let t=await (0,r.U2)(`${i}/${e}`);return c({},t)}async function o(e=1e3){let{results:t,paging:n}=await (0,r.U2)((0,r.Q2)(i,{limit:e})),s=t.reduce(c,{});return{...s,paging:n}}async function a(e=1e3){let{results:t,paging:n}=await (0,r.U2)((0,r.Q2)(`${i}/hosts`,{limit:e})),s=t.map(e=>e.hostname);return{hostnames:s,paging:n}}async function l(e){let t=await (0,r.v_)(`${i}`,{...e});return c({},t)}async function u(e,t){let n=await (0,r.gz)(`${i}/${e}`,{...t});return c({},n)}async function d(e){return(0,r.Od)(`${i}/${e}`)}function c(e,t){let{ultraBranding:n,brandAssociations:r}=t,i=n.id;return e.institutionBrands||(e.institutionBrands={byId:{}}),e.brandAssociations||(e.brandAssociations={byId:{}}),e.institutionRoles||(e.institutionRoles={}),e.institutionBrands.byId[i]={...n,id:n.id},r.forEach(t=>{let{institutionRole:n,hostName:r}=t,s={id:t.id,brandId:i};r&&(s.hostName=r),n&&(e.institutionRoles[n.roleId]={...n,id:n.roleId},s.institutionRoleId=n.roleId),e.brandAssociations.byId[t.id]=s}),e}},425750:function(e,t,n){"use strict";n.d(t,{B:function(){return o},pS:function(){return s}});var r=n(846409);let i="/v1/roles/institutionRoles";async function s(e){let{result:t}=await (0,r.U2)(`${i}/${e}`);return t}async function o(e=1e3){let{results:t,institutionId:n,paging:s}=await (0,r.U2)((0,r.Q2)(i,{limit:e}));return{institutionId:n,institutionRoles:{byId:t.reduce((e,t)=>(e[t.roleId]={id:t.roleId,...t},e),{})},paging:s}}},325570:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var r=n(408027),i=n(491288);async function s(e){return(0,r.hVK)(i.nP,e)}},642768:function(e,t,n){"use strict";n.d(t,{Ay:function(){return o},Bj:function(){return a},XE:function(){return u},_p:function(){return l},ks:function(){return d}});var r=n(491288),i=n(408027),s=n(758219);async function o(e,t){let n=await (0,i.AzN)(r.nP,e,t),o=(0,s.MO)(n);return{data:o}}function a(e,t){return(0,i.wZ_)(r.nP,{courseId:e,attemptId:t})}function l(e,t,n=[]){return(0,i._xN)(r.nP,{courseId:e,attemptId:t},n)}function u(e,t,n){var s;let o=null===(s=null==n?void 0:n.questionAttempt)||void 0===s?void 0:s.attemptId;return t&&o?(0,i.Bi2)(r.nP,{courseId:e,attemptId:o,questionAttemptId:t},n):Promise.reject(Error("Missing the question attempt id and attempt id."))}function d(e,t,n,{paging:s,expandParams:o=[]}={}){return(0,i.GRx)(r.nP,{courseId:e,assessmentId:t,questionId:n},s,o)}},424851:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var r=n(408027),i=n(491288);async function s(e){let{courseId:t,limit:n,offset:s}=e,{paging:o,permissions:a,results:l}=await (0,r.w6S)(i.nP,t,{limit:n,offset:s});return{paging:o,permissions:a,questionTagIds:l.map(e=>e.id),questionTags:Object.assign({},...l.map(e=>({[e.id]:e})))}}},900860:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var r=n(408027),i=n(491288);async function s(e){let{paging:t,permissions:n,results:s}=await (0,r.sAK)(i.nP,e.courseId,{offset:0});return{courseId:e.courseId,paging:t,permissions:n,questionTypes:s.map(e=>e.key)}}},299380:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var r=n(491288),i=n(408027);async function s(e){return(0,i.jdu)(r.nP,e)}},258032:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(846409);async function i(e){return(0,r.gz)("/v1/utilities/userSessionDebugLog",{sessionDebug:e})}},347229:function(e,t,n){"use strict";n.d(t,{G:function(){return s},y:function(){return i}});var r=n(846409);async function i(e,t){return(0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/submissionServices",{courseId:e,columnId:t})).then(e=>e.submissionServices)}async function s(e,t,n){if(!e||!t)return Promise.reject();let i=n.uniqueHandle;return(0,r.r$)((0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/submissionServices/%uniqueHandle%",{courseId:e,columnId:t,uniqueHandle:i}),n)}},277313:function(e,t,n){"use strict";n.d(t,{fR:function(){return o},jG:function(){return s}});var r=n(846409);let i="/v1/themes";async function s(e){return(0,r.v_)(i,{...e})}async function o(e){return(0,r.Od)(`${i}/${e}`)}},4281:function(e,t,n){"use strict";n.d(t,{I:function(){return o},X:function(){return s}});var r=n(846409);let i="/v1/ultra-ui/ultrasettings";async function s(){return(0,r.U2)((0,r.Q2)(i,[]))}async function o(e){let t=(0,r.Q2)(i,[]);return(0,r.v_)(t,e)}},815006:function(e,t,n){"use strict";n.d(t,{jC:function(){return o}});var r=n(408027),i=n(491288),s=n(487783);(0,s.W)(r.ZII,i.nP),(0,s.W)(r.FP8,i.nP);let o=(0,s.W)(r.awk,i.nP)},789061:function(e,t,n){"use strict";n.d(t,{B:function(){return s}});var r=n(491288),i=n(408027);function s(e){return(0,i.xJl)(r.nP,e)}},981533:function(e,t,n){"use strict";n.d(t,{_:function(){return s},p:function(){return o}});var r=n(846409);let i="/v1/users/%userId%/preferences/%key%";function s(e){return null==e.userId&&(e.userId="me"),(0,r.U2)((0,r.Q2)(i,e))}async function o(e,t){let n=t&&t.userId||"me",s=(0,r.Q2)(i,{userId:n,key:e.key});return(0,r.gz)(s,e)}},801674:function(e,t,n){"use strict";n.d(t,{PB:function(){return l},hJ:function(){return u},n5:function(){return a}});var r=n(846409),i=n(771300);let s="/public/v1/pronouns",o=`${s}/%pronounId%`;async function a(e){var t;let n=e&&"nextPage"in e?await (0,r.U2)(e.nextPage):await (0,r.U2)((0,r.Q2)(s,{offset:null==e?void 0:e.offset,limit:null==e?void 0:e.limit}));if(null===(t=n.paging)||void 0===t?void 0:t.nextPage){let e=n.paging.nextPage.split("/"),t=e.findIndex(e=>"public"===e),r="";e.splice(t).forEach(e=>r=r+"/"+e),n.paging.nextPage=r}return n}async function l(e){try{return await (0,r.v_)(s,e)}catch(e){throw(0,i.A1)(e)}}async function u(e){return(0,r.Od)((0,r.Q2)(o,{pronounId:e}))}},487783:function(e,t,n){"use strict";function r(e,t){return(...n)=>e(t,...n)}n.d(t,{W:function(){return r}})},788098:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var r=n(796143);let i={getRenderedGroupSets:(e,t)=>{var n,i;let s=null!==(i=null===(n=e.groupWorkspace.groupSets.byCourseId[t])||void 0===n?void 0:n.map(t=>{var n;return{id:t,...e.groupWorkspace.groupSets.byId[t],assignedGroups:null===(n=r.Ys.getGroupsByGroupSetId(e,t))||void 0===n?void 0:n.map(e=>e.id)}}))&&void 0!==i?i:[];return s}}},11897:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(281699);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({containerPeekPanel:{position:"absolute",top:0,left:0,bottom:0,right:0,overflowY:"auto","& section":{borderBottom:`1px solid ${e.palette.border.main}`,marginTop:"20px",paddingBottom:"20px","&:first-child":{marginTop:"0px"},"&:last-child":{borderBottom:"none"}}},containerBody:{padding:"30px 30px 90px 30px"},description:{marginLeft:"20px",color:e.palette.text.hint},header:{"& .ms-Panel-subTitle, .ms-Panel-headerText":{paddingLeft:"16px",[e.breakpoints.up("xl")]:{paddingLeft:"30px"}}},footer:{position:"absolute",left:0,bottom:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}},additionalToolIcon:{display:"inline-block",verticalAlign:"top",paddingLeft:"10px",paddingTop:"3px"},additionalTools:{fontWeight:e.typography.fontWeightSemiBold},additionalToolTextContainer:{flex:"1",display:"inline-block",verticalAlign:"top",paddingLeft:"10px",minHeight:"32px",maxWidth:"272px",lineHeight:"16px",[e.breakpoints.up("sm")]:{minWidth:"200px"}},additionalToolText:{display:"block",fontWeight:e.typography.fontWeightBold},additionalToolLink:{display:"block"},descriptionBox:{"& div":{border:`1px solid ${e.palette.background.b5}`},"& textarea":{height:"146px"}},additionalToolsItemContainer:{display:"flex"},additionalToolsItemContainerTrashCanIcon:{display:"flex",justifyContent:"space-between"},unassignGroupButton:{marginLeft:"auto",marginRight:"10px",marginTop:"-5px","& [disabled] span":{color:e.palette.action.disabled}},groupsSectionHint:{marginTop:"10px",color:e.palette.text.hint},groupsSection:{"& button":{opacity:0,[e.breakpoints.down("xs")]:{opacity:1},"@media (hover: none) and (pointer: coarse)":{opacity:1},"&:focus":{opacity:1}},"&:hover":{"& button":{opacity:1,transition:"transform 100ms, background-color 250ms, color 250ms, box-shadow 250ms, opacity 250ms"}}}}))},776013:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(202784),i=n(311822),s=n(398435),o=n(410628);let a=({titleText:e,contentText:t,analyticsId:n,rootId:a,confirmationText:l,exitCallback:u})=>{let d=(0,o.q)();return r.createElement(i._X,{analyticsId:`${n}.dialog`,open:!0,onClose:()=>u(),"aria-labelledby":`${a}.dialog-title`},r.createElement(s.AnalyticsDialogTitle,{analyticsId:`${n}.dialog-title`,onClose:()=>u(),id:`${a}.dialog-title`},d(e)),r.createElement(s.AnalyticsDialogContent,{analyticsId:`${n}.dialog-content`},r.createElement(s.AnalyticsDialogContentText,{analyticsId:`${n}.dialog-description`,id:`${a}.dialog-description`},d(t))),r.createElement(s.AnalyticsDialogActions,{analyticsId:`${n}.dialog-events`},r.createElement(s.AnalyticsDefaultButton,{analyticsId:`${n}.dialog.cancel.button`,onClick:()=>u()},d("global.cancel")),r.createElement(s.AnalyticsPrimaryButton,{analyticsId:`${n}.dialog.confirm.button`,onClick:()=>u(!0)},d(l))))}},484514:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(281699);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({mathEditor:{"& .wrs_editor":{[e.breakpoints.down("sm")]:{whiteSpace:"normal","& .wrs_multipleRowPanel":{minHeight:"66px",height:"auto"},"& .wrs_toolbar .wrs_header":{width:"calc(100% - 18px)","& button":{marginLeft:0,marginRight:"4px"}}}}}}))},597901:function(e,t,n){"use strict";n.d(t,{t:function(){return c}});var r=n(202784),i=n(789644),s=n.n(i),o=n(188391),a=n.n(o);class l{constructor(e){if(l.isWirisLoaded&&l.apiBasePathUsedForLoading!==e)throw Error(`WIRIS editor source already loaded from ${l.apiBasePathUsedForLoading}. Cannot load from ${e}`);this.apiBasePath=e}async newInstance(e){if(l.isWirisLoaded)return Promise.resolve(l.getNewInstance(e));let t=await this.getConfiguration(),n=await l.getConfigurationjs(t.data.contextPath),r=n.data.editorUrl;return this.loadWirisJS(r,e)}convertToAbsoluteUrl(e){return`${this.apiBasePath}${e}`}getConfiguration(){let e=this.convertToAbsoluteUrl("/v1/editor/v4/configurations");return s().get(e)}static getConfigurationjs(e){return s().get(`${e}app/configurationjs`)}static getNewInstance(e){let t=e?{...e}:{language:"en"};return t.fontFamily||(t.fontFamily="stix"),null!=t.mml&&t.mml.trim()||delete t.mml,t.language||(t.language="en"),com.wiris.jsEditor.JsEditor.newInstance(t)}loadWirisJS(e,t){return new Promise((n,r)=>{a()(e,()=>{try{l.apiBasePathUsedForLoading=this.apiBasePath,l.isWirisLoaded=!0,n(l.getNewInstance(t))}catch(e){l.isWirisLoaded=!1,r(e)}})})}}l.apiBasePathUsedForLoading="",l.isWirisLoaded=!1;let u={initError:null,isReady:!1,wirisEditorInstance:null},d=(e,t)=>{switch(t.type){case"get-new-instance":return{...u};case"ready":return{...e,isReady:!0,wirisEditorInstance:t.wirisEditorInstance};case"error":return{...e,isReady:!1,initError:t.error};default:throw Error(`Unrecognized action: ${t}`)}},c=(e,t,n,i)=>{let[{isReady:s,initError:o,wirisEditorInstance:a},c]=(0,r.useReducer)(d,u);return(0,r.useEffect)(()=>{let r;let s=new l(t);return c({type:"get-new-instance"}),s.newInstance({mml:n,language:i,fontFamily:"stix"}).then(t=>{(r=t).insertInto(e.current),c({type:"ready",wirisEditorInstance:r})},e=>{c({type:"error",error:e})}),()=>{r&&r.close()}},[e]),(0,r.useEffect)(()=>{a&&a.getEditorModel().getParam("language")!==i&&a.setParam("language",i)},[i,a]),{initError:o,isReady:s,wirisEditorInstance:a}}},812809:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(202784),i=n(198022),s=n(821286),o=n(34625);let a=()=>{let[e]=r.useState(()=>(0,i.v4)());return e},l=r.forwardRef((e,t)=>{let{open:n}=e,i=a();return r.useEffect(()=>{let e=null!=n&&n;return e?o.g.getInstance().addModal(i):o.g.getInstance().removeModal(i),()=>{o.g.getInstance().removeModal(i)}},[i,n]),r.createElement(s.N,{...e,ref:t})});l.displayName="BbUiModalDialog"},820488:function(e,t,n){"use strict";var r=n(202784),i=n(198022),s=n(34625),o=n(398435);let a=()=>{let[e]=r.useState(()=>(0,i.v4)());return e},l=r.forwardRef((e,t)=>{let{open:n}=e,i=a();return r.useEffect(()=>{let e=null!=n&&n;return e?s.g.getInstance().addModal(i):s.g.getInstance().removeModal(i),()=>{s.g.getInstance().removeModal(i)}},[i,n]),r.createElement(o.AnalyticsModal,{...e,ref:t})});l.displayName="BbUiModal"},332170:function(e,t,n){"use strict";n.d(t,{D:function(){return l}});var r=n(202784),i=n(198022),s=n(609582),o=n(34625);let a=()=>{let[e]=r.useState(i.v4());return e},l=e=>{let{isOpen:t,hidden:n}=e,i=a();return r.useEffect(()=>{let e=!n;return void 0===n&&(e=void 0!==t&&t),e?o.g.getInstance().addModal(i):o.g.getInstance().removeModal(i),()=>{o.g.getInstance().removeModal(i)}},[i,n,t]),r.createElement(s.Dialog,{...e})};l.displayName="UltraModalDialog"},34625:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});class r{constructor(){this.modalList=new Set,this.modalDisplayingListeners=new Set,this.modalDisplayingLatch=!1}static getInstance(){return r.INSTANCE||(r.INSTANCE=new r),r.INSTANCE}updateListeners(){let e=this.isModalDisplaying();e!==this.modalDisplayingLatch&&(this.modalDisplayingLatch=e,this.modalDisplayingListeners.forEach(t=>{try{t(e)}catch(e){}}))}addModal(e){this.modalList.add(e),this.updateListeners()}removeModal(e){this.modalList.delete(e),this.updateListeners()}isModalDisplaying(){return this.modalList.size>0}addOnModalDisplayingChanged(e){this.modalDisplayingListeners.add(e)}removeOnModalDisplayingChanged(e){this.modalDisplayingListeners.delete(e)}}},167013:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});class r{async goToRoute(){throw Error("routeHandler.goToRoute called before setting routeHandler")}async goPeekState(){throw Error("routeHandler.goPeekState called before setting routeHandler")}async getPeekHref(){throw Error("routeHandler.getPeekHref called before setting routeHandler")}async leavePeekState(){throw Error("routeHandler.leavePeekState called before setting routeHandler")}async search(){throw Error("routeHandler.search called before setting routeHandler")}getHref(){throw Error("routeHandler.getHref called before setting routeHandler")}onRouteChanging(){throw Error("routeHandler.onRouteChanging called before setting routeHandler")}}let i=new class{constructor(){this.routeHandler=new r}setRouteHandler(e){this.routeHandler=e}goRoute(e,t){return this.routeHandler.goToRoute(e,t)}goPeekState(e){return this.routeHandler.goPeekState(e.routeName,e.getArgs())}getPeekHref(e,t){return this.routeHandler.getPeekHref(e.routeName,e.getArgs(),t)}getHref(e,t,n){return this.routeHandler.getHref(e,t,n)}leavePeekState(e){return this.routeHandler.leavePeekState(e)}search(e,t){return this.routeHandler.search(e,t)}onRouteChanging(e){return this.routeHandler.onRouteChanging(e)}}},643936:function(e,t,n){"use strict";n(608566)},930878:function(e,t,n){"use strict";n(345393)},290622:function(e,t,n){"use strict";n(345393)},529513:function(e,t,n){"use strict";n(345393)},730591:function(e,t,n){"use strict";n(345393)},428346:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});let r={ULTRA_SETTINGS_PEEK:"ultra-settings-admin",ULTRA_EDIT_APPROVED_PRONOUNS_PEEK:"ultra-edit-approved-pronouns-admin"}},989106:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});let r={ANNOUNCEMENT_DETAIL:"announcement-detail"}},345397:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});let r={ASSESSMENT:"assessment",ASSESSMENT_OVERVIEW:"assessment.overview",ASSESSMENT_DETAILS:"assessment-details",ASSESSMENT_EXTERNAL_OVERVIEW:"assessment.external-overview",ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:"flexible-attempt-grading",ASSESSMENT_PEER_GRADING:"peer-grading",ASSESSMENT_PEER_GRADING_SUBMISSION_FEEDBACK_TAB:"peer-grading.assessment-submission-feedback-tab",ASSESSMENT_SETTINGS:"assessment-settings",ASSESSMENT_SETTINGS_RUBRIC_SETTINGS:"assessment-settings.peek.rubric.mode",ASSESSMENT_ATTEMPT:"assessment.overview.attempt",ASSESSMENT_ATTEMPT_REVIEW:"assessment.overview.attempt.review",ASSESSMENT_ATTEMPT_REVIEW_FEEDBACK_TAB:"assessment.overview.attempt.review.assessment-submission-feedback-tab",ASSESSMENT_ATTEMPT_REVIEW_RUBRICS_TAB:"assessment.overview.attempt.review.inline-rubric",ASSESSMENT_ATTEMPT_REVIEW_ORIGINALITY_TAB:"assessment.overview.attempt.review.originality-tab",ASSESSMENT_ATTEMPT_IMS_PROCTORING:"assessment.ims-proctoring",ASSESSMENT_ATTEMPT_RESPONDUS_REQUIREMENT:"assessment.respondus-requirement",ASSESSMENT_MULTIPLE_ATTEMPTS_TAB:"assessment.overview.multiple-attempt"}},69609:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r={BASE_MESSAGES:"base.messages",BASE_PROCTORING_ATTEMPT:"base.proctoring-attempt",BASE_COURSES:"base.courses"}},345393:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});let r={CALENDAR_SETTINGS:"calendar-settings",CREATE_EVENT:"event-create",COURSE_SCHEDULE:"class-schedule",EDIT_EVENT:"event-edit",OFFICE_HOURS:"office-hours",VIEW_EVENT:"event-view"}},447670:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});let r={CONTENT_COLLECTION:"content-collection",CONTENT_COLLECTION_SETTINGS:"content-collection-settings",CONTENT_COLLECTION_PICKER:"content-collection-picker"}},693929:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});let r={CONTENT_MARKET:"content-market"}},897127:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});let r={CONDITIONAL_RELEASE_PEEK_PANEL:"conditional-release",BULK_EDIT_CONTENT_PEEK_PANEL:"bulk-edit-content",CREATE_CONTENT_PEEK_PANEL:"content-manage.create",CREATE_LEARNING_MODULE_PEEK_PANEL:"content-manage.create.learningModule",COPY_CONTENT_PEEK_PANEL:"content-manage.copy",EDIT_LEARNING_MODULE_PEEK_PANEL:"content-manage.edit.learningModule",DOCUMENT:"content-manage.edit.document",CREATE_CLOUD_DOCUMENT_MODULE_PEEK_PANEL:"content-manage.create.cloud-document",CREATE_FOLDER:"content-manage.create.folder",EDIT_FOLDER:"content-manage.edit.folder",COPY_REPORT_PEEK_PANEL:"content-manage.copy-report",IMPORT_CONTENT_PEEK_PANEL:"content-manage.import",IMPORT_REPORT_PEEK_PANEL:"content-manage.import-report",COPY_DETAILS_PEEK_PANEL:"content-manage.copy-details",GENERIC_STUDENT_PROGRES_PEEK_PANEL:"content-manage.progress",CONTENT_SEARCH:"content-search",GENERATE_STRUCTURE:"content-manage.generate-structure"}},241248:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});let r={ACCOMMODATION:"accommodation",COURSE:"course",COURSE_ANALYTICS:"course.analytics",COURSE_ANALYTICS_PREDICT_INSTRUCTOR:"course.analytics.predict-instructor",COURSE_ANALYTICS_PREDICT_STUDENT:"course.analytics.predict-student",COURSE_ANALYTICS_QUESTION_ANALYSIS:"course.analytics.question-analysis",COURSE_ANALYTICS_ACTIVITY:"course.analytics.course-activity",COURSE_ANALYTICS_REPORTS:"course.analytics.reports",COURSE_ANALYTICS_SCORM_REPORTS:"course.analytics.scorm-reports",COURSE_CALENDAR:"course.calendar",COURSE_CLASSIC:"course.classic",COURSE_CLASSIC_OUTLINE_ULTRA_COURSE_SELF_ENROLL:"course.classic.outline.ultra-course-self-enroll",COURSE_CONTENT_MARKET:"content-market",COURSE_DISCUSSION_PARTICIPANTS:"discussion-participants",COURSE_ENGAGEMENT:"course.engagement",COURSE_GRADES:"course.grades",COURSE_GRADES_MULTIPLE_ATTEMPT:"multiple-attempt-grading",COURSE_GRADES_VIEW_INDIVIDUAL_GRADES:"view-individual-grades",COURSE_MESSAGE:"message",COURSE_MESSAGES:"course.messages",COURSE_OUTLINE:"course.outline",COURSE_LTI:"lti",EDIT_BANNER:"course-edit-banner",EDIT_ENROLLMENT:"edit-enrollment",SETTINGS:"course-settings",COURSE_ANNOUNCEMENT_LIST:"course.announcements"}},897293:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});let r={COURSE_TASKS_LOGS:"course-tasks",COURSE_TASKS_PANEL:"course-tasks.tasks",COURSE_LOGS_PANEL:"course-tasks.logs"}},430552:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});let r={CONVERSATION:"conversations",DISCUSSION:"discussion",DISCUSSION_DETAILS:"discussion-details",DISCUSSION_PARTICIPANTS:"discussion-participants",DISCUSSION_SETTINGS:"discussion-settings",DISCUSSIONS_SETTINGS:"discussions-settings",DISCUSSION_VIEW:"discussion.view",DISCUSSION_VIEW_WITH_GRADING:"discussion.view.with-grading",SUBMISSION_LIST:"submission-list"}},251871:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});let r={EDIT_EXTERNAL_LINK:"content-manage.edit.link",WEB_LINK_LAUNCH_FRAME:"content-manage.url-launch-frame"}},37150:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});let r={PREVIEW_FILE:"preview-file",PREVIEW_FILE_EDIT:"preview-file-edit",EDIT_FILE:"content-manage.edit.file"}},958417:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});let r={ADD_GOALS:"goal-picker-legacy"}},775333:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});let r={CREATE_OFFLINE_ATTEMPT:"assessment-create-attempt",GRADE_AND_FEEDBACK:"grade-and-feedback",OFFLINE_GRADE_AND_FEEDBACK:"offline-feedback",GRADEBOOK_ITEM:"gradebook-item",GRADEBOOK_ITEM_ASSESSMENT:"gradebook-item.assessment",GRADE_ITEM_OVERALL_GRADE:"gradebook-item.overall-grade",GRADE_SETTING:"grade-setting",GRADING_SCHEMA:"grading-schema",GROUP_SUBMISSION_GRADING:"group-submission-grading",RECONCILE_GRADE:"reconcile-grade",SUBMISSION_DEEP_LINK:"submission-deep-link",SUBMISSION_DEEP_LINK_FEEDBACK_TAB:"submission-deep-link.assessment-submission-feedback-tab",SUBMISSION_GRADING:"submission-grading",SUBMISSION_GRADING_FEEDBACK_TAB:"submission-grading.assessment-submission-feedback-tab",SUBMISSION_GRADING_RUBRICS_TAB:"submission-grading.inline-rubric",SUBMISSION_GRADING_ORIGINALITY_TAB:"submission-grading.originality-tab",GROUP_SUBMISSION_GRADING_FEEDBACK_TAB:"group-submission-grading.assessment-submission-feedback-tab",GROUP_SUBMISSION_GRADING_RUBRICS_TAB:"group-submission-grading.inline-rubric",GROUP_SUBMISSION_GRADING_ORIGINALITY_TAB:"group-submission-grading.originality-tab",GRADEBOOK_GRID_ADVANCED_FILTERS:"gradebook-grid-advanced-filters",GRADE_DOWNLOAD_SETTINGS:"grade-download-setting",DOWNLOAD_TEST_RESULTS:"download-test-results",ATTEMPT_RECEIPT_SEARCH:"attempt-receipt-search",GRADE_UPLOAD:"grade-upload-setting",PER_GRADABLE_ITEM_SETTINGS:"per-gradable-item-settings",PER_ASSESSMENT_SETTINGS:"per-assessment-settings",PER_ASSESSMENT_GROUP_SETTING:"per-assessment-group-settings"}},663646:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});let r={VIEW:"course-group",VIEW_GROUP_ENROLL:"content-group-enroll",IMPORT_GROUP_SET:"import-group-set",EXPORT_GROUP_SET:"export-group-set",IMPORT_GROUP_MEMBERS:"import-groups-members",GROUP_MEMBERS_LIST:"group-members-list"}},412499:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});let r={INTEGRATION_BASE:"base.integration"}},961641:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});let r={JOURNAL:"journal",JOURNAL_VIEW:"journal.view",JOURNAL_DETAILS:"journal-details",JOURNAL_SETTINGS:"journal-settings",JOURNAL_VIEW_WITH_PARTICIPATION:"journal.view.with-participation",JOURNAL_PARTICIPATION_DETAIL:"journal-participation-detail",JOURNAL_SUBMISSION_FEEDBACK:"journal-submission-feedback",JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_EVALUATION:"journal.view.with-participation.peek.rubric-evaluation",JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_VIEW:"journal.view.with-participation.peek.rubric-view"}},733003:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});let r={LTI:"lti",LTI_LAUNCH:"lti.launch",LTI_LAUNCH_CLOUD_CREATE:"lti.launch-cloud-create",LTI_LAUNCH_FRAME:"lti.launch-frame",LTI_LAUNCH_PEEK:"lti.launch-peek",LTI_EDIT:"content-manage.edit.lti",LTI_EDIT_PLACEMENT:"content-manage.edit.placement",LTI_EDIT_CLOUD_DOCUMENT:"cloud-document-edit"}},402316:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});let r={PROFILE_BASE:"base.profile",UPDATE_AVATAR_PEEK:"update-avatar",UPDATE_LANGUAGE_PEEK:"update-language",UPDATE_PASSWORD_PEEK:"update-password",UPDATE_PROFILE_PEEK:"update-profile"}},713845:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});let r={QUESTION_ANALYSIS_REPORT:"question-analysis.report"}},608566:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});let r={QUESTION_BANKS:"question-banks",IMPORT_DETAILS:"import-details",EDIT_QUESTION_BANK:"question-bank-edit",CREATE_QUESTION_BANK:"question-bank-create"}},345109:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});let r={RUBRIC:"rubric",RUBRIC_MODE:"rubric.mode",RUBRIC_EVALUATION:"rubric-evaluation",RUBRIC_VIEW:"rubric-view"}},412152:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});let r={GRADEBOOK_ITEM_SCORM_SUBMISSIONS:"gradebook-item.scorm-submissions",SCORM_EDIT:"scorm-settings",SCORM_ANALYTICS_REPORT:"scorm-analytics-report",SCORM_LAUNCH_FRAME:"scorm-launch-frame",SCORM_OVERVIEW_STUDENT:"scorm-overview.student"}},73245:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=e=>{let t={};return e&&Object.keys(e).forEach(n=>{"object"==typeof e[n]?"domNode"!==n&&(t[n]=r(e[n])):t[n]=e[n]}),t},i=(e,t)=>JSON.stringify(r(e))===JSON.stringify(r(t))},202782:function(e,t,n){"use strict";var r,i;n.d(t,{r:function(){return r}}),(i=r||(r={})).AppendSection="appendSection",i.Outdated_PrependSection="prependSection"},756344:function(e,t,n){"use strict";n.d(t,{aV:function(){return o},uM:function(){return s},v$:function(){return i}});var r=n(753031);n(163273),n(625506),n(56164),n(721966);class i extends r.B_{constructor(){super("/v1/foundationsToken")}}class s extends r.B_{constructor(){super("/v1/foundationsToken/refresh")}}class o extends r.SB{constructor(){super("/v1/foundationsToken/context")}}},725409:function(e,t,n){"use strict";n(163273),n(625506),n(56164),n(721966)},334538:function(e,t,n){"use strict";n.d(t,{ti:function(){return d}});var r=n(408027),i=n(491288);n(163273),n(625506),n(56164),n(721966);let s="fnds.context";function o(e){return e.refreshToken&&e.refreshTokenExpiresAt&&e.accessToken&&e.expiresAt}function a(e){let t={accessToken:e.accessToken,refreshToken:e.refreshToken,refreshTokenExpiresAt:e.refreshTokenExpiresAt,expiresAt:e.expiresAt},n={...i.T2,foundationsToken:t};return(0,i.jQ)({...i.vc,foundationsApiSession:n}),sessionStorage.setItem(s,btoa(JSON.stringify(t))),n}async function l(){let e=Date.now()/1e3,t=function(){if(i.T2.foundationsToken&&o(i.T2.foundationsToken))return i.T2.foundationsToken;let e=function(){let e=sessionStorage.getItem(s);return e?JSON.parse(atob(e)):null}();return e&&o(e)?e:null}();if(t&&o(t)){if(t.expiresAt>e+300)return a(t);if(t.refreshTokenExpiresAt>e)try{let e=await (0,r.lLb)(i.nP,{refreshToken:t.refreshToken});return a(e)}catch(e){}}let n=await (0,r.yzO)(i.nP);return a(n)}async function u(){let e=Date.now()/1e3,t=i.T2.foundationsTokenContext;if(!t||t.expiresAt<e){let e=await (0,r.Yx$)(i.nP);return function(e){let t={};e.capabilities.forEach(e=>{t[e.capability]={region:e.region,stage:e.stage}});let n={...i.T2,foundationsTokenContext:{tenantId:e.tenantId,personId:e.personId,capabilities:t,expiresAt:e.expiresAt}};return(0,i.jQ)({...i.vc,foundationsApiSession:n}),n}(e)}return i.T2}let d={fetchFoundationsContext:u,fetchFoundationsToken:l}},96616:function(e,t,n){var r={"./af":195191,"./af.js":195191,"./ar":854358,"./ar-dz":571727,"./ar-dz.js":571727,"./ar-kw":98279,"./ar-kw.js":98279,"./ar-ly":787895,"./ar-ly.js":787895,"./ar-ma":611987,"./ar-ma.js":611987,"./ar-sa":852796,"./ar-sa.js":852796,"./ar-tn":312386,"./ar-tn.js":312386,"./ar.js":854358,"./az":457452,"./az.js":457452,"./be":579053,"./be.js":579053,"./bg":765428,"./bg.js":765428,"./bm":521569,"./bm.js":521569,"./bn":356212,"./bn-bd":224635,"./bn-bd.js":224635,"./bn.js":356212,"./bo":713667,"./bo.js":713667,"./br":100192,"./br.js":100192,"./bs":51802,"./bs.js":51802,"./ca":219118,"./ca.js":219118,"./cs":739990,"./cs.js":739990,"./cv":130557,"./cv.js":130557,"./cy":404227,"./cy.js":404227,"./da":395406,"./da.js":395406,"./de":887994,"./de-at":444139,"./de-at.js":444139,"./de-ch":786591,"./de-ch.js":786591,"./de.js":887994,"./dv":294649,"./dv.js":294649,"./el":914453,"./el.js":914453,"./en-au":148428,"./en-au.js":148428,"./en-ca":336972,"./en-ca.js":336972,"./en-gb":213224,"./en-gb.js":213224,"./en-ie":418843,"./en-ie.js":418843,"./en-il":632732,"./en-il.js":632732,"./en-in":176579,"./en-in.js":176579,"./en-nz":329851,"./en-nz.js":329851,"./en-sg":870442,"./en-sg.js":870442,"./eo":410654,"./eo.js":410654,"./es":463621,"./es-do":568791,"./es-do.js":568791,"./es-mx":167278,"./es-mx.js":167278,"./es-us":860717,"./es-us.js":860717,"./es.js":463621,"./et":772404,"./et.js":772404,"./eu":962944,"./eu.js":962944,"./fa":730496,"./fa.js":730496,"./fi":498137,"./fi.js":498137,"./fil":132872,"./fil.js":132872,"./fo":806545,"./fo.js":806545,"./fr":949090,"./fr-ca":213049,"./fr-ca.js":213049,"./fr-ch":12338,"./fr-ch.js":12338,"./fr.js":949090,"./fy":295088,"./fy.js":295088,"./ga":77812,"./ga.js":77812,"./gd":608374,"./gd.js":608374,"./gl":63649,"./gl.js":63649,"./gom-deva":452674,"./gom-deva.js":452674,"./gom-latn":844948,"./gom-latn.js":844948,"./gu":24033,"./gu.js":24033,"./he":710175,"./he.js":710175,"./hi":858055,"./hi.js":858055,"./hr":41678,"./hr.js":41678,"./hu":985111,"./hu.js":985111,"./hy-am":926530,"./hy-am.js":926530,"./id":119126,"./id.js":119126,"./is":811696,"./is.js":811696,"./it":198710,"./it-ch":838821,"./it-ch.js":838821,"./it.js":198710,"./ja":993974,"./ja.js":993974,"./jv":770648,"./jv.js":770648,"./ka":454731,"./ka.js":454731,"./kk":943501,"./kk.js":943501,"./km":484398,"./km.js":484398,"./kn":391825,"./kn.js":391825,"./ko":913729,"./ko.js":913729,"./ku":419670,"./ku.js":419670,"./ky":878797,"./ky.js":878797,"./lb":650627,"./lb.js":650627,"./lo":65859,"./lo.js":65859,"./lt":880355,"./lt.js":880355,"./lv":116594,"./lv.js":116594,"./me":245324,"./me.js":245324,"./mi":11689,"./mi.js":11689,"./mk":461308,"./mk.js":461308,"./ml":385241,"./ml.js":385241,"./mn":176320,"./mn.js":176320,"./mr":996771,"./mr.js":996771,"./ms":820503,"./ms-my":477748,"./ms-my.js":477748,"./ms.js":820503,"./mt":155534,"./mt.js":155534,"./my":62727,"./my.js":62727,"./nb":807550,"./nb.js":807550,"./ne":249899,"./ne.js":249899,"./nl":241228,"./nl-be":431225,"./nl-be.js":431225,"./nl.js":241228,"./nn":697130,"./nn.js":697130,"./oc-lnc":293130,"./oc-lnc.js":293130,"./pa-in":591282,"./pa-in.js":591282,"./pl":28190,"./pl.js":28190,"./pt":341549,"./pt-br":178135,"./pt-br.js":178135,"./pt.js":341549,"./ro":900307,"./ro.js":900307,"./ru":989272,"./ru.js":989272,"./sd":179248,"./sd.js":179248,"./se":674969,"./se.js":674969,"./si":365522,"./si.js":365522,"./sk":661581,"./sk.js":661581,"./sl":556428,"./sl.js":556428,"./sq":534611,"./sq.js":534611,"./sr":719821,"./sr-cyrl":20185,"./sr-cyrl.js":20185,"./sr.js":719821,"./ss":435029,"./ss.js":435029,"./sv":980939,"./sv.js":980939,"./sw":373107,"./sw.js":373107,"./ta":272304,"./ta.js":272304,"./te":872550,"./te.js":872550,"./tet":699717,"./tet.js":699717,"./tg":687669,"./tg.js":687669,"./th":594959,"./th.js":594959,"./tk":892661,"./tk.js":892661,"./tl-ph":552234,"./tl-ph.js":552234,"./tlh":394120,"./tlh.js":394120,"./tr":981111,"./tr.js":981111,"./tzl":453080,"./tzl.js":453080,"./tzm":188246,"./tzm-latn":125385,"./tzm-latn.js":125385,"./tzm.js":188246,"./ug-cn":548777,"./ug-cn.js":548777,"./uk":302014,"./uk.js":302014,"./ur":145953,"./ur.js":145953,"./uz":89716,"./uz-latn":487791,"./uz-latn.js":487791,"./uz.js":89716,"./vi":699816,"./vi.js":699816,"./x-pseudo":494450,"./x-pseudo.js":494450,"./yo":522556,"./yo.js":522556,"./zh-cn":407414,"./zh-cn.js":407414,"./zh-hk":750824,"./zh-hk.js":750824,"./zh-mo":688589,"./zh-mo.js":688589,"./zh-tw":163285,"./zh-tw.js":163285};function i(e){return n(s(e))}function s(e){if(!n.o(r,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=s,e.exports=i,i.id=96616},146723:function(e){e.exports='<svg width="51" height="51" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M17.429 13c-.226 0-.452.053-.66.163A1.448 1.448 0 0 0 16 14.444v10.112c0 .538.296 1.032.769 1.28a1.418 1.418 0 0 0 1.48-.097l7.142-5.055a1.454 1.454 0 0 0-.001-2.368l-7.143-5.056a1.41 1.41 0 0 0-.818-.26Z" id="a"/><mask id="b" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="10" height="13" fill="#fff"><use xlink:href="#a"/></mask></defs><g transform="translate(6 6)" fill="none" fill-rule="evenodd"><path d="M37.143 39H2.857C1.286 39 0 37.7 0 36.111V2.89C0 1.3 1.286 0 2.857 0h34.286C38.714 0 40 1.3 40 2.889V36.11C40 37.7 38.714 39 37.143 39Z" fill="#FFF"/><path d="M7 39H2.8C1.26 39 0 37.7 0 36.111V2.89C0 1.3 1.26 0 2.8 0H7v39Zm26 0h4.2c1.54 0 2.8-1.3 2.8-2.889V2.89C40 1.3 38.74 0 37.2 0H33v39Z" fill="#CEE0F3"/><path d="M6 1h1v37H6V1Zm27 0h1v37h-1V1Zm4.538 0C38.342 1 39 1.666 39 2.48v34.04c0 .814-.658 1.48-1.462 1.48H2.462A1.475 1.475 0 0 1 1 36.52V2.48C1 1.666 1.658 1 2.462 1h35.076ZM2.858 0C1.285 0 0 1.3 0 2.889V36.11C0 37.7 1.286 39 2.857 39h34.286C38.714 39 40 37.7 40 36.111V2.89C40 1.3 38.714 0 37.143 0H2.857Z" fill="#777677"/><use stroke="#777677" mask="url(#b)" stroke-width="2" fill="#CEE0F3" xlink:href="#a"/><path fill="#777677" d="M1 19h6v1H1zM34 19h6v1h-6zM1 31h6v1H1zM34 31h6v1h-6zM1 25h6v1H1zM34 25h6v1h-6zM1 13h6v1H1zM34 13h6v1h-6zM1 7h6v1H1zM34 7h6v1h-6z"/></g></svg>'},893254:function(e,t,n){"use strict";let r;n.d(t,{Z:function(){return d}});var i=n(745635),s=n(18447),o=n(579633);let a=e=>{let t=/locales\/([a-zA-Z0-9\-]+)\//.exec(e);if(!t||t.length<=0)throw Error(`Could not find locale in path ${e}`);return t[1]};var l=n(693879);class u extends i.Babelfish{getBundlePath(e,t){if(s.default.unitTesting){if(t.match(/^force\!/))t=t.replace(/^force\!/,"");else{if(!t.match(/^forcereset$/))return;this.reset();return}}return t.indexOf("://")>0?t:"locales/"+this.normalizeLocale(e)+"/_combined.json"}loadIncludedBundle(e){let t=a(e);return new o.InstantPromise(r=>{var i;n(320922)("./"+e.replace("locales/","").replace(t,this.normalizeLocale(t))).then(e=>r(JSON.parse(null!==(i=null==e?void 0:e.default)&&void 0!==i?i:e))).catch(()=>r(null))})}loadPath(e){return e.indexOf("://")>=0?l.h.loadFromRemotePath(e):this.loadIncludedBundle(e)}load(e){return this.loadedBundles[e]||(this.loadedBundles[e]=this.loadPath(e)),this.loadedBundles[e]}onOverrideAdded(e){this.preferredLocalesCache=new Map}loadBundles(e){"string"==typeof e&&(e=[e]);let t=[];return this.normalizeLocales(e).forEach(e=>{t.push(this.overrideLoader.getOverridePathForLocale(e).then(e=>{if(e&&e.path)return this.loadBundle(e.ultraLocale,e.path)}),super.loadBundles(e))}),o.InstantPromise.all(t)}getPreferredLocales(e){"string"==typeof e&&(e=[e]);let t=e.join("|");if(!this.preferredLocalesCache.has(t)){let n=[];this.normalizeLocales(e).forEach(e=>{n=n.concat(this.overrideLoader.getPreferredLocales(e))}),this.preferredLocalesCache.set(t,Array.from(new Set(n)))}return this.preferredLocalesCache.get(t)}getLocaleForFormatting(e){let t=this.overrideLoader.getBaseLocale(e);return t||e}constructor(e,t=l.h.getInstance()){super(e),this.preferredLocalesCache=new Map,this.overrideLoader=t,this.overrideLoader.onOverrideAdded(this.onOverrideAdded.bind(this))}}var d=class{static getInstance(){return null==r&&(r=new u({fallbackLocales:[]})),r}static getTestInstance(e){if(!s.default.unitTesting)throw Error("Use getInstance() instead");return new u({fallbackLocales:[]},e)}}},693879:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(325135);function i(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}class s{static getInstance(){return this.instance||(this.instance=new s),this.instance}onOverrideAdded(e){this.overrideAddedHandlers.add(e)}notifyOverrideAdded(e){this.overrideAddedHandlers.forEach(t=>{try{t(e)}catch(e){}})}static normalizeLocale(e){return e.toLocaleLowerCase().replace(/_/g,"-")}get root(){return this._root}get siteId(){return this._siteId}setOverrideLocation(e,t){e.endsWith("/")&&(e=e.substring(0,e.length-1)),this._root=e,this._siteId=t}addOverrideBundle(e,t){e=s.normalizeLocale(e);let n=s.normalizeLocale(t),r=s.getFallbackLocale(n);this.overrideBundles[e]={ultraLocale:n,localeForPath:t},this.baseLocaleMap[e]=this.baseLocaleMap[n]=r,this.notifyOverrideAdded(e)}getOverridePathForLocale(e){return(e=s.normalizeLocale(e),this.overrideBundles[e])?(this.overridePathPromises[e]||(this.overridePathPromises[e]=this.internalGetOverridePath(e)),this.overridePathPromises[e]):Promise.resolve(null)}async internalGetOverridePath(e){let t=this.overrideBundles[e].ultraLocale,n=this.overrideBundles[e].localeForPath,r=await this.getPathToLocale(n);return t&&r?{path:r,ultraLocale:t}:null}static getFallbackLocale(e){let t=e.split("-");return t.slice(0,-1).join("-")}getPreferredLocales(e){if(e=s.normalizeLocale(e),!this.overrideBundles[e])return[e];let t=this.overrideBundles[e].ultraLocale,n=s.getFallbackLocale(t);return[t,n].filter(e=>!!e)}async getPathToLocale(e){if(!this._root||!this._siteId)return null;try{if(void 0===this.pathMap[e]){let t=`${this._root}/${this._siteId}/mapping.json`,n=await fetch(t);if(!n.ok)return this.pathMap[e]=null,null;let r=await n.json();if(!r[e])return this.pathMap[e]=null,null;this.pathMap[e]=`${this._root}${r[e][0].url}`}return this.pathMap[e]}catch(e){return null}}getBaseLocale(e){return(e=s.normalizeLocale(e),void 0===this.baseLocaleMap[e])?"":this.baseLocaleMap[e]||"en"}static async loadFromRemotePath(e){try{let t=await fetch(e);if(!t.ok)return{};return await t.json()}catch(e){return{}}}constructor(){this.overrideBundles={},this.baseLocaleMap={},this.pathMap={},this.overrideAddedHandlers=new Set,this.overridePathPromises={}}}i([(0,r.LRUMemoize)()],s,"normalizeLocale",null),i([(0,r.LRUMemoize)(2)],s,"getFallbackLocale",null)},692242:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(579633),i=n.n(r),s=n(325135),o=n(693879);class a extends i(){setUltraLocaleData(e){this.options.localeData=e}_load(e){return a._loadPromises[e]||(a._loadPromises[e]=new r.InstantPromise(t=>{var r;n(178823)("./"+e+"/_combined.json").then(e=>t(JSON.parse(null!==(r=null==e?void 0:e.default)&&void 0!==r?r:e))).catch(()=>t(null))})),a._loadPromises[e]}getPreferredLocales(e){return[e].concat(super.getPreferredLocales(this.overrideLoader.getBaseLocale(e)||e))}constructor(e,t={defaultLocale:"en",production:!1,urlRoot:""}){super(e,t),this.babelfishInstance=e,this.options=t,this.overrideLoader=o.h.getInstance()}}a._loadPromises={},function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([(0,s.LRUMemoize)(2)],a.prototype,"getPreferredLocales",null)},18447:function(e,t,n){"use strict";n.d(t,{default:function(){return g}});var r={};n.r(r),n.d(r,{default:function(){return s}});var i=n(276635),s={},o={batchRestAPI:!0,collab:!0,courseNotice:!1,devtools_allyMock:!1,devtools_digestHub:!0,devtools_disableFtue:!1,devtools_enableSetLangQuery:!1,externalCourse:!1,httpEase:!0,journal:!1,learnApiCaching:!0,organizationA4L:!1,organizationPredict:!1,overallGradeAlert:!1,predictSisCards:!1,rightToLeftSupport:!0,useReactRendererForDocumentEditor:!1,multipleAttemptsInGroupAssessments:!0};let a={externalCourse:!1,devtools_allyMock:!1,devtools_disableFtue:!1},l={externalCourse:!1,devtools_allyMock:!1,devtools_disableFtue:!1},u={devtools_enableSetLangQuery:!0},d=function(e,t,n){return!(e in n)||n[e]},c=(e,t,n)=>e in n?n[e]:o[e];var p={"^(https://ultra-integ.int.bbpd.io)$":(e,t)=>d(e,t,a),"^(https://ultra-canary.bbpd.io)$":(e,t)=>d(e,t,l),".*(bbpd.io)":(e,t)=>c(e,t,u)},E=n(759485),m=(()=>{let e={...o},t=E.mg(),n=p[Object.keys(p).find(e=>!!t.match(e))];if("all"===n)for(let t of Object.keys(e))e[t]=!0;else if("function"==typeof n)for(let t of Object.keys(e))e[t]=n(t,e[t]);else null!=n&&Object.assign(e,n);return e})();let h={apiBasePath:"/learn/api",basePath:"/ultra",buildInfo:"undefined"!=typeof window&&window.__buildInfo||{},chartsApiBasePath:"/charts/api",institutionApiBasePath:"/institution/api",partnerCloudBasePath:"/webapps/partner-cloud/app",defaultBasePage:"base.recentActivity",localeLoader:{fallbackLocales:["en-us","en"]},directivesPerf:!1,features:Object.assign(m,{}),storageKeyForFeatureFlags:"bb_feature_flags",showFeaturePrototypes:!1,errorDetails:!1,infiniteScrollThrottleMS:500,production:!0,unitTesting:!1,showComingSoonScreens:!0,showDigestHud:!0,streamLoadingInterval:12e4,telemetryApiBasePath:"/telemetry/api",telemetryApiTimeoutMS:2e3,telemetryAppId:"ultra",trialSiteSuggestionsUrl:"https://community.blackboard.com/community/ideas",trialSiteContactSalesUrl:"http://bbbb.blackboard.com/EducatorPreviewcontact",trialSiteLiveChatUrl:"https://chat.edusupportcenter.com/chat/websiteChat?short_name=educatorpreview&key=educatorpreview1707",trialSiteSupportPhone:"1-844-435-2162",cloudStorageIntegrationServices:[],disableAllFtueGuidance:!1,allyAutoUpdateInterval:500,allyClearCacheInterval:1e4,allyInitializationTimeout:1e4,cloudStorageIntegrationInitializationTimeout:1e4},b=JSON.parse(sessionStorage.getItem(h.storageKeyForFeatureFlags)||"{}");i.isEmpty(b)||(console.warn("Attention! Feature flags are overridden by client setting!",b),console.warn("To clear, please logout and re-login"),Object.assign(h.features,b)),r&&Object.assign(h,r),h.production=!0;var g=h},458704:function(e,t,n){n.p=window.publicPath||n.p}}]);